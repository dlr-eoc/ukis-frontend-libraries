(self.webpackChunkdemo_maps=self.webpackChunkdemo_maps||[]).push([[179],{394:(Vn,Dn,ft)=>{Vn=ft.nmd(Vn);var Dt=function(Re,de,Ee){var C={singleFile:!0,Util:{}};return C.Util.extend=function(w,R){if(w=w||{},R){for(var O in R){var k=R[O];void 0!==k&&(w[O]=k)}!(typeof window<"u"&&null!==window&&"function"==typeof window.Event&&R instanceof window.Event)&&R.hasOwnProperty&&R.hasOwnProperty("toString")&&(w.toString=R.toString)}return w},C.Class=function(){for(var k,W,X,w=function(){this.initialize.apply(this,arguments)},R={},O=function(){},ee=0,Y=arguments.length;ee<Y;++ee)"function"==typeof(X=arguments[ee])?(0===ee&&Y>1&&(W=X.prototype.initialize,X.prototype.initialize=O,R=new X,void 0===W?delete X.prototype.initialize:X.prototype.initialize=W),k=X.prototype):k=X,C.Util.extend(R,k);return w.prototype=R,w},C.XML={XMLNS_NS:"http://www.w3.org/2000/xmlns/",XMLNS_P:"xmlns"},C.DOM={isDomImplementationAvailable:function(){return typeof Re<"u"||!!(typeof document<"u"&&C.Util.Type.exists(document.implementation)&&C.Util.Type.isFunction(document.implementation.createDocument))},createDocument:function(){if(typeof Re<"u")return(new Re.DOMImplementation).createDocument();if(typeof document<"u"&&C.Util.Type.exists(document.implementation)&&C.Util.Type.isFunction(document.implementation.createDocument))return document.implementation.createDocument("","",null);if(typeof ActiveXObject<"u")return new ActiveXObject("MSXML2.DOMDocument");throw new Error("Error created the DOM document.")},serialize:function(w){if(C.Util.Ensure.ensureExists(w),typeof Re<"u")return(new Re.XMLSerializer).serializeToString(w);if(C.Util.Type.exists(XMLSerializer))return(new XMLSerializer).serializeToString(w);if(C.Util.Type.exists(w.xml))return w.xml;throw new Error("Could not serialize the node, neither XMLSerializer nor the [xml] property were found.")},parse:function(w){if(C.Util.Ensure.ensureExists(w),typeof Re<"u")return(new Re.DOMParser).parseFromString(w,"application/xml");if(typeof DOMParser<"u")return(new DOMParser).parseFromString(w,"application/xml");if(typeof ActiveXObject<"u"){var R=C.DOM.createDocument("","");return R.loadXML(w),R}var O="data:text/xml;charset=utf-8,"+encodeURIComponent(w),k=new XMLHttpRequest;return k.open("GET",O,!1),k.overrideMimeType&&k.overrideMimeType("text/xml"),k.send(null),k.responseXML},load:function(w,R,O){C.Request.INSTANCE.issue(w,function(W){var X;if(C.Util.Type.exists(W.responseXML)&&C.Util.Type.exists(W.responseXML.documentElement))X=W.responseXML;else{if(!C.Util.Type.isString(W.responseText))throw new Error("Response does not have valid [responseXML] or [responseText].");X=C.DOM.parse(W.responseText)}R(X)},function(W){throw new Error("Could not retrieve XML from URL ["+w+"].")},O)},xlinkFixRequired:null,isXlinkFixRequired:function(){if(null===C.DOM.xlinkFixRequired)if(typeof navigator>"u")C.DOM.xlinkFixRequired=!1;else if(navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)){var w=C.DOM.createDocument(),R=w.createElement("test");R.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","urn:test"),w.appendChild(R);var O=C.DOM.serialize(w);C.DOM.xlinkFixRequired=-1===O.indexOf("xmlns:xlink")}else C.DOM.xlinkFixRequired=!1;return C.DOM.xlinkFixRequired}},C.Request=C.Class({factories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.6.0")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return typeof de<"u"?new(0,de.XMLHttpRequest):null}],initialize:function(){},issue:function(w,R,O,k){C.Util.Ensure.ensureString(w),C.Util.Type.exists(R)?C.Util.Ensure.ensureFunction(R):R=function(){},C.Util.Type.exists(O)?C.Util.Ensure.ensureFunction(O):O=function(){},C.Util.Type.exists(k)?C.Util.Ensure.ensureObject(k):k={};var W=this.createTransport(),X=C.Util.Type.isString(k.method)?k.method:"GET",ee=!C.Util.Type.isBoolean(k.async)||k.async,Y=C.Util.Type.isString(k.proxy)?k.proxy:C.Request.PROXY,ne=C.Util.Type.isString(k.user)?k.user:null,be=C.Util.Type.isString(k.password)?k.password:null;if(C.Util.Type.isString(Y)&&0===w.indexOf("http")&&(w=Y+encodeURIComponent(w)),C.Util.Type.isString(ne)?W.open(X,w,ee,ne,be):W.open(X,w,ee),C.Util.Type.isObject(k.headers))for(var Me in k.headers)k.headers.hasOwnProperty(Me)&&W.setRequestHeader(Me,k.headers[Me]);var Ge=C.Util.Type.exists(k.data)?k.data:null;if(ee){var gt=this;typeof window<"u"?(W.onreadystatechange=function(){gt.handleTransport(W,R,O)},window.setTimeout(function(){W.send(Ge)},0)):(W.onreadystatechange=function(){gt.handleTransport(W,R,O)},W.send(Ge))}else W.send(Ge),this.handleTransport(W,R,O);return W},handleTransport:function(w,R,O){4==w.readyState&&((!w.status||w.status>=200&&w.status<300)&&R(w),w.status&&(w.status<200||w.status>=300)&&O(w))},createTransport:function(){for(var w=0,R=this.factories.length;w<R;w++)try{var O=this.factories[w]();if(null!==O)return O}catch{}throw new Error("Could not create XML HTTP transport.")},CLASS_NAME:"Jsonix.Request"}),C.Request.INSTANCE=new C.Request,C.Request.PROXY=null,C.Schema={},C.Model={},C.Util.Type={exists:function(w){return typeof w<"u"&&null!==w},isUndefined:function(w){return typeof w>"u"},isString:function(w){return"string"==typeof w},isBoolean:function(w){return"boolean"==typeof w},isObject:function(w){return"object"==typeof w},isFunction:function(w){return"function"==typeof w},isNumber:function(w){return"number"==typeof w&&!isNaN(w)},isNumberOrNaN:function(w){return w===+w||"[object Number]"===Object.prototype.toString.call(w)},isNaN:function(w){return C.Util.Type.isNumberOrNaN(w)&&isNaN(w)},isArray:function(w){return!(!(w&&w.concat&&w.unshift)||w.callee)},isDate:function(w){return!!(w&&w.getTimezoneOffset&&w.setUTCFullYear)},isRegExp:function(w){return!(!(w&&w.test&&w.exec)||!w.ignoreCase&&!1!==w.ignoreCase)},isNode:function(w){return"object"==typeof Node||"function"==typeof Node?w instanceof Node:w&&"object"==typeof w&&"number"==typeof w.nodeType&&"string"==typeof w.nodeName},isEqual:function(w,R,O){var k=C.Util.Type.isFunction(O),X=Object.keys||function(gn){if(C.Util.Type.isArray(gn))return function(gn,gi,yi){for(var Vi=slice.call(arguments),Qe=Vi.length<=1,Q=Qe?0:Vi[0],q=Vi[2]||1,we=Math.max(Math.ceil(((Qe?Vi[0]:Vi[1])-Q)/q),0),pe=0,Le=new Array(we);pe<we;)Le[pe++]=Q,Q+=q;return Le}(0,gn.length);var gi=[];for(var yi in gn)gn.hasOwnProperty(yi)&&(gi[gi.length]=yi);return gi};if(w===R||C.Util.Type.isNaN(w)&&C.Util.Type.isNaN(R))return!0;var ee=typeof w,Y=typeof R;if(ee!=Y)return k&&O("Types differ ["+ee+"], ["+Y+"]."),!1;if(w==R)return!0;if(!w&&R||w&&!R)return k&&O("One is falsy, the other is truthy."),!1;if(C.Util.Type.isDate(w)&&C.Util.Type.isDate(R))return w.getTime()===R.getTime();if(C.Util.Type.isNaN(w)&&C.Util.Type.isNaN(R))return!1;if(C.Util.Type.isRegExp(w)&&C.Util.Type.isRegExp(R))return w.source===R.source&&w.global===R.global&&w.ignoreCase===R.ignoreCase&&w.multiline===R.multiline;if(C.Util.Type.isNode(w)&&C.Util.Type.isNode(R)){var ne=C.DOM.serialize(w),be=C.DOM.serialize(R);return ne===be||(k&&(O("Nodes differ."),O("A="+ne),O("B="+be)),!1)}if("object"!==ee)return!1;if(C.Util.Type.isArray(w)&&w.length!==R.length)return k&&(O("Lengths differ."),O("A.length="+w.length),O("B.length="+R.length)),!1;var Me=X(w),Ge=X(R);if(Me.length!==Ge.length){k&&O("Different number of properties ["+Me.length+"], ["+Ge.length+"].");for(var gt=0;gt<Me.length;gt++)k&&O("A ["+Me[gt]+"]="+w[Me[gt]]);for(var xt=0;xt<Ge.length;xt++)k&&O("B ["+Ge[xt]+"]="+R[Ge[xt]]);return!1}for(var Tt=0;Tt<Me.length;Tt++){var vn=Me[Tt];if(!(vn in R)||!C.Util.Type.isEqual(w[vn],R[vn],O))return k&&(O("One of the properties differ."),O("Key: ["+vn+"]."),O("Left: ["+w[vn]+"]."),O("Right: ["+R[vn]+"].")),!1}return!0},cloneObject:function(w,R){for(var O in R=R||{},w)w.hasOwnProperty(O)&&(R[O]=w[O]);return R},defaultValue:function(){var w=arguments;if(0!==w.length){for(var R=w[w.length-1],O=typeof R,k=0;k<w.length-1;k++){var W=w[k];if(typeof W===O)return W}return R}}},C.Util.NumberUtils={isInteger:function(w){return C.Util.Type.isNumber(w)&&w%1==0}},C.Util.StringUtils={trim:String.prototype.trim?function(w){return C.Util.Ensure.ensureString(w),w.trim()}:function(w){return C.Util.Ensure.ensureString(w),w.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},isEmpty:function(w){var R=w.length;if(!R)return!0;for(var O=0;O<R;O++){var k=w[O];if(" "!==k){if(k>"\r"&&k<"\x85")return!1;if(k<"\xa0"){if(k<"\t")return!1;if(k>"\x85")return!1}else if(k>"\xa0")if(k<"\u2028"){if(k<"\u180e"){if(k<"\u1680")return!1;if(k>"\u1680")return!1}else if(k>"\u180e"){if(k<"\u2000")return!1;if(k>"\u200a")return!1}}else if(k>"\u2029")if(k<"\u205f"){if(k<"\u202f")return!1;if(k>"\u202f")return!1}else if(k>"\u205f"){if(k<"\u3000")return!1;if(k>"\u3000")return!1}}}return!0},isNotBlank:function(w){return C.Util.Type.isString(w)&&!C.Util.StringUtils.isEmpty(w)},whitespaceCharacters:"\t\n\v\f\r \x85\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000",whitespaceCharactersMap:{"\t":!0,"\n":!0,"\v":!0,"\f":!0,"\r":!0," ":!0,"\x85":!0,"\xa0":!0,"\u1680":!0,"\u180e":!0,"\u2000":!0,"\u2001":!0,"\u2002":!0,"\u2003":!0,"\u2004":!0,"\u2005":!0,"\u2006":!0,"\u2007":!0,"\u2008":!0,"\u2009":!0,"\u200a":!0,"\u2028":!0,"\u2029":!0,"\u202f":!0,"\u205f":!0,"\u3000":!0},splitBySeparatorChars:function(w,R){C.Util.Ensure.ensureString(w),C.Util.Ensure.ensureString(R);var O=w.length;if(0===O)return[];if(1===R.length)return w.split(R);for(var k=[],W=1,X=0,ee=0,Y=!1;X<O;)R.indexOf(w.charAt(X))>=0?(!!Y&&(-1==W++&&(X=O),k.push(w.substring(ee,X)),Y=!1),ee=++X):(Y=!0,X++);return!!Y&&k.push(w.substring(ee,X)),k}},C.Util.Ensure={ensureBoolean:function(w){if(!C.Util.Type.isBoolean(w))throw new Error("Argument ["+w+"] must be a boolean.")},ensureString:function(w){if(!C.Util.Type.isString(w))throw new Error("Argument ["+w+"] must be a string.")},ensureNumber:function(w){if(!C.Util.Type.isNumber(w))throw new Error("Argument ["+w+"] must be a number.")},ensureNumberOrNaN:function(w){if(!C.Util.Type.isNumberOrNaN(w))throw new Error("Argument ["+w+"] must be a number or NaN.")},ensureInteger:function(w){if(!C.Util.Type.isNumber(w))throw new Error("Argument ["+w+"] must be an integer, but it is not a number.");if(!C.Util.NumberUtils.isInteger(w))throw new Error("Argument ["+w+"] must be an integer.")},ensureDate:function(w){if(!(w instanceof Date))throw new Error("Argument ["+w+"] must be a date.")},ensureObject:function(w){if(!C.Util.Type.isObject(w))throw new Error("Argument ["+w+"] must be an object.")},ensureArray:function(w){if(!C.Util.Type.isArray(w))throw new Error("Argument ["+w+"] must be an array.")},ensureFunction:function(w){if(!C.Util.Type.isFunction(w))throw new Error("Argument ["+w+"] must be a function.")},ensureExists:function(w){if(!C.Util.Type.exists(w))throw new Error("Argument ["+w+"] does not exist.")}},C.XML.QName=C.Class({key:null,namespaceURI:null,localPart:null,prefix:null,string:null,initialize:function(w,R,O){var k,W,X;if(C.Util.Type.exists(R))if(C.Util.Type.exists(O))k=C.Util.Type.exists(w)?w:"",W=R,X=C.Util.Type.exists(O)?O:"";else{k=C.Util.Type.exists(w)?w:"",W=R;var ne=R.indexOf(":");ne>0&&ne<R.length?(X=R.substring(0,ne),W=R.substring(ne+1)):(X="",W=R)}else k="",W=w,X="";this.namespaceURI=k,this.localPart=W,this.prefix=X,this.key=(""!==k?"{"+k+"}":"")+W,this.string=(""!==k?"{"+k+"}":"")+(""!==X?X+":":"")+W},toString:function(){return this.string},toCanonicalString:function(w){return w&&w.getPrefix(this.namespaceURI,this.prefix),this.prefix+(""===this.prefix?"":":")+this.localPart},clone:function(){return new C.XML.QName(this.namespaceURI,this.localPart,this.prefix)},equals:function(w){return!!w&&this.namespaceURI==w.namespaceURI&&this.localPart==w.localPart},CLASS_NAME:"Jsonix.XML.QName"}),C.XML.QName.fromString=function(w,R,O){var X,ee,k=w.indexOf("{"),W=w.lastIndexOf("}");0===k&&W>0&&W<w.length?(X=w.substring(1,W),ee=w.substring(W+1)):(X=null,ee=w);var ne,be,Y=ee.indexOf(":");return Y>0&&Y<ee.length?(ne=ee.substring(0,Y),be=ee.substring(Y+1)):(ne="",be=ee),null===X&&(""===ne&&C.Util.Type.isString(O)?X=O:R&&(X=R.getNamespaceURI(ne))),C.Util.Type.isString(X)||(X=O||""),new C.XML.QName(X,be,ne)},C.XML.QName.fromObject=function(w){if(C.Util.Ensure.ensureObject(w),w instanceof C.XML.QName||C.Util.Type.isString(w.CLASS_NAME)&&"Jsonix.XML.QName"===w.CLASS_NAME)return w;var R=w.localPart||w.lp||null;return C.Util.Ensure.ensureString(R),new C.XML.QName(w.namespaceURI||w.ns||"",R,w.prefix||w.p||"")},C.XML.QName.fromObjectOrString=function(w,R,O){return C.Util.Type.isString(w)?C.XML.QName.fromString(w,R,O):C.XML.QName.fromObject(w)},C.XML.QName.key=function(w,R){if(C.Util.Ensure.ensureString(R),w){var O=R.indexOf(":");return"{"+w+"}"+(O>0&&O<R.length?R.substring(O+1):R)}return R},C.XML.Calendar=C.Class({year:NaN,month:NaN,day:NaN,hour:NaN,minute:NaN,second:NaN,fractionalSecond:NaN,timezone:NaN,date:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Util.Type.exists(w.year)?(C.Util.Ensure.ensureInteger(w.year),C.XML.Calendar.validateYear(w.year),this.year=w.year):this.year=NaN,C.Util.Type.exists(w.month)?(C.Util.Ensure.ensureInteger(w.month),C.XML.Calendar.validateMonth(w.month),this.month=w.month):this.month=NaN,C.Util.Type.exists(w.day)?(C.Util.Ensure.ensureInteger(w.day),C.Util.NumberUtils.isInteger(w.year)&&C.Util.NumberUtils.isInteger(w.month)?C.XML.Calendar.validateYearMonthDay(w.year,w.month,w.day):C.Util.NumberUtils.isInteger(w.month)?C.XML.Calendar.validateMonthDay(w.month,w.day):C.XML.Calendar.validateDay(w.day),this.day=w.day):this.day=NaN,C.Util.Type.exists(w.hour)?(C.Util.Ensure.ensureInteger(w.hour),C.XML.Calendar.validateHour(w.hour),this.hour=w.hour):this.hour=NaN,C.Util.Type.exists(w.minute)?(C.Util.Ensure.ensureInteger(w.minute),C.XML.Calendar.validateMinute(w.minute),this.minute=w.minute):this.minute=NaN,C.Util.Type.exists(w.second)?(C.Util.Ensure.ensureInteger(w.second),C.XML.Calendar.validateSecond(w.second),this.second=w.second):this.second=NaN,C.Util.Type.exists(w.fractionalSecond)?(C.Util.Ensure.ensureNumber(w.fractionalSecond),C.XML.Calendar.validateFractionalSecond(w.fractionalSecond),this.fractionalSecond=w.fractionalSecond):this.fractionalSecond=NaN,C.Util.Type.exists(w.timezone)?C.Util.Type.isNaN(w.timezone)?this.timezone=NaN:(C.Util.Ensure.ensureInteger(w.timezone),C.XML.Calendar.validateTimezone(w.timezone),this.timezone=w.timezone):this.timezone=NaN;var R=new Date(0);R.setUTCFullYear(this.year||1970),R.setUTCMonth(this.month-1||0),R.setUTCDate(this.day||1),R.setUTCHours(this.hour||0),R.setUTCMinutes(this.minute||0),R.setUTCSeconds(this.second||0),R.setUTCMilliseconds(1e3*(this.fractionalSecond||0));var O=-6e4*(this.timezone||0);this.date=new Date(R.getTime()+O)},CLASS_NAME:"Jsonix.XML.Calendar"}),C.XML.Calendar.MIN_TIMEZONE=-840,C.XML.Calendar.MAX_TIMEZONE=840,C.XML.Calendar.DAYS_IN_MONTH=[31,29,31,30,31,30,31,31,30,31,30,31],C.XML.Calendar.fromObject=function(w){return C.Util.Ensure.ensureObject(w),C.Util.Type.isString(w.CLASS_NAME)&&"Jsonix.XML.Calendar"===w.CLASS_NAME?w:new C.XML.Calendar(w)},C.XML.Calendar.validateYear=function(w){if(0===w)throw new Error("Invalid year ["+w+"]. Year must not be [0].")},C.XML.Calendar.validateMonth=function(w){if(w<1||w>12)throw new Error("Invalid month ["+w+"]. Month must be in range [1, 12].")},C.XML.Calendar.validateDay=function(w){if(w<1||w>31)throw new Error("Invalid day ["+w+"]. Day must be in range [1, 31].")},C.XML.Calendar.validateMonthDay=function(w,R){if(C.XML.Calendar.validateMonth(w),R<1||R>C.XML.Calendar.DAYS_IN_MONTH[w-1])throw new Error("Invalid day ["+R+"]. Day must be in range [1, "+C.XML.Calendar.DAYS_IN_MONTH[w-1]+"].")},C.XML.Calendar.validateYearMonthDay=function(w,R,O){C.XML.Calendar.validateYear(w),C.XML.Calendar.validateMonthDay(R,O)},C.XML.Calendar.validateHour=function(w){if(w<0||w>23)throw new Error("Invalid hour ["+w+"]. Hour must be in range [0, 23].")},C.XML.Calendar.validateMinute=function(w){if(w<0||w>59)throw new Error("Invalid minute ["+w+"]. Minute must be in range [0, 59].")},C.XML.Calendar.validateSecond=function(w){if(w<0||w>59)throw new Error("Invalid second ["+w+"]. Second must be in range [0, 59].")},C.XML.Calendar.validateFractionalSecond=function(w){if(w<0||w>59)throw new Error("Invalid fractional second ["+w+"]. Fractional second must be in range [0, 1).")},C.XML.Calendar.validateTimezone=function(w){if(w<C.XML.Calendar.MIN_TIMEZONE||w>C.XML.Calendar.MAX_TIMEZONE)throw new Error("Invalid timezone ["+w+"]. Timezone must not be in range ["+C.XML.Calendar.MIN_TIMEZONE+", "+C.XML.Calendar.MAX_TIMEZONE+"].")},C.XML.Input=C.Class({root:null,node:null,attributes:null,eventType:null,pns:null,initialize:function(w){C.Util.Ensure.ensureExists(w),this.root=w;var R={"":""};R[C.XML.XMLNS_P]=C.XML.XMLNS_NS,this.pns=[R]},hasNext:function(){if(null===this.node)return!0;if(this.node===this.root){var w=this.node.nodeType;return!(9===w&&8===this.eventType||1===w&&2===this.eventType)}return!0},next:function(){if(null===this.eventType)return this.enter(this.root);if(7===this.eventType){var w=this.node.documentElement;return w?this.enter(w):this.leave(this.node)}if(1===this.eventType){var R=this.node.firstChild;return R?this.enter(R):this.leave(this.node)}if(2===this.eventType){var O=this.node.nextSibling;return O?this.enter(O):this.leave(this.node)}return this.leave(this.node)},enter:function(w){var R=w.nodeType;if(this.node=w,this.attributes=null,1===R)return this.eventType=1,this.pushNS(w),this.eventType;if(2===R)return this.eventType=10,this.eventType;if(3===R)return this.eventType=C.Util.StringUtils.isEmpty(w.nodeValue)?6:4,this.eventType;if(4===R)return this.eventType=12,this.eventType;if(5===R)return this.eventType=9,this.eventType;if(6===R)return this.eventType=15,this.eventType;if(7===R)return this.eventType=3,this.eventType;if(8===R)return this.eventType=5,this.eventType;if(9===R)return this.eventType=7,this.eventType;if(10===R)return this.eventType=12,this.eventType;if(12===R)return this.eventType=14,this.eventType;throw new Error("Node type ["+R+"] is not supported.")},leave:function(w){if(9===w.nodeType){if(8==this.eventType)throw new Error("Invalid state.");return this.node=w,this.attributes=null,this.eventType=8,this.eventType}if(1===w.nodeType){if(2!=this.eventType)return this.node=w,this.attributes=null,this.eventType=2,this.popNS(),this.eventType;var R=w.nextSibling;if(R)return this.enter(R)}var O=w.nextSibling;if(O)return this.enter(O);var k=w.parentNode;return this.node=k,this.attributes=null,this.eventType=9===k.nodeType?8:2,this.eventType},getName:function(){var w=this.node;return C.Util.Type.isString(w.nodeName)?C.Util.Type.isString(w.namespaceURI)?new C.XML.QName(w.namespaceURI,w.nodeName):new C.XML.QName(w.nodeName):null},getNameKey:function(){var w=this.node;return C.Util.Type.isString(w.nodeName)?C.XML.QName.key(w.namespaceURI,w.nodeName):null},getText:function(){return this.node.nodeValue},nextTag:function(){for(var w=this.next();7===w||4===w||12===w||6===w||3===w||5===w;)w=this.next();if(1!==w&&2!==w)throw new Error("Expected start or end tag.");return w},skipElement:function(){if(this.eventType!==C.XML.Input.START_ELEMENT)throw new Error("Parser must be on START_ELEMENT to skip element.");var R,w=1;do{w+=(R=this.nextTag())===C.XML.Input.START_ELEMENT?1:-1}while(w>0);return R},getElementText:function(){if(1!=this.eventType)throw new Error("Parser must be on START_ELEMENT to read next text.");for(var w=this.next(),R="";2!==w;){if(4===w||12===w||6===w||9===w)R+=this.getText();else if(3!==w&&5!==w)throw 8===w?new Error("Unexpected end of document when reading element text content."):1===w?new Error("Element text content may not contain START_ELEMENT."):new Error("Unexpected event type ["+w+"].");w=this.next()}return R},retrieveElement:function(){var w;if(1===this.eventType)w=this.node;else{if(10!==this.eventType)throw new Error("Element can only be retrieved for START_ELEMENT or ATTRIBUTE nodes.");w=this.node.parentNode}return w},retrieveAttributes:function(){var w;if(this.attributes)w=this.attributes;else if(1===this.eventType)this.attributes=w=this.node.attributes;else{if(10!==this.eventType)throw new Error("Attributes can only be retrieved for START_ELEMENT or ATTRIBUTE nodes.");this.attributes=w=this.node.parentNode.attributes}return w},getAttributeCount:function(){return this.retrieveAttributes().length},getAttributeName:function(w){var R=this.retrieveAttributes();if(w<0||w>=R.length)throw new Error("Invalid attribute index ["+w+"].");var O=R[w];return C.Util.Type.isString(O.namespaceURI)?new C.XML.QName(O.namespaceURI,O.nodeName):new C.XML.QName(O.nodeName)},getAttributeNameKey:function(w){var R=this.retrieveAttributes();if(w<0||w>=R.length)throw new Error("Invalid attribute index ["+w+"].");var O=R[w];return C.XML.QName.key(O.namespaceURI,O.nodeName)},getAttributeValue:function(w){var R=this.retrieveAttributes();if(w<0||w>=R.length)throw new Error("Invalid attribute index ["+w+"].");return R[w].value},getAttributeValueNS:null,getAttributeValueNSViaElement:function(w,R){return this.retrieveElement().getAttributeNS(w,R)},getAttributeValueNSViaAttribute:function(w,R){var O=this.getAttributeNodeNS(w,R);return C.Util.Type.exists(O)?O.nodeValue:null},getAttributeNodeNS:null,getAttributeNodeNSViaElement:function(w,R){return this.retrieveElement().getAttributeNodeNS(w,R)},getAttributeNodeNSViaAttributes:function(w,R){for(var W,O=null,k=this.retrieveAttributes(),ee=0,Y=k.length;ee<Y;++ee)if((W=k[ee]).namespaceURI===w&&(W.prefix?W.prefix+":"+R:R)===W.nodeName){O=W;break}return O},getElement:function(){if(1===this.eventType||2===this.eventType)return this.eventType=2,this.node;throw new Error("Parser must be on START_ELEMENT or END_ELEMENT to return current element.")},pushNS:function(w){var R=this.pns.length-1,O=this.pns[R],k=C.Util.Type.isObject(O)?R:O;this.pns.push(k),R++;var W=!0;if(w.attributes){var X=w.attributes,ee=X.length;if(ee>0)for(var Y=0;Y<ee;Y++){var ne=X[Y],be=ne.nodeName,Me=null,Ge=null,gt=!1;"xmlns"===be?(Me="",Ge=ne.value,gt=!0):"xmlns:"===be.substring(0,6)&&(Me=be.substring(6),Ge=ne.value,gt=!0),gt&&(W&&(k=C.Util.Type.cloneObject(this.pns[k],{}),this.pns[R]=k,W=!1),k[Me]=Ge)}}},popNS:function(){this.pns.pop()},getNamespaceURI:function(w){var O=this.pns[this.pns.length-1];return(O=C.Util.Type.isObject(O)?O:this.pns[O])[w]},CLASS_NAME:"Jsonix.XML.Input"}),C.XML.Input.prototype.getAttributeValueNS=C.DOM.isDomImplementationAvailable()?C.XML.Input.prototype.getAttributeValueNSViaElement:C.XML.Input.prototype.getAttributeValueNSViaAttribute,C.XML.Input.prototype.getAttributeNodeNS=C.DOM.isDomImplementationAvailable()?C.XML.Input.prototype.getAttributeNodeNSViaElement:C.XML.Input.prototype.getAttributeNodeNSViaAttributes,C.XML.Input.START_ELEMENT=1,C.XML.Input.END_ELEMENT=2,C.XML.Input.PROCESSING_INSTRUCTION=3,C.XML.Input.CHARACTERS=4,C.XML.Input.COMMENT=5,C.XML.Input.SPACE=6,C.XML.Input.START_DOCUMENT=7,C.XML.Input.END_DOCUMENT=8,C.XML.Input.ENTITY_REFERENCE=9,C.XML.Input.ATTRIBUTE=10,C.XML.Input.DTD=11,C.XML.Input.CDATA=12,C.XML.Input.NAMESPACE=13,C.XML.Input.NOTATION_DECLARATION=14,C.XML.Input.ENTITY_DECLARATION=15,C.XML.Output=C.Class({document:null,documentElement:null,node:null,nodes:null,nsp:null,pns:null,namespacePrefixIndex:0,xmldom:null,initialize:function(w){this.xmldom=typeof ActiveXObject<"u"?new ActiveXObject("Microsoft.XMLDOM"):null,this.nodes=[];var R={"":""};R[C.XML.XMLNS_NS]=C.XML.XMLNS_P,C.Util.Type.isObject(w)&&C.Util.Type.isObject(w.namespacePrefixes)&&C.Util.Type.cloneObject(w.namespacePrefixes,R),this.nsp=[R];var O={"":""};O[C.XML.XMLNS_P]=C.XML.XMLNS_NS,this.pns=[O]},destroy:function(){this.xmldom=null},writeStartDocument:function(){var w=C.DOM.createDocument();return this.document=w,this.push(w)},writeEndDocument:function(){return this.pop()},writeStartElement:function(w){C.Util.Ensure.ensureObject(w);var R=w.localPart||w.lp||null;C.Util.Ensure.ensureString(R);var Y,O=w.namespaceURI||w.ns||null,k=C.Util.Type.isString(O)?O:"",X=this.getPrefix(k,w.prefix||w.p),ee=X?X+":"+R:R;if(C.Util.Type.isFunction(this.document.createElementNS))Y=this.document.createElementNS(k,ee);else{if(!this.xmldom)throw new Error("Could not create an element node.");Y=this.xmldom.createNode(1,ee,k)}return this.peek().appendChild(Y),this.push(Y),this.declareNamespace(k,X),null===this.documentElement&&(this.documentElement=Y,this.declareNamespaces()),Y},writeEndElement:function(){return this.pop()},writeCharacters:function(w){var R;if(C.Util.Type.isFunction(this.document.createTextNode))R=this.document.createTextNode(w);else{if(!this.xmldom)throw new Error("Could not create a text node.");R=this.xmldom.createTextNode(w)}return this.peek().appendChild(R),R},writeCdata:function(w){for(var R=w.split("]]>"),O=0;O<R.length;O++)O+1<R.length&&(R[O]=R[O]+"]]",R[O+1]=">"+R[O+1]);for(var k,W=0;W<R.length;W++)k=this.writeCdataWithoutCdend(R[W]);return k},writeCdataWithoutCdend:function(w){var R;if(C.Util.Type.isFunction(this.document.createCDATASection))R=this.document.createCDATASection(w);else{if(!this.xmldom)throw new Error("Could not create a CDATA section node.");R=this.xmldom.createCDATASection(w)}return this.peek().appendChild(R),R},writeAttribute:function(w,R){C.Util.Ensure.ensureString(R),C.Util.Ensure.ensureObject(w);var O=w.localPart||w.lp||null;C.Util.Ensure.ensureString(O);var k=w.namespaceURI||w.ns||null,W=C.Util.Type.isString(k)?k:"",ee=this.getPrefix(W,w.prefix||w.p||null),Y=ee?ee+":"+O:O,ne=this.peek();if(""===W)ne.setAttribute(Y,R);else{if(ne.setAttributeNS)ne.setAttributeNS(W,Y,R);else if(this.xmldom){var be=this.document.createNode(2,Y,W);be.nodeValue=R,ne.setAttributeNode(be)}else{if(W!==C.XML.XMLNS_NS)throw new Error("The [setAttributeNS] method is not implemented");ne.setAttribute(Y,R)}this.declareNamespace(W,ee)}},writeNode:function(w){var R;return R=C.Util.Type.exists(this.document.importNode)?this.document.importNode(w,!0):w,this.peek().appendChild(R),R},push:function(w){return this.nodes.push(w),this.pushNS(),w},peek:function(){return this.nodes[this.nodes.length-1]},pop:function(){return this.popNS(),this.nodes.pop()},pushNS:function(){var w=this.nsp.length-1,R=this.pns.length-1,O=this.nsp[w],k=this.pns[R],W=C.Util.Type.isObject(O)?w:O,X=C.Util.Type.isObject(k)?R:k;this.nsp.push(W),this.pns.push(X)},popNS:function(){this.nsp.pop(),this.pns.pop()},declareNamespaces:function(){var O,R=this.nsp[this.nsp.length-1];for(O in R=C.Util.Type.isNumber(R)?this.nsp[R]:R)R.hasOwnProperty(O)&&this.declareNamespace(O,R[O])},declareNamespace:function(w,R){var W,O=this.pns.length-1,k=this.pns[O];C.Util.Type.isNumber(k)?(W=!0,k=this.pns[k]):W=!1,k[R]!==w&&(this.writeAttribute(""===R?{lp:C.XML.XMLNS_P}:{ns:C.XML.XMLNS_NS,lp:R,p:C.XML.XMLNS_P},w),W&&(k=C.Util.Type.cloneObject(k,{}),this.pns[O]=k),k[R]=w)},getPrefix:function(w,R){var W,O=this.nsp.length-1,k=this.nsp[O];return C.Util.Type.isNumber(k)?(W=!0,k=this.nsp[k]):W=!1,C.Util.Type.isString(R)?R===k[w]||(W&&(k=C.Util.Type.cloneObject(k,{}),this.nsp[O]=k),k[w]=R):C.Util.Type.exists(R=k[w])||(R="p"+this.namespacePrefixIndex++,W&&(k=C.Util.Type.cloneObject(k,{}),this.nsp[O]=k),k[w]=R),R},getNamespaceURI:function(w){var O=this.pns[this.pns.length-1];return(O=C.Util.Type.isObject(O)?O:this.pns[O])[w]},CLASS_NAME:"Jsonix.XML.Output"}),C.Mapping={},C.Mapping.Style=C.Class({marshaller:null,unmarshaller:null,module:null,elementInfo:null,classInfo:null,enumLeafInfo:null,anyAttributePropertyInfo:null,anyElementPropertyInfo:null,attributePropertyInfo:null,elementMapPropertyInfo:null,elementPropertyInfo:null,elementsPropertyInfo:null,elementRefPropertyInfo:null,elementRefsPropertyInfo:null,valuePropertyInfo:null,initialize:function(){},CLASS_NAME:"Jsonix.Mapping.Style"}),C.Mapping.Style.STYLES={},C.Mapping.Styled=C.Class({mappingStyle:null,initialize:function(w){if(C.Util.Type.exists(w))if(C.Util.Ensure.ensureObject(w),C.Util.Type.isString(w.mappingStyle)){var R=C.Mapping.Style.STYLES[w.mappingStyle];if(!R)throw new Error("Mapping style ["+w.mappingStyle+"] is not known.");this.mappingStyle=R}else C.Util.Type.isObject(w.mappingStyle)&&(this.mappingStyle=w.mappingStyle);this.mappingStyle||(this.mappingStyle=C.Mapping.Style.STYLES.standard)},CLASS_NAME:"Jsonix.Mapping.Styled"}),C.Binding={},C.Binding.Marshalls={},C.Binding.Marshalls.Element=C.Class({marshalElement:function(w,R,O,k){var W=this.convertToTypedNamedValue(w,R,O,k),X=W.typeInfo,ee=void 0;if(R.supportXsiType&&C.Util.Type.exists(W.value)){var Y=R.getTypeInfoByValue(W.value);Y&&Y.typeName&&(ee=Y)}var ne=ee||X;if(!ne)throw new Error("Element ["+W.name.key+"] is not known in this context, could not determine its type.");if(O.writeStartElement(W.name),ee&&X!==ee){var Me=C.Schema.XSD.QName.INSTANCE.print(ee.typeName,R,O,k);O.writeAttribute(C.Schema.XSI.TYPE_QNAME,Me)}C.Util.Type.exists(W.value)&&ne.marshal(W.value,R,O,k),O.writeEndElement()},getTypeInfoByElementName:function(w,R,O){var k=R.getElementInfo(w,O);if(C.Util.Type.exists(k))return k.typeInfo}}),C.Binding.Marshalls.Element.AsElementRef=C.Class({convertToTypedNamedValue:function(w,R,O,k){C.Util.Ensure.ensureObject(w);var W=this.convertToNamedValue(w,R,O,k);return{name:W.name,value:W.value,typeInfo:this.getTypeInfoByElementName(W.name,R,k)}},convertToNamedValue:function(w,R,O,k){if(C.Util.Type.exists(w.name)&&!C.Util.Type.isUndefined(w.value))return{name:C.XML.QName.fromObjectOrString(w.name,R),value:C.Util.Type.exists(w.value)?w.value:null};for(var ee in w)if(w.hasOwnProperty(ee))return{name:C.XML.QName.fromObjectOrString(ee,R),value:w[ee]};throw new Error("Invalid element value ["+w+"]. Element values must either have {name:'myElementName', value: elementValue} or {myElementName:elementValue} structure.")}}),C.Binding.Unmarshalls={},C.Binding.Unmarshalls.WrapperElement=C.Class({mixed:!1,unmarshalWrapperElement:function(w,R,O,k){for(var W=R.next();W!==C.XML.Input.END_ELEMENT;){if(W===C.XML.Input.START_ELEMENT)this.unmarshalElement(w,R,O,k);else if(!this.mixed||W!==C.XML.Input.CHARACTERS&&W!==C.XML.Input.CDATA&&W!==C.XML.Input.ENTITY_REFERENCE){if(W!==C.XML.Input.SPACE&&W!==C.XML.Input.COMMENT&&W!==C.XML.Input.PROCESSING_INSTRUCTION)throw new Error("Illegal state: unexpected event type ["+W+"].")}else k(R.getText());W=R.next()}}}),C.Binding.Unmarshalls.Element=C.Class({allowTypedObject:!0,allowDom:!1,unmarshalElement:function(w,R,O,k){if(1!=R.eventType)throw new Error("Parser must be on START_ELEMENT to read next element.");var ee,W=this.getTypeInfoByInputElement(w,R,O),X=R.getName();if(this.allowTypedObject)if(C.Util.Type.exists(W)){var Y=W.unmarshal(w,R,O);ee=this.convertFromTypedNamedValue({name:X,value:Y,typeInfo:W},w,R,O)}else{if(!this.allowDom)throw new Error("Element ["+X.toString()+"] could not be unmarshalled as is not known in this context and the property does not allow DOM content.");ee=R.getElement()}else{if(!this.allowDom)throw new Error("Element ["+X.toString()+"] could not be unmarshalled as the property neither allows typed objects nor DOM as content. This is a sign of invalid mappings, do not use [allowTypedObject : false] and [allowDom : false] at the same time.");ee=R.getElement()}k(ee)},getTypeInfoByInputElement:function(w,R,O){var k=null;if(w.supportXsiType){var W=R.getAttributeValueNS(C.Schema.XSI.NAMESPACE_URI,C.Schema.XSI.TYPE);if(C.Util.StringUtils.isNotBlank(W)){var X=C.Schema.XSD.QName.INSTANCE.parse(W,w,R,O);k=w.getTypeInfoByTypeNameKey(X.key)}}var ee=R.getName();return k||this.getTypeInfoByElementName(ee,w,O)},getTypeInfoByElementName:function(w,R,O){var k=R.getElementInfo(w,O);if(C.Util.Type.exists(k))return k.typeInfo}}),C.Binding.Unmarshalls.Element.AsElementRef=C.Class({convertFromTypedNamedValue:function(w,R,O,k){return{name:w.name,value:w.value}}}),C.Binding.Unmarshalls.Element.AsSimplifiedElementRef=C.Class({convertFromTypedNamedValue:function(w,R,O,k){var X={};return X[w.name.toCanonicalString(R)]=w.value,X}}),C.Binding.Marshaller=C.Class(C.Binding.Marshalls.Element,C.Binding.Marshalls.Element.AsElementRef,{context:null,initialize:function(w){C.Util.Ensure.ensureObject(w),this.context=w},marshalString:function(w){var R=this.marshalDocument(w);return C.DOM.serialize(R)},marshalDocument:function(w){var R=new C.XML.Output({namespacePrefixes:this.context.namespacePrefixes}),O=R.writeStartDocument();return this.marshalElement(w,this.context,R,void 0),R.writeEndDocument(),O},CLASS_NAME:"Jsonix.Binding.Marshaller"}),C.Binding.Marshaller.Simplified=C.Class(C.Binding.Marshaller,{CLASS_NAME:"Jsonix.Binding.Marshaller.Simplified"}),C.Binding.Unmarshaller=C.Class(C.Binding.Unmarshalls.Element,C.Binding.Unmarshalls.Element.AsElementRef,{context:null,allowTypedObject:!0,allowDom:!1,initialize:function(w){C.Util.Ensure.ensureObject(w),this.context=w},unmarshalString:function(w){C.Util.Ensure.ensureString(w);var R=C.DOM.parse(w);return this.unmarshalDocument(R)},unmarshalURL:function(w,R,O){C.Util.Ensure.ensureString(w),C.Util.Ensure.ensureFunction(R),C.Util.Type.exists(O)&&C.Util.Ensure.ensureObject(O),that=this,C.DOM.load(w,function(k){R(that.unmarshalDocument(k))},O)},unmarshalFile:function(w,R,O){if(typeof Ee>"u")throw new Error("File unmarshalling is only available in environments which support file systems.");C.Util.Ensure.ensureString(w),C.Util.Ensure.ensureFunction(R),C.Util.Type.exists(O)&&C.Util.Ensure.ensureObject(O),that=this,Ee.readFile(w,O,function(W,X){if(W)throw W;var ee=X.toString(),Y=C.DOM.parse(ee);R(that.unmarshalDocument(Y))})},unmarshalDocument:function(w,R){var O=new C.XML.Input(w),k=null;return O.nextTag(),this.unmarshalElement(this.context,O,R,function(X){k=X}),k},CLASS_NAME:"Jsonix.Binding.Unmarshaller"}),C.Binding.Unmarshaller.Simplified=C.Class(C.Binding.Unmarshaller,C.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Binding.Unmarshaller.Simplified"}),C.Model.TypeInfo=C.Class({module:null,name:null,baseTypeInfo:null,initialize:function(){},isBasedOn:function(w){for(var R=this;R;){if(w===R)return!0;R=R.baseTypeInfo}return!1},CLASS_NAME:"Jsonix.Model.TypeInfo"}),C.Model.ClassInfo=C.Class(C.Model.TypeInfo,C.Mapping.Styled,{name:null,localName:null,typeName:null,instanceFactory:null,properties:null,propertiesMap:null,structure:null,targetNamespace:"",defaultElementNamespaceURI:"",defaultAttributeNamespaceURI:"",built:!1,initialize:function(w,R){C.Model.TypeInfo.prototype.initialize.apply(this,[]),C.Mapping.Styled.prototype.initialize.apply(this,[R]),C.Util.Ensure.ensureObject(w);var O=w.name||w.n||void 0;C.Util.Ensure.ensureString(O),this.name=O;var k=w.localName||w.ln||null;this.localName=k,this.defaultElementNamespaceURI=w.defaultElementNamespaceURI||w.dens||w.targetNamespace||w.tns||"";var X=w.targetNamespace||w.tns||w.defaultElementNamespaceURI||w.dens||this.defaultElementNamespaceURI;this.targetNamespace=X,this.defaultAttributeNamespaceURI=w.defaultAttributeNamespaceURI||w.dans||"",this.baseTypeInfo=w.baseTypeInfo||w.bti||null;var ne=w.instanceFactory||w.inF||void 0;C.Util.Type.exists(ne)&&(C.Util.Ensure.ensureFunction(ne),this.instanceFactory=ne);var be=w.typeName||w.tn||void 0;C.Util.Type.exists(be)?this.typeName=C.Util.Type.isString(be)?new C.XML.QName(this.targetNamespace,be):C.XML.QName.fromObject(be):C.Util.Type.exists(k)&&(this.typeName=new C.XML.QName(X,k)),this.properties=[],this.propertiesMap={};var Me=w.propertyInfos||w.ps||[];C.Util.Ensure.ensureArray(Me);for(var Ge=0;Ge<Me.length;Ge++)this.p(Me[Ge])},getPropertyInfoByName:function(w){return this.propertiesMap[w]},destroy:function(){},build:function(w){if(!this.built){this.baseTypeInfo=w.resolveTypeInfo(this.baseTypeInfo,this.module),C.Util.Type.exists(this.baseTypeInfo)&&this.baseTypeInfo.build(w);for(var R=0;R<this.properties.length;R++)this.properties[R].build(w,this.module);var k={elements:null,attributes:{},anyAttribute:null,value:null,any:null};this.buildStructure(w,k),this.structure=k}},buildStructure:function(w,R){C.Util.Type.exists(this.baseTypeInfo)&&this.baseTypeInfo.buildStructure(w,R);for(var O=0;O<this.properties.length;O++)this.properties[O].buildStructure(w,R)},unmarshal:function(w,R){var O;if(this.build(w),O=this.instanceFactory?new this.instanceFactory:{TYPE_NAME:this.name},1!==R.eventType)throw new Error("Parser must be on START_ELEMENT to read a class info.");if(C.Util.Type.exists(this.structure.attributes)){var k=R.getAttributeCount();if(0!==k)for(var W=0;W<k;W++){var X=R.getAttributeNameKey(W);if(C.Util.Type.exists(this.structure.attributes[X])){var ee=R.getAttributeValue(W);C.Util.Type.isString(ee)&&this.unmarshalPropertyValue(w,R,this.structure.attributes[X],O,ee)}}}if(C.Util.Type.exists(this.structure.anyAttribute)&&this.unmarshalProperty(w,R,this.structure.anyAttribute,O),C.Util.Type.exists(this.structure.elements))for(var be=R.next();be!==C.XML.Input.END_ELEMENT;){if(be===C.XML.Input.START_ELEMENT){var Me=R.getNameKey();C.Util.Type.exists(this.structure.elements[Me])?this.unmarshalProperty(w,R,this.structure.elements[Me],O):C.Util.Type.exists(this.structure.any)?this.unmarshalProperty(w,R,this.structure.any,O):be=R.skipElement()}else if(be===C.XML.Input.CHARACTERS||be===C.XML.Input.CDATA||be===C.XML.Input.ENTITY_REFERENCE)C.Util.Type.exists(this.structure.mixed)&&this.unmarshalProperty(w,R,this.structure.mixed,O);else if(be!==C.XML.Input.SPACE&&be!==C.XML.Input.COMMENT&&be!==C.XML.Input.PROCESSING_INSTRUCTION)throw new Error("Illegal state: unexpected event type ["+be+"].");be=R.next()}else C.Util.Type.exists(this.structure.value)?this.unmarshalProperty(w,R,this.structure.value,O):R.nextTag();if(2!==R.eventType)throw new Error("Illegal state: must be END_ELEMENT.");return O},unmarshalProperty:function(w,R,O,k){var W=O.unmarshal(w,R,this);O.setProperty(k,W)},unmarshalPropertyValue:function(w,R,O,k,W){var X=O.unmarshalValue(W,w,R,this);O.setProperty(k,X)},marshal:function(w,R,O,k){if(this.isMarshallable(w,R,k)){C.Util.Type.exists(this.baseTypeInfo)&&this.baseTypeInfo.marshal(w,R,O);for(var W=0;W<this.properties.length;W++){var X=this.properties[W],ee=w[X.name];C.Util.Type.exists(ee)&&X.marshal(ee,R,O,this)}}else if(this.structure.value)this.structure.value.marshal(w,R,O,this);else{if(1!==this.properties.length)throw new Error("The passed value ["+w+"] is not an object and there is no single suitable property to marshal it.");this.properties[0].marshal(w,R,O,this)}},isMarshallable:function(w,R,O){return this.isInstance(w,R,O)||C.Util.Type.isObject(w)&&!C.Util.Type.isArray(w)},isInstance:function(w,R,O){return this.instanceFactory?w instanceof this.instanceFactory:C.Util.Type.isObject(w)&&C.Util.Type.isString(w.TYPE_NAME)&&w.TYPE_NAME===this.name},b:function(w){return C.Util.Ensure.ensureObject(w),this.baseTypeInfo=w,this},ps:function(){return this},p:function(w){if(C.Util.Ensure.ensureObject(w),w instanceof C.Model.PropertyInfo)this.addProperty(w);else{var R=(w=C.Util.Type.cloneObject(w)).type||w.t||"element";if(!C.Util.Type.isFunction(this.propertyInfoCreators[R]))throw new Error("Unknown property info type ["+R+"].");this.propertyInfoCreators[R].call(this,w)}},aa:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.anyAttributePropertyInfo(w,{mappingStyle:this.mappingStyle}))},ae:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.anyElementPropertyInfo(w,{mappingStyle:this.mappingStyle}))},a:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.attributePropertyInfo(w,{mappingStyle:this.mappingStyle}))},em:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.elementMapPropertyInfo(w,{mappingStyle:this.mappingStyle}))},e:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.elementPropertyInfo(w,{mappingStyle:this.mappingStyle}))},es:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.elementsPropertyInfo(w,{mappingStyle:this.mappingStyle}))},er:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.elementRefPropertyInfo(w,{mappingStyle:this.mappingStyle}))},ers:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.elementRefsPropertyInfo(w,{mappingStyle:this.mappingStyle}))},v:function(w){return this.addDefaultNamespaces(w),this.addProperty(new this.mappingStyle.valuePropertyInfo(w,{mappingStyle:this.mappingStyle}))},addDefaultNamespaces:function(w){C.Util.Type.isObject(w)&&(C.Util.Type.isString(w.defaultElementNamespaceURI)||(w.defaultElementNamespaceURI=this.defaultElementNamespaceURI),C.Util.Type.isString(w.defaultAttributeNamespaceURI)||(w.defaultAttributeNamespaceURI=this.defaultAttributeNamespaceURI))},addProperty:function(w){return this.properties.push(w),this.propertiesMap[w.name]=w,this},CLASS_NAME:"Jsonix.Model.ClassInfo"}),C.Model.ClassInfo.prototype.propertyInfoCreators={aa:C.Model.ClassInfo.prototype.aa,anyAttribute:C.Model.ClassInfo.prototype.aa,ae:C.Model.ClassInfo.prototype.ae,anyElement:C.Model.ClassInfo.prototype.ae,a:C.Model.ClassInfo.prototype.a,attribute:C.Model.ClassInfo.prototype.a,em:C.Model.ClassInfo.prototype.em,elementMap:C.Model.ClassInfo.prototype.em,e:C.Model.ClassInfo.prototype.e,element:C.Model.ClassInfo.prototype.e,es:C.Model.ClassInfo.prototype.es,elements:C.Model.ClassInfo.prototype.es,er:C.Model.ClassInfo.prototype.er,elementRef:C.Model.ClassInfo.prototype.er,ers:C.Model.ClassInfo.prototype.ers,elementRefs:C.Model.ClassInfo.prototype.ers,v:C.Model.ClassInfo.prototype.v,value:C.Model.ClassInfo.prototype.v},C.Model.EnumLeafInfo=C.Class(C.Model.TypeInfo,{name:null,baseTypeInfo:"String",entries:null,keys:null,values:null,built:!1,initialize:function(w){C.Model.TypeInfo.prototype.initialize.apply(this,[]),C.Util.Ensure.ensureObject(w);var R=w.name||w.n||void 0;C.Util.Ensure.ensureString(R),this.name=R,this.baseTypeInfo=w.baseTypeInfo||w.bti||"String";var k=w.values||w.vs||void 0;if(C.Util.Ensure.ensureExists(k),!C.Util.Type.isObject(k)&&!C.Util.Type.isArray(k))throw new Error("Enum values must be either an array or an object.");this.entries=k},build:function(w){if(!this.built){this.baseTypeInfo=w.resolveTypeInfo(this.baseTypeInfo,this.module),this.baseTypeInfo.build(w);var ee,Y,R=this.entries,O={},k=[],W=[],X=0;if(C.Util.Type.isArray(R))for(X=0;X<R.length;X++){if(C.Util.Type.isString(Y=R[X])){if(ee=Y,!C.Util.Type.isFunction(this.baseTypeInfo.parse))throw new Error("Enum value is provided as string but the base type ["+this.baseTypeInfo.name+"] of the enum info ["+this.name+"] does not implement the parse method.");Y=this.baseTypeInfo.parse(Y,w,null,this)}else{if(!this.baseTypeInfo.isInstance(Y,w,this))throw new Error("Enum value ["+Y+"] is not an instance of the enum base type ["+this.baseTypeInfo.name+"].");if(!C.Util.Type.isFunction(this.baseTypeInfo.print))throw new Error("The base type ["+this.baseTypeInfo.name+"] of the enum info ["+this.name+"] does not implement the print method, unable to produce the enum key as string.");ee=this.baseTypeInfo.print(Y,w,null,this)}O[ee]=Y,k[X]=ee,W[X]=Y}else{if(!C.Util.Type.isObject(R))throw new Error("Enum values must be either an array or an object.");for(ee in R)if(R.hasOwnProperty(ee)){if(C.Util.Type.isString(Y=R[ee])){if(!C.Util.Type.isFunction(this.baseTypeInfo.parse))throw new Error("Enum value is provided as string but the base type ["+this.baseTypeInfo.name+"] of the enum info ["+this.name+"] does not implement the parse method.");Y=this.baseTypeInfo.parse(Y,w,null,this)}else if(!this.baseTypeInfo.isInstance(Y,w,this))throw new Error("Enum value ["+Y+"] is not an instance of the enum base type ["+this.baseTypeInfo.name+"].");O[ee]=Y,k[X]=ee,W[X]=Y,X++}}this.entries=O,this.keys=k,this.values=W,this.built=!0}},unmarshal:function(w,R,O){var k=R.getElementText();return this.parse(k,w,R,O)},marshal:function(w,R,O,k){C.Util.Type.exists(w)&&O.writeCharacters(this.reprint(w,R,O,k))},reprint:function(w,R,O,k){return C.Util.Type.isString(w)&&!this.isInstance(w,R,k)?this.print(this.parse(w,R,null,k),R,O,k):this.print(w,R,O,k)},print:function(w,R,O,k){for(var W=0;W<this.values.length;W++)if(this.values[W]===w)return this.keys[W];throw new Error("Value ["+w+"] is invalid for the enum type ["+this.name+"].")},parse:function(w,R,O,k){if(C.Util.Ensure.ensureString(w),this.entries.hasOwnProperty(w))return this.entries[w];throw new Error("Value ["+w+"] is invalid for the enum type ["+this.name+"].")},isInstance:function(w,R,O){for(var k=0;k<this.values.length;k++)if(this.values[k]===w)return!0;return!1},CLASS_NAME:"Jsonix.Model.EnumLeafInfo"}),C.Model.ElementInfo=C.Class({module:null,elementName:null,typeInfo:null,substitutionHead:null,scope:null,built:!1,initialize:function(w){C.Util.Ensure.ensureObject(w),this.defaultElementNamespaceURI=w.defaultElementNamespaceURI||w.dens||"";var O=w.elementName||w.en||void 0;C.Util.Type.isObject(O)?this.elementName=C.XML.QName.fromObject(O):(C.Util.Ensure.ensureString(O),this.elementName=new C.XML.QName(this.defaultElementNamespaceURI,O)),this.typeInfo=w.typeInfo||w.ti||"String",this.substitutionHead=w.substitutionHead||w.sh||null,this.scope=w.scope||w.sc||null},build:function(w){this.built||(this.typeInfo=w.resolveTypeInfo(this.typeInfo,this.module),this.scope=w.resolveTypeInfo(this.scope,this.module),this.built=!0)},CLASS_NAME:"Jsonix.Model.ElementInfo"}),C.Model.PropertyInfo=C.Class({name:null,collection:!1,targetNamespace:"",defaultElementNamespaceURI:"",defaultAttributeNamespaceURI:"",built:!1,initialize:function(w){C.Util.Ensure.ensureObject(w);var Y,ne,R=w.name||w.n||void 0;C.Util.Ensure.ensureString(R),this.name=R,this.defaultElementNamespaceURI=w.defaultElementNamespaceURI||w.dens||w.targetNamespace||w.tns||"",this.targetNamespace=w.targetNamespace||w.tns||w.defaultElementNamespaceURI||w.dens||this.defaultElementNamespaceURI,this.defaultAttributeNamespaceURI=w.defaultAttributeNamespaceURI||w.dans||"",this.collection=w.collection||w.col||!1,this.required=w.required||w.rq||!1,this.collection&&(Y=C.Util.Type.isNumber(w.minOccurs)?w.minOccurs:C.Util.Type.isNumber(w.mno)?w.mno:1,this.minOccurs=Y,ne=C.Util.Type.isNumber(w.maxOccurs)?w.maxOccurs:C.Util.Type.isNumber(w.mxo)?w.mxo:null,this.maxOccurs=ne)},build:function(w,R){this.built||(this.doBuild(w,R),this.built=!0)},doBuild:function(w,R){throw new Error("Abstract method [doBuild].")},buildStructure:function(w,R){throw new Error("Abstract method [buildStructure].")},setProperty:function(w,R){if(C.Util.Type.exists(R))if(this.collection){C.Util.Ensure.ensureArray(R,"Collection property requires an array value."),C.Util.Type.exists(w[this.name])||(w[this.name]=[]);for(var O=0;O<R.length;O++)w[this.name].push(R[O])}else w[this.name]=R},CLASS_NAME:"Jsonix.Model.PropertyInfo"}),C.Model.AnyAttributePropertyInfo=C.Class(C.Model.PropertyInfo,{initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.PropertyInfo.prototype.initialize.apply(this,[w])},unmarshal:function(w,R,O){var k=R.getAttributeCount();if(0===k)return null;for(var W={},X=0;X<k;X++){var ee=R.getAttributeValue(X);C.Util.Type.isString(ee)&&(W[this.convertFromAttributeName(R.getAttributeName(X),w,R,O)]=ee)}return W},marshal:function(w,R,O,k){if(C.Util.Type.isObject(w))for(var W in w)if(w.hasOwnProperty(W)){var X=w[W];if(C.Util.Type.isString(X)){var ee=this.convertToAttributeName(W,R,O,k);O.writeAttribute(ee,X)}}},convertFromAttributeName:function(w,R,O,k){return w.key},convertToAttributeName:function(w,R,O,k){return C.XML.QName.fromObjectOrString(w,R)},doBuild:function(w,R){},buildStructure:function(w,R){C.Util.Ensure.ensureObject(R),R.anyAttribute=this},CLASS_NAME:"Jsonix.Model.AnyAttributePropertyInfo"}),C.Model.AnyAttributePropertyInfo.Simplified=C.Class(C.Model.AnyAttributePropertyInfo,{convertFromAttributeName:function(w,R,O,k){return w.toCanonicalString(R)}}),C.Model.SingleTypePropertyInfo=C.Class(C.Model.PropertyInfo,{typeInfo:"String",initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.PropertyInfo.prototype.initialize.apply(this,[w]),this.typeInfo=w.typeInfo||w.ti||"String"},doBuild:function(w,R){this.typeInfo=w.resolveTypeInfo(this.typeInfo,R)},unmarshalValue:function(w,R,O,k){return this.parse(w,R,O,k)},parse:function(w,R,O,k){return this.typeInfo.parse(w,R,O,k)},print:function(w,R,O,k){return this.typeInfo.reprint(w,R,O,k)},CLASS_NAME:"Jsonix.Model.SingleTypePropertyInfo"}),C.Model.AttributePropertyInfo=C.Class(C.Model.SingleTypePropertyInfo,{attributeName:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.SingleTypePropertyInfo.prototype.initialize.apply(this,[w]);var R=w.attributeName||w.an||void 0;this.attributeName=C.Util.Type.isObject(R)?C.XML.QName.fromObject(R):C.Util.Type.isString(R)?new C.XML.QName(this.defaultAttributeNamespaceURI,R):new C.XML.QName(this.defaultAttributeNamespaceURI,this.name)},unmarshal:function(w,R,O){for(var k=R.getAttributeCount(),W=null,X=0;X<k;X++){var ee=R.getAttributeNameKey(X);if(this.attributeName.key===ee){var Y=R.getAttributeValue(X);C.Util.Type.isString(Y)&&(W=this.unmarshalValue(Y,w,R,O))}}return W},marshal:function(w,R,O,k){C.Util.Type.exists(w)&&O.writeAttribute(this.attributeName,this.print(w,R,O,k))},buildStructure:function(w,R){C.Util.Ensure.ensureObject(R),C.Util.Ensure.ensureObject(R.attributes),R.attributes[this.attributeName.key]=this},CLASS_NAME:"Jsonix.Model.AttributePropertyInfo"}),C.Model.ValuePropertyInfo=C.Class(C.Model.SingleTypePropertyInfo,{initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.SingleTypePropertyInfo.prototype.initialize.apply(this,[w]),this.asCDATA=w.asCDATA||w.cdata||!1},unmarshal:function(w,R,O){var k=R.getElementText();return this.unmarshalValue(k,w,R,O)},marshal:function(w,R,O,k){!C.Util.Type.exists(w)||(this.asCDATA?O.writeCdata(this.print(w,R,O,k)):O.writeCharacters(this.print(w,R,O,k)))},buildStructure:function(w,R){if(C.Util.Ensure.ensureObject(R),C.Util.Type.exists(R.elements))throw new Error("The structure already defines element mappings, it cannot define a value property.");R.value=this},CLASS_NAME:"Jsonix.Model.ValuePropertyInfo"}),C.Model.AbstractElementsPropertyInfo=C.Class(C.Binding.Unmarshalls.Element,C.Binding.Unmarshalls.WrapperElement,C.Model.PropertyInfo,{wrapperElementName:null,allowDom:!1,allowTypedObject:!0,mixed:!1,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.PropertyInfo.prototype.initialize.apply(this,[w]);var R=w.wrapperElementName||w.wen||void 0;this.wrapperElementName=C.Util.Type.isObject(R)?C.XML.QName.fromObject(R):C.Util.Type.isString(R)?new C.XML.QName(this.defaultElementNamespaceURI,R):null},unmarshal:function(w,R,O){var k=null,W=this,X=function(ee){if(W.collection)null===k&&(k=[]),k.push(ee);else{if(null!==k)throw new Error("Value already set.");k=ee}};return C.Util.Type.exists(this.wrapperElementName)?this.unmarshalWrapperElement(w,R,O,X):this.unmarshalElement(w,R,O,X),k},marshal:function(w,R,O,k){if(C.Util.Type.exists(w)){if(C.Util.Type.exists(this.wrapperElementName)&&O.writeStartElement(this.wrapperElementName),this.collection){C.Util.Ensure.ensureArray(w);for(var W=0;W<w.length;W++)this.marshalElement(w[W],R,O,k)}else this.marshalElement(w,R,O,k);C.Util.Type.exists(this.wrapperElementName)&&O.writeEndElement()}},convertFromTypedNamedValue:function(w,R,O,k){return w.value},buildStructure:function(w,R){if(C.Util.Ensure.ensureObject(R),C.Util.Type.exists(R.value))throw new Error("The structure already defines a value property.");C.Util.Type.exists(R.elements)||(R.elements={}),C.Util.Type.exists(this.wrapperElementName)?R.elements[this.wrapperElementName.key]=this:this.buildStructureElements(w,R)},buildStructureElements:function(w,R){throw new Error("Abstract method [buildStructureElements].")},CLASS_NAME:"Jsonix.Model.AbstractElementsPropertyInfo"}),C.Model.ElementPropertyInfo=C.Class(C.Model.AbstractElementsPropertyInfo,C.Binding.Marshalls.Element,{typeInfo:"String",elementName:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this,[w]);var R=w.typeInfo||w.ti||"String";C.Util.Type.isObject(R)||C.Util.Ensure.ensureString(R),this.typeInfo=R;var O=w.elementName||w.en||void 0;this.elementName=C.Util.Type.isObject(O)?C.XML.QName.fromObject(O):C.Util.Type.isString(O)?new C.XML.QName(this.defaultElementNamespaceURI,O):new C.XML.QName(this.defaultElementNamespaceURI,this.name)},getTypeInfoByElementName:function(w,R,O){return this.typeInfo},convertToTypedNamedValue:function(w,R,O,k){return{name:this.elementName,value:w,typeInfo:this.typeInfo}},doBuild:function(w,R){this.typeInfo=w.resolveTypeInfo(this.typeInfo,R)},buildStructureElements:function(w,R){R.elements[this.elementName.key]=this},CLASS_NAME:"Jsonix.Model.ElementPropertyInfo"}),C.Model.ElementsPropertyInfo=C.Class(C.Model.AbstractElementsPropertyInfo,C.Binding.Marshalls.Element,{elementTypeInfos:null,elementTypeInfosMap:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this,[w]);var R=w.elementTypeInfos||w.etis||[];C.Util.Ensure.ensureArray(R),this.elementTypeInfos=[];for(var O=0;O<R.length;O++)this.elementTypeInfos[O]=C.Util.Type.cloneObject(R[O])},getTypeInfoByElementName:function(w,R,O){return this.elementTypeInfosMap[w.key]},convertToTypedNamedValue:function(w,R,O,k){for(var W=0;W<this.elementTypeInfos.length;W++){var X=this.elementTypeInfos[W],ee=X.typeInfo;if(ee.isInstance(w,R,k))return{name:X.elementName,value:w,typeInfo:ee}}if(R.supportXsiType){var ne=R.getTypeInfoByValue(w);if(ne&&ne.typeName)for(var be=0;be<this.elementTypeInfos.length;be++){var Me=this.elementTypeInfos[be],Ge=Me.typeInfo;if(ne.isBasedOn(Ge))return{name:Me.elementName,value:w,typeInfo:Ge}}}throw new Error("Could not find an element with type info supporting the value ["+w+"].")},doBuild:function(w,R){this.elementTypeInfosMap={};for(var W=0;W<this.elementTypeInfos.length;W++){var X=this.elementTypeInfos[W];C.Util.Ensure.ensureObject(X),X.typeInfo=w.resolveTypeInfo(X.typeInfo||X.ti||"String",R),X.elementName=C.XML.QName.fromObjectOrString(X.elementName||X.en||void 0,w,this.defaultElementNamespaceURI),this.elementTypeInfosMap[X.elementName.key]=X.typeInfo}},buildStructureElements:function(w,R){for(var O=0;O<this.elementTypeInfos.length;O++)R.elements[this.elementTypeInfos[O].elementName.key]=this},CLASS_NAME:"Jsonix.Model.ElementsPropertyInfo"}),C.Model.ElementMapPropertyInfo=C.Class(C.Model.AbstractElementsPropertyInfo,{elementName:null,key:null,value:null,entryTypeInfo:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.AbstractElementsPropertyInfo.prototype.initialize.apply(this,[w]);var R=w.key||w.k||void 0;C.Util.Ensure.ensureObject(R);var O=w.value||w.v||void 0;C.Util.Ensure.ensureObject(O);var k=w.elementName||w.en||void 0;this.elementName=C.Util.Type.isObject(k)?C.XML.QName.fromObject(k):C.Util.Type.isString(k)?new C.XML.QName(this.defaultElementNamespaceURI,k):new C.XML.QName(this.defaultElementNamespaceURI,this.name),this.entryTypeInfo=new C.Model.ClassInfo({name:"Map<"+R.name+","+O.name+">",propertyInfos:[R,O]})},unmarshal:function(w,R,O){var k=null,W=this,X=function(ee){if(C.Util.Type.exists(ee))for(var Y in C.Util.Ensure.ensureObject(ee,"Map property requires an object."),C.Util.Type.exists(k)||(k={}),ee)if(ee.hasOwnProperty(Y)){var ne=ee[Y];if(W.collection)C.Util.Type.exists(k[Y])||(k[Y]=[]),k[Y].push(ne);else{if(C.Util.Type.exists(k[Y]))throw new Error("Value was already set.");k[Y]=ne}}};return C.Util.Type.exists(this.wrapperElementName)?this.unmarshalWrapperElement(w,R,O,X):this.unmarshalElement(w,R,O,X),k},getTypeInfoByInputElement:function(w,R,O){return this.entryTypeInfo},convertFromTypedNamedValue:function(w,R,O,k){var W=w.value,X={};return C.Util.Type.isString(W[this.key.name])&&(X[W[this.key.name]]=W[this.value.name]),X},marshal:function(w,R,O,k){!C.Util.Type.exists(w)||(C.Util.Type.exists(this.wrapperElementName)&&O.writeStartElement(this.wrapperElementName),this.marshalElement(w,R,O,k),C.Util.Type.exists(this.wrapperElementName)&&O.writeEndElement())},marshalElement:function(w,R,O,k){if(w)for(var W in w)if(w.hasOwnProperty(W)){var X=w[W];if(this.collection)for(var Y=0;Y<X.length;Y++){var ne={};ne[this.key.name]=W,ne[this.value.name]=X[Y],O.writeStartElement(this.elementName),this.entryTypeInfo.marshal(ne,R,O,k),O.writeEndElement()}else{var ee={};ee[this.key.name]=W,ee[this.value.name]=X,O.writeStartElement(this.elementName),this.entryTypeInfo.marshal(ee,R,O,k),O.writeEndElement()}}},doBuild:function(w,R){this.entryTypeInfo.build(w,R),this.key=this.entryTypeInfo.properties[0],this.value=this.entryTypeInfo.properties[1]},buildStructureElements:function(w,R){R.elements[this.elementName.key]=this},setProperty:function(w,R){if(C.Util.Type.exists(R)){C.Util.Ensure.ensureObject(R,"Map property requires an object."),C.Util.Type.exists(w[this.name])||(w[this.name]={});var O=w[this.name];for(var k in R)if(R.hasOwnProperty(k)){var W=R[k];if(this.collection){C.Util.Type.exists(O[k])||(O[k]=[]);for(var X=0;X<W.length;X++)O[k].push(W[X])}else O[k]=W}}},CLASS_NAME:"Jsonix.Model.ElementMapPropertyInfo"}),C.Model.AbstractElementRefsPropertyInfo=C.Class(C.Binding.Marshalls.Element,C.Binding.Marshalls.Element.AsElementRef,C.Binding.Unmarshalls.Element,C.Binding.Unmarshalls.WrapperElement,C.Binding.Unmarshalls.Element.AsElementRef,C.Model.PropertyInfo,{wrapperElementName:null,allowDom:!0,allowTypedObject:!0,mixed:!0,initialize:function(w){C.Util.Ensure.ensureObject(w,"Mapping must be an object."),C.Model.PropertyInfo.prototype.initialize.apply(this,[w]);var R=w.wrapperElementName||w.wen||void 0;this.wrapperElementName=C.Util.Type.isObject(R)?C.XML.QName.fromObject(R):C.Util.Type.isString(R)?new C.XML.QName(this.defaultElementNamespaceURI,R):null;var O=C.Util.Type.defaultValue(w.allowDom,w.dom,!0),k=C.Util.Type.defaultValue(w.allowTypedObject,w.typed,!0),W=C.Util.Type.defaultValue(w.mixed,w.mx,!0);this.allowDom=O,this.allowTypedObject=k,this.mixed=W},unmarshal:function(w,R,O){var k=null,W=this,X=function(Y){if(W.collection)null===k&&(k=[]),k.push(Y);else{if(null!==k)throw new Error("Value already set.");k=Y}},ee=R.eventType;if(ee===C.XML.Input.START_ELEMENT)C.Util.Type.exists(this.wrapperElementName)?this.unmarshalWrapperElement(w,R,O,X):this.unmarshalElement(w,R,O,X);else if(!this.mixed||ee!==C.XML.Input.CHARACTERS&&ee!==C.XML.Input.CDATA&&ee!==C.XML.Input.ENTITY_REFERENCE){if(ee!==C.XML.Input.SPACE&&ee!==C.XML.Input.COMMENT&&ee!==C.XML.Input.PROCESSING_INSTRUCTION)throw new Error("Illegal state: unexpected event type ["+ee+"].")}else X(R.getText());return k},marshal:function(w,R,O,k){if(C.Util.Type.exists(w)){if(C.Util.Type.exists(this.wrapperElementName)&&O.writeStartElement(this.wrapperElementName),this.collection){C.Util.Ensure.ensureArray(w,"Collection property requires an array value.");for(var W=0;W<w.length;W++)this.marshalItem(w[W],R,O,k)}else this.marshalItem(w,R,O,k);C.Util.Type.exists(this.wrapperElementName)&&O.writeEndElement()}},marshalItem:function(w,R,O,k){if(C.Util.Type.isString(w)){if(!this.mixed)throw new Error("Property is not mixed, can't handle string values.");O.writeCharacters(w)}else if(this.allowDom&&C.Util.Type.exists(w.nodeType))O.writeNode(w);else{if(!C.Util.Type.isObject(w))throw this.mixed?new Error("Unsupported content type, either objects or strings are supported."):new Error("Unsupported content type, only objects are supported.");this.marshalElement(w,R,O,k)}},getTypeInfoByElementName:function(w,R,O){var k=this.getPropertyElementTypeInfo(w,R);if(C.Util.Type.exists(k))return k.typeInfo;var W=R.getElementInfo(w,O);return C.Util.Type.exists(W)?W.typeInfo:void 0},getPropertyElementTypeInfo:function(w,R){throw new Error("Abstract method [getPropertyElementTypeInfo].")},buildStructure:function(w,R){if(C.Util.Ensure.ensureObject(R),C.Util.Type.exists(R.value))throw new Error("The structure already defines a value property.");C.Util.Type.exists(R.elements)||(R.elements={}),C.Util.Type.exists(this.wrapperElementName)?R.elements[this.wrapperElementName.key]=this:this.buildStructureElements(w,R),(this.allowDom||this.allowTypedObject)&&(R.any=this),this.mixed&&!C.Util.Type.exists(this.wrapperElementName)&&(R.mixed=this)},buildStructureElements:function(w,R){throw new Error("Abstract method [buildStructureElements].")},buildStructureElementTypeInfos:function(w,R,O){R.elements[O.elementName.key]=this;var k=w.getSubstitutionMembers(O.elementName);if(C.Util.Type.isArray(k))for(var W=0;W<k.length;W++)this.buildStructureElementTypeInfos(w,R,k[W])},CLASS_NAME:"Jsonix.Model.AbstractElementRefsPropertyInfo"}),C.Model.ElementRefPropertyInfo=C.Class(C.Model.AbstractElementRefsPropertyInfo,{typeInfo:"String",elementName:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.AbstractElementRefsPropertyInfo.prototype.initialize.apply(this,[w]);var R=w.typeInfo||w.ti||"String";C.Util.Type.isObject(R)||C.Util.Ensure.ensureString(R),this.typeInfo=R;var O=w.elementName||w.en||void 0;this.elementName=C.Util.Type.isObject(O)?C.XML.QName.fromObject(O):C.Util.Type.isString(O)?new C.XML.QName(this.defaultElementNamespaceURI,O):new C.XML.QName(this.defaultElementNamespaceURI,this.name)},getPropertyElementTypeInfo:function(w,R){return C.XML.QName.fromObjectOrString(w,R).key===this.elementName.key?this:null},doBuild:function(w,R){this.typeInfo=w.resolveTypeInfo(this.typeInfo,R)},buildStructureElements:function(w,R){this.buildStructureElementTypeInfos(w,R,this)},CLASS_NAME:"Jsonix.Model.ElementRefPropertyInfo"}),C.Model.ElementRefPropertyInfo.Simplified=C.Class(C.Model.ElementRefPropertyInfo,C.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Model.ElementRefPropertyInfo.Simplified"}),C.Model.ElementRefsPropertyInfo=C.Class(C.Model.AbstractElementRefsPropertyInfo,{elementTypeInfos:null,elementTypeInfosMap:null,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.AbstractElementRefsPropertyInfo.prototype.initialize.apply(this,[w]);var R=w.elementTypeInfos||w.etis||[];C.Util.Ensure.ensureArray(R),this.elementTypeInfos=[];for(var O=0;O<R.length;O++)this.elementTypeInfos[O]=C.Util.Type.cloneObject(R[O])},getPropertyElementTypeInfo:function(w,R){var O=C.XML.QName.fromObjectOrString(w,R),k=this.elementTypeInfosMap[O.key];return C.Util.Type.exists(k)?{elementName:O,typeInfo:k}:null},doBuild:function(w,R){this.elementTypeInfosMap={};for(var W=0;W<this.elementTypeInfos.length;W++){var X=this.elementTypeInfos[W];C.Util.Ensure.ensureObject(X),X.typeInfo=w.resolveTypeInfo(X.typeInfo||X.ti||"String",R),X.elementName=C.XML.QName.fromObjectOrString(X.elementName||X.en||void 0,w,this.defaultElementNamespaceURI),this.elementTypeInfosMap[X.elementName.key]=X.typeInfo}},buildStructureElements:function(w,R){for(var O=0;O<this.elementTypeInfos.length;O++)this.buildStructureElementTypeInfos(w,R,this.elementTypeInfos[O])},CLASS_NAME:"Jsonix.Model.ElementRefsPropertyInfo"}),C.Model.ElementRefsPropertyInfo.Simplified=C.Class(C.Model.ElementRefsPropertyInfo,C.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Model.ElementRefsPropertyInfo.Simplified"}),C.Model.AnyElementPropertyInfo=C.Class(C.Binding.Marshalls.Element,C.Binding.Marshalls.Element.AsElementRef,C.Binding.Unmarshalls.Element,C.Binding.Unmarshalls.Element.AsElementRef,C.Model.PropertyInfo,{allowDom:!0,allowTypedObject:!0,mixed:!0,initialize:function(w){C.Util.Ensure.ensureObject(w),C.Model.PropertyInfo.prototype.initialize.apply(this,[w]);var R=C.Util.Type.defaultValue(w.allowDom,w.dom,!0),O=C.Util.Type.defaultValue(w.allowTypedObject,w.typed,!0),k=C.Util.Type.defaultValue(w.mixed,w.mx,!0);this.allowDom=R,this.allowTypedObject=O,this.mixed=k},unmarshal:function(w,R,O){var k=null,W=this,X=function(Y){if(W.collection)null===k&&(k=[]),k.push(Y);else{if(null!==k)throw new Error("Value already set.");k=Y}},ee=R.eventType;if(ee===C.XML.Input.START_ELEMENT)this.unmarshalElement(w,R,O,X);else if(!this.mixed||ee!==C.XML.Input.CHARACTERS&&ee!==C.XML.Input.CDATA&&ee!==C.XML.Input.ENTITY_REFERENCE){if((!this.mixed||ee!==C.XML.Input.SPACE)&&ee!==C.XML.Input.COMMENT&&ee!==C.XML.Input.PROCESSING_INSTRUCTION)throw new Error("Illegal state: unexpected event type ["+ee+"].")}else X(R.getText());return k},marshal:function(w,R,O,k){if(C.Util.Type.exists(w))if(this.collection){C.Util.Ensure.ensureArray(w);for(var W=0;W<w.length;W++)this.marshalItem(w[W],R,O,k)}else this.marshalItem(w,R,O,k)},marshalItem:function(w,R,O,k){this.mixed&&C.Util.Type.isString(w)?O.writeCharacters(w):this.allowDom&&C.Util.Type.exists(w.nodeType)?O.writeNode(w):this.allowTypedObject&&this.marshalElement(w,R,O,k)},doBuild:function(w,R){},buildStructure:function(w,R){if(C.Util.Ensure.ensureObject(R),C.Util.Type.exists(R.value))throw new Error("The structure already defines a value property.");C.Util.Type.exists(R.elements)||(R.elements={}),(this.allowDom||this.allowTypedObject)&&(R.any=this),this.mixed&&(R.mixed=this)},CLASS_NAME:"Jsonix.Model.AnyElementPropertyInfo"}),C.Model.AnyElementPropertyInfo.Simplified=C.Class(C.Model.AnyElementPropertyInfo,C.Binding.Unmarshalls.Element.AsSimplifiedElementRef,{CLASS_NAME:"Jsonix.Model.AnyElementPropertyInfo.Simplified"}),C.Model.Module=C.Class(C.Mapping.Styled,{name:null,typeInfos:null,elementInfos:null,targetNamespace:"",defaultElementNamespaceURI:"",defaultAttributeNamespaceURI:"",initialize:function(w,R){if(C.Mapping.Styled.prototype.initialize.apply(this,[R]),this.typeInfos=[],this.elementInfos=[],typeof w<"u"){C.Util.Ensure.ensureObject(w),this.name=w.name||w.n||null,this.defaultElementNamespaceURI=w.defaultElementNamespaceURI||w.dens||w.targetNamespace||w.tns||"",this.targetNamespace=w.targetNamespace||w.tns||w.defaultElementNamespaceURI||w.dens||this.defaultElementNamespaceURI,this.defaultAttributeNamespaceURI=w.defaultAttributeNamespaceURI||w.dans||"";var ee=w.typeInfos||w.tis||[];for(var Y in this.initializeTypeInfos(ee),w)w.hasOwnProperty(Y)&&w[Y]instanceof this.mappingStyle.classInfo&&this.typeInfos.push(w[Y]);this.initializeElementInfos(w.elementInfos||w.eis||[])}},initializeTypeInfos:function(w){var R,k;for(C.Util.Ensure.ensureArray(w),R=0;R<w.length;R++)k=this.createTypeInfo(w[R]),this.typeInfos.push(k)},initializeElementInfos:function(w){var R,k;for(C.Util.Ensure.ensureArray(w),R=0;R<w.length;R++)k=this.createElementInfo(w[R]),this.elementInfos.push(k)},createTypeInfo:function(w){var R;if(C.Util.Ensure.ensureObject(w),w instanceof C.Model.TypeInfo)R=w;else{var O=(w=C.Util.Type.cloneObject(w)).type||w.t||"classInfo";if(!C.Util.Type.isFunction(this.typeInfoCreators[O]))throw new Error("Unknown type info type ["+O+"].");R=this.typeInfoCreators[O].call(this,w)}return R},initializeNames:function(w){var R=w.localName||w.ln||null;if(w.localName=R,w.name=w.name||w.n||null,C.Util.Type.isString(w.name))w.name.length>0&&"."===w.name.charAt(0)&&C.Util.Type.isString(this.name)&&(w.name=this.name+w.name);else{if(!C.Util.Type.isString(R))throw new Error("Neither [name/n] nor [localName/ln] was provided for the class info.");w.name=C.Util.Type.isString(this.name)?this.name+"."+R:R}},createClassInfo:function(w){C.Util.Ensure.ensureObject(w),w.defaultElementNamespaceURI=w.defaultElementNamespaceURI||w.dens||this.defaultElementNamespaceURI,w.targetNamespace=w.targetNamespace||w.tns||this.targetNamespace,w.defaultAttributeNamespaceURI=w.defaultAttributeNamespaceURI||w.dans||this.defaultAttributeNamespaceURI,this.initializeNames(w);var W=new this.mappingStyle.classInfo(w,{mappingStyle:this.mappingStyle});return W.module=this,W},createEnumLeafInfo:function(w){C.Util.Ensure.ensureObject(w),this.initializeNames(w);var R=new this.mappingStyle.enumLeafInfo(w,{mappingStyle:this.mappingStyle});return R.module=this,R},createList:function(w){C.Util.Ensure.ensureObject(w);var R=w.baseTypeInfo||w.typeInfo||w.bti||w.ti||"String",O=w.typeName||w.tn||null;C.Util.Type.exists(O)&&(O=C.Util.Type.isString(O)?new C.XML.QName(this.targetNamespace,O):C.XML.QName.fromObject(O));var k=w.separator||w.sep||" ";C.Util.Ensure.ensureExists(R);var W=new C.Schema.XSD.List(R,O,k);return W.module=this,W},createElementInfo:function(w){C.Util.Ensure.ensureObject(w),(w=C.Util.Type.cloneObject(w)).defaultElementNamespaceURI=w.defaultElementNamespaceURI||w.dens||this.defaultElementNamespaceURI;var O=w.elementName||w.en||void 0;C.Util.Ensure.ensureExists(O);var k=w.typeInfo||w.ti||"String";if(C.Util.Ensure.ensureExists(k),w.typeInfo=k,C.Util.Type.isObject(O))w.elementName=C.XML.QName.fromObject(O);else{if(!C.Util.Type.isString(O))throw new Error("Element info ["+w+"] must provide an element name.");w.elementName=new C.XML.QName(this.defaultElementNamespaceURI,O)}var W=w.substitutionHead||w.sh||null;C.Util.Type.exists(W)&&(C.Util.Type.isObject(W)?w.substitutionHead=C.XML.QName.fromObject(W):(C.Util.Ensure.ensureString(W),w.substitutionHead=new C.XML.QName(this.defaultElementNamespaceURI,W)));var X=new this.mappingStyle.elementInfo(w,{mappingStyle:this.mappingStyle});return X.module=this,X},registerTypeInfos:function(w){for(var R=0;R<this.typeInfos.length;R++)w.registerTypeInfo(this.typeInfos[R],this)},buildTypeInfos:function(w){for(var R=0;R<this.typeInfos.length;R++)this.typeInfos[R].build(w,this)},registerElementInfos:function(w){for(var R=0;R<this.elementInfos.length;R++)w.registerElementInfo(this.elementInfos[R],this)},buildElementInfos:function(w){for(var R=0;R<this.elementInfos.length;R++)this.elementInfos[R].build(w,this)},cs:function(){return this},es:function(){return this},CLASS_NAME:"Jsonix.Model.Module"}),C.Model.Module.prototype.typeInfoCreators={classInfo:C.Model.Module.prototype.createClassInfo,c:C.Model.Module.prototype.createClassInfo,enumInfo:C.Model.Module.prototype.createEnumLeafInfo,enum:C.Model.Module.prototype.createEnumLeafInfo,list:C.Model.Module.prototype.createList,l:C.Model.Module.prototype.createList},C.Mapping.Style.Standard=C.Class(C.Mapping.Style,{marshaller:C.Binding.Marshaller,unmarshaller:C.Binding.Unmarshaller,module:C.Model.Module,elementInfo:C.Model.ElementInfo,classInfo:C.Model.ClassInfo,enumLeafInfo:C.Model.EnumLeafInfo,anyAttributePropertyInfo:C.Model.AnyAttributePropertyInfo,anyElementPropertyInfo:C.Model.AnyElementPropertyInfo,attributePropertyInfo:C.Model.AttributePropertyInfo,elementMapPropertyInfo:C.Model.ElementMapPropertyInfo,elementPropertyInfo:C.Model.ElementPropertyInfo,elementsPropertyInfo:C.Model.ElementsPropertyInfo,elementRefPropertyInfo:C.Model.ElementRefPropertyInfo,elementRefsPropertyInfo:C.Model.ElementRefsPropertyInfo,valuePropertyInfo:C.Model.ValuePropertyInfo,initialize:function(){C.Mapping.Style.prototype.initialize.apply(this)},CLASS_NAME:"Jsonix.Mapping.Style.Standard"}),C.Mapping.Style.STYLES.standard=new C.Mapping.Style.Standard,C.Mapping.Style.Simplified=C.Class(C.Mapping.Style,{marshaller:C.Binding.Marshaller.Simplified,unmarshaller:C.Binding.Unmarshaller.Simplified,module:C.Model.Module,elementInfo:C.Model.ElementInfo,classInfo:C.Model.ClassInfo,enumLeafInfo:C.Model.EnumLeafInfo,anyAttributePropertyInfo:C.Model.AnyAttributePropertyInfo.Simplified,anyElementPropertyInfo:C.Model.AnyElementPropertyInfo.Simplified,attributePropertyInfo:C.Model.AttributePropertyInfo,elementMapPropertyInfo:C.Model.ElementMapPropertyInfo,elementPropertyInfo:C.Model.ElementPropertyInfo,elementsPropertyInfo:C.Model.ElementsPropertyInfo,elementRefPropertyInfo:C.Model.ElementRefPropertyInfo.Simplified,elementRefsPropertyInfo:C.Model.ElementRefsPropertyInfo.Simplified,valuePropertyInfo:C.Model.ValuePropertyInfo,initialize:function(){C.Mapping.Style.prototype.initialize.apply(this)},CLASS_NAME:"Jsonix.Mapping.Style.Simplified"}),C.Mapping.Style.STYLES.simplified=new C.Mapping.Style.Simplified,C.Schema.XSD={},C.Schema.XSD.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema",C.Schema.XSD.PREFIX="xsd",C.Schema.XSD.qname=function(w){return C.Util.Ensure.ensureString(w),new C.XML.QName(C.Schema.XSD.NAMESPACE_URI,w,C.Schema.XSD.PREFIX)},C.Schema.XSD.AnyType=C.Class(C.Model.ClassInfo,{typeName:C.Schema.XSD.qname("anyType"),initialize:function(){C.Model.ClassInfo.prototype.initialize.call(this,{name:"AnyType",propertyInfos:[{type:"anyAttribute",name:"attributes"},{type:"anyElement",name:"content",collection:!0}]})},CLASS_NAME:"Jsonix.Schema.XSD.AnyType"}),C.Schema.XSD.AnyType.INSTANCE=new C.Schema.XSD.AnyType,C.Schema.XSD.AnySimpleType=C.Class(C.Model.TypeInfo,{name:"AnySimpleType",typeName:C.Schema.XSD.qname("anySimpleType"),initialize:function(){C.Model.TypeInfo.prototype.initialize.apply(this,[])},print:function(w,R,O,k){return w},parse:function(w,R,O,k){return w},isInstance:function(w,R,O){return!0},reprint:function(w,R,O,k){return C.Util.Type.isString(w)&&!this.isInstance(w,R,k)?this.print(this.parse(w,R,null,k),R,O,k):this.print(w,R,O,k)},unmarshal:function(w,R,O){var k=R.getElementText();return C.Util.StringUtils.isNotBlank(k)?this.parse(k,w,R,O):null},marshal:function(w,R,O,k){C.Util.Type.exists(w)&&O.writeCharacters(this.reprint(w,R,O,k))},build:function(w,R){},CLASS_NAME:"Jsonix.Schema.XSD.AnySimpleType"}),C.Schema.XSD.AnySimpleType.INSTANCE=new C.Schema.XSD.AnySimpleType,C.Schema.XSD.List=C.Class(C.Schema.XSD.AnySimpleType,{name:null,typeName:null,typeInfo:null,separator:" ",trimmedSeparator:C.Util.StringUtils.whitespaceCharacters,simpleType:!0,built:!1,initialize:function(w,R,O){C.Util.Ensure.ensureExists(w),this.typeInfo=w,C.Util.Type.exists(this.name)||(this.name=w.name+"*"),C.Util.Type.exists(R)&&(this.typeName=R),this.separator=C.Util.Type.isString(O)?O:" ";var k=C.Util.StringUtils.trim(this.separator);this.trimmedSeparator=0===k.length?C.Util.StringUtils.whitespaceCharacters:k},build:function(w){this.built||(this.typeInfo=w.resolveTypeInfo(this.typeInfo,this.module),this.built=!0)},print:function(w,R,O,k){if(!C.Util.Type.exists(w))return null;C.Util.Ensure.ensureArray(w);for(var W="",X=0;X<w.length;X++)X>0&&(W+=this.separator),W+=this.typeInfo.reprint(w[X],R,O,k);return W},parse:function(w,R,O,k){C.Util.Ensure.ensureString(w);for(var W=C.Util.StringUtils.splitBySeparatorChars(w,this.trimmedSeparator),X=[],ee=0;ee<W.length;ee++)X.push(this.typeInfo.parse(C.Util.StringUtils.trim(W[ee]),R,O,k));return X},CLASS_NAME:"Jsonix.Schema.XSD.List"}),C.Schema.XSD.String=C.Class(C.Schema.XSD.AnySimpleType,{name:"String",typeName:C.Schema.XSD.qname("string"),unmarshal:function(w,R,O){var k=R.getElementText();return this.parse(k,w,R,O)},print:function(w,R,O,k){return C.Util.Ensure.ensureString(w),w},parse:function(w,R,O,k){return C.Util.Ensure.ensureString(w),w},isInstance:function(w,R,O){return C.Util.Type.isString(w)},CLASS_NAME:"Jsonix.Schema.XSD.String"}),C.Schema.XSD.String.INSTANCE=new C.Schema.XSD.String,C.Schema.XSD.String.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.String.INSTANCE),C.Schema.XSD.Strings=C.Class(C.Schema.XSD.List,{name:"Strings",initialize:function(){C.Schema.XSD.List.prototype.initialize.apply(this,[C.Schema.XSD.String.INSTANCE,C.Schema.XSD.qname("strings")," "])},CLASS_NAME:"Jsonix.Schema.XSD.Strings"}),C.Schema.XSD.Strings.INSTANCE=new C.Schema.XSD.Strings,C.Schema.XSD.NormalizedString=C.Class(C.Schema.XSD.String,{name:"NormalizedString",typeName:C.Schema.XSD.qname("normalizedString"),CLASS_NAME:"Jsonix.Schema.XSD.NormalizedString"}),C.Schema.XSD.NormalizedString.INSTANCE=new C.Schema.XSD.NormalizedString,C.Schema.XSD.NormalizedString.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.NormalizedString.INSTANCE),C.Schema.XSD.Token=C.Class(C.Schema.XSD.NormalizedString,{name:"Token",typeName:C.Schema.XSD.qname("token"),CLASS_NAME:"Jsonix.Schema.XSD.Token"}),C.Schema.XSD.Token.INSTANCE=new C.Schema.XSD.Token,C.Schema.XSD.Token.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Token.INSTANCE),C.Schema.XSD.Language=C.Class(C.Schema.XSD.Token,{name:"Language",typeName:C.Schema.XSD.qname("language"),CLASS_NAME:"Jsonix.Schema.XSD.Language"}),C.Schema.XSD.Language.INSTANCE=new C.Schema.XSD.Language,C.Schema.XSD.Language.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Language.INSTANCE),C.Schema.XSD.Name=C.Class(C.Schema.XSD.Token,{name:"Name",typeName:C.Schema.XSD.qname("Name"),CLASS_NAME:"Jsonix.Schema.XSD.Name"}),C.Schema.XSD.Name.INSTANCE=new C.Schema.XSD.Name,C.Schema.XSD.Name.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Name.INSTANCE),C.Schema.XSD.NCName=C.Class(C.Schema.XSD.Name,{name:"NCName",typeName:C.Schema.XSD.qname("NCName"),CLASS_NAME:"Jsonix.Schema.XSD.NCName"}),C.Schema.XSD.NCName.INSTANCE=new C.Schema.XSD.NCName,C.Schema.XSD.NCName.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.NCName.INSTANCE),C.Schema.XSD.NMToken=C.Class(C.Schema.XSD.Token,{name:"NMToken",typeName:C.Schema.XSD.qname("NMTOKEN"),CLASS_NAME:"Jsonix.Schema.XSD.NMToken"}),C.Schema.XSD.NMToken.INSTANCE=new C.Schema.XSD.NMToken,C.Schema.XSD.NMTokens=C.Class(C.Schema.XSD.List,{name:"NMTokens",initialize:function(){C.Schema.XSD.List.prototype.initialize.apply(this,[C.Schema.XSD.NMToken.INSTANCE,C.Schema.XSD.qname("NMTOKEN")," "])},CLASS_NAME:"Jsonix.Schema.XSD.NMTokens"}),C.Schema.XSD.NMTokens.INSTANCE=new C.Schema.XSD.NMTokens,C.Schema.XSD.Boolean=C.Class(C.Schema.XSD.AnySimpleType,{name:"Boolean",typeName:C.Schema.XSD.qname("boolean"),print:function(w,R,O,k){return C.Util.Ensure.ensureBoolean(w),w?"true":"false"},parse:function(w,R,O,k){if(C.Util.Ensure.ensureString(w),"true"===w||"1"===w)return!0;if("false"===w||"0"===w)return!1;throw new Error("Either [true], [1], [0] or [false] expected as boolean value.")},isInstance:function(w,R,O){return C.Util.Type.isBoolean(w)},CLASS_NAME:"Jsonix.Schema.XSD.Boolean"}),C.Schema.XSD.Boolean.INSTANCE=new C.Schema.XSD.Boolean,C.Schema.XSD.Boolean.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Boolean.INSTANCE),C.Schema.XSD.Base64Binary=C.Class(C.Schema.XSD.AnySimpleType,{name:"Base64Binary",typeName:C.Schema.XSD.qname("base64Binary"),charToByte:{},byteToChar:[],initialize:function(){C.Schema.XSD.AnySimpleType.prototype.initialize.apply(this);for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",R=0;R<w.length;R++){var O=w.charAt(R);w.charCodeAt(R),this.byteToChar[R]=O,this.charToByte[O]=R}},print:function(w,R,O,k){return C.Util.Ensure.ensureArray(w),this.encode(w)},parse:function(w,R,O,k){return C.Util.Ensure.ensureString(w),this.decode(w)},encode:function(w){var O,k,W,ee,Y,ne,R="",be=0,Ge=w.length;for(be=0;be<Ge;be+=3)O=255&w[be],be+1<Ge?(ee=this.byteToChar[(3&O)<<4|(k=255&w[be+1])>>4],be+2<Ge?(Y=this.byteToChar[(15&k)<<2|(W=255&w[be+2])>>6],ne=this.byteToChar[63&W]):(Y=this.byteToChar[(15&k)<<2],ne="=")):(ee=this.byteToChar[(3&O)<<4],Y="=",ne="="),R=R+this.byteToChar[O>>2]+ee+Y+ne;return R},decode:function(w){input=w.replace(/[^A-Za-z0-9\+\/\=]/g,"");var R=Math.floor(input.length/4*3);"="===input.charAt(input.length-1)&&R--,"="===input.charAt(input.length-2)&&R--;var W,X,ee,Y,ne,be,O=new Array(R),Me=0,Ge=0;for(Me=0;Me<R;Me+=3)ee=this.charToByte[input.charAt(Ge++)],W=(15&(Y=this.charToByte[input.charAt(Ge++)]))<<4|(ne=this.charToByte[input.charAt(Ge++)])>>2,X=(3&ne)<<6|(be=this.charToByte[input.charAt(Ge++)]),O[Me]=ee<<2|Y>>4,64!=ne&&(O[Me+1]=W),64!=be&&(O[Me+2]=X);return O},isInstance:function(w,R,O){return C.Util.Type.isArray(w)},CLASS_NAME:"Jsonix.Schema.XSD.Base64Binary"}),C.Schema.XSD.Base64Binary.INSTANCE=new C.Schema.XSD.Base64Binary,C.Schema.XSD.Base64Binary.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Base64Binary.INSTANCE),C.Schema.XSD.HexBinary=C.Class(C.Schema.XSD.AnySimpleType,{name:"HexBinary",typeName:C.Schema.XSD.qname("hexBinary"),charToQuartet:{},byteToDuplet:[],initialize:function(){C.Schema.XSD.AnySimpleType.prototype.initialize.apply(this);var O,w="0123456789ABCDEF",R=w.toLowerCase();for(O=0;O<16;O++)this.charToQuartet[w.charAt(O)]=O,O>=10&&(this.charToQuartet[R.charAt(O)]=O);for(O=0;O<256;O++)this.byteToDuplet[O]=w[O>>4]+w[15&O]},print:function(w,R,O,k){return C.Util.Ensure.ensureArray(w),this.encode(w)},parse:function(w,R,O,k){return C.Util.Ensure.ensureString(w),this.decode(w)},encode:function(w){for(var R="",O=0;O<w.length;O++)R+=this.byteToDuplet[255&w[O]];return R},decode:function(w){for(var R=w.replace(/[^A-Fa-f0-9]/g,""),O=R.length>>1,k=new Array(O),W=0;W<O;W++){var X=R.charAt(2*W),ee=R.charAt(2*W+1);k[W]=this.charToQuartet[X]<<4|this.charToQuartet[ee]}return k},isInstance:function(w,R,O){return C.Util.Type.isArray(w)},CLASS_NAME:"Jsonix.Schema.XSD.HexBinary"}),C.Schema.XSD.HexBinary.INSTANCE=new C.Schema.XSD.HexBinary,C.Schema.XSD.HexBinary.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.HexBinary.INSTANCE),C.Schema.XSD.Number=C.Class(C.Schema.XSD.AnySimpleType,{name:"Number",typeName:C.Schema.XSD.qname("number"),print:function(w,R,O,k){return C.Util.Ensure.ensureNumberOrNaN(w),C.Util.Type.isNaN(w)?"NaN":w===1/0?"INF":w===-1/0?"-INF":String(w)},parse:function(w,R,O,k){if(C.Util.Ensure.ensureString(w),"-INF"===w)return-1/0;if("INF"===w)return 1/0;if("NaN"===w)return NaN;var W=Number(w);return C.Util.Ensure.ensureNumber(W),W},isInstance:function(w,R,O){return C.Util.Type.isNumberOrNaN(w)},CLASS_NAME:"Jsonix.Schema.XSD.Number"}),C.Schema.XSD.Number.INSTANCE=new C.Schema.XSD.Number,C.Schema.XSD.Number.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Number.INSTANCE),C.Schema.XSD.Float=C.Class(C.Schema.XSD.Number,{name:"Float",typeName:C.Schema.XSD.qname("float"),isInstance:function(w,R,O){return C.Util.Type.isNaN(w)||w===-1/0||w===1/0||C.Util.Type.isNumber(w)&&w>=this.MIN_VALUE&&w<=this.MAX_VALUE},MIN_VALUE:-34028235e31,MAX_VALUE:34028235e31,CLASS_NAME:"Jsonix.Schema.XSD.Float"}),C.Schema.XSD.Float.INSTANCE=new C.Schema.XSD.Float,C.Schema.XSD.Float.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Float.INSTANCE),C.Schema.XSD.Decimal=C.Class(C.Schema.XSD.AnySimpleType,{name:"Decimal",typeName:C.Schema.XSD.qname("decimal"),print:function(w,R,O,k){return C.Util.Ensure.ensureNumber(w),String(w)},parse:function(w,R,O,k){C.Util.Ensure.ensureString(w);var W=Number(w);return C.Util.Ensure.ensureNumber(W),W},isInstance:function(w,R,O){return C.Util.Type.isNumber(w)},CLASS_NAME:"Jsonix.Schema.XSD.Decimal"}),C.Schema.XSD.Decimal.INSTANCE=new C.Schema.XSD.Decimal,C.Schema.XSD.Decimal.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Decimal.INSTANCE),C.Schema.XSD.Integer=C.Class(C.Schema.XSD.AnySimpleType,{name:"Integer",typeName:C.Schema.XSD.qname("integer"),print:function(w,R,O,k){return C.Util.Ensure.ensureInteger(w),String(w)},parse:function(w,R,O,k){C.Util.Ensure.ensureString(w);var W=Number(w);return C.Util.Ensure.ensureInteger(W),W},isInstance:function(w,R,O){return C.Util.NumberUtils.isInteger(w)&&w>=this.MIN_VALUE&&w<=this.MAX_VALUE},MIN_VALUE:-0x8000000000000000,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.Integer"}),C.Schema.XSD.Integer.INSTANCE=new C.Schema.XSD.Integer,C.Schema.XSD.Integer.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Integer.INSTANCE),C.Schema.XSD.NonPositiveInteger=C.Class(C.Schema.XSD.Integer,{name:"NonPositiveInteger",typeName:C.Schema.XSD.qname("nonPositiveInteger"),MIN_VALUE:-0x8000000000000000,MAX_VALUE:0,CLASS_NAME:"Jsonix.Schema.XSD.NonPositiveInteger"}),C.Schema.XSD.NonPositiveInteger.INSTANCE=new C.Schema.XSD.NonPositiveInteger,C.Schema.XSD.NonPositiveInteger.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.NonPositiveInteger.INSTANCE),C.Schema.XSD.NegativeInteger=C.Class(C.Schema.XSD.NonPositiveInteger,{name:"NegativeInteger",typeName:C.Schema.XSD.qname("negativeInteger"),MIN_VALUE:-0x8000000000000000,MAX_VALUE:-1,CLASS_NAME:"Jsonix.Schema.XSD.NegativeInteger"}),C.Schema.XSD.NegativeInteger.INSTANCE=new C.Schema.XSD.NegativeInteger,C.Schema.XSD.NegativeInteger.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.NegativeInteger.INSTANCE),C.Schema.XSD.Long=C.Class(C.Schema.XSD.Integer,{name:"Long",typeName:C.Schema.XSD.qname("long"),MIN_VALUE:-0x8000000000000000,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.Long"}),C.Schema.XSD.Long.INSTANCE=new C.Schema.XSD.Long,C.Schema.XSD.Long.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Long.INSTANCE),C.Schema.XSD.Int=C.Class(C.Schema.XSD.Long,{name:"Int",typeName:C.Schema.XSD.qname("int"),MIN_VALUE:-2147483648,MAX_VALUE:2147483647,CLASS_NAME:"Jsonix.Schema.XSD.Int"}),C.Schema.XSD.Int.INSTANCE=new C.Schema.XSD.Int,C.Schema.XSD.Int.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Int.INSTANCE),C.Schema.XSD.Short=C.Class(C.Schema.XSD.Int,{name:"Short",typeName:C.Schema.XSD.qname("short"),MIN_VALUE:-32768,MAX_VALUE:32767,CLASS_NAME:"Jsonix.Schema.XSD.Short"}),C.Schema.XSD.Short.INSTANCE=new C.Schema.XSD.Short,C.Schema.XSD.Short.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Short.INSTANCE),C.Schema.XSD.Byte=C.Class(C.Schema.XSD.Short,{name:"Byte",typeName:C.Schema.XSD.qname("byte"),MIN_VALUE:-128,MAX_VALUE:127,CLASS_NAME:"Jsonix.Schema.XSD.Byte"}),C.Schema.XSD.Byte.INSTANCE=new C.Schema.XSD.Byte,C.Schema.XSD.Byte.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Byte.INSTANCE),C.Schema.XSD.NonNegativeInteger=C.Class(C.Schema.XSD.Integer,{name:"NonNegativeInteger",typeName:C.Schema.XSD.qname("nonNegativeInteger"),MIN_VALUE:0,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.NonNegativeInteger"}),C.Schema.XSD.NonNegativeInteger.INSTANCE=new C.Schema.XSD.NonNegativeInteger,C.Schema.XSD.NonNegativeInteger.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.NonNegativeInteger.INSTANCE),C.Schema.XSD.UnsignedLong=C.Class(C.Schema.XSD.NonNegativeInteger,{name:"UnsignedLong",typeName:C.Schema.XSD.qname("unsignedLong"),MIN_VALUE:0,MAX_VALUE:0x10000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedLong"}),C.Schema.XSD.UnsignedLong.INSTANCE=new C.Schema.XSD.UnsignedLong,C.Schema.XSD.UnsignedLong.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.UnsignedLong.INSTANCE),C.Schema.XSD.UnsignedInt=C.Class(C.Schema.XSD.UnsignedLong,{name:"UnsignedInt",typeName:C.Schema.XSD.qname("unsignedInt"),MIN_VALUE:0,MAX_VALUE:4294967295,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedInt"}),C.Schema.XSD.UnsignedInt.INSTANCE=new C.Schema.XSD.UnsignedInt,C.Schema.XSD.UnsignedInt.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.UnsignedInt.INSTANCE),C.Schema.XSD.UnsignedShort=C.Class(C.Schema.XSD.UnsignedInt,{name:"UnsignedShort",typeName:C.Schema.XSD.qname("unsignedShort"),MIN_VALUE:0,MAX_VALUE:65535,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedShort"}),C.Schema.XSD.UnsignedShort.INSTANCE=new C.Schema.XSD.UnsignedShort,C.Schema.XSD.UnsignedShort.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.UnsignedShort.INSTANCE),C.Schema.XSD.UnsignedByte=C.Class(C.Schema.XSD.UnsignedShort,{name:"UnsignedByte",typeName:C.Schema.XSD.qname("unsignedByte"),MIN_VALUE:0,MAX_VALUE:255,CLASS_NAME:"Jsonix.Schema.XSD.UnsignedByte"}),C.Schema.XSD.UnsignedByte.INSTANCE=new C.Schema.XSD.UnsignedByte,C.Schema.XSD.UnsignedByte.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.UnsignedByte.INSTANCE),C.Schema.XSD.PositiveInteger=C.Class(C.Schema.XSD.NonNegativeInteger,{name:"PositiveInteger",typeName:C.Schema.XSD.qname("positiveInteger"),MIN_VALUE:1,MAX_VALUE:0x8000000000000000,CLASS_NAME:"Jsonix.Schema.XSD.PositiveInteger"}),C.Schema.XSD.PositiveInteger.INSTANCE=new C.Schema.XSD.PositiveInteger,C.Schema.XSD.PositiveInteger.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.PositiveInteger.INSTANCE),C.Schema.XSD.Double=C.Class(C.Schema.XSD.Number,{name:"Double",typeName:C.Schema.XSD.qname("double"),isInstance:function(w,R,O){return C.Util.Type.isNaN(w)||w===-1/0||w===1/0||C.Util.Type.isNumber(w)&&w>=this.MIN_VALUE&&w<=this.MAX_VALUE},MIN_VALUE:-17976931348623157e292,MAX_VALUE:17976931348623157e292,CLASS_NAME:"Jsonix.Schema.XSD.Double"}),C.Schema.XSD.Double.INSTANCE=new C.Schema.XSD.Double,C.Schema.XSD.Double.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Double.INSTANCE),C.Schema.XSD.AnyURI=C.Class(C.Schema.XSD.AnySimpleType,{name:"AnyURI",typeName:C.Schema.XSD.qname("anyURI"),print:function(w,R,O,k){return C.Util.Ensure.ensureString(w),w},parse:function(w,R,O,k){return C.Util.Ensure.ensureString(w),w},isInstance:function(w,R,O){return C.Util.Type.isString(w)},CLASS_NAME:"Jsonix.Schema.XSD.AnyURI"}),C.Schema.XSD.AnyURI.INSTANCE=new C.Schema.XSD.AnyURI,C.Schema.XSD.AnyURI.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.AnyURI.INSTANCE),C.Schema.XSD.QName=C.Class(C.Schema.XSD.AnySimpleType,{name:"QName",typeName:C.Schema.XSD.qname("QName"),print:function(w,R,O,k){var X,W=C.XML.QName.fromObject(w),ee=W.localPart;return O?(X=O.getPrefix(W.namespaceURI,W.prefix||null),O.declareNamespace(W.namespaceURI,X)):X=W.prefix,X?X+":"+ee:ee},parse:function(w,R,O,k){C.Util.Ensure.ensureString(w);var W,X,ee=(w=C.Util.StringUtils.trim(w)).indexOf(":");if(-1===ee)W="",X=w;else{if(!(ee>0&&ee<w.length-1))throw new Error("Invalid QName ["+w+"].");W=w.substring(0,ee),X=w.substring(ee+1)}var Y=O||R||null;if(Y){var ne=Y.getNamespaceURI(W);if(C.Util.Type.isString(ne))return new C.XML.QName(ne,X,W);throw new Error("Prefix ["+W+"] of the QName ["+w+"] is not bound in this context.")}return w},isInstance:function(w,R,O){return w instanceof C.XML.QName||C.Util.Type.isObject(w)&&C.Util.Type.isString(w.localPart||w.lp)},CLASS_NAME:"Jsonix.Schema.XSD.QName"}),C.Schema.XSD.QName.INSTANCE=new C.Schema.XSD.QName,C.Schema.XSD.QName.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.QName.INSTANCE),C.Schema.XSD.Calendar=C.Class(C.Schema.XSD.AnySimpleType,{name:"Calendar",typeName:C.Schema.XSD.qname("calendar"),parse:function(w,R,O,k){if(C.Util.Ensure.ensureString(w),w.match(new RegExp("^"+C.Schema.XSD.Calendar.DATETIME_PATTERN+"$")))return this.parseDateTime(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.DATE_PATTERN+"$")))return this.parseDate(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.TIME_PATTERN+"$")))return this.parseTime(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN+"$")))return this.parseGYearMonth(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.GYEAR_PATTERN+"$")))return this.parseGYear(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.GMONTH_DAY_PATTERN+"$")))return this.parseGMonthDay(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.GMONTH_PATTERN+"$")))return this.parseGMonth(w,R,O,k);if(w.match(new RegExp("^"+C.Schema.XSD.Calendar.GDAY_PATTERN+"$")))return this.parseGDay(w,R,O,k);throw new Error("Value ["+w+"] does not match xs:dateTime, xs:date, xs:time, xs:gYearMonth, xs:gYear, xs:gMonthDay, xs:gMonth or xs:gDay patterns.")},parseGYearMonth:function(w,R,O,k){var W=new RegExp("^"+C.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN+"$"),X=w.match(W);if(null!==X){var ee={year:parseInt(X[1],10),month:parseInt(X[5],10),timezone:this.parseTimezoneString(X[7])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:gYearMonth pattern.")},parseGYear:function(w,R,O,k){var W=new RegExp("^"+C.Schema.XSD.Calendar.GYEAR_PATTERN+"$"),X=w.match(W);if(null!==X){var ee={year:parseInt(X[1],10),timezone:this.parseTimezoneString(X[5])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:gYear pattern.")},parseGMonthDay:function(w,R,O,k){var W=new RegExp("^"+C.Schema.XSD.Calendar.GMONTH_DAY_PATTERN+"$"),X=w.match(W);if(null!==X){var ee={month:parseInt(X[2],10),day:parseInt(X[3],10),timezone:this.parseTimezoneString(X[5])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:gMonthDay pattern.")},parseGMonth:function(w,R,O,k){var W=new RegExp("^"+C.Schema.XSD.Calendar.GMONTH_PATTERN+"$"),X=w.match(W);if(null!==X){var ee={month:parseInt(X[2],10),timezone:this.parseTimezoneString(X[3])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:gMonth pattern.")},parseGDay:function(w,R,O,k){var W=new RegExp("^"+C.Schema.XSD.Calendar.GDAY_PATTERN+"$"),X=w.match(W);if(null!==X){var ee={day:parseInt(X[2],10),timezone:this.parseTimezoneString(X[3])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:gDay pattern.")},parseDateTime:function(w,R,O,k){C.Util.Ensure.ensureString(w);var W=new RegExp("^"+C.Schema.XSD.Calendar.DATETIME_PATTERN+"$"),X=w.match(W);if(null!==X){var ee={year:parseInt(X[1],10),month:parseInt(X[5],10),day:parseInt(X[7],10),hour:parseInt(X[9],10),minute:parseInt(X[10],10),second:parseInt(X[11],10),fractionalSecond:X[12]?parseFloat(X[12]):0,timezone:this.parseTimezoneString(X[14])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:date pattern.")},parseDate:function(w,R,O,k){C.Util.Ensure.ensureString(w);var W=new RegExp("^"+C.Schema.XSD.Calendar.DATE_PATTERN+"$"),X=w.match(W);if(null!==X){var ee={year:parseInt(X[1],10),month:parseInt(X[5],10),day:parseInt(X[7],10),timezone:this.parseTimezoneString(X[9])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:date pattern.")},parseTime:function(w,R,O,k){C.Util.Ensure.ensureString(w);var W=new RegExp("^"+C.Schema.XSD.Calendar.TIME_PATTERN+"$"),X=w.match(W);if(null!==X){var ee={hour:parseInt(X[1],10),minute:parseInt(X[2],10),second:parseInt(X[3],10),fractionalSecond:X[4]?parseFloat(X[4]):0,timezone:this.parseTimezoneString(X[6])};return new C.XML.Calendar(ee)}throw new Error("Value ["+w+"] does not match the xs:time pattern.")},parseTimezoneString:function(w){if(C.Util.Type.isString(w)){if(""===w)return NaN;if("Z"===w)return 0;if("+14:00"===w)return 840;if("-14:00"===w)return-840;var R=new RegExp("^"+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+"$"),O=w.match(R);if(null!==O)return("+"===O[1]?1:-1)*(60*parseInt(O[4],10)+parseInt(O[5],10));throw new Error("Value ["+w+"] does not match the timezone pattern.")}return NaN},print:function(w,R,O,k){if(C.Util.Ensure.ensureObject(w),C.Util.NumberUtils.isInteger(w.year)&&C.Util.NumberUtils.isInteger(w.month)&&C.Util.NumberUtils.isInteger(w.day)&&C.Util.NumberUtils.isInteger(w.hour)&&C.Util.NumberUtils.isInteger(w.minute)&&C.Util.NumberUtils.isInteger(w.second))return this.printDateTime(w);if(C.Util.NumberUtils.isInteger(w.year)&&C.Util.NumberUtils.isInteger(w.month)&&C.Util.NumberUtils.isInteger(w.day))return this.printDate(w);if(C.Util.NumberUtils.isInteger(w.hour)&&C.Util.NumberUtils.isInteger(w.minute)&&C.Util.NumberUtils.isInteger(w.second))return this.printTime(w);if(C.Util.NumberUtils.isInteger(w.year)&&C.Util.NumberUtils.isInteger(w.month))return this.printGYearMonth(w);if(C.Util.NumberUtils.isInteger(w.month)&&C.Util.NumberUtils.isInteger(w.day))return this.printGMonthDay(w);if(C.Util.NumberUtils.isInteger(w.year))return this.printGYear(w);if(C.Util.NumberUtils.isInteger(w.month))return this.printGMonth(w);if(C.Util.NumberUtils.isInteger(w.day))return this.printGDay(w);throw new Error("Value ["+w+"] is not recognized as dateTime, date or time.")},printDateTime:function(w){C.Util.Ensure.ensureObject(w),C.Util.Ensure.ensureInteger(w.year),C.Util.Ensure.ensureInteger(w.month),C.Util.Ensure.ensureInteger(w.day),C.Util.Ensure.ensureInteger(w.hour),C.Util.Ensure.ensureInteger(w.minute),C.Util.Ensure.ensureNumber(w.second),C.Util.Type.exists(w.fractionalString)&&C.Util.Ensure.ensureNumber(w.fractionalString),C.Util.Type.exists(w.timezone)&&!C.Util.Type.isNaN(w.timezone)&&C.Util.Ensure.ensureInteger(w.timezone);var R=this.printDateString(w);return R+="T",R+=this.printTimeString(w),C.Util.Type.exists(w.timezone)&&(R+=this.printTimezoneString(w.timezone)),R},printDate:function(w){C.Util.Ensure.ensureObject(w),C.Util.Ensure.ensureNumber(w.year),C.Util.Ensure.ensureNumber(w.month),C.Util.Ensure.ensureNumber(w.day),C.Util.Type.exists(w.timezone)&&!C.Util.Type.isNaN(w.timezone)&&C.Util.Ensure.ensureInteger(w.timezone);var R=this.printDateString(w);return C.Util.Type.exists(w.timezone)&&(R+=this.printTimezoneString(w.timezone)),R},printTime:function(w){C.Util.Ensure.ensureObject(w),C.Util.Ensure.ensureNumber(w.hour),C.Util.Ensure.ensureNumber(w.minute),C.Util.Ensure.ensureNumber(w.second),C.Util.Type.exists(w.fractionalString)&&C.Util.Ensure.ensureNumber(w.fractionalString),C.Util.Type.exists(w.timezone)&&!C.Util.Type.isNaN(w.timezone)&&C.Util.Ensure.ensureInteger(w.timezone);var R=this.printTimeString(w);return C.Util.Type.exists(w.timezone)&&(R+=this.printTimezoneString(w.timezone)),R},printDateString:function(w){return C.Util.Ensure.ensureObject(w),C.Util.Ensure.ensureInteger(w.year),C.Util.Ensure.ensureInteger(w.month),C.Util.Ensure.ensureInteger(w.day),(w.year<0?"-"+this.printYear(-w.year):this.printYear(w.year))+"-"+this.printMonth(w.month)+"-"+this.printDay(w.day)},printTimeString:function(w){C.Util.Ensure.ensureObject(w),C.Util.Ensure.ensureInteger(w.hour),C.Util.Ensure.ensureInteger(w.minute),C.Util.Ensure.ensureInteger(w.second),C.Util.Type.exists(w.fractionalSecond)&&C.Util.Ensure.ensureNumber(w.fractionalSecond);var R=this.printHour(w.hour);return R+=":",R+=this.printMinute(w.minute),R+=":",R+=this.printSecond(w.second),C.Util.Type.exists(w.fractionalSecond)&&(R+=this.printFractionalSecond(w.fractionalSecond)),R},printTimezoneString:function(w){if(!C.Util.Type.exists(w)||C.Util.Type.isNaN(w))return"";C.Util.Ensure.ensureInteger(w);var X,R=w<0?-1:w>0?1:0,O=w*R,k=O%60,W=Math.floor(O/60);return 0===R?"Z":(R>0?X="+":R<0&&(X="-"),X+=this.printHour(W),X+=":",X+=this.printMinute(k))},printGDay:function(w,R,O,k){C.Util.Ensure.ensureObject(w);var W=void 0,X=void 0;return w instanceof Date?W=w.getDate():(C.Util.Ensure.ensureInteger(w.day),W=w.day,X=w.timezone),C.XML.Calendar.validateDay(W),C.XML.Calendar.validateTimezone(X),"---"+this.printDay(W)+this.printTimezoneString(X)},printGMonth:function(w,R,O,k){C.Util.Ensure.ensureObject(w);var W=void 0,X=void 0;return w instanceof Date?W=w.getMonth()+1:(C.Util.Ensure.ensureInteger(w.month),W=w.month,X=w.timezone),C.XML.Calendar.validateMonth(W),C.XML.Calendar.validateTimezone(X),"--"+this.printMonth(W)+this.printTimezoneString(X)},printGMonthDay:function(w,R,O,k){C.Util.Ensure.ensureObject(w);var W=void 0,X=void 0,ee=void 0;return w instanceof Date?(W=w.getMonth()+1,X=w.getDate()):(C.Util.Ensure.ensureInteger(w.month),C.Util.Ensure.ensureInteger(w.day),W=w.month,X=w.day,ee=w.timezone),C.XML.Calendar.validateMonthDay(W,X),C.XML.Calendar.validateTimezone(ee),"--"+this.printMonth(W)+"-"+this.printDay(X)+this.printTimezoneString(ee)},printGYear:function(w,R,O,k){C.Util.Ensure.ensureObject(w);var W=void 0,X=void 0;return w instanceof Date?W=w.getFullYear():(C.Util.Ensure.ensureInteger(w.year),W=w.year,X=w.timezone),C.XML.Calendar.validateYear(W),C.XML.Calendar.validateTimezone(X),this.printSignedYear(W)+this.printTimezoneString(X)},printGYearMonth:function(w,R,O,k){C.Util.Ensure.ensureObject(w);var W=void 0,X=void 0,ee=void 0;return w instanceof Date?(W=w.getFullYear(),X=w.getMonth()+1):(C.Util.Ensure.ensureInteger(w.year),W=w.year,X=w.month,ee=w.timezone),C.XML.Calendar.validateYear(W),C.XML.Calendar.validateMonth(X),C.XML.Calendar.validateTimezone(ee),this.printSignedYear(W)+"-"+this.printMonth(X)+this.printTimezoneString(ee)},printSignedYear:function(w){return w<0?"-"+this.printYear(-1*w):this.printYear(w)},printYear:function(w){return this.printInteger(w,4)},printMonth:function(w){return this.printInteger(w,2)},printDay:function(w){return this.printInteger(w,2)},printHour:function(w){return this.printInteger(w,2)},printMinute:function(w){return this.printInteger(w,2)},printSecond:function(w){return this.printInteger(w,2)},printFractionalSecond:function(w){if(C.Util.Ensure.ensureNumber(w),w<0||w>=1)throw new Error("Fractional second ["+w+"] must be between 0 and 1.");if(0===w)return"";var R=String(w),O=R.indexOf(".");return O<0?"":R.substring(O)},printInteger:function(w,R){if(C.Util.Ensure.ensureInteger(w),C.Util.Ensure.ensureInteger(R),R<=0)throw new Error("Length ["+w+"] must be positive.");if(w<0)throw new Error("Value ["+w+"] must not be negative.");for(var O=String(w),k=O.length;k<R;k++)O="0"+O;return O},isInstance:function(w,R,O){return C.Util.Type.isObject(w)&&(C.Util.NumberUtils.isInteger(w.year)&&C.Util.NumberUtils.isInteger(w.month)&&C.Util.NumberUtils.isInteger(w.day)||C.Util.NumberUtils.isInteger(w.hour)&&C.Util.NumberUtils.isInteger(w.minute)&&C.Util.NumberUtils.isInteger(w.second))},CLASS_NAME:"Jsonix.Schema.XSD.Calendar"}),C.Schema.XSD.Calendar.YEAR_PATTERN="-?([1-9][0-9]*)?((?!(0000))[0-9]{4})",C.Schema.XSD.Calendar.TIMEZONE_PATTERN="Z|([\\-\\+])(((0[0-9]|1[0-3]):([0-5][0-9]))|(14:00))",C.Schema.XSD.Calendar.MONTH_PATTERN="(0[1-9]|1[0-2])",C.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN="\\-\\-"+C.Schema.XSD.Calendar.MONTH_PATTERN,C.Schema.XSD.Calendar.DAY_PATTERN="(0[1-9]|[12][0-9]|3[01])",C.Schema.XSD.Calendar.SINGLE_DAY_PATTERN="\\-\\-\\-"+C.Schema.XSD.Calendar.DAY_PATTERN,C.Schema.XSD.Calendar.GYEAR_PATTERN="("+C.Schema.XSD.Calendar.YEAR_PATTERN+")("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.GMONTH_PATTERN="("+C.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN+")("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.GDAY_PATTERN="("+C.Schema.XSD.Calendar.SINGLE_DAY_PATTERN+")("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.GYEAR_MONTH_PATTERN="("+C.Schema.XSD.Calendar.YEAR_PATTERN+")-("+C.Schema.XSD.Calendar.DAY_PATTERN+")("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.GMONTH_DAY_PATTERN="("+C.Schema.XSD.Calendar.SINGLE_MONTH_PATTERN+")-("+C.Schema.XSD.Calendar.DAY_PATTERN+")("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.DATE_PART_PATTERN="("+C.Schema.XSD.Calendar.YEAR_PATTERN+")-("+C.Schema.XSD.Calendar.MONTH_PATTERN+")-("+C.Schema.XSD.Calendar.DAY_PATTERN+")",C.Schema.XSD.Calendar.TIME_PART_PATTERN="([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])(\\.([0-9]+))?",C.Schema.XSD.Calendar.TIME_PATTERN=C.Schema.XSD.Calendar.TIME_PART_PATTERN+"("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.DATE_PATTERN=C.Schema.XSD.Calendar.DATE_PART_PATTERN+"("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.DATETIME_PATTERN=C.Schema.XSD.Calendar.DATE_PART_PATTERN+"T"+C.Schema.XSD.Calendar.TIME_PART_PATTERN+"("+C.Schema.XSD.Calendar.TIMEZONE_PATTERN+")?",C.Schema.XSD.Calendar.INSTANCE=new C.Schema.XSD.Calendar,C.Schema.XSD.Calendar.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Calendar.INSTANCE),C.Schema.XSD.Duration=C.Class(C.Schema.XSD.AnySimpleType,{name:"Duration",typeName:C.Schema.XSD.qname("duration"),isInstance:function(w,R,O){return C.Util.Type.isObject(w)&&((!C.Util.Type.exists(w.sign)||-1===w.sign||1===w.sign)(C.Util.NumberUtils.isInteger(w.years)&&w.years>=0)||C.Util.NumberUtils.isInteger(w.months)&&w.months>=0||C.Util.NumberUtils.isInteger(w.days)&&w.days>=0||C.Util.NumberUtils.isInteger(w.hours)&&w.hours>=0||C.Util.NumberUtils.isInteger(w.minutes)&&w.minutes>=0||C.Util.Type.isNumber(w.seconds)&&w.seconds>=0)},validate:function(w){if(C.Util.Ensure.ensureObject(w),C.Util.Type.exists(w.sign)&&1!==w.sign&&-1!==w.sign)throw new Error("Sign of the duration ["+w.sign+"] must be either [1] or [-1].");var R=!0,O=function(W,X){if(C.Util.Type.exists(W)){if(C.Util.NumberUtils.isInteger(W)&&W>=0)return!0;throw new Error(X.replace("{0}",W))}return!1};if(R=(R=(R=(R=(R=(R=R&&!O(w.years,"Number of years [{0}] must be an unsigned integer."))&&!O(w.months,"Number of months [{0}] must be an unsigned integer."))&&!O(w.days,"Number of days [{0}] must be an unsigned integer."))&&!O(w.hours,"Number of hours [{0}] must be an unsigned integer."))&&!O(w.minutes,"Number of minutes [{0}] must be an unsigned integer."))&&!function(W,X){if(C.Util.Type.exists(W)){if(C.Util.Type.isNumber(W)&&W>=0)return!0;throw new Error("Number of seconds [{0}] must be an unsigned number.".replace("{0}",W))}return!1}(w.seconds))throw new Error("At least one of the components (years, months, days, hours, minutes, seconds) must be set.")},print:function(w,R,O,k){this.validate(w);var W="";return-1===w.sign&&(W+="-"),W+="P",C.Util.Type.exists(w.years)&&(W+=w.years+"Y"),C.Util.Type.exists(w.months)&&(W+=w.months+"M"),C.Util.Type.exists(w.days)&&(W+=w.days+"D"),(C.Util.Type.exists(w.hours)||C.Util.Type.exists(w.minutes)||C.Util.Type.exists(w.seconds))&&(W+="T",C.Util.Type.exists(w.hours)&&(W+=w.hours+"H"),C.Util.Type.exists(w.minutes)&&(W+=w.minutes+"M"),C.Util.Type.exists(w.seconds)&&(W+=w.seconds+"S")),W},parse:function(w,R,O,k){var W=new RegExp("^"+C.Schema.XSD.Duration.PATTERN+"$"),X=w.match(W);if(null!==X){var Y={};return X[1]&&(Y.sign=-1),X[3]&&(Y.years=parseInt(X[3],10)),X[5]&&(Y.months=parseInt(X[5],10)),X[7]&&(Y.days=parseInt(X[7],10)),X[10]&&(Y.hours=parseInt(X[10],10)),X[12]&&(Y.minutes=parseInt(X[12],10)),X[14]&&(Y.seconds=Number(X[14])),Y}throw new Error("Value ["+w+"] does not match the duration pattern.")},CLASS_NAME:"Jsonix.Schema.XSD.Duration"}),C.Schema.XSD.Duration.PATTERN="(-)?P(([0-9]+)Y)?(([0-9]+)M)?(([0-9]+)D)?(T(([0-9]+)H)?(([0-9]+)M)?(([0-9]+(\\.[0-9]+)?)S)?)?",C.Schema.XSD.Duration.INSTANCE=new C.Schema.XSD.Duration,C.Schema.XSD.Duration.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Duration.INSTANCE),C.Schema.XSD.DateTime=C.Class(C.Schema.XSD.Calendar,{name:"DateTime",typeName:C.Schema.XSD.qname("dateTime"),parse:function(w,R,O,k){return this.parseDateTime(w)},print:function(w,R,O,k){return this.printDateTime(w)},CLASS_NAME:"Jsonix.Schema.XSD.DateTime"}),C.Schema.XSD.DateTime.INSTANCE=new C.Schema.XSD.DateTime,C.Schema.XSD.DateTime.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.DateTime.INSTANCE),C.Schema.XSD.DateTimeAsDate=C.Class(C.Schema.XSD.Calendar,{name:"DateTimeAsDate",typeName:C.Schema.XSD.qname("dateTime"),parse:function(w,R,O,k){var W=this.parseDateTime(w),X=new Date;X.setFullYear(W.year),X.setMonth(W.month-1),X.setDate(W.day),X.setHours(W.hour),X.setMinutes(W.minute),X.setSeconds(W.second),C.Util.Type.isNumber(W.fractionalSecond)&&X.setMilliseconds(Math.floor(1e3*W.fractionalSecond));var ee,Y,ne=-X.getTimezoneOffset();C.Util.NumberUtils.isInteger(W.timezone)?(ee=W.timezone,Y=!1):(ee=ne,Y=!0);var be=new Date(X.getTime()+6e4*(-ee+ne));return be.originalTimezone=Y?null:W.timezone,be},print:function(w,R,O,k){C.Util.Ensure.ensureDate(w);var W,ee,X=-w.getTimezoneOffset();return null===w.originalTimezone?this.printDateTime(new C.XML.Calendar({year:w.getFullYear(),month:w.getMonth()+1,day:w.getDate(),hour:w.getHours(),minute:w.getMinutes(),second:w.getSeconds(),fractionalSecond:w.getMilliseconds()/1e3})):(C.Util.NumberUtils.isInteger(w.originalTimezone)?(W=w.originalTimezone,ee=new Date(w.getTime()-6e4*(-W+X))):(W=X,ee=w),this.printDateTime(new C.XML.Calendar({year:ee.getFullYear(),month:ee.getMonth()+1,day:ee.getDate(),hour:ee.getHours(),minute:ee.getMinutes(),second:ee.getSeconds(),fractionalSecond:ee.getMilliseconds()/1e3,timezone:W})))},isInstance:function(w,R,O){return C.Util.Type.isDate(w)},CLASS_NAME:"Jsonix.Schema.XSD.DateTimeAsDate"}),C.Schema.XSD.DateTimeAsDate.INSTANCE=new C.Schema.XSD.DateTimeAsDate,C.Schema.XSD.DateTimeAsDate.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.DateTimeAsDate.INSTANCE),C.Schema.XSD.Time=C.Class(C.Schema.XSD.Calendar,{name:"Time",typeName:C.Schema.XSD.qname("time"),parse:function(w,R,O,k){return this.parseTime(w)},print:function(w,R,O,k){return this.printTime(w)},CLASS_NAME:"Jsonix.Schema.XSD.Time"}),C.Schema.XSD.Time.INSTANCE=new C.Schema.XSD.Time,C.Schema.XSD.Time.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Time.INSTANCE),C.Schema.XSD.TimeAsDate=C.Class(C.Schema.XSD.Calendar,{name:"TimeAsDate",typeName:C.Schema.XSD.qname("time"),parse:function(w,R,O,k){var W=this.parseTime(w),X=new Date;X.setFullYear(1970),X.setMonth(0),X.setDate(1),X.setHours(W.hour),X.setMinutes(W.minute),X.setSeconds(W.second),C.Util.Type.isNumber(W.fractionalSecond)&&X.setMilliseconds(Math.floor(1e3*W.fractionalSecond));var ee,Y,ne=-X.getTimezoneOffset();C.Util.NumberUtils.isInteger(W.timezone)?(ee=W.timezone,Y=!1):(ee=ne,Y=!0);var be=new Date(X.getTime()+6e4*(-ee+ne));return be.originalTimezone=Y?null:ee,be},print:function(w,R,O,k){C.Util.Ensure.ensureDate(w);var W=w.getTime();if(W<=-864e5&&W>=864e5)throw new Error("Invalid time ["+w+"].");if(null===w.originalTimezone)return this.printTime(new C.XML.Calendar({hour:w.getHours(),minute:w.getMinutes(),second:w.getSeconds(),fractionalSecond:w.getMilliseconds()/1e3}));var X,ee,Y=-w.getTimezoneOffset();C.Util.NumberUtils.isInteger(w.originalTimezone)?(ee=w.originalTimezone,X=new Date(w.getTime()-6e4*(-ee+Y))):(ee=Y,X=w);var ne=X.getTime();if(ne>=6e4*-Y)return this.printTime(new C.XML.Calendar({hour:X.getHours(),minute:X.getMinutes(),second:X.getSeconds(),fractionalSecond:X.getMilliseconds()/1e3,timezone:ee}));var be=Math.ceil(-ne/36e5),Me=X.getSeconds()+60*X.getMinutes()+3600*X.getHours()+3600*be-60*ee;return this.printTime(new C.XML.Calendar({hour:Me%86400,minute:Me%3600,second:Me%60,fractionalSecond:X.getMilliseconds()/1e3,timezone:60*be}))},isInstance:function(w,R,O){return C.Util.Type.isDate(w)&&w.getTime()>-864e5&&w.getTime()<864e5},CLASS_NAME:"Jsonix.Schema.XSD.TimeAsDate"}),C.Schema.XSD.TimeAsDate.INSTANCE=new C.Schema.XSD.TimeAsDate,C.Schema.XSD.TimeAsDate.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.TimeAsDate.INSTANCE),C.Schema.XSD.Date=C.Class(C.Schema.XSD.Calendar,{name:"Date",typeName:C.Schema.XSD.qname("date"),parse:function(w,R,O,k){return this.parseDate(w)},print:function(w,R,O,k){return this.printDate(w)},CLASS_NAME:"Jsonix.Schema.XSD.Date"}),C.Schema.XSD.Date.INSTANCE=new C.Schema.XSD.Date,C.Schema.XSD.Date.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.Date.INSTANCE),C.Schema.XSD.DateAsDate=C.Class(C.Schema.XSD.Calendar,{name:"DateAsDate",typeName:C.Schema.XSD.qname("date"),parse:function(w,R,O,k){var W=this.parseDate(w),X=new Date;X.setFullYear(W.year),X.setMonth(W.month-1),X.setDate(W.day),X.setHours(0),X.setMinutes(0),X.setSeconds(0),X.setMilliseconds(0),C.Util.Type.isNumber(W.fractionalSecond)&&X.setMilliseconds(Math.floor(1e3*W.fractionalSecond));var ee,Y,ne=-X.getTimezoneOffset();C.Util.NumberUtils.isInteger(W.timezone)?(ee=W.timezone,Y=!1):(ee=ne,Y=!0);var be=new Date(X.getTime()+6e4*(-ee+ne));return be.originalTimezone=Y?null:ee,be},print:function(w,R,O,k){C.Util.Ensure.ensureDate(w);var W=new Date(w.getTime());if(W.setHours(0),W.setMinutes(0),W.setSeconds(0),W.setMilliseconds(0),null===w.originalTimezone)return this.printDate(new C.XML.Calendar({year:w.getFullYear(),month:w.getMonth()+1,day:w.getDate()}));if(C.Util.NumberUtils.isInteger(w.originalTimezone)){var X=new Date(w.getTime()-6e4*(-w.originalTimezone-w.getTimezoneOffset()));return this.printDate(new C.XML.Calendar({year:X.getFullYear(),month:X.getMonth()+1,day:X.getDate(),timezone:w.originalTimezone}))}var ee=-w.getTime()+W.getTime();if(0===ee)return this.printDate(new C.XML.Calendar({year:w.getFullYear(),month:w.getMonth()+1,day:w.getDate()}));var Y=ee-6e4*w.getTimezoneOffset();if(Y>=-432e5)return this.printDate(new C.XML.Calendar({year:w.getFullYear(),month:w.getMonth()+1,day:w.getDate(),timezone:Math.floor(Y/6e4)}));var ne=new Date(w.getTime()+864e5);return this.printDate(new C.XML.Calendar({year:ne.getFullYear(),month:ne.getMonth()+1,day:ne.getDate(),timezone:Math.floor(Y/6e4)+1440}))},isInstance:function(w,R,O){return C.Util.Type.isDate(w)},CLASS_NAME:"Jsonix.Schema.XSD.DateAsDate"}),C.Schema.XSD.DateAsDate.INSTANCE=new C.Schema.XSD.DateAsDate,C.Schema.XSD.DateAsDate.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.DateAsDate.INSTANCE),C.Schema.XSD.GYearMonth=C.Class(C.Schema.XSD.Calendar,{name:"GYearMonth",typeName:C.Schema.XSD.qname("gYearMonth"),CLASS_NAME:"Jsonix.Schema.XSD.GYearMonth",parse:function(w,R,O,k){return this.parseGYearMonth(w,R,O,k)},print:function(w,R,O,k){return this.printGYearMonth(w,R,O,k)}}),C.Schema.XSD.GYearMonth.INSTANCE=new C.Schema.XSD.GYearMonth,C.Schema.XSD.GYearMonth.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.GYearMonth.INSTANCE),C.Schema.XSD.GYear=C.Class(C.Schema.XSD.Calendar,{name:"GYear",typeName:C.Schema.XSD.qname("gYear"),CLASS_NAME:"Jsonix.Schema.XSD.GYear",parse:function(w,R,O,k){return this.parseGYear(w,R,O,k)},print:function(w,R,O,k){return this.printGYear(w,R,O,k)}}),C.Schema.XSD.GYear.INSTANCE=new C.Schema.XSD.GYear,C.Schema.XSD.GYear.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.GYear.INSTANCE),C.Schema.XSD.GMonthDay=C.Class(C.Schema.XSD.Calendar,{name:"GMonthDay",typeName:C.Schema.XSD.qname("gMonthDay"),CLASS_NAME:"Jsonix.Schema.XSD.GMonthDay",parse:function(w,R,O,k){return this.parseGMonthDay(w,R,O,k)},print:function(w,R,O,k){return this.printGMonthDay(w,R,O,k)}}),C.Schema.XSD.GMonthDay.INSTANCE=new C.Schema.XSD.GMonthDay,C.Schema.XSD.GMonthDay.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.GMonthDay.INSTANCE),C.Schema.XSD.GDay=C.Class(C.Schema.XSD.Calendar,{name:"GDay",typeName:C.Schema.XSD.qname("gDay"),CLASS_NAME:"Jsonix.Schema.XSD.GDay",parse:function(w,R,O,k){return this.parseGDay(w,R,O,k)},print:function(w,R,O,k){return this.printGDay(w,R,O,k)}}),C.Schema.XSD.GDay.INSTANCE=new C.Schema.XSD.GDay,C.Schema.XSD.GDay.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.GDay.INSTANCE),C.Schema.XSD.GMonth=C.Class(C.Schema.XSD.Calendar,{name:"GMonth",typeName:C.Schema.XSD.qname("gMonth"),CLASS_NAME:"Jsonix.Schema.XSD.GMonth",parse:function(w,R,O,k){return this.parseGMonth(w,R,O,k)},print:function(w,R,O,k){return this.printGMonth(w,R,O,k)}}),C.Schema.XSD.GMonth.INSTANCE=new C.Schema.XSD.GMonth,C.Schema.XSD.GMonth.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.GMonth.INSTANCE),C.Schema.XSD.ID=C.Class(C.Schema.XSD.String,{name:"ID",typeName:C.Schema.XSD.qname("ID"),CLASS_NAME:"Jsonix.Schema.XSD.ID"}),C.Schema.XSD.ID.INSTANCE=new C.Schema.XSD.ID,C.Schema.XSD.ID.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.ID.INSTANCE),C.Schema.XSD.IDREF=C.Class(C.Schema.XSD.String,{name:"IDREF",typeName:C.Schema.XSD.qname("IDREF"),CLASS_NAME:"Jsonix.Schema.XSD.IDREF"}),C.Schema.XSD.IDREF.INSTANCE=new C.Schema.XSD.IDREF,C.Schema.XSD.IDREF.INSTANCE.LIST=new C.Schema.XSD.List(C.Schema.XSD.IDREF.INSTANCE),C.Schema.XSD.IDREFS=C.Class(C.Schema.XSD.List,{name:"IDREFS",initialize:function(){C.Schema.XSD.List.prototype.initialize.apply(this,[C.Schema.XSD.IDREF.INSTANCE,C.Schema.XSD.qname("IDREFS")," "])},CLASS_NAME:"Jsonix.Schema.XSD.IDREFS"}),C.Schema.XSD.IDREFS.INSTANCE=new C.Schema.XSD.IDREFS,C.Schema.XSI={},C.Schema.XSI.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema-instance",C.Schema.XSI.PREFIX="xsi",C.Schema.XSI.TYPE="type",C.Schema.XSI.NIL="nil",C.Schema.XSI.qname=function(w){return C.Util.Ensure.ensureString(w),new C.XML.QName(C.Schema.XSI.NAMESPACE_URI,w,C.Schema.XSI.PREFIX)},C.Schema.XSI.TYPE_QNAME=C.Schema.XSI.qname(C.Schema.XSI.TYPE),C.Context=C.Class(C.Mapping.Styled,{modules:[],typeInfos:null,typeNameKeyToTypeInfo:null,elementInfos:null,options:null,substitutionMembersMap:null,scopedElementInfosMap:null,supportXsiType:!0,initialize:function(w,R){for(var O in C.Mapping.Styled.prototype.initialize.apply(this,[R]),this.modules=[],this.elementInfos=[],this.typeInfos={},this.typeNameKeyToTypeInfo={},this.registerBuiltinTypeInfos(),this.namespacePrefixes={},this.prefixNamespaces={},this.substitutionMembersMap={},this.scopedElementInfosMap={},C.Util.Type.exists(R)&&(C.Util.Ensure.ensureObject(R),C.Util.Type.isObject(R.namespacePrefixes)&&(this.namespacePrefixes=C.Util.Type.cloneObject(R.namespacePrefixes,{})),C.Util.Type.isBoolean(R.supportXsiType)&&(this.supportXsiType=R.supportXsiType)),this.namespacePrefixes)this.namespacePrefixes.hasOwnProperty(O)&&(p=this.namespacePrefixes[O],this.prefixNamespaces[p]=O);var k,X;if(C.Util.Type.exists(w))for(C.Util.Ensure.ensureArray(w),k=0;k<w.length;k++)X=this.createModule(w[k]),this.modules[k]=X;this.processModules()},createModule:function(w){var R;return w instanceof this.mappingStyle.module?R=w:(w=C.Util.Type.cloneObject(w),R=new this.mappingStyle.module(w,{mappingStyle:this.mappingStyle})),R},registerBuiltinTypeInfos:function(){for(var w=0;w<this.builtinTypeInfos.length;w++)this.registerTypeInfo(this.builtinTypeInfos[w])},processModules:function(){var w;for(w=0;w<this.modules.length;w++)this.modules[w].registerTypeInfos(this);for(w=0;w<this.modules.length;w++)this.modules[w].registerElementInfos(this);for(w=0;w<this.modules.length;w++)this.modules[w].buildTypeInfos(this);for(w=0;w<this.modules.length;w++)this.modules[w].buildElementInfos(this)},registerTypeInfo:function(w){C.Util.Ensure.ensureObject(w);var R=w.name||w.n||null;C.Util.Ensure.ensureString(R),this.typeInfos[R]=w,w.typeName&&w.typeName.key&&(this.typeNameKeyToTypeInfo[w.typeName.key]=w)},resolveTypeInfo:function(w,R){if(C.Util.Type.exists(w)){if(w instanceof C.Model.TypeInfo)return w;if(C.Util.Type.isString(w)){var O;if(w.length>0&&"."===w.charAt(0)){var k=R.name||R.n||void 0;C.Util.Ensure.ensureObject(R,"Type info mapping can only be resolved if module is provided."),C.Util.Ensure.ensureString(k,"Type info mapping can only be resolved if module name is provided."),O=k+w}else O=w;if(this.typeInfos[O])return this.typeInfos[O];throw new Error("Type info ["+O+"] is not known in this context.")}C.Util.Ensure.ensureObject(R,"Type info mapping can only be resolved if module is provided.");var W=R.createTypeInfo(w);return W.build(this,R),W}return null},registerElementInfo:function(w,R){if(C.Util.Ensure.ensureObject(w),this.elementInfos.push(w),C.Util.Type.exists(w.substitutionHead)){var k=w.substitutionHead.key,W=this.substitutionMembersMap[k];C.Util.Type.isArray(W)||(this.substitutionMembersMap[k]=W=[]),W.push(w)}var X;X=C.Util.Type.exists(w.scope)?this.resolveTypeInfo(w.scope,R).name:"##global";var ee=this.scopedElementInfosMap[X];C.Util.Type.isObject(ee)||(this.scopedElementInfosMap[X]=ee={}),ee[w.elementName.key]=w},getTypeInfoByValue:function(w){if(C.Util.Type.exists(w)&&C.Util.Type.isObject(w)){var R=w.TYPE_NAME;if(C.Util.Type.isString(R)){var O=this.getTypeInfoByName(R);if(O)return O}}},getTypeInfoByName:function(w){return this.typeInfos[w]},getTypeInfoByTypeName:function(w){var R=C.XML.QName.fromObjectOrString(w,this);return this.typeNameKeyToTypeInfo[R.key]},getTypeInfoByTypeNameKey:function(w){return this.typeNameKeyToTypeInfo[w]},getElementInfo:function(w,R){if(C.Util.Type.exists(R)){var k=this.scopedElementInfosMap[R.name];if(C.Util.Type.exists(k)){var W=k[w.key];if(C.Util.Type.exists(W))return W}}var ee=this.scopedElementInfosMap["##global"];if(C.Util.Type.exists(ee)){var Y=ee[w.key];if(C.Util.Type.exists(Y))return Y}return null},getSubstitutionMembers:function(w){return this.substitutionMembersMap[C.XML.QName.fromObject(w).key]},createMarshaller:function(){return new this.mappingStyle.marshaller(this)},createUnmarshaller:function(){return new this.mappingStyle.unmarshaller(this)},getNamespaceURI:function(w){return C.Util.Ensure.ensureString(w),this.prefixNamespaces[w]},getPrefix:function(w,R){C.Util.Ensure.ensureString(w);var O=this.namespacePrefixes[w];return C.Util.Type.isString(O)?O:R},builtinTypeInfos:[C.Schema.XSD.AnyType.INSTANCE,C.Schema.XSD.AnySimpleType.INSTANCE,C.Schema.XSD.AnyURI.INSTANCE,C.Schema.XSD.Base64Binary.INSTANCE,C.Schema.XSD.Boolean.INSTANCE,C.Schema.XSD.Byte.INSTANCE,C.Schema.XSD.Calendar.INSTANCE,C.Schema.XSD.DateAsDate.INSTANCE,C.Schema.XSD.Date.INSTANCE,C.Schema.XSD.DateTimeAsDate.INSTANCE,C.Schema.XSD.DateTime.INSTANCE,C.Schema.XSD.Decimal.INSTANCE,C.Schema.XSD.Double.INSTANCE,C.Schema.XSD.Duration.INSTANCE,C.Schema.XSD.Float.INSTANCE,C.Schema.XSD.GDay.INSTANCE,C.Schema.XSD.GMonth.INSTANCE,C.Schema.XSD.GMonthDay.INSTANCE,C.Schema.XSD.GYear.INSTANCE,C.Schema.XSD.GYearMonth.INSTANCE,C.Schema.XSD.HexBinary.INSTANCE,C.Schema.XSD.ID.INSTANCE,C.Schema.XSD.IDREF.INSTANCE,C.Schema.XSD.IDREFS.INSTANCE,C.Schema.XSD.Int.INSTANCE,C.Schema.XSD.Integer.INSTANCE,C.Schema.XSD.Language.INSTANCE,C.Schema.XSD.Long.INSTANCE,C.Schema.XSD.Name.INSTANCE,C.Schema.XSD.NCName.INSTANCE,C.Schema.XSD.NegativeInteger.INSTANCE,C.Schema.XSD.NMToken.INSTANCE,C.Schema.XSD.NMTokens.INSTANCE,C.Schema.XSD.NonNegativeInteger.INSTANCE,C.Schema.XSD.NonPositiveInteger.INSTANCE,C.Schema.XSD.NormalizedString.INSTANCE,C.Schema.XSD.Number.INSTANCE,C.Schema.XSD.PositiveInteger.INSTANCE,C.Schema.XSD.QName.INSTANCE,C.Schema.XSD.Short.INSTANCE,C.Schema.XSD.String.INSTANCE,C.Schema.XSD.Strings.INSTANCE,C.Schema.XSD.TimeAsDate.INSTANCE,C.Schema.XSD.Time.INSTANCE,C.Schema.XSD.Token.INSTANCE,C.Schema.XSD.UnsignedByte.INSTANCE,C.Schema.XSD.UnsignedInt.INSTANCE,C.Schema.XSD.UnsignedLong.INSTANCE,C.Schema.XSD.UnsignedShort.INSTANCE],CLASS_NAME:"Jsonix.Context"}),{Jsonix:C}};if("function"!=typeof Ye)if(typeof window>"u"&&!process.browser){var Ye=ft(255)(Vn);Ye(["xmldom","xmlhttprequest","fs"],Dt)}else Vn.exports=Dt();else Ye([],Dt)},255:(Vn,Dn,ft)=>{"use strict";Vn.exports=function Dt(Ye,Ot){var w,R,Re={},de={},Ee=!1,C=ft(324);function k(ne,be){var Me;return ne&&"."===ne.charAt(0)&&be&&(function O(ne){var be,Me;for(be=0;ne[be];be+=1)if("."===(Me=ne[be]))ne.splice(be,1),be-=1;else if(".."===Me){if(1===be&&(".."===ne[2]||".."===ne[0]))break;be>0&&(ne.splice(be-1,2),be-=2)}}(Me=(Me=(Me=be.split("/")).slice(0,Me.length-1)).concat(ne.split("/"))),ne=Me.join("/")),ne}function ee(ne,be,Me){var Ge,gt,xt,Tt;if(ne)gt=de[ne]={},xt={id:ne,uri:__filename,exports:gt},Ge=w(Ot,gt,xt,ne);else{if(Ee)throw new Error("amdefine with no module ID cannot be called more than once per file.");Ee=!0,Ge=w(Ot,gt=Ye.exports,xt=Ye,Ye.id)}be&&(be=be.map(function(vn){return Ge(vn)})),void 0!==(Tt="function"==typeof Me?Me.apply(xt.exports,be):Me)&&(xt.exports=Tt,ne&&(de[ne]=xt.exports))}function Y(ne,be,Me){Array.isArray(ne)?(Me=be,be=ne,ne=void 0):"string"!=typeof ne&&(Me=ne,ne=be=void 0),be&&!Array.isArray(be)&&(Me=be,be=void 0),be||(be=["require","exports","module"]),ne?Re[ne]=[ne,be,Me]:ee(ne,be,Me)}return w=function(ne,be,Me,Ge){function gt(xt,Tt){if("string"==typeof xt)return R(ne,be,Me,xt,Ge);xt=xt.map(function(vn){return R(ne,be,Me,vn,Ge)}),Tt&&process.nextTick(function(){Tt.apply(null,xt)})}return gt.toUrl=function(xt){return 0===xt.indexOf(".")?k(xt,C.dirname(Me.filename)):xt},gt},Ot=Ot||function(){return Ye.require.apply(Ye,arguments)},R=function(ne,be,Me,Ge,gt){var vn,gn,xt=Ge.indexOf("!"),Tt=Ge;if(-1===xt){if("require"===(Ge=k(Ge,gt)))return w(ne,be,Me,gt);if("exports"===Ge)return be;if("module"===Ge)return Me;if(de.hasOwnProperty(Ge))return de[Ge];if(Re[Ge])return ee.apply(null,Re[Ge]),de[Ge];if(ne)return ne(Tt);throw new Error("No module with ID: "+Ge)}return vn=Ge.substring(0,xt),Ge=Ge.substring(xt+1,Ge.length),Ge=(gn=R(ne,be,Me,vn,gt)).normalize?gn.normalize(Ge,function W(ne){return function(be){return k(be,ne)}}(gt)):k(Ge,gt),de[Ge]||gn.load(Ge,w(ne,be,Me,gt),function X(ne){function be(Me){de[ne]=Me}return be.fromText=function(Me,Ge){throw new Error("amdefine does not implement load.fromText")},be}(Ge),{}),de[Ge]},Y.require=function(ne){return de[ne]?de[ne]:Re[ne]?(ee.apply(null,Re[ne]),de[ne]):void 0},Y.amd={},Y}},604:Vn=>{"use strict";function Dn(q,we,pe){pe=pe||2;var Nt,An,Ln,Sr,rr,Ri,to,Le=we&&we.length,Be=Le?we[0]*pe:q.length,ht=ft(q,0,Be,pe,!0),lt=[];if(!ht||ht.next===ht.prev)return lt;if(Le&&(ht=function C(q,we,pe,Le){var ht,lt,Ln,Be=[];for(ht=0,lt=we.length;ht<lt;ht++)(Ln=ft(q,we[ht]*Le,ht<lt-1?we[ht+1]*Le:q.length,Le,!1))===Ln.next&&(Ln.steiner=!0),Be.push(Y(Ln));for(Be.sort(w),ht=0;ht<Be.length;ht++)pe=R(Be[ht],pe);return pe}(q,we,ht,pe)),q.length>80*pe){Nt=Ln=q[0],An=Sr=q[1];for(var lr=pe;lr<Be;lr+=pe)(rr=q[lr])<Nt&&(Nt=rr),(Ri=q[lr+1])<An&&(An=Ri),rr>Ln&&(Ln=rr),Ri>Sr&&(Sr=Ri);to=0!==(to=Math.max(Ln-Nt,Sr-An))?32767/to:0}return Ye(ht,lt,pe,Nt,An,to,0),lt}function ft(q,we,pe,Le,Be){var ht,lt;if(Be===Ce(q,we,pe,Le)>0)for(ht=we;ht<pe;ht+=Le)lt=Vi(ht,q[ht],q[ht+1],lt);else for(ht=pe-Le;ht>=we;ht-=Le)lt=Vi(ht,q[ht],q[ht+1],lt);return lt&&Ge(lt,lt.next)&&(Qe(lt),lt=lt.next),lt}function Dt(q,we){if(!q)return q;we||(we=q);var Le,pe=q;do{if(Le=!1,pe.steiner||!Ge(pe,pe.next)&&0!==Me(pe.prev,pe,pe.next))pe=pe.next;else{if(Qe(pe),(pe=we=pe.prev)===pe.next)break;Le=!0}}while(Le||pe!==we);return we}function Ye(q,we,pe,Le,Be,ht,lt){if(q){!lt&&ht&&function W(q,we,pe,Le){var Be=q;do{0===Be.z&&(Be.z=ee(Be.x,Be.y,we,pe,Le)),Be.prevZ=Be.prev,Be.nextZ=Be.next,Be=Be.next}while(Be!==q);Be.prevZ.nextZ=null,Be.prevZ=null,function X(q){var we,pe,Le,Be,ht,lt,Nt,An,Ln=1;do{for(pe=q,q=null,ht=null,lt=0;pe;){for(lt++,Le=pe,Nt=0,we=0;we<Ln&&(Nt++,Le=Le.nextZ);we++);for(An=Ln;Nt>0||An>0&&Le;)0!==Nt&&(0===An||!Le||pe.z<=Le.z)?(Be=pe,pe=pe.nextZ,Nt--):(Be=Le,Le=Le.nextZ,An--),ht?ht.nextZ=Be:q=Be,Be.prevZ=ht,ht=Be;pe=Le}ht.nextZ=null,Ln*=2}while(lt>1)}(Be)}(q,Le,Be,ht);for(var An,Ln,Nt=q;q.prev!==q.next;)if(An=q.prev,Ln=q.next,ht?Re(q,Le,Be,ht):Ot(q))we.push(An.i/pe|0),we.push(q.i/pe|0),we.push(Ln.i/pe|0),Qe(q),q=Ln.next,Nt=Ln.next;else if((q=Ln)===Nt){lt?1===lt?Ye(q=de(Dt(q),we,pe),we,pe,Le,Be,ht,2):2===lt&&Ee(q,we,pe,Le,Be,ht):Ye(Dt(q),we,pe,Le,Be,ht,1);break}}}function Ot(q){var we=q.prev,pe=q,Le=q.next;if(Me(we,pe,Le)>=0)return!1;for(var Be=we.x,ht=pe.x,lt=Le.x,Nt=we.y,An=pe.y,Ln=Le.y,Sr=Be<ht?Be<lt?Be:lt:ht<lt?ht:lt,rr=Nt<An?Nt<Ln?Nt:Ln:An<Ln?An:Ln,Ri=Be>ht?Be>lt?Be:lt:ht>lt?ht:lt,to=Nt>An?Nt>Ln?Nt:Ln:An>Ln?An:Ln,lr=Le.next;lr!==we;){if(lr.x>=Sr&&lr.x<=Ri&&lr.y>=rr&&lr.y<=to&&ne(Be,Nt,ht,An,lt,Ln,lr.x,lr.y)&&Me(lr.prev,lr,lr.next)>=0)return!1;lr=lr.next}return!0}function Re(q,we,pe,Le){var Be=q.prev,ht=q,lt=q.next;if(Me(Be,ht,lt)>=0)return!1;for(var Nt=Be.x,An=ht.x,Ln=lt.x,Sr=Be.y,rr=ht.y,Ri=lt.y,to=Nt<An?Nt<Ln?Nt:Ln:An<Ln?An:Ln,lr=Sr<rr?Sr<Ri?Sr:Ri:rr<Ri?rr:Ri,Zu=Nt>An?Nt>Ln?Nt:Ln:An>Ln?An:Ln,hp=Sr>rr?Sr>Ri?Sr:Ri:rr>Ri?rr:Ri,ow=ee(to,lr,we,pe,Le),aw=ee(Zu,hp,we,pe,Le),Bi=q.prevZ,Pn=q.nextZ;Bi&&Bi.z>=ow&&Pn&&Pn.z<=aw;){if(Bi.x>=to&&Bi.x<=Zu&&Bi.y>=lr&&Bi.y<=hp&&Bi!==Be&&Bi!==lt&&ne(Nt,Sr,An,rr,Ln,Ri,Bi.x,Bi.y)&&Me(Bi.prev,Bi,Bi.next)>=0||(Bi=Bi.prevZ,Pn.x>=to&&Pn.x<=Zu&&Pn.y>=lr&&Pn.y<=hp&&Pn!==Be&&Pn!==lt&&ne(Nt,Sr,An,rr,Ln,Ri,Pn.x,Pn.y)&&Me(Pn.prev,Pn,Pn.next)>=0))return!1;Pn=Pn.nextZ}for(;Bi&&Bi.z>=ow;){if(Bi.x>=to&&Bi.x<=Zu&&Bi.y>=lr&&Bi.y<=hp&&Bi!==Be&&Bi!==lt&&ne(Nt,Sr,An,rr,Ln,Ri,Bi.x,Bi.y)&&Me(Bi.prev,Bi,Bi.next)>=0)return!1;Bi=Bi.prevZ}for(;Pn&&Pn.z<=aw;){if(Pn.x>=to&&Pn.x<=Zu&&Pn.y>=lr&&Pn.y<=hp&&Pn!==Be&&Pn!==lt&&ne(Nt,Sr,An,rr,Ln,Ri,Pn.x,Pn.y)&&Me(Pn.prev,Pn,Pn.next)>=0)return!1;Pn=Pn.nextZ}return!0}function de(q,we,pe){var Le=q;do{var Be=Le.prev,ht=Le.next.next;!Ge(Be,ht)&&gt(Be,Le,Le.next,ht)&&gn(Be,ht)&&gn(ht,Be)&&(we.push(Be.i/pe|0),we.push(Le.i/pe|0),we.push(ht.i/pe|0),Qe(Le),Qe(Le.next),Le=q=ht),Le=Le.next}while(Le!==q);return Dt(Le)}function Ee(q,we,pe,Le,Be,ht){var lt=q;do{for(var Nt=lt.next.next;Nt!==lt.prev;){if(lt.i!==Nt.i&&be(lt,Nt)){var An=yi(lt,Nt);return lt=Dt(lt,lt.next),An=Dt(An,An.next),Ye(lt,we,pe,Le,Be,ht,0),void Ye(An,we,pe,Le,Be,ht,0)}Nt=Nt.next}lt=lt.next}while(lt!==q)}function w(q,we){return q.x-we.x}function R(q,we){var pe=function O(q,we){var lt,pe=we,Le=q.x,Be=q.y,ht=-1/0;do{if(Be<=pe.y&&Be>=pe.next.y&&pe.next.y!==pe.y){var Nt=pe.x+(Be-pe.y)*(pe.next.x-pe.x)/(pe.next.y-pe.y);if(Nt<=Le&&Nt>ht&&(ht=Nt,lt=pe.x<pe.next.x?pe:pe.next,Nt===Le))return lt}pe=pe.next}while(pe!==we);if(!lt)return null;var Ri,An=lt,Ln=lt.x,Sr=lt.y,rr=1/0;pe=lt;do{Le>=pe.x&&pe.x>=Ln&&Le!==pe.x&&ne(Be<Sr?Le:ht,Be,Ln,Sr,Be<Sr?ht:Le,Be,pe.x,pe.y)&&(Ri=Math.abs(Be-pe.y)/(Le-pe.x),gn(pe,q)&&(Ri<rr||Ri===rr&&(pe.x>lt.x||pe.x===lt.x&&k(lt,pe)))&&(lt=pe,rr=Ri)),pe=pe.next}while(pe!==An);return lt}(q,we);if(!pe)return we;var Le=yi(pe,q);return Dt(Le,Le.next),Dt(pe,pe.next)}function k(q,we){return Me(q.prev,q,we.prev)<0&&Me(we.next,q,q.next)<0}function ee(q,we,pe,Le,Be){return(q=1431655765&((q=858993459&((q=252645135&((q=16711935&((q=(q-pe)*Be|0)|q<<8))|q<<4))|q<<2))|q<<1))|(we=1431655765&((we=858993459&((we=252645135&((we=16711935&((we=(we-Le)*Be|0)|we<<8))|we<<4))|we<<2))|we<<1))<<1}function Y(q){var we=q,pe=q;do{(we.x<pe.x||we.x===pe.x&&we.y<pe.y)&&(pe=we),we=we.next}while(we!==q);return pe}function ne(q,we,pe,Le,Be,ht,lt,Nt){return(Be-lt)*(we-Nt)>=(q-lt)*(ht-Nt)&&(q-lt)*(Le-Nt)>=(pe-lt)*(we-Nt)&&(pe-lt)*(ht-Nt)>=(Be-lt)*(Le-Nt)}function be(q,we){return q.next.i!==we.i&&q.prev.i!==we.i&&!function vn(q,we){var pe=q;do{if(pe.i!==q.i&&pe.next.i!==q.i&&pe.i!==we.i&&pe.next.i!==we.i&&gt(pe,pe.next,q,we))return!0;pe=pe.next}while(pe!==q);return!1}(q,we)&&(gn(q,we)&&gn(we,q)&&function gi(q,we){var pe=q,Le=!1,Be=(q.x+we.x)/2,ht=(q.y+we.y)/2;do{pe.y>ht!=pe.next.y>ht&&pe.next.y!==pe.y&&Be<(pe.next.x-pe.x)*(ht-pe.y)/(pe.next.y-pe.y)+pe.x&&(Le=!Le),pe=pe.next}while(pe!==q);return Le}(q,we)&&(Me(q.prev,q,we.prev)||Me(q,we.prev,we))||Ge(q,we)&&Me(q.prev,q,q.next)>0&&Me(we.prev,we,we.next)>0)}function Me(q,we,pe){return(we.y-q.y)*(pe.x-we.x)-(we.x-q.x)*(pe.y-we.y)}function Ge(q,we){return q.x===we.x&&q.y===we.y}function gt(q,we,pe,Le){var Be=Tt(Me(q,we,pe)),ht=Tt(Me(q,we,Le)),lt=Tt(Me(pe,Le,q)),Nt=Tt(Me(pe,Le,we));return!!(Be!==ht&&lt!==Nt||0===Be&&xt(q,pe,we)||0===ht&&xt(q,Le,we)||0===lt&&xt(pe,q,Le)||0===Nt&&xt(pe,we,Le))}function xt(q,we,pe){return we.x<=Math.max(q.x,pe.x)&&we.x>=Math.min(q.x,pe.x)&&we.y<=Math.max(q.y,pe.y)&&we.y>=Math.min(q.y,pe.y)}function Tt(q){return q>0?1:q<0?-1:0}function gn(q,we){return Me(q.prev,q,q.next)<0?Me(q,we,q.next)>=0&&Me(q,q.prev,we)>=0:Me(q,we,q.prev)<0||Me(q,q.next,we)<0}function yi(q,we){var pe=new Q(q.i,q.x,q.y),Le=new Q(we.i,we.x,we.y),Be=q.next,ht=we.prev;return q.next=we,we.prev=q,pe.next=Be,Be.prev=pe,Le.next=pe,pe.prev=Le,ht.next=Le,Le.prev=ht,Le}function Vi(q,we,pe,Le){var Be=new Q(q,we,pe);return Le?(Be.next=Le.next,Be.prev=Le,Le.next.prev=Be,Le.next=Be):(Be.prev=Be,Be.next=Be),Be}function Qe(q){q.next.prev=q.prev,q.prev.next=q.next,q.prevZ&&(q.prevZ.nextZ=q.nextZ),q.nextZ&&(q.nextZ.prevZ=q.prevZ)}function Q(q,we,pe){this.i=q,this.x=we,this.y=pe,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ce(q,we,pe,Le){for(var Be=0,ht=we,lt=pe-Le;ht<pe;ht+=Le)Be+=(q[lt]-q[ht])*(q[ht+1]+q[lt+1]),lt=ht;return Be}Vn.exports=Dn,Vn.exports.default=Dn,Dn.deviation=function(q,we,pe,Le){var Be=we&&we.length,lt=Math.abs(Ce(q,0,Be?we[0]*pe:q.length,pe));if(Be)for(var Nt=0,An=we.length;Nt<An;Nt++)lt-=Math.abs(Ce(q,we[Nt]*pe,Nt<An-1?we[Nt+1]*pe:q.length,pe));var rr=0;for(Nt=0;Nt<Le.length;Nt+=3){var Ri=Le[Nt]*pe,to=Le[Nt+1]*pe,lr=Le[Nt+2]*pe;rr+=Math.abs((q[Ri]-q[lr])*(q[to+1]-q[Ri+1])-(q[Ri]-q[to])*(q[lr+1]-q[Ri+1]))}return 0===lt&&0===rr?0:Math.abs((rr-lt)/lt)},Dn.flatten=function(q){for(var we=q[0][0].length,pe={vertices:[],holes:[],dimensions:we},Le=0,Be=0;Be<q.length;Be++){for(var ht=0;ht<q[Be].length;ht++)for(var lt=0;lt<we;lt++)pe.vertices.push(q[Be][ht][lt]);Be>0&&pe.holes.push(Le+=q[Be-1].length)}return pe}},658:(Vn,Dn)=>{Dn.read=function(ft,Dt,Ye,Ot,Re){var de,Ee,C=8*Re-Ot-1,w=(1<<C)-1,R=w>>1,O=-7,k=Ye?Re-1:0,W=Ye?-1:1,X=ft[Dt+k];for(k+=W,de=X&(1<<-O)-1,X>>=-O,O+=C;O>0;de=256*de+ft[Dt+k],k+=W,O-=8);for(Ee=de&(1<<-O)-1,de>>=-O,O+=Ot;O>0;Ee=256*Ee+ft[Dt+k],k+=W,O-=8);if(0===de)de=1-R;else{if(de===w)return Ee?NaN:1/0*(X?-1:1);Ee+=Math.pow(2,Ot),de-=R}return(X?-1:1)*Ee*Math.pow(2,de-Ot)},Dn.write=function(ft,Dt,Ye,Ot,Re,de){var Ee,C,w,R=8*de-Re-1,O=(1<<R)-1,k=O>>1,W=23===Re?Math.pow(2,-24)-Math.pow(2,-77):0,X=Ot?0:de-1,ee=Ot?1:-1,Y=Dt<0||0===Dt&&1/Dt<0?1:0;for(Dt=Math.abs(Dt),isNaN(Dt)||Dt===1/0?(C=isNaN(Dt)?1:0,Ee=O):(Ee=Math.floor(Math.log(Dt)/Math.LN2),Dt*(w=Math.pow(2,-Ee))<1&&(Ee--,w*=2),(Dt+=Ee+k>=1?W/w:W*Math.pow(2,1-k))*w>=2&&(Ee++,w/=2),Ee+k>=O?(C=0,Ee=O):Ee+k>=1?(C=(Dt*w-1)*Math.pow(2,Re),Ee+=k):(C=Dt*Math.pow(2,k-1)*Math.pow(2,Re),Ee=0));Re>=8;ft[Ye+X]=255&C,X+=ee,C/=256,Re-=8);for(Ee=Ee<<Re|C,R+=Re;R>0;ft[Ye+X]=255&Ee,X+=ee,Ee/=256,R-=8);ft[Ye+X-ee]|=128*Y}},578:(Vn,Dn)=>{var ft,Ye;void 0!==(Ye="function"==typeof(ft=function(){return{GML_3_1_1:{n:"GML_3_1_1",dens:"http://www.opengis.net/gml",dans:"http://www.w3.org/1999/xlink",deps:["SMIL_2_0_Language","XLink_1_0"],tis:[{ln:"PointPropertyType",ps:[{n:"point",rq:!0,en:"Point",ti:".PointType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TopoPrimitiveArrayAssociationType",ps:[{n:"topoPrimitive",mno:0,col:!0,mx:!1,dom:!1,en:"_TopoPrimitive",ti:".AbstractTopoPrimitiveType",t:"er"}]},{ln:"CurveArrayPropertyType",ps:[{n:"curve",mno:0,col:!0,mx:!1,dom:!1,en:"_Curve",ti:".AbstractCurveType",t:"er"}]},{ln:"BaseUnitType",bti:".UnitDefinitionType",ps:[{n:"unitsSystem",rq:!0,ti:".ReferenceType"}]},{ln:"TimeNodeType",bti:".AbstractTimeTopologyPrimitiveType",ps:[{n:"previousEdge",mno:0,col:!0,ti:".TimeEdgePropertyType"},{n:"nextEdge",mno:0,col:!0,ti:".TimeEdgePropertyType"},{n:"position",ti:".TimeInstantPropertyType"}]},{ln:"DirectedEdgePropertyType",ps:[{n:"edge",rq:!0,en:"Edge",ti:".EdgeType"},{n:"orientation",an:{lp:"orientation"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"BagType",bti:".AbstractGMLType",ps:[{n:"member",mno:0,col:!0,ti:".AssociationType"},{n:"members",ti:".ArrayAssociationType"}]},{ln:"DatumRefType",ps:[{n:"datum",rq:!0,mx:!1,dom:!1,en:"_Datum",ti:".AbstractDatumType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"StyleVariationType",ps:[{n:"value",t:"v"},{n:"styleProperty",rq:!0,an:{lp:"styleProperty"},t:"a"},{n:"featurePropertyRange",an:{lp:"featurePropertyRange"},t:"a"}]},{ln:"CurvePropertyType",ps:[{n:"curve",rq:!0,mx:!1,dom:!1,en:"_Curve",ti:".AbstractCurveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeographicCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesEllipsoidalCS",rq:!0,ti:".EllipsoidalCSRefType"},{n:"usesGeodeticDatum",rq:!0,ti:".GeodeticDatumRefType"}]},{ln:"MultiSurfaceType",bti:".AbstractGeometricAggregateType",ps:[{n:"surfaceMember",mno:0,col:!0,ti:".SurfacePropertyType"},{n:"surfaceMembers",ti:".SurfaceArrayPropertyType"}]},{ln:"AbstractStyleType",bti:".AbstractGMLType"},{ln:"OperationParameterBaseType",bti:".AbstractGeneralOperationParameterType"},{ln:"TopoPointType",bti:".AbstractTopologyType",ps:[{n:"directedNode",rq:!0,ti:".DirectedNodePropertyType"}]},{ln:"AbstractGeneralDerivedCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"baseCRS",rq:!0,ti:".CoordinateReferenceSystemRefType"},{n:"definedByConversion",rq:!0,ti:".GeneralConversionRefType"}]},{ln:"EllipsoidRefType",ps:[{n:"ellipsoid",rq:!0,en:"Ellipsoid",ti:".EllipsoidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TinType.ControlPoint",tn:null,ps:[{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"geometricPositionGroup",rq:!0,mno:3,col:!0,etis:[{en:"pos",ti:".DirectPositionType"},{en:"pointProperty",ti:".PointPropertyType"}],t:"es"}]},{ln:"PointArrayPropertyType",ps:[{n:"point",mno:0,col:!0,en:"Point",ti:".PointType"}]},{ln:"CoordinatesType",ps:[{n:"value",t:"v"},{n:"decimal",an:{lp:"decimal"},t:"a"},{n:"cs",an:{lp:"cs"},t:"a"},{n:"ts",an:{lp:"ts"},t:"a"}]},{ln:"AbstractDatumType",bti:".AbstractDatumBaseType",ps:[{n:"datumID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"anchorPoint",ti:".CodeType"},{n:"realizationEpoch",ti:"Date"},{n:"validArea",ti:".ExtentType"},{n:"scope"}]},{ln:"LabelStyleType",bti:".BaseStyleDescriptorType",ps:[{n:"style",rq:!0},{n:"label",rq:!0,ti:".LabelType"}]},{ln:"OperationParameterType",bti:".OperationParameterBaseType",ps:[{n:"parameterID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"}]},{ln:"CartesianCSType",bti:".AbstractCoordinateSystemType"},{ln:"ConversionToPreferredUnitType",bti:".UnitOfMeasureType",ps:[{n:"factor",rq:!0,ti:"Double"},{n:"formula",rq:!0,ti:".FormulaType"}]},{ln:"AbstractParametricCurveSurfaceType",bti:".AbstractSurfacePatchType"},{ln:"ProjectedCRSRefType",ps:[{n:"projectedCRS",rq:!0,en:"ProjectedCRS",ti:".ProjectedCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimePeriodType",bti:".AbstractTimeGeometricPrimitiveType",ps:[{n:"beginPosition",rq:!0,ti:".TimePositionType"},{n:"begin",rq:!0,ti:".TimeInstantPropertyType"},{n:"endPosition",rq:!0,ti:".TimePositionType"},{n:"end",rq:!0,ti:".TimeInstantPropertyType"},{n:"duration",rq:!0,ti:"Duration"},{n:"timeInterval",rq:!0,ti:".TimeIntervalLengthType"}]},{ln:"SurfacePatchArrayPropertyType",ps:[{n:"surfacePatch",mno:0,col:!0,mx:!1,dom:!1,en:"_SurfacePatch",ti:".AbstractSurfacePatchType",t:"er"}]},{ln:"AreaType",bti:".MeasureType"},{ln:"ArcStringType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:3,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"numArc",ti:"Integer",an:{lp:"numArc"},t:"a"}]},{ln:"TopoSolidType",bti:".AbstractTopoPrimitiveType",ps:[{n:"directedFace",rq:!0,col:!0,ti:".DirectedFacePropertyType"}]},{ln:"RangeParametersType",ps:[{n:"_boolean",rq:!0,en:"Boolean",ti:"Boolean"},{n:"category",rq:!0,en:"Category",ti:".CodeType"},{n:"quantity",rq:!0,en:"Quantity",ti:".MeasureType"},{n:"count",rq:!0,en:"Count",ti:"Integer"},{n:"booleanList",rq:!0,en:"BooleanList",ti:{t:"l"}},{n:"categoryList",rq:!0,en:"CategoryList",ti:".CodeOrNullListType"},{n:"quantityList",rq:!0,en:"QuantityList",ti:".MeasureOrNullListType"},{n:"countList",rq:!0,en:"CountList",ti:{t:"l"}},{n:"categoryExtent",rq:!0,en:"CategoryExtent",ti:".CategoryExtentType"},{n:"quantityExtent",rq:!0,en:"QuantityExtent",ti:".QuantityExtentType"},{n:"countExtent",rq:!0,en:"CountExtent",ti:{t:"l"}},{n:"compositeValue",rq:!0,mx:!1,dom:!1,en:"CompositeValue",ti:".CompositeValueType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiPolygonPropertyType",ps:[{n:"multiPolygon",rq:!0,en:"MultiPolygon",ti:".MultiPolygonType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeometryStyleType",bti:".BaseStyleDescriptorType",ps:[{n:"symbol",rq:!0,ti:".SymbolType"},{n:"style",rq:!0},{n:"labelStyle",ti:".LabelStylePropertyType"},{n:"geometryProperty",an:{lp:"geometryProperty"},t:"a"},{n:"geometryType",an:{lp:"geometryType"},t:"a"}]},{ln:"ExtentType",ps:[{n:"description",ti:".StringOrRefType"},{n:"boundingBox",mno:0,col:!0,ti:".EnvelopeType"},{n:"boundingPolygon",mno:0,col:!0,ti:".PolygonType"},{n:"verticalExtent",mno:0,col:!0,ti:".EnvelopeType"},{n:"temporalExtent",mno:0,col:!0,ti:".TimePeriodType"}]},{ln:"UserDefinedCSType",bti:".AbstractCoordinateSystemType"},{ln:"OrientableSurfaceType",bti:".AbstractSurfaceType",ps:[{n:"baseSurface",rq:!0,ti:".SurfacePropertyType"},{n:"orientation",an:{lp:"orientation"},t:"a"}]},{ln:"TemporalDatumRefType",ps:[{n:"temporalDatum",rq:!0,en:"TemporalDatum",ti:".TemporalDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"KnotPropertyType",ps:[{n:"knot",rq:!0,en:"Knot",ti:".KnotType"}]},{ln:"DefinitionProxyType",bti:".DefinitionType",ps:[{n:"definitionRef",rq:!0,ti:".ReferenceType"}]},{ln:"ArcByBulgeType",bti:".ArcStringByBulgeType"},{ln:"GeometricComplexPropertyType",ps:[{n:"geometricComplex",rq:!0,en:"GeometricComplex",ti:".GeometricComplexType"},{n:"compositeCurve",rq:!0,en:"CompositeCurve",ti:".CompositeCurveType"},{n:"compositeSurface",rq:!0,en:"CompositeSurface",ti:".CompositeSurfaceType"},{n:"compositeSolid",rq:!0,en:"CompositeSolid",ti:".CompositeSolidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CompositeCurvePropertyType",ps:[{n:"compositeCurve",rq:!0,en:"CompositeCurve",ti:".CompositeCurveType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"OperationParameterGroupBaseType",bti:".AbstractGeneralOperationParameterType"},{ln:"MultiPointCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"ReferenceType",ps:[{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ImageCRSRefType",ps:[{n:"imageCRS",rq:!0,en:"ImageCRS",ti:".ImageCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DefaultStylePropertyType",ps:[{n:"style",mx:!1,dom:!1,en:"_Style",ti:".AbstractStyleType",t:"er"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractTimeReferenceSystemType",bti:".DefinitionType",ps:[{n:"domainOfValidity"}]},{ln:"AbsoluteExternalPositionalAccuracyType",bti:".AbstractPositionalAccuracyType",ps:[{n:"result",rq:!0,ti:".MeasureType"}]},{ln:"TopoPrimitiveMemberType",ps:[{n:"topoPrimitive",mx:!1,dom:!1,en:"_TopoPrimitive",ti:".AbstractTopoPrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeOrdinalReferenceSystemType",bti:".AbstractTimeReferenceSystemType",ps:[{n:"component",rq:!0,col:!0,ti:".TimeOrdinalEraPropertyType"}]},{ln:"CompositeSolidType",bti:".AbstractSolidType",ps:[{n:"solidMember",rq:!0,col:!0,ti:".SolidPropertyType"}]},{ln:"GeocentricCRSRefType",ps:[{n:"geocentricCRS",rq:!0,en:"GeocentricCRS",ti:".GeocentricCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiCurveType",bti:".AbstractGeometricAggregateType",ps:[{n:"curveMember",mno:0,col:!0,ti:".CurvePropertyType"},{n:"curveMembers",ti:".CurveArrayPropertyType"}]},{ln:"UnitDefinitionType",bti:".DefinitionType",ps:[{n:"quantityType",rq:!0,ti:".StringOrRefType"},{n:"catalogSymbol",ti:".CodeType"}]},{ln:"CurveSegmentArrayPropertyType",ps:[{n:"curveSegment",mno:0,col:!0,mx:!1,dom:!1,en:"_CurveSegment",ti:".AbstractCurveSegmentType",t:"er"}]},{ln:"AbstractTimePrimitiveType",bti:".AbstractTimeObjectType",ps:[{n:"relatedTime",mno:0,col:!0,ti:".RelatedTimeType"}]},{ln:"MultiPointType",bti:".AbstractGeometricAggregateType",ps:[{n:"pointMember",mno:0,col:!0,ti:".PointPropertyType"},{n:"pointMembers",ti:".PointArrayPropertyType"}]},{ln:"MultiPointPropertyType",ps:[{n:"multiPoint",rq:!0,en:"MultiPoint",ti:".MultiPointType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractTimeTopologyPrimitiveType",bti:".AbstractTimePrimitiveType",ps:[{n:"complex",ti:".ReferenceType"}]},{ln:"KnotType",ps:[{n:"value",rq:!0,ti:"Double"},{n:"multiplicity",rq:!0,ti:"NonNegativeInteger"},{n:"weight",rq:!0,ti:"Double"}]},{ln:"CodeType",ps:[{n:"value",t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"AbstractTimeSliceType",bti:".AbstractGMLType",ps:[{n:"validTime",rq:!0,ti:".TimePrimitivePropertyType"},{n:"dataSource",ti:".StringOrRefType"}]},{ln:"DynamicFeatureType",bti:".AbstractFeatureType",ps:[{n:"validTime",ti:".TimePrimitivePropertyType"},{n:"history",mx:!1,dom:!1,ti:".HistoryPropertyType",t:"er"},{n:"dataSource",ti:".StringOrRefType"}]},{ln:"RingPropertyType",ps:[{n:"ring",rq:!0,en:"Ring",ti:".RingType"}]},{ln:"EngineeringCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesCS",rq:!0,ti:".CoordinateSystemRefType"},{n:"usesEngineeringDatum",rq:!0,ti:".EngineeringDatumRefType"}]},{ln:"BooleanPropertyType",bti:".ValuePropertyType"},{ln:"VerticalCRSRefType",ps:[{n:"verticalCRS",rq:!0,en:"VerticalCRS",ti:".VerticalCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"FormulaType",ps:[{n:"a",ti:"Double"},{n:"b",rq:!0,ti:"Double"},{n:"c",rq:!0,ti:"Double"},{n:"d",ti:"Double"}]},{ln:"EngineeringDatumRefType",ps:[{n:"engineeringDatum",rq:!0,en:"EngineeringDatum",ti:".EngineeringDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DirectedObservationAtDistanceType",bti:".DirectedObservationType",ps:[{n:"distance",rq:!0,ti:".MeasureType"}]},{ln:"AbstractMetaDataType",ps:[{n:"content",col:!0,dom:!1,t:"ers"},{n:"id",ti:"ID",an:{lp:"id",ns:"http://www.opengis.net/gml"},t:"a"}]},{ln:"AbstractCurveSegmentType",ps:[{n:"numDerivativesAtStart",ti:"Integer",an:{lp:"numDerivativesAtStart"},t:"a"},{n:"numDerivativesAtEnd",ti:"Integer",an:{lp:"numDerivativesAtEnd"},t:"a"},{n:"numDerivativeInterior",ti:"Integer",an:{lp:"numDerivativeInterior"},t:"a"}]},{ln:"RelatedTimeType",bti:".TimePrimitivePropertyType",ps:[{n:"relativePosition",an:{lp:"relativePosition"},t:"a"}]},{ln:"OperationParameterGroupRefType",ps:[{n:"operationParameterGroup",rq:!0,en:"OperationParameterGroup",ti:".OperationParameterGroupType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GridType",bti:".AbstractGeometryType",ps:[{n:"limits",rq:!0,ti:".GridLimitsType"},{n:"axisName",rq:!0,col:!0},{n:"dimension",rq:!0,ti:"PositiveInteger",an:{lp:"dimension"},t:"a"}]},{ln:"IndexMapType",bti:".GridFunctionType",ps:[{n:"lookUpTable",rq:!0,ti:{t:"l",bti:"Integer"}}]},{ln:"AbstractCurveType",bti:".AbstractGeometricPrimitiveType"},{ln:"MultiGeometryPropertyType",ps:[{n:"geometricAggregate",rq:!0,mx:!1,dom:!1,en:"_GeometricAggregate",ti:".AbstractGeometricAggregateType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GridCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"DerivedCRSTypeType",bti:".CodeType"},{ln:"ArrayType",bti:".AbstractGMLType",ps:[{n:"members",ti:".ArrayAssociationType"}]},{ln:"AbstractGriddedSurfaceType",bti:".AbstractParametricCurveSurfaceType",ps:[{n:"row",rq:!0,col:!0,ti:".AbstractGriddedSurfaceType.Row"},{n:"rows",ti:"Integer"},{n:"columns",ti:"Integer"}]},{ln:"AbstractTimeGeometricPrimitiveType",bti:".AbstractTimePrimitiveType",ps:[{n:"frame",an:{lp:"frame"},t:"a"}]},{ln:"ArrayAssociationType",ps:[{n:"object",mno:0,col:!0,mx:!1,dom:!1,en:"_Object",ti:"AnyType",t:"er"}]},{ln:"PassThroughOperationRefType",ps:[{n:"passThroughOperation",rq:!0,en:"PassThroughOperation",ti:".PassThroughOperationType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"PolygonPatchType",bti:".AbstractSurfacePatchType",ps:[{n:"exterior",mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interior",mno:0,col:!0,mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"GeneralTransformationRefType",ps:[{n:"generalTransformation",rq:!0,mx:!1,dom:!1,en:"_GeneralTransformation",ti:".AbstractGeneralTransformationType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TransformationRefType",ps:[{n:"transformation",rq:!0,en:"Transformation",ti:".TransformationType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ValueArrayType",bti:".CompositeValueType",ps:[{n:"codeSpace",an:{lp:"codeSpace"},t:"a"},{n:"uom",an:{lp:"uom"},t:"a"}]},{ln:"TimeClockPropertyType",ps:[{n:"timeClock",rq:!0,en:"TimeClock",ti:".TimeClockType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CylinderType",bti:".AbstractGriddedSurfaceType",ps:[{n:"horizontalCURVETYPE",an:{lp:"horizontalCurveType"},t:"a"},{n:"verticalCURVETYPE",an:{lp:"verticalCurveType"},t:"a"}]},{ln:"MultiSurfaceCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"VerticalDatumTypeType",bti:".CodeType"},{ln:"GeometryArrayPropertyType",ps:[{n:"geometry",mno:0,col:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"}]},{ln:"MultiCurvePropertyType",ps:[{n:"multiCurve",rq:!0,en:"MultiCurve",ti:".MultiCurveType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DirectedFacePropertyType",ps:[{n:"face",rq:!0,en:"Face",ti:".FaceType"},{n:"orientation",an:{lp:"orientation"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GridFunctionType",ps:[{n:"sequenceRule",ti:".SequenceRuleType"},{n:"startPoint",ti:{t:"l",bti:"Integer"}}]},{ln:"DMSAngleType",ps:[{n:"degrees",rq:!0,ti:".DegreesType"},{n:"decimalMinutes",rq:!0,ti:"Decimal"},{n:"minutes",rq:!0,ti:"NonNegativeInteger"},{n:"seconds",ti:"Decimal"}]},{ln:"AbstractTimeComplexType",bti:".AbstractTimeObjectType"},{ln:"LocationPropertyType",ps:[{n:"geometry",rq:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"},{n:"locationKeyWord",rq:!0,en:"LocationKeyWord",ti:".CodeType"},{n:"locationString",rq:!0,en:"LocationString",ti:".StringOrRefType"},{n:"_null",rq:!0,en:"Null",ti:{t:"l"}},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"SurfaceType",bti:".AbstractSurfaceType",ps:[{n:"patches",rq:!0,mx:!1,dom:!1,ti:".SurfacePatchArrayPropertyType",t:"er"}]},{ln:"LabelType",ps:[{n:"content",col:!0,dom:!1,en:"LabelExpression",t:"er"},{n:"transform",an:{lp:"transform",ns:"http://www.opengis.net/gml"},t:"a"}]},{ln:"OperationParameterRefType",ps:[{n:"operationParameter",rq:!0,en:"OperationParameter",ti:".OperationParameterType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractSolidType",bti:".AbstractGeometricPrimitiveType"},{ln:"GenericMetaDataType",bti:".AbstractMetaDataType",ps:[{n:"contentOverrideForGenericMetaDataType",t:"ae"}]},{ln:"CoordinateOperationRefType",ps:[{n:"coordinateOperation",rq:!0,mx:!1,dom:!1,en:"_CoordinateOperation",ti:".AbstractCoordinateOperationType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DataBlockType",ps:[{n:"rangeParameters",rq:!0,ti:".RangeParametersType"},{n:"tupleList",rq:!0,ti:".CoordinatesType"},{n:"doubleOrNullTupleList",rq:!0,ti:{t:"l"}}]},{ln:"TopoComplexType",bti:".AbstractTopologyType",ps:[{n:"maximalComplex",rq:!0,ti:".TopoComplexMemberType"},{n:"superComplex",mno:0,col:!0,ti:".TopoComplexMemberType"},{n:"subComplex",mno:0,col:!0,ti:".TopoComplexMemberType"},{n:"topoPrimitiveMember",mno:0,col:!0,ti:".TopoPrimitiveMemberType"},{n:"topoPrimitiveMembers",ti:".TopoPrimitiveArrayAssociationType"},{n:"isMaximal",ti:"Boolean",an:{lp:"isMaximal"},t:"a"}]},{ln:"NodeType",bti:".AbstractTopoPrimitiveType",ps:[{n:"directedEdge",mno:0,col:!0,ti:".DirectedEdgePropertyType"},{n:"pointProperty",ti:".PointPropertyType"}]},{ln:"PolarCSRefType",ps:[{n:"polarCS",rq:!0,en:"PolarCS",ti:".PolarCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractTopologyType",bti:".AbstractGMLType"},{ln:"ClothoidType",bti:".AbstractCurveSegmentType",ps:[{n:"refLocation",rq:!0,ti:".ClothoidType.RefLocation"},{n:"scaleFactor",rq:!0,ti:"Decimal"},{n:"startParameter",rq:!0,ti:"Double"},{n:"endParameter",rq:!0,ti:"Double"}]},{ln:"MetaDataPropertyType",ps:[{n:"any",rq:!0,mx:!1,t:"ae"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ArcByCenterPointType",bti:".AbstractCurveSegmentType",ps:[{n:"pos",rq:!0,ti:".DirectPositionType"},{n:"pointProperty",rq:!0,ti:".PointPropertyType"},{n:"pointRep",rq:!0,ti:".PointPropertyType"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"radius",rq:!0,ti:".LengthType"},{n:"startAngle",ti:".AngleType"},{n:"endAngle",ti:".AngleType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"numARC",rq:!0,ti:"Integer",an:{lp:"numArc"},t:"a"}]},{ln:"ConversionRefType",ps:[{n:"conversion",rq:!0,en:"Conversion",ti:".ConversionType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DegreesType",ps:[{n:"value",ti:"NonNegativeInteger",t:"v"},{n:"direction",an:{lp:"direction"},t:"a"}]},{ln:"MultiSurfaceDomainType",bti:".DomainSetType"},{ln:"ConcatenatedOperationRefType",ps:[{n:"concatenatedOperation",rq:!0,en:"ConcatenatedOperation",ti:".ConcatenatedOperationType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"OperationMethodType",bti:".OperationMethodBaseType",ps:[{n:"methodID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"methodFormula",rq:!0,ti:".CodeType"},{n:"sourceDimensions",rq:!0,ti:"PositiveInteger"},{n:"targetDimensions",rq:!0,ti:"PositiveInteger"},{n:"usesParameter",mno:0,col:!0,ti:".AbstractGeneralOperationParameterRefType"}]},{ln:"EllipsoidalCSType",bti:".AbstractCoordinateSystemType"},{ln:"SpeedType",bti:".MeasureType"},{ln:"PolygonType",bti:".AbstractSurfaceType",ps:[{n:"exterior",mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interior",mno:0,col:!0,mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"}]},{ln:"AbstractTopoPrimitiveType",bti:".AbstractTopologyType",ps:[{n:"isolated",mno:0,col:!0,ti:".IsolatedPropertyType"},{n:"container",ti:".ContainerPropertyType"}]},{ln:"BSplineType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",mno:0,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"degree",rq:!0,ti:"NonNegativeInteger"},{n:"knot",rq:!0,mno:2,col:!0,ti:".KnotPropertyType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"isPolynomial",ti:"Boolean",an:{lp:"isPolynomial"},t:"a"},{n:"knotType",an:{lp:"knotType"},t:"a"}]},{ln:"FileType",ps:[{n:"rangeParameters",rq:!0,ti:".RangeParametersType"},{n:"fileName",rq:!0},{n:"fileStructure",rq:!0},{n:"mimeType"},{n:"compression"}]},{ln:"RectifiedGridType",bti:".GridType",ps:[{n:"origin",rq:!0,ti:".PointPropertyType"},{n:"offsetVector",rq:!0,col:!0,ti:".VectorType"}]},{ln:"TimePeriodPropertyType",ps:[{n:"timePeriod",rq:!0,en:"TimePeriod",ti:".TimePeriodType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"RingType",bti:".AbstractRingType",ps:[{n:"curveMember",rq:!0,col:!0,ti:".CurvePropertyType"}]},{ln:"ClothoidType.RefLocation",tn:null,ps:[{n:"affinePlacement",rq:!0,en:"AffinePlacement",ti:".AffinePlacementType"}]},{ln:"GeometryStylePropertyType",ps:[{n:"geometryStyle",en:"GeometryStyle",ti:".GeometryStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"EnvelopeWithTimePeriodType",bti:".EnvelopeType",ps:[{n:"timePosition",rq:!0,mno:2,mxo:2,col:!0,ti:".TimePositionType"},{n:"frame",an:{lp:"frame"},t:"a"}]},{ln:"ValuePropertyType",ps:[{n:"_boolean",rq:!0,en:"Boolean",ti:"Boolean"},{n:"category",rq:!0,en:"Category",ti:".CodeType"},{n:"quantity",rq:!0,en:"Quantity",ti:".MeasureType"},{n:"count",rq:!0,en:"Count",ti:"Integer"},{n:"booleanList",rq:!0,en:"BooleanList",ti:{t:"l"}},{n:"categoryList",rq:!0,en:"CategoryList",ti:".CodeOrNullListType"},{n:"quantityList",rq:!0,en:"QuantityList",ti:".MeasureOrNullListType"},{n:"countList",rq:!0,en:"CountList",ti:{t:"l"}},{n:"categoryExtent",rq:!0,en:"CategoryExtent",ti:".CategoryExtentType"},{n:"quantityExtent",rq:!0,en:"QuantityExtent",ti:".QuantityExtentType"},{n:"countExtent",rq:!0,en:"CountExtent",ti:{t:"l"}},{n:"compositeValue",rq:!0,mx:!1,dom:!1,en:"CompositeValue",ti:".CompositeValueType",t:"er"},{n:"object",rq:!0,mx:!1,dom:!1,en:"_Object",ti:"AnyType",t:"er"},{n:"_null",rq:!0,en:"Null",ti:{t:"l"}},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeodesicStringType",bti:".AbstractCurveSegmentType",ps:[{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"geometricPositionGroup",rq:!0,mno:2,col:!0,etis:[{en:"pos",ti:".DirectPositionType"},{en:"pointProperty",ti:".PointPropertyType"}],t:"es"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"AbstractDatumBaseType",bti:".DefinitionType"},{ln:"TemporalCRSRefType",ps:[{n:"temporalCRS",rq:!0,en:"TemporalCRS",ti:".TemporalCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiGeometryType",bti:".AbstractGeometricAggregateType",ps:[{n:"geometryMember",mno:0,col:!0,ti:".GeometryPropertyType"},{n:"geometryMembers",ti:".GeometryArrayPropertyType"}]},{ln:"TimeInstantPropertyType",ps:[{n:"timeInstant",rq:!0,en:"TimeInstant",ti:".TimeInstantType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CompoundCRSRefType",ps:[{n:"compoundCRS",rq:!0,en:"CompoundCRS",ti:".CompoundCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TrianglePatchArrayPropertyType",bti:".SurfacePatchArrayPropertyType"},{ln:"DomainSetType",ps:[{n:"geometry",rq:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"},{n:"timeObject",rq:!0,mx:!1,dom:!1,en:"_TimeObject",ti:".AbstractTimeObjectType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TemporalCSRefType",ps:[{n:"temporalCS",rq:!0,en:"TemporalCS",ti:".TemporalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiPolygonType",bti:".AbstractGeometricAggregateType",ps:[{n:"polygonMember",mno:0,col:!0,ti:".PolygonPropertyType"}]},{ln:"StyleType",bti:".AbstractStyleType",ps:[{n:"featureStyle",rq:!0,col:!0,ti:".FeatureStylePropertyType"},{n:"graphStyle",ti:".GraphStylePropertyType"}]},{ln:"DynamicFeatureCollectionType",bti:".FeatureCollectionType",ps:[{n:"validTime",ti:".TimePrimitivePropertyType"},{n:"history",mx:!1,dom:!1,ti:".HistoryPropertyType",t:"er"},{n:"dataSource",ti:".StringOrRefType"}]},{ln:"PrimeMeridianBaseType",bti:".DefinitionType"},{ln:"AbstractGriddedSurfaceType.Row",tn:null,ps:[{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"geometricPositionGroup",rq:!0,col:!0,etis:[{en:"pos",ti:".DirectPositionType"},{en:"pointProperty",ti:".PointPropertyType"}],t:"es"}]},{ln:"DictionaryType",bti:".DefinitionType",ps:[{n:"dictionaryEntryOrIndirectEntry",mno:0,col:!0,mx:!1,dom:!1,etis:[{en:"indirectEntry",ti:".IndirectEntryType"},{en:"dictionaryEntry",ti:".DictionaryEntryType"}],t:"ers"}]},{ln:"CoordType",ps:[{n:"x",rq:!0,en:"X",ti:"Decimal"},{n:"y",en:"Y",ti:"Decimal"},{n:"z",en:"Z",ti:"Decimal"}]},{ln:"RectangleType",bti:".AbstractSurfacePatchType",ps:[{n:"exterior",rq:!0,mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"DirectionPropertyType",ps:[{n:"directionVector",rq:!0,en:"DirectionVector",ti:".DirectionVectorType"},{n:"compassPoint",rq:!0,en:"CompassPoint"},{n:"directionKeyword",rq:!0,en:"DirectionKeyword",ti:".CodeType"},{n:"directionString",rq:!0,en:"DirectionString",ti:".StringOrRefType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractFeatureCollectionType",bti:".AbstractFeatureType",ps:[{n:"featureMember",mno:0,col:!0,ti:".FeaturePropertyType"},{n:"featureMembers",ti:".FeatureArrayPropertyType"}]},{ln:"PrimeMeridianType",bti:".PrimeMeridianBaseType",ps:[{n:"meridianID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"greenwichLongitude",rq:!0,ti:".AngleChoiceType"}]},{ln:"SolidPropertyType",ps:[{n:"solid",rq:!0,mx:!1,dom:!1,en:"_Solid",ti:".AbstractSolidType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"FeatureStylePropertyType",ps:[{n:"featureStyle",en:"FeatureStyle",ti:".FeatureStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeCalendarType",bti:".AbstractTimeReferenceSystemType",ps:[{n:"referenceFrame",rq:!0,col:!0,ti:".TimeCalendarEraPropertyType"}]},{ln:"AbstractGeneralOperationParameterType",bti:".DefinitionType",ps:[{n:"minimumOccurs",ti:"NonNegativeInteger"}]},{ln:"DerivedCRSType",bti:".AbstractGeneralDerivedCRSType",ps:[{n:"derivedCRSType",rq:!0,ti:".DerivedCRSTypeType"},{n:"usesCS",rq:!0,ti:".CoordinateSystemRefType"}]},{ln:"TimeType",bti:".MeasureType"},{ln:"CylindricalCSType",bti:".AbstractCoordinateSystemType"},{ln:"UnitOfMeasureType",ps:[{n:"uom",rq:!0,an:{lp:"uom"},t:"a"}]},{ln:"GeneralConversionRefType",ps:[{n:"generalConversion",rq:!0,mx:!1,dom:!1,en:"_GeneralConversion",ti:".AbstractGeneralConversionType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AffinePlacementType",ps:[{n:"location",rq:!0,ti:".DirectPositionType"},{n:"refDirection",rq:!0,col:!0,ti:".VectorType"},{n:"inDimension",rq:!0,ti:"PositiveInteger"},{n:"outDimension",rq:!0,ti:"PositiveInteger"}]},{ln:"PolyhedralSurfaceType",bti:".SurfaceType"},{ln:"IsolatedPropertyType",ps:[{n:"node",rq:!0,en:"Node",ti:".NodeType"},{n:"edge",rq:!0,en:"Edge",ti:".EdgeType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"SolidType",bti:".AbstractSolidType",ps:[{n:"exterior",ti:".SurfacePropertyType"},{n:"interior",mno:0,col:!0,ti:".SurfacePropertyType"}]},{ln:"VerticalCSType",bti:".AbstractCoordinateSystemType"},{ln:"ArcType",bti:".ArcStringType"},{ln:"GeometricPrimitivePropertyType",ps:[{n:"geometricPrimitive",rq:!0,mx:!1,dom:!1,en:"_GeometricPrimitive",ti:".AbstractGeometricPrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractSurfacePatchType"},{ln:"EllipsoidalCSRefType",ps:[{n:"ellipsoidalCS",rq:!0,en:"EllipsoidalCS",ti:".EllipsoidalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"LineStringSegmentType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:2,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"IdentifierType",ps:[{n:"name",rq:!0,mx:!1,dom:!1,ti:".CodeType",t:"er"},{n:"version"},{n:"remarks",ti:".StringOrRefType"}]},{ln:"AbstractGeneralTransformationType",bti:".AbstractCoordinateOperationType"},{ln:"TimeCoordinateSystemType",bti:".AbstractTimeReferenceSystemType",ps:[{n:"originPosition",rq:!0,ti:".TimePositionType"},{n:"origin",rq:!0,ti:".TimeInstantPropertyType"},{n:"interval",rq:!0,ti:".TimeIntervalLengthType"}]},{ln:"TemporalDatumBaseType",bti:".AbstractDatumType"},{ln:"GridLengthType",bti:".MeasureType"},{ln:"IndirectEntryType",ps:[{n:"definitionProxy",rq:!0,en:"DefinitionProxy",ti:".DefinitionProxyType"}]},{ln:"PolygonPatchArrayPropertyType",bti:".SurfacePatchArrayPropertyType"},{ln:"HistoryPropertyType",ps:[{n:"timeSlice",rq:!0,col:!0,mx:!1,dom:!1,en:"_TimeSlice",ti:".AbstractTimeSliceType",t:"er"}]},{ln:"EnvelopeType",ps:[{n:"lowerCorner",rq:!0,ti:".DirectPositionType"},{n:"upperCorner",rq:!0,ti:".DirectPositionType"},{n:"coord",rq:!0,mno:2,mxo:2,col:!0,ti:".CoordType"},{n:"pos",rq:!0,mno:2,mxo:2,col:!0,ti:".DirectPositionType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"CountPropertyType",bti:".ValuePropertyType"},{ln:"ConversionType",bti:".AbstractGeneralConversionType",ps:[{n:"usesMethod",rq:!0,ti:".OperationMethodRefType"},{n:"usesValue",mno:0,col:!0,ti:".ParameterValueType"}]},{ln:"UserDefinedCSRefType",ps:[{n:"userDefinedCS",rq:!0,en:"UserDefinedCS",ti:".UserDefinedCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"LabelStylePropertyType",ps:[{n:"labelStyle",en:"LabelStyle",ti:".LabelStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"BaseStyleDescriptorType",bti:".AbstractGMLType",ps:[{n:"spatialResolution",ti:".ScaleType"},{n:"styleVariation",mno:0,col:!0,ti:".StyleVariationType"},{n:"animate",mno:0,col:!0,en:{lp:"animate",ns:"http://www.w3.org/2001/SMIL20/"},ti:"SMIL_2_0_Language.AnimateType"},{n:"animateMotion",mno:0,col:!0,en:{lp:"animateMotion",ns:"http://www.w3.org/2001/SMIL20/"},ti:"SMIL_2_0_Language.AnimateMotionType"},{n:"animateColor",mno:0,col:!0,en:{lp:"animateColor",ns:"http://www.w3.org/2001/SMIL20/"},ti:"SMIL_2_0_Language.AnimateColorType"},{n:"set",mno:0,col:!0,en:{lp:"set",ns:"http://www.w3.org/2001/SMIL20/"},ti:"SMIL_2_0_Language.SetType"}]},{ln:"SphericalCSRefType",ps:[{n:"sphericalCS",rq:!0,en:"SphericalCS",ti:".SphericalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeodeticDatumType",bti:".AbstractDatumType",ps:[{n:"usesPrimeMeridian",rq:!0,ti:".PrimeMeridianRefType"},{n:"usesEllipsoid",rq:!0,ti:".EllipsoidRefType"}]},{ln:"OperationMethodBaseType",bti:".DefinitionType"},{ln:"LineStringSegmentArrayPropertyType",ps:[{n:"lineStringSegment",mno:0,col:!0,en:"LineStringSegment",ti:".LineStringSegmentType"}]},{ln:"MeasureListType",ps:[{n:"value",ti:{t:"l",bti:"Double"},t:"v"},{n:"uom",rq:!0,an:{lp:"uom"},t:"a"}]},{ln:"EngineeringDatumType",bti:".AbstractDatumType"},{ln:"ScalarValuePropertyType",bti:".ValuePropertyType"},{ln:"TopoVolumeType",bti:".AbstractTopologyType",ps:[{n:"directedTopoSolid",rq:!0,col:!0,ti:".DirectedTopoSolidPropertyType"}]},{ln:"TopoCurvePropertyType",ps:[{n:"topoCurve",rq:!0,en:"TopoCurve",ti:".TopoCurveType"}]},{ln:"TransformationType",bti:".AbstractGeneralTransformationType",ps:[{n:"usesMethod",rq:!0,ti:".OperationMethodRefType"},{n:"usesValue",mno:0,col:!0,ti:".ParameterValueType"}]},{ln:"ParameterValueType",bti:".AbstractGeneralParameterValueType",ps:[{n:"value",rq:!0,ti:".MeasureType"},{n:"dmsAngleValue",rq:!0,ti:".DMSAngleType"},{n:"stringValue",rq:!0},{n:"integerValue",rq:!0,ti:"PositiveInteger"},{n:"booleanValue",rq:!0,ti:"Boolean"},{n:"valueList",rq:!0,ti:".MeasureListType"},{n:"integerValueList",rq:!0,ti:{t:"l",bti:"Integer"}},{n:"valueFile",rq:!0},{n:"valueOfParameter",rq:!0,ti:".OperationParameterRefType"}]},{ln:"TimeGeometricPrimitivePropertyType",ps:[{n:"timeGeometricPrimitive",rq:!0,mx:!1,dom:!1,en:"_TimeGeometricPrimitive",ti:".AbstractTimeGeometricPrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeClockType",bti:".AbstractTimeReferenceSystemType",ps:[{n:"referenceEvent",rq:!0,ti:".StringOrRefType"},{n:"referenceTime",rq:!0,ti:"Time"},{n:"utcReference",rq:!0,ti:"Time"},{n:"dateBasis",mno:0,col:!0,ti:".TimeCalendarPropertyType"}]},{ln:"CubicSplineType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:2,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"vectorAtStart",rq:!0,ti:".VectorType"},{n:"vectorAtEnd",rq:!0,ti:".VectorType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"degree",ti:"Integer",an:{lp:"degree"},t:"a"}]},{ln:"OperationMethodRefType",ps:[{n:"operationMethod",rq:!0,en:"OperationMethod",ti:".OperationMethodType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"LineStringPropertyType",ps:[{n:"lineString",rq:!0,en:"LineString",ti:".LineStringType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractCoverageType",bti:".AbstractFeatureType",ps:[{n:"domainSet",rq:!0,mx:!1,dom:!1,ti:".DomainSetType",t:"er"},{n:"rangeSet",rq:!0,ti:".RangeSetType"},{n:"dimension",ti:"PositiveInteger",an:{lp:"dimension"},t:"a"}]},{ln:"TargetPropertyType",ps:[{n:"feature",rq:!0,mx:!1,en:"_Feature",ti:".AbstractFeatureType",t:"er"},{n:"geometry",rq:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimePrimitivePropertyType",ps:[{n:"timePrimitive",rq:!0,mx:!1,dom:!1,en:"_TimePrimitive",ti:".AbstractTimePrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CategoryPropertyType",bti:".ValuePropertyType"},{ln:"LineStringType",bti:".AbstractCurveType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:2,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"coord",ti:".CoordType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"}]},{ln:"DerivationUnitTermType",bti:".UnitOfMeasureType",ps:[{n:"exponent",ti:"Integer",an:{lp:"exponent"},t:"a"}]},{ln:"TinType",bti:".TriangulatedSurfaceType",ps:[{n:"stopLines",mno:0,col:!0,ti:".LineStringSegmentArrayPropertyType"},{n:"breakLines",mno:0,col:!0,ti:".LineStringSegmentArrayPropertyType"},{n:"maxLength",rq:!0,ti:".LengthType"},{n:"controlPoint",rq:!0,ti:".TinType.ControlPoint"}]},{ln:"GeodeticDatumRefType",ps:[{n:"geodeticDatum",rq:!0,en:"GeodeticDatum",ti:".GeodeticDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimePositionType",ps:[{n:"value",ti:{t:"l"},t:"v"},{n:"frame",an:{lp:"frame"},t:"a"},{n:"calendarEraName",an:{lp:"calendarEraName"},t:"a"},{n:"indeterminatePosition",an:{lp:"indeterminatePosition"},t:"a"}]},{ln:"PrimeMeridianRefType",ps:[{n:"primeMeridian",rq:!0,en:"PrimeMeridian",ti:".PrimeMeridianType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"VolumeType",bti:".MeasureType"},{ln:"TimeIntervalLengthType",ps:[{n:"value",ti:"Decimal",t:"v"},{n:"unit",rq:!0,an:{lp:"unit"},t:"a"},{n:"radix",ti:"PositiveInteger",an:{lp:"radix"},t:"a"},{n:"factor",ti:"Integer",an:{lp:"factor"},t:"a"}]},{ln:"ParameterValueGroupType",bti:".AbstractGeneralParameterValueType",ps:[{n:"includesValue",rq:!0,mno:2,col:!0,ti:".AbstractGeneralParameterValueType"},{n:"valuesOfGroup",rq:!0,ti:".OperationParameterGroupRefType"}]},{ln:"CartesianCSRefType",ps:[{n:"cartesianCS",rq:!0,en:"CartesianCS",ti:".CartesianCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeEdgePropertyType",ps:[{n:"timeEdge",rq:!0,en:"TimeEdge",ti:".TimeEdgeType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TopoPointPropertyType",ps:[{n:"topoPoint",rq:!0,en:"TopoPoint",ti:".TopoPointType"}]},{ln:"ProjectedCRSType",bti:".AbstractGeneralDerivedCRSType",ps:[{n:"usesCartesianCS",rq:!0,ti:".CartesianCSRefType"}]},{ln:"MultiCurveDomainType",bti:".DomainSetType"},{ln:"AbstractReferenceSystemBaseType",bti:".DefinitionType"},{ln:"PolygonPropertyType",ps:[{n:"polygon",rq:!0,en:"Polygon",ti:".PolygonType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"PolarCSType",bti:".AbstractCoordinateSystemType"},{ln:"AbstractGeometricPrimitiveType",bti:".AbstractGeometryType"},{ln:"MultiSolidDomainType",bti:".DomainSetType"},{ln:"TopoVolumePropertyType",ps:[{n:"topoVolume",rq:!0,en:"TopoVolume",ti:".TopoVolumeType"}]},{ln:"CircleType",bti:".ArcType"},{ln:"ValueArrayPropertyType",ps:[{n:"value",rq:!0,col:!0,mx:!1,dom:!1,etis:[{en:"CountExtent",ti:{t:"l"}},{en:"Quantity",ti:".MeasureType"},{en:"Null",ti:{t:"l"}},{en:"CountList",ti:{t:"l"}},{en:"Count",ti:"Integer"},{en:"QuantityExtent",ti:".QuantityExtentType"},{en:"_Object",ti:"AnyType"},{en:"CategoryList",ti:".CodeOrNullListType"},{en:"CompositeValue",ti:".CompositeValueType"},{en:"CategoryExtent",ti:".CategoryExtentType"},{en:"Category",ti:".CodeType"},{en:"BooleanList",ti:{t:"l"}},{en:"QuantityList",ti:".MeasureOrNullListType"},{en:"Boolean",ti:"Boolean"}],t:"ers"}]},{ln:"GraphStyleType",bti:".BaseStyleDescriptorType",ps:[{n:"planar",ti:"Boolean"},{n:"directed",ti:"Boolean"},{n:"grid",ti:"Boolean"},{n:"minDistance",ti:"Double"},{n:"minAngle",ti:"Double"},{n:"graphType"},{n:"drawingType"},{n:"lineType"},{n:"aestheticCriteria",mno:0,col:!0}]},{ln:"AbstractGeneralConversionType",bti:".AbstractCoordinateOperationType"},{ln:"TopoSurfaceType",bti:".AbstractTopologyType",ps:[{n:"directedFace",rq:!0,col:!0,ti:".DirectedFacePropertyType"}]},{ln:"MultiPointDomainType",bti:".DomainSetType"},{ln:"CircleByCenterPointType",bti:".ArcByCenterPointType"},{ln:"CompositeSurfaceType",bti:".AbstractSurfaceType",ps:[{n:"surfaceMember",rq:!0,col:!0,ti:".SurfacePropertyType"}]},{ln:"MultiCurveCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"MultiLineStringType",bti:".AbstractGeometricAggregateType",ps:[{n:"lineStringMember",mno:0,col:!0,ti:".LineStringPropertyType"}]},{ln:"ImageCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesCartesianCS",rq:!0,ti:".CartesianCSRefType"},{n:"usesObliqueCartesianCS",rq:!0,ti:".ObliqueCartesianCSRefType"},{n:"usesImageDatum",rq:!0,ti:".ImageDatumRefType"}]},{ln:"FeaturePropertyType",ps:[{n:"feature",rq:!0,mx:!1,en:"_Feature",ti:".AbstractFeatureType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CoordinateSystemAxisBaseType",bti:".DefinitionType"},{ln:"GeodesicType",bti:".GeodesicStringType"},{ln:"CovarianceElementType",ps:[{n:"rowIndex",rq:!0,ti:"PositiveInteger"},{n:"columnIndex",rq:!0,ti:"PositiveInteger"},{n:"covariance",rq:!0,ti:"Double"}]},{ln:"DerivedUnitType",bti:".UnitDefinitionType",ps:[{n:"derivationUnitTerm",rq:!0,col:!0,ti:".DerivationUnitTermType"}]},{ln:"EdgeType",bti:".AbstractTopoPrimitiveType",ps:[{n:"directedNode",rq:!0,mno:2,mxo:2,col:!0,ti:".DirectedNodePropertyType"},{n:"directedFace",mno:0,col:!0,ti:".DirectedFacePropertyType"},{n:"curveProperty",ti:".CurvePropertyType"}]},{ln:"CompositeSolidPropertyType",ps:[{n:"compositeSolid",rq:!0,en:"CompositeSolid",ti:".CompositeSolidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CRSRefType",ps:[{n:"crs",rq:!0,mx:!1,dom:!1,en:"_CRS",ti:".AbstractReferenceSystemType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AssociationType",ps:[{n:"object",rq:!0,mx:!1,dom:!1,en:"_Object",ti:"AnyType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeOrdinalEraPropertyType",ps:[{n:"timeOrdinalEra",rq:!0,en:"TimeOrdinalEra",ti:".TimeOrdinalEraType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractCoordinateSystemType",bti:".AbstractCoordinateSystemBaseType",ps:[{n:"csID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"usesAxis",rq:!0,col:!0,ti:".CoordinateSystemAxisRefType"}]},{ln:"GridDomainType",bti:".DomainSetType"},{ln:"SolidArrayPropertyType",ps:[{n:"solid",mno:0,col:!0,mx:!1,dom:!1,en:"_Solid",ti:".AbstractSolidType",t:"er"}]},{ln:"ConventionalUnitType",bti:".UnitDefinitionType",ps:[{n:"conversionToPreferredUnit",rq:!0,ti:".ConversionToPreferredUnitType"},{n:"roughConversionToPreferredUnit",rq:!0,ti:".ConversionToPreferredUnitType"},{n:"derivationUnitTerm",mno:0,col:!0,ti:".DerivationUnitTermType"}]},{ln:"OrientableCurveType",bti:".AbstractCurveType",ps:[{n:"baseCurve",rq:!0,ti:".CurvePropertyType"},{n:"orientation",an:{lp:"orientation"},t:"a"}]},{ln:"SphereType",bti:".AbstractGriddedSurfaceType",ps:[{n:"horizontalCURVETYPE",an:{lp:"horizontalCurveType"},t:"a"},{n:"verticalCURVETYPE",an:{lp:"verticalCurveType"},t:"a"}]},{ln:"AbstractGeometricAggregateType",bti:".AbstractGeometryType"},{ln:"CurveType",bti:".AbstractCurveType",ps:[{n:"segments",rq:!0,ti:".CurveSegmentArrayPropertyType"}]},{ln:"GridEnvelopeType",ps:[{n:"low",rq:!0,ti:{t:"l",bti:"Integer"}},{n:"high",rq:!0,ti:{t:"l",bti:"Integer"}}]},{ln:"ObservationType",bti:".AbstractFeatureType",ps:[{n:"validTime",rq:!0,ti:".TimePrimitivePropertyType"},{n:"using",ti:".FeaturePropertyType"},{n:"target",mx:!1,dom:!1,ti:".TargetPropertyType",t:"er"},{n:"resultOf",rq:!0,ti:".AssociationType"}]},{ln:"BoundedFeatureType",bti:".AbstractFeatureType"},{ln:"TopoCurveType",bti:".AbstractTopologyType",ps:[{n:"directedEdge",rq:!0,col:!0,ti:".DirectedEdgePropertyType"}]},{ln:"CovarianceMatrixType",bti:".AbstractPositionalAccuracyType",ps:[{n:"unitOfMeasure",rq:!0,col:!0,ti:".UnitOfMeasureType"},{n:"includesElement",rq:!0,col:!0,ti:".CovarianceElementType"}]},{ln:"ConcatenatedOperationType",bti:".AbstractCoordinateOperationType",ps:[{n:"usesSingleOperation",rq:!0,mno:2,col:!0,ti:".SingleOperationRefType"}]},{ln:"AbstractGeneralOperationParameterRefType",ps:[{n:"generalOperationParameter",rq:!0,mx:!1,dom:!1,en:"_GeneralOperationParameter",ti:".AbstractGeneralOperationParameterType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiSolidCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"GeographicCRSRefType",ps:[{n:"geographicCRS",rq:!0,en:"GeographicCRS",ti:".GeographicCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"SymbolType",ps:[{n:"any",mno:0,col:!0,typed:!1,mx:!1,t:"ae"},{n:"symbolType",rq:!0,an:{lp:"symbolType"},t:"a"},{n:"transform",an:{lp:"transform",ns:"http://www.opengis.net/gml"},t:"a"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DirectedTopoSolidPropertyType",ps:[{n:"topoSolid",rq:!0,en:"TopoSolid",ti:".TopoSolidType"},{n:"orientation",an:{lp:"orientation"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"QuantityPropertyType",bti:".ValuePropertyType"},{ln:"SurfacePropertyType",ps:[{n:"surface",rq:!0,mx:!1,dom:!1,en:"_Surface",ti:".AbstractSurfaceType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TemporalCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesTemporalCS",rq:!0,ti:".TemporalCSRefType"},{n:"usesTemporalDatum",rq:!0,ti:".TemporalDatumRefType"}]},{ln:"FeatureStyleType",bti:".AbstractGMLType",ps:[{n:"featureConstraint"},{n:"geometryStyle",mno:0,col:!0,ti:".GeometryStylePropertyType"},{n:"topologyStyle",mno:0,col:!0,ti:".TopologyStylePropertyType"},{n:"labelStyle",ti:".LabelStylePropertyType"},{n:"featureType",an:{lp:"featureType"},t:"a"},{n:"baseType",an:{lp:"baseType"},t:"a"},{n:"queryGrammar",an:{lp:"queryGrammar"},t:"a"}]},{ln:"AbstractSurfaceType",bti:".AbstractGeometricPrimitiveType"},{ln:"AbstractDiscreteCoverageType",bti:".AbstractCoverageType",ps:[{n:"coverageFunction",ti:".CoverageFunctionType"}]},{ln:"MeasureOrNullListType",ps:[{n:"value",ti:{t:"l"},t:"v"},{n:"uom",rq:!0,an:{lp:"uom"},t:"a"}]},{ln:"TopologyStyleType",bti:".BaseStyleDescriptorType",ps:[{n:"symbol",rq:!0,ti:".SymbolType"},{n:"style",rq:!0},{n:"labelStyle",ti:".LabelStylePropertyType"},{n:"topologyProperty",an:{lp:"topologyProperty"},t:"a"},{n:"topologyType",an:{lp:"topologyType"},t:"a"}]},{ln:"DictionaryEntryType",ps:[{n:"definition",rq:!0,mx:!1,dom:!1,en:"Definition",ti:".DefinitionType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CompositeSurfacePropertyType",ps:[{n:"compositeSurface",rq:!0,en:"CompositeSurface",ti:".CompositeSurfaceType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiLineStringPropertyType",ps:[{n:"multiLineString",rq:!0,en:"MultiLineString",ti:".MultiLineStringType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MeasureType",ps:[{n:"value",ti:"Double",t:"v"},{n:"uom",rq:!0,an:{lp:"uom"},t:"a"}]},{ln:"TopologyStylePropertyType",ps:[{n:"topologyStyle",en:"TopologyStyle",ti:".TopologyStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"OffsetCurveType",bti:".AbstractCurveSegmentType",ps:[{n:"offsetBase",rq:!0,ti:".CurvePropertyType"},{n:"distance",rq:!0,ti:".LengthType"},{n:"refDirection",ti:".VectorType"}]},{ln:"StringOrRefType",ps:[{n:"value",t:"v"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"VerticalCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesVerticalCS",rq:!0,ti:".VerticalCSRefType"},{n:"usesVerticalDatum",rq:!0,ti:".VerticalDatumRefType"}]},{ln:"AngleType",bti:".MeasureType"},{ln:"BoundingShapeType",ps:[{n:"envelope",rq:!0,mx:!1,dom:!1,en:"Envelope",ti:".EnvelopeType",t:"er"},{n:"_null",rq:!0,en:"Null",ti:{t:"l"}}]},{ln:"TemporalCSType",bti:".AbstractCoordinateSystemType"},{ln:"GridLimitsType",ps:[{n:"gridEnvelope",rq:!0,en:"GridEnvelope",ti:".GridEnvelopeType"}]},{ln:"LinearCSType",bti:".AbstractCoordinateSystemType"},{ln:"AbstractGeneralParameterValueType"},{ln:"DirectedNodePropertyType",ps:[{n:"node",rq:!0,en:"Node",ti:".NodeType"},{n:"orientation",an:{lp:"orientation"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"SurfaceArrayPropertyType",ps:[{n:"surface",mno:0,col:!0,mx:!1,dom:!1,en:"_Surface",ti:".AbstractSurfaceType",t:"er"}]},{ln:"SecondDefiningParameterType",ps:[{n:"inverseFlattening",rq:!0,ti:".MeasureType"},{n:"semiMinorAxis",rq:!0,ti:".MeasureType"},{n:"isSphere",rq:!0}]},{ln:"AbstractGeometryType",bti:".AbstractGMLType",ps:[{n:"gid",an:{lp:"gid"},t:"a"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"PassThroughOperationType",bti:".AbstractCoordinateOperationType",ps:[{n:"modifiedCoordinate",rq:!0,col:!0,ti:"PositiveInteger"},{n:"usesOperation",rq:!0,ti:".OperationRefType"}]},{ln:"AbstractCoordinateOperationBaseType",bti:".DefinitionType"},{ln:"ArcStringByBulgeType",bti:".AbstractCurveSegmentType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:2,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"bulge",rq:!0,col:!0,ti:"Double"},{n:"normal",rq:!0,col:!0,ti:".VectorType"},{n:"interpolation",an:{lp:"interpolation"},t:"a"},{n:"numArc",ti:"Integer",an:{lp:"numArc"},t:"a"}]},{ln:"MovingObjectStatusType",bti:".AbstractTimeSliceType",ps:[{n:"location",rq:!0,mx:!1,dom:!1,ti:".LocationPropertyType",t:"er"},{n:"speed",ti:".MeasureType"},{n:"bearing",ti:".DirectionPropertyType"},{n:"acceleration",ti:".MeasureType"},{n:"elevation",ti:".MeasureType"},{n:"status",ti:".StringOrRefType"}]},{ln:"FeatureArrayPropertyType",ps:[{n:"feature",mno:0,col:!0,mx:!1,en:"_Feature",ti:".AbstractFeatureType",t:"er"}]},{ln:"CoordinateSystemAxisRefType",ps:[{n:"coordinateSystemAxis",rq:!0,en:"CoordinateSystemAxis",ti:".CoordinateSystemAxisType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"FeatureCollectionType",bti:".AbstractFeatureCollectionType"},{ln:"TimeEdgeType",bti:".AbstractTimeTopologyPrimitiveType",ps:[{n:"start",rq:!0,ti:".TimeNodePropertyType"},{n:"end",rq:!0,ti:".TimeNodePropertyType"},{n:"extent",ti:".TimePeriodPropertyType"}]},{ln:"OperationRefType",ps:[{n:"operation",rq:!0,mx:!1,dom:!1,en:"_Operation",ti:".AbstractCoordinateOperationType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"RelativeInternalPositionalAccuracyType",bti:".AbstractPositionalAccuracyType",ps:[{n:"result",rq:!0,ti:".MeasureType"}]},{ln:"DirectedObservationType",bti:".ObservationType",ps:[{n:"direction",rq:!0,ti:".DirectionPropertyType"}]},{ln:"CompositeValueType",bti:".AbstractGMLType",ps:[{n:"valueComponent",mno:0,col:!0,ti:".ValuePropertyType"},{n:"valueComponents",ti:".ValueArrayPropertyType"}]},{ln:"TriangleType",bti:".AbstractSurfacePatchType",ps:[{n:"exterior",rq:!0,mx:!1,dom:!1,ti:".AbstractRingPropertyType",t:"er"},{n:"interpolation",an:{lp:"interpolation"},t:"a"}]},{ln:"RangeSetType",ps:[{n:"valueArray",rq:!0,col:!0,en:"ValueArray",ti:".ValueArrayType"},{n:"scalarValueList",rq:!0,col:!0,mx:!1,dom:!1,etis:[{en:"CategoryList",ti:".CodeOrNullListType"},{en:"CountList",ti:{t:"l"}},{en:"QuantityList",ti:".MeasureOrNullListType"},{en:"BooleanList",ti:{t:"l"}}],t:"ers"},{n:"dataBlock",rq:!0,en:"DataBlock",ti:".DataBlockType"},{n:"file",rq:!0,en:"File",ti:".FileType"}]},{ln:"PriorityLocationPropertyType",bti:".LocationPropertyType",ps:[{n:"priority",an:{lp:"priority"},t:"a"}]},{ln:"TriangulatedSurfaceType",bti:".SurfaceType"},{ln:"VerticalCSRefType",ps:[{n:"verticalCS",rq:!0,en:"VerticalCS",ti:".VerticalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiSurfacePropertyType",ps:[{n:"multiSurface",rq:!0,en:"MultiSurface",ti:".MultiSurfaceType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ReferenceSystemRefType",ps:[{n:"referenceSystem",rq:!0,mx:!1,dom:!1,en:"_ReferenceSystem",ti:".AbstractReferenceSystemType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeCalendarPropertyType",ps:[{n:"timeCalendar",rq:!0,en:"TimeCalendar",ti:".TimeCalendarType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CodeOrNullListType",ps:[{n:"value",ti:{t:"l"},t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"AbstractPositionalAccuracyType",ps:[{n:"measureDescription",ti:".CodeType"}]},{ln:"GeocentricCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"usesCartesianCS",rq:!0,ti:".CartesianCSRefType"},{n:"usesSphericalCS",rq:!0,ti:".SphericalCSRefType"},{n:"usesGeodeticDatum",rq:!0,ti:".GeodeticDatumRefType"}]},{ln:"VectorType",ps:[{n:"value",ti:{t:"l",bti:"Double"},t:"v"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"LinearRingType",bti:".AbstractRingType",ps:[{n:"posOrPointPropertyOrPointRep",rq:!0,mno:4,col:!0,mx:!1,dom:!1,etis:[{en:"pointRep",ti:".PointPropertyType"},{en:"pointProperty",ti:".PointPropertyType"},{en:"pos",ti:".DirectPositionType"}],t:"ers"},{n:"posList",rq:!0,ti:".DirectPositionListType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"coord",rq:!0,mno:4,col:!0,ti:".CoordType"}]},{ln:"GeometricComplexType",bti:".AbstractGeometryType",ps:[{n:"element",rq:!0,col:!0,ti:".GeometricPrimitivePropertyType"}]},{ln:"SequenceRuleType",ps:[{n:"value",t:"v"},{n:"order",an:{lp:"order"},t:"a"}]},{ln:"CompositeCurveType",bti:".AbstractCurveType",ps:[{n:"curveMember",rq:!0,col:!0,ti:".CurvePropertyType"}]},{ln:"ConeType",bti:".AbstractGriddedSurfaceType",ps:[{n:"horizontalCURVETYPE",an:{lp:"horizontalCurveType"},t:"a"},{n:"verticalCURVETYPE",an:{lp:"verticalCurveType"},t:"a"}]},{ln:"PixelInCellType",bti:".CodeType"},{ln:"VerticalDatumType",bti:".AbstractDatumType",ps:[{n:"verticalDatumType",ti:".VerticalDatumTypeType"}]},{ln:"TrackType",bti:".HistoryPropertyType"},{ln:"ContainerPropertyType",ps:[{n:"face",rq:!0,en:"Face",ti:".FaceType"},{n:"topoSolid",rq:!0,en:"TopoSolid",ti:".TopoSolidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ImageDatumRefType",ps:[{n:"imageDatum",rq:!0,en:"ImageDatum",ti:".ImageDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"PointType",bti:".AbstractGeometricPrimitiveType",ps:[{n:"pos",rq:!0,ti:".DirectPositionType"},{n:"coordinates",rq:!0,ti:".CoordinatesType"},{n:"coord",rq:!0,ti:".CoordType"}]},{ln:"AbstractGMLType",ps:[{n:"metaDataProperty",mno:0,col:!0,ti:".MetaDataPropertyType"},{n:"description",ti:".StringOrRefType"},{n:"name",mno:0,col:!0,mx:!1,dom:!1,ti:".CodeType",t:"er"},{n:"id",ti:"ID",an:{lp:"id",ns:"http://www.opengis.net/gml"},t:"a"}]},{ln:"EllipsoidBaseType",bti:".DefinitionType"},{ln:"BezierType",bti:".BSplineType"},{ln:"CoordinateReferenceSystemRefType",ps:[{n:"coordinateReferenceSystem",rq:!0,mx:!1,dom:!1,en:"_CoordinateReferenceSystem",ti:".AbstractReferenceSystemType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"GeometryPropertyType",ps:[{n:"geometry",rq:!0,mx:!1,dom:!1,en:"_Geometry",ti:".AbstractGeometryType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AngleChoiceType",ps:[{n:"angle",rq:!0,ti:".MeasureType"},{n:"dmsAngle",rq:!0,ti:".DMSAngleType"}]},{ln:"GraphStylePropertyType",ps:[{n:"graphStyle",en:"GraphStyle",ti:".GraphStyleType"},{n:"about",an:{lp:"about"},t:"a"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TopoSurfacePropertyType",ps:[{n:"topoSurface",rq:!0,en:"TopoSurface",ti:".TopoSurfaceType"}]},{ln:"TimeOrdinalEraType",bti:".DefinitionType",ps:[{n:"relatedTime",mno:0,col:!0,ti:".RelatedTimeType"},{n:"start",rq:!0,ti:".TimeNodePropertyType"},{n:"end",rq:!0,ti:".TimeNodePropertyType"},{n:"extent",ti:".TimePeriodPropertyType"},{n:"member",mno:0,col:!0,ti:".TimeOrdinalEraPropertyType"},{n:"group",ti:".ReferenceType"}]},{ln:"DirectPositionType",ps:[{n:"value",ti:{t:"l",bti:"Double"},t:"v"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"CompoundCRSType",bti:".AbstractReferenceSystemType",ps:[{n:"includesCRS",rq:!0,mno:2,col:!0,ti:".CoordinateReferenceSystemRefType"}]},{ln:"AbstractCoordinateSystemBaseType",bti:".DefinitionType"},{ln:"CategoryExtentType",bti:".CodeOrNullListType"},{ln:"RectifiedGridCoverageType",bti:".AbstractDiscreteCoverageType"},{ln:"CoordinateSystemRefType",ps:[{n:"coordinateSystem",rq:!0,mx:!1,dom:!1,en:"_CoordinateSystem",ti:".AbstractCoordinateSystemType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractFeatureType",bti:".AbstractGMLType",ps:[{n:"boundedBy",ti:".BoundingShapeType"},{n:"location",mx:!1,dom:!1,ti:".LocationPropertyType",t:"er"}]},{ln:"TemporalDatumType",bti:".TemporalDatumBaseType",ps:[{n:"origin",rq:!0,ti:"DateTime"}]},{ln:"AbstractTimeObjectType",bti:".AbstractGMLType"},{ln:"TimeTopologyComplexPropertyType",ps:[{n:"timeTopologyComplex",rq:!0,en:"TimeTopologyComplex",ti:".TimeTopologyComplexType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DirectPositionListType",ps:[{n:"value",ti:{t:"l",bti:"Double"},t:"v"},{n:"count",ti:"PositiveInteger",an:{lp:"count"},t:"a"},{n:"srsName",an:{lp:"srsName"},t:"a"},{n:"srsDimension",ti:"PositiveInteger",an:{lp:"srsDimension"},t:"a"},{n:"axisLabels",ti:{t:"l",bti:"NCName"},an:{lp:"axisLabels"},t:"a"},{n:"uomLabels",ti:{t:"l",bti:"NCName"},an:{lp:"uomLabels"},t:"a"}]},{ln:"TimeCalendarEraPropertyType",ps:[{n:"timeCalendarEra",rq:!0,en:"TimeCalendarEra",ti:".TimeCalendarEraType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ObliqueCartesianCSType",bti:".AbstractCoordinateSystemType"},{ln:"ImageDatumType",bti:".AbstractDatumType",ps:[{n:"pixelInCell",rq:!0,ti:".PixelInCellType"}]},{ln:"QuantityExtentType",bti:".MeasureOrNullListType"},{ln:"CodeListType",ps:[{n:"value",ti:{t:"l",bti:"Name"},t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"AbstractContinuousCoverageType",bti:".AbstractCoverageType",ps:[{n:"coverageFunction",ti:".CoverageFunctionType"}]},{ln:"LengthType",bti:".MeasureType"},{ln:"OperationParameterGroupType",bti:".OperationParameterGroupBaseType",ps:[{n:"groupID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"maximumOccurs",ti:"PositiveInteger"},{n:"includesParameter",rq:!0,mno:2,col:!0,ti:".AbstractGeneralOperationParameterRefType"}]},{ln:"AbstractCoordinateOperationType",bti:".AbstractCoordinateOperationBaseType",ps:[{n:"coordinateOperationID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"operationVersion"},{n:"validArea",ti:".ExtentType"},{n:"scope"},{n:"positionalAccuracy",mno:0,col:!0,mx:!1,dom:!1,en:"_positionalAccuracy",ti:".AbstractPositionalAccuracyType",t:"er"},{n:"sourceCRS",ti:".CRSRefType"},{n:"targetCRS",ti:".CRSRefType"}]},{ln:"LinearCSRefType",ps:[{n:"linearCS",rq:!0,en:"LinearCS",ti:".LinearCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"VerticalDatumRefType",ps:[{n:"verticalDatum",rq:!0,en:"VerticalDatum",ti:".VerticalDatumType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DerivedCRSRefType",ps:[{n:"derivedCRS",rq:!0,en:"DerivedCRS",ti:".DerivedCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"MultiSolidType",bti:".AbstractGeometricAggregateType",ps:[{n:"solidMember",mno:0,col:!0,ti:".SolidPropertyType"},{n:"solidMembers",ti:".SolidArrayPropertyType"}]},{ln:"TimeInstantType",bti:".AbstractTimeGeometricPrimitiveType",ps:[{n:"timePosition",rq:!0,ti:".TimePositionType"}]},{ln:"ObliqueCartesianCSRefType",ps:[{n:"obliqueCartesianCS",rq:!0,en:"ObliqueCartesianCS",ti:".ObliqueCartesianCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractRingType",bti:".AbstractGeometryType"},{ln:"SphericalCSType",bti:".AbstractCoordinateSystemType"},{ln:"RectifiedGridDomainType",bti:".DomainSetType"},{ln:"MultiSolidPropertyType",ps:[{n:"multiSolid",rq:!0,en:"MultiSolid",ti:".MultiSolidType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DefinitionType",bti:".AbstractGMLType"},{ln:"FaceType",bti:".AbstractTopoPrimitiveType",ps:[{n:"directedEdge",rq:!0,col:!0,ti:".DirectedEdgePropertyType"},{n:"directedTopoSolid",mno:0,mxo:2,col:!0,ti:".DirectedTopoSolidPropertyType"},{n:"surfaceProperty",ti:".SurfacePropertyType"}]},{ln:"CylindricalCSRefType",ps:[{n:"cylindricalCS",rq:!0,en:"CylindricalCS",ti:".CylindricalCSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractReferenceSystemType",bti:".AbstractReferenceSystemBaseType",ps:[{n:"srsID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"validArea",ti:".ExtentType"},{n:"scope"}]},{ln:"SingleOperationRefType",ps:[{n:"singleOperation",rq:!0,mx:!1,dom:!1,en:"_SingleOperation",ti:".AbstractCoordinateOperationType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"TimeTopologyPrimitivePropertyType",ps:[{n:"timeTopologyPrimitive",rq:!0,mx:!1,dom:!1,en:"_TimeTopologyPrimitive",ti:".AbstractTimeTopologyPrimitiveType",t:"er"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"EngineeringCRSRefType",ps:[{n:"engineeringCRS",rq:!0,en:"EngineeringCRS",ti:".EngineeringCRSType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ScaleType",bti:".MeasureType"},{ln:"TimeCalendarEraType",bti:".DefinitionType",ps:[{n:"referenceEvent",rq:!0,ti:".StringOrRefType"},{n:"referenceDate",ti:"Date"},{n:"julianReference",rq:!0,ti:"Decimal"},{n:"epochOfUse",rq:!0,ti:".TimePeriodPropertyType"}]},{ln:"CoordinateSystemAxisType",bti:".CoordinateSystemAxisBaseType",ps:[{n:"axisID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"axisAbbrev",rq:!0,ti:".CodeType"},{n:"axisDirection",rq:!0,ti:".CodeType"},{n:"uom",rq:!0,an:{lp:"uom",ns:"http://www.opengis.net/gml"},t:"a"}]},{ln:"EllipsoidType",bti:".EllipsoidBaseType",ps:[{n:"ellipsoidID",mno:0,col:!0,ti:".IdentifierType"},{n:"remarks",ti:".StringOrRefType"},{n:"semiMajorAxis",rq:!0,ti:".MeasureType"},{n:"secondDefiningParameter",rq:!0,ti:".SecondDefiningParameterType"}]},{ln:"TopoComplexMemberType",ps:[{n:"topoComplex",en:"TopoComplex",ti:".TopoComplexType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CoverageFunctionType",ps:[{n:"mappingRule",rq:!0,en:"MappingRule",ti:".StringOrRefType"},{n:"gridFunction",rq:!0,mx:!1,dom:!1,en:"GridFunction",ti:".GridFunctionType",t:"er"}]},{ln:"TimeNodePropertyType",ps:[{n:"timeNode",rq:!0,en:"TimeNode",ti:".TimeNodeType"},{n:"remoteSchema",an:{lp:"remoteSchema",ns:"http://www.opengis.net/gml"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AbstractRingPropertyType",ps:[{n:"ring",rq:!0,mx:!1,dom:!1,en:"_Ring",ti:".AbstractRingType",t:"er"}]},{ln:"LinearRingPropertyType",ps:[{n:"linearRing",rq:!0,en:"LinearRing",ti:".LinearRingType"}]},{ln:"DirectionVectorType",ps:[{n:"vector",rq:!0,ti:".VectorType"},{n:"horizontalAngle",rq:!0,ti:".AngleType"},{n:"verticalAngle",rq:!0,ti:".AngleType"}]},{ln:"TimeTopologyComplexType",bti:".AbstractTimeComplexType",ps:[{n:"primitive",rq:!0,col:!0,ti:".TimeTopologyPrimitivePropertyType"}]},{t:"enum",ln:"SignType",vs:["-","+"]},{t:"enum",ln:"CompassPointEnumeration",vs:["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"]},{t:"enum",ln:"AesheticCriteriaType",vs:["MIN_CROSSINGS","MIN_AREA","MIN_BENDS","MAX_BENDS","UNIFORM_BENDS","MIN_SLOPES","MIN_EDGE_LENGTH","MAX_EDGE_LENGTH","UNIFORM_EDGE_LENGTH","MAX_ANGULAR_RESOLUTION","MIN_ASPECT_RATIO","MAX_SYMMETRIES"]},{t:"enum",ln:"IncrementOrder",vs:["+x+y","+y+x","+x-y","-x-y"]},{t:"enum",ln:"KnotTypesType",vs:["uniform","quasiUniform","piecewiseBezier"]},{t:"enum",ln:"TimeIndeterminateValueType",vs:["after","before","now","unknown"]},{t:"enum",ln:"CurveInterpolationType",vs:["linear","geodesic","circularArc3Points","circularArc2PointWithBulge","circularArcCenterPointWithRadius","elliptical","clothoid","conic","polynomialSpline","cubicSpline","rationalSpline"]},{t:"enum",ln:"GraphTypeType",vs:["TREE","BICONNECTED"]},{t:"enum",ln:"SuccessionType",vs:["substitution","division","fusion","initiation"]},{t:"enum",ln:"SurfaceInterpolationType",vs:["none","planar","spherical","elliptical","conic","tin","parametricCurve","polynomialSpline","rationalSpline","triangulatedSpline"]},{t:"enum",ln:"QueryGrammarEnumeration",vs:["xpath","xquery","other"]},{t:"enum",ln:"DrawingTypeType",vs:["POLYLINE","ORTHOGONAL"]},{t:"enum",ln:"SequenceRuleNames",vs:["Linear","Boustrophedonic","Cantor-diagonal","Spiral","Morton","Hilbert"]},{t:"enum",ln:"SymbolTypeEnumeration",vs:["svg","xpath","other"]},{t:"enum",ln:"LineTypeType",vs:["STRAIGHT","BENT"]},{t:"enum",ln:"FileValueModelType",vs:["Record Interleaved"]}],eis:[{en:"topoPointProperty",ti:".TopoPointPropertyType"},{en:"CartesianCS",ti:".CartesianCSType",sh:"_CoordinateSystem"},{en:"solidMembers",ti:".SolidArrayPropertyType"},{en:"sourceCRS",ti:".CRSRefType"},{en:"version"},{en:"DerivedCRS",ti:".DerivedCRSType",sh:"_GeneralDerivedCRS"},{en:"Face",ti:".FaceType",sh:"_TopoPrimitive"},{en:"boundedBy",ti:".BoundingShapeType"},{en:"_TopoPrimitive",ti:".AbstractTopoPrimitiveType",sh:"_Topology"},{en:"usesEllipsoidalCS",ti:".EllipsoidalCSRefType"},{en:"usesTemporalDatum",ti:".TemporalDatumRefType"},{en:"srsID",ti:".IdentifierType"},{en:"multiCurveProperty",ti:".MultiCurvePropertyType"},{en:"RectifiedGrid",ti:".RectifiedGridType",sh:"_ImplicitGeometry"},{en:"degrees",ti:".DegreesType"},{en:"obliqueCartesianCSRef",ti:".ObliqueCartesianCSRefType"},{en:"usesEngineeringDatum",ti:".EngineeringDatumRefType"},{en:"domainSet",ti:".DomainSetType"},{en:"ConcatenatedOperation",ti:".ConcatenatedOperationType",sh:"_CoordinateOperation"},{en:"operationMethodRef",ti:".OperationMethodRefType"},{en:"sourceDimensions",ti:"PositiveInteger"},{en:"GraphStyle",ti:".GraphStyleType",sh:"_GML"},{en:"TimePeriod",ti:".TimePeriodType",sh:"_TimeGeometricPrimitive"},{en:"doubleOrNullTupleList",ti:{t:"l"}},{en:"surfaceMember",ti:".SurfacePropertyType"},{en:"Cone",ti:".ConeType",sh:"_GriddedSurface"},{en:"polygonProperty",ti:".PolygonPropertyType"},{en:"pointMember",ti:".PointPropertyType"},{en:"integerValue",ti:"PositiveInteger"},{en:"_Ring",ti:".AbstractRingType",sh:"_Geometry"},{en:"CompositeValue",ti:".CompositeValueType"},{en:"temporalDatumRef",ti:".TemporalDatumRefType"},{en:"semiMinorAxis",ti:".MeasureType"},{en:"geometryMembers",ti:".GeometryArrayPropertyType"},{en:"coordinateSystemAxisRef",ti:".CoordinateSystemAxisRefType"},{en:"polarCSRef",ti:".PolarCSRefType"},{en:"_ParametricCurveSurface",ti:".AbstractParametricCurveSurfaceType",sh:"_SurfacePatch"},{en:"TimeCalendar",ti:".TimeCalendarType",sh:"_TimeReferenceSystem"},{en:"Ring",ti:".RingType",sh:"_Ring"},{en:"verticalDatumRef",ti:".VerticalDatumRefType"},{en:"temporalExtent",ti:".TimePeriodType"},{en:"relativeInternalPositionalAccuracy",ti:".RelativeInternalPositionalAccuracyType",sh:"_positionalAccuracy"},{en:"Quantity",ti:".MeasureType"},{en:"Sphere",ti:".SphereType",sh:"_GriddedSurface"},{en:"multiEdgeOf",ti:".MultiCurvePropertyType"},{en:"_GeometricAggregate",ti:".AbstractGeometricAggregateType",sh:"_Geometry"},{en:"symbol",ti:".SymbolType"},{en:"graphStyle",ti:".GraphStylePropertyType"},{en:"cylindricalCSRef",ti:".CylindricalCSRefType"},{en:"geographicCRSRef",ti:".GeographicCRSRefType"},{en:"parameterValueGroup",ti:".ParameterValueGroupType",sh:"_generalParameterValue"},{en:"coordinateSystemRef",ti:".CoordinateSystemRefType"},{en:"_strictAssociation",ti:".AssociationType"},{en:"DefinitionCollection",ti:".DictionaryType",sh:"Definition"},{en:"GeometricComplex",ti:".GeometricComplexType",sh:"_Geometry"},{en:"FeatureCollection",ti:".FeatureCollectionType",sh:"_Feature"},{en:"Clothoid",ti:".ClothoidType",sh:"_CurveSegment"},{en:"methodFormula",ti:".CodeType"},{en:"Edge",ti:".EdgeType",sh:"_TopoPrimitive"},{en:"polygonPatches",ti:".PolygonPatchArrayPropertyType",sh:"patches"},{en:"meridianName",ti:".CodeType",sh:"name"},{en:"CategoryList",ti:".CodeOrNullListType"},{en:"integerValueList",ti:{t:"l",bti:"Integer"}},{en:"usesParameter",ti:".AbstractGeneralOperationParameterRefType"},{en:"track",ti:".TrackType",sh:"history"},{en:"ImageCRS",ti:".ImageCRSType",sh:"_CoordinateReferenceSystem"},{en:"temporalCRSRef",ti:".TemporalCRSRefType"},{en:"dmsAngle",ti:".DMSAngleType"},{en:"columnIndex",ti:"PositiveInteger"},{en:"target",ti:".TargetPropertyType"},{en:"DerivedUnit",ti:".DerivedUnitType",sh:"UnitDefinition"},{en:"outerBoundaryIs",ti:".AbstractRingPropertyType",sh:"exterior"},{en:"ProjectedCRS",ti:".ProjectedCRSType",sh:"_GeneralDerivedCRS"},{en:"duration",ti:"Duration"},{en:"indirectEntry",ti:".IndirectEntryType"},{en:"pointArrayProperty",ti:".PointArrayPropertyType"},{en:"GridCoverage",ti:".GridCoverageType",sh:"_DiscreteCoverage"},{en:"solidMember",ti:".SolidPropertyType"},{en:"MultiPointCoverage",ti:".MultiPointCoverageType",sh:"_DiscreteCoverage"},{en:"verticalCSRef",ti:".VerticalCSRefType"},{en:"featureProperty",ti:".FeaturePropertyType"},{en:"cartesianCSRef",ti:".CartesianCSRefType"},{en:"concatenatedOperationRef",ti:".ConcatenatedOperationRefType"},{en:"Polygon",ti:".PolygonType",sh:"_Surface"},{en:"Style",ti:".StyleType",sh:"_Style"},{en:"TopoSolid",ti:".TopoSolidType",sh:"_TopoPrimitive"},{en:"engineeringCRSRef",ti:".EngineeringCRSRefType"},{en:"segments",ti:".CurveSegmentArrayPropertyType"},{en:"derivedCRSRef",ti:".DerivedCRSRefType"},{en:"BaseUnit",ti:".BaseUnitType",sh:"UnitDefinition"},{en:"DirectedObservationAtDistance",ti:".DirectedObservationAtDistanceType",sh:"DirectedObservation"},{en:"LineStringSegment",ti:".LineStringSegmentType",sh:"_CurveSegment"},{en:"coord",ti:".CoordType"},{en:"CoordinateSystemAxis",ti:".CoordinateSystemAxisType",sh:"Definition"},{en:"MultiSolidCoverage",ti:".MultiSolidCoverageType",sh:"_DiscreteCoverage"},{en:"dataSource",ti:".StringOrRefType"},{en:"subComplex",ti:".TopoComplexMemberType"},{en:"featureMember",ti:".FeaturePropertyType"},{en:"TopoVolume",ti:".TopoVolumeType"},{en:"rectifiedGridDomain",ti:".RectifiedGridDomainType",sh:"domainSet"},{en:"rowIndex",ti:"PositiveInteger"},{en:"LabelStyle",ti:".LabelStyleType",sh:"_GML"},{en:"TimeInstant",ti:".TimeInstantType",sh:"_TimeGeometricPrimitive"},{en:"trianglePatches",ti:".TrianglePatchArrayPropertyType",sh:"patches"},{en:"_SingleOperation",ti:".AbstractCoordinateOperationType",sh:"_CoordinateOperation"},{en:"IndexMap",ti:".IndexMapType",sh:"GridFunction"},{en:"OperationMethod",ti:".OperationMethodType",sh:"Definition"},{en:"ellipsoidalCSRef",ti:".EllipsoidalCSRefType"},{en:"directedNode",ti:".DirectedNodePropertyType"},{en:"TopologyStyle",ti:".TopologyStyleType",sh:"_GML"},{en:"generalConversionRef",ti:".GeneralConversionRefType"},{en:"crsRef",ti:".CRSRefType"},{en:"CountList",ti:{t:"l"}},{en:"dictionaryEntry",ti:".DictionaryEntryType"},{en:"description",ti:".StringOrRefType"},{en:"GeocentricCRS",ti:".GeocentricCRSType",sh:"_CoordinateReferenceSystem"},{en:"TemporalDatum",ti:".TemporalDatumType",sh:"_Datum"},{en:"position",ti:".PointPropertyType"},{en:"_GeometricPrimitive",ti:".AbstractGeometricPrimitiveType",sh:"_Geometry"},{en:"OrientableCurve",ti:".OrientableCurveType",sh:"_Curve"},{en:"ArcString",ti:".ArcStringType",sh:"_CurveSegment"},{en:"pixelInCell",ti:".PixelInCellType"},{en:"patches",ti:".SurfacePatchArrayPropertyType"},{en:"_Solid",ti:".AbstractSolidType",sh:"_GeometricPrimitive"},{en:"featureMembers",ti:".FeatureArrayPropertyType"},{en:"verticalDatumType",ti:".VerticalDatumTypeType"},{en:"_SurfacePatch",ti:".AbstractSurfacePatchType"},{en:"directedFace",ti:".DirectedFacePropertyType"},{en:"File",ti:".FileType"},{en:"includesValue",ti:".AbstractGeneralParameterValueType",sh:"_generalParameterValue"},{en:"temporalCSRef",ti:".TemporalCSRefType"},{en:"MultiPolygon",ti:".MultiPolygonType",sh:"_GeometricAggregate"},{en:"result",ti:".MeasureType"},{en:"Count",ti:"Integer"},{en:"RectifiedGridCoverage",ti:".RectifiedGridCoverageType",sh:"_DiscreteCoverage"},{en:"_Geometry",ti:".AbstractGeometryType",sh:"_GML"},{en:"minimumOccurs",ti:"NonNegativeInteger"},{en:"stringValue"},{en:"multiPosition",ti:".MultiPointPropertyType"},{en:"datumID",ti:".IdentifierType"},{en:"decimalMinutes",ti:"Decimal"},{en:"MultiSurface",ti:".MultiSurfaceType",sh:"_GeometricAggregate"},{en:"defaultStyle",ti:".DefaultStylePropertyType"},{en:"Definition",ti:".DefinitionType",sh:"_GML"},{en:"engineeringDatumRef",ti:".EngineeringDatumRefType"},{en:"CountExtent",ti:{t:"l"}},{en:"operationRef",ti:".OperationRefType"},{en:"PolyhedralSurface",ti:".PolyhedralSurfaceType",sh:"Surface"},{en:"projectedCRSRef",ti:".ProjectedCRSRefType"},{en:"methodID",ti:".IdentifierType"},{en:"_Datum",ti:".AbstractDatumType",sh:"Definition"},{en:"innerBoundaryIs",ti:".AbstractRingPropertyType",sh:"interior"},{en:"inverseFlattening",ti:".MeasureType"},{en:"operationParameterGroupRef",ti:".OperationParameterRefType"},{en:"isolated",ti:".IsolatedPropertyType"},{en:"FeatureStyle",ti:".FeatureStyleType",sh:"_GML"},{en:"TemporalCS",ti:".TemporalCSType",sh:"_CoordinateSystem"},{en:"gridDomain",ti:".GridDomainType",sh:"domainSet"},{en:"derivedCRSType",ti:".DerivedCRSTypeType"},{en:"Node",ti:".NodeType",sh:"_TopoPrimitive"},{en:"definitionMember",ti:".DictionaryEntryType",sh:"dictionaryEntry"},{en:"coordinateOperationName",ti:".CodeType",sh:"name"},{en:"TopoComplex",ti:".TopoComplexType",sh:"_Topology"},{en:"lineStringMember",ti:".LineStringPropertyType"},{en:"DefinitionProxy",ti:".DefinitionProxyType",sh:"Definition"},{en:"modifiedCoordinate",ti:"PositiveInteger"},{en:"groupName",ti:".CodeType",sh:"name"},{en:"EngineeringCRS",ti:".EngineeringCRSType",sh:"_CoordinateReferenceSystem"},{en:"groupID",ti:".IdentifierType"},{en:"_GeneralDerivedCRS",ti:".AbstractGeneralDerivedCRSType",sh:"_CoordinateReferenceSystem"},{en:"CylindricalCS",ti:".CylindricalCSType",sh:"_CoordinateSystem"},{en:"directedEdge",ti:".DirectedEdgePropertyType"},{en:"multiCurveDomain",ti:".MultiCurveDomainType",sh:"domainSet"},{en:"topoPrimitiveMembers",ti:".TopoPrimitiveArrayAssociationType"},{en:"OperationParameterGroup",ti:".OperationParameterGroupType",sh:"_GeneralOperationParameter"},{en:"GeographicCRS",ti:".GeographicCRSType",sh:"_CoordinateReferenceSystem"},{en:"coordinates",ti:".CoordinatesType"},{en:"QuantityExtent",ti:".QuantityExtentType"},{en:"pointMembers",ti:".PointArrayPropertyType"},{en:"LineString",ti:".LineStringType",sh:"_Curve"},{en:"LocationKeyWord",ti:".CodeType"},{en:"_TimePrimitive",ti:".AbstractTimePrimitiveType",sh:"_TimeObject"},{en:"MultiCurve",ti:".MultiCurveType",sh:"_GeometricAggregate"},{en:"featureStyle",ti:".FeatureStylePropertyType"},{en:"booleanValue",ti:"Boolean"},{en:"_FeatureCollection",ti:".AbstractFeatureCollectionType",sh:"_Feature"},{en:"Solid",ti:".SolidType",sh:"_Solid"},{en:"Geodesic",ti:".GeodesicType",sh:"GeodesicString"},{en:"metaDataProperty",ti:".MetaDataPropertyType"},{en:"Bag",ti:".BagType",sh:"_GML"},{en:"multiCoverage",ti:".MultiSurfacePropertyType"},{en:"usesValue",ti:".ParameterValueType"},{en:"tupleList",ti:".CoordinatesType"},{en:"PassThroughOperation",ti:".PassThroughOperationType",sh:"_SingleOperation"},{en:"LabelExpression",sc:".LabelType"},{en:"multiPointProperty",ti:".MultiPointPropertyType"},{en:"parameterID",ti:".IdentifierType"},{en:"superComplex",ti:".TopoComplexMemberType"},{en:"Surface",ti:".SurfaceType",sh:"_Surface"},{en:"EngineeringDatum",ti:".EngineeringDatumType",sh:"_Datum"},{en:"_ContinuousCoverage",ti:".AbstractContinuousCoverageType",sh:"_Coverage"},{en:"greenwichLongitude",ti:".AngleChoiceType"},{en:"sphericalCSRef",ti:".SphericalCSRefType"},{en:"OffsetCurve",ti:".OffsetCurveType",sh:"_CurveSegment"},{en:"EllipsoidalCS",ti:".EllipsoidalCSType",sh:"_CoordinateSystem"},{en:"VerticalDatum",ti:".VerticalDatumType",sh:"_Datum"},{en:"baseCRS",ti:".CoordinateReferenceSystemRefType"},{en:"SphericalCS",ti:".SphericalCSType",sh:"_CoordinateSystem"},{en:"boundingBox",ti:".EnvelopeType"},{en:"definedByConversion",ti:".GeneralConversionRefType"},{en:"_Surface",ti:".AbstractSurfaceType",sh:"_GeometricPrimitive"},{en:"_generalParameterValue",ti:".AbstractGeneralParameterValueType"},{en:"DirectionVector",ti:".DirectionVectorType"},{en:"_association",ti:".AssociationType"},{en:"_GML",ti:".AbstractGMLType",sh:"_Object"},{en:"multiExtentOf",ti:".MultiSurfacePropertyType"},{en:"datumRef",ti:".DatumRefType"},{en:"passThroughOperationRef",ti:".PassThroughOperationRefType"},{en:"referenceSystemRef",ti:".ReferenceSystemRefType"},{en:"_GeneralOperationParameter",ti:".AbstractGeneralOperationParameterType",sh:"Definition"},{en:"_CurveSegment",ti:".AbstractCurveSegmentType"},{en:"geocentricCRSRef",ti:".GeocentricCRSRefType"},{en:"geometryMember",ti:".GeometryPropertyType"},{en:"surfaceMembers",ti:".SurfaceArrayPropertyType"},{en:"TimeOrdinalEra",ti:".TimeOrdinalEraType"},{en:"_reference",ti:".ReferenceType"},{en:"ellipsoidName",ti:".CodeType",sh:"name"},{en:"_TimeComplex",ti:".AbstractTimeComplexType",sh:"_TimeObject"},{en:"boundingPolygon",ti:".PolygonType"},{en:"subject",ti:".TargetPropertyType",sh:"target"},{en:"Rectangle",ti:".RectangleType",sh:"_SurfacePatch"},{en:"Cylinder",ti:".CylinderType",sh:"_GriddedSurface"},{en:"multiSurfaceProperty",ti:".MultiSurfacePropertyType"},{en:"_Style",ti:".AbstractStyleType",sh:"_GML"},{en:"generalTransformationRef",ti:".GeneralTransformationRefType"},{en:"CompositeSurface",ti:".CompositeSurfaceType",sh:"_Surface"},{en:"validArea",ti:".ExtentType"},{en:"MultiGeometry",ti:".MultiGeometryType",sh:"_GeometricAggregate"},{en:"timeInterval",ti:".TimeIntervalLengthType"},{en:"maximalComplex",ti:".TopoComplexMemberType"},{en:"Point",ti:".PointType",sh:"_GeometricPrimitive"},{en:"VerticalCS",ti:".VerticalCSType",sh:"_CoordinateSystem"},{en:"usesSingleOperation",ti:".SingleOperationRefType"},{en:"catalogSymbol",ti:".CodeType"},{en:"transformationRef",ti:".TransformationRefType"},{en:"Envelope",ti:".EnvelopeType"},{en:"CompoundCRS",ti:".CompoundCRSType",sh:"_CRS"},{en:"value",ti:".MeasureType"},{en:"Boolean",ti:"Boolean"},{en:"primeMeridianRef",ti:".PrimeMeridianRefType"},{en:"includesElement",ti:".CovarianceElementType"},{en:"Ellipsoid",ti:".EllipsoidType",sh:"Definition"},{en:"topoSurfaceProperty",ti:".TopoSurfacePropertyType"},{en:"surfaceProperty",ti:".SurfacePropertyType"},{en:"pos",ti:".DirectPositionType"},{en:"PrimeMeridian",ti:".PrimeMeridianType",sh:"Definition"},{en:"_Curve",ti:".AbstractCurveType",sh:"_GeometricPrimitive"},{en:"definitionRef",ti:".ReferenceType"},{en:"axisAbbrev",ti:".CodeType"},{en:"LinearCS",ti:".LinearCSType",sh:"_CoordinateSystem"},{en:"TimeClock",ti:".TimeClockType",sh:"_TimeReferenceSystem"},{en:"multiCenterLineOf",ti:".MultiCurvePropertyType"},{en:"UserDefinedCS",ti:".UserDefinedCSType",sh:"_CoordinateSystem"},{en:"TimeNode",ti:".TimeNodeType",sh:"_TimeTopologyPrimitive"},{en:"_TimeSlice",ti:".AbstractTimeSliceType",sh:"_GML"},{en:"valueList",ti:".MeasureListType"},{en:"targetCRS",ti:".CRSRefType"},{en:"isSphere"},{en:"direction",ti:".DirectionPropertyType"},{en:"geometryStyle",ti:".GeometryStylePropertyType"},{en:"rangeParameters",ti:".RangeParametersType"},{en:"Bezier",ti:".BezierType",sh:"BSpline"},{en:"includesCRS",ti:".CoordinateReferenceSystemRefType"},{en:"linearCSRef",ti:".LinearCSRefType"},{en:"compoundCRSRef",ti:".CompoundCRSRefType"},{en:"CompositeSolid",ti:".CompositeSolidType",sh:"_Solid"},{en:"usesTemporalCS",ti:".TemporalCSRefType"},{en:"csID",ti:".IdentifierType"},{en:"usesSphericalCS",ti:".SphericalCSRefType"},{en:"geodeticDatumRef",ti:".GeodeticDatumRefType"},{en:"multiSolidDomain",ti:".MultiSolidDomainType",sh:"domainSet"},{en:"directedTopoSolid",ti:".DirectedTopoSolidPropertyType"},{en:"userDefinedCSRef",ti:".UserDefinedCSRefType"},{en:"measure",ti:".MeasureType"},{en:"origin",ti:"DateTime"},{en:"dmsAngleValue",ti:".DMSAngleType"},{en:"MultiSolid",ti:".MultiSolidType",sh:"_GeometricAggregate"},{en:"Array",ti:".ArrayType",sh:"_GML"},{en:"parameterValue",ti:".ParameterValueType",sh:"_generalParameterValue"},{en:"maximumOccurs",ti:"PositiveInteger"},{en:"CircleByCenterPoint",ti:".CircleByCenterPointType",sh:"ArcByCenterPoint"},{en:"roughConversionToPreferredUnit",ti:".ConversionToPreferredUnitType"},{en:"remarks",ti:".StringOrRefType"},{en:"Null",ti:{t:"l"}},{en:"Transformation",ti:".TransformationType",sh:"_GeneralTransformation"},{en:"PolygonPatch",ti:".PolygonPatchType",sh:"_SurfacePatch"},{en:"topologyStyle",ti:".TopologyStylePropertyType"},{en:"ImageDatum",ti:".ImageDatumType",sh:"_Datum"},{en:"CategoryExtent",ti:".CategoryExtentType"},{en:"coordinateReferenceSystemRef",ti:".CoordinateReferenceSystemRefType"},{en:"multiLocation",ti:".MultiPointPropertyType"},{en:"TimeCoordinateSystem",ti:".TimeCoordinateSystemType",sh:"_TimeReferenceSystem"},{en:"interior",ti:".AbstractRingPropertyType"},{en:"MovingObjectStatus",ti:".MovingObjectStatusType",sh:"_TimeSlice"},{en:"secondDefiningParameter",ti:".SecondDefiningParameterType"},{en:"polygonMember",ti:".PolygonPropertyType"},{en:"PolarCS",ti:".PolarCSType",sh:"_CoordinateSystem"},{en:"usesEllipsoid",ti:".EllipsoidRefType"},{en:"_Operation",ti:".AbstractCoordinateOperationType",sh:"_SingleOperation"},{en:"multiPointDomain",ti:".MultiPointDomainType",sh:"domainSet"},{en:"timePosition",ti:".TimePositionType"},{en:"coordinateOperationRef",ti:".CoordinateOperationRefType"},{en:"usesCartesianCS",ti:".CartesianCSRefType"},{en:"absoluteExternalPositionalAccuracy",ti:".AbsoluteExternalPositionalAccuracyType",sh:"_positionalAccuracy"},{en:"coverageFunction",ti:".CoverageFunctionType"},{en:"usesVerticalCS",ti:".VerticalCSRefType"},{en:"operationParameterRef",ti:".OperationParameterRefType"},{en:"meridianID",ti:".IdentifierType"},{en:"ArcStringByBulge",ti:".ArcStringByBulgeType",sh:"_CurveSegment"},{en:"LocationString",ti:".StringOrRefType"},{en:"MultiSurfaceCoverage",ti:".MultiSurfaceCoverageType",sh:"_DiscreteCoverage"},{en:"Grid",ti:".GridType",sh:"_ImplicitGeometry"},{en:"CompassPoint"},{en:"location",ti:".LocationPropertyType"},{en:"imageDatumRef",ti:".ImageDatumRefType"},{en:"labelStyle",ti:".LabelStylePropertyType"},{en:"targetDimensions",ti:"PositiveInteger"},{en:"OrientableSurface",ti:".OrientableSurfaceType",sh:"_Surface"},{en:"CubicSpline",ti:".CubicSplineType",sh:"_CurveSegment"},{en:"baseSurface",ti:".SurfacePropertyType"},{en:"Category",ti:".CodeType"},{en:"MappingRule",ti:".StringOrRefType"},{en:"DataBlock",ti:".DataBlockType"},{en:"verticalExtent",ti:".EnvelopeType"},{en:"BooleanList",ti:{t:"l"}},{en:"usesMethod",ti:".OperationMethodRefType"},{en:"_TimeObject",ti:".AbstractTimeObjectType",sh:"_GML"},{en:"methodName",ti:".CodeType",sh:"name"},{en:"valueComponents",ti:".ValueArrayPropertyType"},{en:"members",ti:".ArrayAssociationType"},{en:"container",ti:".ContainerPropertyType"},{en:"lineStringProperty",ti:".LineStringPropertyType"},{en:"vector",ti:".VectorType"},{en:"singleOperationRef",ti:".SingleOperationRefType"},{en:"TimeTopologyComplex",ti:".TimeTopologyComplexType",sh:"_TimeComplex"},{en:"curveArrayProperty",ti:".CurveArrayPropertyType"},{en:"axisID",ti:".IdentifierType"},{en:"usesAxis",ti:".CoordinateSystemAxisRefType"},{en:"name",ti:".CodeType"},{en:"CompositeCurve",ti:".CompositeCurveType",sh:"_Curve"},{en:"solidProperty",ti:".SolidPropertyType"},{en:"valueProperty",ti:".ValuePropertyType"},{en:"GeodesicString",ti:".GeodesicStringType",sh:"_CurveSegment"},{en:"usesVerticalDatum",ti:".VerticalDatumRefType"},{en:"_GriddedSurface",ti:".AbstractGriddedSurfaceType",sh:"_ParametricCurveSurface"},{en:"resultOf",ti:".AssociationType"},{en:"_positionalAccuracy",ti:".AbstractPositionalAccuracyType"},{en:"_Feature",ti:".AbstractFeatureType",sh:"_GML"},{en:"ArcByCenterPoint",ti:".ArcByCenterPointType",sh:"_CurveSegment"},{en:"_CoordinateReferenceSystem",ti:".AbstractReferenceSystemType",sh:"_CRS"},{en:"covariance",ti:"Double"},{en:"multiSurfaceDomain",ti:".MultiSurfaceDomainType",sh:"domainSet"},{en:"usesCS",ti:".CoordinateSystemRefType"},{en:"ArcByBulge",ti:".ArcByBulgeType",sh:"ArcStringByBulge"},{en:"angle",ti:".MeasureType"},{en:"covarianceMatrix",ti:".CovarianceMatrixType",sh:"_positionalAccuracy"},{en:"_Object",ti:"AnyType"},{en:"EnvelopeWithTimePeriod",ti:".EnvelopeWithTimePeriodType",sh:"Envelope"},{en:"ObliqueCartesianCS",ti:".ObliqueCartesianCSType",sh:"_CoordinateSystem"},{en:"Observation",ti:".ObservationType",sh:"_Feature"},{en:"status",ti:".StringOrRefType"},{en:"centerLineOf",ti:".CurvePropertyType"},{en:"topoPrimitiveMember",ti:".TopoPrimitiveMemberType"},{en:"_MetaData",ti:".AbstractMetaDataType",sh:"_Object"},{en:"TimeOrdinalReferenceSystem",ti:".TimeOrdinalReferenceSystemType",sh:"_TimeReferenceSystem"},{en:"srsName",ti:".CodeType",sh:"name"},{en:"unitOfMeasure",ti:".UnitOfMeasureType"},{en:"VerticalCRS",ti:".VerticalCRSType",sh:"_CoordinateReferenceSystem"},{en:"centerOf",ti:".PointPropertyType"},{en:"_GeneralTransformation",ti:".AbstractGeneralTransformationType",sh:"_Operation"},{en:"multiSolidProperty",ti:".MultiSolidPropertyType"},{en:"_CoordinateSystem",ti:".AbstractCoordinateSystemType",sh:"Definition"},{en:"solidArrayProperty",ti:".SolidArrayPropertyType"},{en:"_Topology",ti:".AbstractTopologyType",sh:"_GML"},{en:"seconds",ti:"Decimal"},{en:"imageCRSRef",ti:".ImageCRSRefType"},{en:"Arc",ti:".ArcType",sh:"ArcString"},{en:"baseCurve",ti:".CurvePropertyType"},{en:"Triangle",ti:".TriangleType",sh:"_SurfacePatch"},{en:"valueFile"},{en:"TopoSurface",ti:".TopoSurfaceType"},{en:"TopoCurve",ti:".TopoCurveType"},{en:"csName",ti:".CodeType",sh:"name"},{en:"usesImageDatum",ti:".ImageDatumRefType"},{en:"derivationUnitTerm",ti:".DerivationUnitTermType"},{en:"usesObliqueCartesianCS",ti:".ObliqueCartesianCSRefType"},{en:"curveMembers",ti:".CurveArrayPropertyType"},{en:"curveProperty",ti:".CurvePropertyType"},{en:"QuantityList",ti:".MeasureOrNullListType"},{en:"Circle",ti:".CircleType",sh:"Arc"},{en:"anchorPoint",ti:".CodeType"},{en:"Curve",ti:".CurveType",sh:"_Curve"},{en:"MultiCurveCoverage",ti:".MultiCurveCoverageType",sh:"_DiscreteCoverage"},{en:"TimeEdge",ti:".TimeEdgeType",sh:"_TimeTopologyPrimitive"},{en:"MultiPoint",ti:".MultiPointType",sh:"_GeometricAggregate"},{en:"GridFunction",ti:".GridFunctionType"},{en:"semiMajorAxis",ti:".MeasureType"},{en:"history",ti:".HistoryPropertyType"},{en:"valueComponent",ti:".ValuePropertyType"},{en:"topoCurveProperty",ti:".TopoCurvePropertyType"},{en:"DirectedObservation",ti:".DirectedObservationType",sh:"Observation"},{en:"OperationParameter",ti:".OperationParameterType",sh:"_GeneralOperationParameter"},{en:"UnitDefinition",ti:".UnitDefinitionType",sh:"Definition"},{en:"pointRep",ti:".PointPropertyType"},{en:"_TimeReferenceSystem",ti:".AbstractTimeReferenceSystemType",sh:"Definition"},{en:"quantityType",ti:".StringOrRefType"},{en:"valueOfParameter",ti:".OperationParameterRefType"},{en:"_CoordinateOperation",ti:".AbstractCoordinateOperationType",sh:"Definition"},{en:"GeodeticDatum",ti:".GeodeticDatumType",sh:"_Datum"},{en:"_CRS",ti:".AbstractReferenceSystemType",sh:"_ReferenceSystem"},{en:"usesOperation",ti:".OperationRefType"},{en:"minutes",ti:"NonNegativeInteger"},{en:"datumName",ti:".CodeType",sh:"name"},{en:"LinearRing",ti:".LinearRingType",sh:"_Ring"},{en:"abstractGeneralOperationParameterRef",ti:".AbstractGeneralOperationParameterRefType"},{en:"usesGeodeticDatum",ti:".GeodeticDatumRefType"},{en:"edgeOf",ti:".CurvePropertyType"},{en:"using",ti:".FeaturePropertyType"},{en:"GeometryStyle",ti:".GeometryStyleType",sh:"_GML"},{en:"curveMember",ti:".CurvePropertyType"},{en:"conversionToPreferredUnit",ti:".ConversionToPreferredUnitType"},{en:"_DiscreteCoverage",ti:".AbstractDiscreteCoverageType",sh:"_Coverage"},{en:"posList",ti:".DirectPositionListType"},{en:"_TimeGeometricPrimitive",ti:".AbstractTimeGeometricPrimitiveType",sh:"_TimePrimitive"},{en:"conversionRef",ti:".ConversionRefType"},{en:"surfaceArrayProperty",ti:".SurfaceArrayPropertyType"},{en:"rangeSet",ti:".RangeSetType"},{en:"valuesOfGroup",ti:".OperationParameterGroupRefType"},{en:"axisDirection",ti:".CodeType"},{en:"coordinateOperationID",ti:".IdentifierType"},{en:"TemporalCRS",ti:".TemporalCRSType",sh:"_CoordinateReferenceSystem"},{en:"_GeneralConversion",ti:".AbstractGeneralConversionType",sh:"_Operation"},{en:"multiCenterOf",ti:".MultiPointPropertyType"},{en:"includesParameter",ti:".AbstractGeneralOperationParameterRefType"},{en:"BSpline",ti:".BSplineType",sh:"_CurveSegment"},{en:"TimeCalendarEra",ti:".TimeCalendarEraType",sh:"Definition"},{en:"priorityLocation",ti:".PriorityLocationPropertyType",sh:"location"},{en:"usesPrimeMeridian",ti:".PrimeMeridianRefType"},{en:"TopoPoint",ti:".TopoPointType"},{en:"ValueArray",ti:".ValueArrayType",sh:"CompositeValue"},{en:"Dictionary",ti:".DictionaryType",sh:"Definition"},{en:"_ImplicitGeometry",ti:".AbstractGeometryType",sh:"_Geometry"},{en:"scope"},{en:"AffinePlacement",ti:".AffinePlacementType"},{en:"multiGeometryProperty",ti:".MultiGeometryPropertyType"},{en:"topoComplexProperty",ti:".TopoComplexMemberType"},{en:"GenericMetaData",ti:".GenericMetaDataType",sh:"_MetaData"},{en:"validTime",ti:".TimePrimitivePropertyType"},{en:"_ReferenceSystem",ti:".AbstractReferenceSystemType",sh:"Definition"},{en:"member",ti:".AssociationType"},{en:"ellipsoidID",ti:".IdentifierType"},{en:"ellipsoidRef",ti:".EllipsoidRefType"},{en:"MultiLineString",ti:".MultiLineStringType",sh:"_GeometricAggregate"},{en:"_TimeTopologyPrimitive",ti:".AbstractTimeTopologyPrimitiveType",sh:"_TimePrimitive"},{en:"parameterName",ti:".CodeType",sh:"name"},{en:"measureDescription",ti:".CodeType"},{en:"ConventionalUnit",ti:".ConventionalUnitType",sh:"UnitDefinition"},{en:"extentOf",ti:".SurfacePropertyType"},{en:"_Coverage",ti:".AbstractCoverageType",sh:"_Feature"},{en:"TriangulatedSurface",ti:".TriangulatedSurfaceType",sh:"Surface"},{en:"Tin",ti:".TinType",sh:"TriangulatedSurface"},{en:"operationVersion"},{en:"pointProperty",ti:".PointPropertyType"},{en:"Conversion",ti:".ConversionType",sh:"_GeneralConversion"},{en:"verticalCRSRef",ti:".VerticalCRSRefType"},{en:"topoVolumeProperty",ti:".TopoVolumePropertyType"},{en:"exterior",ti:".AbstractRingPropertyType"},{en:"realizationEpoch",ti:"Date"}]}}})?ft.apply(Dn,[]):ft)&&(Vn.exports=Ye)},723:(Vn,Dn)=>{var ft,Ye;void 0!==(Ye="function"==typeof(ft=function(){return{OWS_1_1_0:{n:"OWS_1_1_0",dens:"http://www.opengis.net/ows/1.1",dans:"http://www.w3.org/1999/xlink",deps:["XLink_1_0"],tis:[{ln:"OperationsMetadata",tn:null,ps:[{n:"operation",rq:!0,mno:2,col:!0,en:"Operation",ti:".Operation"},{n:"parameter",mno:0,col:!0,en:"Parameter",ti:".DomainType"},{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"},{n:"extendedCapabilities",en:"ExtendedCapabilities",ti:"AnyType"}]},{ln:"IdentificationType",bti:".BasicIdentificationType",ps:[{n:"boundingBox",mno:0,col:!0,mx:!1,dom:!1,en:"BoundingBox",ti:".BoundingBoxType",t:"er"},{n:"outputFormat",mno:0,col:!0,en:"OutputFormat"},{n:"availableCRS",mno:0,col:!0,mx:!1,dom:!1,en:"AvailableCRS",t:"er"}]},{ln:"ResponsiblePartySubsetType",ps:[{n:"individualName",en:"IndividualName"},{n:"positionName",en:"PositionName"},{n:"contactInfo",en:"ContactInfo",ti:".ContactType"},{n:"role",en:"Role",ti:".CodeType"}]},{ln:"AnyValue",tn:null},{ln:"DomainType",bti:".UnNamedDomainType",ps:[{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"AcceptVersionsType",ps:[{n:"version",rq:!0,col:!0,en:"Version"}]},{ln:"DCP",tn:null,ps:[{n:"http",rq:!0,en:"HTTP",ti:".HTTP"}]},{ln:"ManifestType",bti:".BasicIdentificationType",ps:[{n:"referenceGroup",rq:!0,col:!0,en:"ReferenceGroup",ti:".ReferenceGroupType"}]},{ln:"ExceptionType",ps:[{n:"exceptionText",mno:0,col:!0,en:"ExceptionText"},{n:"exceptionCode",rq:!0,an:{lp:"exceptionCode"},t:"a"},{n:"locator",an:{lp:"locator"},t:"a"}]},{ln:"RequestMethodType",bti:".OnlineResourceType",ps:[{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"}]},{ln:"SectionsType",ps:[{n:"section",mno:0,col:!0,en:"Section"}]},{ln:"UnNamedDomainType",ps:[{n:"allowedValues",rq:!0,en:"AllowedValues",ti:".AllowedValues"},{n:"anyValue",rq:!0,en:"AnyValue",ti:".AnyValue"},{n:"noValues",rq:!0,en:"NoValues",ti:".NoValues"},{n:"valuesReference",rq:!0,en:"ValuesReference",ti:".ValuesReference"},{n:"defaultValue",en:"DefaultValue",ti:".ValueType"},{n:"meaning",en:"Meaning",ti:".DomainMetadataType"},{n:"dataType",en:"DataType",ti:".DomainMetadataType"},{n:"uom",rq:!0,en:"UOM",ti:".DomainMetadataType"},{n:"referenceSystem",rq:!0,en:"ReferenceSystem",ti:".DomainMetadataType"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"}]},{ln:"HTTP",tn:null,ps:[{n:"getOrPost",rq:!0,col:!0,mx:!1,dom:!1,etis:[{en:"Post",ti:".RequestMethodType"},{en:"Get",ti:".RequestMethodType"}],t:"ers"}]},{ln:"ServiceReferenceType",bti:".ReferenceType",ps:[{n:"requestMessage",rq:!0,en:"RequestMessage",ti:"AnyType"},{n:"requestMessageReference",rq:!0,en:"RequestMessageReference"}]},{ln:"KeywordsType",ps:[{n:"keyword",rq:!0,col:!0,en:"Keyword",ti:".LanguageStringType"},{n:"type",en:"Type",ti:".CodeType"}]},{ln:"AllowedValues",tn:null,ps:[{n:"valueOrRange",rq:!0,col:!0,etis:[{en:"Value",ti:".ValueType"},{en:"Range",ti:".RangeType"}],t:"es"}]},{ln:"TelephoneType",ps:[{n:"voice",mno:0,col:!0,en:"Voice"},{n:"facsimile",mno:0,col:!0,en:"Facsimile"}]},{ln:"ReferenceType",bti:".AbstractReferenceBaseType",ps:[{n:"identifier",en:"Identifier",ti:".CodeType"},{n:"_abstract",mno:0,col:!0,en:"Abstract",ti:".LanguageStringType"},{n:"format",en:"Format"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"}]},{ln:"ExceptionReport",tn:null,ps:[{n:"exception",rq:!0,col:!0,en:"Exception",ti:".ExceptionType"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"GetResourceByIdType",ps:[{n:"resourceID",mno:0,col:!0,en:"ResourceID"},{n:"outputFormat",en:"OutputFormat"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"RangeType",ps:[{n:"minimumValue",en:"MinimumValue",ti:".ValueType"},{n:"maximumValue",en:"MaximumValue",ti:".ValueType"},{n:"spacing",en:"Spacing",ti:".ValueType"},{n:"rangeClosure",ti:{t:"l"},an:{lp:"rangeClosure",ns:"http://www.opengis.net/ows/1.1"},t:"a"}]},{ln:"LanguageStringType",ps:[{n:"value",t:"v"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"DescriptionType",ps:[{n:"title",mno:0,col:!0,en:"Title",ti:".LanguageStringType"},{n:"_abstract",mno:0,col:!0,en:"Abstract",ti:".LanguageStringType"},{n:"keywords",mno:0,col:!0,en:"Keywords",ti:".KeywordsType"}]},{ln:"BoundingBoxType",ps:[{n:"lowerCorner",rq:!0,en:"LowerCorner",ti:{t:"l",bti:"Double"}},{n:"upperCorner",rq:!0,en:"UpperCorner",ti:{t:"l",bti:"Double"}},{n:"crs",an:{lp:"crs"},t:"a"},{n:"dimensions",ti:"PositiveInteger",an:{lp:"dimensions"},t:"a"}]},{ln:"ContentsBaseType",ps:[{n:"datasetDescriptionSummary",mno:0,col:!0,mx:!1,dom:!1,en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType",t:"er"},{n:"otherSource",mno:0,col:!0,mx:!1,dom:!1,en:"OtherSource",ti:".MetadataType",t:"er"}]},{ln:"BasicIdentificationType",bti:".DescriptionType",ps:[{n:"identifier",en:"Identifier",ti:".CodeType"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"}]},{ln:"ReferenceGroupType",bti:".BasicIdentificationType",ps:[{n:"abstractReferenceBase",rq:!0,col:!0,mx:!1,dom:!1,en:"AbstractReferenceBase",ti:".AbstractReferenceBaseType",t:"er"}]},{ln:"ResponsiblePartyType",ps:[{n:"individualName",en:"IndividualName"},{n:"organisationName",en:"OrganisationName"},{n:"positionName",en:"PositionName"},{n:"contactInfo",en:"ContactInfo",ti:".ContactType"},{n:"role",rq:!0,en:"Role",ti:".CodeType"}]},{ln:"ValuesReference",tn:null,ps:[{n:"value",t:"v"},{n:"reference",rq:!0,an:{lp:"reference",ns:"http://www.opengis.net/ows/1.1"},t:"a"}]},{ln:"DatasetDescriptionSummaryBaseType",bti:".DescriptionType",ps:[{n:"wgs84BoundingBox",mno:0,col:!0,en:"WGS84BoundingBox",ti:".WGS84BoundingBoxType"},{n:"identifier",rq:!0,en:"Identifier",ti:".CodeType"},{n:"boundingBox",mno:0,col:!0,mx:!1,dom:!1,en:"BoundingBox",ti:".BoundingBoxType",t:"er"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"},{n:"datasetDescriptionSummary",mno:0,col:!0,mx:!1,dom:!1,en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType",t:"er"}]},{ln:"ServiceIdentification",tn:null,bti:".DescriptionType",ps:[{n:"serviceType",rq:!0,en:"ServiceType",ti:".CodeType"},{n:"serviceTypeVersion",rq:!0,col:!0,en:"ServiceTypeVersion"},{n:"profile",mno:0,col:!0,en:"Profile"},{n:"fees",en:"Fees"},{n:"accessConstraints",mno:0,col:!0,en:"AccessConstraints"}]},{ln:"AcceptFormatsType",ps:[{n:"outputFormat",mno:0,col:!0,en:"OutputFormat"}]},{ln:"NoValues",tn:null},{ln:"Operation",tn:null,ps:[{n:"dcp",rq:!0,col:!0,en:"DCP",ti:".DCP"},{n:"parameter",mno:0,col:!0,en:"Parameter",ti:".DomainType"},{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"},{n:"metadata",mno:0,col:!0,en:"Metadata",ti:".MetadataType"},{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"AbstractReferenceBaseType",ps:[{n:"type",an:{lp:"type",ns:"http://www.opengis.net/ows/1.1"},t:"a"},{n:"href",rq:!0,t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AddressType",ps:[{n:"deliveryPoint",mno:0,col:!0,en:"DeliveryPoint"},{n:"city",en:"City"},{n:"administrativeArea",en:"AdministrativeArea"},{n:"postalCode",en:"PostalCode"},{n:"country",en:"Country"},{n:"electronicMailAddress",mno:0,col:!0,en:"ElectronicMailAddress"}]},{ln:"ValueType",ps:[{n:"value",t:"v"}]},{ln:"MetadataType",ps:[{n:"abstractMetaData",en:"AbstractMetaData",ti:"AnyType"},{n:"about",an:{lp:"about"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"OnlineResourceType",ps:[{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"DomainMetadataType",ps:[{n:"value",t:"v"},{n:"reference",an:{lp:"reference",ns:"http://www.opengis.net/ows/1.1"},t:"a"}]},{ln:"WGS84BoundingBoxType",bti:".BoundingBoxType"},{ln:"ContactType",ps:[{n:"phone",en:"Phone",ti:".TelephoneType"},{n:"address",en:"Address",ti:".AddressType"},{n:"onlineResource",en:"OnlineResource",ti:".OnlineResourceType"},{n:"hoursOfService",en:"HoursOfService"},{n:"contactInstructions",en:"ContactInstructions"}]},{ln:"CapabilitiesBaseType",ps:[{n:"serviceIdentification",en:"ServiceIdentification",ti:".ServiceIdentification"},{n:"serviceProvider",en:"ServiceProvider",ti:".ServiceProvider"},{n:"operationsMetadata",en:"OperationsMetadata",ti:".OperationsMetadata"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"updateSequence",an:{lp:"updateSequence"},t:"a"}]},{ln:"ServiceProvider",tn:null,ps:[{n:"providerName",rq:!0,en:"ProviderName"},{n:"providerSite",en:"ProviderSite",ti:".OnlineResourceType"},{n:"serviceContact",rq:!0,en:"ServiceContact",ti:".ResponsiblePartySubsetType"}]},{ln:"CodeType",ps:[{n:"value",t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"GetCapabilitiesType",ps:[{n:"acceptVersions",en:"AcceptVersions",ti:".AcceptVersionsType"},{n:"sections",en:"Sections",ti:".SectionsType"},{n:"acceptFormats",en:"AcceptFormats",ti:".AcceptFormatsType"},{n:"updateSequence",an:{lp:"updateSequence"},t:"a"}]}],eis:[{en:"Metadata",ti:".MetadataType"},{en:"DCP",ti:".DCP"},{en:"AbstractReferenceBase",ti:".AbstractReferenceBaseType"},{en:"Language",ti:"Language"},{en:"Role",ti:".CodeType"},{en:"GetResourceByID",ti:".GetResourceByIdType"},{en:"Meaning",ti:".DomainMetadataType"},{en:"AvailableCRS"},{en:"OperationResponse",ti:".ManifestType"},{en:"OutputFormat"},{en:"MaximumValue",ti:".ValueType"},{en:"Range",ti:".RangeType"},{en:"OrganisationName"},{en:"IndividualName"},{en:"Post",ti:".RequestMethodType",sc:".HTTP"},{en:"Resource",ti:"AnyType"},{en:"NoValues",ti:".NoValues"},{en:"ServiceReference",ti:".ServiceReferenceType",sh:"Reference"},{en:"DatasetDescriptionSummaryExtension",ti:".DatasetDescriptionSummaryBaseType",sh:"DatasetDescriptionSummary"},{en:"InputData",ti:".ManifestType"},{en:"ServiceIdentification",ti:".ServiceIdentification"},{en:"AccessConstraints"},{en:"ContactInfo",ti:".ContactType"},{en:"ExceptionReport",ti:".ExceptionReport"},{en:"Operation",ti:".Operation"},{en:"Title",ti:".LanguageStringType"},{en:"ReferenceSystem",ti:".DomainMetadataType"},{en:"Exception",ti:".ExceptionType"},{en:"Value",ti:".ValueType"},{en:"Keywords",ti:".KeywordsType"},{en:"Get",ti:".RequestMethodType",sc:".HTTP"},{en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType"},{en:"PositionName"},{en:"AllowedValues",ti:".AllowedValues"},{en:"Manifest",ti:".ManifestType"},{en:"Identifier",ti:".CodeType"},{en:"AbstractMetaData",ti:"AnyType"},{en:"AnyValue",ti:".AnyValue"},{en:"ServiceProvider",ti:".ServiceProvider"},{en:"DefaultValue",ti:".ValueType"},{en:"OtherSourceExtension",ti:".MetadataType",sh:"OtherSource"},{en:"OperationsMetadata",ti:".OperationsMetadata"},{en:"Fees"},{en:"BoundingBox",ti:".BoundingBoxType"},{en:"DataType",ti:".DomainMetadataType"},{en:"Abstract",ti:".LanguageStringType"},{en:"Spacing",ti:".ValueType"},{en:"GetCapabilities",ti:".GetCapabilitiesType"},{en:"HTTP",ti:".HTTP"},{en:"UOM",ti:".DomainMetadataType"},{en:"OtherSource",ti:".MetadataType"},{en:"WGS84BoundingBox",ti:".WGS84BoundingBoxType",sh:"BoundingBox"},{en:"MinimumValue",ti:".ValueType"},{en:"Reference",ti:".ReferenceType",sh:"AbstractReferenceBase"},{en:"ReferenceGroup",ti:".ReferenceGroupType"},{en:"ExtendedCapabilities",ti:"AnyType"},{en:"PointOfContact",ti:".ResponsiblePartyType"},{en:"ValuesReference",ti:".ValuesReference"},{en:"SupportedCRS",sh:"AvailableCRS"}]}}})?ft.apply(Dn,[]):ft)&&(Vn.exports=Ye)},815:(Vn,Dn)=>{var ft,Ye;void 0!==(Ye="function"==typeof(ft=function(){return{OWS_2_0:{n:"OWS_2_0",dens:"http://www.opengis.net/ows/2.0",dans:"http://www.w3.org/1999/xlink",deps:["XLink_1_0"],tis:[{ln:"GetResourceByIdType",ps:[{n:"resourceID",mno:0,col:!0,en:"ResourceID"},{n:"outputFormat",en:"OutputFormat"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"DCP",tn:null,ps:[{n:"http",rq:!0,en:"HTTP",ti:".HTTP"}]},{ln:"DomainMetadataType",ps:[{n:"value",t:"v"},{n:"reference",an:{lp:"reference",ns:"http://www.opengis.net/ows/2.0"},t:"a"}]},{ln:"SectionsType",ps:[{n:"section",mno:0,col:!0,en:"Section"}]},{ln:"CapabilitiesBaseType",ps:[{n:"serviceIdentification",en:"ServiceIdentification",ti:".ServiceIdentification"},{n:"serviceProvider",en:"ServiceProvider",ti:".ServiceProvider"},{n:"operationsMetadata",en:"OperationsMetadata",ti:".OperationsMetadata"},{n:"languages",en:"Languages",ti:".CapabilitiesBaseType.Languages"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"updateSequence",an:{lp:"updateSequence"},t:"a"}]},{ln:"BasicIdentificationType",bti:".DescriptionType",ps:[{n:"identifier",en:"Identifier",ti:".CodeType"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"}]},{ln:"RangeType",ps:[{n:"minimumValue",en:"MinimumValue",ti:".ValueType"},{n:"maximumValue",en:"MaximumValue",ti:".ValueType"},{n:"spacing",en:"Spacing",ti:".ValueType"},{n:"rangeClosure",ti:{t:"l"},an:{lp:"rangeClosure",ns:"http://www.opengis.net/ows/2.0"},t:"a"}]},{ln:"ServiceProvider",tn:null,ps:[{n:"providerName",rq:!0,en:"ProviderName"},{n:"providerSite",en:"ProviderSite",ti:".OnlineResourceType"},{n:"serviceContact",rq:!0,en:"ServiceContact",ti:".ResponsiblePartySubsetType"}]},{ln:"AcceptFormatsType",ps:[{n:"outputFormat",mno:0,col:!0,en:"OutputFormat"}]},{ln:"MetadataType",ps:[{n:"abstractMetaData",mx:!1,dom:!1,en:"AbstractMetaData",ti:"AnyType",t:"er"},{n:"about",an:{lp:"about"},t:"a"},{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"ReferenceGroupType",bti:".BasicIdentificationType",ps:[{n:"abstractReferenceBase",rq:!0,col:!0,mx:!1,dom:!1,en:"AbstractReferenceBase",ti:".AbstractReferenceBaseType",t:"er"}]},{ln:"ValuesReference",tn:null,ps:[{n:"value",t:"v"},{n:"reference",rq:!0,an:{lp:"reference",ns:"http://www.opengis.net/ows/2.0"},t:"a"}]},{ln:"AdditionalParametersBaseType",bti:".MetadataType"},{ln:"ResponsiblePartySubsetType",ps:[{n:"individualName",en:"IndividualName"},{n:"positionName",en:"PositionName"},{n:"contactInfo",en:"ContactInfo",ti:".ContactType"},{n:"role",en:"Role",ti:".CodeType"}]},{ln:"NoValues",tn:null},{ln:"AnyValue",tn:null},{ln:"CodeType",ps:[{n:"value",t:"v"},{n:"codeSpace",an:{lp:"codeSpace"},t:"a"}]},{ln:"IdentificationType",bti:".BasicIdentificationType",ps:[{n:"boundingBox",mno:0,col:!0,mx:!1,dom:!1,en:"BoundingBox",ti:".BoundingBoxType",t:"er"},{n:"outputFormat",mno:0,col:!0,en:"OutputFormat"},{n:"availableCRS",mno:0,col:!0,mx:!1,dom:!1,en:"AvailableCRS",t:"er"}]},{ln:"UnNamedDomainType",ps:[{n:"allowedValues",rq:!0,en:"AllowedValues",ti:".AllowedValues"},{n:"anyValue",rq:!0,en:"AnyValue",ti:".AnyValue"},{n:"noValues",rq:!0,en:"NoValues",ti:".NoValues"},{n:"valuesReference",rq:!0,en:"ValuesReference",ti:".ValuesReference"},{n:"defaultValue",en:"DefaultValue",ti:".ValueType"},{n:"meaning",en:"Meaning",ti:".DomainMetadataType"},{n:"dataType",en:"DataType",ti:".DomainMetadataType"},{n:"uom",rq:!0,en:"UOM",ti:".DomainMetadataType"},{n:"referenceSystem",rq:!0,en:"ReferenceSystem",ti:".DomainMetadataType"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"}]},{ln:"ServiceReferenceType",bti:".ReferenceType",ps:[{n:"requestMessage",rq:!0,en:"RequestMessage",ti:"AnyType"},{n:"requestMessageReference",rq:!0,en:"RequestMessageReference"}]},{ln:"ReferenceType",bti:".AbstractReferenceBaseType",ps:[{n:"identifier",en:"Identifier",ti:".CodeType"},{n:"_abstract",mno:0,col:!0,en:"Abstract",ti:".LanguageStringType"},{n:"format",en:"Format"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"}]},{ln:"ManifestType",bti:".BasicIdentificationType",ps:[{n:"referenceGroup",rq:!0,col:!0,en:"ReferenceGroup",ti:".ReferenceGroupType"}]},{ln:"TelephoneType",ps:[{n:"voice",mno:0,col:!0,en:"Voice"},{n:"facsimile",mno:0,col:!0,en:"Facsimile"}]},{ln:"ContactType",ps:[{n:"phone",en:"Phone",ti:".TelephoneType"},{n:"address",en:"Address",ti:".AddressType"},{n:"onlineResource",en:"OnlineResource",ti:".OnlineResourceType"},{n:"hoursOfService",en:"HoursOfService"},{n:"contactInstructions",en:"ContactInstructions"}]},{ln:"ExceptionReport",tn:null,ps:[{n:"exception",rq:!0,col:!0,en:"Exception",ti:".ExceptionType"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"OperationsMetadata",tn:null,ps:[{n:"operation",rq:!0,mno:2,col:!0,en:"Operation",ti:".Operation"},{n:"parameter",mno:0,col:!0,en:"Parameter",ti:".DomainType"},{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"},{n:"extendedCapabilities",en:"ExtendedCapabilities",ti:"AnyType"}]},{ln:"WGS84BoundingBoxType",bti:".BoundingBoxType"},{ln:"ValueType",ps:[{n:"value",t:"v"}]},{ln:"AddressType",ps:[{n:"deliveryPoint",mno:0,col:!0,en:"DeliveryPoint"},{n:"city",en:"City"},{n:"administrativeArea",en:"AdministrativeArea"},{n:"postalCode",en:"PostalCode"},{n:"country",en:"Country"},{n:"electronicMailAddress",mno:0,col:!0,en:"ElectronicMailAddress"}]},{ln:"GetCapabilitiesType",ps:[{n:"acceptVersions",en:"AcceptVersions",ti:".AcceptVersionsType"},{n:"sections",en:"Sections",ti:".SectionsType"},{n:"acceptFormats",en:"AcceptFormats",ti:".AcceptFormatsType"},{n:"acceptLanguages",en:"AcceptLanguages",ti:".GetCapabilitiesType.AcceptLanguages"},{n:"updateSequence",an:{lp:"updateSequence"},t:"a"}]},{ln:"AcceptVersionsType",ps:[{n:"version",rq:!0,col:!0,en:"Version"}]},{ln:"AdditionalParametersType",bti:".AdditionalParametersBaseType"},{ln:"NilValueType",bti:".CodeType",ps:[{n:"nilReason",an:{lp:"nilReason"},t:"a"}]},{ln:"ExceptionType",ps:[{n:"exceptionText",mno:0,col:!0,en:"ExceptionText"},{n:"exceptionCode",rq:!0,an:{lp:"exceptionCode"},t:"a"},{n:"locator",an:{lp:"locator"},t:"a"}]},{ln:"BoundingBoxType",ps:[{n:"lowerCorner",rq:!0,en:"LowerCorner",ti:{t:"l",bti:"Double"}},{n:"upperCorner",rq:!0,en:"UpperCorner",ti:{t:"l",bti:"Double"}},{n:"crs",an:{lp:"crs"},t:"a"},{n:"dimensions",ti:"PositiveInteger",an:{lp:"dimensions"},t:"a"}]},{ln:"DomainType",bti:".UnNamedDomainType",ps:[{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"KeywordsType",ps:[{n:"keyword",rq:!0,col:!0,en:"Keyword",ti:".LanguageStringType"},{n:"type",en:"Type",ti:".CodeType"}]},{ln:"DescriptionType",ps:[{n:"title",mno:0,col:!0,en:"Title",ti:".LanguageStringType"},{n:"_abstract",mno:0,col:!0,en:"Abstract",ti:".LanguageStringType"},{n:"keywords",mno:0,col:!0,en:"Keywords",ti:".KeywordsType"}]},{ln:"Operation",tn:null,ps:[{n:"dcp",rq:!0,col:!0,en:"DCP",ti:".DCP"},{n:"parameter",mno:0,col:!0,en:"Parameter",ti:".DomainType"},{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"},{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"ContentsBaseType",ps:[{n:"datasetDescriptionSummary",mno:0,col:!0,en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType"},{n:"otherSource",mno:0,col:!0,en:"OtherSource",ti:".MetadataType"}]},{ln:"ServiceIdentification",tn:null,bti:".DescriptionType",ps:[{n:"serviceType",rq:!0,en:"ServiceType",ti:".CodeType"},{n:"serviceTypeVersion",rq:!0,col:!0,en:"ServiceTypeVersion"},{n:"profile",mno:0,col:!0,en:"Profile"},{n:"fees",en:"Fees"},{n:"accessConstraints",mno:0,col:!0,en:"AccessConstraints"}]},{ln:"ResponsiblePartyType",ps:[{n:"individualName",en:"IndividualName"},{n:"organisationName",en:"OrganisationName"},{n:"positionName",en:"PositionName"},{n:"contactInfo",en:"ContactInfo",ti:".ContactType"},{n:"role",rq:!0,en:"Role",ti:".CodeType"}]},{ln:"DatasetDescriptionSummaryBaseType",bti:".DescriptionType",ps:[{n:"wgs84BoundingBox",mno:0,col:!0,en:"WGS84BoundingBox",ti:".WGS84BoundingBoxType"},{n:"identifier",rq:!0,en:"Identifier",ti:".CodeType"},{n:"boundingBox",mno:0,col:!0,mx:!1,dom:!1,en:"BoundingBox",ti:".BoundingBoxType",t:"er"},{n:"metadata",mno:0,col:!0,mx:!1,dom:!1,en:"Metadata",ti:".MetadataType",t:"er"},{n:"datasetDescriptionSummary",mno:0,col:!0,en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType"}]},{ln:"RequestMethodType",bti:".OnlineResourceType",ps:[{n:"constraint",mno:0,col:!0,en:"Constraint",ti:".DomainType"}]},{ln:"LanguageStringType",ps:[{n:"value",t:"v"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"AllowedValues",tn:null,ps:[{n:"valueOrRange",rq:!0,col:!0,etis:[{en:"Value",ti:".ValueType"},{en:"Range",ti:".RangeType"}],t:"es"}]},{ln:"GetCapabilitiesType.AcceptLanguages",tn:null,ps:[{n:"language",rq:!0,col:!0,en:"Language",ti:"Language"}]},{ln:"OnlineResourceType",ps:[{n:"type",ti:"XLink_1_0.TypeType",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"CapabilitiesBaseType.Languages",tn:null,ps:[{n:"language",rq:!0,col:!0,en:"Language",ti:"Language"}]},{ln:"HTTP",tn:null,ps:[{n:"getOrPost",rq:!0,col:!0,mx:!1,dom:!1,etis:[{en:"Post",ti:".RequestMethodType"},{en:"Get",ti:".RequestMethodType"}],t:"ers"}]},{ln:"AbstractReferenceBaseType",ps:[{n:"type",an:{lp:"type",ns:"http://www.opengis.net/ows/2.0"},t:"a"},{n:"href",rq:!0,t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"XLink_1_0.ShowType",t:"a"},{n:"actuate",ti:"XLink_1_0.ActuateType",t:"a"}]},{ln:"AdditionalParameter",tn:null,ps:[{n:"name",rq:!0,en:"Name",ti:".CodeType"},{n:"value",rq:!0,col:!0,en:"Value",ti:"AnyType"}]}],eis:[{en:"Operation",ti:".Operation"},{en:"OtherSource",ti:".MetadataType"},{en:"AdditionalParameter",ti:".AdditionalParameter",sh:"AbstractMetaData"},{en:"AdditionalParameters",ti:".AdditionalParametersType",sh:"Metadata"},{en:"NoValues",ti:".NoValues"},{en:"ServiceReference",ti:".ServiceReferenceType",sh:"Reference"},{en:"MinimumValue",ti:".ValueType"},{en:"AbstractReferenceBase",ti:".AbstractReferenceBaseType"},{en:"Metadata",ti:".MetadataType"},{en:"GetResourceByID",ti:".GetResourceByIdType"},{en:"AbstractMetaData",ti:"AnyType"},{en:"Abstract",ti:".LanguageStringType"},{en:"OperationsMetadata",ti:".OperationsMetadata"},{en:"DatasetDescriptionSummary",ti:".DatasetDescriptionSummaryBaseType"},{en:"AvailableCRS"},{en:"GetCapabilities",ti:".GetCapabilitiesType"},{en:"OrganisationName"},{en:"ContactInfo",ti:".ContactType"},{en:"Manifest",ti:".ManifestType"},{en:"PointOfContact",ti:".ResponsiblePartyType"},{en:"DefaultValue",ti:".ValueType"},{en:"HTTP",ti:".HTTP"},{en:"Exception",ti:".ExceptionType"},{en:"ExtendedCapabilities",ti:"AnyType"},{en:"AnyValue",ti:".AnyValue"},{en:"Spacing",ti:".ValueType"},{en:"Resource",ti:"AnyType"},{en:"OperationResponse",ti:".ManifestType"},{en:"DataType",ti:".DomainMetadataType"},{en:"Identifier",ti:".CodeType"},{en:"nilValue",ti:".NilValueType"},{en:"Language",ti:"Language"},{en:"AllowedValues",ti:".AllowedValues"},{en:"Post",ti:".RequestMethodType",sc:".HTTP"},{en:"SupportedCRS",sh:"AvailableCRS"},{en:"Role",ti:".CodeType"},{en:"ReferenceGroup",ti:".ReferenceGroupType"},{en:"Meaning",ti:".DomainMetadataType"},{en:"Value",ti:".ValueType"},{en:"DCP",ti:".DCP"},{en:"Range",ti:".RangeType"},{en:"Fees"},{en:"InputData",ti:".ManifestType"},{en:"OutputFormat"},{en:"AccessConstraints"},{en:"ServiceProvider",ti:".ServiceProvider"},{en:"UOM",ti:".DomainMetadataType"},{en:"IndividualName"},{en:"Title",ti:".LanguageStringType"},{en:"MaximumValue",ti:".ValueType"},{en:"ValuesReference",ti:".ValuesReference"},{en:"ReferenceSystem",ti:".DomainMetadataType"},{en:"PositionName"},{en:"Keywords",ti:".KeywordsType"},{en:"WGS84BoundingBox",ti:".WGS84BoundingBoxType",sh:"BoundingBox"},{en:"BoundingBox",ti:".BoundingBoxType"},{en:"Reference",ti:".ReferenceType",sh:"AbstractReferenceBase"},{en:"ServiceIdentification",ti:".ServiceIdentification"},{en:"Get",ti:".RequestMethodType",sc:".HTTP"},{en:"ExceptionReport",ti:".ExceptionReport"}]}}})?ft.apply(Dn,[]):ft)&&(Vn.exports=Ye)},955:(Vn,Dn)=>{var ft,Ye;void 0!==(Ye="function"==typeof(ft=function(){return{SMIL_2_0:{n:"SMIL_2_0",dens:"http://www.w3.org/2001/SMIL20/",deps:["SMIL_2_0_Language"],tis:[{ln:"AnimateMotionPrototype",tn:"animateMotionPrototype",ps:[{n:"origin",an:{lp:"origin"},t:"a"},{n:"from",an:{lp:"from"},t:"a"},{n:"by",an:{lp:"by"},t:"a"},{n:"values",an:{lp:"values"},t:"a"},{n:"to",an:{lp:"to"},t:"a"},{n:"additive",an:{lp:"additive"},t:"a"},{n:"accumulate",an:{lp:"accumulate"},t:"a"}]},{ln:"SetPrototype",tn:"setPrototype",ps:[{n:"attributeName",rq:!0,an:{lp:"attributeName"},t:"a"},{n:"attributeType",an:{lp:"attributeType"},t:"a"},{n:"to",an:{lp:"to"},t:"a"}]},{ln:"AnimateColorPrototype",tn:"animateColorPrototype",ps:[{n:"additive",an:{lp:"additive"},t:"a"},{n:"accumulate",an:{lp:"accumulate"},t:"a"},{n:"attributeName",rq:!0,an:{lp:"attributeName"},t:"a"},{n:"attributeType",an:{lp:"attributeType"},t:"a"},{n:"from",an:{lp:"from"},t:"a"},{n:"by",an:{lp:"by"},t:"a"},{n:"values",an:{lp:"values"},t:"a"},{n:"to",an:{lp:"to"},t:"a"}]},{ln:"AnimatePrototype",tn:"animatePrototype",ps:[{n:"additive",an:{lp:"additive"},t:"a"},{n:"accumulate",an:{lp:"accumulate"},t:"a"},{n:"from",an:{lp:"from"},t:"a"},{n:"by",an:{lp:"by"},t:"a"},{n:"values",an:{lp:"values"},t:"a"},{n:"to",an:{lp:"to"},t:"a"},{n:"attributeName",rq:!0,an:{lp:"attributeName"},t:"a"},{n:"attributeType",an:{lp:"attributeType"},t:"a"}]},{t:"enum",ln:"SyncBehaviorDefaultType",vs:["canSlip","locked","independent","inherit"]},{t:"enum",ln:"SyncBehaviorType",vs:["canSlip","locked","independent","default"]},{t:"enum",ln:"FillTimingAttrsType",vs:["remove","freeze","hold","auto","default","transition"]},{t:"enum",ln:"RestartDefaultType",vs:["never","always","whenNotActive","inherit"]},{t:"enum",ln:"FillDefaultType",vs:["remove","freeze","hold","auto","inherit","transition"]},{t:"enum",ln:"RestartTimingType",vs:["never","always","whenNotActive","default"]}],eis:[{en:"set",ti:"SMIL_2_0_Language.SetType",sh:{lp:"set",ns:"http://www.w3.org/2001/SMIL20/Language"}},{en:"animate",ti:"SMIL_2_0_Language.AnimateType",sh:{lp:"animate",ns:"http://www.w3.org/2001/SMIL20/Language"}},{en:"animateMotion",ti:"SMIL_2_0_Language.AnimateMotionType",sh:{lp:"animateMotion",ns:"http://www.w3.org/2001/SMIL20/Language"}},{en:"animateColor",ti:"SMIL_2_0_Language.AnimateColorType",sh:{lp:"animateColor",ns:"http://www.w3.org/2001/SMIL20/Language"}}]}}})?ft.apply(Dn,[]):ft)&&(Vn.exports=Ye)},535:(Vn,Dn)=>{var ft,Ye;void 0!==(Ye="function"==typeof(ft=function(){return{SMIL_2_0_Language:{n:"SMIL_2_0_Language",dens:"http://www.w3.org/2001/SMIL20/Language",deps:["SMIL_2_0"],tis:[{ln:"AnimateColorType",tn:"animateColorType",bti:"SMIL_2_0.AnimateColorPrototype",ps:[{n:"otherAttributes",t:"aa"},{n:"any",mno:0,col:!0,mx:!1,t:"ae"},{n:"syncBehaviorDefault",an:{lp:"syncBehaviorDefault"},t:"a"},{n:"syncToleranceDefault",an:{lp:"syncToleranceDefault"},t:"a"},{n:"min",an:{lp:"min"},t:"a"},{n:"max",an:{lp:"max"},t:"a"},{n:"begin",an:{lp:"begin"},t:"a"},{n:"end",an:{lp:"end"},t:"a"},{n:"repeatDur",an:{lp:"repeatDur"},t:"a"},{n:"repeatCount",ti:"Decimal",an:{lp:"repeatCount"},t:"a"},{n:"dur",an:{lp:"dur"},t:"a"},{n:"repeat",ti:"NonNegativeInteger",an:{lp:"repeat"},t:"a"},{n:"fillDefault",an:{lp:"fillDefault"},t:"a"},{n:"restart",an:{lp:"restart"},t:"a"},{n:"restartDefault",an:{lp:"restartDefault"},t:"a"},{n:"syncBehavior",an:{lp:"syncBehavior"},t:"a"},{n:"syncTolerance",an:{lp:"syncTolerance"},t:"a"},{n:"fill",an:{lp:"fill"},t:"a"},{n:"skipContent",ti:"Boolean",an:{lp:"skip-content"},t:"a"},{n:"alt",an:{lp:"alt"},t:"a"},{n:"longdesc",an:{lp:"longdesc"},t:"a"},{n:"id",ti:"ID",an:{lp:"id"},t:"a"},{n:"clazz",an:{lp:"class"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"},{n:"targetElement",ti:"IDREF",an:{lp:"targetElement"},t:"a"},{n:"calcMode",an:{lp:"calcMode"},t:"a"}]},{ln:"SetType",tn:"setType",bti:"SMIL_2_0.SetPrototype",ps:[{n:"otherAttributes",t:"aa"},{n:"any",mno:0,col:!0,mx:!1,t:"ae"},{n:"targetElement",ti:"IDREF",an:{lp:"targetElement"},t:"a"},{n:"skipContent",ti:"Boolean",an:{lp:"skip-content"},t:"a"},{n:"alt",an:{lp:"alt"},t:"a"},{n:"longdesc",an:{lp:"longdesc"},t:"a"},{n:"id",ti:"ID",an:{lp:"id"},t:"a"},{n:"clazz",an:{lp:"class"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"},{n:"syncBehaviorDefault",an:{lp:"syncBehaviorDefault"},t:"a"},{n:"syncToleranceDefault",an:{lp:"syncToleranceDefault"},t:"a"},{n:"min",an:{lp:"min"},t:"a"},{n:"max",an:{lp:"max"},t:"a"},{n:"begin",an:{lp:"begin"},t:"a"},{n:"end",an:{lp:"end"},t:"a"},{n:"repeatDur",an:{lp:"repeatDur"},t:"a"},{n:"repeatCount",ti:"Decimal",an:{lp:"repeatCount"},t:"a"},{n:"dur",an:{lp:"dur"},t:"a"},{n:"repeat",ti:"NonNegativeInteger",an:{lp:"repeat"},t:"a"},{n:"fillDefault",an:{lp:"fillDefault"},t:"a"},{n:"restart",an:{lp:"restart"},t:"a"},{n:"restartDefault",an:{lp:"restartDefault"},t:"a"},{n:"syncBehavior",an:{lp:"syncBehavior"},t:"a"},{n:"syncTolerance",an:{lp:"syncTolerance"},t:"a"},{n:"fill",an:{lp:"fill"},t:"a"}]},{ln:"AnimateType",tn:"animateType",bti:"SMIL_2_0.AnimatePrototype",ps:[{n:"otherAttributes",t:"aa"},{n:"any",mno:0,col:!0,mx:!1,t:"ae"},{n:"skipContent",ti:"Boolean",an:{lp:"skip-content"},t:"a"},{n:"calcMode",an:{lp:"calcMode"},t:"a"},{n:"alt",an:{lp:"alt"},t:"a"},{n:"longdesc",an:{lp:"longdesc"},t:"a"},{n:"id",ti:"ID",an:{lp:"id"},t:"a"},{n:"clazz",an:{lp:"class"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"},{n:"targetElement",ti:"IDREF",an:{lp:"targetElement"},t:"a"},{n:"syncBehaviorDefault",an:{lp:"syncBehaviorDefault"},t:"a"},{n:"syncToleranceDefault",an:{lp:"syncToleranceDefault"},t:"a"},{n:"min",an:{lp:"min"},t:"a"},{n:"max",an:{lp:"max"},t:"a"},{n:"begin",an:{lp:"begin"},t:"a"},{n:"end",an:{lp:"end"},t:"a"},{n:"repeatDur",an:{lp:"repeatDur"},t:"a"},{n:"repeatCount",ti:"Decimal",an:{lp:"repeatCount"},t:"a"},{n:"dur",an:{lp:"dur"},t:"a"},{n:"repeat",ti:"NonNegativeInteger",an:{lp:"repeat"},t:"a"},{n:"fillDefault",an:{lp:"fillDefault"},t:"a"},{n:"restart",an:{lp:"restart"},t:"a"},{n:"restartDefault",an:{lp:"restartDefault"},t:"a"},{n:"syncBehavior",an:{lp:"syncBehavior"},t:"a"},{n:"syncTolerance",an:{lp:"syncTolerance"},t:"a"},{n:"fill",an:{lp:"fill"},t:"a"}]},{ln:"AnimateMotionType",tn:"animateMotionType",bti:"SMIL_2_0.AnimateMotionPrototype",ps:[{n:"otherAttributes",t:"aa"},{n:"any",mno:0,col:!0,mx:!1,t:"ae"},{n:"targetElement",ti:"IDREF",an:{lp:"targetElement"},t:"a"},{n:"alt",an:{lp:"alt"},t:"a"},{n:"longdesc",an:{lp:"longdesc"},t:"a"},{n:"id",ti:"ID",an:{lp:"id"},t:"a"},{n:"clazz",an:{lp:"class"},t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"},{n:"skipContent",ti:"Boolean",an:{lp:"skip-content"},t:"a"},{n:"calcMode",an:{lp:"calcMode"},t:"a"},{n:"syncBehaviorDefault",an:{lp:"syncBehaviorDefault"},t:"a"},{n:"syncToleranceDefault",an:{lp:"syncToleranceDefault"},t:"a"},{n:"min",an:{lp:"min"},t:"a"},{n:"max",an:{lp:"max"},t:"a"},{n:"begin",an:{lp:"begin"},t:"a"},{n:"end",an:{lp:"end"},t:"a"},{n:"repeatDur",an:{lp:"repeatDur"},t:"a"},{n:"repeatCount",ti:"Decimal",an:{lp:"repeatCount"},t:"a"},{n:"dur",an:{lp:"dur"},t:"a"},{n:"repeat",ti:"NonNegativeInteger",an:{lp:"repeat"},t:"a"},{n:"fillDefault",an:{lp:"fillDefault"},t:"a"},{n:"restart",an:{lp:"restart"},t:"a"},{n:"restartDefault",an:{lp:"restartDefault"},t:"a"},{n:"syncBehavior",an:{lp:"syncBehavior"},t:"a"},{n:"syncTolerance",an:{lp:"syncTolerance"},t:"a"},{n:"fill",an:{lp:"fill"},t:"a"}]}],eis:[{en:"animate",ti:".AnimateType"},{en:"animateMotion",ti:".AnimateMotionType"},{en:"animateColor",ti:".AnimateColorType"},{en:"set",ti:".SetType"}]}}})?ft.apply(Dn,[]):ft)&&(Vn.exports=Ye)},788:(Vn,Dn)=>{var ft,Ye;void 0!==(Ye="function"==typeof(ft=function(){return{WMTS_1_0:{n:"WMTS_1_0",dens:"http://www.opengis.net/wmts/1.0",deps:["OWS_1_1_0","GML_3_1_1"],tis:[{ln:"GetCapabilities",tn:null,bti:"OWS_1_1_0.GetCapabilitiesType",ps:[{n:"service",rq:!0,an:{lp:"service"},t:"a"}]},{ln:"LegendURL",tn:null,bti:"OWS_1_1_0.OnlineResourceType",ps:[{n:"format",an:{lp:"format"},t:"a"},{n:"minScaleDenominator",ti:"Double",an:{lp:"minScaleDenominator"},t:"a"},{n:"maxScaleDenominator",ti:"Double",an:{lp:"maxScaleDenominator"},t:"a"},{n:"width",ti:"PositiveInteger",an:{lp:"width"},t:"a"},{n:"height",ti:"PositiveInteger",an:{lp:"height"},t:"a"}]},{ln:"Themes",tn:null,ps:[{n:"theme",mno:0,col:!0,en:"Theme",ti:".Theme"}]},{ln:"URLTemplateType",ps:[{n:"format",rq:!0,an:{lp:"format"},t:"a"},{n:"resourceType",rq:!0,an:{lp:"resourceType"},t:"a"},{n:"template",rq:!0,an:{lp:"template"},t:"a"}]},{ln:"Style",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"legendURL",mno:0,col:!0,en:"LegendURL",ti:".LegendURL"},{n:"isDefault",ti:"Boolean",an:{lp:"isDefault"},t:"a"}]},{ln:"TileMatrixSet",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"boundingBox",mx:!1,dom:!1,en:{lp:"BoundingBox",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.BoundingBoxType",t:"er"},{n:"supportedCRS",rq:!0,en:{lp:"SupportedCRS",ns:"http://www.opengis.net/ows/1.1"}},{n:"wellKnownScaleSet",en:"WellKnownScaleSet"},{n:"tileMatrix",rq:!0,col:!0,en:"TileMatrix",ti:".TileMatrix"}]},{ln:"FeatureInfoResponse",tn:null,ps:[{n:"featureCollection",rq:!0,en:{lp:"_FeatureCollection",ns:"http://www.opengis.net/gml"},ti:"GML_3_1_1.AbstractFeatureCollectionType"},{n:"textPayload",rq:!0,en:"TextPayload",ti:".TextPayload"},{n:"binaryPayload",rq:!0,en:"BinaryPayload",ti:".BinaryPayload"},{n:"anyContent",rq:!0,en:"AnyContent",ti:"AnyType"}]},{ln:"Dimension",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"uom",en:{lp:"UOM",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.DomainMetadataType"},{n:"unitSymbol",en:"UnitSymbol"},{n:"_default",en:"Default"},{n:"current",en:"Current",ti:"Boolean"},{n:"value",rq:!0,col:!0,en:"Value"}]},{ln:"TileMatrixSetLink",tn:null,ps:[{n:"tileMatrixSet",rq:!0,en:"TileMatrixSet"},{n:"tileMatrixSetLimits",en:"TileMatrixSetLimits",ti:".TileMatrixSetLimits"}]},{ln:"TileMatrixLimits",tn:null,ps:[{n:"tileMatrix",rq:!0,en:"TileMatrix"},{n:"minTileRow",rq:!0,en:"MinTileRow",ti:"PositiveInteger"},{n:"maxTileRow",rq:!0,en:"MaxTileRow",ti:"PositiveInteger"},{n:"minTileCol",rq:!0,en:"MinTileCol",ti:"PositiveInteger"},{n:"maxTileCol",rq:!0,en:"MaxTileCol",ti:"PositiveInteger"}]},{ln:"LayerType",bti:"OWS_1_1_0.DatasetDescriptionSummaryBaseType",ps:[{n:"style",rq:!0,col:!0,en:"Style",ti:".Style"},{n:"format",rq:!0,col:!0,en:"Format"},{n:"infoFormat",mno:0,col:!0,en:"InfoFormat"},{n:"dimension",mno:0,col:!0,en:"Dimension",ti:".Dimension"},{n:"tileMatrixSetLink",rq:!0,col:!0,en:"TileMatrixSetLink",ti:".TileMatrixSetLink"},{n:"resourceURL",mno:0,col:!0,en:"ResourceURL",ti:".URLTemplateType"}]},{ln:"TileMatrix",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"scaleDenominator",rq:!0,en:"ScaleDenominator",ti:"Double"},{n:"topLeftCorner",rq:!0,en:"TopLeftCorner",ti:{t:"l",bti:"Double"}},{n:"tileWidth",rq:!0,en:"TileWidth",ti:"PositiveInteger"},{n:"tileHeight",rq:!0,en:"TileHeight",ti:"PositiveInteger"},{n:"matrixWidth",rq:!0,en:"MatrixWidth",ti:"PositiveInteger"},{n:"matrixHeight",rq:!0,en:"MatrixHeight",ti:"PositiveInteger"}]},{ln:"GetFeatureInfo",tn:null,ps:[{n:"getTile",rq:!0,en:"GetTile",ti:".GetTile"},{n:"j",rq:!0,en:"J",ti:"NonNegativeInteger"},{n:"i",rq:!0,en:"I",ti:"NonNegativeInteger"},{n:"infoFormat",rq:!0,en:"InfoFormat"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"TextPayload",tn:null,ps:[{n:"format",rq:!0,en:"Format"},{n:"textContent",rq:!0,en:"TextContent"}]},{ln:"Capabilities",tn:null,bti:"OWS_1_1_0.CapabilitiesBaseType",ps:[{n:"contents",en:"Contents",ti:".ContentsType"},{n:"themes",mno:0,col:!0,en:"Themes",ti:".Themes"},{n:"wsdl",mno:0,col:!0,en:"WSDL",ti:"OWS_1_1_0.OnlineResourceType"},{n:"serviceMetadataURL",mno:0,col:!0,en:"ServiceMetadataURL",ti:"OWS_1_1_0.OnlineResourceType"}]},{ln:"BinaryPayload",tn:null,ps:[{n:"format",rq:!0,en:"Format"},{n:"binaryContent",rq:!0,en:"BinaryContent",ti:"Base64Binary"}]},{ln:"GetTile",tn:null,ps:[{n:"layer",rq:!0,en:"Layer"},{n:"style",rq:!0,en:"Style"},{n:"format",rq:!0,en:"Format"},{n:"dimensionNameValue",mno:0,col:!0,en:"DimensionNameValue",ti:".DimensionNameValue"},{n:"tileMatrixSet",rq:!0,en:"TileMatrixSet"},{n:"tileMatrix",rq:!0,en:"TileMatrix"},{n:"tileRow",rq:!0,en:"TileRow",ti:"NonNegativeInteger"},{n:"tileCol",rq:!0,en:"TileCol",ti:"NonNegativeInteger"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"DimensionNameValue",tn:null,ps:[{n:"value",t:"v"},{n:"name",rq:!0,an:{lp:"name"},t:"a"}]},{ln:"TileMatrixSetLimits",tn:null,ps:[{n:"tileMatrixLimits",rq:!0,col:!0,en:"TileMatrixLimits",ti:".TileMatrixLimits"}]},{ln:"ContentsType",bti:"OWS_1_1_0.ContentsBaseType",ps:[{n:"tileMatrixSet",mno:0,col:!0,en:"TileMatrixSet",ti:".TileMatrixSet"}]},{ln:"Theme",tn:null,bti:"OWS_1_1_0.DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"theme",mno:0,col:!0,en:"Theme",ti:".Theme"},{n:"layerRef",mno:0,col:!0,en:"LayerRef"}]},{t:"enum",ln:"RequestServiceType",vs:["WMTS"]},{t:"enum",ln:"GetTileValueType",vs:["GetTile"]},{t:"enum",ln:"GetCapabilitiesValueType",vs:["GetCapabilities"]},{t:"enum",ln:"GetFeatureInfoValueType",vs:["GetFeatureInfo"]},{t:"enum",ln:"VersionType",vs:["1.0.0"]}],eis:[{en:"TileMatrixSet",ti:".TileMatrixSet"},{en:"LegendURL",ti:".LegendURL"},{en:"Dimension",ti:".Dimension"},{en:"GetTile",ti:".GetTile"},{en:"TileMatrixSetLimits",ti:".TileMatrixSetLimits"},{en:"DimensionNameValue",ti:".DimensionNameValue"},{en:"Layer",ti:".LayerType",sh:{lp:"DatasetDescriptionSummary",ns:"http://www.opengis.net/ows/1.1"}},{en:"Style",ti:".Style"},{en:"GetFeatureInfo",ti:".GetFeatureInfo"},{en:"TileMatrixLimits",ti:".TileMatrixLimits"},{en:"GetCapabilities",ti:".GetCapabilities"},{en:"TileMatrix",ti:".TileMatrix"},{en:"TileMatrixSetLink",ti:".TileMatrixSetLink"},{en:"Theme",ti:".Theme"},{en:"FeatureInfoResponse",ti:".FeatureInfoResponse"},{en:"BinaryPayload",ti:".BinaryPayload"},{en:"TextPayload",ti:".TextPayload"},{en:"Capabilities",ti:".Capabilities"},{en:"Themes",ti:".Themes"}]}}})?ft.apply(Dn,[]):ft)&&(Vn.exports=Ye)},10:(Vn,Dn)=>{var ft,Ye;void 0!==(Ye="function"==typeof(ft=function(){return{WPS_1_0_0:{n:"WPS_1_0_0",dens:"http://www.opengis.net/wps/1.0.0",deps:["OWS_1_1_0"],tis:[{ln:"LiteralInputType",bti:".LiteralOutputType",ps:[{n:"allowedValues",rq:!0,en:{lp:"AllowedValues",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.AllowedValues"},{n:"anyValue",rq:!0,en:{lp:"AnyValue",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.AnyValue"},{n:"valuesReference",rq:!0,en:{lp:"ValuesReference"},ti:".ValuesReferenceType"},{n:"defaultValue",en:{lp:"DefaultValue"}}]},{ln:"OutputReferenceType",ps:[{n:"href",rq:!0,an:{lp:"href"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"ResponseFormType",ps:[{n:"responseDocument",rq:!0,en:"ResponseDocument",ti:".ResponseDocumentType"},{n:"rawDataOutput",rq:!0,en:"RawDataOutput",ti:".OutputDefinitionType"}]},{ln:"DataType",ps:[{n:"complexData",rq:!0,en:"ComplexData",ti:".ComplexDataType"},{n:"literalData",rq:!0,en:"LiteralData",ti:".LiteralDataType"},{n:"boundingBoxData",rq:!0,en:"BoundingBoxData",ti:"OWS_1_1_0.BoundingBoxType"}]},{ln:"ComplexDataCombinationsType",ps:[{n:"format",rq:!0,col:!0,en:{lp:"Format"},ti:".ComplexDataDescriptionType"}]},{ln:"ResponseDocumentType",ps:[{n:"output",rq:!0,col:!0,en:"Output",ti:".DocumentOutputDefinitionType"},{n:"storeExecuteResponse",ti:"Boolean",an:{lp:"storeExecuteResponse"},t:"a"},{n:"lineage",ti:"Boolean",an:{lp:"lineage"},t:"a"},{n:"status",ti:"Boolean",an:{lp:"status"},t:"a"}]},{ln:"ProcessDescriptionType.ProcessOutputs",tn:null,ps:[{n:"output",rq:!0,col:!0,en:{lp:"Output"},ti:".OutputDescriptionType"}]},{ln:"InputReferenceType.Header",tn:null,ps:[{n:"key",rq:!0,an:{lp:"key"},t:"a"},{n:"value",rq:!0,an:{lp:"value"},t:"a"}]},{ln:"ProcessOfferings",tn:null,ps:[{n:"process",rq:!0,col:!0,en:"Process",ti:".ProcessBriefType"}]},{ln:"SupportedComplexDataInputType",bti:".SupportedComplexDataType",ps:[{n:"maximumMegabytes",ti:"Integer",an:{lp:"maximumMegabytes"},t:"a"}]},{ln:"SupportedComplexDataType",ps:[{n:"_default",rq:!0,en:{lp:"Default"},ti:".ComplexDataCombinationType"},{n:"supported",rq:!0,en:{lp:"Supported"},ti:".ComplexDataCombinationsType"}]},{ln:"ValuesReferenceType",ps:[{n:"reference",an:{lp:"reference",ns:"http://www.opengis.net/ows/1.1"},t:"a"},{n:"valuesForm",an:{lp:"valuesForm"},t:"a"}]},{ln:"ComplexDataType",ps:[{n:"otherAttributes",t:"aa"},{n:"content",col:!0,t:"ae"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"ProcessBriefType",bti:".DescriptionType",ps:[{n:"profile",mno:0,col:!0,en:"Profile"},{n:"wsdl",en:"WSDL",ti:".WSDL"},{n:"processVersion",rq:!0,an:{lp:"processVersion",ns:"http://www.opengis.net/wps/1.0.0"},t:"a"}]},{ln:"Languages",tn:null,ps:[{n:"_default",rq:!0,en:"Default",ti:".Languages.Default"},{n:"supported",rq:!0,en:"Supported",ti:".LanguagesType"}]},{ln:"ExecuteResponse.ProcessOutputs",tn:null,ps:[{n:"output",rq:!0,col:!0,en:"Output",ti:".OutputDataType"}]},{ln:"DescriptionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"title",rq:!0,en:{lp:"Title",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"_abstract",en:{lp:"Abstract",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"metadata",mno:0,col:!0,en:{lp:"Metadata",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.MetadataType"}]},{ln:"WPSCapabilitiesType",bti:"OWS_1_1_0.CapabilitiesBaseType",ps:[{n:"processOfferings",rq:!0,en:"ProcessOfferings",ti:".ProcessOfferings"},{n:"languages",rq:!0,en:"Languages",ti:".Languages"},{n:"wsdl",en:"WSDL",ti:".WSDL"},{n:"service",rq:!0,ti:"AnySimpleType",an:{lp:"service"},t:"a"},{n:"lang",rq:!0,an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"ProcessStartedType",ps:[{n:"value",t:"v"},{n:"percentCompleted",ti:"Int",an:{lp:"percentCompleted"},t:"a"}]},{ln:"DescribeProcess",tn:null,bti:".RequestBaseType",ps:[{n:"identifier",rq:!0,col:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"}]},{ln:"OutputDescriptionType",bti:".DescriptionType",ps:[{n:"complexOutput",rq:!0,en:{lp:"ComplexOutput"},ti:".SupportedComplexDataType"},{n:"literalOutput",rq:!0,en:{lp:"LiteralOutput"},ti:".LiteralOutputType"},{n:"boundingBoxOutput",rq:!0,en:{lp:"BoundingBoxOutput"},ti:".SupportedCRSsType"}]},{ln:"ProcessDescriptions",tn:null,bti:".ResponseBaseType",ps:[{n:"processDescription",rq:!0,col:!0,en:{lp:"ProcessDescription"},ti:".ProcessDescriptionType"}]},{ln:"InputDescriptionType",bti:".DescriptionType",ps:[{n:"complexData",rq:!0,en:{lp:"ComplexData"},ti:".SupportedComplexDataInputType"},{n:"literalData",rq:!0,en:{lp:"LiteralData"},ti:".LiteralInputType"},{n:"boundingBoxData",rq:!0,en:{lp:"BoundingBoxData"},ti:".SupportedCRSsType"},{n:"minOccurs",rq:!0,ti:"NonNegativeInteger",an:{lp:"minOccurs"},t:"a"},{n:"maxOccurs",rq:!0,ti:"PositiveInteger",an:{lp:"maxOccurs"},t:"a"}]},{ln:"RequestBaseType",ps:[{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"language",an:{lp:"language"},t:"a"}]},{ln:"InputReferenceType",ps:[{n:"header",mno:0,col:!0,en:"Header",ti:".InputReferenceType.Header"},{n:"body",rq:!0,en:"Body",ti:"AnyType"},{n:"bodyReference",rq:!0,en:"BodyReference",ti:".InputReferenceType.BodyReference"},{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"},{n:"method",an:{lp:"method"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"LiteralOutputType",ps:[{n:"dataType",en:{lp:"DataType",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.DomainMetadataType"},{n:"uoMs",en:{lp:"UOMs"},ti:".SupportedUOMsType"}]},{ln:"ProcessDescriptionType",bti:".ProcessBriefType",ps:[{n:"dataInputs",en:{lp:"DataInputs"},ti:".ProcessDescriptionType.DataInputs"},{n:"processOutputs",rq:!0,en:{lp:"ProcessOutputs"},ti:".ProcessDescriptionType.ProcessOutputs"},{n:"storeSupported",ti:"Boolean",an:{lp:"storeSupported"},t:"a"},{n:"statusSupported",ti:"Boolean",an:{lp:"statusSupported"},t:"a"}]},{ln:"StatusType",ps:[{n:"processAccepted",rq:!0,en:"ProcessAccepted"},{n:"processStarted",rq:!0,en:"ProcessStarted",ti:".ProcessStartedType"},{n:"processPaused",rq:!0,en:"ProcessPaused",ti:".ProcessStartedType"},{n:"processSucceeded",rq:!0,en:"ProcessSucceeded"},{n:"processFailed",rq:!0,en:"ProcessFailed",ti:".ProcessFailedType"},{n:"creationTime",rq:!0,ti:"DateTime",an:{lp:"creationTime"},t:"a"}]},{ln:"UOMsType",ps:[{n:"uom",rq:!0,col:!0,en:{lp:"UOM",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.DomainMetadataType"}]},{ln:"ComplexDataCombinationType",ps:[{n:"format",rq:!0,en:{lp:"Format"},ti:".ComplexDataDescriptionType"}]},{ln:"CRSsType",ps:[{n:"crs",rq:!0,col:!0,en:{lp:"CRS"}}]},{ln:"LiteralDataType",ps:[{n:"value",t:"v"},{n:"dataType",an:{lp:"dataType"},t:"a"},{n:"uom",an:{lp:"uom"},t:"a"}]},{ln:"Execute",tn:null,bti:".RequestBaseType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"dataInputs",en:"DataInputs",ti:".DataInputsType"},{n:"responseForm",en:"ResponseForm",ti:".ResponseFormType"}]},{ln:"ComplexDataDescriptionType",ps:[{n:"mimeType",rq:!0,en:{lp:"MimeType"}},{n:"encoding",en:{lp:"Encoding"}},{n:"schema",en:{lp:"Schema"}}]},{ln:"SupportedCRSsType.Default",tn:null,ps:[{n:"crs",rq:!0,en:{lp:"CRS"}}]},{ln:"ExecuteResponse",tn:null,bti:".ResponseBaseType",ps:[{n:"process",rq:!0,en:"Process",ti:".ProcessBriefType"},{n:"status",rq:!0,en:"Status",ti:".StatusType"},{n:"dataInputs",en:"DataInputs",ti:".DataInputsType"},{n:"outputDefinitions",en:"OutputDefinitions",ti:".OutputDefinitionsType"},{n:"processOutputs",en:"ProcessOutputs",ti:".ExecuteResponse.ProcessOutputs"},{n:"serviceInstance",rq:!0,an:{lp:"serviceInstance"},t:"a"},{n:"statusLocation",an:{lp:"statusLocation"},t:"a"}]},{ln:"SupportedUOMsType.Default",tn:null,ps:[{n:"uom",rq:!0,en:{lp:"UOM",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.DomainMetadataType"}]},{ln:"ProcessFailedType",ps:[{n:"exceptionReport",rq:!0,en:{lp:"ExceptionReport",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.ExceptionReport"}]},{ln:"LanguagesType",ps:[{n:"language",rq:!0,col:!0,en:{lp:"Language",ns:"http://www.opengis.net/ows/1.1"},ti:"Language"}]},{ln:"OutputDefinitionsType",ps:[{n:"output",rq:!0,col:!0,en:"Output",ti:".DocumentOutputDefinitionType"}]},{ln:"WSDL",tn:null,ps:[{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"}]},{ln:"SupportedUOMsType",ps:[{n:"_default",rq:!0,en:{lp:"Default"},ti:".SupportedUOMsType.Default"},{n:"supported",rq:!0,en:{lp:"Supported"},ti:".UOMsType"}]},{ln:"InputReferenceType.BodyReference",tn:null,ps:[{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"}]},{ln:"DataInputsType",ps:[{n:"input",rq:!0,col:!0,en:"Input",ti:".InputType"}]},{ln:"SupportedCRSsType",ps:[{n:"_default",rq:!0,en:{lp:"Default"},ti:".SupportedCRSsType.Default"},{n:"supported",rq:!0,en:{lp:"Supported"},ti:".CRSsType"}]},{ln:"Languages.Default",tn:null,ps:[{n:"language",rq:!0,en:{lp:"Language",ns:"http://www.opengis.net/ows/1.1"},ti:"Language"}]},{ln:"DocumentOutputDefinitionType",bti:".OutputDefinitionType",ps:[{n:"title",en:{lp:"Title",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"_abstract",en:{lp:"Abstract",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"asReference",ti:"Boolean",an:{lp:"asReference"},t:"a"}]},{ln:"ProcessDescriptionType.DataInputs",tn:null,ps:[{n:"input",rq:!0,col:!0,en:{lp:"Input"},ti:".InputDescriptionType"}]},{ln:"OutputDefinitionType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"uom",an:{lp:"uom"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"OutputDataType",bti:".DescriptionType",ps:[{n:"reference",rq:!0,en:"Reference",ti:".OutputReferenceType"},{n:"data",rq:!0,en:"Data",ti:".DataType"}]},{ln:"InputType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.CodeType"},{n:"title",en:{lp:"Title",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"_abstract",en:{lp:"Abstract",ns:"http://www.opengis.net/ows/1.1"},ti:"OWS_1_1_0.LanguageStringType"},{n:"reference",rq:!0,en:"Reference",ti:".InputReferenceType"},{n:"data",rq:!0,en:"Data",ti:".DataType"}]},{ln:"ResponseBaseType",ps:[{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"},{n:"lang",rq:!0,an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"GetCapabilities",tn:null,ps:[{n:"acceptVersions",en:"AcceptVersions",ti:"OWS_1_1_0.AcceptVersionsType"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"language",an:{lp:"language"},t:"a"}]}],eis:[{en:"ExecuteResponse",ti:".ExecuteResponse"},{en:"WSDL",ti:".WSDL"},{en:"Languages",ti:".Languages"},{en:"Capabilities",ti:".WPSCapabilitiesType"},{en:"GetCapabilities",ti:".GetCapabilities"},{en:"ProcessDescriptions",ti:".ProcessDescriptions"},{en:"Execute",ti:".Execute"},{en:"ProcessOfferings",ti:".ProcessOfferings"},{en:"DescribeProcess",ti:".DescribeProcess"}]}}})?ft.apply(Dn,[]):ft)&&(Vn.exports=Ye)},731:(Vn,Dn)=>{var ft,Ye;void 0!==(Ye="function"==typeof(ft=function(){return{WPS_2_0:{n:"WPS_2_0",dens:"http://www.opengis.net/wps/2.0",deps:["OWS_2_0"],tis:[{ln:"OutputDescriptionType",bti:".DescriptionType",ps:[{n:"dataDescription",rq:!0,mx:!1,dom:!1,en:"DataDescription",ti:".DataDescriptionType",t:"er"},{n:"output",rq:!0,col:!0,en:"Output",ti:".OutputDescriptionType"}]},{ln:"DataOutputType",ps:[{n:"data",rq:!0,en:"Data",ti:".Data"},{n:"reference",rq:!0,en:"Reference",ti:".ReferenceType"},{n:"output",rq:!0,en:"Output",ti:".DataOutputType"},{n:"id",rq:!0,an:{lp:"id"},t:"a"}]},{ln:"WPSCapabilitiesType.Extension",tn:null,ps:[{n:"any",mno:0,col:!0,mx:!1,t:"ae"}]},{ln:"Dismiss",tn:null,bti:".RequestBaseType",ps:[{n:"jobID",rq:!0,en:"JobID"}]},{ln:"LiteralDataType",bti:".DataDescriptionType",ps:[{n:"literalDataDomain",rq:!0,col:!0,en:{lp:"LiteralDataDomain"},ti:".LiteralDataType.LiteralDataDomain"}]},{ln:"GetCapabilitiesType",bti:"OWS_2_0.GetCapabilitiesType",ps:[{n:"service",rq:!0,an:{lp:"service"},t:"a"}]},{ln:"Contents",tn:null,ps:[{n:"processSummary",rq:!0,col:!0,en:"ProcessSummary",ti:".ProcessSummaryType"}]},{ln:"DataInputType",ps:[{n:"data",rq:!0,en:"Data",ti:".Data"},{n:"reference",rq:!0,en:"Reference",ti:".ReferenceType"},{n:"input",rq:!0,col:!0,en:"Input",ti:".DataInputType"},{n:"id",rq:!0,an:{lp:"id"},t:"a"}]},{ln:"GetResult",tn:null,bti:".RequestBaseType",ps:[{n:"jobID",rq:!0,en:"JobID"}]},{ln:"SupportedCRS",tn:null,ps:[{n:"value",t:"v"},{n:"_default",ti:"Boolean",an:{lp:"default"},t:"a"}]},{ln:"LiteralDataDomainType",ps:[{n:"allowedValues",rq:!0,en:{lp:"AllowedValues",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.AllowedValues"},{n:"anyValue",rq:!0,en:{lp:"AnyValue",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.AnyValue"},{n:"valuesReference",rq:!0,en:{lp:"ValuesReference",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.ValuesReference"},{n:"dataType",en:{lp:"DataType",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.DomainMetadataType"},{n:"uom",en:{lp:"UOM",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.DomainMetadataType"},{n:"defaultValue",en:{lp:"DefaultValue",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.ValueType"}]},{ln:"DataDescriptionType",ps:[{n:"format",rq:!0,col:!0,en:"Format",ti:".Format"}]},{ln:"StatusInfo",tn:null,ps:[{n:"jobID",rq:!0,en:"JobID"},{n:"status",rq:!0,en:"Status"},{n:"expirationDate",en:"ExpirationDate",ti:"DateTime"},{n:"estimatedCompletion",en:"EstimatedCompletion",ti:"DateTime"},{n:"nextPoll",en:"NextPoll",ti:"DateTime"},{n:"percentCompleted",en:"PercentCompleted",ti:"Int"}]},{ln:"OutputDefinitionType",ps:[{n:"output",en:"Output",ti:".OutputDefinitionType"},{n:"id",rq:!0,an:{lp:"id"},t:"a"},{n:"transmission",an:{lp:"transmission"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"LiteralValue",tn:null,bti:"OWS_2_0.ValueType",ps:[{n:"dataType",an:{lp:"dataType"},t:"a"},{n:"uom",an:{lp:"uom"},t:"a"}]},{ln:"RequestBaseType",ps:[{n:"extension",mno:0,col:!0,en:"Extension",ti:"AnyType"},{n:"service",rq:!0,an:{lp:"service"},t:"a"},{n:"version",rq:!0,an:{lp:"version"},t:"a"}]},{ln:"LiteralDataType.LiteralDataDomain",tn:null,bti:".LiteralDataDomainType",ps:[{n:"_default",ti:"Boolean",an:{lp:"default"},t:"a"}]},{ln:"DescribeProcess",tn:null,bti:".RequestBaseType",ps:[{n:"identifier",rq:!0,col:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.CodeType"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"Result",tn:null,ps:[{n:"jobID",en:"JobID"},{n:"expirationDate",en:"ExpirationDate",ti:"DateTime"},{n:"output",rq:!0,col:!0,en:"Output",ti:".DataOutputType"}]},{ln:"GenericInputType",bti:".DescriptionType",ps:[{n:"input",mno:0,col:!0,en:"Input",ti:".GenericInputType"},{n:"minOccurs",ti:"NonNegativeInteger",an:{lp:"minOccurs"},t:"a"},{n:"maxOccurs",an:{lp:"maxOccurs"},t:"a"}]},{ln:"Data",tn:null,ps:[{n:"otherAttributes",t:"aa"},{n:"content",col:!0,t:"ae"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"Format",tn:null,ps:[{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"},{n:"maximumMegabytes",ti:"PositiveInteger",an:{lp:"maximumMegabytes"},t:"a"},{n:"_default",ti:"Boolean",an:{lp:"default"},t:"a"}]},{ln:"BoundingBoxData",tn:null,bti:".DataDescriptionType",ps:[{n:"supportedCRS",rq:!0,col:!0,en:"SupportedCRS",ti:".SupportedCRS"}]},{ln:"ProcessDescriptionType",bti:".DescriptionType",ps:[{n:"input",mno:0,col:!0,en:"Input",ti:".InputDescriptionType"},{n:"output",rq:!0,col:!0,en:"Output",ti:".OutputDescriptionType"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"InputDescriptionType",bti:".DescriptionType",ps:[{n:"dataDescription",rq:!0,mx:!1,dom:!1,en:"DataDescription",ti:".DataDescriptionType",t:"er"},{n:"input",rq:!0,col:!0,en:"Input",ti:".InputDescriptionType"},{n:"minOccurs",ti:"NonNegativeInteger",an:{lp:"minOccurs"},t:"a"},{n:"maxOccurs",an:{lp:"maxOccurs"},t:"a"}]},{ln:"ProcessSummaryType",bti:".DescriptionType",ps:[{n:"jobControlOptions",rq:!0,ti:{t:"l"},an:{lp:"jobControlOptions"},t:"a"},{n:"outputTransmission",ti:{t:"l"},an:{lp:"outputTransmission"},t:"a"},{n:"processVersion",an:{lp:"processVersion"},t:"a"},{n:"processModel",an:{lp:"processModel"},t:"a"}]},{ln:"ReferenceType.BodyReference",tn:null,ps:[{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"}]},{ln:"ProcessOfferings",tn:null,ps:[{n:"processOffering",rq:!0,col:!0,en:"ProcessOffering",ti:".ProcessOffering"}]},{ln:"GenericOutputType",bti:".DescriptionType",ps:[{n:"output",mno:0,col:!0,en:"Output",ti:".GenericOutputType"}]},{ln:"ComplexDataType",bti:".DataDescriptionType",ps:[{n:"any",mno:0,col:!0,mx:!1,t:"ae"}]},{ln:"GenericProcessType",bti:".DescriptionType",ps:[{n:"input",mno:0,col:!0,en:"Input",ti:".GenericInputType"},{n:"output",rq:!0,col:!0,en:"Output",ti:".GenericOutputType"}]},{ln:"ReferenceType",ps:[{n:"body",rq:!0,en:"Body",ti:"AnyType"},{n:"bodyReference",rq:!0,en:"BodyReference",ti:".ReferenceType.BodyReference"},{n:"href",rq:!0,an:{lp:"href",ns:"http://www.w3.org/1999/xlink"},t:"a"},{n:"mimeType",an:{lp:"mimeType"},t:"a"},{n:"encoding",an:{lp:"encoding"},t:"a"},{n:"schema",an:{lp:"schema"},t:"a"}]},{ln:"GetStatus",tn:null,bti:".RequestBaseType",ps:[{n:"jobID",rq:!0,en:"JobID"}]},{ln:"ProcessOffering",tn:null,ps:[{n:"process",rq:!0,en:"Process",ti:".ProcessDescriptionType"},{n:"any",rq:!0,mx:!1,t:"ae"},{n:"jobControlOptions",rq:!0,ti:{t:"l"},an:{lp:"jobControlOptions"},t:"a"},{n:"outputTransmission",ti:{t:"l"},an:{lp:"outputTransmission"},t:"a"},{n:"processVersion",an:{lp:"processVersion"},t:"a"},{n:"processModel",an:{lp:"processModel"},t:"a"}]},{ln:"DescriptionType",bti:"OWS_2_0.BasicIdentificationType"},{ln:"ExecuteRequestType",bti:".RequestBaseType",ps:[{n:"identifier",rq:!0,en:{lp:"Identifier",ns:"http://www.opengis.net/ows/2.0"},ti:"OWS_2_0.CodeType"},{n:"input",mno:0,col:!0,en:"Input",ti:".DataInputType"},{n:"output",rq:!0,col:!0,en:"Output",ti:".OutputDefinitionType"},{n:"mode",rq:!0,an:{lp:"mode"},t:"a"},{n:"response",rq:!0,an:{lp:"response"},t:"a"}]},{ln:"WPSCapabilitiesType",bti:"OWS_2_0.CapabilitiesBaseType",ps:[{n:"contents",rq:!0,en:"Contents",ti:".Contents"},{n:"extension",en:"Extension",ti:".WPSCapabilitiesType.Extension"},{n:"service",rq:!0,ti:"AnySimpleType",an:{lp:"service"},t:"a"}]},{t:"enum",ln:"DataTransmissionModeType",vs:["value","reference"]}],eis:[{en:"BoundingBoxData",ti:".BoundingBoxData",sh:"DataDescription"},{en:"DataDescription",ti:".DataDescriptionType"},{en:"SupportedCRS",ti:".SupportedCRS"},{en:"ProcessOffering",ti:".ProcessOffering"},{en:"ExpirationDate",ti:"DateTime"},{en:"GetCapabilities",ti:".GetCapabilitiesType"},{en:"Process",ti:".ProcessDescriptionType"},{en:"LiteralValue",ti:".LiteralValue"},{en:"Result",ti:".Result"},{en:"LiteralData",ti:".LiteralDataType",sh:"DataDescription"},{en:"Contents",ti:".Contents"},{en:"DescribeProcess",ti:".DescribeProcess"},{en:"GenericProcess",ti:".GenericProcessType"},{en:"Execute",ti:".ExecuteRequestType"},{en:"GetStatus",ti:".GetStatus"},{en:"JobID"},{en:"Data",ti:".Data"},{en:"Capabilities",ti:".WPSCapabilitiesType"},{en:"Reference",ti:".ReferenceType"},{en:"ComplexData",ti:".ComplexDataType",sh:"DataDescription"},{en:"StatusInfo",ti:".StatusInfo"},{en:"Format",ti:".Format"},{en:"GetResult",ti:".GetResult"},{en:"Dismiss",ti:".Dismiss"},{en:"ProcessOfferings",ti:".ProcessOfferings"}]}}})?ft.apply(Dn,[]):ft)&&(Vn.exports=Ye)},324:Vn=>{"use strict";function Dn(Ot){if("string"!=typeof Ot)throw new TypeError("Path must be a string. Received "+JSON.stringify(Ot))}function ft(Ot,Re){for(var R,de="",Ee=0,C=-1,w=0,O=0;O<=Ot.length;++O){if(O<Ot.length)R=Ot.charCodeAt(O);else{if(47===R)break;R=47}if(47===R){if(C!==O-1&&1!==w)if(C!==O-1&&2===w){if(de.length<2||2!==Ee||46!==de.charCodeAt(de.length-1)||46!==de.charCodeAt(de.length-2))if(de.length>2){var k=de.lastIndexOf("/");if(k!==de.length-1){-1===k?(de="",Ee=0):Ee=(de=de.slice(0,k)).length-1-de.lastIndexOf("/"),C=O,w=0;continue}}else if(2===de.length||1===de.length){de="",Ee=0,C=O,w=0;continue}Re&&(de.length>0?de+="/..":de="..",Ee=2)}else de.length>0?de+="/"+Ot.slice(C+1,O):de=Ot.slice(C+1,O),Ee=O-C-1;C=O,w=0}else 46===R&&-1!==w?++w:w=-1}return de}var Ye={resolve:function(){for(var Ee,Re="",de=!1,C=arguments.length-1;C>=-1&&!de;C--){var w;C>=0?w=arguments[C]:(void 0===Ee&&(Ee=process.cwd()),w=Ee),Dn(w),0!==w.length&&(Re=w+"/"+Re,de=47===w.charCodeAt(0))}return Re=ft(Re,!de),de?Re.length>0?"/"+Re:"/":Re.length>0?Re:"."},normalize:function(Re){if(Dn(Re),0===Re.length)return".";var de=47===Re.charCodeAt(0),Ee=47===Re.charCodeAt(Re.length-1);return 0===(Re=ft(Re,!de)).length&&!de&&(Re="."),Re.length>0&&Ee&&(Re+="/"),de?"/"+Re:Re},isAbsolute:function(Re){return Dn(Re),Re.length>0&&47===Re.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var Re,de=0;de<arguments.length;++de){var Ee=arguments[de];Dn(Ee),Ee.length>0&&(void 0===Re?Re=Ee:Re+="/"+Ee)}return void 0===Re?".":Ye.normalize(Re)},relative:function(Re,de){if(Dn(Re),Dn(de),Re===de||(Re=Ye.resolve(Re))===(de=Ye.resolve(de)))return"";for(var Ee=1;Ee<Re.length&&47===Re.charCodeAt(Ee);++Ee);for(var C=Re.length,w=C-Ee,R=1;R<de.length&&47===de.charCodeAt(R);++R);for(var k=de.length-R,W=w<k?w:k,X=-1,ee=0;ee<=W;++ee){if(ee===W){if(k>W){if(47===de.charCodeAt(R+ee))return de.slice(R+ee+1);if(0===ee)return de.slice(R+ee)}else w>W&&(47===Re.charCodeAt(Ee+ee)?X=ee:0===ee&&(X=0));break}var Y=Re.charCodeAt(Ee+ee);if(Y!==de.charCodeAt(R+ee))break;47===Y&&(X=ee)}var be="";for(ee=Ee+X+1;ee<=C;++ee)(ee===C||47===Re.charCodeAt(ee))&&(be+=0===be.length?"..":"/..");return be.length>0?be+de.slice(R+X):(47===de.charCodeAt(R+=X)&&++R,de.slice(R))},_makeLong:function(Re){return Re},dirname:function(Re){if(Dn(Re),0===Re.length)return".";for(var de=Re.charCodeAt(0),Ee=47===de,C=-1,w=!0,R=Re.length-1;R>=1;--R)if(47===(de=Re.charCodeAt(R))){if(!w){C=R;break}}else w=!1;return-1===C?Ee?"/":".":Ee&&1===C?"//":Re.slice(0,C)},basename:function(Re,de){if(void 0!==de&&"string"!=typeof de)throw new TypeError('"ext" argument must be a string');Dn(Re);var R,Ee=0,C=-1,w=!0;if(void 0!==de&&de.length>0&&de.length<=Re.length){if(de.length===Re.length&&de===Re)return"";var O=de.length-1,k=-1;for(R=Re.length-1;R>=0;--R){var W=Re.charCodeAt(R);if(47===W){if(!w){Ee=R+1;break}}else-1===k&&(w=!1,k=R+1),O>=0&&(W===de.charCodeAt(O)?-1==--O&&(C=R):(O=-1,C=k))}return Ee===C?C=k:-1===C&&(C=Re.length),Re.slice(Ee,C)}for(R=Re.length-1;R>=0;--R)if(47===Re.charCodeAt(R)){if(!w){Ee=R+1;break}}else-1===C&&(w=!1,C=R+1);return-1===C?"":Re.slice(Ee,C)},extname:function(Re){Dn(Re);for(var de=-1,Ee=0,C=-1,w=!0,R=0,O=Re.length-1;O>=0;--O){var k=Re.charCodeAt(O);if(47!==k)-1===C&&(w=!1,C=O+1),46===k?-1===de?de=O:1!==R&&(R=1):-1!==de&&(R=-1);else if(!w){Ee=O+1;break}}return-1===de||-1===C||0===R||1===R&&de===C-1&&de===Ee+1?"":Re.slice(de,C)},format:function(Re){if(null===Re||"object"!=typeof Re)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof Re);return function Dt(Ot,Re){var de=Re.dir||Re.root,Ee=Re.base||(Re.name||"")+(Re.ext||"");return de?de===Re.root?de+Ee:de+Ot+Ee:Ee}("/",Re)},parse:function(Re){Dn(Re);var de={root:"",dir:"",base:"",ext:"",name:""};if(0===Re.length)return de;var w,Ee=Re.charCodeAt(0),C=47===Ee;C?(de.root="/",w=1):w=0;for(var R=-1,O=0,k=-1,W=!0,X=Re.length-1,ee=0;X>=w;--X)if(47!==(Ee=Re.charCodeAt(X)))-1===k&&(W=!1,k=X+1),46===Ee?-1===R?R=X:1!==ee&&(ee=1):-1!==R&&(ee=-1);else if(!W){O=X+1;break}return-1===R||-1===k||0===ee||1===ee&&R===k-1&&R===O+1?-1!==k&&(de.base=de.name=Re.slice(0===O&&C?1:O,k)):(0===O&&C?(de.name=Re.slice(1,R),de.base=Re.slice(1,k)):(de.name=Re.slice(O,R),de.base=Re.slice(O,k)),de.ext=Re.slice(R,k)),O>0?de.dir=Re.slice(0,O-1):C&&(de.dir="/"),de},sep:"/",delimiter:":",win32:null,posix:null};Ye.posix=Ye,Vn.exports=Ye},697:(Vn,Dn,ft)=>{"use strict";Vn.exports=Ye;var Dt=ft(658);function Ye(Q){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(Q)?Q:new Uint8Array(Q||0),this.pos=0,this.type=0,this.length=this.buf.length}Ye.Varint=0,Ye.Fixed64=1,Ye.Bytes=2,Ye.Fixed32=5;var Ot=4294967296,Re=1/Ot,Ee=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function w(Q){return Q.type===Ye.Bytes?Q.readVarint()+Q.pos:Q.pos+1}function X(Q,Ce,q){var we=Ce<=16383?1:Ce<=2097151?2:Ce<=268435455?3:Math.floor(Math.log(Ce)/(7*Math.LN2));q.realloc(we);for(var pe=q.pos-1;pe>=Q;pe--)q.buf[pe+we]=q.buf[pe]}function ee(Q,Ce){for(var q=0;q<Q.length;q++)Ce.writeVarint(Q[q])}function Y(Q,Ce){for(var q=0;q<Q.length;q++)Ce.writeSVarint(Q[q])}function ne(Q,Ce){for(var q=0;q<Q.length;q++)Ce.writeFloat(Q[q])}function be(Q,Ce){for(var q=0;q<Q.length;q++)Ce.writeDouble(Q[q])}function Me(Q,Ce){for(var q=0;q<Q.length;q++)Ce.writeBoolean(Q[q])}function Ge(Q,Ce){for(var q=0;q<Q.length;q++)Ce.writeFixed32(Q[q])}function gt(Q,Ce){for(var q=0;q<Q.length;q++)Ce.writeSFixed32(Q[q])}function xt(Q,Ce){for(var q=0;q<Q.length;q++)Ce.writeFixed64(Q[q])}function Tt(Q,Ce){for(var q=0;q<Q.length;q++)Ce.writeSFixed64(Q[q])}function vn(Q,Ce){return(Q[Ce]|Q[Ce+1]<<8|Q[Ce+2]<<16)+16777216*Q[Ce+3]}function gn(Q,Ce,q){Q[q]=Ce,Q[q+1]=Ce>>>8,Q[q+2]=Ce>>>16,Q[q+3]=Ce>>>24}function gi(Q,Ce){return(Q[Ce]|Q[Ce+1]<<8|Q[Ce+2]<<16)+(Q[Ce+3]<<24)}Ye.prototype={destroy:function(){this.buf=null},readFields:function(Q,Ce,q){for(q=q||this.length;this.pos<q;){var we=this.readVarint(),pe=we>>3,Le=this.pos;this.type=7&we,Q(pe,Ce,this),this.pos===Le&&this.skip(we)}return Ce},readMessage:function(Q,Ce){return this.readFields(Q,Ce,this.readVarint()+this.pos)},readFixed32:function(){var Q=vn(this.buf,this.pos);return this.pos+=4,Q},readSFixed32:function(){var Q=gi(this.buf,this.pos);return this.pos+=4,Q},readFixed64:function(){var Q=vn(this.buf,this.pos)+vn(this.buf,this.pos+4)*Ot;return this.pos+=8,Q},readSFixed64:function(){var Q=vn(this.buf,this.pos)+gi(this.buf,this.pos+4)*Ot;return this.pos+=8,Q},readFloat:function(){var Q=Dt.read(this.buf,this.pos,!0,23,4);return this.pos+=4,Q},readDouble:function(){var Q=Dt.read(this.buf,this.pos,!0,52,8);return this.pos+=8,Q},readVarint:function(Q){var q,we,Ce=this.buf;return q=127&(we=Ce[this.pos++]),we<128||(q|=(127&(we=Ce[this.pos++]))<<7,we<128)||(q|=(127&(we=Ce[this.pos++]))<<14,we<128)||(q|=(127&(we=Ce[this.pos++]))<<21,we<128)?q:function C(Q,Ce,q){var pe,Le,we=q.buf;if(pe=(112&(Le=we[q.pos++]))>>4,Le<128||(pe|=(127&(Le=we[q.pos++]))<<3,Le<128)||(pe|=(127&(Le=we[q.pos++]))<<10,Le<128)||(pe|=(127&(Le=we[q.pos++]))<<17,Le<128)||(pe|=(127&(Le=we[q.pos++]))<<24,Le<128)||(pe|=(1&(Le=we[q.pos++]))<<31,Le<128))return function R(Q,Ce,q){return q?4294967296*Ce+(Q>>>0):4294967296*(Ce>>>0)+(Q>>>0)}(Q,pe,Ce);throw new Error("Expected varint not more than 10 bytes")}(q|=(15&(we=Ce[this.pos]))<<28,Q,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var Q=this.readVarint();return Q%2==1?(Q+1)/-2:Q/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var Q=this.readVarint()+this.pos,Ce=this.pos;return this.pos=Q,Q-Ce>=12&&Ee?function Vi(Q,Ce,q){return Ee.decode(Q.subarray(Ce,q))}(this.buf,Ce,Q):function yi(Q,Ce,q){for(var we="",pe=Ce;pe<q;){var lt,Nt,An,Le=Q[pe],Be=null,ht=Le>239?4:Le>223?3:Le>191?2:1;if(pe+ht>q)break;1===ht?Le<128&&(Be=Le):2===ht?128==(192&(lt=Q[pe+1]))&&(Be=(31&Le)<<6|63&lt)<=127&&(Be=null):3===ht?(Nt=Q[pe+2],128==(192&(lt=Q[pe+1]))&&128==(192&Nt)&&((Be=(15&Le)<<12|(63&lt)<<6|63&Nt)<=2047||Be>=55296&&Be<=57343)&&(Be=null)):4===ht&&(Nt=Q[pe+2],An=Q[pe+3],128==(192&(lt=Q[pe+1]))&&128==(192&Nt)&&128==(192&An)&&((Be=(15&Le)<<18|(63&lt)<<12|(63&Nt)<<6|63&An)<=65535||Be>=1114112)&&(Be=null)),null===Be?(Be=65533,ht=1):Be>65535&&(Be-=65536,we+=String.fromCharCode(Be>>>10&1023|55296),Be=56320|1023&Be),we+=String.fromCharCode(Be),pe+=ht}return we}(this.buf,Ce,Q)},readBytes:function(){var Q=this.readVarint()+this.pos,Ce=this.buf.subarray(this.pos,Q);return this.pos=Q,Ce},readPackedVarint:function(Q,Ce){if(this.type!==Ye.Bytes)return Q.push(this.readVarint(Ce));var q=w(this);for(Q=Q||[];this.pos<q;)Q.push(this.readVarint(Ce));return Q},readPackedSVarint:function(Q){if(this.type!==Ye.Bytes)return Q.push(this.readSVarint());var Ce=w(this);for(Q=Q||[];this.pos<Ce;)Q.push(this.readSVarint());return Q},readPackedBoolean:function(Q){if(this.type!==Ye.Bytes)return Q.push(this.readBoolean());var Ce=w(this);for(Q=Q||[];this.pos<Ce;)Q.push(this.readBoolean());return Q},readPackedFloat:function(Q){if(this.type!==Ye.Bytes)return Q.push(this.readFloat());var Ce=w(this);for(Q=Q||[];this.pos<Ce;)Q.push(this.readFloat());return Q},readPackedDouble:function(Q){if(this.type!==Ye.Bytes)return Q.push(this.readDouble());var Ce=w(this);for(Q=Q||[];this.pos<Ce;)Q.push(this.readDouble());return Q},readPackedFixed32:function(Q){if(this.type!==Ye.Bytes)return Q.push(this.readFixed32());var Ce=w(this);for(Q=Q||[];this.pos<Ce;)Q.push(this.readFixed32());return Q},readPackedSFixed32:function(Q){if(this.type!==Ye.Bytes)return Q.push(this.readSFixed32());var Ce=w(this);for(Q=Q||[];this.pos<Ce;)Q.push(this.readSFixed32());return Q},readPackedFixed64:function(Q){if(this.type!==Ye.Bytes)return Q.push(this.readFixed64());var Ce=w(this);for(Q=Q||[];this.pos<Ce;)Q.push(this.readFixed64());return Q},readPackedSFixed64:function(Q){if(this.type!==Ye.Bytes)return Q.push(this.readSFixed64());var Ce=w(this);for(Q=Q||[];this.pos<Ce;)Q.push(this.readSFixed64());return Q},skip:function(Q){var Ce=7&Q;if(Ce===Ye.Varint)for(;this.buf[this.pos++]>127;);else if(Ce===Ye.Bytes)this.pos=this.readVarint()+this.pos;else if(Ce===Ye.Fixed32)this.pos+=4;else{if(Ce!==Ye.Fixed64)throw new Error("Unimplemented type: "+Ce);this.pos+=8}},writeTag:function(Q,Ce){this.writeVarint(Q<<3|Ce)},realloc:function(Q){for(var Ce=this.length||16;Ce<this.pos+Q;)Ce*=2;if(Ce!==this.length){var q=new Uint8Array(Ce);q.set(this.buf),this.buf=q,this.length=Ce}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(Q){this.realloc(4),gn(this.buf,Q,this.pos),this.pos+=4},writeSFixed32:function(Q){this.realloc(4),gn(this.buf,Q,this.pos),this.pos+=4},writeFixed64:function(Q){this.realloc(8),gn(this.buf,-1&Q,this.pos),gn(this.buf,Math.floor(Q*Re),this.pos+4),this.pos+=8},writeSFixed64:function(Q){this.realloc(8),gn(this.buf,-1&Q,this.pos),gn(this.buf,Math.floor(Q*Re),this.pos+4),this.pos+=8},writeVarint:function(Q){(Q=+Q||0)>268435455||Q<0?function O(Q,Ce){var q,we;if(Q>=0?(q=Q%4294967296|0,we=Q/4294967296|0):(we=~(-Q/4294967296),4294967295^(q=~(-Q%4294967296))?q=q+1|0:(q=0,we=we+1|0)),Q>=0x10000000000000000||Q<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");Ce.realloc(10),function k(Q,Ce,q){q.buf[q.pos++]=127&Q|128,Q>>>=7,q.buf[q.pos++]=127&Q|128,Q>>>=7,q.buf[q.pos++]=127&Q|128,Q>>>=7,q.buf[q.pos++]=127&Q|128,q.buf[q.pos]=127&(Q>>>=7)}(q,0,Ce),function W(Q,Ce){var q=(7&Q)<<4;Ce.buf[Ce.pos++]|=q|((Q>>>=3)?128:0),Q&&(Ce.buf[Ce.pos++]=127&Q|((Q>>>=7)?128:0),Q&&(Ce.buf[Ce.pos++]=127&Q|((Q>>>=7)?128:0),Q&&(Ce.buf[Ce.pos++]=127&Q|((Q>>>=7)?128:0),Q&&(Ce.buf[Ce.pos++]=127&Q|((Q>>>=7)?128:0),Q&&(Ce.buf[Ce.pos++]=127&Q)))))}(we,Ce)}(Q,this):(this.realloc(4),this.buf[this.pos++]=127&Q|(Q>127?128:0),!(Q<=127)&&(this.buf[this.pos++]=127&(Q>>>=7)|(Q>127?128:0),!(Q<=127)&&(this.buf[this.pos++]=127&(Q>>>=7)|(Q>127?128:0),!(Q<=127)&&(this.buf[this.pos++]=Q>>>7&127))))},writeSVarint:function(Q){this.writeVarint(Q<0?2*-Q-1:2*Q)},writeBoolean:function(Q){this.writeVarint(Boolean(Q))},writeString:function(Q){Q=String(Q),this.realloc(4*Q.length),this.pos++;var Ce=this.pos;this.pos=function Qe(Q,Ce,q){for(var pe,Le,we=0;we<Ce.length;we++){if((pe=Ce.charCodeAt(we))>55295&&pe<57344){if(!Le){pe>56319||we+1===Ce.length?(Q[q++]=239,Q[q++]=191,Q[q++]=189):Le=pe;continue}if(pe<56320){Q[q++]=239,Q[q++]=191,Q[q++]=189,Le=pe;continue}pe=Le-55296<<10|pe-56320|65536,Le=null}else Le&&(Q[q++]=239,Q[q++]=191,Q[q++]=189,Le=null);pe<128?Q[q++]=pe:(pe<2048?Q[q++]=pe>>6|192:(pe<65536?Q[q++]=pe>>12|224:(Q[q++]=pe>>18|240,Q[q++]=pe>>12&63|128),Q[q++]=pe>>6&63|128),Q[q++]=63&pe|128)}return q}(this.buf,Q,this.pos);var q=this.pos-Ce;q>=128&&X(Ce,q,this),this.pos=Ce-1,this.writeVarint(q),this.pos+=q},writeFloat:function(Q){this.realloc(4),Dt.write(this.buf,Q,this.pos,!0,23,4),this.pos+=4},writeDouble:function(Q){this.realloc(8),Dt.write(this.buf,Q,this.pos,!0,52,8),this.pos+=8},writeBytes:function(Q){var Ce=Q.length;this.writeVarint(Ce),this.realloc(Ce);for(var q=0;q<Ce;q++)this.buf[this.pos++]=Q[q]},writeRawMessage:function(Q,Ce){this.pos++;var q=this.pos;Q(Ce,this);var we=this.pos-q;we>=128&&X(q,we,this),this.pos=q-1,this.writeVarint(we),this.pos+=we},writeMessage:function(Q,Ce,q){this.writeTag(Q,Ye.Bytes),this.writeRawMessage(Ce,q)},writePackedVarint:function(Q,Ce){Ce.length&&this.writeMessage(Q,ee,Ce)},writePackedSVarint:function(Q,Ce){Ce.length&&this.writeMessage(Q,Y,Ce)},writePackedBoolean:function(Q,Ce){Ce.length&&this.writeMessage(Q,Me,Ce)},writePackedFloat:function(Q,Ce){Ce.length&&this.writeMessage(Q,ne,Ce)},writePackedDouble:function(Q,Ce){Ce.length&&this.writeMessage(Q,be,Ce)},writePackedFixed32:function(Q,Ce){Ce.length&&this.writeMessage(Q,Ge,Ce)},writePackedSFixed32:function(Q,Ce){Ce.length&&this.writeMessage(Q,gt,Ce)},writePackedFixed64:function(Q,Ce){Ce.length&&this.writeMessage(Q,xt,Ce)},writePackedSFixed64:function(Q,Ce){Ce.length&&this.writeMessage(Q,Tt,Ce)},writeBytesField:function(Q,Ce){this.writeTag(Q,Ye.Bytes),this.writeBytes(Ce)},writeFixed32Field:function(Q,Ce){this.writeTag(Q,Ye.Fixed32),this.writeFixed32(Ce)},writeSFixed32Field:function(Q,Ce){this.writeTag(Q,Ye.Fixed32),this.writeSFixed32(Ce)},writeFixed64Field:function(Q,Ce){this.writeTag(Q,Ye.Fixed64),this.writeFixed64(Ce)},writeSFixed64Field:function(Q,Ce){this.writeTag(Q,Ye.Fixed64),this.writeSFixed64(Ce)},writeVarintField:function(Q,Ce){this.writeTag(Q,Ye.Varint),this.writeVarint(Ce)},writeSVarintField:function(Q,Ce){this.writeTag(Q,Ye.Varint),this.writeSVarint(Ce)},writeStringField:function(Q,Ce){this.writeTag(Q,Ye.Bytes),this.writeString(Ce)},writeFloatField:function(Q,Ce){this.writeTag(Q,Ye.Fixed32),this.writeFloat(Ce)},writeDoubleField:function(Q,Ce){this.writeTag(Q,Ye.Fixed64),this.writeDouble(Ce)},writeBooleanField:function(Q,Ce){this.writeVarintField(Q,Boolean(Ce))}}},36:function(Vn){Vn.exports=function(){"use strict";function Dn(Y,ne,be,Me,Ge){!function gt(xt,Tt,vn,gn,gi){for(;gn>vn;){if(gn-vn>600){var yi=gn-vn+1,Vi=Tt-vn+1,Qe=Math.log(yi),Q=.5*Math.exp(2*Qe/3),Ce=.5*Math.sqrt(Qe*Q*(yi-Q)/yi)*(Vi-yi/2<0?-1:1);gt(xt,Tt,Math.max(vn,Math.floor(Tt-Vi*Q/yi+Ce)),Math.min(gn,Math.floor(Tt+(yi-Vi)*Q/yi+Ce)),gi)}var pe=xt[Tt],Le=vn,Be=gn;for(ft(xt,vn,Tt),gi(xt[gn],pe)>0&&ft(xt,vn,gn);Le<Be;){for(ft(xt,Le,Be),Le++,Be--;gi(xt[Le],pe)<0;)Le++;for(;gi(xt[Be],pe)>0;)Be--}0===gi(xt[vn],pe)?ft(xt,vn,Be):ft(xt,++Be,gn),Be<=Tt&&(vn=Be+1),Tt<=Be&&(gn=Be-1)}}(Y,ne,be||0,Me||Y.length-1,Ge||Dt)}function ft(Y,ne,be){var Me=Y[ne];Y[ne]=Y[be],Y[be]=Me}function Dt(Y,ne){return Y<ne?-1:Y>ne?1:0}var Ye=function(Y){void 0===Y&&(Y=9),this._maxEntries=Math.max(4,Y),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Ot(Y,ne,be){if(!be)return ne.indexOf(Y);for(var Me=0;Me<ne.length;Me++)if(be(Y,ne[Me]))return Me;return-1}function Re(Y,ne){de(Y,0,Y.children.length,ne,Y)}function de(Y,ne,be,Me,Ge){Ge||(Ge=X(null)),Ge.minX=1/0,Ge.minY=1/0,Ge.maxX=-1/0,Ge.maxY=-1/0;for(var gt=ne;gt<be;gt++){var xt=Y.children[gt];Ee(Ge,Y.leaf?Me(xt):xt)}return Ge}function Ee(Y,ne){return Y.minX=Math.min(Y.minX,ne.minX),Y.minY=Math.min(Y.minY,ne.minY),Y.maxX=Math.max(Y.maxX,ne.maxX),Y.maxY=Math.max(Y.maxY,ne.maxY),Y}function C(Y,ne){return Y.minX-ne.minX}function w(Y,ne){return Y.minY-ne.minY}function R(Y){return(Y.maxX-Y.minX)*(Y.maxY-Y.minY)}function O(Y){return Y.maxX-Y.minX+(Y.maxY-Y.minY)}function k(Y,ne){return Y.minX<=ne.minX&&Y.minY<=ne.minY&&ne.maxX<=Y.maxX&&ne.maxY<=Y.maxY}function W(Y,ne){return ne.minX<=Y.maxX&&ne.minY<=Y.maxY&&ne.maxX>=Y.minX&&ne.maxY>=Y.minY}function X(Y){return{children:Y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function ee(Y,ne,be,Me,Ge){for(var gt=[ne,be];gt.length;)if(!((be=gt.pop())-(ne=gt.pop())<=Me)){var xt=ne+Math.ceil((be-ne)/Me/2)*Me;Dn(Y,xt,ne,be,Ge),gt.push(ne,xt,xt,be)}}return Ye.prototype.all=function(){return this._all(this.data,[])},Ye.prototype.search=function(Y){var ne=this.data,be=[];if(!W(Y,ne))return be;for(var Me=this.toBBox,Ge=[];ne;){for(var gt=0;gt<ne.children.length;gt++){var xt=ne.children[gt],Tt=ne.leaf?Me(xt):xt;W(Y,Tt)&&(ne.leaf?be.push(xt):k(Y,Tt)?this._all(xt,be):Ge.push(xt))}ne=Ge.pop()}return be},Ye.prototype.collides=function(Y){var ne=this.data;if(!W(Y,ne))return!1;for(var be=[];ne;){for(var Me=0;Me<ne.children.length;Me++){var Ge=ne.children[Me],gt=ne.leaf?this.toBBox(Ge):Ge;if(W(Y,gt)){if(ne.leaf||k(Y,gt))return!0;be.push(Ge)}}ne=be.pop()}return!1},Ye.prototype.load=function(Y){if(!Y||!Y.length)return this;if(Y.length<this._minEntries){for(var ne=0;ne<Y.length;ne++)this.insert(Y[ne]);return this}var be=this._build(Y.slice(),0,Y.length-1,0);if(this.data.children.length)if(this.data.height===be.height)this._splitRoot(this.data,be);else{if(this.data.height<be.height){var Me=this.data;this.data=be,be=Me}this._insert(be,this.data.height-be.height-1,!0)}else this.data=be;return this},Ye.prototype.insert=function(Y){return Y&&this._insert(Y,this.data.height-1),this},Ye.prototype.clear=function(){return this.data=X([]),this},Ye.prototype.remove=function(Y,ne){if(!Y)return this;for(var be,Me,Ge,gt=this.data,xt=this.toBBox(Y),Tt=[],vn=[];gt||Tt.length;){if(gt||(gt=Tt.pop(),Me=Tt[Tt.length-1],be=vn.pop(),Ge=!0),gt.leaf){var gn=Ot(Y,gt.children,ne);if(-1!==gn)return gt.children.splice(gn,1),Tt.push(gt),this._condense(Tt),this}Ge||gt.leaf||!k(gt,xt)?Me?(be++,gt=Me.children[be],Ge=!1):gt=null:(Tt.push(gt),vn.push(be),be=0,Me=gt,gt=gt.children[0])}return this},Ye.prototype.toBBox=function(Y){return Y},Ye.prototype.compareMinX=function(Y,ne){return Y.minX-ne.minX},Ye.prototype.compareMinY=function(Y,ne){return Y.minY-ne.minY},Ye.prototype.toJSON=function(){return this.data},Ye.prototype.fromJSON=function(Y){return this.data=Y,this},Ye.prototype._all=function(Y,ne){for(var be=[];Y;)Y.leaf?ne.push.apply(ne,Y.children):be.push.apply(be,Y.children),Y=be.pop();return ne},Ye.prototype._build=function(Y,ne,be,Me){var Ge,gt=be-ne+1,xt=this._maxEntries;if(gt<=xt)return Re(Ge=X(Y.slice(ne,be+1)),this.toBBox),Ge;Me||(Me=Math.ceil(Math.log(gt)/Math.log(xt)),xt=Math.ceil(gt/Math.pow(xt,Me-1))),(Ge=X([])).leaf=!1,Ge.height=Me;var Tt=Math.ceil(gt/xt),vn=Tt*Math.ceil(Math.sqrt(xt));ee(Y,ne,be,vn,this.compareMinX);for(var gn=ne;gn<=be;gn+=vn){var gi=Math.min(gn+vn-1,be);ee(Y,gn,gi,Tt,this.compareMinY);for(var yi=gn;yi<=gi;yi+=Tt){var Vi=Math.min(yi+Tt-1,gi);Ge.children.push(this._build(Y,yi,Vi,Me-1))}}return Re(Ge,this.toBBox),Ge},Ye.prototype._chooseSubtree=function(Y,ne,be,Me){for(;Me.push(ne),!ne.leaf&&Me.length-1!==be;){for(var Ge=1/0,gt=1/0,xt=void 0,Tt=0;Tt<ne.children.length;Tt++){var vn=ne.children[Tt],gn=R(vn),gi=(yi=Y,Vi=vn,(Math.max(Vi.maxX,yi.maxX)-Math.min(Vi.minX,yi.minX))*(Math.max(Vi.maxY,yi.maxY)-Math.min(Vi.minY,yi.minY))-gn);gi<gt?(gt=gi,Ge=gn<Ge?gn:Ge,xt=vn):gi===gt&&gn<Ge&&(Ge=gn,xt=vn)}ne=xt||ne.children[0]}var yi,Vi;return ne},Ye.prototype._insert=function(Y,ne,be){var Me=be?Y:this.toBBox(Y),Ge=[],gt=this._chooseSubtree(Me,this.data,ne,Ge);for(gt.children.push(Y),Ee(gt,Me);ne>=0&&Ge[ne].children.length>this._maxEntries;)this._split(Ge,ne),ne--;this._adjustParentBBoxes(Me,Ge,ne)},Ye.prototype._split=function(Y,ne){var be=Y[ne],Me=be.children.length,Ge=this._minEntries;this._chooseSplitAxis(be,Ge,Me);var gt=this._chooseSplitIndex(be,Ge,Me),xt=X(be.children.splice(gt,be.children.length-gt));xt.height=be.height,xt.leaf=be.leaf,Re(be,this.toBBox),Re(xt,this.toBBox),ne?Y[ne-1].children.push(xt):this._splitRoot(be,xt)},Ye.prototype._splitRoot=function(Y,ne){this.data=X([Y,ne]),this.data.height=Y.height+1,this.data.leaf=!1,Re(this.data,this.toBBox)},Ye.prototype._chooseSplitIndex=function(Y,ne,be){for(var Me,Ge,gt,xt,Tt,vn,gn,gi=1/0,yi=1/0,Vi=ne;Vi<=be-ne;Vi++){var Qe=de(Y,0,Vi,this.toBBox),Q=de(Y,Vi,be,this.toBBox),Ce=(Ge=Qe,gt=Q,void 0,void 0,void 0,void 0,xt=Math.max(Ge.minX,gt.minX),Tt=Math.max(Ge.minY,gt.minY),vn=Math.min(Ge.maxX,gt.maxX),gn=Math.min(Ge.maxY,gt.maxY),Math.max(0,vn-xt)*Math.max(0,gn-Tt)),q=R(Qe)+R(Q);Ce<gi?(gi=Ce,Me=Vi,yi=q<yi?q:yi):Ce===gi&&q<yi&&(yi=q,Me=Vi)}return Me||be-ne},Ye.prototype._chooseSplitAxis=function(Y,ne,be){var Me=Y.leaf?this.compareMinX:C,Ge=Y.leaf?this.compareMinY:w;this._allDistMargin(Y,ne,be,Me)<this._allDistMargin(Y,ne,be,Ge)&&Y.children.sort(Me)},Ye.prototype._allDistMargin=function(Y,ne,be,Me){Y.children.sort(Me);for(var Ge=this.toBBox,gt=de(Y,0,ne,Ge),xt=de(Y,be-ne,be,Ge),Tt=O(gt)+O(xt),vn=ne;vn<be-ne;vn++){var gn=Y.children[vn];Ee(gt,Y.leaf?Ge(gn):gn),Tt+=O(gt)}for(var gi=be-ne-1;gi>=ne;gi--){var yi=Y.children[gi];Ee(xt,Y.leaf?Ge(yi):yi),Tt+=O(xt)}return Tt},Ye.prototype._adjustParentBBoxes=function(Y,ne,be){for(var Me=be;Me>=0;Me--)Ee(ne[Me],Y)},Ye.prototype._condense=function(Y){for(var ne=Y.length-1,be=void 0;ne>=0;ne--)0===Y[ne].children.length?ne>0?(be=Y[ne-1].children).splice(be.indexOf(Y[ne]),1):this.clear():Re(Y[ne],this.toBBox)},Ye}()},856:(Vn,Dn)=>{var ft,Ye;void 0!==(Ye="function"==typeof(ft=function(){return{XLink_1_0:{n:"XLink_1_0",dens:"http://www.w3.org/1999/xlink",dans:"http://www.w3.org/1999/xlink",tis:[{ln:"ResourceType",tn:"resourceType",ps:[{n:"content",col:!0,t:"ae"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"role",t:"a"},{n:"title",t:"a"},{n:"label",ti:"NCName",t:"a"}]},{ln:"LocatorType",tn:"locatorType",ps:[{n:"locatorTitle",mno:0,col:!0,en:"title",ti:".TitleEltType"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"href",rq:!0,t:"a"},{n:"role",t:"a"},{n:"title",t:"a"},{n:"label",ti:"NCName",t:"a"}]},{ln:"Extended",tn:"extended",ps:[{n:"extendedModel",mno:0,col:!0,etis:[{en:"title",ti:".TitleEltType"},{en:"resource",ti:".ResourceType"},{en:"locator",ti:".LocatorType"},{en:"arc",ti:".ArcType"}],t:"es"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"role",t:"a"},{n:"title",t:"a"}]},{ln:"Simple",tn:"simple",ps:[{n:"content",col:!0,t:"ae"},{n:"type",ti:"Token",t:"a"},{n:"href",t:"a"},{n:"role",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"Token",t:"a"},{n:"actuate",ti:"Token",t:"a"}]},{ln:"TitleEltType",tn:"titleEltType",ps:[{n:"content",col:!0,t:"ae"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"lang",an:{lp:"lang",ns:"http://www.w3.org/XML/1998/namespace"},t:"a"}]},{ln:"ArcType",tn:"arcType",ps:[{n:"locatorTitle",mno:0,col:!0,en:"title",ti:".TitleEltType"},{n:"type",rq:!0,ti:"Token",t:"a"},{n:"arcrole",t:"a"},{n:"title",t:"a"},{n:"show",ti:"Token",t:"a"},{n:"actuate",ti:"Token",t:"a"},{n:"from",ti:"NCName",t:"a"},{n:"to",ti:"NCName",t:"a"}]},{t:"enum",ln:"TypeType",bti:"Token",vs:["simple","extended","title","resource","locator","arc"]},{t:"enum",ln:"ShowType",bti:"Token",vs:["new","replace","embed","other","none"]},{t:"enum",ln:"ActuateType",bti:"Token",vs:["onLoad","onRequest","other","none"]}],eis:[{en:"arc",ti:".ArcType"},{en:"resource",ti:".ResourceType"},{en:"locator",ti:".LocatorType"},{en:"title",ti:".TitleEltType"}]}}})?ft.apply(Dn,[]):ft)&&(Vn.exports=Ye)},402:function(Vn,Dn){var Ye;void 0!==(Ye=function(){var C=function(Y){var ne=Y.tagName;return"http://www.w3.org/1999/xhtml"===Y.namespaceURI&&(ne=ne.toLowerCase()),ne},R=function(Y){return Array.prototype.map.call(Y.childNodes,function(ne){return ee(ne)}).join("")},O=function(Y,ne){var be="<"+C(Y);return be+=function(Y,ne){return Array.prototype.map.call(Y.attributes||Y.attrs,function(Me){return Me.name}).indexOf("xmlns")>=0||!ne&&Y.namespaceURI===Y.parentNode.namespaceURI?"":' xmlns="'+Y.namespaceURI+'"'}(Y,ne),Array.prototype.forEach.call(Y.attributes||Y.attrs,function(Me){be+=function(Y){return" "+Y.name+'="'+function(Y){return Y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}(Y.value)+'"'}(Me)}),Y.childNodes.length>0?(be+=">",be+=R(Y),be+="</"+C(Y)+">"):be+="/>",be},ee=function(Y,ne){var be=ne&&ne.rootNode;return"#document"===Y.nodeName||"#document-fragment"===Y.nodeName?R(Y):Y.tagName?O(Y,be):"#text"===Y.nodeName?function(Y){return function(Y){return Y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}(Y.nodeValue||Y.value||"")}(Y):"#comment"===Y.nodeName?function(Y){return"\x3c!--"+Y.data.replace(/-/g,"&#45;")+"--\x3e"}(Y):"#cdata-section"===Y.nodeName?function(Y){return"<![CDATA["+Y.nodeValue+"]]>"}(Y):void 0};return{serializeToString:function(Y){return function(Y){return Y.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F]/g,"")}(ee(Y,{rootNode:!0}))}}}.apply(Dn,[]))&&(Vn.exports=Ye)},852:(Vn,Dn,ft)=>{"use strict";function Dt(c){return"function"==typeof c}let Ye=!1;const Ot={Promise:void 0,set useDeprecatedSynchronousErrorHandling(c){if(c){const a=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+a.stack)}else Ye&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Ye=c},get useDeprecatedSynchronousErrorHandling(){return Ye}};function Re(c){setTimeout(()=>{throw c},0)}const de={closed:!0,next(c){},error(c){if(Ot.useDeprecatedSynchronousErrorHandling)throw c;Re(c)},complete(){}},Ee=Array.isArray||(c=>c&&"number"==typeof c.length);function C(c){return null!==c&&"object"==typeof c}const R=(()=>{function c(a){return Error.call(this),this.message=a?`${a.length} errors occurred during unsubscription:\n${a.map((l,h)=>`${h+1}) ${l.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=a,this}return c.prototype=Object.create(Error.prototype),c})();class O{constructor(a){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,a&&(this._ctorUnsubscribe=!0,this._unsubscribe=a)}unsubscribe(){let a;if(this.closed)return;let{_parentOrParents:l,_ctorUnsubscribe:h,_unsubscribe:d,_subscriptions:f}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,l instanceof O)l.remove(this);else if(null!==l)for(let m=0;m<l.length;++m)l[m].remove(this);if(Dt(d)){h&&(this._unsubscribe=void 0);try{d.call(this)}catch(m){a=m instanceof R?k(m.errors):[m]}}if(Ee(f)){let m=-1,g=f.length;for(;++m<g;){const y=f[m];if(C(y))try{y.unsubscribe()}catch(_){a=a||[],_ instanceof R?a=a.concat(k(_.errors)):a.push(_)}}}if(a)throw new R(a)}add(a){let l=a;if(!a)return O.EMPTY;switch(typeof a){case"function":l=new O(a);case"object":if(l===this||l.closed||"function"!=typeof l.unsubscribe)return l;if(this.closed)return l.unsubscribe(),l;if(!(l instanceof O)){const f=l;l=new O,l._subscriptions=[f]}break;default:throw new Error("unrecognized teardown "+a+" added to Subscription.")}let{_parentOrParents:h}=l;if(null===h)l._parentOrParents=this;else if(h instanceof O){if(h===this)return l;l._parentOrParents=[h,this]}else{if(-1!==h.indexOf(this))return l;h.push(this)}const d=this._subscriptions;return null===d?this._subscriptions=[l]:d.push(l),l}remove(a){const l=this._subscriptions;if(l){const h=l.indexOf(a);-1!==h&&l.splice(h,1)}}}var c;function k(c){return c.reduce((a,l)=>a.concat(l instanceof R?l.errors:l),[])}O.EMPTY=((c=new O).closed=!0,c);const W="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class ee extends O{constructor(a,l,h){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=de;break;case 1:if(!a){this.destination=de;break}if("object"==typeof a){a instanceof ee?(this.syncErrorThrowable=a.syncErrorThrowable,this.destination=a,a.add(this)):(this.syncErrorThrowable=!0,this.destination=new Y(this,a));break}default:this.syncErrorThrowable=!0,this.destination=new Y(this,a,l,h)}}[W](){return this}static create(a,l,h){const d=new ee(a,l,h);return d.syncErrorThrowable=!1,d}next(a){this.isStopped||this._next(a)}error(a){this.isStopped||(this.isStopped=!0,this._error(a))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(a){this.destination.next(a)}_error(a){this.destination.error(a),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:a}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=a,this}}class Y extends ee{constructor(a,l,h,d){super(),this._parentSubscriber=a;let f,m=this;Dt(l)?f=l:l&&(f=l.next,h=l.error,d=l.complete,l!==de&&(m=Object.create(l),Dt(m.unsubscribe)&&this.add(m.unsubscribe.bind(m)),m.unsubscribe=this.unsubscribe.bind(this))),this._context=m,this._next=f,this._error=h,this._complete=d}next(a){if(!this.isStopped&&this._next){const{_parentSubscriber:l}=this;Ot.useDeprecatedSynchronousErrorHandling&&l.syncErrorThrowable?this.__tryOrSetError(l,this._next,a)&&this.unsubscribe():this.__tryOrUnsub(this._next,a)}}error(a){if(!this.isStopped){const{_parentSubscriber:l}=this,{useDeprecatedSynchronousErrorHandling:h}=Ot;if(this._error)h&&l.syncErrorThrowable?(this.__tryOrSetError(l,this._error,a),this.unsubscribe()):(this.__tryOrUnsub(this._error,a),this.unsubscribe());else if(l.syncErrorThrowable)h?(l.syncErrorValue=a,l.syncErrorThrown=!0):Re(a),this.unsubscribe();else{if(this.unsubscribe(),h)throw a;Re(a)}}}complete(){if(!this.isStopped){const{_parentSubscriber:a}=this;if(this._complete){const l=()=>this._complete.call(this._context);Ot.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable?(this.__tryOrSetError(a,l),this.unsubscribe()):(this.__tryOrUnsub(l),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(a,l){try{a.call(this._context,l)}catch(h){if(this.unsubscribe(),Ot.useDeprecatedSynchronousErrorHandling)throw h;Re(h)}}__tryOrSetError(a,l,h){if(!Ot.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{l.call(this._context,h)}catch(d){return Ot.useDeprecatedSynchronousErrorHandling?(a.syncErrorValue=d,a.syncErrorThrown=!0,!0):(Re(d),!0)}return!1}_unsubscribe(){const{_parentSubscriber:a}=this;this._context=null,this._parentSubscriber=null,a.unsubscribe()}}const Me="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ge(c){return c}function xt(c){return 0===c.length?Ge:1===c.length?c[0]:function(l){return c.reduce((h,d)=>d(h),l)}}let Tt=(()=>{class c{constructor(l){this._isScalar=!1,l&&(this._subscribe=l)}lift(l){const h=new c;return h.source=this,h.operator=l,h}subscribe(l,h,d){const{operator:f}=this,m=function be(c,a,l){if(c){if(c instanceof ee)return c;if(c[W])return c[W]()}return c||a||l?new ee(c,a,l):new ee(de)}(l,h,d);if(m.add(f?f.call(m,this.source):this.source||Ot.useDeprecatedSynchronousErrorHandling&&!m.syncErrorThrowable?this._subscribe(m):this._trySubscribe(m)),Ot.useDeprecatedSynchronousErrorHandling&&m.syncErrorThrowable&&(m.syncErrorThrowable=!1,m.syncErrorThrown))throw m.syncErrorValue;return m}_trySubscribe(l){try{return this._subscribe(l)}catch(h){Ot.useDeprecatedSynchronousErrorHandling&&(l.syncErrorThrown=!0,l.syncErrorValue=h),function ne(c){for(;c;){const{closed:a,destination:l,isStopped:h}=c;if(a||h)return!1;c=l&&l instanceof ee?l:null}return!0}(l)?l.error(h):console.warn(h)}}forEach(l,h){return new(h=vn(h))((d,f)=>{let m;m=this.subscribe(g=>{try{l(g)}catch(y){f(y),m&&m.unsubscribe()}},f,d)})}_subscribe(l){const{source:h}=this;return h&&h.subscribe(l)}[Me](){return this}pipe(...l){return 0===l.length?this:xt(l)(this)}toPromise(l){return new(l=vn(l))((h,d)=>{let f;this.subscribe(m=>f=m,m=>d(m),()=>h(f))})}}return c.create=a=>new c(a),c})();function vn(c){if(c||(c=Ot.Promise||Promise),!c)throw new Error("no Promise impl found");return c}const gi=(()=>{function c(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return c.prototype=Object.create(Error.prototype),c})();class yi extends O{constructor(a,l){super(),this.subject=a,this.subscriber=l,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const a=this.subject,l=a.observers;if(this.subject=null,!l||0===l.length||a.isStopped||a.closed)return;const h=l.indexOf(this.subscriber);-1!==h&&l.splice(h,1)}}class Vi extends ee{constructor(a){super(a),this.destination=a}}let Qe=(()=>{class c extends Tt{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[W](){return new Vi(this)}lift(l){const h=new Q(this,this);return h.operator=l,h}next(l){if(this.closed)throw new gi;if(!this.isStopped){const{observers:h}=this,d=h.length,f=h.slice();for(let m=0;m<d;m++)f[m].next(l)}}error(l){if(this.closed)throw new gi;this.hasError=!0,this.thrownError=l,this.isStopped=!0;const{observers:h}=this,d=h.length,f=h.slice();for(let m=0;m<d;m++)f[m].error(l);this.observers.length=0}complete(){if(this.closed)throw new gi;this.isStopped=!0;const{observers:l}=this,h=l.length,d=l.slice();for(let f=0;f<h;f++)d[f].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(l){if(this.closed)throw new gi;return super._trySubscribe(l)}_subscribe(l){if(this.closed)throw new gi;return this.hasError?(l.error(this.thrownError),O.EMPTY):this.isStopped?(l.complete(),O.EMPTY):(this.observers.push(l),new yi(this,l))}asObservable(){const l=new Tt;return l.source=this,l}}return c.create=(a,l)=>new Q(a,l),c})();class Q extends Qe{constructor(a,l){super(),this.destination=a,this.source=l}next(a){const{destination:l}=this;l&&l.next&&l.next(a)}error(a){const{destination:l}=this;l&&l.error&&this.destination.error(a)}complete(){const{destination:a}=this;a&&a.complete&&this.destination.complete()}_subscribe(a){const{source:l}=this;return l?this.source.subscribe(a):O.EMPTY}}function Ce(c){return c&&"function"==typeof c.schedule}function q(c,a){return function(h){if("function"!=typeof c)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return h.lift(new we(c,a))}}class we{constructor(a,l){this.project=a,this.thisArg=l}call(a,l){return l.subscribe(new pe(a,this.project,this.thisArg))}}class pe extends ee{constructor(a,l,h){super(a),this.project=l,this.count=0,this.thisArg=h||this}_next(a){let l;try{l=this.project.call(this.thisArg,a,this.count++)}catch(h){return void this.destination.error(h)}this.destination.next(l)}}const Le=c=>a=>{for(let l=0,h=c.length;l<h&&!a.closed;l++)a.next(c[l]);a.complete()},lt=function ht(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}(),Sr=c=>c&&"number"==typeof c.length&&"function"!=typeof c;function rr(c){return!!c&&"function"!=typeof c.subscribe&&"function"==typeof c.then}const Ri=c=>{if(c&&"function"==typeof c[Me])return(c=>a=>{const l=c[Me]();if("function"!=typeof l.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return l.subscribe(a)})(c);if(Sr(c))return Le(c);if(rr(c))return(c=>a=>(c.then(l=>{a.closed||(a.next(l),a.complete())},l=>a.error(l)).then(null,Re),a))(c);if(c&&"function"==typeof c[lt])return(c=>a=>{const l=c[lt]();for(;;){let h;try{h=l.next()}catch(d){return a.error(d),a}if(h.done){a.complete();break}if(a.next(h.value),a.closed)break}return"function"==typeof l.return&&a.add(()=>{l.return&&l.return()}),a})(c);{const l=`You provided ${C(c)?"an invalid object":`'${c}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(l)}};function Zu(c,a){return new Tt(l=>{const h=new O;let d=0;return h.add(a.schedule(function(){d!==c.length?(l.next(c[d++]),l.closed||h.add(this.schedule())):l.complete()})),h})}function Pn(c,a){return a?function Bi(c,a){if(null!=c){if(function ow(c){return c&&"function"==typeof c[Me]}(c))return function to(c,a){return new Tt(l=>{const h=new O;return h.add(a.schedule(()=>{const d=c[Me]();h.add(d.subscribe({next(f){h.add(a.schedule(()=>l.next(f)))},error(f){h.add(a.schedule(()=>l.error(f)))},complete(){h.add(a.schedule(()=>l.complete()))}}))})),h})}(c,a);if(rr(c))return function lr(c,a){return new Tt(l=>{const h=new O;return h.add(a.schedule(()=>c.then(d=>{h.add(a.schedule(()=>{l.next(d),h.add(a.schedule(()=>l.complete()))}))},d=>{h.add(a.schedule(()=>l.error(d)))}))),h})}(c,a);if(Sr(c))return Zu(c,a);if(function aw(c){return c&&"function"==typeof c[lt]}(c)||"string"==typeof c)return function hp(c,a){if(!c)throw new Error("Iterable cannot be null");return new Tt(l=>{const h=new O;let d;return h.add(()=>{d&&"function"==typeof d.return&&d.return()}),h.add(a.schedule(()=>{d=c[lt](),h.add(a.schedule(function(){if(l.closed)return;let f,m;try{const g=d.next();f=g.value,m=g.done}catch(g){return void l.error(g)}m?l.complete():(l.next(f),this.schedule())}))})),h})}(c,a)}throw new TypeError((null!==c&&typeof c||c)+" is not observable")}(c,a):c instanceof Tt?c:new Tt(Ri(c))}class _g extends ee{constructor(a){super(),this.parent=a}_next(a){this.parent.notifyNext(a)}_error(a){this.parent.notifyError(a),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class vg extends ee{notifyNext(a){this.destination.next(a)}notifyError(a){this.destination.error(a)}notifyComplete(){this.destination.complete()}}function bg(c,a){if(a.closed)return;if(c instanceof Tt)return c.subscribe(a);let l;try{l=Ri(c)(a)}catch(h){a.error(h)}return l}function As(c,a,l=Number.POSITIVE_INFINITY){return"function"==typeof a?h=>h.pipe(As((d,f)=>Pn(c(d,f)).pipe(q((m,g)=>a(d,m,f,g))),l)):("number"==typeof a&&(l=a),h=>h.lift(new eoe(c,l)))}class eoe{constructor(a,l=Number.POSITIVE_INFINITY){this.project=a,this.concurrent=l}call(a,l){return l.subscribe(new toe(a,this.project,this.concurrent))}}class toe extends vg{constructor(a,l,h=Number.POSITIVE_INFINITY){super(a),this.project=l,this.concurrent=h,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(a){this.active<this.concurrent?this._tryNext(a):this.buffer.push(a)}_tryNext(a){let l;const h=this.index++;try{l=this.project(a,h)}catch(d){return void this.destination.error(d)}this.active++,this._innerSub(l)}_innerSub(a){const l=new _g(this),h=this.destination;h.add(l);const d=bg(a,l);d!==l&&h.add(d)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(a){this.destination.next(a)}notifyComplete(){const a=this.buffer;this.active--,a.length>0?this._next(a.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Sg(c=Number.POSITIVE_INFINITY){return As(Ge,c)}function kI(c,a){return a?Zu(c,a):new Tt(Le(c))}function VI(...c){let a=Number.POSITIVE_INFINITY,l=null,h=c[c.length-1];return Ce(h)?(l=c.pop(),c.length>1&&"number"==typeof c[c.length-1]&&(a=c.pop())):"number"==typeof h&&(a=c.pop()),null===l&&1===c.length&&c[0]instanceof Tt?c[0]:Sg(a)(kI(c,l))}function lw(){return function(a){return a.lift(new noe(a))}}class noe{constructor(a){this.connectable=a}call(a,l){const{connectable:h}=this;h._refCount++;const d=new ioe(a,h),f=l.subscribe(d);return d.closed||(d.connection=h.connect()),f}}class ioe extends ee{constructor(a,l){super(a),this.connectable=l}_unsubscribe(){const{connectable:a}=this;if(!a)return void(this.connection=null);this.connectable=null;const l=a._refCount;if(l<=0)return void(this.connection=null);if(a._refCount=l-1,l>1)return void(this.connection=null);const{connection:h}=this,d=a._connection;this.connection=null,d&&(!h||d===h)&&d.unsubscribe()}}class BI extends Tt{constructor(a,l){super(),this.source=a,this.subjectFactory=l,this._refCount=0,this._isComplete=!1}_subscribe(a){return this.getSubject().subscribe(a)}getSubject(){const a=this._subject;return(!a||a.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let a=this._connection;return a||(this._isComplete=!1,a=this._connection=new O,a.add(this.source.subscribe(new soe(this.getSubject(),this))),a.closed&&(this._connection=null,a=O.EMPTY)),a}refCount(){return lw()(this)}}const roe=(()=>{const c=BI.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}}})();class soe extends Vi{constructor(a,l){super(a),this.connectable=l}_error(a){this._unsubscribe(),super._error(a)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const a=this.connectable;if(a){this.connectable=null;const l=a._connection;a._refCount=0,a._subject=null,a._connection=null,l&&l.unsubscribe()}}}class loe{constructor(a,l){this.subjectFactory=a,this.selector=l}call(a,l){const{selector:h}=this,d=this.subjectFactory(),f=h(d).subscribe(a);return f.add(l.subscribe(d)),f}}function coe(){return new Qe}function o5(){return c=>lw()(function aoe(c,a){return function(h){let d;if(d="function"==typeof c?c:function(){return c},"function"==typeof a)return h.lift(new loe(d,a));const f=Object.create(h,roe);return f.source=h,f.subjectFactory=d,f}}(coe)(c))}function dr(c){for(let a in c)if(c[a]===dr)return a;throw Error("Could not find renamed property on target object.")}function UI(c,a){for(const l in a)a.hasOwnProperty(l)&&!c.hasOwnProperty(l)&&(c[l]=a[l])}function fr(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(fr).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return`${c.overriddenName}`;if(c.name)return`${c.name}`;const a=c.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function zI(c,a){return null==c||""===c?null===a?"":a:null==a||""===a?c:c+" "+a}const uoe=dr({__forward_ref__:dr});function Tr(c){return c.__forward_ref__=Tr,c.toString=function(){return fr(this())},c}function Bn(c){return GI(c)?c():c}function GI(c){return"function"==typeof c&&c.hasOwnProperty(uoe)&&c.__forward_ref__===Tr}class rt extends Error{constructor(a,l){super(function cw(c,a){return`NG0${Math.abs(c)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function qn(c){return"string"==typeof c?c:null==c?"":String(c)}function uw(c,a){throw new rt(-201,!1)}function ja(c,a){null==c&&function Zi(c,a,l,h){throw new Error(`ASSERTION ERROR: ${c}`+(null==h?"":` [Expected=> ${l} ${h} ${a} <=Actual]`))}(a,c,null,"!=")}function Fe(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}function Gt(c){return{providers:c.providers||[],imports:c.imports||[]}}function hw(c){return a5(c,dw)||a5(c,c5)}function a5(c,a){return c.hasOwnProperty(a)?c[a]:null}function l5(c){return c&&(c.hasOwnProperty(HI)||c.hasOwnProperty(voe))?c[HI]:null}const dw=dr({\u0275prov:dr}),HI=dr({\u0275inj:dr}),c5=dr({ngInjectableDef:dr}),voe=dr({ngInjectorDef:dr});var On=(()=>((On=On||{})[On.Default=0]="Default",On[On.Host=1]="Host",On[On.Self=2]="Self",On[On.SkipSelf=4]="SkipSelf",On[On.Optional=8]="Optional",On))();let jI;function Ol(c){const a=jI;return jI=c,a}function u5(c,a,l){const h=hw(c);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:l&On.Optional?null:void 0!==a?a:void uw(fr(c))}function gd(c){return{toString:c}.toString()}var sc=(()=>((sc=sc||{})[sc.OnPush=0]="OnPush",sc[sc.Default=1]="Default",sc))(),oc=(()=>(function(c){c[c.Emulated=0]="Emulated",c[c.None=2]="None",c[c.ShadowDom=3]="ShadowDom"}(oc||(oc={})),oc))();const wr=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Tg={},Wi=[],fw=dr({\u0275cmp:dr}),WI=dr({\u0275dir:dr}),XI=dr({\u0275pipe:dr}),h5=dr({\u0275mod:dr}),Ju=dr({\u0275fac:dr}),h0=dr({__NG_ELEMENT_ID__:dr});let Soe=0;function He(c){return gd(()=>{const l=!0===c.standalone,h={},d={type:c.type,providersResolver:null,decls:c.decls,vars:c.vars,factory:null,template:c.template||null,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:c.exportAs||null,onPush:c.changeDetection===sc.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&c.dependencies||null,getStandaloneInjector:null,selectors:c.selectors||Wi,viewQuery:c.viewQuery||null,features:c.features||null,data:c.data||{},encapsulation:c.encapsulation||oc.Emulated,id:"c"+Soe++,styles:c.styles||Wi,_:null,setInput:null,schemas:c.schemas||null,tView:null},f=c.dependencies,m=c.features;return d.inputs=p5(c.inputs,h),d.outputs=p5(c.outputs),m&&m.forEach(g=>g(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(d5).filter(f5):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(Jo).filter(f5):null,d})}function d5(c){return sr(c)||Ko(c)}function f5(c){return null!==c}function jt(c){return gd(()=>({type:c.type,bootstrap:c.bootstrap||Wi,declarations:c.declarations||Wi,imports:c.imports||Wi,exports:c.exports||Wi,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null}))}function p5(c,a){if(null==c)return Tg;const l={};for(const h in c)if(c.hasOwnProperty(h)){let d=c[h],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),l[d]=h,a&&(a[d]=f)}return l}const Ke=He;function Po(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,standalone:!0===c.standalone,onDestroy:c.type.prototype.ngOnDestroy||null}}function sr(c){return c[fw]||null}function Ko(c){return c[WI]||null}function Jo(c){return c[XI]||null}function Wa(c,a){const l=c[h5]||null;if(!l&&!0===a)throw new Error(`Type ${fr(c)} does not have '\u0275mod' property.`);return l}function wa(c){return Array.isArray(c)&&"object"==typeof c[1]}function lc(c){return Array.isArray(c)&&!0===c[1]}function YI(c){return 0!=(8&c.flags)}function yw(c){return 2==(2&c.flags)}function _w(c){return 1==(1&c.flags)}function cc(c){return null!==c.template}function Moe(c){return 0!=(256&c[2])}function gp(c,a){return c.hasOwnProperty(Ju)?c[Ju]:null}class Ioe{constructor(a,l,h){this.previousValue=a,this.currentValue=l,this.firstChange=h}isFirstChange(){return this.firstChange}}function ps(){return y5}function y5(c){return c.type.prototype.ngOnChanges&&(c.setInput=Loe),Roe}function Roe(){const c=v5(this),a=c?.current;if(a){const l=c.previous;if(l===Tg)c.previous=a;else for(let h in a)l[h]=a[h];c.current=null,this.ngOnChanges(a)}}function Loe(c,a,l,h){const d=v5(c)||function Poe(c,a){return c[_5]=a}(c,{previous:Tg,current:null}),f=d.current||(d.current={}),m=d.previous,g=this.declaredInputs[l],y=m[g];f[g]=new Ioe(y&&y.currentValue,a,m===Tg),c[h]=a}ps.ngInherit=!0;const _5="__ngSimpleChanges__";function v5(c){return c[_5]||null}function Is(c){for(;Array.isArray(c);)c=c[0];return c}function vw(c,a){return Is(a[c])}function qa(c,a){return Is(a[c.index])}function eR(c,a){return c.data[a]}function Mg(c,a){return c[a]}function $a(c,a){const l=a[c];return wa(l)?l:l[0]}function bw(c){return 64==(64&c[2])}function yd(c,a){return null==a?null:c[a]}function b5(c){c[18]=0}function tR(c,a){c[5]+=a;let l=c,h=c[3];for(;null!==h&&(1===a&&1===l[5]||-1===a&&0===l[5]);)h[5]+=a,l=h,h=h[3]}const Wn={lFrame:I5(null),bindingsEnabled:!0};function T5(){return Wn.bindingsEnabled}function dt(){return Wn.lFrame.lView}function Li(){return Wn.lFrame.tView}function yt(c){return Wn.lFrame.contextLView=c,c[8]}function _t(c){return Wn.lFrame.contextLView=null,c}function Gs(){let c=w5();for(;null!==c&&64===c.type;)c=c.parent;return c}function w5(){return Wn.lFrame.currentTNode}function Kc(c,a){const l=Wn.lFrame;l.currentTNode=c,l.isParent=a}function nR(){return Wn.lFrame.isParent}function iR(){Wn.lFrame.isParent=!1}function Qo(){const c=Wn.lFrame;let a=c.bindingRootIndex;return-1===a&&(a=c.bindingRootIndex=c.tView.bindingStartIndex),a}function Dg(){return Wn.lFrame.bindingIndex++}function eh(c){const a=Wn.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+c,l}function $oe(c,a){const l=Wn.lFrame;l.bindingIndex=l.bindingRootIndex=c,rR(a)}function rR(c){Wn.lFrame.currentDirectiveIndex=c}function sR(c){const a=Wn.lFrame.currentDirectiveIndex;return-1===a?null:c[a]}function M5(){return Wn.lFrame.currentQueryIndex}function oR(c){Wn.lFrame.currentQueryIndex=c}function Zoe(c){const a=c[1];return 2===a.type?a.declTNode:1===a.type?c[6]:null}function D5(c,a,l){if(l&On.SkipSelf){let d=a,f=c;for(;!(d=d.parent,null!==d||l&On.Host||(d=Zoe(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;a=d,c=f}const h=Wn.lFrame=A5();return h.currentTNode=a,h.lView=c,!0}function aR(c){const a=A5(),l=c[1];Wn.lFrame=a,a.currentTNode=l.firstChild,a.lView=c,a.tView=l,a.contextLView=c,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function A5(){const c=Wn.lFrame,a=null===c?null:c.child;return null===a?I5(c):a}function I5(c){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=a),a}function R5(){const c=Wn.lFrame;return Wn.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}const L5=R5;function lR(){const c=R5();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function ea(){return Wn.lFrame.selectedIndex}function _d(c){Wn.lFrame.selectedIndex=c}function Wr(){const c=Wn.lFrame;return eR(c.tView,c.selectedIndex)}function Sw(c,a){for(let l=a.directiveStart,h=a.directiveEnd;l<h;l++){const f=c.data[l].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:g,ngAfterViewInit:y,ngAfterViewChecked:_,ngOnDestroy:v}=f;m&&(c.contentHooks||(c.contentHooks=[])).push(-l,m),g&&((c.contentHooks||(c.contentHooks=[])).push(l,g),(c.contentCheckHooks||(c.contentCheckHooks=[])).push(l,g)),y&&(c.viewHooks||(c.viewHooks=[])).push(-l,y),_&&((c.viewHooks||(c.viewHooks=[])).push(l,_),(c.viewCheckHooks||(c.viewCheckHooks=[])).push(l,_)),null!=v&&(c.destroyHooks||(c.destroyHooks=[])).push(l,v)}}function Tw(c,a,l){P5(c,a,3,l)}function ww(c,a,l,h){(3&c[2])===l&&P5(c,a,l,h)}function cR(c,a){let l=c[2];(3&l)===a&&(l&=2047,l+=1,c[2]=l)}function P5(c,a,l,h){const f=h??-1,m=a.length-1;let g=0;for(let y=void 0!==h?65535&c[18]:0;y<m;y++)if("number"==typeof a[y+1]){if(g=a[y],null!=h&&g>=h)break}else a[y]<0&&(c[18]+=65536),(g<f||-1==f)&&(sae(c,l,a,y),c[18]=(4294901760&c[18])+y+2),y++}function sae(c,a,l,h){const d=l[h]<0,f=l[h+1],g=c[d?-l[h]:l[h]];if(d){if(c[2]>>11<c[18]>>16&&(3&c[2])===a){c[2]+=2048;try{f.call(g)}finally{}}}else try{f.call(g)}finally{}}class y0{constructor(a,l,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=h}}function Cw(c,a,l){let h=0;for(;h<l.length;){const d=l[h];if("number"==typeof d){if(0!==d)break;h++;const f=l[h++],m=l[h++],g=l[h++];c.setAttribute(a,m,g,f)}else{const f=d,m=l[++h];N5(f)?c.setProperty(a,f,m):c.setAttribute(a,f,m),h++}}return h}function O5(c){return 3===c||4===c||6===c}function N5(c){return 64===c.charCodeAt(0)}function xw(c,a){if(null!==a&&0!==a.length)if(null===c||0===c.length)c=a.slice();else{let l=-1;for(let h=0;h<a.length;h++){const d=a[h];"number"==typeof d?l=d:0===l||F5(c,l,d,null,-1===l||2===l?a[++h]:null)}}return c}function F5(c,a,l,h,d){let f=0,m=c.length;if(-1===a)m=-1;else for(;f<c.length;){const g=c[f++];if("number"==typeof g){if(g===a){m=-1;break}if(g>a){m=f-1;break}}}for(;f<c.length;){const g=c[f];if("number"==typeof g)break;if(g===l){if(null===h)return void(null!==d&&(c[f+1]=d));if(h===c[f+1])return void(c[f+2]=d)}f++,null!==h&&f++,null!==d&&f++}-1!==m&&(c.splice(m,0,a),f=m+1),c.splice(f++,0,l),null!==h&&c.splice(f++,0,h),null!==d&&c.splice(f++,0,d)}function k5(c){return-1!==c}function Ag(c){return 32767&c}function Ig(c,a){let l=function uae(c){return c>>16}(c),h=a;for(;l>0;)h=h[15],l--;return h}let hR=!0;function Ew(c){const a=hR;return hR=c,a}let hae=0;const Jc={};function v0(c,a){const l=fR(c,a);if(-1!==l)return l;const h=a[1];h.firstCreatePass&&(c.injectorIndex=a.length,dR(h.data,c),dR(a,null),dR(h.blueprint,null));const d=Mw(c,a),f=c.injectorIndex;if(k5(d)){const m=Ag(d),g=Ig(d,a),y=g[1].data;for(let _=0;_<8;_++)a[f+_]=g[m+_]|y[m+_]}return a[f+8]=d,f}function dR(c,a){c.push(0,0,0,0,0,0,0,0,a)}function fR(c,a){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===a[c.injectorIndex+8]?-1:c.injectorIndex}function Mw(c,a){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;let l=0,h=null,d=a;for(;null!==d;){if(h=X5(d),null===h)return-1;if(l++,d=d[15],-1!==h.injectorIndex)return h.injectorIndex|l<<16}return-1}function Dw(c,a,l){!function dae(c,a,l){let h;"string"==typeof l?h=l.charCodeAt(0)||0:l.hasOwnProperty(h0)&&(h=l[h0]),null==h&&(h=l[h0]=hae++);const d=255&h;a.data[c+(d>>5)]|=1<<d}(c,a,l)}function U5(c,a,l){if(l&On.Optional||void 0!==c)return c;uw()}function z5(c,a,l,h){if(l&On.Optional&&void 0===h&&(h=null),0==(l&(On.Self|On.Host))){const d=c[9],f=Ol(void 0);try{return d?d.get(a,h,l&On.Optional):u5(a,h,l&On.Optional)}finally{Ol(f)}}return U5(h,0,l)}function G5(c,a,l,h=On.Default,d){if(null!==c){if(1024&a[2]){const m=function yae(c,a,l,h,d){let f=c,m=a;for(;null!==f&&null!==m&&1024&m[2]&&!(256&m[2]);){const g=H5(f,m,l,h|On.Self,Jc);if(g!==Jc)return g;let y=f.parent;if(!y){const _=m[21];if(_){const v=_.get(l,Jc,h);if(v!==Jc)return v}y=X5(m),m=m[15]}f=y}return d}(c,a,l,h,Jc);if(m!==Jc)return m}const f=H5(c,a,l,h,Jc);if(f!==Jc)return f}return z5(a,l,h,d)}function H5(c,a,l,h,d){const f=function mae(c){if("string"==typeof c)return c.charCodeAt(0)||0;const a=c.hasOwnProperty(h0)?c[h0]:void 0;return"number"==typeof a?a>=0?255&a:gae:a}(l);if("function"==typeof f){if(!D5(a,c,h))return h&On.Host?U5(d,0,h):z5(a,l,h,d);try{const m=f(h);if(null!=m||h&On.Optional)return m;uw()}finally{L5()}}else if("number"==typeof f){let m=null,g=fR(c,a),y=-1,_=h&On.Host?a[16][6]:null;for((-1===g||h&On.SkipSelf)&&(y=-1===g?Mw(c,a):a[g+8],-1!==y&&W5(h,!1)?(m=a[1],g=Ag(y),a=Ig(y,a)):g=-1);-1!==g;){const v=a[1];if(j5(f,g,v.data)){const b=pae(g,a,l,m,h,_);if(b!==Jc)return b}y=a[g+8],-1!==y&&W5(h,a[1].data[g+8]===_)&&j5(f,g,a)?(m=v,g=Ag(y),a=Ig(y,a)):g=-1}}return d}function pae(c,a,l,h,d,f){const m=a[1],g=m.data[c+8],v=Aw(g,m,l,null==h?yw(g)&&hR:h!=m&&0!=(3&g.type),d&On.Host&&f===g);return null!==v?b0(a,m,v,g):Jc}function Aw(c,a,l,h,d){const f=c.providerIndexes,m=a.data,g=1048575&f,y=c.directiveStart,v=f>>20,S=d?g+v:c.directiveEnd;for(let T=h?g:g+v;T<S;T++){const x=m[T];if(T<y&&l===x||T>=y&&x.type===l)return T}if(d){const T=m[y];if(T&&cc(T)&&T.type===l)return y}return null}function b0(c,a,l,h){let d=c[l];const f=a.data;if(function oae(c){return c instanceof y0}(d)){const m=d;m.resolving&&function hoe(c,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${c}`:"";throw new rt(-200,`Circular dependency in DI detected for ${c}${l}`)}(function ji(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():qn(c)}(f[l]));const g=Ew(m.canSeeViewProviders);m.resolving=!0;const y=m.injectImpl?Ol(m.injectImpl):null;D5(c,h,On.Default);try{d=c[l]=m.factory(void 0,f,c,h),a.firstCreatePass&&l>=h.directiveStart&&function rae(c,a,l){const{ngOnChanges:h,ngOnInit:d,ngDoCheck:f}=a.type.prototype;if(h){const m=y5(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(c,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(c,m)}d&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-c,d),f&&((l.preOrderHooks||(l.preOrderHooks=[])).push(c,f),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(c,f))}(l,f[l],a)}finally{null!==y&&Ol(y),Ew(g),m.resolving=!1,L5()}}return d}function j5(c,a,l){return!!(l[a+(c>>5)]&1<<c)}function W5(c,a){return!(c&On.Self||c&On.Host&&a)}class Rg{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,h){return G5(this._tNode,this._lView,a,h,l)}}function gae(){return new Rg(Gs(),dt())}function Fr(c){return gd(()=>{const a=c.prototype.constructor,l=a[Ju]||pR(a),h=Object.prototype;let d=Object.getPrototypeOf(c.prototype).constructor;for(;d&&d!==h;){const f=d[Ju]||pR(d);if(f&&f!==l)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function pR(c){return GI(c)?()=>{const a=pR(Bn(c));return a&&a()}:gp(c)}function X5(c){const a=c[1],l=a.type;return 2===l?a.declTNode:1===l?c[6]:null}function Lg(c){return function fae(c,a){if("class"===a)return c.classes;if("style"===a)return c.styles;const l=c.attrs;if(l){const h=l.length;let d=0;for(;d<h;){const f=l[d];if(O5(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<h&&"string"==typeof l[d];)d++;else{if(f===a)return l[d+1];d+=2}}}return null}(Gs(),c)}const Og="__parameters__";function Fg(c,a,l){return gd(()=>{const h=function mR(c){return function(...l){if(c){const h=c(...l);for(const d in h)this[d]=h[d]}}}(a);function d(...f){if(this instanceof d)return h.apply(this,f),this;const m=new d(...f);return g.annotation=m,g;function g(y,_,v){const b=y.hasOwnProperty(Og)?y[Og]:Object.defineProperty(y,Og,{value:[]})[Og];for(;b.length<=v;)b.push(null);return(b[v]=b[v]||[]).push(m),y}}return l&&(d.prototype=Object.create(l.prototype)),d.prototype.ngMetadataName=c,d.annotationCls=d,d})}class Vt{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Fe({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Iw=Function;function Ya(c,a){void 0===a&&(a=c);for(let l=0;l<c.length;l++){let h=c[l];Array.isArray(h)?(a===c&&(a=c.slice(0,l)),Ya(h,a)):a!==c&&a.push(h)}return a}function th(c,a){c.forEach(l=>Array.isArray(l)?th(l,a):a(l))}function $5(c,a,l){a>=c.length?c.push(l):c.splice(a,0,l)}function Rw(c,a){return a>=c.length-1?c.pop():c.splice(a,1)[0]}function w0(c,a){const l=[];for(let h=0;h<c;h++)l.push(a);return l}function Za(c,a,l){let h=kg(c,a);return h>=0?c[1|h]=l:(h=~h,function Sae(c,a,l,h){let d=c.length;if(d==a)c.push(l,h);else if(1===d)c.push(h,c[0]),c[0]=l;else{for(d--,c.push(c[d-1],c[d]);d>a;)c[d]=c[d-2],d--;c[a]=l,c[a+1]=h}}(c,h,a,l)),h}function gR(c,a){const l=kg(c,a);if(l>=0)return c[1|l]}function kg(c,a){return function K5(c,a,l){let h=0,d=c.length>>l;for(;d!==h;){const f=h+(d-h>>1),m=c[f<<l];if(a===m)return f<<l;m>a?d=f:h=f+1}return~(d<<l)}(c,a,1)}const C0={},_R="__NG_DI_FLAG__",Pw="ngTempTokenPath",Aae=/\n/gm,J5="__source";let x0;function Vg(c){const a=x0;return x0=c,a}function Rae(c,a=On.Default){if(void 0===x0)throw new rt(-203,!1);return null===x0?u5(c,void 0,a):x0.get(c,a&On.Optional?null:void 0,a)}function Oe(c,a=On.Default){return(function boe(){return jI}()||Rae)(Bn(c),a)}function os(c,a=On.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Oe(c,a)}function vR(c){const a=[];for(let l=0;l<c.length;l++){const h=Bn(c[l]);if(Array.isArray(h)){if(0===h.length)throw new rt(900,!1);let d,f=On.Default;for(let m=0;m<h.length;m++){const g=h[m],y=Lae(g);"number"==typeof y?-1===y?d=g.token:f|=y:d=g}a.push(Oe(d,f))}else a.push(Oe(h))}return a}function E0(c,a){return c[_R]=a,c.prototype[_R]=a,c}function Lae(c){return c[_R]}const bd=E0(Fg("Optional"),8),Sd=E0(Fg("SkipSelf"),4);var Ca=(()=>((Ca=Ca||{})[Ca.Important=1]="Important",Ca[Ca.DashCase=2]="DashCase",Ca))();const CR=new Map;let Zae=0;const ER="__ngContext__";function Fo(c,a){wa(a)?(c[ER]=a[20],function Jae(c){CR.set(c[20],c)}(a)):c[ER]=a}function DR(c,a){return undefined(c,a)}function I0(c){const a=c[3];return lc(a)?a[3]:a}function AR(c){return vU(c[13])}function IR(c){return vU(c[4])}function vU(c){for(;null!==c&&!lc(c);)c=c[4];return c}function Ug(c,a,l,h,d){if(null!=h){let f,m=!1;lc(h)?f=h:wa(h)&&(m=!0,h=h[0]);const g=Is(h);0===c&&null!==l?null==d?xU(a,l,g):yp(a,l,g,d||null,!0):1===c&&null!==l?yp(a,l,g,d||null,!0):2===c?function kR(c,a,l){const h=Fw(c,a);h&&function ble(c,a,l,h){c.removeChild(a,l,h)}(c,h,a,l)}(a,g,m):3===c&&a.destroyNode(g),null!=f&&function wle(c,a,l,h,d){const f=l[7];f!==Is(l)&&Ug(a,c,h,f,d);for(let g=10;g<l.length;g++){const y=l[g];R0(y[1],y,c,a,h,f)}}(a,c,f,l,d)}}function LR(c,a,l){return c.createElement(a,l)}function SU(c,a){const l=c[9],h=l.indexOf(a),d=a[3];512&a[2]&&(a[2]&=-513,tR(d,-1)),l.splice(h,1)}function PR(c,a){if(c.length<=10)return;const l=10+a,h=c[l];if(h){const d=h[17];null!==d&&d!==c&&SU(d,h),a>0&&(c[l-1][4]=h[4]);const f=Rw(c,10+a);!function dle(c,a){R0(c,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const m=f[19];null!==m&&m.detachView(f[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function TU(c,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&R0(c,a,l,3,null,null),function mle(c){let a=c[13];if(!a)return OR(c[1],c);for(;a;){let l=null;if(wa(a))l=a[13];else{const h=a[10];h&&(l=h)}if(!l){for(;a&&!a[4]&&a!==c;)wa(a)&&OR(a[1],a),a=a[3];null===a&&(a=c),wa(a)&&OR(a[1],a),l=a&&a[4]}a=l}}(a)}}function OR(c,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function vle(c,a){let l;if(null!=c&&null!=(l=c.destroyHooks))for(let h=0;h<l.length;h+=2){const d=a[l[h]];if(!(d instanceof y0)){const f=l[h+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const g=d[f[m]],y=f[m+1];try{y.call(g)}finally{}}else try{f.call(d)}finally{}}}}(c,a),function _le(c,a){const l=c.cleanup,h=a[7];let d=-1;if(null!==l)for(let f=0;f<l.length-1;f+=2)if("string"==typeof l[f]){const m=l[f+1],g="function"==typeof m?m(a):Is(a[m]),y=h[d=l[f+2]],_=l[f+3];"boolean"==typeof _?g.removeEventListener(l[f],y,_):_>=0?h[d=_]():h[d=-_].unsubscribe(),f+=2}else{const m=h[d=l[f+1]];l[f].call(m)}if(null!==h){for(let f=d+1;f<h.length;f++)(0,h[f])();a[7]=null}}(c,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&lc(a[3])){l!==a[3]&&SU(l,a);const h=a[19];null!==h&&h.detachView(c)}!function Qae(c){CR.delete(c[20])}(a)}}function wU(c,a,l){return function CU(c,a,l){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return l[0];if(2&h.flags){const d=c.data[h.directiveStart].encapsulation;if(d===oc.None||d===oc.Emulated)return null}return qa(h,l)}(c,a.parent,l)}function yp(c,a,l,h,d){c.insertBefore(a,l,h,d)}function xU(c,a,l){c.appendChild(a,l)}function EU(c,a,l,h,d){null!==h?yp(c,a,l,h,d):xU(c,a,l)}function Fw(c,a){return c.parentNode(a)}function MU(c,a,l){return AU(c,a,l)}let Bw,zR,Uw,AU=function DU(c,a,l){return 40&c.type?qa(c,l):null};function kw(c,a,l,h){const d=wU(c,h,a),f=a[11],g=MU(h.parent||a[6],h,a);if(null!=d)if(Array.isArray(l))for(let y=0;y<l.length;y++)EU(f,d,l[y],g,!1);else EU(f,d,l,g,!1)}function Vw(c,a){if(null!==a){const l=a.type;if(3&l)return qa(a,c);if(4&l)return FR(-1,c[a.index]);if(8&l){const h=a.child;if(null!==h)return Vw(c,h);{const d=c[a.index];return lc(d)?FR(-1,d):Is(d)}}if(32&l)return DR(a,c)()||Is(c[a.index]);{const h=RU(c,a);return null!==h?Array.isArray(h)?h[0]:Vw(I0(c[16]),h):Vw(c,a.next)}}return null}function RU(c,a){return null!==a?c[16][6].projection[a.projection]:null}function FR(c,a){const l=10+c+1;if(l<a.length){const h=a[l],d=h[1].firstChild;if(null!==d)return Vw(h,d)}return a[7]}function VR(c,a,l,h,d,f,m){for(;null!=l;){const g=h[l.index],y=l.type;if(m&&0===a&&(g&&Fo(Is(g),h),l.flags|=4),64!=(64&l.flags))if(8&y)VR(c,a,l.child,h,d,f,!1),Ug(a,c,d,g,f);else if(32&y){const _=DR(l,h);let v;for(;v=_();)Ug(a,c,d,v,f);Ug(a,c,d,g,f)}else 16&y?LU(c,a,h,l,d,f):Ug(a,c,d,g,f);l=m?l.projectionNext:l.next}}function R0(c,a,l,h,d,f){VR(l,h,c.firstChild,a,d,f,!1)}function LU(c,a,l,h,d,f){const m=l[16],y=m[6].projection[h.projection];if(Array.isArray(y))for(let _=0;_<y.length;_++)Ug(a,c,d,y[_],f);else VR(c,a,y,m[3],d,f,!0)}function PU(c,a,l){c.setAttribute(a,"style",l)}function BR(c,a,l){""===l?c.removeAttribute(a,"class"):c.setAttribute(a,"class",l)}function _p(c){return function UR(){if(void 0===Bw&&(Bw=null,wr.trustedTypes))try{Bw=wr.trustedTypes.createPolicy("angular",{createHTML:c=>c,createScript:c=>c,createScriptURL:c=>c})}catch{}return Bw}()?.createHTML(c)||c}function NU(c){return function GR(){if(void 0===Uw&&(Uw=null,wr.trustedTypes))try{Uw=wr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:c=>c,createScript:c=>c,createScriptURL:c=>c})}catch{}return Uw}()?.createHTML(c)||c}class VU{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Td(c){return c instanceof VU?c.changingThisBreaksApplicationSecurity:c}function L0(c,a){const l=function Ole(c){return c instanceof VU&&c.getTypeName()||null}(c);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}class Nle{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(_p(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch{return null}}}class Fle{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const h=this.inertDocument.createElement("body");l.appendChild(h)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=_p(a),l;const h=this.inertDocument.createElement("body");return h.innerHTML=_p(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const l=a.attributes;for(let d=l.length-1;0<d;d--){const m=l.item(d).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&a.removeAttribute(m)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const Vle=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function HR(c){return(c=String(c)).match(Vle)?c:"unsafe:"+c}function nh(c){const a={};for(const l of c.split(","))a[l]=!0;return a}function P0(...c){const a={};for(const l of c)for(const h in l)l.hasOwnProperty(h)&&(a[h]=!0);return a}const UU=nh("area,br,col,hr,img,wbr"),zU=nh("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),GU=nh("rp,rt"),jR=P0(UU,P0(zU,nh("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),P0(GU,nh("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),P0(GU,zU)),WR=nh("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),HU=P0(WR,nh("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),nh("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Ble=nh("script,style,template");class Ule{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,h=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?h=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,h&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let d=this.checkClobberedElement(l,l.nextSibling);if(d){l=d;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!jR.hasOwnProperty(l))return this.sanitizedSomething=!0,!Ble.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const h=a.attributes;for(let d=0;d<h.length;d++){const f=h.item(d),m=f.name,g=m.toLowerCase();if(!HU.hasOwnProperty(g)){this.sanitizedSomething=!0;continue}let y=f.value;WR[g]&&(y=HR(y)),this.buf.push(" ",m,'="',jU(y),'"')}return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();jR.hasOwnProperty(l)&&!UU.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(jU(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const zle=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Gle=/([^\#-~ |!])/g;function jU(c){return c.replace(/&/g,"&amp;").replace(zle,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Gle,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let zw;function XR(c){return"content"in c&&function jle(c){return c.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===c.nodeName}(c)?c.content:null}var Rs=(()=>((Rs=Rs||{})[Rs.NONE=0]="NONE",Rs[Rs.HTML=1]="HTML",Rs[Rs.STYLE=2]="STYLE",Rs[Rs.SCRIPT=3]="SCRIPT",Rs[Rs.URL=4]="URL",Rs[Rs.RESOURCE_URL=5]="RESOURCE_URL",Rs))();function Gw(c){const a=O0();return a?NU(a.sanitize(Rs.HTML,c)||""):L0(c,"HTML")?NU(Td(c)):function Hle(c,a){let l=null;try{zw=zw||function BU(c){const a=new Fle(c);return function kle(){try{return!!(new window.DOMParser).parseFromString(_p(""),"text/html")}catch{return!1}}()?new Nle(a):a}(c);let h=a?String(a):"";l=zw.getInertBodyElement(h);let d=5,f=h;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,h=f,f=l.innerHTML,l=zw.getInertBodyElement(h)}while(h!==f);return _p((new Ule).sanitizeChildren(XR(l)||l))}finally{if(l){const h=XR(l)||l;for(;h.firstChild;)h.removeChild(h.firstChild)}}}(function OU(){return void 0!==zR?zR:typeof document<"u"?document:void 0}(),qn(c))}function Ka(c){const a=O0();return a?a.sanitize(Rs.URL,c)||"":L0(c,"URL")?Td(c):HR(qn(c))}function O0(){const c=dt();return c&&c[12]}const qR=new Vt("ENVIRONMENT_INITIALIZER"),XU=new Vt("INJECTOR",-1),qU=new Vt("INJECTOR_DEF_TYPES");class $U{get(a,l=C0){if(l===C0){const h=new Error(`NullInjectorError: No provider for ${fr(a)}!`);throw h.name="NullInjectorError",h}return l}}function Kle(...c){return{\u0275providers:YU(0,c)}}function YU(c,...a){const l=[],h=new Set;let d;return th(a,f=>{const m=f;$R(m,l,[],h)&&(d||(d=[]),d.push(m))}),void 0!==d&&ZU(d,l),l}function ZU(c,a){for(let l=0;l<c.length;l++){const{providers:d}=c[l];th(d,f=>{a.push(f)})}}function $R(c,a,l,h){if(!(c=Bn(c)))return!1;let d=null,f=l5(c);const m=!f&&sr(c);if(f||m){if(m&&!m.standalone)return!1;d=c}else{const y=c.ngModule;if(f=l5(y),!f)return!1;d=y}const g=h.has(d);if(m){if(g)return!1;if(h.add(d),m.dependencies){const y="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const _ of y)$R(_,a,l,h)}}else{if(!f)return!1;{if(null!=f.imports&&!g){let _;h.add(d);try{th(f.imports,v=>{$R(v,a,l,h)&&(_||(_=[]),_.push(v))})}finally{}void 0!==_&&ZU(_,a)}if(!g){const _=gp(d)||(()=>new d);a.push({provide:d,useFactory:_,deps:Wi},{provide:qU,useValue:d,multi:!0},{provide:qR,useValue:()=>Oe(d),multi:!0})}const y=f.providers;null==y||g||th(y,v=>{a.push(v)})}}return d!==c&&void 0!==c.providers}const Jle=dr({provide:String,useValue:dr});function YR(c){return null!==c&&"object"==typeof c&&Jle in c}function vp(c){return"function"==typeof c}const ZR=new Vt("Set Injector scope."),Hw={},ece={};let KR;function jw(){return void 0===KR&&(KR=new $U),KR}class ih{}class QU extends ih{constructor(a,l,h,d){super(),this.parent=l,this.source=h,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,QR(a,m=>this.processProvider(m)),this.records.set(XU,zg(void 0,this)),d.has("environment")&&this.records.set(ih,zg(void 0,this));const f=this.records.get(ZR);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(qU.multi,Wi,On.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=Vg(this),h=Ol(void 0);try{return a()}finally{Vg(l),Ol(h)}}get(a,l=C0,h=On.Default){this.assertNotDestroyed();const d=Vg(this),f=Ol(void 0);try{if(!(h&On.SkipSelf)){let g=this.records.get(a);if(void 0===g){const y=function sce(c){return"function"==typeof c||"object"==typeof c&&c instanceof Vt}(a)&&hw(a);g=y&&this.injectableDefInScope(y)?zg(JR(a),Hw):null,this.records.set(a,g)}if(null!=g)return this.hydrate(a,g)}return(h&On.Self?jw():this.parent).get(a,l=h&On.Optional&&l===C0?null:l)}catch(m){if("NullInjectorError"===m.name){if((m[Pw]=m[Pw]||[]).unshift(fr(a)),d)throw m;return function Pae(c,a,l,h){const d=c[Pw];throw a[J5]&&d.unshift(a[J5]),c.message=function Oae(c,a,l,h=null){c=c&&"\n"===c.charAt(0)&&"\u0275"==c.charAt(1)?c.slice(2):c;let d=fr(a);if(Array.isArray(a))d=a.map(fr).join(" -> ");else if("object"==typeof a){let f=[];for(let m in a)if(a.hasOwnProperty(m)){let g=a[m];f.push(m+":"+("string"==typeof g?JSON.stringify(g):fr(g)))}d=`{${f.join(", ")}}`}return`${l}${h?"("+h+")":""}[${d}]: ${c.replace(Aae,"\n  ")}`}("\n"+c.message,d,l,h),c.ngTokenPath=d,c[Pw]=null,c}(m,a,"R3InjectorError",this.source)}throw m}finally{Ol(f),Vg(d)}}resolveInjectorInitializers(){const a=Vg(this),l=Ol(void 0);try{const h=this.get(qR.multi,Wi,On.Self);for(const d of h)d()}finally{Vg(a),Ol(l)}}toString(){const a=[],l=this.records;for(const h of l.keys())a.push(fr(h));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new rt(205,!1)}processProvider(a){let l=vp(a=Bn(a))?a:Bn(a&&a.provide);const h=function nce(c){return YR(c)?zg(void 0,c.useValue):zg(ez(c),Hw)}(a);if(vp(a)||!0!==a.multi)this.records.get(l);else{let d=this.records.get(l);d||(d=zg(void 0,Hw,!0),d.factory=()=>vR(d.multi),this.records.set(l,d)),l=a,d.multi.push(a)}this.records.set(l,h)}hydrate(a,l){return l.value===Hw&&(l.value=ece,l.value=l.factory()),"object"==typeof l.value&&l.value&&function rce(c){return null!==c&&"object"==typeof c&&"function"==typeof c.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=Bn(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function JR(c){const a=hw(c),l=null!==a?a.factory:gp(c);if(null!==l)return l;if(c instanceof Vt)throw new rt(204,!1);if(c instanceof Function)return function tce(c){const a=c.length;if(a>0)throw w0(a,"?"),new rt(204,!1);const l=function yoe(c){const a=c&&(c[dw]||c[c5]);if(a){const l=function _oe(c){if(c.hasOwnProperty("name"))return c.name;const a=(""+c).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(c);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(c);return null!==l?()=>l.factory(c):()=>new c}(c);throw new rt(204,!1)}function ez(c,a,l){let h;if(vp(c)){const d=Bn(c);return gp(d)||JR(d)}if(YR(c))h=()=>Bn(c.useValue);else if(function JU(c){return!(!c||!c.useFactory)}(c))h=()=>c.useFactory(...vR(c.deps||[]));else if(function KU(c){return!(!c||!c.useExisting)}(c))h=()=>Oe(Bn(c.useExisting));else{const d=Bn(c&&(c.useClass||c.provide));if(!function ice(c){return!!c.deps}(c))return gp(d)||JR(d);h=()=>new d(...vR(c.deps))}return h}function zg(c,a,l=!1){return{factory:c,value:a,multi:l?[]:void 0}}function oce(c){return!!c.\u0275providers}function QR(c,a){for(const l of c)Array.isArray(l)?QR(l,a):oce(l)?QR(l.\u0275providers,a):a(l)}class tz{}class cce{resolveComponentFactory(a){throw function lce(c){const a=Error(`No component factory found for ${fr(c)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=c,a}(a)}}let wd=(()=>{class c{}return c.NULL=new cce,c})();function uce(){return Gg(Gs(),dt())}function Gg(c,a){return new Xt(qa(c,a))}let Xt=(()=>{class c{constructor(l){this.nativeElement=l}}return c.__NG_ELEMENT_ID__=uce,c})();function hce(c){return c instanceof Xt?c.nativeElement:c}class Hg{}let Gn=(()=>{class c{}return c.__NG_ELEMENT_ID__=()=>function dce(){const c=dt(),l=$a(Gs().index,c);return(wa(l)?l:c)[11]}(),c})(),fce=(()=>{class c{}return c.\u0275prov=Fe({token:c,providedIn:"root",factory:()=>null}),c})();class N0{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const pce=new N0("14.3.0"),e2={};function n2(c){return c.ngOriginalError}class jg{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&n2(a);for(;l&&n2(l);)l=n2(l);return l||null}}function r2(c){return c.ownerDocument.defaultView}function F0(c){return c.ownerDocument}function rh(c){return c instanceof Function?c():c}function sz(c,a,l){let h=c.length;for(;;){const d=c.indexOf(a,l);if(-1===d)return d;if(0===d||c.charCodeAt(d-1)<=32){const f=a.length;if(d+f===h||c.charCodeAt(d+f)<=32)return d}l=d+1}}const oz="ng-template";function Tce(c,a,l){let h=0;for(;h<c.length;){let d=c[h++];if(l&&"class"===d){if(d=c[h],-1!==sz(d.toLowerCase(),a,0))return!0}else if(1===d){for(;h<c.length&&"string"==typeof(d=c[h++]);)if(d.toLowerCase()===a)return!0;return!1}}return!1}function az(c){return 4===c.type&&c.value!==oz}function wce(c,a,l){return a===(4!==c.type||l?c.value:oz)}function Cce(c,a,l){let h=4;const d=c.attrs||[],f=function Mce(c){for(let a=0;a<c.length;a++)if(O5(c[a]))return a;return c.length}(d);let m=!1;for(let g=0;g<a.length;g++){const y=a[g];if("number"!=typeof y){if(!m)if(4&h){if(h=2|1&h,""!==y&&!wce(c,y,l)||""===y&&1===a.length){if(uc(h))return!1;m=!0}}else{const _=8&h?y:a[++g];if(8&h&&null!==c.attrs){if(!Tce(c.attrs,_,l)){if(uc(h))return!1;m=!0}continue}const b=xce(8&h?"class":y,d,az(c),l);if(-1===b){if(uc(h))return!1;m=!0;continue}if(""!==_){let S;S=b>f?"":d[b+1].toLowerCase();const T=8&h?S:null;if(T&&-1!==sz(T,_,0)||2&h&&_!==S){if(uc(h))return!1;m=!0}}}}else{if(!m&&!uc(h)&&!uc(y))return!1;if(m&&uc(y))continue;m=!1,h=y|1&h}}return uc(h)||m}function uc(c){return 0==(1&c)}function xce(c,a,l,h){if(null===a)return-1;let d=0;if(h||!l){let f=!1;for(;d<a.length;){const m=a[d];if(m===c)return d;if(3===m||6===m)f=!0;else{if(1===m||2===m){let g=a[++d];for(;"string"==typeof g;)g=a[++d];continue}if(4===m)break;if(0===m){d+=4;continue}}d+=f?1:2}return-1}return function Dce(c,a){let l=c.indexOf(4);if(l>-1)for(l++;l<c.length;){const h=c[l];if("number"==typeof h)return-1;if(h===a)return l;l++}return-1}(a,c)}function lz(c,a,l=!1){for(let h=0;h<a.length;h++)if(Cce(c,a[h],l))return!0;return!1}function Ace(c,a){e:for(let l=0;l<a.length;l++){const h=a[l];if(c.length===h.length){for(let d=0;d<c.length;d++)if(c[d]!==h[d])continue e;return!0}}return!1}function cz(c,a){return c?":not("+a.trim()+")":a}function Ice(c){let a=c[0],l=1,h=2,d="",f=!1;for(;l<c.length;){let m=c[l];if("string"==typeof m)if(2&h){const g=c[++l];d+="["+m+(g.length>0?'="'+g+'"':"")+"]"}else 8&h?d+="."+m:4&h&&(d+=" "+m);else""!==d&&!uc(m)&&(a+=cz(f,d),d=""),h=m,f=f||!uc(h);l++}return""!==d&&(a+=cz(f,d)),a}const $n={};function V(c){uz(Li(),dt(),ea()+c,!1)}function uz(c,a,l,h){if(!h)if(3==(3&a[2])){const f=c.preOrderCheckHooks;null!==f&&Tw(a,f,l)}else{const f=c.preOrderHooks;null!==f&&ww(a,f,0,l)}_d(l)}function pz(c,a=null,l=null,h){const d=mz(c,a,l,h);return d.resolveInjectorInitializers(),d}function mz(c,a=null,l=null,h,d=new Set){const f=[l||Wi,Kle(c)];return h=h||("object"==typeof c?void 0:fr(c)),new QU(f,a||jw(),h||null,d)}let cr=(()=>{class c{static create(l,h){if(Array.isArray(l))return pz({name:""},h,l,"");{const d=l.name??"";return pz({name:d},l.parent,l.providers,d)}}}return c.THROW_IF_NOT_FOUND=C0,c.NULL=new $U,c.\u0275prov=Fe({token:c,providedIn:"any",factory:()=>Oe(XU)}),c.__NG_ELEMENT_ID__=-1,c})();function N(c,a=On.Default){const l=dt();return null===l?Oe(c,a):G5(Gs(),l,Bn(c),a)}function c2(){throw new Error("invalid")}function Xw(c,a){return c<<17|a<<2}function hc(c){return c>>17&32767}function u2(c){return 2|c}function sh(c){return(131068&c)>>2}function h2(c,a){return-131069&c|a<<2}function d2(c){return 1|c}function Lz(c,a){const l=c.contentQueries;if(null!==l)for(let h=0;h<l.length;h+=2){const d=l[h],f=l[h+1];if(-1!==f){const m=c.data[f];oR(d),m.contentQueries(2,a[f],f)}}}function Yw(c,a,l,h,d,f,m,g,y,_,v){const b=a.blueprint.slice();return b[0]=d,b[2]=76|h,(null!==v||c&&1024&c[2])&&(b[2]|=1024),b5(b),b[3]=b[15]=c,b[8]=l,b[10]=m||c&&c[10],b[11]=g||c&&c[11],b[12]=y||c&&c[12]||null,b[9]=_||c&&c[9]||null,b[6]=f,b[20]=function Kae(){return Zae++}(),b[21]=v,b[16]=2==a.type?c[16]:b,b}function qg(c,a,l,h,d){let f=c.data[a];if(null===f)f=function b2(c,a,l,h,d){const f=w5(),m=nR(),y=c.data[a]=function due(c,a,l,h,d,f){return{type:l,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,l,a,h,d);return null===c.firstChild&&(c.firstChild=y),null!==f&&(m?null==f.child&&null!==y.parent&&(f.child=y):null===f.next&&(f.next=y)),y}(c,a,l,h,d),function qoe(){return Wn.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=l,f.value=h,f.attrs=d;const m=function g0(){const c=Wn.lFrame,a=c.currentTNode;return c.isParent?a:a.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return Kc(f,!0),f}function $g(c,a,l,h){if(0===l)return-1;const d=a.length;for(let f=0;f<l;f++)a.push(h),c.blueprint.push(h),c.data.push(null);return d}function S2(c,a,l){aR(a);try{const h=c.viewQuery;null!==h&&A2(1,h,l);const d=c.template;null!==d&&Pz(c,a,d,1,l),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&Lz(c,a),c.staticViewQueries&&A2(2,c.viewQuery,l);const f=c.components;null!==f&&function cue(c,a){for(let l=0;l<a.length;l++)Due(c,a[l])}(a,f)}catch(h){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),h}finally{a[2]&=-5,lR()}}function Zw(c,a,l,h){const d=a[2];if(128!=(128&d)){aR(a);try{b5(a),function x5(c){return Wn.lFrame.bindingIndex=c}(c.bindingStartIndex),null!==l&&Pz(c,a,l,2,h);const m=3==(3&d);if(m){const _=c.preOrderCheckHooks;null!==_&&Tw(a,_,null)}else{const _=c.preOrderHooks;null!==_&&ww(a,_,0,null),cR(a,0)}if(function Eue(c){for(let a=AR(c);null!==a;a=IR(a)){if(!a[2])continue;const l=a[9];for(let h=0;h<l.length;h++){const d=l[h],f=d[3];0==(512&d[2])&&tR(f,1),d[2]|=512}}}(a),function xue(c){for(let a=AR(c);null!==a;a=IR(a))for(let l=10;l<a.length;l++){const h=a[l],d=h[1];bw(h)&&Zw(d,h,d.template,h[8])}}(a),null!==c.contentQueries&&Lz(c,a),m){const _=c.contentCheckHooks;null!==_&&Tw(a,_)}else{const _=c.contentHooks;null!==_&&ww(a,_,1),cR(a,1)}!function aue(c,a){const l=c.hostBindingOpCodes;if(null!==l)try{for(let h=0;h<l.length;h++){const d=l[h];if(d<0)_d(~d);else{const f=d,m=l[++h],g=l[++h];$oe(m,f),g(2,a[f])}}}finally{_d(-1)}}(c,a);const g=c.components;null!==g&&function lue(c,a){for(let l=0;l<a.length;l++)Mue(c,a[l])}(a,g);const y=c.viewQuery;if(null!==y&&A2(2,y,h),m){const _=c.viewCheckHooks;null!==_&&Tw(a,_)}else{const _=c.viewHooks;null!==_&&ww(a,_,2),cR(a,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,tR(a[3],-1))}finally{lR()}}}function Pz(c,a,l,h,d){const f=ea(),m=2&h;try{_d(-1),m&&a.length>22&&uz(c,a,22,!1),l(h,d)}finally{_d(f)}}function Oz(c,a,l){if(YI(a)){const d=a.directiveEnd;for(let f=a.directiveStart;f<d;f++){const m=c.data[f];m.contentQueries&&m.contentQueries(1,l[f],f)}}}function T2(c,a,l){!T5()||(function yue(c,a,l,h){const d=l.directiveStart,f=l.directiveEnd;c.firstCreatePass||v0(l,a),Fo(h,a);const m=l.initialInputs;for(let g=d;g<f;g++){const y=c.data[g],_=cc(y);_&&Tue(a,l,y);const v=b0(a,c,g,l);Fo(v,a),null!==m&&wue(0,g-d,v,y,0,m),_&&($a(l.index,a)[8]=v)}}(c,a,l,qa(l,a)),128==(128&l.flags)&&function _ue(c,a,l){const h=l.directiveStart,d=l.directiveEnd,f=l.index,m=function Yoe(){return Wn.lFrame.currentDirectiveIndex}();try{_d(f);for(let g=h;g<d;g++){const y=c.data[g],_=a[g];rR(g),(null!==y.hostBindings||0!==y.hostVars||null!==y.hostAttrs)&&zz(y,_)}}finally{_d(-1),rR(m)}}(c,a,l))}function w2(c,a,l=qa){const h=a.localNames;if(null!==h){let d=a.index+1;for(let f=0;f<h.length;f+=2){const m=h[f+1],g=-1===m?l(a,c):c[m];c[d++]=g}}}function Nz(c){const a=c.tView;return null===a||a.incompleteFirstPass?c.tView=C2(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):a}function C2(c,a,l,h,d,f,m,g,y,_){const v=22+h,b=v+d,S=function uue(c,a){const l=[];for(let h=0;h<a;h++)l.push(h<c?null:$n);return l}(v,b),T="function"==typeof _?_():_;return S[1]={type:c,blueprint:S,template:l,queries:null,viewQuery:g,declTNode:a,data:S.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:y,consts:T,incompleteFirstPass:!1}}function Fz(c,a,l,h){const d=Xz(a);null===l?d.push(h):(d.push(l),c.firstCreatePass&&qz(c).push(h,d.length-1))}function kz(c,a,l){for(let h in c)if(c.hasOwnProperty(h)){const d=c[h];(l=null===l?{}:l).hasOwnProperty(h)?l[h].push(a,d):l[h]=[a,d]}return l}function Vz(c,a){const h=a.directiveEnd,d=c.data,f=a.attrs,m=[];let g=null,y=null;for(let _=a.directiveStart;_<h;_++){const v=d[_],b=v.inputs,S=null===f||az(a)?null:Cue(b,f);m.push(S),g=kz(b,_,g),y=kz(v.outputs,_,y)}null!==g&&(g.hasOwnProperty("class")&&(a.flags|=16),g.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=m,a.inputs=g,a.outputs=y}function Ja(c,a,l,h,d,f,m,g){const y=qa(a,l);let v,_=a.inputs;!g&&null!=_&&(v=_[h])?(I2(c,l,v,h,d),yw(a)&&Bz(l,a.index)):3&a.type&&(h=function fue(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(h),d=null!=m?m(d,a.value||"",h):d,f.setProperty(y,h,d))}function Bz(c,a){const l=$a(a,c);16&l[2]||(l[2]|=32)}function x2(c,a,l,h){let d=!1;if(T5()){const f=function vue(c,a,l){const h=c.directiveRegistry;let d=null;if(h)for(let f=0;f<h.length;f++){const m=h[f];lz(l,m.selectors,!1)&&(d||(d=[]),Dw(v0(l,a),c,m.type),cc(m)?(Gz(c,l),d.unshift(m)):d.push(m))}return d}(c,a,l),m=null===h?null:{"":-1};if(null!==f){d=!0,Hz(l,c.data.length,f.length);for(let v=0;v<f.length;v++){const b=f[v];b.providersResolver&&b.providersResolver(b)}let g=!1,y=!1,_=$g(c,a,f.length,null);for(let v=0;v<f.length;v++){const b=f[v];l.mergedAttrs=xw(l.mergedAttrs,b.hostAttrs),jz(c,l,a,_,b),Sue(_,b,m),null!==b.contentQueries&&(l.flags|=8),(null!==b.hostBindings||null!==b.hostAttrs||0!==b.hostVars)&&(l.flags|=128);const S=b.type.prototype;!g&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((c.preOrderHooks||(c.preOrderHooks=[])).push(l.index),g=!0),!y&&(S.ngOnChanges||S.ngDoCheck)&&((c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(l.index),y=!0),_++}Vz(c,l)}m&&function bue(c,a,l){if(a){const h=c.localNames=[];for(let d=0;d<a.length;d+=2){const f=l[a[d+1]];if(null==f)throw new rt(-301,!1);h.push(a[d],f)}}}(l,h,m)}return l.mergedAttrs=xw(l.mergedAttrs,l.attrs),d}function Uz(c,a,l,h,d,f){const m=f.hostBindings;if(m){let g=c.hostBindingOpCodes;null===g&&(g=c.hostBindingOpCodes=[]);const y=~a.index;(function gue(c){let a=c.length;for(;a>0;){const l=c[--a];if("number"==typeof l&&l<0)return l}return 0})(g)!=y&&g.push(y),g.push(h,d,m)}}function zz(c,a){null!==c.hostBindings&&c.hostBindings(1,a)}function Gz(c,a){a.flags|=2,(c.components||(c.components=[])).push(a.index)}function Sue(c,a,l){if(l){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)l[a.exportAs[h]]=c;cc(a)&&(l[""]=c)}}function Hz(c,a,l){c.flags|=1,c.directiveStart=a,c.directiveEnd=a+l,c.providerIndexes=a}function jz(c,a,l,h,d){c.data[h]=d;const f=d.factory||(d.factory=gp(d.type)),m=new y0(f,cc(d),N);c.blueprint[h]=m,l[h]=m,Uz(c,a,0,h,$g(c,l,d.hostVars,$n),d)}function Tue(c,a,l){const h=qa(a,c),d=Nz(l),f=c[10],m=Kw(c,Yw(c,d,null,l.onPush?32:16,h,a,f,f.createRenderer(h,l),null,null,null));c[a.index]=m}function Qc(c,a,l,h,d,f){const m=qa(c,a);!function E2(c,a,l,h,d,f,m){if(null==f)c.removeAttribute(a,d,l);else{const g=null==m?qn(f):m(f,h||"",d);c.setAttribute(a,d,g,l)}}(a[11],m,f,c.value,l,h,d)}function wue(c,a,l,h,d,f){const m=f[a];if(null!==m){const g=h.setInput;for(let y=0;y<m.length;){const _=m[y++],v=m[y++],b=m[y++];null!==g?h.setInput(l,b,_,v):l[v]=b}}}function Cue(c,a){let l=null,h=0;for(;h<a.length;){const d=a[h];if(0!==d)if(5!==d){if("number"==typeof d)break;c.hasOwnProperty(d)&&(null===l&&(l=[]),l.push(d,c[d],a[h+1])),h+=2}else h+=2;else h+=4}return l}function Wz(c,a,l,h){return new Array(c,!0,!1,a,null,0,h,l,null,null)}function Mue(c,a){const l=$a(a,c);if(bw(l)){const h=l[1];48&l[2]?Zw(h,l,h.template,l[8]):l[5]>0&&M2(l)}}function M2(c){for(let h=AR(c);null!==h;h=IR(h))for(let d=10;d<h.length;d++){const f=h[d];if(bw(f))if(512&f[2]){const m=f[1];Zw(m,f,m.template,f[8])}else f[5]>0&&M2(f)}const l=c[1].components;if(null!==l)for(let h=0;h<l.length;h++){const d=$a(l[h],c);bw(d)&&d[5]>0&&M2(d)}}function Due(c,a){const l=$a(a,c),h=l[1];(function Aue(c,a){for(let l=a.length;l<c.blueprint.length;l++)a.push(c.blueprint[l])})(h,l),S2(h,l,l[8])}function Kw(c,a){return c[13]?c[14][4]=a:c[13]=a,c[14]=a,a}function D2(c){for(;c;){c[2]|=32;const a=I0(c);if(Moe(c)&&!a)return c;c=a}return null}function Jw(c,a,l,h=!0){const d=a[10];d.begin&&d.begin();try{Zw(c,a,c.template,l)}catch(m){throw h&&Yz(a,m),m}finally{d.end&&d.end()}}function A2(c,a,l){oR(0),a(c,l)}function Xz(c){return c[7]||(c[7]=[])}function qz(c){return c.cleanup||(c.cleanup=[])}function $z(c,a,l){return(null===c||cc(c))&&(l=function koe(c){for(;Array.isArray(c);){if("object"==typeof c[1])return c;c=c[0]}return null}(l[a.index])),l[11]}function Yz(c,a){const l=c[9],h=l?l.get(jg,null):null;h&&h.handleError(a)}function I2(c,a,l,h,d){for(let f=0;f<l.length;){const m=l[f++],g=l[f++],y=a[m],_=c.data[m];null!==_.setInput?_.setInput(y,d,h,g):y[g]=d}}function oh(c,a,l){const h=vw(a,c);!function bU(c,a,l){c.setValue(a,l)}(c[11],h,l)}function Qw(c,a,l){let h=l?c.styles:null,d=l?c.classes:null,f=0;if(null!==a)for(let m=0;m<a.length;m++){const g=a[m];"number"==typeof g?f=g:1==f?d=zI(d,g):2==f&&(h=zI(h,g+": "+a[++m]+";"))}l?c.styles=h:c.stylesWithoutHost=h,l?c.classes=d:c.classesWithoutHost=d}function eC(c,a,l,h,d=!1){for(;null!==l;){const f=a[l.index];if(null!==f&&h.push(Is(f)),lc(f))for(let g=10;g<f.length;g++){const y=f[g],_=y[1].firstChild;null!==_&&eC(y[1],y,_,h)}const m=l.type;if(8&m)eC(c,a,l.child,h);else if(32&m){const g=DR(l,a);let y;for(;y=g();)h.push(y)}else if(16&m){const g=RU(a,l);if(Array.isArray(g))h.push(...g);else{const y=I0(a[16]);eC(y[1],y,g,h,!0)}}l=d?l.projectionNext:l.next}return h}class k0{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return eC(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(lc(a)){const l=a[8],h=l?l.indexOf(this):-1;h>-1&&(PR(a,h),Rw(l,h))}this._attachedToViewContainer=!1}TU(this._lView[1],this._lView)}onDestroy(a){Fz(this._lView[1],this._lView,null,a)}markForCheck(){D2(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Jw(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new rt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ple(c,a){R0(c,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new rt(902,!1);this._appRef=a}}class Iue extends k0{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Jw(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class R2 extends wd{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=sr(a);return new V0(l,this.ngModule)}}function Zz(c){const a=[];for(let l in c)c.hasOwnProperty(l)&&a.push({propName:c[l],templateName:l});return a}class Lue{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,h){const d=this.injector.get(a,e2,h);return d!==e2||l===e2?d:this.parentInjector.get(a,l,h)}}class V0 extends tz{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function Rce(c){return c.map(Ice).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Zz(this.componentDef.inputs)}get outputs(){return Zz(this.componentDef.outputs)}create(a,l,h,d){let f=(d=d||this.ngModule)instanceof ih?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const m=f?new Lue(a,f):a,g=m.get(Hg,null);if(null===g)throw new rt(407,!1);const y=m.get(fce,null),_=g.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=h?function hue(c,a,l){return c.selectRootElement(a,l===oc.ShadowDom)}(_,h,this.componentDef.encapsulation):LR(_,v,function Rue(c){const a=c.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(v)),S=this.componentDef.onPush?288:272,T=C2(0,null,null,1,0,null,null,null,null,null),x=Yw(null,T,null,S,null,null,g,_,y,m,null);let E,I;aR(x);try{const M=function Nue(c,a,l,h,d,f){const m=l[1];l[22]=c;const y=qg(m,22,2,"#host",null),_=y.mergedAttrs=a.hostAttrs;null!==_&&(Qw(y,_,!0),null!==c&&(Cw(d,c,_),null!==y.classes&&BR(d,c,y.classes),null!==y.styles&&PU(d,c,y.styles)));const v=h.createRenderer(c,a),b=Yw(l,Nz(a),null,a.onPush?32:16,l[22],y,h,v,f||null,null,null);return m.firstCreatePass&&(Dw(v0(y,l),m,a.type),Gz(m,y),Hz(y,l.length,1)),Kw(l,b),l[22]=b}(b,this.componentDef,x,g,_);if(b)if(h)Cw(_,b,["ng-version",pce.full]);else{const{attrs:D,classes:L}=function Lce(c){const a=[],l=[];let h=1,d=2;for(;h<c.length;){let f=c[h];if("string"==typeof f)2===d?""!==f&&a.push(f,c[++h]):8===d&&l.push(f);else{if(!uc(d))break;d=f}h++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);D&&Cw(_,b,D),L&&L.length>0&&BR(_,b,L.join(" "))}if(I=eR(T,22),void 0!==l){const D=I.projection=[];for(let L=0;L<this.ngContentSelectors.length;L++){const P=l[L];D.push(null!=P?Array.from(P):null)}}E=function Fue(c,a,l,h){const d=l[1],f=function mue(c,a,l){const h=Gs();c.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),jz(c,h,a,$g(c,a,1,null),l),Vz(c,h));const d=b0(a,c,h.directiveStart,h);Fo(d,a);const f=qa(h,a);return f&&Fo(f,a),d}(d,l,a);if(c[8]=l[8]=f,null!==h)for(const g of h)g(f,a);if(a.contentQueries){const g=Gs();a.contentQueries(1,f,g.directiveStart)}const m=Gs();return!d.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(_d(m.index),Uz(l[1],m,0,m.directiveStart,m.directiveEnd,a),zz(a,f)),f}(M,this.componentDef,x,[kue]),S2(T,x,null)}finally{lR()}return new Oue(this.componentType,E,Gg(I,x),x,I)}}class Oue extends class ace{}{constructor(a,l,h,d,f){super(),this.location=h,this._rootLView=d,this._tNode=f,this.instance=l,this.hostView=this.changeDetectorRef=new Iue(d),this.componentType=a}setInput(a,l){const h=this._tNode.inputs;let d;if(null!==h&&(d=h[a])){const f=this._rootLView;I2(f[1],f,d,a,l),Bz(f,this._tNode.index)}}get injector(){return new Rg(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function kue(){const c=Gs();Sw(dt()[1],c)}function rn(c){let a=function Kz(c){return Object.getPrototypeOf(c.prototype).constructor}(c.type),l=!0;const h=[c];for(;a;){let d;if(cc(c))d=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new rt(903,!1);d=a.\u0275dir}if(d){if(l){h.push(d);const m=c;m.inputs=L2(c.inputs),m.declaredInputs=L2(c.declaredInputs),m.outputs=L2(c.outputs);const g=d.hostBindings;g&&zue(c,g);const y=d.viewQuery,_=d.contentQueries;if(y&&Bue(c,y),_&&Uue(c,_),UI(c.inputs,d.inputs),UI(c.declaredInputs,d.declaredInputs),UI(c.outputs,d.outputs),cc(d)&&d.data.animation){const v=c.data;v.animation=(v.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let m=0;m<f.length;m++){const g=f[m];g&&g.ngInherit&&g(c),g===rn&&(l=!1)}}a=Object.getPrototypeOf(a)}!function Vue(c){let a=0,l=null;for(let h=c.length-1;h>=0;h--){const d=c[h];d.hostVars=a+=d.hostVars,d.hostAttrs=xw(d.hostAttrs,l=xw(l,d.hostAttrs))}}(h)}function L2(c){return c===Tg?{}:c===Wi?[]:c}function Bue(c,a){const l=c.viewQuery;c.viewQuery=l?(h,d)=>{a(h,d),l(h,d)}:a}function Uue(c,a){const l=c.contentQueries;c.contentQueries=l?(h,d,f)=>{a(h,d,f),l(h,d,f)}:a}function zue(c,a){const l=c.hostBindings;c.hostBindings=l?(h,d)=>{a(h,d),l(h,d)}:a}let tC=null;function bp(){if(!tC){const c=wr.Symbol;if(c&&c.iterator)tC=c.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const h=a[l];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(tC=h)}}}return tC}function B0(c){return!!P2(c)&&(Array.isArray(c)||!(c instanceof Map)&&bp()in c)}function P2(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function eu(c,a,l){return c[a]=l}function ko(c,a,l){return!Object.is(c[a],l)&&(c[a]=l,!0)}function Sp(c,a,l,h){const d=ko(c,a,l);return ko(c,a+1,h)||d}function Ue(c,a,l,h){const d=dt();return ko(d,Dg(),a)&&(Li(),Qc(Wr(),d,c,a,l,h)),Ue}function Zg(c,a,l,h){return ko(c,Dg(),l)?a+qn(l)+h:$n}function Kg(c,a,l,h,d,f){const g=Sp(c,function Qu(){return Wn.lFrame.bindingIndex}(),l,d);return eh(2),g?a+qn(l)+h+qn(d)+f:$n}function ce(c,a,l,h,d,f,m,g){const y=dt(),_=Li(),v=c+22,b=_.firstCreatePass?function Yue(c,a,l,h,d,f,m,g,y){const _=a.consts,v=qg(a,c,4,m||null,yd(_,g));x2(a,l,v,yd(_,y)),Sw(a,v);const b=v.tViews=C2(2,v,h,d,f,a.directiveRegistry,a.pipeRegistry,null,a.schemas,_);return null!==a.queries&&(a.queries.template(a,v),b.queries=a.queries.embeddedTView(v)),v}(v,_,y,a,l,h,d,f,m):_.data[v];Kc(b,!1);const S=y[11].createComment("");kw(_,y,S,b),Fo(S,y),Kw(y,y[v]=Wz(S,y,S,b)),_w(b)&&T2(_,y,b),null!=m&&w2(y,b,g)}function as(c){return Mg(function Xoe(){return Wn.lFrame.contextLView}(),22+c)}function z(c,a,l){const h=dt();return ko(h,Dg(),a)&&Ja(Li(),Wr(),h,c,a,h[11],l,!1),z}function O2(c,a,l,h,d){const m=d?"class":"style";I2(c,l,a.inputs[m],m,h)}function U(c,a,l,h){const d=dt(),f=Li(),m=22+c,g=d[11],y=d[m]=LR(g,a,function iae(){return Wn.lFrame.currentNamespace}()),_=f.firstCreatePass?function Kue(c,a,l,h,d,f,m){const g=a.consts,_=qg(a,c,2,d,yd(g,f));return x2(a,l,_,yd(g,m)),null!==_.attrs&&Qw(_,_.attrs,!1),null!==_.mergedAttrs&&Qw(_,_.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,_),_}(m,f,d,0,a,l,h):f.data[m];Kc(_,!0);const v=_.mergedAttrs;null!==v&&Cw(g,y,v);const b=_.classes;null!==b&&BR(g,y,b);const S=_.styles;return null!==S&&PU(g,y,S),64!=(64&_.flags)&&kw(f,d,y,_),0===function zoe(){return Wn.lFrame.elementDepthCount}()&&Fo(y,d),function Goe(){Wn.lFrame.elementDepthCount++}(),_w(_)&&(T2(f,d,_),Oz(f,_,d)),null!==h&&w2(d,_),U}function H(){let c=Gs();nR()?iR():(c=c.parent,Kc(c,!1));const a=c;!function Hoe(){Wn.lFrame.elementDepthCount--}();const l=Li();return l.firstCreatePass&&(Sw(l,c),YI(c)&&l.queries.elementEnd(c)),null!=a.classesWithoutHost&&function lae(c){return 0!=(16&c.flags)}(a)&&O2(l,a,dt(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function cae(c){return 0!=(32&c.flags)}(a)&&O2(l,a,dt(),a.stylesWithoutHost,!1),H}function xe(c,a,l,h){return U(c,a,l,h),H(),xe}function ci(c,a,l){const h=dt(),d=Li(),f=c+22,m=d.firstCreatePass?function Jue(c,a,l,h,d){const f=a.consts,m=yd(f,h),g=qg(a,c,8,"ng-container",m);return null!==m&&Qw(g,m,!0),x2(a,l,g,yd(f,d)),null!==a.queries&&a.queries.elementStart(a,g),g}(f,d,h,a,l):d.data[f];Kc(m,!0);const g=h[f]=h[11].createComment("");return kw(d,h,g,m),Fo(g,h),_w(m)&&(T2(d,h,m),Oz(d,m,h)),null!=l&&w2(h,m),ci}function ui(){let c=Gs();const a=Li();return nR()?iR():(c=c.parent,Kc(c,!1)),a.firstCreatePass&&(Sw(a,c),YI(c)&&a.queries.elementEnd(c)),ui}function xa(c,a,l){return ci(c,a,l),ui(),xa}function $t(){return dt()}function z0(c){return!!c&&"function"==typeof c.then}function aG(c){return!!c&&"function"==typeof c.subscribe}const N2=aG;function De(c,a,l,h){const d=dt(),f=Li(),m=Gs();return lG(f,d,d[11],m,c,a,0,h),De}function F2(c,a){const l=Gs(),h=dt(),d=Li();return lG(d,h,$z(sR(d.data),l,h),l,c,a),F2}function lG(c,a,l,h,d,f,m,g){const y=_w(h),v=c.firstCreatePass&&qz(c),b=a[8],S=Xz(a);let T=!0;if(3&h.type||g){const I=qa(h,a),M=g?g(I):I,D=S.length,L=g?F=>g(Is(F[h.index])):h.index;let P=null;if(!g&&y&&(P=function Que(c,a,l,h){const d=c.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const m=d[f];if(m===l&&d[f+1]===h){const g=a[7],y=d[f+2];return g.length>y?g[y]:null}"string"==typeof m&&(f+=2)}return null}(c,a,d,h.index)),null!==P)(P.__ngLastListenerFn__||P).__ngNextListenerFn__=f,P.__ngLastListenerFn__=f,T=!1;else{f=uG(h,a,b,f,!1);const F=l.listen(M,d,f);S.push(f,F),v&&v.push(d,L,D,D+1)}}else f=uG(h,a,b,f,!1);const x=h.outputs;let E;if(T&&null!==x&&(E=x[d])){const I=E.length;if(I)for(let M=0;M<I;M+=2){const B=a[E[M]][E[M+1]].subscribe(f),G=S.length;S.push(f,B),v&&v.push(d,h.index,G,-(G+1))}}}function cG(c,a,l,h){try{return!1!==l(h)}catch(d){return Yz(c,d),!1}}function uG(c,a,l,h,d){return function f(m){if(m===Function)return h;D2(2&c.flags?$a(c.index,a):a);let y=cG(a,0,h,m),_=f.__ngNextListenerFn__;for(;_;)y=cG(a,0,_,m)&&y,_=_.__ngNextListenerFn__;return d&&!1===y&&(m.preventDefault(),m.returnValue=!1),y}}function he(c=1){return function Koe(c){return(Wn.lFrame.contextLView=function Joe(c,a){for(;c>0;)a=a[15],c--;return a}(c,Wn.lFrame.contextLView))[8]}(c)}function ehe(c,a){let l=null;const h=function Ece(c){const a=c.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(c);for(let d=0;d<a.length;d++){const f=a[d];if("*"!==f){if(null===h?lz(c,f,!0):Ace(h,f))return d}else l=d}return l}function At(c){const a=dt()[16][6];if(!a.projection){const h=a.projection=w0(c?c.length:1,null),d=h.slice();let f=a.child;for(;null!==f;){const m=c?ehe(f,c):0;null!==m&&(d[m]?d[m].projectionNext=f:h[m]=f,d[m]=f),f=f.next}}}function ze(c,a=0,l){const h=dt(),d=Li(),f=qg(d,22+c,16,null,l||null);null===f.projection&&(f.projection=a),iR(),64!=(64&f.flags)&&function Tle(c,a,l){LU(a[11],0,a,l,wU(c,l,a),MU(l.parent||a[6],l,a))}(d,h,f)}function Vo(c,a,l){return ry(c,"",a,"",l),Vo}function ry(c,a,l,h,d){const f=dt(),m=Zg(f,a,l,h);return m!==$n&&Ja(Li(),Wr(),f,c,m,f[11],d,!1),ry}function vG(c,a,l,h,d){const f=c[l+1],m=null===a;let g=h?hc(f):sh(f),y=!1;for(;0!==g&&(!1===y||m);){const v=c[g+1];ihe(c[g],a)&&(y=!0,c[g+1]=h?d2(v):u2(v)),g=h?hc(v):sh(v)}y&&(c[l+1]=h?u2(f):d2(f))}function ihe(c,a){return null===c||null==a||(Array.isArray(c)?c[1]:c)===a||!(!Array.isArray(c)||"string"!=typeof a)&&kg(c,a)>=0}const js={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function bG(c){return c.substring(js.key,js.keyEnd)}function SG(c,a){const l=js.textEnd;return l===a?-1:(a=js.keyEnd=function ahe(c,a,l){for(;a<l&&c.charCodeAt(a)>32;)a++;return a}(c,js.key=a,l),sy(c,a,l))}function sy(c,a,l){for(;a<l&&c.charCodeAt(a)<=32;)a++;return a}function oy(c,a,l){return dc(c,a,l,!1),oy}function ot(c,a){return dc(c,a,null,!0),ot}function na(c){!function fc(c,a,l,h){const d=Li(),f=eh(2);d.firstUpdatePass&&MG(d,null,f,h);const m=dt();if(l!==$n&&ko(m,f,l)){const g=d.data[ea()];if(RG(g,h)&&!EG(d,f)){let y=h?g.classesWithoutHost:g.stylesWithoutHost;null!==y&&(l=zI(y,l||"")),O2(d,g,m,l,h)}else!function ghe(c,a,l,h,d,f,m,g){d===$n&&(d=Wi);let y=0,_=0,v=0<d.length?d[0]:null,b=0<f.length?f[0]:null;for(;null!==v||null!==b;){const S=y<d.length?d[y+1]:void 0,T=_<f.length?f[_+1]:void 0;let E,x=null;v===b?(y+=2,_+=2,S!==T&&(x=b,E=T)):null===b||null!==v&&v<b?(y+=2,x=v):(_+=2,x=b,E=T),null!==x&&AG(c,a,l,h,x,E,m,g),v=y<d.length?d[y]:null,b=_<f.length?f[_]:null}}(d,g,m,m[11],m[f+1],m[f+1]=function mhe(c,a,l){if(null==l||""===l)return Wi;const h=[],d=Td(l);if(Array.isArray(d))for(let f=0;f<d.length;f++)c(h,d[f],!0);else if("object"==typeof d)for(const f in d)d.hasOwnProperty(f)&&c(h,f,d[f]);else"string"==typeof d&&a(h,d);return h}(c,a,l),h,f)}}(Za,nu,c,!0)}function nu(c,a){for(let l=function she(c){return function wG(c){js.key=0,js.keyEnd=0,js.value=0,js.valueEnd=0,js.textEnd=c.length}(c),SG(c,sy(c,0,js.textEnd))}(a);l>=0;l=SG(a,l))Za(c,bG(a),!0)}function dc(c,a,l,h){const d=dt(),f=Li(),m=eh(2);f.firstUpdatePass&&MG(f,c,m,h),a!==$n&&ko(d,m,a)&&AG(f,f.data[ea()],d,d[11],c,d[m+1]=function yhe(c,a){return null==c||("string"==typeof a?c+=a:"object"==typeof c&&(c=fr(Td(c)))),c}(a,l),h,m)}function EG(c,a){return a>=c.expandoStartIndex}function MG(c,a,l,h){const d=c.data;if(null===d[l+1]){const f=d[ea()],m=EG(c,l);RG(f,h)&&null===a&&!m&&(a=!1),a=function hhe(c,a,l,h){const d=sR(c);let f=h?a.residualClasses:a.residualStyles;if(null===d)0===(h?a.classBindings:a.styleBindings)&&(l=G0(l=k2(null,c,a,l,h),a.attrs,h),f=null);else{const m=a.directiveStylingLast;if(-1===m||c[m]!==d)if(l=k2(d,c,a,l,h),null===f){let y=function dhe(c,a,l){const h=l?a.classBindings:a.styleBindings;if(0!==sh(h))return c[hc(h)]}(c,a,h);void 0!==y&&Array.isArray(y)&&(y=k2(null,c,a,y[1],h),y=G0(y,a.attrs,h),function fhe(c,a,l,h){c[hc(l?a.classBindings:a.styleBindings)]=h}(c,a,h,y))}else f=function phe(c,a,l){let h;const d=a.directiveEnd;for(let f=1+a.directiveStylingLast;f<d;f++)h=G0(h,c[f].hostAttrs,l);return G0(h,a.attrs,l)}(c,a,h)}return void 0!==f&&(h?a.residualClasses=f:a.residualStyles=f),l}(d,f,a,h),function the(c,a,l,h,d,f){let m=f?a.classBindings:a.styleBindings,g=hc(m),y=sh(m);c[h]=l;let v,_=!1;if(Array.isArray(l)){const b=l;v=b[1],(null===v||kg(b,v)>0)&&(_=!0)}else v=l;if(d)if(0!==y){const S=hc(c[g+1]);c[h+1]=Xw(S,g),0!==S&&(c[S+1]=h2(c[S+1],h)),c[g+1]=function Kce(c,a){return 131071&c|a<<17}(c[g+1],h)}else c[h+1]=Xw(g,0),0!==g&&(c[g+1]=h2(c[g+1],h)),g=h;else c[h+1]=Xw(y,0),0===g?g=h:c[y+1]=h2(c[y+1],h),y=h;_&&(c[h+1]=u2(c[h+1])),vG(c,v,h,!0),vG(c,v,h,!1),function nhe(c,a,l,h,d){const f=d?c.residualClasses:c.residualStyles;null!=f&&"string"==typeof a&&kg(f,a)>=0&&(l[h+1]=d2(l[h+1]))}(a,v,c,h,f),m=Xw(g,y),f?a.classBindings=m:a.styleBindings=m}(d,f,a,l,m,h)}}function k2(c,a,l,h,d){let f=null;const m=l.directiveEnd;let g=l.directiveStylingLast;for(-1===g?g=l.directiveStart:g++;g<m&&(f=a[g],h=G0(h,f.hostAttrs,d),f!==c);)g++;return null!==c&&(l.directiveStylingLast=g),h}function G0(c,a,l){const h=l?1:2;let d=-1;if(null!==a)for(let f=0;f<a.length;f++){const m=a[f];"number"==typeof m?d=m:d===h&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),Za(c,m,!!l||a[++f]))}return void 0===c?null:c}function AG(c,a,l,h,d,f,m,g){if(!(3&a.type))return;const y=c.data,_=y[g+1];iC(function Cz(c){return 1==(1&c)}(_)?IG(y,a,l,d,sh(_),m):void 0)||(iC(f)||function wz(c){return 2==(2&c)}(_)&&(f=IG(y,null,l,d,g,m)),function Cle(c,a,l,h,d){if(a)d?c.addClass(l,h):c.removeClass(l,h);else{let f=-1===h.indexOf("-")?void 0:Ca.DashCase;null==d?c.removeStyle(l,h,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Ca.Important),c.setStyle(l,h,d,f))}}(h,m,vw(ea(),l),d,f))}function IG(c,a,l,h,d,f){const m=null===a;let g;for(;d>0;){const y=c[d],_=Array.isArray(y),v=_?y[1]:y,b=null===v;let S=l[d+1];S===$n&&(S=b?Wi:void 0);let T=b?gR(S,h):v===h?S:void 0;if(_&&!iC(T)&&(T=gR(y,h)),iC(T)&&(g=T,m))return g;const x=c[d+1];d=m?hc(x):sh(x)}if(null!==a){let y=f?a.residualClasses:a.residualStyles;null!=y&&(g=gR(y,h))}return g}function iC(c){return void 0!==c}function RG(c,a){return 0!=(c.flags&(a?16:32))}function ve(c,a=""){const l=dt(),h=Li(),d=c+22,f=h.firstCreatePass?qg(h,d,1,a,null):h.data[d],m=l[d]=function RR(c,a){return c.createText(a)}(l[11],a);kw(h,l,m,f),Kc(f,!1)}function Kt(c){return pr("",c,""),Kt}function pr(c,a,l){const h=dt(),d=Zg(h,c,a,l);return d!==$n&&oh(h,ea(),d),pr}function H0(c,a,l,h,d){const f=dt(),m=Kg(f,c,a,l,h,d);return m!==$n&&oh(f,ea(),m),H0}function iu(c,a,l){const h=dt();return ko(h,Dg(),a)&&Ja(Li(),Wr(),h,c,a,h[11],l,!0),iu}function rC(c,a,l){const h=dt();if(ko(h,Dg(),a)){const f=Li(),m=Wr();Ja(f,m,h,c,a,$z(sR(f.data),m,h),l,!0)}return rC}const ly="en-US";let YG=ly;function z2(c,a,l,h,d){if(c=Bn(c),Array.isArray(c))for(let f=0;f<c.length;f++)z2(c[f],a,l,h,d);else{const f=Li(),m=dt();let g=vp(c)?c:Bn(c.provide),y=ez(c);const _=Gs(),v=1048575&_.providerIndexes,b=_.directiveStart,S=_.providerIndexes>>20;if(vp(c)||!c.multi){const T=new y0(y,d,N),x=H2(g,a,d?v:v+S,b);-1===x?(Dw(v0(_,m),f,g),G2(f,c,a.length),a.push(g),_.directiveStart++,_.directiveEnd++,d&&(_.providerIndexes+=1048576),l.push(T),m.push(T)):(l[x]=T,m[x]=T)}else{const T=H2(g,a,v+S,b),x=H2(g,a,v,v+S),E=T>=0&&l[T],I=x>=0&&l[x];if(d&&!I||!d&&!E){Dw(v0(_,m),f,g);const M=function Nde(c,a,l,h,d){const f=new y0(c,l,N);return f.multi=[],f.index=a,f.componentProviders=0,S6(f,d,h&&!l),f}(d?Ode:Pde,l.length,d,h,y);!d&&I&&(l[x].providerFactory=M),G2(f,c,a.length,0),a.push(g),_.directiveStart++,_.directiveEnd++,d&&(_.providerIndexes+=1048576),l.push(M),m.push(M)}else G2(f,c,T>-1?T:x,S6(l[d?x:T],y,!d&&h));!d&&h&&I&&l[x].componentProviders++}}}function G2(c,a,l,h){const d=vp(a),f=function Qle(c){return!!c.useClass}(a);if(d||f){const y=(f?Bn(a.useClass):a).prototype.ngOnDestroy;if(y){const _=c.destroyHooks||(c.destroyHooks=[]);if(!d&&a.multi){const v=_.indexOf(l);-1===v?_.push(l,[h,y]):_[v+1].push(h,y)}else _.push(l,y)}}}function S6(c,a,l){return l&&c.componentProviders++,c.multi.push(a)-1}function H2(c,a,l,h){for(let d=l;d<h;d++)if(a[d]===c)return d;return-1}function Pde(c,a,l,h){return j2(this.multi,[])}function Ode(c,a,l,h){const d=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,g=b0(l,l[1],this.providerFactory.index,h);f=g.slice(0,m),j2(d,f);for(let y=m;y<g.length;y++)f.push(g[y])}else f=[],j2(d,f);return f}function j2(c,a){for(let l=0;l<c.length;l++)a.push((0,c[l])());return a}function Lt(c,a=[]){return l=>{l.providersResolver=(h,d)=>function Lde(c,a,l){const h=Li();if(h.firstCreatePass){const d=cc(c);z2(l,h.data,h.blueprint,d,!0),z2(a,h.data,h.blueprint,d,!1)}}(h,d?d(c):c,a)}}class wp{}class T6{}class w6 extends wp{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new R2(this);const h=Wa(a);this._bootstrapComponents=rh(h.bootstrap),this._r3Injector=mz(a,l,[{provide:wp,useValue:this},{provide:wd,useValue:this.componentFactoryResolver}],fr(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class W2 extends T6{constructor(a){super(),this.moduleType=a}create(a){return new w6(this.moduleType,a)}}class kde extends wp{constructor(a,l,h){super(),this.componentFactoryResolver=new R2(this),this.instance=null;const d=new QU([...a,{provide:wp,useValue:this},{provide:wd,useValue:this.componentFactoryResolver}],l||jw(),h,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function cC(c,a,l=null){return new kde(c,a,l).injector}let Vde=(()=>{class c{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const h=YU(0,l.type),d=h.length>0?cC([h],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,d)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return c.\u0275prov=Fe({token:c,providedIn:"environment",factory:()=>new c(Oe(ih))}),c})();function C6(c){c.getStandaloneInjector=a=>a.get(Vde).getOrCreateStandaloneInjector(c)}function cy(c,a,l){const h=Qo()+c,d=dt();return d[h]===$n?eu(d,h,l?a.call(l):a()):function U0(c,a){return c[a]}(d,h)}function mr(c,a,l,h){return R6(dt(),Qo(),c,a,l,h)}function Y0(c,a){const l=c[a];return l===$n?void 0:l}function R6(c,a,l,h,d,f){const m=a+l;return ko(c,m,d)?eu(c,m+1,f?h.call(f,d):h(d)):Y0(c,m+1)}function ms(c,a){const l=Li();let h;const d=c+22;l.firstCreatePass?(h=function tfe(c,a){if(a)for(let l=a.length-1;l>=0;l--){const h=a[l];if(c===h.name)return h}}(a,l.pipeRegistry),l.data[d]=h,h.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(d,h.onDestroy)):h=l.data[d];const f=h.factory||(h.factory=gp(h.type)),m=Ol(N);try{const g=Ew(!1),y=f();return Ew(g),function Zue(c,a,l,h){l>=c.data.length&&(c.data[l]=null,c.blueprint[l]=null),a[l]=h}(l,dt(),d,y),y}finally{Ol(m)}}function _o(c,a,l){const h=c+22,d=dt(),f=Mg(d,h);return K0(d,h)?R6(d,Qo(),a,f.transform,l,f):f.transform(l)}function Z0(c,a,l,h){const d=c+22,f=dt(),m=Mg(f,d);return K0(f,d)?function L6(c,a,l,h,d,f,m){const g=a+l;return Sp(c,g,d,f)?eu(c,g+2,m?h.call(m,d,f):h(d,f)):Y0(c,g+2)}(f,Qo(),a,m.transform,l,h,m):m.transform(l,h)}function K0(c,a){return c[1].data[a].pure}function q2(c){return a=>{setTimeout(c,void 0,a)}}const st=class sfe extends Qe{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,h){let d=a,f=l||(()=>null),m=h;if(a&&"object"==typeof a){const y=a;d=y.next?.bind(y),f=y.error?.bind(y),m=y.complete?.bind(y)}this.__isAsync&&(f=q2(f),d&&(d=q2(d)),m&&(m=q2(m)));const g=super.subscribe({next:d,error:f,complete:m});return a instanceof O&&a.add(g),g}};function ofe(){return this._results[bp()]()}class $2{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=bp(),h=$2.prototype;h[l]||(h[l]=ofe)}get changes(){return this._changes||(this._changes=new st)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const h=this;h.dirty=!1;const d=Ya(a);(this._changesDetected=!function vae(c,a,l){if(c.length!==a.length)return!1;for(let h=0;h<c.length;h++){let d=c[h],f=a[h];if(l&&(d=l(d),f=l(f)),f!==d)return!1}return!0}(h._results,d,l))&&(h._results=d,h.length=d.length,h.last=d[this.length-1],h.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Xr=(()=>{class c{}return c.__NG_ELEMENT_ID__=cfe,c})();const afe=Xr,lfe=class extends afe{constructor(a,l,h){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=h}createEmbeddedView(a,l){const h=this._declarationTContainer.tViews,d=Yw(this._declarationLView,h,a,16,null,h.declTNode,null,null,null,null,l||null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(h)),S2(h,d,a),new k0(d)}};function cfe(){return uC(Gs(),dt())}function uC(c,a){return 4&c.type?new lfe(a,c,Gg(c,a)):null}let ii=(()=>{class c{}return c.__NG_ELEMENT_ID__=ufe,c})();function ufe(){return V6(Gs(),dt())}const hfe=ii,F6=class extends hfe{constructor(a,l,h){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=h}get element(){return Gg(this._hostTNode,this._hostLView)}get injector(){return new Rg(this._hostTNode,this._hostLView)}get parentInjector(){const a=Mw(this._hostTNode,this._hostLView);if(k5(a)){const l=Ig(a,this._hostLView),h=Ag(a);return new Rg(l[1].data[h+8],l)}return new Rg(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=k6(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,h){let d,f;"number"==typeof h?d=h:null!=h&&(d=h.index,f=h.injector);const m=a.createEmbeddedView(l||{},f);return this.insert(m,d),m}createComponent(a,l,h,d,f){const m=a&&!function T0(c){return"function"==typeof c}(a);let g;if(m)g=l;else{const b=l||{};g=b.index,h=b.injector,d=b.projectableNodes,f=b.environmentInjector||b.ngModuleRef}const y=m?a:new V0(sr(a)),_=h||this.parentInjector;if(!f&&null==y.ngModule){const S=(m?_:this.parentInjector).get(ih,null);S&&(f=S)}const v=y.create(_,d,void 0,f);return this.insert(v.hostView,g),v}insert(a,l){const h=a._lView,d=h[1];if(function Uoe(c){return lc(c[3])}(h)){const v=this.indexOf(a);if(-1!==v)this.detach(v);else{const b=h[3],S=new F6(b,b[6],b[3]);S.detach(S.indexOf(a))}}const f=this._adjustIndex(l),m=this._lContainer;!function gle(c,a,l,h){const d=10+h,f=l.length;h>0&&(l[d-1][4]=a),h<f-10?(a[4]=l[d],$5(l,10+h,a)):(l.push(a),a[4]=null),a[3]=l;const m=a[17];null!==m&&l!==m&&function yle(c,a){const l=c[9];a[16]!==a[3][3][16]&&(c[2]=!0),null===l?c[9]=[a]:l.push(a)}(m,a);const g=a[19];null!==g&&g.insertView(c),a[2]|=64}(d,h,m,f);const g=FR(f,m),y=h[11],_=Fw(y,m[7]);return null!==_&&function fle(c,a,l,h,d,f){h[0]=d,h[6]=a,R0(c,h,l,1,d,f)}(d,m[6],y,h,_,g),a.attachToViewContainerRef(),$5(Y2(m),f,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=k6(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),h=PR(this._lContainer,l);h&&(Rw(Y2(this._lContainer),l),TU(h[1],h))}detach(a){const l=this._adjustIndex(a,-1),h=PR(this._lContainer,l);return h&&null!=Rw(Y2(this._lContainer),l)?new k0(h):null}_adjustIndex(a,l=0){return a??this.length+l}};function k6(c){return c[8]}function Y2(c){return c[8]||(c[8]=[])}function V6(c,a){let l;const h=a[c.index];if(lc(h))l=h;else{let d;if(8&c.type)d=Is(h);else{const f=a[11];d=f.createComment("");const m=qa(c,a);yp(f,Fw(f,m),d,function Sle(c,a){return c.nextSibling(a)}(f,m),!1)}a[c.index]=l=Wz(h,a,d,c),Kw(a,l)}return new F6(l,c,a)}class Z2{constructor(a){this.queryList=a,this.matches=null}clone(){return new Z2(this.queryList)}setDirty(){this.queryList.setDirty()}}class K2{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const h=null!==a.contentQueries?a.contentQueries[0]:l.length,d=[];for(let f=0;f<h;f++){const m=l.getByIndex(f);d.push(this.queries[m.indexInDeclarationView].clone())}return new K2(d)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==H6(a,l).matches&&this.queries[l].setDirty()}}class B6{constructor(a,l,h=null){this.predicate=a,this.flags=l,this.read=h}}class J2{constructor(a=[]){this.queries=a}elementStart(a,l){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let h=0;h<this.length;h++){const d=null!==l?l.length:0,f=this.getByIndex(h).embeddedTView(a,d);f&&(f.indexInDeclarationView=h,null!==l?l.push(f):l=[f])}return null!==l?new J2(l):null}template(a,l){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Q2{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new Q2(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==l;)h=h.parent;return l===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const h=this.metadata.predicate;if(Array.isArray(h))for(let d=0;d<h.length;d++){const f=h[d];this.matchTNodeWithReadOption(a,l,pfe(l,f)),this.matchTNodeWithReadOption(a,l,Aw(l,a,f,!1,!1))}else h===Xr?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Aw(l,a,h,!1,!1))}matchTNodeWithReadOption(a,l,h){if(null!==h){const d=this.metadata.read;if(null!==d)if(d===Xt||d===ii||d===Xr&&4&l.type)this.addMatch(l.index,-2);else{const f=Aw(l,a,d,!1,!1);null!==f&&this.addMatch(l.index,f)}else this.addMatch(l.index,h)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function pfe(c,a){const l=c.localNames;if(null!==l)for(let h=0;h<l.length;h+=2)if(l[h]===a)return l[h+1];return null}function gfe(c,a,l,h){return-1===l?function mfe(c,a){return 11&c.type?Gg(c,a):4&c.type?uC(c,a):null}(a,c):-2===l?function yfe(c,a,l){return l===Xt?Gg(a,c):l===Xr?uC(a,c):l===ii?V6(a,c):void 0}(c,a,h):b0(c,c[1],l,a)}function U6(c,a,l,h){const d=a[19].queries[h];if(null===d.matches){const f=c.data,m=l.matches,g=[];for(let y=0;y<m.length;y+=2){const _=m[y];g.push(_<0?null:gfe(a,f[_],m[y+1],l.metadata.read))}d.matches=g}return d.matches}function eL(c,a,l,h){const d=c.queries.getByIndex(l),f=d.matches;if(null!==f){const m=U6(c,a,d,l);for(let g=0;g<f.length;g+=2){const y=f[g];if(y>0)h.push(m[g/2]);else{const _=f[g+1],v=a[-y];for(let b=10;b<v.length;b++){const S=v[b];S[17]===S[3]&&eL(S[1],S,_,h)}if(null!==v[9]){const b=v[9];for(let S=0;S<b.length;S++){const T=b[S];eL(T[1],T,_,h)}}}}}return h}function vt(c){const a=dt(),l=Li(),h=M5();oR(h+1);const d=H6(l,h);if(c.dirty&&function Boe(c){return 4==(4&c[2])}(a)===(2==(2&d.metadata.flags))){if(null===d.matches)c.reset([]);else{const f=d.crossesNgTemplate?eL(l,a,h,[]):U6(l,a,d,h);c.reset(f,hce),c.notifyOnChanges()}return!0}return!1}function hi(c,a,l){const h=Li();h.firstCreatePass&&(G6(h,new B6(c,a,l),-1),2==(2&a)&&(h.staticViewQueries=!0)),z6(h,dt(),a)}function Cn(c,a,l,h){const d=Li();if(d.firstCreatePass){const f=Gs();G6(d,new B6(a,l,h),f.index),function vfe(c,a){const l=c.contentQueries||(c.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(c.queries.length-1,a)}(d,c),2==(2&l)&&(d.staticContentQueries=!0)}z6(d,dt(),l)}function bt(){return function _fe(c,a){return c[19].queries[a].queryList}(dt(),M5())}function z6(c,a,l){const h=new $2(4==(4&l));Fz(c,a,h,h.destroy),null===a[19]&&(a[19]=new K2),a[19].queries.push(new Z2(h))}function G6(c,a,l){null===c.queries&&(c.queries=new J2),c.queries.track(new Q2(a,l))}function H6(c,a){return c.queries.getByIndex(a)}function io(c,a){return uC(c,a)}function dC(...c){}const fC=new Vt("Application Initializer");let pC=(()=>{class c{constructor(l){this.appInits=l,this.resolve=dC,this.reject=dC,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,d)=>{this.resolve=h,this.reject=d})}runInitializers(){if(this.initialized)return;const l=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(z0(f))l.push(f);else if(N2(f)){const m=new Promise((g,y)=>{f.subscribe({complete:g,error:y})});l.push(m)}}Promise.all(l).then(()=>{h()}).catch(d=>{this.reject(d)}),0===l.length&&h(),this.initialized=!0}}return c.\u0275fac=function(l){return new(l||c)(Oe(fC,8))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const Q0=new Vt("AppId",{providedIn:"root",factory:function l8(){return`${sL()}${sL()}${sL()}`}});function sL(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const c8=new Vt("Platform Initializer"),kr=new Vt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),u8=new Vt("appBootstrapListener"),h8=new Vt("AnimationModuleType");let Bfe=(()=>{class c{log(l){console.log(l)}warn(l){console.warn(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();const ru=new Vt("LocaleId",{providedIn:"root",factory:()=>os(ru,On.Optional|On.SkipSelf)||function Ufe(){return typeof $localize<"u"&&$localize.locale||ly}()});class Gfe{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let oL=(()=>{class c{compileModuleSync(l){return new W2(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const h=this.compileModuleSync(l),f=rh(Wa(l).declarations).reduce((m,g)=>{const y=sr(g);return y&&m.push(new V0(y)),m},[]);return new Gfe(h,f)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const Wfe=(()=>Promise.resolve(0))();function aL(c){typeof Zone>"u"?Wfe.then(()=>{c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}class Yn{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new st(!1),this.onMicrotaskEmpty=new st(!1),this.onStable=new st(!1),this.onError=new st(!1),typeof Zone>"u")throw new rt(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!h&&l,d.shouldCoalesceRunChangeDetection=h,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Xfe(){let c=wr.requestAnimationFrame,a=wr.cancelAnimationFrame;if(typeof Zone<"u"&&c&&a){const l=c[Zone.__symbol__("OriginalDelegate")];l&&(c=l);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Yfe(c){const a=()=>{!function $fe(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(wr,()=>{c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{c.lastRequestAnimationFrameId=-1,cL(c),c.isCheckStableRunning=!0,lL(c),c.isCheckStableRunning=!1},void 0,()=>{},()=>{})),c.fakeTopEventTask.invoke()}),cL(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,h,d,f,m,g)=>{try{return p8(c),l.invokeTask(d,f,m,g)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||c.shouldCoalesceRunChangeDetection)&&a(),m8(c)}},onInvoke:(l,h,d,f,m,g,y)=>{try{return p8(c),l.invoke(d,f,m,g,y)}finally{c.shouldCoalesceRunChangeDetection&&a(),m8(c)}},onHasTask:(l,h,d,f)=>{l.hasTask(d,f),h===d&&("microTask"==f.change?(c._hasPendingMicrotasks=f.microTask,cL(c),lL(c)):"macroTask"==f.change&&(c.hasPendingMacrotasks=f.macroTask))},onHandleError:(l,h,d,f)=>(l.handleError(d,f),c.runOutsideAngular(()=>c.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Yn.isInAngularZone())throw new rt(909,!1)}static assertNotInAngularZone(){if(Yn.isInAngularZone())throw new rt(909,!1)}run(a,l,h){return this._inner.run(a,l,h)}runTask(a,l,h,d){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+d,a,qfe,dC,dC);try{return f.runTask(m,l,h)}finally{f.cancelTask(m)}}runGuarded(a,l,h){return this._inner.runGuarded(a,l,h)}runOutsideAngular(a){return this._outer.run(a)}}const qfe={};function lL(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(()=>c.onStable.emit(null))}finally{c.isStable=!0}}}function cL(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function p8(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function m8(c){c._nesting--,lL(c)}class Zfe{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new st,this.onMicrotaskEmpty=new st,this.onStable=new st,this.onError=new st}run(a,l,h){return a.apply(l,h)}runGuarded(a,l,h){return a.apply(l,h)}runOutsideAngular(a){return a()}runTask(a,l,h,d){return a.apply(l,h)}}const g8=new Vt(""),mC=new Vt("");let dL,uL=(()=>{class c{constructor(l,h,d){this._ngZone=l,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,dL||(function Kfe(c){dL=c}(d),d.addToWindow(h)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Yn.assertNotInAngularZone(),aL(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())aL(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(l)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,h,d){let f=-1;h&&h>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),l(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:l,timeoutId:f,updateCb:d})}whenStable(l,h,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,h,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,h,d){return[]}}return c.\u0275fac=function(l){return new(l||c)(Oe(Yn),Oe(hL),Oe(mC))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),hL=(()=>{class c{constructor(){this._applications=new Map}registerApplication(l,h){this._applications.set(l,h)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,h=!0){return dL?.findTestabilityInTree(this,l,h)??null}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})(),Ed=null;const y8=new Vt("AllowMultipleToken"),fL=new Vt("PlatformDestroyListeners");class _8{constructor(a,l){this.name=a,this.token=l}}function b8(c,a,l=[]){const h=`Platform: ${a}`,d=new Vt(h);return(f=[])=>{let m=pL();if(!m||m.injector.get(y8,!1)){const g=[...l,...f,{provide:d,useValue:!0}];c?c(g):function epe(c){if(Ed&&!Ed.get(y8,!1))throw new rt(400,!1);Ed=c;const a=c.get(T8);(function v8(c){const a=c.get(c8,null);a&&a.forEach(l=>l())})(c)}(function S8(c=[],a){return cr.create({name:a,providers:[{provide:ZR,useValue:"platform"},{provide:fL,useValue:new Set([()=>Ed=null])},...c]})}(g,h))}return function npe(c){const a=pL();if(!a)throw new rt(401,!1);return a}()}}function pL(){return Ed?.get(T8)??null}let T8=(()=>{class c{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,h){const d=function C8(c,a){let l;return l="noop"===c?new Zfe:("zone.js"===c?void 0:c)||new Yn(a),l}(h?.ngZone,function w8(c){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!c||!c.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!c||!c.ngZoneRunCoalescing)||!1}}(h)),f=[{provide:Yn,useValue:d}];return d.run(()=>{const m=cr.create({providers:f,parent:this.injector,name:l.moduleType.name}),g=l.create(m),y=g.injector.get(jg,null);if(!y)throw new rt(402,!1);return d.runOutsideAngular(()=>{const _=d.onError.subscribe({next:v=>{y.handleError(v)}});g.onDestroy(()=>{gC(this._modules,g),_.unsubscribe()})}),function x8(c,a,l){try{const h=l();return z0(h)?h.catch(d=>{throw a.runOutsideAngular(()=>c.handleError(d)),d}):h}catch(h){throw a.runOutsideAngular(()=>c.handleError(h)),h}}(y,d,()=>{const _=g.injector.get(pC);return _.runInitializers(),_.donePromise.then(()=>(function ZG(c){ja(c,"Expected localeId to be defined"),"string"==typeof c&&(YG=c.toLowerCase().replace(/_/g,"-"))}(g.injector.get(ru,ly)||ly),this._moduleDoBootstrap(g),g))})})}bootstrapModule(l,h=[]){const d=E8({},h);return function Jfe(c,a,l){const h=new W2(l);return Promise.resolve(h)}(0,0,l).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(l){const h=l.injector.get(dy);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(d=>h.bootstrap(d));else{if(!l.instance.ngDoBootstrap)throw new rt(403,!1);l.instance.ngDoBootstrap(h)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new rt(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const l=this._injector.get(fL,null);l&&(l.forEach(h=>h()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return c.\u0275fac=function(l){return new(l||c)(Oe(cr))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();function E8(c,a){return Array.isArray(a)?a.reduce(E8,c):{...c,...a}}let dy=(()=>{class c{constructor(l,h,d){this._zone=l,this._injector=h,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new Tt(g=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{g.next(this._stable),g.complete()})}),m=new Tt(g=>{let y;this._zone.runOutsideAngular(()=>{y=this._zone.onStable.subscribe(()=>{Yn.assertNotInAngularZone(),aL(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,g.next(!0))})})});const _=this._zone.onUnstable.subscribe(()=>{Yn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{g.next(!1)}))});return()=>{y.unsubscribe(),_.unsubscribe()}});this.isStable=VI(f,m.pipe(o5()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,h){const d=l instanceof tz;if(!this._injector.get(pC).done)throw!d&&function wg(c){const a=sr(c)||Ko(c)||Jo(c);return null!==a&&a.standalone}(l),new rt(405,false);let m;m=d?l:this._injector.get(wd).resolveComponentFactory(l),this.componentTypes.push(m.componentType);const g=function Qfe(c){return c.isBoundToModule}(m)?void 0:this._injector.get(wp),_=m.create(cr.NULL,[],h||m.selector,g),v=_.location.nativeElement,b=_.injector.get(g8,null);return b?.registerApplication(v),_.onDestroy(()=>{this.detachView(_.hostView),gC(this.components,_),b?.unregisterApplication(v)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new rt(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const h=l;this._views.push(h),h.attachToAppRef(this)}detachView(l){const h=l;gC(this._views,h),h.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(u8,[]).concat(this._bootstrapListeners).forEach(d=>d(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>gC(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new rt(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return c.\u0275fac=function(l){return new(l||c)(Oe(Yn),Oe(ih),Oe(jg))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function gC(c,a){const l=c.indexOf(a);l>-1&&c.splice(l,1)}let D8=!0,Ls=(()=>{class c{}return c.__NG_ELEMENT_ID__=spe,c})();function spe(c){return function ope(c,a,l){if(yw(c)&&!l){const h=$a(c.index,a);return new k0(h,h)}return 47&c.type?new k0(a[16],a):null}(Gs(),dt(),16==(16&c))}class P8{constructor(){}supports(a){return B0(a)}create(a){return new dpe(a)}}const hpe=(c,a)=>a;class dpe{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||hpe}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,h=this._removalsHead,d=0,f=null;for(;l||h;){const m=!h||l&&l.currentIndex<N8(h,d,f)?l:h,g=N8(m,d,f),y=m.currentIndex;if(m===h)d--,h=h._nextRemoved;else if(l=l._next,null==m.previousIndex)d++;else{f||(f=[]);const _=g-d,v=y-d;if(_!=v){for(let S=0;S<_;S++){const T=S<f.length?f[S]:f[S]=0,x=T+S;v<=x&&x<_&&(f[S]=T+1)}f[m.previousIndex]=v-_}}g!==y&&a(m,g,y)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!B0(a))throw new rt(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let d,f,m,l=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let g=0;g<this.length;g++)f=a[g],m=this._trackByFn(g,f),null!==l&&Object.is(l.trackById,m)?(h&&(l=this._verifyReinsertion(l,f,m,g)),Object.is(l.item,f)||this._addIdentityChange(l,f)):(l=this._mismatch(l,f,m,g),h=!0),l=l._next}else d=0,function Xue(c,a){if(Array.isArray(c))for(let l=0;l<c.length;l++)a(c[l]);else{const l=c[bp()]();let h;for(;!(h=l.next()).done;)a(h.value)}}(a,g=>{m=this._trackByFn(d,g),null!==l&&Object.is(l.trackById,m)?(h&&(l=this._verifyReinsertion(l,g,m,d)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,m,d),h=!0),l=l._next,d++}),this.length=d;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,h,d){let f;return null===a?f=this._itTail:(f=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,f,d)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,d))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,f,d)):a=this._addAfter(new fpe(l,h),f,d),a}_verifyReinsertion(a,l,h,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==f?a=this._reinsertAfter(f,a._prev,d):a.currentIndex!=d&&(a.currentIndex=d,this._addToMoves(a,d)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const d=a._prevRemoved,f=a._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(a,l,h),this._addToMoves(a,h),a}_moveAfter(a,l,h){return this._unlink(a),this._insertAfter(a,l,h),this._addToMoves(a,h),a}_addAfter(a,l,h){return this._insertAfter(a,l,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,h){const d=null===l?this._itHead:l._next;return a._next=d,a._prev=l,null===d?this._itTail=a:d._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new O8),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,h=a._next;return null===l?this._itHead=h:l._next=h,null===h?this._itTail=l:h._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new O8),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class fpe{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ppe{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===l||l<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const l=a._prevDup,h=a._nextDup;return null===l?this._head=h:l._nextDup=h,null===h?this._tail=l:h._prevDup=l,null===this._head}}class O8{constructor(){this.map=new Map}put(a){const l=a.trackById;let h=this.map.get(l);h||(h=new ppe,this.map.set(l,h)),h.add(a)}get(a,l){const d=this.map.get(a);return d?d.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function N8(c,a,l){const h=c.previousIndex;if(null===h)return h;let d=0;return l&&h<l.length&&(d=l[h]),h+a+d}class F8{constructor(){}supports(a){return a instanceof Map||P2(a)}create(){return new mpe}}class mpe{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||P2(a)))throw new rt(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,d)=>{if(l&&l.key===d)this._maybeAddToChanges(l,h),this._appendAfter=l,l=l._next;else{const f=this._getOrCreateRecordForKey(d,h);l=this._insertBeforeOrAppend(l,f)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let h=l;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const h=a._prev;return l._next=a,l._prev=h,a._prev=l,h&&(h._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const d=this._records.get(a);this._maybeAddToChanges(d,l);const f=d._prev,m=d._next;return f&&(f._next=m),m&&(m._prev=f),d._next=null,d._prev=null,d}const h=new gpe(a);return this._records.set(a,h),h.currentValue=l,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(h=>l(a[h],h))}}class gpe{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function k8(){return new fy([new P8])}let fy=(()=>{class c{constructor(l){this.factories=l}static create(l,h){if(null!=h){const d=h.factories.slice();l=l.concat(d)}return new c(l)}static extend(l){return{provide:c,useFactory:h=>c.create(l,h||k8()),deps:[[c,new Sd,new bd]]}}find(l){const h=this.factories.find(d=>d.supports(l));if(null!=h)return h;throw new rt(901,!1)}}return c.\u0275prov=Fe({token:c,providedIn:"root",factory:k8}),c})();function V8(){return new eb([new F8])}let eb=(()=>{class c{constructor(l){this.factories=l}static create(l,h){if(h){const d=h.factories.slice();l=l.concat(d)}return new c(l)}static extend(l){return{provide:c,useFactory:h=>c.create(l,h||V8()),deps:[[c,new Sd,new bd]]}}find(l){const h=this.factories.find(d=>d.supports(l));if(h)return h;throw new rt(901,!1)}}return c.\u0275prov=Fe({token:c,providedIn:"root",factory:V8}),c})();const vpe=b8(null,"core",[]);let bpe=(()=>{class c{constructor(l){}}return c.\u0275fac=function(l){return new(l||c)(Oe(dy))},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({}),c})();function lh(c){return"boolean"==typeof c?c:null!=c&&"false"!==c}let vC=null;function su(){return vC}const Ci=new Vt("DocumentToken");let vL=(()=>{class c{historyGo(l){throw new Error("Not implemented")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:function(){return function xpe(){return Oe(B8)}()},providedIn:"platform"}),c})();const Epe=new Vt("Location Initialized");let B8=(()=>{class c extends vL{constructor(l){super(),this._doc=l,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return su().getBaseHref(this._doc)}onPopState(l){const h=su().getGlobalEventTarget(this._doc,"window");return h.addEventListener("popstate",l,!1),()=>h.removeEventListener("popstate",l)}onHashChange(l){const h=su().getGlobalEventTarget(this._doc,"window");return h.addEventListener("hashchange",l,!1),()=>h.removeEventListener("hashchange",l)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(l){this.location.pathname=l}pushState(l,h,d){U8()?this._history.pushState(l,h,d):this.location.hash=d}replaceState(l,h,d){U8()?this._history.replaceState(l,h,d):this.location.hash=d}forward(){this._history.forward()}back(){this._history.back()}historyGo(l=0){this._history.go(l)}getState(){return this._history.state}}return c.\u0275fac=function(l){return new(l||c)(Oe(Ci))},c.\u0275prov=Fe({token:c,factory:function(){return function Mpe(){return new B8(Oe(Ci))}()},providedIn:"platform"}),c})();function U8(){return!!window.history.pushState}function bL(c,a){if(0==c.length)return a;if(0==a.length)return c;let l=0;return c.endsWith("/")&&l++,a.startsWith("/")&&l++,2==l?c+a.substring(1):1==l?c+a:c+"/"+a}function z8(c){const a=c.match(/#|\?|$/),l=a&&a.index||c.length;return c.slice(0,l-("/"===c[l-1]?1:0))+c.slice(l)}function ch(c){return c&&"?"!==c[0]?"?"+c:c}let xp=(()=>{class c{historyGo(l){throw new Error("Not implemented")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:function(){return os(H8)},providedIn:"root"}),c})();const G8=new Vt("appBaseHref");let H8=(()=>{class c extends xp{constructor(l,h){super(),this._platformLocation=l,this._removeListenerFns=[],this._baseHref=h??this._platformLocation.getBaseHrefFromDOM()??os(Ci).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(l){this._removeListenerFns.push(this._platformLocation.onPopState(l),this._platformLocation.onHashChange(l))}getBaseHref(){return this._baseHref}prepareExternalUrl(l){return bL(this._baseHref,l)}path(l=!1){const h=this._platformLocation.pathname+ch(this._platformLocation.search),d=this._platformLocation.hash;return d&&l?`${h}${d}`:h}pushState(l,h,d,f){const m=this.prepareExternalUrl(d+ch(f));this._platformLocation.pushState(l,h,m)}replaceState(l,h,d,f){const m=this.prepareExternalUrl(d+ch(f));this._platformLocation.replaceState(l,h,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(l=0){this._platformLocation.historyGo?.(l)}}return c.\u0275fac=function(l){return new(l||c)(Oe(vL),Oe(G8,8))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Dpe=(()=>{class c extends xp{constructor(l,h){super(),this._platformLocation=l,this._baseHref="",this._removeListenerFns=[],null!=h&&(this._baseHref=h)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(l){this._removeListenerFns.push(this._platformLocation.onPopState(l),this._platformLocation.onHashChange(l))}getBaseHref(){return this._baseHref}path(l=!1){let h=this._platformLocation.hash;return null==h&&(h="#"),h.length>0?h.substring(1):h}prepareExternalUrl(l){const h=bL(this._baseHref,l);return h.length>0?"#"+h:h}pushState(l,h,d,f){let m=this.prepareExternalUrl(d+ch(f));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.pushState(l,h,m)}replaceState(l,h,d,f){let m=this.prepareExternalUrl(d+ch(f));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.replaceState(l,h,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(l=0){this._platformLocation.historyGo?.(l)}}return c.\u0275fac=function(l){return new(l||c)(Oe(vL),Oe(G8,8))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),SL=(()=>{class c{constructor(l){this._subject=new st,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=l;const h=this._locationStrategy.getBaseHref();this._baseHref=z8(j8(h)),this._locationStrategy.onPopState(d=>{this._subject.emit({url:this.path(!0),pop:!0,state:d.state,type:d.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(l=!1){return this.normalize(this._locationStrategy.path(l))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(l,h=""){return this.path()==this.normalize(l+ch(h))}normalize(l){return c.stripTrailingSlash(function Ipe(c,a){return c&&a.startsWith(c)?a.substring(c.length):a}(this._baseHref,j8(l)))}prepareExternalUrl(l){return l&&"/"!==l[0]&&(l="/"+l),this._locationStrategy.prepareExternalUrl(l)}go(l,h="",d=null){this._locationStrategy.pushState(d,"",l,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(l+ch(h)),d)}replaceState(l,h="",d=null){this._locationStrategy.replaceState(d,"",l,h),this._notifyUrlChangeListeners(this.prepareExternalUrl(l+ch(h)),d)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(l=0){this._locationStrategy.historyGo?.(l)}onUrlChange(l){return this._urlChangeListeners.push(l),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(h=>{this._notifyUrlChangeListeners(h.url,h.state)})),()=>{const h=this._urlChangeListeners.indexOf(l);this._urlChangeListeners.splice(h,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(l="",h){this._urlChangeListeners.forEach(d=>d(l,h))}subscribe(l,h,d){return this._subject.subscribe({next:l,error:h,complete:d})}}return c.normalizeQueryParams=ch,c.joinWithSlash=bL,c.stripTrailingSlash=z8,c.\u0275fac=function(l){return new(l||c)(Oe(xp))},c.\u0275prov=Fe({token:c,factory:function(){return function Ape(){return new SL(Oe(xp))}()},providedIn:"root"}),c})();function j8(c){return c.replace(/\/index.html$/,"")}function Q8(c,a){a=encodeURIComponent(a);for(const l of c.split(";")){const h=l.indexOf("="),[d,f]=-1==h?[l,""]:[l.slice(0,h),l.slice(h+1)];if(d.trim()===a)return decodeURIComponent(f)}return null}let ro=(()=>{class c{constructor(l,h,d,f){this._iterableDiffers=l,this._keyValueDiffers=h,this._ngEl=d,this._renderer=f,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(l){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof l?l.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(l){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof l?l.split(/\s+/):l,this._rawClass&&(B0(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const l=this._iterableDiffer.diff(this._rawClass);l&&this._applyIterableChanges(l)}else if(this._keyValueDiffer){const l=this._keyValueDiffer.diff(this._rawClass);l&&this._applyKeyValueChanges(l)}}_applyKeyValueChanges(l){l.forEachAddedItem(h=>this._toggleClass(h.key,h.currentValue)),l.forEachChangedItem(h=>this._toggleClass(h.key,h.currentValue)),l.forEachRemovedItem(h=>{h.previousValue&&this._toggleClass(h.key,!1)})}_applyIterableChanges(l){l.forEachAddedItem(h=>{if("string"!=typeof h.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${fr(h.item)}`);this._toggleClass(h.item,!0)}),l.forEachRemovedItem(h=>this._toggleClass(h.item,!1))}_applyClasses(l){l&&(Array.isArray(l)||l instanceof Set?l.forEach(h=>this._toggleClass(h,!0)):Object.keys(l).forEach(h=>this._toggleClass(h,!!l[h])))}_removeClasses(l){l&&(Array.isArray(l)||l instanceof Set?l.forEach(h=>this._toggleClass(h,!1)):Object.keys(l).forEach(h=>this._toggleClass(h,!1)))}_toggleClass(l,h){(l=l.trim())&&l.split(/\s+/g).forEach(d=>{h?this._renderer.addClass(this._ngEl.nativeElement,d):this._renderer.removeClass(this._ngEl.nativeElement,d)})}}return c.\u0275fac=function(l){return new(l||c)(N(fy),N(eb),N(Xt),N(Gn))},c.\u0275dir=Ke({type:c,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),c})();class fme{constructor(a,l,h,d){this.$implicit=a,this.ngForOf=l,this.index=h,this.count=d}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Er=(()=>{class c{constructor(l,h,d){this._viewContainer=l,this._template=h,this._differs=d,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(l){this._ngForOf=l,this._ngForOfDirty=!0}set ngForTrackBy(l){this._trackByFn=l}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(l){l&&(this._template=l)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const l=this._ngForOf;!this._differ&&l&&(this._differ=this._differs.find(l).create(this.ngForTrackBy))}if(this._differ){const l=this._differ.diff(this._ngForOf);l&&this._applyChanges(l)}}_applyChanges(l){const h=this._viewContainer;l.forEachOperation((d,f,m)=>{if(null==d.previousIndex)h.createEmbeddedView(this._template,new fme(d.item,this._ngForOf,-1,-1),null===m?void 0:m);else if(null==m)h.remove(null===f?void 0:f);else if(null!==f){const g=h.get(f);h.move(g,m),nH(g,d)}});for(let d=0,f=h.length;d<f;d++){const g=h.get(d).context;g.index=d,g.count=f,g.ngForOf=this._ngForOf}l.forEachIdentityChange(d=>{nH(h.get(d.currentIndex),d)})}static ngTemplateContextGuard(l,h){return!0}}return c.\u0275fac=function(l){return new(l||c)(N(ii),N(Xr),N(fy))},c.\u0275dir=Ke({type:c,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),c})();function nH(c,a){c.context.$implicit=a.item}let bn=(()=>{class c{constructor(l,h){this._viewContainer=l,this._context=new mme,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=h}set ngIf(l){this._context.$implicit=this._context.ngIf=l,this._updateView()}set ngIfThen(l){iH("ngIfThen",l),this._thenTemplateRef=l,this._thenViewRef=null,this._updateView()}set ngIfElse(l){iH("ngIfElse",l),this._elseTemplateRef=l,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(l,h){return!0}}return c.\u0275fac=function(l){return new(l||c)(N(ii),N(Xr))},c.\u0275dir=Ke({type:c,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),c})();class mme{constructor(){this.$implicit=null,this.ngIf=null}}function iH(c,a){if(a&&!a.createEmbeddedView)throw new Error(`${c} must be a TemplateRef, but received '${fr(a)}'.`)}let OL=(()=>{class c{constructor(l,h,d){this._ngEl=l,this._differs=h,this._renderer=d,this._ngStyle=null,this._differ=null}set ngStyle(l){this._ngStyle=l,!this._differ&&l&&(this._differ=this._differs.find(l).create())}ngDoCheck(){if(this._differ){const l=this._differ.diff(this._ngStyle);l&&this._applyChanges(l)}}_setStyle(l,h){const[d,f]=l.split("."),m=-1===d.indexOf("-")?void 0:Ca.DashCase;null!=h?this._renderer.setStyle(this._ngEl.nativeElement,d,f?`${h}${f}`:h,m):this._renderer.removeStyle(this._ngEl.nativeElement,d,m)}_applyChanges(l){l.forEachRemovedItem(h=>this._setStyle(h.key,null)),l.forEachAddedItem(h=>this._setStyle(h.key,h.currentValue)),l.forEachChangedItem(h=>this._setStyle(h.key,h.currentValue))}}return c.\u0275fac=function(l){return new(l||c)(N(Xt),N(eb),N(Gn))},c.\u0275dir=Ke({type:c,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),c})(),hh=(()=>{class c{constructor(l){this._viewContainerRef=l,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(l){if(l.ngTemplateOutlet||l.ngTemplateOutletInjector){const h=this._viewContainerRef;if(this._viewRef&&h.remove(h.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:d,ngTemplateOutletContext:f,ngTemplateOutletInjector:m}=this;this._viewRef=h.createEmbeddedView(d,f,m?{injector:m}:void 0)}else this._viewRef=null}else this._viewRef&&l.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return c.\u0275fac=function(l){return new(l||c)(N(ii))},c.\u0275dir=Ke({type:c,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[ps]}),c})();class _me{createSubscription(a,l){return a.subscribe({next:l,error:h=>{throw h}})}dispose(a){a.unsubscribe()}}class vme{createSubscription(a,l){return a.then(l,h=>{throw h})}dispose(a){}}const bme=new vme,Sme=new _me;let rb=(()=>{class c{constructor(l){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=l}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(l){return this._obj?l!==this._obj?(this._dispose(),this.transform(l)):this._latestValue:(l&&this._subscribe(l),this._latestValue)}_subscribe(l){this._obj=l,this._strategy=this._selectStrategy(l),this._subscription=this._strategy.createSubscription(l,h=>this._updateLatestValue(l,h))}_selectStrategy(l){if(z0(l))return bme;if(aG(l))return Sme;throw function gc(c,a){return new rt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(l,h){l===this._obj&&(this._latestValue=h,this._ref.markForCheck())}}return c.\u0275fac=function(l){return new(l||c)(N(Ls,16))},c.\u0275pipe=Po({name:"async",type:c,pure:!1,standalone:!0}),c})(),AC=(()=>{class c{constructor(l){this.differs=l,this.keyValues=[],this.compareFn=oH}transform(l,h=oH){if(!l||!(l instanceof Map)&&"object"!=typeof l)return null;this.differ||(this.differ=this.differs.find(l).create());const d=this.differ.diff(l),f=h!==this.compareFn;return d&&(this.keyValues=[],d.forEachItem(m=>{this.keyValues.push(function Lme(c,a){return{key:c,value:a}}(m.key,m.currentValue))})),(d||f)&&(this.keyValues.sort(h),this.compareFn=h),this.keyValues}}return c.\u0275fac=function(l){return new(l||c)(N(eb,16))},c.\u0275pipe=Po({name:"keyvalue",type:c,pure:!1,standalone:!0}),c})();function oH(c,a){const l=c.key,h=a.key;if(l===h)return 0;if(void 0===l)return 1;if(void 0===h)return-1;if(null===l)return 1;if(null===h)return-1;if("string"==typeof l&&"string"==typeof h)return l<h?-1:1;if("number"==typeof l&&"number"==typeof h)return l-h;if("boolean"==typeof l&&"boolean"==typeof h)return l<h?-1:1;const d=String(l),f=String(h);return d==f?0:d<f?-1:1}let Un=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({}),c})();const aH="browser";function Ei(c){return c===aH}let Ume=(()=>{class c{}return c.\u0275prov=Fe({token:c,providedIn:"root",factory:()=>new zme(Oe(Ci),window)}),c})();class zme{constructor(a,l){this.document=a,this.window=l,this.offset=()=>[0,0]}setOffset(a){this.offset=Array.isArray(a)?()=>a:a}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(a){this.supportsScrolling()&&this.window.scrollTo(a[0],a[1])}scrollToAnchor(a){if(!this.supportsScrolling())return;const l=function Gme(c,a){const l=c.getElementById(a)||c.getElementsByName(a)[0];if(l)return l;if("function"==typeof c.createTreeWalker&&c.body&&(c.body.createShadowRoot||c.body.attachShadow)){const h=c.createTreeWalker(c.body,NodeFilter.SHOW_ELEMENT);let d=h.currentNode;for(;d;){const f=d.shadowRoot;if(f){const m=f.getElementById(a)||f.querySelector(`[name="${a}"]`);if(m)return m}d=h.nextNode()}}return null}(this.document,a);l&&(this.scrollToElement(l),l.focus())}setHistoryScrollRestoration(a){if(this.supportScrollRestoration()){const l=this.window.history;l&&l.scrollRestoration&&(l.scrollRestoration=a)}}scrollToElement(a){const l=a.getBoundingClientRect(),h=l.left+this.window.pageXOffset,d=l.top+this.window.pageYOffset,f=this.offset();this.window.scrollTo(h-f[0],d-f[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const a=lH(this.window.history)||lH(Object.getPrototypeOf(this.window.history));return!(!a||!a.writable&&!a.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function lH(c){return Object.getOwnPropertyDescriptor(c,"scrollRestoration")}class cH{}class BL extends class mge extends class Cpe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function wpe(c){vC||(vC=c)}(new BL)}onAndCancel(a,l,h){return a.addEventListener(l,h,!1),()=>{a.removeEventListener(l,h,!1)}}dispatchEvent(a,l){a.dispatchEvent(l)}remove(a){a.parentNode&&a.parentNode.removeChild(a)}createElement(a,l){return(l=l||this.getDefaultDocument()).createElement(a)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(a){return a.nodeType===Node.ELEMENT_NODE}isShadowRoot(a){return a instanceof DocumentFragment}getGlobalEventTarget(a,l){return"window"===l?window:"document"===l?a:"body"===l?a.body:null}getBaseHref(a){const l=function gge(){return ob=ob||document.querySelector("base"),ob?ob.getAttribute("href"):null}();return null==l?null:function yge(c){LC=LC||document.createElement("a"),LC.setAttribute("href",c);const a=LC.pathname;return"/"===a.charAt(0)?a:`/${a}`}(l)}resetBaseElement(){ob=null}getUserAgent(){return window.navigator.userAgent}getCookie(a){return Q8(document.cookie,a)}}let LC,ob=null;const pH=new Vt("TRANSITION_ID"),vge=[{provide:fC,useFactory:function _ge(c,a,l){return()=>{l.get(pC).donePromise.then(()=>{const h=su(),d=a.querySelectorAll(`style[ng-transition="${c}"]`);for(let f=0;f<d.length;f++)h.remove(d[f])})}},deps:[pH,Ci,cr],multi:!0}];let Sge=(()=>{class c{build(){return new XMLHttpRequest}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();const PC=new Vt("EventManagerPlugins");let OC=(()=>{class c{constructor(l,h){this._zone=h,this._eventNameToPlugin=new Map,l.forEach(d=>d.manager=this),this._plugins=l.slice().reverse()}addEventListener(l,h,d){return this._findPluginFor(h).addEventListener(l,h,d)}addGlobalEventListener(l,h,d){return this._findPluginFor(h).addGlobalEventListener(l,h,d)}getZone(){return this._zone}_findPluginFor(l){const h=this._eventNameToPlugin.get(l);if(h)return h;const d=this._plugins;for(let f=0;f<d.length;f++){const m=d[f];if(m.supports(l))return this._eventNameToPlugin.set(l,m),m}throw new Error(`No event manager plugin found for event ${l}`)}}return c.\u0275fac=function(l){return new(l||c)(Oe(PC),Oe(Yn))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();class mH{constructor(a){this._doc=a}addGlobalEventListener(a,l,h){const d=su().getGlobalEventTarget(this._doc,a);if(!d)throw new Error(`Unsupported event target ${d} for event ${l}`);return this.addEventListener(d,l,h)}}let gH=(()=>{class c{constructor(){this._stylesSet=new Set}addStyles(l){const h=new Set;l.forEach(d=>{this._stylesSet.has(d)||(this._stylesSet.add(d),h.add(d))}),this.onStylesAdded(h)}onStylesAdded(l){}getAllStyles(){return Array.from(this._stylesSet)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),ab=(()=>{class c extends gH{constructor(l){super(),this._doc=l,this._hostNodes=new Map,this._hostNodes.set(l.head,[])}_addStylesToHost(l,h,d){l.forEach(f=>{const m=this._doc.createElement("style");m.textContent=f,d.push(h.appendChild(m))})}addHost(l){const h=[];this._addStylesToHost(this._stylesSet,l,h),this._hostNodes.set(l,h)}removeHost(l){const h=this._hostNodes.get(l);h&&h.forEach(yH),this._hostNodes.delete(l)}onStylesAdded(l){this._hostNodes.forEach((h,d)=>{this._addStylesToHost(l,d,h)})}ngOnDestroy(){this._hostNodes.forEach(l=>l.forEach(yH))}}return c.\u0275fac=function(l){return new(l||c)(Oe(Ci))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();function yH(c){su().remove(c)}const UL={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zL=/%COMP%/g;function NC(c,a,l){for(let h=0;h<a.length;h++){let d=a[h];Array.isArray(d)?NC(c,d,l):(d=d.replace(zL,c),l.push(d))}return l}function bH(c){return a=>{if("__ngUnwrap__"===a)return c;!1===c(a)&&(a.preventDefault(),a.returnValue=!1)}}let FC=(()=>{class c{constructor(l,h,d){this.eventManager=l,this.sharedStylesHost=h,this.appId=d,this.rendererByCompId=new Map,this.defaultRenderer=new GL(l)}createRenderer(l,h){if(!l||!h)return this.defaultRenderer;switch(h.encapsulation){case oc.Emulated:{let d=this.rendererByCompId.get(h.id);return d||(d=new Mge(this.eventManager,this.sharedStylesHost,h,this.appId),this.rendererByCompId.set(h.id,d)),d.applyToHost(l),d}case 1:case oc.ShadowDom:return new Dge(this.eventManager,this.sharedStylesHost,l,h);default:if(!this.rendererByCompId.has(h.id)){const d=NC(h.id,h.styles,[]);this.sharedStylesHost.addStyles(d),this.rendererByCompId.set(h.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return c.\u0275fac=function(l){return new(l||c)(Oe(OC),Oe(ab),Oe(Q0))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();class GL{constructor(a){this.eventManager=a,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(a,l){return l?document.createElementNS(UL[l]||l,a):document.createElement(a)}createComment(a){return document.createComment(a)}createText(a){return document.createTextNode(a)}appendChild(a,l){(TH(a)?a.content:a).appendChild(l)}insertBefore(a,l,h){a&&(TH(a)?a.content:a).insertBefore(l,h)}removeChild(a,l){a&&a.removeChild(l)}selectRootElement(a,l){let h="string"==typeof a?document.querySelector(a):a;if(!h)throw new Error(`The selector "${a}" did not match any elements`);return l||(h.textContent=""),h}parentNode(a){return a.parentNode}nextSibling(a){return a.nextSibling}setAttribute(a,l,h,d){if(d){l=d+":"+l;const f=UL[d];f?a.setAttributeNS(f,l,h):a.setAttribute(l,h)}else a.setAttribute(l,h)}removeAttribute(a,l,h){if(h){const d=UL[h];d?a.removeAttributeNS(d,l):a.removeAttribute(`${h}:${l}`)}else a.removeAttribute(l)}addClass(a,l){a.classList.add(l)}removeClass(a,l){a.classList.remove(l)}setStyle(a,l,h,d){d&(Ca.DashCase|Ca.Important)?a.style.setProperty(l,h,d&Ca.Important?"important":""):a.style[l]=h}removeStyle(a,l,h){h&Ca.DashCase?a.style.removeProperty(l):a.style[l]=""}setProperty(a,l,h){a[l]=h}setValue(a,l){a.nodeValue=l}listen(a,l,h){return"string"==typeof a?this.eventManager.addGlobalEventListener(a,l,bH(h)):this.eventManager.addEventListener(a,l,bH(h))}}function TH(c){return"TEMPLATE"===c.tagName&&void 0!==c.content}class Mge extends GL{constructor(a,l,h,d){super(a),this.component=h;const f=NC(d+"-"+h.id,h.styles,[]);l.addStyles(f),this.contentAttr=function Cge(c){return"_ngcontent-%COMP%".replace(zL,c)}(d+"-"+h.id),this.hostAttr=function xge(c){return"_nghost-%COMP%".replace(zL,c)}(d+"-"+h.id)}applyToHost(a){super.setAttribute(a,this.hostAttr,"")}createElement(a,l){const h=super.createElement(a,l);return super.setAttribute(h,this.contentAttr,""),h}}class Dge extends GL{constructor(a,l,h,d){super(a),this.sharedStylesHost=l,this.hostEl=h,this.shadowRoot=h.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const f=NC(d.id,d.styles,[]);for(let m=0;m<f.length;m++){const g=document.createElement("style");g.textContent=f[m],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(a){return a===this.hostEl?this.shadowRoot:a}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(a,l){return super.appendChild(this.nodeOrShadowRoot(a),l)}insertBefore(a,l,h){return super.insertBefore(this.nodeOrShadowRoot(a),l,h)}removeChild(a,l){return super.removeChild(this.nodeOrShadowRoot(a),l)}parentNode(a){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(a)))}}let Age=(()=>{class c extends mH{constructor(l){super(l)}supports(l){return!0}addEventListener(l,h,d){return l.addEventListener(h,d,!1),()=>this.removeEventListener(l,h,d)}removeEventListener(l,h,d){return l.removeEventListener(h,d)}}return c.\u0275fac=function(l){return new(l||c)(Oe(Ci))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();const wH=["alt","control","meta","shift"],Ige={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rge={alt:c=>c.altKey,control:c=>c.ctrlKey,meta:c=>c.metaKey,shift:c=>c.shiftKey};let Lge=(()=>{class c extends mH{constructor(l){super(l)}supports(l){return null!=c.parseEventName(l)}addEventListener(l,h,d){const f=c.parseEventName(h),m=c.eventCallback(f.fullKey,d,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>su().onAndCancel(l,f.domEventName,m))}static parseEventName(l){const h=l.toLowerCase().split("."),d=h.shift();if(0===h.length||"keydown"!==d&&"keyup"!==d)return null;const f=c._normalizeKey(h.pop());let m="",g=h.indexOf("code");if(g>-1&&(h.splice(g,1),m="code."),wH.forEach(_=>{const v=h.indexOf(_);v>-1&&(h.splice(v,1),m+=_+".")}),m+=f,0!=h.length||0===f.length)return null;const y={};return y.domEventName=d,y.fullKey=m,y}static matchEventFullKeyCode(l,h){let d=Ige[l.key]||l.key,f="";return h.indexOf("code.")>-1&&(d=l.code,f="code."),!(null==d||!d)&&(d=d.toLowerCase()," "===d?d="space":"."===d&&(d="dot"),wH.forEach(m=>{m!==d&&(0,Rge[m])(l)&&(f+=m+".")}),f+=d,f===h)}static eventCallback(l,h,d){return f=>{c.matchEventFullKeyCode(f,l)&&d.runGuarded(()=>h(f))}}static _normalizeKey(l){return"esc"===l?"escape":l}}return c.\u0275fac=function(l){return new(l||c)(Oe(Ci))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();const xH=[{provide:kr,useValue:aH},{provide:c8,useValue:function Pge(){BL.makeCurrent()},multi:!0},{provide:Ci,useFactory:function Nge(){return function Dle(c){zR=c}(document),document},deps:[]}],Fge=b8(vpe,"browser",xH),EH=new Vt(""),MH=[{provide:mC,useClass:class bge{addToWindow(a){wr.getAngularTestability=(h,d=!0)=>{const f=a.findTestabilityInTree(h,d);if(null==f)throw new Error("Could not find testability for element.");return f},wr.getAllAngularTestabilities=()=>a.getAllTestabilities(),wr.getAllAngularRootElements=()=>a.getAllRootElements(),wr.frameworkStabilizers||(wr.frameworkStabilizers=[]),wr.frameworkStabilizers.push(h=>{const d=wr.getAllAngularTestabilities();let f=d.length,m=!1;const g=function(y){m=m||y,f--,0==f&&h(m)};d.forEach(function(y){y.whenStable(g)})})}findTestabilityInTree(a,l,h){return null==l?null:a.getTestability(l)??(h?su().isShadowRoot(l)?this.findTestabilityInTree(a,l.host,!0):this.findTestabilityInTree(a,l.parentElement,!0):null)}},deps:[]},{provide:g8,useClass:uL,deps:[Yn,hL,mC]},{provide:uL,useClass:uL,deps:[Yn,hL,mC]}],DH=[{provide:ZR,useValue:"root"},{provide:jg,useFactory:function Oge(){return new jg},deps:[]},{provide:PC,useClass:Age,multi:!0,deps:[Ci,Yn,kr]},{provide:PC,useClass:Lge,multi:!0,deps:[Ci]},{provide:FC,useClass:FC,deps:[OC,ab,Q0]},{provide:Hg,useExisting:FC},{provide:gH,useExisting:ab},{provide:ab,useClass:ab,deps:[Ci]},{provide:OC,useClass:OC,deps:[PC,Yn]},{provide:cH,useClass:Sge,deps:[]},[]];let AH=(()=>{class c{constructor(l){}static withServerTransition(l){return{ngModule:c,providers:[{provide:Q0,useValue:l.appId},{provide:pH,useExisting:Q0},vge]}}}return c.\u0275fac=function(l){return new(l||c)(Oe(EH,12))},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({providers:[...DH,...MH],imports:[Un,bpe]}),c})(),IH=(()=>{class c{constructor(l){this._doc=l}getTitle(){return this._doc.title}setTitle(l){this._doc.title=l||""}}return c.\u0275fac=function(l){return new(l||c)(Oe(Ci))},c.\u0275prov=Fe({token:c,factory:function(l){let h=null;return h=l?new l:function Vge(){return new IH(Oe(Ci))}(),h},providedIn:"root"}),c})();function Ct(...c){let a=c[c.length-1];return Ce(a)?(c.pop(),Zu(c,a)):kI(c)}typeof window<"u"&&window;class Ui extends Qe{constructor(a){super(),this._value=a}get value(){return this.getValue()}_subscribe(a){const l=super._subscribe(a);return l&&!l.closed&&a.next(this._value),l}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new gi;return this._value}next(a){super.next(this._value=a)}}const kC=(()=>{function c(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return c.prototype=Object.create(Error.prototype),c})();class Xge extends ee{notifyNext(a,l,h,d,f){this.destination.next(l)}notifyError(a,l){this.destination.error(a)}notifyComplete(a){this.destination.complete()}}class qge extends ee{constructor(a,l,h){super(),this.parent=a,this.outerValue=l,this.outerIndex=h,this.index=0}_next(a){this.parent.notifyNext(this.outerValue,a,this.outerIndex,this.index++,this)}_error(a){this.parent.notifyError(a,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function $ge(c,a,l,h,d=new qge(c,l,h)){if(!d.closed)return a instanceof Tt?a.subscribe(d):Ri(a)(d)}const PH={};function VC(...c){let a,l;return Ce(c[c.length-1])&&(l=c.pop()),"function"==typeof c[c.length-1]&&(a=c.pop()),1===c.length&&Ee(c[0])&&(c=c[0]),kI(c,l).lift(new Yge(a))}class Yge{constructor(a){this.resultSelector=a}call(a,l){return l.subscribe(new Zge(a,this.resultSelector))}}class Zge extends Xge{constructor(a,l){super(a),this.resultSelector=l,this.active=0,this.values=[],this.observables=[]}_next(a){this.values.push(PH),this.observables.push(a)}_complete(){const a=this.observables,l=a.length;if(0===l)this.destination.complete();else{this.active=l,this.toRespond=l;for(let h=0;h<l;h++)this.add($ge(this,a[h],void 0,h))}}notifyComplete(a){0==(this.active-=1)&&this.destination.complete()}notifyNext(a,l,h){const d=this.values,m=this.toRespond?d[h]===PH?--this.toRespond:this.toRespond:0;d[h]=l,0===m&&(this.resultSelector?this._tryResultSelector(d):this.destination.next(d.slice()))}_tryResultSelector(a){let l;try{l=this.resultSelector.apply(this,a)}catch(h){return void this.destination.error(h)}this.destination.next(l)}}function BC(...c){return function Kge(){return Sg(1)}()(Ct(...c))}const py=new Tt(c=>c.complete());function UC(c){return c?function Jge(c){return new Tt(a=>c.schedule(()=>a.complete()))}(c):py}function OH(c){return new Tt(a=>{let l;try{l=c()}catch(d){return void a.error(d)}return(l?Pn(l):UC()).subscribe(a)})}function my(c,a){return new Tt(a?l=>a.schedule(Qge,0,{error:c,subscriber:l}):l=>l.error(c))}function Qge({error:c,subscriber:a}){a.error(c)}function Ma(c,a){return"function"==typeof a?l=>l.pipe(Ma((h,d)=>Pn(c(h,d)).pipe(q((f,m)=>a(h,f,d,m))))):l=>l.lift(new eye(c))}class eye{constructor(a){this.project=a}call(a,l){return l.subscribe(new tye(a,this.project))}}class tye extends vg{constructor(a,l){super(a),this.project=l,this.index=0}_next(a){let l;const h=this.index++;try{l=this.project(a,h)}catch(d){return void this.destination.error(d)}this._innerSub(l)}_innerSub(a){const l=this.innerSubscription;l&&l.unsubscribe();const h=new _g(this),d=this.destination;d.add(h),this.innerSubscription=bg(a,h),this.innerSubscription!==h&&d.add(this.innerSubscription)}_complete(){const{innerSubscription:a}=this;(!a||a.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(a){this.destination.next(a)}}const NH=(()=>{function c(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return c.prototype=Object.create(Error.prototype),c})();function dh(c){return a=>0===c?UC():a.lift(new nye(c))}class nye{constructor(a){if(this.total=a,this.total<0)throw new NH}call(a,l){return l.subscribe(new iye(a,this.total))}}class iye extends ee{constructor(a,l){super(a),this.total=l,this.count=0}_next(a){const l=this.total,h=++this.count;h<=l&&(this.destination.next(a),h===l&&(this.destination.complete(),this.unsubscribe()))}}function Dd(...c){const a=c[c.length-1];return Ce(a)?(c.pop(),l=>BC(c,l,a)):l=>BC(c,l)}function Ki(c,a){return function(h){return h.lift(new rye(c,a))}}class rye{constructor(a,l){this.predicate=a,this.thisArg=l}call(a,l){return l.subscribe(new sye(a,this.predicate,this.thisArg))}}class sye extends ee{constructor(a,l,h){super(a),this.predicate=l,this.thisArg=h,this.count=0}_next(a){let l;try{l=this.predicate.call(this.thisArg,a,this.count++)}catch(h){return void this.destination.error(h)}l&&this.destination.next(a)}}function zC(c=null){return a=>a.lift(new oye(c))}class oye{constructor(a){this.defaultValue=a}call(a,l){return l.subscribe(new aye(a,this.defaultValue))}}class aye extends ee{constructor(a,l){super(a),this.defaultValue=l,this.isEmpty=!0}_next(a){this.isEmpty=!1,this.destination.next(a)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function FH(c=uye){return a=>a.lift(new lye(c))}class lye{constructor(a){this.errorFactory=a}call(a,l){return l.subscribe(new cye(a,this.errorFactory))}}class cye extends ee{constructor(a,l){super(a),this.errorFactory=l,this.hasValue=!1}_next(a){this.hasValue=!0,this.destination.next(a)}_complete(){if(this.hasValue)return this.destination.complete();{let a;try{a=this.errorFactory()}catch(l){a=l}this.destination.error(a)}}}function uye(){return new kC}function Qa(c,a){const l=arguments.length>=2;return h=>h.pipe(c?Ki((d,f)=>c(d,f,h)):Ge,dh(1),l?zC(a):FH(()=>new kC))}function Ad(c,a){return As(c,a,1)}function Id(){}function Br(c,a,l){return function(d){return d.lift(new hye(c,a,l))}}class hye{constructor(a,l,h){this.nextOrObserver=a,this.error=l,this.complete=h}call(a,l){return l.subscribe(new dye(a,this.nextOrObserver,this.error,this.complete))}}class dye extends ee{constructor(a,l,h,d){super(a),this._tapNext=Id,this._tapError=Id,this._tapComplete=Id,this._tapError=h||Id,this._tapComplete=d||Id,Dt(l)?(this._context=this,this._tapNext=l):l&&(this._context=l,this._tapNext=l.next||Id,this._tapError=l.error||Id,this._tapComplete=l.complete||Id)}_next(a){try{this._tapNext.call(this._context,a)}catch(l){return void this.destination.error(l)}this.destination.next(a)}_error(a){try{this._tapError.call(this._context,a)}catch(l){return void this.destination.error(l)}this.destination.error(a)}_complete(){try{this._tapComplete.call(this._context)}catch(a){return void this.destination.error(a)}return this.destination.complete()}}function Rd(c){return function(l){const h=new fye(c),d=l.lift(h);return h.caught=d}}class fye{constructor(a){this.selector=a}call(a,l){return l.subscribe(new pye(a,this.selector,this.caught))}}class pye extends vg{constructor(a,l,h){super(a),this.selector=l,this.caught=h}error(a){if(!this.isStopped){let l;try{l=this.selector(a,this.caught)}catch(f){return void super.error(f)}this._unsubscribeAndRecycle();const h=new _g(this);this.add(h);const d=bg(l,h);d!==h&&this.add(d)}}}function kH(c,a){let l=!1;return arguments.length>=2&&(l=!0),function(d){return d.lift(new mye(c,a,l))}}class mye{constructor(a,l,h=!1){this.accumulator=a,this.seed=l,this.hasSeed=h}call(a,l){return l.subscribe(new gye(a,this.accumulator,this.seed,this.hasSeed))}}class gye extends ee{constructor(a,l,h,d){super(a),this.accumulator=l,this._seed=h,this.hasSeed=d,this.index=0}get seed(){return this._seed}set seed(a){this.hasSeed=!0,this._seed=a}_next(a){if(this.hasSeed)return this._tryNext(a);this.seed=a,this.destination.next(a)}_tryNext(a){const l=this.index++;let h;try{h=this.accumulator(this.seed,a,l)}catch(d){this.destination.error(d)}this.seed=h,this.destination.next(h)}}function WL(c){return function(l){return 0===c?UC():l.lift(new yye(c))}}class yye{constructor(a){if(this.total=a,this.total<0)throw new NH}call(a,l){return l.subscribe(new _ye(a,this.total))}}class _ye extends ee{constructor(a,l){super(a),this.total=l,this.ring=new Array,this.count=0}_next(a){const l=this.ring,h=this.total,d=this.count++;l.length<h?l.push(a):l[d%h]=a}_complete(){const a=this.destination;let l=this.count;if(l>0){const h=this.count>=this.total?this.total:this.count,d=this.ring;for(let f=0;f<h;f++){const m=l++%h;a.next(d[m])}}a.complete()}}function VH(c,a){const l=arguments.length>=2;return h=>h.pipe(c?Ki((d,f)=>c(d,f,h)):Ge,WL(1),l?zC(a):FH(()=>new kC))}class bye{constructor(a,l){this.predicate=a,this.inclusive=l}call(a,l){return l.subscribe(new Sye(a,this.predicate,this.inclusive))}}class Sye extends ee{constructor(a,l,h){super(a),this.predicate=l,this.inclusive=h,this.index=0}_next(a){const l=this.destination;let h;try{h=this.predicate(a,this.index++)}catch(d){return void l.error(d)}this.nextOrComplete(a,h)}nextOrComplete(a,l){const h=this.destination;Boolean(l)?h.next(a):(this.inclusive&&h.next(a),h.complete())}}class wye{constructor(a){this.value=a}call(a,l){return l.subscribe(new Cye(a,this.value))}}class Cye extends ee{constructor(a,l){super(a),this.value=l}_next(a){this.destination.next(this.value)}}function XL(c){return a=>a.lift(new xye(c))}class xye{constructor(a){this.callback=a}call(a,l){return l.subscribe(new Eye(a,this.callback))}}class Eye extends ee{constructor(a,l){super(a),this.add(new O(l))}}const _i="primary",lb=Symbol("RouteTitle");class Mye{constructor(a){this.params=a||{}}has(a){return Object.prototype.hasOwnProperty.call(this.params,a)}get(a){if(this.has(a)){const l=this.params[a];return Array.isArray(l)?l[0]:l}return null}getAll(a){if(this.has(a)){const l=this.params[a];return Array.isArray(l)?l:[l]}return[]}get keys(){return Object.keys(this.params)}}function gy(c){return new Mye(c)}function Dye(c,a,l){const h=l.path.split("/");if(h.length>c.length||"full"===l.pathMatch&&(a.hasChildren()||h.length<c.length))return null;const d={};for(let f=0;f<h.length;f++){const m=h[f],g=c[f];if(m.startsWith(":"))d[m.substring(1)]=g;else if(m!==g.path)return null}return{consumed:c.slice(0,h.length),posParams:d}}function ou(c,a){const l=c?Object.keys(c):void 0,h=a?Object.keys(a):void 0;if(!l||!h||l.length!=h.length)return!1;let d;for(let f=0;f<l.length;f++)if(d=l[f],!BH(c[d],a[d]))return!1;return!0}function BH(c,a){if(Array.isArray(c)&&Array.isArray(a)){if(c.length!==a.length)return!1;const l=[...c].sort(),h=[...a].sort();return l.every((d,f)=>h[f]===d)}return c===a}function UH(c){return Array.prototype.concat.apply([],c)}function zH(c){return c.length>0?c[c.length-1]:null}function vo(c,a){for(const l in c)c.hasOwnProperty(l)&&a(c[l],l)}function Ld(c){return N2(c)?c:z0(c)?Pn(Promise.resolve(c)):Ct(c)}const Rye={exact:function jH(c,a,l){if(!Mp(c.segments,a.segments)||!GC(c.segments,a.segments,l)||c.numberOfChildren!==a.numberOfChildren)return!1;for(const h in a.children)if(!c.children[h]||!jH(c.children[h],a.children[h],l))return!1;return!0},subset:WH},GH={exact:function Lye(c,a){return ou(c,a)},subset:function Pye(c,a){return Object.keys(a).length<=Object.keys(c).length&&Object.keys(a).every(l=>BH(c[l],a[l]))},ignored:()=>!0};function HH(c,a,l){return Rye[l.paths](c.root,a.root,l.matrixParams)&&GH[l.queryParams](c.queryParams,a.queryParams)&&!("exact"===l.fragment&&c.fragment!==a.fragment)}function WH(c,a,l){return XH(c,a,a.segments,l)}function XH(c,a,l,h){if(c.segments.length>l.length){const d=c.segments.slice(0,l.length);return!(!Mp(d,l)||a.hasChildren()||!GC(d,l,h))}if(c.segments.length===l.length){if(!Mp(c.segments,l)||!GC(c.segments,l,h))return!1;for(const d in a.children)if(!c.children[d]||!WH(c.children[d],a.children[d],h))return!1;return!0}{const d=l.slice(0,c.segments.length),f=l.slice(c.segments.length);return!!(Mp(c.segments,d)&&GC(c.segments,d,h)&&c.children[_i])&&XH(c.children[_i],a,f,h)}}function GC(c,a,l){return a.every((h,d)=>GH[l](c[d].parameters,h.parameters))}class Ep{constructor(a,l,h){this.root=a,this.queryParams=l,this.fragment=h}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gy(this.queryParams)),this._queryParamMap}toString(){return Fye.serialize(this)}}class bi{constructor(a,l){this.segments=a,this.children=l,this.parent=null,vo(l,(h,d)=>h.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return HC(this)}}class cb{constructor(a,l){this.path=a,this.parameters=l}get parameterMap(){return this._parameterMap||(this._parameterMap=gy(this.parameters)),this._parameterMap}toString(){return ZH(this)}}function Mp(c,a){return c.length===a.length&&c.every((l,h)=>l.path===a[h].path)}let qH=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:function(){return new $L},providedIn:"root"}),c})();class $L{parse(a){const l=new Wye(a);return new Ep(l.parseRootSegment(),l.parseQueryParams(),l.parseFragment())}serialize(a){const l=`/${ub(a.root,!0)}`,h=function Bye(c){const a=Object.keys(c).map(l=>{const h=c[l];return Array.isArray(h)?h.map(d=>`${jC(l)}=${jC(d)}`).join("&"):`${jC(l)}=${jC(h)}`}).filter(l=>!!l);return a.length?`?${a.join("&")}`:""}(a.queryParams),d="string"==typeof a.fragment?`#${function kye(c){return encodeURI(c)}(a.fragment)}`:"";return`${l}${h}${d}`}}const Fye=new $L;function HC(c){return c.segments.map(a=>ZH(a)).join("/")}function ub(c,a){if(!c.hasChildren())return HC(c);if(a){const l=c.children[_i]?ub(c.children[_i],!1):"",h=[];return vo(c.children,(d,f)=>{f!==_i&&h.push(`${f}:${ub(d,!1)}`)}),h.length>0?`${l}(${h.join("//")})`:l}{const l=function Nye(c,a){let l=[];return vo(c.children,(h,d)=>{d===_i&&(l=l.concat(a(h,d)))}),vo(c.children,(h,d)=>{d!==_i&&(l=l.concat(a(h,d)))}),l}(c,(h,d)=>d===_i?[ub(c.children[_i],!1)]:[`${d}:${ub(h,!1)}`]);return 1===Object.keys(c.children).length&&null!=c.children[_i]?`${HC(c)}/${l[0]}`:`${HC(c)}/(${l.join("//")})`}}function $H(c){return encodeURIComponent(c).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jC(c){return $H(c).replace(/%3B/gi,";")}function YL(c){return $H(c).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function WC(c){return decodeURIComponent(c)}function YH(c){return WC(c.replace(/\+/g,"%20"))}function ZH(c){return`${YL(c.path)}${function Vye(c){return Object.keys(c).map(a=>`;${YL(a)}=${YL(c[a])}`).join("")}(c.parameters)}`}const Uye=/^[^\/()?;=#]+/;function XC(c){const a=c.match(Uye);return a?a[0]:""}const zye=/^[^=?&#]+/,Hye=/^[^&#]+/;class Wye{constructor(a){this.url=a,this.remaining=a}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bi([],{}):new bi([],this.parseChildren())}parseQueryParams(){const a={};if(this.consumeOptional("?"))do{this.parseQueryParam(a)}while(this.consumeOptional("&"));return a}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const a=[];for(this.peekStartsWith("(")||a.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),a.push(this.parseSegment());let l={};this.peekStartsWith("/(")&&(this.capture("/"),l=this.parseParens(!0));let h={};return this.peekStartsWith("(")&&(h=this.parseParens(!1)),(a.length>0||Object.keys(l).length>0)&&(h[_i]=new bi(a,l)),h}parseSegment(){const a=XC(this.remaining);if(""===a&&this.peekStartsWith(";"))throw new rt(4009,!1);return this.capture(a),new cb(WC(a),this.parseMatrixParams())}parseMatrixParams(){const a={};for(;this.consumeOptional(";");)this.parseParam(a);return a}parseParam(a){const l=XC(this.remaining);if(!l)return;this.capture(l);let h="";if(this.consumeOptional("=")){const d=XC(this.remaining);d&&(h=d,this.capture(h))}a[WC(l)]=WC(h)}parseQueryParam(a){const l=function Gye(c){const a=c.match(zye);return a?a[0]:""}(this.remaining);if(!l)return;this.capture(l);let h="";if(this.consumeOptional("=")){const m=function jye(c){const a=c.match(Hye);return a?a[0]:""}(this.remaining);m&&(h=m,this.capture(h))}const d=YH(l),f=YH(h);if(a.hasOwnProperty(d)){let m=a[d];Array.isArray(m)||(m=[m],a[d]=m),m.push(f)}else a[d]=f}parseParens(a){const l={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const h=XC(this.remaining),d=this.remaining[h.length];if("/"!==d&&")"!==d&&";"!==d)throw new rt(4010,!1);let f;h.indexOf(":")>-1?(f=h.slice(0,h.indexOf(":")),this.capture(f),this.capture(":")):a&&(f=_i);const m=this.parseChildren();l[f]=1===Object.keys(m).length?m[_i]:new bi([],m),this.consumeOptional("//")}return l}peekStartsWith(a){return this.remaining.startsWith(a)}consumeOptional(a){return!!this.peekStartsWith(a)&&(this.remaining=this.remaining.substring(a.length),!0)}capture(a){if(!this.consumeOptional(a))throw new rt(4011,!1)}}function ZL(c){return c.segments.length>0?new bi([],{[_i]:c}):c}function qC(c){const a={};for(const h of Object.keys(c.children)){const f=qC(c.children[h]);(f.segments.length>0||f.hasChildren())&&(a[h]=f)}return function Xye(c){if(1===c.numberOfChildren&&c.children[_i]){const a=c.children[_i];return new bi(c.segments.concat(a.segments),a.children)}return c}(new bi(c.segments,a))}function Dp(c){return c instanceof Ep}function Yye(c,a,l,h,d){if(0===l.length)return yy(a.root,a.root,a.root,h,d);const f=function QH(c){if("string"==typeof c[0]&&1===c.length&&"/"===c[0])return new JH(!0,0,c);let a=0,l=!1;const h=c.reduce((d,f,m)=>{if("object"==typeof f&&null!=f){if(f.outlets){const g={};return vo(f.outlets,(y,_)=>{g[_]="string"==typeof y?y.split("/"):y}),[...d,{outlets:g}]}if(f.segmentPath)return[...d,f.segmentPath]}return"string"!=typeof f?[...d,f]:0===m?(f.split("/").forEach((g,y)=>{0==y&&"."===g||(0==y&&""===g?l=!0:".."===g?a++:""!=g&&d.push(g))}),d):[...d,f]},[]);return new JH(l,a,h)}(l);return f.toRoot()?yy(a.root,a.root,new bi([],{}),h,d):function m(y){const _=function Kye(c,a,l,h){if(c.isAbsolute)return new _y(a.root,!0,0);if(-1===h)return new _y(l,l===a.root,0);return function e9(c,a,l){let h=c,d=a,f=l;for(;f>d;){if(f-=d,h=h.parent,!h)throw new rt(4005,!1);d=h.segments.length}return new _y(h,!1,d-f)}(l,h+(hb(c.commands[0])?0:1),c.numberOfDoubleDots)}(f,a,c.snapshot?._urlSegment,y),v=_.processChildren?fb(_.segmentGroup,_.index,f.commands):JL(_.segmentGroup,_.index,f.commands);return yy(a.root,_.segmentGroup,v,h,d)}(c.snapshot?._lastPathIndex)}function hb(c){return"object"==typeof c&&null!=c&&!c.outlets&&!c.segmentPath}function db(c){return"object"==typeof c&&null!=c&&c.outlets}function yy(c,a,l,h,d){let m,f={};h&&vo(h,(y,_)=>{f[_]=Array.isArray(y)?y.map(v=>`${v}`):`${y}`}),m=c===a?l:KH(c,a,l);const g=ZL(qC(m));return new Ep(g,f,d)}function KH(c,a,l){const h={};return vo(c.children,(d,f)=>{h[f]=d===a?l:KH(d,a,l)}),new bi(c.segments,h)}class JH{constructor(a,l,h){if(this.isAbsolute=a,this.numberOfDoubleDots=l,this.commands=h,a&&h.length>0&&hb(h[0]))throw new rt(4003,!1);const d=h.find(db);if(d&&d!==zH(h))throw new rt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _y{constructor(a,l,h){this.segmentGroup=a,this.processChildren=l,this.index=h}}function JL(c,a,l){if(c||(c=new bi([],{})),0===c.segments.length&&c.hasChildren())return fb(c,a,l);const h=function Qye(c,a,l){let h=0,d=a;const f={match:!1,pathIndex:0,commandIndex:0};for(;d<c.segments.length;){if(h>=l.length)return f;const m=c.segments[d],g=l[h];if(db(g))break;const y=`${g}`,_=h<l.length-1?l[h+1]:null;if(d>0&&void 0===y)break;if(y&&_&&"object"==typeof _&&void 0===_.outlets){if(!n9(y,_,m))return f;h+=2}else{if(!n9(y,{},m))return f;h++}d++}return{match:!0,pathIndex:d,commandIndex:h}}(c,a,l),d=l.slice(h.commandIndex);if(h.match&&h.pathIndex<c.segments.length){const f=new bi(c.segments.slice(0,h.pathIndex),{});return f.children[_i]=new bi(c.segments.slice(h.pathIndex),c.children),fb(f,0,d)}return h.match&&0===d.length?new bi(c.segments,{}):h.match&&!c.hasChildren()?QL(c,a,l):h.match?fb(c,0,d):QL(c,a,l)}function fb(c,a,l){if(0===l.length)return new bi(c.segments,{});{const h=function Jye(c){return db(c[0])?c[0].outlets:{[_i]:c}}(l),d={};return vo(h,(f,m)=>{"string"==typeof f&&(f=[f]),null!==f&&(d[m]=JL(c.children[m],a,f))}),vo(c.children,(f,m)=>{void 0===h[m]&&(d[m]=f)}),new bi(c.segments,d)}}function QL(c,a,l){const h=c.segments.slice(0,a);let d=0;for(;d<l.length;){const f=l[d];if(db(f)){const y=e_e(f.outlets);return new bi(h,y)}if(0===d&&hb(l[0])){h.push(new cb(c.segments[a].path,t9(l[0]))),d++;continue}const m=db(f)?f.outlets[_i]:`${f}`,g=d<l.length-1?l[d+1]:null;m&&g&&hb(g)?(h.push(new cb(m,t9(g))),d+=2):(h.push(new cb(m,{})),d++)}return new bi(h,{})}function e_e(c){const a={};return vo(c,(l,h)=>{"string"==typeof l&&(l=[l]),null!==l&&(a[h]=QL(new bi([],{}),0,l))}),a}function t9(c){const a={};return vo(c,(l,h)=>a[h]=`${l}`),a}function n9(c,a,l){return c==l.path&&ou(a,l.parameters)}class fh{constructor(a,l){this.id=a,this.url=l}}class $C extends fh{constructor(a,l,h="imperative",d=null){super(a,l),this.type=0,this.navigationTrigger=h,this.restoredState=d}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pd extends fh{constructor(a,l,h){super(a,l),this.urlAfterRedirects=h,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class YC extends fh{constructor(a,l,h,d){super(a,l),this.reason=h,this.code=d,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class i9 extends fh{constructor(a,l,h,d){super(a,l),this.error=h,this.target=d,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class t_e extends fh{constructor(a,l,h,d){super(a,l),this.urlAfterRedirects=h,this.state=d,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class n_e extends fh{constructor(a,l,h,d){super(a,l),this.urlAfterRedirects=h,this.state=d,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class i_e extends fh{constructor(a,l,h,d,f){super(a,l),this.urlAfterRedirects=h,this.state=d,this.shouldActivate=f,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class r_e extends fh{constructor(a,l,h,d){super(a,l),this.urlAfterRedirects=h,this.state=d,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s_e extends fh{constructor(a,l,h,d){super(a,l),this.urlAfterRedirects=h,this.state=d,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class o_e{constructor(a){this.route=a,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class a_e{constructor(a){this.route=a,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class l_e{constructor(a){this.snapshot=a,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class c_e{constructor(a){this.snapshot=a,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class u_e{constructor(a){this.snapshot=a,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class h_e{constructor(a){this.snapshot=a,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r9{constructor(a,l,h){this.routerEvent=a,this.position=l,this.anchor=h,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class s9{constructor(a){this._root=a}get root(){return this._root.value}parent(a){const l=this.pathFromRoot(a);return l.length>1?l[l.length-2]:null}children(a){const l=eP(a,this._root);return l?l.children.map(h=>h.value):[]}firstChild(a){const l=eP(a,this._root);return l&&l.children.length>0?l.children[0].value:null}siblings(a){const l=tP(a,this._root);return l.length<2?[]:l[l.length-2].children.map(d=>d.value).filter(d=>d!==a)}pathFromRoot(a){return tP(a,this._root).map(l=>l.value)}}function eP(c,a){if(c===a.value)return a;for(const l of a.children){const h=eP(c,l);if(h)return h}return null}function tP(c,a){if(c===a.value)return[a];for(const l of a.children){const h=tP(c,l);if(h.length)return h.unshift(a),h}return[]}class ph{constructor(a,l){this.value=a,this.children=l}toString(){return`TreeNode(${this.value})`}}function vy(c){const a={};return c&&c.children.forEach(l=>a[l.value.outlet]=l),a}class o9 extends s9{constructor(a,l){super(a),this.snapshot=l,nP(this,a)}toString(){return this.snapshot.toString()}}function a9(c,a){const l=function f_e(c,a){const m=new ZC([],{},{},"",{},_i,a,null,c.root,-1,{});return new c9("",new ph(m,[]))}(c,a),h=new Ui([new cb("",{})]),d=new Ui({}),f=new Ui({}),m=new Ui({}),g=new Ui(""),y=new Od(h,d,m,g,f,_i,a,l.root);return y.snapshot=l.root,new o9(new ph(y,[]),l)}class Od{constructor(a,l,h,d,f,m,g,y){this.url=a,this.params=l,this.queryParams=h,this.fragment=d,this.data=f,this.outlet=m,this.component=g,this.title=this.data?.pipe(q(_=>_[lb]))??Ct(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(q(a=>gy(a)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(q(a=>gy(a)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function l9(c,a="emptyOnly"){const l=c.pathFromRoot;let h=0;if("always"!==a)for(h=l.length-1;h>=1;){const d=l[h],f=l[h-1];if(d.routeConfig&&""===d.routeConfig.path)h--;else{if(f.component)break;h--}}return function p_e(c){return c.reduce((a,l)=>({params:{...a.params,...l.params},data:{...a.data,...l.data},resolve:{...l.data,...a.resolve,...l.routeConfig?.data,...l._resolvedData}}),{params:{},data:{},resolve:{}})}(l.slice(h))}class ZC{constructor(a,l,h,d,f,m,g,y,_,v,b,S){this.url=a,this.params=l,this.queryParams=h,this.fragment=d,this.data=f,this.outlet=m,this.component=g,this.title=this.data?.[lb],this.routeConfig=y,this._urlSegment=_,this._lastPathIndex=v,this._correctedLastPathIndex=S??v,this._resolve=b}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(h=>h.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class c9 extends s9{constructor(a,l){super(l),this.url=a,nP(this,l)}toString(){return u9(this._root)}}function nP(c,a){a.value._routerState=c,a.children.forEach(l=>nP(c,l))}function u9(c){const a=c.children.length>0?` { ${c.children.map(u9).join(", ")} } `:"";return`${c.value}${a}`}function iP(c){if(c.snapshot){const a=c.snapshot,l=c._futureSnapshot;c.snapshot=l,ou(a.queryParams,l.queryParams)||c.queryParams.next(l.queryParams),a.fragment!==l.fragment&&c.fragment.next(l.fragment),ou(a.params,l.params)||c.params.next(l.params),function Aye(c,a){if(c.length!==a.length)return!1;for(let l=0;l<c.length;++l)if(!ou(c[l],a[l]))return!1;return!0}(a.url,l.url)||c.url.next(l.url),ou(a.data,l.data)||c.data.next(l.data)}else c.snapshot=c._futureSnapshot,c.data.next(c._futureSnapshot.data)}function rP(c,a){const l=ou(c.params,a.params)&&function Oye(c,a){return Mp(c,a)&&c.every((l,h)=>ou(l.parameters,a[h].parameters))}(c.url,a.url);return l&&!(!c.parent!=!a.parent)&&(!c.parent||rP(c.parent,a.parent))}function pb(c,a,l){if(l&&c.shouldReuseRoute(a.value,l.value.snapshot)){const h=l.value;h._futureSnapshot=a.value;const d=function g_e(c,a,l){return a.children.map(h=>{for(const d of l.children)if(c.shouldReuseRoute(h.value,d.value.snapshot))return pb(c,h,d);return pb(c,h)})}(c,a,l);return new ph(h,d)}{if(c.shouldAttach(a.value)){const f=c.retrieve(a.value);if(null!==f){const m=f.route;return m.value._futureSnapshot=a.value,m.children=a.children.map(g=>pb(c,g)),m}}const h=function y_e(c){return new Od(new Ui(c.url),new Ui(c.params),new Ui(c.queryParams),new Ui(c.fragment),new Ui(c.data),c.outlet,c.component,c)}(a.value),d=a.children.map(f=>pb(c,f));return new ph(h,d)}}const sP="ngNavigationCancelingError";function h9(c,a){const{redirectTo:l,navigationBehaviorOptions:h}=Dp(a)?{redirectTo:a,navigationBehaviorOptions:void 0}:a,d=d9(!1,0,a);return d.url=l,d.navigationBehaviorOptions=h,d}function d9(c,a,l){const h=new Error("NavigationCancelingError: "+(c||""));return h[sP]=!0,h.cancellationCode=a,l&&(h.url=l),h}function f9(c){return p9(c)&&Dp(c.url)}function p9(c){return c&&c[sP]}class __e{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new mb,this.attachRef=null}}let mb=(()=>{class c{constructor(){this.contexts=new Map}onChildOutletCreated(l,h){const d=this.getOrCreateContext(l);d.outlet=h,this.contexts.set(l,d)}onChildOutletDestroyed(l){const h=this.getContext(l);h&&(h.outlet=null,h.attachRef=null)}onOutletDeactivated(){const l=this.contexts;return this.contexts=new Map,l}onOutletReAttached(l){this.contexts=l}getOrCreateContext(l){let h=this.getContext(l);return h||(h=new __e,this.contexts.set(l,h)),h}getContext(l){return this.contexts.get(l)||null}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const KC=!1;let oP=(()=>{class c{constructor(l,h,d,f,m){this.parentContexts=l,this.location=h,this.changeDetector=f,this.environmentInjector=m,this.activated=null,this._activatedRoute=null,this.activateEvents=new st,this.deactivateEvents=new st,this.attachEvents=new st,this.detachEvents=new st,this.name=d||_i,l.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const l=this.parentContexts.getContext(this.name);l&&l.route&&(l.attachRef?this.attach(l.attachRef,l.route):this.activateWith(l.route,l.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new rt(4012,KC);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new rt(4012,KC);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new rt(4012,KC);this.location.detach();const l=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(l.instance),l}attach(l,h){this.activated=l,this._activatedRoute=h,this.location.insert(l.hostView),this.attachEvents.emit(l.instance)}deactivate(){if(this.activated){const l=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(l)}}activateWith(l,h){if(this.isActivated)throw new rt(4013,KC);this._activatedRoute=l;const d=this.location,m=l._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,y=new v_e(l,g,d.injector);if(h&&function b_e(c){return!!c.resolveComponentFactory}(h)){const _=h.resolveComponentFactory(m);this.activated=d.createComponent(_,d.length,y)}else this.activated=d.createComponent(m,{index:d.length,injector:y,environmentInjector:h??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return c.\u0275fac=function(l){return new(l||c)(N(mb),N(ii),Lg("name"),N(Ls),N(ih))},c.\u0275dir=Ke({type:c,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),c})();class v_e{constructor(a,l,h){this.route=a,this.childContexts=l,this.parent=h}get(a,l){return a===Od?this.route:a===mb?this.childContexts:this.parent.get(a,l)}}let aP=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ng-component"]],standalone:!0,features:[C6],decls:1,vars:0,template:function(l,h){1&l&&xe(0,"router-outlet")},dependencies:[oP],encapsulation:2}),c})();function m9(c,a){return c.providers&&!c._injector&&(c._injector=cC(c.providers,a,`Route: ${c.path}`)),c._injector??a}function cP(c){const a=c.children&&c.children.map(cP),l=a?{...c,children:a}:{...c};return!l.component&&!l.loadComponent&&(a||l.loadChildren)&&l.outlet&&l.outlet!==_i&&(l.component=aP),l}function Ul(c){return c.outlet||_i}function g9(c,a){const l=c.filter(h=>Ul(h)===a);return l.push(...c.filter(h=>Ul(h)!==a)),l}function gb(c){if(!c)return null;if(c.routeConfig?._injector)return c.routeConfig._injector;for(let a=c.parent;a;a=a.parent){const l=a.routeConfig;if(l?._loadedInjector)return l._loadedInjector;if(l?._injector)return l._injector}return null}class x_e{constructor(a,l,h,d){this.routeReuseStrategy=a,this.futureState=l,this.currState=h,this.forwardEvent=d}activate(a){const l=this.futureState._root,h=this.currState?this.currState._root:null;this.deactivateChildRoutes(l,h,a),iP(this.futureState.root),this.activateChildRoutes(l,h,a)}deactivateChildRoutes(a,l,h){const d=vy(l);a.children.forEach(f=>{const m=f.value.outlet;this.deactivateRoutes(f,d[m],h),delete d[m]}),vo(d,(f,m)=>{this.deactivateRouteAndItsChildren(f,h)})}deactivateRoutes(a,l,h){const d=a.value,f=l?l.value:null;if(d===f)if(d.component){const m=h.getContext(d.outlet);m&&this.deactivateChildRoutes(a,l,m.children)}else this.deactivateChildRoutes(a,l,h);else f&&this.deactivateRouteAndItsChildren(l,h)}deactivateRouteAndItsChildren(a,l){a.value.component&&this.routeReuseStrategy.shouldDetach(a.value.snapshot)?this.detachAndStoreRouteSubtree(a,l):this.deactivateRouteAndOutlet(a,l)}detachAndStoreRouteSubtree(a,l){const h=l.getContext(a.value.outlet),d=h&&a.value.component?h.children:l,f=vy(a);for(const m of Object.keys(f))this.deactivateRouteAndItsChildren(f[m],d);if(h&&h.outlet){const m=h.outlet.detach(),g=h.children.onOutletDeactivated();this.routeReuseStrategy.store(a.value.snapshot,{componentRef:m,route:a,contexts:g})}}deactivateRouteAndOutlet(a,l){const h=l.getContext(a.value.outlet),d=h&&a.value.component?h.children:l,f=vy(a);for(const m of Object.keys(f))this.deactivateRouteAndItsChildren(f[m],d);h&&h.outlet&&(h.outlet.deactivate(),h.children.onOutletDeactivated(),h.attachRef=null,h.resolver=null,h.route=null)}activateChildRoutes(a,l,h){const d=vy(l);a.children.forEach(f=>{this.activateRoutes(f,d[f.value.outlet],h),this.forwardEvent(new h_e(f.value.snapshot))}),a.children.length&&this.forwardEvent(new c_e(a.value.snapshot))}activateRoutes(a,l,h){const d=a.value,f=l?l.value:null;if(iP(d),d===f)if(d.component){const m=h.getOrCreateContext(d.outlet);this.activateChildRoutes(a,l,m.children)}else this.activateChildRoutes(a,l,h);else if(d.component){const m=h.getOrCreateContext(d.outlet);if(this.routeReuseStrategy.shouldAttach(d.snapshot)){const g=this.routeReuseStrategy.retrieve(d.snapshot);this.routeReuseStrategy.store(d.snapshot,null),m.children.onOutletReAttached(g.contexts),m.attachRef=g.componentRef,m.route=g.route.value,m.outlet&&m.outlet.attach(g.componentRef,g.route.value),iP(g.route.value),this.activateChildRoutes(a,null,m.children)}else{const g=gb(d.snapshot),y=g?.get(wd)??null;m.attachRef=null,m.route=d,m.resolver=y,m.injector=g,m.outlet&&m.outlet.activateWith(d,m.injector),this.activateChildRoutes(a,null,m.children)}}else this.activateChildRoutes(a,null,h)}}class y9{constructor(a){this.path=a,this.route=this.path[this.path.length-1]}}class JC{constructor(a,l){this.component=a,this.route=l}}function E_e(c,a,l){const h=c._root;return yb(h,a?a._root:null,l,[h.value])}function by(c,a){const l=Symbol(),h=a.get(c,l);return h===l?"function"!=typeof c||function goe(c){return null!==hw(c)}(c)?a.get(c):c:h}function yb(c,a,l,h,d={canDeactivateChecks:[],canActivateChecks:[]}){const f=vy(a);return c.children.forEach(m=>{(function D_e(c,a,l,h,d={canDeactivateChecks:[],canActivateChecks:[]}){const f=c.value,m=a?a.value:null,g=l?l.getContext(c.value.outlet):null;if(m&&f.routeConfig===m.routeConfig){const y=function A_e(c,a,l){if("function"==typeof l)return l(c,a);switch(l){case"pathParamsChange":return!Mp(c.url,a.url);case"pathParamsOrQueryParamsChange":return!Mp(c.url,a.url)||!ou(c.queryParams,a.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rP(c,a)||!ou(c.queryParams,a.queryParams);default:return!rP(c,a)}}(m,f,f.routeConfig.runGuardsAndResolvers);y?d.canActivateChecks.push(new y9(h)):(f.data=m.data,f._resolvedData=m._resolvedData),yb(c,a,f.component?g?g.children:null:l,h,d),y&&g&&g.outlet&&g.outlet.isActivated&&d.canDeactivateChecks.push(new JC(g.outlet.component,m))}else m&&_b(a,g,d),d.canActivateChecks.push(new y9(h)),yb(c,null,f.component?g?g.children:null:l,h,d)})(m,f[m.value.outlet],l,h.concat([m.value]),d),delete f[m.value.outlet]}),vo(f,(m,g)=>_b(m,l.getContext(g),d)),d}function _b(c,a,l){const h=vy(c),d=c.value;vo(h,(f,m)=>{_b(f,d.component?a?a.children.getContext(m):null:a,l)}),l.canDeactivateChecks.push(new JC(d.component&&a&&a.outlet&&a.outlet.isActivated?a.outlet.component:null,d))}function vb(c){return"function"==typeof c}function uP(c){return c instanceof kC||"EmptyError"===c?.name}const QC=Symbol("INITIAL_VALUE");function Sy(){return Ma(c=>VC(c.map(a=>a.pipe(dh(1),Dd(QC)))).pipe(q(a=>{for(const l of a)if(!0!==l){if(l===QC)return QC;if(!1===l||l instanceof Ep)return l}return!0}),Ki(a=>a!==QC),dh(1)))}function _9(c){return function gt(...c){return xt(c)}(Br(a=>{if(Dp(a))throw h9(0,a)}),q(a=>!0===a))}const hP={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function v9(c,a,l,h,d){const f=dP(c,a,l);return f.matched?function X_e(c,a,l,h){const d=a.canMatch;return d&&0!==d.length?Ct(d.map(m=>{const g=by(m,c);return Ld(function N_e(c){return c&&vb(c.canMatch)}(g)?g.canMatch(a,l):c.runInContext(()=>g(a,l)))})).pipe(Sy(),_9()):Ct(!0)}(h=m9(a,h),a,l).pipe(q(m=>!0===m?f:{...hP})):Ct(f)}function dP(c,a,l){if(""===a.path)return"full"===a.pathMatch&&(c.hasChildren()||l.length>0)?{...hP}:{matched:!0,consumedSegments:[],remainingSegments:l,parameters:{},positionalParamSegments:{}};const d=(a.matcher||Dye)(l,c,a);if(!d)return{...hP};const f={};vo(d.posParams,(g,y)=>{f[y]=g.path});const m=d.consumed.length>0?{...f,...d.consumed[d.consumed.length-1].parameters}:f;return{matched:!0,consumedSegments:d.consumed,remainingSegments:l.slice(d.consumed.length),parameters:m,positionalParamSegments:d.posParams??{}}}function ex(c,a,l,h,d="corrected"){if(l.length>0&&function Y_e(c,a,l){return l.some(h=>tx(c,a,h)&&Ul(h)!==_i)}(c,l,h)){const m=new bi(a,function $_e(c,a,l,h){const d={};d[_i]=h,h._sourceSegment=c,h._segmentIndexShift=a.length;for(const f of l)if(""===f.path&&Ul(f)!==_i){const m=new bi([],{});m._sourceSegment=c,m._segmentIndexShift=a.length,d[Ul(f)]=m}return d}(c,a,h,new bi(l,c.children)));return m._sourceSegment=c,m._segmentIndexShift=a.length,{segmentGroup:m,slicedSegments:[]}}if(0===l.length&&function Z_e(c,a,l){return l.some(h=>tx(c,a,h))}(c,l,h)){const m=new bi(c.segments,function q_e(c,a,l,h,d,f){const m={};for(const g of h)if(tx(c,l,g)&&!d[Ul(g)]){const y=new bi([],{});y._sourceSegment=c,y._segmentIndexShift="legacy"===f?c.segments.length:a.length,m[Ul(g)]=y}return{...d,...m}}(c,a,l,h,c.children,d));return m._sourceSegment=c,m._segmentIndexShift=a.length,{segmentGroup:m,slicedSegments:l}}const f=new bi(c.segments,c.children);return f._sourceSegment=c,f._segmentIndexShift=a.length,{segmentGroup:f,slicedSegments:l}}function tx(c,a,l){return(!(c.hasChildren()||a.length>0)||"full"!==l.pathMatch)&&""===l.path}function b9(c,a,l,h){return!!(Ul(c)===h||h!==_i&&tx(a,l,c))&&("**"===c.path||dP(a,c,l).matched)}function S9(c,a,l){return 0===a.length&&!c.children[l]}const nx=!1;class ix{constructor(a){this.segmentGroup=a||null}}class T9{constructor(a){this.urlTree=a}}function bb(c){return my(new ix(c))}function w9(c){return my(new T9(c))}class eve{constructor(a,l,h,d,f){this.injector=a,this.configLoader=l,this.urlSerializer=h,this.urlTree=d,this.config=f,this.allowRedirects=!0}apply(){const a=ex(this.urlTree.root,[],[],this.config).segmentGroup,l=new bi(a.segments,a.children);return this.expandSegmentGroup(this.injector,this.config,l,_i).pipe(q(f=>this.createUrlTree(qC(f),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Rd(f=>{if(f instanceof T9)return this.allowRedirects=!1,this.match(f.urlTree);throw f instanceof ix?this.noMatchError(f):f}))}match(a){return this.expandSegmentGroup(this.injector,this.config,a.root,_i).pipe(q(d=>this.createUrlTree(qC(d),a.queryParams,a.fragment))).pipe(Rd(d=>{throw d instanceof ix?this.noMatchError(d):d}))}noMatchError(a){return new rt(4002,nx)}createUrlTree(a,l,h){const d=ZL(a);return new Ep(d,l,h)}expandSegmentGroup(a,l,h,d){return 0===h.segments.length&&h.hasChildren()?this.expandChildren(a,l,h).pipe(q(f=>new bi([],f))):this.expandSegment(a,h,l,h.segments,d,!0)}expandChildren(a,l,h){const d=[];for(const f of Object.keys(h.children))"primary"===f?d.unshift(f):d.push(f);return Pn(d).pipe(Ad(f=>{const m=h.children[f],g=g9(l,f);return this.expandSegmentGroup(a,g,m,f).pipe(q(y=>({segment:y,outlet:f})))}),kH((f,m)=>(f[m.outlet]=m.segment,f),{}),VH())}expandSegment(a,l,h,d,f,m){return Pn(h).pipe(Ad(g=>this.expandSegmentAgainstRoute(a,l,h,g,d,f,m).pipe(Rd(_=>{if(_ instanceof ix)return Ct(null);throw _}))),Qa(g=>!!g),Rd((g,y)=>{if(uP(g))return S9(l,d,f)?Ct(new bi([],{})):bb(l);throw g}))}expandSegmentAgainstRoute(a,l,h,d,f,m,g){return b9(d,l,f,m)?void 0===d.redirectTo?this.matchSegmentAgainstRoute(a,l,d,f,m):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(a,l,h,d,f,m):bb(l):bb(l)}expandSegmentAgainstRouteUsingRedirect(a,l,h,d,f,m){return"**"===d.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(a,h,d,m):this.expandRegularSegmentAgainstRouteUsingRedirect(a,l,h,d,f,m)}expandWildCardWithParamsAgainstRouteUsingRedirect(a,l,h,d){const f=this.applyRedirectCommands([],h.redirectTo,{});return h.redirectTo.startsWith("/")?w9(f):this.lineralizeSegments(h,f).pipe(As(m=>{const g=new bi(m,{});return this.expandSegment(a,g,l,m,d,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(a,l,h,d,f,m){const{matched:g,consumedSegments:y,remainingSegments:_,positionalParamSegments:v}=dP(l,d,f);if(!g)return bb(l);const b=this.applyRedirectCommands(y,d.redirectTo,v);return d.redirectTo.startsWith("/")?w9(b):this.lineralizeSegments(d,b).pipe(As(S=>this.expandSegment(a,l,h,S.concat(_),m,!1)))}matchSegmentAgainstRoute(a,l,h,d,f){return"**"===h.path?(a=m9(h,a),h.loadChildren?(h._loadedRoutes?Ct({routes:h._loadedRoutes,injector:h._loadedInjector}):this.configLoader.loadChildren(a,h)).pipe(q(g=>(h._loadedRoutes=g.routes,h._loadedInjector=g.injector,new bi(d,{})))):Ct(new bi(d,{}))):v9(l,h,d,a).pipe(Ma(({matched:m,consumedSegments:g,remainingSegments:y})=>m?this.getChildConfig(a=h._injector??a,h,d).pipe(As(v=>{const b=v.injector??a,S=v.routes,{segmentGroup:T,slicedSegments:x}=ex(l,g,y,S),E=new bi(T.segments,T.children);if(0===x.length&&E.hasChildren())return this.expandChildren(b,S,E).pipe(q(L=>new bi(g,L)));if(0===S.length&&0===x.length)return Ct(new bi(g,{}));const I=Ul(h)===f;return this.expandSegment(b,E,S,x,I?_i:f,!0).pipe(q(D=>new bi(g.concat(D.segments),D.children)))})):bb(l)))}getChildConfig(a,l,h){return l.children?Ct({routes:l.children,injector:a}):l.loadChildren?void 0!==l._loadedRoutes?Ct({routes:l._loadedRoutes,injector:l._loadedInjector}):function W_e(c,a,l,h){const d=a.canLoad;return void 0===d||0===d.length?Ct(!0):Ct(d.map(m=>{const g=by(m,c);return Ld(function R_e(c){return c&&vb(c.canLoad)}(g)?g.canLoad(a,l):c.runInContext(()=>g(a,l)))})).pipe(Sy(),_9())}(a,l,h).pipe(As(d=>d?this.configLoader.loadChildren(a,l).pipe(Br(f=>{l._loadedRoutes=f.routes,l._loadedInjector=f.injector})):function J_e(c){return my(d9(nx,3))}())):Ct({routes:[],injector:a})}lineralizeSegments(a,l){let h=[],d=l.root;for(;;){if(h=h.concat(d.segments),0===d.numberOfChildren)return Ct(h);if(d.numberOfChildren>1||!d.children[_i])return my(new rt(4e3,nx));d=d.children[_i]}}applyRedirectCommands(a,l,h){return this.applyRedirectCreateUrlTree(l,this.urlSerializer.parse(l),a,h)}applyRedirectCreateUrlTree(a,l,h,d){const f=this.createSegmentGroup(a,l.root,h,d);return new Ep(f,this.createQueryParams(l.queryParams,this.urlTree.queryParams),l.fragment)}createQueryParams(a,l){const h={};return vo(a,(d,f)=>{if("string"==typeof d&&d.startsWith(":")){const g=d.substring(1);h[f]=l[g]}else h[f]=d}),h}createSegmentGroup(a,l,h,d){const f=this.createSegments(a,l.segments,h,d);let m={};return vo(l.children,(g,y)=>{m[y]=this.createSegmentGroup(a,g,h,d)}),new bi(f,m)}createSegments(a,l,h,d){return l.map(f=>f.path.startsWith(":")?this.findPosParam(a,f,d):this.findOrReturn(f,h))}findPosParam(a,l,h){const d=h[l.path.substring(1)];if(!d)throw new rt(4001,nx);return d}findOrReturn(a,l){let h=0;for(const d of l){if(d.path===a.path)return l.splice(h),d;h++}return a}}class nve{}class sve{constructor(a,l,h,d,f,m,g,y){this.injector=a,this.rootComponentType=l,this.config=h,this.urlTree=d,this.url=f,this.paramsInheritanceStrategy=m,this.relativeLinkResolution=g,this.urlSerializer=y}recognize(){const a=ex(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,a,_i).pipe(q(l=>{if(null===l)return null;const h=new ZC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_i,this.rootComponentType,null,this.urlTree.root,-1,{}),d=new ph(h,l),f=new c9(this.url,d);return this.inheritParamsAndData(f._root),f}))}inheritParamsAndData(a){const l=a.value,h=l9(l,this.paramsInheritanceStrategy);l.params=Object.freeze(h.params),l.data=Object.freeze(h.data),a.children.forEach(d=>this.inheritParamsAndData(d))}processSegmentGroup(a,l,h,d){return 0===h.segments.length&&h.hasChildren()?this.processChildren(a,l,h):this.processSegment(a,l,h,h.segments,d)}processChildren(a,l,h){return Pn(Object.keys(h.children)).pipe(Ad(d=>{const f=h.children[d],m=g9(l,d);return this.processSegmentGroup(a,m,f,d)}),kH((d,f)=>d&&f?(d.push(...f),d):null),function vye(c,a=!1){return l=>l.lift(new bye(c,a))}(d=>null!==d),zC(null),VH(),q(d=>{if(null===d)return null;const f=C9(d);return function ove(c){c.sort((a,l)=>a.value.outlet===_i?-1:l.value.outlet===_i?1:a.value.outlet.localeCompare(l.value.outlet))}(f),f}))}processSegment(a,l,h,d,f){return Pn(l).pipe(Ad(m=>this.processSegmentAgainstRoute(m._injector??a,m,h,d,f)),Qa(m=>!!m),Rd(m=>{if(uP(m))return S9(h,d,f)?Ct([]):Ct(null);throw m}))}processSegmentAgainstRoute(a,l,h,d,f){if(l.redirectTo||!b9(l,h,d,f))return Ct(null);let m;if("**"===l.path){const g=d.length>0?zH(d).parameters:{},y=E9(h)+d.length;m=Ct({snapshot:new ZC(d,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,D9(l),Ul(l),l.component??l._loadedComponent??null,l,x9(h),y,A9(l),y),consumedSegments:[],remainingSegments:[]})}else m=v9(h,l,d,a).pipe(q(({matched:g,consumedSegments:y,remainingSegments:_,parameters:v})=>{if(!g)return null;const b=E9(h)+y.length;return{snapshot:new ZC(y,v,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,D9(l),Ul(l),l.component??l._loadedComponent??null,l,x9(h),b,A9(l),b),consumedSegments:y,remainingSegments:_}}));return m.pipe(Ma(g=>{if(null===g)return Ct(null);const{snapshot:y,consumedSegments:_,remainingSegments:v}=g;a=l._injector??a;const b=l._loadedInjector??a,S=function ave(c){return c.children?c.children:c.loadChildren?c._loadedRoutes:[]}(l),{segmentGroup:T,slicedSegments:x}=ex(h,_,v,S.filter(I=>void 0===I.redirectTo),this.relativeLinkResolution);if(0===x.length&&T.hasChildren())return this.processChildren(b,S,T).pipe(q(I=>null===I?null:[new ph(y,I)]));if(0===S.length&&0===x.length)return Ct([new ph(y,[])]);const E=Ul(l)===f;return this.processSegment(b,S,T,x,E?_i:f).pipe(q(I=>null===I?null:[new ph(y,I)]))}))}}function lve(c){const a=c.value.routeConfig;return a&&""===a.path&&void 0===a.redirectTo}function C9(c){const a=[],l=new Set;for(const h of c){if(!lve(h)){a.push(h);continue}const d=a.find(f=>h.value.routeConfig===f.value.routeConfig);void 0!==d?(d.children.push(...h.children),l.add(d)):a.push(h)}for(const h of l){const d=C9(h.children);a.push(new ph(h.value,d))}return a.filter(h=>!l.has(h))}function x9(c){let a=c;for(;a._sourceSegment;)a=a._sourceSegment;return a}function E9(c){let a=c,l=a._segmentIndexShift??0;for(;a._sourceSegment;)a=a._sourceSegment,l+=a._segmentIndexShift??0;return l-1}function D9(c){return c.data||{}}function A9(c){return c.resolve||{}}function I9(c){return"string"==typeof c.title||null===c.title}function fP(c){return Ma(a=>{const l=c(a);return l?Pn(l).pipe(q(()=>a)):Ct(a)})}let R9=(()=>{class c{buildTitle(l){let h,d=l.root;for(;void 0!==d;)h=this.getResolvedTitleForRoute(d)??h,d=d.children.find(f=>f.outlet===_i);return h}getResolvedTitleForRoute(l){return l.data[lb]}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:function(){return os(L9)},providedIn:"root"}),c})(),L9=(()=>{class c extends R9{constructor(l){super(),this.title=l}updateTitle(l){const h=this.buildTitle(l);void 0!==h&&this.title.setTitle(h)}}return c.\u0275fac=function(l){return new(l||c)(Oe(IH))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class gve{}class _ve extends class yve{shouldDetach(a){return!1}store(a,l){}shouldAttach(a){return!1}retrieve(a){return null}shouldReuseRoute(a,l){return a.routeConfig===l.routeConfig}}{}const sx=new Vt("",{providedIn:"root",factory:()=>({})}),pP=new Vt("ROUTES");let mP=(()=>{class c{constructor(l,h){this.injector=l,this.compiler=h,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(l){if(this.componentLoaders.get(l))return this.componentLoaders.get(l);if(l._loadedComponent)return Ct(l._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(l);const h=Ld(l.loadComponent()).pipe(Br(f=>{this.onLoadEndListener&&this.onLoadEndListener(l),l._loadedComponent=f}),XL(()=>{this.componentLoaders.delete(l)})),d=new BI(h,()=>new Qe).pipe(lw());return this.componentLoaders.set(l,d),d}loadChildren(l,h){if(this.childrenLoaders.get(h))return this.childrenLoaders.get(h);if(h._loadedRoutes)return Ct({routes:h._loadedRoutes,injector:h._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(h);const f=this.loadModuleFactoryOrRoutes(h.loadChildren).pipe(q(g=>{this.onLoadEndListener&&this.onLoadEndListener(h);let y,_,v=!1;Array.isArray(g)?_=g:(y=g.create(l).injector,_=UH(y.get(pP,[],On.Self|On.Optional)));return{routes:_.map(cP),injector:y}}),XL(()=>{this.childrenLoaders.delete(h)})),m=new BI(f,()=>new Qe).pipe(lw());return this.childrenLoaders.set(h,m),m}loadModuleFactoryOrRoutes(l){return Ld(l()).pipe(As(h=>h instanceof T6||Array.isArray(h)?Ct(h):Pn(this.compiler.compileModuleAsync(h))))}}return c.\u0275fac=function(l){return new(l||c)(Oe(cr),Oe(oL))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class bve{}class Sve{shouldProcessUrl(a){return!0}extract(a){return a}merge(a,l){return a}}function Tve(c){throw c}function wve(c,a,l){return a.parse("/")}const Cve={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xve={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function O9(){const c=os(qH),a=os(mb),l=os(SL),h=os(cr),d=os(oL),f=os(pP,{optional:!0})??[],m=os(sx,{optional:!0})??{},g=os(L9),y=os(R9,{optional:!0}),_=os(bve,{optional:!0}),v=os(gve,{optional:!0}),b=new Xs(null,c,a,l,h,d,UH(f));return _&&(b.urlHandlingStrategy=_),v&&(b.routeReuseStrategy=v),b.titleStrategy=y??g,function Eve(c,a){c.errorHandler&&(a.errorHandler=c.errorHandler),c.malformedUriErrorHandler&&(a.malformedUriErrorHandler=c.malformedUriErrorHandler),c.onSameUrlNavigation&&(a.onSameUrlNavigation=c.onSameUrlNavigation),c.paramsInheritanceStrategy&&(a.paramsInheritanceStrategy=c.paramsInheritanceStrategy),c.relativeLinkResolution&&(a.relativeLinkResolution=c.relativeLinkResolution),c.urlUpdateStrategy&&(a.urlUpdateStrategy=c.urlUpdateStrategy),c.canceledNavigationResolution&&(a.canceledNavigationResolution=c.canceledNavigationResolution)}(m,b),b}let Xs=(()=>{class c{constructor(l,h,d,f,m,g,y){this.rootComponentType=l,this.urlSerializer=h,this.rootContexts=d,this.location=f,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Qe,this.errorHandler=Tve,this.malformedUriErrorHandler=wve,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ct(void 0),this.urlHandlingStrategy=new Sve,this.routeReuseStrategy=new _ve,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=m.get(mP),this.configLoader.onLoadEndListener=S=>this.triggerEvent(new a_e(S)),this.configLoader.onLoadStartListener=S=>this.triggerEvent(new o_e(S)),this.ngModule=m.get(wp),this.console=m.get(Bfe);const b=m.get(Yn);this.isNgZoneEnabled=b instanceof Yn&&Yn.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function Iye(){return new Ep(new bi([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=a9(this.currentUrlTree,this.rootComponentType),this.transitions=new Ui({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(l){const h=this.events;return l.pipe(Ki(d=>0!==d.id),q(d=>({...d,extractedUrl:this.urlHandlingStrategy.extract(d.rawUrl)})),Ma(d=>{let f=!1,m=!1;return Ct(d).pipe(Br(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ma(g=>{const y=this.browserUrlTree.toString(),_=!this.navigated||g.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return N9(g.source)&&(this.browserUrlTree=g.extractedUrl),Ct(g).pipe(Ma(b=>{const S=this.transitions.getValue();return h.next(new $C(b.id,this.serializeUrl(b.extractedUrl),b.source,b.restoredState)),S!==this.transitions.getValue()?py:Promise.resolve(b)}),function tve(c,a,l,h){return Ma(d=>function Q_e(c,a,l,h,d){return new eve(c,a,l,h,d).apply()}(c,a,l,d.extractedUrl,h).pipe(q(f=>({...d,urlAfterRedirects:f}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Br(b=>{this.currentNavigation={...this.currentNavigation,finalUrl:b.urlAfterRedirects},d.urlAfterRedirects=b.urlAfterRedirects}),function uve(c,a,l,h,d,f){return As(m=>function rve(c,a,l,h,d,f,m="emptyOnly",g="legacy"){return new sve(c,a,l,h,d,m,g,f).recognize().pipe(Ma(y=>null===y?function ive(c){return new Tt(a=>a.error(c))}(new nve):Ct(y)))}(c,a,l,m.urlAfterRedirects,h.serialize(m.urlAfterRedirects),h,d,f).pipe(q(g=>({...m,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Br(b=>{if(d.targetSnapshot=b.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!b.extras.skipLocationChange){const T=this.urlHandlingStrategy.merge(b.urlAfterRedirects,b.rawUrl);this.setBrowserUrl(T,b)}this.browserUrlTree=b.urlAfterRedirects}const S=new t_e(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(b.urlAfterRedirects),b.targetSnapshot);h.next(S)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:S,extractedUrl:T,source:x,restoredState:E,extras:I}=g,M=new $C(S,this.serializeUrl(T),x,E);h.next(M);const D=a9(T,this.rootComponentType).snapshot;return Ct(d={...g,targetSnapshot:D,urlAfterRedirects:T,extras:{...I,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),py}),Br(g=>{const y=new n_e(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),q(g=>d={...g,guards:E_e(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function k_e(c,a){return As(l=>{const{targetSnapshot:h,currentSnapshot:d,guards:{canActivateChecks:f,canDeactivateChecks:m}}=l;return 0===m.length&&0===f.length?Ct({...l,guardsResult:!0}):function V_e(c,a,l,h){return Pn(c).pipe(As(d=>function j_e(c,a,l,h,d){const f=a&&a.routeConfig?a.routeConfig.canDeactivate:null;return f&&0!==f.length?Ct(f.map(g=>{const y=gb(a)??d,_=by(g,y);return Ld(function O_e(c){return c&&vb(c.canDeactivate)}(_)?_.canDeactivate(c,a,l,h):y.runInContext(()=>_(c,a,l,h))).pipe(Qa())})).pipe(Sy()):Ct(!0)}(d.component,d.route,l,a,h)),Qa(d=>!0!==d,!0))}(m,h,d,c).pipe(As(g=>g&&function I_e(c){return"boolean"==typeof c}(g)?function B_e(c,a,l,h){return Pn(a).pipe(Ad(d=>BC(function z_e(c,a){return null!==c&&a&&a(new l_e(c)),Ct(!0)}(d.route.parent,h),function U_e(c,a){return null!==c&&a&&a(new u_e(c)),Ct(!0)}(d.route,h),function H_e(c,a,l){const h=a[a.length-1],f=a.slice(0,a.length-1).reverse().map(m=>function M_e(c){const a=c.routeConfig?c.routeConfig.canActivateChild:null;return a&&0!==a.length?{node:c,guards:a}:null}(m)).filter(m=>null!==m).map(m=>OH(()=>Ct(m.guards.map(y=>{const _=gb(m.node)??l,v=by(y,_);return Ld(function P_e(c){return c&&vb(c.canActivateChild)}(v)?v.canActivateChild(h,c):_.runInContext(()=>v(h,c))).pipe(Qa())})).pipe(Sy())));return Ct(f).pipe(Sy())}(c,d.path,l),function G_e(c,a,l){const h=a.routeConfig?a.routeConfig.canActivate:null;if(!h||0===h.length)return Ct(!0);const d=h.map(f=>OH(()=>{const m=gb(a)??l,g=by(f,m);return Ld(function L_e(c){return c&&vb(c.canActivate)}(g)?g.canActivate(a,c):m.runInContext(()=>g(a,c))).pipe(Qa())}));return Ct(d).pipe(Sy())}(c,d.route,l))),Qa(d=>!0!==d,!0))}(h,f,c,a):Ct(g)),q(g=>({...l,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),Br(g=>{if(d.guardsResult=g.guardsResult,Dp(g.guardsResult))throw h9(0,g.guardsResult);const y=new i_e(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(y)}),Ki(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),fP(g=>{if(g.guards.canActivateChecks.length)return Ct(g).pipe(Br(y=>{const _=new r_e(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(_)}),Ma(y=>{let _=!1;return Ct(y).pipe(function hve(c,a){return As(l=>{const{targetSnapshot:h,guards:{canActivateChecks:d}}=l;if(!d.length)return Ct(l);let f=0;return Pn(d).pipe(Ad(m=>function dve(c,a,l,h){const d=c.routeConfig,f=c._resolve;return void 0!==d?.title&&!I9(d)&&(f[lb]=d.title),function fve(c,a,l,h){const d=function pve(c){return[...Object.keys(c),...Object.getOwnPropertySymbols(c)]}(c);if(0===d.length)return Ct({});const f={};return Pn(d).pipe(As(m=>function mve(c,a,l,h){const d=gb(a)??h,f=by(c,d);return Ld(f.resolve?f.resolve(a,l):d.runInContext(()=>f(a,l)))}(c[m],a,l,h).pipe(Qa(),Br(g=>{f[m]=g}))),WL(1),function Tye(c){return a=>a.lift(new wye(c))}(f),Rd(m=>uP(m)?py:my(m)))}(f,c,a,h).pipe(q(m=>(c._resolvedData=m,c.data=l9(c,l).resolve,d&&I9(d)&&(c.data[lb]=d.title),null)))}(m.route,h,c,a)),Br(()=>f++),WL(1),As(m=>f===d.length?Ct(l):py))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Br({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),Br(y=>{const _=new s_e(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(_)}))}),fP(g=>{const y=_=>{const v=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(_.routeConfig).pipe(Br(b=>{_.component=b}),q(()=>{})));for(const b of _.children)v.push(...y(b));return v};return VC(y(g.targetSnapshot.root)).pipe(zC(),dh(1))}),fP(()=>this.afterPreactivation()),q(g=>{const y=function m_e(c,a,l){const h=pb(c,a._root,l?l._root:void 0);return new o9(h,a)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return d={...g,targetRouterState:y}}),Br(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((c,a,l)=>q(h=>(new x_e(a,h.targetRouterState,h.currentRouterState,l).activate(c),h)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),Br({next(){f=!0},complete(){f=!0}}),XL(()=>{f||m||this.cancelNavigationTransition(d,"",1),this.currentNavigation?.id===d.id&&(this.currentNavigation=null)}),Rd(g=>{if(m=!0,p9(g)){f9(g)||(this.navigated=!0,this.restoreHistory(d,!0));const y=new YC(d.id,this.serializeUrl(d.extractedUrl),g.message,g.cancellationCode);if(h.next(y),f9(g)){const _=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),v={skipLocationChange:d.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||N9(d.source)};this.scheduleNavigation(_,"imperative",null,v,{resolve:d.resolve,reject:d.reject,promise:d.promise})}else d.resolve(!1)}else{this.restoreHistory(d,!0);const y=new i9(d.id,this.serializeUrl(d.extractedUrl),g,d.targetSnapshot??void 0);h.next(y);try{d.resolve(this.errorHandler(g))}catch(_){d.reject(_)}}return py}))}))}resetRootComponentType(l){this.rootComponentType=l,this.routerState.root.component=this.rootComponentType}setTransition(l){this.transitions.next({...this.transitions.value,...l})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(l=>{const h="popstate"===l.type?"popstate":"hashchange";"popstate"===h&&setTimeout(()=>{const d={replaceUrl:!0},f=l.state?.navigationId?l.state:null;if(f){const g={...f};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(d.state=g)}const m=this.parseUrl(l.url);this.scheduleNavigation(m,h,f,d)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(l){this.events.next(l)}resetConfig(l){this.config=l.map(cP),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(l,h={}){const{relativeTo:d,queryParams:f,fragment:m,queryParamsHandling:g,preserveFragment:y}=h,_=d||this.routerState.root,v=y?this.currentUrlTree.fragment:m;let b=null;switch(g){case"merge":b={...this.currentUrlTree.queryParams,...f};break;case"preserve":b=this.currentUrlTree.queryParams;break;default:b=f||null}return null!==b&&(b=this.removeEmptyProps(b)),Yye(_,this.currentUrlTree,l,b,v??null)}navigateByUrl(l,h={skipLocationChange:!1}){const d=Dp(l)?l:this.parseUrl(l),f=this.urlHandlingStrategy.merge(d,this.rawUrlTree);return this.scheduleNavigation(f,"imperative",null,h)}navigate(l,h={skipLocationChange:!1}){return function Mve(c){for(let a=0;a<c.length;a++){if(null==c[a])throw new rt(4008,false)}}(l),this.navigateByUrl(this.createUrlTree(l,h),h)}serializeUrl(l){return this.urlSerializer.serialize(l)}parseUrl(l){let h;try{h=this.urlSerializer.parse(l)}catch(d){h=this.malformedUriErrorHandler(d,this.urlSerializer,l)}return h}isActive(l,h){let d;if(d=!0===h?{...Cve}:!1===h?{...xve}:h,Dp(l))return HH(this.currentUrlTree,l,d);const f=this.parseUrl(l);return HH(this.currentUrlTree,f,d)}removeEmptyProps(l){return Object.keys(l).reduce((h,d)=>{const f=l[d];return null!=f&&(h[d]=f),h},{})}processNavigations(){this.navigations.subscribe(l=>{this.navigated=!0,this.lastSuccessfulId=l.id,this.currentPageId=l.targetPageId,this.events.next(new Pd(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),l.resolve(!0)},l=>{this.console.warn(`Unhandled Navigation Error: ${l}`)})}scheduleNavigation(l,h,d,f,m){if(this.disposed)return Promise.resolve(!1);let g,y,_;m?(g=m.resolve,y=m.reject,_=m.promise):_=new Promise((S,T)=>{g=S,y=T});const v=++this.navigationId;let b;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(d=this.location.getState()),b=d&&d.\u0275routerPageId?d.\u0275routerPageId:f.replaceUrl||f.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):b=0,this.setTransition({id:v,targetPageId:b,source:h,restoredState:d,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:l,extras:f,resolve:g,reject:y,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(S=>Promise.reject(S))}setBrowserUrl(l,h){const d=this.urlSerializer.serialize(l),f={...h.extras.state,...this.generateNgRouterState(h.id,h.targetPageId)};this.location.isCurrentPathEqualTo(d)||h.extras.replaceUrl?this.location.replaceState(d,"",f):this.location.go(d,"",f)}restoreHistory(l,h=!1){if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-l.targetPageId;"popstate"!==l.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===d?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===d&&(this.resetState(l),this.browserUrlTree=l.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(h&&this.resetState(l),this.resetUrlToCurrentUrlTree())}resetState(l){this.routerState=l.currentRouterState,this.currentUrlTree=l.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,l.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(l,h,d){const f=new YC(l.id,this.serializeUrl(l.extractedUrl),h,d);this.triggerEvent(f),l.resolve(!1)}generateNgRouterState(l,h){return"computed"===this.canceledNavigationResolution?{navigationId:l,\u0275routerPageId:h}:{navigationId:l}}}return c.\u0275fac=function(l){c2()},c.\u0275prov=Fe({token:c,factory:function(){return O9()},providedIn:"root"}),c})();function N9(c){return"imperative"!==c}let gP=(()=>{class c{constructor(l,h,d,f,m){this.router=l,this.route=h,this.tabIndexAttribute=d,this.renderer=f,this.el=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Qe,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(l){this._preserveFragment=lh(l)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(l){this._skipLocationChange=lh(l)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(l){this._replaceUrl=lh(l)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(l){if(null!=this.tabIndexAttribute)return;const h=this.renderer,d=this.el.nativeElement;null!==l?h.setAttribute(d,"tabindex",l):h.removeAttribute(d,"tabindex")}ngOnChanges(l){this.onChanges.next(this)}set routerLink(l){null!=l?(this.commands=Array.isArray(l)?l:[l],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return c.\u0275fac=function(l){return new(l||c)(N(Xs),N(Od),Lg("tabindex"),N(Gn),N(Xt))},c.\u0275dir=Ke({type:c,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(l,h){1&l&&De("click",function(){return h.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[ps]}),c})(),Ty=(()=>{class c{constructor(l,h,d){this.router=l,this.route=h,this.locationStrategy=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Qe,this.subscription=l.events.subscribe(f=>{f instanceof Pd&&this.updateTargetUrlAndHref()})}set preserveFragment(l){this._preserveFragment=lh(l)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(l){this._skipLocationChange=lh(l)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(l){this._replaceUrl=lh(l)}get replaceUrl(){return this._replaceUrl}set routerLink(l){this.commands=null!=l?Array.isArray(l)?l:[l]:null}ngOnChanges(l){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(l,h,d,f,m){return!!(0!==l||h||d||f||m||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return c.\u0275fac=function(l){return new(l||c)(N(Xs),N(Od),N(xp))},c.\u0275dir=Ke({type:c,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(l,h){1&l&&De("click",function(f){return h.onClick(f.button,f.ctrlKey,f.shiftKey,f.altKey,f.metaKey)}),2&l&&Ue("target",h.target)("href",h.href,Ka)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[ps]}),c})(),ax=(()=>{class c{constructor(l,h,d,f,m,g){this.router=l,this.element=h,this.renderer=d,this.cdr=f,this.link=m,this.linkWithHref=g,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new st,this.routerEventsSubscription=l.events.subscribe(y=>{y instanceof Pd&&this.update()})}ngAfterContentInit(){Ct(this.links.changes,this.linksWithHrefs.changes,Ct(null)).pipe(Sg()).subscribe(l=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const l=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(h=>!!h).map(h=>h.onChanges);this.linkInputChangesSubscription=Pn(l).pipe(Sg()).subscribe(h=>{this.isActive!==this.isLinkActive(this.router)(h)&&this.update()})}set routerLinkActive(l){const h=Array.isArray(l)?l:l.split(" ");this.classes=h.filter(d=>!!d)}ngOnChanges(l){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const l=this.hasActiveLinks();this.isActive!==l&&(this.isActive=l,this.cdr.markForCheck(),this.classes.forEach(h=>{l?this.renderer.addClass(this.element.nativeElement,h):this.renderer.removeClass(this.element.nativeElement,h)}),l&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(l))})}isLinkActive(l){const h=function Dve(c){return!!c.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return d=>!!d.urlTree&&l.isActive(d.urlTree,h)}hasActiveLinks(){const l=this.isLinkActive(this.router);return this.link&&l(this.link)||this.linkWithHref&&l(this.linkWithHref)||this.links.some(l)||this.linksWithHrefs.some(l)}}return c.\u0275fac=function(l){return new(l||c)(N(Xs),N(Xt),N(Gn),N(Ls),N(gP,8),N(Ty,8))},c.\u0275dir=Ke({type:c,selectors:[["","routerLinkActive",""]],contentQueries:function(l,h,d){if(1&l&&(Cn(d,gP,5),Cn(d,Ty,5)),2&l){let f;vt(f=bt())&&(h.links=f),vt(f=bt())&&(h.linksWithHrefs=f)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[ps]}),c})();class F9{}let Ave=(()=>{class c{preload(l,h){return h().pipe(Rd(()=>Ct(null)))}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Ive=(()=>{class c{constructor(l,h,d,f,m){this.router=l,this.injector=d,this.preloadingStrategy=f,this.loader=m}setUpPreloading(){this.subscription=this.router.events.pipe(Ki(l=>l instanceof Pd),Ad(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(l,h){const d=[];for(const f of h){f.providers&&!f._injector&&(f._injector=cC(f.providers,l,`Route: ${f.path}`));const m=f._injector??l,g=f._loadedInjector??m;f.loadChildren&&!f._loadedRoutes&&void 0===f.canLoad||f.loadComponent&&!f._loadedComponent?d.push(this.preloadConfig(m,f)):(f.children||f._loadedRoutes)&&d.push(this.processRoutes(g,f.children??f._loadedRoutes))}return Pn(d).pipe(Sg())}preloadConfig(l,h){return this.preloadingStrategy.preload(h,()=>{let d;d=h.loadChildren&&void 0===h.canLoad?this.loader.loadChildren(l,h):Ct(null);const f=d.pipe(As(m=>null===m?Ct(void 0):(h._loadedRoutes=m.routes,h._loadedInjector=m.injector,this.processRoutes(m.injector??l,m.routes))));return h.loadComponent&&!h._loadedComponent?Pn([f,this.loader.loadComponent(h)]).pipe(Sg()):f})}}return c.\u0275fac=function(l){return new(l||c)(Oe(Xs),Oe(oL),Oe(ih),Oe(F9),Oe(mP))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const yP=new Vt("");let k9=(()=>{class c{constructor(l,h,d={}){this.router=l,this.viewportScroller=h,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(l=>{l instanceof $C?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=l.navigationTrigger,this.restoredId=l.restoredState?l.restoredState.navigationId:0):l instanceof Pd&&(this.lastId=l.id,this.scheduleScrollEvent(l,this.router.parseUrl(l.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(l=>{l instanceof r9&&(l.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(l.position):l.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(l.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(l,h){this.router.triggerEvent(new r9(l,"popstate"===this.lastSource?this.store[this.restoredId]:null,h))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return c.\u0275fac=function(l){c2()},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();function wy(c,a){return{\u0275kind:c,\u0275providers:a}}function _P(c){return[{provide:pP,multi:!0,useValue:c}]}function B9(){const c=os(cr);return a=>{const l=c.get(dy);if(a!==l.components[0])return;const h=c.get(Xs),d=c.get(U9);1===c.get(vP)&&h.initialNavigation(),c.get(z9,null,On.Optional)?.setUpPreloading(),c.get(yP,null,On.Optional)?.init(),h.resetRootComponentType(l.componentTypes[0]),d.closed||(d.next(),d.unsubscribe())}}const U9=new Vt("",{factory:()=>new Qe}),vP=new Vt("",{providedIn:"root",factory:()=>1});const z9=new Vt("");function Ove(c){return wy(0,[{provide:z9,useExisting:Ive},{provide:F9,useExisting:c}])}const G9=new Vt("ROUTER_FORROOT_GUARD"),Nve=[SL,{provide:qH,useClass:$L},{provide:Xs,useFactory:O9},mb,{provide:Od,useFactory:function V9(c){return c.routerState.root},deps:[Xs]},mP];function Fve(){return new _8("Router",Xs)}let H9=(()=>{class c{constructor(l){}static forRoot(l,h){return{ngModule:c,providers:[Nve,[],_P(l),{provide:G9,useFactory:Uve,deps:[[Xs,new bd,new Sd]]},{provide:sx,useValue:h||{}},h?.useHash?{provide:xp,useClass:Dpe}:{provide:xp,useClass:H8},{provide:yP,useFactory:()=>{const c=os(Xs),a=os(Ume),l=os(sx);return l.scrollOffset&&a.setOffset(l.scrollOffset),new k9(c,a,l)}},h?.preloadingStrategy?Ove(h.preloadingStrategy).\u0275providers:[],{provide:_8,multi:!0,useFactory:Fve},h?.initialNavigation?zve(h):[],[{provide:j9,useFactory:B9},{provide:u8,multi:!0,useExisting:j9}]]}}static forChild(l){return{ngModule:c,providers:[_P(l)]}}}return c.\u0275fac=function(l){return new(l||c)(Oe(G9,8))},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[aP]}),c})();function Uve(c){return"guarded"}function zve(c){return["disabled"===c.initialNavigation?wy(3,[{provide:fC,multi:!0,useFactory:()=>{const a=os(Xs);return()=>{a.setUpLocationChangeListener()}}},{provide:vP,useValue:2}]).\u0275providers:[],"enabledBlocking"===c.initialNavigation?wy(2,[{provide:vP,useValue:0},{provide:fC,multi:!0,deps:[cr],useFactory:a=>{const l=a.get(Epe,Promise.resolve());let h=!1;return()=>l.then(()=>new Promise(f=>{const m=a.get(Xs),g=a.get(U9);(function d(f){a.get(Xs).events.pipe(Ki(g=>g instanceof Pd||g instanceof YC||g instanceof i9),q(g=>g instanceof Pd||g instanceof YC&&(0===g.code||1===g.code)&&null),Ki(g=>null!==g),dh(1)).subscribe(()=>{f()})})(()=>{f(!0),h=!0}),m.afterPreactivation=()=>(f(!0),h||g.closed?Ct(void 0):g),m.initialNavigation()}))}}]).\u0275providers:[]]}const j9=new Vt(""),el="tms",yc="wms",_c="wmts",Nd="xyz",au="geojson",mh="kml",gh="wfs",W9="stacked",zl={Baselayers:"Baselayers",Overlays:"Overlays",Layers:"Layers"};class so{constructor(a){this.name="",this.id="",this.opacity=1,this.visible=!0,this.removable=!1,this.filtertype="Layers",this.continuousWorld=!1,this.expanded=!1,Object.assign(this,a)}get time(){return this.protTime}set time(a){this.protTime=a}}class ra extends so{constructor(a){if(super(a),this.styles&&this.styles.length>0){let l=this.styles.find(h=>h.default);l||(l=this.styles[0]),this.legendImg=l.legendURL,this.params?(this.type===yc?this.params.STYLES=l.name:this.type===_c&&(this.params.style=l.name),this.params.STYLES=l.name):this.type===_c&&(this.params||(this.params={}),this.params.style=l.name)}}set time(a){this.params&&(this.params.TIME=a),this.protTime=a}get time(){return this.protTime}}class qr extends so{constructor(a){super(a)}}class Ji extends so{constructor(a){super(a),this.type="custom",this.custom_layer={},Object.assign(this,a)}}class ux extends so{constructor(a){super(a),this.type=W9,this.layers=[],Object.assign(this,a)}}class Ur{constructor(a){this.filtertype="Layers",this.removable=!0,this.layerRemovable=!0,this.expanded=!1,a&&void 0!==a.visible&&a.layers&&a.layers.length&&(a.layers=a.layers.map(l=>(l.visible=a.visible,l))),Object.assign(this,a)}get visible(){return this.layers&&this.layers.length&&(this.protVisible=this.layers.filter(a=>a.visible).length>0),this.protVisible}set visible(a){this.protVisible=a,this.layers&&this.layers.length&&(this.layers=this.layers.map(l=>(l.visible=a,l)))}}class Da extends ra{constructor(a){super(a)}}class Cy extends ra{constructor(a){super(a)}}let qs=(()=>{class c{constructor(){this.store=new Ui(Array()),this.baseLayers=new Ui(Array()),this.overlays=new Ui(Array()),this.layers=new Ui(Array())}addLayer(l,h,d){if(this.isInLayergroups(l))console.error(`layer or Group with id: ${l.id} already exists!`);else{h?l.filtertype=h:h=l.filtertype;const f=this.store.getValue();d||(f.push(l),this.store.next(f)),this.filterFiltertype(h)}}removeLayer(l,h,d){this.isInLayergroups(l)?d?(console.log(`layer: ${l.id} is removed with force!`),this._removeLayer(l,h)):l.removable?this._removeLayer(l,h):l.removable||console.log(`layer: ${l.id} is not removable!`):console.error(`layer with id: ${l.id} not in storeItems!`)}_removeLayer(l,h){h?h!==l.filtertype&&console.error(`the layer with id: ${l.id} you want to remove from ${h} is from filtertype: ${l.filtertype}`):h=l.filtertype;const d=this.store.getValue().filter(f=>f instanceof so?f.id!==l.id:f);this.store.next(d),this.filterFiltertype(h)}updateLayer(l,h){this.isInLayergroups(l)?(h?h!==l.filtertype&&console.error(`the layer with id: ${l.id} you want to update is from filtertype: ${l.filtertype} and not from ${h} `):h=l.filtertype,"Overlays"===l.filtertype&&(this.updateLayerOrGroupInStore(l),this.filterFiltertype(l.filtertype)),"Layers"===l.filtertype&&(this.updateLayerOrGroupInStore(l),this.filterFiltertype(l.filtertype)),"Baselayers"===l.filtertype&&(this.updateLayerOrGroupInStore(l),this.filterFiltertype(l.filtertype))):console.error(`layer with id: ${l.id} you want to update not in storeItems!`)}updateLayerOrGroupInStore(l){this.store.getValue().filter((h,d,f)=>{h instanceof so&&l instanceof so?h.id===l.id&&(f[d]=l,this.store.next(f)):h instanceof Ur&&l instanceof Ur&&h.id===l.id&&(f[d]=l,this.store.next(f))})}removeLayerOrGroupById(l,h,d){this.store.getValue().filter(f=>{f instanceof so?f.id===l&&this.removeLayer(f,f.filtertype||"Layers",d):f instanceof Ur&&(f.id===l?this.removeLayerGroup(f,d):f.layers.forEach(m=>{m.id===l&&this.removeLayerFromGroup(m,f,h,d)}))})}addLayerToGroup(l,h){this.isInLayergroups(l)?console.error(`layer with id: ${l.id} already exists!`):(l.filtertype!==h.filtertype&&(l.filtertype=h.filtertype),this.isInLayergroups(l,[h])?console.error(`layer with id: ${l.id} already exists in ${h.id}!`,h):(h.layers.push(l),this.updateLayerGroup(h)))}addLayerToGroupById(l,h){this.store.getValue().forEach(d=>{d instanceof Ur&&d.id===h&&this.addLayerToGroup(l,d)})}removeLayerFromGroup(l,h,d=!0,f){h.layers=h.layers.filter(m=>m.id!==l.id),this.updateLayerGroup(h),this.filterFiltertype(l.filtertype),0===h.layers.length&&d&&this.removeLayerGroup(h,f)}setLayerIndexInGroup(l,h,d){const f=d.layers.indexOf(l);switch(h){case"up":if(0===f)break;this.arrayMove(d.layers,f,f-1);break;case"down":if(f===d.layers.length-1)break;this.arrayMove(d.layers,f,f+1)}this.updateLayer(l,d.filtertype||"Layers")}addLayerGroup(l,h){if(!this.isInLayergroups(l)){h?l.filtertype=h:h=l.filtertype;const d=this.store.getValue();this.isInLayergroups(l,l.layers)&&(l.layers=l.layers.filter(f=>f.id!==l.id)),l.layers=l.layers.map(f=>(f.filtertype=l.filtertype,f)),d.push(l),this.store.next(d),this.updateLayerGroup(l)}}removeLayerGroup(l,h){this.isInLayergroups(l)?h?(console.log(`layerGroup: ${l.id} is removed with force!`),this._removeLayerGroup(l)):l.removable?this._removeLayerGroup(l):l.removable||console.log(`layerGroup: ${l.id} is not removable!`):console.error(`layer or Group with id: ${l.id} not in storeItems!`)}_removeLayerGroup(l){for(const f of l.layers)this.removeLayerFromGroup(f,l);const d=this.store.getValue().filter(function(f,m){return f.id!==l.id});this.store.next(d)}updateLayerGroup(l,h=!1){h&&(l=this.sortLayerGroup(l)),this.updateLayerOrGroupInStore(l);for(const d of l.layers)this.updateLayer(d,l.filtertype||"Layers")}arrayMove(l,h,d){l.splice(d<0?l.length+d:d,0,l.splice(h,1)[0])}setGroupLayerIndex(l,h){let d;if((l instanceof so&&l.filtertype||l instanceof Ur)&&(d=this.getNumOfGroups(l.filtertype)),d>1){const f=this.store.getValue(),m=f.indexOf(l);(!this.isGroupFirst(l)||!this.isGroupLast(l))&&("number"==typeof h?this.arrayMove(f,m,h):"up"===h?this.arrayMove(f,m,m-1):"down"===h&&this.arrayMove(f,m,m+1)),this.store.next(f),this.baseLayers.next(this.filterBaseLayers()),this.layers.next(this.filterLayers()),this.overlays.next(this.filterOverlays())}}getNumOfGroups(l){let h=0;const d=this.store.getValue();for(const f of d)f.filtertype===l&&h++;return h}isGroupFirst(l,h,d){let f=!1,m=this.store.getValue();return h&&(m=h),d&&(m=m.filter(g=>g.filtertype===d)),0===m.indexOf(l)&&(f=!0),f}isGroupLast(l,h,d){let f=!1,m=this.store.getValue();return h&&(m=h),d&&(m=m.filter(g=>g.filtertype===d)),m.indexOf(l)===m.length-1&&(f=!0),f}isInLayergroups(l,h){let f,d=!1;f=l instanceof so||l instanceof Ur?l.id:l;const m=this.getLayerOrGroupById(f,h);return(m&&m instanceof so||m instanceof Ur)&&(d=!0),d}getLayerOrGroupById(l,h){const d=[];let f=this.store.getValue();return h&&(f=h),f.map(m=>{m instanceof Ur?m.id===l?d.push(m):m.layers.map(g=>{g.id===l&&d.push(g)}):m instanceof so&&m.id===l&&d.push(m)}),d.length?1===d.length?d[0]:void(d.length>1&&console.log("there is a duplicate ID in the Layer Groups!")):null}getLayerById(l,h){let d,f=this.flattenDeepArray(this.store.getValue());return h&&(f=h),f.map(m=>{m.id===l&&(d=m)}),d}getBaseLayers(){return this.baseLayers.asObservable()}removeBaseLayers(l){let h=this.filterBaseLayers();return l&&(h=h.filter(l)),h.forEach(d=>{this.removeLayerOrGroupById(d.id)}),this.baseLayers.asObservable()}getBaseLayersCount(){return this.baseLayers.getValue().length}getOverlays(){return this.overlays.asObservable()}removeOverlays(l){let h=this.filterOverlays();return l&&(h=h.filter(l)),h.forEach(d=>{this.removeLayerOrGroupById(d.id)}),this.overlays.asObservable()}getOverlaysCount(){return this.overlays.getValue().length}getLayers(){return this.layers.asObservable()}removeLayers(l){let h=this.filterLayers();return l&&(h=h.filter(l)),h.forEach(d=>{this.removeLayerOrGroupById(d.id)}),this.layers.asObservable()}getLayersCount(){return this.layers.getValue().length}getLayerGroups(){return this.store.asObservable()}setLayerGroups(l,h){return l.length>0&&l.map(d=>{d instanceof Ur&&d.layers.length>0&&(d.layers=d.layers.map(f=>(f.filtertype=d.filtertype,f)))}),h?("Baselayers"===h?this.removeBaseLayers():"Layers"===h?this.removeLayers():"Overlays"===h&&this.removeOverlays(),l.map(d=>{d instanceof so?this.addLayer(d,h):d instanceof Ur&&this.addLayerGroup(d,h)})):(this.store.next(l),this.baseLayers.next(this.filterBaseLayers()),this.layers.next(this.filterLayers()),this.overlays.next(this.filterOverlays())),this.store.asObservable()}getLayerGroupsCount(){return this.store.getValue().length}flattenDeepArray(l){return l.reduce((h,d)=>d instanceof Ur&&Array.isArray(d.layers)?h.concat(this.flattenDeepArray(d.layers)):h.concat(d),[])}filterOverlays(){const l=this.store.getValue();return this.flattenDeepArray(l.filter(d=>"Overlays"===d.filtertype))}filterBaseLayers(){const l=this.store.getValue();return this.flattenDeepArray(l.filter(d=>"Baselayers"===d.filtertype))}filterLayers(){const l=this.store.getValue();return this.flattenDeepArray(l.filter(d=>"Layers"===d.filtertype))}filterFiltertype(l){"Baselayers"===l?this.baseLayers.next(this.filterBaseLayers()):"Overlays"===l?this.overlays.next(this.filterOverlays()):"Layers"===l&&this.layers.next(this.filterLayers())}sortLayerGroup(l){return l.layers.sort((h,d)=>{let f=0;return h instanceof ra?f=1:d instanceof ra&&(f=-1),f}),l}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class xy{constructor(a,l,h,d=[-180,-90,180,90],f=(new Date).toISOString()){this.zoom=a,this.center=l,this.extent=d,this.time=f,this.options=Object.assign({maxzoom:0,minzoom:0,notifier:"map"},h)}sameCenter(a){return this.center.lat===a.lat&&this.center.lon===a.lon}sameZoom(a){return this.zoom===a}sameExtent(a){let h=!1;return this.extent.length===a.length&&(h=this.extent.every((d,f)=>a[f]===d)),h}sameNotifier(a){return this.options.notifier===a}}const Wve=new xy(0,{lat:0,lon:0});let oo=(()=>{class c{constructor(){this.mapState=new Ui(Wve),this.lastAction=new Ui(null)}getMapState(){return this.mapState}setMapState(l){if(l)if(this.lastAction.next("setState"),l instanceof xy){const h=new xy(l.zoom,l.center,l.options,l.extent,l.time);this.mapState.next(h)}else{const h={notifier:"user",...l.options},d=new xy(l.zoom,l.center,h,l.extent,l.time);this.mapState.next(d)}}getExtent(){return this.mapState.pipe(q(l=>l.extent))}setExtent(l,h="user"){if(!l)return;this.lastAction.next("setExtent");const d=this.getMapState().getValue();d.options.notifier=h;const f=new xy(d.zoom,d.center,d.options,l,d.time);this.mapState.next(f)}setTime(l){const h=this.getMapState().getValue();h.time=l instanceof Date?l.toISOString():l,this.setMapState(h)}getLastAction(){return this.lastAction}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class Tb extends ra{constructor(a){const l={name:"OpenStreetMap",displayName:"OpenStreetMap",id:"osm",visible:!1,type:"xyz",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",subdomains:["a","b","c"],attribution:'&copy, <a href="https://www.openstreetmap.org">OpenStreetMap</a> contributors',continuousWorld:!1,legendImg:"https://a.tile.openstreetmap.org/3/4/3.png",description:"OpenStreetMap z-x-y Tiles",opacity:1};a&&Object.assign(l,a),super(l)}}class Xve extends ra{constructor(a){const l={name:"OpenSeaMap",displayName:"OpenSeaMap",id:"OpenSeaMap",visible:!1,type:"xyz",removable:!1,url:"https://{s}.openseamap.org/seamark/{z}/{x}/{y}.png",subdomains:["t1"],attribution:'&copy, <a href="https://map.openseamap.org/legend.php?lang=de&page=license">OpenSeaMap</a>',continuousWorld:!1,legendImg:"https://t1.openseamap.org/seamark/10/554/321.png",description:"http://map.openseamap.org/",opacity:1};a&&Object.assign(l,a),super(l)}}class bP extends Cy{constructor(a){const l={name:"EOC Litemap",displayName:"EOC Litemap",id:"eoc_litemap",visible:!1,type:"wms",removable:!1,params:{LAYERS:"litemap",FORMAT:"image/png",TRANSPARENT:!0},url:"https://geoservice.dlr.de/eoc/basemap/wms",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://geoservice.dlr.de/eoc/basemap/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image%2Fpng&TRANSPARENT=true&LAYERS=litemap&ATTRIBUTION=&WIDTH=256&HEIGHT=256&CRS=EPSG%3A3857&STYLES=&BBOX=0%2C0%2C10018754.171394622%2C10018754.171394622",description:"http://www.naturalearthdata.com/about/",opacity:1};a&&Object.assign(l,a),super(l)}}class qve extends Da{constructor(a){const l={name:"EOC Litemap Tile",displayName:"EOC Litemap Tile",id:"eoc_litemap_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:litemap",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Alitemap&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"EOC Litemap as web map tile service",opacity:1};a&&Object.assign(l,a),super(l)}}class hx extends Da{constructor(a){const l={name:"EOC Liteoverlay Tile",displayName:"EOC LiteoverlayTile",id:"eoc_Liteoverlay_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:liteoverlay",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aliteoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the liteoverlay provided for EOC Service Portals",opacity:1};a&&Object.assign(l,a),super(l)}}class $ve extends Da{constructor(a){const l={name:"EOC Basemap Tile",displayName:"EOC Basemap Tile",id:"eoc_basemap_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:basemap",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Abasemap&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the basemap for DLR Service Portals",opacity:1};a&&Object.assign(l,a),super(l)}}class X9 extends Da{constructor(a){const l={name:"EOC Baseoverlay Tile",displayName:"EOC Baseoverlay Tile",id:"eoc_Baseoverlay_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:baseoverlay",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Abaseoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the basemap for DLR Service Portals",opacity:1};a&&Object.assign(l,a),super(l)}}class q9 extends Da{constructor(a){const l={name:"BlueMarble Tile",displayName:"BlueMarble Tile",id:"blueMarble_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"bmng_topo_bathy",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=bmng_topo_bathy&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"Blue Marble NG dataset with topography and bathymetry",opacity:1};a&&Object.assign(l,a),super(l)}}class $9 extends Da{constructor(a){const l={name:"World Relief B/W Tile",displayName:"World Relief B/W Tile",id:"eoc:world_relief_bw",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:world_relief_bw",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aworld_relief_bw&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"World Relief Black / White",opacity:1};a&&Object.assign(l,a),super(l)}}class Yve extends Da{constructor(a){const l={name:"Hillshade Tile",displayName:"Hillshade Tile",id:"eoc_hillshade",visible:!1,type:"wmts",removable:!1,params:{layer:"hillshade",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=hillshade&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"Global Hillshade based on GMTED2010",opacity:1};a&&Object.assign(l,a),super(l)}}const vc=class Zve{constructor(a){this.type=a,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}},wb=class Kve{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}};function Ip(c,a){return c>a?1:c<a?-1:0}function dx(c,a,l){const h=c.length;if(c[0]<=a)return 0;if(a<=c[h-1])return h-1;let d;if(l>0){for(d=1;d<h;++d)if(c[d]<a)return d-1}else if(l<0){for(d=1;d<h;++d)if(c[d]<=a)return d}else for(d=1;d<h;++d){if(c[d]==a)return d;if(c[d]<a)return"function"==typeof l?l(a,c[d-1],c[d])>0?d-1:d:c[d-1]-a<a-c[d]?d-1:d}return h-1}function Qve(c,a,l){for(;a<l;){const h=c[a];c[a]=c[l],c[l]=h,++a,--l}}function Pr(c,a){const l=Array.isArray(a)?a:[a],h=l.length;for(let d=0;d<h;d++)c[c.length]=l[d]}function yh(c,a){const l=c.length;if(l!==a.length)return!1;for(let h=0;h<l;h++)if(c[h]!==a[h])return!1;return!0}function Cb(){return!0}function fx(){return!1}function Ey(){}function My(c){for(const a in c)delete c[a]}function Rp(c){let a;for(a in c)return!1;return!a}const xb=class n0e extends wb{constructor(a){super(),this.eventTarget_=a,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(a,l){if(!a||!l)return;const h=this.listeners_||(this.listeners_={}),d=h[a]||(h[a]=[]);d.includes(l)||d.push(l)}dispatchEvent(a){const l="string"==typeof a,h=l?a:a.type,d=this.listeners_&&this.listeners_[h];if(!d)return;const f=l?new vc(a):a;f.target||(f.target=this.eventTarget_||this);const m=this.dispatching_||(this.dispatching_={}),g=this.pendingRemovals_||(this.pendingRemovals_={});let y;h in m||(m[h]=0,g[h]=0),++m[h];for(let _=0,v=d.length;_<v;++_)if(y="handleEvent"in d[_]?d[_].handleEvent(f):d[_].call(this,f),!1===y||f.propagationStopped){y=!1;break}if(0==--m[h]){let _=g[h];for(delete g[h];_--;)this.removeEventListener(h,Ey);delete m[h]}return y}disposeInternal(){this.listeners_&&My(this.listeners_)}getListeners(a){return this.listeners_&&this.listeners_[a]||void 0}hasListener(a){return!!this.listeners_&&(a?a in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(a,l){const h=this.listeners_&&this.listeners_[a];if(h){const d=h.indexOf(l);-1!==d&&(this.pendingRemovals_&&a in this.pendingRemovals_?(h[d]=Ey,++this.pendingRemovals_[a]):(h.splice(d,1),0===h.length&&delete this.listeners_[a]))}}};function Zn(c,a,l,h,d){if(h&&h!==c&&(l=l.bind(h)),d){const m=l;l=function(){c.removeEventListener(a,l),m.apply(this,arguments)}}const f={target:c,type:a,listener:l};return c.addEventListener(a,l),f}function Eb(c,a,l,h){return Zn(c,a,l,h,!0)}function or(c){c&&c.target&&(c.target.removeEventListener(c.type,c.listener),My(c))}function Y9(c){if(Array.isArray(c))for(let a=0,l=c.length;a<l;++a)or(c[a]);else or(c)}const Z9=class px extends xb{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent("change")}getRevision(){return this.revision_}onInternal(a,l){if(Array.isArray(a)){const h=a.length,d=new Array(h);for(let f=0;f<h;++f)d[f]=Zn(this,a[f],l);return d}return Zn(this,a,l)}onceInternal(a,l){let h;if(Array.isArray(a)){const d=a.length;h=new Array(d);for(let f=0;f<d;++f)h[f]=Eb(this,a[f],l)}else h=Eb(this,a,l);return l.ol_key=h,h}unInternal(a,l){const h=l.ol_key;if(h)Y9(h);else if(Array.isArray(a))for(let d=0,f=a.length;d<f;++d)this.removeEventListener(a[d],l);else this.removeEventListener(a,l)}};function Rn(){throw new Error("Unimplemented abstract method.")}let i0e=0;function an(c){return c.ol_uid||(c.ol_uid=String(++i0e))}class K9 extends vc{constructor(a,l,h){super(a),this.key=l,this.oldValue=h}}const bc=class r0e extends Z9{constructor(a){super(),an(this),this.values_=null,void 0!==a&&this.setProperties(a)}get(a){let l;return this.values_&&this.values_.hasOwnProperty(a)&&(l=this.values_[a]),l}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(a,l){let h;h=`change:${a}`,this.hasListener(h)&&this.dispatchEvent(new K9(h,a,l)),h="propertychange",this.hasListener(h)&&this.dispatchEvent(new K9(h,a,l))}addChangeListener(a,l){this.addEventListener(`change:${a}`,l)}removeChangeListener(a,l){this.removeEventListener(`change:${a}`,l)}set(a,l,h){const d=this.values_||(this.values_={});if(h)d[a]=l;else{const f=d[a];d[a]=l,f!==l&&this.notify(a,f)}}setProperties(a,l){for(const h in a)this.set(h,a[h],l)}applyProperties(a){!a.values_||Object.assign(this.values_||(this.values_={}),a.values_)}unset(a,l){if(this.values_&&a in this.values_){const h=this.values_[a];delete this.values_[a],Rp(this.values_)&&(this.values_=null),l||this.notify(a,h)}}},s0e={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class o0e extends Error{constructor(a){const l=s0e[a];super(l),this.code=a,this.name="AssertionError",this.message=l}}const J9=o0e;class mx extends vc{constructor(a,l,h){super(a),this.element=l,this.index=h}}const bo=class a0e extends bc{constructor(a,l){if(super(),this.unique_=!!(l=l||{}).unique,this.array_=a||[],this.unique_)for(let h=0,d=this.array_.length;h<d;++h)this.assertUnique_(this.array_[h],h);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(a){for(let l=0,h=a.length;l<h;++l)this.push(a[l]);return this}forEach(a){const l=this.array_;for(let h=0,d=l.length;h<d;++h)a(l[h],h,l)}getArray(){return this.array_}item(a){return this.array_[a]}getLength(){return this.get("length")}insertAt(a,l){if(a<0||a>this.getLength())throw new Error("Index out of bounds: "+a);this.unique_&&this.assertUnique_(l),this.array_.splice(a,0,l),this.updateLength_(),this.dispatchEvent(new mx("add",l,a))}pop(){return this.removeAt(this.getLength()-1)}push(a){this.unique_&&this.assertUnique_(a);const l=this.getLength();return this.insertAt(l,a),this.getLength()}remove(a){const l=this.array_;for(let h=0,d=l.length;h<d;++h)if(l[h]===a)return this.removeAt(h)}removeAt(a){if(a<0||a>=this.getLength())return;const l=this.array_[a];return this.array_.splice(a,1),this.updateLength_(),this.dispatchEvent(new mx("remove",l,a)),l}setAt(a,l){if(a>=this.getLength())return void this.insertAt(a,l);if(a<0)throw new Error("Index out of bounds: "+a);this.unique_&&this.assertUnique_(l,a);const d=this.array_[a];this.array_[a]=l,this.dispatchEvent(new mx("remove",d,a)),this.dispatchEvent(new mx("add",l,a))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(a,l){for(let h=0,d=this.array_.length;h<d;++h)if(this.array_[h]===a&&h!==l)throw new J9(58)}},Fd=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",l0e=Fd.includes("firefox"),c0e=Fd.includes("safari")&&!Fd.includes("chrom")&&(Fd.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Fd)),u0e=Fd.includes("webkit")&&!Fd.includes("edge"),h0e=Fd.includes("macintosh"),e7=typeof devicePixelRatio<"u"?devicePixelRatio:1,SP=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,d0e=typeof Image<"u"&&Image.prototype.decode,t7=function(){let c=!1;try{const a=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("_",null,a),window.removeEventListener("_",null,a)}catch{}return c}();function En(c,a){if(!c)throw new J9(a)}const TP=new Array(6);function Mb(c){return Db(c,1,0,0,1,0,0)}function Lp(c,a){const l=c[0],h=c[1],d=c[2],f=c[3],m=c[4],g=c[5],y=a[0],_=a[1],v=a[2],b=a[3],S=a[4],T=a[5];return c[0]=l*y+d*_,c[1]=h*y+f*_,c[2]=l*v+d*b,c[3]=h*v+f*b,c[4]=l*S+d*T+m,c[5]=h*S+f*T+g,c}function Db(c,a,l,h,d,f,m){return c[0]=a,c[1]=l,c[2]=h,c[3]=d,c[4]=f,c[5]=m,c}function Or(c,a){const l=a[0],h=a[1];return a[0]=c[0]*l+c[2]*h+c[4],a[1]=c[1]*l+c[3]*h+c[5],a}function gx(c,a,l){return Lp(c,Db(TP,a,0,0,l,0,0))}function wP(c,a,l){return Lp(c,Db(TP,1,0,0,1,a,l))}function sa(c,a,l,h,d,f,m,g){const y=Math.sin(f),_=Math.cos(f);return c[0]=h*_,c[1]=d*y,c[2]=-h*y,c[3]=d*_,c[4]=m*h*_-g*h*y+a,c[5]=m*d*y+g*d*_+l,c}function Dy(c,a){const l=function g0e(c){return c[0]*c[3]-c[1]*c[2]}(a);En(0!==l,32);const h=a[0],d=a[1],f=a[2],m=a[3],g=a[4],y=a[5];return c[0]=m/l,c[1]=-d/l,c[2]=-f/l,c[3]=h/l,c[4]=(f*y-m*g)/l,c[5]=-(h*y-d*g)/l,c}let n7;function yx(c){const a="matrix("+c.join(", ")+")";if(SP)return a;const l=n7||(n7=document.createElement("div"));return l.style.transform=a,l.style.transform}function CP(c){const a=[1/0,1/0,-1/0,-1/0];for(let l=0,h=c.length;l<h;++l)Ay(a,c[l]);return a}function tl(c,a,l){return l?(l[0]=c[0]-a,l[1]=c[1]-a,l[2]=c[2]+a,l[3]=c[3]+a,l):[c[0]-a,c[1]-a,c[2]+a,c[3]+a]}function i7(c,a){return a?(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a):c.slice()}function Pp(c,a,l){let h,d;return h=a<c[0]?c[0]-a:c[2]<a?a-c[2]:0,d=l<c[1]?c[1]-l:c[3]<l?l-c[3]:0,h*h+d*d}function lu(c,a){return Ab(c,a[0],a[1])}function Ia(c,a){return c[0]<=a[0]&&a[2]<=c[2]&&c[1]<=a[1]&&a[3]<=c[3]}function Ab(c,a,l){return c[0]<=a&&a<=c[2]&&c[1]<=l&&l<=c[3]}function xP(c,a){const m=a[0],g=a[1];let y=0;return m<c[0]?y|=16:m>c[2]&&(y|=4),g<c[1]?y|=8:g>c[3]&&(y|=2),0===y&&(y=1),y}function cu(c,a,l,h,d){return d?(d[0]=c,d[1]=a,d[2]=l,d[3]=h,d):[c,a,l,h]}function Op(c){return cu(1/0,1/0,-1/0,-1/0,c)}function EP(c,a){const l=c[0],h=c[1];return cu(l,h,l,h,a)}function MP(c,a,l,h,d){return s7(Op(d),c,a,l,h)}function Gl(c,a){return c[0]==a[0]&&c[2]==a[2]&&c[1]==a[1]&&c[3]==a[3]}function DP(c,a){return a[0]<c[0]&&(c[0]=a[0]),a[2]>c[2]&&(c[2]=a[2]),a[1]<c[1]&&(c[1]=a[1]),a[3]>c[3]&&(c[3]=a[3]),c}function Ay(c,a){a[0]<c[0]&&(c[0]=a[0]),a[0]>c[2]&&(c[2]=a[0]),a[1]<c[1]&&(c[1]=a[1]),a[1]>c[3]&&(c[3]=a[1])}function s7(c,a,l,h,d){for(;l<h;l+=d)b0e(c,a[l],a[l+1]);return c}function b0e(c,a,l){c[0]=Math.min(c[0],a),c[1]=Math.min(c[1],l),c[2]=Math.max(c[2],a),c[3]=Math.max(c[3],l)}function o7(c,a){let l;return l=a(vx(c)),!!(l||(l=a(Ib(c)),l)||(l=a(bx(c)),l)||(l=a(Tc(c)),l))&&l}function _x(c){let a=0;return Ry(c)||(a=Kn(c)*gr(c)),a}function vx(c){return[c[0],c[1]]}function Ib(c){return[c[2],c[1]]}function aa(c){return[(c[0]+c[2])/2,(c[1]+c[3])/2]}function S0e(c,a){let l;return"bottom-left"===a?l=vx(c):"bottom-right"===a?l=Ib(c):"top-left"===a?l=Tc(c):"top-right"===a?l=bx(c):En(!1,13),l}function Iy(c,a,l,h,d){const[f,m,g,y,_,v,b,S]=AP(c,a,l,h);return cu(Math.min(f,g,_,b),Math.min(m,y,v,S),Math.max(f,g,_,b),Math.max(m,y,v,S),d)}function AP(c,a,l,h){const d=a*h[0]/2,f=a*h[1]/2,m=Math.cos(l),g=Math.sin(l),y=d*m,_=d*g,v=f*m,b=f*g,S=c[0],T=c[1];return[S-y+b,T-_-v,S-y-b,T-_+v,S+y-b,T+_+v,S+y+b,T+_-v,S-y+b,T-_-v]}function gr(c){return c[3]-c[1]}function Sc(c,a,l){const h=l||[1/0,1/0,-1/0,-1/0];return Mr(c,a)?(h[0]=c[0]>a[0]?c[0]:a[0],h[1]=c[1]>a[1]?c[1]:a[1],h[2]=c[2]<a[2]?c[2]:a[2],h[3]=c[3]<a[3]?c[3]:a[3]):Op(h),h}function Tc(c){return[c[0],c[3]]}function bx(c){return[c[2],c[3]]}function Kn(c){return c[2]-c[0]}function Mr(c,a){return c[0]<=a[2]&&c[2]>=a[0]&&c[1]<=a[3]&&c[3]>=a[1]}function Ry(c){return c[2]<c[0]||c[3]<c[1]}function IP(c,a){const l=(c[2]-c[0])/2*(a-1),h=(c[3]-c[1])/2*(a-1);c[0]-=l,c[2]+=l,c[1]-=h,c[3]+=h}function Sx(c,a,l,h){let d=[];if(h>1){const g=c[2]-c[0],y=c[3]-c[1];for(let _=0;_<h;++_)d.push(c[0]+g*_/h,c[1],c[2],c[1]+y*_/h,c[2]-g*_/h,c[3],c[0],c[3]-y*_/h)}else d=[c[0],c[1],c[2],c[1],c[2],c[3],c[0],c[3]];a(d,d,2);const f=[],m=[];for(let g=0,y=d.length;g<y;g+=2)f.push(d[g]),m.push(d[g+1]);return function y0e(c,a,l){return cu(Math.min.apply(null,c),Math.min.apply(null,a),Math.max.apply(null,c),Math.max.apply(null,a),l)}(f,m,l)}function RP(c,a){const l=a.getExtent(),h=aa(c);if(a.canWrapX()&&(h[0]<l[0]||h[0]>=l[2])){const d=Kn(l),m=Math.floor((h[0]-l[0])/d)*d;c[0]-=m,c[2]-=m}return c}function Qn(c,a,l){return Math.min(Math.max(c,a),l)}function a7(c,a,l,h,d,f){const m=d-l,g=f-h;if(0!==m||0!==g){const y=((c-l)*m+(a-h)*g)/(m*m+g*g);y>1?(l=d,h=f):y>0&&(l+=m*y,h+=g*y)}return Np(c,a,l,h)}function Np(c,a,l,h){const d=l-c,f=h-a;return d*d+f*f}function Rb(c){return c*Math.PI/180}function kd(c,a){const l=c%a;return l*a<0?l+a:l}function nl(c,a,l){return c+l*(a-c)}function Lb(c,a){const l=Math.pow(10,a);return Math.round(c*l)/l}function l7(c,a){return Math.round(Lb(c,a))}function Ly(c,a){return Math.floor(Lb(c,a))}function Vd(c,a){return Math.ceil(Lb(c,a))}const c7=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,u7=/^([a-z]*)$|^hsla?\(.*\)$/i;function h7(c){return"string"==typeof c?c:p7(c)}const E0e=function(){const a={};let l=0;return function(h){let d;if(a.hasOwnProperty(h))d=a[h];else{if(l>=1024){let f=0;for(const m in a)0==(3&f++)&&(delete a[m],--l)}d=function M0e(c){let a,l,h,d,f;if(u7.exec(c)&&(c=function d7(c){const a=document.createElement("div");if(a.style.color=c,""!==a.style.color){document.body.appendChild(a);const l=getComputedStyle(a).color;return document.body.removeChild(a),l}return""}(c)),c7.exec(c)){const m=c.length-1;let g;g=m<=4?1:2;const y=4===m||8===m;a=parseInt(c.substr(1+0*g,g),16),l=parseInt(c.substr(1+1*g,g),16),h=parseInt(c.substr(1+2*g,g),16),d=y?parseInt(c.substr(1+3*g,g),16):255,1==g&&(a=(a<<4)+a,l=(l<<4)+l,h=(h<<4)+h,y&&(d=(d<<4)+d)),f=[a,l,h,d/255]}else c.startsWith("rgba(")?(f=c.slice(5,-1).split(",").map(Number),f7(f)):c.startsWith("rgb(")?(f=c.slice(4,-1).split(",").map(Number),f.push(1),f7(f)):En(!1,14);return f}(h),a[h]=d,++l}return d}}();function Pb(c){return Array.isArray(c)?c:E0e(c)}function f7(c){return c[0]=Qn(c[0]+.5|0,0,255),c[1]=Qn(c[1]+.5|0,0,255),c[2]=Qn(c[2]+.5|0,0,255),c[3]=Qn(c[3],0,1),c}function p7(c){let a=c[0];a!=(0|a)&&(a=a+.5|0);let l=c[1];l!=(0|l)&&(l=l+.5|0);let h=c[2];return h!=(0|h)&&(h=h+.5|0),"rgba("+a+","+l+","+h+","+(void 0===c[3]?1:Math.round(100*c[3])/100)+")"}function m7(c,a,l){return a+":"+c+":"+(l?h7(l):"null")}const Tx=new class D0e{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let a=0;for(const l in this.cache_){const h=this.cache_[l];0==(3&a++)&&!h.hasListener()&&(delete this.cache_[l],--this.cacheSize_)}}}get(a,l,h){const d=m7(a,l,h);return d in this.cache_?this.cache_[d]:null}set(a,l,h,d){const f=m7(a,l,h);this.cache_[f]=d,++this.cacheSize_}setSize(a){this.maxCacheSize_=a,this.expire()}},LP=class A0e extends bc{constructor(a){super(),this.background_=a.background;const l=Object.assign({},a);"object"==typeof a.properties&&(delete l.properties,Object.assign(l,a.properties)),l.opacity=void 0!==a.opacity?a.opacity:1,En("number"==typeof l.opacity,64),l.visible=void 0===a.visible||a.visible,l.zIndex=a.zIndex,l.maxResolution=void 0!==a.maxResolution?a.maxResolution:1/0,l.minResolution=void 0!==a.minResolution?a.minResolution:0,l.minZoom=void 0!==a.minZoom?a.minZoom:-1/0,l.maxZoom=void 0!==a.maxZoom?a.maxZoom:1/0,this.className_=void 0!==l.className?l.className:"ol-layer",delete l.className,this.setProperties(l),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(a){const l=this.state_||{layer:this,managed:void 0===a||a},h=this.getZIndex();return l.opacity=Qn(Math.round(100*this.getOpacity())/100,0,1),l.visible=this.getVisible(),l.extent=this.getExtent(),l.zIndex=void 0!==h||l.managed?h:1/0,l.maxResolution=this.getMaxResolution(),l.minResolution=Math.max(this.getMinResolution(),0),l.minZoom=this.getMinZoom(),l.maxZoom=this.getMaxZoom(),this.state_=l,l}getLayersArray(a){return Rn()}getLayerStatesArray(a){return Rn()}getExtent(){return this.get("extent")}getMaxResolution(){return this.get("maxResolution")}getMinResolution(){return this.get("minResolution")}getMinZoom(){return this.get("minZoom")}getMaxZoom(){return this.get("maxZoom")}getOpacity(){return this.get("opacity")}getSourceState(){return Rn()}getVisible(){return this.get("visible")}getZIndex(){return this.get("zIndex")}setBackground(a){this.background_=a,this.changed()}setExtent(a){this.set("extent",a)}setMaxResolution(a){this.set("maxResolution",a)}setMinResolution(a){this.set("minResolution",a)}setMaxZoom(a){this.set("maxZoom",a)}setMinZoom(a){this.set("minZoom",a)}setOpacity(a){En("number"==typeof a,64),this.set("opacity",a)}setVisible(a){this.set("visible",a)}setZIndex(a){this.set("zIndex",a)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},il={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},_h={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937},Fp=class R0e{constructor(a){this.code_=a.code,this.units_=a.units,this.extent_=void 0!==a.extent?a.extent:null,this.worldExtent_=void 0!==a.worldExtent?a.worldExtent:null,this.axisOrientation_=void 0!==a.axisOrientation?a.axisOrientation:"enu",this.global_=void 0!==a.global&&a.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=a.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=a.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||_h[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(a){this.global_=a,this.canWrapX_=!(!a||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(a){this.defaultTileGrid_=a}setExtent(a){this.extent_=a,this.canWrapX_=!(!this.global_||!a)}setWorldExtent(a){this.worldExtent_=a}setGetPointResolution(a){this.getPointResolutionFunc_=a}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Ob=6378137,Py=Math.PI*Ob,L0e=[-Py,-Py,Py,Py],P0e=[-180,-85,180,85],Cx=Ob*Math.log(Math.tan(Math.PI/2));class Oy extends Fp{constructor(a){super({code:a,units:"m",extent:L0e,global:!0,worldExtent:P0e,getPointResolution:function(l,h){return l/Math.cosh(h[1]/Ob)}})}}const g7=[new Oy("EPSG:3857"),new Oy("EPSG:102100"),new Oy("EPSG:102113"),new Oy("EPSG:900913"),new Oy("http://www.opengis.net/def/crs/EPSG/0/3857"),new Oy("http://www.opengis.net/gml/srs/epsg.xml#3857")];function O0e(c,a,l){const h=c.length;l=l>1?l:2,void 0===a&&(a=l>2?c.slice():new Array(h));for(let d=0;d<h;d+=l){a[d]=Py*c[d]/180;let f=Ob*Math.log(Math.tan(Math.PI*(+c[d+1]+90)/360));f>Cx?f=Cx:f<-Cx&&(f=-Cx),a[d+1]=f}return a}function N0e(c,a,l){const h=c.length;l=l>1?l:2,void 0===a&&(a=l>2?c.slice():new Array(h));for(let d=0;d<h;d+=l)a[d]=180*c[d]/Py,a[d+1]=360*Math.atan(Math.exp(c[d+1]/Ob))/Math.PI-90;return a}const y7=[-180,-90,180,90],k0e=6378137*Math.PI/180;class kp extends Fp{constructor(a,l){super({code:a,units:"degrees",extent:y7,axisOrientation:l,global:!0,metersPerUnit:k0e,worldExtent:y7})}}const _7=[new kp("CRS:84"),new kp("EPSG:4326","neu"),new kp("urn:ogc:def:crs:OGC:1.3:CRS84"),new kp("urn:ogc:def:crs:OGC:2:84"),new kp("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new kp("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new kp("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let xx={},wc={};function Ny(c,a,l){const h=c.getCode(),d=a.getCode();h in wc||(wc[h]={}),wc[h][d]=l}function v7(c,a){let l;return c in wc&&a in wc[c]&&(l=wc[c][a]),l}function b7(c,a,l){const h=void 0!==l?c.toFixed(l):""+c;let d=h.indexOf(".");return d=-1===d?h.length:d,d>a?h:new Array(1+a-d).join("0")+h}function S7(c,a){const l=(""+c).split("."),h=(""+a).split(".");for(let d=0;d<Math.max(l.length,h.length);d++){const f=parseInt(l[d]||"0",10),m=parseInt(h[d]||"0",10);if(f>m)return 1;if(m>f)return-1}return 0}function T7(c,a){return c[0]+=+a[0],c[1]+=+a[1],c}function Ex(c,a,l){const h=kd(a+180,360)-180,d=Math.abs(3600*h),f=l||0;let m=Math.floor(d/3600),g=Math.floor((d-3600*m)/60),y=Lb(d-3600*m-60*g,f);y>=60&&(y=0,g+=1),g>=60&&(g=0,m+=1);let _=m+"\xb0";return(0!==g||0!==y)&&(_+=" "+b7(g,2)+"\u2032"),0!==y&&(_+=" "+b7(y,2,f)+"\u2033"),0!==h&&(_+=" "+c.charAt(h<0?1:0)),_}function Mx(c,a){let l=!0;for(let h=c.length-1;h>=0;--h)if(c[h]!=a[h]){l=!1;break}return l}function OP(c,a){const l=Math.cos(a),h=Math.sin(a),f=c[1]*l+c[0]*h;return c[0]=c[0]*l-c[1]*h,c[1]=f,c}function w7(c,a){return c[0]*=a,c[1]*=a,c}function Dx(c,a){if(a.canWrapX()){const l=Kn(a.getExtent()),h=E7(c,a,l);h&&(c[0]-=h*l)}return c}function E7(c,a,l){const h=a.getExtent();let d=0;return a.canWrapX()&&(c[0]<h[0]||c[0]>h[2])&&(l=l||Kn(h),d=Math.floor((c[0]-h[0])/l)),d}function NP(c,a,l){l=l||6371008.8;const h=Rb(c[1]),d=Rb(a[1]),f=(d-h)/2,m=Rb(a[0]-c[0])/2,g=Math.sin(f)*Math.sin(f)+Math.sin(m)*Math.sin(m)*Math.cos(h)*Math.cos(d);return 2*l*Math.atan2(Math.sqrt(g),Math.sqrt(1-g))}const Nb_warn=2;let Rx=1;function M7(...c){Rx>Nb_warn||console.warn(...c)}let kP=!0;function D7(c){kP=!(void 0===c||c)}function VP(c,a){if(void 0!==a)for(let l=0,h=c.length;l<h;++l)a[l]=c[l];else a=c.slice();return a}function BP(c,a){if(void 0!==a&&c!==a){for(let l=0,h=c.length;l<h;++l)a[l]=c[l];c=a}return c}function A7(c){(function B0e(c,a){xx[c]=a})(c.getCode(),c),Ny(c,c,VP)}function dn(c){return"string"==typeof c?function V0e(c){return xx[c]||xx[c.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(c):c||null}function Lx(c,a,l,h){let d;const f=(c=dn(c)).getPointResolutionFunc();if(f){if(d=f(a,l),h&&h!==c.getUnits()){const m=c.getMetersPerUnit();m&&(d=d*m/_h[h])}}else{const m=c.getUnits();if("degrees"==m&&!h||"degrees"==h)d=a;else{const g=vh(c,dn("EPSG:4326"));if(g===BP&&"degrees"!==m)d=a*c.getMetersPerUnit();else{let _=[l[0]-a/2,l[1],l[0]+a/2,l[1],l[0],l[1]-a/2,l[0],l[1]+a/2];_=g(_,_,2),d=(NP(_.slice(0,2),_.slice(2,4))+NP(_.slice(4,6),_.slice(6,8)))/2}const y=h?_h[h]:c.getMetersPerUnit();void 0!==y&&(d/=y)}}return d}function UP(c){(function j0e(c){c.forEach(A7)})(c),c.forEach(function(a){c.forEach(function(l){a!==l&&Ny(a,l,VP)})})}function zP(c,a){return c?"string"==typeof c?dn(c):c:dn(a)}function I7(c){return function(a,l,h){const d=a.length;h=void 0!==h?h:2,l=void 0!==l?l:new Array(d);for(let f=0;f<d;f+=h){const m=c(a.slice(f,f+h)),g=m.length;for(let y=0,_=h;y<_;++y)l[f+y]=y>=g?a[f+y]:m[y]}return l}}function X0e(c,a,l,h){const d=dn(c),f=dn(a);Ny(d,f,I7(l)),Ny(f,d,I7(h))}function R7(c,a){return D7(),rl(c,"EPSG:4326",void 0!==a?a:"EPSG:3857")}function Cc(c,a){if(c===a)return!0;const l=c.getUnits()===a.getUnits();return(c.getCode()===a.getCode()||vh(c,a)===VP)&&l}function vh(c,a){let d=v7(c.getCode(),a.getCode());return d||(d=BP),d}function uu(c,a){return vh(dn(c),dn(a))}function rl(c,a,l){return uu(a,l)(c,void 0,c.length)}function hu(c,a,l,h){return Sx(c,uu(a,l),void 0,h)}let ca=null;function Fb(){return ca}function GP(c,a){return c}function bh(c,a){return kP&&!Mx(c,[0,0])&&c[0]>=-180&&c[0]<=180&&c[1]>=-90&&c[1]<=90&&(kP=!1,M7("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),c}function HP(c,a){return c}function Sh(c,a){return c}function $0e(c,a){return c}function L7(c,a,l){return function(h){let d,f;if(c.canWrapX()){const m=c.getExtent(),g=Kn(m);f=E7(h=h.slice(0),c,g),f&&(h[0]=h[0]-f*g),h[0]=Qn(h[0],m[0],m[2]),h[1]=Qn(h[1],m[1],m[3]),d=l(h)}else d=l(h);return f&&a.canWrapX()&&(d[0]+=f*Kn(a.getExtent())),d}}function P7(c,a,l){return function(h,d,f,m,g){if(!h)return;if(!d&&!a)return h;const y=a?0:f[0]*d,_=a?0:f[1]*d,v=g?g[0]:0,b=g?g[1]:0;let S=c[0]+y/2+v,T=c[2]-y/2+v,x=c[1]+_/2+b,E=c[3]-_/2+b;S>T&&(S=(T+S)/2,T=S),x>E&&(x=(E+x)/2,E=x);let I=Qn(h[0],S,T),M=Qn(h[1],x,E);if(m&&l&&d){const D=30*d;I+=-D*Math.log(1+Math.max(0,S-h[0])/D)+D*Math.log(1+Math.max(0,h[0]-T)/D),M+=-D*Math.log(1+Math.max(0,x-h[1])/D)+D*Math.log(1+Math.max(0,h[1]-E)/D)}return[I,M]}}function Z0e(c){return c}function jP(c,a,l,h){const d=Kn(a)/l[0],f=gr(a)/l[1];return h?Math.min(c,Math.max(d,f)):Math.min(c,Math.min(d,f))}function WP(c,a,l){let h=Math.min(c,a);return h*=Math.log(1+50*Math.max(0,c/a-1))/50+1,l&&(h=Math.max(h,l),h/=Math.log(1+50*Math.max(0,l/c-1))/50+1),Qn(h,l/2,2*a)}function O7(c,a,l,h,d){return l=void 0===l||l,function(f,m,g,y){if(void 0!==f){const _=h?jP(c,h,g,d):c;return l&&y?WP(f,_,a):Qn(f,a,_)}}}function XP(c){if(void 0!==c)return 0}function N7(c){if(void 0!==c)return c}function F7(c){return Math.pow(c,3)}function Vp(c){return 1-F7(1-c)}function qP(c){return 3*c*c-2*c*c*c}function tbe(c){return c}function Bd(c,a,l,h,d,f){f=f||[];let m=0;for(let g=a;g<l;g+=h){const y=c[g],_=c[g+1];f[m++]=d[0]*y+d[2]*_+d[4],f[m++]=d[1]*y+d[3]*_+d[5]}return f&&f.length!=m&&(f.length=m),f}function k7(c,a,l,h,d,f,m){m=m||[];const g=Math.cos(d),y=Math.sin(d),_=f[0],v=f[1];let b=0;for(let S=a;S<l;S+=h){const T=c[S]-_,x=c[S+1]-v;m[b++]=_+T*g-x*y,m[b++]=v+T*y+x*g;for(let E=S+2;E<S+h;++E)m[b++]=c[E]}return m&&m.length!=b&&(m.length=b),m}!function Y0e(){UP(g7),UP(_7),function W0e(c,a,l,h){c.forEach(function(d){a.forEach(function(f){Ny(d,f,l),Ny(f,d,h)})})}(_7,g7,O0e,N0e)}();const V7=[1,0,0,1,0,0],B7=class rbe extends bc{constructor(){super(),this.extent_=[1/0,1/0,-1/0,-1/0],this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=function t0e(c){let l,h,d,a=!1;return function(){const f=Array.prototype.slice.call(arguments);return(!a||this!==d||!yh(f,h))&&(a=!0,d=this,h=f,l=c.apply(this,arguments)),l}}(function(a,l,h){if(!h)return this.getSimplifiedGeometry(l);const d=this.clone();return d.applyTransform(h),d.getSimplifiedGeometry(l)})}simplifyTransformed(a,l){return this.simplifyTransformedInternal(this.getRevision(),a,l)}clone(){return Rn()}closestPointXY(a,l,h,d){return Rn()}containsXY(a,l){const h=this.getClosestPoint([a,l]);return h[0]===a&&h[1]===l}getClosestPoint(a,l){return this.closestPointXY(a[0],a[1],l=l||[NaN,NaN],1/0),l}intersectsCoordinate(a){return this.containsXY(a[0],a[1])}computeExtent(a){return Rn()}getExtent(a){if(this.extentRevision_!=this.getRevision()){const l=this.computeExtent(this.extent_);(isNaN(l[0])||isNaN(l[1]))&&Op(l),this.extentRevision_=this.getRevision()}return function T0e(c,a){return a?(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a):c}(this.extent_,a)}rotate(a,l){Rn()}scale(a,l,h){Rn()}simplify(a){return this.getSimplifiedGeometry(a*a)}getSimplifiedGeometry(a){return Rn()}getType(){return Rn()}applyTransform(a){Rn()}intersectsExtent(a){return Rn()}translate(a,l){Rn()}transform(a,l){const h=dn(a),d="tile-pixels"==h.getUnits()?function(f,m,g){const y=h.getExtent(),_=h.getWorldExtent(),v=gr(_)/gr(y);return sa(V7,_[0],_[3],v,-v,0,0,0),Bd(f,0,f.length,g,V7,m),uu(h,l)(f,m,g)}:uu(h,l);return this.applyTransform(d),this}};function U7(c){let a;return"XY"==c?a=2:"XYZ"==c||"XYM"==c?a=3:"XYZM"==c&&(a=4),a}const Bp=class sbe extends B7{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(a){return MP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a)}getCoordinates(){return Rn()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(a){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),a<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&a<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const l=this.getSimplifiedGeometryInternal(a);return l.getFlatCoordinates().length<this.flatCoordinates.length?l:(this.simplifiedGeometryMaxMinSquaredTolerance=a,this)}getSimplifiedGeometryInternal(a){return this}getStride(){return this.stride}setFlatCoordinates(a,l){this.stride=U7(a),this.layout=a,this.flatCoordinates=l}setCoordinates(a,l){Rn()}setLayout(a,l,h){let d;if(a)d=U7(a);else{for(let f=0;f<h;++f){if(0===l.length)return this.layout="XY",void(this.stride=2);l=l[0]}d=l.length,a=function obe(c){let a;return 2==c?a="XY":3==c?a="XYZ":4==c&&(a="XYZM"),a}(d)}this.layout=a,this.stride=d}applyTransform(a){this.flatCoordinates&&(a(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(a,l){const h=this.getFlatCoordinates();if(h){const d=this.getStride();k7(h,0,h.length,d,a,l,h),this.changed()}}scale(a,l,h){void 0===l&&(l=a),h||(h=aa(this.getExtent()));const d=this.getFlatCoordinates();if(d){const f=this.getStride();(function nbe(c,a,l,h,d,f,m,g){g=g||[];const y=m[0],_=m[1];let v=0;for(let b=a;b<l;b+=h){const T=c[b+1]-_;g[v++]=y+d*(c[b]-y),g[v++]=_+f*T;for(let x=b+2;x<b+h;++x)g[v++]=c[x]}g&&g.length!=v&&(g.length=v)})(d,0,d.length,f,a,l,h,d),this.changed()}}translate(a,l){const h=this.getFlatCoordinates();if(h){const d=this.getStride();(function ibe(c,a,l,h,d,f,m){m=m||[];let g=0;for(let y=a;y<l;y+=h){m[g++]=c[y]+d,m[g++]=c[y+1]+f;for(let _=y+2;_<y+h;++_)m[g++]=c[_]}m&&m.length!=g&&(m.length=g)})(h,0,h.length,d,a,l,h),this.changed()}}};function z7(c,a,l,h,d,f,m){const g=c[a],y=c[a+1],_=c[l]-g,v=c[l+1]-y;let b;if(0===_&&0===v)b=a;else{const S=((d-g)*_+(f-y)*v)/(_*_+v*v);if(S>1)b=l;else{if(S>0){for(let T=0;T<h;++T)m[T]=nl(c[a+T],c[l+T],S);return void(m.length=h)}b=a}}for(let S=0;S<h;++S)m[S]=c[b+S];m.length=h}function $P(c,a,l,h,d){let f=c[a],m=c[a+1];for(a+=h;a<l;a+=h){const g=c[a],y=c[a+1],_=Np(f,m,g,y);_>d&&(d=_),f=g,m=y}return d}function YP(c,a,l,h,d){for(let f=0,m=l.length;f<m;++f){const g=l[f];d=$P(c,a,g,h,d),a=g}return d}function ZP(c,a,l,h,d,f,m,g,y,_,v){if(a==l)return _;let b,S;if(0===d){if(S=Np(m,g,c[a],c[a+1]),S<_){for(b=0;b<h;++b)y[b]=c[a+b];return y.length=h,S}return _}v=v||[NaN,NaN];let T=a+h;for(;T<l;)if(z7(c,T-h,T,h,m,g,v),S=Np(m,g,v[0],v[1]),S<_){for(_=S,b=0;b<h;++b)y[b]=v[b];y.length=h,T+=h}else T+=h*Math.max((Math.sqrt(S)-Math.sqrt(_))/d|0,1);if(f&&(z7(c,l-h,a,h,m,g,v),S=Np(m,g,v[0],v[1]),S<_)){for(_=S,b=0;b<h;++b)y[b]=v[b];y.length=h}return _}function KP(c,a,l,h,d,f,m,g,y,_,v){v=v||[NaN,NaN];for(let b=0,S=l.length;b<S;++b){const T=l[b];_=ZP(c,a,T,h,d,f,m,g,y,_,v),a=T}return _}function Px(c,a,l,h){for(let d=0,f=l.length;d<f;++d){const m=l[d];for(let g=0;g<h;++g)c[a++]=m[g]}return a}function JP(c,a,l,h,d){d=d||[];let f=0;for(let m=0,g=l.length;m<g;++m){const y=Px(c,a,l[m],h);d[f++]=y,a=y}return d.length=f,d}function Ox(c,a,l,h,d,f,m){const g=(l-a)/h;if(g<3){for(;a<l;a+=h)f[m++]=c[a],f[m++]=c[a+1];return m}const y=new Array(g);y[0]=1,y[g-1]=1;const _=[a,l-h];let v=0;for(;_.length>0;){const b=_.pop(),S=_.pop();let T=0;const x=c[S],E=c[S+1],I=c[b],M=c[b+1];for(let D=S+h;D<b;D+=h){const F=a7(c[D],c[D+1],x,E,I,M);F>T&&(v=D,T=F)}T>d&&(y[(v-a)/h]=1,S+h<v&&_.push(S,v),v+h<b&&_.push(v,b))}for(let b=0;b<g;++b)y[b]&&(f[m++]=c[a+b*h],f[m++]=c[a+b*h+1]);return m}function Up(c,a){return a*Math.round(c/a)}function fbe(c,a,l,h,d,f,m){if(a==l)return m;let _,v,g=Up(c[a],d),y=Up(c[a+1],d);a+=h,f[m++]=g,f[m++]=y;do{if(_=Up(c[a],d),v=Up(c[a+1],d),(a+=h)==l)return f[m++]=_,f[m++]=v,m}while(_==g&&v==y);for(;a<l;){const b=Up(c[a],d),S=Up(c[a+1],d);if(a+=h,b==_&&S==v)continue;const T=_-g,x=v-y,E=b-g,I=S-y;T*I==x*E&&(T<0&&E<T||T==E||T>0&&E>T)&&(x<0&&I<x||x==I||x>0&&I>x)?(_=b,v=S):(f[m++]=_,f[m++]=v,g=_,y=v,_=b,v=S)}return f[m++]=_,f[m++]=v,m}function H7(c,a,l,h,d,f,m,g){for(let y=0,_=l.length;y<_;++y){const v=l[y];m=fbe(c,a,v,h,d,f,m),g.push(m),a=v}return m}function Ud(c,a,l,h,d){d=void 0!==d?d:[];let f=0;for(let m=a;m<l;m+=h)d[f++]=c.slice(m,m+h);return d.length=f,d}function kb(c,a,l,h,d){d=void 0!==d?d:[];let f=0;for(let m=0,g=l.length;m<g;++m){const y=l[m];d[f++]=Ud(c,a,y,h,d[f]),a=y}return d.length=f,d}function QP(c,a,l,h,d){d=void 0!==d?d:[];let f=0;for(let m=0,g=l.length;m<g;++m){const y=l[m];d[f++]=1===y.length&&y[0]===a?[]:kb(c,a,y,h,d[f]),a=y[y.length-1]}return d.length=f,d}function j7(c,a,l,h){let d=0,f=c[l-h],m=c[l-h+1];for(;a<l;a+=h){const g=c[a],y=c[a+1];d+=m*g-f*y,f=g,m=y}return d/2}function W7(c,a,l,h){let d=0;for(let f=0,m=l.length;f<m;++f){const g=l[f];d+=j7(c,a,g,h),a=g}return d}class Nx extends Bp{constructor(a,l){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===l||Array.isArray(a[0])?this.setCoordinates(a,l):this.setFlatCoordinates(l,a)}clone(){return new Nx(this.flatCoordinates.slice(),this.layout)}closestPointXY(a,l,h,d){return d<Pp(this.getExtent(),a,l)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($P(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ZP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,a,l,h,d))}getArea(){return j7(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return Ud(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(a){const l=[];return l.length=Ox(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,l,0),new Nx(l,"XY")}getType(){return"LinearRing"}intersectsExtent(a){return!1}setCoordinates(a,l){this.setLayout(l,a,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Px(this.flatCoordinates,0,a,this.stride),this.changed()}}const X7=Nx;class eO extends Bp{constructor(a,l){super(),this.setCoordinates(a,l)}clone(){const a=new eO(this.flatCoordinates.slice(),this.layout);return a.applyProperties(this),a}closestPointXY(a,l,h,d){const f=this.flatCoordinates,m=Np(a,l,f[0],f[1]);if(m<d){const g=this.stride;for(let y=0;y<g;++y)h[y]=f[y];return h.length=g,m}return d}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(a){return EP(this.flatCoordinates,a)}getType(){return"Point"}intersectsExtent(a){return Ab(a,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(a,l){this.setLayout(l,a,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function ube(c,a,l,h){for(let d=0,f=l.length;d<f;++d)c[a++]=l[d];return a}(this.flatCoordinates,0,a),this.changed()}}const du=eO;function gbe(c,a,l,h,d){return!o7(d,function(m){return!zp(c,a,l,h,m[0],m[1])})}function zp(c,a,l,h,d,f){let m=0,g=c[l-h],y=c[l-h+1];for(;a<l;a+=h){const _=c[a],v=c[a+1];y<=f?v>f&&(_-g)*(f-y)-(d-g)*(v-y)>0&&m++:v<=f&&(_-g)*(f-y)-(d-g)*(v-y)<0&&m--,g=_,y=v}return 0!==m}function tO(c,a,l,h,d,f){if(0===l.length||!zp(c,a,l[0],h,d,f))return!1;for(let m=1,g=l.length;m<g;++m)if(zp(c,l[m-1],l[m],h,d,f))return!1;return!0}function nO(c,a,l,h,d,f,m){let g,y,_,v,b,S,T;const x=d[f+1],E=[];for(let D=0,L=l.length;D<L;++D){const P=l[D];for(v=c[P-h],S=c[P-h+1],g=a;g<P;g+=h)b=c[g],T=c[g+1],(x<=S&&T<=x||S<=x&&x<=T)&&(_=(x-S)/(T-S)*(b-v)+v,E.push(_)),v=b,S=T}let I=NaN,M=-1/0;for(E.sort(Ip),v=E[0],g=1,y=E.length;g<y;++g){b=E[g];const D=Math.abs(b-v);D>M&&(_=(v+b)/2,tO(c,a,l,h,_,x)&&(I=_,M=D)),v=b}return isNaN(I)&&(I=d[f]),m?(m.push(I,x,M),m):[I,x,M]}function q7(c,a,l,h,d){let f=[];for(let m=0,g=l.length;m<g;++m){const y=l[m];f=nO(c,a,y,h,d,2*m,f),a=y[y.length-1]}return f}function $7(c,a,l,h,d){let f;for(a+=h;a<l;a+=h)if(f=d(c.slice(a-h,a),c.slice(a,a+h)),f)return f;return!1}function Fx(c,a,l,h,d){const f=s7([1/0,1/0,-1/0,-1/0],c,a,l,h);return!!Mr(d,f)&&(!!(Ia(d,f)||f[0]>=d[0]&&f[2]<=d[2]||f[1]>=d[1]&&f[3]<=d[3])||$7(c,a,l,h,function(m,g){return function w0e(c,a,l){let h=!1;const d=xP(c,a),f=xP(c,l);if(1===d||1===f)h=!0;else{const m=c[0],g=c[1],y=c[2],_=c[3],S=l[0],T=l[1],x=(T-a[1])/(S-a[0]);let E,I;!!(2&f)&&!(2&d)&&(E=S-(T-_)/x,h=E>=m&&E<=y),!h&&!!(4&f)&&!(4&d)&&(I=T-(S-y)*x,h=I>=g&&I<=_),!h&&!!(8&f)&&!(8&d)&&(E=S-(T-g)/x,h=E>=m&&E<=y),!h&&16&f&&!(16&d)&&(I=T-(S-m)*x,h=I>=g&&I<=_)}return h}(d,m,g)}))}function Y7(c,a,l,h,d){return!!(Fx(c,a,l,h,d)||zp(c,a,l,h,d[0],d[1])||zp(c,a,l,h,d[0],d[3])||zp(c,a,l,h,d[2],d[1])||zp(c,a,l,h,d[2],d[3]))}function Z7(c,a,l,h,d){if(!Y7(c,a,l[0],h,d))return!1;if(1===l.length)return!0;for(let f=1,m=l.length;f<m;++f)if(gbe(c,l[f-1],l[f],h,d)&&!Fx(c,l[f-1],l[f],h,d))return!1;return!0}function bbe(c,a,l,h){for(;a<l-h;){for(let d=0;d<h;++d){const f=c[a+d];c[a+d]=c[l-h+d],c[l-h+d]=f}a+=h,l-=h}}function iO(c,a,l,h){let d=0,f=c[l-h],m=c[l-h+1];for(;a<l;a+=h){const g=c[a],y=c[a+1];d+=(g-f)*(y+m),f=g,m=y}return 0===d?void 0:d>0}function K7(c,a,l,h,d){d=void 0!==d&&d;for(let f=0,m=l.length;f<m;++f){const g=l[f],y=iO(c,a,g,h);if(0===f){if(d&&y||!d&&!y)return!1}else if(d&&!y||!d&&y)return!1;a=g}return!0}function rO(c,a,l,h,d){d=void 0!==d&&d;for(let f=0,m=l.length;f<m;++f){const g=l[f],y=iO(c,a,g,h);(0===f?d&&y||!d&&!y:d&&!y||!d&&y)&&bbe(c,a,g,h),a=g}return a}function J7(c,a,l,h,d){for(let f=0,m=l.length;f<m;++f)a=rO(c,a,l[f],h,d);return a}class Gp extends Bp{constructor(a,l,h){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==l&&h?(this.setFlatCoordinates(l,a),this.ends_=h):this.setCoordinates(a,l)}appendLinearRing(a){this.flatCoordinates?Pr(this.flatCoordinates,a.getFlatCoordinates()):this.flatCoordinates=a.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const a=new Gp(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return a.applyProperties(this),a}closestPointXY(a,l,h,d){return d<Pp(this.getExtent(),a,l)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(YP(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),KP(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,a,l,h,d))}containsXY(a,l){return tO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,a,l)}getArea(){return W7(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(a){let l;return void 0!==a?(l=this.getOrientedFlatCoordinates().slice(),rO(l,0,this.ends_,this.stride,a)):l=this.flatCoordinates,kb(l,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const a=aa(this.getExtent());this.flatInteriorPoint_=nO(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,a,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new du(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(a){return a<0||this.ends_.length<=a?null:new X7(this.flatCoordinates.slice(0===a?0:this.ends_[a-1],this.ends_[a]),this.layout)}getLinearRings(){const a=this.layout,l=this.flatCoordinates,h=this.ends_,d=[];let f=0;for(let m=0,g=h.length;m<g;++m){const y=h[m],_=new X7(l.slice(f,y),a);d.push(_),f=y}return d}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const a=this.flatCoordinates;K7(a,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=a:(this.orientedFlatCoordinates_=a.slice(),this.orientedFlatCoordinates_.length=rO(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(a){const l=[],h=[];return l.length=H7(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(a),l,0,h),new Gp(l,"XY",h)}getType(){return"Polygon"}intersectsExtent(a){return Z7(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,a)}setCoordinates(a,l){this.setLayout(l,a,2),this.flatCoordinates||(this.flatCoordinates=[]);const h=JP(this.flatCoordinates,0,a,this.stride,this.ends_);this.flatCoordinates.length=0===h.length?0:h[h.length-1],this.changed()}}const Th=Gp;function sO(c){const a=c[0],l=c[1],h=c[2],d=c[3],f=[a,l,a,d,h,d,h,l,a,l];return new Gp(f,"XY",[f.length])}function kx(c,a){setTimeout(function(){c(a)},0)}function Dbe(c){return!(c.sourceCenter&&c.targetCenter&&!Mx(c.sourceCenter,c.targetCenter)||c.sourceResolution!==c.targetResolution||c.sourceRotation!==c.targetRotation)}function aO(c,a,l,h,d){const f=Math.cos(-d);let m=Math.sin(-d),g=c[0]*f-c[1]*m,y=c[1]*f+c[0]*m;return g+=(a[0]/2-l[0])*h,y+=(l[1]-a[1]/2)*h,m=-m,[g*f-y*m,y*f+g*m]}const sl=class Cbe extends bc{constructor(a){super(),a=Object.assign({},a),this.hints_=[0,0],this.animations_=[],this.projection_=zP(a.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,a.projection&&D7(),a.center&&(a.center=bh(a.center)),a.extent&&(a.extent=Sh(a.extent)),this.applyOptions_(a)}applyOptions_(a){const l=Object.assign({},a);for(const g in il)delete l[g];this.setProperties(l,!0);const h=function Ebe(c){let a,l,h,m=void 0!==c.minZoom?c.minZoom:0,g=void 0!==c.maxZoom?c.maxZoom:28;const y=void 0!==c.zoomFactor?c.zoomFactor:2,_=void 0!==c.multiWorld&&c.multiWorld,v=void 0===c.smoothResolutionConstraint||c.smoothResolutionConstraint,b=void 0!==c.showFullExtent&&c.showFullExtent,S=zP(c.projection,"EPSG:3857"),T=S.getExtent();let x=c.constrainOnlyCenter,E=c.extent;if(!_&&!E&&S.isGlobal()&&(x=!1,E=T),void 0!==c.resolutions){const I=c.resolutions;l=I[m],h=void 0!==I[g]?I[g]:I[I.length-1],a=c.constrainResolution?function K0e(c,a,l,h){return a=void 0===a||a,function(d,f,m,g){if(void 0!==d){const y=c[0],_=c[c.length-1],v=l?jP(y,l,m,h):y;if(g)return a?WP(d,v,_):Qn(d,_,v);const b=Math.min(v,d),S=Math.floor(dx(c,b,f));return c[S]>v&&S<c.length-1?c[S+1]:c[S]}}}(I,v,!x&&E,b):O7(l,h,v,!x&&E,b)}else{const M=(T?Math.max(Kn(T),gr(T)):360*_h.degrees/S.getMetersPerUnit())/256/Math.pow(2,0),D=M/Math.pow(2,28);l=c.maxResolution,void 0!==l?m=0:l=M/Math.pow(y,m),h=c.minResolution,void 0===h&&(h=void 0!==c.maxZoom?void 0!==c.maxResolution?l/Math.pow(y,g):M/Math.pow(y,g):D),g=m+Math.floor(Math.log(l/h)/Math.log(y)),h=l/Math.pow(y,g-m),a=c.constrainResolution?function J0e(c,a,l,h,d,f){return h=void 0===h||h,l=void 0!==l?l:0,function(m,g,y,_){if(void 0!==m){const v=d?jP(a,d,y,f):a;if(_)return h?WP(m,v,l):Qn(m,l,v);const b=1e-9,S=Math.ceil(Math.log(a/v)/Math.log(c)-b),T=-g*(.5-b)+.5,x=Math.min(v,m),E=Math.floor(Math.log(a/x)/Math.log(c)+T),I=Math.max(S,E);return Qn(a/Math.pow(c,I),l,v)}}}(y,l,h,v,!x&&E,b):O7(l,h,v,!x&&E,b)}return{constraint:a,maxResolution:l,minResolution:h,minZoom:m,zoomFactor:y}}(a);this.maxResolution_=h.maxResolution,this.minResolution_=h.minResolution,this.zoomFactor_=h.zoomFactor,this.resolutions_=a.resolutions,this.padding_=a.padding,this.minZoom_=h.minZoom;const d=function xbe(c){if(void 0!==c.extent)return P7(c.extent,c.constrainOnlyCenter,void 0===c.smoothExtentConstraint||c.smoothExtentConstraint);const a=zP(c.projection,"EPSG:3857");if(!0!==c.multiWorld&&a.isGlobal()){const l=a.getExtent().slice();return l[0]=-1/0,l[2]=1/0,P7(l,!1,!1)}return Z0e}(a),f=h.constraint,m=function Mbe(c){if(void 0===c.enableRotation||c.enableRotation){const l=c.constrainRotation;return void 0===l||!0===l?function ebe(c){return c=c||Rb(5),function(a,l){return l?a:void 0!==a?Math.abs(a)<=c?0:a:void 0}}():!1===l?N7:"number"==typeof l?function Q0e(c){const a=2*Math.PI/c;return function(l,h){return h?l:void 0!==l?l=Math.floor(l/a+.5)*a:void 0}}(l):N7}return XP}(a);this.constraints_={center:d,resolution:f,rotation:m},this.setRotation(void 0!==a.rotation?a.rotation:0),this.setCenterInternal(void 0!==a.center?a.center:null),void 0!==a.resolution?this.setResolution(a.resolution):void 0!==a.zoom&&this.setZoom(a.zoom)}get padding(){return this.padding_}set padding(a){let l=this.padding_;this.padding_=a;const h=this.getCenterInternal();if(h){const d=a||[0,0,0,0];l=l||[0,0,0,0];const f=this.getResolution();this.setCenterInternal([h[0]+f/2*(d[3]-l[3]+l[1]-d[1]),h[1]-f/2*(d[0]-l[0]+l[2]-d[2])])}}getUpdatedOptions_(a){const l=this.getProperties();return void 0!==l.resolution?l.resolution=this.getResolution():l.zoom=this.getZoom(),l.center=this.getCenterInternal(),l.rotation=this.getRotation(),Object.assign({},l,a)}animate(a){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const l=new Array(arguments.length);for(let h=0;h<l.length;++h){let d=arguments[h];d.center&&(d=Object.assign({},d),d.center=bh(d.center,this.getProjection())),d.anchor&&(d=Object.assign({},d),d.anchor=bh(d.anchor,this.getProjection())),l[h]=d}this.animateInternal.apply(this,l)}animateInternal(a){let h,l=arguments.length;l>1&&"function"==typeof arguments[l-1]&&(h=arguments[l-1],--l);let d=0;for(;d<l&&!this.isDef();++d){const v=arguments[d];v.center&&this.setCenterInternal(v.center),void 0!==v.zoom?this.setZoom(v.zoom):v.resolution&&this.setResolution(v.resolution),void 0!==v.rotation&&this.setRotation(v.rotation)}if(d===l)return void(h&&kx(h,!0));let f=Date.now(),m=this.targetCenter_.slice(),g=this.targetResolution_,y=this.targetRotation_;const _=[];for(;d<l;++d){const v=arguments[d],b={start:f,complete:!1,anchor:v.anchor,duration:void 0!==v.duration?v.duration:1e3,easing:v.easing||qP,callback:h};if(v.center&&(b.sourceCenter=m,b.targetCenter=v.center.slice(),m=b.targetCenter),void 0!==v.zoom?(b.sourceResolution=g,b.targetResolution=this.getResolutionForZoom(v.zoom),g=b.targetResolution):v.resolution&&(b.sourceResolution=g,b.targetResolution=v.resolution,g=b.targetResolution),void 0!==v.rotation){b.sourceRotation=y;const S=kd(v.rotation-y+Math.PI,2*Math.PI)-Math.PI;b.targetRotation=y+S,y=b.targetRotation}Dbe(b)?b.complete=!0:f+=b.duration,_.push(b)}this.animations_.push(_),this.setHint(0,1),this.updateAnimations_()}getAnimating(){return this.hints_[0]>0}getInteracting(){return this.hints_[1]>0}cancelAnimations(){let a;this.setHint(0,-this.hints_[0]);for(let l=0,h=this.animations_.length;l<h;++l){const d=this.animations_[l];if(d[0].callback&&kx(d[0].callback,!1),!a)for(let f=0,m=d.length;f<m;++f){const g=d[f];if(!g.complete){a=g.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=a,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const a=Date.now();let l=!1;for(let h=this.animations_.length-1;h>=0;--h){const d=this.animations_[h];let f=!0;for(let m=0,g=d.length;m<g;++m){const y=d[m];if(y.complete)continue;const _=a-y.start;let v=y.duration>0?_/y.duration:1;v>=1?(y.complete=!0,v=1):f=!1;const b=y.easing(v);if(y.sourceCenter){const S=y.sourceCenter[0],T=y.sourceCenter[1],x=y.targetCenter[0],E=y.targetCenter[1];this.nextCenter_=y.targetCenter,this.targetCenter_=[S+b*(x-S),T+b*(E-T)]}if(y.sourceResolution&&y.targetResolution){const S=1===b?y.targetResolution:y.sourceResolution+b*(y.targetResolution-y.sourceResolution);if(y.anchor){const T=this.getViewportSize_(this.getRotation()),x=this.constraints_.resolution(S,0,T,!0);this.targetCenter_=this.calculateCenterZoom(x,y.anchor)}this.nextResolution_=y.targetResolution,this.targetResolution_=S,this.applyTargetState_(!0)}if(void 0!==y.sourceRotation&&void 0!==y.targetRotation){const S=1===b?kd(y.targetRotation+Math.PI,2*Math.PI)-Math.PI:y.sourceRotation+b*(y.targetRotation-y.sourceRotation);if(y.anchor){const T=this.constraints_.rotation(S,!0);this.targetCenter_=this.calculateCenterRotate(T,y.anchor)}this.nextRotation_=y.targetRotation,this.targetRotation_=S}if(this.applyTargetState_(!0),l=!0,!y.complete)break}if(f){this.animations_[h]=null,this.setHint(0,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const m=d[0].callback;m&&kx(m,!0)}}this.animations_=this.animations_.filter(Boolean),l&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(a,l){let h;const d=this.getCenterInternal();return void 0!==d&&(h=[d[0]-l[0],d[1]-l[1]],OP(h,a-this.getRotation()),T7(h,l)),h}calculateCenterZoom(a,l){let h;const d=this.getCenterInternal(),f=this.getResolution();return void 0!==d&&void 0!==f&&(h=[l[0]-a*(l[0]-d[0])/f,l[1]-a*(l[1]-d[1])/f]),h}getViewportSize_(a){const l=this.viewportSize_;if(a){const h=l[0],d=l[1];return[Math.abs(h*Math.cos(a))+Math.abs(d*Math.sin(a)),Math.abs(h*Math.sin(a))+Math.abs(d*Math.cos(a))]}return l}setViewportSize(a){this.viewportSize_=Array.isArray(a)?a.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const a=this.getCenterInternal();return a&&GP(a,this.getProjection())}getCenterInternal(){return this.get(il.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(a){return void 0!==a?(a[0]=this.hints_[0],a[1]=this.hints_[1],a):this.hints_.slice()}calculateExtent(a){return HP(this.calculateExtentInternal(a),this.getProjection())}calculateExtentInternal(a){a=a||this.getViewportSizeMinusPadding_();const l=this.getCenterInternal();En(l,1);const h=this.getResolution();En(void 0!==h,2);const d=this.getRotation();return En(void 0!==d,3),Iy(l,h,d,a)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(a){this.applyOptions_(this.getUpdatedOptions_({maxZoom:a}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(a){this.applyOptions_(this.getUpdatedOptions_({minZoom:a}))}setConstrainResolution(a){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:a}))}getProjection(){return this.projection_}getResolution(){return this.get(il.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(a,l){return this.getResolutionForExtentInternal(Sh(a,this.getProjection()),l)}getResolutionForExtentInternal(a,l){l=l||this.getViewportSizeMinusPadding_();const h=Kn(a)/l[0],d=gr(a)/l[1];return Math.max(h,d)}getResolutionForValueFunction(a){a=a||2;const l=this.getConstrainedResolution(this.maxResolution_),d=Math.log(l/this.minResolution_)/Math.log(a);return function(f){return l/Math.pow(a,f*d)}}getRotation(){return this.get(il.ROTATION)}getValueForResolutionFunction(a){const l=Math.log(a||2),h=this.getConstrainedResolution(this.maxResolution_),f=Math.log(h/this.minResolution_)/l;return function(m){return Math.log(h/m)/l/f}}getViewportSizeMinusPadding_(a){let l=this.getViewportSize_(a);const h=this.padding_;return h&&(l=[l[0]-h[1]-h[3],l[1]-h[0]-h[2]]),l}getState(){const a=this.getProjection(),l=this.getResolution(),h=this.getRotation();let d=this.getCenterInternal();const f=this.padding_;if(f){const m=this.getViewportSizeMinusPadding_();d=aO(d,this.getViewportSize_(),[m[0]/2+f[3],m[1]/2+f[0]],l,h)}return{center:d.slice(0),projection:void 0!==a?a:null,resolution:l,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:h,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let a;const l=this.getResolution();return void 0!==l&&(a=this.getZoomForResolution(l)),a}getZoomForResolution(a){let h,d,l=this.minZoom_||0;if(this.resolutions_){const f=dx(this.resolutions_,a,1);l=f,h=this.resolutions_[f],d=f==this.resolutions_.length-1?2:h/this.resolutions_[f+1]}else h=this.maxResolution_,d=this.zoomFactor_;return l+Math.log(h/a)/Math.log(d)}getResolutionForZoom(a){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const l=Qn(Math.floor(a),0,this.resolutions_.length-2);return this.resolutions_[l]/Math.pow(this.resolutions_[l]/this.resolutions_[l+1],Qn(a-l,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,a-this.minZoom_)}fit(a,l){let h;if(En(Array.isArray(a)||"function"==typeof a.getSimplifiedGeometry,24),Array.isArray(a))En(!Ry(a),25),h=sO(Sh(a,this.getProjection()));else if("Circle"===a.getType()){const d=Sh(a.getExtent(),this.getProjection());h=sO(d),h.rotate(this.getRotation(),aa(d))}else{const d=Fb();h=d?a.clone().transform(d,this.getProjection()):a}this.fitInternal(h,l)}rotatedExtentForGeometry(a){const l=this.getRotation(),h=Math.cos(l),d=Math.sin(-l),f=a.getFlatCoordinates(),m=a.getStride();let g=1/0,y=1/0,_=-1/0,v=-1/0;for(let b=0,S=f.length;b<S;b+=m){const T=f[b]*h-f[b+1]*d,x=f[b]*d+f[b+1]*h;g=Math.min(g,T),y=Math.min(y,x),_=Math.max(_,T),v=Math.max(v,x)}return[g,y,_,v]}fitInternal(a,l){let h=(l=l||{}).size;h||(h=this.getViewportSizeMinusPadding_());const d=void 0!==l.padding?l.padding:[0,0,0,0],f=void 0!==l.nearest&&l.nearest;let m;m=void 0!==l.minResolution?l.minResolution:void 0!==l.maxZoom?this.getResolutionForZoom(l.maxZoom):0;const g=this.rotatedExtentForGeometry(a);let y=this.getResolutionForExtentInternal(g,[h[0]-d[1]-d[3],h[1]-d[0]-d[2]]);y=isNaN(y)?m:Math.max(y,m),y=this.getConstrainedResolution(y,f?0:1);const _=this.getRotation(),v=Math.sin(_),b=Math.cos(_),S=aa(g);S[0]+=(d[1]-d[3])/2*y,S[1]+=(d[0]-d[2])/2*y;const E=this.getConstrainedCenter([S[0]*b-S[1]*v,S[1]*b+S[0]*v],y),I=l.callback?l.callback:Ey;void 0!==l.duration?this.animateInternal({resolution:y,center:E,duration:l.duration,easing:l.easing},I):(this.targetResolution_=y,this.targetCenter_=E,this.applyTargetState_(!1,!0),kx(I,!0))}centerOn(a,l,h){this.centerOnInternal(bh(a,this.getProjection()),l,h)}centerOnInternal(a,l,h){this.setCenterInternal(aO(a,l,h,this.getResolution(),this.getRotation()))}calculateCenterShift(a,l,h,d){let f;const m=this.padding_;if(m&&a){const g=this.getViewportSizeMinusPadding_(-h),y=aO(a,d,[g[0]/2+m[3],g[1]/2+m[0]],l,h);f=[a[0]-y[0],a[1]-y[1]]}return f}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(a){const l=GP(this.targetCenter_,this.getProjection());this.setCenter([l[0]+a[0],l[1]+a[1]])}adjustCenterInternal(a){const l=this.targetCenter_;this.setCenterInternal([l[0]+a[0],l[1]+a[1]])}adjustResolution(a,l){l=l&&bh(l,this.getProjection()),this.adjustResolutionInternal(a,l)}adjustResolutionInternal(a,l){const h=this.getAnimating()||this.getInteracting(),d=this.getViewportSize_(this.getRotation()),f=this.constraints_.resolution(this.targetResolution_*a,0,d,h);l&&(this.targetCenter_=this.calculateCenterZoom(f,l)),this.targetResolution_*=a,this.applyTargetState_()}adjustZoom(a,l){this.adjustResolution(Math.pow(this.zoomFactor_,-a),l)}adjustRotation(a,l){l&&(l=bh(l,this.getProjection())),this.adjustRotationInternal(a,l)}adjustRotationInternal(a,l){const h=this.getAnimating()||this.getInteracting(),d=this.constraints_.rotation(this.targetRotation_+a,h);l&&(this.targetCenter_=this.calculateCenterRotate(d,l)),this.targetRotation_+=a,this.applyTargetState_()}setCenter(a){this.setCenterInternal(a&&bh(a,this.getProjection()))}setCenterInternal(a){this.targetCenter_=a,this.applyTargetState_()}setHint(a,l){return this.hints_[a]+=l,this.changed(),this.hints_[a]}setResolution(a){this.targetResolution_=a,this.applyTargetState_()}setRotation(a){this.targetRotation_=a,this.applyTargetState_()}setZoom(a){this.setResolution(this.getResolutionForZoom(a))}applyTargetState_(a,l){const h=this.getAnimating()||this.getInteracting()||l,d=this.constraints_.rotation(this.targetRotation_,h),f=this.getViewportSize_(d),m=this.constraints_.resolution(this.targetResolution_,0,f,h),g=this.constraints_.center(this.targetCenter_,m,f,h,this.calculateCenterShift(this.targetCenter_,m,d,f));this.get(il.ROTATION)!==d&&this.set(il.ROTATION,d),this.get(il.RESOLUTION)!==m&&(this.set(il.RESOLUTION,m),this.set("zoom",this.getZoom(),!0)),(!g||!this.get(il.CENTER)||!Mx(this.get(il.CENTER),g))&&this.set(il.CENTER,g),this.getAnimating()&&!a&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(a,l,h){a=void 0!==a?a:200;const d=l||0,f=this.constraints_.rotation(this.targetRotation_),m=this.getViewportSize_(f),g=this.constraints_.resolution(this.targetResolution_,d,m),y=this.constraints_.center(this.targetCenter_,g,m,!1,this.calculateCenterShift(this.targetCenter_,g,f,m));if(0===a&&!this.cancelAnchor_)return this.targetResolution_=g,this.targetRotation_=f,this.targetCenter_=y,void this.applyTargetState_();h=h||(0===a?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==g||this.getRotation()!==f||!this.getCenterInternal()||!Mx(this.getCenterInternal(),y))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:f,center:y,resolution:g,duration:a,easing:Vp,anchor:h}))}beginInteraction(){this.resolveConstraints(0),this.setHint(1,1)}endInteraction(a,l,h){h=h&&bh(h,this.getProjection()),this.endInteractionInternal(a,l,h)}endInteractionInternal(a,l,h){!this.getInteracting()||(this.setHint(1,-1),this.resolveConstraints(a,l,h))}getConstrainedCenter(a,l){const h=this.getViewportSize_(this.getRotation());return this.constraints_.center(a,l||this.getResolution(),h)}getConstrainedZoom(a,l){const h=this.getResolutionForZoom(a);return this.getZoomForResolution(this.getConstrainedResolution(h,l))}getConstrainedResolution(a,l){l=l||0;const h=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(a,l,h)}};function lO(c,a){if(!c.visible)return!1;const l=a.resolution;if(l<c.minResolution||l>=c.maxResolution)return!1;const h=a.zoom;return h>c.minZoom&&h<=c.maxZoom}const lo=class Abe extends LP{constructor(a){const l=Object.assign({},a);delete l.source,super(l),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,a.render&&(this.render=a.render),a.map&&this.setMap(a.map),this.addChangeListener("source",this.handleSourcePropertyChange_),this.setSource(a.source?a.source:null)}getLayersArray(a){return(a=a||[]).push(this),a}getLayerStatesArray(a){return(a=a||[]).push(this.getLayerState()),a}getSource(){return this.get("source")||null}getRenderSource(){return this.getSource()}getSourceState(){const a=this.getSource();return a?a.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(or(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const a=this.getSource();a&&(this.sourceChangeKey_=Zn(a,"change",this.handleSourceChange_,this),"ready"===a.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(a){return this.renderer_?this.renderer_.getFeatures(a):Promise.resolve([])}getData(a){return this.renderer_&&this.rendered?this.renderer_.getData(a):null}isVisible(a){let l;l=a instanceof sl?{viewState:a.getState(),extent:a.calculateExtent()}:a;const h=this.getExtent();return this.getVisible()&&lO(this.getLayerState(),l.viewState)&&(!h||Mr(h,l.extent))}getAttributions(a){if(!this.isVisible(a))return[];let l;const h=this.getSource();if(h&&(l=h.getAttributions()),!l)return[];let f=l(a instanceof sl?a.getViewStateAndExtent():a);return Array.isArray(f)||(f=[f]),f}render(a,l){const h=this.getRenderer();if(h.prepareFrame(a))return this.rendered=!0,h.renderFrame(a,l)}unrender(){this.rendered=!1}setMapInternal(a){a||this.unrender(),this.set("map",a)}getMapInternal(){return this.get("map")}setMap(a){this.mapPrecomposeKey_&&(or(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),a||this.changed(),this.mapRenderKey_&&(or(this.mapRenderKey_),this.mapRenderKey_=null),a&&(this.mapPrecomposeKey_=Zn(a,"precompose",function(l){const d=l.frameState.layerStatesArray,f=this.getLayerState(!1);En(!d.some(function(m){return m.layer===f.layer}),67),d.push(f)},this),this.mapRenderKey_=Zn(this,"change",a.render,a),this.changed())}setSource(a){this.set("source",a)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function Rbe(c,a){Tx.expire()}const Lbe=class Ibe extends wb{constructor(a){super(),this.map_=a}dispatchRenderEvent(a,l){Rn()}calculateMatrices2D(a){const l=a.viewState,h=a.coordinateToPixelTransform,d=a.pixelToCoordinateTransform;sa(h,a.size[0]/2,a.size[1]/2,1/l.resolution,-1/l.resolution,-l.rotation,-l.center[0],-l.center[1]),Dy(d,h)}forEachFeatureAtCoordinate(a,l,h,d,f,m,g,y){let _;const v=l.viewState;function b(P,F,B,G){return f.call(m,F,P?B:null,G)}const S=v.projection,T=Dx(a.slice(),S),x=[[0,0]];if(S.canWrapX()&&d){const F=Kn(S.getExtent());x.push([-F,0],[F,0])}const E=l.layerStatesArray,I=E.length,M=[],D=[];for(let P=0;P<x.length;P++)for(let F=I-1;F>=0;--F){const B=E[F],G=B.layer;if(G.hasRenderer()&&lO(B,v)&&g.call(y,G)){const $=G.getRenderer(),se=G.getSource();if($&&se){const ie=se.getWrapX()?T:a,j=b.bind(null,B.managed);D[0]=ie[0]+x[P][0],D[1]=ie[1]+x[P][1],_=$.forEachFeatureAtCoordinate(D,l,h,j,M)}if(_)return _}}if(0===M.length)return;const L=1/M.length;return M.forEach((P,F)=>P.distanceSq+=F*L),M.sort((P,F)=>P.distanceSq-F.distanceSq),M.some(P=>_=P.callback(P.feature,P.layer,P.geometry)),_}hasFeatureAtCoordinate(a,l,h,d,f,m){return void 0!==this.forEachFeatureAtCoordinate(a,l,h,d,Cb,this,f,m)}getMap(){return this.map_}renderFrame(a){Rn()}scheduleExpireIconCache(a){Tx.canExpireCache()&&a.postRenderFunctions.push(Rbe)}},Vb=class Pbe extends vc{constructor(a,l,h,d){super(a),this.inversePixelTransform=l,this.frameState=h,this.context=d}},Vx="ol-hidden",Hp="ol-unselectable",Q7="ol-unsupported",Bb="ol-control",Bx="ol-collapsed",Nbe=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),ej=["style","variant","weight","size","lineHeight","family"],tj=function(c){const a=c.match(Nbe);if(!a)return null;const l={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let h=0,d=ej.length;h<d;++h){const f=a[h+1];void 0!==f&&(l[ej[h]]=f)}return l.families=l.family.split(/,\s?/),l};function Yr(c,a,l,h){let d;return d=l&&l.length?l.shift():SP?new OffscreenCanvas(c||300,a||300):document.createElement("canvas"),c&&(d.width=c),a&&(d.height=a),d.getContext("2d",h)}function Ub(c){const a=c.canvas;a.width=1,a.height=1,c.clearRect(0,0,1,1)}function Fbe(c){let a=c.offsetWidth;const l=getComputedStyle(c);return a+=parseInt(l.marginLeft,10)+parseInt(l.marginRight,10),a}function kbe(c){let a=c.offsetHeight;const l=getComputedStyle(c);return a+=parseInt(l.marginTop,10)+parseInt(l.marginBottom,10),a}function Fy(c,a){const l=a.parentNode;l&&l.replaceChild(c,a)}function Ux(c){return c&&c.parentNode?c.parentNode.removeChild(c):null}function nj(c){for(;c.lastChild;)c.removeChild(c.lastChild)}function cO(c,a){const l=c.childNodes;for(let h=0;;++h){const d=l[h],f=a[h];if(!d&&!f)break;if(d!==f){if(!d){c.appendChild(f);continue}if(!f){c.removeChild(d),--h;continue}c.insertBefore(f,d)}}}const ij="10px sans-serif",wh="#000",zx="round",zb=[],ky="round",jb="#000",Wb="center",Gx="middle",jp=[0,0,0,0],fu=new bc;let uO,Vy=null;const hO={},rj=function(){const a="32px ",l=["monospace","serif"],h=l.length,d="wmytzilWMYTZIL@#/&?$%10\uf013";let f,m;function g(_,v,b){let S=!0;for(let T=0;T<h;++T){const x=l[T];if(m=Hx(_+" "+v+" "+a+x,d),b!=x){const E=Hx(_+" "+v+" "+a+b+","+x,d);S=S&&E!=m}}return!!S}function y(){let _=!0;const v=fu.getKeys();for(let b=0,S=v.length;b<S;++b){const T=v[b];fu.get(T)<100&&(g.apply(this,T.split("\n"))?(My(hO),Vy=null,uO=void 0,fu.set(T,100)):(fu.set(T,fu.get(T)+1,!0),_=!1))}_&&(clearInterval(f),f=void 0)}return function(_){const v=tj(_);if(!v)return;const b=v.families;for(let S=0,T=b.length;S<T;++S){const x=b[S],E=v.style+"\n"+v.weight+"\n"+x;void 0===fu.get(E)&&(fu.set(E,100,!0),g(v.style,v.weight,x)||(fu.set(E,0,!0),void 0===f&&(f=setInterval(y,32))))}}}(),Vbe=function(){let c;return function(a){let l=hO[a];if(null==l){if(SP){const h=tj(a),d=sj(a,"\u017dg");l=(isNaN(Number(h.lineHeight))?1.2:Number(h.lineHeight))*(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent)}else c||(c=document.createElement("div"),c.innerHTML="M",c.style.minHeight="0",c.style.maxHeight="none",c.style.height="auto",c.style.padding="0",c.style.border="none",c.style.position="absolute",c.style.display="block",c.style.left="-99999px"),c.style.font=a,document.body.appendChild(c),l=c.offsetHeight,document.body.removeChild(c);hO[a]=l}return l}}();function sj(c,a){return Vy||(Vy=Yr(1,1)),c!=uO&&(Vy.font=c,uO=Vy.font),Vy.measureText(a)}function Hx(c,a){return sj(c,a).width}function oj(c,a,l){if(a in l)return l[a];const h=a.split("\n").reduce((d,f)=>Math.max(d,Hx(c,f)),0);return l[a]=h,h}const Hbe=class Gbe extends Lbe{constructor(a){super(a),this.fontChangeListenerKey_=Zn(fu,"propertychange",a.redrawText.bind(a)),this.element_=document.createElement("div");const l=this.element_.style;l.position="absolute",l.width="100%",l.height="100%",l.zIndex="0",this.element_.className=Hp+" ol-layers";const h=a.getViewport();h.insertBefore(this.element_,h.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(a,l){const h=this.getMap();if(h.hasListener(a)){const d=new Vb(a,void 0,l);h.dispatchEvent(d)}}disposeInternal(){or(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(a){if(!a)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(a),this.dispatchRenderEvent("precompose",a);const l=a.layerStatesArray.sort(function(m,g){return m.zIndex-g.zIndex}),h=a.viewState;this.children_.length=0;const d=[];let f=null;for(let m=0,g=l.length;m<g;++m){const y=l[m];a.layerIndex=m;const _=y.layer,v=_.getSourceState();if(!lO(y,h)||"ready"!=v&&"undefined"!=v){_.unrender();continue}const b=_.render(a,f);!b||(b!==f&&(this.children_.push(b),f=b),"getDeclutter"in _&&d.push(_))}for(let m=d.length-1;m>=0;--m)d[m].renderDeclutter(a);cO(this.element_,this.children_),this.dispatchRenderEvent("postcompose",a),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(a)}};class zd extends vc{constructor(a,l){super(a),this.layer=l}}class fO extends LP{constructor(a){a=a||{};const l=Object.assign({},a);delete l.layers;let h=a.layers;super(l),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),h?Array.isArray(h)?h=new bo(h.slice(),{unique:!0}):En("function"==typeof h.getArray,43):h=new bo(void 0,{unique:!0}),this.setLayers(h)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(or),this.layersListenerKeys_.length=0;const a=this.getLayers();this.layersListenerKeys_.push(Zn(a,"add",this.handleLayersAdd_,this),Zn(a,"remove",this.handleLayersRemove_,this));for(const h in this.listenerKeys_)this.listenerKeys_[h].forEach(or);My(this.listenerKeys_);const l=a.getArray();for(let h=0,d=l.length;h<d;h++){const f=l[h];this.registerLayerListeners_(f),this.dispatchEvent(new zd("addlayer",f))}this.changed()}registerLayerListeners_(a){const l=[Zn(a,"propertychange",this.handleLayerChange_,this),Zn(a,"change",this.handleLayerChange_,this)];a instanceof fO&&l.push(Zn(a,"addlayer",this.handleLayerGroupAdd_,this),Zn(a,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[an(a)]=l}handleLayerGroupAdd_(a){this.dispatchEvent(new zd("addlayer",a.layer))}handleLayerGroupRemove_(a){this.dispatchEvent(new zd("removelayer",a.layer))}handleLayersAdd_(a){const l=a.element;this.registerLayerListeners_(l),this.dispatchEvent(new zd("addlayer",l)),this.changed()}handleLayersRemove_(a){const l=a.element,h=an(l);this.listenerKeys_[h].forEach(or),delete this.listenerKeys_[h],this.dispatchEvent(new zd("removelayer",l)),this.changed()}getLayers(){return this.get("layers")}setLayers(a){const l=this.getLayers();if(l){const h=l.getArray();for(let d=0,f=h.length;d<f;++d)this.dispatchEvent(new zd("removelayer",h[d]))}this.set("layers",a)}getLayersArray(a){return a=void 0!==a?a:[],this.getLayers().forEach(function(l){l.getLayersArray(a)}),a}getLayerStatesArray(a){const l=void 0!==a?a:[],h=l.length;this.getLayers().forEach(function(m){m.getLayerStatesArray(l)});const d=this.getLayerState();let f=d.zIndex;!a&&void 0===d.zIndex&&(f=0);for(let m=h,g=l.length;m<g;m++){const y=l[m];y.opacity*=d.opacity,y.visible=y.visible&&d.visible,y.maxResolution=Math.min(y.maxResolution,d.maxResolution),y.minResolution=Math.max(y.minResolution,d.minResolution),y.minZoom=Math.max(y.minZoom,d.minZoom),y.maxZoom=Math.min(y.maxZoom,d.maxZoom),void 0!==d.extent&&(y.extent=void 0!==y.extent?Sc(y.extent,d.extent):d.extent),void 0===y.zIndex&&(y.zIndex=f)}return l}getSourceState(){return"ready"}}const Dr=fO,By=class jbe extends vc{constructor(a,l,h){super(a),this.map=l,this.frameState=void 0!==h?h:null}},Gd=class Wbe extends By{constructor(a,l,h,d,f,m){super(a,l,f),this.originalEvent=h,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==d&&d,this.activePointers=m}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(a){this.pixel_=a}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(a){this.coordinate_=a}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},cs={SINGLECLICK:"singleclick",CLICK:"click",DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},qbe=class Xbe extends xb{constructor(a,l){super(a),this.map_=a,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===l?1:l,this.down_=null;const h=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=h,this.pointerdownListenerKey_=Zn(h,"pointerdown",this.handlePointerDown_,this),this.relayedListenerKey_=Zn(h,"pointermove",this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener("touchmove",this.boundHandleTouchMove_,!!t7&&{passive:!1})}emulateClick_(a){let l=new Gd(cs.CLICK,this.map_,a);this.dispatchEvent(l),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,l=new Gd(cs.DBLCLICK,this.map_,a),this.dispatchEvent(l)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const h=new Gd(cs.SINGLECLICK,this.map_,a);this.dispatchEvent(h)},250)}updateActivePointers_(a){const l=a,h=l.pointerId;if(l.type==cs.POINTERUP||l.type==cs.POINTERCANCEL){delete this.trackedTouches_[h];for(const d in this.trackedTouches_)if(this.trackedTouches_[d].target!==l.target){delete this.trackedTouches_[d];break}}else(l.type==cs.POINTERDOWN||l.type==cs.POINTERMOVE)&&(this.trackedTouches_[h]=l);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(a){this.updateActivePointers_(a);const l=new Gd(cs.POINTERUP,this.map_,a,void 0,void 0,this.activePointers_);this.dispatchEvent(l),this.emulateClicks_&&!l.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(a)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(or),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(a){return 0===a.button}handlePointerDown_(a){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(a);const l=new Gd(cs.POINTERDOWN,this.map_,a,void 0,void 0,this.activePointers_);if(this.dispatchEvent(l),this.down_=new PointerEvent(a.type,a),Object.defineProperty(this.down_,"target",{writable:!1,value:a.target}),0===this.dragListenerKeys_.length){const h=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Zn(h,cs.POINTERMOVE,this.handlePointerMove_,this),Zn(h,cs.POINTERUP,this.handlePointerUp_,this),Zn(this.element_,cs.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==h&&this.dragListenerKeys_.push(Zn(this.element_.getRootNode(),cs.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(a){if(this.isMoving_(a)){this.updateActivePointers_(a),this.dragging_=!0;const l=new Gd(cs.POINTERDRAG,this.map_,a,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(l)}}relayMoveEvent_(a){this.originalPointerMoveEvent_=a;const l=!(!this.down_||!this.isMoving_(a));this.dispatchEvent(new Gd(cs.POINTERMOVE,this.map_,a,l))}handleTouchMove_(a){const l=this.originalPointerMoveEvent_;(!l||l.defaultPrevented)&&("boolean"!=typeof a.cancelable||!0===a.cancelable)&&a.preventDefault()}isMoving_(a){return this.dragging_||Math.abs(a.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(a.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(or(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener("touchmove",this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(or(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(or),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},jx=1/0,aj=class Zbe extends class $be{constructor(a,l){this.priorityFunction_=a,this.keyFunction_=l,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,My(this.queuedElements_)}dequeue(){const a=this.elements_,l=this.priorities_,h=a[0];1==a.length?(a.length=0,l.length=0):(a[0]=a.pop(),l[0]=l.pop(),this.siftUp_(0));const d=this.keyFunction_(h);return delete this.queuedElements_[d],h}enqueue(a){En(!(this.keyFunction_(a)in this.queuedElements_),31);const l=this.priorityFunction_(a);return l!=jx&&(this.elements_.push(a),this.priorities_.push(l),this.queuedElements_[this.keyFunction_(a)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(a){return 2*a+1}getRightChildIndex_(a){return 2*a+2}getParentIndex_(a){return a-1>>1}heapify_(){let a;for(a=(this.elements_.length>>1)-1;a>=0;a--)this.siftUp_(a)}isEmpty(){return 0===this.elements_.length}isKeyQueued(a){return a in this.queuedElements_}isQueued(a){return this.isKeyQueued(this.keyFunction_(a))}siftUp_(a){const l=this.elements_,h=this.priorities_,d=l.length,f=l[a],m=h[a],g=a;for(;a<d>>1;){const y=this.getLeftChildIndex_(a),_=this.getRightChildIndex_(a),v=_<d&&h[_]<h[y]?_:y;l[a]=l[v],h[a]=h[v],a=v}l[a]=f,h[a]=m,this.siftDown_(g,a)}siftDown_(a,l){const h=this.elements_,d=this.priorities_,f=h[l],m=d[l];for(;l>a;){const g=this.getParentIndex_(l);if(!(d[g]>m))break;h[l]=h[g],d[l]=d[g],l=g}h[l]=f,d[l]=m}reprioritize(){const a=this.priorityFunction_,l=this.elements_,h=this.priorities_;let d=0;const f=l.length;let m,g,y;for(g=0;g<f;++g)m=l[g],y=a(m),y==jx?delete this.queuedElements_[this.keyFunction_(m)]:(h[d]=y,l[d++]=m);l.length=d,h.length=d,this.heapify_()}}{constructor(a,l){super(function(h){return a.apply(null,h)},function(h){return h[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=l,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(a){const l=super.enqueue(a);return l&&a[0].addEventListener("change",this.boundHandleTileChange_),l}getTilesLoading(){return this.tilesLoading_}handleTileChange(a){const l=a.target,h=l.getState();if(2===h||3===h||4===h){3!==h&&l.removeEventListener("change",this.boundHandleTileChange_);const d=l.getKey();d in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[d],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(a,l){let d,f,m,h=0;for(;this.tilesLoading_<a&&h<l&&this.getCount()>0;)f=this.dequeue()[0],m=f.getKey(),d=f.getState(),0===d&&!(m in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[m]=!0,++this.tilesLoading_,++h,f.load())}},Hd=class Jbe extends bc{constructor(a){super();const l=a.element;l&&!a.target&&!l.style.pointerEvents&&(l.style.pointerEvents="auto"),this.element=l||null,this.target_=null,this.map_=null,this.listenerKeys=[],a.render&&(this.render=a.render),a.target&&this.setTarget(a.target)}disposeInternal(){Ux(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(a){this.map_&&Ux(this.element);for(let l=0,h=this.listenerKeys.length;l<h;++l)or(this.listenerKeys[l]);this.listenerKeys.length=0,this.map_=a,a&&((this.target_?this.target_:a.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Ey&&this.listenerKeys.push(Zn(a,"postrender",this.render,this)),a.render())}render(a){}setTarget(a){this.target_="string"==typeof a?document.getElementById(a):a}},lj=class Qbe extends Hd{constructor(a){a=a||{},super({element:document.createElement("div"),render:a.render,target:a.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===a.collapsed||a.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==a.collapsible,this.collapsible_=void 0===a.collapsible||a.collapsible,this.collapsible_||(this.collapsed_=!1);const l=void 0!==a.className?a.className:"ol-attribution",h=void 0!==a.tipLabel?a.tipLabel:"Attributions",d=void 0!==a.expandClassName?a.expandClassName:l+"-expand",f=void 0!==a.collapseLabel?a.collapseLabel:"\u203a",m=void 0!==a.collapseClassName?a.collapseClassName:l+"-collapse";"string"==typeof f?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=f,this.collapseLabel_.className=m):this.collapseLabel_=f;const g=void 0!==a.label?a.label:"i";"string"==typeof g?(this.label_=document.createElement("span"),this.label_.textContent=g,this.label_.className=d):this.label_=g;const y=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=h,this.toggleButton_.appendChild(y),this.toggleButton_.addEventListener("click",this.handleClick_.bind(this),!1);const v=this.element;v.className=l+" "+Hp+" "+Bb+(this.collapsed_&&this.collapsible_?" "+Bx:"")+(this.collapsible_?"":" ol-uncollapsible"),v.appendChild(this.toggleButton_),v.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(a){const l=Array.from(new Set(this.getMap().getAllLayers().flatMap(d=>d.getAttributions(a)))),h=!this.getMap().getAllLayers().some(d=>d.getSource()&&!1===d.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(h),l}updateElement_(a){if(!a)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const l=this.collectSourceAttributions_(a),h=l.length>0;if(this.renderedVisible_!=h&&(this.element.style.display=h?"":"none",this.renderedVisible_=h),!yh(l,this.renderedAttributions_)){nj(this.ulElement_);for(let d=0,f=l.length;d<f;++d){const m=document.createElement("li");m.innerHTML=l[d],this.ulElement_.appendChild(m)}this.renderedAttributions_=l}}handleClick_(a){a.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Bx),this.collapsed_?Fy(this.collapseLabel_,this.label_):Fy(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(a){this.collapsible_!==a&&(this.collapsible_=a,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(a){this.userCollapsed_=a,this.collapsible_&&this.collapsed_!==a&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(a){this.updateElement_(a.frameState)}},cj=class eSe extends Hd{constructor(a){a=a||{},super({element:document.createElement("div"),render:a.render,target:a.target});const l=void 0!==a.className?a.className:"ol-rotate",h=void 0!==a.label?a.label:"\u21e7",d=void 0!==a.compassClassName?a.compassClassName:"ol-compass";this.label_=null,"string"==typeof h?(this.label_=document.createElement("span"),this.label_.className=d,this.label_.textContent=h):(this.label_=h,this.label_.classList.add(d));const f=a.tipLabel?a.tipLabel:"Reset rotation",m=document.createElement("button");m.className=l+"-reset",m.setAttribute("type","button"),m.title=f,m.appendChild(this.label_),m.addEventListener("click",this.handleClick_.bind(this),!1);const y=this.element;y.className=l+" "+Hp+" "+Bb,y.appendChild(m),this.callResetNorth_=a.resetNorth?a.resetNorth:void 0,this.duration_=void 0!==a.duration?a.duration:250,this.autoHide_=void 0===a.autoHide||a.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Vx)}handleClick_(a){a.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const l=this.getMap().getView();if(!l)return;const h=l.getRotation();void 0!==h&&(this.duration_>0&&h%(2*Math.PI)!=0?l.animate({rotation:0,duration:this.duration_,easing:Vp}):l.setRotation(0))}render(a){const l=a.frameState;if(!l)return;const h=l.viewState.rotation;if(h!=this.rotation_){const d="rotate("+h+"rad)";if(this.autoHide_){const f=this.element.classList.contains(Vx);f||0!==h?f&&0!==h&&this.element.classList.remove(Vx):this.element.classList.add(Vx)}this.label_.style.transform=d}this.rotation_=h}},uj=class tSe extends Hd{constructor(a){a=a||{},super({element:document.createElement("div"),target:a.target});const l=void 0!==a.className?a.className:"ol-zoom",h=void 0!==a.delta?a.delta:1,d=void 0!==a.zoomInClassName?a.zoomInClassName:l+"-in",f=void 0!==a.zoomOutClassName?a.zoomOutClassName:l+"-out",m=void 0!==a.zoomInLabel?a.zoomInLabel:"+",g=void 0!==a.zoomOutLabel?a.zoomOutLabel:"\u2013",y=void 0!==a.zoomInTipLabel?a.zoomInTipLabel:"Zoom in",_=void 0!==a.zoomOutTipLabel?a.zoomOutTipLabel:"Zoom out",v=document.createElement("button");v.className=d,v.setAttribute("type","button"),v.title=y,v.appendChild("string"==typeof m?document.createTextNode(m):m),v.addEventListener("click",this.handleClick_.bind(this,h),!1);const b=document.createElement("button");b.className=f,b.setAttribute("type","button"),b.title=_,b.appendChild("string"==typeof g?document.createTextNode(g):g),b.addEventListener("click",this.handleClick_.bind(this,-h),!1);const T=this.element;T.className=l+" "+Hp+" "+Bb,T.appendChild(v),T.appendChild(b),this.duration_=void 0!==a.duration?a.duration:250}handleClick_(a,l){l.preventDefault(),this.zoomByDelta_(a)}zoomByDelta_(a){const h=this.getMap().getView();if(!h)return;const d=h.getZoom();if(void 0!==d){const f=h.getConstrainedZoom(d+a);this.duration_>0?(h.getAnimating()&&h.cancelAnimations(),h.animate({zoom:f,duration:this.duration_,easing:Vp})):h.setZoom(f)}}};function pO(c,a,l,h){const d=c.getZoom();if(void 0===d)return;const f=c.getConstrainedZoom(d+a),m=c.getResolutionForZoom(f);c.getAnimating()&&c.cancelAnimations(),c.animate({resolution:m,anchor:l,duration:void 0!==h?h:250,easing:Vp})}const $b=class iSe extends bc{constructor(a){super(),a&&a.handleEvent&&(this.handleEvent=a.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(a){return!0}setActive(a){this.set("active",a)}setMap(a){this.map_=a}},oSe=class sSe extends $b{constructor(a){super(),this.delta_=(a=a||{}).delta?a.delta:1,this.duration_=void 0!==a.duration?a.duration:250}handleEvent(a){let l=!1;if(a.type==cs.DBLCLICK){const h=a.originalEvent,f=a.coordinate,m=h.shiftKey?-this.delta_:this.delta_;pO(a.map.getView(),m,f,this.duration_),h.preventDefault(),l=!0}return!l}};function mO(c){const a=c.length;let l=0,h=0;for(let d=0;d<a;d++)l+=c[d].clientX,h+=c[d].clientY;return{clientX:l/a,clientY:h/a}}const Yb=class aSe extends $b{constructor(a){super(a=a||{}),a.handleDownEvent&&(this.handleDownEvent=a.handleDownEvent),a.handleDragEvent&&(this.handleDragEvent=a.handleDragEvent),a.handleMoveEvent&&(this.handleMoveEvent=a.handleMoveEvent),a.handleUpEvent&&(this.handleUpEvent=a.handleUpEvent),a.stopDown&&(this.stopDown=a.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(a){return!1}handleDragEvent(a){}handleEvent(a){if(!a.originalEvent)return!0;let l=!1;if(this.updateTrackedPointers_(a),this.handlingDownUpSequence){if(a.type==cs.POINTERDRAG)this.handleDragEvent(a),a.originalEvent.preventDefault();else if(a.type==cs.POINTERUP){const h=this.handleUpEvent(a);this.handlingDownUpSequence=h&&this.targetPointers.length>0}}else if(a.type==cs.POINTERDOWN){const h=this.handleDownEvent(a);this.handlingDownUpSequence=h,l=this.stopDown(h)}else a.type==cs.POINTERMOVE&&this.handleMoveEvent(a);return!l}handleMoveEvent(a){}handleUpEvent(a){return!1}stopDown(a){return a}updateTrackedPointers_(a){a.activePointers&&(this.targetPointers=a.activePointers)}};function gO(c){const a=arguments;return function(l){let h=!0;for(let d=0,f=a.length;d<f&&(h=h&&a[d](l),h);++d);return h}}const lSe=function(c){const a=c.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey},dj=function(c){return!c.map.getTargetElement().hasAttribute("tabindex")||function(c){const a=c.map.getTargetElement(),l=c.map.getOwnerDocument().activeElement;return a.contains(l)}(c)},uSe=Cb,fj=function(c){const a=c.originalEvent;return 0==a.button&&!(u0e&&h0e&&a.ctrlKey)},pj=function(c){const a=c.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey},hSe=function(c){const a=c.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey},mj=function(c){const a=c.originalEvent,l=a.target.tagName;return"INPUT"!==l&&"SELECT"!==l&&"TEXTAREA"!==l&&!a.target.isContentEditable},yO=function(c){const a=c.originalEvent;return En(void 0!==a,56),"mouse"==a.pointerType},dSe=function(c){const a=c.originalEvent;return En(void 0!==a,56),a.isPrimary&&0===a.button},pSe=class fSe extends Yb{constructor(a){super({stopDown:fx}),this.kinetic_=(a=a||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const l=a.condition?a.condition:gO(pj,dSe);this.condition_=a.onFocusOnly?gO(dj,l):l,this.noKinetic_=!1}handleDragEvent(a){const l=a.map;this.panning_||(this.panning_=!0,l.getView().beginInteraction());const h=this.targetPointers,d=l.getEventPixel(mO(h));if(h.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(d[0],d[1]),this.lastCentroid){const f=[this.lastCentroid[0]-d[0],d[1]-this.lastCentroid[1]],g=a.map.getView();w7(f,g.getResolution()),OP(f,g.getRotation()),g.adjustCenterInternal(f)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=d,this.lastPointersCount_=h.length,a.originalEvent.preventDefault()}handleUpEvent(a){const l=a.map,h=l.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const d=this.kinetic_.getDistance(),f=this.kinetic_.getAngle(),m=h.getCenterInternal(),g=l.getPixelFromCoordinateInternal(m),y=l.getCoordinateFromPixelInternal([g[0]-d*Math.cos(f),g[1]-d*Math.sin(f)]);h.animateInternal({center:h.getConstrainedCenter(y),duration:500,easing:Vp})}return this.panning_&&(this.panning_=!1,h.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(a){if(this.targetPointers.length>0&&this.condition_(a)){const h=a.map.getView();return this.lastCentroid=null,h.getAnimating()&&h.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},gSe=class mSe extends Yb{constructor(a){a=a||{},super({stopDown:fx}),this.condition_=a.condition?a.condition:lSe,this.lastAngle_=void 0,this.duration_=void 0!==a.duration?a.duration:250}handleDragEvent(a){if(!yO(a))return;const l=a.map,h=l.getView();if(h.getConstraints().rotation===XP)return;const d=l.getSize(),f=a.pixel,m=Math.atan2(d[1]/2-f[1],f[0]-d[0]/2);void 0!==this.lastAngle_&&h.adjustRotationInternal(-(m-this.lastAngle_)),this.lastAngle_=m}handleUpEvent(a){return!yO(a)||(a.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(a){return!!(yO(a)&&fj(a)&&this.condition_(a))&&(a.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}},_Se=class ySe extends wb{constructor(a){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+a,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const a=this.startPixel_,l=this.endPixel_,h="px",d=this.element_.style;d.left=Math.min(a[0],l[0])+h,d.top=Math.min(a[1],l[1])+h,d.width=Math.abs(l[0]-a[0])+h,d.height=Math.abs(l[1]-a[1])+h}setMap(a){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const l=this.element_.style;l.left="inherit",l.top="inherit",l.width="inherit",l.height="inherit"}this.map_=a,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(a,l){this.startPixel_=a,this.endPixel_=l,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const a=this.startPixel_,l=this.endPixel_,d=[a,[a[0],l[1]],l,[l[0],a[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);d[4]=d[0].slice(),this.geometry_?this.geometry_.setCoordinates([d]):this.geometry_=new Th([d])}getGeometry(){return this.geometry_}};class _O extends vc{constructor(a,l,h){super(a),this.coordinate=l,this.mapBrowserEvent=h}}const gj=class vSe extends Yb{constructor(a){super(),this.box_=new _Se((a=a||{}).className||"ol-dragbox"),this.minArea_=void 0!==a.minArea?a.minArea:64,a.onBoxEnd&&(this.onBoxEnd=a.onBoxEnd),this.startPixel_=null,this.condition_=a.condition?a.condition:fj,this.boxEndCondition_=a.boxEndCondition?a.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(a,l,h){const d=h[0]-l[0],f=h[1]-l[1];return d*d+f*f>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(a){this.box_.setPixels(this.startPixel_,a.pixel),this.dispatchEvent(new _O("boxdrag",a.coordinate,a))}handleUpEvent(a){this.box_.setMap(null);const l=this.boxEndCondition_(a,this.startPixel_,a.pixel);return l&&this.onBoxEnd(a),this.dispatchEvent(new _O(l?"boxend":"boxcancel",a.coordinate,a)),!1}handleDownEvent(a){return!!this.condition_(a)&&(this.startPixel_=a.pixel,this.box_.setMap(a.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new _O("boxstart",a.coordinate,a)),!0)}onBoxEnd(a){}},SSe=class bSe extends gj{constructor(a){super({condition:(a=a||{}).condition?a.condition:hSe,className:a.className||"ol-dragzoom",minArea:a.minArea}),this.duration_=void 0!==a.duration?a.duration:200,this.out_=void 0!==a.out&&a.out}onBoxEnd(a){const h=this.getMap().getView();let d=this.getGeometry();if(this.out_){const f=h.rotatedExtentForGeometry(d),m=h.getResolutionForExtentInternal(f),g=h.getResolution()/m;d=d.clone(),d.scale(g*g)}h.fitInternal(d,{duration:this.duration_,easing:Vp})}},wSe=class TSe extends $b{constructor(a){super(),a=a||{},this.defaultCondition_=function(l){return pj(l)&&mj(l)},this.condition_=void 0!==a.condition?a.condition:this.defaultCondition_,this.duration_=void 0!==a.duration?a.duration:100,this.pixelDelta_=void 0!==a.pixelDelta?a.pixelDelta:128}handleEvent(a){let l=!1;if("keydown"==a.type){const h=a.originalEvent,d=h.keyCode;if(this.condition_(a)&&(40==d||37==d||39==d||38==d)){const m=a.map.getView(),g=m.getResolution()*this.pixelDelta_;let y=0,_=0;40==d?_=-g:37==d?y=-g:39==d?y=g:_=g;const v=[y,_];OP(v,m.getRotation()),function rSe(c,a,l){const h=c.getCenterInternal();h&&c.animateInternal({duration:void 0!==l?l:250,easing:tbe,center:c.getConstrainedCenter([h[0]+a[0],h[1]+a[1]])})}(m,v,this.duration_),h.preventDefault(),l=!0}}return!l}},xSe=class CSe extends $b{constructor(a){super(),this.condition_=(a=a||{}).condition?a.condition:mj,this.delta_=a.delta?a.delta:1,this.duration_=void 0!==a.duration?a.duration:100}handleEvent(a){let l=!1;if("keydown"==a.type||"keypress"==a.type){const h=a.originalEvent,d=h.key;if(this.condition_(a)&&("+"===d||"-"===d)){const m="+"===d?this.delta_:-this.delta_;pO(a.map.getView(),m,void 0,this.duration_),h.preventDefault(),l=!0}}return!l}},ASe=class DSe extends $b{constructor(a){super(a=a||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==a.maxDelta?a.maxDelta:1,this.duration_=void 0!==a.duration?a.duration:250,this.timeout_=void 0!==a.timeout?a.timeout:80,this.useAnchor_=void 0===a.useAnchor||a.useAnchor,this.constrainResolution_=void 0!==a.constrainResolution&&a.constrainResolution;const l=a.condition?a.condition:uSe;this.condition_=a.onFocusOnly?gO(dj,l):l,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const a=this.getMap();a&&a.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(a){if(!this.condition_(a)||"wheel"!==a.type)return!0;const h=a.map,d=a.originalEvent;let f;if(d.preventDefault(),this.useAnchor_&&(this.lastAnchor_=a.coordinate),"wheel"==a.type&&(f=d.deltaY,l0e&&d.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(f/=e7),d.deltaMode===WheelEvent.DOM_DELTA_LINE&&(f*=40)),0===f)return!1;this.lastDelta_=f;const m=Date.now();void 0===this.startTime_&&(this.startTime_=m),(!this.mode_||m-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(f)<4?"trackpad":"wheel");const g=h.getView();if("trackpad"===this.mode_&&!g.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(g.getAnimating()&&g.cancelAnimations(),g.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),g.adjustZoom(-f/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=m,!1;this.totalDelta_+=f;const y=Math.max(this.timeout_-(m-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,h),y),!1}handleWheelZoom_(a){const l=a.getView();l.getAnimating()&&l.cancelAnimations();let h=-Qn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(l.getConstrainResolution()||this.constrainResolution_)&&(h=h?h>0?1:-1:0),pO(l,h,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(a){this.useAnchor_=a,a||(this.lastAnchor_=null)}},RSe=class ISe extends Yb{constructor(a){const l=a=a||{};l.stopDown||(l.stopDown=fx),super(l),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==a.threshold?a.threshold:.3,this.duration_=void 0!==a.duration?a.duration:250}handleDragEvent(a){let l=0;const h=this.targetPointers[0],d=this.targetPointers[1],f=Math.atan2(d.clientY-h.clientY,d.clientX-h.clientX);if(void 0!==this.lastAngle_){const y=f-this.lastAngle_;this.rotationDelta_+=y,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),l=y}this.lastAngle_=f;const m=a.map,g=m.getView();g.getConstraints().rotation!==XP&&(this.anchor_=m.getCoordinateFromPixelInternal(m.getEventPixel(mO(this.targetPointers))),this.rotating_&&(m.render(),g.adjustRotationInternal(l,this.anchor_)))}handleUpEvent(a){return!(this.targetPointers.length<2&&(a.map.getView().endInteraction(this.duration_),1))}handleDownEvent(a){if(this.targetPointers.length>=2){const l=a.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||l.getView().beginInteraction(),!0}return!1}},PSe=class LSe extends Yb{constructor(a){const l=a=a||{};l.stopDown||(l.stopDown=fx),super(l),this.anchor_=null,this.duration_=void 0!==a.duration?a.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(a){let l=1;const h=this.targetPointers[0],d=this.targetPointers[1],f=h.clientX-d.clientX,m=h.clientY-d.clientY,g=Math.sqrt(f*f+m*m);void 0!==this.lastDistance_&&(l=this.lastDistance_/g),this.lastDistance_=g;const y=a.map,_=y.getView();1!=l&&(this.lastScaleDelta_=l),this.anchor_=y.getCoordinateFromPixelInternal(y.getEventPixel(mO(this.targetPointers))),y.render(),_.adjustResolutionInternal(l,this.anchor_)}handleUpEvent(a){return!(this.targetPointers.length<2)||(a.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(a){if(this.targetPointers.length>=2){const l=a.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||l.getView().beginInteraction(),!0}return!1}};function yj(c){c=c||{};const a=new bo,l=new class ESe{constructor(a,l,h){this.decay_=a,this.minVelocity_=l,this.delay_=h,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(a,l){this.points_.push(a,l,Date.now())}end(){if(this.points_.length<6)return!1;const a=Date.now()-this.delay_,l=this.points_.length-3;if(this.points_[l+2]<a)return!1;let h=l-3;for(;h>0&&this.points_[h+2]>a;)h-=3;const d=this.points_[l+2]-this.points_[h+2];if(d<1e3/60)return!1;const f=this.points_[l]-this.points_[h],m=this.points_[l+1]-this.points_[h+1];return this.angle_=Math.atan2(m,f),this.initialVelocity_=Math.sqrt(f*f+m*m)/d,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===c.altShiftDragRotate||c.altShiftDragRotate)&&a.push(new gSe),(void 0===c.doubleClickZoom||c.doubleClickZoom)&&a.push(new oSe({delta:c.zoomDelta,duration:c.zoomDuration})),(void 0===c.dragPan||c.dragPan)&&a.push(new pSe({onFocusOnly:c.onFocusOnly,kinetic:l})),(void 0===c.pinchRotate||c.pinchRotate)&&a.push(new RSe),(void 0===c.pinchZoom||c.pinchZoom)&&a.push(new PSe({duration:c.zoomDuration})),(void 0===c.keyboard||c.keyboard)&&(a.push(new wSe),a.push(new xSe({delta:c.zoomDelta,duration:c.zoomDuration}))),(void 0===c.mouseWheelZoom||c.mouseWheelZoom)&&a.push(new ASe({onFocusOnly:c.onFocusOnly,duration:c.zoomDuration})),(void 0===c.shiftDragZoom||c.shiftDragZoom)&&a.push(new SSe({duration:c.zoomDuration})),a}function _j(c,a,l){return void 0===l&&(l=[0,0]),l[0]=c[0]+2*a,l[1]=c[1]+2*a,l}function vj(c){return c[0]>0&&c[1]>0}function bj(c,a,l){return void 0===l&&(l=[0,0]),l[0]=c[0]*a+.5|0,l[1]=c[1]*a+.5|0,l}function So(c,a){return Array.isArray(c)?c:(void 0===a?a=[c,c]:(a[0]=c,a[1]=c),a)}function Sj(c){c instanceof lo?c.setMapInternal(null):c instanceof Dr&&c.getLayers().forEach(Sj)}function Tj(c,a){if(c instanceof lo)c.setMapInternal(a);else if(c instanceof Dr){const l=c.getLayers().getArray();for(let h=0,d=l.length;h<d;++h)Tj(l[h],a)}}const vO=class OSe extends bc{constructor(a){super();const l=function NSe(c){let a=null;void 0!==c.keyboardEventTarget&&(a="string"==typeof c.keyboardEventTarget?document.getElementById(c.keyboardEventTarget):c.keyboardEventTarget);const l={},h=c.layers&&"function"==typeof c.layers.getLayers?c.layers:new Dr({layers:c.layers});let d,f,m;return l.layergroup=h,l.target=c.target,l.view=c.view instanceof sl?c.view:new sl,void 0!==c.controls&&(Array.isArray(c.controls)?d=new bo(c.controls.slice()):(En("function"==typeof c.controls.getArray,47),d=c.controls)),void 0!==c.interactions&&(Array.isArray(c.interactions)?f=new bo(c.interactions.slice()):(En("function"==typeof c.interactions.getArray,48),f=c.interactions)),void 0!==c.overlays?Array.isArray(c.overlays)?m=new bo(c.overlays.slice()):(En("function"==typeof c.overlays.getArray,49),m=c.overlays):m=new bo,{controls:d,interactions:f,keyboardEventTarget:a,overlays:m,values:l}}(a=a||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==a.maxTilesLoading?a.maxTilesLoading:16,this.pixelRatio_=void 0!==a.pixelRatio?a.pixelRatio:e7,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=[1,0,0,1,0,0],this.pixelToCoordinateTransform_=[1,0,0,1,0,0],this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=a.moveTolerance,this.keyboardEventTarget_=l.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=l.controls||function nSe(c){c=c||{};const a=new bo;return(void 0===c.zoom||c.zoom)&&a.push(new uj(c.zoomOptions)),(void 0===c.rotate||c.rotate)&&a.push(new cj(c.rotateOptions)),(void 0===c.attribution||c.attribution)&&a.push(new lj(c.attributionOptions)),a}(),this.interactions=l.interactions||yj({onFocusOnly:!0}),this.overlays_=l.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new aj(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener("layergroup",this.handleLayerGroupChanged_),this.addChangeListener("view",this.handleViewChanged_),this.addChangeListener("size",this.handleSizeChanged_),this.addChangeListener("target",this.handleTargetChanged_),this.setProperties(l.values);const h=this;a.view&&!(a.view instanceof sl)&&a.view.then(function(d){h.setView(new sl(d))}),this.controls.addEventListener("add",d=>{d.element.setMap(this)}),this.controls.addEventListener("remove",d=>{d.element.setMap(null)}),this.interactions.addEventListener("add",d=>{d.element.setMap(this)}),this.interactions.addEventListener("remove",d=>{d.element.setMap(null)}),this.overlays_.addEventListener("add",d=>{this.addOverlayInternal_(d.element)}),this.overlays_.addEventListener("remove",d=>{const f=d.element.getId();void 0!==f&&delete this.overlayIdIndex_[f.toString()],d.element.setMap(null)}),this.controls.forEach(d=>{d.setMap(this)}),this.interactions.forEach(d=>{d.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(a){this.getControls().push(a)}addInteraction(a){this.getInteractions().push(a)}addLayer(a){this.getLayerGroup().getLayers().push(a)}handleLayerAdd_(a){Tj(a.layer,this)}addOverlay(a){this.getOverlays().push(a)}addOverlayInternal_(a){const l=a.getId();void 0!==l&&(this.overlayIdIndex_[l.toString()]=a),a.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(a,l,h){if(!this.frameState_||!this.renderer_)return;const d=this.getCoordinateFromPixelInternal(a);return this.renderer_.forEachFeatureAtCoordinate(d,this.frameState_,void 0!==(h=void 0!==h?h:{}).hitTolerance?h.hitTolerance:0,!1!==h.checkWrapped,l,null,void 0!==h.layerFilter?h.layerFilter:Cb,null)}getFeaturesAtPixel(a,l){const h=[];return this.forEachFeatureAtPixel(a,function(d){h.push(d)},l),h}getAllLayers(){const a=[];return function l(h){h.forEach(function(d){d instanceof Dr?l(d.getLayers()):a.push(d)})}(this.getLayers()),a}hasFeatureAtPixel(a,l){if(!this.frameState_||!this.renderer_)return!1;const h=this.getCoordinateFromPixelInternal(a);return this.renderer_.hasFeatureAtCoordinate(h,this.frameState_,void 0!==(l=void 0!==l?l:{}).hitTolerance?l.hitTolerance:0,!1!==l.checkWrapped,void 0!==l.layerFilter?l.layerFilter:Cb,null)}getEventCoordinate(a){return this.getCoordinateFromPixel(this.getEventPixel(a))}getEventCoordinateInternal(a){return this.getCoordinateFromPixelInternal(this.getEventPixel(a))}getEventPixel(a){const h=this.viewport_.getBoundingClientRect(),d=this.getSize(),g="changedTouches"in a?a.changedTouches[0]:a;return[(g.clientX-h.left)/(h.width/d[0]),(g.clientY-h.top)/(h.height/d[1])]}getTarget(){return this.get("target")}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(a){return GP(this.getCoordinateFromPixelInternal(a),this.getView().getProjection())}getCoordinateFromPixelInternal(a){const l=this.frameState_;return l?Or(l.pixelToCoordinateTransform,a.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(a){const l=this.overlayIdIndex_[a.toString()];return void 0!==l?l:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get("layergroup")}setLayers(a){const l=this.getLayerGroup();if(a instanceof bo)return void l.setLayers(a);const h=l.getLayers();h.clear(),h.extend(a)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const a=this.getLayerGroup().getLayerStatesArray();for(let l=0,h=a.length;l<h;++l){const d=a[l];if(!d.visible)continue;const f=d.layer.getRenderer();if(f&&!f.ready)return!0;const m=d.layer.getSource();if(m&&m.loading)return!0}return!1}getPixelFromCoordinate(a){const l=bh(a,this.getView().getProjection());return this.getPixelFromCoordinateInternal(l)}getPixelFromCoordinateInternal(a){const l=this.frameState_;return l?Or(l.coordinateToPixelTransform,a.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get("size")}getView(){return this.get("view")}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const a=this.getTargetElement();return a?a.ownerDocument:document}getTilePriority(a,l,h,d){return function Kbe(c,a,l,h,d){if(!c||!(l in c.wantedTiles)||!c.wantedTiles[l][a.getKey()])return jx;const f=c.viewState.center,m=h[0]-f[0],g=h[1]-f[1];return 65536*Math.log(d)+Math.sqrt(m*m+g*g)/d}(this.frameState_,a,l,h,d)}handleBrowserEvent(a,l){const h=new Gd(l=l||a.type,this,a);this.handleMapBrowserEvent(h)}handleMapBrowserEvent(a){if(!this.frameState_)return;const l=a.originalEvent,h=l.type;if("pointerdown"===h||"wheel"===h||"keydown"===h){const d=this.getOwnerDocument(),f=this.viewport_.getRootNode?this.viewport_.getRootNode():d,m=l.target;if(this.overlayContainerStopEvent_.contains(m)||!(f===d?d.documentElement:f).contains(m))return}if(a.frameState=this.frameState_,!1!==this.dispatchEvent(a)){const d=this.getInteractions().getArray().slice();for(let f=d.length-1;f>=0;f--){const m=d[f];if(m.getMap()===this&&m.getActive()&&this.getTargetElement()&&(!m.handleEvent(a)||a.propagationStopped))break}}}handlePostRender(){const a=this.frameState_,l=this.tileQueue_;if(!l.isEmpty()){let d=this.maxTilesLoading_,f=d;if(a){const m=a.viewHints;if(m[0]||m[1]){const g=Date.now()-a.time>8;d=g?0:8,f=g?0:2}}l.getTilesLoading()<d&&(l.reprioritize(),l.loadMoreTiles(d,f))}a&&this.renderer_&&!a.animate&&(!0===this.renderComplete_?(this.hasListener("rendercomplete")&&this.renderer_.dispatchRenderEvent("rendercomplete",a),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new By("loadend",this,a)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new By("loadstart",this,a))));const h=this.postRenderFunctions_;for(let d=0,f=h.length;d<f;++d)h[d](this,a);h.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let h=0,d=this.targetChangeHandlerKeys_.length;h<d;++h)or(this.targetChangeHandlerKeys_[h]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener("contextmenu",this.boundHandleBrowserEvent_),this.viewport_.removeEventListener("wheel",this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Ux(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const h=this.targetElement_.getRootNode();h instanceof ShadowRoot&&this.resizeObserver_.unobserve(h.host)}const a=this.getTarget(),l="string"==typeof a?document.getElementById(a):a;if(this.targetElement_=l,l){l.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Hbe(this)),this.mapBrowserEventHandler_=new qbe(this,this.moveTolerance_);for(const f in cs)this.mapBrowserEventHandler_.addEventListener(cs[f],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener("contextmenu",this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener("wheel",this.boundHandleBrowserEvent_,!!t7&&{passive:!1});const h=this.keyboardEventTarget_?this.keyboardEventTarget_:l;this.targetChangeHandlerKeys_=[Zn(h,"keydown",this.handleBrowserEvent,this),Zn(h,"keypress",this.handleBrowserEvent,this)];const d=l.getRootNode();d instanceof ShadowRoot&&this.resizeObserver_.observe(d.host),this.resizeObserver_.observe(l)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(or(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(or(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const a=this.getView();a&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Zn(a,"propertychange",this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Zn(a,"change",this.handleViewPropertyChanged_,this),a.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(or),this.layerGroupPropertyListenerKeys_=null);const a=this.getLayerGroup();a&&(this.handleLayerAdd_(new zd("addlayer",a)),this.layerGroupPropertyListenerKeys_=[Zn(a,"propertychange",this.render,this),Zn(a,"change",this.render,this),Zn(a,"addlayer",this.handleLayerAdd_,this),Zn(a,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const a=this.getLayerGroup().getLayerStatesArray();for(let l=0,h=a.length;l<h;++l){const d=a[l].layer;d.hasRenderer()&&d.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(a){return this.getControls().remove(a)}removeInteraction(a){return this.getInteractions().remove(a)}removeLayer(a){return this.getLayerGroup().getLayers().remove(a)}handleLayerRemove_(a){Sj(a.layer)}removeOverlay(a){return this.getOverlays().remove(a)}renderFrame_(a){const l=this.getSize(),h=this.getView(),d=this.frameState_;let f=null;if(void 0!==l&&vj(l)&&h&&h.isDef()){const m=h.getHints(this.frameState_?this.frameState_.viewHints:void 0),g=h.getState();if(f={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Iy(g.center,g.resolution,g.rotation,l),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:l,tileQueue:this.tileQueue_,time:a,usedTiles:{},viewState:g,viewHints:m,wantedTiles:{},mapId:an(this),renderTargets:{}},g.nextCenter&&g.nextResolution){const y=isNaN(g.nextRotation)?g.rotation:g.nextRotation;f.nextExtent=Iy(g.nextCenter,g.nextResolution,y,l)}}this.frameState_=f,this.renderer_.renderFrame(f),f&&(f.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,f.postRenderFunctions),d&&(!this.previousExtent_||!Ry(this.previousExtent_)&&!Gl(f.extent,this.previousExtent_))&&(this.dispatchEvent(new By("movestart",this,d)),this.previousExtent_=Op(this.previousExtent_)),this.previousExtent_&&!f.viewHints[0]&&!f.viewHints[1]&&!Gl(f.extent,this.previousExtent_)&&(this.dispatchEvent(new By("moveend",this,f)),i7(f.extent,this.previousExtent_))),this.dispatchEvent(new By("postrender",this,f)),this.renderComplete_=this.hasListener("loadstart")||this.hasListener("loadend")||this.hasListener("rendercomplete")?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(a){const l=this.getLayerGroup();l&&this.handleLayerRemove_(new zd("removelayer",l)),this.set("layergroup",a)}setSize(a){this.set("size",a)}setTarget(a){this.set("target",a)}setView(a){if(!a||a instanceof sl)return void this.set("view",a);this.set("view",new sl);const l=this;a.then(function(h){l.setView(new sl(h))})}updateSize(){const a=this.getTargetElement();let l;if(a){const d=getComputedStyle(a),f=a.offsetWidth-parseFloat(d.borderLeftWidth)-parseFloat(d.paddingLeft)-parseFloat(d.paddingRight)-parseFloat(d.borderRightWidth),m=a.offsetHeight-parseFloat(d.borderTopWidth)-parseFloat(d.paddingTop)-parseFloat(d.paddingBottom)-parseFloat(d.borderBottomWidth);!isNaN(f)&&!isNaN(m)&&(l=[f,m],!vj(l)&&(a.offsetWidth||a.offsetHeight||a.getClientRects().length)&&M7("No map visible because the map container's width or height are 0."))}const h=this.getSize();l&&(!h||!yh(l,h))&&(this.setSize(l),this.updateViewportSize_())}updateViewportSize_(){const a=this.getView();if(a){let l;const h=getComputedStyle(this.viewport_);h.width&&h.height&&(l=[parseInt(h.width,10),parseInt(h.height,10)]),a.setViewportSize(l)}}},wj=class FSe extends bc{constructor(a){super(),this.options=a,this.id=a.id,this.insertFirst=void 0===a.insertFirst||a.insertFirst,this.stopEvent=void 0===a.stopEvent||a.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==a.className?a.className:"ol-overlay-container ol-selectable",this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===a.autoPan?{}:a.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==a.element&&this.setElement(a.element),this.setOffset(void 0!==a.offset?a.offset:[0,0]),this.setPositioning(a.positioning||"top-left"),void 0!==a.position&&this.setPosition(a.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){nj(this.element);const a=this.getElement();a&&this.element.appendChild(a)}handleMapChanged(){this.mapPostrenderListenerKey&&(Ux(this.element),or(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const a=this.getMap();if(a){this.mapPostrenderListenerKey=Zn(a,"postrender",this.render,this),this.updatePixelPosition();const l=this.stopEvent?a.getOverlayContainerStopEvent():a.getOverlayContainer();this.insertFirst?l.insertBefore(this.element,l.childNodes[0]||null):l.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(a){this.set("element",a)}setMap(a){this.set("map",a)}setOffset(a){this.set("offset",a)}setPosition(a){this.set("position",a)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(a){const l=this.getMap();if(!l||!l.getTargetElement()||!this.get("position"))return;const h=this.getRect(l.getTargetElement(),l.getSize()),d=this.getElement(),f=this.getRect(d,[Fbe(d),kbe(d)]),m=void 0===(a=a||{}).margin?20:a.margin;if(!Ia(h,f)){const g=f[0]-h[0],y=h[2]-f[2],_=f[1]-h[1],v=h[3]-f[3],b=[0,0];if(g<0?b[0]=g-m:y<0&&(b[0]=Math.abs(y)+m),_<0?b[1]=_-m:v<0&&(b[1]=Math.abs(v)+m),0!==b[0]||0!==b[1]){const S=l.getView().getCenterInternal(),T=l.getPixelFromCoordinateInternal(S);if(!T)return;const x=[T[0]+b[0],T[1]+b[1]],E=a.animation||{};l.getView().animateInternal({center:l.getCoordinateFromPixelInternal(x),duration:E.duration,easing:E.easing})}}}getRect(a,l){const h=a.getBoundingClientRect(),d=h.left+window.pageXOffset,f=h.top+window.pageYOffset;return[d,f,d+l[0],f+l[1]]}setPositioning(a){this.set("positioning",a)}setVisible(a){this.rendered.visible!==a&&(this.element.style.display=a?"":"none",this.rendered.visible=a)}updatePixelPosition(){const a=this.getMap(),l=this.getPosition();if(!a||!a.isRendered()||!l)return void this.setVisible(!1);const h=a.getPixelFromCoordinate(l),d=a.getSize();this.updateRenderedPosition(h,d)}updateRenderedPosition(a,l){const h=this.element.style,d=this.getOffset(),f=this.getPositioning();this.setVisible(!0);let y="0%",_="0%";"bottom-right"==f||"center-right"==f||"top-right"==f?y="-100%":("bottom-center"==f||"center-center"==f||"top-center"==f)&&(y="-50%"),"bottom-left"==f||"bottom-center"==f||"bottom-right"==f?_="-100%":("center-left"==f||"center-center"==f||"center-right"==f)&&(_="-50%");const v=`translate(${y}, ${_}) translate(${Math.round(a[0]+d[0])+"px"}, ${Math.round(a[1]+d[1])+"px"})`;this.rendered.transform_!=v&&(this.rendered.transform_=v,h.transform=v)}getOptions(){return this.options}},Cj=class kSe extends lo{constructor(a){a=a||{};const l=Object.assign({},a);delete l.preload,delete l.useInterimTilesOnError,super(l),this.setPreload(void 0!==a.preload?a.preload:0),this.setUseInterimTilesOnError(void 0===a.useInterimTilesOnError||a.useInterimTilesOnError)}getPreload(){return this.get("preload")}setPreload(a){this.set("preload",a)}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setUseInterimTilesOnError(a){this.set("useInterimTilesOnError",a)}getData(a){return super.getData(a)}};var bO=ft(36);class SO{constructor(a){this.opacity_=a.opacity,this.rotateWithView_=a.rotateWithView,this.rotation_=a.rotation,this.scale_=a.scale,this.scaleArray_=So(a.scale),this.displacement_=a.displacement,this.declutterMode_=a.declutterMode}clone(){const a=this.getScale();return new SO({opacity:this.getOpacity(),scale:Array.isArray(a)?a.slice():a,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Rn()}getImage(a){return Rn()}getHitDetectionImage(){return Rn()}getPixelRatio(a){return 1}getImageState(){return Rn()}getImageSize(){return Rn()}getOrigin(){return Rn()}getSize(){return Rn()}setDisplacement(a){this.displacement_=a}setOpacity(a){this.opacity_=a}setRotateWithView(a){this.rotateWithView_=a}setRotation(a){this.rotation_=a}setScale(a){this.scale_=a,this.scaleArray_=So(a)}listenImageChange(a){Rn()}load(){Rn()}unlistenImageChange(a){Rn()}}const xj=SO;function mu(c){return Array.isArray(c)?p7(c):c}class TO extends xj{constructor(a){super({opacity:1,rotateWithView:void 0!==a.rotateWithView&&a.rotateWithView,rotation:void 0!==a.rotation?a.rotation:0,scale:void 0!==a.scale?a.scale:1,displacement:void 0!==a.displacement?a.displacement:[0,0],declutterMode:a.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==a.fill?a.fill:null,this.origin_=[0,0],this.points_=a.points,this.radius_=void 0!==a.radius?a.radius:a.radius1,this.radius2_=a.radius2,this.angle_=void 0!==a.angle?a.angle:0,this.stroke_=void 0!==a.stroke?a.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const a=this.getScale(),l=new TO({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(a)?a.slice():a,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return l.setOpacity(this.getOpacity()),l}getAnchor(){const a=this.size_;if(!a)return null;const l=this.getDisplacement(),h=this.getScaleArray();return[a[0]/2-l[0]/h[0],a[1]/2+l[1]/h[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(a){this.fill_=a,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(a){let l=this.canvas_[a];if(!l){const h=this.renderOptions_,d=Yr(h.size*a,h.size*a);this.draw_(h,d,a),l=d.canvas,this.canvas_[a]=l}return l}getPixelRatio(a){return a}getImageSize(){return this.size_}getImageState(){return 2}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(a){this.stroke_=a,this.render()}listenImageChange(a){}load(){}unlistenImageChange(a){}calculateLineJoinSize_(a,l,h){if(0===l||this.points_===1/0||"bevel"!==a&&"miter"!==a)return l;let d=this.radius_,f=void 0===this.radius2_?d:this.radius2_;if(d<f){const B=d;d=f,f=B}const g=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),y=f*Math.sin(g),v=d-Math.sqrt(f*f-y*y),b=Math.sqrt(y*y+v*v),S=b/y;if("miter"===a&&S<=h)return S*l;const T=l/2/S,x=l/2*(v/b),I=Math.sqrt((d+T)*(d+T)+x*x)-d;if(void 0===this.radius2_||"bevel"===a)return 2*I;const M=d*Math.sin(g),L=f-Math.sqrt(d*d-M*M),F=Math.sqrt(M*M+L*L)/M;return F<=h?2*Math.max(I,F*l/2-f-d):2*I}createRenderOptions(){let f,a=ky,l=0,h=null,d=0,m=0;this.stroke_&&(f=this.stroke_.getColor(),null===f&&(f=jb),f=mu(f),m=this.stroke_.getWidth(),void 0===m&&(m=1),h=this.stroke_.getLineDash(),d=this.stroke_.getLineDashOffset(),a=this.stroke_.getLineJoin(),void 0===a&&(a=ky),l=this.stroke_.getMiterLimit(),void 0===l&&(l=10));const g=this.calculateLineJoinSize_(a,m,l),y=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:f,strokeWidth:m,size:Math.ceil(2*y+g),lineDash:h,lineDashOffset:d,lineJoin:a,miterLimit:l}}render(){this.renderOptions_=this.createRenderOptions();const a=this.renderOptions_.size;this.canvas_={},this.size_=[a,a]}draw_(a,l,h){if(l.scale(h,h),l.translate(a.size/2,a.size/2),this.createPath_(l),this.fill_){let d=this.fill_.getColor();null===d&&(d=wh),l.fillStyle=mu(d),l.fill()}this.stroke_&&(l.strokeStyle=a.strokeStyle,l.lineWidth=a.strokeWidth,a.lineDash&&(l.setLineDash(a.lineDash),l.lineDashOffset=a.lineDashOffset),l.lineJoin=a.lineJoin,l.miterLimit=a.miterLimit,l.stroke())}createHitDetectionCanvas_(a){if(this.fill_){let l=this.fill_.getColor(),h=0;if("string"==typeof l&&(l=Pb(l)),null===l?h=1:Array.isArray(l)&&(h=4===l.length?l[3]:1),0===h){const d=Yr(a.size,a.size);this.hitDetectionCanvas_=d.canvas,this.drawHitDetectionCanvas_(a,d)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(a){let l=this.points_;const h=this.radius_;if(l===1/0)a.arc(0,0,h,0,2*Math.PI);else{const d=void 0===this.radius2_?h:this.radius2_;void 0!==this.radius2_&&(l*=2);const f=this.angle_-Math.PI/2,m=2*Math.PI/l;for(let g=0;g<l;g++){const y=f+g*m,_=g%2==0?h:d;a.lineTo(_*Math.cos(y),_*Math.sin(y))}a.closePath()}}drawHitDetectionCanvas_(a,l){l.translate(a.size/2,a.size/2),this.createPath_(l),l.fillStyle=wh,l.fill(),this.stroke_&&(l.strokeStyle=a.strokeStyle,l.lineWidth=a.strokeWidth,a.lineDash&&(l.setLineDash(a.lineDash),l.lineDashOffset=a.lineDashOffset),l.lineJoin=a.lineJoin,l.miterLimit=a.miterLimit,l.stroke())}}const Ej=TO;class wO extends Ej{constructor(a){super({points:1/0,fill:(a=a||{radius:5}).fill,radius:a.radius,stroke:a.stroke,scale:void 0!==a.scale?a.scale:1,rotation:void 0!==a.rotation?a.rotation:0,rotateWithView:void 0!==a.rotateWithView&&a.rotateWithView,displacement:void 0!==a.displacement?a.displacement:[0,0],declutterMode:a.declutterMode})}clone(){const a=this.getScale(),l=new wO({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(a)?a.slice():a,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return l.setOpacity(this.getOpacity()),l}setRadius(a){this.radius_=a,this.render()}}const Xp=wO;class CO{constructor(a){this.color_=void 0!==(a=a||{}).color?a.color:null}clone(){const a=this.getColor();return new CO({color:Array.isArray(a)?a.slice():a||void 0})}getColor(){return this.color_}setColor(a){this.color_=a}}const yr=CO;class xO{constructor(a){this.color_=void 0!==(a=a||{}).color?a.color:null,this.lineCap_=a.lineCap,this.lineDash_=void 0!==a.lineDash?a.lineDash:null,this.lineDashOffset_=a.lineDashOffset,this.lineJoin_=a.lineJoin,this.miterLimit_=a.miterLimit,this.width_=a.width}clone(){const a=this.getColor();return new xO({color:Array.isArray(a)?a.slice():a||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(a){this.color_=a}setLineCap(a){this.lineCap_=a}setLineDash(a){this.lineDash_=a}setLineDashOffset(a){this.lineDashOffset_=a}setLineJoin(a){this.lineJoin_=a}setMiterLimit(a){this.miterLimit_=a}setWidth(a){this.width_=a}}const _s=xO;class Wd{constructor(a){a=a||{},this.geometry_=null,this.geometryFunction_=Mj,void 0!==a.geometry&&this.setGeometry(a.geometry),this.fill_=void 0!==a.fill?a.fill:null,this.image_=void 0!==a.image?a.image:null,this.renderer_=void 0!==a.renderer?a.renderer:null,this.hitDetectionRenderer_=void 0!==a.hitDetectionRenderer?a.hitDetectionRenderer:null,this.stroke_=void 0!==a.stroke?a.stroke:null,this.text_=void 0!==a.text?a.text:null,this.zIndex_=a.zIndex}clone(){let a=this.getGeometry();return a&&"object"==typeof a&&(a=a.clone()),new Wd({geometry:a,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(a){this.renderer_=a}setHitDetectionRenderer(a){this.hitDetectionRenderer_=a}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(a){this.fill_=a}getImage(){return this.image_}setImage(a){this.image_=a}getStroke(){return this.stroke_}setStroke(a){this.stroke_=a}getText(){return this.text_}setText(a){this.text_=a}getZIndex(){return this.zIndex_}setGeometry(a){"function"==typeof a?this.geometryFunction_=a:"string"==typeof a?this.geometryFunction_=function(l){return l.get(a)}:a?void 0!==a&&(this.geometryFunction_=function(){return a}):this.geometryFunction_=Mj,this.geometry_=a}setZIndex(a){this.zIndex_=a}}let EO=null;function BSe(c,a){if(!EO){const l=new yr({color:"rgba(255,255,255,0.4)"}),h=new _s({color:"#3399CC",width:1.25});EO=[new Wd({image:new Xp({fill:l,stroke:h,radius:5}),fill:l,stroke:h})]}return EO}function Mj(c){return c.getGeometry()}const er=Wd,MO=class USe extends xb{constructor(a,l,h,d){super(),this.extent=a,this.pixelRatio_=h,this.resolution=l,this.state=d}changed(){this.dispatchEvent("change")}getExtent(){return this.extent}getImage(){return Rn()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){Rn()}};function DO(c,a,l){const h=c;let d=!0,f=!1,m=!1;const g=[Eb(h,"load",function(){m=!0,f||a()})];return h.src&&d0e?(f=!0,h.decode().then(function(){d&&a()}).catch(function(y){d&&(m?a():l())})):g.push(Eb(h,"error",l)),function(){d=!1,g.forEach(or)}}const Dj=class zSe extends MO{constructor(a,l,h,d,f,m,g){super(a,l,h,0),this.src_=d,this.image_=new Image,null!==f&&(this.image_.crossOrigin=f),this.context_=g,this.unlisten_=null,this.state=0,this.imageLoadFunction_=m}getImage(){if(2==this.state&&this.context_&&!(this.image_ instanceof HTMLCanvasElement)){const a=this.context_.canvas;a.width=this.image_.width,a.height=this.image_.height,this.context_.drawImage(this.image_,0,0),this.image_=this.context_.canvas}return this.image_}handleImageError_(){this.state=3,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=gr(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()}load(){(0==this.state||3==this.state)&&(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=DO(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(a){this.image_=a,this.resolution=gr(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};let Zb=null;class GSe extends xb{constructor(a,l,h,d,f,m){super(),this.hitDetectionImage_=null,this.image_=a,this.crossOrigin_=d,this.canvas_={},this.color_=m,this.unlisten_=null,this.imageState_=f,this.size_=h,this.src_=l}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&2===this.imageState_){Zb||(Zb=Yr(1,1,void 0,{willReadFrequently:!0})),Zb.drawImage(this.image_,0,0);try{Zb.getImageData(0,0,1,1),this.tainted_=!1}catch{Zb=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent("change")}handleImageError_(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=2,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(a){return this.image_||this.initializeImage_(),this.replaceColor_(a),this.canvas_[a]?this.canvas_[a]:this.image_}getPixelRatio(a){return this.replaceColor_(a),this.canvas_[a]?a:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const a=this.size_[0],l=this.size_[1],h=Yr(a,l);h.fillRect(0,0,a,l),this.hitDetectionImage_=h.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(0===this.imageState_){this.image_||this.initializeImage_(),this.imageState_=1;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=DO(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(a){if(!this.color_||this.canvas_[a]||2!==this.imageState_)return;const l=this.image_,h=document.createElement("canvas");h.width=Math.ceil(l.width*a),h.height=Math.ceil(l.height*a);const d=h.getContext("2d");d.scale(a,a),d.drawImage(l,0,0),d.globalCompositeOperation="multiply",d.fillStyle=h7(this.color_),d.fillRect(0,0,h.width/a,h.height/a),d.globalCompositeOperation="destination-in",d.drawImage(l,0,0),this.canvas_[a]=h}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}class AO extends xj{constructor(a){super({opacity:void 0!==(a=a||{}).opacity?a.opacity:1,rotation:void 0!==a.rotation?a.rotation:0,scale:void 0!==a.scale?a.scale:1,displacement:void 0!==a.displacement?a.displacement:[0,0],rotateWithView:void 0!==a.rotateWithView&&a.rotateWithView,declutterMode:a.declutterMode}),this.anchor_=void 0!==a.anchor?a.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==a.anchorOrigin?a.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==a.anchorXUnits?a.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==a.anchorYUnits?a.anchorYUnits:"fraction",this.crossOrigin_=void 0!==a.crossOrigin?a.crossOrigin:null;const m=void 0!==a.img?a.img:null;this.imgSize_=a.imgSize;let g=a.src;En(!(void 0!==g&&m),4),En(!m||m&&this.imgSize_,5),(void 0===g||0===g.length)&&m&&(g=m.src||an(m)),En(void 0!==g&&g.length>0,6),En(!((void 0!==a.width||void 0!==a.height)&&void 0!==a.scale),69);const y=void 0!==a.src?0:2;if(this.color_=void 0!==a.color?Pb(a.color):null,this.iconImage_=function HSe(c,a,l,h,d,f){let m=Tx.get(a,h,f);return m||(m=new GSe(c,a,l,h,d,f),Tx.set(a,h,f,m)),m}(m,g,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,y,this.color_),this.offset_=void 0!==a.offset?a.offset:[0,0],this.offsetOrigin_=void 0!==a.offsetOrigin?a.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==a.size?a.size:null,this.width_=a.width,this.height_=a.height,void 0!==this.width_||void 0!==this.height_){const _=this.getImage(1),v=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};_.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):_.addEventListener("load",v)}}clone(){let a=this.getScale();return a=Array.isArray(a)?a.slice():a,(void 0!==this.width_||void 0!==this.height_)&&(a=void 0),new AO({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:a,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(a,l){const h=this.getImage(1);super.setScale(void 0!==a&&void 0!==l?[a/h.width,l/h.height]:void 0!==a?[a/h.width,a/h.width]:void 0!==l?[l/h.height,l/h.height]:[1,1])}getAnchor(){let a=this.normalizedAnchor_;if(!a){a=this.anchor_;const d=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!d)return null;a=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(a[0]*=d[0]),"fraction"==this.anchorYUnits_&&(a[1]*=d[1])}if("top-left"!=this.anchorOrigin_){if(!d)return null;a===this.anchor_&&(a=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(a[0]=-a[0]+d[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(a[1]=-a[1]+d[1])}this.normalizedAnchor_=a}const l=this.getDisplacement(),h=this.getScaleArray();return[a[0]-l[0]/h[0],a[1]+l[1]/h[1]]}setAnchor(a){this.anchor_=a,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(a){return this.iconImage_.getImage(a)}getPixelRatio(a){return this.iconImage_.getPixelRatio(a)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let a=this.offset_;if("top-left"!=this.offsetOrigin_){const l=this.getSize(),h=this.iconImage_.getSize();if(!l||!h)return null;a=a.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(a[0]=h[0]-l[0]-a[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(a[1]=h[1]-l[1]-a[1])}return this.origin_=a,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(a){this.width_=a,this.updateScaleFromWidthAndHeight(a,this.height_)}setHeight(a){this.height_=a,this.updateScaleFromWidthAndHeight(this.width_,a)}setScale(a){super.setScale(a);const l=this.getImage(1);if(l){const h=Array.isArray(a)?a[0]:a;void 0!==h&&(this.width_=h*l.width);const d=Array.isArray(a)?a[1]:a;void 0!==d&&(this.height_=d*l.height)}}listenImageChange(a){this.iconImage_.addEventListener("change",a)}load(){this.iconImage_.load()}unlistenImageChange(a){this.iconImage_.removeEventListener("change",a)}}const Uy=AO;class IO{constructor(a){this.font_=(a=a||{}).font,this.rotation_=a.rotation,this.rotateWithView_=a.rotateWithView,this.scale_=a.scale,this.scaleArray_=So(void 0!==a.scale?a.scale:1),this.text_=a.text,this.textAlign_=a.textAlign,this.justify_=a.justify,this.repeat_=a.repeat,this.textBaseline_=a.textBaseline,this.fill_=void 0!==a.fill?a.fill:new yr({color:"#333"}),this.maxAngle_=void 0!==a.maxAngle?a.maxAngle:Math.PI/4,this.placement_=void 0!==a.placement?a.placement:"point",this.overflow_=!!a.overflow,this.stroke_=void 0!==a.stroke?a.stroke:null,this.offsetX_=void 0!==a.offsetX?a.offsetX:0,this.offsetY_=void 0!==a.offsetY?a.offsetY:0,this.backgroundFill_=a.backgroundFill?a.backgroundFill:null,this.backgroundStroke_=a.backgroundStroke?a.backgroundStroke:null,this.padding_=void 0===a.padding?null:a.padding}clone(){const a=this.getScale();return new IO({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(a)?a.slice():a,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(a){this.overflow_=a}setFont(a){this.font_=a}setMaxAngle(a){this.maxAngle_=a}setOffsetX(a){this.offsetX_=a}setOffsetY(a){this.offsetY_=a}setPlacement(a){this.placement_=a}setRepeat(a){this.repeat_=a}setRotateWithView(a){this.rotateWithView_=a}setFill(a){this.fill_=a}setRotation(a){this.rotation_=a}setScale(a){this.scale_=a,this.scaleArray_=So(void 0!==a?a:1)}setStroke(a){this.stroke_=a}setText(a){this.text_=a}setTextAlign(a){this.textAlign_=a}setJustify(a){this.justify_=a}setTextBaseline(a){this.textBaseline_=a}setBackgroundFill(a){this.backgroundFill_=a}setBackgroundStroke(a){this.backgroundStroke_=a}setPadding(a){this.padding_=a}}const Xd=IO;function Aj(c){return new er({fill:Kb(c,""),stroke:Jb(c,""),text:WSe(c),image:XSe(c)})}function Kb(c,a){const l=c[a+"fill-color"];if(l)return new yr({color:l})}function Jb(c,a){const l=c[a+"stroke-width"],h=c[a+"stroke-color"];if(l||h)return new _s({width:l,color:h,lineCap:c[a+"stroke-line-cap"],lineJoin:c[a+"stroke-line-join"],lineDash:c[a+"stroke-line-dash"],lineDashOffset:c[a+"stroke-line-dash-offset"],miterLimit:c[a+"stroke-miter-limit"]})}function WSe(c){const a=c["text-value"];return a?new Xd({text:a,font:c["text-font"],maxAngle:c["text-max-angle"],offsetX:c["text-offset-x"],offsetY:c["text-offset-y"],overflow:c["text-overflow"],placement:c["text-placement"],repeat:c["text-repeat"],scale:c["text-scale"],rotateWithView:c["text-rotate-with-view"],rotation:c["text-rotation"],textAlign:c["text-align"],justify:c["text-justify"],textBaseline:c["text-baseline"],padding:c["text-padding"],fill:Kb(c,"text-"),backgroundFill:Kb(c,"text-background-"),stroke:Jb(c,"text-"),backgroundStroke:Jb(c,"text-background-")}):void 0}function XSe(c){const a=c["icon-src"],l=c["icon-img"];if(a||l)return new Uy({src:a,img:l,imgSize:c["icon-img-size"],anchor:c["icon-anchor"],anchorOrigin:c["icon-anchor-origin"],anchorXUnits:c["icon-anchor-x-units"],anchorYUnits:c["icon-anchor-y-units"],color:c["icon-color"],crossOrigin:c["icon-cross-origin"],offset:c["icon-offset"],displacement:c["icon-displacement"],opacity:c["icon-opacity"],scale:c["icon-scale"],rotation:c["icon-rotation"],rotateWithView:c["icon-rotate-with-view"],size:c["icon-size"],declutterMode:c["icon-declutter-mode"]});const h=c["shape-points"];if(h){const f="shape-";return new Ej({points:h,fill:Kb(c,f),stroke:Jb(c,f),radius:c["shape-radius"],radius1:c["shape-radius1"],radius2:c["shape-radius2"],angle:c["shape-angle"],displacement:c["shape-displacement"],rotation:c["shape-rotation"],rotateWithView:c["shape-rotate-with-view"],scale:c["shape-scale"],declutterMode:c["shape-declutter-mode"]})}const d=c["circle-radius"];if(d){const f="circle-";return new Xp({radius:d,fill:Kb(c,f),stroke:Jb(c,f),displacement:c["circle-displacement"],scale:c["circle-scale"],rotation:c["circle-rotation"],rotateWithView:c["circle-rotate-with-view"],declutterMode:c["circle-declutter-mode"]})}}const zy=class qSe extends lo{constructor(a){a=a||{};const l=Object.assign({},a);delete l.style,delete l.renderBuffer,delete l.updateWhileAnimating,delete l.updateWhileInteracting,super(l),this.declutter_=void 0!==a.declutter&&a.declutter,this.renderBuffer_=void 0!==a.renderBuffer?a.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(a.style),this.updateWhileAnimating_=void 0!==a.updateWhileAnimating&&a.updateWhileAnimating,this.updateWhileInteracting_=void 0!==a.updateWhileInteracting&&a.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(a){return super.getFeatures(a)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(a){a.declutterTree||(a.declutterTree=new bO(9)),this.getRenderer().renderDeclutter(a)}setRenderOrder(a){this.set("renderOrder",a)}setStyle(a){let l;if(void 0===a)l=BSe;else if(null===a)l=null;else if("function"==typeof a)l=a;else if(a instanceof er)l=a;else if(Array.isArray(a)){const h=a.length,d=new Array(h);for(let f=0;f<h;++f){const m=a[f];d[f]=m instanceof er?m:Aj(m)}l=d}else l=Aj(a);this.style_=l,this.styleFunction_=null===a?void 0:function VSe(c){let a;if("function"==typeof c)a=c;else{let l;Array.isArray(c)?l=c:(En("function"==typeof c.getZIndex,41),l=[c]),a=function(){return l}}return a}(this.style_),this.changed()}},Rj=class $Se extends lo{constructor(a){super(a=a||{})}},RO=class YSe extends Z9{constructor(a){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=a,this.declutterExecutorGroup=null}getFeatures(a){return Rn()}getData(a){return null}prepareFrame(a){return Rn()}renderFrame(a,l){return Rn()}loadedTileCallback(a,l,h){a[l]||(a[l]={}),a[l][h.tileCoord.toString()]=h}createLoadedTileFinder(a,l,h){return(d,f)=>{const m=this.loadedTileCallback.bind(this,h,d);return a.forEachLoadedTile(l,d,f,m)}}forEachFeatureAtCoordinate(a,l,h,d,f){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(a){2===a.target.getState()&&this.renderIfReadyAndVisible()}loadImage(a){let l=a.getState();return 2!=l&&3!=l&&a.addEventListener("change",this.boundHandleImageChange_),0==l&&(a.load(),l=a.getState()),2==l}renderIfReadyAndVisible(){const a=this.getLayer();a&&a.getVisible()&&"ready"===a.getSourceState()&&a.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}},Lj=[];let Gy=null;const LO=class KSe extends RO{constructor(a){super(a),this.container=null,this.tempTransform=[1,0,0,1,0,0],this.pixelTransform=[1,0,0,1,0,0],this.inversePixelTransform=[1,0,0,1,0,0],this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(a,l,h){let d;Gy||function ZSe(){Gy=Yr(1,1,void 0,{willReadFrequently:!0})}(),Gy.clearRect(0,0,1,1);try{Gy.drawImage(a,l,h,1,1,0,0,1,1),d=Gy.getImageData(0,0,1,1).data}catch{return Gy=null,null}return d}getBackground(a){let h=this.getLayer().getBackground();return"function"==typeof h&&(h=h(a.viewState.resolution)),h||void 0}useContainer(a,l,h){const d=this.getLayer().getClassName();let f,m;if(a&&a.className===d&&(!h||a&&a.style.backgroundColor&&yh(Pb(a.style.backgroundColor),Pb(h)))){const g=a.firstElementChild;g instanceof HTMLCanvasElement&&(m=g.getContext("2d"))}if(m&&m.canvas.style.transform===l?(this.container=a,this.context=m,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){f=document.createElement("div"),f.className=d;let g=f.style;g.position="absolute",g.width="100%",g.height="100%",m=Yr();const y=m.canvas;f.appendChild(y),g=y.style,g.position="absolute",g.left="0",g.transformOrigin="top left",this.container=f,this.context=m}!this.containerReused&&h&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=h)}clipUnrotated(a,l,h){const d=Tc(h),f=bx(h),m=Ib(h),g=vx(h);Or(l.coordinateToPixelTransform,d),Or(l.coordinateToPixelTransform,f),Or(l.coordinateToPixelTransform,m),Or(l.coordinateToPixelTransform,g);const y=this.inversePixelTransform;Or(y,d),Or(y,f),Or(y,m),Or(y,g),a.save(),a.beginPath(),a.moveTo(Math.round(d[0]),Math.round(d[1])),a.lineTo(Math.round(f[0]),Math.round(f[1])),a.lineTo(Math.round(m[0]),Math.round(m[1])),a.lineTo(Math.round(g[0]),Math.round(g[1])),a.clip()}dispatchRenderEvent_(a,l,h){const d=this.getLayer();if(d.hasListener(a)){const f=new Vb(a,this.inversePixelTransform,h,l);d.dispatchEvent(f)}}preRender(a,l){this.frameState=l,this.dispatchRenderEvent_("prerender",a,l)}postRender(a,l){this.dispatchRenderEvent_("postrender",a,l)}getRenderTransform(a,l,h,d,f,m,g){const v=d/l;return sa(this.tempTransform,f/2,m/2,v,-v,-h,-a[0]+g,-a[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}},Pj=class JSe extends LO{constructor(a){super(a),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(a){const l=a.layerStatesArray[a.layerIndex],h=a.pixelRatio,d=a.viewState,f=d.resolution,m=this.getLayer().getSource(),g=a.viewHints;let y=a.extent;if(void 0!==l.extent&&(y=Sc(y,Sh(l.extent))),!g[0]&&!g[1]&&!Ry(y))if(m){const v=m.getImage(y,f,h,d.projection);v&&(this.loadImage(v)?this.image_=v:4===v.getState()&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(a){const l=this.frameState;if(!l)return null;const h=this.getLayer(),d=Or(l.pixelToCoordinateTransform,a.slice()),f=h.getExtent();if(f&&!lu(f,d))return null;const m=this.image_.getExtent(),g=this.getImage(),y=Kn(m),_=Math.floor(g.width*((d[0]-m[0])/y));if(_<0||_>=g.width)return null;const v=gr(m),b=Math.floor(g.height*((m[3]-d[1])/v));return b<0||b>=g.height?null:this.getImageData(g,_,b)}renderFrame(a,l){const h=this.image_,d=h.getExtent(),f=h.getResolution(),m=h.getPixelRatio(),g=a.layerStatesArray[a.layerIndex],y=a.pixelRatio,_=a.viewState,v=_.center,S=y*f/(_.resolution*m),T=a.extent,x=_.resolution,E=_.rotation,I=Math.round(Kn(T)/x*y),M=Math.round(gr(T)/x*y);sa(this.pixelTransform,a.size[0]/2,a.size[1]/2,1/y,1/y,E,-I/2,-M/2),Dy(this.inversePixelTransform,this.pixelTransform);const D=yx(this.pixelTransform);this.useContainer(l,D,this.getBackground(a));const L=this.context,P=L.canvas;P.width!=I||P.height!=M?(P.width=I,P.height=M):this.containerReused||L.clearRect(0,0,I,M);let F=!1,B=!0;if(g.extent){const j=Sh(g.extent);B=Mr(j,a.extent),F=B&&!Ia(j,a.extent),F&&this.clipUnrotated(L,a,j)}const G=this.getImage(),$=sa(this.tempTransform,I/2,M/2,S,S,0,m*(d[0]-v[0])/f,m*(v[1]-d[3])/f);this.renderedResolution=f*y/m;const se=G.width*$[0],ie=G.height*$[3];if(this.getLayer().getSource().getInterpolate()||(L.imageSmoothingEnabled=!1),this.preRender(L,a),B&&se>=.5&&ie>=.5){const j=$[4],J=$[5],ae=g.opacity;let ue;1!==ae&&(ue=L.globalAlpha,L.globalAlpha=ae),L.drawImage(G,0,0,+G.width,+G.height,j,J,se,ie),1!==ae&&(L.globalAlpha=ue)}return this.postRender(L,a),F&&L.restore(),L.imageSmoothingEnabled=!0,D!==P.style.transform&&(P.style.transform=D),this.container}},qd=class QSe extends Rj{constructor(a){super(a)}createRenderer(){return new Pj(this)}getData(a){return super.getData(a)}},Xx=class e1e extends xb{constructor(a,l,h){super(),h=h||{},this.tileCoord=a,this.state=l,this.interimTile=null,this.key="",this.transition_=void 0===h.transition?250:h.transition,this.transitionStarts_={},this.interpolate=!!h.interpolate}changed(){this.dispatchEvent("change")}release(){3===this.state&&this.setState(4)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let a=this.interimTile;do{if(2==a.getState())return this.transition_=0,a;a=a.interimTile}while(a);return this}refreshInterimChain(){if(!this.interimTile)return;let a=this.interimTile,l=this;do{if(2==a.getState()){a.interimTile=null;break}1==a.getState()?l=a:0==a.getState()?l.interimTile=a.interimTile:l=a,a=l.interimTile}while(a)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(a){if(3!==this.state&&this.state>a)throw new Error("Tile load sequence violation");this.state=a,this.changed()}load(){Rn()}getAlpha(a,l){if(!this.transition_)return 1;let h=this.transitionStarts_[a];if(h){if(-1===h)return 1}else h=l,this.transitionStarts_[a]=h;const d=l-h+1e3/60;return d>=this.transition_?1:F7(d/this.transition_)}inTransition(a){return!!this.transition_&&-1!==this.transitionStarts_[a]}endTransition(a){this.transition_&&(this.transitionStarts_[a]=-1)}},Oj=class t1e extends Xx{constructor(a,l,h,d,f,m){super(a,l,m),this.crossOrigin_=d,this.src_=h,this.key=h,this.image_=new Image,null!==d&&(this.image_.crossOrigin=d),this.unlisten_=null,this.tileLoadFunction_=f}getImage(){return this.image_}setImage(a){this.image_=a,this.state=2,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=3,this.unlistenImage_(),this.image_=function n1e(){const c=Yr(1,1);return c.fillStyle="rgba(0,0,0,0)",c.fillRect(0,0,1,1),c.canvas}(),this.changed()}handleImageLoad_(){const a=this.image_;this.state=a.naturalWidth&&a.naturalHeight?2:4,this.unlistenImage_(),this.changed()}load(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=DO(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}},kj=class r1e{constructor(a,l,h,d,f,m){this.sourceProj_=a,this.targetProj_=l;let g={};const y=uu(this.targetProj_,this.sourceProj_);this.transformInv_=function(D){const L=D[0]+"/"+D[1];return g[L]||(g[L]=y(D)),g[L]},this.maxSourceExtent_=d,this.errorThresholdSquared_=f*f,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!d&&!!this.sourceProj_.getExtent()&&Kn(d)==Kn(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Kn(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Kn(this.targetProj_.getExtent()):null;const _=Tc(h),v=bx(h),b=Ib(h),S=vx(h),T=this.transformInv_(_),x=this.transformInv_(v),E=this.transformInv_(b),I=this.transformInv_(S),M=10+(m?Math.max(0,Math.ceil(Math.log2(_x(h)/(m*m*256*256)))):0);if(this.addQuad_(_,v,b,S,T,x,E,I,M),this.wrapsXInSource_){let D=1/0;this.triangles_.forEach(function(L,P,F){D=Math.min(D,L.source[0][0],L.source[1][0],L.source[2][0])}),this.triangles_.forEach(L=>{if(Math.max(L.source[0][0],L.source[1][0],L.source[2][0])-D>this.sourceWorldWidth_/2){const P=[[L.source[0][0],L.source[0][1]],[L.source[1][0],L.source[1][1]],[L.source[2][0],L.source[2][1]]];P[0][0]-D>this.sourceWorldWidth_/2&&(P[0][0]-=this.sourceWorldWidth_),P[1][0]-D>this.sourceWorldWidth_/2&&(P[1][0]-=this.sourceWorldWidth_),P[2][0]-D>this.sourceWorldWidth_/2&&(P[2][0]-=this.sourceWorldWidth_);const F=Math.min(P[0][0],P[1][0],P[2][0]);Math.max(P[0][0],P[1][0],P[2][0])-F<this.sourceWorldWidth_/2&&(L.source=P)}})}g={}}addTriangle_(a,l,h,d,f,m){this.triangles_.push({source:[d,f,m],target:[a,l,h]})}addQuad_(a,l,h,d,f,m,g,y,_){const v=CP([f,m,g,y]),b=this.sourceWorldWidth_?Kn(v)/this.sourceWorldWidth_:null,S=this.sourceWorldWidth_,T=this.sourceProj_.canWrapX()&&b>.5&&b<1;let x=!1;if(_>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(x=Kn(CP([a,l,h,d]))/this.targetWorldWidth_>.25||x),!T&&this.sourceProj_.isGlobal()&&b&&(x=b>.25||x)),!x&&this.maxSourceExtent_&&isFinite(v[0])&&isFinite(v[1])&&isFinite(v[2])&&isFinite(v[3])&&!Mr(v,this.maxSourceExtent_))return;let E=0;if(!(x||isFinite(f[0])&&isFinite(f[1])&&isFinite(m[0])&&isFinite(m[1])&&isFinite(g[0])&&isFinite(g[1])&&isFinite(y[0])&&isFinite(y[1])))if(_>0)x=!0;else if(E=(isFinite(f[0])&&isFinite(f[1])?0:8)+(isFinite(m[0])&&isFinite(m[1])?0:4)+(isFinite(g[0])&&isFinite(g[1])?0:2)+(isFinite(y[0])&&isFinite(y[1])?0:1),1!=E&&2!=E&&4!=E&&8!=E)return;if(_>0){if(!x){const M=this.transformInv_([(a[0]+h[0])/2,(a[1]+h[1])/2]);let D;D=T?(kd(f[0],S)+kd(g[0],S))/2-kd(M[0],S):(f[0]+g[0])/2-M[0];const L=(f[1]+g[1])/2-M[1];x=D*D+L*L>this.errorThresholdSquared_}if(x){if(Math.abs(a[0]-h[0])<=Math.abs(a[1]-h[1])){const I=[(l[0]+h[0])/2,(l[1]+h[1])/2],M=this.transformInv_(I),D=[(d[0]+a[0])/2,(d[1]+a[1])/2],L=this.transformInv_(D);this.addQuad_(a,l,I,D,f,m,M,L,_-1),this.addQuad_(D,I,h,d,L,M,g,y,_-1)}else{const I=[(a[0]+l[0])/2,(a[1]+l[1])/2],M=this.transformInv_(I),D=[(h[0]+d[0])/2,(h[1]+d[1])/2],L=this.transformInv_(D);this.addQuad_(a,I,D,d,f,M,L,y,_-1),this.addQuad_(I,l,h,D,M,m,g,L,_-1)}return}}if(T){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&E)&&this.addTriangle_(a,h,d,f,g,y),0==(14&E)&&this.addTriangle_(a,h,l,f,g,m),E&&(0==(13&E)&&this.addTriangle_(l,d,a,m,y,f),0==(7&E)&&this.addTriangle_(l,d,h,m,y,g))}calculateSourceExtent(){const a=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach(function(l,h,d){const f=l.source;Ay(a,f[0]),Ay(a,f[1]),Ay(a,f[2])}),a}getTriangles(){return this.triangles_}};let PO;const Hy=[];function Vj(c,a,l,h,d){c.beginPath(),c.moveTo(0,0),c.lineTo(a,l),c.lineTo(h,d),c.closePath(),c.save(),c.clip(),c.fillRect(0,0,Math.max(a,h)+1,Math.max(l,d)),c.restore()}function OO(c,a){return Math.abs(c[4*a]-210)>2||Math.abs(c[4*a+3]-191.25)>2}function Qb(c,a,l,h){const d=rl(l,a,c);let f=Lx(a,h,l);const m=a.getMetersPerUnit();void 0!==m&&(f*=m);const g=c.getMetersPerUnit();void 0!==g&&(f/=g);const y=c.getExtent();if(!y||lu(y,d)){const _=Lx(c,f,d)/f;isFinite(_)&&_>0&&(f/=_)}return f}function Bj(c,a,l,h,d,f,m,g,y,_,v,b){const S=Yr(Math.round(l*c),Math.round(l*a),Hy);if(b||(S.imageSmoothingEnabled=!1),0===y.length)return S.canvas;function T(P){return Math.round(P*l)/l}S.scale(l,l),S.globalCompositeOperation="lighter";const x=[1/0,1/0,-1/0,-1/0];y.forEach(function(P,F,B){DP(x,P.extent)});const E=Kn(x),I=gr(x),M=Yr(Math.round(l*E/h),Math.round(l*I/h),Hy);b||(M.imageSmoothingEnabled=!1);const D=l/h;y.forEach(function(P,F,B){const G=P.extent[0]-x[0],$=-(P.extent[3]-x[3]),se=Kn(P.extent),ie=gr(P.extent);P.image.width>0&&P.image.height>0&&M.drawImage(P.image,_,_,P.image.width-2*_,P.image.height-2*_,G*D,$*D,se*D,ie*D)});const L=Tc(m);return g.getTriangles().forEach(function(P,F,B){const G=P.source,$=P.target;let se=G[0][0],ie=G[0][1],j=G[1][0],J=G[1][1],ae=G[2][0],ue=G[2][1];const ge=T(($[0][0]-L[0])/f),K=T(-($[0][1]-L[1])/f),le=T(($[1][0]-L[0])/f),ye=T(-($[1][1]-L[1])/f),ke=T(($[2][0]-L[0])/f),_e=T(-($[2][1]-L[1])/f),Ne=se,me=ie;se=0,ie=0,j-=Ne,J-=me,ae-=Ne,ue-=me;const qe=function x0e(c){const a=c.length;for(let h=0;h<a;h++){let d=h,f=Math.abs(c[h][h]);for(let g=h+1;g<a;g++){const y=Math.abs(c[g][h]);y>f&&(f=y,d=g)}if(0===f)return null;const m=c[d];c[d]=c[h],c[h]=m;for(let g=h+1;g<a;g++){const y=-c[g][h]/c[h][h];for(let _=h;_<a+1;_++)h==_?c[g][_]=0:c[g][_]+=y*c[h][_]}}const l=new Array(a);for(let h=a-1;h>=0;h--){l[h]=c[h][a]/c[h][h];for(let d=h-1;d>=0;d--)c[d][a]-=c[d][h]*l[h]}return l}([[j,J,0,0,le-ge],[ae,ue,0,0,ke-ge],[0,0,j,J,ye-K],[0,0,ae,ue,_e-K]]);if(qe){if(S.save(),S.beginPath(),function s1e(){if(void 0===PO){const c=Yr(6,6,Hy);c.globalCompositeOperation="lighter",c.fillStyle="rgba(210, 0, 0, 0.75)",Vj(c,4,5,4,0),Vj(c,4,5,0,5);const a=c.getImageData(0,0,3,3).data;PO=OO(a,0)||OO(a,4)||OO(a,8),Ub(c),Hy.push(c.canvas)}return PO}()||!b){S.moveTo(le,ye);const Ae=4,Tn=ge-le,wt=K-ye;for(let Bt=0;Bt<Ae;Bt++)S.lineTo(le+T((Bt+1)*Tn/Ae),ye+T(Bt*wt/(Ae-1))),Bt!=Ae-1&&S.lineTo(le+T((Bt+1)*Tn/Ae),ye+T((Bt+1)*wt/(Ae-1)));S.lineTo(ke,_e)}else S.moveTo(le,ye),S.lineTo(ge,K),S.lineTo(ke,_e);S.clip(),S.transform(qe[0],qe[2],qe[1],qe[3],ge,K),S.translate(x[0]-Ne,x[3]-me),S.scale(h/l,-h/l),S.drawImage(M.canvas,0,0),S.restore()}}),Ub(M),Hy.push(M.canvas),v&&(S.save(),S.globalCompositeOperation="source-over",S.strokeStyle="black",S.lineWidth=1,g.getTriangles().forEach(function(P,F,B){const G=P.target,$=(G[0][0]-L[0])/f,se=-(G[0][1]-L[1])/f,ie=(G[1][0]-L[0])/f,j=-(G[1][1]-L[1])/f,J=(G[2][0]-L[0])/f,ae=-(G[2][1]-L[1])/f;S.beginPath(),S.moveTo(ie,j),S.lineTo($,se),S.lineTo(J,ae),S.closePath(),S.stroke()}),S.restore()),S.canvas}const NO=class a1e extends Xx{constructor(a,l,h,d,f,m,g,y,_,v,b,S){super(f,0,{interpolate:!!S}),this.renderEdges_=void 0!==b&&b,this.pixelRatio_=g,this.gutter_=y,this.canvas_=null,this.sourceTileGrid_=l,this.targetTileGrid_=d,this.wrappedTileCoord_=m||f,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const T=d.getTileCoordExtent(this.wrappedTileCoord_),x=this.targetTileGrid_.getExtent();let E=this.sourceTileGrid_.getExtent();const I=x?Sc(T,x):T;if(0===_x(I))return void(this.state=4);const M=a.getExtent();M&&(E=E?Sc(E,M):M);const D=d.getResolution(this.wrappedTileCoord_[0]),L=function o1e(c,a,l,h){const d=aa(l);let f=Qb(c,a,d,h);return(!isFinite(f)||f<=0)&&o7(l,function(m){return f=Qb(c,a,m,h),isFinite(f)&&f>0}),f}(a,h,I,D);if(!isFinite(L)||L<=0)return void(this.state=4);if(this.triangulation_=new kj(a,h,I,E,L*(void 0!==v?v:.5),D),0===this.triangulation_.getTriangles().length)return void(this.state=4);this.sourceZ_=l.getZForResolution(L);let F=this.triangulation_.calculateSourceExtent();if(E&&(a.canWrapX()?(F[1]=Qn(F[1],E[1],E[3]),F[3]=Qn(F[3],E[1],E[3])):F=Sc(F,E)),_x(F)){const B=l.getTileRangeForExtentAndZ(F,this.sourceZ_);for(let G=B.minX;G<=B.maxX;G++)for(let $=B.minY;$<=B.maxY;$++){const se=_(this.sourceZ_,G,$,g);se&&this.sourceTiles_.push(se)}0===this.sourceTiles_.length&&(this.state=4)}else this.state=4}getImage(){return this.canvas_}reproject_(){const a=[];if(this.sourceTiles_.forEach(l=>{l&&2==l.getState()&&a.push({extent:this.sourceTileGrid_.getTileCoordExtent(l.tileCoord),image:l.getImage()})}),this.sourceTiles_.length=0,0===a.length)this.state=3;else{const l=this.wrappedTileCoord_[0],h=this.targetTileGrid_.getTileSize(l),d="number"==typeof h?h:h[0],f="number"==typeof h?h:h[1],m=this.targetTileGrid_.getResolution(l),g=this.sourceTileGrid_.getResolution(this.sourceZ_),y=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Bj(d,f,this.pixelRatio_,g,this.sourceTileGrid_.getExtent(),m,y,this.triangulation_,a,this.gutter_,this.renderEdges_,this.interpolate),this.state=2}this.changed()}load(){if(0==this.state){this.state=1,this.changed();let a=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(l=>{const h=l.getState();if(0==h||1==h){a++;const d=Zn(l,"change",function(f){const m=l.getState();(2==m||3==m||4==m)&&(or(d),a--,0===a&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(d)}}),0===a?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(l,h,d){0==l.getState()&&l.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(or),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Ub(this.canvas_.getContext("2d")),Hy.push(this.canvas_),this.canvas_=null),super.release()}};class Uj{constructor(a,l,h,d){this.minX=a,this.maxX=l,this.minY=h,this.maxY=d}contains(a){return this.containsXY(a[1],a[2])}containsTileRange(a){return this.minX<=a.minX&&a.maxX<=this.maxX&&this.minY<=a.minY&&a.maxY<=this.maxY}containsXY(a,l){return this.minX<=a&&a<=this.maxX&&this.minY<=l&&l<=this.maxY}equals(a){return this.minX==a.minX&&this.minY==a.minY&&this.maxX==a.maxX&&this.maxY==a.maxY}extend(a){a.minX<this.minX&&(this.minX=a.minX),a.maxX>this.maxX&&(this.maxX=a.maxX),a.minY<this.minY&&(this.minY=a.minY),a.maxY>this.maxY&&(this.maxY=a.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(a){return this.minX<=a.maxX&&this.maxX>=a.minX&&this.minY<=a.maxY&&this.maxY>=a.minY}}function jy(c,a,l,h,d){return void 0!==d?(d.minX=c,d.maxX=a,d.minY=l,d.maxY=h,d):new Uj(c,a,l,h)}const zj=Uj,Gj=class l1e extends LO{constructor(a){super(a),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=[1/0,1/0,-1/0,-1/0],this.tmpTileRange_=new zj(0,0,0,0)}isDrawableTile(a){const l=this.getLayer(),h=a.getState(),d=l.getUseInterimTilesOnError();return 2==h||4==h||3==h&&!d}getTile(a,l,h,d){const f=d.pixelRatio,m=d.viewState.projection,g=this.getLayer();let _=g.getSource().getTile(a,l,h,f,m);return 3==_.getState()&&g.getUseInterimTilesOnError()&&g.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(_)||(_=_.getInterimTile()),_}getData(a){const l=this.frameState;if(!l)return null;const h=this.getLayer(),d=Or(l.pixelToCoordinateTransform,a.slice()),f=h.getExtent();if(f&&!lu(f,d))return null;const m=l.pixelRatio,g=l.viewState.projection,y=l.viewState,_=h.getRenderSource(),v=_.getTileGridForProjection(y.projection),b=_.getTilePixelRatio(l.pixelRatio);for(let S=v.getZForResolution(y.resolution);S>=v.getMinZoom();--S){const T=v.getTileCoordForCoordAndZ(d,S),x=_.getTile(S,T[1],T[2],m,g);if(!(x instanceof Oj||x instanceof NO)||x instanceof NO&&4===x.getState())return null;if(2!==x.getState())continue;const E=v.getOrigin(S),I=So(v.getTileSize(S)),M=v.getResolution(S),D=Math.floor(b*((d[0]-E[0])/M-T[1]*I[0])),L=Math.floor(b*((E[1]-d[1])/M-T[2]*I[1])),P=Math.round(b*_.getGutterForProjection(y.projection));return this.getImageData(x.getImage(),D+P,L+P)}return null}loadedTileCallback(a,l,h){return!!this.isDrawableTile(h)&&super.loadedTileCallback(a,l,h)}prepareFrame(a){return!!this.getLayer().getSource()}renderFrame(a,l){const h=a.layerStatesArray[a.layerIndex],d=a.viewState,f=d.projection,m=d.resolution,g=d.center,y=d.rotation,_=a.pixelRatio,v=this.getLayer(),b=v.getSource(),S=b.getRevision(),T=b.getTileGridForProjection(f),x=T.getZForResolution(m,b.zDirection),E=T.getResolution(x);let I=a.extent;const M=a.viewState.resolution,D=b.getTilePixelRatio(_),L=Math.round(Kn(I)/M*_),P=Math.round(gr(I)/M*_),F=h.extent&&Sh(h.extent);F&&(I=Sc(I,Sh(h.extent)));const B=E*L/2/D,G=E*P/2/D,$=[g[0]-B,g[1]-G,g[0]+B,g[1]+G],se=T.getTileRangeForExtentAndZ(I,x),ie={};ie[x]={};const j=this.createLoadedTileFinder(b,f,ie),J=this.tmpExtent,ae=this.tmpTileRange_;this.newTiles_=!1;const ue=y?AP(d.center,M,y,a.size):void 0;for(let Xe=se.minX;Xe<=se.maxX;++Xe)for(let qe=se.minY;qe<=se.maxY;++qe){if(y&&!T.tileCoordIntersectsViewport([x,Xe,qe],ue))continue;const Ae=this.getTile(x,Xe,qe,a);if(this.isDrawableTile(Ae)){const Bt=an(this);if(2==Ae.getState()){ie[x][Ae.tileCoord.toString()]=Ae;let Pe=Ae.inTransition(Bt);Pe&&1!==h.opacity&&(Ae.endTransition(Bt),Pe=!1),!this.newTiles_&&(Pe||!this.renderedTiles.includes(Ae))&&(this.newTiles_=!0)}if(1===Ae.getAlpha(Bt,a.time))continue}const Tn=T.getTileCoordChildTileRange(Ae.tileCoord,ae,J);let wt=!1;Tn&&(wt=j(x+1,Tn)),wt||T.forEachTileCoordParentTileRange(Ae.tileCoord,j,ae,J)}const ge=E/m*_/D;sa(this.pixelTransform,a.size[0]/2,a.size[1]/2,1/_,1/_,y,-L/2,-P/2);const K=yx(this.pixelTransform);this.useContainer(l,K,this.getBackground(a));const le=this.context,ye=le.canvas;Dy(this.inversePixelTransform,this.pixelTransform),sa(this.tempTransform,L/2,P/2,ge,ge,0,-L/2,-P/2),ye.width!=L||ye.height!=P?(ye.width=L,ye.height=P):this.containerReused||le.clearRect(0,0,L,P),F&&this.clipUnrotated(le,a,F),b.getInterpolate()||(le.imageSmoothingEnabled=!1),this.preRender(le,a),this.renderedTiles.length=0;let _e,Ne,me,ke=Object.keys(ie).map(Number);ke.sort(Ip),1!==h.opacity||this.containerReused&&!b.getOpaque(a.viewState.projection)?(_e=[],Ne=[]):ke=ke.reverse();for(let Xe=ke.length-1;Xe>=0;--Xe){const qe=ke[Xe],Ae=b.getTilePixelSize(qe,_,f),wt=T.getResolution(qe)/E,Bt=Ae[0]*wt*ge,Pe=Ae[1]*wt*ge,_n=T.getTileCoordForCoordAndZ(Tc($),qe),on=T.getTileCoordExtent(_n),et=Or(this.tempTransform,[D*(on[0]-$[0])/E,D*($[3]-on[3])/E]),Et=D*b.getGutterForProjection(f),pt=ie[qe];for(const Rt in pt){const Mt=pt[Rt],sn=Mt.tileCoord,ln=_n[1]-sn[1],ct=Math.round(et[0]-(ln-1)*Bt),ei=_n[2]-sn[2],mi=Math.round(et[1]-(ei-1)*Pe),fe=Math.round(et[0]-ln*Bt),re=Math.round(et[1]-ei*Pe),$e=ct-fe,mt=mi-re,Qt=x===qe,Je=Qt&&1!==Mt.getAlpha(an(this),a.time);let en=!1;if(!Je)if(_e){me=[fe,re,fe+$e,re,fe+$e,re+mt,fe,re+mt];for(let Se=0,Ve=_e.length;Se<Ve;++Se)if(x!==qe&&qe<Ne[Se]){const ut=_e[Se];Mr([fe,re,fe+$e,re+mt],[ut[0],ut[3],ut[4],ut[7]])&&(en||(le.save(),en=!0),le.beginPath(),le.moveTo(me[0],me[1]),le.lineTo(me[2],me[3]),le.lineTo(me[4],me[5]),le.lineTo(me[6],me[7]),le.moveTo(ut[6],ut[7]),le.lineTo(ut[4],ut[5]),le.lineTo(ut[2],ut[3]),le.lineTo(ut[0],ut[1]),le.clip())}_e.push(me),Ne.push(qe)}else le.clearRect(fe,re,$e,mt);this.drawTileImage(Mt,a,fe,re,$e,mt,Et,Qt),_e&&!Je?(en&&le.restore(),this.renderedTiles.unshift(Mt)):this.renderedTiles.push(Mt),this.updateUsedTiles(a.usedTiles,b,Mt)}}return this.renderedRevision=S,this.renderedResolution=E,this.extentChanged=!this.renderedExtent_||!Gl(this.renderedExtent_,$),this.renderedExtent_=$,this.renderedPixelRatio=_,this.renderedProjection=f,this.manageTilePyramid(a,b,T,_,f,I,x,v.getPreload()),this.scheduleExpireCache(a,b),this.postRender(le,a),h.extent&&le.restore(),le.imageSmoothingEnabled=!0,K!==ye.style.transform&&(ye.style.transform=K),this.container}drawTileImage(a,l,h,d,f,m,g,y){const _=this.getTileImage(a);if(!_)return;const v=an(this),b=l.layerStatesArray[l.layerIndex],S=b.opacity*(y?a.getAlpha(v,l.time):1),T=S!==this.context.globalAlpha;T&&(this.context.save(),this.context.globalAlpha=S),this.context.drawImage(_,g,g,_.width-2*g,_.height-2*g,h,d,f,m),T&&this.context.restore(),S!==b.opacity?l.animate=!0:y&&a.endTransition(v)}getImage(){const a=this.context;return a?a.canvas:null}getTileImage(a){return a.getImage()}scheduleExpireCache(a,l){if(l.canExpireCache()){const h=function(d,f,m){const g=an(d);g in m.usedTiles&&d.expireCache(m.viewState.projection,m.usedTiles[g])}.bind(null,l);a.postRenderFunctions.push(h)}}updateUsedTiles(a,l,h){const d=an(l);d in a||(a[d]={}),a[d][h.getKey()]=!0}manageTilePyramid(a,l,h,d,f,m,g,y,_){const v=an(l);v in a.wantedTiles||(a.wantedTiles[v]={});const b=a.wantedTiles[v],S=a.tileQueue,T=h.getMinZoom(),x=a.viewState.rotation,E=x?AP(a.viewState.center,a.viewState.resolution,x,a.size):void 0;let M,D,L,P,F,B,I=0;for(B=T;B<=g;++B)for(D=h.getTileRangeForExtentAndZ(m,B,D),L=h.getResolution(B),P=D.minX;P<=D.maxX;++P)for(F=D.minY;F<=D.maxY;++F)x&&!h.tileCoordIntersectsViewport([B,P,F],E)||(g-B<=y?(++I,M=l.getTile(B,P,F,d,f),0==M.getState()&&(b[M.getKey()]=!0,S.isKeyQueued(M.getKey())||S.enqueue([M,v,h.getTileCoordCenter(M.tileCoord),L])),void 0!==_&&_(M)):l.useTile(B,P,F,f));l.updateCacheSize(I,f)}},gu=class c1e extends Cj{constructor(a){super(a)}createRenderer(){return new Gj(this)}},eS={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},qx=[eS.FILL],$d=[eS.STROKE],qp=[eS.BEGIN_PATH],Hj=[eS.CLOSE_PATH],kn=eS,jj=class u1e{drawCustom(a,l,h,d){}drawGeometry(a){}setStyle(a){}drawCircle(a,l){}drawFeature(a,l){}drawGeometryCollection(a,l){}drawLineString(a,l){}drawMultiLineString(a,l){}drawMultiPoint(a,l){}drawMultiPolygon(a,l){}drawPoint(a,l){}drawPolygon(a,l){}drawText(a,l){}setFillStrokeStyle(a,l){}setImageStyle(a,l){}setTextStyle(a,l){}},tS=class h1e extends jj{constructor(a,l,h,d){super(),this.tolerance=a,this.maxExtent=l,this.pixelRatio=d,this.maxLineWidth=0,this.resolution=h,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(a){const l=this.pixelRatio;return 1==l?a:a.map(function(h){return h*l})}appendFlatPointCoordinates(a,l){const h=this.getBufferedMaxExtent(),d=this.tmpCoordinate_,f=this.coordinates;let m=f.length;for(let g=0,y=a.length;g<y;g+=l)d[0]=a[g],d[1]=a[g+1],lu(h,d)&&(f[m++]=d[0],f[m++]=d[1]);return m}appendFlatLineCoordinates(a,l,h,d,f,m){const g=this.coordinates;let y=g.length;const _=this.getBufferedMaxExtent();m&&(l+=d);let v=a[l],b=a[l+1];const S=this.tmpCoordinate_;let x,E,I,T=!0;for(x=l+d;x<h;x+=d)S[0]=a[x],S[1]=a[x+1],I=xP(_,S),I!==E?(T&&(g[y++]=v,g[y++]=b,T=!1),g[y++]=S[0],g[y++]=S[1]):1===I?(g[y++]=S[0],g[y++]=S[1],T=!1):T=!0,v=S[0],b=S[1],E=I;return(f&&T||x===l+d)&&(g[y++]=v,g[y++]=b),y}drawCustomCoordinates_(a,l,h,d,f){for(let m=0,g=h.length;m<g;++m){const y=h[m],_=this.appendFlatLineCoordinates(a,l,y,d,!1,!1);f.push(_),l=y}return l}drawCustom(a,l,h,d){this.beginGeometry(a,l);const f=a.getType(),m=a.getStride(),g=this.coordinates.length;let y,_,v,b,S;switch(f){case"MultiPolygon":y=a.getOrientedFlatCoordinates(),b=[];const T=a.getEndss();S=0;for(let x=0,E=T.length;x<E;++x){const I=[];S=this.drawCustomCoordinates_(y,S,T[x],m,I),b.push(I)}this.instructions.push([kn.CUSTOM,g,b,a,h,QP]),this.hitDetectionInstructions.push([kn.CUSTOM,g,b,a,d||h,QP]);break;case"Polygon":case"MultiLineString":v=[],y="Polygon"==f?a.getOrientedFlatCoordinates():a.getFlatCoordinates(),S=this.drawCustomCoordinates_(y,0,a.getEnds(),m,v),this.instructions.push([kn.CUSTOM,g,v,a,h,kb]),this.hitDetectionInstructions.push([kn.CUSTOM,g,v,a,d||h,kb]);break;case"LineString":case"Circle":y=a.getFlatCoordinates(),_=this.appendFlatLineCoordinates(y,0,y.length,m,!1,!1),this.instructions.push([kn.CUSTOM,g,_,a,h,Ud]),this.hitDetectionInstructions.push([kn.CUSTOM,g,_,a,d||h,Ud]);break;case"MultiPoint":y=a.getFlatCoordinates(),_=this.appendFlatPointCoordinates(y,m),_>g&&(this.instructions.push([kn.CUSTOM,g,_,a,h,Ud]),this.hitDetectionInstructions.push([kn.CUSTOM,g,_,a,d||h,Ud]));break;case"Point":y=a.getFlatCoordinates(),this.coordinates.push(y[0],y[1]),_=this.coordinates.length,this.instructions.push([kn.CUSTOM,g,_,a,h]),this.hitDetectionInstructions.push([kn.CUSTOM,g,_,a,d||h])}this.endGeometry(l)}beginGeometry(a,l){this.beginGeometryInstruction1_=[kn.BEGIN_GEOMETRY,l,0,a],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[kn.BEGIN_GEOMETRY,l,0,a],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const a=this.hitDetectionInstructions;let l;a.reverse();const h=a.length;let d,f,m=-1;for(l=0;l<h;++l)d=a[l],f=d[0],f==kn.END_GEOMETRY?m=l:f==kn.BEGIN_GEOMETRY&&(d[2]=l,Qve(this.hitDetectionInstructions,m,l),m=-1)}setFillStrokeStyle(a,l){const h=this.state;if(a){const d=a.getColor();h.fillStyle=mu(d||wh)}else h.fillStyle=void 0;if(l){const d=l.getColor();h.strokeStyle=mu(d||jb);const f=l.getLineCap();h.lineCap=void 0!==f?f:zx;const m=l.getLineDash();h.lineDash=m?m.slice():zb;const g=l.getLineDashOffset();h.lineDashOffset=g||0;const y=l.getLineJoin();h.lineJoin=void 0!==y?y:ky;const _=l.getWidth();h.lineWidth=void 0!==_?_:1;const v=l.getMiterLimit();h.miterLimit=void 0!==v?v:10,h.lineWidth>this.maxLineWidth&&(this.maxLineWidth=h.lineWidth,this.bufferedMaxExtent_=null)}else h.strokeStyle=void 0,h.lineCap=void 0,h.lineDash=null,h.lineDashOffset=void 0,h.lineJoin=void 0,h.lineWidth=void 0,h.miterLimit=void 0}createFill(a){const l=a.fillStyle,h=[kn.SET_FILL_STYLE,l];return"string"!=typeof l&&h.push(!0),h}applyStroke(a){this.instructions.push(this.createStroke(a))}createStroke(a){return[kn.SET_STROKE_STYLE,a.strokeStyle,a.lineWidth*this.pixelRatio,a.lineCap,a.lineJoin,a.miterLimit,this.applyPixelRatio(a.lineDash),a.lineDashOffset*this.pixelRatio]}updateFillStyle(a,l){const h=a.fillStyle;("string"!=typeof h||a.currentFillStyle!=h)&&(void 0!==h&&this.instructions.push(l.call(this,a)),a.currentFillStyle=h)}updateStrokeStyle(a,l){const h=a.strokeStyle,d=a.lineCap,f=a.lineDash,m=a.lineDashOffset,g=a.lineJoin,y=a.lineWidth,_=a.miterLimit;(a.currentStrokeStyle!=h||a.currentLineCap!=d||f!=a.currentLineDash&&!yh(a.currentLineDash,f)||a.currentLineDashOffset!=m||a.currentLineJoin!=g||a.currentLineWidth!=y||a.currentMiterLimit!=_)&&(void 0!==h&&l.call(this,a),a.currentStrokeStyle=h,a.currentLineCap=d,a.currentLineDash=f,a.currentLineDashOffset=m,a.currentLineJoin=g,a.currentLineWidth=y,a.currentMiterLimit=_)}endGeometry(a){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const l=[kn.END_GEOMETRY,a];this.instructions.push(l),this.hitDetectionInstructions.push(l)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=i7(this.maxExtent),this.maxLineWidth>0)&&tl(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}},Wj=class g1e extends tS{constructor(a,l,h,d){super(a,l,h,d)}drawFlatCoordinatess_(a,l,h,d){const f=this.state,m=void 0!==f.fillStyle,g=void 0!==f.strokeStyle,y=h.length;this.instructions.push(qp),this.hitDetectionInstructions.push(qp);for(let _=0;_<y;++_){const v=h[_],b=this.coordinates.length,S=this.appendFlatLineCoordinates(a,l,v,d,!0,!g),T=[kn.MOVE_TO_LINE_TO,b,S];this.instructions.push(T),this.hitDetectionInstructions.push(T),g&&(this.instructions.push(Hj),this.hitDetectionInstructions.push(Hj)),l=v}return m&&(this.instructions.push(qx),this.hitDetectionInstructions.push(qx)),g&&(this.instructions.push($d),this.hitDetectionInstructions.push($d)),l}drawCircle(a,l){const h=this.state;if(void 0===h.fillStyle&&void 0===h.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(a,l),void 0!==h.fillStyle&&this.hitDetectionInstructions.push([kn.SET_FILL_STYLE,wh]),void 0!==h.strokeStyle&&this.hitDetectionInstructions.push([kn.SET_STROKE_STYLE,h.strokeStyle,h.lineWidth,h.lineCap,h.lineJoin,h.miterLimit,h.lineDash,h.lineDashOffset]);const m=a.getFlatCoordinates(),g=a.getStride(),y=this.coordinates.length;this.appendFlatLineCoordinates(m,0,m.length,g,!1,!1);const _=[kn.CIRCLE,y];this.instructions.push(qp,_),this.hitDetectionInstructions.push(qp,_),void 0!==h.fillStyle&&(this.instructions.push(qx),this.hitDetectionInstructions.push(qx)),void 0!==h.strokeStyle&&(this.instructions.push($d),this.hitDetectionInstructions.push($d)),this.endGeometry(l)}drawPolygon(a,l){const h=this.state;if(void 0===h.fillStyle&&void 0===h.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(a,l),void 0!==h.fillStyle&&this.hitDetectionInstructions.push([kn.SET_FILL_STYLE,wh]),void 0!==h.strokeStyle&&this.hitDetectionInstructions.push([kn.SET_STROKE_STYLE,h.strokeStyle,h.lineWidth,h.lineCap,h.lineJoin,h.miterLimit,h.lineDash,h.lineDashOffset]);const m=a.getEnds(),g=a.getOrientedFlatCoordinates(),y=a.getStride();this.drawFlatCoordinatess_(g,0,m,y),this.endGeometry(l)}drawMultiPolygon(a,l){const h=this.state;if(void 0===h.fillStyle&&void 0===h.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(a,l),void 0!==h.fillStyle&&this.hitDetectionInstructions.push([kn.SET_FILL_STYLE,wh]),void 0!==h.strokeStyle&&this.hitDetectionInstructions.push([kn.SET_STROKE_STYLE,h.strokeStyle,h.lineWidth,h.lineCap,h.lineJoin,h.miterLimit,h.lineDash,h.lineDashOffset]);const m=a.getEndss(),g=a.getOrientedFlatCoordinates(),y=a.getStride();let _=0;for(let v=0,b=m.length;v<b;++v)_=this.drawFlatCoordinatess_(g,_,m[v],y);this.endGeometry(l)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const a=this.tolerance;if(0!==a){const l=this.coordinates;for(let h=0,d=l.length;h<d;++h)l[h]=Up(l[h],a)}return super.finish()}setFillStrokeStyles_(){const a=this.state;void 0!==a.fillStyle&&this.updateFillStyle(a,this.createFill),void 0!==a.strokeStyle&&this.updateStrokeStyle(a,this.applyStroke)}};function y1e(c,a,l,h,d){const f=[];let m=l,g=0,y=a.slice(l,2);for(;g<c&&m+d<h;){const[_,v]=y.slice(-2),b=a[m+d],S=a[m+d+1],T=Math.sqrt((b-_)*(b-_)+(S-v)*(S-v));if(g+=T,g>=c){const x=(c-g+T)/T,E=nl(_,b,x),I=nl(v,S,x);y.push(E,I),f.push(y),y=[E,I],g==c&&(m+=d),g=0}else if(g<c)y.push(a[m+d],a[m+d+1]),m+=d;else{const x=T-g,E=nl(_,b,x/T),I=nl(v,S,x/T);y.push(E,I),f.push(y),y=[E,I],g=0,m+=d}}return g>0&&f.push(y),f}function _1e(c,a,l,h,d){let v,b,S,T,x,E,I,M,D,L,f=l,m=l,g=0,y=0,_=l;for(b=l;b<h;b+=d){const P=a[b],F=a[b+1];void 0!==x&&(D=P-x,L=F-E,T=Math.sqrt(D*D+L*L),void 0!==I&&(y+=S,v=Math.acos((I*D+M*L)/(S*T)),v>c&&(y>g&&(g=y,f=_,m=b),y=0,_=b-d)),S=T,I=D,M=L),x=P,E=F}return y+=T,y>g?[_,b]:[f,m]}const nS={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},b1e={Circle:Wj,Default:tS,Image:class d1e extends tS{constructor(a,l,h,d){super(a,l,h,d),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(a,l){if(!this.image_)return;this.beginGeometry(a,l);const h=a.getFlatCoordinates(),d=a.getStride(),f=this.coordinates.length,m=this.appendFlatPointCoordinates(h,d);this.instructions.push([kn.DRAW_IMAGE,f,m,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([kn.DRAW_IMAGE,f,m,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(l)}drawMultiPoint(a,l){if(!this.image_)return;this.beginGeometry(a,l);const h=a.getFlatCoordinates(),d=a.getStride(),f=this.coordinates.length,m=this.appendFlatPointCoordinates(h,d);this.instructions.push([kn.DRAW_IMAGE,f,m,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([kn.DRAW_IMAGE,f,m,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(l)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(a,l){const h=a.getAnchor(),d=a.getSize(),f=a.getOrigin();this.imagePixelRatio_=a.getPixelRatio(this.pixelRatio),this.anchorX_=h[0],this.anchorY_=h[1],this.hitDetectionImage_=a.getHitDetectionImage(),this.image_=a.getImage(this.pixelRatio),this.height_=d[1],this.opacity_=a.getOpacity(),this.originX_=f[0],this.originY_=f[1],this.rotateWithView_=a.getRotateWithView(),this.rotation_=a.getRotation(),this.scale_=a.getScaleArray(),this.width_=d[0],this.declutterMode_=a.getDeclutterMode(),this.declutterImageWithText_=l}},LineString:class p1e extends tS{constructor(a,l,h,d){super(a,l,h,d)}drawFlatCoordinates_(a,l,h,d){const f=this.coordinates.length,m=this.appendFlatLineCoordinates(a,l,h,d,!1,!1),g=[kn.MOVE_TO_LINE_TO,f,m];return this.instructions.push(g),this.hitDetectionInstructions.push(g),h}drawLineString(a,l){const h=this.state;if(void 0===h.strokeStyle||void 0===h.lineWidth)return;this.updateStrokeStyle(h,this.applyStroke),this.beginGeometry(a,l),this.hitDetectionInstructions.push([kn.SET_STROKE_STYLE,h.strokeStyle,h.lineWidth,h.lineCap,h.lineJoin,h.miterLimit,zb,0],qp);const m=a.getFlatCoordinates(),g=a.getStride();this.drawFlatCoordinates_(m,0,m.length,g),this.hitDetectionInstructions.push($d),this.endGeometry(l)}drawMultiLineString(a,l){const h=this.state;if(void 0===h.strokeStyle||void 0===h.lineWidth)return;this.updateStrokeStyle(h,this.applyStroke),this.beginGeometry(a,l),this.hitDetectionInstructions.push([kn.SET_STROKE_STYLE,h.strokeStyle,h.lineWidth,h.lineCap,h.lineJoin,h.miterLimit,h.lineDash,h.lineDashOffset],qp);const m=a.getEnds(),g=a.getFlatCoordinates(),y=a.getStride();let _=0;for(let v=0,b=m.length;v<b;++v)_=this.drawFlatCoordinates_(g,_,m[v],y);this.hitDetectionInstructions.push($d),this.endGeometry(l)}finish(){const a=this.state;return null!=a.lastStroke&&a.lastStroke!=this.coordinates.length&&this.instructions.push($d),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(a){null!=a.lastStroke&&a.lastStroke!=this.coordinates.length&&(this.instructions.push($d),a.lastStroke=this.coordinates.length),a.lastStroke=0,super.applyStroke(a),this.instructions.push(qp)}},Polygon:Wj,Text:class v1e extends tS{constructor(a,l,h,d){super(a,l,h,d),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const a=super.finish();return a.textStates=this.textStates,a.fillStates=this.fillStates,a.strokeStates=this.strokeStates,a}drawText(a,l){const f=this.textState_;if(""===this.text_||!f||!this.textFillState_&&!this.textStrokeState_)return;const m=this.coordinates;let g=m.length;const y=a.getType();let _=null,v=a.getStride();if("line"!==f.placement||"LineString"!=y&&"MultiLineString"!=y&&"Polygon"!=y&&"MultiPolygon"!=y){let b=f.overflow?null:[];switch(y){case"Point":case"MultiPoint":_=a.getFlatCoordinates();break;case"LineString":_=a.getFlatMidpoint();break;case"Circle":_=a.getCenter();break;case"MultiLineString":_=a.getFlatMidpoints(),v=2;break;case"Polygon":_=a.getFlatInteriorPoint(),f.overflow||b.push(_[2]/this.resolution),v=3;break;case"MultiPolygon":const I=a.getFlatInteriorPoints();_=[];for(let M=0,D=I.length;M<D;M+=3)f.overflow||b.push(I[M+2]/this.resolution),_.push(I[M],I[M+1]);if(0===_.length)return;v=2}const S=this.appendFlatPointCoordinates(_,v);if(S===g)return;if(b&&(S-g)/2!=_.length/v){let I=g/2;b=b.filter((M,D)=>{const L=m[2*(I+D)]===_[D*v]&&m[2*(I+D)+1]===_[D*v+1];return L||--I,L})}this.saveTextStates_(),(f.backgroundFill||f.backgroundStroke)&&(this.setFillStrokeStyle(f.backgroundFill,f.backgroundStroke),f.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),f.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(a,l);let T=f.padding;if(T!=jp&&(f.scale[0]<0||f.scale[1]<0)){let I=f.padding[0],M=f.padding[1],D=f.padding[2],L=f.padding[3];f.scale[0]<0&&(M=-M,L=-L),f.scale[1]<0&&(I=-I,D=-D),T=[I,M,D,L]}const x=this.pixelRatio;this.instructions.push([kn.DRAW_IMAGE,g,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,T==jp?jp:T.map(function(I){return I*x}),!!f.backgroundFill,!!f.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,b]);const E=1/x;this.hitDetectionInstructions.push([kn.DRAW_IMAGE,g,S,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[E,E],NaN,void 0,this.declutterImageWithText_,T,!!f.backgroundFill,!!f.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,b]),this.endGeometry(l)}else{if(!Mr(this.getBufferedMaxExtent(),a.getExtent()))return;let b;if(_=a.getFlatCoordinates(),"LineString"==y)b=[_.length];else if("MultiLineString"==y)b=a.getEnds();else if("Polygon"==y)b=a.getEnds().slice(0,1);else if("MultiPolygon"==y){const E=a.getEndss();b=[];for(let I=0,M=E.length;I<M;++I)b.push(E[I][0])}this.beginGeometry(a,l);const S=f.repeat,T=S?void 0:f.textAlign;let x=0;for(let E=0,I=b.length;E<I;++E){let M;M=S?y1e(S*this.resolution,_,x,b[E],v):[_.slice(x,b[E])];for(let D=0,L=M.length;D<L;++D){const P=M[D];let F=0,B=P.length;if(null==T){const $=_1e(f.maxAngle,P,0,P.length,2);F=$[0],B=$[1]}for(let $=F;$<B;$+=v)m.push(P[$],P[$+1]);const G=m.length;x=b[E],this.drawChars_(g,G),g=G}}this.endGeometry(l)}}saveTextStates_(){const a=this.textStrokeState_,l=this.textState_,h=this.textFillState_,d=this.strokeKey_;a&&(d in this.strokeStates||(this.strokeStates[d]={strokeStyle:a.strokeStyle,lineCap:a.lineCap,lineDashOffset:a.lineDashOffset,lineWidth:a.lineWidth,lineJoin:a.lineJoin,miterLimit:a.miterLimit,lineDash:a.lineDash}));const f=this.textKey_;f in this.textStates||(this.textStates[f]={font:l.font,textAlign:l.textAlign||Wb,justify:l.justify,textBaseline:l.textBaseline||Gx,scale:l.scale});const m=this.fillKey_;h&&(m in this.fillStates||(this.fillStates[m]={fillStyle:h.fillStyle}))}drawChars_(a,l){const h=this.textStrokeState_,d=this.textState_,f=this.strokeKey_,m=this.textKey_,g=this.fillKey_;this.saveTextStates_();const y=this.pixelRatio,_=nS[d.textBaseline],v=this.textOffsetY_*y,b=this.text_,S=h?h.lineWidth*Math.abs(d.scale[0])/2:0;this.instructions.push([kn.DRAW_CHARS,a,l,_,d.overflow,g,d.maxAngle,y,v,f,S*y,b,m,1]),this.hitDetectionInstructions.push([kn.DRAW_CHARS,a,l,_,d.overflow,g,d.maxAngle,1,v,f,S,b,m,1/y])}setTextStyle(a,l){let h,d,f;if(a){const m=a.getFill();m?(d=this.textFillState_,d||(d={},this.textFillState_=d),d.fillStyle=mu(m.getColor()||wh)):(d=null,this.textFillState_=d);const g=a.getStroke();if(g){f=this.textStrokeState_,f||(f={},this.textStrokeState_=f);const x=g.getLineDash(),E=g.getLineDashOffset(),I=g.getWidth(),M=g.getMiterLimit();f.lineCap=g.getLineCap()||zx,f.lineDash=x?x.slice():zb,f.lineDashOffset=void 0===E?0:E,f.lineJoin=g.getLineJoin()||ky,f.lineWidth=void 0===I?1:I,f.miterLimit=void 0===M?10:M,f.strokeStyle=mu(g.getColor()||jb)}else f=null,this.textStrokeState_=f;h=this.textState_;const y=a.getFont()||ij;rj(y);const _=a.getScaleArray();h.overflow=a.getOverflow(),h.font=y,h.maxAngle=a.getMaxAngle(),h.placement=a.getPlacement(),h.textAlign=a.getTextAlign(),h.repeat=a.getRepeat(),h.justify=a.getJustify(),h.textBaseline=a.getTextBaseline()||Gx,h.backgroundFill=a.getBackgroundFill(),h.backgroundStroke=a.getBackgroundStroke(),h.padding=a.getPadding()||jp,h.scale=void 0===_?[1,1]:_;const v=a.getOffsetX(),b=a.getOffsetY(),S=a.getRotateWithView(),T=a.getRotation();this.text_=a.getText()||"",this.textOffsetX_=void 0===v?0:v,this.textOffsetY_=void 0===b?0:b,this.textRotateWithView_=void 0!==S&&S,this.textRotation_=void 0===T?0:T,this.strokeKey_=f?("string"==typeof f.strokeStyle?f.strokeStyle:an(f.strokeStyle))+f.lineCap+f.lineDashOffset+"|"+f.lineWidth+f.lineJoin+f.miterLimit+"["+f.lineDash.join()+"]":"",this.textKey_=h.font+h.scale+(h.textAlign||"?")+(h.repeat||"?")+(h.justify||"?")+(h.textBaseline||"?"),this.fillKey_=d?"string"==typeof d.fillStyle?d.fillStyle:"|"+an(d.fillStyle):""}else this.text_="";this.declutterImageWithText_=l}}},$x=class S1e{constructor(a,l,h,d){this.tolerance_=a,this.maxExtent_=l,this.pixelRatio_=d,this.resolution_=h,this.buildersByZIndex_={}}finish(){const a={};for(const l in this.buildersByZIndex_){a[l]=a[l]||{};const h=this.buildersByZIndex_[l];for(const d in h){const f=h[d].finish();a[l][d]=f}}return a}getBuilder(a,l){const h=void 0!==a?a.toString():"0";let d=this.buildersByZIndex_[h];void 0===d&&(d={},this.buildersByZIndex_[h]=d);let f=d[l];return void 0===f&&(f=new(0,b1e[l])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),d[l]=f),f}};function T1e(c,a,l,h,d,f,m,g,y,_,v,b){let S=c[a],T=c[a+1],x=0,E=0,I=0,M=0;function D(){x=S,E=T,S=c[a+=h],T=c[a+1],M+=I,I=Math.sqrt((S-x)*(S-x)+(T-E)*(T-E))}do{D()}while(a<l-h&&M+I<f);let L=0===I?0:(f-M)/I;const P=nl(x,S,L),F=nl(E,T,L),B=a-h,G=M,$=f+g*y(_,d,v);for(;a<l-h&&M+I<$;)D();L=0===I?0:($-M)/I;const se=nl(x,S,L),ie=nl(E,T,L);let j;if(b){const K=[P,F,se,ie];k7(K,0,4,2,b,K,K),j=K[0]>K[2]}else j=P>se;const J=Math.PI,ae=[],ue=B+h===a;let ge;if(I=0,M=G,S=c[a=B],T=c[a+1],ue)return D(),ge=Math.atan2(T-E,S-x),j&&(ge+=ge>0?-J:J),ae[0]=[(se+P)/2,(ie+F)/2,($-f)/2,ge,d],ae;for(let K=0,le=(d=d.replace(/\n/g," ")).length;K<le;){D();let ye=Math.atan2(T-E,S-x);if(j&&(ye+=ye>0?-J:J),void 0!==ge){let qe=ye-ge;if(qe+=qe>J?-2*J:qe<-J?2*J:0,Math.abs(qe)>m)return null}ge=ye;const ke=K;let _e=0;for(;K<le;++K){const Ae=g*y(_,d[j?le-K-1:K],v);if(a+h<l&&M+I<f+_e+Ae/2)break;_e+=Ae}if(K===ke)continue;const Ne=j?d.substring(le-ke,le-K):d.substring(ke,K);L=0===I?0:(f+_e/2-M)/I;const me=nl(x,S,L),Xe=nl(E,T,L);ae.push([me,Xe,_e/2,ye,Ne]),f+=_e}return ae}function FO(c,a,l,h){let d=c[a],f=c[a+1],m=0;for(let g=a+h;g<l;g+=h){const y=c[g],_=c[g+1];m+=Math.sqrt((y-d)*(y-d)+(_-f)*(_-f)),d=y,f=_}return m}const Wy=[1/0,1/0,-1/0,-1/0],Yd=[],Ch=[],xh=[],Zd=[];function Xj(c){return c[3].declutterBox}const w1e=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function qj(c,a){return("start"===a||"end"===a)&&!w1e.test(c)&&(a="start"===a?"left":"right"),nS[a]}function C1e(c,a,l){return l>0&&c.push("\n",""),c.push(a,""),c}const E1e=class x1e{constructor(a,l,h,d){this.overlaps=h,this.pixelRatio=l,this.resolution=a,this.instructions=d.instructions,this.coordinates=d.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=d.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=d.fillStates||{},this.strokeStates=d.strokeStates||{},this.textStates=d.textStates||{},this.widths_={},this.labels_={}}createLabel(a,l,h,d){const f=a+l+h+d;if(this.labels_[f])return this.labels_[f];const m=d?this.strokeStates[d]:null,g=h?this.fillStates[h]:null,y=this.textStates[l],_=this.pixelRatio,v=[y.scale[0]*_,y.scale[1]*_],b=Array.isArray(a),S=y.justify?nS[y.justify]:qj(Array.isArray(a)?a[0]:a,y.textAlign||Wb),T=d&&m.lineWidth?m.lineWidth:0,x=b?a:a.split("\n").reduce(C1e,[]),{width:E,height:I,widths:M,heights:D,lineWidths:L}=function Bbe(c,a){const l=[],h=[],d=[];let f=0,m=0,g=0,y=0;for(let _=0,v=a.length;_<=v;_+=2){const b=a[_];if("\n"===b||_===v){f=Math.max(f,m),d.push(m),m=0,g+=y;continue}const S=a[_+1]||c.font,T=Hx(S,b);l.push(T),m+=T;const x=Vbe(S);h.push(x),y=Math.max(y,x)}return{width:f,height:g,widths:l,heights:h,lineWidths:d}}(y,x),P=E+T,F=[],B=(P+2)*v[0],G=(I+T)*v[1],$={width:B<0?Math.floor(B):Math.ceil(B),height:G<0?Math.floor(G):Math.ceil(G),contextInstructions:F};(1!=v[0]||1!=v[1])&&F.push("scale",v),d&&(F.push("strokeStyle",m.strokeStyle),F.push("lineWidth",T),F.push("lineCap",m.lineCap),F.push("lineJoin",m.lineJoin),F.push("miterLimit",m.miterLimit),F.push("setLineDash",[m.lineDash]),F.push("lineDashOffset",m.lineDashOffset)),h&&F.push("fillStyle",g.fillStyle),F.push("textBaseline","middle"),F.push("textAlign","center");const se=.5-S;let ie=S*P+se*T;const j=[],J=[];let le,ae=0,ue=0,ge=0,K=0;for(let ye=0,ke=x.length;ye<ke;ye+=2){const _e=x[ye];if("\n"===_e){ue+=ae,ae=0,ie=S*P+se*T,++K;continue}const Ne=x[ye+1]||y.font;Ne!==le&&(d&&j.push("font",Ne),h&&J.push("font",Ne),le=Ne),ae=Math.max(ae,D[ge]);const me=[_e,ie+se*M[ge]+S*(M[ge]-L[K]),.5*(T+ae)+ue];ie+=M[ge],d&&j.push("strokeText",me),h&&J.push("fillText",me),++ge}return Array.prototype.push.apply(F,j),Array.prototype.push.apply(F,J),this.labels_[f]=$,$}replayTextBackground_(a,l,h,d,f,m,g){a.beginPath(),a.moveTo.apply(a,l),a.lineTo.apply(a,h),a.lineTo.apply(a,d),a.lineTo.apply(a,f),a.lineTo.apply(a,l),m&&(this.alignFill_=m[2],this.fill_(a)),g&&(this.setStrokeStyle_(a,g),a.stroke())}calculateImageOrLabelDimensions_(a,l,h,d,f,m,g,y,_,v,b,S,T,x,E,I){let M=h-(g*=S[0]),D=d-(y*=S[1]);const L=f+_>a?a-_:f,P=m+v>l?l-v:m,F=x[3]+L*S[0]+x[1],B=x[0]+P*S[1]+x[2],G=M-x[3],$=D-x[0];let se;return(E||0!==b)&&(Yd[0]=G,Zd[0]=G,Yd[1]=$,Ch[1]=$,Ch[0]=G+F,xh[0]=Ch[0],xh[1]=$+B,Zd[1]=xh[1]),0!==b?(se=sa([1,0,0,1,0,0],h,d,1,1,b,-h,-d),Or(se,Yd),Or(se,Ch),Or(se,xh),Or(se,Zd),cu(Math.min(Yd[0],Ch[0],xh[0],Zd[0]),Math.min(Yd[1],Ch[1],xh[1],Zd[1]),Math.max(Yd[0],Ch[0],xh[0],Zd[0]),Math.max(Yd[1],Ch[1],xh[1],Zd[1]),Wy)):cu(Math.min(G,G+F),Math.min($,$+B),Math.max(G,G+F),Math.max($,$+B),Wy),T&&(M=Math.round(M),D=Math.round(D)),{drawImageX:M,drawImageY:D,drawImageW:L,drawImageH:P,originX:_,originY:v,declutterBox:{minX:Wy[0],minY:Wy[1],maxX:Wy[2],maxY:Wy[3],value:I},canvasTransform:se,scale:S}}replayImageOrLabel_(a,l,h,d,f,m,g){const _=d.declutterBox,v=a.canvas,b=g?g[2]*d.scale[0]/2:0;return _.minX-b<=v.width/l&&_.maxX+b>=0&&_.minY-b<=v.height/l&&_.maxY+b>=0&&(!(!m&&!g)&&this.replayTextBackground_(a,Yd,Ch,xh,Zd,m,g),function Ube(c,a,l,h,d,f,m,g,y,_,v){c.save(),1!==l&&(c.globalAlpha*=l),a&&c.setTransform.apply(c,a),h.contextInstructions?(c.translate(y,_),c.scale(v[0],v[1]),function zbe(c,a){const l=c.contextInstructions;for(let h=0,d=l.length;h<d;h+=2)Array.isArray(l[h+1])?a[l[h]].apply(a,l[h+1]):a[l[h]]=l[h+1]}(h,c)):v[0]<0||v[1]<0?(c.translate(y,_),c.scale(v[0],v[1]),c.drawImage(h,d,f,m,g,0,0,m,g)):c.drawImage(h,d,f,m,g,y,_,m*v[0],g*v[1]),c.restore()}(a,d.canvasTransform,f,h,d.originX,d.originY,d.drawImageW,d.drawImageH,d.drawImageX,d.drawImageY,d.scale)),!0}fill_(a){if(this.alignFill_){const l=Or(this.renderedTransform_,[0,0]),h=512*this.pixelRatio;a.save(),a.translate(l[0]%h,l[1]%h),a.rotate(this.viewRotation_)}a.fill(),this.alignFill_&&a.restore()}setStrokeStyle_(a,l){a.strokeStyle=l[1],a.lineWidth=l[2],a.lineCap=l[3],a.lineJoin=l[4],a.miterLimit=l[5],a.lineDashOffset=l[7],a.setLineDash(l[6])}drawLabelWithPointPlacement_(a,l,h,d){const f=this.textStates[l],m=this.createLabel(a,l,d,h),g=this.strokeStates[h],y=this.pixelRatio,_=qj(Array.isArray(a)?a[0]:a,f.textAlign||Wb),v=nS[f.textBaseline||Gx],b=g&&g.lineWidth?g.lineWidth:0;return{label:m,anchorX:_*(m.width/y-2*f.scale[0])+2*(.5-_)*b,anchorY:v*m.height/y+2*(.5-v)*b}}execute_(a,l,h,d,f,m,g,y){let _;this.pixelCoordinates_&&yh(h,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=Bd(this.coordinates,0,this.coordinates.length,2,h,this.pixelCoordinates_),function f0e(c,a){c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5]}(this.renderedTransform_,h));let v=0;const b=d.length;let T,x,E,I,M,D,L,P,F,B,G,$,S=0,se=0,ie=0,j=null,J=null;const ae=this.coordinateCache_,ue=this.viewRotation_,ge=Math.round(1e12*Math.atan2(-h[1],h[0]))/1e12,K={context:a,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:ue},le=this.instructions!=d||this.overlaps?0:200;let ye,ke,_e,Ne;for(;v<b;){const me=d[v];switch(me[0]){case kn.BEGIN_GEOMETRY:ye=me[1],Ne=me[3],ye.getGeometry()?void 0===g||Mr(g,Ne.getExtent())?++v:v=me[2]+1:v=me[2];break;case kn.BEGIN_PATH:se>le&&(this.fill_(a),se=0),ie>le&&(a.stroke(),ie=0),!se&&!ie&&(a.beginPath(),I=NaN,M=NaN),++v;break;case kn.CIRCLE:S=me[1];const qe=_[S],Ae=_[S+1],Bt=_[S+2]-qe,Pe=_[S+3]-Ae,_n=Math.sqrt(Bt*Bt+Pe*Pe);a.moveTo(qe+_n,Ae),a.arc(qe,Ae,_n,0,2*Math.PI,!0),++v;break;case kn.CLOSE_PATH:a.closePath(),++v;break;case kn.CUSTOM:S=me[1],T=me[2];const et=me[4],Et=6==me.length?me[5]:void 0;K.geometry=me[3],K.feature=ye,v in ae||(ae[v]=[]);const pt=ae[v];Et?Et(_,S,T,2,pt):(pt[0]=_[S],pt[1]=_[S+1],pt.length=2),et(pt,K),++v;break;case kn.DRAW_IMAGE:S=me[1],T=me[2],P=me[3],x=me[4],E=me[5];let Rt=me[6];const Mt=me[7],sn=me[8],ln=me[9],ct=me[10];let ei=me[11];const mi=me[12];let fe=me[13];const re=me[14],$e=me[15];if(!P&&me.length>=20){F=me[19],B=me[20],G=me[21],$=me[22];const jr=this.drawLabelWithPointPlacement_(F,B,G,$);P=jr.label,me[3]=P,x=(jr.anchorX-me[23])*this.pixelRatio,me[4]=x,E=(jr.anchorY-me[24])*this.pixelRatio,me[5]=E,Rt=P.height,me[6]=Rt,fe=P.width,me[13]=fe}let mt,Qt,Je,en;me.length>25&&(mt=me[25]),me.length>17?(Qt=me[16],Je=me[17],en=me[18]):(Qt=jp,Je=!1,en=!1),ct&&ge?ei+=ue:!ct&&!ge&&(ei-=ue);let Se=0;for(;S<T;S+=2){if(mt&&mt[Se++]<fe/this.pixelRatio)continue;const jr=this.calculateImageOrLabelDimensions_(P.width,P.height,_[S],_[S+1],fe,Rt,x,E,sn,ln,ei,mi,f,Qt,Je||en,ye),Ta=[a,l,P,jr,Mt,Je?j:null,en?J:null];if(y){if("none"===re)continue;if("obstacle"===re){y.insert(jr.declutterBox);continue}{let yo,Zo;if($e){const Qs=T-S;if(!$e[Qs]){$e[Qs]=Ta;continue}if(yo=$e[Qs],delete $e[Qs],Zo=Xj(yo),y.collides(Zo))continue}if(y.collides(jr.declutterBox))continue;yo&&(y.insert(Zo),this.replayImageOrLabel_.apply(this,yo)),y.insert(jr.declutterBox)}}this.replayImageOrLabel_.apply(this,Ta)}++v;break;case kn.DRAW_CHARS:const Ve=me[1],ut=me[2],Jt=me[3],Te=me[4];$=me[5];const Zt=me[6],kt=me[7],mn=me[8];G=me[9];const Ze=me[10];F=me[11],B=me[12];const nn=[me[13],me[13]],zn=this.textStates[B],Ni=zn.font,Ds=[zn.scale[0]*kt,zn.scale[1]*kt];let Di;Ni in this.widths_?Di=this.widths_[Ni]:(Di={},this.widths_[Ni]=Di);const Sa=FO(_,Ve,ut,2),Ro=Math.abs(Ds[0])*oj(Ni,F,Di);if(Te||Ro<=Sa){const yo=T1e(_,Ve,ut,2,F,(Sa-Ro)*nS[this.textStates[B].textAlign],Zt,Math.abs(Ds[0]),oj,Ni,Di,ge?0:this.viewRotation_);e:if(yo){const Zo=[];let Qs,$u,Yu,oe,Ie;if(G)for(Qs=0,$u=yo.length;Qs<$u;++Qs){Ie=yo[Qs],Yu=Ie[4],oe=this.createLabel(Yu,B,"",G),x=Ie[2]+(Ds[0]<0?-Ze:Ze),E=Jt*oe.height+2*(.5-Jt)*Ze*Ds[1]/Ds[0]-mn;const je=this.calculateImageOrLabelDimensions_(oe.width,oe.height,Ie[0],Ie[1],oe.width,oe.height,x,E,0,0,Ie[3],nn,!1,jp,!1,ye);if(y&&y.collides(je.declutterBox))break e;Zo.push([a,l,oe,je,1,null,null])}if($)for(Qs=0,$u=yo.length;Qs<$u;++Qs){Ie=yo[Qs],Yu=Ie[4],oe=this.createLabel(Yu,B,$,""),x=Ie[2],E=Jt*oe.height-mn;const je=this.calculateImageOrLabelDimensions_(oe.width,oe.height,Ie[0],Ie[1],oe.width,oe.height,x,E,0,0,Ie[3],nn,!1,jp,!1,ye);if(y&&y.collides(je.declutterBox))break e;Zo.push([a,l,oe,je,1,null,null])}y&&y.load(Zo.map(Xj));for(let je=0,We=Zo.length;je<We;++je)this.replayImageOrLabel_.apply(this,Zo[je])}}++v;break;case kn.END_GEOMETRY:if(void 0!==m){ye=me[1];const jr=m(ye,Ne);if(jr)return jr}++v;break;case kn.FILL:le?se++:this.fill_(a),++v;break;case kn.MOVE_TO_LINE_TO:for(S=me[1],T=me[2],ke=_[S],_e=_[S+1],D=ke+.5|0,L=_e+.5|0,(D!==I||L!==M)&&(a.moveTo(ke,_e),I=D,M=L),S+=2;S<T;S+=2)ke=_[S],_e=_[S+1],D=ke+.5|0,L=_e+.5|0,(S==T-2||D!==I||L!==M)&&(a.lineTo(ke,_e),I=D,M=L);++v;break;case kn.SET_FILL_STYLE:j=me,this.alignFill_=me[2],se&&(this.fill_(a),se=0,ie&&(a.stroke(),ie=0)),a.fillStyle=me[1],++v;break;case kn.SET_STROKE_STYLE:J=me,ie&&(a.stroke(),ie=0),this.setStrokeStyle_(a,me),++v;break;case kn.STROKE:le?ie++:a.stroke(),++v;break;default:++v}}se&&this.fill_(a),ie&&a.stroke()}execute(a,l,h,d,f,m){this.viewRotation_=d,this.execute_(a,l,h,this.instructions,f,void 0,void 0,m)}executeHitDetection(a,l,h,d,f){return this.viewRotation_=h,this.execute_(a,1,l,this.hitDetectionInstructions,!0,d,f)}},kO=["Polygon","Circle","LineString","Image","Text","Default"],VO={},Yx=class M1e{constructor(a,l,h,d,f,m){this.maxExtent_=a,this.overlaps_=d,this.pixelRatio_=h,this.resolution_=l,this.renderBuffer_=m,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(f)}clip(a,l){const h=this.getClipCoords(l);a.beginPath(),a.moveTo(h[0],h[1]),a.lineTo(h[2],h[3]),a.lineTo(h[4],h[5]),a.lineTo(h[6],h[7]),a.clip()}createExecutors_(a){for(const l in a){let h=this.executorsByZIndex_[l];void 0===h&&(h={},this.executorsByZIndex_[l]=h);const d=a[l];for(const f in d)h[f]=new E1e(this.resolution_,this.pixelRatio_,this.overlaps_,d[f])}}hasExecutors(a){for(const l in this.executorsByZIndex_){const h=this.executorsByZIndex_[l];for(let d=0,f=a.length;d<f;++d)if(a[d]in h)return!0}return!1}forEachFeatureAtCoordinate(a,l,h,d,f,m){const g=2*(d=Math.round(d))+1,y=sa(this.hitDetectionTransform_,d+.5,d+.5,1/l,-1/l,-h,-a[0],-a[1]),_=!this.hitDetectionContext_;_&&(this.hitDetectionContext_=Yr(g,g,void 0,{willReadFrequently:!0}));const v=this.hitDetectionContext_;let b;v.canvas.width!==g||v.canvas.height!==g?(v.canvas.width=g,v.canvas.height=g):_||v.clearRect(0,0,g,g),void 0!==this.renderBuffer_&&(b=[1/0,1/0,-1/0,-1/0],Ay(b,a),tl(b,l*(this.renderBuffer_+d),b));const S=function D1e(c){if(void 0!==VO[c])return VO[c];const a=2*c+1,l=c*c,h=new Array(l+1);for(let f=0;f<=c;++f)for(let m=0;m<=c;++m){const g=f*f+m*m;if(g>l)break;let y=h[g];y||(y=[],h[g]=y),y.push(4*((c+f)*a+(c+m))+3),f>0&&y.push(4*((c-f)*a+(c+m))+3),m>0&&(y.push(4*((c+f)*a+(c-m))+3),f>0&&y.push(4*((c-f)*a+(c-m))+3))}const d=[];for(let f=0,m=h.length;f<m;++f)h[f]&&d.push(...h[f]);return VO[c]=d,d}(d);let T;function x(F,B){const G=v.getImageData(0,0,g,g).data;for(let $=0,se=S.length;$<se;$++)if(G[S[$]]>0){if(!m||"Image"!==T&&"Text"!==T||m.includes(F)){const ie=(S[$]-3)/4,j=d-ie%g,J=d-(ie/g|0),ae=f(F,B,j*j+J*J);if(ae)return ae}v.clearRect(0,0,g,g);break}}const E=Object.keys(this.executorsByZIndex_).map(Number);let I,M,D,L,P;for(E.sort(Ip),I=E.length-1;I>=0;--I){const F=E[I].toString();for(D=this.executorsByZIndex_[F],M=kO.length-1;M>=0;--M)if(T=kO[M],L=D[T],void 0!==L&&(P=L.executeHitDetection(v,y,h,x,b),P))return P}}getClipCoords(a){const l=this.maxExtent_;if(!l)return null;const h=l[0],d=l[1],f=l[2],m=l[3],g=[h,d,h,m,f,m,f,d];return Bd(g,0,8,2,a,g),g}isEmpty(){return Rp(this.executorsByZIndex_)}execute(a,l,h,d,f,m,g){const y=Object.keys(this.executorsByZIndex_).map(Number);let _,v,b,S,T,x;for(y.sort(Ip),this.maxExtent_&&(a.save(),this.clip(a,h)),m=m||kO,g&&y.reverse(),_=0,v=y.length;_<v;++_){const E=y[_].toString();for(T=this.executorsByZIndex_[E],b=0,S=m.length;b<S;++b)x=T[m[b]],void 0!==x&&x.execute(a,l,h,d,f,g)}this.maxExtent_&&a.restore()}},$j=class A1e extends jj{constructor(a,l,h,d,f,m,g){super(),this.context_=a,this.pixelRatio_=l,this.extent_=h,this.transform_=d,this.transformRotation_=d?Lb(Math.atan2(d[1],d[0]),10):0,this.viewRotation_=f,this.squaredTolerance_=m,this.userTransform_=g,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=[1,0,0,1,0,0]}drawImages_(a,l,h,d){if(!this.image_)return;const f=Bd(a,l,h,d,this.transform_,this.pixelCoordinates_),m=this.context_,g=this.tmpLocalTransform_,y=m.globalAlpha;1!=this.imageOpacity_&&(m.globalAlpha=y*this.imageOpacity_);let _=this.imageRotation_;0===this.transformRotation_&&(_-=this.viewRotation_),this.imageRotateWithView_&&(_+=this.viewRotation_);for(let v=0,b=f.length;v<b;v+=2){const S=f[v]-this.imageAnchorX_,T=f[v+1]-this.imageAnchorY_;if(0!==_||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const x=S+this.imageAnchorX_,E=T+this.imageAnchorY_;sa(g,x,E,1,1,_,-x,-E),m.setTransform.apply(m,g),m.translate(x,E),m.scale(this.imageScale_[0],this.imageScale_[1]),m.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),m.setTransform(1,0,0,1,0,0)}else m.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,S,T,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(m.globalAlpha=y)}drawText_(a,l,h,d){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const f=Bd(a,l,h,d,this.transform_,this.pixelCoordinates_),m=this.context_;let g=this.textRotation_;for(0===this.transformRotation_&&(g-=this.viewRotation_),this.textRotateWithView_&&(g+=this.viewRotation_);l<h;l+=d){const y=f[l]+this.textOffsetX_,_=f[l+1]+this.textOffsetY_;0!==g||1!=this.textScale_[0]||1!=this.textScale_[1]?(m.translate(y-this.textOffsetX_,_-this.textOffsetY_),m.rotate(g),m.translate(this.textOffsetX_,this.textOffsetY_),m.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&m.strokeText(this.text_,0,0),this.textFillState_&&m.fillText(this.text_,0,0),m.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&m.strokeText(this.text_,y,_),this.textFillState_&&m.fillText(this.text_,y,_))}}moveToLineTo_(a,l,h,d,f){const m=this.context_,g=Bd(a,l,h,d,this.transform_,this.pixelCoordinates_);m.moveTo(g[0],g[1]);let y=g.length;f&&(y-=2);for(let _=2;_<y;_+=2)m.lineTo(g[_],g[_+1]);return f&&m.closePath(),h}drawRings_(a,l,h,d){for(let f=0,m=h.length;f<m;++f)l=this.moveToLineTo_(a,l,h[f],d,!0);return l}drawCircle(a){if(Mr(this.extent_,a.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const l=function abe(c,a,l){const h=c.getFlatCoordinates();if(!h)return null;const d=c.getStride();return Bd(h,0,h.length,d,a,l)}(a,this.transform_,this.pixelCoordinates_),h=l[2]-l[0],d=l[3]-l[1],f=Math.sqrt(h*h+d*d),m=this.context_;m.beginPath(),m.arc(l[0],l[1],f,0,2*Math.PI),this.fillState_&&m.fill(),this.strokeState_&&m.stroke()}""!==this.text_&&this.drawText_(a.getCenter(),0,2,2)}}setStyle(a){this.setFillStrokeStyle(a.getFill(),a.getStroke()),this.setImageStyle(a.getImage()),this.setTextStyle(a.getText())}setTransform(a){this.transform_=a}drawGeometry(a){switch(a.getType()){case"Point":this.drawPoint(a);break;case"LineString":this.drawLineString(a);break;case"Polygon":this.drawPolygon(a);break;case"MultiPoint":this.drawMultiPoint(a);break;case"MultiLineString":this.drawMultiLineString(a);break;case"MultiPolygon":this.drawMultiPolygon(a);break;case"GeometryCollection":this.drawGeometryCollection(a);break;case"Circle":this.drawCircle(a)}}drawFeature(a,l){const h=l.getGeometryFunction()(a);!h||!Mr(this.extent_,h.getExtent())||(this.setStyle(l),this.drawGeometry(h))}drawGeometryCollection(a){const l=a.getGeometriesArray();for(let h=0,d=l.length;h<d;++h)this.drawGeometry(l[h])}drawPoint(a){this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const l=a.getFlatCoordinates(),h=a.getStride();this.image_&&this.drawImages_(l,0,l.length,h),""!==this.text_&&this.drawText_(l,0,l.length,h)}drawMultiPoint(a){this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const l=a.getFlatCoordinates(),h=a.getStride();this.image_&&this.drawImages_(l,0,l.length,h),""!==this.text_&&this.drawText_(l,0,l.length,h)}drawLineString(a){if(this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Mr(this.extent_,a.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const l=this.context_,h=a.getFlatCoordinates();l.beginPath(),this.moveToLineTo_(h,0,h.length,a.getStride(),!1),l.stroke()}if(""!==this.text_){const l=a.getFlatMidpoint();this.drawText_(l,0,2,2)}}}drawMultiLineString(a){this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const l=a.getExtent();if(Mr(this.extent_,l)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const h=this.context_,d=a.getFlatCoordinates();let f=0;const m=a.getEnds(),g=a.getStride();h.beginPath();for(let y=0,_=m.length;y<_;++y)f=this.moveToLineTo_(d,f,m[y],g,!1);h.stroke()}if(""!==this.text_){const h=a.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}}drawPolygon(a){if(this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Mr(this.extent_,a.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const l=this.context_;l.beginPath(),this.drawRings_(a.getOrientedFlatCoordinates(),0,a.getEnds(),a.getStride()),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}if(""!==this.text_){const l=a.getFlatInteriorPoint();this.drawText_(l,0,2,2)}}}drawMultiPolygon(a){if(this.squaredTolerance_&&(a=a.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Mr(this.extent_,a.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const l=this.context_,h=a.getOrientedFlatCoordinates();let d=0;const f=a.getEndss(),m=a.getStride();l.beginPath();for(let g=0,y=f.length;g<y;++g)d=this.drawRings_(h,d,f[g],m);this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}if(""!==this.text_){const l=a.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}}setContextFillState_(a){const l=this.context_,h=this.contextFillState_;h?h.fillStyle!=a.fillStyle&&(h.fillStyle=a.fillStyle,l.fillStyle=a.fillStyle):(l.fillStyle=a.fillStyle,this.contextFillState_={fillStyle:a.fillStyle})}setContextStrokeState_(a){const l=this.context_,h=this.contextStrokeState_;h?(h.lineCap!=a.lineCap&&(h.lineCap=a.lineCap,l.lineCap=a.lineCap),yh(h.lineDash,a.lineDash)||l.setLineDash(h.lineDash=a.lineDash),h.lineDashOffset!=a.lineDashOffset&&(h.lineDashOffset=a.lineDashOffset,l.lineDashOffset=a.lineDashOffset),h.lineJoin!=a.lineJoin&&(h.lineJoin=a.lineJoin,l.lineJoin=a.lineJoin),h.lineWidth!=a.lineWidth&&(h.lineWidth=a.lineWidth,l.lineWidth=a.lineWidth),h.miterLimit!=a.miterLimit&&(h.miterLimit=a.miterLimit,l.miterLimit=a.miterLimit),h.strokeStyle!=a.strokeStyle&&(h.strokeStyle=a.strokeStyle,l.strokeStyle=a.strokeStyle)):(l.lineCap=a.lineCap,l.setLineDash(a.lineDash),l.lineDashOffset=a.lineDashOffset,l.lineJoin=a.lineJoin,l.lineWidth=a.lineWidth,l.miterLimit=a.miterLimit,l.strokeStyle=a.strokeStyle,this.contextStrokeState_={lineCap:a.lineCap,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset,lineJoin:a.lineJoin,lineWidth:a.lineWidth,miterLimit:a.miterLimit,strokeStyle:a.strokeStyle})}setContextTextState_(a){const l=this.context_,h=this.contextTextState_,d=a.textAlign?a.textAlign:Wb;h?(h.font!=a.font&&(h.font=a.font,l.font=a.font),h.textAlign!=d&&(h.textAlign=d,l.textAlign=d),h.textBaseline!=a.textBaseline&&(h.textBaseline=a.textBaseline,l.textBaseline=a.textBaseline)):(l.font=a.font,l.textAlign=d,l.textBaseline=a.textBaseline,this.contextTextState_={font:a.font,textAlign:d,textBaseline:a.textBaseline})}setFillStrokeStyle(a,l){if(a){const h=a.getColor();this.fillState_={fillStyle:mu(h||wh)}}else this.fillState_=null;if(l){const h=l.getColor(),d=l.getLineCap(),f=l.getLineDash(),m=l.getLineDashOffset(),g=l.getLineJoin(),y=l.getWidth(),_=l.getMiterLimit(),v=f||zb;this.strokeState_={lineCap:void 0!==d?d:zx,lineDash:1===this.pixelRatio_?v:v.map(b=>b*this.pixelRatio_),lineDashOffset:(m||0)*this.pixelRatio_,lineJoin:void 0!==g?g:ky,lineWidth:(void 0!==y?y:1)*this.pixelRatio_,miterLimit:void 0!==_?_:10,strokeStyle:mu(h||jb)}}else this.strokeState_=null}setImageStyle(a){let l;if(!a||!(l=a.getSize()))return void(this.image_=null);const h=a.getPixelRatio(this.pixelRatio_),d=a.getAnchor(),f=a.getOrigin();this.image_=a.getImage(this.pixelRatio_),this.imageAnchorX_=d[0]*h,this.imageAnchorY_=d[1]*h,this.imageHeight_=l[1]*h,this.imageOpacity_=a.getOpacity(),this.imageOriginX_=f[0],this.imageOriginY_=f[1],this.imageRotateWithView_=a.getRotateWithView(),this.imageRotation_=a.getRotation();const m=a.getScaleArray();this.imageScale_=[m[0]*this.pixelRatio_/h,m[1]*this.pixelRatio_/h],this.imageWidth_=l[0]*h}setTextStyle(a){if(a){const l=a.getFill();if(l){const T=l.getColor();this.textFillState_={fillStyle:mu(T||wh)}}else this.textFillState_=null;const h=a.getStroke();if(h){const T=h.getColor(),x=h.getLineCap(),E=h.getLineDash(),I=h.getLineDashOffset(),M=h.getLineJoin(),D=h.getWidth(),L=h.getMiterLimit();this.textStrokeState_={lineCap:void 0!==x?x:zx,lineDash:E||zb,lineDashOffset:I||0,lineJoin:void 0!==M?M:ky,lineWidth:void 0!==D?D:1,miterLimit:void 0!==L?L:10,strokeStyle:mu(T||jb)}}else this.textStrokeState_=null;const d=a.getFont(),f=a.getOffsetX(),m=a.getOffsetY(),g=a.getRotateWithView(),y=a.getRotation(),_=a.getScaleArray(),v=a.getText(),b=a.getTextAlign(),S=a.getTextBaseline();this.textState_={font:void 0!==d?d:ij,textAlign:void 0!==b?b:Wb,textBaseline:void 0!==S?S:Gx},this.text_=void 0!==v?Array.isArray(v)?v.reduce((T,x,E)=>T+(E%2?" ":x),""):v:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==m?this.pixelRatio_*m:0,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0!==y?y:0,this.textScale_=[this.pixelRatio_*_[0],this.pixelRatio_*_[1]]}else this.text_=""}},ol=.5;function Yj(c,a,l,h,d,f,m){const _=Yr(c[0]*ol,c[1]*ol);_.imageSmoothingEnabled=!1;const v=_.canvas,b=new $j(_,ol,d,null,m),S=l.length,T=Math.floor(16777215/S),x={};for(let I=1;I<=S;++I){const M=l[I-1],D=M.getStyleFunction()||h;if(!h)continue;let L=D(M,f);if(!L)continue;Array.isArray(L)||(L=[L]);const F=(I*T).toString(16).padStart(7,"#00000");for(let B=0,G=L.length;B<G;++B){const $=L[B],se=$.getGeometryFunction()(M);if(!se||!Mr(d,se.getExtent()))continue;const ie=$.clone(),j=ie.getFill();j&&j.setColor(F);const J=ie.getStroke();J&&(J.setColor(F),J.setLineDash(null)),ie.setText(void 0);const ae=$.getImage();if(ae&&0!==ae.getOpacity()){const le=ae.getImageSize();if(!le)continue;const ye=Yr(le[0],le[1],void 0,{alpha:!1}),ke=ye.canvas;ye.fillStyle=F,ye.fillRect(0,0,ke.width,ke.height),ie.setImage(new Uy({img:ke,imgSize:le,anchor:ae.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ae.getOrigin(),opacity:1,size:ae.getSize(),scale:ae.getScale(),rotation:ae.getRotation(),rotateWithView:ae.getRotateWithView()}))}const ue=ie.getZIndex()||0;let ge=x[ue];ge||(ge={},x[ue]=ge,ge.Polygon=[],ge.Circle=[],ge.LineString=[],ge.Point=[]);const K=se.getType();if("GeometryCollection"===K){const le=se.getGeometriesArrayRecursive();for(let ye=0,ke=le.length;ye<ke;++ye){const _e=le[ye];ge[_e.getType().replace("Multi","")].push(_e,ie)}}else ge[K.replace("Multi","")].push(se,ie)}}const E=Object.keys(x).map(Number).sort(Ip);for(let I=0,M=E.length;I<M;++I){const D=x[E[I]];for(const L in D){const P=D[L];for(let F=0,B=P.length;F<B;F+=2){b.setStyle(P[F+1]);for(let G=0,$=a.length;G<$;++G)b.setTransform(a[G]),b.drawGeometry(P[F])}}}return _.getImageData(0,0,v.width,v.height)}function Zj(c,a,l){const h=[];if(l){const d=Math.floor(Math.round(c[0])*ol),f=Math.floor(Math.round(c[1])*ol),m=4*(Qn(d,0,l.width-1)+Qn(f,0,l.height-1)*l.width),v=l.data[m+2]+256*(l.data[m+1]+256*l.data[m]),b=Math.floor(16777215/a.length);v&&v%b==0&&h.push(a[v/b-1])}return h}const Kj={Point:function V1e(c,a,l,h,d){const f=l.getImage(),m=l.getText();let g;if(f){if(2!=f.getImageState())return;let y=c;if(d){const v=f.getDeclutterMode();if("none"!==v)if(y=d,"obstacle"===v){const b=c.getBuilder(l.getZIndex(),"Image");b.setImageStyle(f,g),b.drawPoint(a,h)}else m&&m.getText()&&(g={})}const _=y.getBuilder(l.getZIndex(),"Image");_.setImageStyle(f,g),_.drawPoint(a,h)}if(m&&m.getText()){let y=c;d&&(y=d);const _=y.getBuilder(l.getZIndex(),"Text");_.setTextStyle(m,g),_.drawText(a,h)}},LineString:function N1e(c,a,l,h,d){const f=l.getStroke();if(f){const g=c.getBuilder(l.getZIndex(),"LineString");g.setFillStrokeStyle(null,f),g.drawLineString(a,h)}const m=l.getText();if(m&&m.getText()){const g=(d||c).getBuilder(l.getZIndex(),"Text");g.setTextStyle(m),g.drawText(a,h)}},Polygon:function U1e(c,a,l,h,d){const f=l.getFill(),m=l.getStroke();if(f||m){const y=c.getBuilder(l.getZIndex(),"Polygon");y.setFillStrokeStyle(f,m),y.drawPolygon(a,h)}const g=l.getText();if(g&&g.getText()){const y=(d||c).getBuilder(l.getZIndex(),"Text");y.setTextStyle(g),y.drawText(a,h)}},MultiPoint:function B1e(c,a,l,h,d){const f=l.getImage(),m=l.getText();let g;if(f){if(2!=f.getImageState())return;let y=c;if(d){const v=f.getDeclutterMode();if("none"!==v)if(y=d,"obstacle"===v){const b=c.getBuilder(l.getZIndex(),"Image");b.setImageStyle(f,g),b.drawMultiPoint(a,h)}else m&&m.getText()&&(g={})}const _=y.getBuilder(l.getZIndex(),"Image");_.setImageStyle(f,g),_.drawMultiPoint(a,h)}if(m&&m.getText()){let y=c;d&&(y=d);const _=y.getBuilder(l.getZIndex(),"Text");_.setTextStyle(m,g),_.drawText(a,h)}},MultiLineString:function F1e(c,a,l,h,d){const f=l.getStroke();if(f){const g=c.getBuilder(l.getZIndex(),"LineString");g.setFillStrokeStyle(null,f),g.drawMultiLineString(a,h)}const m=l.getText();if(m&&m.getText()){const g=(d||c).getBuilder(l.getZIndex(),"Text");g.setTextStyle(m),g.drawText(a,h)}},MultiPolygon:function k1e(c,a,l,h,d){const f=l.getFill(),m=l.getStroke();if(m||f){const y=c.getBuilder(l.getZIndex(),"Polygon");y.setFillStrokeStyle(f,m),y.drawMultiPolygon(a,h)}const g=l.getText();if(g&&g.getText()){const y=(d||c).getBuilder(l.getZIndex(),"Text");y.setTextStyle(g),y.drawText(a,h)}},GeometryCollection:function O1e(c,a,l,h,d){const f=a.getGeometriesArray();let m,g;for(m=0,g=f.length;m<g;++m)(0,Kj[f[m].getType()])(c,f[m],l,h,d)},Circle:function L1e(c,a,l,h,d){const f=l.getFill(),m=l.getStroke();if(f||m){const y=c.getBuilder(l.getZIndex(),"Circle");y.setFillStrokeStyle(f,m),y.drawCircle(a,h)}const g=l.getText();if(g&&g.getText()){const y=(d||c).getBuilder(l.getZIndex(),"Text");y.setTextStyle(g),y.drawText(a,h)}}};function R1e(c,a){return parseInt(an(c),10)-parseInt(an(a),10)}function BO(c,a){const l=UO(c,a);return l*l}function UO(c,a){return.5*c/a}function Zx(c,a,l,h,d,f,m){let g=!1;const y=l.getImage();if(y){const _=y.getImageState();2==_||3==_?y.unlistenImageChange(d):(0==_&&y.load(),y.listenImageChange(d),g=!0)}return function P1e(c,a,l,h,d,f){const m=l.getGeometryFunction()(a);if(!m)return;const g=m.simplifyTransformed(h,d);l.getRenderer()?Jj(c,g,l,a):(0,Kj[g.getType()])(c,g,l,a,f)}(c,a,l,h,f,m),g}function Jj(c,a,l,h){if("GeometryCollection"!=a.getType())c.getBuilder(l.getZIndex(),"Default").drawCustom(a,h,l.getRenderer(),l.getHitDetectionRenderer());else{const f=a.getGeometries();for(let m=0,g=f.length;m<g;++m)Jj(c,f[m],l,h)}}const iS=class z1e extends LO{constructor(a){super(a),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=[1/0,1/0,-1/0,-1/0],this.wrappedRenderedExtent_=[1/0,1/0,-1/0,-1/0],this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(a,l,h){const d=l.extent,f=l.viewState,m=f.center,g=f.resolution,y=f.projection,_=f.rotation,v=y.getExtent(),b=this.getLayer().getSource(),S=l.pixelRatio,T=l.viewHints,x=!(T[0]||T[1]),E=this.compositionContext_,I=Math.round(l.size[0]*S),M=Math.round(l.size[1]*S),D=b.getWrapX()&&y.canWrapX(),L=D?Kn(v):null,P=D?Math.ceil((d[2]-v[2])/L)+1:1;let F=D?Math.floor((d[0]-v[0])/L):0;do{const B=this.getRenderTransform(m,g,_,S,I,M,F*L);a.execute(E,1,B,_,x,void 0,h)}while(++F<P)}setupCompositionContext_(){if(1!==this.opacity_){const a=Yr(this.context.canvas.width,this.context.canvas.height,Lj);this.compositionContext_=a}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const a=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=a,Ub(this.compositionContext_),Lj.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(a){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,a,a.declutterTree),this.releaseCompositionContext_())}renderFrame(a,l){const h=a.pixelRatio,d=a.layerStatesArray[a.layerIndex];(function m0e(c,a,l){Db(c,a,0,0,l,0,0)})(this.pixelTransform,1/h,1/h),Dy(this.inversePixelTransform,this.pixelTransform);const f=yx(this.pixelTransform);this.useContainer(l,f,this.getBackground(a));const m=this.context,g=m.canvas,y=this.replayGroup_,_=this.declutterExecutorGroup;if((!y||y.isEmpty())&&(!_||_.isEmpty()))return null;const v=Math.round(a.size[0]*h),b=Math.round(a.size[1]*h);g.width!=v||g.height!=b?(g.width=v,g.height=b,g.style.transform!==f&&(g.style.transform=f)):this.containerReused||m.clearRect(0,0,v,b),this.preRender(m,a);const S=a.viewState;this.opacity_=d.opacity,this.setupCompositionContext_();let x=!1,E=!0;if(d.extent&&this.clipping){const I=Sh(d.extent);E=Mr(I,a.extent),x=E&&!Ia(I,a.extent),x&&this.clipUnrotated(this.compositionContext_,a,I)}return E&&this.renderWorlds(y,a),x&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(m,a),this.renderedRotation_!==S.rotation&&(this.renderedRotation_=S.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(a){return new Promise(l=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const h=[this.context.canvas.width,this.context.canvas.height];Or(this.pixelTransform,h);const d=this.renderedCenter_,f=this.renderedResolution_,m=this.renderedRotation_,g=this.renderedProjection_,y=this.wrappedRenderedExtent_,_=this.getLayer(),v=[],b=h[0]*ol,S=h[1]*ol;v.push(this.getRenderTransform(d,f,m,ol,b,S,0).slice());const T=_.getSource(),x=g.getExtent();if(T.getWrapX()&&g.canWrapX()&&!Ia(x,y)){let E=y[0];const I=Kn(x);let D,M=0;for(;E<x[0];)--M,D=I*M,v.push(this.getRenderTransform(d,f,m,ol,b,S,D).slice()),E+=I;for(M=0,E=y[2];E>x[2];)++M,D=I*M,v.push(this.getRenderTransform(d,f,m,ol,b,S,D).slice()),E-=I}this.hitDetectionImageData_=Yj(h,v,this.renderedFeatures_,_.getStyleFunction(),y,f,m)}l(Zj(a,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(a,l,h,d,f){if(!this.replayGroup_)return;const m=l.viewState.resolution,g=l.viewState.rotation,y=this.getLayer(),_={},v=function(T,x,E){const I=an(T),M=_[I];if(M){if(!0!==M&&E<M.distanceSq){if(0===E)return _[I]=!0,f.splice(f.lastIndexOf(M),1),d(T,y,x);M.geometry=x,M.distanceSq=E}}else{if(0===E)return _[I]=!0,d(T,y,x);f.push(_[I]={feature:T,layer:y,geometry:x,distanceSq:E,callback:d})}};let b;const S=[this.replayGroup_];return this.declutterExecutorGroup&&S.push(this.declutterExecutorGroup),S.some(T=>b=T.forEachFeatureAtCoordinate(a,m,g,h,v,T===this.declutterExecutorGroup&&l.declutterTree?l.declutterTree.all().map(x=>x.value):null)),b}handleFontsChanged(){const a=this.getLayer();a.getVisible()&&this.replayGroup_&&a.changed()}handleStyleImageChange_(a){this.renderIfReadyAndVisible()}prepareFrame(a){const l=this.getLayer(),h=l.getSource();if(!h)return!1;const d=a.viewHints[0],f=a.viewHints[1],m=l.getUpdateWhileAnimating(),g=l.getUpdateWhileInteracting();if(this.ready&&!m&&d||!g&&f)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const y=a.extent,_=a.viewState,v=_.projection,b=_.resolution,S=a.pixelRatio,T=l.getRevision(),x=l.getRenderBuffer();let E=l.getRenderOrder();void 0===E&&(E=R1e);const I=_.center.slice(),M=tl(y,x*b),D=M.slice(),L=[M.slice()],P=v.getExtent();if(h.getWrapX()&&v.canWrapX()&&!Ia(P,a.extent)){const K=Kn(P),le=Math.max(Kn(M)/2,K);M[0]=P[0]-le,M[2]=P[2]+le,Dx(I,v);const ye=RP(L[0],v);ye[0]<P[0]&&ye[2]<P[2]?L.push([ye[0]+K,ye[1],ye[2]+K,ye[3]]):ye[0]>P[0]&&ye[2]>P[2]&&L.push([ye[0]-K,ye[1],ye[2]-K,ye[3]])}if(this.ready&&this.renderedResolution_==b&&this.renderedRevision_==T&&this.renderedRenderOrder_==E&&Ia(this.wrappedRenderedExtent_,M))return yh(this.renderedExtent_,D)||(this.hitDetectionImageData_=null,this.renderedExtent_=D),this.renderedCenter_=I,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const F=new $x(UO(b,S),M,b,S);let B;this.getLayer().getDeclutter()&&(B=new $x(UO(b,S),M,b,S));const G=Fb();let $;if(G){for(let K=0,le=L.length;K<le;++K){const ke=HP(L[K]);h.loadFeatures(ke,$0e(b),G)}$=vh(G,v)}else for(let K=0,le=L.length;K<le;++K)h.loadFeatures(L[K],b,v);const se=BO(b,S);let ie=!0;const j=K=>{let le;const ye=K.getStyleFunction()||l.getStyleFunction();if(ye&&(le=ye(K,b)),le){const ke=this.renderFeature(K,se,le,F,$,B);ie=ie&&!ke}},J=HP(M),ae=h.getFeaturesInExtent(J);E&&ae.sort(E);for(let K=0,le=ae.length;K<le;++K)j(ae[K]);this.renderedFeatures_=ae,this.ready=ie;const ue=F.finish(),ge=new Yx(M,b,S,h.getOverlaps(),ue,l.getRenderBuffer());return B&&(this.declutterExecutorGroup=new Yx(M,b,S,h.getOverlaps(),B.finish(),l.getRenderBuffer())),this.renderedResolution_=b,this.renderedRevision_=T,this.renderedRenderOrder_=E,this.renderedExtent_=D,this.wrappedRenderedExtent_=M,this.renderedCenter_=I,this.renderedProjection_=v,this.replayGroup_=ge,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(a,l,h,d,f,m){if(!h)return!1;let g=!1;if(Array.isArray(h))for(let y=0,_=h.length;y<_;++y)g=Zx(d,a,h[y],l,this.boundHandleStyleImageChange_,f,m)||g;else g=Zx(d,a,h,l,this.boundHandleStyleImageChange_,f,m);return g}},yu=class G1e extends zy{constructor(a){super(a)}createRenderer(){return new iS(this)}},H1e={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},j1e={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},X1e=class W1e extends Gj{constructor(a){super(a),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedPixelToCoordinateTransform_=null,this.tmpTransform_=[1,0,0,1,0,0]}prepareTile(a,l,h){let d;const f=a.getState();return(2===f||3===f)&&(this.updateExecutorGroup_(a,l,h),this.tileImageNeedsRender_(a)&&(d=!0)),d}getTile(a,l,h,d){const f=d.pixelRatio,m=d.viewState,g=m.resolution,y=m.projection,_=this.getLayer(),v=_.getSource().getTile(a,l,h,f,y),b=d.viewHints,S=!(b[0]||b[1]);return(S||!v.wantedResolution)&&(v.wantedResolution=g),this.prepareTile(v,f,y)&&(S||Date.now()-d.time<8)&&"vector"!==_.getRenderMode()&&this.renderTileImage_(v,d),super.getTile(a,l,h,d)}isDrawableTile(a){const l=this.getLayer();return super.isDrawableTile(a)&&("vector"===l.getRenderMode()?an(l)in a.executorGroups:a.hasContext(l))}getTileImage(a){return a.getImage(this.getLayer())}prepareFrame(a){const l=this.getLayer().getRevision();return this.renderedLayerRevision_!==l&&(this.renderedLayerRevision_=l,this.renderedTiles.length=0),super.prepareFrame(a)}updateExecutorGroup_(a,l,h){const d=this.getLayer(),f=d.getRevision(),m=d.getRenderOrder()||null,g=a.wantedResolution,y=a.getReplayState(d);if(!y.dirty&&y.renderedResolution===g&&y.renderedRevision==f&&y.renderedRenderOrder==m)return;const _=d.getSource(),v=d.getDeclutter(),b=_.getTileGrid(),T=_.getTileGridForProjection(h).getTileCoordExtent(a.wrappedTileCoord),x=_.getSourceTiles(l,h,a),E=an(d);delete a.hitDetectionImageData[E],a.executorGroups[E]=[],v&&(a.declutterExecutorGroups[E]=[]),y.dirty=!1;for(let I=0,M=x.length;I<M;++I){const D=x[I];if(2!=D.getState())continue;const P=b.getTileCoordExtent(D.tileCoord),F=Sc(T,P),B=tl(F,d.getRenderBuffer()*g,this.tmpExtent),G=Gl(P,F)?null:B,$=new $x(0,B,g,l),se=v?new $x(0,F,g,l):void 0,ie=BO(g,l),j=function(K){let le;const ye=K.getStyleFunction()||d.getStyleFunction();if(ye&&(le=ye(K,g)),le){const ke=this.renderFeature(K,ie,le,$,se);y.dirty=y.dirty||ke}},J=D.getFeatures();m&&m!==y.renderedRenderOrder&&J.sort(m);for(let K=0,le=J.length;K<le;++K){const ye=J[K];(!G||Mr(G,ye.getGeometry().getExtent()))&&j.call(this,ye)}const ae=$.finish(),ue="vector"!==d.getRenderMode()&&v&&1===x.length?null:F,ge=new Yx(ue,g,l,_.getOverlaps(),ae,d.getRenderBuffer());if(a.executorGroups[E].push(ge),se){const K=new Yx(null,g,l,_.getOverlaps(),se.finish(),d.getRenderBuffer());a.declutterExecutorGroups[E].push(K)}}y.renderedRevision=f,y.renderedRenderOrder=m,y.renderedResolution=g}forEachFeatureAtCoordinate(a,l,h,d,f){const m=l.viewState.resolution,g=l.viewState.rotation;h=h??0;const y=this.getLayer(),v=y.getSource().getTileGridForProjection(l.viewState.projection),b=CP([a]);tl(b,m*h,b);const S={},T=function(I,M,D){let L=I.getId();void 0===L&&(L=an(I));const P=S[L];if(P){if(!0!==P&&D<P.distanceSq){if(0===D)return S[L]=!0,f.splice(f.lastIndexOf(P),1),d(I,y,M);P.geometry=M,P.distanceSq=D}}else{if(0===D)return S[L]=!0,d(I,y,M);f.push(S[L]={feature:I,layer:y,geometry:M,distanceSq:D,callback:d})}},x=this.renderedTiles;let E;for(let I=0,M=x.length;!E&&I<M;++I){const D=x[I];if(!Mr(v.getTileCoordExtent(D.wrappedTileCoord),b))continue;const P=an(y),F=[D.executorGroups[P]],B=D.declutterExecutorGroups[P];B&&F.push(B),F.some(G=>{const $=G===B?l.declutterTree.all().map(se=>se.value):null;for(let se=0,ie=G.length;se<ie;++se)if(E=G[se].forEachFeatureAtCoordinate(a,m,g,h,T,$),E)return!0})}return E}getFeatures(a){return new Promise((l,h)=>{const d=this.getLayer(),f=an(d),m=d.getSource(),g=this.renderedProjection,y=g.getExtent(),_=this.renderedResolution,v=m.getTileGridForProjection(g),b=Or(this.renderedPixelToCoordinateTransform_,a.slice()),S=v.getTileCoordForCoordAndResolution(b,_);let T;for(let L=0,P=this.renderedTiles.length;L<P;++L)if(S.toString()===this.renderedTiles[L].tileCoord.toString()){if(T=this.renderedTiles[L],2===T.getState()){const F=v.getTileCoordExtent(T.tileCoord);m.getWrapX()&&g.canWrapX()&&!Ia(y,F)&&Dx(b,g);break}T=void 0}if(!T||T.loadingSourceTiles>0)return void l([]);const E=Tc(v.getTileCoordExtent(T.wrappedTileCoord)),I=[(b[0]-E[0])/_,(E[1]-b[1])/_],M=T.getSourceTiles().reduce(function(L,P){return L.concat(P.getFeatures())},[]);let D=T.hitDetectionImageData[f];if(!D){const L=So(v.getTileSize(v.getZForResolution(_,m.zDirection))),P=this.renderedRotation_;D=Yj(L,[this.getRenderTransform(v.getTileCoordCenter(T.wrappedTileCoord),_,0,ol,L[0]*ol,L[1]*ol,0)],M,d.getStyleFunction(),v.getTileCoordExtent(T.wrappedTileCoord),T.getReplayState(d).renderedResolution,P),T.hitDetectionImageData[f]=D}l(Zj(I,M,D))})}handleFontsChanged(){const a=this.getLayer();a.getVisible()&&void 0!==this.renderedLayerRevision_&&a.changed()}handleStyleImageChange_(a){this.renderIfReadyAndVisible()}renderDeclutter(a){const l=this.context,h=l.globalAlpha;l.globalAlpha=this.getLayer().getOpacity();const d=a.viewHints,f=!(d[0]||d[1]),m=this.renderedTiles;for(let g=0,y=m.length;g<y;++g){const _=m[g],v=_.declutterExecutorGroups[an(this.getLayer())];if(v)for(let b=v.length-1;b>=0;--b)v[b].execute(this.context,1,this.getTileRenderTransform(_,a),a.viewState.rotation,f,void 0,a.declutterTree)}l.globalAlpha=h}getTileRenderTransform(a,l){const h=l.pixelRatio,d=l.viewState,f=d.center,m=d.resolution,g=d.rotation,y=l.size,_=Math.round(y[0]*h),v=Math.round(y[1]*h),S=this.getLayer().getSource().getTileGridForProjection(l.viewState.projection),T=a.tileCoord,x=S.getTileCoordExtent(a.wrappedTileCoord),E=S.getTileCoordExtent(T,this.tmpExtent)[0]-x[0];return Lp(gx(this.inversePixelTransform.slice(),1/h,1/h),this.getRenderTransform(f,m,g,h,_,v,E))}postRender(a,l){const h=l.viewHints,d=!(h[0]||h[1]);this.renderedPixelToCoordinateTransform_=l.pixelToCoordinateTransform.slice(),this.renderedRotation_=l.viewState.rotation;const f=this.getLayer(),m=f.getRenderMode(),g=a.globalAlpha;a.globalAlpha=f.getOpacity();const y=j1e[m],_=l.viewState,v=_.rotation,b=f.getSource(),T=b.getTileGridForProjection(_.projection).getZForResolution(_.resolution,b.zDirection),x=this.renderedTiles,E=[],I=[];let M=!0;for(let D=x.length-1;D>=0;--D){const L=x[D];M=M&&!L.getReplayState(f).dirty;const P=L.executorGroups[an(f)].filter(se=>se.hasExecutors(y));if(0===P.length)continue;const F=this.getTileRenderTransform(L,l),B=L.tileCoord[0];let G=!1;const $=P[0].getClipCoords(F);if($){for(let se=0,ie=E.length;se<ie;++se)if(T!==B&&B<I[se]){const j=E[se];Mr([$[0],$[3],$[4],$[7]],[j[0],j[3],j[4],j[7]])&&(G||(a.save(),G=!0),a.beginPath(),a.moveTo($[0],$[1]),a.lineTo($[2],$[3]),a.lineTo($[4],$[5]),a.lineTo($[6],$[7]),a.moveTo(j[6],j[7]),a.lineTo(j[4],j[5]),a.lineTo(j[2],j[3]),a.lineTo(j[0],j[1]),a.clip())}E.push($),I.push(B)}for(let se=0,ie=P.length;se<ie;++se)P[se].execute(a,1,F,v,d,y);G&&a.restore()}a.globalAlpha=g,this.ready=M,super.postRender(a,l)}renderFeature(a,l,h,d,f){if(!h)return!1;let m=!1;if(Array.isArray(h))for(let g=0,y=h.length;g<y;++g)m=Zx(d,a,h[g],l,this.boundHandleStyleImageChange_,void 0,f)||m;else m=Zx(d,a,h,l,this.boundHandleStyleImageChange_,void 0,f);return m}tileImageNeedsRender_(a){const l=this.getLayer();if("vector"===l.getRenderMode())return!1;const h=a.getReplayState(l),d=l.getRevision();return h.renderedTileResolution!==a.wantedResolution||h.renderedTileRevision!==d}renderTileImage_(a,l){const h=this.getLayer(),d=a.getReplayState(h),f=h.getRevision(),m=a.executorGroups[an(h)];d.renderedTileRevision=f;const g=a.wrappedTileCoord,y=g[0],_=h.getSource();let v=l.pixelRatio;const S=l.viewState.projection,T=_.getTileGridForProjection(S),x=T.getResolution(a.tileCoord[0]),E=l.pixelRatio/a.wantedResolution*x,I=T.getResolution(y),M=a.getContext(h);v=Math.round(Math.max(v,E/v));const D=_.getTilePixelSize(y,v,S);M.canvas.width=D[0],M.canvas.height=D[1];const L=v/E;if(1!==L){const G=Mb(this.tmpTransform_);gx(G,L,L),M.setTransform.apply(M,G)}const P=T.getTileCoordExtent(g,this.tmpExtent),F=E/I,B=Mb(this.tmpTransform_);gx(B,F,-F),wP(B,-P[0],-P[3]);for(let G=0,$=m.length;G<$;++G)m[G].execute(M,L,B,0,!0,H1e[h.getRenderMode()]);d.renderedTileResolution=a.wantedResolution}},Xy=class q1e extends zy{constructor(a){a=a||{};const l=Object.assign({},a);delete l.preload,delete l.useInterimTilesOnError,super(l);const h=a.renderMode||"hybrid";En("hybrid"==h||"vector"==h,28),this.renderMode_=h,this.setPreload(a.preload?a.preload:0),this.setUseInterimTilesOnError(void 0===a.useInterimTilesOnError||a.useInterimTilesOnError)}createRenderer(){return new X1e(this)}getFeatures(a){return super.getFeatures(a)}getRenderMode(){return this.renderMode_}getPreload(){return this.get("preload")}getUseInterimTilesOnError(){return this.get("useInterimTilesOnError")}setPreload(a){this.set("preload",a)}setUseInterimTilesOnError(a){this.set("useInterimTilesOnError",a)}},Y1e=class $1e extends Xx{constructor(a,l,h,d,f,m){super(a,l,m),this.extent=null,this.format_=d,this.features_=null,this.projection=null,this.tileLoadFunction_=f,this.url_=h,this.key=h}getFormat(){return this.format_}getFeatures(){return this.features_}load(){0==this.state&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(a,l){this.setFeatures(a)}onError(){this.setState(3)}setFeatures(a){this.features_=a,this.setState(2)}setLoader(a){this.loader_=a}};function Qj(c,a,l,h){return void 0!==h?(h[0]=c,h[1]=a,h[2]=l,h):[c,a,l]}function qy(c,a,l){return c+"/"+a+"/"+l}function eW(c){return qy(c[0],c[1],c[2])}function tW(c){return c.split("/").map(Number)}function nW(c){return(c[1]<<c[0])+c[2]}const zO=class eTe extends class Z1e{constructor(a){this.highWaterMark=void 0!==a?a:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(a){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(a){return this.entries_.hasOwnProperty(a)}forEach(a){let l=this.oldest_;for(;l;)a(l.value_,l.key_,this),l=l.newer}get(a,l){const h=this.entries_[a];return En(void 0!==h,15),h===this.newest_||(h===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(h.newer.older=h.older,h.older.newer=h.newer),h.newer=null,h.older=this.newest_,this.newest_.newer=h,this.newest_=h),h.value_}remove(a){const l=this.entries_[a];return En(void 0!==l,15),l===this.newest_?(this.newest_=l.older,this.newest_&&(this.newest_.newer=null)):l===this.oldest_?(this.oldest_=l.newer,this.oldest_&&(this.oldest_.older=null)):(l.newer.older=l.older,l.older.newer=l.newer),delete this.entries_[a],--this.count_,l.value_}getCount(){return this.count_}getKeys(){const a=new Array(this.count_);let h,l=0;for(h=this.newest_;h;h=h.older)a[l++]=h.key_;return a}getValues(){const a=new Array(this.count_);let h,l=0;for(h=this.newest_;h;h=h.older)a[l++]=h.value_;return a}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(a){if(this.containsKey(a))return this.entries_[a].value_}pop(){const a=this.oldest_;return delete this.entries_[a.key_],a.newer&&(a.newer.older=null),this.oldest_=a.newer,this.oldest_||(this.newest_=null),--this.count_,a.value_}replace(a,l){this.get(a),this.entries_[a].value_=l}set(a,l){En(!(a in this.entries_),16);const h={key_:a,newer:null,older:this.newest_,value_:l};this.newest_?this.newest_.newer=h:this.oldest_=h,this.newest_=h,this.entries_[a]=h,++this.count_}setSize(a){this.highWaterMark=a}}{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(a){for(;this.canExpireCache()&&!(this.peekLast().getKey()in a);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const h=tW(this.peekFirstKey())[0];this.forEach(d=>{d.tileCoord[0]!==h&&(this.remove(eW(d.tileCoord)),d.release())})}},$y=[0,0,0],Yy=class tTe{constructor(a){let l;if(this.minZoom=void 0!==a.minZoom?a.minZoom:0,this.resolutions_=a.resolutions,En(function e0e(c,a,l){const h=a||Ip;return c.every(function(d,f){if(0===f)return!0;const m=h(c[f-1],d);return!(m>0||l&&0===m)})}(this.resolutions_,function(d,f){return f-d},!0),17),!a.origins)for(let d=0,f=this.resolutions_.length-1;d<f;++d)if(l){if(this.resolutions_[d]/this.resolutions_[d+1]!==l){l=void 0;break}}else l=this.resolutions_[d]/this.resolutions_[d+1];this.zoomFactor_=l,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==a.origin?a.origin:null,this.origins_=null,void 0!==a.origins&&(this.origins_=a.origins,En(this.origins_.length==this.resolutions_.length,20));const h=a.extent;void 0!==h&&!this.origin_&&!this.origins_&&(this.origin_=Tc(h)),En(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==a.tileSizes&&(this.tileSizes_=a.tileSizes,En(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==a.tileSize?a.tileSize:this.tileSizes_?null:256,En(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==h?h:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==a.sizes?this.fullTileRanges_=a.sizes.map(function(d,f){const m=new zj(Math.min(0,d[0]),Math.max(d[0]-1,-1),Math.min(0,d[1]),Math.max(d[1]-1,-1));if(h){const g=this.getTileRangeForExtentAndZ(h,f);m.minX=Math.max(g.minX,m.minX),m.maxX=Math.min(g.maxX,m.maxX),m.minY=Math.max(g.minY,m.minY),m.maxY=Math.min(g.maxY,m.maxY)}return m},this):h&&this.calculateTileRanges_(h)}forEachTileCoord(a,l,h){const d=this.getTileRangeForExtentAndZ(a,l);for(let f=d.minX,m=d.maxX;f<=m;++f)for(let g=d.minY,y=d.maxY;g<=y;++g)h([l,f,g])}forEachTileCoordParentTileRange(a,l,h,d){let f,m,g,y=null,_=a[0]-1;for(2===this.zoomFactor_?(m=a[1],g=a[2]):y=this.getTileCoordExtent(a,d);_>=this.minZoom;){if(2===this.zoomFactor_?(m=Math.floor(m/2),g=Math.floor(g/2),f=jy(m,m,g,g,h)):f=this.getTileRangeForExtentAndZ(y,_,h),l(_,f))return!0;--_}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(a){return this.origin_?this.origin_:this.origins_[a]}getResolution(a){return this.resolutions_[a]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(a,l,h){if(a[0]<this.maxZoom){if(2===this.zoomFactor_){const f=2*a[1],m=2*a[2];return jy(f,f+1,m,m+1,l)}const d=this.getTileCoordExtent(a,h||this.tmpExtent_);return this.getTileRangeForExtentAndZ(d,a[0]+1,l)}return null}getTileRangeForTileCoordAndZ(a,l,h){if(l>this.maxZoom||l<this.minZoom)return null;const d=a[0],f=a[1],m=a[2];if(l===d)return jy(f,m,f,m,h);if(this.zoomFactor_){const y=Math.pow(this.zoomFactor_,l-d),_=Math.floor(f*y),v=Math.floor(m*y);return l<d?jy(_,_,v,v,h):jy(_,Math.floor(y*(f+1))-1,v,Math.floor(y*(m+1))-1,h)}const g=this.getTileCoordExtent(a,this.tmpExtent_);return this.getTileRangeForExtentAndZ(g,l,h)}getTileRangeExtent(a,l,h){const d=this.getOrigin(a),f=this.getResolution(a),m=So(this.getTileSize(a),this.tmpSize_);return cu(d[0]+l.minX*m[0]*f,d[1]+l.minY*m[1]*f,d[0]+(l.maxX+1)*m[0]*f,d[1]+(l.maxY+1)*m[1]*f,h)}getTileRangeForExtentAndZ(a,l,h){this.getTileCoordForXYAndZ_(a[0],a[3],l,!1,$y);const d=$y[1],f=$y[2];return this.getTileCoordForXYAndZ_(a[2],a[1],l,!0,$y),jy(d,$y[1],f,$y[2],h)}getTileCoordCenter(a){const l=this.getOrigin(a[0]),h=this.getResolution(a[0]),d=So(this.getTileSize(a[0]),this.tmpSize_);return[l[0]+(a[1]+.5)*d[0]*h,l[1]-(a[2]+.5)*d[1]*h]}getTileCoordExtent(a,l){const h=this.getOrigin(a[0]),d=this.getResolution(a[0]),f=So(this.getTileSize(a[0]),this.tmpSize_),m=h[0]+a[1]*f[0]*d,g=h[1]-(a[2]+1)*f[1]*d;return cu(m,g,m+f[0]*d,g+f[1]*d,l)}getTileCoordForCoordAndResolution(a,l,h){return this.getTileCoordForXYAndResolution_(a[0],a[1],l,!1,h)}getTileCoordForXYAndResolution_(a,l,h,d,f){const m=this.getZForResolution(h),g=h/this.getResolution(m),y=this.getOrigin(m),_=So(this.getTileSize(m),this.tmpSize_);let v=g*(a-y[0])/h/_[0],b=g*(y[1]-l)/h/_[1];return d?(v=Vd(v,5)-1,b=Vd(b,5)-1):(v=Ly(v,5),b=Ly(b,5)),Qj(m,v,b,f)}getTileCoordForXYAndZ_(a,l,h,d,f){const m=this.getOrigin(h),g=this.getResolution(h),y=So(this.getTileSize(h),this.tmpSize_);let _=(a-m[0])/g/y[0],v=(m[1]-l)/g/y[1];return d?(_=Vd(_,5)-1,v=Vd(v,5)-1):(_=Ly(_,5),v=Ly(v,5)),Qj(h,_,v,f)}getTileCoordForCoordAndZ(a,l,h){return this.getTileCoordForXYAndZ_(a[0],a[1],l,!1,h)}getTileCoordResolution(a){return this.resolutions_[a[0]]}getTileSize(a){return this.tileSize_?this.tileSize_:this.tileSizes_[a]}getFullTileRange(a){return this.fullTileRanges_?this.fullTileRanges_[a]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,a):null}getZForResolution(a,l){return Qn(dx(this.resolutions_,a,l||0),this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(a,l){return Y7(l,0,l.length,2,this.getTileCoordExtent(a))}calculateTileRanges_(a){const l=this.resolutions_.length,h=new Array(l);for(let d=this.minZoom;d<l;++d)h[d]=this.getTileRangeForExtentAndZ(a,d);this.fullTileRanges_=h}};function iW(c){return c?Array.isArray(c)?function(a){return c}:"function"==typeof c?c:function(a){return[c]}:null}const Zy=class nTe extends bc{constructor(a){super(),this.projection=dn(a.projection),this.attributions_=iW(a.attributions),this.attributionsCollapsible_=void 0===a.attributionsCollapsible||a.attributionsCollapsible,this.loading=!1,this.state_=void 0!==a.state?a.state:"ready",this.wrapX_=void 0!==a.wrapX&&a.wrapX,this.interpolate_=!!a.interpolate,this.viewResolver=null,this.viewRejector=null;const l=this;this.viewPromise_=new Promise(function(h,d){l.viewResolver=h,l.viewRejector=d})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(a){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(a){this.attributions_=iW(a),this.changed()}setState(a){this.state_=a,this.changed()}};function rW(c){let a=c.getDefaultTileGrid();return a||(a=function sTe(c,a,l,h){return function rTe(c,a,l,h){h=void 0!==h?h:"top-left";const d=sW(c,a,l);return new Yy({extent:c,origin:S0e(c,h),resolutions:d,tileSize:l})}(sS(c),a,l,h)}(c),c.setDefaultTileGrid(a)),a}function rS(c){const a=c||{},l=a.extent||dn("EPSG:3857").getExtent(),h={extent:l,minZoom:a.minZoom,tileSize:a.tileSize,resolutions:sW(l,a.maxZoom,a.tileSize,a.maxResolution)};return new Yy(h)}function sW(c,a,l,h){a=void 0!==a?a:42,l=So(void 0!==l?l:256);const d=gr(c),f=Kn(c);h=h>0?h:Math.max(f/l[0],d/l[1]);const m=a+1,g=new Array(m);for(let y=0;y<m;++y)g[y]=h/Math.pow(2,y);return g}function sS(c){let a=(c=dn(c)).getExtent();if(!a){const l=180*_h.degrees/c.getMetersPerUnit();a=cu(-l,-l,l,l)}return a}class aTe extends vc{constructor(a,l){super(a),this.tile=l}}const HO=class oTe extends Zy{constructor(a){super({attributions:a.attributions,attributionsCollapsible:a.attributionsCollapsible,projection:a.projection,state:a.state,wrapX:a.wrapX,interpolate:a.interpolate}),this.opaque_=void 0!==a.opaque&&a.opaque,this.tilePixelRatio_=void 0!==a.tilePixelRatio?a.tilePixelRatio:1,this.tileGrid=void 0!==a.tileGrid?a.tileGrid:null,this.tileGrid&&So(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new zO(a.cacheSize||0),this.tmpSize=[0,0],this.key_=a.key||"",this.tileOptions={transition:a.transition,interpolate:a.interpolate},this.zDirection=a.zDirection?a.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(a,l){const h=this.getTileCacheForProjection(a);h&&h.expireCache(l)}forEachLoadedTile(a,l,h,d){const f=this.getTileCacheForProjection(a);if(!f)return!1;let g,y,_,m=!0;for(let v=h.minX;v<=h.maxX;++v)for(let b=h.minY;b<=h.maxY;++b)y=qy(l,v,b),_=!1,f.containsKey(y)&&(g=f.get(y),_=2===g.getState(),_&&(_=!1!==d(g))),_||(m=!1);return m}getGutterForProjection(a){return 0}getKey(){return this.key_}setKey(a){this.key_!==a&&(this.key_=a,this.changed())}getOpaque(a){return this.opaque_}getResolutions(a){const l=a?this.getTileGridForProjection(a):this.tileGrid;return l?l.getResolutions():null}getTile(a,l,h,d,f){return Rn()}getTileGrid(){return this.tileGrid}getTileGridForProjection(a){return this.tileGrid?this.tileGrid:rW(a)}getTileCacheForProjection(a){const l=this.getProjection();return En(null===l||Cc(l,a),68),this.tileCache}getTilePixelRatio(a){return this.tilePixelRatio_}getTilePixelSize(a,l,h){const d=this.getTileGridForProjection(h),f=this.getTilePixelRatio(l),m=So(d.getTileSize(a),this.tmpSize);return 1==f?m:bj(m,f,this.tmpSize)}getTileCoordForTileUrlFunction(a,l){l=void 0!==l?l:this.getProjection();const h=this.getTileGridForProjection(l);return this.getWrapX()&&l.isGlobal()&&(a=function iTe(c,a,l){const h=a[0],d=c.getTileCoordCenter(a),f=sS(l);if(!lu(f,d)){const m=Kn(f),g=Math.ceil((f[0]-d[0])/m);return d[0]+=m*g,c.getTileCoordForCoordAndZ(d,h)}return a}(h,a,l)),function Q1e(c,a){const l=c[0],h=c[1],d=c[2];if(a.getMinZoom()>l||l>a.getMaxZoom())return!1;const f=a.getFullTileRange(l);return!f||f.containsXY(h,d)}(a,h)?a:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(a,l){const h=this.getTileCacheForProjection(l);a>h.highWaterMark&&(h.highWaterMark=a)}useTile(a,l,h,d){}};function lTe(c,a){const l=/\{z\}/g,h=/\{x\}/g,d=/\{y\}/g,f=/\{-y\}/g;return function(m,g,y){if(m)return c.replace(l,m[0].toString()).replace(h,m[1].toString()).replace(d,m[2].toString()).replace(f,function(){const v=a.getFullTileRange(m[0]);return En(v,55),(v.getHeight()-m[2]-1).toString()})}}function oW(c,a){const l=c.length,h=new Array(l);for(let d=0;d<l;++d)h[d]=lTe(c[d],a);return jO(h)}function jO(c){return 1===c.length?c[0]:function(a,l,h){if(!a)return;const f=kd(nW(a),c.length);return c[f](a,l,h)}}function WO(c){const a=[];let l=/\{([a-z])-([a-z])\}/.exec(c);if(l){const h=l[1].charCodeAt(0),d=l[2].charCodeAt(0);let f;for(f=h;f<=d;++f)a.push(c.replace(l[0],String.fromCharCode(f)));return a}if(l=/\{(\d+)-(\d+)\}/.exec(c),l){const h=parseInt(l[2],10);for(let d=parseInt(l[1],10);d<=h;d++)a.push(c.replace(l[0],d.toString()));return a}return a.push(c),a}class XO extends HO{constructor(a){super({attributions:a.attributions,cacheSize:a.cacheSize,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX,transition:a.transition,interpolate:a.interpolate,key:a.key,attributionsCollapsible:a.attributionsCollapsible,zDirection:a.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===XO.prototype.tileUrlFunction,this.tileLoadFunction=a.tileLoadFunction,a.tileUrlFunction&&(this.tileUrlFunction=a.tileUrlFunction),this.urls=null,a.urls?this.setUrls(a.urls):a.url&&this.setUrl(a.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(a){const l=a.target,h=an(l),d=l.getState();let f;1==d?(this.tileLoadingKeys_[h]=!0,f="tileloadstart"):h in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[h],f=3==d?"tileloaderror":2==d?"tileloadend":void 0),null!=f&&this.dispatchEvent(new aTe(f,l))}setTileLoadFunction(a){this.tileCache.clear(),this.tileLoadFunction=a,this.changed()}setTileUrlFunction(a,l){this.tileUrlFunction=a,this.tileCache.pruneExceptNewestZ(),typeof l<"u"?this.setKey(l):this.changed()}setUrl(a){const l=WO(a);this.urls=l,this.setUrls(l)}setUrls(a){this.urls=a;const l=a.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(oW(a,this.tileGrid),l):this.setKey(l)}tileUrlFunction(a,l,h){}useTile(a,l,h){const d=qy(a,l,h);this.tileCache.containsKey(d)&&this.tileCache.get(d)}}const aW=XO,lW=[],uTe=class cTe extends Xx{constructor(a,l,h,d){super(a,l,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.getSourceTiles=d.bind(void 0,this),this.wrappedTileCoord=h}getContext(a){const l=an(a);return l in this.context_||(this.context_[l]=Yr(1,1,lW)),this.context_[l]}hasContext(a){return an(a)in this.context_}getImage(a){return this.hasContext(a)?this.getContext(a).canvas:null}getReplayState(a){const l=an(a);return l in this.replayState_||(this.replayState_[l]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[l]}load(){this.getSourceTiles()}release(){for(const a in this.context_){const l=this.context_[a];Ub(l),lW.push(l.canvas),delete this.context_[a]}super.release()}};function uW(c,a,l,h,d,f,m){const g=new XMLHttpRequest;g.open("GET","function"==typeof c?c(l,h,d):c,!0),"arraybuffer"==a.getType()&&(g.responseType="arraybuffer"),g.withCredentials=false,g.onload=function(y){if(!g.status||g.status>=200&&g.status<300){const _=a.getType();let v;"json"==_||"text"==_?v=g.responseText:"xml"==_?(v=g.responseXML,v||(v=(new DOMParser).parseFromString(g.responseText,"application/xml"))):"arraybuffer"==_&&(v=g.response),v?f(a.readFeatures(v,{extent:l,featureProjection:d}),a.readProjection(v)):m()}else m()},g.onerror=m,g.send()}function hW(c,a){return function(l,h,d,f,m){const g=this;uW(c,a,l,h,d,function(y,_){g.addFeatures(y),void 0!==f&&f(y)},m||Ey)}}const Kx=class hTe extends aW{constructor(a){const l=a.projection||"EPSG:3857",h=a.extent||sS(l),d=a.tileGrid||rS({extent:h,maxResolution:a.maxResolution,maxZoom:void 0!==a.maxZoom?a.maxZoom:22,minZoom:a.minZoom,tileSize:a.tileSize||512});super({attributions:a.attributions,attributionsCollapsible:a.attributionsCollapsible,cacheSize:a.cacheSize,interpolate:!0,opaque:!1,projection:l,state:a.state,tileGrid:d,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:dW,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:void 0===a.wrapX||a.wrapX,transition:a.transition,zDirection:void 0===a.zDirection?1:a.zDirection}),this.format_=a.format?a.format:null,this.sourceTileCache=new zO(this.tileCache.highWaterMark),this.overlaps_=a.overlaps??!0,this.tileClass=a.tileClass?a.tileClass:Y1e,this.tileGrids_={}}getFeaturesInExtent(a){const l=[],h=this.tileCache;if(0===h.getCount())return l;const d=tW(h.peekFirstKey())[0],f=this.tileGrid;return h.forEach(function(m){if(m.tileCoord[0]!==d||2!==m.getState())return;const g=m.getSourceTiles();for(let y=0,_=g.length;y<_;++y){const v=g[y];if(Mr(a,f.getTileCoordExtent(v.tileCoord))){const S=v.getFeatures();if(S)for(let T=0,x=S.length;T<x;++T){const E=S[T],I=E.getGeometry();Mr(a,I.getExtent())&&l.push(E)}}}}),l}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(a,l){const h=this.getTileCacheForProjection(a),d=Object.keys(l).reduce((f,m)=>{const g=function J1e(c){const[a,l,h]=c.substring(c.lastIndexOf("/")+1,c.length).split(",").map(Number);return qy(a,l,h)}(m),y=h.peek(g);if(y){const _=y.sourceTiles;for(let v=0,b=_.length;v<b;++v)f[_[v].getKey()]=!0}return f},{});super.expireCache(a,l),this.sourceTileCache.expireCache(d)}getSourceTiles(a,l,h){if(0===h.getState()){h.setState(1);const d=h.wrappedTileCoord,f=this.getTileGridForProjection(l),m=f.getTileCoordExtent(d),y=f.getResolution(d[0]);tl(m,-y,m);const _=this.tileGrid,v=_.getExtent();v&&Sc(m,v,m);const b=_.getZForResolution(y,this.zDirection);_.forEachTileCoord(m,b,S=>{const T=this.tileUrlFunction(S,a,l),x=this.sourceTileCache.containsKey(T)?this.sourceTileCache.get(T):new this.tileClass(S,T?0:4,T,this.format_,this.tileLoadFunction);h.sourceTiles.push(x);const E=x.getState();if(E<2){const I=M=>{this.handleTileChange(M);const D=x.getState();if(2===D||3===D){const L=x.getKey();L in h.errorTileKeys?2===x.getState()&&delete h.errorTileKeys[L]:h.loadingSourceTiles--,3===D?h.errorTileKeys[L]=!0:x.removeEventListener("change",I),0===h.loadingSourceTiles&&h.setState(Rp(h.errorTileKeys)?2:3)}};x.addEventListener("change",I),h.loadingSourceTiles++}0===E&&(x.extent=_.getTileCoordExtent(S),x.projection=l,x.resolution=_.getResolution(S[0]),this.sourceTileCache.set(T,x),x.load())}),h.loadingSourceTiles||h.setState(h.sourceTiles.some(S=>3===S.getState())?3:2)}return h.sourceTiles}getTile(a,l,h,d,f){const m=qy(a,l,h),g=this.getKey();let y;if(this.tileCache.containsKey(m)&&(y=this.tileCache.get(m),y.key===g))return y;const _=[a,l,h];let v=this.getTileCoordForTileUrlFunction(_,f);const b=this.getTileGrid().getExtent(),S=this.getTileGridForProjection(f);if(v&&b){const E=S.getTileCoordExtent(v);tl(E,-S.getResolution(a),E),Mr(b,E)||(v=null)}let T=!0;if(null!==v){const E=this.tileGrid,I=S.getResolution(a),M=E.getZForResolution(I,1),D=S.getTileCoordExtent(v);tl(D,-I,D),E.forEachTileCoord(D,M,L=>{T=T&&!this.tileUrlFunction(L,d,f)})}const x=new uTe(_,T?4:0,v,this.getSourceTiles.bind(this,d,f));return x.key=g,y?(x.interimTile=y,x.refreshInterimChain(),this.tileCache.replace(m,x)):this.tileCache.set(m,x),x}getTileGridForProjection(a){const l=a.getCode();let h=this.tileGrids_[l];if(!h){const d=this.tileGrid,f=d.getResolutions().slice(),m=f.map(function(_,v){return d.getOrigin(v)}),g=f.map(function(_,v){return d.getTileSize(v)}),y=43;for(let _=f.length;_<y;++_)f.push(f[_-1]/2),m.push(m[_-1]),g.push(g[_-1]);h=new Yy({extent:d.getExtent(),origins:m,resolutions:f,tileSizes:g}),this.tileGrids_[l]=h}return h}getTilePixelRatio(a){return a}getTilePixelSize(a,l,h){const f=So(this.getTileGridForProjection(h).getTileSize(a),this.tmpSize);return[Math.round(f[0]*l),Math.round(f[1]*l)]}updateCacheSize(a,l){super.updateCacheSize(2*a,l),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(l).highWaterMark}};function dW(c,a){c.setLoader(function(l,h,d){uW(a,c.getFormat(),l,h,d,c.onLoad.bind(c),c.onError.bind(c))})}function Jx(c,a,l,h,d,f,m){let g,y;const _=(l-a)/h;if(1===_)g=a;else if(2===_)g=a,y=d;else if(0!==_){let v=c[a],b=c[a+1],S=0;const T=[0];for(let I=a+h;I<l;I+=h){const M=c[I],D=c[I+1];S+=Math.sqrt((M-v)*(M-v)+(D-b)*(D-b)),T.push(S),v=M,b=D}const x=d*S,E=function Jve(c,a,l){let h,d;l=l||Ip;let f=0,m=c.length,g=!1;for(;f<m;)h=f+(m-f>>1),d=+l(c[h],a),d<0?f=h+1:(m=h,g=!d);return g?f:~f}(T,x);E<0?(y=(x-T[-E-2])/(T[-E-1]-T[-E-2]),g=a+(-E-2)*h):g=a+E*h}m=m>1?m:2,f=f||new Array(m);for(let v=0;v<m;++v)f[v]=void 0===g?NaN:void 0===y?c[g+v]:nl(c[g+v],c[g+h+v],y);return f}function qO(c,a,l,h,d,f){if(l==a)return null;let m;if(d<c[a+h-1])return f?(m=c.slice(a,a+h),m[h-1]=d,m):null;if(c[l-1]<d)return f?(m=c.slice(l-h,l),m[h-1]=d,m):null;if(d==c[a+h-1])return c.slice(a,a+h);let g=a/h,y=l/h;for(;g<y;){const S=g+y>>1;d<c[(S+1)*h-1]?y=S:g=S+1}const _=c[g*h-1];if(d==_)return c.slice((g-1)*h,(g-1)*h+h);const b=(d-_)/(c[(g+1)*h-1]-_);m=[];for(let S=0;S<h-1;++S)m.push(nl(c[(g-1)*h+S],c[g*h+S],b));return m.push(d),m}function fW(c,a,l,h){const d=[];let f=[1/0,1/0,-1/0,-1/0];for(let m=0,g=l.length;m<g;++m){const y=l[m];f=MP(c,a,y[0],h),d.push((f[0]+f[2])/2,(f[1]+f[3])/2),a=y[y.length-1]}return d}const pW=[1,0,0,1,0,0];class oS{constructor(a,l,h,d,f){this.id_=f,this.type_=a,this.flatCoordinates_=l,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=h,this.properties_=d}get(a){return this.properties_[a]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?EP(this.flatCoordinates_):MP(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const a=aa(this.getExtent());this.flatInteriorPoints_=nO(this.flatCoordinates_,0,this.ends_,2,a,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const a=fW(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=q7(this.flatCoordinates_,0,this.ends_,2,a)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Jx(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const a=this.flatCoordinates_;let l=0;const h=this.ends_;for(let d=0,f=h.length;d<f;++d){const m=h[d],g=Jx(a,l,m,2,.5);Pr(this.flatMidpoints_,g),l=m}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(a){return this}simplifyTransformed(a,l){return this}getProperties(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(a){const l=(a=dn(a)).getExtent(),h=a.getWorldExtent();if(l&&h){const d=gr(h)/gr(l);sa(pW,h[0],h[3],d,-d,0,0,0),Bd(this.flatCoordinates_,0,this.flatCoordinates_.length,2,pW,this.flatCoordinates_)}}getEnds(){return this.ends_}}oS.prototype.getEndss=oS.prototype.getEnds,oS.prototype.getFlatCoordinates=oS.prototype.getOrientedFlatCoordinates;const $O=oS;class YO extends bc{constructor(a){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),a&&("function"==typeof a.getSimplifiedGeometry?this.setGeometry(a):this.setProperties(a))}clone(){const a=new YO(this.hasProperties()?this.getProperties():null);a.setGeometryName(this.getGeometryName());const l=this.getGeometry();l&&a.setGeometry(l.clone());const h=this.getStyle();return h&&a.setStyle(h),a}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(or(this.geometryChangeKey_),this.geometryChangeKey_=null);const a=this.getGeometry();a&&(this.geometryChangeKey_=Zn(a,"change",this.handleGeometryChange_,this)),this.changed()}setGeometry(a){this.set(this.geometryName_,a)}setStyle(a){this.style_=a,this.styleFunction_=a?function pTe(c){if("function"==typeof c)return c;let a;return Array.isArray(c)?a=c:(En("function"==typeof c.getZIndex,41),a=[c]),function(){return a}}(a):void 0,this.changed()}setId(a){this.id_=a,this.changed()}setGeometryName(a){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=a,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const Ky=YO;class Qx extends B7{constructor(a){super(),this.geometries_=a||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(or),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let a=0,l=this.geometries_.length;a<l;++a)this.changeEventsKeys_.push(Zn(this.geometries_[a],"change",this.changed,this))}clone(){const a=new Qx(null);return a.setGeometries(this.geometries_),a.applyProperties(this),a}closestPointXY(a,l,h,d){if(d<Pp(this.getExtent(),a,l))return d;const f=this.geometries_;for(let m=0,g=f.length;m<g;++m)d=f[m].closestPointXY(a,l,h,d);return d}containsXY(a,l){const h=this.geometries_;for(let d=0,f=h.length;d<f;++d)if(h[d].containsXY(a,l))return!0;return!1}computeExtent(a){Op(a);const l=this.geometries_;for(let h=0,d=l.length;h<d;++h)DP(a,l[h].getExtent());return a}getGeometries(){return mW(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let a=[];const l=this.geometries_;for(let h=0,d=l.length;h<d;++h)l[h].getType()===this.getType()?a=a.concat(l[h].getGeometriesArrayRecursive()):a.push(l[h]);return a}getSimplifiedGeometry(a){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),a<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&a<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const l=[],h=this.geometries_;let d=!1;for(let f=0,m=h.length;f<m;++f){const g=h[f],y=g.getSimplifiedGeometry(a);l.push(y),y!==g&&(d=!0)}if(d){const f=new Qx(null);return f.setGeometriesArray(l),f}return this.simplifiedGeometryMaxMinSquaredTolerance=a,this}getType(){return"GeometryCollection"}intersectsExtent(a){const l=this.geometries_;for(let h=0,d=l.length;h<d;++h)if(l[h].intersectsExtent(a))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(a,l){const h=this.geometries_;for(let d=0,f=h.length;d<f;++d)h[d].rotate(a,l);this.changed()}scale(a,l,h){h||(h=aa(this.getExtent()));const d=this.geometries_;for(let f=0,m=d.length;f<m;++f)d[f].scale(a,l,h);this.changed()}setGeometries(a){this.setGeometriesArray(mW(a))}setGeometriesArray(a){this.unlistenGeometriesChange_(),this.geometries_=a,this.listenGeometriesChange_(),this.changed()}applyTransform(a){const l=this.geometries_;for(let h=0,d=l.length;h<d;++h)l[h].applyTransform(a);this.changed()}translate(a,l){const h=this.geometries_;for(let d=0,f=h.length;d<f;++d)h[d].translate(a,l);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function mW(c){const a=[];for(let l=0,h=c.length;l<h;++l)a.push(c[l].clone());return a}const Jd=Qx,ZO=class mTe{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(a,l){if(l){let h=l.dataProjection?dn(l.dataProjection):this.readProjection(a);l.extent&&h&&"tile-pixels"===h.getUnits()&&(h=dn(h),h.setWorldExtent(l.extent)),l={dataProjection:h,featureProjection:l.featureProjection}}return this.adaptOptions(l)}adaptOptions(a){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},a)}getType(){return Rn()}readFeature(a,l){return Rn()}readFeatures(a,l){return Rn()}readGeometry(a,l){return Rn()}readProjection(a){return Rn()}writeFeature(a,l){return Rn()}writeFeatures(a,l){return Rn()}writeGeometry(a,l){return Rn()}};function Jy(c,a,l){const h=l?dn(l.featureProjection):null,d=l?dn(l.dataProjection):null;let f;if(f=h&&d&&!Cc(h,d)?(a?c.clone():c).transform(a?h:d,a?d:h):c,a&&l&&void 0!==l.decimals){const m=Math.pow(10,l.decimals),g=function(y){for(let _=0,v=y.length;_<v;++_)y[_]=Math.round(y[_]*m)/m;return y};f===c&&(f=c.clone()),f.applyTransform(g)}return f}function eE(c){return"string"==typeof c?JSON.parse(c)||null:null!==c?c:null}const gW=class gTe extends ZO{constructor(){super()}getType(){return"json"}readFeature(a,l){return this.readFeatureFromObject(eE(a),this.getReadOptions(a,l))}readFeatures(a,l){return this.readFeaturesFromObject(eE(a),this.getReadOptions(a,l))}readFeatureFromObject(a,l){return Rn()}readFeaturesFromObject(a,l){return Rn()}readGeometry(a,l){return this.readGeometryFromObject(eE(a),this.getReadOptions(a,l))}readGeometryFromObject(a,l){return Rn()}readProjection(a){return this.readProjectionFromObject(eE(a))}readProjectionFromObject(a){return Rn()}writeFeature(a,l){return JSON.stringify(this.writeFeatureObject(a,l))}writeFeatureObject(a,l){return Rn()}writeFeatures(a,l){return JSON.stringify(this.writeFeaturesObject(a,l))}writeFeaturesObject(a,l){return Rn()}writeGeometry(a,l){return JSON.stringify(this.writeGeometryObject(a,l))}writeGeometryObject(a,l){return Rn()}};class tE extends Bp{constructor(a,l){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===l||Array.isArray(a[0])?this.setCoordinates(a,l):this.setFlatCoordinates(l,a)}appendCoordinate(a){this.flatCoordinates?Pr(this.flatCoordinates,a):this.flatCoordinates=a.slice(),this.changed()}clone(){const a=new tE(this.flatCoordinates.slice(),this.layout);return a.applyProperties(this),a}closestPointXY(a,l,h,d){return d<Pp(this.getExtent(),a,l)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($P(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ZP(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,a,l,h,d))}forEachSegment(a){return $7(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a)}getCoordinateAtM(a,l){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:qO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,l=void 0!==l&&l)}getCoordinates(){return Ud(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(a,l){return Jx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,l,this.stride)}getLength(){return FO(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(a){const l=[];return l.length=Ox(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,l,0),new tE(l,"XY")}getType(){return"LineString"}intersectsExtent(a){return Fx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a)}setCoordinates(a,l){this.setLayout(l,a,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Px(this.flatCoordinates,0,a,this.stride),this.changed()}}const Eh=tE;class nE extends Bp{constructor(a,l,h){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(a[0]))this.setCoordinates(a,l);else if(void 0!==l&&h)this.setFlatCoordinates(l,a),this.ends_=h;else{let d=this.getLayout();const f=a,m=[],g=[];for(let y=0,_=f.length;y<_;++y){const v=f[y];0===y&&(d=v.getLayout()),Pr(m,v.getFlatCoordinates()),g.push(m.length)}this.setFlatCoordinates(d,m),this.ends_=g}}appendLineString(a){this.flatCoordinates?Pr(this.flatCoordinates,a.getFlatCoordinates().slice()):this.flatCoordinates=a.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const a=new nE(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return a.applyProperties(this),a}closestPointXY(a,l,h,d){return d<Pp(this.getExtent(),a,l)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(YP(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),KP(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,a,l,h,d))}getCoordinateAtM(a,l,h){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:function dTe(c,a,l,h,d,f,m){if(m)return qO(c,a,l[l.length-1],h,d,f);let g;if(d<c[h-1])return f?(g=c.slice(0,h),g[h-1]=d,g):null;if(c[c.length-1]<d)return f?(g=c.slice(c.length-h),g[h-1]=d,g):null;for(let y=0,_=l.length;y<_;++y){const v=l[y];if(a!=v){if(d<c[a+h-1])return null;if(d<=c[v-1])return qO(c,a,v,h,d,!1);a=v}}return null}(this.flatCoordinates,0,this.ends_,this.stride,a,l=void 0!==l&&l,h=void 0!==h&&h)}getCoordinates(){return kb(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(a){return a<0||this.ends_.length<=a?null:new Eh(this.flatCoordinates.slice(0===a?0:this.ends_[a-1],this.ends_[a]),this.layout)}getLineStrings(){const a=this.flatCoordinates,l=this.ends_,h=this.layout,d=[];let f=0;for(let m=0,g=l.length;m<g;++m){const y=l[m],_=new Eh(a.slice(f,y),h);d.push(_),f=y}return d}getFlatMidpoints(){const a=[],l=this.flatCoordinates;let h=0;const d=this.ends_,f=this.stride;for(let m=0,g=d.length;m<g;++m){const y=d[m];Pr(a,Jx(l,h,y,f,.5)),h=y}return a}getSimplifiedGeometryInternal(a){const l=[],h=[];return l.length=function G7(c,a,l,h,d,f,m,g){for(let y=0,_=l.length;y<_;++y){const v=l[y];m=Ox(c,a,v,h,d,f,m),g.push(m),a=v}return m}(this.flatCoordinates,0,this.ends_,this.stride,a,l,0,h),new nE(l,"XY",h)}getType(){return"MultiLineString"}intersectsExtent(a){return function _be(c,a,l,h,d){for(let f=0,m=l.length;f<m;++f){if(Fx(c,a,l[f],h,d))return!0;a=l[f]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,a)}setCoordinates(a,l){this.setLayout(l,a,2),this.flatCoordinates||(this.flatCoordinates=[]);const h=JP(this.flatCoordinates,0,a,this.stride,this.ends_);this.flatCoordinates.length=0===h.length?0:h[h.length-1],this.changed()}}const aS=nE;class KO extends Bp{constructor(a,l){super(),l&&!Array.isArray(a[0])?this.setFlatCoordinates(l,a):this.setCoordinates(a,l)}appendPoint(a){this.flatCoordinates?Pr(this.flatCoordinates,a.getFlatCoordinates()):this.flatCoordinates=a.getFlatCoordinates().slice(),this.changed()}clone(){const a=new KO(this.flatCoordinates.slice(),this.layout);return a.applyProperties(this),a}closestPointXY(a,l,h,d){if(d<Pp(this.getExtent(),a,l))return d;const f=this.flatCoordinates,m=this.stride;for(let g=0,y=f.length;g<y;g+=m){const _=Np(a,l,f[g],f[g+1]);if(_<d){d=_;for(let v=0;v<m;++v)h[v]=f[g+v];h.length=m}}return d}getCoordinates(){return Ud(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(a){return a<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=a?null:new du(this.flatCoordinates.slice(a*this.stride,(a+1)*this.stride),this.layout)}getPoints(){const a=this.flatCoordinates,l=this.layout,h=this.stride,d=[];for(let f=0,m=a.length;f<m;f+=h){const g=new du(a.slice(f,f+h),l);d.push(g)}return d}getType(){return"MultiPoint"}intersectsExtent(a){const l=this.flatCoordinates,h=this.stride;for(let d=0,f=l.length;d<f;d+=h)if(Ab(a,l[d],l[d+1]))return!0;return!1}setCoordinates(a,l){this.setLayout(l,a,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Px(this.flatCoordinates,0,a,this.stride),this.changed()}}const lS=KO;class iE extends Bp{constructor(a,l,h){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!h&&!Array.isArray(a[0])){let d=this.getLayout();const f=a,m=[],g=[];for(let y=0,_=f.length;y<_;++y){const v=f[y];0===y&&(d=v.getLayout());const b=m.length,S=v.getEnds();for(let T=0,x=S.length;T<x;++T)S[T]+=b;Pr(m,v.getFlatCoordinates()),g.push(S)}l=d,a=m,h=g}void 0!==l&&h?(this.setFlatCoordinates(l,a),this.endss_=h):this.setCoordinates(a,l)}appendPolygon(a){let l;if(this.flatCoordinates){const h=this.flatCoordinates.length;Pr(this.flatCoordinates,a.getFlatCoordinates()),l=a.getEnds().slice();for(let d=0,f=l.length;d<f;++d)l[d]+=h}else this.flatCoordinates=a.getFlatCoordinates().slice(),l=a.getEnds().slice(),this.endss_.push();this.endss_.push(l),this.changed()}clone(){const a=this.endss_.length,l=new Array(a);for(let d=0;d<a;++d)l[d]=this.endss_[d].slice();const h=new iE(this.flatCoordinates.slice(),this.layout,l);return h.applyProperties(this),h}closestPointXY(a,l,h,d){return d<Pp(this.getExtent(),a,l)?d:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function lbe(c,a,l,h,d){for(let f=0,m=l.length;f<m;++f){const g=l[f];d=YP(c,a,g,h,d),a=g[g.length-1]}return d}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function cbe(c,a,l,h,d,f,m,g,y,_,v){v=v||[NaN,NaN];for(let b=0,S=l.length;b<S;++b){const T=l[b];_=KP(c,a,T,h,d,f,m,g,y,_,v),a=T[T.length-1]}return _}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,a,l,h,d))}containsXY(a,l){return function ybe(c,a,l,h,d,f){if(0===l.length)return!1;for(let m=0,g=l.length;m<g;++m){const y=l[m];if(tO(c,a,y,h,d,f))return!0;a=y[y.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,a,l)}getArea(){return function mbe(c,a,l,h){let d=0;for(let f=0,m=l.length;f<m;++f){const g=l[f];d+=W7(c,a,g,h),a=g[g.length-1]}return d}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(a){let l;return void 0!==a?(l=this.getOrientedFlatCoordinates().slice(),J7(l,0,this.endss_,this.stride,a)):l=this.flatCoordinates,QP(l,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const a=fW(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=q7(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,a),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new lS(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const a=this.flatCoordinates;!function Sbe(c,a,l,h,d){for(let f=0,m=l.length;f<m;++f){const g=l[f];if(!K7(c,a,g,h,d))return!1;g.length&&(a=g[g.length-1])}return!0}(a,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=a.slice(),this.orientedFlatCoordinates_.length=J7(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=a,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(a){const l=[],h=[];return l.length=function pbe(c,a,l,h,d,f,m,g){for(let y=0,_=l.length;y<_;++y){const v=l[y],b=[];m=H7(c,a,v,h,d,f,m,b),g.push(b),a=v[v.length-1]}return m}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(a),l,0,h),new iE(l,"XY",h)}getPolygon(a){if(a<0||this.endss_.length<=a)return null;let l;if(0===a)l=0;else{const f=this.endss_[a-1];l=f[f.length-1]}const h=this.endss_[a].slice(),d=h[h.length-1];if(0!==l)for(let f=0,m=h.length;f<m;++f)h[f]-=l;return new Th(this.flatCoordinates.slice(l,d),this.layout,h)}getPolygons(){const a=this.layout,l=this.flatCoordinates,h=this.endss_,d=[];let f=0;for(let m=0,g=h.length;m<g;++m){const y=h[m].slice(),_=y[y.length-1];if(0!==f)for(let b=0,S=y.length;b<S;++b)y[b]-=f;const v=new Th(l.slice(f,_),a,y);d.push(v),f=_}return d}getType(){return"MultiPolygon"}intersectsExtent(a){return function vbe(c,a,l,h,d){for(let f=0,m=l.length;f<m;++f){const g=l[f];if(Z7(c,a,g,h,d))return!0;a=g[g.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,a)}setCoordinates(a,l){this.setLayout(l,a,3),this.flatCoordinates||(this.flatCoordinates=[]);const h=function hbe(c,a,l,h,d){d=d||[];let f=0;for(let m=0,g=l.length;m<g;++m){const y=JP(c,a,l[m],h,d[f]);0===y.length&&(y[0]=a),d[f++]=y,a=y[y.length-1]}return d.length=f,d}(this.flatCoordinates,0,a,this.stride,this.endss_);if(0===h.length)this.flatCoordinates.length=0;else{const d=h[h.length-1];this.flatCoordinates.length=0===d.length?0:d[d.length-1]}this.changed()}}const rE=iE;function JO(c,a){if(!c)return null;let l;switch(c.type){case"Point":l=function vTe(c){return new du(c.coordinates)}(c);break;case"LineString":l=function bTe(c){return new Eh(c.coordinates)}(c);break;case"Polygon":l=function CTe(c){return new Th(c.coordinates)}(c);break;case"MultiPoint":l=function TTe(c){return new lS(c.coordinates)}(c);break;case"MultiLineString":l=function STe(c){return new aS(c.coordinates)}(c);break;case"MultiPolygon":l=function wTe(c){return new rE(c.coordinates)}(c);break;case"GeometryCollection":l=function _Te(c,a){const l=c.geometries.map(function(h){return JO(h,a)});return new Jd(l)}(c);break;default:throw new Error("Unsupported GeoJSON type: "+c.type)}return Jy(l,!1,a)}function QO(c,a){const l=(c=Jy(c,!0,a)).getType();let h;switch(l){case"Point":h=function ITe(c,a){return{type:"Point",coordinates:c.getCoordinates()}}(c);break;case"LineString":h=function ETe(c,a){return{type:"LineString",coordinates:c.getCoordinates()}}(c);break;case"Polygon":h=function RTe(c,a){let l;return a&&(l=a.rightHanded),{type:"Polygon",coordinates:c.getCoordinates(l)}}(c,a);break;case"MultiPoint":h=function DTe(c,a){return{type:"MultiPoint",coordinates:c.getCoordinates()}}(c);break;case"MultiLineString":h=function MTe(c,a){return{type:"MultiLineString",coordinates:c.getCoordinates()}}(c);break;case"MultiPolygon":h=function ATe(c,a){let l;return a&&(l=a.rightHanded),{type:"MultiPolygon",coordinates:c.getCoordinates(l)}}(c,a);break;case"GeometryCollection":h=function xTe(c,a){delete(a=Object.assign({},a)).featureProjection;const l=c.getGeometriesArray().map(function(h){return QO(h,a)});return{type:"GeometryCollection",geometries:l}}(c,a);break;case"Circle":h={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+l)}return h}const Ra=class yTe extends gW{constructor(a){a=a||{},super(),this.dataProjection=dn(a.dataProjection?a.dataProjection:"EPSG:4326"),a.featureProjection&&(this.defaultFeatureProjection=dn(a.featureProjection)),this.geometryName_=a.geometryName,this.extractGeometryName_=a.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(a,l){let h=null;h="Feature"===a.type?a:{type:"Feature",geometry:a,properties:null};const d=JO(h.geometry,l),f=new Ky;return this.geometryName_?f.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in h!==void 0&&f.setGeometryName(h.geometry_name),f.setGeometry(d),"id"in h&&f.setId(h.id),h.properties&&f.setProperties(h.properties,!0),f}readFeaturesFromObject(a,l){let d=null;if("FeatureCollection"===a.type){d=[];const m=a.features;for(let g=0,y=m.length;g<y;++g)d.push(this.readFeatureFromObject(m[g],l))}else d=[this.readFeatureFromObject(a,l)];return d}readGeometryFromObject(a,l){return JO(a,l)}readProjectionFromObject(a){const l=a.crs;let h;return l?"name"==l.type?h=dn(l.properties.name):"EPSG"===l.type?h=dn("EPSG:"+l.properties.code):En(!1,36):h=this.dataProjection,h}writeFeatureObject(a,l){l=this.adaptOptions(l);const h={type:"Feature",geometry:null,properties:null},d=a.getId();if(void 0!==d&&(h.id=d),!a.hasProperties())return h;const f=a.getProperties(),m=a.getGeometry();return m&&(h.geometry=QO(m,l),delete f[a.getGeometryName()]),Rp(f)||(h.properties=f),h}writeFeaturesObject(a,l){l=this.adaptOptions(l);const h=[];for(let d=0,f=a.length;d<f;++d)h.push(this.writeFeatureObject(a[d],l));return{type:"FeatureCollection",features:h}}writeGeometryObject(a,l){return QO(a,this.adaptOptions(l))}};var LTe=ft(697);function OTe(c,a,l){if(3===c){const h={keys:[],values:[],features:[]},d=l.readVarint()+l.pos;l.readFields(NTe,h,d),h.length=h.features.length,h.length&&(a[h.name]=h)}}function NTe(c,a,l){if(15===c)a.version=l.readVarint();else if(1===c)a.name=l.readString();else if(5===c)a.extent=l.readVarint();else if(2===c)a.features.push(l.pos);else if(3===c)a.keys.push(l.readString());else if(4===c){let h=null;const d=l.readVarint()+l.pos;for(;l.pos<d;)h=1==(c=l.readVarint()>>3)?l.readString():2===c?l.readFloat():3===c?l.readDouble():4===c?l.readVarint64():5===c?l.readVarint():6===c?l.readSVarint():7===c?l.readBoolean():null;a.values.push(h)}}function FTe(c,a,l){if(1==c)a.id=l.readVarint();else if(2==c){const h=l.readVarint()+l.pos;for(;l.pos<h;){const d=a.layer.keys[l.readVarint()],f=a.layer.values[l.readVarint()];a.properties[d]=f}}else 3==c?a.type=l.readVarint():4==c&&(a.geometry=l.pos)}function kTe(c,a,l){c.pos=a.features[l];const h=c.readVarint()+c.pos,d={layer:a,type:0,properties:{}};return c.readFields(FTe,d,h),d}const sE=class PTe extends ZO{constructor(a){super(),a=a||{},this.dataProjection=new Fp({code:"",units:"tile-pixels"}),this.featureClass_=a.featureClass?a.featureClass:$O,this.geometryName_=a.geometryName,this.layerName_=a.layerName?a.layerName:"layer",this.layers_=a.layers?a.layers:null,this.idProperty_=a.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(a,l,h,d){a.pos=l.geometry;const f=a.readVarint()+a.pos;let m=1,g=0,y=0,_=0,v=0,b=0;for(;a.pos<f;){if(!g){const S=a.readVarint();m=7&S,g=S>>3}g--,1===m||2===m?(y+=a.readSVarint(),_+=a.readSVarint(),1===m&&v>b&&(d.push(v),b=v),h.push(y,_),v+=2):7===m?v>b&&(h.push(h[b],h[b+1]),v+=2):En(!1,59)}v>b&&(d.push(v),b=v)}createFeature_(a,l,h){const d=l.type;if(0===d)return null;let f;const m=l.properties;let g;this.idProperty_?(g=m[this.idProperty_],delete m[this.idProperty_]):g=l.id,m[this.layerName_]=l.layer.name;const y=[],_=[];this.readRawGeometry_(a,l,y,_);const v=function VTe(c,a){let l;return 1===c?l=1===a?"Point":"MultiPoint":2===c?l=1===a?"LineString":"MultiLineString":3===c&&(l="Polygon"),l}(d,_.length);if(this.featureClass_===$O)f=new this.featureClass_(v,y,_,m,g),f.transform(h.dataProjection);else{let b;if("Polygon"==v){const x=function Tbe(c,a){const l=[];let h=0,d=0;for(let f=0,m=a.length;f<m;++f){const g=a[f];if(iO(c,h,g,2)){if(0===l.length)continue;l[l.length-1].push(a[d])}else l.push(a.slice(d,f+1));d=f+1,h=g}return l}(y,_);b=x.length>1?new rE(y,"XY",x):new Th(y,"XY",_)}else b="Point"===v?new du(y,"XY"):"LineString"===v?new Eh(y,"XY"):"MultiPoint"===v?new lS(y,"XY"):"MultiLineString"===v?new aS(y,"XY",_):null;f=new(0,this.featureClass_),this.geometryName_&&f.setGeometryName(this.geometryName_);const T=Jy(b,!1,h);f.setGeometry(T),void 0!==g&&f.setId(g),f.setProperties(m,!0)}return f}getType(){return"arraybuffer"}readFeatures(a,l){const h=this.layers_,d=dn((l=this.adaptOptions(l)).dataProjection);d.setWorldExtent(l.extent),l.dataProjection=d;const f=new LTe(a),m=f.readFields(OTe,{}),g=[];for(const y in m){if(h&&!h.includes(y))continue;const _=m[y];d.setExtent(_?[0,0,_.extent,_.extent]:null);for(let b=0,S=_.length;b<S;++b){const T=kTe(f,_,b),x=this.createFeature_(f,T,l);null!==x&&g.push(x)}}return g}readProjection(a){return this.dataProjection}setLayers(a){this.layers_=a}};function UTe(c,a){c.getImage().src=a}const cS=class BTe extends aW{constructor(a){super({attributions:a.attributions,cacheSize:a.cacheSize,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:UTe,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX,transition:a.transition,interpolate:void 0===a.interpolate||a.interpolate,key:a.key,attributionsCollapsible:a.attributionsCollapsible,zDirection:a.zDirection}),this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null,this.tileClass=void 0!==a.tileClass?a.tileClass:Oj,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=a.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const a in this.tileCacheForProjection)if(this.tileCacheForProjection[a].canExpireCache())return!0;return!1}expireCache(a,l){const h=this.getTileCacheForProjection(a);this.tileCache.expireCache(this.tileCache==h?l:{});for(const d in this.tileCacheForProjection){const f=this.tileCacheForProjection[d];f.expireCache(f==h?l:{})}}getGutterForProjection(a){return this.getProjection()&&a&&!Cc(this.getProjection(),a)?0:this.getGutter()}getGutter(){return 0}getKey(){let a=super.getKey();return this.getInterpolate()||(a+=":disable-interpolation"),a}getOpaque(a){return!(this.getProjection()&&a&&!Cc(this.getProjection(),a))&&super.getOpaque(a)}getTileGridForProjection(a){const l=this.getProjection();if(this.tileGrid&&(!l||Cc(l,a)))return this.tileGrid;const h=an(a);return h in this.tileGridForProjection||(this.tileGridForProjection[h]=rW(a)),this.tileGridForProjection[h]}getTileCacheForProjection(a){const l=this.getProjection();if(!l||Cc(l,a))return this.tileCache;const h=an(a);return h in this.tileCacheForProjection||(this.tileCacheForProjection[h]=new zO(this.tileCache.highWaterMark)),this.tileCacheForProjection[h]}createTile_(a,l,h,d,f,m){const g=[a,l,h],y=this.getTileCoordForTileUrlFunction(g,f),_=y?this.tileUrlFunction(y,d,f):void 0,v=new this.tileClass(g,void 0!==_?0:4,void 0!==_?_:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return v.key=m,v.addEventListener("change",this.handleTileChange.bind(this)),v}getTile(a,l,h,d,f){const m=this.getProjection();if(!m||!f||Cc(m,f))return this.getTileInternal(a,l,h,d,m||f);const g=this.getTileCacheForProjection(f),y=[a,l,h];let _;const v=eW(y);g.containsKey(v)&&(_=g.get(v));const b=this.getKey();if(_&&_.key==b)return _;const S=this.getTileGridForProjection(m),T=this.getTileGridForProjection(f),x=this.getTileCoordForTileUrlFunction(y,f),E=new NO(m,S,f,T,y,x,this.getTilePixelRatio(d),this.getGutter(),(I,M,D,L)=>this.getTileInternal(I,M,D,L,m),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return E.key=b,_?(E.interimTile=_,E.refreshInterimChain(),g.replace(v,E)):g.set(v,E),E}getTileInternal(a,l,h,d,f){let m=null;const g=qy(a,l,h),y=this.getKey();if(this.tileCache.containsKey(g)){if(m=this.tileCache.get(g),m.key!=y){const _=m;m=this.createTile_(a,l,h,d,f,y),m.interimTile=0==_.getState()?_.interimTile:_,m.refreshInterimChain(),this.tileCache.replace(g,m)}}else m=this.createTile_(a,l,h,d,f,y),this.tileCache.set(g,m);return m}setRenderReprojectionEdges(a){if(this.renderReprojectionEdges_!=a){this.renderReprojectionEdges_=a;for(const l in this.tileCacheForProjection)this.tileCacheForProjection[l].clear();this.changed()}}setTileGridForProjection(a,l){const h=dn(a);if(h){const d=an(h);d in this.tileGridForProjection||(this.tileGridForProjection[d]=l)}}clear(){super.clear();for(const a in this.tileCacheForProjection)this.tileCacheForProjection[a].clear()}};Error,Error;const WTe=class jTe extends cS{constructor(a){if(super({attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,interpolate:a.interpolate,projection:dn("EPSG:3857"),reprojectionErrorThreshold:a.reprojectionErrorThreshold,state:"loading",tileLoadFunction:a.tileLoadFunction,wrapX:void 0===a.wrapX||a.wrapX,transition:a.transition,zDirection:a.zDirection}),this.tileJSON_=null,this.tileSize_=a.tileSize,a.url)if(a.jsonp)!function zTe(c,a,l,h){const d=document.createElement("script"),f="olc_"+an(a);function m(){delete window[f],d.parentNode.removeChild(d)}d.async=!0,d.src=c+(c.includes("?")?"&":"?")+(h||"callback")+"="+f;const g=setTimeout(function(){m(),l&&l()},1e4);window[f]=function(y){clearTimeout(g),m(),a(y)},document.head.appendChild(d)}(a.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const l=new XMLHttpRequest;l.addEventListener("load",this.onXHRLoad_.bind(this)),l.addEventListener("error",this.onXHRError_.bind(this)),l.open("GET",a.url),l.send()}else a.tileJSON?this.handleTileJSONResponse(a.tileJSON):En(!1,51)}onXHRLoad_(a){const l=a.target;if(!l.status||l.status>=200&&l.status<300){let h;try{h=JSON.parse(l.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(h)}else this.handleTileJSONError()}onXHRError_(a){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(a){const l=dn("EPSG:4326"),h=this.getProjection();let d;if(void 0!==a.bounds){const _=vh(l,h);d=Sx(a.bounds,_)}const f=sS(h),y=rS({extent:f,maxZoom:a.maxzoom||22,minZoom:a.minzoom||0,tileSize:this.tileSize_});if(this.tileGrid=y,this.tileUrlFunction=oW(a.tiles,y),a.attribution&&!this.getAttributions()){const _=void 0!==d?d:f;this.setAttributions(function(v){return Mr(_,v.extent)?[a.attribution]:null})}this.tileJSON_=a,this.setState("ready")}handleTileJSONError(){this.setState("error")}},_W=class XTe{constructor(a){this.rbush_=new bO(a),this.items_={}}insert(a,l){const h={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:l};this.rbush_.insert(h),this.items_[an(l)]=h}load(a,l){const h=new Array(l.length);for(let d=0,f=l.length;d<f;d++){const m=a[d],g=l[d],y={minX:m[0],minY:m[1],maxX:m[2],maxY:m[3],value:g};h[d]=y,this.items_[an(g)]=y}this.rbush_.load(h)}remove(a){const l=an(a),h=this.items_[l];return delete this.items_[l],null!==this.rbush_.remove(h)}update(a,l){const h=this.items_[an(l)];Gl([h.minX,h.minY,h.maxX,h.maxY],a)||(this.remove(l),this.insert(a,l))}getAll(){return this.rbush_.all().map(function(l){return l.value})}getInExtent(a){return this.rbush_.search({minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}).map(function(d){return d.value})}forEach(a){return this.forEach_(this.getAll(),a)}forEachInExtent(a,l){return this.forEach_(this.getInExtent(a),l)}forEach_(a,l){let h;for(let d=0,f=a.length;d<f;d++)if(h=l(a[d]),h)return h;return h}isEmpty(){return Rp(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(a){const l=this.rbush_.toJSON();return cu(l.minX,l.minY,l.maxX,l.maxY,a)}concat(a){this.rbush_.load(a.rbush_.all());for(const l in a.items_)this.items_[l]=a.items_[l]}};function vW(c,a){return[[-1/0,-1/0,1/0,1/0]]}function oE(c,a){return[c]}class Qd extends vc{constructor(a,l,h){super(a),this.feature=l,this.features=h}}const _r=class qTe extends Zy{constructor(a){super({attributions:(a=a||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===a.wrapX||a.wrapX}),this.loader_=Ey,this.format_=a.format,this.overlaps_=void 0===a.overlaps||a.overlaps,this.url_=a.url,void 0!==a.loader?this.loader_=a.loader:void 0!==this.url_&&(En(this.format_,7),this.loader_=hW(this.url_,this.format_)),this.strategy_=void 0!==a.strategy?a.strategy:vW;const l=void 0===a.useSpatialIndex||a.useSpatialIndex;let h,d;this.featuresRtree_=l?new _W:null,this.loadedExtentsRtree_=new _W,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(a.features)?d=a.features:a.features&&(h=a.features,d=h.getArray()),!l&&void 0===h&&(h=new bo(d)),void 0!==d&&this.addFeaturesInternal(d),void 0!==h&&this.bindFeaturesCollection_(h)}addFeature(a){this.addFeatureInternal(a),this.changed()}addFeatureInternal(a){const l=an(a);if(!this.addToIndex_(l,a))return void(this.featuresCollection_&&this.featuresCollection_.remove(a));this.setupChangeEvents_(l,a);const h=a.getGeometry();if(h){const d=h.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(d,a)}else this.nullGeometryFeatures_[l]=a;this.dispatchEvent(new Qd("addfeature",a))}setupChangeEvents_(a,l){this.featureChangeKeys_[a]=[Zn(l,"change",this.handleFeatureChange_,this),Zn(l,"propertychange",this.handleFeatureChange_,this)]}addToIndex_(a,l){let h=!0;const d=l.getId();return void 0!==d&&(d.toString()in this.idIndex_?h=!1:this.idIndex_[d.toString()]=l),h&&(En(!(a in this.uidIndex_),30),this.uidIndex_[a]=l),h}addFeatures(a){this.addFeaturesInternal(a),this.changed()}addFeaturesInternal(a){const l=[],h=[],d=[];for(let f=0,m=a.length;f<m;f++){const g=a[f],y=an(g);this.addToIndex_(y,g)&&h.push(g)}for(let f=0,m=h.length;f<m;f++){const g=h[f],y=an(g);this.setupChangeEvents_(y,g);const _=g.getGeometry();if(_){const v=_.getExtent();l.push(v),d.push(g)}else this.nullGeometryFeatures_[y]=g}if(this.featuresRtree_&&this.featuresRtree_.load(l,d),this.hasListener("addfeature"))for(let f=0,m=h.length;f<m;f++)this.dispatchEvent(new Qd("addfeature",h[f]))}bindFeaturesCollection_(a){let l=!1;this.addEventListener("addfeature",function(h){l||(l=!0,a.push(h.feature),l=!1)}),this.addEventListener("removefeature",function(h){l||(l=!0,a.remove(h.feature),l=!1)}),a.addEventListener("add",h=>{l||(l=!0,this.addFeature(h.element),l=!1)}),a.addEventListener("remove",h=>{l||(l=!0,this.removeFeature(h.element),l=!1)}),this.featuresCollection_=a}clear(a){if(a){for(const h in this.featureChangeKeys_)this.featureChangeKeys_[h].forEach(or);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(d=>{this.removeFeatureInternal(d)});for(const d in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[d])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const l=new Qd("clear");this.dispatchEvent(l),this.changed()}forEachFeature(a){if(this.featuresRtree_)return this.featuresRtree_.forEach(a);this.featuresCollection_&&this.featuresCollection_.forEach(a)}forEachFeatureAtCoordinateDirect(a,l){return this.forEachFeatureInExtent([a[0],a[1],a[0],a[1]],function(d){if(d.getGeometry().intersectsCoordinate(a))return l(d)})}forEachFeatureInExtent(a,l){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(a,l);this.featuresCollection_&&this.featuresCollection_.forEach(l)}forEachFeatureIntersectingExtent(a,l){return this.forEachFeatureInExtent(a,function(h){if(h.getGeometry().intersectsExtent(a)){const f=l(h);if(f)return f}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let a;return this.featuresCollection_?a=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(a=this.featuresRtree_.getAll(),Rp(this.nullGeometryFeatures_)||Pr(a,Object.values(this.nullGeometryFeatures_))),a}getFeaturesAtCoordinate(a){const l=[];return this.forEachFeatureAtCoordinateDirect(a,function(h){l.push(h)}),l}getFeaturesInExtent(a,l){if(this.featuresRtree_){if(!(l&&l.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(a);const d=function C0e(c,a){if(a.canWrapX()){const l=a.getExtent();if(!isFinite(c[0])||!isFinite(c[2]))return[[l[0],c[1],l[2],c[3]]];RP(c,a);const h=Kn(l);if(Kn(c)>h)return[[l[0],c[1],l[2],c[3]]];if(c[0]<l[0])return[[c[0]+h,c[1],l[2],c[3]],[l[0],c[1],c[2],c[3]]];if(c[2]>l[2])return[[c[0],c[1],l[2],c[3]],[l[0],c[1],c[2]-h,c[3]]]}return[c]}(a,l);return[].concat(...d.map(f=>this.featuresRtree_.getInExtent(f)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(a,l){const h=a[0],d=a[1];let f=null;const m=[NaN,NaN];let g=1/0;const y=[-1/0,-1/0,1/0,1/0];return l=l||Cb,this.featuresRtree_.forEachInExtent(y,function(_){if(l(_)){const v=_.getGeometry(),b=g;if(g=v.closestPointXY(h,d,m,g),g<b){f=_;const S=Math.sqrt(g);y[0]=h-S,y[1]=d-S,y[2]=h+S,y[3]=d+S}}}),f}getExtent(a){return this.featuresRtree_.getExtent(a)}getFeatureById(a){const l=this.idIndex_[a.toString()];return void 0!==l?l:null}getFeatureByUid(a){const l=this.uidIndex_[a];return void 0!==l?l:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(a){const l=a.target,h=an(l),d=l.getGeometry();if(d){const m=d.getExtent();h in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[h],this.featuresRtree_&&this.featuresRtree_.insert(m,l)):this.featuresRtree_&&this.featuresRtree_.update(m,l)}else h in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(l),this.nullGeometryFeatures_[h]=l);const f=l.getId();if(void 0!==f){const m=f.toString();this.idIndex_[m]!==l&&(this.removeFromIdIndex_(l),this.idIndex_[m]=l)}else this.removeFromIdIndex_(l),this.uidIndex_[h]=l;this.changed(),this.dispatchEvent(new Qd("changefeature",l))}hasFeature(a){const l=a.getId();return void 0!==l?l in this.idIndex_:an(a)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&Rp(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(a,l,h){const d=this.loadedExtentsRtree_,f=this.strategy_(a,l,h);for(let m=0,g=f.length;m<g;++m){const y=f[m];d.forEachInExtent(y,function(v){return Ia(v.extent,y)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Qd("featuresloadstart")),this.loader_.call(this,y,l,h,v=>{--this.loadingExtentsCount_,this.dispatchEvent(new Qd("featuresloadend",void 0,v))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Qd("featuresloaderror"))}),d.insert(y,{extent:y.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(a){const l=this.loadedExtentsRtree_;let h;l.forEachInExtent(a,function(d){if(Gl(d.extent,a))return h=d,!0}),h&&l.remove(h)}removeFeature(a){if(!a)return;const l=an(a);l in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[l]:this.featuresRtree_&&this.featuresRtree_.remove(a),this.removeFeatureInternal(a)&&this.changed()}removeFeatureInternal(a){const l=an(a),h=this.featureChangeKeys_[l];if(!h)return;h.forEach(or),delete this.featureChangeKeys_[l];const d=a.getId();return void 0!==d&&delete this.idIndex_[d.toString()],delete this.uidIndex_[l],this.dispatchEvent(new Qd("removefeature",a)),a}removeFromIdIndex_(a){let l=!1;for(const h in this.idIndex_)if(this.idIndex_[h]===a){delete this.idIndex_[h],l=!0;break}return l}setLoader(a){this.loader_=a}setUrl(a){En(this.format_,7),this.url_=a,this.setLoader(hW(a,this.format_))}};var bW,SW={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function uS(c){return(c=Math.round(c))<0?0:c>255?255:c}function eN(c){return uS("%"===c[c.length-1]?parseFloat(c)/100*255:parseInt(c))}function aE(c){return function TW(c){return c<0?0:c>1?1:c}("%"===c[c.length-1]?parseFloat(c)/100:parseFloat(c))}function tN(c,a,l){return l<0?l+=1:l>1&&(l-=1),6*l<1?c+(a-c)*l*6:2*l<1?a:3*l<2?c+(a-c)*(2/3-l)*6:c}try{bW={}.parseCSSColor=function YTe(c){var l,a=c.replace(/ /g,"").toLowerCase();if(a in SW)return SW[a].slice();if("#"===a[0])return 4===a.length?(l=parseInt(a.substr(1),16))>=0&&l<=4095?[(3840&l)>>4|(3840&l)>>8,240&l|(240&l)>>4,15&l|(15&l)<<4,1]:null:7===a.length&&(l=parseInt(a.substr(1),16))>=0&&l<=16777215?[(16711680&l)>>16,(65280&l)>>8,255&l,1]:null;var h=a.indexOf("("),d=a.indexOf(")");if(-1!==h&&d+1===a.length){var f=a.substr(0,h),m=a.substr(h+1,d-(h+1)).split(","),g=1;switch(f){case"rgba":if(4!==m.length)return null;g=aE(m.pop());case"rgb":return 3!==m.length?null:[eN(m[0]),eN(m[1]),eN(m[2]),g];case"hsla":if(4!==m.length)return null;g=aE(m.pop());case"hsl":if(3!==m.length)return null;var y=(parseFloat(m[0])%360+360)%360/360,_=aE(m[1]),v=aE(m[2]),b=v<=.5?v*(_+1):v+_-v*_,S=2*v-b;return[uS(255*tN(S,b,y+1/3)),uS(255*tN(S,b,y)),uS(255*tN(S,b,y-1/3)),g];default:return null}}return null}}catch{}var co=function(a,l,h,d){void 0===d&&(d=1),this.r=a,this.g=l,this.b=h,this.a=d};co.parse=function(a){if(a){if(a instanceof co)return a;if("string"==typeof a){var l=bW(a);if(l)return new co(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3])}}},co.prototype.toString=function(){var a=this.toArray(),h=a[1],d=a[2],f=a[3];return"rgba("+Math.round(a[0])+","+Math.round(h)+","+Math.round(d)+","+f+")"},co.prototype.toArray=function(){var a=this,f=a.a;return 0===f?[0,0,0,0]:[255*a.r/f,255*a.g/f,255*a.b/f,f]},co.prototype.toArray01=function(){var a=this,f=a.a;return 0===f?[0,0,0,0]:[a.r/f,a.g/f,a.b/f,f]},co.prototype.toArray01PremultipliedAlpha=function(){var a=this;return[a.r,a.g,a.b,a.a]},co.black=new co(0,0,0,1),co.white=new co(1,1,1,1),co.transparent=new co(0,0,0,0),co.red=new co(1,0,0,1),co.blue=new co(0,0,1,1);var al=co;function hS(c){return"object"==typeof c?["literal",c]:c}function nN(c){switch(c.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function wW(c,a){var l=hS(function QTe(c,a){return void 0!==c?c:void 0!==a?a:void 0}(c.default,a.default));return void 0===l&&"resolvedImage"===a.type?"":l}function iN(c,a,l){var h=sN(c,a),d=["get",c.property];if("categorical"===h&&"boolean"==typeof l[0][0]){for(var f=["case"],m=0,g=l;m<g.length;m+=1){var y=g[m];f.push(["==",d,y[0]],y[1])}return f.push(wW(c,a)),f}if("categorical"===h){for(var _=["match",d],v=0,b=l;v<b.length;v+=1){var S=b[v];Qy(_,S[0],S[1],!1)}return _.push(wW(c,a)),_}if("interval"===h){for(var T=["step",["number",d]],x=0,E=l;x<E.length;x+=1){var I=E[x];Qy(T,I[0],I[1],!0)}return rN(T),void 0===c.default?T:["case",["==",["typeof",d],"number"],T,hS(c.default)]}if("exponential"===h){for(var M=void 0!==c.base?c.base:1,D=[nN(c),1===M?["linear"]:["exponential",M],["number",d]],L=0,P=l;L<P.length;L+=1){var F=P[L];Qy(D,F[0],F[1],!1)}return void 0===c.default?D:["case",["==",["typeof",d],"number"],D,hS(c.default)]}throw new Error("Unknown property function type "+h)}function rN(c){"step"===c[0]&&3===c.length&&(c.push(0),c.push(c[3]))}function Qy(c,a,l,h){c.length>3&&a===c[c.length-2]||(h&&2===c.length||c.push(a),c.push(l))}function sN(c,a){return c.type?c.type:a.expression.interpolated?"exponential":"interval"}function twe(c){for(var a=["concat"],l=/{([^{}]+)}/g,h=0,d=l.exec(c);null!==d;d=l.exec(c)){var f=c.slice(h,l.lastIndex-d[0].length);h=l.lastIndex,f.length>0&&a.push(f),a.push(["get",d[1]])}if(1===a.length)return c;if(h<c.length)a.push(c.slice(h));else if(2===a.length)return["to-string",a[1]];return a}var nwe=function(c){function a(l,h){c.call(this,h),this.message=h,this.key=l}return c&&(a.__proto__=c),(a.prototype=Object.create(c&&c.prototype)).constructor=a,a}(Error),_u=nwe,dS=function(a,l){void 0===l&&(l=[]),this.parent=a,this.bindings={};for(var h=0,d=l;h<d.length;h+=1){var f=d[h];this.bindings[f[0]]=f[1]}};dS.prototype.concat=function(a){return new dS(this,a)},dS.prototype.get=function(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(a+" not found in scope.")},dS.prototype.has=function(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)};var iwe=dS,lE={kind:"null"},It={kind:"number"},pi={kind:"string"},ri={kind:"boolean"},Mh={kind:"color"},e_={kind:"object"},si={kind:"value"},cE={kind:"collator"},uE={kind:"formatted"},fS={kind:"resolvedImage"};function Hl(c,a){return{kind:"array",itemType:c,N:a}}function zr(c){if("array"===c.kind){var a=zr(c.itemType);return"number"==typeof c.N?"array<"+a+", "+c.N+">":"value"===c.itemType.kind?"array":"array<"+a+">"}return c.kind}var swe=[lE,It,pi,ri,Mh,uE,e_,Hl(si),fS];function pS(c,a){if("error"===a.kind)return null;if("array"===c.kind){if("array"===a.kind&&(0===a.N&&"value"===a.itemType.kind||!pS(c.itemType,a.itemType))&&("number"!=typeof c.N||c.N===a.N))return null}else{if(c.kind===a.kind)return null;if("value"===c.kind)for(var l=0,h=swe;l<h.length;l+=1)if(!pS(h[l],a))return null}return"Expected "+zr(c)+" but found "+zr(a)+" instead."}function oN(c,a){return a.some(function(l){return l.kind===c.kind})}function mS(c,a){return a.some(function(l){return"null"===l?null===c:"array"===l?Array.isArray(c):"object"===l?c&&!Array.isArray(c)&&"object"==typeof c:l===typeof c})}var aN=function(a,l,h){this.sensitivity=a?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};aN.prototype.compare=function(a,l){return this.collator.compare(a,l)},aN.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var lN=aN,cN=function(a,l,h,d,f){this.text=a.normalize?a.normalize():a,this.image=l,this.scale=h,this.fontStack=d,this.textColor=f},Dh=function(a){this.sections=a};Dh.fromString=function(a){return new Dh([new cN(a,null,null,null,null)])},Dh.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(a){return 0!==a.text.length||a.image&&0!==a.image.name.length})},Dh.factory=function(a){return a instanceof Dh?a:Dh.fromString(a)},Dh.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(a){return a.text}).join("")},Dh.prototype.serialize=function(){for(var a=["format"],l=0,h=this.sections;l<h.length;l+=1){var d=h[l];if(d.image)a.push(["image",d.image.name]);else{a.push(d.text);var f={};d.fontStack&&(f["text-font"]=["literal",d.fontStack.split(",")]),d.scale&&(f["font-scale"]=d.scale),d.textColor&&(f["text-color"]=["rgba"].concat(d.textColor.toArray())),a.push(f)}}return a};var t_=Dh,gS=function(a){this.name=a.name,this.available=a.available};gS.prototype.toString=function(){return this.name},gS.fromString=function(a){return a?new gS({name:a,available:!1}):null},gS.prototype.serialize=function(){return["image",this.name]};var n_=gS;function CW(c,a,l,h){return"number"==typeof c&&c>=0&&c<=255&&"number"==typeof a&&a>=0&&a<=255&&"number"==typeof l&&l>=0&&l<=255?typeof h>"u"||"number"==typeof h&&h>=0&&h<=1?null:"Invalid rgba value ["+[c,a,l,h].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof h?[c,a,l,h]:[c,a,l]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function hE(c){if(null===c)return!0;if("string"==typeof c)return!0;if("boolean"==typeof c)return!0;if("number"==typeof c)return!0;if(c instanceof al)return!0;if(c instanceof lN)return!0;if(c instanceof t_)return!0;if(c instanceof n_)return!0;if(Array.isArray(c)){for(var a=0,l=c;a<l.length;a+=1)if(!hE(l[a]))return!1;return!0}if("object"==typeof c){for(var d in c)if(!hE(c[d]))return!1;return!0}return!1}function $s(c){if(null===c)return lE;if("string"==typeof c)return pi;if("boolean"==typeof c)return ri;if("number"==typeof c)return It;if(c instanceof al)return Mh;if(c instanceof lN)return cE;if(c instanceof t_)return uE;if(c instanceof n_)return fS;if(Array.isArray(c)){for(var l,a=c.length,h=0,d=c;h<d.length;h+=1){var m=$s(d[h]);if(l){if(l===m)continue;l=si;break}l=m}return Hl(l||si,a)}return e_}function yS(c){var a=typeof c;return null===c?"":"string"===a||"number"===a||"boolean"===a?String(c):c instanceof al||c instanceof t_||c instanceof n_?c.toString():JSON.stringify(c)}var $p=function(a,l){this.type=a,this.value=l};$p.parse=function(a,l){if(2!==a.length)return l.error("'literal' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(!hE(a[1]))return l.error("invalid value");var h=a[1],d=$s(h),f=l.expectedType;return"array"===d.kind&&0===d.N&&f&&"array"===f.kind&&("number"!=typeof f.N||0===f.N)&&(d=f),new $p(d,h)},$p.prototype.evaluate=function(){return this.value},$p.prototype.eachChild=function(){},$p.prototype.outputDefined=function(){return!0},$p.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof al?["rgba"].concat(this.value.toArray()):this.value instanceof t_?this.value.serialize():this.value};var dE=$p,xW=function(a){this.name="ExpressionEvaluationError",this.message=a};xW.prototype.toJSON=function(){return this.message};var To=xW,uN={string:pi,number:It,boolean:ri,object:e_},Yp=function(a,l){this.type=a,this.args=l};Yp.parse=function(a,l){if(a.length<2)return l.error("Expected at least one argument.");var d,h=1,f=a[0];if("array"===f){var m,y;if(a.length>2){var g=a[1];if("string"!=typeof g||!(g in uN)||"object"===g)return l.error('The item type argument of "array" must be one of string, number, boolean',1);m=uN[g],h++}else m=si;if(a.length>3){if(null!==a[2]&&("number"!=typeof a[2]||a[2]<0||a[2]!==Math.floor(a[2])))return l.error('The length argument to "array" must be a positive integer literal',2);y=a[2],h++}d=Hl(m,y)}else d=uN[f];for(var _=[];h<a.length;h++){var v=l.parse(a[h],h,si);if(!v)return null;_.push(v)}return new Yp(d,_)},Yp.prototype.evaluate=function(a){for(var l=0;l<this.args.length;l++){var h=this.args[l].evaluate(a);if(!pS(this.type,$s(h)))return h;if(l===this.args.length-1)throw new To("Expected value to be of type "+zr(this.type)+", but found "+zr($s(h))+" instead.")}return null},Yp.prototype.eachChild=function(a){this.args.forEach(a)},Yp.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},Yp.prototype.serialize=function(){var a=this.type,l=[a.kind];if("array"===a.kind){var h=a.itemType;if("string"===h.kind||"number"===h.kind||"boolean"===h.kind){l.push(h.kind);var d=a.N;("number"==typeof d||this.args.length>1)&&l.push(d)}}return l.concat(this.args.map(function(f){return f.serialize()}))};var Ah=Yp,Zp=function(a){this.type=uE,this.sections=a};Zp.parse=function(a,l){if(a.length<2)return l.error("Expected at least one argument.");var h=a[1];if(!Array.isArray(h)&&"object"==typeof h)return l.error("First argument must be an image or text section.");for(var d=[],f=!1,m=1;m<=a.length-1;++m){var g=a[m];if(f&&"object"==typeof g&&!Array.isArray(g)){f=!1;var y=null;if(g["font-scale"]&&!(y=l.parse(g["font-scale"],1,It)))return null;var _=null;if(g["text-font"]&&!(_=l.parse(g["text-font"],1,Hl(pi))))return null;var v=null;if(g["text-color"]&&!(v=l.parse(g["text-color"],1,Mh)))return null;var b=d[d.length-1];b.scale=y,b.font=_,b.textColor=v}else{var S=l.parse(a[m],1,si);if(!S)return null;var T=S.type.kind;if("string"!==T&&"value"!==T&&"null"!==T&&"resolvedImage"!==T)return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");f=!0,d.push({content:S,scale:null,font:null,textColor:null})}}return new Zp(d)},Zp.prototype.evaluate=function(a){return new t_(this.sections.map(function(h){var d=h.content.evaluate(a);return $s(d)===fS?new cN("",d,null,null,null):new cN(yS(d),null,h.scale?h.scale.evaluate(a):null,h.font?h.font.evaluate(a).join(","):null,h.textColor?h.textColor.evaluate(a):null)}))},Zp.prototype.eachChild=function(a){for(var l=0,h=this.sections;l<h.length;l+=1){var d=h[l];a(d.content),d.scale&&a(d.scale),d.font&&a(d.font),d.textColor&&a(d.textColor)}},Zp.prototype.outputDefined=function(){return!1},Zp.prototype.serialize=function(){for(var a=["format"],l=0,h=this.sections;l<h.length;l+=1){var d=h[l];a.push(d.content.serialize());var f={};d.scale&&(f["font-scale"]=d.scale.serialize()),d.font&&(f["text-font"]=d.font.serialize()),d.textColor&&(f["text-color"]=d.textColor.serialize()),a.push(f)}return a};var EW=Zp,Kp=function(a){this.type=fS,this.input=a};Kp.parse=function(a,l){if(2!==a.length)return l.error("Expected two arguments.");var h=l.parse(a[1],1,pi);return h?new Kp(h):l.error("No image name provided.")},Kp.prototype.evaluate=function(a){var l=this.input.evaluate(a),h=n_.fromString(l);return h&&a.availableImages&&(h.available=a.availableImages.indexOf(l)>-1),h},Kp.prototype.eachChild=function(a){a(this.input)},Kp.prototype.outputDefined=function(){return!1},Kp.prototype.serialize=function(){return["image",this.input.serialize()]};var MW=Kp,owe={"to-boolean":ri,"to-color":Mh,"to-number":It,"to-string":pi},Jp=function(a,l){this.type=a,this.args=l};Jp.parse=function(a,l){if(a.length<2)return l.error("Expected at least one argument.");var h=a[0];if(("to-boolean"===h||"to-string"===h)&&2!==a.length)return l.error("Expected one argument.");for(var d=owe[h],f=[],m=1;m<a.length;m++){var g=l.parse(a[m],m,si);if(!g)return null;f.push(g)}return new Jp(d,f)},Jp.prototype.evaluate=function(a){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(a));if("color"===this.type.kind){for(var l,h,d=0,f=this.args;d<f.length;d+=1){if(h=null,(l=f[d].evaluate(a))instanceof al)return l;if("string"==typeof l){var g=a.parseColor(l);if(g)return g}else if(Array.isArray(l)&&!(h=l.length<3||l.length>4?"Invalid rbga value "+JSON.stringify(l)+": expected an array containing either three or four numeric values.":CW(l[0],l[1],l[2],l[3])))return new al(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new To(h||"Could not parse color from value '"+("string"==typeof l?l:String(JSON.stringify(l)))+"'")}if("number"===this.type.kind){for(var y=null,_=0,v=this.args;_<v.length;_+=1){if(null===(y=v[_].evaluate(a)))return 0;var S=Number(y);if(!isNaN(S))return S}throw new To("Could not convert "+JSON.stringify(y)+" to number.")}return"formatted"===this.type.kind?t_.fromString(yS(this.args[0].evaluate(a))):"resolvedImage"===this.type.kind?n_.fromString(yS(this.args[0].evaluate(a))):yS(this.args[0].evaluate(a))},Jp.prototype.eachChild=function(a){this.args.forEach(a)},Jp.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},Jp.prototype.serialize=function(){if("formatted"===this.type.kind)return new EW([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new MW(this.args[0]).serialize();var a=["to-"+this.type.kind];return this.eachChild(function(l){a.push(l.serialize())}),a};var i_=Jp,awe=["Unknown","Point","LineString","Polygon"],ef=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};ef.prototype.id=function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null},ef.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?awe[this.feature.type]:this.feature.type:null},ef.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ef.prototype.canonicalID=function(){return this.canonical},ef.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ef.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var a=this.featureDistanceData.center,l=this.featureDistanceData.scale,h=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(h.x*l-a[0])+this.featureDistanceData.bearing[1]*(h.y*l-a[1])}return 0},ef.prototype.parseColor=function(a){var l=this._parseColorCache[a];return l||(l=this._parseColorCache[a]=al.parse(a)),l};var DW=ef,xc=function(a,l,h,d){this.name=a,this.type=l,this._evaluate=h,this.args=d};xc.prototype.evaluate=function(a){return this._evaluate(a,this.args)},xc.prototype.eachChild=function(a){this.args.forEach(a)},xc.prototype.outputDefined=function(){return!1},xc.prototype.serialize=function(){return[this.name].concat(this.args.map(function(a){return a.serialize()}))},xc.parse=function(a,l){var h,d=a[0],f=xc.definitions[d];if(!f)return l.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0);for(var m=Array.isArray(f)?f[0]:f.type,g=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,y=g.filter(function(ae){var ue=ae[0];return!Array.isArray(ue)||ue.length===a.length-1}),_=null,v=0,b=y;v<b.length;v+=1){var S=b[v],T=S[0],x=S[1];_=new kW(l.registry,l.path,null,l.scope);for(var E=[],I=!1,M=1;M<a.length;M++){var D=a[M],L=Array.isArray(T)?T[M-1]:T.type,P=_.parse(D,1+E.length,L);if(!P){I=!0;break}E.push(P)}if(!I){if(Array.isArray(T)&&T.length!==E.length){_.error("Expected "+T.length+" arguments, but found "+E.length+" instead.");continue}for(var F=0;F<E.length;F++){var B=Array.isArray(T)?T[F]:T.type,G=E[F];_.concat(F+1).checkSubtype(B,G.type)}if(0===_.errors.length)return new xc(d,m,x,E)}}if(1===y.length)(h=l.errors).push.apply(h,_.errors);else{for(var se=(y.length?y:g).map(function(ae){return function lwe(c){return Array.isArray(c)?"("+c.map(zr).join(", ")+")":"("+zr(c.type)+"...)"}(ae[0])}).join(" | "),ie=[],j=1;j<a.length;j++){var J=l.parse(a[j],1+ie.length);if(!J)return null;ie.push(zr(J.type))}l.error("Expected arguments of type "+se+", but found ("+ie.join(", ")+") instead.")}return null},xc.register=function(a,l){for(var h in xc.definitions=l,l)a[h]=xc};var r_=xc,Qp=function(a,l,h){this.type=cE,this.locale=h,this.caseSensitive=a,this.diacriticSensitive=l};Qp.parse=function(a,l){if(2!==a.length)return l.error("Expected one argument.");var h=a[1];if("object"!=typeof h||Array.isArray(h))return l.error("Collator options argument must be an object.");var d=l.parse(void 0!==h["case-sensitive"]&&h["case-sensitive"],1,ri);if(!d)return null;var f=l.parse(void 0!==h["diacritic-sensitive"]&&h["diacritic-sensitive"],1,ri);if(!f)return null;var m=null;return h.locale&&!(m=l.parse(h.locale,1,pi))?null:new Qp(d,f,m)},Qp.prototype.evaluate=function(a){return new lN(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)},Qp.prototype.eachChild=function(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)},Qp.prototype.outputDefined=function(){return!1},Qp.prototype.serialize=function(){var a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]};var AW=Qp,tf=8192;function hN(c,a){c[0]=Math.min(c[0],a[0]),c[1]=Math.min(c[1],a[1]),c[2]=Math.max(c[2],a[0]),c[3]=Math.max(c[3],a[1])}function fE(c,a){return!(c[0]<=a[0]||c[2]>=a[2]||c[1]<=a[1]||c[3]>=a[3])}function hwe(c,a){var l=function cwe(c){return(180+c)/360}(c[0]),h=function uwe(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}(c[1]),d=Math.pow(2,a.z);return[Math.round(l*d*tf),Math.round(h*d*tf)]}function dwe(c,a,l){var h=c[0]-a[0],d=c[1]-a[1],f=c[0]-l[0],m=c[1]-l[1];return h*m-f*d==0&&h*f<=0&&d*m<=0}function fwe(c,a,l){return a[1]>c[1]!=l[1]>c[1]&&c[0]<(l[0]-a[0])*(c[1]-a[1])/(l[1]-a[1])+a[0]}function dN(c,a){for(var l=!1,h=0,d=a.length;h<d;h++)for(var f=a[h],m=0,g=f.length;m<g-1;m++){if(dwe(c,f[m],f[m+1]))return!1;fwe(c,f[m],f[m+1])&&(l=!l)}return l}function pwe(c,a){for(var l=0;l<a.length;l++)if(dN(c,a[l]))return!0;return!1}function IW(c,a,l,h){var y=h[0]-l[0],_=h[1]-l[1],v=(c[0]-l[0])*_-y*(c[1]-l[1]),b=(a[0]-l[0])*_-y*(a[1]-l[1]);return v>0&&b<0||v<0&&b>0}function gwe(c,a,l,h){return 0!==function mwe(c,a){return c[0]*a[1]-c[1]*a[0]}([h[0]-l[0],h[1]-l[1]],[a[0]-c[0],a[1]-c[1]])&&!(!IW(c,a,l,h)||!IW(l,h,c,a))}function ywe(c,a,l){for(var h=0,d=l;h<d.length;h+=1)for(var f=d[h],m=0;m<f.length-1;++m)if(gwe(c,a,f[m],f[m+1]))return!0;return!1}function RW(c,a){for(var l=0;l<c.length;++l)if(!dN(c[l],a))return!1;for(var h=0;h<c.length-1;++h)if(ywe(c[h],c[h+1],a))return!1;return!0}function _we(c,a){for(var l=0;l<a.length;l++)if(RW(c,a[l]))return!0;return!1}function fN(c,a,l){for(var h=[],d=0;d<c.length;d++){for(var f=[],m=0;m<c[d].length;m++){var g=hwe(c[d][m],l);hN(a,g),f.push(g)}h.push(f)}return h}function LW(c,a,l){for(var h=[],d=0;d<c.length;d++){var f=fN(c[d],a,l);h.push(f)}return h}function PW(c,a,l,h){if(c[0]<l[0]||c[0]>l[2]){var d=.5*h,f=c[0]-l[0]>d?-h:l[0]-c[0]>d?h:0;0===f&&(f=c[0]-l[2]>d?-h:l[2]-c[0]>d?h:0),c[0]+=f}hN(a,c)}function OW(c,a,l,h){var d=Math.pow(2,h.z)*tf,f=[h.x*tf,h.y*tf],m=[];if(!c)return m;for(var g=0,y=c;g<y.length;g+=1)for(var v=0,b=y[g];v<b.length;v+=1){var S=b[v],T=[S.x+f[0],S.y+f[1]];PW(T,a,l,d),m.push(T)}return m}function NW(c,a,l,h){var d=Math.pow(2,h.z)*tf,f=[h.x*tf,h.y*tf],m=[];if(!c)return m;for(var g=0,y=c;g<y.length;g+=1){for(var v=[],b=0,S=y[g];b<S.length;b+=1){var T=S[b],x=[T.x+f[0],T.y+f[1]];hN(a,x),v.push(x)}m.push(v)}if(a[2]-a[0]<=d/2){!function vwe(c){c[0]=c[1]=1/0,c[2]=c[3]=-1/0}(a);for(var E=0,I=m;E<I.length;E+=1)for(var D=0,L=I[E];D<L.length;D+=1)PW(L[D],a,l,d)}return m}var Ih=function(a,l){this.type=ri,this.geojson=a,this.geometries=l};Ih.parse=function(a,l){if(2!==a.length)return l.error("'within' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(hE(a[1])){var h=a[1];if("FeatureCollection"===h.type)for(var d=0;d<h.features.length;++d){var f=h.features[d].geometry.type;if("Polygon"===f||"MultiPolygon"===f)return new Ih(h,h.features[d].geometry)}else if("Feature"===h.type){var m=h.geometry.type;if("Polygon"===m||"MultiPolygon"===m)return new Ih(h,h.geometry)}else if("Polygon"===h.type||"MultiPolygon"===h.type)return new Ih(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ih.prototype.evaluate=function(a){if(null!=a.geometry()&&null!=a.canonicalID()){if("Point"===a.geometryType())return function bwe(c,a){var l=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],d=c.canonicalID();if(!d)return!1;if("Polygon"===a.type){var f=fN(a.coordinates,h,d),m=OW(c.geometry(),l,h,d);if(!fE(l,h))return!1;for(var g=0,y=m;g<y.length;g+=1)if(!dN(y[g],f))return!1}if("MultiPolygon"===a.type){var v=LW(a.coordinates,h,d),b=OW(c.geometry(),l,h,d);if(!fE(l,h))return!1;for(var S=0,T=b;S<T.length;S+=1)if(!pwe(T[S],v))return!1}return!0}(a,this.geometries);if("LineString"===a.geometryType())return function Swe(c,a){var l=[1/0,1/0,-1/0,-1/0],h=[1/0,1/0,-1/0,-1/0],d=c.canonicalID();if(!d)return!1;if("Polygon"===a.type){var f=fN(a.coordinates,h,d),m=NW(c.geometry(),l,h,d);if(!fE(l,h))return!1;for(var g=0,y=m;g<y.length;g+=1)if(!RW(y[g],f))return!1}if("MultiPolygon"===a.type){var v=LW(a.coordinates,h,d),b=NW(c.geometry(),l,h,d);if(!fE(l,h))return!1;for(var S=0,T=b;S<T.length;S+=1)if(!_we(T[S],v))return!1}return!0}(a,this.geometries)}return!1},Ih.prototype.eachChild=function(){},Ih.prototype.outputDefined=function(){return!0},Ih.prototype.serialize=function(){return["within",this.geojson]};var pN=Ih;function pE(c){if(c instanceof r_){if("get"===c.name&&1===c.args.length)return!1;if("feature-state"===c.name)return!1;if("has"===c.name&&1===c.args.length)return!1;if("properties"===c.name||"geometry-type"===c.name||"id"===c.name)return!1;if(/^filter-/.test(c.name))return!1}if(c instanceof pN)return!1;var a=!0;return c.eachChild(function(l){a&&!pE(l)&&(a=!1)}),a}function mN(c){if(c instanceof r_&&"feature-state"===c.name)return!1;var a=!0;return c.eachChild(function(l){a&&!mN(l)&&(a=!1)}),a}function gN(c,a){if(c instanceof r_&&a.indexOf(c.name)>=0)return!1;var l=!0;return c.eachChild(function(h){l&&!gN(h,a)&&(l=!1)}),l}var em=function(a,l){this.type=l.type,this.name=a,this.boundExpression=l};em.parse=function(a,l){if(2!==a.length||"string"!=typeof a[1])return l.error("'var' expression requires exactly one string literal argument.");var h=a[1];return l.scope.has(h)?new em(h,l.scope.get(h)):l.error('Unknown variable "'+h+'". Make sure "'+h+'" has been bound in an enclosing "let" expression before using it.',1)},em.prototype.evaluate=function(a){return this.boundExpression.evaluate(a)},em.prototype.eachChild=function(){},em.prototype.outputDefined=function(){return!1},em.prototype.serialize=function(){return["var",this.name]};var FW=em,tm=function(a,l,h,d,f){void 0===l&&(l=[]),void 0===d&&(d=new iwe),void 0===f&&(f=[]),this.registry=a,this.path=l,this.key=l.map(function(m){return"["+m+"]"}).join(""),this.scope=d,this.errors=f,this.expectedType=h};tm.prototype.parse=function(a,l,h,d,f){return void 0===f&&(f={}),l?this.concat(l,h,d)._parse(a,f):this._parse(a,f)},tm.prototype._parse=function(a,l){function h(v,b,S){return"assert"===S?new Ah(b,[v]):"coerce"===S?new i_(b,[v]):v}if((null===a||"string"==typeof a||"boolean"==typeof a||"number"==typeof a)&&(a=["literal",a]),Array.isArray(a)){if(0===a.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var d=a[0];if("string"!=typeof d)return this.error("Expression name must be a string, but found "+typeof d+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var f=this.registry[d];if(f){var m=f.parse(a,this);if(!m)return null;if(this.expectedType){var g=this.expectedType,y=m.type;if("string"!==g.kind&&"number"!==g.kind&&"boolean"!==g.kind&&"object"!==g.kind&&"array"!==g.kind||"value"!==y.kind)if("color"!==g.kind&&"formatted"!==g.kind&&"resolvedImage"!==g.kind||"value"!==y.kind&&"string"!==y.kind){if(this.checkSubtype(g,y))return null}else m=h(m,g,l.typeAnnotation||"coerce");else m=h(m,g,l.typeAnnotation||"assert")}if(!(m instanceof dE)&&"resolvedImage"!==m.type.kind&&yN(m)){var _=new DW;try{m=new dE(m.type,m.evaluate(_))}catch(v){return this.error(v.message),null}}return m}return this.error('Unknown expression "'+d+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(typeof a>"u"?"'undefined' value invalid. Use null instead.":"object"==typeof a?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof a+" instead.")},tm.prototype.concat=function(a,l,h){var d="number"==typeof a?this.path.concat(a):this.path,f=h?this.scope.concat(h):this.scope;return new tm(this.registry,d,l||null,f,this.errors)},tm.prototype.error=function(a){for(var l=[],h=arguments.length-1;h-- >0;)l[h]=arguments[h+1];var d=""+this.key+l.map(function(f){return"["+f+"]"}).join("");this.errors.push(new _u(d,a))},tm.prototype.checkSubtype=function(a,l){var h=pS(a,l);return h&&this.error(h),h};var kW=tm;function yN(c){if(c instanceof FW)return yN(c.boundExpression);if(c instanceof r_&&"error"===c.name)return!1;if(c instanceof AW)return!1;if(c instanceof pN)return!1;var a=c instanceof i_||c instanceof Ah,l=!0;return c.eachChild(function(h){l=a?l&&yN(h):l&&h instanceof dE}),!!l&&pE(c)&&gN(c,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function VW(c,a){for(var m,l=c.length-1,h=0,d=l,f=0;h<=d;)if((m=c[f=Math.floor((h+d)/2)])<=a){if(f===l||a<c[f+1])return f;h=f+1}else{if(!(m>a))throw new To("Input is not a number.");d=f-1}return 0}var nm=function(a,l,h){this.type=a,this.input=l,this.labels=[],this.outputs=[];for(var d=0,f=h;d<f.length;d+=1){var m=f[d],y=m[1];this.labels.push(m[0]),this.outputs.push(y)}};nm.parse=function(a,l){if(a.length-1<4)return l.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if((a.length-1)%2!=0)return l.error("Expected an even number of arguments.");var h=l.parse(a[1],1,It);if(!h)return null;var d=[],f=null;l.expectedType&&"value"!==l.expectedType.kind&&(f=l.expectedType);for(var m=1;m<a.length;m+=2){var g=1===m?-1/0:a[m],y=a[m+1],_=m,v=m+1;if("number"!=typeof g)return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',_);if(d.length&&d[d.length-1][0]>=g)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',_);var b=l.parse(y,v,f);if(!b)return null;f=f||b.type,d.push([g,b])}return new nm(f,h,d)},nm.prototype.evaluate=function(a){var l=this.labels,h=this.outputs;if(1===l.length)return h[0].evaluate(a);var d=this.input.evaluate(a);if(d<=l[0])return h[0].evaluate(a);var f=l.length;return d>=l[f-1]?h[f-1].evaluate(a):h[VW(l,d)].evaluate(a)},nm.prototype.eachChild=function(a){a(this.input);for(var l=0,h=this.outputs;l<h.length;l+=1)a(h[l])},nm.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})},nm.prototype.serialize=function(){for(var a=["step",this.input.serialize()],l=0;l<this.labels.length;l++)l>0&&a.push(this.labels[l]),a.push(this.outputs[l].serialize());return a};var BW=nm,Twe=s_;function s_(c,a,l,h){this.cx=3*c,this.bx=3*(l-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(h-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=h,this.p2x=l,this.p2y=h}function ll(c,a,l){return c*(1-l)+a*l}s_.prototype.sampleCurveX=function(c){return((this.ax*c+this.bx)*c+this.cx)*c},s_.prototype.sampleCurveY=function(c){return((this.ay*c+this.by)*c+this.cy)*c},s_.prototype.sampleCurveDerivativeX=function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},s_.prototype.solveCurveX=function(c,a){var l,h,d,f,m;for(typeof a>"u"&&(a=1e-6),d=c,m=0;m<8;m++){if(f=this.sampleCurveX(d)-c,Math.abs(f)<a)return d;var g=this.sampleCurveDerivativeX(d);if(Math.abs(g)<1e-6)break;d-=f/g}if((d=c)<(l=0))return l;if(d>(h=1))return h;for(;l<h;){if(f=this.sampleCurveX(d),Math.abs(f-c)<a)return d;c>f?l=d:h=d,d=.5*(h-l)+l}return d},s_.prototype.solve=function(c,a){return this.sampleCurveY(this.solveCurveX(c,a))};var xwe=Object.freeze({__proto__:null,number:ll,color:function wwe(c,a,l){return new al(ll(c.r,a.r,l),ll(c.g,a.g,l),ll(c.b,a.b,l),ll(c.a,a.a,l))},array:function Cwe(c,a,l){return c.map(function(h,d){return ll(h,a[d],l)})}}),HW=4/29,o_=6/29,jW=3*o_*o_,Mwe=Math.PI/180,Dwe=180/Math.PI;function _N(c){return c>.008856451679035631?Math.pow(c,1/3):c/jW+HW}function vN(c){return c>o_?c*c*c:jW*(c-HW)}function bN(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function SN(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function WW(c){var a=SN(c.r),l=SN(c.g),h=SN(c.b),d=_N((.4124564*a+.3575761*l+.1804375*h)/.95047),f=_N((.2126729*a+.7151522*l+.072175*h)/1);return{l:116*f-16,a:500*(d-f),b:200*(f-_N((.0193339*a+.119192*l+.9503041*h)/1.08883)),alpha:c.a}}function XW(c){var a=(c.l+16)/116,l=isNaN(c.a)?a:a+c.a/500,h=isNaN(c.b)?a:a-c.b/200;return a=1*vN(a),l=.95047*vN(l),h=1.08883*vN(h),new al(bN(3.2404542*l-1.5371385*a-.4985314*h),bN(-.969266*l+1.8760108*a+.041556*h),bN(.0556434*l-.2040259*a+1.0572252*h),c.alpha)}function Lwe(c,a,l){var h=a-c;return c+l*(h>180||h<-180?h-360*Math.round(h/360):h)}var mE={forward:WW,reverse:XW,interpolate:function Awe(c,a,l){return{l:ll(c.l,a.l,l),a:ll(c.a,a.a,l),b:ll(c.b,a.b,l),alpha:ll(c.alpha,a.alpha,l)}}},gE_forward=function Iwe(c){var a=WW(c),l=a.l,h=a.a,d=a.b,f=Math.atan2(d,h)*Dwe;return{h:f<0?f+360:f,c:Math.sqrt(h*h+d*d),l,alpha:c.a}},gE_reverse=function Rwe(c){var a=c.h*Mwe,l=c.c;return XW({l:c.l,a:Math.cos(a)*l,b:Math.sin(a)*l,alpha:c.alpha})},gE_interpolate=function Pwe(c,a,l){return{h:Lwe(c.h,a.h,l),c:ll(c.c,a.c,l),l:ll(c.l,a.l,l),alpha:ll(c.alpha,a.alpha,l)}},Rh=function(a,l,h,d,f){this.type=a,this.operator=l,this.interpolation=h,this.input=d,this.labels=[],this.outputs=[];for(var m=0,g=f;m<g.length;m+=1){var y=g[m],v=y[1];this.labels.push(y[0]),this.outputs.push(v)}};function TN(c,a,l,h){var d=h-l,f=c-l;return 0===d?0:1===a?f/d:(Math.pow(a,f)-1)/(Math.pow(a,d)-1)}Rh.interpolationFactor=function(a,l,h,d){var f=0;if("exponential"===a.name)f=TN(l,a.base,h,d);else if("linear"===a.name)f=TN(l,1,h,d);else if("cubic-bezier"===a.name){var m=a.controlPoints;f=new Twe(m[0],m[1],m[2],m[3]).solve(TN(l,1,h,d))}return f},Rh.parse=function(a,l){var h=a[0],d=a[1],f=a[2],m=a.slice(3);if(!Array.isArray(d)||0===d.length)return l.error("Expected an interpolation type expression.",1);if("linear"===d[0])d={name:"linear"};else if("exponential"===d[0]){var g=d[1];if("number"!=typeof g)return l.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:g}}else{if("cubic-bezier"!==d[0])return l.error("Unknown interpolation type "+String(d[0]),1,0);var y=d.slice(1);if(4!==y.length||y.some(function(M){return"number"!=typeof M||M<0||M>1}))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:y}}if(a.length-1<4)return l.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if((a.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(!(f=l.parse(f,2,It)))return null;var _=[],v=null;"interpolate-hcl"===h||"interpolate-lab"===h?v=Mh:l.expectedType&&"value"!==l.expectedType.kind&&(v=l.expectedType);for(var b=0;b<m.length;b+=2){var S=m[b],T=m[b+1],x=b+3,E=b+4;if("number"!=typeof S)return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',x);if(_.length&&_[_.length-1][0]>=S)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',x);var I=l.parse(T,E,v);if(!I)return null;v=v||I.type,_.push([S,I])}return"number"===v.kind||"color"===v.kind||"array"===v.kind&&"number"===v.itemType.kind&&"number"==typeof v.N?new Rh(v,h,d,f,_):l.error("Type "+zr(v)+" is not interpolatable.")},Rh.prototype.evaluate=function(a){var l=this.labels,h=this.outputs;if(1===l.length)return h[0].evaluate(a);var d=this.input.evaluate(a);if(d<=l[0])return h[0].evaluate(a);var f=l.length;if(d>=l[f-1])return h[f-1].evaluate(a);var m=VW(l,d),_=Rh.interpolationFactor(this.interpolation,d,l[m],l[m+1]),v=h[m].evaluate(a),b=h[m+1].evaluate(a);return"interpolate"===this.operator?xwe[this.type.kind.toLowerCase()](v,b,_):"interpolate-hcl"===this.operator?gE_reverse(gE_interpolate(gE_forward(v),gE_forward(b),_)):mE.reverse(mE.interpolate(mE.forward(v),mE.forward(b),_))},Rh.prototype.eachChild=function(a){a(this.input);for(var l=0,h=this.outputs;l<h.length;l+=1)a(h[l])},Rh.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})},Rh.prototype.serialize=function(){var a;a="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var l=[this.operator,a,this.input.serialize()],h=0;h<this.labels.length;h++)l.push(this.labels[h],this.outputs[h].serialize());return l};var im=Rh,nf=function(a,l){this.type=a,this.args=l};nf.parse=function(a,l){if(a.length<2)return l.error("Expectected at least one argument.");var h=null,d=l.expectedType;d&&"value"!==d.kind&&(h=d);for(var f=[],m=0,g=a.slice(1);m<g.length;m+=1){var _=l.parse(g[m],1+f.length,h,void 0,{typeAnnotation:"omit"});if(!_)return null;h=h||_.type,f.push(_)}var v=d&&f.some(function(b){return pS(d,b.type)});return new nf(v?si:h,f)},nf.prototype.evaluate=function(a){for(var d,l=null,h=0,f=0,m=this.args;f<m.length;f+=1){if(h++,(l=m[f].evaluate(a))&&l instanceof n_&&!l.available&&(d||(d=l),l=null,h===this.args.length))return d;if(null!==l)break}return l},nf.prototype.eachChild=function(a){this.args.forEach(a)},nf.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},nf.prototype.serialize=function(){var a=["coalesce"];return this.eachChild(function(l){a.push(l.serialize())}),a};var qW=nf,rm=function(a,l){this.type=l.type,this.bindings=[].concat(a),this.result=l};rm.prototype.evaluate=function(a){return this.result.evaluate(a)},rm.prototype.eachChild=function(a){for(var l=0,h=this.bindings;l<h.length;l+=1)a(h[l][1]);a(this.result)},rm.parse=function(a,l){if(a.length<4)return l.error("Expected at least 3 arguments, but found "+(a.length-1)+" instead.");for(var h=[],d=1;d<a.length-1;d+=2){var f=a[d];if("string"!=typeof f)return l.error("Expected string, but found "+typeof f+" instead.",d);if(/[^a-zA-Z0-9_]/.test(f))return l.error("Variable names must contain only alphanumeric characters or '_'.",d);var m=l.parse(a[d+1],d+1);if(!m)return null;h.push([f,m])}var g=l.parse(a[a.length-1],a.length-1,l.expectedType,h);return g?new rm(h,g):null},rm.prototype.outputDefined=function(){return this.result.outputDefined()},rm.prototype.serialize=function(){for(var a=["let"],l=0,h=this.bindings;l<h.length;l+=1){var d=h[l];a.push(d[0],d[1].serialize())}return a.push(this.result.serialize()),a};var $W=rm,sm=function(a,l,h){this.type=a,this.index=l,this.input=h};sm.parse=function(a,l){if(3!==a.length)return l.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var h=l.parse(a[1],1,It),d=l.parse(a[2],2,Hl(l.expectedType||si));return h&&d?new sm(d.type.itemType,h,d):null},sm.prototype.evaluate=function(a){var l=this.index.evaluate(a),h=this.input.evaluate(a);if(l<0)throw new To("Array index out of bounds: "+l+" < 0.");if(l>=h.length)throw new To("Array index out of bounds: "+l+" > "+(h.length-1)+".");if(l!==Math.floor(l))throw new To("Array index must be an integer, but found "+l+" instead.");return h[l]},sm.prototype.eachChild=function(a){a(this.index),a(this.input)},sm.prototype.outputDefined=function(){return!1},sm.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Owe=sm,om=function(a,l){this.type=ri,this.needle=a,this.haystack=l};om.parse=function(a,l){if(3!==a.length)return l.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var h=l.parse(a[1],1,si),d=l.parse(a[2],2,si);return h&&d?oN(h.type,[ri,pi,It,lE,si])?new om(h,d):l.error("Expected first argument to be of type boolean, string, number or null, but found "+zr(h.type)+" instead"):null},om.prototype.evaluate=function(a){var l=this.needle.evaluate(a),h=this.haystack.evaluate(a);if(null==h)return!1;if(!mS(l,["boolean","string","number","null"]))throw new To("Expected first argument to be of type boolean, string, number or null, but found "+zr($s(l))+" instead.");if(!mS(h,["string","array"]))throw new To("Expected second argument to be of type array or string, but found "+zr($s(h))+" instead.");return h.indexOf(l)>=0},om.prototype.eachChild=function(a){a(this.needle),a(this.haystack)},om.prototype.outputDefined=function(){return!0},om.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Nwe=om,rf=function(a,l,h){this.type=It,this.needle=a,this.haystack=l,this.fromIndex=h};rf.parse=function(a,l){if(a.length<=2||a.length>=5)return l.error("Expected 3 or 4 arguments, but found "+(a.length-1)+" instead.");var h=l.parse(a[1],1,si),d=l.parse(a[2],2,si);if(!h||!d)return null;if(!oN(h.type,[ri,pi,It,lE,si]))return l.error("Expected first argument to be of type boolean, string, number or null, but found "+zr(h.type)+" instead");if(4===a.length){var f=l.parse(a[3],3,It);return f?new rf(h,d,f):null}return new rf(h,d)},rf.prototype.evaluate=function(a){var l=this.needle.evaluate(a),h=this.haystack.evaluate(a);if(!mS(l,["boolean","string","number","null"]))throw new To("Expected first argument to be of type boolean, string, number or null, but found "+zr($s(l))+" instead.");if(!mS(h,["string","array"]))throw new To("Expected second argument to be of type array or string, but found "+zr($s(h))+" instead.");if(this.fromIndex){var d=this.fromIndex.evaluate(a);return h.indexOf(l,d)}return h.indexOf(l)},rf.prototype.eachChild=function(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)},rf.prototype.outputDefined=function(){return!1},rf.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Fwe=rf,am=function(a,l,h,d,f,m){this.inputType=a,this.type=l,this.input=h,this.cases=d,this.outputs=f,this.otherwise=m};am.parse=function(a,l){if(a.length<5)return l.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if(a.length%2!=1)return l.error("Expected an even number of arguments.");var h,d;l.expectedType&&"value"!==l.expectedType.kind&&(d=l.expectedType);for(var f={},m=[],g=2;g<a.length-1;g+=2){var y=a[g],_=a[g+1];Array.isArray(y)||(y=[y]);var v=l.concat(g);if(0===y.length)return v.error("Expected at least one branch label.");for(var b=0,S=y;b<S.length;b+=1){var T=S[b];if("number"!=typeof T&&"string"!=typeof T)return v.error("Branch labels must be numbers or strings.");if("number"==typeof T&&Math.abs(T)>Number.MAX_SAFE_INTEGER)return v.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof T&&Math.floor(T)!==T)return v.error("Numeric branch labels must be integer values.");if(h){if(v.checkSubtype(h,$s(T)))return null}else h=$s(T);if(typeof f[String(T)]<"u")return v.error("Branch labels must be unique.");f[String(T)]=m.length}var x=l.parse(_,g,d);if(!x)return null;d=d||x.type,m.push(x)}var E=l.parse(a[1],1,si);if(!E)return null;var I=l.parse(a[a.length-1],a.length-1,d);return!I||"value"!==E.type.kind&&l.concat(1).checkSubtype(h,E.type)?null:new am(h,d,E,f,m,I)},am.prototype.evaluate=function(a){var l=this.input.evaluate(a);return($s(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(a)},am.prototype.eachChild=function(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)},am.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})&&this.otherwise.outputDefined()},am.prototype.serialize=function(){for(var a=this,l=["match",this.input.serialize()],d=[],f={},m=0,g=Object.keys(this.cases).sort();m<g.length;m+=1){var y=g[m];void 0===(_=f[this.cases[y]])?(f[this.cases[y]]=d.length,d.push([this.cases[y],[y]])):d[_][1].push(y)}for(var v=function(E){return"number"===a.inputType.kind?Number(E):E},b=0,S=d;b<S.length;b+=1){var T=S[b],_=T[0],x=T[1];l.push(1===x.length?v(x[0]):x.map(v)),l.push(this.outputs[outputIndex$1].serialize())}return l.push(this.otherwise.serialize()),l};var kwe=am,lm=function(a,l,h){this.type=a,this.branches=l,this.otherwise=h};lm.parse=function(a,l){if(a.length<4)return l.error("Expected at least 3 arguments, but found only "+(a.length-1)+".");if(a.length%2!=0)return l.error("Expected an odd number of arguments.");var h;l.expectedType&&"value"!==l.expectedType.kind&&(h=l.expectedType);for(var d=[],f=1;f<a.length-1;f+=2){var m=l.parse(a[f],f,ri);if(!m)return null;var g=l.parse(a[f+1],f+1,h);if(!g)return null;d.push([m,g]),h=h||g.type}var y=l.parse(a[a.length-1],a.length-1,h);return y?new lm(h,d,y):null},lm.prototype.evaluate=function(a){for(var l=0,h=this.branches;l<h.length;l+=1){var d=h[l],m=d[1];if(d[0].evaluate(a))return m.evaluate(a)}return this.otherwise.evaluate(a)},lm.prototype.eachChild=function(a){for(var l=0,h=this.branches;l<h.length;l+=1){var d=h[l],m=d[1];a(d[0]),a(m)}a(this.otherwise)},lm.prototype.outputDefined=function(){return this.branches.every(function(a){return a[1].outputDefined()})&&this.otherwise.outputDefined()},lm.prototype.serialize=function(){var a=["case"];return this.eachChild(function(l){a.push(l.serialize())}),a};var Vwe=lm,sf=function(a,l,h,d){this.type=a,this.input=l,this.beginIndex=h,this.endIndex=d};sf.parse=function(a,l){if(a.length<=2||a.length>=5)return l.error("Expected 3 or 4 arguments, but found "+(a.length-1)+" instead.");var h=l.parse(a[1],1,si),d=l.parse(a[2],2,It);if(!h||!d)return null;if(!oN(h.type,[Hl(si),pi,si]))return l.error("Expected first argument to be of type array or string, but found "+zr(h.type)+" instead");if(4===a.length){var f=l.parse(a[3],3,It);return f?new sf(h.type,h,d,f):null}return new sf(h.type,h,d)},sf.prototype.evaluate=function(a){var l=this.input.evaluate(a),h=this.beginIndex.evaluate(a);if(!mS(l,["string","array"]))throw new To("Expected first argument to be of type array or string, but found "+zr($s(l))+" instead.");if(this.endIndex){var d=this.endIndex.evaluate(a);return l.slice(h,d)}return l.slice(h)},sf.prototype.eachChild=function(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)},sf.prototype.outputDefined=function(){return!1},sf.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Bwe=sf;function YW(c,a){return"=="===c||"!="===c?"boolean"===a.kind||"string"===a.kind||"number"===a.kind||"null"===a.kind||"value"===a.kind:"string"===a.kind||"number"===a.kind||"value"===a.kind}function ZW(c,a,l,h){return 0===h.compare(a,l)}function a_(c,a,l){var h="=="!==c&&"!="!==c;return function(){function d(f,m,g){this.type=ri,this.lhs=f,this.rhs=m,this.collator=g,this.hasUntypedArgument="value"===f.type.kind||"value"===m.type.kind}return d.parse=function(m,g){if(3!==m.length&&4!==m.length)return g.error("Expected two or three arguments.");var y=m[0],_=g.parse(m[1],1,si);if(!_)return null;if(!YW(y,_.type))return g.concat(1).error('"'+y+"\" comparisons are not supported for type '"+zr(_.type)+"'.");var v=g.parse(m[2],2,si);if(!v)return null;if(!YW(y,v.type))return g.concat(2).error('"'+y+"\" comparisons are not supported for type '"+zr(v.type)+"'.");if(_.type.kind!==v.type.kind&&"value"!==_.type.kind&&"value"!==v.type.kind)return g.error("Cannot compare types '"+zr(_.type)+"' and '"+zr(v.type)+"'.");h&&("value"===_.type.kind&&"value"!==v.type.kind?_=new Ah(v.type,[_]):"value"!==_.type.kind&&"value"===v.type.kind&&(v=new Ah(_.type,[v])));var b=null;if(4===m.length){if("string"!==_.type.kind&&"string"!==v.type.kind&&"value"!==_.type.kind&&"value"!==v.type.kind)return g.error("Cannot use collator to compare non-string types.");if(!(b=g.parse(m[3],3,cE)))return null}return new d(_,v,b)},d.prototype.evaluate=function(m){var g=this.lhs.evaluate(m),y=this.rhs.evaluate(m);if(h&&this.hasUntypedArgument){var _=$s(g),v=$s(y);if(_.kind!==v.kind||"string"!==_.kind&&"number"!==_.kind)throw new To('Expected arguments for "'+c+'" to be (string, string) or (number, number), but found ('+_.kind+", "+v.kind+") instead.")}if(this.collator&&!h&&this.hasUntypedArgument){var b=$s(g),S=$s(y);if("string"!==b.kind||"string"!==S.kind)return a(m,g,y)}return this.collator?l(m,g,y,this.collator.evaluate(m)):a(m,g,y)},d.prototype.eachChild=function(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)},d.prototype.outputDefined=function(){return!0},d.prototype.serialize=function(){var m=[c];return this.eachChild(function(g){m.push(g.serialize())}),m},d}()}var Kwe=a_("==",function Uwe(c,a,l){return a===l},ZW),Jwe=a_("!=",function zwe(c,a,l){return a!==l},function Xwe(c,a,l,h){return!ZW(0,a,l,h)}),Qwe=a_("<",function Gwe(c,a,l){return a<l},function qwe(c,a,l,h){return h.compare(a,l)<0}),eCe=a_(">",function Hwe(c,a,l){return a>l},function $we(c,a,l,h){return h.compare(a,l)>0}),tCe=a_("<=",function jwe(c,a,l){return a<=l},function Ywe(c,a,l,h){return h.compare(a,l)<=0}),nCe=a_(">=",function Wwe(c,a,l){return a>=l},function Zwe(c,a,l,h){return h.compare(a,l)>=0}),cm=function(a,l,h,d,f,m){this.type=pi,this.number=a,this.locale=l,this.currency=h,this.unit=d,this.minFractionDigits=f,this.maxFractionDigits=m};cm.parse=function(a,l){if(3!==a.length)return l.error("Expected two arguments.");var h=l.parse(a[1],1,It);if(!h)return null;var d=a[2];if("object"!=typeof d||Array.isArray(d))return l.error("NumberFormat options argument must be an object.");var f=null;if(d.locale&&!(f=l.parse(d.locale,1,pi)))return null;var m=null;if(d.currency&&!(m=l.parse(d.currency,1,pi)))return null;var g=null;if(d.unit&&!(g=l.parse(d.unit,1,pi)))return null;var y=null;if(d["min-fraction-digits"]&&!(y=l.parse(d["min-fraction-digits"],1,It)))return null;var _=null;return d["max-fraction-digits"]&&!(_=l.parse(d["max-fraction-digits"],1,It))?null:new cm(h,f,m,g,y,_)},cm.prototype.evaluate=function(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(a):void 0,unit:this.unit?this.unit.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))},cm.prototype.eachChild=function(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.unit&&a(this.unit),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)},cm.prototype.outputDefined=function(){return!1},cm.prototype.serialize=function(){var a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.unit&&(a.unit=this.unit.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]};var iCe=cm,um=function(a){this.type=It,this.input=a};um.parse=function(a,l){if(2!==a.length)return l.error("Expected 1 argument, but found "+(a.length-1)+" instead.");var h=l.parse(a[1],1);return h?"array"!==h.type.kind&&"string"!==h.type.kind&&"value"!==h.type.kind?l.error("Expected argument of type string or array, but found "+zr(h.type)+" instead."):new um(h):null},um.prototype.evaluate=function(a){var l=this.input.evaluate(a);if("string"==typeof l)return l.length;if(Array.isArray(l))return l.length;throw new To("Expected value to be of type string or array, but found "+zr($s(l))+" instead.")},um.prototype.eachChild=function(a){a(this.input)},um.prototype.outputDefined=function(){return!1},um.prototype.serialize=function(){var a=["length"];return this.eachChild(function(l){a.push(l.serialize())}),a};var KW={"==":Kwe,"!=":Jwe,">":eCe,"<":Qwe,">=":nCe,"<=":tCe,array:Ah,at:Owe,boolean:Ah,case:Vwe,coalesce:qW,collator:AW,format:EW,image:MW,in:Nwe,"index-of":Fwe,interpolate:im,"interpolate-hcl":im,"interpolate-lab":im,length:um,let:$W,literal:dE,match:kwe,number:Ah,"number-format":iCe,object:Ah,slice:Bwe,step:BW,string:Ah,"to-boolean":i_,"to-color":i_,"to-number":i_,"to-string":i_,var:FW,within:pN};function JW(c,a){var l=a[0],h=a[1],d=a[2],f=a[3];l=l.evaluate(c),h=h.evaluate(c),d=d.evaluate(c);var m=f?f.evaluate(c):1,g=CW(l,h,d,m);if(g)throw new To(g);return new al(l/255*m,h/255*m,d/255*m,m)}function QW(c,a){return c in a}function wN(c,a){var l=a[c];return typeof l>"u"?null:l}function hm(c){return{type:c}}r_.register(KW,{error:[{kind:"error"},[pi],function(c,a){throw new To(a[0].evaluate(c))}],typeof:[pi,[si],function(c,a){return zr($s(a[0].evaluate(c)))}],"to-rgba":[Hl(It,4),[Mh],function(c,a){return a[0].evaluate(c).toArray()}],rgb:[Mh,[It,It,It],JW],rgba:[Mh,[It,It,It,It],JW],has:{type:ri,overloads:[[[pi],function(c,a){return QW(a[0].evaluate(c),c.properties())}],[[pi,e_],function(c,a){var h=a[1];return QW(a[0].evaluate(c),h.evaluate(c))}]]},get:{type:si,overloads:[[[pi],function(c,a){return wN(a[0].evaluate(c),c.properties())}],[[pi,e_],function(c,a){var h=a[1];return wN(a[0].evaluate(c),h.evaluate(c))}]]},"feature-state":[si,[pi],function(c,a){return wN(a[0].evaluate(c),c.featureState||{})}],properties:[e_,[],function(c){return c.properties()}],"geometry-type":[pi,[],function(c){return c.geometryType()}],id:[si,[],function(c){return c.id()}],zoom:[It,[],function(c){return c.globals.zoom}],pitch:[It,[],function(c){return c.globals.pitch||0}],"distance-from-center":[It,[],function(c){return c.distanceFromCenter()}],"heatmap-density":[It,[],function(c){return c.globals.heatmapDensity||0}],"line-progress":[It,[],function(c){return c.globals.lineProgress||0}],"sky-radial-progress":[It,[],function(c){return c.globals.skyRadialProgress||0}],accumulated:[si,[],function(c){return void 0===c.globals.accumulated?null:c.globals.accumulated}],"+":[It,hm(It),function(c,a){for(var l=0,h=0,d=a;h<d.length;h+=1)l+=d[h].evaluate(c);return l}],"*":[It,hm(It),function(c,a){for(var l=1,h=0,d=a;h<d.length;h+=1)l*=d[h].evaluate(c);return l}],"-":{type:It,overloads:[[[It,It],function(c,a){var h=a[1];return a[0].evaluate(c)-h.evaluate(c)}],[[It],function(c,a){return-a[0].evaluate(c)}]]},"/":[It,[It,It],function(c,a){var h=a[1];return a[0].evaluate(c)/h.evaluate(c)}],"%":[It,[It,It],function(c,a){var h=a[1];return a[0].evaluate(c)%h.evaluate(c)}],ln2:[It,[],function(){return Math.LN2}],pi:[It,[],function(){return Math.PI}],e:[It,[],function(){return Math.E}],"^":[It,[It,It],function(c,a){var h=a[1];return Math.pow(a[0].evaluate(c),h.evaluate(c))}],sqrt:[It,[It],function(c,a){return Math.sqrt(a[0].evaluate(c))}],log10:[It,[It],function(c,a){return Math.log(a[0].evaluate(c))/Math.LN10}],ln:[It,[It],function(c,a){return Math.log(a[0].evaluate(c))}],log2:[It,[It],function(c,a){return Math.log(a[0].evaluate(c))/Math.LN2}],sin:[It,[It],function(c,a){return Math.sin(a[0].evaluate(c))}],cos:[It,[It],function(c,a){return Math.cos(a[0].evaluate(c))}],tan:[It,[It],function(c,a){return Math.tan(a[0].evaluate(c))}],asin:[It,[It],function(c,a){return Math.asin(a[0].evaluate(c))}],acos:[It,[It],function(c,a){return Math.acos(a[0].evaluate(c))}],atan:[It,[It],function(c,a){return Math.atan(a[0].evaluate(c))}],min:[It,hm(It),function(c,a){return Math.min.apply(Math,a.map(function(l){return l.evaluate(c)}))}],max:[It,hm(It),function(c,a){return Math.max.apply(Math,a.map(function(l){return l.evaluate(c)}))}],abs:[It,[It],function(c,a){return Math.abs(a[0].evaluate(c))}],round:[It,[It],function(c,a){var h=a[0].evaluate(c);return h<0?-Math.round(-h):Math.round(h)}],floor:[It,[It],function(c,a){return Math.floor(a[0].evaluate(c))}],ceil:[It,[It],function(c,a){return Math.ceil(a[0].evaluate(c))}],"filter-==":[ri,[pi,si],function(c,a){var l=a[0],h=a[1];return c.properties()[l.value]===h.value}],"filter-id-==":[ri,[si],function(c,a){var l=a[0];return c.id()===l.value}],"filter-type-==":[ri,[pi],function(c,a){var l=a[0];return c.geometryType()===l.value}],"filter-<":[ri,[pi,si],function(c,a){var l=a[0],h=a[1],d=c.properties()[l.value],f=h.value;return typeof d==typeof f&&d<f}],"filter-id-<":[ri,[si],function(c,a){var l=a[0],h=c.id(),d=l.value;return typeof h==typeof d&&h<d}],"filter->":[ri,[pi,si],function(c,a){var l=a[0],h=a[1],d=c.properties()[l.value],f=h.value;return typeof d==typeof f&&d>f}],"filter-id->":[ri,[si],function(c,a){var l=a[0],h=c.id(),d=l.value;return typeof h==typeof d&&h>d}],"filter-<=":[ri,[pi,si],function(c,a){var l=a[0],h=a[1],d=c.properties()[l.value],f=h.value;return typeof d==typeof f&&d<=f}],"filter-id-<=":[ri,[si],function(c,a){var l=a[0],h=c.id(),d=l.value;return typeof h==typeof d&&h<=d}],"filter->=":[ri,[pi,si],function(c,a){var l=a[0],h=a[1],d=c.properties()[l.value],f=h.value;return typeof d==typeof f&&d>=f}],"filter-id->=":[ri,[si],function(c,a){var l=a[0],h=c.id(),d=l.value;return typeof h==typeof d&&h>=d}],"filter-has":[ri,[si],function(c,a){return a[0].value in c.properties()}],"filter-has-id":[ri,[],function(c){return null!==c.id()&&void 0!==c.id()}],"filter-type-in":[ri,[Hl(pi)],function(c,a){return a[0].value.indexOf(c.geometryType())>=0}],"filter-id-in":[ri,[Hl(si)],function(c,a){return a[0].value.indexOf(c.id())>=0}],"filter-in-small":[ri,[pi,Hl(si)],function(c,a){var l=a[0];return a[1].value.indexOf(c.properties()[l.value])>=0}],"filter-in-large":[ri,[pi,Hl(si)],function(c,a){var l=a[0],h=a[1];return function sCe(c,a,l,h){for(;l<=h;){var d=l+h>>1;if(a[d]===c)return!0;a[d]>c?h=d-1:l=d+1}return!1}(c.properties()[l.value],h.value,0,h.value.length-1)}],all:{type:ri,overloads:[[[ri,ri],function(c,a){var h=a[1];return a[0].evaluate(c)&&h.evaluate(c)}],[hm(ri),function(c,a){for(var l=0,h=a;l<h.length;l+=1)if(!h[l].evaluate(c))return!1;return!0}]]},any:{type:ri,overloads:[[[ri,ri],function(c,a){var h=a[1];return a[0].evaluate(c)||h.evaluate(c)}],[hm(ri),function(c,a){for(var l=0,h=a;l<h.length;l+=1)if(h[l].evaluate(c))return!0;return!1}]]},"!":[ri,[ri],function(c,a){return!a[0].evaluate(c)}],"is-supported-script":[ri,[pi],function(c,a){var h=c.globals&&c.globals.isSupportedScript;return!h||h(a[0].evaluate(c))}],upcase:[pi,[pi],function(c,a){return a[0].evaluate(c).toUpperCase()}],downcase:[pi,[pi],function(c,a){return a[0].evaluate(c).toLowerCase()}],concat:[pi,hm(si),function(c,a){return a.map(function(l){return yS(l.evaluate(c))}).join("")}],"resolved-locale":[pi,[cE],function(c,a){return a[0].evaluate(c).resolvedLocale()}]});var eX=KW;function CN(c){return{result:"success",value:c}}function l_(c){return{result:"error",value:c}}function tX(c){return"object"==typeof c&&null!==c&&!Array.isArray(c)}var xN=function(a,l){this.expression=a,this._warningHistory={},this._evaluator=new DW,this._defaultValue=l?function dCe(c){return"color"===c.type&&(tX(c.default)||Array.isArray(c.default))?new al(0,0,0,0):"color"===c.type?al.parse(c.default)||null:void 0===c.default?null:c.default}(l):null,this._enumValues=l&&"enum"===l.type?l.values:null};function EN(c,a){var l=new kW(eX,[],a?function hCe(c){var a={color:Mh,string:pi,number:It,enum:pi,boolean:ri,formatted:uE,resolvedImage:fS};return"array"===c.type?Hl(a[c.value]||si,c.length):a[c.type]}(a):void 0),h=l.parse(c,void 0,void 0,void 0,a&&"string"===a.type?{typeAnnotation:"coerce"}:void 0);return h?CN(new xN(h,a)):l_(l.errors)}xN.prototype.evaluateWithoutErrorHandling=function(a,l,h,d,f,m,g,y){return this._evaluator.globals=a,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=d||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m,this._evaluator.featureTileCoord=g||null,this._evaluator.featureDistanceData=y||null,this.expression.evaluate(this._evaluator)},xN.prototype.evaluate=function(a,l,h,d,f,m,g,y){this._evaluator.globals=a,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=d||null,this._evaluator.availableImages=f||null,this._evaluator.formattedSection=m||null,this._evaluator.featureTileCoord=g||null,this._evaluator.featureDistanceData=y||null;try{var _=this.expression.evaluate(this._evaluator);if(null==_||"number"==typeof _&&_!=_)return this._defaultValue;if(this._enumValues&&!(_ in this._enumValues))throw new To("Expected value to be one of "+Object.keys(this._enumValues).map(function(v){return JSON.stringify(v)}).join(", ")+", but found "+JSON.stringify(_)+" instead.");return _}catch(v){return this._warningHistory[v.message]||(this._warningHistory[v.message]=!0,typeof console<"u"&&console.warn(v.message)),this._defaultValue}};var yE=function(a,l){this.kind=a,this._styleExpression=l,this.isStateDependent="constant"!==a&&!mN(l.expression)};yE.prototype.evaluateWithoutErrorHandling=function(a,l,h,d,f,m){return this._styleExpression.evaluateWithoutErrorHandling(a,l,h,d,f,m)},yE.prototype.evaluate=function(a,l,h,d,f,m){return this._styleExpression.evaluate(a,l,h,d,f,m)};var _S=function(a,l,h,d){this.kind=a,this.zoomStops=h,this._styleExpression=l,this.isStateDependent="camera"!==a&&!mN(l.expression),this.interpolationType=d};function uCe(c,a){if("error"===(c=EN(c,a)).result)return c;var l=c.value.expression,h=pE(l);if(!h&&!function oCe(c){return"data-driven"===c["property-type"]}(a))return l_([new _u("","data expressions not supported")]);var d=gN(l,["zoom","pitch","distance-from-center"]);if(!d&&!function aCe(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}(a))return l_([new _u("","zoom expressions not supported")]);var f=_E(l);return f||d?f instanceof _u?l_([f]):f instanceof im&&!function lCe(c){return!!c.expression&&c.expression.interpolated}(a)?l_([new _u("",'"interpolate" expressions cannot be used with this property')]):CN(f?new _S(h?"camera":"composite",c.value,f.labels,f instanceof im?f.interpolation:void 0):new yE(h?"constant":"source",c.value)):l_([new _u("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function _E(c){var a=null;if(c instanceof $W)a=_E(c.result);else if(c instanceof qW)for(var l=0,h=c.args;l<h.length&&!(a=_E(h[l]));l+=1);else(c instanceof BW||c instanceof im)&&c.input instanceof r_&&"zoom"===c.input.name&&(a=c);return a instanceof _u||c.eachChild(function(f){var m=_E(f);m instanceof _u?a=m:!a&&m?a=new _u("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):a&&m&&a!==m&&(a=new _u("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),a}function MN(c){if(Array.isArray(c))return c.map(MN);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){var a={};for(var l in c)a[l]=MN(c[l]);return a}return function fCe(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}(c)}_S.prototype.evaluateWithoutErrorHandling=function(a,l,h,d,f,m){return this._styleExpression.evaluateWithoutErrorHandling(a,l,h,d,f,m)},_S.prototype.evaluate=function(a,l,h,d,f,m){return this._styleExpression.evaluate(a,l,h,d,f,m)},_S.prototype.interpolationFactor=function(a,l,h){return this.interpolationType?im.interpolationFactor(this.interpolationType,a,l,h):0};var nX={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function iX(c){if(!0===c||!1===c)return!0;if(!Array.isArray(c)||0===c.length)return!1;switch(c[0]){case"has":return c.length>=2&&"$id"!==c[1]&&"$type"!==c[1];case"in":return c.length>=3&&("string"!=typeof c[1]||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==c.length||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(var a=0,l=c.slice(1);a<l.length;a+=1){var h=l[a];if(!iX(h)&&"boolean"!=typeof h)return!1}return!0;default:return!0}}function pCe(c,a){if(void 0===a&&(a="fill"),null==c)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};iX(c)||(c=vE(c));var l=c,h=!0;try{h=function mCe(c){if(!c_(c))return c;var a=MN(c);return sX(a),rX(a)}(l)}catch{console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(l,null,2)+"\n        ")}var m,d=nX["filter_"+a],f=EN(h,d);if("error"===f.result)throw new Error(f.value.map(function(b){return b.key+": "+b.message}).join(", "));m=function(b,S,T){return f.value.evaluate(b,S,{},T)};var g=null,y=null;if(h!==l){var _=EN(l,d);if("error"===_.result)throw new Error(_.value.map(function(b){return b.key+": "+b.message}).join(", "));g=function(b,S,T,x,E){return _.value.evaluate(b,S,{},T,void 0,void 0,x,E)},y=!pE(_.value.expression)}return{filter:m,dynamicFilter:g||void 0,needGeometry:oX(h),needFeature:!!y}}function rX(c){if(!Array.isArray(c))return c;var a=function _Ce(c){if(yCe.has(c[0]))for(var a=1;a<c.length;a++)if(c_(c[a]))return!0;return c}(c);return!0===a?a:a.map(function(l){return rX(l)})}function sX(c){var a=!1,l=[];if("case"===c[0]){for(var h=1;h<c.length-1;h+=2)a=a||c_(c[h]),l.push(c[h+1]);l.push(c[c.length-1])}else if("match"===c[0]){a=a||c_(c[1]);for(var d=2;d<c.length-1;d+=2)l.push(c[d+1]);l.push(c[c.length-1])}else if("step"===c[0]){a=a||c_(c[1]);for(var f=1;f<c.length-1;f+=2)l.push(c[f+1])}a&&(c.length=0,c.push.apply(c,["any"].concat(l)));for(var m=1;m<c.length;m++)sX(c[m])}function c_(c){if(!Array.isArray(c))return!1;if(function gCe(c){return"pitch"===c||"distance-from-center"===c}(c[0]))return!0;for(var a=1;a<c.length;a++)if(c_(c[a]))return!0;return!1}var yCe=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function vCe(c,a){return c<a?-1:c>a?1:0}function oX(c){if(!Array.isArray(c))return!1;if("within"===c[0])return!0;for(var a=1;a<c.length;a++)if(oX(c[a]))return!0;return!1}function vE(c){if(!c)return!0;var a=c[0];return c.length<=1?"any"!==a:"=="===a?DN(c[1],c[2],"=="):"!="===a?bE(DN(c[1],c[2],"==")):"<"===a||">"===a||"<="===a||">="===a?DN(c[1],c[2],a):"any"===a?function bCe(c){return["any"].concat(c.map(vE))}(c.slice(1)):"all"===a?["all"].concat(c.slice(1).map(vE)):"none"===a?["all"].concat(c.slice(1).map(vE).map(bE)):"in"===a?aX(c[1],c.slice(2)):"!in"===a?bE(aX(c[1],c.slice(2))):"has"===a?lX(c[1]):"!has"===a?bE(lX(c[1])):"within"!==a||c}function DN(c,a,l){switch(c){case"$type":return["filter-type-"+l,a];case"$id":return["filter-id-"+l,a];default:return["filter-"+l,c,a]}}function aX(c,a){if(0===a.length)return!1;switch(c){case"$type":return["filter-type-in",["literal",a]];case"$id":return["filter-id-in",["literal",a]];default:return a.length>200&&!a.some(function(l){return typeof l!=typeof a[0]})?["filter-in-large",c,["literal",a.sort(vCe)]]:["filter-in-small",c,["literal",a]]}}function lX(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function bE(c){return["!",c]}var SCe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function TCe(c,a){var l={};for(var h in c)"ref"!==h&&(l[h]=c[h]);return SCe.forEach(function(d){d in a&&(l[d]=a[d])}),l}var cX={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},uX=/(italic|oblique)$/i,hX={},AN=function(c,a,l){var h=hX[c];if(!h){Array.isArray(c)||(c=[c]);for(var d=400,f="normal",m=[],_=0,v=c.length;_<v;++_){var S=c[_].split(" "),T=S[S.length-1].toLowerCase();for(var x in"normal"==T||"italic"==T||"oblique"==T?(f=T,S.pop(),T=S[S.length-1].toLowerCase()):uX.test(T)&&(T=T.replace(uX,""),f=S[S.length-1].replace(T,"")),cX){var E=S.length>1?S[S.length-2].toLowerCase():"";if(T==x||T==x.replace("-","")||E+"-"+T==x){d=cX[x],S.pop(),E&&x.startsWith(E)&&S.pop();break}}"number"==typeof T&&(d=T);var I=S.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==I.indexOf(" ")&&(I='"'+I+'"'),m.push(I)}h=hX[c]=[f,d,m]}return h[0]+" "+h[1]+" "+a+"px"+(l?"/"+l:"")+" "+h[2]},dX="https://api.mapbox.com";function IN(c){var a="mapbox://";return 0!==c.indexOf(a)?"":c.slice(a.length)}function SE(c,a){var l=IN(c);if(!l)return decodeURI(new URL(c,location.href).href);var h="styles/";if(0!==l.indexOf(h))throw new Error("unexpected style url: "+c);var d=l.slice(h.length);return dX+"/styles/v1/"+d+"?&access_token="+a}function TE(c,a,l,h){var d=new URL(c,h),f=IN(c);return f?"mapbox.satellite"===f?"https://api.mapbox.com/v4/"+f+"/{z}/{x}/{y}"+(window.devicePixelRatio>=1.5?"@2x":"")+".webp?access_token="+a:"https://{a-d}.tiles.mapbox.com/v4/"+f+"/{z}/{x}/{y}.vector.pbf?access_token="+a:(a&&d.searchParams.set(l,a),decodeURI(d.href))}var fX=0,xCe={},ECe={};function LN(c){return c*Math.PI/180}var vu=function(){for(var c=[],a=78271.51696402048;c.length<=24;a/=2)c.push(a);return c}();function mX(c,a){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(c,a);var l=document.createElement("canvas");return l.width=c,l.height=a,l}function PN(c,a){for(var l=0,h=a.length;l<h;++l)if(a[l]<c&&l+1<h){var f=a[l]/a[l+1];return l+Math.log(a[l]/c)/Math.log(f)}return h-1}var u_={};function wE(c,a,l,h){if(void 0===l&&(l={}),a in u_)return h&&(h.request=u_[a][0]),u_[a][1];var d=l.transformRequest&&l.transformRequest(a,c)||new Request(a);d.headers.get("Accept")||d.headers.set("Accept","application/json"),h&&(h.request=d);var f=fetch(d).then(function(m){return delete u_[a],m.ok?m.json():Promise.reject(new Error("Error fetching source "+a))}).catch(function(m){return delete u_[a],Promise.reject(new Error("Error fetching source "+a))});return u_[a]=[d,f],f}function ON(c,a){if("string"!=typeof c)return Promise.resolve(c);if(!c.trim().startsWith("{"))return wE("Style",c=SE(c,a.accessToken),a);try{var l=JSON.parse(c);return Promise.resolve(l)}catch(h){return Promise.reject(h)}}function gX(c,a){if(a.transformRequest){var l=a.transformRequest(c,"Tiles");if(l instanceof Request)return decodeURI(l.url)}return c}var yX={};function MCe(c,a,l,h){var d=document.createElement("canvas"),f=[2*l*a.pixelRatio+a.width,2*l*a.pixelRatio+a.height];d.width=f[0],d.height=f[1];var m=d.getContext("2d");m.drawImage(c,a.x,a.y,a.width,a.height,l*a.pixelRatio,l*a.pixelRatio,a.width,a.height);var g=m.getImageData(0,0,f[0],f[1]);m.globalCompositeOperation="destination-over",m.fillStyle="rgba("+255*h.r+","+255*h.g+","+255*h.b+","+h.a+")";for(var y=g.data,_=0,v=g.width;_<v;++_)for(var b=0,S=g.height;b<S;++b)y[4*(b*v+_)+3]>0&&m.arc(_,b,l*a.pixelRatio,0,2*Math.PI);return m.fill(),d}var FN,DCe=Array(256).join("\u200a");function NN(c,a){if(a>=.05){for(var l="",h=c.split("\n"),d=DCe.slice(0,Math.round(a/.1)),f=0,m=h.length;f<m;++f)f>0&&(l+="\n"),l+=h[f].split("").join(d);return l}return c}function vX(){return FN||(FN=mX(1,1).getContext("2d")),FN}function dm(c,a){return vX().measureText(c).width+(c.length-1)*a}var bX={};function kN(c,a,l,h){if(-1!==c.indexOf("\n")){for(var d=c.split("\n"),f=[],m=0,g=d.length;m<g;++m)f.push(kN(d[m],a,l,h));return f.join("\n")}var y=l+","+a+","+c+","+h,_=bX[y];if(!_){var v=c.split(" ");if(v.length>1){var b=vX();b.font=a;for(var T=b.measureText("M").width*l,x="",E=[],I=0,M=v.length;I<M;++I){var D=v[I],L=x+(x?" ":"")+D;dm(L,h)<=T?x=L:(x&&E.push(x),x=D)}x&&E.push(x);for(var P=0,F=E.length;P<F&&F>1;++P){var B=E[P];if(dm(B,h)<.35*T){var G=P>0?dm(E[P-1],h):1/0,$=P<F-1?dm(E[P+1],h):1/0;E.splice(P,1),F-=1,G<$?(E[P-1]+=" "+B,P-=1):E[P]=B+" "+E[P]}}for(var se=0,ie=E.length-1;se<ie;++se){var j=E[se],J=E[se+1];if(dm(j,h)>.7*T&&dm(J,h)<.6*T){var ae=j.split(" "),ue=ae.pop();dm(ue,h)<.2*T&&(E[se]=ae.join(" "),E[se+1]=ue+" "+J),ie-=1}}_=E.join("\n")}else _=c;_=NN(_,h),bX[y]=_}return _}var CE,ACe=/font-family: ?([^;]*);/,ICe=/("|')/g;function RCe(c){if(!CE){CE={};for(var a=document.styleSheets,l=0,h=a.length;l<h;++l){var d=a[l];try{var f=d.rules||d.cssRules;if(f)for(var m=0,g=f.length;m<g;++m){var y=f[m];if(5==y.type){var _=y.cssText.match(ACe);CE[_[1].replace(ICe,"")]=!0}}}catch{}}}return c in CE}var VN={};function LCe(c){var a=c.toString();if(a in VN)return VN[a];for(var l=[],h=0,d=c.length;h<d;++h){c[h]=c[h].replace("Arial Unicode MS","Arial");var m=AN(c[h],1);rj(m);var g=m.split(" ");l.push([g.slice(3).join(" ").replace(/"/g,""),g[1],g[0]])}for(var y=0,_=l.length;y<_;++y){var v=l[y],b=v[0];if(!RCe(b)&&100!==fu.get(v[2]+"\n"+v[1]+" \n"+b)){var S="https://fonts.googleapis.com/css?family="+b.replace(/ /g,"+")+":"+v[1]+v[2];if(!document.querySelector('link[href="'+S+'"]')){var T=document.createElement("link");T.href=S,T.rel="stylesheet",document.head.appendChild(T)}}}return VN[a]=c,c}var EE,UN,PCe={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},OCe={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},BN={},xE={zoom:0};function fn(c,a,l,h,d,f,m){var g=c.id;f||(f={},console.warn("No functionCache provided to getValue()")),f[g]||(f[g]={});var y=f[g];if(!y[l]){var _=(c[a]||BN)[l],v=nX[a+"_"+c.type][l];void 0===_&&(_=v.default);var b=function cCe(c){return Array.isArray(c)&&c.length>0&&"string"==typeof c[0]&&c[0]in eX}(_);if(!b&&tX(_)&&(_=function ZTe(c,a){var l=c.stops;if(!l)return function KTe(c,a){var l=["get",c.property];if(void 0===c.default)return"string"===a.type?["string",l]:l;if("enum"===a.type)return["match",l,Object.keys(a.values),l,c.default];var h=["color"===a.type?"to-color":a.type,l,hS(c.default)];return"array"===a.type&&h.splice(1,0,a.value,a.length||null),h}(c,a);var h=l&&"object"==typeof l[0][0],d=h||void 0!==c.property,f=h||!d;return l=l.map(function(m){return!d&&a.tokens&&"string"==typeof m[1]?[m[0],twe(m[1])]:[m[0],hS(m[1])]}),h?function JTe(c,a,l){for(var h={},d={},f=[],m=0;m<l.length;m++){var g=l[m],y=g[0].zoom;void 0===h[y]&&(h[y]={zoom:y,type:c.type,property:c.property,default:c.default},d[y]=[],f.push(y)),d[y].push([g[0].value,g[1]])}if("exponential"===sN({},a)){for(var v=[nN(c),["linear"],["zoom"]],b=0,S=f;b<S.length;b+=1){var T=S[b];Qy(v,T,iN(h[T],a,d[T]),!1)}return v}for(var E=["step",["zoom"]],I=0,M=f;I<M.length;I+=1){var D=M[I];Qy(E,D,iN(h[D],a,d[D]),!0)}return rN(E),E}(c,a,l):f?function ewe(c,a,l,h){void 0===h&&(h=["zoom"]);var f,d=sN(c,a),m=!1;if("interval"===d)f=["step",h],m=!0;else{if("exponential"!==d)throw new Error('Unknown zoom function type "'+d+'"');var g=void 0!==c.base?c.base:1;f=[nN(c),1===g?["linear"]:["exponential",g],h]}for(var y=0,_=l;y<_.length;y+=1){var v=_[y];Qy(f,v[0],v[1],m)}return rN(f),f}(c,a,l):iN(c,a,l)}(_,v),b=!0),b){var S=function(c,a){var l=uCe(c,a);if("error"===l.result)throw new Error(l.value.map(function(h){return h.key+": "+h.message}).join(", "));return l.value}(_,v);y[l]=S.evaluate.bind(S)}else"color"==v.type&&(_=al.parse(_)),y[l]=function(){return _}}return xE.zoom=h,y[l](xE,d,m)}function FCe(c,a,l,h){return fn(c,"layout","icon-allow-overlap",a,l,h)?fn(c,"layout","icon-ignore-placement",a,l,h)?"none":"obstacle":"declutter"}function kCe(c,a,l,h,d){return d||console.warn("No filterCache provided to evaluateFilter()"),c in d||(d[c]=pCe(a).filter),xE.zoom=h,d[c](xE,l)}function af(c,a){if(c){if(0===c.a||0===a)return;var l=c.a;return a=void 0===a?1:a,0===l?"transparent":"rgba("+Math.round(255*c.r/l)+","+Math.round(255*c.g/l)+","+Math.round(255*c.b/l)+","+l*a+")"}return c}var VCe=/\{[^{}}]*\}/g;function zN(c,a){return c.replace(VCe,function(l){return a[l.slice(1,-1)]||""})}function BCe(c,a,l,h,d,f,m,g){if(void 0===h&&(h=vu),void 0===d&&(d=void 0),void 0===f&&(f=void 0),void 0===m&&(m=void 0),void 0===g&&(g=void 0),"string"==typeof a&&(a=JSON.parse(a)),8!=a.version)throw new Error("glStyle version 8 required.");var y,_;if(f)if(typeof Image<"u"){var v=new Image;v.crossOrigin="anonymous",v.onload=function(){y=v,_=[v.width,v.height],c.changed(),v.onload=null},v.src=f}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){var b=self;b.postMessage({action:"loadImage",src:f}),b.addEventListener("message",function(le){"imageLoaded"===le.data.action&&le.data.src===f&&(_=[(y=le.data.image).width,y.height])})}for(var L,S=function wCe(c){c=c.slice();for(var a=Object.create(null),l=0;l<c.length;l++)a[c[l].id]=c[l];for(var h=0;h<c.length;h++)"ref"in c[h]&&(c[h]=TCe(c[h],a[c[h].ref]));return c}(a.layers),T={},x=[],E={},I={},M=function RN(c){c.id||(c.id=fX++);var a={};return xCe[c.id]=a,a}(a),D=function pX(c){c.id||(c.id=fX++);var a={};return ECe[c.id]=a,a}(a),P=0,F=S.length;P<F;++P){var B=S[P],G=B.id;if("string"==typeof l&&B.source==l||-1!==l.indexOf(G)){var $=B["source-layer"];if(L){if(B.source!==L)throw new Error('Layer "'+G+'" does not use source "'+L)}else{var se=a.sources[L=B.source];if(!se)throw new Error('Source "'+L+'" is not defined');var ie=se.type;if("vector"!==ie&&"geojson"!==ie)throw new Error('Source "'+L+'" is not of type "vector" or "geojson", but "'+ie+'"')}var j=T[$];j||(T[$]=j=[]),j.push({layer:B,index:P}),x.push(G)}}var J=new _s,ae=new yr,ue=[],ge=function(K,le){var ye=K.getProperties(),ke=T[ye.layer];if(ke){var _e=h.indexOf(le);-1==_e&&(_e=PN(le,h));for(var Ne=PCe[K.getGeometry().getType()],me={properties:ye,type:Ne},Xe=c.get("mapbox-featurestate")[K.getId()],qe=-1,Tn=0,wt=ke.length;Tn<wt;++Tn){var Bt=ke[Tn],Pe=Bt.layer,on=Pe.layout||BN,et=Pe.paint||BN;if(!("none"===on.visibility||"minzoom"in Pe&&_e<Pe.minzoom||"maxzoom"in Pe&&_e>=Pe.maxzoom)){var Et=Pe.filter;if(!Et||kCe(Pe.id,Et,me,_e,D)){Pe;var pt=void 0,Rt=void 0,Mt=void 0,sn=void 0,ln=void 0,ct=void 0,ei=Bt.index;if(3==Ne&&("fill"==Pe.type||"fill-extrusion"==Pe.type))if(Rt=fn(Pe,"paint",Pe.type+"-opacity",_e,me,M,Xe),Pe.type+"-pattern"in et){var mi=fn(Pe,"paint",Pe.type+"-pattern",_e,me,M,Xe);if(mi){var fe="string"==typeof mi?zN(mi,ye):mi.toString();if(y&&d&&d[fe]){++qe,(!(ct=ue[qe])||!ct.getFill()||ct.getStroke()||ct.getText())&&(ct=new er({fill:new yr}),ue[qe]=ct),Mt=ct.getFill(),ct.setZIndex(ei);var re=fe+"."+Rt,$e=I[re];if(!$e){var mt=d[fe],Qt=mX(mt.width,mt.height),Je=Qt.getContext("2d");Je.globalAlpha=Rt,Je.drawImage(y,mt.x,mt.y,mt.width,mt.height,0,0,mt.width,mt.height),$e=Je.createPattern(Qt,"repeat"),I[re]=$e}Mt.setColor($e)}}}else pt=af(fn(Pe,"paint",Pe.type+"-color",_e,me,M,Xe),Rt),Pe.type+"-outline-color"in et&&(ln=af(fn(Pe,"paint",Pe.type+"-outline-color",_e,me,M,Xe),Rt)),ln||(ln=pt),(pt||ln)&&(++qe,(!(ct=ue[qe])||pt&&!ct.getFill()||!pt&&ct.getFill()||ln&&!ct.getStroke()||!ln&&ct.getStroke()||ct.getText())&&(ct=new er({fill:pt?new yr:void 0,stroke:ln?new _s:void 0}),ue[qe]=ct),pt&&(Mt=ct.getFill()).setColor(pt),ln&&((sn=ct.getStroke()).setColor(ln),sn.setWidth(.5)),ct.setZIndex(ei));if(1!=Ne&&"line"==Pe.type){pt=!("line-pattern"in et)&&"line-color"in et?af(fn(Pe,"paint","line-color",_e,me,M,Xe),fn(Pe,"paint","line-opacity",_e,me,M,Xe)):void 0;var en=fn(Pe,"paint","line-width",_e,me,M,Xe);pt&&en>0&&(++qe,(!(ct=ue[qe])||!ct.getStroke()||ct.getFill()||ct.getText())&&(ct=new er({stroke:new _s}),ue[qe]=ct),(sn=ct.getStroke()).setLineCap(fn(Pe,"layout","line-cap",_e,me,M,Xe)),sn.setLineJoin(fn(Pe,"layout","line-join",_e,me,M,Xe)),sn.setMiterLimit(fn(Pe,"layout","line-miter-limit",_e,me,M,Xe)),sn.setColor(pt),sn.setWidth(en),sn.setLineDash(et["line-dasharray"]?fn(Pe,"paint","line-dasharray",_e,me,M,Xe).map(function(Ga){return Ga*en}):null),ct.setZIndex(ei))}var Se=!1,Ve=null,ut=0,Jt=void 0,Te=void 0,Zt=void 0;if((1==Ne||2==Ne)&&"icon-image"in on){var kt=fn(Pe,"layout","icon-image",_e,me,M,Xe);if(kt){Jt="string"==typeof kt?zN(kt,ye):kt.toString();var mn=void 0,Ze=g?g(c,Jt):void 0;if(y&&d&&d[Jt]||Ze){var nn=fn(Pe,"layout","icon-rotation-alignment",_e,me,M,Xe);if(2==Ne){var zn=K.getGeometry();if(zn.getFlatMidpoint||zn.getFlatMidpoints){var Ni=zn.getExtent();if(Math.sqrt(Math.max(Math.pow((Ni[2]-Ni[0])/le,2),Math.pow((Ni[3]-Ni[1])/le,2)))>150){var Di="MultiLineString"===zn.getType()?zn.getFlatMidpoints():zn.getFlatMidpoint();if(UN||(UN=new $O("Point",EE=[NaN,NaN],[],{},null)),mn=UN,EE[0]=Di[0],EE[1]=Di[1],"line"===fn(Pe,"layout","symbol-placement",_e,me,M,Xe)&&"map"===nn)for(var Ro=zn.getStride(),jr=zn.getFlatCoordinates(),Ta=0,yo=jr.length-Ro;Ta<yo;Ta+=Ro){var Zo=jr[Ta],Qs=jr[Ta+1],$u=jr[Ta+Ro],Yu=jr[Ta+Ro+1],oe=Math.min(Zo,$u),Ie=Math.min(Qs,Yu),je=Math.max(Zo,$u),We=Math.max(Qs,Yu);if(Di[0]>=oe&&Di[0]<=je&&Di[1]>=Ie&&Di[1]<=We){ut=Math.atan2(Qs-Yu,$u-Zo);break}}}}}if(2!==Ne||mn){var at=fn(Pe,"layout","icon-size",_e,me,M,Xe),wn=void 0!==et["icon-color"]?fn(Pe,"paint","icon-color",_e,me,M,Xe):null;if(!wn||0!==wn.a){var jn=fn(Pe,"paint","icon-halo-color",_e,me,M,Xe),ai=fn(Pe,"paint","icon-halo-width",_e,me,M,Xe),ti=Jt+"."+at+"."+ai+"."+jn;if(null!==wn&&(ti+="."+wn),!(Te=E[ti])){var Hi=FCe(Pe,_e,me,M),Si=void 0;"icon-offset"in on&&((Si=fn(Pe,"layout","icon-offset",_e,me,M,Xe))[1]*=-1);var Ai=wn?[255*wn.r,255*wn.g,255*wn.b,wn.a]:void 0;if(Ze){var br={color:Ai,rotateWithView:"map"===nn,displacement:Si,declutterMode:Hi};"string"==typeof Ze?br.src=Ze:(br.img=Ze,br.imgSize=[Ze.width,Ze.height]),Te=new Uy(br)}else{var Ua=d[Jt],rc=void 0,Ii=void 0,Rl=void 0,fs=void 0;ai?Ii=[(rc=MCe(y,Ua,ai,jn)).width,rc.height]:(rc=y,Ii=_,Rl=[Ua.width,Ua.height],fs=[Ua.x,Ua.y]),Te=new Uy({color:Ai,img:rc,imgSize:Ii,size:Rl,offset:fs,rotateWithView:"map"===nn,scale:at/Ua.pixelRatio,displacement:Si,declutterMode:Hi})}E[ti]=Te}}Te&&(++qe,(!(ct=ue[qe])||!ct.getImage()||ct.getFill()||ct.getStroke())&&(ct=new er,ue[qe]=ct),ct.setGeometry(mn),Te.setRotation(ut+LN(fn(Pe,"layout","icon-rotate",_e,me,M,Xe))),Te.setOpacity(fn(Pe,"paint","icon-opacity",_e,me,M,Xe)),Te.setAnchor(OCe[fn(Pe,"layout","icon-anchor",_e,me,M,Xe)]),ct.setImage(Te),Ve=ct.getText(),ct.setText(void 0),ct.setZIndex(ei),Se=!0,Zt=!1)}else Zt=!0}}}if(1==Ne&&"circle"===Pe.type){++qe,(!(ct=ue[qe])||!ct.getImage()||ct.getFill()||ct.getStroke())&&(ct=new er,ue[qe]=ct);var Ll="circle-radius"in et?fn(Pe,"paint","circle-radius",_e,me,M,Xe):5,lp=af(fn(Pe,"paint","circle-stroke-color",_e,me,M,Xe),fn(Pe,"paint","circle-stroke-opacity",_e,me,M,Xe)),za=af(fn(Pe,"paint","circle-color",_e,me,M,Xe),fn(Pe,"paint","circle-opacity",_e,me,M,Xe)),Pl=fn(Pe,"paint","circle-stroke-width",_e,me,M,Xe),eo=Ll+"."+lp+"."+za+"."+Pl;(Te=E[eo])||(Te=new Xp({radius:Ll,stroke:lp&&Pl>0?new _s({width:Pl,color:lp}):void 0,fill:za?new yr({color:za}):void 0,declutterMode:"none"}),E[eo]=Te),ct.setImage(Te),Ve=ct.getText(),ct.setText(void 0),ct.setGeometry(void 0),ct.setZIndex(ei),Se=!0}var rs=void 0,Lo=void 0,nw=void 0,cp=void 0,iw=void 0,JB=void 0;if("text-field"in on){cp=Math.round(fn(Pe,"layout","text-size",_e,me,M,Xe));var QB=fn(Pe,"layout","text-font",_e,me,M,Xe);nw=fn(Pe,"layout","text-line-height",_e,me,M,Xe),(Lo=AN(m?m(QB):QB,cp,nw)).includes("sans-serif")||(Lo+=",sans-serif"),iw=fn(Pe,"layout","text-letter-spacing",_e,me,M,Xe),JB=fn(Pe,"layout","text-max-width",_e,me,M,Xe);var c0=fn(Pe,"layout","text-field",_e,me,M,Xe);rs="object"==typeof c0&&c0.sections?1===c0.sections.length?c0.toString():c0.sections.reduce(function(Ga,up,Sbt){var Qse=up.fontStack?up.fontStack.split(","):QB,s5=AN(m?m(Qse):Qse,cp*(up.scale||1),nw),u0=up.text;if("\n"===u0)return Ga.push("\n",""),Ga;if(2!=Ne){for(var FI=0,Ket=(u0=kN(u0,s5,JB,iw).split("\n")).length;FI<Ket;++FI)FI>0&&Ga.push("\n",""),Ga.push(u0[FI],s5);return Ga}Ga.push(NN(u0,iw),s5)},[]):zN(c0,ye).trim(),Rt=fn(Pe,"paint","text-opacity",_e,me,M,Xe)}if(rs&&Rt&&!Zt){Se||(++qe,(!(ct=ue[qe])||!ct.getText()||ct.getFill()||ct.getStroke())&&(ct=new er,ue[qe]=ct),ct.setImage(void 0),ct.setGeometry(void 0)),ct.getText()||ct.setText(Ve||new Xd({padding:[2,2,2,2]})),Ve=ct.getText();var Xse=on["text-transform"];"uppercase"==Xse?rs=Array.isArray(rs)?rs.map(function(Ga,up){return up%2?Ga:Ga.toUpperCase()}):rs.toUpperCase():"lowercase"==Xse&&(rs=Array.isArray(rs)?rs.map(function(Ga,up){return up%2?Ga:Ga.toLowerCase()}):rs.toLowerCase());var qse=Array.isArray(rs)?rs:2==Ne?NN(rs,iw):kN(rs,Lo,JB,iw);Ve.setText(qse),Ve.setFont(Lo),Ve.setRotation(LN(fn(Pe,"layout","text-rotate",_e,me,M,Xe)));var NI=fn(Pe,"layout","text-anchor",_e,me,M,Xe),e5=Se||1==Ne?"point":fn(Pe,"layout","symbol-placement",_e,me,M,Xe);if(Ve.setPlacement(e5),"function"==typeof Ve.setRepeat){var Yet=fn(Pe,"layout","symbol-spacing",_e,me,M,Xe);Ve.setRepeat(2*Yet)}Ve.setOverflow("point"===e5);var yg=fn(Pe,"paint","text-halo-width",_e,me,M,Xe),$se=fn(Pe,"layout","text-offset",_e,me,M,Xe),Yse=fn(Pe,"paint","text-translate",_e,me,M,Xe),t5=0,n5=0;if("point"==e5){var i5="center";-1!==NI.indexOf("left")?(i5="left",n5=yg):-1!==NI.indexOf("right")&&(i5="right",n5=-yg),Ve.setTextAlign(i5);var Zet=fn(Pe,"layout","text-rotation-alignment",_e,me,M,Xe);Ve.setRotateWithView("map"==Zet)}else Ve.setMaxAngle(LN(fn(Pe,"layout","text-max-angle",_e,me,M,Xe))*rs.length/qse.length),Ve.setTextAlign(),Ve.setRotateWithView(!1);var r5="middle";0==NI.indexOf("bottom")?(r5="bottom",t5=-yg-.5*(nw-1)*cp):0==NI.indexOf("top")&&(r5="top",t5=yg+.5*(nw-1)*cp),Ve.setTextBaseline(r5);var Zse=fn(Pe,"layout","text-justify",_e,me,M,Xe);Ve.setJustify("auto"===Zse?void 0:Zse),Ve.setOffsetX($se[0]*cp+n5+Yse[0]),Ve.setOffsetY($se[1]*cp+t5+Yse[1]),ae.setColor(af(fn(Pe,"paint","text-color",_e,me,M,Xe),Rt)),Ve.setFill(ae);var Kse=af(fn(Pe,"paint","text-halo-color",_e,me,M,Xe),Rt);if(Kse){J.setColor(Kse);var Jse=.5*cp;J.setWidth((yg*=2)<=Jse?yg:Jse),Ve.setStroke(J)}else Ve.setStroke(void 0);var rw=fn(Pe,"layout","text-padding",_e,me,M,Xe),sw=Ve.getPadding();rw!==sw[0]&&(sw[0]=rw,sw[1]=rw,sw[2]=rw,sw[3]=rw),ct.setZIndex(ei)}}}}if(qe>-1)return ue.length=qe+1,ue}};return c.setStyle(ge),c.set("mapbox-source",L),c.set("mapbox-layers",x),c.set("mapbox-featurestate",{}),ge}function zCe(c,a){return void 0===a&&(a=512),c.getExtent()?rS({extent:c.getExtent(),tileSize:a,maxZoom:22}).getResolutions():vu}function GN(c,a,l,h,d){void 0===l&&(l=""),void 0===h&&(h={}),void 0===d&&(d=void 0);var f,m,g,y,_=!0;return"string"==typeof l||Array.isArray(l)?y=l:(y=(g=l).source||g.layers,h=g),"string"==typeof h?(f=h,g={}):(f=h.styleUrl,g=h),!1===g.updateSource&&(_=!1),d||(d=g.resolutions),!f&&"string"==typeof a&&!a.trim().startsWith("{")&&(f=a),f&&(f=f.startsWith("data:")?location.href:SE(f,g.accessToken),g=function wX(c,a){return a.accessToken||(a=Object.assign({},a),new URL(c).searchParams.forEach(function(h,d){a.accessToken=h,a.accessTokenParam=d})),a}(f,g)),new Promise(function(v,b){ON(a,g).then(function(S){if(8!=S.version)return b(new Error("glStyle version 8 required."));if(!(c instanceof yu||c instanceof Xy))return b(new Error("Can only apply to VectorLayer or VectorTileLayer"));var I,M,D,T=c instanceof Xy?"vector":"geojson";if(y?m=Array.isArray(y)?S.layers.find(function(G){return G.id===y[0]}).source:y:(m=Object.keys(S.sources).find(function(G){return S.sources[G].type===T}),y=m),!m)return b(new Error("No "+T+" source found in the glStyle."));function x(){if(!_)return Promise.resolve();if(c instanceof Xy)return function MX(c,a,l){return new Promise(function(h,d){(function _X(c,a,l){void 0===l&&(l={});var h=[a,JSON.stringify(c)].toString(),d=yX[h];if(!d||l.transformRequest){var f=c.url;if(f&&!c.tiles){var m=TE(f,l.accessToken,l.accessTokenParam||"access_token",a||location.href);if(f.startsWith("mapbox://"))d=Promise.resolve(Object.assign({},c,{url:void 0,tiles:WO(m)}));else{var g={};d=wE("Source",m,l,g).then(function(y){return y.tiles=y.tiles.map(function(_){return gX(TE(_,l.accessToken,l.accessTokenParam||"access_token",g.request.url),l)}),Promise.resolve(y)})}}else c=Object.assign({},c,{tiles:c.tiles.map(function(y){return gX(TE(y,l.accessToken,l.accessTokenParam||"access_token",a||location.href),l)})}),d=Promise.resolve(Object.assign({},c));yX[h]=d}return d})(c,a,l).then(function(f){var m=function CX(c,a,l){var h=new WTe({tileJSON:a,tileSize:c.tileSize||a.tileSize||512}),d=h.getTileJSON(),f=h.getTileGrid(),m=dn(l.projection||"EPSG:3857"),g=function WCe(c,a){var l=c.bounds;if(l){var h=R7([l[0],l[1]],a),d=R7([l[2],l[3]],a);return[h[0],h[1],d[0],d[1]]}return dn(a).getExtent()}(d,m),y=m.getExtent(),_=d.minzoom||0,v=d.maxzoom||22,b={attributions:h.getAttributions(),projection:m,tileGrid:new Yy({origin:y?Tc(y):f.getOrigin(0),extent:g||f.getExtent(),minZoom:_,resolutions:zCe(m,a.tileSize).slice(0,v+1),tileSize:f.getTileSize(0)})};return Array.isArray(d.tiles)?b.urls=d.tiles:b.url=d.tiles,b}(c,f,l);m.format=new sE,Array.isArray(f.tiles)?m.urls=f.tiles:m.url=f.tiles,h(new Kx(m))}).catch(d)})}(S.sources[m],f,g).then(function(ie){var j=c.getSource();if(j?ie!==j&&(j.setTileUrlFunction(ie.getTileUrlFunction()),j.format_||(j.format_=ie.format_),j.getAttributions()||j.setAttributions(ie.getAttributions()),j.getTileLoadFunction()===dW&&j.setTileLoadFunction(ie.getTileLoadFunction()),Cc(j.getProjection(),ie.getProjection())&&(j.tileGrid=ie.getTileGrid())):c.setSource(ie),!isFinite(c.getMaxResolution())&&!isFinite(c.getMinZoom())){var J=c.getSource().getTileGrid();c.setMaxResolution(J.getResolution(J.getMinZoom()))}});var G=S.sources[m],$=c.getSource();(!$||$.get("mapbox-source")!==G)&&($=function IX(c,a,l){var h=c.data,d={};if("string"==typeof h){var f=TE(h,l.accessToken,l.accessTokenParam||"access_token",a||location.href);if(l.transformRequest){var m=l.transformRequest(f,"GeoJSON");m instanceof Request&&(f=decodeURI(m.url))}if(/\{bbox-[0-9a-z-]+\}/.test(f)){var y=new _r({attributions:c.attribution,format:ME,url:function(v,b,S){var T=function DX(c){return"{bbox-"+(c?c.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")+"}"}(S);return f.replace(T,v.join(",")+","+S.getCode())},strategy:oE});return y.set("mapbox-source",c),y}return new _r({attributions:c.attribution,format:ME,url:f})}d.features=ME.readFeatures(h,{featureProjection:Fb()||"EPSG:3857"});var _=new _r(Object.assign({attributions:c.attribution,format:ME},d));return _.set("mapbox-source",c),_}(G,f,g));var se=c.getSource();return se?$!==se&&(se.getAttributions()||se.setAttributions($.getAttributions()),se.format_||(se.format_=$.getFormat()),se.url_=$.getUrl()):c.setSource($),Promise.resolve()}function L(){if(D||S.sprite&&!I)D?(c.setStyle(D),x().then(v).catch(b)):b(new Error("Something went wrong trying to apply style."));else{if(g.projection&&!d){var $=dn(g.projection).getUnits();"m"!==$&&(d=vu.map(function(se){return se/_h[$]}))}D=BCe(c,S,y,d,I,M,LCe,g.getImage),c.getStyle()?x().then(v).catch(b):b(new Error("Nothing to show for source ["+m+"]"))}}if(S.sprite){var P=new URL(function CCe(c,a,l){var h=IN(c);if(!h)return decodeURI(new URL(c,l).href);var d="sprites/";if(0!==h.indexOf(d))throw new Error("unexpected sprites url: "+c);var f=h.slice(d.length);return dX+"/styles/v1/"+f+"/sprite?access_token="+a}(S.sprite,g.accessToken,f||location.href)),F=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",B=P.origin+P.pathname+F+".json"+P.search;new Promise(function(G,$){wE("Sprite",B,g).then(G).catch(function(se){wE("Sprite",B=P.origin+P.pathname+".json"+P.search,g).then(G).catch($)})}).then(function(G){if(void 0===G&&b(new Error("No sprites found.")),I=G,M=P.origin+P.pathname+F+".png"+P.search,g.transformRequest){var $=g.transformRequest(M,"SpriteImage");$ instanceof Request&&(M=encodeURI($.url))}L()}).catch(function(G){b(new Error("Sprites cannot be loaded: "+B+": "+G.message))})}else L()}).catch(b)})}var lf={};function HCe(c,a,l){return void 0===l&&(l={}),ON(a,l).then(function(h){!function GCe(c,a,l){a.layers.some(function(h){if("background"===h.type){if(c instanceof lo)return c.setBackground(function(d){return xX(h,d,l,{})}),!0;if(c instanceof vO||c instanceof Dr)return c.getLayers().push(function EX(c,a,l){var h=document.createElement("div");return h.className="ol-mapbox-style-background",h.style.position="absolute",h.style.width="100%",h.style.height="100%",new lo({source:new Zy({}),render:function(f){var m=xX(c,f.viewState.resolution,a,l);return h.style.backgroundColor=m,h}})}(h,l,{})),!0}})}(c,h,l)})}function xX(c,a,l,h){var d={id:c.id,type:c.type},f=c.layout||{},m=c.paint||{};d.paint=m;var y,_,g=PN(a,l.resolutions||vu);return void 0!==m["background-color"]&&(y=fn(d,"paint","background-color",g,lf,h)),void 0!==m["background-opacity"]&&(_=fn(d,"paint","background-opacity",g,lf,h)),"none"==f.visibility?void 0:af(y,_)}var ME=new Ra;const OX=class QCe extends cS{constructor(a){const l=void 0!==(a=a||{}).projection?a.projection:"EPSG:3857",h=void 0!==a.tileGrid?a.tileGrid:rS({extent:sS(l),maxResolution:a.maxResolution,maxZoom:a.maxZoom,minZoom:a.minZoom,tileSize:a.tileSize});super({attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,interpolate:a.interpolate,opaque:a.opaque,projection:l,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:h,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:void 0===a.wrapX||a.wrapX,transition:a.transition,attributionsCollapsible:a.attributionsCollapsible,zDirection:a.zDirection}),this.gutter_=void 0!==a.gutter?a.gutter:0}getGutter(){return this.gutter_}},cf="1.3.0";function h_(c,a){const l=[];Object.keys(a).forEach(function(d){null!=a[d]&&l.push(d+"="+encodeURIComponent(a[d]))});const h=l.join("&");return c=c.replace(/[?&]$/,""),(c+=c.includes("?")?"&":"?")+h}const bS=class exe extends cS{constructor(a){a=a||{};const l=Object.assign({},a.params);super({attributions:a.attributions,attributionsCollapsible:a.attributionsCollapsible,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,interpolate:a.interpolate,opaque:!(!("TRANSPARENT"in l)||l.TRANSPARENT),projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:a.tileClass,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0===a.wrapX||a.wrapX,transition:a.transition,zDirection:a.zDirection}),this.gutter_=void 0!==a.gutter?a.gutter:0,this.params_=l,this.v13_=!0,this.serverType_=a.serverType,this.hidpi_=void 0===a.hidpi||a.hidpi,this.tmpExtent_=[1/0,1/0,-1/0,-1/0],this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(a,l,h,d){const f=dn(h),m=this.getProjection();let g=this.getTileGrid();g||(g=this.getTileGridForProjection(f));const y=g.getZForResolution(l,this.zDirection),_=g.getTileCoordForCoordAndZ(a,y);if(g.getResolutions().length<=_[0])return;let v=g.getResolution(_[0]),b=g.getTileCoordExtent(_,this.tmpExtent_),S=So(g.getTileSize(_[0]),this.tmpSize);const T=this.gutter_;0!==T&&(S=_j(S,T,this.tmpSize),b=tl(b,v*T,b)),m&&m!==f&&(v=Qb(m,f,a,v),b=hu(b,f,m),a=rl(a,f,m));const x={SERVICE:"WMS",VERSION:cf,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(x,this.params_,d);const E=Math.floor((a[0]-b[0])/v),I=Math.floor((b[3]-a[1])/v);return x[this.v13_?"I":"X"]=E,x[this.v13_?"J":"Y"]=I,this.getRequestUrl_(_,S,b,1,m||f,x)}getLegendUrl(a,l){if(void 0===this.urls[0])return;const h={SERVICE:"WMS",VERSION:cf,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===l||void 0===l.LAYER){const d=this.params_.LAYERS;if(Array.isArray(d)&&1!==d.length)return;h.LAYER=d}if(void 0!==a){const d=this.getProjection()?this.getProjection().getMetersPerUnit():1;h.SCALE=a*d/28e-5}return Object.assign(h,l),h_(this.urls[0],h)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(a,l,h,d,f,m){const g=this.urls;if(!g)return;if(m.WIDTH=l[0],m.HEIGHT=l[1],m[this.v13_?"CRS":"SRS"]=f.getCode(),"STYLES"in this.params_||(m.STYLES=""),1!=d)switch(this.serverType_){case"geoserver":const b=90*d+.5|0;"FORMAT_OPTIONS"in m?m.FORMAT_OPTIONS+=";dpi:"+b:m.FORMAT_OPTIONS="dpi:"+b;break;case"mapserver":m.MAP_RESOLUTION=90*d;break;case"carmentaserver":case"qgis":m.DPI=90*d;break;default:En(!1,52)}const y=f.getAxisOrientation(),_=h;if(this.v13_&&"ne"==y.substr(0,2)){let b;b=h[0],_[0]=h[1],_[1]=b,b=h[2],_[2]=h[3],_[3]=b}let v;return m.BBOX=_.join(","),v=1==g.length?g[0]:g[kd(nW(a),g.length)],h_(v,m)}getTilePixelRatio(a){return this.hidpi_&&void 0!==this.serverType_?a:1}getKeyForParams_(){let a=0;const l=[];for(const h in this.params_)l[a++]=h+"-"+this.params_[h];return l.join("/")}updateParams(a){Object.assign(this.params_,a),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){this.v13_=S7(this.params_.VERSION||cf,"1.3")>=0}tileUrlFunction(a,l,h){let d=this.getTileGrid();if(d||(d=this.getTileGridForProjection(h)),d.getResolutions().length<=a[0])return;1!=l&&(!this.hidpi_||void 0===this.serverType_)&&(l=1);const f=d.getResolution(a[0]);let m=d.getTileCoordExtent(a,this.tmpExtent_),g=So(d.getTileSize(a[0]),this.tmpSize);const y=this.gutter_;0!==y&&(g=_j(g,y,this.tmpSize),m=tl(m,f*y,m)),1!=l&&(g=bj(g,l,this.tmpSize));const _={SERVICE:"WMS",VERSION:cf,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(_,this.params_),this.getRequestUrl_(a,g,m,l,h,_)}},nxe=class txe extends MO{constructor(a,l,h,d,f,m,g){const y=a.getExtent(),_=l.getExtent(),v=_?Sc(h,_):h,S=Qb(a,l,aa(v),d),x=new kj(a,l,v,y,.5*S,d),I=m(x.calculateSourceExtent(),S,f),M=I?0:4,D=I?I.getPixelRatio():1;super(h,d,D,M),this.targetProj_=l,this.maxSourceExtent_=y,this.triangulation_=x,this.targetResolution_=d,this.targetExtent_=h,this.sourceImage_=I,this.sourcePixelRatio_=D,this.interpolate_=g,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){1==this.state&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const a=this.sourceImage_.getState();if(2==a){const l=Kn(this.targetExtent_)/this.targetResolution_,h=gr(this.targetExtent_)/this.targetResolution_;this.canvas_=Bj(l,h,this.sourcePixelRatio_,this.sourceImage_.getResolution(),0,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=a,this.changed()}load(){if(0==this.state){this.state=1,this.changed();const a=this.sourceImage_.getState();2==a||3==a?this.reproject_():(this.sourceListenerKey_=Zn(this.sourceImage_,"change",function(l){const h=this.sourceImage_.getState();(2==h||3==h)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){or(this.sourceListenerKey_),this.sourceListenerKey_=null}};class ixe extends vc{constructor(a,l){super(a),this.image=l}}function NX(c,a){c.getImage().src=a}const d_=class rxe extends Zy{constructor(a){super({attributions:a.attributions,projection:a.projection,state:a.state,interpolate:void 0===a.interpolate||a.interpolate}),this.resolutions_=void 0!==a.resolutions?a.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(a){this.resolutions_=a}findNearestResolution(a){const l=this.getResolutions();return l&&(a=l[dx(l,a,0)]),a}getImage(a,l,h,d){const f=this.getProjection();if(!f||!d||Cc(f,d))return f&&(d=f),this.getImageInternal(a,l,h,d);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Cc(this.reprojectedImage_.getProjection(),d)&&this.reprojectedImage_.getResolution()==l&&Gl(this.reprojectedImage_.getExtent(),a))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new nxe(f,d,a,l,h,(m,g,y)=>this.getImageInternal(m,g,y,f),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(a,l,h,d){return Rn()}handleImageChange(a){const l=a.target;let h;switch(l.getState()){case 1:this.loading=!0,h="imageloadstart";break;case 2:this.loading=!1,h="imageloadend";break;case 3:this.loading=!1,h="imageloaderror";break;default:return}this.hasListener(h)&&this.dispatchEvent(new ixe(h,l))}},FX=[101,101],jN=class sxe extends d_{constructor(a){super({attributions:(a=a||{}).attributions,interpolate:a.interpolate,projection:a.projection,resolutions:a.resolutions}),this.context_=Yr(1,1),this.crossOrigin_=void 0!==a.crossOrigin?a.crossOrigin:null,this.url_=a.url,this.imageLoadFunction_=void 0!==a.imageLoadFunction?a.imageLoadFunction:NX,this.params_=Object.assign({},a.params),this.v13_=!0,this.updateV13_(),this.serverType_=a.serverType,this.hidpi_=void 0===a.hidpi||a.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==a.ratio?a.ratio:1.5}getFeatureInfoUrl(a,l,h,d){if(void 0===this.url_)return;const f=dn(h),m=this.getProjection();m&&m!==f&&(l=Qb(m,f,a,l),a=rl(a,f,m));const g=Iy(a,l,0,FX),y={SERVICE:"WMS",VERSION:cf,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(y,this.params_,d);const _=Ly((a[0]-g[0])/l,4),v=Ly((g[3]-a[1])/l,4);return y[this.v13_?"I":"X"]=_,y[this.v13_?"J":"Y"]=v,this.getRequestUrl_(g,FX,1,m||f,y)}getLegendUrl(a,l){if(void 0===this.url_)return;const h={SERVICE:"WMS",VERSION:cf,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===l||void 0===l.LAYER){const d=this.params_.LAYERS;if(Array.isArray(d)&&1!==d.length)return;h.LAYER=d}if(void 0!==a){const d=this.getProjection()?this.getProjection().getMetersPerUnit():1;h.SCALE=a*d/28e-5}return Object.assign(h,l),h_(this.url_,h)}getParams(){return this.params_}getImageInternal(a,l,h,d){if(void 0===this.url_)return null;l=this.findNearestResolution(l),1!=h&&(!this.hidpi_||void 0===this.serverType_)&&(h=1);const f=l/h,m=aa(a),_=Iy(m,f,0,[Vd(Kn(a)/f,4),Vd(gr(a)/f,4)]),S=Iy(m,f,0,[Vd(this.ratio_*Kn(a)/f,4),Vd(this.ratio_*gr(a)/f,4)]),T=this.image_;if(T&&this.renderedRevision_==this.getRevision()&&T.getResolution()==l&&T.getPixelRatio()==h&&Ia(T.getExtent(),_))return T;const x={SERVICE:"WMS",VERSION:cf,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(x,this.params_),this.imageSize_[0]=l7(Kn(S)/f,4),this.imageSize_[1]=l7(gr(S)/f,4);const E=this.getRequestUrl_(S,this.imageSize_,h,d,x);return this.image_=new Dj(S,l,h,E,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener("change",this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(a,l,h,d,f){if(En(void 0!==this.url_,9),f[this.v13_?"CRS":"SRS"]=d.getCode(),"STYLES"in this.params_||(f.STYLES=""),1!=h)switch(this.serverType_){case"geoserver":const y=90*h+.5|0;"FORMAT_OPTIONS"in f?f.FORMAT_OPTIONS+=";dpi:"+y:f.FORMAT_OPTIONS="dpi:"+y;break;case"mapserver":f.MAP_RESOLUTION=90*h;break;case"carmentaserver":case"qgis":f.DPI=90*h;break;default:En(!1,8)}f.WIDTH=l[0],f.HEIGHT=l[1];const m=d.getAxisOrientation();let g;return g=this.v13_&&"ne"==m.substr(0,2)?[a[1],a[0],a[3],a[2]]:a,f.BBOX=g.join(","),h_(this.url_,f)}getUrl(){return this.url_}setImageLoadFunction(a){this.image_=null,this.imageLoadFunction_=a,this.changed()}setUrl(a){a!=this.url_&&(this.url_=a,this.image_=null,this.changed())}updateParams(a){Object.assign(this.params_,a),this.updateV13_(),this.image_=null,this.changed()}updateV13_(){this.v13_=S7(this.params_.VERSION||cf,"1.3")>=0}},axe=class oxe extends cS{constructor(a){const l=void 0!==a.requestEncoding?a.requestEncoding:"KVP",h=a.tileGrid;let d=a.urls;void 0===d&&void 0!==a.url&&(d=WO(a.url)),super({attributions:a.attributions,attributionsCollapsible:a.attributionsCollapsible,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,interpolate:a.interpolate,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:a.tileClass,tileGrid:h,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,urls:d,wrapX:void 0!==a.wrapX&&a.wrapX,transition:a.transition,zDirection:a.zDirection}),this.version_=void 0!==a.version?a.version:"1.0.0",this.format_=void 0!==a.format?a.format:"image/jpeg",this.dimensions_=void 0!==a.dimensions?a.dimensions:{},this.layer_=a.layer,this.matrixSet_=a.matrixSet,this.style_=a.style,this.requestEncoding_=l,this.setKey(this.getKeyForDimensions_()),d&&d.length>0&&(this.tileUrlFunction=jO(d.map(this.createFromWMTSTemplate.bind(this))))}setUrls(a){this.urls=a;const l=a.join("\n");this.setTileUrlFunction(jO(a.map(this.createFromWMTSTemplate.bind(this))),l)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const a=this.urls?this.urls.slice(0):[];for(const l in this.dimensions_)a.push(l+"-"+this.dimensions_[l]);return a.join("/")}updateDimensions(a){Object.assign(this.dimensions_,a),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(a){const l=this.requestEncoding_,h={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==l&&Object.assign(h,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),a="KVP"==l?h_(a,h):a.replace(/\{(\w+?)\}/g,function(m,g){return g.toLowerCase()in h?h[g.toLowerCase()]:m});const d=this.tileGrid,f=this.dimensions_;return function(m,g,y){if(!m)return;const _={TileMatrix:d.getMatrixId(m[0]),TileCol:m[1],TileRow:m[2]};Object.assign(_,f);let v=a;return v="KVP"==l?h_(v,_):v.replace(/\{(\w+?)\}/g,function(b,S){return _[S]}),v}}};const lxe=class kX extends Yy{constructor(a){super({extent:a.extent,origin:a.origin,origins:a.origins,resolutions:a.resolutions,tileSize:a.tileSize,tileSizes:a.tileSizes,sizes:a.sizes}),this.matrixIds_=a.matrixIds}getMatrixId(a){return this.matrixIds_[a]}getMatrixIds(){return this.matrixIds_}},WN=class cxe extends MO{constructor(a,l,h,d,f){super(a,l,h,void 0!==f?0:2),this.loader_=void 0!==f?f:null,this.canvas_=d,this.error_=null}getError(){return this.error_}handleLoad_(a){a?(this.error_=a,this.state=3):this.state=2,this.changed()}load(){0==this.state&&(this.state=1,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}};let XN,VX=!0;try{new ImageData(10,10)}catch{VX=!1}function BX(c){let a=!0;try{new ImageData(10,10)}catch{a=!1}function l(h,d,f){return a?new ImageData(h,d,f):{data:h,width:d,height:f}}return function(h){const d=h.buffers,f=h.meta,g=h.width,y=h.height,_=d.length,v=d[0].byteLength;if(h.imageOps){const x=new Array(_);for(let I=0;I<_;++I)x[I]=l(new Uint8ClampedArray(d[I]),g,y);return c(x,f).data.buffer}const b=new Uint8ClampedArray(v),S=new Array(_),T=new Array(_);for(let x=0;x<_;++x)S[x]=new Uint8ClampedArray(d[x]),T[x]=[0,0,0,0];for(let x=0;x<v;x+=4){for(let I=0;I<_;++I){const M=S[I];T[I][0]=M[x],T[I][1]=M[x+1],T[I][2]=M[x+2],T[I][3]=M[x+3]}const E=c(T,f);b[x]=E[0],b[x+1]=E[1],b[x+2]=E[2],b[x+3]=E[3]}return b.buffer}}function hxe(c,a){const h=Object.keys(c.lib||{}).map(function(f){return"const "+f+" = "+c.lib[f].toString()+";"}).concat(["const __minion__ = ("+BX.toString()+")(",c.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),d=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(h.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(h,{type:"text/javascript"})));return d.addEventListener("message",a),d}class fxe extends wb{constructor(a){let l;super(),this._imageOps=!!a.imageOps,l=0===a.threads?0:this._imageOps?1:a.threads||1;const h=new Array(l);if(l)for(let d=0;d<l;++d)h[d]=hxe(a,this._onWorkerMessage.bind(this,d));else h[0]=function dxe(c,a){const l=BX(c.operation);let h=!1;return{postMessage:function(d){setTimeout(function(){h||a({data:{buffer:l(d),meta:d.meta}})},0)},terminate:function(){h=!0}}}(a,this._onWorkerMessage.bind(this,0));this._workers=h,this._queue=[],this._maxQueueLength=a.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(a,l,h){this._enqueue({inputs:a,meta:l,callback:h}),this._dispatch()}_enqueue(a){for(this._queue.push(a);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return;const a=this._queue.shift();this._job=a;const l=a.inputs[0].width,h=a.inputs[0].height,d=a.inputs.map(function(y){return y.data.buffer}),f=this._workers.length;if(this._running=f,1===f)return void this._workers[0].postMessage({buffers:d,meta:a.meta,imageOps:this._imageOps,width:l,height:h},d);const g=4*Math.ceil(a.inputs[0].data.length/4/f);for(let y=0;y<f;++y){const _=y*g,v=[];for(let b=0,S=d.length;b<S;++b)v.push(d[b].slice(_,_+g));this._workers[y].postMessage({buffers:v,meta:a.meta,imageOps:this._imageOps,width:l,height:h},v)}}_onWorkerMessage(a,l){this.disposed||(this._dataLookup[a]=l.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const a=this._job,l=this._workers.length;let h,d;if(1===l)h=new Uint8ClampedArray(this._dataLookup[0].buffer),d=this._dataLookup[0].meta;else{const f=a.inputs[0].data.length;h=new Uint8ClampedArray(f),d=new Array(l);const m=4*Math.ceil(f/4/l);for(let g=0;g<l;++g){const _=g*m;h.set(new Uint8ClampedArray(this._dataLookup[g].buffer),_),d[g]=this._dataLookup[g].meta}}this._job=null,this._dataLookup={},a.callback(null,function uxe(c,a,l){if(VX)return new ImageData(c,a,l);XN||(XN=document.createElement("canvas").getContext("2d"));const h=XN.createImageData(a,l);return h.data.set(c),h}(h,a.inputs[0].width,a.inputs[0].height),d),this._dispatch()}disposeInternal(){for(let a=0;a<this._workers.length;++a)this._workers[a].terminate();this._workers.length=0}}class zX extends vc{constructor(a,l,h){super(a),this.extent=l.extent,this.resolution=l.viewState.resolution/l.pixelRatio,this.data=h}}let fm=null;function pxe(c,a){const l=c.getRenderer();if(!l)throw new Error("Unsupported layer type: "+c);if(!l.prepareFrame(a))return null;const h=a.size[0],d=a.size[1];if(0===h||0===d)return null;const f=l.renderFrame(a,null);let m;if(f instanceof HTMLCanvasElement)m=f;else{if(f&&(m=f.firstElementChild),!(m instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+m);if(m.width===h&&m.height===d)return m.getContext("2d").getImageData(0,0,h,d)}if(fm){const g=fm.canvas;g.width!==h||g.height!==d?fm=Yr(h,d,void 0,{willReadFrequently:!0}):fm.clearRect(0,0,h,d)}else fm=Yr(h,d,void 0,{willReadFrequently:!0});return fm.drawImage(m,0,0,h,d),fm.getImageData(0,0,h,d)}function mxe(c){return c.map(function(a){return a.getLayerState()})}function yxe(c){let a;return c instanceof Zy?c instanceof HO?a=new gu({source:c}):c instanceof d_&&(a=new qd({source:c})):a=c,a}const SS=class GX extends d_{constructor(a){super({projection:null}),this.processor_=null,this.operationType_=void 0!==a.operationType?a.operationType:"pixel",this.threads_=void 0!==a.threads?a.threads:1,this.layers_=function gxe(c){const a=c.length,l=new Array(a);for(let h=0;h<a;++h)l[h]=yxe(c[h]);return l}(a.sources);const l=this.changed.bind(this);for(let h=0,d=this.layers_.length;h<d;++h)this.layers_[h].addEventListener("change",l);this.useResolutions_=null!==a.resolutions,this.tileQueue_=new aj(function(){return 1},this.changed.bind(this)),this.renderedImageCanvas_=null,this.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:mxe(this.layers_),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:an(this),renderTargets:{}},this.setAttributions(function(h){const d=[];for(let f=0,m=a.sources.length;f<m;++f){const g=a.sources[f],y=g instanceof Zy?g:g.getSource();if(!y)continue;const _=y.getAttributions();if("function"==typeof _){const v=_(h);d.push.apply(d,v)}}return 0!==d.length?d:null}),void 0!==a.operation&&this.setOperation(a.operation,a.lib)}setOperation(a,l){this.processor_&&this.processor_.dispose(),this.processor_=new fxe({operation:a,imageOps:"image"===this.operationType_,queue:1,lib:l,threads:this.threads_}),this.changed()}updateFrameState_(a,l,h){const d=Object.assign({},this.frameState_);d.viewState=Object.assign({},d.viewState);const f=aa(a);d.size[0]=Math.ceil(Kn(a)/l),d.size[1]=Math.ceil(gr(a)/l),d.extent=[f[0]-d.size[0]*l/2,f[1]-d.size[1]*l/2,f[0]+d.size[0]*l/2,f[1]+d.size[1]*l/2],d.time=Date.now();const m=d.viewState;return m.center=f,m.projection=h,m.resolution=l,d}allSourcesReady_(){let l,a=!0;for(let h=0,d=this.layers_.length;h<d;++h)if(l=this.layers_[h].getSource(),!l||"ready"!==l.getState()){a=!1;break}return a}getImage(a,l,h,d){if(!this.allSourcesReady_())return null;l=this.findNearestResolution(l);const f=this.updateFrameState_(a,l,d);if(this.requestedFrameState_=f,this.renderedImageCanvas_){const m=this.renderedImageCanvas_.getResolution(),g=this.renderedImageCanvas_.getExtent();(l!==m||!Gl(f.extent,g))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),f.tileQueue.loadMoreTiles(16,16),f.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const a=this.requestedFrameState_,l=this.layers_.length,h=new Array(l);for(let f=0;f<l;++f){a.layerIndex=f,a.renderTargets={};const m=pxe(this.layers_[f],a);if(!m)return;h[f]=m}const d={};this.dispatchEvent(new zX("beforeoperations",a,d)),this.processor_.process(h,d,this.onWorkerComplete_.bind(this,a))}onWorkerComplete_(a,l,h,d){if(l||!h)return;const f=a.extent,m=a.viewState.resolution;if(m!==this.requestedFrameState_.viewState.resolution||!Gl(f,this.requestedFrameState_.extent))return;let g;this.renderedImageCanvas_?g=this.renderedImageCanvas_.getImage().getContext("2d"):(g=Yr(Math.round(Kn(f)/m),Math.round(gr(f)/m)),this.renderedImageCanvas_=new WN(f,m,1,g.canvas)),g.putImageData(h,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new zX("afteroperations",a,d)),a.animate&&requestAnimationFrame(this.changed.bind(this))}getResolutions(a){if(!this.useResolutions_)return null;let l=super.getResolutions();if(!l)for(let h=0,d=this.layers_.length;h<d&&(l=this.layers_[h].getSource().getResolutions(a),!l);++h);return l}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}},pm=class _xe extends _r{constructor(a){super({attributions:a.attributions,wrapX:a.wrapX}),this.resolution=void 0,this.distance=void 0!==a.distance?a.distance:20,this.minDistance=a.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=a.geometryFunction||function(l){const h=l.getGeometry();return En("Point"==h.getType(),10),h},this.createCustomCluster_=a.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(a.source||null)}clear(a){this.features.length=0,super.clear(a)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(a,l,h){this.source.loadFeatures(a,l,h),l!==this.resolution&&(this.resolution=l,this.refresh())}setDistance(a){this.updateDistance(a,this.minDistance)}setMinDistance(a){this.updateDistance(this.distance,a)}getMinDistance(){return this.minDistance}setSource(a){this.source&&this.source.removeEventListener("change",this.boundRefresh_),this.source=a,a&&a.addEventListener("change",this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(a,l){const h=0===a?0:Math.min(l,a)/a,d=a!==this.distance||this.interpolationRatio!==h;this.distance=a,this.minDistance=l,this.interpolationRatio=h,d&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return;const a=[1/0,1/0,-1/0,-1/0],l=this.distance*this.resolution,h=this.source.getFeatures(),d={};for(let f=0,m=h.length;f<m;f++){const g=h[f];if(!(an(g)in d)){const y=this.geometryFunction(g);if(y){EP(y.getCoordinates(),a),tl(a,l,a);const v=this.source.getFeaturesInExtent(a).filter(function(b){const S=an(b);return!(S in d)&&(d[S]=!0,!0)});this.features.push(this.createCluster(v,a))}}}}createCluster(a,l){const h=[0,0];for(let g=a.length-1;g>=0;--g){const y=this.geometryFunction(a[g]);y?T7(h,y.getCoordinates()):a.splice(g,1)}w7(h,1/a.length);const d=aa(l),f=this.interpolationRatio,m=new du([h[0]*(1-f)+d[0]*f,h[1]*(1-f)+d[1]*f]);return this.createCustomCluster_?this.createCustomCluster_(m,a):new Ky({geometry:m,features:a})}},HX="http://www.w3.org/2001/XMLSchema-instance";function TS(c,a){return IE().createElementNS(c,a)}function bu(c,a){return jX(c,a,[]).join("")}function jX(c,a,l){if(c.nodeType==Node.CDATA_SECTION_NODE||c.nodeType==Node.TEXT_NODE)l.push(a?String(c.nodeValue).replace(/(\r\n|\r|\n)/g,""):c.nodeValue);else{let h;for(h=c.firstChild;h;h=h.nextSibling)jX(h,a,l)}return l}function hf(c){return"documentElement"in c}function df(c){return(new DOMParser).parseFromString(c,"application/xml")}function WX(c,a){return function(l,h){const d=c.call(void 0!==a?a:this,l,h);void 0!==d&&Pr(h[h.length-1],d)}}function Su(c,a){return function(l,h){const d=c.call(void 0!==a?a:this,l,h);void 0!==d&&h[h.length-1].push(d)}}function qN(c,a){return function(l,h){const d=c.call(void 0!==a?a:this,l,h);void 0!==d&&(h[h.length-1]=d)}}function cl(c,a,l){return function(h,d){const f=c.call(void 0!==l?l:this,h,d);if(void 0!==f){const m=d[d.length-1],g=void 0!==a?a:h.localName;let y;g in m?y=m[g]:(y=[],m[g]=y),y.push(f)}}}function nt(c,a,l){return function(h,d){const f=c.call(void 0!==l?l:this,h,d);void 0!==f&&(d[d.length-1][void 0!==a?a:h.localName]=f)}}function Mn(c,a){return function(l,h,d){c.call(void 0!==a?a:this,l,h,d),d[d.length-1].node.appendChild(l)}}function Tu(c,a){return function(l,h,d){let g=c;return void 0===g&&(g=d),TS(void 0!==a?a:h[h.length-1].node.namespaceURI,g)}}const jl=Tu();function Ec(c,a){const l=a.length,h=new Array(l);for(let d=0;d<l;++d)h[d]=c[a[d]];return h}function Yt(c,a,l){let h,d;for(l=void 0!==l?l:{},h=0,d=c.length;h<d;++h)l[c[h]]=a;return l}function f_(c,a,l,h){let d;for(d=a.firstElementChild;d;d=d.nextElementSibling){const f=c[d.namespaceURI];if(void 0!==f){const m=f[d.localName];void 0!==m&&m.call(h,d,l)}}}function Jn(c,a,l,h,d){return h.push(c),f_(a,l,h,d),h.pop()}function vs(c,a,l,h,d,f,m){return d.push(c),function XX(c,a,l,h,d,f){const m=(void 0!==d?d:l).length;let g,y;for(let _=0;_<m;++_)g=l[_],void 0!==g&&(y=a.call(void 0!==f?f:this,g,h,void 0!==d?d[_]:void 0),void 0!==y&&c[y.namespaceURI][y.localName].call(f,y,g,h))}(a,l,h,d,f,m),d.pop()}let DE,AE;function IE(){return void 0===AE&&typeof document<"u"&&(AE=document.implementation.createDocument("","",null)),AE}const Sxe=class bxe extends ZO{constructor(){super(),this.xmlSerializer_=function vxe(){return void 0===DE&&typeof XMLSerializer<"u"&&(DE=new XMLSerializer),DE}()}getType(){return"xml"}readFeature(a,l){if(!a)return null;if("string"==typeof a){const h=df(a);return this.readFeatureFromDocument(h,l)}return hf(a)?this.readFeatureFromDocument(a,l):this.readFeatureFromNode(a,l)}readFeatureFromDocument(a,l){const h=this.readFeaturesFromDocument(a,l);return h.length>0?h[0]:null}readFeatureFromNode(a,l){return null}readFeatures(a,l){if(!a)return[];if("string"==typeof a){const h=df(a);return this.readFeaturesFromDocument(h,l)}return hf(a)?this.readFeaturesFromDocument(a,l):this.readFeaturesFromNode(a,l)}readFeaturesFromDocument(a,l){const h=[];for(let d=a.firstChild;d;d=d.nextSibling)d.nodeType==Node.ELEMENT_NODE&&Pr(h,this.readFeaturesFromNode(d,l));return h}readFeaturesFromNode(a,l){return Rn()}readGeometry(a,l){if(!a)return null;if("string"==typeof a){const h=df(a);return this.readGeometryFromDocument(h,l)}return hf(a)?this.readGeometryFromDocument(a,l):this.readGeometryFromNode(a,l)}readGeometryFromDocument(a,l){return null}readGeometryFromNode(a,l){return null}readProjection(a){if(!a)return null;if("string"==typeof a){const l=df(a);return this.readProjectionFromDocument(l)}return hf(a)?this.readProjectionFromDocument(a):this.readProjectionFromNode(a)}readProjectionFromDocument(a){return this.dataProjection}readProjectionFromNode(a){return this.dataProjection}writeFeature(a,l){const h=this.writeFeatureNode(a,l);return this.xmlSerializer_.serializeToString(h)}writeFeatureNode(a,l){return null}writeFeatures(a,l){const h=this.writeFeaturesNode(a,l);return this.xmlSerializer_.serializeToString(h)}writeFeaturesNode(a,l){return null}writeGeometry(a,l){const h=this.writeGeometryNode(a,l);return this.xmlSerializer_.serializeToString(h)}writeGeometryNode(a,l){return null}};function ff(c){return mm(bu(c,!1))}function mm(c){const a=/^\s*(true|1)|(false|0)\s*$/.exec(c);if(a)return void 0!==a[1]||!1}function Zr(c){return Lh(bu(c,!1))}function Lh(c){const a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(c);if(a)return parseFloat(a[1])}function $N(c){return RE(bu(c,!1))}function RE(c){const a=/^\s*(\d+)\s*$/.exec(c);if(a)return parseInt(a[1],10)}function Hn(c){return bu(c,!1).trim()}function p_(c,a){Mc(c,a?"1":"0")}function gm(c,a){const l=a.toPrecision();c.appendChild(IE().createTextNode(l))}function Mc(c,a){c.appendChild(IE().createTextNode(a))}const Ph=["http://www.google.com/kml/ext/2.2"],pn=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],qX={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},Cxe=Yt(pn,{ExtendedData:lq,Region:cq,MultiGeometry:nt(sq,"geometry"),LineString:nt(iq,"geometry"),LinearRing:nt(rq,"geometry"),Point:nt(oq,"geometry"),Polygon:nt(aq,"geometry"),Style:nt(eF),StyleMap:function oEe(c,a){const l=eq.call(this,c,a);if(!l)return;const h=a[a.length-1];Array.isArray(l)?h.Style=l:"string"==typeof l?h.styleUrl=l:En(!1,38)},address:nt(Hn),description:nt(Hn),name:nt(Hn),open:nt(ff),phoneNumber:nt(Hn),styleUrl:nt(JX),visibility:nt(ff)},Yt(Ph,{MultiTrack:nt(function qxe(c,a){const l=Jn([],Xxe,c,a);if(l)return new aS(l)},"geometry"),Track:nt(nq,"geometry")})),xxe=Yt(pn,{ExtendedData:lq,Region:cq,Link:function _Ee(c,a){f_(Exe,c,a)},address:nt(Hn),description:nt(Hn),name:nt(Hn),open:nt(ff),phoneNumber:nt(Hn),visibility:nt(ff)}),Exe=Yt(pn,{href:nt(KX)}),$X=Yt(pn,{LatLonAltBox:function hEe(c,a){const l=Jn({},uEe,c,a);if(!l)return;const h=a[a.length-1],d=[parseFloat(l.west),parseFloat(l.south),parseFloat(l.east),parseFloat(l.north)];h.extent=d,h.altitudeMode=l.altitudeMode,h.minAltitude=parseFloat(l.minAltitude),h.maxAltitude=parseFloat(l.maxAltitude)},Lod:function fEe(c,a){const l=Jn({},dEe,c,a);if(!l)return;const h=a[a.length-1];h.minLodPixels=parseFloat(l.minLodPixels),h.maxLodPixels=parseFloat(l.maxLodPixels),h.minFadeExtent=parseFloat(l.minFadeExtent),h.maxFadeExtent=parseFloat(l.maxFadeExtent)}}),Mxe=Yt(pn,["Document","Placemark"]),Dxe=Yt(pn,{Document:Mn(function EEe(c,a,l){vs({node:c},CEe,xEe,a,l,void 0,this)}),Placemark:Mn(mq)});let m_,YN,CS,xS,ES,LE,ZN,KN,kE,wS=null,PE=null,OE=null,pf=null,JN=null,NE=null;function FE(c){return 32/Math.min(c[0],c[1])}function Ixe(c){return c}function YX(c,a,l){return Array.isArray(c)?c:"string"==typeof c?YX(l[c],a,l):a}function VE(c){const a=bu(c,!1),l=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a);if(l){const h=l[1];return[parseInt(h.substr(6,2),16),parseInt(h.substr(4,2),16),parseInt(h.substr(2,2),16),parseInt(h.substr(0,2),16)/255]}}function ZX(c){let a=bu(c,!1);const l=[];a=a.replace(/\s*,\s*/g,",");const h=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let d;for(;d=h.exec(a);){const f=parseFloat(d[1]),m=parseFloat(d[2]),g=d[3]?parseFloat(d[3]):0;l.push(f,m,g),a=a.substr(d[0].length)}if(""===a)return l}function KX(c){const a=bu(c,!1).trim();let l=c.baseURI;return(!l||"about:blank"==l)&&(l=window.location.href),l?new URL(a,l).href:a}function JX(c){const a=bu(c,!1).trim().replace(/^(?!.*#)/,"#");let l=c.baseURI;return(!l||"about:blank"==l)&&(l=window.location.href),l?new URL(a,l).href:a}function QX(c){return Zr(c)}const Nxe=Yt(pn,{Pair:function sEe(c,a){const l=Jn({},rEe,c,a,this);if(!l)return;const h=l.key;if(h&&"normal"==h){const d=l.styleUrl;d&&(a[a.length-1]=d);const f=l.Style;f&&(a[a.length-1]=f)}}});function eq(c,a){return Jn(void 0,Nxe,c,a,this)}const Fxe=Yt(pn,{Icon:nt(function Zxe(c,a){return Jn({},Yxe,c,a)||null}),color:nt(VE),heading:nt(Zr),hotSpot:nt(function Oxe(c){const a=c.getAttribute("xunits"),l=c.getAttribute("yunits");let h;return h="insetPixels"!==a?"insetPixels"!==l?"bottom-left":"top-left":"insetPixels"!==l?"bottom-right":"top-right",{x:parseFloat(c.getAttribute("x")),xunits:qX[a],y:parseFloat(c.getAttribute("y")),yunits:qX[l],origin:h}}),scale:nt(QX)}),Vxe=Yt(pn,{color:nt(VE),scale:nt(QX)}),Uxe=Yt(pn,{color:nt(VE),width:nt(Zr)}),Gxe=Yt(pn,{color:nt(VE),fill:nt(ff),outline:nt(ff)}),jxe=Yt(pn,{coordinates:qN(ZX)});function tq(c,a){return Jn(null,jxe,c,a)}const Xxe=Yt(Ph,{Track:Su(nq)}),$xe=Yt(pn,{when:function vEe(c,a){const h=a[a.length-1].whens,d=bu(c,!1),f=Date.parse(d);h.push(isNaN(f)?0:f)}},Yt(Ph,{coord:function Wxe(c,a){const h=a[a.length-1].coordinates,d=bu(c,!1),m=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(d);if(m){const g=parseFloat(m[1]),y=parseFloat(m[2]),_=parseFloat(m[3]);h.push([g,y,_])}else h.push([])}}));function nq(c,a){const l=Jn({coordinates:[],whens:[]},$xe,c,a);if(!l)return;const h=[],d=l.coordinates,f=l.whens;for(let m=0,g=Math.min(d.length,f.length);m<g;++m)3==d[m].length&&h.push(d[m][0],d[m][1],d[m][2],f[m]);return new Eh(h,"XYZM")}const Yxe=Yt(pn,{href:nt(KX)},Yt(Ph,{x:nt(Zr),y:nt(Zr),w:nt(Zr),h:nt(Zr)})),Kxe=Yt(pn,{coordinates:qN(ZX)});function QN(c,a){return Jn(null,Kxe,c,a)}const BE=Yt(pn,{extrude:nt(ff),tessellate:nt(ff),altitudeMode:nt(Hn)});function iq(c,a){const l=Jn({},BE,c,a),h=QN(c,a);if(h){const d=new Eh(h,"XYZ");return d.setProperties(l,!0),d}}function rq(c,a){const l=Jn({},BE,c,a),h=QN(c,a);if(h){const d=new Th(h,"XYZ",[h.length]);return d.setProperties(l,!0),d}}const Jxe=Yt(pn,{LineString:Su(iq),LinearRing:Su(rq),MultiGeometry:Su(sq),Point:Su(oq),Polygon:Su(aq)});function sq(c,a){const l=Jn([],Jxe,c,a);if(!l)return null;if(0===l.length)return new Jd(l);let h,d=!0;const f=l[0].getType();let m;for(let g=1,y=l.length;g<y;++g)if(m=l[g],m.getType()!=f){d=!1;break}if(d){let g,y;if("Point"==f){const _=l[0];g=_.getLayout(),y=_.getFlatCoordinates();for(let v=1,b=l.length;v<b;++v)m=l[v],Pr(y,m.getFlatCoordinates());h=new lS(y,g),tF(h,l)}else"LineString"==f?(h=new aS(l),tF(h,l)):"Polygon"==f?(h=new rE(l),tF(h,l)):"GeometryCollection"==f?h=new Jd(l):En(!1,37)}else h=new Jd(l);return h}function oq(c,a){const l=Jn({},BE,c,a),h=QN(c,a);if(h){const d=new du(h,"XYZ");return d.setProperties(l,!0),d}}const Qxe=Yt(pn,{innerBoundaryIs:function mEe(c,a){const l=Jn([],pEe,c,a);l.length>0&&a[a.length-1].push(...l)},outerBoundaryIs:function yEe(c,a){const l=Jn(void 0,gEe,c,a);l&&(a[a.length-1][0]=l)}});function aq(c,a){const l=Jn({},BE,c,a),h=Jn([null],Qxe,c,a);if(h&&h[0]){const d=h[0],f=[d.length];for(let g=1,y=h.length;g<y;++g)Pr(d,h[g]),f.push(d.length);const m=new Th(d,"XYZ",f);return m.setProperties(l,!0),m}}const eEe=Yt(pn,{IconStyle:function kxe(c,a){const l=Jn({},Fxe,c,a);if(!l)return;const h=a[a.length-1],d="Icon"in l?l.Icon:{},f=!("Icon"in l)||Object.keys(d).length>0;let m;const g=d.href;g?m=g:f&&(m=LE);let y,_,v,b="bottom-left";const S=l.hotSpot;let T;S?(y=[S.x,S.y],_=S.xunits,v=S.yunits,b=S.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(m)&&(m.includes("pushpin")?(y=YN,_=CS,v=xS):m.includes("arrow-reverse")?(y=[54,42],_=CS,v=xS):m.includes("paddle")&&(y=[32,1],_=CS,v=xS));const x=d.x,E=d.y;let I;void 0!==x&&void 0!==E&&(T=[x,E]);const M=d.w,D=d.h;let L;void 0!==M&&void 0!==D&&(I=[M,D]);const P=l.heading;void 0!==P&&(L=Rb(P));const B=l.color;if(f){m==LE&&(I=ES);const G=new Uy({anchor:y,anchorOrigin:b,anchorXUnits:_,anchorYUnits:v,crossOrigin:this.crossOrigin_,offset:T,offsetOrigin:"bottom-left",rotation:L,scale:l.scale,size:I,src:this.iconUrlFunction_(m),color:B}),$=G.getScaleArray()[0],se=G.getSize();if(null===se){const ie=G.getImageState();if(0===ie||1===ie){const j=function(){const J=G.getImageState();if(0!==J&&1!==J){const ae=G.getSize();if(ae&&2==ae.length){const ue=FE(ae);G.setScale($*ue)}G.unlistenImageChange(j)}};G.listenImageChange(j),0===ie&&G.load()}}else if(2==se.length){const ie=FE(se);G.setScale($*ie)}h.imageStyle=G}else h.imageStyle=ZN},LabelStyle:function Bxe(c,a){const l=Jn({},Vxe,c,a);if(!l)return;const h=a[a.length-1],d=new Xd({fill:new yr({color:"color"in l?l.color:m_}),scale:l.scale});h.textStyle=d},LineStyle:function zxe(c,a){const l=Jn({},Uxe,c,a);if(!l)return;const h=a[a.length-1],d=new _s({color:"color"in l?l.color:m_,width:"width"in l?l.width:1});h.strokeStyle=d},PolyStyle:function Hxe(c,a){const l=Jn({},Gxe,c,a);if(!l)return;const h=a[a.length-1],d=new yr({color:"color"in l?l.color:m_});h.fillStyle=d;const f=l.fill;void 0!==f&&(h.fill=f);const m=l.outline;void 0!==m&&(h.outline=m)}});function eF(c,a){const l=Jn({},eEe,c,a,this);if(!l)return null;let h="fillStyle"in l?l.fillStyle:wS;const d=l.fill;let f;void 0!==d&&!d&&(h=null),"imageStyle"in l?l.imageStyle!=ZN&&(f=l.imageStyle):f=PE;const m="textStyle"in l?l.textStyle:pf,g="strokeStyle"in l?l.strokeStyle:OE,y=l.outline;return void 0===y||y?[new er({fill:h,image:f,stroke:g,text:m,zIndex:void 0})]:[new er({geometry:function(_){const v=_.getGeometry(),b=v.getType();return"GeometryCollection"===b?new Jd(v.getGeometriesArrayRecursive().filter(function(T){const x=T.getType();return"Polygon"!==x&&"MultiPolygon"!==x})):"Polygon"!==b&&"MultiPolygon"!==b?v:void 0},fill:h,image:f,stroke:g,text:m,zIndex:void 0}),new er({geometry:function(_){const v=_.getGeometry(),b=v.getType();return"GeometryCollection"===b?new Jd(v.getGeometriesArrayRecursive().filter(function(T){const x=T.getType();return"Polygon"===x||"MultiPolygon"===x})):"Polygon"===b||"MultiPolygon"===b?v:void 0},fill:h,stroke:null,zIndex:void 0})]}function tF(c,a){const l=a.length,h=new Array(a.length),d=new Array(a.length),f=new Array(a.length);let m,g,y;m=!1,g=!1,y=!1;for(let _=0;_<l;++_){const v=a[_];h[_]=v.get("extrude"),d[_]=v.get("tessellate"),f[_]=v.get("altitudeMode"),m=m||void 0!==h[_],g=g||void 0!==d[_],y=y||f[_]}m&&c.set("extrude",h),g&&c.set("tessellate",d),y&&c.set("altitudeMode",f)}const tEe=Yt(pn,{displayName:nt(Hn),value:nt(Hn)}),iEe=Yt(pn,{Data:function nEe(c,a){const l=c.getAttribute("name");f_(tEe,c,a);const h=a[a.length-1];l&&h.displayName?h[l]={value:h.value,displayName:h.displayName,toString:function(){return h.value}}:null!==l?h[l]=h.value:null!==h.displayName&&(h[h.displayName]=h.value),delete h.value},SchemaData:function lEe(c,a){f_(aEe,c,a)}});function lq(c,a){f_(iEe,c,a)}function cq(c,a){f_($X,c,a)}const rEe=Yt(pn,{Style:nt(eF),key:nt(Hn),styleUrl:nt(JX)}),aEe=Yt(pn,{SimpleData:function cEe(c,a){const l=c.getAttribute("name");if(null!==l){const h=Hn(c);a[a.length-1][l]=h}}}),uEe=Yt(pn,{altitudeMode:nt(Hn),minAltitude:nt(Zr),maxAltitude:nt(Zr),north:nt(Zr),south:nt(Zr),east:nt(Zr),west:nt(Zr)}),dEe=Yt(pn,{minLodPixels:nt(Zr),maxLodPixels:nt(Zr),minFadeExtent:nt(Zr),maxFadeExtent:nt(Zr)}),pEe=Yt(pn,{LinearRing:Su(tq)}),gEe=Yt(pn,{LinearRing:qN(tq)});function UE(c,a){const l=Pb(a),d=[255*(4==l.length?l[3]:1),l[2],l[1],l[0]];for(let f=0;f<4;++f){const m=Math.floor(d[f]).toString(16);d[f]=1==m.length?"0"+m:m}Mc(c,d.join(""))}const zE=Yt(pn,{Data:Mn(function SEe(c,a,l){c.setAttribute("name",a.name);const h={node:c},d=a.value;"object"==typeof d?(null!==d&&d.displayName&&vs(h,zE,jl,[d.displayName],l,["displayName"]),null!==d&&d.value&&vs(h,zE,jl,[d.value],l,["value"])):vs(h,zE,jl,[d],l,["value"])}),value:Mn(function wEe(c,a){Mc(c,a)}),displayName:Mn(function TEe(c,a){!function Txe(c,a){c.appendChild(IE().createCDATASection(a))}(c,a)})}),CEe=Yt(pn,{Placemark:Mn(mq)}),xEe=function(c,a,l){return TS(a[a.length-1].node.namespaceURI,"Placemark")},MEe=Tu("Data"),uq=Yt(pn,["href"],Yt(Ph,["x","y","w","h"])),hq=Yt(pn,{href:Mn(Mc)},Yt(Ph,{x:Mn(gm),y:Mn(gm),w:Mn(gm),h:Mn(gm)})),AEe=function(c,a,l){return TS(Ph[0],"gx:"+l)},REe=Yt(pn,["scale","heading","Icon","color","hotSpot"]),LEe=Yt(pn,{Icon:Mn(function IEe(c,a,l){const h={node:c};let f=uq[l[l.length-1].node.namespaceURI],m=Ec(a,f);vs(h,hq,jl,m,l,f),f=uq[Ph[0]],m=Ec(a,f),vs(h,hq,AEe,m,l,f)}),color:Mn(UE),heading:Mn(gm),hotSpot:Mn(function sMe(c,a){c.setAttribute("x",String(a.x)),c.setAttribute("y",String(a.y)),c.setAttribute("xunits",a.xunits),c.setAttribute("yunits",a.yunits)}),scale:Mn(_q)}),OEe=Yt(pn,["color","scale"]),NEe=Yt(pn,{color:Mn(UE),scale:Mn(_q)}),kEe=Yt(pn,["color","width"]),VEe=Yt(pn,{color:Mn(UE),width:Mn(gm)}),UEe={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},dq=function(c,a,l){if(c)return TS(a[a.length-1].node.namespaceURI,UEe[c.getType()])},zEe=Tu("Point"),GEe=Tu("LineString"),HEe=Tu("LinearRing"),jEe=Tu("Polygon"),WEe=Yt(pn,{LineString:Mn(g_),Point:Mn(g_),Polygon:Mn(yq),GeometryCollection:Mn(fq)});function fq(c,a,l){const h={node:c},d=a.getType();let m,f=[];"GeometryCollection"===d?(a.getGeometriesArrayRecursive().forEach(function(g){const y=g.getType();"MultiPoint"===y?f=f.concat(g.getPoints()):"MultiLineString"===y?f=f.concat(g.getLineStrings()):"MultiPolygon"===y?f=f.concat(g.getPolygons()):"Point"===y||"LineString"===y||"Polygon"===y?f.push(g):En(!1,39)}),m=dq):"MultiPoint"===d?(f=a.getPoints(),m=zEe):"MultiLineString"===d?(f=a.getLineStrings(),m=GEe):"MultiPolygon"===d?(f=a.getPolygons(),m=jEe):En(!1,39),vs(h,WEe,m,f,l)}const XEe=Yt(pn,{LinearRing:Mn(g_)});function pq(c,a,l){vs({node:c},XEe,HEe,[a],l)}const nF=Yt(pn,{ExtendedData:Mn(function DEe(c,a,l){const h={node:c},d=a.names,f=a.values,m=d.length;for(let g=0;g<m;g++)vs(h,zE,MEe,[{name:d[g],value:f[g]}],l)}),MultiGeometry:Mn(fq),LineString:Mn(g_),LinearRing:Mn(g_),Point:Mn(g_),Polygon:Mn(yq),Style:Mn(function rMe(c,a,l){const h={node:c},d={};if(a.pointStyles.length){const y=a.pointStyles[0].getText();y&&(d.LabelStyle=y);const _=a.pointStyles[0].getImage();_&&"function"==typeof _.getSrc&&(d.IconStyle=_)}if(a.lineStyles.length){const y=a.lineStyles[0].getStroke();y&&(d.LineStyle=y)}if(a.polyStyles.length){const y=a.polyStyles[0].getStroke();y&&!d.LineStyle&&(d.LineStyle=y),d.PolyStyle=a.polyStyles[0]}const m=nMe[l[l.length-1].node.namespaceURI],g=Ec(d,m);vs(h,iMe,jl,g,l,m)}),address:Mn(Mc),description:Mn(Mc),name:Mn(Mc),open:Mn(p_),phoneNumber:Mn(Mc),styleUrl:Mn(Mc),visibility:Mn(p_)}),qEe=Yt(pn,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),$Ee=Tu("ExtendedData");function mq(c,a,l){const h={node:c};a.getId()&&c.setAttribute("id",a.getId());const d=a.getProperties(),f={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};f[a.getGeometryName()]=1;const m=Object.keys(d||{}).sort().filter(function(T){return!f[T]}),g=a.getStyleFunction();if(g){const T=g(a,0);if(T){const x=Array.isArray(T)?T:[T];let E=x;if(a.getGeometry()&&(E=x.filter(function(I){const M=I.getGeometryFunction()(a);if(M){const D=M.getType();return"GeometryCollection"===D?M.getGeometriesArrayRecursive().filter(function(L){const P=L.getType();return"Point"===P||"MultiPoint"===P}).length:"Point"===D||"MultiPoint"===D}})),this.writeStyles_){let I=x,M=x;a.getGeometry()&&(I=x.filter(function(D){const L=D.getGeometryFunction()(a);if(L){const P=L.getType();return"GeometryCollection"===P?L.getGeometriesArrayRecursive().filter(function(F){const B=F.getType();return"LineString"===B||"MultiLineString"===B}).length:"LineString"===P||"MultiLineString"===P}}),M=x.filter(function(D){const L=D.getGeometryFunction()(a);if(L){const P=L.getType();return"GeometryCollection"===P?L.getGeometriesArrayRecursive().filter(function(F){const B=F.getType();return"Polygon"===B||"MultiPolygon"===B}).length:"Polygon"===P||"MultiPolygon"===P}})),d.Style={pointStyles:E,lineStyles:I,polyStyles:M}}if(E.length&&void 0===d.name){const I=E[0].getText();I&&(d.name=I.getText())}}}const _=qEe[l[l.length-1].node.namespaceURI],v=Ec(d,_);if(vs(h,nF,jl,v,l,_),m.length>0){const T=Ec(d,m);vs(h,nF,$Ee,[{names:m,values:T}],l)}const b=l[0];let S=a.getGeometry();S&&(S=Jy(S,!0,b)),vs(h,nF,dq,[S],l)}const YEe=Yt(pn,["extrude","tessellate","altitudeMode","coordinates"]),ZEe=Yt(pn,{extrude:Mn(p_),tessellate:Mn(p_),altitudeMode:Mn(Mc),coordinates:Mn(function bEe(c,a,l){const h=l[l.length-1],d=h.layout,f=h.stride;let m;"XY"==d||"XYM"==d?m=2:"XYZ"==d||"XYZM"==d?m=3:En(!1,34);const g=a.length;let y="";if(g>0){y+=a[0];for(let _=1;_<m;++_)y+=","+a[_];for(let _=f;_<g;_+=f){y+=" "+a[_];for(let v=1;v<m;++v)y+=","+a[_+v]}}Mc(c,y)})});function g_(c,a,l){const h=a.getFlatCoordinates(),d={node:c};d.layout=a.getLayout(),d.stride=a.getStride();const f=a.getProperties();f.coordinates=h;const g=YEe[l[l.length-1].node.namespaceURI],y=Ec(f,g);vs(d,ZEe,jl,y,l,g)}const KEe=Yt(pn,["color","fill","outline"]),gq=Yt(pn,{outerBoundaryIs:Mn(pq),innerBoundaryIs:Mn(pq)}),JEe=Tu("innerBoundaryIs"),QEe=Tu("outerBoundaryIs");function yq(c,a,l){const h=a.getLinearRings(),d=h.shift(),f={node:c};vs(f,gq,JEe,h,l),vs(f,gq,QEe,[d],l)}const eMe=Yt(pn,{color:Mn(UE),fill:Mn(p_),outline:Mn(p_)});function _q(c,a){gm(c,Math.round(1e6*a)/1e6)}const nMe=Yt(pn,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),iMe=Yt(pn,{IconStyle:Mn(function PEe(c,a,l){const h={node:c},d={},f=a.getSrc(),m=a.getSize(),g=a.getImageSize(),y={href:f};if(m){y.w=m[0],y.h=m[1];const I=a.getAnchor(),M=a.getOrigin();M&&g&&0!==M[0]&&M[1]!==m[1]&&(y.x=M[0],y.y=g[1]-(M[1]+m[1])),!I||I[0]===m[0]/2&&I[1]===m[1]/2||(d.hotSpot={x:I[0],xunits:"pixels",y:m[1]-I[1],yunits:"pixels"})}d.Icon=y;let _=a.getScaleArray()[0],v=m;null===v&&(v=ES),2==v.length&&(_/=FE(v)),1!==_&&(d.scale=_);const b=a.getRotation();0!==b&&(d.heading=b);const S=a.getColor();S&&(d.color=S);const x=REe[l[l.length-1].node.namespaceURI],E=Ec(d,x);vs(h,LEe,jl,E,l,x)}),LabelStyle:Mn(function FEe(c,a,l){const h={node:c},d={},f=a.getFill();f&&(d.color=f.getColor());const m=a.getScale();m&&1!==m&&(d.scale=m);const y=OEe[l[l.length-1].node.namespaceURI],_=Ec(d,y);vs(h,NEe,jl,_,l,y)}),LineStyle:Mn(function BEe(c,a,l){const h={node:c},d={color:a.getColor(),width:Number(a.getWidth())||1},m=kEe[l[l.length-1].node.namespaceURI],g=Ec(d,m);vs(h,VEe,jl,g,l,m)}),PolyStyle:Mn(function tMe(c,a,l){const h={node:c},d=a.getFill(),f=a.getStroke(),m={color:d?d.getColor():void 0,fill:!!d&&void 0,outline:!!f&&void 0},y=KEe[l[l.length-1].node.namespaceURI],_=Ec(m,y);vs(h,eMe,jl,_,l,y)})}),GE=class Rxe extends Sxe{constructor(a){super(),a=a||{},NE||function Axe(){m_=[255,255,255,1],wS=new yr({color:m_}),YN=[20,2],CS="pixels",xS="pixels",ES=[64,64],LE="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",PE=new Uy({anchor:YN,anchorOrigin:"bottom-left",anchorXUnits:CS,anchorYUnits:xS,crossOrigin:"anonymous",rotation:0,scale:FE(ES),size:ES,src:LE}),ZN="NO_IMAGE",OE=new _s({color:m_,width:1}),KN=new _s({color:[51,51,51,1],width:2}),pf=new Xd({font:"bold 16px Helvetica",fill:wS,stroke:KN,scale:.8}),JN=new er({fill:wS,image:PE,text:pf,stroke:OE,zIndex:0}),NE=[JN]}(),this.dataProjection=dn("EPSG:4326"),this.defaultStyle_=a.defaultStyle?a.defaultStyle:NE,this.extractStyles_=void 0===a.extractStyles||a.extractStyles,this.writeStyles_=void 0===a.writeStyles||a.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===a.showPointNames||a.showPointNames,this.crossOrigin_=void 0!==a.crossOrigin?a.crossOrigin:"anonymous",this.iconUrlFunction_=a.iconUrlFunction?a.iconUrlFunction:Ixe,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(a,l){const d=Jn([],Yt(pn,{Document:WX(this.readDocumentOrFolder_,this),Folder:WX(this.readDocumentOrFolder_,this),Placemark:Su(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),a,l,this);if(d)return d}readPlacemark_(a,l){const h=Jn({geometry:null},Cxe,a,l,this);if(!h)return;const d=new Ky,f=a.getAttribute("id");null!==f&&d.setId(f);const g=h.geometry;if(g&&Jy(g,!1,l[0]),d.setGeometry(g),delete h.geometry,this.extractStyles_){const v=function Pxe(c,a,l,h,d){return function(f,m){let g=d,y="",_=[];if(g){const b=f.getGeometry();if(b)if(b instanceof Jd)_=b.getGeometriesArrayRecursive().filter(function(S){const T=S.getType();return"Point"===T||"MultiPoint"===T}),g=_.length>0;else{const S=b.getType();g="Point"===S||"MultiPoint"===S}}g&&(y=f.get("name"),g=g&&!!y,g&&/&[^&]+;/.test(y)&&(kE||(kE=document.createElement("textarea")),kE.innerHTML=y,y=kE.value));let v=l;if(c?v=c:a&&(v=YX(a,l,h)),g){const b=function Lxe(c,a){const l=[0,0];let h="start";const d=c.getImage();if(d){const g=d.getSize();if(g&&2==g.length){const y=d.getScaleArray(),_=d.getAnchor();l[0]=y[0]*(g[0]-_[0]),l[1]=y[1]*(g[1]/2-_[1]),h="left"}}let f=c.getText();return f?(f=f.clone(),f.setFont(f.getFont()||pf.getFont()),f.setScale(f.getScale()||pf.getScale()),f.setFill(f.getFill()||pf.getFill()),f.setStroke(f.getStroke()||KN)):f=pf.clone(),f.setText(a),f.setOffsetX(l[0]),f.setOffsetY(l[1]),f.setTextAlign(h),new er({image:d,text:f})}(v[0],y);return _.length>0?(b.setGeometry(new Jd(_)),[b,new er({geometry:v[0].getGeometry(),image:null,fill:v[0].getFill(),stroke:v[0].getStroke(),text:null})].concat(v.slice(1))):b}return v}}(h.Style,h.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);d.setStyle(v)}return delete h.Style,d.setProperties(h,!0),d}readSharedStyle_(a,l){const h=a.getAttribute("id");if(null!==h){const d=eF.call(this,a,l);if(d){let f,m=a.baseURI;(!m||"about:blank"==m)&&(m=window.location.href),f=m?new URL("#"+h,m).href:"#"+h,this.sharedStyles_[f]=d}}}readSharedStyleMap_(a,l){const h=a.getAttribute("id");if(null===h)return;const d=eq.call(this,a,l);if(!d)return;let f,m=a.baseURI;(!m||"about:blank"==m)&&(m=window.location.href),f=m?new URL("#"+h,m).href:"#"+h,this.sharedStyles_[f]=d}readFeatureFromNode(a,l){return pn.includes(a.namespaceURI)&&this.readPlacemark_(a,[this.getReadOptions(a,l)])||null}readFeaturesFromNode(a,l){if(!pn.includes(a.namespaceURI))return[];let h;const d=a.localName;if("Document"==d||"Folder"==d)return h=this.readDocumentOrFolder_(a,[this.getReadOptions(a,l)]),h||[];if("Placemark"==d){const f=this.readPlacemark_(a,[this.getReadOptions(a,l)]);return f?[f]:[]}if("kml"==d){h=[];for(let f=a.firstElementChild;f;f=f.nextElementSibling){const m=this.readFeaturesFromNode(f,l);m&&Pr(h,m)}return h}return[]}readName(a){if(a){if("string"==typeof a){const l=df(a);return this.readNameFromDocument(l)}return hf(a)?this.readNameFromDocument(a):this.readNameFromNode(a)}}readNameFromDocument(a){for(let l=a.firstChild;l;l=l.nextSibling)if(l.nodeType==Node.ELEMENT_NODE){const h=this.readNameFromNode(l);if(h)return h}}readNameFromNode(a){for(let l=a.firstElementChild;l;l=l.nextElementSibling)if(pn.includes(l.namespaceURI)&&"name"==l.localName)return Hn(l);for(let l=a.firstElementChild;l;l=l.nextElementSibling){const h=l.localName;if(pn.includes(l.namespaceURI)&&("Document"==h||"Folder"==h||"Placemark"==h||"kml"==h)){const d=this.readNameFromNode(l);if(d)return d}}}readNetworkLinks(a){const l=[];if("string"==typeof a){const h=df(a);Pr(l,this.readNetworkLinksFromDocument(h))}else hf(a)?Pr(l,this.readNetworkLinksFromDocument(a)):Pr(l,this.readNetworkLinksFromNode(a));return l}readNetworkLinksFromDocument(a){const l=[];for(let h=a.firstChild;h;h=h.nextSibling)h.nodeType==Node.ELEMENT_NODE&&Pr(l,this.readNetworkLinksFromNode(h));return l}readNetworkLinksFromNode(a){const l=[];for(let h=a.firstElementChild;h;h=h.nextElementSibling)if(pn.includes(h.namespaceURI)&&"NetworkLink"==h.localName){const d=Jn({},xxe,h,[]);l.push(d)}for(let h=a.firstElementChild;h;h=h.nextElementSibling){const d=h.localName;pn.includes(h.namespaceURI)&&("Document"==d||"Folder"==d||"kml"==d)&&Pr(l,this.readNetworkLinksFromNode(h))}return l}readRegion(a){const l=[];if("string"==typeof a){const h=df(a);Pr(l,this.readRegionFromDocument(h))}else hf(a)?Pr(l,this.readRegionFromDocument(a)):Pr(l,this.readRegionFromNode(a));return l}readRegionFromDocument(a){const l=[];for(let h=a.firstChild;h;h=h.nextSibling)h.nodeType==Node.ELEMENT_NODE&&Pr(l,this.readRegionFromNode(h));return l}readRegionFromNode(a){const l=[];for(let h=a.firstElementChild;h;h=h.nextElementSibling)if(pn.includes(h.namespaceURI)&&"Region"==h.localName){const d=Jn({},$X,h,[]);l.push(d)}for(let h=a.firstElementChild;h;h=h.nextElementSibling){const d=h.localName;pn.includes(h.namespaceURI)&&("Document"==d||"Folder"==d||"kml"==d)&&Pr(l,this.readRegionFromNode(h))}return l}writeFeaturesNode(a,l){l=this.adaptOptions(l);const h=TS(pn[4],"kml"),d="http://www.w3.org/2000/xmlns/";h.setAttributeNS(d,"xmlns:gx",Ph[0]),h.setAttributeNS(d,"xmlns:xsi",HX),h.setAttributeNS(HX,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");const f={node:h},m={};a.length>1?m.Document=a:1==a.length&&(m.Placemark=a[0]);const g=Mxe[h.namespaceURI],y=Ec(m,g);return vs(f,Dxe,jl,y,[l],g,this),h}};let HE=null;function iF(c){HE=c;const a=Object.keys(c.defs),l=a.length;let h,d;for(h=0;h<l;++h){const f=a[h];if(!dn(f)){const m=c.defs(f);let g=m.units;!g&&"longlat"===m.projName&&(g="degrees"),A7(new Fp({code:f,axisOrientation:m.axis,metersPerUnit:m.to_meter,units:g}))}}for(h=0;h<l;++h){const f=a[h],m=dn(f);for(d=0;d<l;++d){const g=a[d],y=dn(g);if(!v7(f,g))if(c.defs[f]===c.defs[g])UP([m,y]);else{const _=c(f,g);X0e(m,y,L7(m,y,_.forward),L7(y,m,_.inverse))}}}}var bq=.0066943799901413165,MS=484813681109536e-20,St=Math.PI/2,Ht=1e-10,wo=.017453292519943295,wu=57.29577951308232,tr=Math.PI/4,DS=2*Math.PI,bs=3.14159265359,La={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const dMe={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var Sq=/[\s_\-\/\(\)]/g;function mf(c,a){if(c[a])return c[a];for(var f,l=Object.keys(c),h=a.toLowerCase().replace(Sq,""),d=-1;++d<l.length;)if((f=l[d]).toLowerCase().replace(Sq,"")===h)return c[f]}function aF(c){var h,d,f,a={},l=c.split("+").map(function(g){return g.trim()}).filter(function(g){return g}).reduce(function(g,y){var _=y.split("=");return _.push(!0),g[_[0].toLowerCase()]=_[1],g},{}),m={proj:"projName",datum:"datumCode",rf:function(g){a.rf=parseFloat(g)},lat_0:function(g){a.lat0=g*wo},lat_1:function(g){a.lat1=g*wo},lat_2:function(g){a.lat2=g*wo},lat_ts:function(g){a.lat_ts=g*wo},lon_0:function(g){a.long0=g*wo},lon_1:function(g){a.long1=g*wo},lon_2:function(g){a.long2=g*wo},alpha:function(g){a.alpha=parseFloat(g)*wo},gamma:function(g){a.rectified_grid_angle=parseFloat(g)},lonc:function(g){a.longc=g*wo},x_0:function(g){a.x0=parseFloat(g)},y_0:function(g){a.y0=parseFloat(g)},k_0:function(g){a.k0=parseFloat(g)},k:function(g){a.k0=parseFloat(g)},a:function(g){a.a=parseFloat(g)},b:function(g){a.b=parseFloat(g)},r_a:function(){a.R_A=!0},zone:function(g){a.zone=parseInt(g,10)},south:function(){a.utmSouth=!0},towgs84:function(g){a.datum_params=g.split(",").map(function(y){return parseFloat(y)})},to_meter:function(g){a.to_meter=parseFloat(g)},units:function(g){a.units=g;var y=mf(dMe,g);y&&(a.to_meter=y.to_meter)},from_greenwich:function(g){a.from_greenwich=g*wo},pm:function(g){var y=mf(La,g);a.from_greenwich=(y||parseFloat(g))*wo},nadgrids:function(g){"@null"===g?a.datumCode="none":a.nadgrids=g},axis:function(g){var y="ewnsud";3===g.length&&-1!==y.indexOf(g.substr(0,1))&&-1!==y.indexOf(g.substr(1,1))&&-1!==y.indexOf(g.substr(2,1))&&(a.axis=g)},approx:function(){a.approx=!0}};for(h in l)d=l[h],h in m?"function"==typeof(f=m[h])?f(d):a[f]=d:a[h]=d;return"string"==typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a}var pMe=/\s/,mMe=/[A-Za-z]/,gMe=/[A-Za-z84_]/,WE=/[,\]]/,xq=/[\d\.E\-\+]/;function Oh(c){if("string"!=typeof c)throw new Error("not a string");this.text=c.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function Eq(c,a,l){Array.isArray(a)&&(l.unshift(a),a=null);var d=l.reduce(function(f,m){return __(m,f),f},a?{}:c);a&&(c[a]=d)}function __(c,a){if(Array.isArray(c)){var l=c.shift();if("PARAMETER"===l&&(l=c.shift()),1===c.length)return Array.isArray(c[0])?(a[l]={},void __(c[0],a[l])):void(a[l]=c[0]);if(c.length)if("TOWGS84"!==l){if("AXIS"===l)return l in a||(a[l]=[]),void a[l].push(c);var h;switch(Array.isArray(l)||(a[l]={}),l){case"UNIT":case"PRIMEM":case"VERT_DATUM":return a[l]={name:c[0].toLowerCase(),convert:c[1]},void(3===c.length&&__(c[2],a[l]));case"SPHEROID":case"ELLIPSOID":return a[l]={name:c[0],a:c[1],rf:c[2]},void(4===c.length&&__(c[3],a[l]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return c[0]=["name",c[0]],void Eq(a,l,c);default:for(h=-1;++h<c.length;)if(!Array.isArray(c[h]))return __(c,a[l]);return Eq(a,l,c)}}else a[l]=c;else a[l]=!0}else a[c]=!0}function Cu(c){return.017453292519943295*c}function Mq(c){var a=function yMe(c){return new Oh(c).output()}(c),l=a.shift(),h=a.shift();a.unshift(["name",h]),a.unshift(["type",l]);var d={};return __(a,d),function bMe(c){if("GEOGCS"===c.type?c.projName="longlat":"LOCAL_CS"===c.type?(c.projName="identity",c.local=!0):c.projName="object"==typeof c.PROJECTION?Object.keys(c.PROJECTION)[0]:c.PROJECTION,c.AXIS){for(var a="",l=0,h=c.AXIS.length;l<h;++l){var d=[c.AXIS[l][0].toLowerCase(),c.AXIS[l][1].toLowerCase()];-1!==d[0].indexOf("north")||("y"===d[0]||"lat"===d[0])&&"north"===d[1]?a+="n":-1!==d[0].indexOf("south")||("y"===d[0]||"lat"===d[0])&&"south"===d[1]?a+="s":-1!==d[0].indexOf("east")||("x"===d[0]||"lon"===d[0])&&"east"===d[1]?a+="e":(-1!==d[0].indexOf("west")||("x"===d[0]||"lon"===d[0])&&"west"===d[1])&&(a+="w")}2===a.length&&(a+="u"),3===a.length&&(c.axis=a)}c.UNIT&&(c.units=c.UNIT.name.toLowerCase(),"metre"===c.units&&(c.units="meter"),c.UNIT.convert&&("GEOGCS"===c.type?c.DATUM&&c.DATUM.SPHEROID&&(c.to_meter=c.UNIT.convert*c.DATUM.SPHEROID.a):c.to_meter=c.UNIT.convert));var f=c.GEOGCS;function m(_){return _*(c.to_meter||1)}"GEOGCS"===c.type&&(f=c),f&&(c.datumCode=f.DATUM?f.DATUM.name.toLowerCase():f.name.toLowerCase(),"d_"===c.datumCode.slice(0,2)&&(c.datumCode=c.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===c.datumCode||"new_zealand_1949"===c.datumCode)&&(c.datumCode="nzgd49"),("wgs_1984"===c.datumCode||"world_geodetic_system_1984"===c.datumCode)&&("Mercator_Auxiliary_Sphere"===c.PROJECTION&&(c.sphere=!0),c.datumCode="wgs84"),"_ferro"===c.datumCode.slice(-6)&&(c.datumCode=c.datumCode.slice(0,-6)),"_jakarta"===c.datumCode.slice(-8)&&(c.datumCode=c.datumCode.slice(0,-8)),~c.datumCode.indexOf("belge")&&(c.datumCode="rnb72"),f.DATUM&&f.DATUM.SPHEROID&&(c.ellps=f.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===c.ellps.toLowerCase().slice(0,13)&&(c.ellps="intl"),c.a=f.DATUM.SPHEROID.a,c.rf=parseFloat(f.DATUM.SPHEROID.rf,10)),f.DATUM&&f.DATUM.TOWGS84&&(c.datum_params=f.DATUM.TOWGS84),~c.datumCode.indexOf("osgb_1936")&&(c.datumCode="osgb36"),~c.datumCode.indexOf("osni_1952")&&(c.datumCode="osni52"),(~c.datumCode.indexOf("tm65")||~c.datumCode.indexOf("geodetic_datum_of_1965"))&&(c.datumCode="ire65"),"ch1903+"===c.datumCode&&(c.datumCode="ch1903"),~c.datumCode.indexOf("israel")&&(c.datumCode="isr93")),c.b&&!isFinite(c.b)&&(c.b=c.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Cu],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Cu],["x0","false_easting",m],["y0","false_northing",m],["long0","central_meridian",Cu],["lat0","latitude_of_origin",Cu],["lat0","standard_parallel_1",Cu],["lat1","standard_parallel_1",Cu],["lat2","standard_parallel_2",Cu],["azimuth","Azimuth"],["alpha","azimuth",Cu],["srsCode","name"]].forEach(function(_){return function vMe(c,a){var l=a[0],h=a[1];!(l in c)&&h in c&&(c[l]=c[h],3===a.length&&(c[l]=a[2](c[l])))}(c,_)}),!c.long0&&c.longc&&("Albers_Conic_Equal_Area"===c.projName||"Lambert_Azimuthal_Equal_Area"===c.projName)&&(c.long0=c.longc),c.lat_ts||!c.lat1||"Stereographic_South_Pole"!==c.projName&&"Polar Stereographic (variant B)"!==c.projName?!c.lat_ts&&c.lat0&&"Polar_Stereographic"===c.projName&&(c.lat_ts=c.lat0,c.lat0=Cu(c.lat0>0?90:-90)):(c.lat0=Cu(c.lat1>0?90:-90),c.lat_ts=c.lat1)}(d),d}function Wl(c){var a=this;if(2===arguments.length){var l=arguments[1];Wl[c]="string"==typeof l?"+"===l.charAt(0)?aF(arguments[1]):Mq(arguments[1]):l}else if(1===arguments.length){if(Array.isArray(c))return c.map(function(h){Array.isArray(h)?Wl.apply(a,h):Wl(h)});if("string"==typeof c){if(c in Wl)return Wl[c]}else"EPSG"in c?Wl["EPSG:"+c.EPSG]=c:"ESRI"in c?Wl["ESRI:"+c.ESRI]=c:"IAU2000"in c?Wl["IAU2000:"+c.IAU2000]=c:console.log(c);return}}Oh.prototype.readCharicter=function(){var c=this.text[this.place++];if(4!==this.state)for(;pMe.test(c);){if(this.place>=this.text.length)return;c=this.text[this.place++]}switch(this.state){case 1:return this.neutral(c);case 2:return this.keyword(c);case 4:return this.quoted(c);case 5:return this.afterquote(c);case 3:return this.number(c);case-1:return}},Oh.prototype.afterquote=function(c){if('"'===c)return this.word+='"',void(this.state=4);if(WE.test(c))return this.word=this.word.trim(),void this.afterItem(c);throw new Error("havn't handled \""+c+'" in afterquote yet, index '+this.place)},Oh.prototype.afterItem=function(c){return","===c?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===c?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Oh.prototype.number=function(c){if(!xq.test(c)){if(WE.test(c))return this.word=parseFloat(this.word),void this.afterItem(c);throw new Error("havn't handled \""+c+'" in number yet, index '+this.place)}this.word+=c},Oh.prototype.quoted=function(c){'"'!==c?this.word+=c:this.state=5},Oh.prototype.keyword=function(c){if(gMe.test(c))this.word+=c;else{if("["===c){var a=[];return a.push(this.word),this.level++,null===this.root?this.root=a:this.currentObject.push(a),this.stack.push(this.currentObject),this.currentObject=a,void(this.state=1)}if(!WE.test(c))throw new Error("havn't handled \""+c+'" in keyword yet, index '+this.place);this.afterItem(c)}},Oh.prototype.neutral=function(c){if(mMe.test(c))return this.word=c,void(this.state=2);if('"'===c)return this.word="",void(this.state=4);if(xq.test(c))return this.word=c,void(this.state=3);if(!WE.test(c))throw new Error("havn't handled \""+c+'" in neutral yet, index '+this.place);this.afterItem(c)},Oh.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function oMe(c){c("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),c("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),c("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),c.WGS84=c["EPSG:4326"],c["EPSG:3785"]=c["EPSG:3857"],c.GOOGLE=c["EPSG:3857"],c["EPSG:900913"]=c["EPSG:3857"],c["EPSG:102113"]=c["EPSG:3857"]}(Wl);const XE=Wl;var wMe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],xMe=["3857","900913","3785","102113"];function Dq(c,a){var l,h;if(c=c||{},!a)return c;for(h in a)void 0!==(l=a[h])&&(c[h]=l);return c}function xu(c,a,l){var h=c*a;return l/Math.sqrt(1-h*h)}function IS(c){return c<0?-1:1}function tn(c){return Math.abs(c)<=bs?c:c-IS(c)*DS}function Dc(c,a,l){var h=c*l;return h=Math.pow((1-h)/(1+h),.5*c),Math.tan(.5*(St-a))/h}function RS(c,a){for(var h,d,l=.5*c,f=St-2*Math.atan(a),m=0;m<=15;m++)if(h=c*Math.sin(f),f+=d=St-2*Math.atan(a*Math.pow((1-h)/(1+h),l))-f,Math.abs(d)<=1e-10)return f;return-9999}const NMe={init:function RMe(){var c=this.b/this.a;this.es=1-c*c,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):xu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function LMe(c){var h,d,a=c.x,l=c.y;if(l*wu>90&&l*wu<-90&&a*wu>180&&a*wu<-180)return null;if(Math.abs(Math.abs(l)-St)<=Ht)return null;if(this.sphere)h=this.x0+this.a*this.k0*tn(a-this.long0),d=this.y0+this.a*this.k0*Math.log(Math.tan(tr+.5*l));else{var f=Math.sin(l),m=Dc(this.e,l,f);h=this.x0+this.a*this.k0*tn(a-this.long0),d=this.y0-this.a*this.k0*Math.log(m)}return c.x=h,c.y=d,c},inverse:function PMe(c){var h,d,a=c.x-this.x0,l=c.y-this.y0;if(this.sphere)d=St-2*Math.atan(Math.exp(-l/(this.a*this.k0)));else{var f=Math.exp(-l/(this.a*this.k0));if(-9999===(d=RS(this.e,f)))return null}return h=tn(this.long0+a/(this.a*this.k0)),c.x=h,c.y=d,c},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function Aq(c){return c}var VMe=[NMe,{init:function FMe(){},forward:Aq,inverse:Aq,names:["longlat","identity"]}],qE={},$E=[];function Iq(c,a){var l=$E.length;return c.names?($E[l]=c,c.names.forEach(function(h){qE[h.toLowerCase()]=l}),this):(console.log(a),!0)}const zMe={start:function UMe(){VMe.forEach(Iq)},add:Iq,get:function BMe(c){if(!c)return!1;var a=c.toLowerCase();return typeof qE[a]<"u"&&$E[qE[a]]?$E[qE[a]]:void 0}};var Xn={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},GMe=Xn.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Xn.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var uo={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var Rq={};function YMe(c){if(0===c.length)return null;var a="@"===c[0];return a&&(c=c.slice(1)),"null"===c?{name:"null",mandatory:!a,grid:null,isNull:!0}:{name:c,mandatory:!a,grid:Rq[c]||null,isNull:!1}}function v_(c){return c/3600*Math.PI/180}function cF(c,a,l){return String.fromCharCode.apply(null,new Uint8Array(c.buffer.slice(a,l)))}function QMe(c){return c.map(function(a){return[v_(a.longitudeShift),v_(a.latitudeShift)]})}function eDe(c,a,l){return{name:cF(c,a+8,a+16).trim(),parent:cF(c,a+24,a+24+8).trim(),lowerLatitude:c.getFloat64(a+72,l),upperLatitude:c.getFloat64(a+88,l),lowerLongitude:c.getFloat64(a+104,l),upperLongitude:c.getFloat64(a+120,l),latitudeInterval:c.getFloat64(a+136,l),longitudeInterval:c.getFloat64(a+152,l),gridNodeCount:c.getInt32(a+168,l)}}function tDe(c,a,l,h){for(var d=a+176,m=[],g=0;g<l.gridNodeCount;g++){var y={latitudeShift:c.getFloat32(d+16*g,h),longitudeShift:c.getFloat32(d+16*g+4,h),latitudeAccuracy:c.getFloat32(d+16*g+8,h),longitudeAccuracy:c.getFloat32(d+16*g+12,h)};m.push(y)}return m}function b_(c,a){if(!(this instanceof b_))return new b_(c);a=a||function(_){if(_)throw _};var l=function AMe(c){if(!function SMe(c){return"string"==typeof c}(c))return c;if(function TMe(c){return c in XE}(c))return XE[c];if(function CMe(c){return wMe.some(function(a){return c.indexOf(a)>-1})}(c)){var a=Mq(c);if(function EMe(c){var a=mf(c,"authority");if(a){var l=mf(a,"epsg");return l&&xMe.indexOf(l)>-1}}(a))return XE["EPSG:3857"];var l=function MMe(c){var a=mf(c,"extension");if(a)return mf(a,"proj4")}(a);return l?aF(l):a}return function DMe(c){return"+"===c[0]}(c)?aF(c):void 0}(c);if("object"==typeof l){var h=b_.projections.get(l.projName);if(h){if(l.datumCode&&"none"!==l.datumCode){var d=mf(uo,l.datumCode);d&&(l.datum_params=l.datum_params||(d.towgs84?d.towgs84.split(","):null),l.ellps=d.ellipse,l.datumName=d.datumName?d.datumName:l.datumCode)}l.k0=l.k0||1,l.axis=l.axis||"enu",l.ellps=l.ellps||"wgs84",l.lat1=l.lat1||l.lat0;var f=function jMe(c,a,l,h,d){if(!c){var f=mf(Xn,h);f||(f=GMe),c=f.a,a=f.b,l=f.rf}return l&&!a&&(a=(1-1/l)*c),(0===l||Math.abs(c-a)<Ht)&&(d=!0,a=c),{a:c,b:a,rf:l,sphere:d}}(l.a,l.b,l.rf,l.ellps,l.sphere),m=function HMe(c,a,l,h){var d=c*c,f=a*a,m=(d-f)/d,g=0;return h?(d=(c*=1-m*(.16666666666666666+m*(.04722222222222222+.022156084656084655*m)))*c,m=0):g=Math.sqrt(m),{es:m,e:g,ep2:(d-f)/f}}(f.a,f.b,0,l.R_A),g=function $Me(c){return void 0===c?null:c.split(",").map(YMe)}(l.nadgrids),y=l.datum||function WMe(c,a,l,h,d,f,m){var g={};return g.datum_type=void 0===c||"none"===c?5:4,a&&(g.datum_params=a.map(parseFloat),(0!==g.datum_params[0]||0!==g.datum_params[1]||0!==g.datum_params[2])&&(g.datum_type=1),g.datum_params.length>3&&(0!==g.datum_params[3]||0!==g.datum_params[4]||0!==g.datum_params[5]||0!==g.datum_params[6])&&(g.datum_type=2,g.datum_params[3]*=MS,g.datum_params[4]*=MS,g.datum_params[5]*=MS,g.datum_params[6]=g.datum_params[6]/1e6+1)),m&&(g.datum_type=3,g.grids=m),g.a=l,g.b=h,g.es=d,g.ep2=f,g}(l.datumCode,l.datum_params,f.a,f.b,m.es,m.ep2,g);Dq(this,l),Dq(this,h),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=m.es,this.e=m.e,this.ep2=m.ep2,this.datum=y,this.init(),a(null,this)}else a(c)}else a(c)}(b_.projections=zMe).start();const LS=b_;function Lq(c,a,l){var m,g,_,h=c.x,d=c.y,f=c.z?c.z:0;if(d<-St&&d>-1.001*St)d=-St;else if(d>St&&d<1.001*St)d=St;else{if(d<-St)return{x:-1/0,y:-1/0,z:c.z};if(d>St)return{x:1/0,y:1/0,z:c.z}}return h>Math.PI&&(h-=2*Math.PI),g=Math.sin(d),_=Math.cos(d),{x:((m=l/Math.sqrt(1-a*(g*g)))+f)*_*Math.cos(h),y:(m+f)*_*Math.sin(h),z:(m*(1-a)+f)*g}}function Pq(c,a,l,h){var g,y,_,v,b,S,T,x,E,I,M,D,L,G,se,P=c.x,F=c.y,B=c.z?c.z:0;if(g=Math.sqrt(P*P+F*F),y=Math.sqrt(P*P+F*F+B*B),g/l<1e-12){if(G=0,y/l<1e-12)return se=-h,{x:c.x,y:c.y,z:c.z}}else G=Math.atan2(F,P);_=B/y,x=(v=g/y)*(1-a)*(b=1/Math.sqrt(1-a*(2-a)*v*v)),E=_*b,L=0;do{L++,S=a*(T=l/Math.sqrt(1-a*E*E))/(T+(se=g*x+B*E-T*(1-a*E*E))),D=(M=_*(b=1/Math.sqrt(1-S*(2-S)*v*v)))*x-(I=v*(1-S)*b)*E,x=I,E=M}while(D*D>1e-24&&L<30);return{x:G,y:Math.atan(M/Math.abs(I)),z:se}}function YE(c){return 1===c||2===c}function Oq(c,a,l){if(null===c.grids||0===c.grids.length)return console.log("Grid shift grids not found"),-1;for(var h={x:-l.x,y:l.y},d={x:Number.NaN,y:Number.NaN},m=[],g=0;g<c.grids.length;g++){var y=c.grids[g];if(m.push(y.name),y.isNull){d=h;break}if(null!==y.grid){var _=y.grid.subgrids[0],v=(Math.abs(_.del[1])+Math.abs(_.del[0]))/1e4;if(!(_.ll[1]-v>h.y||_.ll[0]-v>h.x||_.ll[1]+(_.lim[1]-1)*_.del[1]+v<h.y||_.ll[0]+(_.lim[0]-1)*_.del[0]+v<h.x||(d=oDe(h,a,_),isNaN(d.x))))break}else if(y.mandatory)return console.log("Unable to find mandatory grid '"+y.name+"'"),-1}return isNaN(d.x)?(console.log("Failed to find a grid shift table for location '"+-h.x*wu+" "+h.y*wu+" tried: '"+m+"'"),-1):(l.x=-d.x,l.y=d.y,0)}function oDe(c,a,l){var h={x:Number.NaN,y:Number.NaN};if(isNaN(c.x))return h;var d={x:c.x,y:c.y};d.x-=l.ll[0],d.y-=l.ll[1],d.x=tn(d.x-Math.PI)+Math.PI;var f=Nq(d,l);if(a){if(isNaN(f.x))return h;f.x=d.x-f.x,f.y=d.y-f.y;var y,_,m=9;do{if(_=Nq(f,l),isNaN(_.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}f.x+=(y={x:d.x-(_.x+f.x),y:d.y-(_.y+f.y)}).x,f.y+=y.y}while(m--&&Math.abs(y.x)>1e-12&&Math.abs(y.y)>1e-12);if(m<0)return console.log("Inverse grid shift iterator failed to converge."),h;h.x=tn(f.x+l.ll[0]),h.y=f.y+l.ll[1]}else isNaN(f.x)||(h.x=c.x+f.x,h.y=c.y+f.y);return h}function Nq(c,a){var m,l={x:c.x/a.del[0],y:c.y/a.del[1]},h_x=Math.floor(l.x),h_y=Math.floor(l.y),d_x=l.x-1*h_x,d_y=l.y-1*h_y,f={x:Number.NaN,y:Number.NaN};if(h_x<0||h_x>=a.lim[0]||h_y<0||h_y>=a.lim[1])return f;var g_x=a.cvs[m=h_y*a.lim[0]+h_x][0],g_y=a.cvs[m][1];m++;var y_x=a.cvs[m][0],y_y=a.cvs[m][1],__x=a.cvs[m+=a.lim[0]][0],__y=a.cvs[m][1];m--;var v_y=a.cvs[m][1],b=d_x*d_y,S=d_x*(1-d_y),T=(1-d_x)*(1-d_y),x=(1-d_x)*d_y;return f.x=T*g_x+S*y_x+x*a.cvs[m][0]+b*__x,f.y=T*g_y+S*y_y+x*v_y+b*__y,f}function Fq(c,a,l){var m,g,y,h=l.x,d=l.y,f=l.z||0,_={};for(y=0;y<3;y++)if(!a||2!==y||void 0!==l.z)switch(0===y?(m=h,g=-1!=="ew".indexOf(c.axis[y])?"x":"y"):1===y?(m=d,g=-1!=="ns".indexOf(c.axis[y])?"y":"x"):(m=f,g="z"),c.axis[y]){case"e":case"n":_[g]=m;break;case"w":case"s":_[g]=-m;break;case"u":void 0!==l[g]&&(_.z=m);break;case"d":void 0!==l[g]&&(_.z=-m);break;default:return null}return _}function kq(c){var a={x:c[0],y:c[1]};return c.length>2&&(a.z=c[2]),c.length>3&&(a.m=c[3]),a}function Vq(c){if("function"==typeof Number.isFinite){if(Number.isFinite(c))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof c||c!=c||!isFinite(c))throw new TypeError("coordinates must be finite numbers")}function ZE(c,a,l,h){var d,f=void 0!==(l=Array.isArray(l)?kq(l):{x:l.x,y:l.y,z:l.z,m:l.m}).z;if(function aDe(c){Vq(c.x),Vq(c.y)}(l),c.datum&&a.datum&&function lDe(c,a){return(1===c.datum.datum_type||2===c.datum.datum_type||3===c.datum.datum_type)&&"WGS84"!==a.datumCode||(1===a.datum.datum_type||2===a.datum.datum_type||3===a.datum.datum_type)&&"WGS84"!==c.datumCode}(c,a)&&(l=ZE(c,d=new LS("WGS84"),l,h),c=d),h&&"enu"!==c.axis&&(l=Fq(c,!1,l)),"longlat"===c.projName)l={x:l.x*wo,y:l.y*wo,z:l.z||0};else if(c.to_meter&&(l={x:l.x*c.to_meter,y:l.y*c.to_meter,z:l.z||0}),!(l=c.inverse(l)))return;if(c.from_greenwich&&(l.x+=c.from_greenwich),l=function sDe(c,a,l){if(function nDe(c,a){return!(c.datum_type!==a.datum_type||c.a!==a.a||Math.abs(c.es-a.es)>5e-11)&&(1===c.datum_type?c.datum_params[0]===a.datum_params[0]&&c.datum_params[1]===a.datum_params[1]&&c.datum_params[2]===a.datum_params[2]:2!==c.datum_type||c.datum_params[0]===a.datum_params[0]&&c.datum_params[1]===a.datum_params[1]&&c.datum_params[2]===a.datum_params[2]&&c.datum_params[3]===a.datum_params[3]&&c.datum_params[4]===a.datum_params[4]&&c.datum_params[5]===a.datum_params[5]&&c.datum_params[6]===a.datum_params[6])}(c,a)||5===c.datum_type||5===a.datum_type)return l;var h=c.a,d=c.es;if(3===c.datum_type){if(0!==Oq(c,!1,l))return;h=6378137,d=bq}var m=a.a,g=a.b,y=a.es;return 3===a.datum_type&&(m=6378137,g=6356752.314,y=bq),d!==y||h!==m||YE(c.datum_type)||YE(a.datum_type)?(l=Lq(l,d,h),YE(c.datum_type)&&(l=function iDe(c,a,l){if(1===a)return{x:c.x+l[0],y:c.y+l[1],z:c.z+l[2]};if(2===a){var m=l[3],g=l[4],y=l[5],_=l[6];return{x:_*(c.x-y*c.y+g*c.z)+l[0],y:_*(y*c.x+c.y-m*c.z)+l[1],z:_*(-g*c.x+m*c.y+c.z)+l[2]}}}(l,c.datum_type,c.datum_params)),YE(a.datum_type)&&(l=function rDe(c,a,l){if(1===a)return{x:c.x-l[0],y:c.y-l[1],z:c.z-l[2]};if(2===a){var m=l[3],g=l[4],y=l[5],_=l[6],v=(c.x-l[0])/_,b=(c.y-l[1])/_,S=(c.z-l[2])/_;return{x:v+y*b-g*S,y:-y*v+b+m*S,z:g*v-m*b+S}}}(l,a.datum_type,a.datum_params)),l=Pq(l,y,m,g),3!==a.datum_type||0===Oq(a,!0,l)?l:void 0):l}(c.datum,a.datum,l))return a.from_greenwich&&(l={x:l.x-a.from_greenwich,y:l.y,z:l.z||0}),"longlat"===a.projName?l={x:l.x*wu,y:l.y*wu,z:l.z||0}:(l=a.forward(l),a.to_meter&&(l={x:l.x/a.to_meter,y:l.y/a.to_meter,z:l.z||0})),h&&"enu"!==a.axis?Fq(a,!0,l):(f||delete l.z,l)}var Bq=LS("WGS84");function uF(c,a,l,h){var d,f,m;return Array.isArray(l)?(d=ZE(c,a,l,h)||{x:NaN,y:NaN},l.length>2?typeof c.name<"u"&&"geocent"===c.name||typeof a.name<"u"&&"geocent"===a.name?"number"==typeof d.z?[d.x,d.y,d.z].concat(l.splice(3)):[d.x,d.y,l[2]].concat(l.splice(3)):[d.x,d.y].concat(l.splice(2)):[d.x,d.y]):(f=ZE(c,a,l,h),2===(m=Object.keys(l)).length||m.forEach(function(g){if(typeof c.name<"u"&&"geocent"===c.name||typeof a.name<"u"&&"geocent"===a.name){if("x"===g||"y"===g||"z"===g)return}else if("x"===g||"y"===g)return;f[g]=l[g]}),f)}function Uq(c){return c instanceof LS?c:c.oProj?c.oProj:LS(c)}const ul=function cDe(c,a,l){c=Uq(c);var d,h=!1;return typeof a>"u"?(a=c,c=Bq,h=!0):(typeof a.x<"u"||Array.isArray(a))&&(l=a,a=c,c=Bq,h=!0),a=Uq(a),l?uF(c,a,l):(d={forward:function(f,m){return uF(c,a,f,m)},inverse:function(f,m){return uF(a,c,f,m)}},h&&(d.oProj=a),d)};const uDe={forward:jq,inverse:function hDe(c){var a=dF($q(c.toUpperCase()));return a.lat&&a.lon?[a.lon,a.lat,a.lon,a.lat]:[a.left,a.bottom,a.right,a.top]},toPoint:Wq};function jq(c,a){return a=a||5,function pDe(c,a){var l="00000"+c.easting,h="00000"+c.northing;return c.zoneNumber+c.zoneLetter+function mDe(c,a,l){var h=qq(l);return function gDe(c,a,l){var h=l-1,d="AJSAJS".charCodeAt(h),f="AFAFAF".charCodeAt(h),m=d+c-1,g=f+a,y=!1;return m>90&&(m=m-90+65-1,y=!0),(73===m||d<73&&m>73||(m>73||d<73)&&y)&&m++,(79===m||d<79&&m>79||(m>79||d<79)&&y)&&73==++m&&m++,m>90&&(m=m-90+65-1),g>86?(g=g-86+65-1,y=!0):y=!1,(73===g||f<73&&g>73||(g>73||f<73)&&y)&&g++,(79===g||f<79&&g>79||(g>79||f<79)&&y)&&73==++g&&g++,g>86&&(g=g-86+65-1),String.fromCharCode(m)+String.fromCharCode(g)}(Math.floor(c/1e5),Math.floor(a/1e5)%20,h)}(c.easting,c.northing,c.zoneNumber)+l.substr(l.length-5,a)+h.substr(h.length-5,a)}(function dDe(c){var g,y,_,v,b,E,I,a=c.lat,l=c.lon,h=6378137,d=.00669438,f=.9996,T=hF(a),x=hF(l);I=Math.floor((l+180)/6)+1,180===l&&(I=60),a>=56&&a<64&&l>=3&&l<12&&(I=32),a>=72&&a<84&&(l>=0&&l<9?I=31:l>=9&&l<21?I=33:l>=21&&l<33?I=35:l>=33&&l<42&&(I=37)),E=hF(6*(I-1)-180+3),g=d/(1-d),y=h/Math.sqrt(1-d*Math.sin(T)*Math.sin(T)),_=Math.tan(T)*Math.tan(T),v=g*Math.cos(T)*Math.cos(T);var M=f*y*((b=Math.cos(T)*(x-E))+(1-_+v)*b*b*b/6+(5-18*_+_*_+72*v-58*g)*b*b*b*b*b/120)+5e5,D=f*(h*(.9983242984503243*T-.002514607064228144*Math.sin(2*T)+2639046602129982e-21*Math.sin(4*T)-35*d*d*d/3072*Math.sin(6*T))+y*Math.tan(T)*(b*b/2+(5-_+9*v+4*v*v)*b*b*b*b/24+(61-58*_+_*_+600*v-330*g)*b*b*b*b*b*b/720));return a<0&&(D+=1e7),{northing:Math.round(D),easting:Math.round(M),zoneNumber:I,zoneLetter:fDe(a)}}({lat:c[1],lon:c[0]}),a)}function Wq(c){var a=dF($q(c.toUpperCase()));return a.lat&&a.lon?[a.lon,a.lat]:[(a.left+a.right)/2,(a.top+a.bottom)/2]}function hF(c){return c*(Math.PI/180)}function Xq(c){return c/Math.PI*180}function dF(c){var a=c.northing,l=c.easting,h=c.zoneLetter,d=c.zoneNumber;if(d<0||d>60)return null;var y,v,b,S,T,x,I,M,D,f=.9996,m=6378137,g=.00669438,_=(1-Math.sqrt(1-g))/(1+Math.sqrt(1-g)),L=l-5e5,P=a;h<"N"&&(P-=1e7),I=6*(d-1)-180+3,y=g/(1-g),D=(M=P/f/6367449.145945056)+(3*_/2-27*_*_*_/32)*Math.sin(2*M)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*M)+151*_*_*_/96*Math.sin(6*M),v=m/Math.sqrt(1-g*Math.sin(D)*Math.sin(D)),b=Math.tan(D)*Math.tan(D),S=y*Math.cos(D)*Math.cos(D),T=m*(1-g)/Math.pow(1-g*Math.sin(D)*Math.sin(D),1.5),x=L/(v*f);var F=D-v*Math.tan(D)/T*(x*x/2-(5+3*b+10*S-4*S*S-9*y)*x*x*x*x/24+(61+90*b+298*S+45*b*b-252*y-3*S*S)*x*x*x*x*x*x/720);F=Xq(F);var G,B=(x-(1+2*b+S)*x*x*x/6+(5-2*S+28*b-3*S*S+8*y+24*b*b)*x*x*x*x*x/120)/Math.cos(D);if(B=I+Xq(B),c.accuracy){var $=dF({northing:c.northing+c.accuracy,easting:c.easting+c.accuracy,zoneLetter:c.zoneLetter,zoneNumber:c.zoneNumber});G={top:$.lat,right:$.lon,bottom:F,left:B}}else G={lat:F,lon:B};return G}function fDe(c){var a="Z";return 84>=c&&c>=72?a="X":72>c&&c>=64?a="W":64>c&&c>=56?a="V":56>c&&c>=48?a="U":48>c&&c>=40?a="T":40>c&&c>=32?a="S":32>c&&c>=24?a="R":24>c&&c>=16?a="Q":16>c&&c>=8?a="P":8>c&&c>=0?a="N":0>c&&c>=-8?a="M":-8>c&&c>=-16?a="L":-16>c&&c>=-24?a="K":-24>c&&c>=-32?a="J":-32>c&&c>=-40?a="H":-40>c&&c>=-48?a="G":-48>c&&c>=-56?a="F":-56>c&&c>=-64?a="E":-64>c&&c>=-72?a="D":-72>c&&c>=-80&&(a="C"),a}function qq(c){var a=c%6;return 0===a&&(a=6),a}function $q(c){if(c&&0===c.length)throw"MGRSPoint coverting from nothing";for(var d,a=c.length,l=null,h="",f=0;!/[A-Z]/.test(d=c.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+c;h+=d,f++}var m=parseInt(h,10);if(0===f||f+3>a)throw"MGRSPoint bad conversion from: "+c;var g=c.charAt(f++);if(g<="A"||"B"===g||"Y"===g||g>="Z"||"I"===g||"O"===g)throw"MGRSPoint zone letter "+g+" not handled: "+c;l=c.substring(f,f+=2);for(var y=qq(m),_=function yDe(c,a){for(var l="AJSAJS".charCodeAt(a-1),h=1e5,d=!1;l!==c.charCodeAt(0);){if(73==++l&&l++,79===l&&l++,l>90){if(d)throw"Bad character: "+c;l=65,d=!0}h+=1e5}return h}(l.charAt(0),y),v=function _De(c,a){if(c>"V")throw"MGRSPoint given invalid Northing "+c;for(var l="AFAFAF".charCodeAt(a-1),h=0,d=!1;l!==c.charCodeAt(0);){if(73==++l&&l++,79===l&&l++,l>86){if(d)throw"Bad character: "+c;l=65,d=!0}h+=1e5}return h}(l.charAt(1),y);v<vDe(g);)v+=2e6;var b=a-f;if(b%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+c;var E,I,M,S=b/2,T=0,x=0;return S>0&&(E=1e5/Math.pow(10,S),I=c.substring(f,f+S),T=parseFloat(I)*E,M=c.substring(f+S),x=parseFloat(M)*E),{easting:T+_,northing:x+v,zoneLetter:g,zoneNumber:m,accuracy:E}}function vDe(c){var a;switch(c){case"C":a=11e5;break;case"D":a=2e6;break;case"E":a=28e5;break;case"F":a=37e5;break;case"G":a=46e5;break;case"H":a=55e5;break;case"J":a=64e5;break;case"K":a=73e5;break;case"L":a=82e5;break;case"M":a=91e5;break;case"N":a=0;break;case"P":a=8e5;break;case"Q":a=17e5;break;case"R":a=26e5;break;case"S":a=35e5;break;case"T":a=44e5;break;case"U":a=53e5;break;case"V":a=62e5;break;case"W":a=7e6;break;case"X":a=79e5;break;default:a=-1}if(a>=0)return a;throw"Invalid zone letter: "+c}function T_(c,a,l){if(!(this instanceof T_))return new T_(c,a,l);if(Array.isArray(c))this.x=c[0],this.y=c[1],this.z=c[2]||0;else if("object"==typeof c)this.x=c.x,this.y=c.y,this.z=c.z||0;else if("string"==typeof c&&typeof a>"u"){var h=c.split(",");this.x=parseFloat(h[0],10),this.y=parseFloat(h[1],10),this.z=parseFloat(h[2],10)||0}else this.x=c,this.y=a,this.z=l||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}T_.fromMGRS=function(c){return new T_(Wq(c))},T_.prototype.toMGRS=function(c){return jq([this.x,this.y],c)};const bDe=T_;var Zq=.01953125,Kq=.01068115234375;function Jq(c){var a=[];a[0]=1-c*(.25+c*(.046875+c*(Zq+c*Kq))),a[1]=c*(.75-c*(.046875+c*(Zq+c*Kq)));var l=c*c;return a[2]=l*(.46875-c*(.013020833333333334+.007120768229166667*c)),a[3]=(l*=c)*(.3645833333333333-.005696614583333333*c),a[4]=l*c*.3076171875,a}function KE(c,a,l,h){return h[0]*c-(l*=a)*(h[1]+(a*=a)*(h[2]+a*(h[3]+a*h[4])))}function Qq(c,a,l){for(var h=1/(1-a),d=c,f=20;f;--f){var m=Math.sin(d),g=1-a*m*m;if(d-=g=(KE(d,m,Math.cos(d),l)-c)*(g*Math.sqrt(g))*h,Math.abs(g)<Ht)return d}return d}const JE={init:function RDe(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Jq(this.es),this.ml0=KE(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function LDe(c){var d,f,m,l=c.y,h=tn(c.x-this.long0),g=Math.sin(l),y=Math.cos(l);if(this.es){var v=y*h,b=Math.pow(v,2),S=this.ep2*Math.pow(y,2),T=Math.pow(S,2),x=Math.abs(y)>Ht?Math.tan(l):0,E=Math.pow(x,2),I=Math.pow(E,2);d=1-this.es*Math.pow(g,2),v/=Math.sqrt(d);var M=KE(l,g,y,this.en);f=this.a*(this.k0*v*(1+b/6*(1-E+S+b/20*(5-18*E+I+14*S-58*E*S+b/42*(61+179*I-I*E-479*E)))))+this.x0,m=this.a*(this.k0*(M-this.ml0+g*h*v/2*(1+b/12*(5-E+9*S+4*T+b/30*(61+I-58*E+270*S-330*E*S+b/56*(1385+543*I-I*E-3111*E))))))+this.y0}else{var _=y*Math.sin(h);if(Math.abs(Math.abs(_)-1)<Ht)return 93;if(f=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,m=y*Math.cos(h)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(m))>=1){if(_-1>Ht)return 93;m=0}else m=Math.acos(m);l<0&&(m=-m),m=this.a*this.k0*(m-this.lat0)+this.y0}return c.x=f,c.y=m,c},inverse:function PDe(c){var a,l,h,d,f=1/this.a*(c.x-this.x0),m=1/this.a*(c.y-this.y0);if(this.es)if(l=Qq(a=this.ml0+m/this.k0,this.es,this.en),Math.abs(l)<St){var b=Math.sin(l),S=Math.cos(l),T=Math.abs(S)>Ht?Math.tan(l):0,x=this.ep2*Math.pow(S,2),E=Math.pow(x,2),I=Math.pow(T,2),M=Math.pow(I,2);a=1-this.es*Math.pow(b,2);var D=f*Math.sqrt(a)/this.k0,L=Math.pow(D,2);h=l-(a*=T)*L/(1-this.es)*.5*(1-L/12*(5+3*I-9*x*I+x-4*E-L/30*(61+90*I-252*x*I+45*M+46*x-L/56*(1385+3633*I+4095*M+1574*M*I)))),d=tn(this.long0+D*(1-L/6*(1+2*I+x-L/20*(5+28*I+24*M+8*x*I+6*x-L/42*(61+662*I+1320*M+720*M*I))))/S)}else h=St*IS(m),d=0;else{var g=Math.exp(f/this.k0),y=.5*(g-1/g),v=Math.cos(this.lat0+m/this.k0);a=Math.sqrt((1-Math.pow(v,2))/(1+Math.pow(y,2))),h=Math.asin(a),m<0&&(h=-h),d=0===y&&0===v?0:tn(Math.atan2(y,v)+this.long0)}return c.x=d,c.y=h,c},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function e$(c){var a=Math.exp(c);return(a-1/a)/2}function Ac(c,a){c=Math.abs(c),a=Math.abs(a);var l=Math.max(c,a),h=Math.min(c,a)/(l||1);return l*Math.sqrt(1+Math.pow(h,2))}function fF(c,a){for(var m,l=2*Math.cos(2*a),h=c.length-1,d=c[h],f=0;--h>=0;)m=l*d-f+c[h],f=d,d=m;return a+m*Math.sin(2*a)}function t$(c,a,l){for(var x,E,h=Math.sin(a),d=Math.cos(a),f=e$(l),m=function VDe(c){var a=Math.exp(c);return(a+1/a)/2}(l),g=2*d*m,y=-2*h*f,_=c.length-1,v=c[_],b=0,S=0,T=0;--_>=0;)x=S,E=b,v=g*(S=v)-x-y*(b=T)+c[_],T=y*S-E+g*b;return[(g=h*m)*v-(y=d*f)*T,g*T+y*v]}const QE={init:function BDe(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(JE.init.apply(this),this.forward=JE.forward,this.inverse=JE.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var c=this.es/(1+Math.sqrt(1-this.es)),a=c/(2-c),l=a;this.cgb[0]=a*(2+a*(-2/3+a*(a*(116/45+a*(26/45+a*(-2854/675)))-2))),this.cbg[0]=a*(a*(2/3+a*(4/3+a*(-82/45+a*(32/45+a*(4642/4725)))))-2),this.cgb[1]=(l*=a)*(7/3+a*(a*(-227/45+a*(2704/315+a*(2323/945)))-1.6)),this.cbg[1]=l*(5/3+a*(-16/15+a*(-13/9+a*(904/315+a*(-1522/945))))),this.cgb[2]=(l*=a)*(56/15+a*(-136/35+a*(-1262/105+a*(73814/2835)))),this.cbg[2]=l*(-26/15+a*(34/21+a*(1.6+a*(-12686/2835)))),this.cgb[3]=(l*=a)*(4279/630+a*(-332/35+a*(-399572/14175))),this.cbg[3]=l*(1237/630+a*(a*(-24832/14175)-2.4)),this.cgb[4]=(l*=a)*(4174/315+a*(-144838/6237)),this.cbg[4]=l*(-734/315+a*(109598/31185)),this.cgb[5]=(l*=a)*(601676/22275),this.cbg[5]=l*(444337/155925),l=Math.pow(a,2),this.Qn=this.k0/(1+a)*(1+l*(1/4+l*(1/64+l/256))),this.utg[0]=a*(a*(2/3+a*(-37/96+a*(1/360+a*(81/512+a*(-96199/604800)))))-.5),this.gtu[0]=a*(.5+a*(-2/3+a*(5/16+a*(41/180+a*(-127/288+a*(7891/37800)))))),this.utg[1]=l*(-1/48+a*(-1/15+a*(437/1440+a*(-46/105+a*(1118711/3870720))))),this.gtu[1]=l*(13/48+a*(a*(557/1440+a*(281/630+a*(-1983433/1935360)))-.6)),this.utg[2]=(l*=a)*(-17/480+a*(37/840+a*(209/4480+a*(-5569/90720)))),this.gtu[2]=l*(61/240+a*(-103/140+a*(15061/26880+a*(167603/181440)))),this.utg[3]=(l*=a)*(-4397/161280+a*(11/504+a*(830251/7257600))),this.gtu[3]=l*(49561/161280+a*(-179/168+a*(6601661/7257600))),this.utg[4]=(l*=a)*(-4583/161280+a*(108847/3991680)),this.gtu[4]=l*(34729/80640+a*(-3418889/1995840)),this.utg[5]=(l*=a)*(-20648693/638668800),this.gtu[5]=.6650675310896665*l;var h=fF(this.cbg,this.lat0);this.Zb=-this.Qn*(h+function kDe(c,a){for(var m,l=2*Math.cos(a),h=c.length-1,d=c[h],f=0;--h>=0;)m=l*d-f+c[h],f=d,d=m;return Math.sin(a)*m}(this.gtu,2*h))},forward:function UDe(c){var a=tn(c.x-this.long0),l=c.y;l=fF(this.cbg,l);var h=Math.sin(l),d=Math.cos(l),f=Math.sin(a),m=Math.cos(a);l=Math.atan2(h,m*d),a=Math.atan2(f*d,Ac(h,d*m)),a=function FDe(c){var a=Math.abs(c);return a=function NDe(c){var a=1+c,l=a-1;return 0===l?c:c*Math.log(a)/l}(a*(1+a/(Ac(1,a)+1))),c<0?-a:a}(Math.tan(a));var y,_,g=t$(this.gtu,2*l,2*a);return l+=g[0],a+=g[1],Math.abs(a)<=2.623395162778?(y=this.a*(this.Qn*a)+this.x0,_=this.a*(this.Qn*l+this.Zb)+this.y0):(y=1/0,_=1/0),c.x=y,c.y=_,c},inverse:function zDe(c){var h,d,a=1/this.a*(c.x-this.x0),l=1/this.a*(c.y-this.y0);if(l=(l-this.Zb)/this.Qn,a/=this.Qn,Math.abs(a)<=2.623395162778){var f=t$(this.utg,2*l,2*a);l+=f[0],a+=f[1],a=Math.atan(e$(a));var m=Math.sin(l),g=Math.cos(l),y=Math.sin(a),_=Math.cos(a);l=Math.atan2(m*_,Ac(y,_*g)),h=tn((a=Math.atan2(y,_*g))+this.long0),d=fF(this.cgb,l)}else h=1/0,d=1/0;return c.x=h,c.y=d,c},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},qDe={init:function WDe(){var c=function HDe(c,a){if(void 0===c){if((c=Math.floor(30*(tn(a)+Math.PI)/Math.PI)+1)<0)return 0;if(c>60)return 60}return c}(this.zone,this.long0);if(void 0===c)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(c)-183)*wo,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,QE.init.apply(this),this.forward=QE.forward,this.inverse=QE.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function pF(c,a){return Math.pow((1-c)/(1+c),a)}const mF={init:function YDe(){var c=Math.sin(this.lat0),a=Math.cos(this.lat0);a*=a,this.rc=Math.sqrt(1-this.es)/(1-this.es*c*c),this.C=Math.sqrt(1+this.es*a*a/(1-this.es)),this.phic0=Math.asin(c/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+tr)/(Math.pow(Math.tan(.5*this.lat0+tr),this.C)*pF(this.e*c,this.ratexp))},forward:function ZDe(c){var a=c.x,l=c.y;return c.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*l+tr),this.C)*pF(this.e*Math.sin(l),this.ratexp))-St,c.x=this.C*a,c},inverse:function KDe(c){for(var l=c.x/this.C,h=c.y,d=Math.pow(Math.tan(.5*h+tr)/this.K,1/this.C),f=20;f>0&&(h=2*Math.atan(d*pF(this.e*Math.sin(c.y),-.5*this.e))-St,!(Math.abs(h-c.y)<1e-14));--f)c.y=h;return f?(c.x=l,c.y=h,c):null},names:["gauss"]},iAe={init:function QDe(){mF.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function eAe(c){var a,l,h,d;return c.x=tn(c.x-this.long0),mF.forward.apply(this,[c]),a=Math.sin(c.y),l=Math.cos(c.y),h=Math.cos(c.x),c.x=(d=this.k0*this.R2/(1+this.sinc0*a+this.cosc0*l*h))*l*Math.sin(c.x),c.y=d*(this.cosc0*a-this.sinc0*l*h),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function tAe(c){var a,l,h,d,f;if(c.x=(c.x-this.x0)/this.a,c.y=(c.y-this.y0)/this.a,c.x/=this.k0,c.y/=this.k0,f=Math.sqrt(c.x*c.x+c.y*c.y)){var m=2*Math.atan2(f,this.R2);a=Math.sin(m),l=Math.cos(m),d=Math.asin(l*this.sinc0+c.y*a*this.cosc0/f),h=Math.atan2(c.x*a,f*this.cosc0*l-c.y*this.sinc0*a)}else d=this.phic0,h=0;return c.x=h,c.y=d,mF.inverse.apply(this,[c]),c.x=tn(c.x+this.long0),c},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},cAe={init:function sAe(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ht&&(this.k0=.5*(1+IS(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ht&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ht&&(this.k0=.5*this.cons*xu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Dc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=xu(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-St,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function oAe(c){var f,m,g,y,_,v,a=c.x,l=c.y,h=Math.sin(l),d=Math.cos(l),b=tn(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=Ht&&Math.abs(l+this.lat0)<=Ht?(c.x=NaN,c.y=NaN,c):this.sphere?(f=2*this.k0/(1+this.sinlat0*h+this.coslat0*d*Math.cos(b)),c.x=this.a*f*d*Math.sin(b)+this.x0,c.y=this.a*f*(this.coslat0*h-this.sinlat0*d*Math.cos(b))+this.y0,c):(m=2*Math.atan(this.ssfn_(l,h,this.e))-St,y=Math.cos(m),g=Math.sin(m),Math.abs(this.coslat0)<=Ht?(_=Dc(this.e,l*this.con,this.con*h),c.x=this.x0+(v=2*this.a*this.k0*_/this.cons)*Math.sin(a-this.long0),c.y=this.y0-this.con*v*Math.cos(a-this.long0),c):(Math.abs(this.sinlat0)<Ht?(f=2*this.a*this.k0/(1+y*Math.cos(b)),c.y=f*g):(f=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*g+this.cosX0*y*Math.cos(b))),c.y=f*(this.cosX0*g-this.sinX0*y*Math.cos(b))+this.y0),c.x=f*y*Math.sin(b)+this.x0,c))},inverse:function aAe(c){c.x-=this.x0,c.y-=this.y0;var a,l,d,f,m=Math.sqrt(c.x*c.x+c.y*c.y);if(this.sphere){var g=2*Math.atan(m/(2*this.a*this.k0));return a=this.long0,l=this.lat0,m<=Ht?(c.x=a,c.y=l,c):(l=Math.asin(Math.cos(g)*this.sinlat0+c.y*Math.sin(g)*this.coslat0/m),a=Math.abs(this.coslat0)<Ht?tn(this.lat0>0?this.long0+Math.atan2(c.x,-1*c.y):this.long0+Math.atan2(c.x,c.y)):tn(this.long0+Math.atan2(c.x*Math.sin(g),m*this.coslat0*Math.cos(g)-c.y*this.sinlat0*Math.sin(g))),c.x=a,c.y=l,c)}if(Math.abs(this.coslat0)<=Ht){if(m<=Ht)return l=this.lat0,c.x=a=this.long0,c.y=l,c;c.x*=this.con,c.y*=this.con,l=this.con*RS(this.e,m*this.cons/(2*this.a*this.k0)),a=this.con*tn(this.con*this.long0+Math.atan2(c.x,-1*c.y))}else d=2*Math.atan(m*this.cosX0/(2*this.a*this.k0*this.ms1)),a=this.long0,m<=Ht?f=this.X0:(f=Math.asin(Math.cos(d)*this.sinX0+c.y*Math.sin(d)*this.cosX0/m),a=tn(this.long0+Math.atan2(c.x*Math.sin(d),m*this.cosX0*Math.cos(d)-c.y*this.sinX0*Math.sin(d)))),l=-1*RS(this.e,Math.tan(.5*(St+f)));return c.x=a,c.y=l,c},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function rAe(c,a,l){return a*=l,Math.tan(.5*(St+c))*Math.pow((1-a)/(1+a),.5*l)}},pAe={init:function uAe(){var c=this.lat0;this.lambda0=this.long0;var a=Math.sin(c),l=this.a,d=1/this.rf,f=2*d-Math.pow(d,2),m=this.e=Math.sqrt(f);this.R=this.k0*l*Math.sqrt(1-f)/(1-f*Math.pow(a,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(c),4)),this.b0=Math.asin(a/this.alpha);var g=Math.log(Math.tan(Math.PI/4+this.b0/2)),y=Math.log(Math.tan(Math.PI/4+c/2)),_=Math.log((1+m*a)/(1-m*a));this.K=g-this.alpha*y+this.alpha*m/2*_},forward:function hAe(c){var a=Math.log(Math.tan(Math.PI/4-c.y/2)),l=this.e/2*Math.log((1+this.e*Math.sin(c.y))/(1-this.e*Math.sin(c.y))),d=2*(Math.atan(Math.exp(-this.alpha*(a+l)+this.K))-Math.PI/4),f=this.alpha*(c.x-this.lambda0),m=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(d)+Math.cos(this.b0)*Math.cos(f))),g=Math.asin(Math.cos(this.b0)*Math.sin(d)-Math.sin(this.b0)*Math.cos(d)*Math.cos(f));return c.y=this.R/2*Math.log((1+Math.sin(g))/(1-Math.sin(g)))+this.y0,c.x=this.R*m+this.x0,c},inverse:function dAe(c){for(var h=(c.x-this.x0)/this.R,d=2*(Math.atan(Math.exp((c.y-this.y0)/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(d)+Math.sin(this.b0)*Math.cos(d)*Math.cos(h)),m=Math.atan(Math.sin(h)/(Math.cos(this.b0)*Math.cos(h)-Math.sin(this.b0)*Math.tan(d))),g=this.lambda0+m/this.alpha,y=0,_=f,v=-1e3,b=0;Math.abs(_-v)>1e-7;){if(++b>20)return;y=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(_))/2)),v=_,_=2*Math.atan(Math.exp(y))-Math.PI/2}return c.x=g,c.y=_,c},names:["somerc"]};var w_=1e-7;const bAe={init:function gAe(){var c,a,l,h,d,f,m,g,y,_,b,v=0,S=0,T=0,x=0,E=0,I=0,M=0;this.no_off=function mAe(c){var l="object"==typeof c.PROJECTION?Object.keys(c.PROJECTION)[0]:c.PROJECTION;return"no_uoff"in c||"no_off"in c||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(l)}(this),this.no_rot="no_rot"in this;var L=!1;"alpha"in this&&(L=!0);var P=!1;if("rectified_grid_angle"in this&&(P=!0),L&&(M=this.alpha),P&&(v=this.rectified_grid_angle*wo),L||P)S=this.longc;else if(T=this.long1,E=this.lat1,x=this.long2,I=this.lat2,Math.abs(E-I)<=w_||(c=Math.abs(E))<=w_||Math.abs(c-St)<=w_||Math.abs(Math.abs(this.lat0)-St)<=w_||Math.abs(Math.abs(I)-St)<=w_)throw new Error;var F=1-this.es;a=Math.sqrt(F),Math.abs(this.lat0)>Ht?(g=Math.sin(this.lat0),l=Math.cos(this.lat0),c=1-this.es*g*g,this.B=l*l,this.B=Math.sqrt(1+this.es*this.B*this.B/F),this.A=this.B*this.k0*a/c,(d=(h=this.B*a/(l*Math.sqrt(c)))*h-1)<=0?d=0:(d=Math.sqrt(d),this.lat0<0&&(d=-d)),this.E=d+=h,this.E*=Math.pow(Dc(this.e,this.lat0,g),this.B)):(this.B=1/a,this.A=this.k0,this.E=h=d=1),L||P?(L?(b=Math.asin(Math.sin(M)/h),P||(v=M)):(b=v,M=Math.asin(h*Math.sin(b))),this.lam0=S-Math.asin(.5*(d-1/d)*Math.tan(b))/this.B):(f=Math.pow(Dc(this.e,E,Math.sin(E)),this.B),m=Math.pow(Dc(this.e,I,Math.sin(I)),this.B),d=this.E/f,y=(m-f)/(m+f),_=((_=this.E*this.E)-m*f)/(_+m*f),(c=T-x)<-Math.pi?x-=DS:c>Math.pi&&(x+=DS),this.lam0=tn(.5*(T+x)-Math.atan(_*Math.tan(.5*this.B*(T-x))/y)/this.B),b=Math.atan(2*Math.sin(this.B*tn(T-this.lam0))/(d-1/d)),v=M=Math.asin(h*Math.sin(b))),this.singam=Math.sin(b),this.cosgam=Math.cos(b),this.sinrot=Math.sin(v),this.cosrot=Math.cos(v),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(h*h-1)/Math.cos(M))),this.lat0<0&&(this.u_0=-this.u_0)),d=.5*b,this.v_pole_n=this.ArB*Math.log(Math.tan(tr-d)),this.v_pole_s=this.ArB*Math.log(Math.tan(tr+d))},forward:function yAe(c){var l,h,d,f,m,g,y,_,a={};if(c.x=c.x-this.lam0,Math.abs(Math.abs(c.y)-St)>Ht){if(l=.5*((m=this.E/Math.pow(Dc(this.e,c.y,Math.sin(c.y)),this.B))-(g=1/m)),h=.5*(m+g),f=Math.sin(this.B*c.x),d=(l*this.singam-f*this.cosgam)/h,Math.abs(Math.abs(d)-1)<Ht)throw new Error;_=.5*this.ArB*Math.log((1-d)/(1+d)),g=Math.cos(this.B*c.x),y=Math.abs(g)<w_?this.A*c.x:this.ArB*Math.atan2(l*this.cosgam+f*this.singam,g)}else _=c.y>0?this.v_pole_n:this.v_pole_s,y=this.ArB*c.y;return this.no_rot?(a.x=y,a.y=_):(a.x=_*this.cosrot+(y-=this.u_0)*this.sinrot,a.y=y*this.cosrot-_*this.sinrot),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a},inverse:function _Ae(c){var a,l,h,d,f,m,g,y={};if(c.x=1/this.a*(c.x-this.x0),c.y=1/this.a*(c.y-this.y0),this.no_rot?(l=c.y,a=c.x):(l=c.x*this.cosrot-c.y*this.sinrot,a=c.y*this.cosrot+c.x*this.sinrot+this.u_0),d=.5*((h=Math.exp(-this.BrA*l))-1/h),f=.5*(h+1/h),g=((m=Math.sin(this.BrA*a))*this.cosgam+d*this.singam)/f,Math.abs(Math.abs(g)-1)<Ht)y.x=0,y.y=g<0?-St:St;else{if(y.y=this.E/Math.sqrt((1+g)/(1-g)),y.y=RS(this.e,Math.pow(y.y,1/this.B)),y.y===1/0)throw new Error;y.x=-this.rB*Math.atan2(d*this.cosgam-m*this.singam,Math.cos(this.BrA*a))}return y.x+=this.lam0,y},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},xAe={init:function SAe(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ht)){var c=this.b/this.a;this.e=Math.sqrt(1-c*c);var a=Math.sin(this.lat1),l=Math.cos(this.lat1),h=xu(this.e,a,l),d=Dc(this.e,this.lat1,a),f=Math.sin(this.lat2),m=Math.cos(this.lat2),g=xu(this.e,f,m),y=Dc(this.e,this.lat2,f),_=Dc(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>Ht?Math.log(h/g)/Math.log(d/y):a,isNaN(this.ns)&&(this.ns=a),this.f0=h/(this.ns*Math.pow(d,this.ns)),this.rh=this.a*this.f0*Math.pow(_,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function TAe(c){var a=c.x,l=c.y;Math.abs(2*Math.abs(l)-Math.PI)<=Ht&&(l=IS(l)*(St-2*Ht));var d,f,h=Math.abs(Math.abs(l)-St);if(h>Ht)d=Dc(this.e,l,Math.sin(l)),f=this.a*this.f0*Math.pow(d,this.ns);else{if((h=l*this.ns)<=0)return null;f=0}var m=this.ns*tn(a-this.long0);return c.x=this.k0*(f*Math.sin(m))+this.x0,c.y=this.k0*(this.rh-f*Math.cos(m))+this.y0,c},inverse:function wAe(c){var a,l,h,d,f,m=(c.x-this.x0)/this.k0,g=this.rh-(c.y-this.y0)/this.k0;this.ns>0?(a=Math.sqrt(m*m+g*g),l=1):(a=-Math.sqrt(m*m+g*g),l=-1);var y=0;if(0!==a&&(y=Math.atan2(l*m,l*g)),0!==a||this.ns>0){if(l=1/this.ns,h=Math.pow(a/(this.a*this.f0),l),-9999===(d=RS(this.e,h)))return null}else d=-St;return f=tn(y/this.ns+this.long0),c.x=f,c.y=d,c},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},IAe={init:function EAe(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function MAe(c){var a,l,h,d,f,m,g,_=c.y,v=tn(c.x-this.long0);return a=Math.pow((1+this.e*Math.sin(_))/(1-this.e*Math.sin(_)),this.alfa*this.e/2),l=2*(Math.atan(this.k*Math.pow(Math.tan(_/2+this.s45),this.alfa)/a)-this.s45),h=-v*this.alfa,d=Math.asin(Math.cos(this.ad)*Math.sin(l)+Math.sin(this.ad)*Math.cos(l)*Math.cos(h)),f=Math.asin(Math.cos(l)*Math.sin(h)/Math.cos(d)),m=this.n*f,g=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(d/2+this.s45),this.n),c.y=g*Math.cos(m)/1,c.x=g*Math.sin(m)/1,this.czech||(c.y*=-1,c.x*=-1),c},inverse:function DAe(c){var a,l,h,d,m,g,y,_=c.x;c.x=c.y,c.y=_,this.czech||(c.y*=-1,c.x*=-1),m=Math.sqrt(c.x*c.x+c.y*c.y),d=Math.atan2(c.y,c.x)/Math.sin(this.s0),h=2*(Math.atan(Math.pow(this.ro0/m,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),a=Math.asin(Math.cos(this.ad)*Math.sin(h)-Math.sin(this.ad)*Math.cos(h)*Math.cos(d)),l=Math.asin(Math.cos(h)*Math.sin(d)/Math.cos(a)),c.x=this.long0-l/this.alfa,g=a,y=0;var v=0;do{c.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(a/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(g))/(1-this.e*Math.sin(g)),this.e/2))-this.s45),Math.abs(g-c.y)<1e-10&&(y=1),g=c.y,v+=1}while(0===y&&v<15);return v>=15?null:c},names:["Krovak","krovak"]};function ha(c,a,l,h,d){return c*d-a*Math.sin(2*d)+l*Math.sin(4*d)-h*Math.sin(6*d)}function NS(c){return 1-.25*c*(1+c/16*(3+1.25*c))}function FS(c){return.375*c*(1+.25*c*(1+.46875*c))}function kS(c){return.05859375*c*c*(1+.75*c)}function VS(c){return c*c*c*(35/3072)}function C_(c,a,l){var h=a*l;return c/Math.sqrt(1-h*h)}function x_(c){return Math.abs(c)<St?c:c-IS(c)*Math.PI}function eM(c,a,l,h,d){var f,m;f=c/a;for(var g=0;g<15;g++)if(f+=m=(c-(a*f-l*Math.sin(2*f)+h*Math.sin(4*f)-d*Math.sin(6*f)))/(a-2*l*Math.cos(2*f)+4*h*Math.cos(4*f)-6*d*Math.cos(6*f)),Math.abs(m)<=1e-10)return f;return NaN}const NAe={init:function RAe(){this.sphere||(this.e0=NS(this.es),this.e1=FS(this.es),this.e2=kS(this.es),this.e3=VS(this.es),this.ml0=this.a*ha(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function LAe(c){var a,l,h=c.x,d=c.y;if(h=tn(h-this.long0),this.sphere)a=this.a*Math.asin(Math.cos(d)*Math.sin(h)),l=this.a*(Math.atan2(Math.tan(d),Math.cos(h))-this.lat0);else{var f=Math.sin(d),m=Math.cos(d),g=C_(this.a,this.e,f),y=Math.tan(d)*Math.tan(d),_=h*Math.cos(d),v=_*_,b=this.es*m*m/(1-this.es);a=g*_*(1-v*y*(1/6-(8-y+8*b)*v/120)),l=this.a*ha(this.e0,this.e1,this.e2,this.e3,d)-this.ml0+g*f/m*v*(.5+(5-y+6*b)*v/24)}return c.x=a+this.x0,c.y=l+this.y0,c},inverse:function PAe(c){c.x-=this.x0,c.y-=this.y0;var h,d,a=c.x/this.a,l=c.y/this.a;if(this.sphere){var f=l+this.lat0;h=Math.asin(Math.sin(f)*Math.cos(a)),d=Math.atan2(Math.tan(a),Math.cos(f))}else{var g=eM(this.ml0/this.a+l,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(g)-St)<=Ht)return c.x=this.long0,c.y=St,l<0&&(c.y*=-1),c;var y=C_(this.a,this.e,Math.sin(g)),_=y*y*y/this.a/this.a*(1-this.es),v=Math.pow(Math.tan(g),2),b=a*this.a/y,S=b*b;h=g-y*Math.tan(g)/_*b*b*(.5-(1+3*v)*b*b/24),d=b*(1-S*(v/3+(1+3*v)*v*S/15))/Math.cos(g)}return c.x=tn(d+this.long0),c.y=x_(h),c},names:["Cassini","Cassini_Soldner","cass"]};function gf(c,a){var l;return c>1e-7?(1-c*c)*(a/(1-(l=c*a)*l)-.5/c*Math.log((1-l)/(1+l))):2*a}const JAe={init:function UAe(){var a,c=Math.abs(this.lat0);if(this.mode=Math.abs(c-St)<Ht?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(c)<Ht?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=gf(this.e,1),this.mmf=.5/(1-this.es),this.apa=function YAe(c){var a,l=[];return l[0]=.3333333333333333*c,l[0]+=.17222222222222222*(a=c*c),l[1]=.06388888888888888*a,l[0]+=.10257936507936508*(a*=c),l[1]+=.0664021164021164*a,l[2]=.016415012942191543*a,l}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),a=Math.sin(this.lat0),this.sinb1=gf(this.e,a)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*a*a)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function zAe(c){var a,l,h,d,f,m,g,y,_,v,b=c.x,S=c.y;if(b=tn(b-this.long0),this.sphere){if(f=Math.sin(S),v=Math.cos(S),h=Math.cos(b),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((l=this.mode===this.EQUIT?1+v*h:1+this.sinph0*f+this.cosph0*v*h)<=Ht)return null;a=(l=Math.sqrt(2/l))*v*Math.sin(b),l*=this.mode===this.EQUIT?f:this.cosph0*f-this.sinph0*v*h}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),Math.abs(S+this.lat0)<Ht)return null;l=tr-.5*S,a=(l=2*(this.mode===this.S_POLE?Math.cos(l):Math.sin(l)))*Math.sin(b),l*=h}}else{switch(g=0,y=0,_=0,h=Math.cos(b),d=Math.sin(b),f=Math.sin(S),m=gf(this.e,f),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=m/this.qp,y=Math.sqrt(1-g*g)),this.mode){case this.OBLIQ:_=1+this.sinb1*g+this.cosb1*y*h;break;case this.EQUIT:_=1+y*h;break;case this.N_POLE:_=St+S,m=this.qp-m;break;case this.S_POLE:_=S-St,m=this.qp+m}if(Math.abs(_)<Ht)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:_=Math.sqrt(2/_),l=this.mode===this.OBLIQ?this.ymf*_*(this.cosb1*g-this.sinb1*y*h):(_=Math.sqrt(2/(1+y*h)))*g*this.ymf,a=this.xmf*_*y*d;break;case this.N_POLE:case this.S_POLE:m>=0?(a=(_=Math.sqrt(m))*d,l=h*(this.mode===this.S_POLE?_:-_)):a=l=0}}return c.x=this.a*a+this.x0,c.y=this.a*l+this.y0,c},inverse:function GAe(c){c.x-=this.x0,c.y-=this.y0;var h,d,f,m,g,y,_,a=c.x/this.a,l=c.y/this.a;if(this.sphere){var b,v=0,S=0;if((d=.5*(b=Math.sqrt(a*a+l*l)))>1)return null;switch(d=2*Math.asin(d),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(S=Math.sin(d),v=Math.cos(d)),this.mode){case this.EQUIT:d=Math.abs(b)<=Ht?0:Math.asin(l*S/b),a*=S,l=v*b;break;case this.OBLIQ:d=Math.abs(b)<=Ht?this.lat0:Math.asin(v*this.sinph0+l*S*this.cosph0/b),a*=S*this.cosph0,l=(v-Math.sin(d)*this.sinph0)*b;break;case this.N_POLE:l=-l,d=St-d;break;case this.S_POLE:d-=St}h=0!==l||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(a,l):0}else{if(_=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(a/=this.dd,l*=this.dd,(y=Math.sqrt(a*a+l*l))<Ht)return c.x=this.long0,c.y=this.lat0,c;m=2*Math.asin(.5*y/this.rq),f=Math.cos(m),a*=m=Math.sin(m),this.mode===this.OBLIQ?(g=this.qp*(_=f*this.sinb1+l*m*this.cosb1/y),l=y*this.cosb1*f-l*this.sinb1*m):(g=this.qp*(_=l*m/y),l=y*f)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(l=-l),!(g=a*a+l*l))return c.x=this.long0,c.y=this.lat0,c;_=1-g/this.qp,this.mode===this.S_POLE&&(_=-_)}h=Math.atan2(a,l),d=function ZAe(c,a){var l=c+c;return c+a[0]*Math.sin(l)+a[1]*Math.sin(l+l)+a[2]*Math.sin(l+l+l)}(Math.asin(_),this.apa)}return c.x=tn(this.long0+h),c.y=d,c},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function yf(c){return Math.abs(c)>1&&(c=c>1?1:-1),Math.asin(c)}const rIe={init:function QAe(){Math.abs(this.lat1+this.lat2)<Ht||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=xu(this.e3,this.sin_po,this.cos_po),this.qs1=gf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=xu(this.e3,this.sin_po,this.cos_po),this.qs2=gf(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=gf(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>Ht?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function eIe(c){var a=c.x,l=c.y;this.sin_phi=Math.sin(l),this.cos_phi=Math.cos(l);var h=gf(this.e3,this.sin_phi),d=this.a*Math.sqrt(this.c-this.ns0*h)/this.ns0,f=this.ns0*tn(a-this.long0),m=d*Math.sin(f)+this.x0,g=this.rh-d*Math.cos(f)+this.y0;return c.x=m,c.y=g,c},inverse:function tIe(c){var a,h,d,f,m;return c.x-=this.x0,c.y=this.rh-c.y+this.y0,this.ns0>=0?(a=Math.sqrt(c.x*c.x+c.y*c.y),h=1):(a=-Math.sqrt(c.x*c.x+c.y*c.y),h=-1),d=0,0!==a&&(d=Math.atan2(h*c.x,h*c.y)),h=a*this.ns0/this.a,m=this.sphere?Math.asin((this.c-h*h)/(2*this.ns0)):this.phi1z(this.e3,(this.c-h*h)/this.ns0),f=tn(d/this.ns0+this.long0),c.x=f,c.y=m,c},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function nIe(c,a){var l,d,f,m,g=yf(.5*a);if(c<Ht)return g;for(var y=c*c,_=1;_<=25;_++)if(g+=m=.5*(f=1-(d=c*(l=Math.sin(g)))*d)*f/Math.cos(g)*(a/(1-y)-l/f+.5/c*Math.log((1-d)/(1+d))),Math.abs(m)<=1e-7)return g;return null}},cIe={init:function sIe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function oIe(c){var a,l,h,d,m,g,y,v=c.y;return h=tn(c.x-this.long0),a=Math.sin(v),l=Math.cos(v),d=Math.cos(h),(m=this.sin_p14*a+this.cos_p14*l*d)>0||Math.abs(m)<=Ht?(g=this.x0+1*this.a*l*Math.sin(h)/m,y=this.y0+1*this.a*(this.cos_p14*a-this.sin_p14*l*d)/m):(g=this.x0+this.infinity_dist*l*Math.sin(h),y=this.y0+this.infinity_dist*(this.cos_p14*a-this.sin_p14*l*d)),c.x=g,c.y=y,c},inverse:function aIe(c){var a,l,h,d,f,m;return c.x=(c.x-this.x0)/this.a,c.y=(c.y-this.y0)/this.a,c.x/=this.k0,c.y/=this.k0,(a=Math.sqrt(c.x*c.x+c.y*c.y))?(d=Math.atan2(a,this.rc),l=Math.sin(d),m=yf((h=Math.cos(d))*this.sin_p14+c.y*l*this.cos_p14/a),f=Math.atan2(c.x*l,a*this.cos_p14*h-c.y*this.sin_p14*l),f=tn(this.long0+f)):(m=this.phic0,f=0),c.x=f,c.y=m,c},names:["gnom"]},mIe={init:function hIe(){this.sphere||(this.k0=xu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function dIe(c){var h,d,l=c.y,f=tn(c.x-this.long0);if(this.sphere)h=this.x0+this.a*f*Math.cos(this.lat_ts),d=this.y0+this.a*Math.sin(l)/Math.cos(this.lat_ts);else{var m=gf(this.e,Math.sin(l));h=this.x0+this.a*this.k0*f,d=this.y0+this.a*m*.5/this.k0}return c.x=h,c.y=d,c},inverse:function fIe(c){var a,l;return c.x-=this.x0,c.y-=this.y0,this.sphere?(a=tn(this.long0+c.x/this.a/Math.cos(this.lat_ts)),l=Math.asin(c.y/this.a*Math.cos(this.lat_ts))):(l=function uIe(c,a){var l=1-(1-c*c)/(2*c)*Math.log((1-c)/(1+c));if(Math.abs(Math.abs(a)-l)<1e-6)return a<0?-1*St:St;for(var d,f,m,g,h=Math.asin(.5*a),y=0;y<30;y++)if(f=Math.sin(h),m=Math.cos(h),g=c*f,h+=d=Math.pow(1-g*g,2)/(2*m)*(a/(1-c*c)-f/(1-g*g)+.5/c*Math.log((1-g)/(1+g))),Math.abs(d)<=1e-10)return h;return NaN}(this.e,2*c.y*this.k0/this.a),a=tn(this.long0+c.x/(this.a*this.k0))),c.x=a,c.y=l,c},names:["cea"]},bIe={init:function gIe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function yIe(c){var l=c.y,h=tn(c.x-this.long0),d=x_(l-this.lat0);return c.x=this.x0+this.a*h*this.rc,c.y=this.y0+this.a*d,c},inverse:function _Ie(c){var l=c.y;return c.x=tn(this.long0+(c.x-this.x0)/(this.a*this.rc)),c.y=x_(this.lat0+(l-this.y0)/this.a),c},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},xIe={init:function SIe(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=NS(this.es),this.e1=FS(this.es),this.e2=kS(this.es),this.e3=VS(this.es),this.ml0=this.a*ha(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function TIe(c){var h,d,f,l=c.y,m=tn(c.x-this.long0);if(f=m*Math.sin(l),this.sphere)Math.abs(l)<=Ht?(h=this.a*m,d=-1*this.a*this.lat0):(h=this.a*Math.sin(f)/Math.tan(l),d=this.a*(x_(l-this.lat0)+(1-Math.cos(f))/Math.tan(l)));else if(Math.abs(l)<=Ht)h=this.a*m,d=-1*this.ml0;else{var g=C_(this.a,this.e,Math.sin(l))/Math.tan(l);h=g*Math.sin(f),d=this.a*ha(this.e0,this.e1,this.e2,this.e3,l)-this.ml0+g*(1-Math.cos(f))}return c.x=h+this.x0,c.y=d+this.y0,c},inverse:function wIe(c){var a,l,h,d,f,m,g,y,_;if(h=c.x-this.x0,d=c.y-this.y0,this.sphere)if(Math.abs(d+this.a*this.lat0)<=Ht)a=tn(h/this.a+this.long0),l=0;else{var v;for(g=h*h/this.a/this.a+(m=this.lat0+d/this.a)*m,y=m,f=20;f;--f)if(y+=_=-1*(m*(y*(v=Math.tan(y))+1)-y-.5*(y*y+g)*v)/((y-m)/v-1),Math.abs(_)<=Ht){l=y;break}a=tn(this.long0+Math.asin(h*Math.tan(y)/this.a)/Math.sin(l))}else if(Math.abs(d+this.ml0)<=Ht)l=0,a=tn(this.long0+h/this.a);else{var b,S,T,x,E;for(g=h*h/this.a/this.a+(m=(this.ml0+d)/this.a)*m,y=m,f=20;f;--f)if(E=this.e*Math.sin(y),b=Math.sqrt(1-E*E)*Math.tan(y),S=this.a*ha(this.e0,this.e1,this.e2,this.e3,y),T=this.e0-2*this.e1*Math.cos(2*y)+4*this.e2*Math.cos(4*y)-6*this.e3*Math.cos(6*y),y-=_=(m*(b*(x=S/this.a)+1)-x-.5*b*(x*x+g))/(this.es*Math.sin(2*y)*(x*x+g-2*m*x)/(4*b)+(m-x)*(b*T-2/Math.sin(2*y))-T),Math.abs(_)<=Ht){l=y;break}b=Math.sqrt(1-this.es*Math.pow(Math.sin(l),2))*Math.tan(l),a=tn(this.long0+Math.asin(h*b/this.a)/Math.sin(l))}return c.x=a,c.y=l,c},names:["Polyconic","poly"]},IIe={init:function EIe(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function MIe(c){var a,m=(c.y-this.lat0)/MS*1e-5,g=c.x-this.long0,y=1,_=0;for(a=1;a<=10;a++)_+=this.A[a]*(y*=m);var E,v=_,b=g,S=1,T=0,I=0,M=0;for(a=1;a<=6;a++)E=T*v+S*b,I=I+this.B_re[a]*(S=S*v-T*b)-this.B_im[a]*(T=E),M=M+this.B_im[a]*S+this.B_re[a]*T;return c.x=M*this.a+this.x0,c.y=I*this.a+this.y0,c},inverse:function DIe(c){var a,b,m=(c.y-this.y0)/this.a,g=(c.x-this.x0)/this.a,y=1,_=0,S=0,T=0;for(a=1;a<=6;a++)b=_*m+y*g,S=S+this.C_re[a]*(y=y*m-_*g)-this.C_im[a]*(_=b),T=T+this.C_im[a]*y+this.C_re[a]*_;for(var x=0;x<this.iterations;x++){var D,E=S,I=T,L=m,P=g;for(a=2;a<=6;a++)D=I*S+E*T,L+=(a-1)*(this.B_re[a]*(E=E*S-I*T)-this.B_im[a]*(I=D)),P+=(a-1)*(this.B_im[a]*E+this.B_re[a]*I);E=1,I=0;var F=this.B_re[1],B=this.B_im[1];for(a=2;a<=6;a++)D=I*S+E*T,F+=a*(this.B_re[a]*(E=E*S-I*T)-this.B_im[a]*(I=D)),B+=a*(this.B_im[a]*E+this.B_re[a]*I);var G=F*F+B*B;S=(L*F+P*B)/G,T=(P*F-L*B)/G}var $=S,se=T,ie=1,j=0;for(a=1;a<=9;a++)j+=this.D[a]*(ie*=$);var J=this.lat0+j*MS*1e5;return c.x=this.long0+se,c.y=J,c},names:["New_Zealand_Map_Grid","nzmg"]},NIe={init:function RIe(){},forward:function LIe(c){var l=c.y,h=tn(c.x-this.long0),d=this.x0+this.a*h,f=this.y0+this.a*Math.log(Math.tan(Math.PI/4+l/2.5))*1.25;return c.x=d,c.y=f,c},inverse:function PIe(c){c.x-=this.x0,c.y-=this.y0;var a=tn(this.long0+c.x/this.a),l=2.5*(Math.atan(Math.exp(.8*c.y/this.a))-Math.PI/4);return c.x=a,c.y=l,c},names:["Miller_Cylindrical","mill"]},zIe={init:function kIe(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Jq(this.es)},forward:function VIe(c){var a,l,h=c.x,d=c.y;if(h=tn(h-this.long0),this.sphere){if(this.m)for(var f=this.n*Math.sin(d),m=20;m;--m){var g=(this.m*d+Math.sin(d)-f)/(this.m+Math.cos(d));if(d-=g,Math.abs(g)<Ht)break}else d=1!==this.n?Math.asin(this.n*Math.sin(d)):d;a=this.a*this.C_x*h*(this.m+Math.cos(d)),l=this.a*this.C_y*d}else{var y=Math.sin(d),_=Math.cos(d);l=this.a*KE(d,y,_,this.en),a=this.a*h*_/Math.sqrt(1-this.es*y*y)}return c.x=a,c.y=l,c},inverse:function BIe(c){var a,h,d;return c.x-=this.x0,h=c.x/this.a,c.y-=this.y0,a=c.y/this.a,this.sphere?(a/=this.C_y,h/=this.C_x*(this.m+Math.cos(a)),this.m?a=yf((this.m*a+Math.sin(a))/this.n):1!==this.n&&(a=yf(Math.sin(a)/this.n)),h=tn(h+this.long0),a=x_(a)):(a=Qq(c.y/this.a,this.es,this.en),(d=Math.abs(a))<St?(d=Math.sin(a),h=tn(this.long0+c.x*Math.sqrt(1-this.es*d*d)/(this.a*Math.cos(a)))):d-Ht<St&&(h=this.long0)),c.x=h,c.y=a,c},names:["Sinusoidal","sinu"]},XIe={init:function GIe(){},forward:function HIe(c){for(var l=c.y,h=tn(c.x-this.long0),d=l,f=Math.PI*Math.sin(l);;){var m=-(d+Math.sin(d)-f)/(1+Math.cos(d));if(d+=m,Math.abs(m)<Ht)break}d/=2,Math.PI/2-Math.abs(l)<Ht&&(h=0);var g=.900316316158*this.a*h*Math.cos(d)+this.x0,y=1.4142135623731*this.a*Math.sin(d)+this.y0;return c.x=g,c.y=y,c},inverse:function jIe(c){var a,l;c.x-=this.x0,c.y-=this.y0,l=c.y/(1.4142135623731*this.a),Math.abs(l)>.999999999999&&(l=.999999999999),a=Math.asin(l);var h=tn(this.long0+c.x/(.900316316158*this.a*Math.cos(a)));h<-Math.PI&&(h=-Math.PI),h>Math.PI&&(h=Math.PI),l=(2*a+Math.sin(2*a))/Math.PI,Math.abs(l)>1&&(l=1);var d=Math.asin(l);return c.x=h,c.y=d,c},names:["Mollweide","moll"]},KIe={init:function qIe(){Math.abs(this.lat1+this.lat2)<Ht||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=NS(this.es),this.e1=FS(this.es),this.e2=kS(this.es),this.e3=VS(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=xu(this.e,this.sinphi,this.cosphi),this.ml1=ha(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ht?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=xu(this.e,this.sinphi,this.cosphi),this.ml2=ha(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ha(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function $Ie(c){var h,a=c.x,l=c.y;if(this.sphere)h=this.a*(this.g-l);else{var d=ha(this.e0,this.e1,this.e2,this.e3,l);h=this.a*(this.g-d)}var f=this.ns*tn(a-this.long0),m=this.x0+h*Math.sin(f),g=this.y0+this.rh-h*Math.cos(f);return c.x=m,c.y=g,c},inverse:function YIe(c){var a,l,h,d;c.x-=this.x0,c.y=this.rh-c.y+this.y0,this.ns>=0?(l=Math.sqrt(c.x*c.x+c.y*c.y),a=1):(l=-Math.sqrt(c.x*c.x+c.y*c.y),a=-1);var f=0;return 0!==l&&(f=Math.atan2(a*c.x,a*c.y)),this.sphere?(d=tn(this.long0+f/this.ns),h=x_(this.g-l/this.a),c.x=d,c.y=h,c):(h=eM(this.g-l/this.a,this.e0,this.e1,this.e2,this.e3),d=tn(this.long0+f/this.ns),c.x=d,c.y=h,c)},names:["Equidistant_Conic","eqdc"]},nRe={init:function JIe(){this.R=this.a},forward:function QIe(c){var d,f,l=c.y,h=tn(c.x-this.long0);Math.abs(l)<=Ht&&(d=this.x0+this.R*h,f=this.y0);var m=yf(2*Math.abs(l/Math.PI));(Math.abs(h)<=Ht||Math.abs(Math.abs(l)-St)<=Ht)&&(d=this.x0,f=l>=0?this.y0+Math.PI*this.R*Math.tan(.5*m):this.y0+Math.PI*this.R*-Math.tan(.5*m));var g=.5*Math.abs(Math.PI/h-h/Math.PI),y=g*g,_=Math.sin(m),v=Math.cos(m),b=v/(_+v-1),T=b*(2/_-1),x=T*T,E=Math.PI*this.R*(g*(b-x)+Math.sqrt(y*(b-x)*(b-x)-(x+y)*(b*b-x)))/(x+y);h<0&&(E=-E),d=this.x0+E;var I=y+b;return E=Math.PI*this.R*(T*I-g*Math.sqrt((x+y)*(y+1)-I*I))/(x+y),f=l>=0?this.y0+E:this.y0-E,c.x=d,c.y=f,c},inverse:function eRe(c){var a,l,h,d,f,m,g,y,_,v,b,S;return c.x-=this.x0,c.y-=this.y0,b=Math.PI*this.R,f=(h=c.x/b)*h+(d=c.y/b)*d,b=3*(d*d/(y=-2*(m=-Math.abs(d)*(1+f))+1+2*d*d+f*f)+(2*(g=m-2*d*d+h*h)*g*g/y/y/y-9*m*g/y/y)/27)/(_=(m-g*g/3/y)/y)/(v=2*Math.sqrt(-_/3)),Math.abs(b)>1&&(b=b>=0?1:-1),S=Math.acos(b)/3,l=c.y>=0?(-v*Math.cos(S+Math.PI/3)-g/3/y)*Math.PI:-(-v*Math.cos(S+Math.PI/3)-g/3/y)*Math.PI,a=Math.abs(h)<Ht?this.long0:tn(this.long0+Math.PI*(f-1+Math.sqrt(1+2*(h*h-d*d)+f*f))/2/h),c.x=a,c.y=l,c},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},aRe={init:function iRe(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function rRe(c){var m,g,y,_,v,b,S,T,x,E,I,M,D,L,P,F,B,G,$,se,ie,j,a=c.x,l=c.y,h=Math.sin(c.y),d=Math.cos(c.y),f=tn(a-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Ht?(c.x=this.x0+this.a*(St-l)*Math.sin(f),c.y=this.y0-this.a*(St-l)*Math.cos(f),c):Math.abs(this.sin_p12+1)<=Ht?(c.x=this.x0+this.a*(St+l)*Math.sin(f),c.y=this.y0+this.a*(St+l)*Math.cos(f),c):(G=this.sin_p12*h+this.cos_p12*d*Math.cos(f),B=(F=Math.acos(G))?F/Math.sin(F):1,c.x=this.x0+this.a*B*d*Math.sin(f),c.y=this.y0+this.a*B*(this.cos_p12*h-this.sin_p12*d*Math.cos(f)),c):(m=NS(this.es),g=FS(this.es),y=kS(this.es),_=VS(this.es),Math.abs(this.sin_p12-1)<=Ht?(v=this.a*ha(m,g,y,_,St),b=this.a*ha(m,g,y,_,l),c.x=this.x0+(v-b)*Math.sin(f),c.y=this.y0-(v-b)*Math.cos(f),c):Math.abs(this.sin_p12+1)<=Ht?(v=this.a*ha(m,g,y,_,St),b=this.a*ha(m,g,y,_,l),c.x=this.x0+(v+b)*Math.sin(f),c.y=this.y0+(v+b)*Math.cos(f),c):(S=h/d,T=C_(this.a,this.e,this.sin_p12),x=C_(this.a,this.e,h),E=Math.atan((1-this.es)*S+this.es*T*this.sin_p12/(x*d)),$=0===(I=Math.atan2(Math.sin(f),this.cos_p12*Math.tan(E)-this.sin_p12*Math.cos(f)))?Math.asin(this.cos_p12*Math.sin(E)-this.sin_p12*Math.cos(E)):Math.abs(Math.abs(I)-Math.PI)<=Ht?-Math.asin(this.cos_p12*Math.sin(E)-this.sin_p12*Math.cos(E)):Math.asin(Math.sin(f)*Math.cos(E)/Math.sin(I)),M=this.e*this.sin_p12/Math.sqrt(1-this.es),D=this.e*this.cos_p12*Math.cos(I)/Math.sqrt(1-this.es),c.x=this.x0+(F=T*$*(1-(se=$*$)*(P=D*D)*(1-P)/6+(ie=se*$)/8*(L=M*D)*(1-2*P)+(j=ie*$)/120*(P*(4-7*P)-3*M*M*(1-7*P))-j*$/48*L))*Math.sin(I),c.y=this.y0+F*Math.cos(I),c))},inverse:function sRe(c){var a,l,h,d,f,m,g,y,_,v,b,S,x,E,I,M,D,L,P,F,B,G,$;return c.x-=this.x0,c.y-=this.y0,this.sphere?(a=Math.sqrt(c.x*c.x+c.y*c.y))>2*St*this.a?void 0:(l=a/this.a,h=Math.sin(l),d=Math.cos(l),f=this.long0,Math.abs(a)<=Ht?m=this.lat0:(m=yf(d*this.sin_p12+c.y*h*this.cos_p12/a),g=Math.abs(this.lat0)-St,f=Math.abs(g)<=Ht?tn(this.lat0>=0?this.long0+Math.atan2(c.x,-c.y):this.long0-Math.atan2(-c.x,c.y)):tn(this.long0+Math.atan2(c.x*h,a*this.cos_p12*d-c.y*this.sin_p12*h))),c.x=f,c.y=m,c):(y=NS(this.es),_=FS(this.es),v=kS(this.es),b=VS(this.es),Math.abs(this.sin_p12-1)<=Ht?(m=eM(((S=this.a*ha(y,_,v,b,St))-(a=Math.sqrt(c.x*c.x+c.y*c.y)))/this.a,y,_,v,b),f=tn(this.long0+Math.atan2(c.x,-1*c.y)),c.x=f,c.y=m,c):Math.abs(this.sin_p12+1)<=Ht?(S=this.a*ha(y,_,v,b,St),m=eM(((a=Math.sqrt(c.x*c.x+c.y*c.y))-S)/this.a,y,_,v,b),f=tn(this.long0+Math.atan2(c.x,c.y)),c.x=f,c.y=m,c):(a=Math.sqrt(c.x*c.x+c.y*c.y),I=Math.atan2(c.x,c.y),x=C_(this.a,this.e,this.sin_p12),M=Math.cos(I),P=3*this.es*(1-(L=-(D=this.e*this.cos_p12*M)*D/(1-this.es)))*this.sin_p12*this.cos_p12*M/(1-this.es),G=1-L*(B=(F=a/x)-L*(1+L)*Math.pow(F,3)/6-P*(1+3*L)*Math.pow(F,4)/24)*B/2-F*B*B*B/6,E=Math.asin(this.sin_p12*Math.cos(B)+this.cos_p12*Math.sin(B)*M),f=tn(this.long0+Math.asin(Math.sin(I)*Math.sin(B)/Math.cos(E))),$=Math.sin(E),m=Math.atan2(($-this.es*G*this.sin_p12)*Math.tan(E),$*(1-this.es)),c.x=f,c.y=m,c))},names:["Azimuthal_Equidistant","aeqd"]},dRe={init:function lRe(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function cRe(c){var a,l,h,d,m,g,y,v=c.y;return h=tn(c.x-this.long0),a=Math.sin(v),l=Math.cos(v),d=Math.cos(h),((m=this.sin_p14*a+this.cos_p14*l*d)>0||Math.abs(m)<=Ht)&&(g=1*this.a*l*Math.sin(h),y=this.y0+1*this.a*(this.cos_p14*a-this.sin_p14*l*d)),c.x=g,c.y=y,c},inverse:function uRe(c){var a,l,h,d,f,m,g;return c.x-=this.x0,c.y-=this.y0,l=yf((a=Math.sqrt(c.x*c.x+c.y*c.y))/this.a),h=Math.sin(l),d=Math.cos(l),m=this.long0,Math.abs(a)<=Ht?(g=this.lat0,c.x=m,c.y=g,c):(g=yf(d*this.sin_p14+c.y*h*this.cos_p14/a),f=Math.abs(this.lat0)-St,Math.abs(f)<=Ht?(m=tn(this.lat0>=0?this.long0+Math.atan2(c.x,-c.y):this.long0-Math.atan2(-c.x,c.y)),c.x=m,c.y=g,c):(m=tn(this.long0+Math.atan2(c.x*h,a*this.cos_p14*d-c.y*this.sin_p14*h)),c.x=m,c.y=g,c))},names:["ortho"]};function tM(c,a,l,h){var d;return c<Ht?(h.value=1,d=0):(d=Math.atan2(a,l),Math.abs(d)<=tr?h.value=1:d>tr&&d<=St+tr?(h.value=2,d-=St):d>St+tr||d<=-(St+tr)?(h.value=3,d=d>=0?d-bs:d+bs):(h.value=4,d+=St)),d}function E_(c,a){var l=c+a;return l<-bs?l+=DS:l>+bs&&(l-=DS),l}const yRe={init:function fRe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=St-tr/2?5:this.lat0<=-(St-tr/2)?6:Math.abs(this.long0)<=tr?1:Math.abs(this.long0)<=St+tr?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function pRe(c){var l,h,d,f,m,g,a={x:0,y:0},y={value:0};if(c.x-=this.long0,l=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(c.y)):c.y,h=c.x,5===this.face)f=St-l,h>=tr&&h<=St+tr?(y.value=1,d=h-St):h>St+tr||h<=-(St+tr)?(y.value=2,d=h>0?h-bs:h+bs):h>-(St+tr)&&h<=-tr?(y.value=3,d=h+St):(y.value=4,d=h);else if(6===this.face)f=St+l,h>=tr&&h<=St+tr?(y.value=1,d=-h+St):h<tr&&h>=-tr?(y.value=2,d=-h):h<-tr&&h>=-(St+tr)?(y.value=3,d=-h-St):(y.value=4,d=h>0?-h+bs:-h-bs);else{var _,v,b,S,T,x;2===this.face?h=E_(h,+St):3===this.face?h=E_(h,+bs):4===this.face&&(h=E_(h,-St)),S=Math.sin(l),T=Math.cos(l),x=Math.sin(h),_=T*Math.cos(h),v=T*x,b=S,1===this.face?d=tM(f=Math.acos(_),b,v,y):2===this.face?d=tM(f=Math.acos(v),b,-_,y):3===this.face?d=tM(f=Math.acos(-_),b,-v,y):4===this.face?d=tM(f=Math.acos(-v),b,_,y):(f=d=0,y.value=1)}return g=Math.atan(12/bs*(d+Math.acos(Math.sin(d)*Math.cos(tr))-St)),m=Math.sqrt((1-Math.cos(f))/(Math.cos(g)*Math.cos(g))/(1-Math.cos(Math.atan(1/Math.cos(d))))),2===y.value?g+=St:3===y.value?g+=bs:4===y.value&&(g+=1.5*bs),a.x=m*Math.cos(g),a.y=m*Math.sin(g),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,c.x=a.x,c.y=a.y,c},inverse:function mRe(c){var l,h,d,f,m,g,y,_,v,E,I,M,a={lam:0,phi:0},b={value:0};if(c.x=(c.x-this.x0)/this.a,c.y=(c.y-this.y0)/this.a,h=Math.atan(Math.sqrt(c.x*c.x+c.y*c.y)),l=Math.atan2(c.y,c.x),c.x>=0&&c.x>=Math.abs(c.y)?b.value=1:c.y>=0&&c.y>=Math.abs(c.x)?(b.value=2,l-=St):c.x<0&&-c.x>=Math.abs(c.y)?(b.value=3,l=l<0?l+bs:l-bs):(b.value=4,l+=St),v=bs/12*Math.tan(l),m=Math.sin(v)/(Math.cos(v)-1/Math.sqrt(2)),g=Math.atan(m),(y=1-(d=Math.cos(l))*d*(f=Math.tan(h))*f*(1-Math.cos(Math.atan(1/Math.cos(g)))))<-1?y=-1:y>1&&(y=1),5===this.face)_=Math.acos(y),a.phi=St-_,a.lam=1===b.value?g+St:2===b.value?g<0?g+bs:g-bs:3===b.value?g-St:g;else if(6===this.face)_=Math.acos(y),a.phi=_-St,a.lam=1===b.value?-g+St:2===b.value?-g:3===b.value?-g-St:g<0?-g-bs:-g+bs;else{var S,T,x;v=(S=y)*S,T=(v+=(x=v>=1?0:Math.sqrt(1-v)*Math.sin(g))*x)>=1?0:Math.sqrt(1-v),2===b.value?(v=T,T=-x,x=v):3===b.value?(T=-T,x=-x):4===b.value&&(v=T,T=x,x=-v),2===this.face?(v=S,S=-T,T=v):3===this.face?(S=-S,T=-T):4===this.face&&(v=S,S=T,T=-v),a.phi=Math.acos(-x)-St,a.lam=Math.atan2(T,S),2===this.face?a.lam=E_(a.lam,-St):3===this.face?a.lam=E_(a.lam,-bs):4===this.face&&(a.lam=E_(a.lam,+St))}return 0!==this.es&&(E=a.phi<0?1:0,I=Math.tan(a.phi),M=this.b/Math.sqrt(I*I+this.one_minus_f_squared),a.phi=Math.atan(Math.sqrt(this.a*this.a-M*M)/(this.one_minus_f*M)),E&&(a.phi=-a.phi)),a.lam+=this.long0,c.x=a.lam,c.y=a.phi,c},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var gF=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],BS=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],nM=function(c,a){return c[0]+a*(c[1]+a*(c[2]+a*c[3]))};const xRe={init:function SRe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function TRe(c){var a=tn(c.x-this.long0),l=Math.abs(c.y),h=Math.floor(11.459155902616464*l);h<0?h=0:h>=18&&(h=17);var d={x:nM(gF[h],l=wu*(l-.08726646259971647*h))*a,y:nM(BS[h],l)};return c.y<0&&(d.y=-d.y),d.x=d.x*this.a*.8487+this.x0,d.y=d.y*this.a*1.3523+this.y0,d},inverse:function wRe(c){var a={x:(c.x-this.x0)/(.8487*this.a),y:Math.abs(c.y-this.y0)/(1.3523*this.a)};if(a.y>=1)a.x/=gF[18][0],a.y=c.y<0?-St:St;else{var l=Math.floor(18*a.y);for(l<0?l=0:l>=18&&(l=17);;)if(BS[l][0]>a.y)--l;else{if(!(BS[l+1][0]<=a.y))break;++l}var h=BS[l],d=5*(a.y-h[0])/(BS[l+1][0]-h[0]);d=function bRe(c,a,l,h){for(var d=a;h;--h){var f=c(d);if(d-=f,Math.abs(f)<l)break}return d}(function(f){return(nM(h,f)-a.y)/function(c,a){return c[1]+a*(2*c[2]+3*a*c[3])}(h,f)},d,Ht,100),a.x/=nM(gF[l],d),a.y=(5*l+d)*wo,c.y<0&&(a.y=-a.y)}return a.x=tn(a.x+this.long0),a},names:["Robinson","robin"]},IRe={init:function ERe(){this.name="geocent"},forward:function MRe(c){return Lq(c,this.es,this.a)},inverse:function DRe(c){return Pq(c,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var US={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const NRe={init:function RRe(){if(Object.keys(US).forEach(function(l){if(typeof this[l]>"u")this[l]=US[l].def;else{if(US[l].num&&isNaN(this[l]))throw new Error("Invalid parameter value, must be numeric "+l+" = "+this[l]);US[l].num&&(this[l]=parseFloat(this[l]))}US[l].degrees&&(this[l]=this[l]*wo)}.bind(this)),Math.abs(Math.abs(this.lat0)-St)<Ht?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<Ht?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var c=this.tilt,a=this.azi;this.cg=Math.cos(a),this.sg=Math.sin(a),this.cw=Math.cos(c),this.sw=Math.sin(c)},forward:function LRe(c){c.x-=this.long0;var d,f,m,g,a=Math.sin(c.y),l=Math.cos(c.y),h=Math.cos(c.x);switch(this.mode){case 3:f=this.sinph0*a+this.cosph0*l*h;break;case 2:f=l*h;break;case 1:f=-a;break;case 0:f=a}switch(d=(f=this.pn1/(this.p-f))*l*Math.sin(c.x),this.mode){case 3:f*=this.cosph0*a-this.sinph0*l*h;break;case 2:f*=a;break;case 0:f*=-l*h;break;case 1:f*=l*h}return d=(d*this.cg-f*this.sg)*this.cw*(g=1/((m=f*this.cg+d*this.sg)*this.sw*this.h1+this.cw)),f=m*g,c.x=d*this.a,c.y=f*this.a,c},inverse:function PRe(c){c.x/=this.a,c.y/=this.a;var l,h,d,a={x:c.x,y:c.y};c.x=(l=this.pn1*c.x*(d=1/(this.pn1-c.y*this.sw)))*this.cg+(h=this.pn1*c.y*this.cw*d)*this.sg,c.y=h*this.cg-l*this.sg;var f=Ac(c.x,c.y);if(Math.abs(f)<Ht)a.x=0,a.y=c.y;else{var m,g;switch(g=1-f*f*this.pfact,g=(this.p-Math.sqrt(g))/(this.pn1/f+f/this.pn1),m=Math.sqrt(1-g*g),this.mode){case 3:a.y=Math.asin(m*this.sinph0+c.y*g*this.cosph0/f),c.y=(m-this.sinph0*Math.sin(a.y))*f,c.x*=g*this.cosph0;break;case 2:a.y=Math.asin(c.y*g/f),c.y=m*f,c.x*=g;break;case 0:a.y=Math.asin(m),c.y=-c.y;break;case 1:a.y=-Math.asin(m)}a.x=Math.atan2(c.x,c.y)}return c.x=a.x+this.long0,c.y=a.y,c},names:["Tilted_Perspective","tpers"]},URe={init:function FRe(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var c=1-this.es,a=1/c;this.radius_p=Math.sqrt(c),this.radius_p2=c,this.radius_p_inv2=a,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function kRe(c){var h,d,f,m,a=c.x,l=c.y;if(a-=this.long0,"ellipse"===this.shape){l=Math.atan(this.radius_p2*Math.tan(l));var g=this.radius_p/Ac(this.radius_p*Math.cos(l),Math.sin(l));if(d=g*Math.cos(a)*Math.cos(l),f=g*Math.sin(a)*Math.cos(l),m=g*Math.sin(l),(this.radius_g-d)*d-f*f-m*m*this.radius_p_inv2<0)return c.x=Number.NaN,c.y=Number.NaN,c;h=this.radius_g-d,this.flip_axis?(c.x=this.radius_g_1*Math.atan(f/Ac(m,h)),c.y=this.radius_g_1*Math.atan(m/h)):(c.x=this.radius_g_1*Math.atan(f/h),c.y=this.radius_g_1*Math.atan(m/Ac(f,h)))}else"sphere"===this.shape&&(h=Math.cos(l),d=Math.cos(a)*h,f=Math.sin(a)*h,m=Math.sin(l),h=this.radius_g-d,this.flip_axis?(c.x=this.radius_g_1*Math.atan(f/Ac(m,h)),c.y=this.radius_g_1*Math.atan(m/h)):(c.x=this.radius_g_1*Math.atan(f/h),c.y=this.radius_g_1*Math.atan(m/Ac(f,h))));return c.x=c.x*this.a,c.y=c.y*this.a,c},inverse:function VRe(c){var d,f,m,g,a=-1,l=0,h=0;if(c.x=c.x/this.a,c.y=c.y/this.a,"ellipse"===this.shape){this.flip_axis?(h=Math.tan(c.y/this.radius_g_1),l=Math.tan(c.x/this.radius_g_1)*Ac(1,h)):(l=Math.tan(c.x/this.radius_g_1),h=Math.tan(c.y/this.radius_g_1)*Ac(1,l));var y=h/this.radius_p;if((m=(f=2*this.radius_g*a)*f-4*(d=l*l+y*y+a*a)*this.C)<0)return c.x=Number.NaN,c.y=Number.NaN,c;g=(-f-Math.sqrt(m))/(2*d),a=this.radius_g+g*a,l*=g,h*=g,c.x=Math.atan2(l,a),c.y=Math.atan(h*Math.cos(c.x)/a),c.y=Math.atan(this.radius_p_inv2*Math.tan(c.y))}else if("sphere"===this.shape){if(this.flip_axis?(h=Math.tan(c.y/this.radius_g_1),l=Math.tan(c.x/this.radius_g_1)*Math.sqrt(1+h*h)):(l=Math.tan(c.x/this.radius_g_1),h=Math.tan(c.y/this.radius_g_1)*Math.sqrt(1+l*l)),(m=(f=2*this.radius_g*a)*f-4*(d=l*l+h*h+a*a)*this.C)<0)return c.x=Number.NaN,c.y=Number.NaN,c;g=(-f-Math.sqrt(m))/(2*d),a=this.radius_g+g*a,l*=g,h*=g,c.x=Math.atan2(l,a),c.y=Math.atan(h*Math.cos(c.x)/a)}return c.x=c.x+this.long0,c},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};ul.defaultDatum="WGS84",ul.Proj=LS,ul.WGS84=new ul.Proj("WGS84"),ul.Point=bDe,ul.toPoint=kq,ul.defs=XE,ul.nadgrid=function qMe(c,a){var l=new DataView(a),h=function ZMe(c){var a=c.getInt32(8,!1);return 11!==a&&(11!==(a=c.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(l),d=function KMe(c,a){return{nFields:c.getInt32(8,a),nSubgridFields:c.getInt32(24,a),nSubgrids:c.getInt32(40,a),shiftType:cF(c,56,64).trim(),fromSemiMajorAxis:c.getFloat64(120,a),fromSemiMinorAxis:c.getFloat64(136,a),toSemiMajorAxis:c.getFloat64(152,a),toSemiMinorAxis:c.getFloat64(168,a)}}(l,h);d.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var f=function JMe(c,a,l){for(var d=[],f=0;f<a.nSubgrids;f++){var m=eDe(c,176,l),g=tDe(c,176,m,l),y=Math.round(1+(m.upperLongitude-m.lowerLongitude)/m.longitudeInterval),_=Math.round(1+(m.upperLatitude-m.lowerLatitude)/m.latitudeInterval);d.push({ll:[v_(m.lowerLongitude),v_(m.lowerLatitude)],del:[v_(m.longitudeInterval),v_(m.latitudeInterval)],lim:[y,_],count:m.gridNodeCount,cvs:QMe(g)})}return d}(l,d,h),m={header:d,subgrids:f};return Rq[c]=m,m},ul.transform=ZE,ul.mgrs=uDe,ul.version="__VERSION__",function zRe(c){c.Proj.projections.add(JE),c.Proj.projections.add(QE),c.Proj.projections.add(qDe),c.Proj.projections.add(iAe),c.Proj.projections.add(cAe),c.Proj.projections.add(pAe),c.Proj.projections.add(bAe),c.Proj.projections.add(xAe),c.Proj.projections.add(IAe),c.Proj.projections.add(NAe),c.Proj.projections.add(JAe),c.Proj.projections.add(rIe),c.Proj.projections.add(cIe),c.Proj.projections.add(mIe),c.Proj.projections.add(bIe),c.Proj.projections.add(xIe),c.Proj.projections.add(IIe),c.Proj.projections.add(NIe),c.Proj.projections.add(zIe),c.Proj.projections.add(XIe),c.Proj.projections.add(KIe),c.Proj.projections.add(nRe),c.Proj.projections.add(aRe),c.Proj.projections.add(dRe),c.Proj.projections.add(yRe),c.Proj.projections.add(xRe),c.Proj.projections.add(IRe),c.Proj.projections.add(NRe),c.Proj.projections.add(URe)}(ul);const iM=ul;function yF(c){let a=[];for(const l of c)if(l instanceof Dr){const d=yF(l.getLayers().getArray());a=Array.prototype.concat(a,d)}else a.push(l);return a}function _F(c,a,l=!1){c.setVisible(a),!l&&c instanceof Dr&&c.getLayers().forEach(d=>{_F(d,a)})}function vF(c,a,l=!1){c.setOpacity(a),!l&&c instanceof Dr&&c.getLayers().forEach(d=>{vF(d,a)})}function zS(c,a,l){c.setZIndex(l>0?a+l:a),c instanceof Dr&&c.getLayers().forEach(f=>{zS(f,a,l)})}function HRe(c,a,l){l.remove(c),l.insertAt(a,c)}const da=c=>{let a=[];for(const l of c){let h;h=Array.isArray(l[0])?da(l):l,a=Array.prototype.concat(a,h)}return a},a$=(c,a)=>Math.log(c)/Math.log(a),rM=(c,a)=>a$(c,a)%1==0,l$=(c,a,l)=>{const h=c.createShader(a);if(!h)throw new Error("No shader was created");if(c.shaderSource(h,l),c.compileShader(h),!c.getShaderParameter(h,c.COMPILE_STATUS))throw c.deleteShader(h),new Error(`An error occurred compiling the shader: ${c.getShaderInfoLog(h)}.    \n\n Shader code: ${l}`);return h},c$=(c,a)=>{c.useProgram(a)},KRe=(c,a,l)=>{c.bindBuffer(c.ARRAY_BUFFER,l.buffer),c.enableVertexAttribArray(a),c.vertexAttribPointer(a,l.vectorSize,l.type,l.normalize,l.stride,l.offset)},r2e=(c,a,l,h)=>{if(l>c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS))throw new Error(`There are only ${c.getParameter(c.MAX_COMBINED_TEXTURE_IMAGE_UNITS)} texture bind points, but you tried to bind to point nr. ${l}.`);7===l&&console.error(`You are about to bind to the dedicated texture-construction bind point (nr. ${l}).\n        If after this call another texture is built, your shader will now use that new texture instead of this one!\n        Consider using another bind point.`),c.activeTexture(c.TEXTURE0+l),c.bindTexture(c.TEXTURE_2D,a),c.uniform1i(h,l)},bF=(c,a,l)=>{const h=c.getUniformLocation(a,l);if(null===h)throw new Error(`Couldn't find uniform ${l} in program.`);return h},u2e=(c,a,l,h)=>{switch(l){case"bool":case"int":c.uniform1i(a,h[0]);break;case"bvec2":case"ivec2":c.uniform2i(a,h[0],h[1]);break;case"bvec3":case"ivec3":c.uniform3i(a,h[0],h[1],h[2]);break;case"bvec4":case"ivec4":c.uniform4i(a,h[0],h[1],h[2],h[3]);break;case"bool[]":case"int[]":c.uniform1iv(a,h);break;case"bvec2[]":case"ivec2[]":c.uniform2iv(a,h);break;case"bvec3[]":case"ivec3[]":c.uniform3iv(a,h);break;case"bvec4[]":case"ivec4[]":c.uniform4iv(a,h);break;case"float":c.uniform1f(a,h[0]);break;case"vec2":c.uniform2f(a,h[0],h[1]);break;case"vec3":c.uniform3f(a,h[0],h[1],h[2]);break;case"vec4":c.uniform4f(a,h[0],h[1],h[2],h[3]);break;case"float[]":c.uniform1fv(a,h);break;case"vec2[]":c.uniform2fv(a,h);break;case"vec3[]":c.uniform3fv(a,h);break;case"vec4[]":c.uniform4fv(a,h);break;case"mat2":c.uniformMatrix2fv(a,!1,h);break;case"mat3":c.uniformMatrix3fv(a,!1,h);break;case"mat4":c.uniformMatrix4fv(a,!1,h);break;default:throw Error(`Type ${l} not implemented.`)}};class sM{constructor(a,l,h){this.vertexShaderSource=l,this.fragmentShaderSource=h,this.program=((c,a,l)=>{const h=c.createProgram();if(!h)throw new Error("No program was created");const d=l$(c,c.VERTEX_SHADER,a),f=l$(c,c.FRAGMENT_SHADER,l);if(c.attachShader(h,d),c.attachShader(h,f),c.linkProgram(h),c.detachShader(h,d),c.detachShader(h,f),c.deleteShader(d),c.deleteShader(f),!c.getProgramParameter(h,c.LINK_STATUS))throw c.deleteProgram(h),new Error("Unable to initialize the shader program: "+c.getProgramInfoLog(h));return h})(a,l,h),this.id=function(c){let a=0;for(const l of c)a+=l.charCodeAt(0);return`${a}`}(l+h)}}class Go{constructor(a,l,h,d,f){this.location=bF(a,l.program,h),this.type=d,this.value=f,this.variableName=h}}class SF{constructor(a,l,h,d,f){this.location=bF(a,l.program,h),this.texture=d instanceof HTMLImageElement||d instanceof HTMLCanvasElement?((c,a)=>{const l=c.createTexture();if(!l)throw new Error("No texture was created");c.activeTexture(c.TEXTURE0+7),c.bindTexture(c.TEXTURE_2D,l);const d=c.RGBA,f=c.RGBA,m=c.UNSIGNED_BYTE;let g,y;return c.texImage2D(c.TEXTURE_2D,0,d,f,m,a),c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null),a instanceof HTMLImageElement?(g=a.naturalWidth,y=a.naturalHeight):(g=a.width,y=a.height),{texture:l,level:0,internalformat:d,format:f,type:m,width:g,height:y,border:0}})(a,d):d,this.bindPoint=f,this.variableName=h}}class f2e{constructor(a,l,h,d,f){this.location=bF(a,l.program,h),this.texture=((c,a)=>{const l=a.length,h=a[0].length,d=a[0][0].length;if(!rM(h,2)||!rM(l,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${h} x ${l}`);if(4!==d)throw new Error(`Expecting 4 channels, but ${d} provided`);const f=c.createTexture();if(!f)throw new Error("No texture was created");c.activeTexture(c.TEXTURE0+7),c.bindTexture(c.TEXTURE_2D,f);const y=c.RGBA,_=c.RGBA,v=c.UNSIGNED_BYTE,b=new Uint8Array(da(a));return 4!==d&&c.pixelStorei(c.UNPACK_ALIGNMENT,1),c.texImage2D(c.TEXTURE_2D,0,y,h,l,0,_,v,b),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.bindTexture(c.TEXTURE_2D,null),{texture:f,level:0,internalformat:y,format:_,type:v,width:h,height:l,border:0}})(a,d),this.bindPoint=f,this.variableName=h}}class _f{constructor(a,l,h,d,f="triangles"){let m;switch(f){case"triangles":m=a.TRIANGLES;break;case"lines":m=a.LINES;break;case"points":m=a.POINTS;break;default:throw new Error(`Invalid drawing mode ${f}`)}this.location=((c,a,l)=>{const h=c.getAttribLocation(a,l);if(-1===h)throw new Error(`Couldn't find attribute ${l} in program.`);return h})(a,l.program,h),this.value=((c,a,l=c.TRIANGLES)=>{const h=new Float32Array(da(a)),d=c.createBuffer();if(!d)throw new Error("No buffer was created");return c.bindBuffer(c.ARRAY_BUFFER,d),c.bufferData(c.ARRAY_BUFFER,h,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null),{buffer:d,vectorSize:a[0].length,vectorCount:a.length,type:c.FLOAT,normalize:!1,stride:0,offset:0,drawingMode:l}})(a,d,m),this.variableName=h,this.drawingMode=m}}class p2e{constructor(a,l,h="triangles"){let d;switch(h){case"triangles":d=a.TRIANGLES;break;case"lines":d=a.LINES;break;case"points":d=a.POINTS;break;default:throw new Error(`Invalid drawing mode ${h}`)}this.index=((c,a,l=c.TRIANGLES)=>{const h=new Uint16Array(da(a)),d=c.createBuffer();if(!d)throw new Error("No buffer was created");return c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,d),c.bufferData(c.ELEMENT_ARRAY_BUFFER,h,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null),{buffer:d,count:h.length,type:c.UNSIGNED_SHORT,offset:0,drawingMode:l}})(a,l,d)}}function TF(c,a){for(const l of c)if(a(l))return l;return null}class oM{constructor(a,l,h,d,f){this.program=a,this.attributes=l,this.uniforms=h,this.textures=d,this.index=f;const[m,g,y,_]=function m2e(c){const a=/^\s*attribute (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*);/gm,l=/^\s*uniform (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*)(\[\d\])*;/gm,h=/^\s*uniform sampler2D (\w*);/gm,d=/^\s*precision (\w*) float;/gm,f=c.fragmentShaderSource+"\n\n\n"+c.vertexShaderSource,m=[];let g;for(;null!==(g=a.exec(f));)m.push(g[2]);const y=[];let _;for(;null!==(_=l.exec(f));)y.push(_[2]);const v=[];let b;for(;null!==(b=h.exec(f));)v.push(b[1]);const S=[];let T;for(;null!==(T=d.exec(f));)S.push(T[1]);return[m,y,v,S]}(a);for(const b of m){const S=l.filter(T=>T.variableName===b);if(1!==S.length)throw new Error(`Provided ${S.length} values for shader's attribute ${b}.`)}for(const b of g){const S=h.filter(T=>T.variableName===b);if(1!==S.length)throw new Error(`Provided ${S.length} values for shader's uniform ${b}.`)}for(const b of y){const S=d.filter(T=>T.variableName===b);if(1!==S.length)throw new Error(`Provided ${S.length} values for shader's texture ${b}.`)}1===_.length&&console.warn("You have only provided one precision qualifier.\n            This can cause issues when you want to use a uniform in both the vertex- and the fragment-shader.");const v=this.attributes.map(b=>b.value.vectorCount);if(Math.min(...v)!==Math.max(...v))throw new Error("Your attributes are not of the same length!")}bind(a){c$(a,this.program.program);for(const l of this.attributes)KRe(a,l.location,l.value);for(const l of this.uniforms)u2e(a,l.location,l.type,l.value);for(const l of this.textures)r2e(a,l.texture.texture,l.bindPoint,l.location);this.index&&((c,a)=>{c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.index.index.buffer)})(a)}render(a,l,h,d){h?((c,a,l)=>{c.bindFramebuffer(c.FRAMEBUFFER,a.framebuffer),l?(a.width/a.height!=l[2]/l[3]&&console.warn("Your viewport-aspect is different from the framebuffer-aspect."),c.viewport(...l)):c.viewport(0,0,a.width,a.height)})(a,h,d):((c,a)=>{c.bindFramebuffer(c.FRAMEBUFFER,null),a?(c.canvas.width/c.canvas.height!=a[2]/a[3]&&console.warn("Your viewport-aspect is different from the canvas-aspect."),c.viewport(...a)):c.viewport(0,0,c.canvas.width,c.canvas.height)})(a,d),l&&((c,a)=>{c.clearColor(a[0],a[1],a[2],a[3]),c.clearDepth(1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT)})(a,l),this.index?((c,a)=>{c.drawElements(a.drawingMode,a.count,a.type,a.offset)})(a,this.index.index):((c,a)=>{c.drawArrays(a.drawingMode,a.offset,a.vectorCount)})(a,this.attributes[0].value)}updateAttributeData(a,l,h){const d=TF(this.attributes,f=>f.variableName===l);if(!d)throw new Error(`No such attribute ${l} to be updated.`);((c,a,l)=>{const h=new Float32Array(da(l));c.bindBuffer(c.ARRAY_BUFFER,a.buffer),c.bufferData(c.ARRAY_BUFFER,h,c.STATIC_DRAW),c.bindBuffer(c.ARRAY_BUFFER,null)})(a,d.value,h)}updateUniformData(a,l,h){const d=TF(this.uniforms,f=>f.variableName===l);if(!d)throw new Error(`No such uniform ${l} to be updated.`);d.value=h}updateTextureData(a,l,h){const d=TF(this.textures,m=>m.variableName===l);if(!d)throw new Error(`No such texture ${l} to be updated.`);const f=((c,a,l)=>{if(c.activeTexture(c.TEXTURE0+7),c.bindTexture(c.TEXTURE_2D,a.texture),l instanceof HTMLImageElement||l instanceof HTMLCanvasElement)c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,l);else{const h=l[0].length,d=l.length;if(!rM(h,2)||!rM(d,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${d} x ${h}`);const f=new Uint8Array(da(l));c.texImage2D(c.TEXTURE_2D,a.level,a.internalformat,a.width,a.height,a.border,a.format,a.type,f)}return c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null),l instanceof HTMLImageElement?(a.width=l.naturalWidth,a.height=l.naturalHeight):l instanceof HTMLCanvasElement?(a.width=l.width,a.height=l.height):(a.width=l[0].length,a.height=l.length),a})(a,d.texture,h);d.texture=f}}class h${constructor(a,l,h){const d=(c=>{const a=c.createFramebuffer();if(!a)throw new Error("Error creating framebuffer");return a})(a),f=((c,a,l)=>{if(a<=0||l<=0)throw new Error("Width and height must be positive.");const h=c.createTexture();if(!h)throw new Error("No texture was created");return c.activeTexture(c.TEXTURE0+7),c.bindTexture(c.TEXTURE_2D,h),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,a,l,0,c.RGBA,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.bindTexture(c.TEXTURE_2D,null),{texture:h,level:0,internalformat:c.RGBA,format:c.RGBA,type:c.UNSIGNED_BYTE,width:a,height:l,border:0}})(a,l,h),m=((c,a,l)=>{if(c.bindFramebuffer(c.FRAMEBUFFER,l),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,a.texture,0),c.checkFramebufferStatus(c.FRAMEBUFFER)!==c.FRAMEBUFFER_COMPLETE)throw new Error(`Error creating framebuffer: framebuffer-status: ${c.checkFramebufferStatus(c.FRAMEBUFFER)} ; error-code: ${c.getError()}`);return c.bindFramebuffer(c.FRAMEBUFFER,null),{framebuffer:l,texture:a,width:a.width,height:a.height}})(a,f,d);this.fbo=m}}const HS=(c,a)=>({vertices:[[-c/2,a/2,0],[-c/2,-a/2,0],[c/2,-a/2,0],[-c/2,a/2,0],[c/2,-a/2,0],[c/2,a/2,0]],texturePositions:[[0,1],[0,0],[1,0],[0,1],[1,0],[1,1]]});class v2e extends qd{constructor(a){super(a)}createRenderer(){return this.renderer=new b2e(this),this.renderer}updateSunAngle(a){this.renderer.updateSunAngle(a)}}class b2e extends RO{constructor(a){super(a),this.state="loading";const l=document.createElement("canvas");l.width=1200,l.height=800,l.style.position="absolute";const h=l.getContext("webgl"),d=a.getSource(),f=d.getProjection(),m=d.getImageExtent(),g=this.bboxOntoRectangle(2,2,m),y=((c,a=256,l=256,h="red")=>{const d=document.createElement("canvas").getContext("2d");if(!d)throw new Error("no context");return d.canvas.width=a,d.canvas.height=l,d.font=`bold ${5*l/6|0}px sans-serif`,d.textAlign="center",d.textBaseline="middle",d.fillStyle=h,d.fillText(c,a/2,l/2),d.canvas})("test",2048,2048,"red"),_=new sM(h,"\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2canv;\n            varying vec2 v_texturePosition;\n            void main() {\n                vec3 pixelPosition = u_world2pix * vec3(a_position.x, a_position.y, 1.);\n                vec3 canvasPosition = u_pix2canv * pixelPosition;\n                gl_Position = vec4(canvasPosition.x, canvasPosition.y, 0., 1.);\n                v_texturePosition = a_texturePosition;\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_srtm;\n            uniform float u_imageSize;\n            uniform vec3 u_sun;\n            varying vec2 v_texturePosition;\n            void main() {\n                float delta = 4. / u_imageSize;\n                float top = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y + delta)).r;\n                float bot = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y - delta)).r;\n                float lft = texture2D(u_srtm, vec2(v_texturePosition.x + delta, 1. - v_texturePosition.y        )).r;\n                float rgt = texture2D(u_srtm, vec2(v_texturePosition.x - delta, 1. - v_texturePosition.y        )).r;\n\n                vec3 surfaceNormal = vec3(\n                    lft - rgt,\n                    bot - top,\n                    2. * delta\n                );\n                surfaceNormal = normalize(surfaceNormal);\n                vec3 sunNormal = normalize(u_sun);\n                float alignment = abs(dot(sunNormal, surfaceNormal));\n\n                gl_FragColor = vec4(0., 0., 0., 0.5 * alignment);\n            }\n        ");c$(h,_.program);const v=new oM(_,[new _f(h,_,"a_position",g.vertices),new _f(h,_,"a_texturePosition",g.texturePositions)],[new Go(h,_,"u_imageSize","float",[2048]),new Go(h,_,"u_sun","vec3",[0,0,1]),new Go(h,_,"u_world2pix","mat3",da([[1,0,0],[0,1,0],[0,0,1]])),new Go(h,_,"u_pix2canv","mat3",da([[1/(l.width/2),0,0],[0,-1/(l.height/2),0],[-1,1,1]]))],[new SF(h,_,"u_srtm",y,0)]);v.bind(h),this.shader=v,this.canvas=l,this.gl=h,this.projection=f;const b=d.getImage(m,.02197265625,2.440000295639038,f);b.addEventListener("change",S=>{const T=b.getImage();this.shader.updateTextureData(this.gl,"u_srtm",T),this.shader.bind(this.gl),this.state="ready",super.getLayer().changed()}),b.load()}prepareFrame(a){if("ready"===this.state){const l=a.coordinateToPixelTransform;this.shader.updateUniformData(this.gl,"u_world2pix",da([[l[0],l[1],0],[l[2],l[3],0],[l[4],l[5],1]])),this.shader.bind(this.gl),a.viewState.projection!==this.projection&&this.reprojectImage(a.viewState.projection)}return!0}renderFrame(a,l){return"ready"===this.state&&(this.shader.render(this.gl),this.transformCanvas(a)),this.canvas}renderDeclutter(a){}updateSunAngle(a){this.shader.updateUniformData(this.gl,"u_sun",[a[0],a[1],1]),this.shader.bind(this.gl),this.shader.render(this.gl)}bboxOntoRectangle(a,l,h){const d=HS(a,l);for(const f of d.vertices){const g=f[1];f[0]=f[0]===a/2?h[2]:h[0],f[1]=g===l/2?h[3]:h[1]}return d}reprojectImage(a){const l=super.getLayer().getSource(),h=l.getProjection(),f=hu(l.getImageExtent(),h,a),m=this.bboxOntoRectangle(2,2,f);this.shader.updateAttributeData(this.gl,"a_position",m.vertices),this.shader.bind(this.gl)}transformCanvas(a){const l=a.layerStatesArray[a.layerIndex],h=a.pixelRatio,d=a.size,f=Math.round(d[0]*h),m=Math.round(d[1]*h),g=l.opacity;this.canvas.width=f,this.canvas.height=m,this.canvas.style.opacity=`${g}`,this.shader.updateUniformData(this.gl,"u_pix2canv",da([[1/(this.canvas.width/2),0,0],[0,-1/(this.canvas.height/2),0],[-1,1,1]]))}}class S2e extends yu{constructor(a){super(a),this.options=a}createRenderer(){return new T2e(this,this.options.renderSettings)}updateParas(a,l,h){const d={colorRamp:this.options.renderSettings.colorRamp,maxEdgeLength:this.options.renderSettings.maxEdgeLength,storeInterpolatedPixelData:this.options.renderSettings.storeInterpolatedPixelData,valueProperty:this.options.renderSettings.valueProperty,power:a,showLabels:h,smooth:l};super.getRenderer().updateSettings(d),this.options.renderSettings=d}}class T2e extends iS{constructor(a,l){super(a),this.settings=l,this.container=document.createElement("div"),this.container.classList.add("ol-layer"),this.container.style.setProperty("position","absolute"),this.container.style.setProperty("width","100%"),this.container.style.setProperty("height","100%"),this.webGlCanvas=document.createElement("canvas"),this.webGlCanvas.style.setProperty("position","absolute"),this.webGlCanvas.style.setProperty("left","0px"),this.webGlCanvas.style.setProperty("top","0px"),this.webGlCanvas.style.setProperty("width","100%"),this.webGlCanvas.style.setProperty("height","100%"),this.webGlCanvas.width=1e3,this.webGlCanvas.height=1e3,this.gl=this.webGlCanvas.getContext("webgl"),this.container.appendChild(this.webGlCanvas),this.pointRenderer=new iS(a);const h=a.getSource();this.projection=h.getProjection();const{coords:d,values:f,bboxDelta:m,maxVal:g}=this.parseData(h,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:y,maxEdgeLengthBbox:_}=this.parseDataBbox(m,d,f,g,this.settings.maxEdgeLength);this.bbox=m;const v=[[1,0,0],[0,1,0],[0,0,1]];this.interpolationShader=C2e(this.gl,y,g,this.settings.power,_),this.valueFb=new h$(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.colorizationShader=x2e(this.gl,this.settings.colorRamp,g,this.settings.smooth,this.valueFb),this.colorFb=new h$(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.arrangementShader=E2e(this.gl,v,v,m,this.colorFb),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo)}prepareFrame(a){if(this.webGlCanvas.style.opacity=`${a.layerStatesArray[a.layerIndex].opacity}`,a.viewState.projection!==this.projection){this.projection=a.viewState.projection;const d=super.getLayer().getSource(),{coords:f,values:m,bboxDelta:g,maxVal:y}=this.parseData(d,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:_,maxEdgeLengthBbox:v}=this.parseDataBbox(g,f,m,y,this.settings.maxEdgeLength);this.updateInterpolationShader(this.settings.power,_,v),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo),this.bbox=g}return this.updateArrangementShader(a.coordinateToPixelTransform,a.size[0],a.size[1],this.bbox),this.pointRenderer.prepareFrame(a),!0}renderFrame(a,l){if(this.runArrangementShader(),this.settings.showLabels){const h=this.pointRenderer.renderFrame(a,this.container);cO(this.container,[this.webGlCanvas,h])}else cO(this.container,[this.webGlCanvas]);return this.container}renderDeclutter(a){}updateSettings(a){const l=this.settings;this.settings=a,a.power!==l.power?(this.updateInterpolationShader(a.power),this.runInterpolationShader(this.valueFb.fbo),this.updateColorizationShader(a.smooth),this.runColorizationShader(this.colorFb.fbo)):a.smooth!==l.smooth&&(this.updateColorizationShader(a.smooth),this.runColorizationShader(this.colorFb.fbo)),super.getLayer().changed()}updateArrangementShader(a,l,h,d){const m=[[1/(l/2),0,0],[0,-1/(h/2),0],[-1,1,1]];this.arrangementShader.updateUniformData(this.gl,"u_world2pix",da([[a[0],a[1],0],[a[2],a[3],0],[a[4],a[5],1]])),this.arrangementShader.updateUniformData(this.gl,"u_pix2clip",da(m)),this.arrangementShader.updateUniformData(this.gl,"u_bbox",d)}runArrangementShader(a){this.arrangementShader.bind(this.gl),this.arrangementShader.render(this.gl,[0,0,0,0],a)}updateInterpolationShader(a,l,h){this.interpolationShader.updateUniformData(this.gl,"u_power",[a]),l&&this.interpolationShader.updateTextureData(this.gl,"u_dataTexture",[l]),h&&this.interpolationShader.updateUniformData(this.gl,"u_maxDistance",[h])}runInterpolationShader(a){this.interpolationShader.bind(this.gl),this.interpolationShader.render(this.gl,[0,0,0,0],a),this.settings.storeInterpolatedPixelData&&(this.interpolatedValues=(c=>{const a=c.getContext("webgl");if(!a)throw new Error("no context");const l=a.getParameter(a.IMPLEMENTATION_COLOR_READ_FORMAT),h=a.getParameter(a.IMPLEMENTATION_COLOR_READ_TYPE);let d;if(h===a.UNSIGNED_BYTE)d=new Uint8Array(a.drawingBufferWidth*a.drawingBufferHeight*4);else if(h===a.UNSIGNED_SHORT_5_6_5||h===a.UNSIGNED_SHORT_4_4_4_4||h===a.UNSIGNED_SHORT_5_5_5_1)d=new Uint16Array(a.drawingBufferWidth*a.drawingBufferHeight*4);else{if(h!==a.FLOAT)throw new Error(`Did not understand pixel data type ${h} for format ${l}`);d=new Float32Array(a.drawingBufferWidth*a.drawingBufferHeight*4)}return a.readPixels(0,0,c.width,c.height,l,h,d),d})(this.webGlCanvas))}updateColorizationShader(a){this.colorizationShader.updateUniformData(this.gl,"u_smooth",[a?1:0])}runColorizationShader(a){this.colorizationShader.bind(this.gl),this.colorizationShader.render(this.gl,[0,0,0,0],a)}parseData(a,l,h){let d=a.getFeatures();d=a instanceof pm?a.getSource().getFeatures():a.getFeatures();const f=d.map(x=>x.getGeometry().getCoordinates()),m=d.map(x=>parseFloat(x.getProperties()[l])),g=M2e(f),y=g[2]-g[0],_=g[3]-g[1];let v,b;y>_?(b=y-_,v=0):(b=0,v=_-y);const S=[g[0]-h,g[1]-h,g[2]+v+h,g[3]+b+h],T=m.reduce((x,E)=>E>x?E:x,0);return{coords:f,values:m,bboxDelta:S,maxVal:T}}parseDataBbox(a,l,h,d,f){const m=D2e(l,h).map(S=>{const T=w2e([S[0],S[1]],a);return[255*(T[0]+1)/2,255*(T[1]+1)/2,255*S[2]/d,255]}),g=m.length,y=((c,a)=>{const l=Math.ceil(a$(c,2));return Math.pow(2,l)})(g);for(let S=0;S<y-g;S++)m.push([0,0,0,0]);return{observationsBbox:m,maxEdgeLengthBbox:f/Math.max(a[2]-a[0],a[3]-a[1])}}}const w2e=(c,a)=>[(c[0]-a[0])/(a[2]-a[0])*2-1,(c[1]-a[1])/(a[3]-a[1])*2-1],C2e=(c,a,l,h,d)=>{const m=new sM(c,"\n            precision mediump float;\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n                v_position = a_position.xy;\n                v_texturePosition = a_texturePosition;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_power;\n            uniform sampler2D u_dataTexture;\n            uniform int u_nrDataPoints;\n            uniform float u_maxValue;\n            uniform float u_maxDistance;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n\n                float valSum = 0.0;\n                float wSum = 0.0;\n                float minD = 10000.0;\n                for (int i = 0; i < 10000; i++) {\n                    if (i > u_nrDataPoints) {\n                        break;\n                    }\n                    vec4 dataPoint = texture2D(u_dataTexture, vec2(float(i) / float(u_nrDataPoints), 0.5));\n                    if (dataPoint.w > 0.0) {  // texture is padded to next power of two with transparent 0-values.\n                        vec2 coords = dataPoint.xy * 2.0 - 1.0;  // transforming coords from [0, 1] to [-1, 1]\n                        float value = dataPoint.z * u_maxValue;  // transforming value from [0, 1] to [0, maxValue]\n\n                        float d = distance(v_position, coords);\n                        float w = 1.0 / pow(d, u_power);\n                        valSum += value * w;\n                        wSum += w;\n                        if (d < minD) {\n                            minD = d;\n                        }\n                    }\n                }\n                float interpolatedValue = valSum / wSum;\n                float alpha = 1.0;\n                if (minD > u_maxDistance) {\n                    alpha = 0.0;\n                }\n                vec4 color = vec4(interpolatedValue / u_maxValue, 0.0, 0.0, alpha);\n\n                gl_FragColor = color;\n            }\n        "),g={vertices:[[-1,1,0],[-1,-1,0],[1,-1,0],[1,1,0]],texturePositions:[[0,1],[0,0],[1,0],[1,1]],vertexIndices:[[0,1,2],[0,2,3]]};return new oM(m,[new _f(c,m,"a_position",g.vertices),new _f(c,m,"a_texturePosition",g.texturePositions)],[new Go(c,m,"u_power","float",[h]),new Go(c,m,"u_nrDataPoints","int",[a.length]),new Go(c,m,"u_maxValue","float",[l]),new Go(c,m,"u_maxDistance","float",[d])],[new f2e(c,m,"u_dataTexture",[a],0)],new p2e(c,g.vertexIndices))},x2e=(c,a,l,h,d)=>{const m=new sM(c,"\n            precision mediump float;\n            attribute vec2 a_position;\n            attribute vec2 a_textureCoord;\n            varying vec2 v_textureCoord;\n\n            void main() {\n                v_textureCoord = a_textureCoord;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_colorRampValues[15];\n            uniform vec3 u_colorRampColors[15];\n            uniform int u_nrColorRampValues;\n            uniform float u_maxValue;\n            uniform bool u_smooth;\n            uniform sampler2D u_valueTexture;\n            varying vec2 v_textureCoord;\n\n            vec3 valueToSmoothColor(in float value) {\n                if (value < u_colorRampValues[0]) {\n                    return u_colorRampColors[0];\n                }\n                for (int i = 1; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        float alpha = (value - u_colorRampValues[i-1]) / (u_colorRampValues[i] - u_colorRampValues[i-1]);\n                        vec3 color = alpha * (u_colorRampColors[i] - u_colorRampColors[i-1]) + u_colorRampColors[i-1];\n                        return color;\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            vec3 valueToStepColor(in float value) {\n                for (int i = 0; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        return u_colorRampColors[i];\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            void main() {\n                vec4 pixelData = texture2D(u_valueTexture, v_textureCoord);\n                float val = pixelData.r * u_maxValue;\n                float alpha = pixelData.w;\n                vec3 rgb = vec3(0.0, 0.0, 0.0);\n                if (alpha > 0.01) {\n                    if (u_smooth) {\n                        rgb = valueToSmoothColor(val);\n                    } else {\n                        rgb = valueToStepColor(val);\n                    }\n                }\n                gl_FragColor = vec4(rgb.x / 255.0, rgb.y / 255.0, rgb.z / 255.0, alpha);\n            }\n        ");return new oM(m,[new _f(c,m,"a_position",HS(2,2).vertices),new _f(c,m,"a_textureCoord",HS(2,2).texturePositions)],[new Go(c,m,"u_colorRampValues","float[]",a.map(y=>y.val)),new Go(c,m,"u_colorRampColors","vec3[]",da(a.map(y=>y.rgb))),new Go(c,m,"u_nrColorRampValues","int",[a.length]),new Go(c,m,"u_maxValue","float",[l]),new Go(c,m,"u_smooth","bool",[h?1:0])],[new SF(c,m,"u_valueTexture",d.fbo.texture,0)])},E2e=(c,a,l,h,d)=>{const f=new sM(c,"\n            precision mediump float;\n            attribute vec3 a_pos;\n            attribute vec2 a_posTexture;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2clip;\n            uniform vec4 u_bbox;\n            varying vec2 v_posTexture;\n\n            vec2 clipBbx2worldCoords(vec2 clipCoords, vec4 bbox) {\n                float xPerct = ( clipCoords.x + 1.0 ) / 2.0;\n                float yPerct = ( clipCoords.y + 1.0 ) / 2.0;\n                float xWorld = xPerct * (bbox.z - bbox.x) + bbox.x;\n                float yWorld = yPerct * (bbox.w - bbox.y) + bbox.y;\n                return vec2(xWorld, yWorld);\n            }\n\n            void main() {\n                v_posTexture = a_posTexture;\n                vec2 worldPos = clipBbx2worldCoords(a_pos.xy, u_bbox);\n                vec3 clipPos = u_pix2clip * u_world2pix * vec3(worldPos.xy, 1.0);\n                gl_Position = vec4(clipPos.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_texture;\n            varying vec2 v_posTexture;\n\n            void main() {\n                gl_FragColor = texture2D(u_texture, v_posTexture);\n            }\n        ");return new oM(f,[new _f(c,f,"a_pos",HS(2,2).vertices),new _f(c,f,"a_posTexture",HS(2,2).texturePositions)],[new Go(c,f,"u_world2pix","mat3",da(a)),new Go(c,f,"u_pix2clip","mat3",da(l)),new Go(c,f,"u_bbox","vec4",h)],[new SF(c,f,"u_texture",d.fbo.texture,0)])},M2e=c=>{const a=c.map(g=>g[0]),l=c.map(g=>g[1]),h=Math.min(...a),d=Math.max(...a);return[h,Math.min(...l),d,Math.max(...l)]},D2e=(c,a)=>{const l=[];for(let h=0;h<c.length;h++)l.push(c[h].concat(a[h]));return l},aM="type",fa="filtertype",Jr="id",wF="groupID",CF="groupName",xF="title",hl="EPSG:4326",dl="popup";let Ss=(()=>{class c{constructor(l,h){this.app=l,this.envInjector=h,this.hitTolerance=0,this.hitLayerCurr=null,this.hitLayerPrev=null,this.projectionChange=new Qe,this.dynamicPopupComponents=new Map,this.popupEvents=new Qe,this.filterLayerNoPopup=d=>{const f=d.get(dl);let m=!0;return f||(m=!1),f&&this.isPopupObj(f)&&!0===f.filterLayer&&(m=!1),m},this.map=new vO({controls:[]}),this.view=new sl,this.EPSG="EPSG:3857"}createMap(l){const f=new Dr({layers:[]});f.set(fa,"baselayers"),f.set(xF,"Base maps"),f.set(Jr,"ID_filtertype_baselayers");const m=new Dr({layers:[]});m.set(fa,"layers"),m.set(xF,"Layers"),m.set(Jr,"ID_filtertype_layers");const g=new Dr({layers:[]});g.set(fa,"overlays"),g.set(xF,"Overlays"),g.set(Jr,"ID_filtertype_overlays"),this.viewOptions={center:rl([0,0],hl,this.EPSG),zoom:0,projection:dn(this.EPSG)},this.view.constrainRotation&&(this.viewOptions.constrainRotation=this.view.constrainRotation),this.view.enableRotation&&(this.viewOptions.enableRotation=this.view.enableRotation),this.view.extent&&(this.viewOptions.extent=this.view.extent),this.view.constrainOnlyCenter&&(this.viewOptions.constrainOnlyCenter=this.view.constrainOnlyCenter),this.view.smoothExtentConstraint&&(this.viewOptions.smoothExtentConstraint=this.view.smoothExtentConstraint),this.view.getMaxResolution()&&(this.viewOptions.maxResolution=this.view.getMaxResolution()),this.view.getMinResolution()&&(this.viewOptions.minResolution=this.view.getMinResolution()),this.view.getMaxZoom()&&(this.viewOptions.maxZoom=this.view.getMaxZoom()),this.view.getMinZoom()&&(this.viewOptions.minZoom=this.view.getMinZoom()),this.view.multiWorld&&(this.viewOptions.multiWorld=this.view.multiWorld),this.view.constrainResolution&&(this.viewOptions.constrainResolution=this.view.constrainResolution),this.view.smoothResolutionConstraint&&(this.viewOptions.smoothResolutionConstraint=this.view.smoothResolutionConstraint),this.view.getResolution()&&(this.viewOptions.resolution=this.view.getResolution()),this.view.getResolutions()&&(this.viewOptions.resolutions=this.view.getResolutions()),this.view.rotation&&(this.viewOptions.rotation=this.view.rotation),this.view.zoomFactor&&(this.viewOptions.zoomFactor=this.view.zoomFactor);const y=new sl(this.viewOptions);return this.map.getLayerGroup().getLayers().clear(),[f,m,g].map(_=>this.map.addLayer(_)),this.map.setView(y),this.view=this.map.getView(),this.setProjection(this.EPSG),l&&this.map.setTarget(l),{map:this.map,view:this.view}}setHitTolerance(l){this.hitTolerance=l}getHitTolerance(){return this.hitTolerance}addBboxSelection(l,h,d,f){Object.assign({className:"ol-drag-select",condition:l},f);const g=new gj(f);return h&&g.on("boxstart",y=>{h(y)}),d&&g.on("boxend",y=>{const _=g.getGeometry().getExtent();d(_,y)}),this.map.addInteraction(g),g}getLayers(l){const h=l.toLowerCase();let d;return this.map.getLayers().getArray().forEach(f=>{f.get(fa)===h&&(d=f.getLayers().getArray())}),d}getLayersFromGroup(l,h,d=!1){const f=l.getLayers().getArray();let m=f;if(d){let g=[].concat(f);f.forEach(y=>{y instanceof Dr&&(g=g.concat(this.getLayersFromGroup(y,h,!0)))}),m=g}return h?m.filter(g=>g.get(fa)&&g.get(fa).toLowerCase()===h.toLowerCase()):m}getLayerByKey(l,h){const f=yF(this.getLayersFromGroup(this.map.getLayerGroup(),h)),m=[];if(f.forEach(g=>{g.get(l.key)&&g.get(l.key)===l.value&&-1===m.indexOf(g)&&m.push(g)}),!m.length){const g=this.getLayersFromGroup(this.map.getLayerGroup(),h,!0);g.length&&g.forEach(y=>{y.get(l.key)&&y.get(l.key)===l.value&&-1===m.indexOf(y)&&m.push(y)})}return 1===m.length?m[0]:null}setRecursiveKey(l,h,d=fa){l.set(d,h),l instanceof Dr&&l.getLayers().forEach(f=>{this.setRecursiveKey(f,h,d)})}addLayer(l,h){const d=h.toLowerCase();let f;return this.map.getLayers().getArray().forEach(m=>{m.get(fa)===d&&(this.isLayerInGroup(l,m)||(f=m.getLayers().getArray(),this.setRecursiveKey(l,d,fa),f.push(l),m.setLayers(new bo(f))))}),f}isLayerInGroup(l,h){return!!h.getLayers().getArray().filter(m=>m.get(Jr)===l.get(Jr)).length}getLayerGroups(l){const h=[];return this.map.getLayers().forEach(d=>{d instanceof Dr&&(l?d.get(fa)&&d.get(fa).toLowerCase()===l.toLowerCase()&&h.push(d):h.push(d))}),h}addLayers(l,h){const d=h.toLocaleLowerCase();let f;return this.getLayerGroups(d).forEach(g=>{g.getLayers().getLength()>0?(f=g.getLayers().getArray(),l.map(_=>{this.isLayerInGroup(_,g)||f.push(_)})):f=l,f.forEach(_=>{_ instanceof Dr&&this.setRecursiveKey(_,d,fa)}),g.setLayers(new bo(f))}),f}setLayers(l,h){const d=h.toLocaleLowerCase(),f=this.getLayerGroups(d);return l.forEach(m=>{m instanceof Dr&&this.setRecursiveKey(m,h.toLocaleLowerCase(),fa)}),f.forEach(m=>{this.cleanUpEventListeners(m,l),m.setLayers(new bo(l))}),l}cleanUpEventListeners(l,h){const d=l.getLayers().getArray().filter(f=>!h.map(m=>m.get(Jr)).includes(f.get(Jr)));this.removeListenersFromOldLayers(d),d.forEach(f=>l.getLayers().remove(f))}addEventsToLayer(l,h,d){l.events&&(l.events.layer&&l.events.layer.forEach(f=>{h.getListeners(f.event)||h.on(f.event,f.listener)}),l.events.source&&l.events.source.forEach(f=>{d.getListeners(f.event)||d.on(f.event,f.listener)}))}removeListenersFromOldLayers(l){const h=d=>{if("function"==typeof d.getSource){const f=d.getSource();f&&(f instanceof SS&&f.dispose(),f.hasListener()&&f.disposeInternal())}d.hasListener()&&d.disposeInternal()};l.forEach(d=>{d instanceof Dr?d.getLayers().forEach(f=>{h(f)}):d instanceof LP&&h(d)})}getLayerGroupForLayer(l){const h=this.getLayersFromGroup(this.map.getLayerGroup(),null,!0);h.push(this.map.getLayerGroup());let d=null;return h.forEach(f=>{if(f instanceof Dr){const g=this.getLayersFromGroup(f).find(y=>y===l);g&&(d={group:f,layer:g})}}),d}removeLayerByKey(l,h){const d=h.toLocaleLowerCase(),f=this.getLayerByKey(l,d);if(f){const m=this.getLayerGroupForLayer(f);if(m.group){const g=this.getLayersFromGroup(m.group).filter(y=>y!==f);m.group.setLayers(new bo(g))}}}updateLayerByKey(l,h,d){const f=d.toLocaleLowerCase();this.map.getLayers().forEach(m=>{if(m.get(fa)===f){const g=m.getLayers();g.forEach((y,_)=>{if(y.get(l.key)&&y.get(l.key)===l.value){const v=h.getProperties(),b=h.getExtent(),S=h.getMaxZoom(),T=h.getMinZoom(),x=h.getOpacity(),E=h.getVisible(),I=h.getZIndex();if(y instanceof lo&&h instanceof lo){const M=h.getSource();y.setSource(M)}v&&y.setProperties(v),b&&y.setExtent(b),S&&y.setMaxZoom(S),T&&y.setMinZoom(T),x&&y.setOpacity(x),E&&y.setVisible(E),I&&zS(y,I),y.changed(),g.setAt(_,y)}}),m.setLayers(g)}})}removeAllLayers(l){const h=l.toLowerCase();let d;this.map.getLayers().getArray().forEach(f=>{f.get(fa)===h&&(d=f.getLayers(),d.clear())})}setUkisLayers(l,h,d){const f=h.toLowerCase(),m=[];if(l.length<1&&"baselayers"!==f?this.removeAllLayers(f):l.forEach((g,y)=>{const _=this.create_layers(g);_&&(zS(_,y,d),m.push(_))}),m.length>0)return this.setLayers(m,f),{type:f,layers:m}}setUkisLayer(l,h){h||(h=l.filtertype);const d=h.toLowerCase(),m=this.getLayers(d).find(y=>y.get(Jr)===l.id),g=this.create_layers(l);m?(this.removeLayerByKey({key:Jr,value:m.get(Jr)},h),this.addLayer(g,h)):this.addLayer(g,h)}updateUkisLayer(l,h){h||(h=l.filtertype);const d=h.toLowerCase(),m=this.getLayers(d).find(y=>y.get(Jr)===l.id),g=this.create_layers(l);g&&this.updateLayerByKey({key:Jr,value:m.get(Jr)},g,h)}create_layers(l){let h;switch(l.type){case Nd:h=this.create_xyz_layer(l);break;case yc:h=this.create_wms_layer(l);break;case _c:h=this.create_wmts_layer(l);break;case el:h=this.create_tms_layer(l);break;case au:h=this.create_geojson_layer(l);break;case mh:h=this.create_kml_layer(l);break;case gh:h=this.create_wfs_layer(l);break;case"custom":h=this.create_custom_layer(l);break;case W9:h=this.create_stacked_layer(l)}return h}createOlLayerOptions(l,h,d){d&&(l.attribution&&d.setAttributions([l.attribution]),l.continuousWorld&&(d.wrapX_=l.continuousWorld),l.popup&&!l.crossOrigin&&null!==l.crossOrigin&&this.sourceSetCross(d),(l.crossOrigin||null===l.crossOrigin)&&this.sourceSetCross(d));const f={opacity:l.opacity||1,visible:l.visible,zIndex:1,id:l.id,name:l.name,filtertype:l.filtertype,type:h,legendImg:l.legendImg};return d&&(f.source=d),l.popup&&(f.popup=l.popup,f.className=l.id),l.maxResolution&&(f.maxResolution=l.maxResolution),l.minResolution&&(f.minResolution=l.minResolution),l.maxZoom&&(f.maxZoom=l.maxZoom),l.minZoom&&(f.minZoom=l.minZoom),l.bbox&&(f.extent=hu(l.bbox.slice(0,4),hl,this.getProjection().getCode())),f}create_xyz_layer(l){const h={wrapX:!1};l.crossOrigin&&(h.crossOrigin=l.crossOrigin);const d=new OX(h),f=this.createOlLayerOptions(l,"xyz",d),g=new gu(Object.assign(f,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(l,g),this.setCrossOrigin(l,g),this.addEventsToLayer(l,g,d),g}create_tms_layer(l){let h=null;if(l instanceof ra)return h=this.create_xyz_layer(l),h.set("type","tms"),h;if(l instanceof qr){const d=new Kx({format:new sE,tileGrid:rS({minZoom:l.minZoom||void 0,maxZoom:l.maxZoom||void 0}),url:l.url,wrapX:!1}),f=this.createOlLayerOptions(l,"tms",d);h=new Xy(Object.assign(f,{declutter:!0,renderMode:"hybrid"})),this.setCrossOrigin(l,h),this.addEventsToLayer(l,h,d);const g=l?.options?.style,y=l?.options?.styleSource;return g&&y&&(HCe(h,g),GN(h,g,y).then(_=>{this.setSubdomains(l,h)})),h}}create_wms_layer(l){let h;return"true"===l.params?.TILED||null==l.params?.TILED?h=this.create_tiled_wms_layer(l):"false"===l.params?.TILED&&(h=this.create_image_wms_layer(l)),h}create_tiled_wms_layer(l){const h={params:Object.assign({},this.keysToUppercase(l.params)),wrapX:!1};l.tileSize&&(h.tileGrid=this.getTileGrid("default",null,l.tileSize),delete h.params.tileSize),l.crossOrigin&&(h.crossOrigin=l.crossOrigin);const d=new bS(h),m=this.createOlLayerOptions(l,"wms",d),g=new gu(Object.assign(m,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(l,g),this.addEventsToLayer(l,g,d),g}create_image_wms_layer(l){const h={params:Object.assign({},this.keysToUppercase(l.params)),url:l.url},d=new jN(h),f=this.createOlLayerOptions(l,"wms",d),g=new qd(Object.assign(f,{}));return this.addEventsToLayer(l,g,d),g}create_wmts_layer(l){if(l instanceof Da){let h=this.getTileGrid("wmts"),d=this.EPSG;l.params.matrixSetOptions&&(d=l.params.matrixSetOptions.matrixSet,"resolutions"in l.params.matrixSetOptions?h=this.getTileGrid("wmts",null,l.tileSize,null,l.params.matrixSetOptions.resolutions):("resolutionLevels"in l.params.matrixSetOptions||"tileMatrixPrefix"in l.params.matrixSetOptions)&&(h=this.getTileGrid("wmts",l.params.matrixSetOptions.resolutionLevels,l.tileSize,l.params.matrixSetOptions.tileMatrixPrefix,null)),"matrixIds"in l.params.matrixSetOptions&&(h=this.getTileGrid("wmts",null,l.tileSize,null,null,l.params.matrixSetOptions.matrixIds)));let f={url:l.url,tileGrid:h,matrixSet:d,wrapX:!1,layer:l.params.layer,style:l.params.style};f=Object.assign({},f,l.params),l.crossOrigin&&(f.crossOrigin=l.crossOrigin);const m=new axe(f),g=this.createOlLayerOptions(l,"wmts",m),_=new gu(Object.assign(g,{}));return this.setSubdomains(l,_),this.setCrossOrigin(l,_),this.addEventsToLayer(l,_,m),_}console.error(`layer with id: ${l.id} and type ${l.type} is no instanceof WmtsLayer!`)}create_wfs_layer(l){let h=null;h=0===l.url.indexOf("http://")||0===l.url.indexOf("https://")?new URL(l.url):new URL(l.url,window.location.origin),h.searchParams.set("srsname",this.EPSG);const d=new _r({format:new Ra,url:h.toString()}),f=this.createOlLayerOptions(l,"wfs",d),m={};l.options&&Object.assign(m,l.options);const g=new yu(Object.assign(f,m));return l.cluster&&this.setCluster(l,g,d,{}),this.setSubdomains(l,g),this.setCrossOrigin(l,g),this.addEventsToLayer(l,g,d),g}create_geojson_layer(l){let h;l.data?h=new _r({features:this.geoJsonToFeatures(l.data),format:new Ra,wrapX:!1}):l.url&&(h=new _r({url:l.url,format:new Ra({dataProjection:hl,featureProjection:this.EPSG}),wrapX:!1}));const d=this.createOlLayerOptions(l,"geojson",h),f={};l.options&&Object.assign(f,l.options);const m=new yu(Object.assign(d,f));return l.cluster&&this.setCluster(l,m,h,{}),this.setCrossOrigin(l,m),this.addEventsToLayer(l,m,h),m}create_kml_layer(l){let h;l.data?h=new _r({features:new GE({extractStyles:!0}).readFeatures(l.data,{dataProjection:hl,featureProjection:this.EPSG}),format:new GE,wrapX:!1}):l.url&&(h=new _r({url:l.url,format:new GE({extractStyles:!0,crossOrigin:l.crossOrigin&&null===l.crossOrigin?l.crossOrigin:"anonymous"}),wrapX:!1}));const d=this.createOlLayerOptions(l,"kml",h),f={};l.options&&Object.assign(f,l.options);const m=new yu(Object.assign(d,f));return l.cluster&&this.setCluster(l,m,h,{}),this.setCrossOrigin(l,m),this.addEventsToLayer(l,m,d.source),m}setCrossOrigin(l,h){if(h instanceof lo){const d=h.getSource();l.popup&&!l.crossOrigin&&null!==l.crossOrigin&&this.sourceSetCross(d),(l.crossOrigin||null===l.crossOrigin)&&this.sourceSetCross(d)}}setCluster(l,h,d,f){if(l.cluster){const m={};"object"==typeof l.cluster&&Object.assign(m,l.cluster),m.source=d;const g=new pm(m);h.setSource(g),h.setStyle(y=>{const _=y.get("features").length;let v=f[_];return v||(v=new er({image:new Xp({radius:10,stroke:new _s({color:"#fff"}),fill:new yr({color:"#3399CC"})}),text:new Xd({text:_.toString(),fill:new yr({color:"#fff"})})}),f[_]=v),v})}}setSubdomains(l,h){if(l instanceof qr||l instanceof ra){const d=h.getSource();if(l.subdomains){if("wfs"===l.type&&d instanceof _r)l.url=l.url.replace("{s}",`${l.subdomains[0]}-${l.subdomains[l.subdomains.length-1]}`),d.setUrl(l.url);else if(!(d instanceof _r)){const f=l.subdomains.map(m=>l.url.replace("{s}",`${m}`));d.setUrls(f)}}else d.setUrl(l.url)}}sourceSetCross(l){(l instanceof d_||l instanceof cS||l instanceof HO)&&(l.crossOrigin="anonymous",l.crossOrigin_="anonymous")}create_custom_layer(l){if(l.custom_layer){const h=l.custom_layer;if(h instanceof lo){const f=h.getSource();l.attribution&&f.setAttributions([l.attribution]),f.wrapX_=!!l.continuousWorld&&l.continuousWorld,this.setCrossOrigin(l,h),this.addEventsToLayer(l,h,f),f instanceof SS&&h.on("change:source",m=>{m.oldValue.dispose()})}else h instanceof Dr?h.getLayers().forEach(f=>{f.set(wF,l.id),f.set(CF,l.name);const m=`${l.id}_${an(f)}`;if(f.get(Jr)||f.set(Jr,m),f instanceof lo&&(this.setCrossOrigin(l,f),this.addEventsToLayer(l,f,f.getSource())),l.popup&&!f.get(dl)&&(f.set(dl,l.popup),"ol-layer"===f.getClassName()&&(f.className_=m)),l.bbox){const g=hu(l.bbox.slice(0,4),hl,this.getProjection().getCode());f.setExtent(g)}}):console.error(`The custom_layer of ${l.id} in not a openlayers Layer`);l.maxResolution&&h.setMaxResolution(l.maxResolution),l.minResolution&&h.setMinResolution(l.minResolution),l.maxZoom&&h.setMaxZoom(l.maxZoom),l.minZoom&&h.setMinZoom(l.minZoom);const d={type:"custom",name:l.name,id:l.id,visible:l.visible,legendImg:l.legendImg,opacity:l.opacity||1,zIndex:1};if(l.popup&&!(h instanceof Dr)&&(d.popup=l.popup,h.className_=l.id),l.bbox){const f=hu(l.bbox.slice(0,4),hl,this.getProjection().getCode());h.setExtent(f)}return h.setProperties(d),h}console.log("attribute custom_layer not set on layer type custom!",l)}create_stacked_layer(l){if(l instanceof ux){const h=l.layers.map(g=>(g.visible=l.visible,g.opacity=l.opacity,l.popup&&(g.popup=l.popup),l.events&&(g.events=l.events),this.create_layers(g))),d=this.createOlLayerOptions(l,"custom");return h.forEach(g=>{g.set(wF,l.id),g.set(CF,l.name)}),new Dr(Object.assign(d,{layers:h}))}console.log("layer is not of type StackedLayer!",l)}resolutionsFromExtent(l,h,d){const f=h,m=gr(l),g=Kn(l),y=Math.max(g/d,m/d),_=f+1,v=new Array(_);for(let b=0;b<_;++b)v[b]=y/Math.pow(2,b);return v}matrixIdsFromResolutions(l,h){return Array.from(Array(l).keys()).map(d=>h?`${h}:${d}`:d)}getTileGrid(l="default",h,d,f,m,g){const y=h||42,_=d||256,v=f||"",b=this.getProjection().getExtent(),S=this.resolutionsFromExtent(b,y,_),T=this.matrixIdsFromResolutions(S.length,v),x={extent:b,origin:Tc(b),resolutions:m||S,tileSize:[_,_]};return"wmts"===l?(x.matrixIds=g||T,new lxe(x)):"default"===l?new Yy(x):void 0}isPopupObj(l){return l&&"object"==typeof l&&!Array.isArray(l)}isPopupObjMove(l){return this.isPopupObj(l)&&"move"===l.event}isPopupObjClick(l){return this.isPopupObj(l)&&"click"===l.event}isPopupObjArray(l){return Array.isArray(l)&&l.length&&this.isPopupObj(l[0])}isPopupStringArray(l){return Array.isArray(l)&&l.length&&"string"==typeof l[0]}eventIsBrowserEvent(l,h){return"move"===l&&"pointermove"===h.type||"click"===l&&"click"===h.type||void 0}layersOnMapEvent(l){let h=!1;const d=this.map.getAllLayers();let f=d.length;const m=new Map;let g=null;for(;f--;){const y=d[f];let _=y.getVisible(),v=y.getOpacity();const b=y.get(wF);if(b){const T=this.getLayerByKey({key:Jr,value:b});_=T.getVisible(),v=T.getOpacity()}const S=y.get(dl);if(this.checkForPopupAsObservable(y,_,v,S,m),_&&0!==v&&this.filterLayerExtent(y,l.pixel)&&!S)break;if(this.filterLayerNoPopup(y)&&y.getData&&y.getData(l.pixel)&&this.checkIsRaster(y)){const T=y.getData(l.pixel);let x;if((T instanceof Uint8ClampedArray||T instanceof Uint8Array||T instanceof Float32Array)&&(x=T[3]),x||T instanceof DataView){g={layer:y,color:T};break}}else if(this.filterLayerNoPopup(y)&&this.filterLayerExtent(y,l.pixel)&&this.checkIsVector(y)){const T=this.map.getFeaturesAtPixel(l.pixel,{layerFilter:x=>y.get(Jr)===x.get(Jr)});if(T.length){g={layer:y,feature:T[0]};break}}}if(g){const y=g.layer.get(dl);this.hitLayerCurr=g.layer.get(Jr),this.hitLayerPrev||(this.hitLayerPrev=this.hitLayerCurr),(g.color||g.feature)&&(h=!0),this.hitLayerPrev&&this.hitLayerPrev!==this.hitLayerCurr&&(h=!1,this.hitLayerPrev=this.hitLayerCurr),this.checkTopLayerEvent(l,y)&&this.layerOnEvent(l,g.layer,g.color,g.feature)}h?this.map.getTargetElement().style.cursor="pointer":(this.publishNullPropertiesAsObservable(m,l),this.removeAllPopups(y=>"pointermove"===y.get("addEvent")),this.map.getTargetElement().style.cursor="")}checkForPopupAsObservable(l,h,d,f,m){h&&0!==d&&f&&(this.isPopupObj(f)&&f.asObservable?m.set(l.get(Jr),l):this.isPopupObjArray(f)&&f.forEach(g=>{g.asObservable&&m.set(l.get(Jr),l)}))}publishNullPropertiesAsObservable(l,h){l.size&&l.forEach(d=>{const f=d.get(dl),m=[];this.isPopupObj(f)&&f.asObservable?m.push(f):this.isPopupObjArray(f)&&f.forEach(g=>{g.asObservable&&m.push(g)}),m.forEach(g=>{this.eventIsBrowserEvent(g.event||"click",h)&&this.popupEvents.next({popupObj:g,popupParams:{layerId:d.get(Jr),layerName:d.get("name"),mapEvent:h,layer:d,properties:null}})})})}checkTopLayerEvent(l,h){let d=null;const f=(m,g)=>{g.event?this.eventIsBrowserEvent(g.event,m)&&this.isPopupObjClick(g)?d="click":this.eventIsBrowserEvent(g.event,m)&&this.isPopupObjMove(g)&&(d="move"):"click"===m.type&&(d="click")};return"boolean"==typeof h?!0===h&&"click"===l.type&&(d="click"):this.isPopupStringArray(h)?"click"===l.type&&(d="click"):this.isPopupObjArray(h)?h.map(m=>{f(l,m)}):f(l,h),d}checkIsRaster(l){return l instanceof Rj||l instanceof Cj}checkIsVector(l){return l instanceof zy&&!this.checkIsRaster(l)}layerOnEvent(l,h,d,f){this.checkIsRaster(h)?this.rasterOnEvent(l,h,d):this.checkIsVector(h)&&this.vectorOnEvent(l,h,f)}filterLayerExtent(l,h){let d=!0;const f=l.getExtent();return f&&(lu(f,this.map.getCoordinateFromPixel(h))||(d=!1)),d}vectorOnEvent(l,h,d){if(h&&d){const f=h.get(dl);let m={};const y=d.getProperties().features;if(y&&1===y.length)m=y[0].getProperties();else{if(y&&y.length>1){if("click"===l.type){const _=this.getFeaturesExtent(y);return this.setExtent(_),!1}return!0}m=d.getProperties()}this.prepareAddPopup(h,l,f,d,m)}}rasterOnEvent(l,h,d){const f=h.get(dl);f&&this.prepareAddPopup(h,l,f,null,null,d)}prepareAddPopup(l,h,d,f,m,g){const y=l.getProperties(),_={layerId:y.id,layerName:y.name||y[CF]||null,mapEvent:h,layer:l,properties:m?Object.assign({},m):{}};_.properties?.geometry&&delete _.properties.geometry,f&&(_.feature=f),g&&(_.color=g);const v=T=>{T&&T.filterkeys&&(_.properties=Object.keys(_.properties).filter(x=>T.filterkeys.includes(x)).reduce((x,E)=>(x[E]=_.properties[E],x),{}))};this.isPopupStringArray(d)?_.properties=Object.keys(_.properties).filter(T=>d.includes(T)).reduce((T,x)=>(T[x]=_.properties[x],T),{}):this.isPopupObjArray(d)?v(d.find(x=>this.eventIsBrowserEvent(x.event,h))):this.isPopupObj(d)&&v(d);const b=T=>{if(T.properties){const x=Object.keys(T.properties);Array.isArray(x)&&(_.properties=Object.keys(_.properties).reduce((E,I)=>{const M=T.properties[I];return M?E[M]=_.properties[I]:E[I]=_.properties[I],E},{}))}};this.isPopupObjArray(d)?d.forEach(T=>{this.eventIsBrowserEvent(T.event,h)&&b(T)}):this.isPopupObj(d)&&b(d);const S=T=>{"asyncPopup"in T?T.asyncPopup(_,x=>{T.asObservable?this.publishPopupEvent(T,_,x):this.addPopup(_,T,x,T.event,T.single)}):T.asObservable?this.publishPopupEvent(T,_):this.addPopup(_,T,null,T.event,T.single)};"boolean"==typeof d||this.isPopupStringArray(d)?this.addPopup(_):this.isPopupObjArray(d)?d.forEach(T=>{this.eventIsBrowserEvent(T.event,h)&&S(T)}):d&&S(d)}publishPopupEvent(l,h,d){d&&(h.properties=Object.assign(h.properties,d)),this.popupEvents.next({popupObj:l,popupParams:h})}addPopup(l,h,d,f,m){const g=l.layer.get(dl),y=l.layer.get(Jr),_="popup_move_ID",v="move_ID_L_F",b=this.getPopups().find(x=>x.getId()===_),S=l.mapEvent;let T=null;if("move"===f&&(l.color?T=`${y}:${l.color.toString()}`:l.feature?T=`${y}:${an(l.feature)}`:l.layer&&(T=`${y}:${an(l.layer)}`)),"move"===f&&"pointermove"===S.type&&b){let x;const E=l.feature;if(x=E&&"Point"===E.getGeometry()?.getType()?E.getGeometry().getCoordinates():S.coordinate,T!==b.get(v)){const I=this.createPopupContainer(b,l,h,d,f);b.setElement(I)}b.setPosition(x),b.getElement().parentElement.style.zIndex="1"}else if("pointermove"!==S.type||f)if("pointermove"===S.type&&"click"===f)b&&this.removeAllPopups(x=>"pointermove"===x.get("addEvent"));else{let x=null;x="move"===f?_:l.feature?`${y}:${an(l.feature)}`:l.layer?`${y}:${an(l.layer)}`:`${y}:popup_${(new Date).getTime()}`;const E={id:x,autoPan:{animation:{duration:250}},positioning:"bottom-center",stopEvent:!0,insertFirst:!1};let I=E;if(this.isPopupObjArray(g)){const B=g.find(G=>this.eventIsBrowserEvent(G.event,S));B.options&&(I=Object.assign(E,B.options))}else this.isPopupObj(g)&&g.options&&(I=Object.assign(E,g.options));const M=new wj(I);T&&M.set(v,T),m&&this.removeAllPopups(B=>{const $=B.getId().toString().split(":")[0];return!$||(y===$?y===$:void 0)});const D=this.getPopups().find(B=>B.getId()===M.getId()&&M.getId()!==_);D&&(this.map.removeOverlay(D),this.destroyDynamicPopupComponent(D.getId().toString()));const L=this.createPopupContainer(M,l,h,d,f);let P;M.getId()===_?M.set("addEvent","pointermove"):M.set("addEvent",S.type),M.set(aM,dl),M.setElement(L);const F=l.feature;P=F&&"Point"===F.getGeometry()?.getType()?F.getGeometry().getCoordinates():S.coordinate,M.setPosition(P),b&&"move"===f||this.map.addOverlay(M)}else b&&this.removeAllPopups(x=>"pointermove"===x.get("addEvent"))}createPopupContainer(l,h,d,f,m){const g=document.createElement("div");g.className="ol-popup-content";let y="";if(d?.popupFunction){const v=d.popupFunction(h);y="string"==typeof v?v:this.createPopupHtml(v)}else f?y="string"==typeof f?f:this.createPopupHtml(f):Object.keys(h.properties).length&&(y=this.createPopupHtml(h.properties));if(g.innerHTML=y,d?.dynamicPopup){const v=l.getId().toString();this.destroyDynamicPopupComponent(v),this.createDynamicPopupComponent(v,g,h,d)}const _=document.createElement("div");if(_.className="ol-popup",_.id=l.getId().toString(),_.style.display="block",!m||"move"!==m){const v=document.createElement("a");v.className="ol-popup-closer",_.appendChild(v);const b=()=>{v.removeEventListener("click",b,!1),this.map.removeOverlay(l),this.destroyDynamicPopupComponent(l.getId().toString())};v.addEventListener("click",b,!1)}return _.appendChild(g),_}removeAllPopups(l){let h=this.getPopups();l&&(h=this.getPopups().filter(l)),h.forEach(d=>{d.get(aM)===dl&&(this.map.removeOverlay(d),this.destroyDynamicPopupComponent(d.getId().toString()))})}hideAllPopups(l,h){let d=this.getPopups();h&&(d=this.getPopups().filter(h)),d.forEach(f=>{if(f.get(aM)===dl){const m=f.getElement();l?m.classList.add("hidden"):m.classList.remove("hidden")}})}createPopupHtml(l){let h="<table>";for(const d in l)l.hasOwnProperty(d)&&(h+='<tr><td style="vertical-align: top; padding-right: 7px;"><b>'+d+": </b></td><td>"+l[d]+"</td></tr>");return h+="</table>",h}getPopups(){const l=[];return this.map.getOverlays().getArray().slice(0).forEach(h=>{h.get(aM)===dl&&l.push(h)}),l}destroyDynamicPopupComponent(l){this.dynamicPopupComponents.has(l)&&(this.dynamicPopupComponents.get(l).destroy(),this.dynamicPopupComponents.delete(l))}createDynamicPopupComponent(l,h,d,f){const m=function Tpe(c,a){const l=sr(c),h=a.elementInjector||jw();return new V0(l).create(h,a.projectableNodes,a.hostElement,a.environmentInjector)}(f.dynamicPopup.component,{environmentInjector:this.envInjector,hostElement:h});if(f.dynamicPopup.getAttributes){const g=f.dynamicPopup.getAttributes(d);for(const y in g)"undefined"!==g[y]&&(m.instance[y]=g[y])}this.app.attachView(m.hostView),this.dynamicPopupComponents.set(l,m)}setExtent(l,h,d){const f=dn(h?hl:this.EPSG),m=hu(l.slice(0,4),f,this.getProjection().getCode()),g={size:this.map.getSize()};return d&&Object.assign(g,d),this.map.getView().fit(m,d),m}setCenter(l,h){const f=rl(l,dn(h?hl:this.EPSG),this.getProjection().getCode());return this.map.getView().setCenter(f),f}getCenter(l){const h=dn(l?hl:this.EPSG),d=dn(this.getProjection().getCode());return rl(this.map.getView().getCenter(),d,h)}getFeaturesExtent(l,h){const d=l[0].getGeometry().getExtent().slice(0);if(l.forEach(f=>{DP(d,f.getGeometry().getExtent())}),h){const f=dn(hl);return hu(d,this.getProjection().getCode(),f)}return d}getCurrentExtent(l){const h=dn(l?hl:this.EPSG);return hu(this.map.getView().calculateExtent(),this.getProjection().getCode(),h)}setZoom(l){this.map.getView().setZoom(l)}getZoom(){return this.map.getView().getZoom()}zoomInOut(l,h){const d=this.map.getView();if(!d)return;const f=h?.zoomStep||1,m="+"===l?f:-1*f,g=d.getZoom();if(void 0!==g){const y=d.getConstrainedZoom(g+m);d.getAnimating()&&d.cancelAnimations(),d.animate({zoom:y,duration:h?.duration||250,easing:h?.easing||Vp},_=>{h.callback&&h.callback(_)})}}geoJsonToFeature(l){return new Ra({dataProjection:hl,featureProjection:this.EPSG}).readFeature(l)}geoJsonToFeatures(l){return new Ra({dataProjection:hl,featureProjection:this.EPSG}).readFeatures(l)}getProjection(){return this.map.getView().getProjection()}reprojectFeatures(l,h,d){l.getFeatures().forEach(f=>{f.getGeometry().transform(h,d)})}setProjection(l){if(l){let h={};if(this.viewOptions&&(h=this.viewOptions,h.minResolution=void 0,h.maxResolution=void 0,h.resolution=void 0,h.resolutions=void 0),l instanceof Fp){h.projection=l;const m=rl(this.map.getView().getCenter(),this.map.getView().getProjection(),l);h.center=m,h.zoom=this.map.getView().getZoom()}else"string"==typeof l&&(h.projection=l,h.center=this.map.getView().getCenter(),h.zoom=this.map.getView().getZoom());const d=new sl(h),f=this.EPSG;this.EPSG=d.getProjection().getCode(),this.map.setView(d),this.view=this.map.getView(),this.map.getLayers().getArray().forEach(m=>{m.getLayers().getArray().forEach(g=>{if(g instanceof lo){let y=g.getSource();for(;y.source;)y=y.source;y instanceof _r&&this.reprojectFeatures(y,f,this.EPSG)}})}),this.projectionChange.next(this.getProjection())}}registerProjection(l){iM.defs(l.code,l.proj4js),iF(iM)}getOlProjection(l){return new Fp({code:l.code,extent:l.extent?l.extent:void 0,worldExtent:l.worldExtent?l.worldExtent:void 0,global:!!l.global&&l.global,units:l.units?l.units:void 0})}keysToUppercase(l){return Object.keys(l).forEach(h=>{const d=h.toUpperCase();d!==h&&(l[d]=l[h],delete l[h])}),l}}return c.\u0275fac=function(l){return new(l||c)(Oe(dy),Oe(ih))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class N2e{constructor(a){this.total=a}call(a,l){return l.subscribe(new F2e(a,this.total))}}class F2e extends ee{constructor(a,l){super(a),this.total=l,this.count=0}_next(a){++this.count>this.total&&this.destination.next(a)}}const EF="units",k2e=[1,2,5],jS=25.4/.28,B2e=class V2e extends Hd{constructor(a){a=a||{};const l=document.createElement("div");l.style.pointerEvents="none",super({element:l,render:a.render,target:a.target});const h=void 0!==a.className?a.className:a.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=h+"-inner",this.element.className=h+" "+Hp,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==a.minWidth?a.minWidth:64,this.maxWidth_=a.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(EF,this.handleUnitsChanged_),this.setUnits(a.units||"metric"),this.scaleBar_=a.bar||!1,this.scaleBarSteps_=a.steps||4,this.scaleBarText_=a.text||!1,this.dpi_=a.dpi||void 0}getUnits(){return this.get(EF)}handleUnitsChanged_(){this.updateElement_()}setUnits(a){this.set(EF,a)}setDpi(a){this.dpi_=a}updateElement_(){const a=this.viewState_;if(!a)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const l=a.center,h=a.projection,d=this.getUnits();let m=Lx(h,a.resolution,l,"degrees"==d?"degrees":"m");const g=this.minWidth_*(this.dpi_||jS)/jS,y=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||jS)/jS:void 0;let _=g*m,v="";if("degrees"==d){const L=_h.degrees;_*=L,_<L/60?(v="\u2033",m*=3600):_<L?(v="\u2032",m*=60):v="\xb0"}else"imperial"==d?_<.9144?(v="in",m/=.0254):_<1609.344?(v="ft",m/=.3048):(v="mi",m/=1609.344):"nautical"==d?(m/=1852,v="NM"):"metric"==d?_<.001?(v="\u03bcm",m*=1e6):_<1?(v="mm",m*=1e3):_<1e3?v="m":(v="km",m/=1e3):"us"==d?_<.9144?(v="in",m*=39.37):_<1609.344?(v="ft",m/=.30480061):(v="mi",m/=1609.3472):En(!1,33);let S,T,x,E,I,M,b=3*Math.floor(Math.log(g*m)/Math.log(10));for(;;){x=Math.floor(b/3);const L=Math.pow(10,x);if(S=k2e[(b%3+3)%3]*L,T=Math.round(S/m),isNaN(T))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==y&&T>=y){S=E,T=I,x=M;break}if(T>=g)break;E=S,I=T,M=x,++b}const D=this.scaleBar_?this.createScaleBar(T,S,v):S.toFixed(x<0?-x:0)+" "+v;this.renderedHTML_!=D&&(this.innerElement_.innerHTML=D,this.renderedHTML_=D),this.renderedWidth_!=T&&(this.innerElement_.style.width=T+"px",this.renderedWidth_=T),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(a,l,h){const d=this.getScaleForResolution(),f=d<1?Math.round(1/d).toLocaleString()+" : 1":"1 : "+Math.round(d).toLocaleString(),m=this.scaleBarSteps_,g=a/m,y=[this.createMarker("absolute")];for(let v=0;v<m;++v)y.push(`<div><div class="ol-scale-singlebar ${v%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even"}" style="width: ${g}px;"></div>`+this.createMarker("relative")+(v%2==0||2===m?this.createStepText(v,a,!1,l,h):"")+"</div>");return y.push(this.createStepText(m,a,!0,l,h)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${a}px;">`+f+"</div>":"")+y.join("")}createMarker(a){return`<div class="ol-scale-step-marker" style="position: ${a}; top: ${"absolute"===a?3:-10}px;"></div>`}createStepText(a,l,h,d,f){const g=(0===a?0:Math.round(d/this.scaleBarSteps_*a*100)/100)+(0===a?"":" "+f);return`<div class="ol-scale-step-text" style="margin-left: ${0===a?-3:l/this.scaleBarSteps_*-1}px;text-align: ${0===a?"left":"center"};min-width: ${0===a?0:l/this.scaleBarSteps_*2}px;left: ${h?l+"px":"unset"};">`+g+"</div>"}getScaleForResolution(){return Lx(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||jS)}render(a){const l=a.frameState;this.viewState_=l?l.viewState:null,this.updateElement_()}},MF="projection",d$="coordinateFormat",z2e=class U2e extends Hd{constructor(a){a=a||{};const l=document.createElement("div");l.className=void 0!==a.className?a.className:"ol-mouse-position",super({element:l,render:a.render,target:a.target}),this.addChangeListener(MF,this.handleProjectionChanged_),a.coordinateFormat&&this.setCoordinateFormat(a.coordinateFormat),a.projection&&this.setProjection(a.projection),this.renderOnMouseOut_=void 0!==a.placeholder,this.placeholder_=this.renderOnMouseOut_?a.placeholder:"&#160;",this.renderedHTML_=l.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==a.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(d$)}getProjection(){return this.get(MF)}handleMouseMove(a){const l=this.getMap();this.updateHTML_(l.getEventPixel(a))}handleMouseOut(a){this.updateHTML_(null)}setMap(a){if(super.setMap(a),a){const l=a.getViewport();this.listenerKeys.push(Zn(l,"pointermove",this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Zn(l,"pointerout",this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(a){this.set(d$,a)}setProjection(a){this.set(MF,dn(a))}updateHTML_(a){let l=this.placeholder_;if(a&&this.mapProjection_){if(!this.transform_){const f=this.getProjection();this.transform_=f?vh(this.mapProjection_,f):BP}const d=this.getMap().getCoordinateFromPixelInternal(a);if(d){const f=Fb();f&&(this.transform_=vh(this.mapProjection_,f)),this.transform_(d,d),this.wrapX_&&Dx(d,f||this.getProjection()||this.mapProjection_);const m=this.getCoordinateFormat();l=m?m(d):d.toString()}}(!this.renderedHTML_||l!==this.renderedHTML_)&&(this.element.innerHTML=l,this.renderedHTML_=l)}render(a){const l=a.frameState;l?this.mapProjection_!=l.viewState.projection&&(this.mapProjection_=l.viewState.projection,this.transform_=null):this.mapProjection_=null}},f$=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function m$(c){const a=c.body;return!!(a.webkitRequestFullscreen||a.requestFullscreen&&c.fullscreenEnabled)}function g$(c){return!(!c.webkitIsFullScreen&&!c.fullscreenElement)}function y$(c){c.requestFullscreen?c.requestFullscreen():c.webkitRequestFullscreen&&c.webkitRequestFullscreen()}const W2e=class G2e extends Hd{constructor(a){a=a||{},super({element:document.createElement("div"),target:a.target}),this.keys_=void 0!==a.keys&&a.keys,this.source_=a.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==a.className?a.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==a.activeClassName?a.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==a.inactiveClassName?a.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const l=void 0!==a.label?a.label:"\u2922";this.labelNode_="string"==typeof l?document.createTextNode(l):l;const h=void 0!==a.labelActive?a.labelActive:"\xd7";this.labelActiveNode_="string"==typeof h?document.createTextNode(h):h;const d=a.tipLabel?a.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=d,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener("click",this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Hp} ${Bb}`,this.element.appendChild(this.button_)}handleClick_(a){a.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const a=this.getMap();if(!a)return;const l=a.getOwnerDocument();if(m$(l))if(g$(l))!function j2e(c){c.exitFullscreen?c.exitFullscreen():c.webkitExitFullscreen&&c.webkitExitFullscreen()}(l);else{let h;h=this.source_?"string"==typeof this.source_?l.getElementById(this.source_):this.source_:a.getTargetElement(),this.keys_?function H2e(c){c.webkitRequestFullscreen?c.webkitRequestFullscreen():y$(c)}(h):y$(h)}}handleFullScreenChange_(){const a=this.getMap();if(!a)return;const l=this.isInFullscreen_;this.isInFullscreen_=g$(a.getOwnerDocument()),l!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(Fy(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):(Fy(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),a.updateSize())}setClassName_(a,l){l?(a.classList.remove(...this.inactiveClassName_),a.classList.add(...this.activeClassName_)):(a.classList.remove(...this.activeClassName_),a.classList.add(...this.inactiveClassName_))}setMap(a){const l=this.getMap();l&&l.removeChangeListener("target",this.boundHandleMapTargetChange_),super.setMap(a),this.handleMapTargetChange_(),a&&a.addChangeListener("target",this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const a=this.documentListeners_;for(let h=0,d=a.length;h<d;++h)or(a[h]);a.length=0;const l=this.getMap();if(l){const h=l.getOwnerDocument();m$(h)?this.element.classList.remove(Q7):this.element.classList.add(Q7);for(let d=0,f=f$.length;d<f;++d)a.push(Zn(h,f$[d],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}},q2e=class X2e extends Hd{constructor(a){a=a||{},super({element:document.createElement("div"),render:a.render,target:a.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===a.collapsed||a.collapsed,this.collapsible_=void 0===a.collapsible||a.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==a.rotateWithView&&a.rotateWithView,this.viewExtent_=void 0;const l=void 0!==a.className?a.className:"ol-overviewmap",h=void 0!==a.tipLabel?a.tipLabel:"Overview map",d=void 0!==a.collapseLabel?a.collapseLabel:"\u2039";"string"==typeof d?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=d):this.collapseLabel_=d;const f=void 0!==a.label?a.label:"\u203a";"string"==typeof f?(this.label_=document.createElement("span"),this.label_.textContent=f):this.label_=f;const m=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,g=document.createElement("button");g.setAttribute("type","button"),g.title=h,g.appendChild(m),g.addEventListener("click",this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=a.view;const y=new vO({view:a.view,controls:new bo,interactions:new bo});this.ovmap_=y,a.layers&&a.layers.forEach(function(D){y.addLayer(D)});const _=document.createElement("div");_.className="ol-overviewmap-box",_.style.boxSizing="border-box",this.boxOverlay_=new wj({position:[0,0],positioning:"center-center",element:_}),this.ovmap_.addOverlay(this.boxOverlay_);const b=this.element;b.className=l+" "+Hp+" "+Bb+(this.collapsed_&&this.collapsible_?" "+Bx:"")+(this.collapsible_?"":" ol-uncollapsible"),b.appendChild(this.ovmapDiv_),b.appendChild(g);const S=this,T=this.boxOverlay_,x=this.boxOverlay_.getElement(),I=function(D){const L=function(D){return{clientX:D.clientX,clientY:D.clientY}}(D),P=y.getEventCoordinateInternal(L);T.setPosition(P)},M=function(D){const L=y.getEventCoordinateInternal(D);S.getMap().getView().setCenterInternal(L),window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",M)};x.addEventListener("mousedown",function(){window.addEventListener("mousemove",I),window.addEventListener("mouseup",M)})}setMap(a){const l=this.getMap();if(a!==l){if(l){const h=l.getView();h&&this.unbindView_(h),this.ovmap_.setTarget(null)}if(super.setMap(a),a){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Zn(a,"propertychange",this.handleMapPropertyChange_,this));const h=a.getView();h&&(this.bindView_(h),h.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(a){if("view"===a.key){const l=a.oldValue;l&&this.unbindView_(l);const h=this.getMap().getView();this.bindView_(h)}else!this.ovmap_.isRendered()&&("target"===a.key||"size"===a.key)&&this.ovmap_.updateSize()}bindView_(a){if(!this.view_){const l=new sl({projection:a.getProjection()});this.ovmap_.setView(l)}a.addChangeListener(il.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(a){a.removeChangeListener(il.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const a=this.getMap(),l=this.ovmap_;if(!a.isRendered()||!l.isRendered())return;const h=a.getSize(),f=a.getView().calculateExtentInternal(h);if(this.viewExtent_&&Gl(f,this.viewExtent_))return;this.viewExtent_=f;const m=l.getSize(),y=l.getView().calculateExtentInternal(m),_=l.getPixelFromCoordinateInternal(Tc(f)),v=l.getPixelFromCoordinateInternal(Ib(f)),b=Math.abs(_[0]-v[0]),S=Math.abs(_[1]-v[1]),T=m[0],x=m[1];b<.1*T||S<.1*x||b>.75*T||S>.75*x?this.resetExtent_():Ia(y,f)||this.recenter_()}resetExtent_(){const a=this.getMap(),l=this.ovmap_,h=a.getSize(),f=a.getView().calculateExtentInternal(h),m=l.getView(),g=Math.log(7.5)/Math.LN2;IP(f,1/(.1*Math.pow(2,g/2))),m.fitInternal(sO(f))}recenter_(){const a=this.getMap(),l=this.ovmap_,h=a.getView();l.getView().setCenterInternal(h.getCenterInternal())}updateBox_(){const a=this.getMap(),l=this.ovmap_;if(!a.isRendered()||!l.isRendered())return;const h=a.getSize(),d=a.getView(),f=l.getView(),m=this.rotateWithView_?0:-d.getRotation(),g=this.boxOverlay_,y=this.boxOverlay_.getElement(),_=d.getCenterInternal(),v=d.getResolution(),b=f.getResolution(),S=h[0]*v/b,T=h[1]*v/b;g.setPosition(_),y&&(y.style.width=S+"px",y.style.height=T+"px",y.style.transform="rotate("+m+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=Eb(this.ovmap_,"postrender",function(a){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(a){a.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(Bx),this.collapsed_?Fy(this.collapseLabel_,this.label_):Fy(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const a=this.ovmap_;if(!this.collapsed_){if(a.isRendered())return this.viewExtent_=void 0,void a.render();a.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(a){this.collapsible_!==a&&(this.collapsible_=a,this.element.classList.toggle("ol-uncollapsible"),!a&&this.collapsed_&&this.handleToggle_())}setCollapsed(a){!this.collapsible_||this.collapsed_===a||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(a){this.rotateWithView_!==a&&(this.rotateWithView_=a,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(a){this.validateExtent_(),this.updateBox_()}},cM=class Y2e extends OX{constructor(a){let l;l=void 0!==(a=a||{}).attributions?a.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:l,attributionsCollapsible:!1,cacheSize:a.cacheSize,crossOrigin:void 0!==a.crossOrigin?a.crossOrigin:"anonymous",interpolate:a.interpolate,maxZoom:void 0!==a.maxZoom?a.maxZoom:19,opaque:void 0===a.opaque||a.opaque,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileLoadFunction:a.tileLoadFunction,transition:a.transition,url:void 0!==a.url?a.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:a.wrapX,zDirection:a.zDirection})}},Z2e=["mapDiv"];function K2e(c,a){1&c&&(U(0,"div",3),ve(1,"+"),H())}let Nh=(()=>{class c{constructor(l,h){this.mapSvc=l,this.ngZone=h,this.subs=[],this.mapSize=[0,0],this.initialMapStateSet=!1,this.removePopupsOnMouseLeave=d=>{this.mapSvc.removeAllPopups(f=>"pointermove"===f.get("addEvent"))}}ngOnInit(){this.subscribeToMapState(),this.initMap(),this.subscribeToLayers()}ngAfterViewInit(){this.map.setTarget(this.mapDivView.nativeElement),this.subscribeToMapEvents(),this.map.getTargetElement().addEventListener("mouseleave",this.removePopupsOnMouseLeave)}ngAfterViewChecked(){this.updateMapSize()}ngOnDestroy(){this.subs.forEach(h=>h.unsubscribe());const l=this.mapStateSvc.getMapState().value;l.options.notifier="user",this.mapStateSvc.setMapState(l),this.map&&(this.map.un("moveend",this.mapOnMoveend),this.map.un("click",this.mapOnClickMove),this.map.un("dblclick",this.mapOnDclick),this.map.getTargetElement().removeEventListener("mouseleave",this.removePopupsOnMouseLeave),this.map.getInteractions().forEach(h=>{this.map.removeInteraction(h)}))}getMapDiv(){return this.mapDivView&&this.mapDivView.nativeElement?{width:this.mapDivView.nativeElement.offsetWidth,height:this.mapDivView.nativeElement.offsetHeight}:null}updateMapSize(){const l=this.getMapDiv();if(l)if(l.width===this.mapSize[0]&&l.height===this.mapSize[1]){if(!this.initialMapStateSet){const h=this.mapStateSvc.getMapState().getValue();this.setMapState(h),this.initialMapStateSet=!0}}else this.ngZone.runOutsideAngular(()=>{this.map.updateSize(),this.mapSize=this.map.getSize()})}addUpdateLayers(l,h,d){const f=this.mapSvc.getLayerGroups(h)[0].getLayers(),m=d.reduce((g,y)=>g+this.mapSvc.getLayers(y).length,0);l.length!==this.mapSvc.getLayers(h).length?this.mapSvc.setUkisLayers(l,h,m):this.updateLayers(l,h,m,f)}updateLayers(l,h,d,f){for(const m of l){const g=this.mapSvc.getLayerByKey({key:"id",value:m.id},h);if(g){g.getVisible()!==m.visible&&(_F(g,m.visible,m instanceof Ji),this.mapSvc.hideAllPopups(!m.visible,v=>{const S=v.getId().toString().split(":")[0];return!S||(S===m.id?S===m.id:void 0)})),g.getOpacity()!==m.opacity&&vF(g,m.opacity,m instanceof Ji),this.updateLayerSource(m,g);const y=l.indexOf(m),_=d>0?y+d:y;g.getZIndex()!==_&&(HRe(g,y,f),zS(g,y,d)),this.updateLayerParamsWith(g,m)}}}updateLayerSource(l,h){if(l instanceof Ji&&h instanceof lo){const d=l.custom_layer.getSource(),f=h.getSource();d&&an(f)!==an(d)&&(h.setSource(d),f instanceof SS&&f.dispose())}else if(l instanceof Ji&&l.custom_layer instanceof Dr&&h instanceof Dr){const d=l.custom_layer.getLayers().getArray();h.getLayers().getArray().forEach((m,g)=>{const y=d[g];if(m instanceof lo&&y instanceof lo){const _=m.getSource(),v=y.getSource();v&&an(_)!==an(v)&&m.setSource(v)}})}}updateLayerParamsWith(l,h){switch(h.type){case yc:this.updateWmsLayerParamsWith(l,h);break;case _c:this.updateWmtsLayerParamsWith(l,h);break;case au:this.updateGeojsonLayerParamsWith(l,h);break;case gh:this.updateWfsLayerParamsWith(l,h);break;case el:this.updateTmsLayerParamsWith(l,h)}}updateTmsLayerParamsWith(l,h){h instanceof qr&&GN(l,h.options.style,h.options.styleSource)}updateWfsLayerParamsWith(l,h){h.options&&h.options.style!==l.getStyle()&&l.setStyle(h.options.style),l.getSource().getUrl()!==h.url&&l.getSource().setUrl(h.url)}updateGeojsonLayerParamsWith(l,h){const d=l.getSource();if(d){if(h.data){const f=this.mapSvc.geoJsonToFeatures(h.data);if(d instanceof pm){const m=d.getSource();m.clear(),m.addFeatures(f)}else d.clear(),d.addFeatures(f)}else h.url&&(d instanceof pm?d.getSource().setUrl(h.url):d.setUrl(h.url));"object"==typeof h?.cluster&&"distance"in h.cluster&&d instanceof pm&&d.setDistance(h.cluster.distance)}h?.options?.style&&l.setStyle(h.options.style)}updateWmsLayerParamsWith(l,h){if(l instanceof lo){const f=l.getSource().getParams(),m=h.params;this.shallowEqual(f,m)||l.getSource().updateParams(m)}}updateWmtsLayerParamsWith(l,h){if(l instanceof lo){const d=l.getSource(),f=d.getStyle(),m=d.getFormat(),g=d.getVersion(),y=d.getMatrixSet(),_=h.params.style,v=h.params.format,b=h.params.version,S=h.params.matrixSetOptions.matrixSet;if(void 0!==_&&f!==_||void 0!==v&&m!==v||void 0!==b&&g!==b||void 0!==S&&y!==S){const T=h.filtertype.toLowerCase();this.mapSvc.updateUkisLayer(h,T)}}}shallowEqual(l,h){const d=Object.getOwnPropertyNames(l),f=Object.getOwnPropertyNames(h);if(d.length!==f.length)return!1;for(const m of d)if(l[m]!==h[m])return!1;return!0}addUpdateBaseLayers(l){const h=this.mapSvc.getLayerGroups("baselayers")[0].getLayers();if(l.length!==this.mapSvc.getLayers("baselayers").length){const d=l.filter(f=>!0===f.visible);0===d.length?l[0].visible=!0:d.length>1&&(l.forEach(f=>f.visible=!1),l[0].visible=!0),this.mapSvc.setUkisLayers(l,"baselayers")}else for(const d of l){const f=this.mapSvc.getLayerByKey({key:"id",value:d.id},"baselayers");if(f){const m=l.indexOf(d);f.getVisible()!==d.visible&&_F(f,d.visible,d instanceof Ji),f.getZIndex()!==m&&(h.remove(f),h.insertAt(m,f),zS(f,m)),f.getOpacity()!==d.opacity&&vF(f,d.opacity,d instanceof Ji),this.updateLayerSource(d,f),this.updateLayerParamsWith(f,d)}}}subscribeToLayers(){if(this.layersSvc){const l=this.layersSvc.getBaseLayers().subscribe(f=>this.addUpdateBaseLayers(f));this.subs.push(l);const h=this.layersSvc.getLayers().subscribe(f=>this.addUpdateLayers(f,"layers",["baselayers"]));this.subs.push(h);const d=this.layersSvc.getOverlays().subscribe(f=>this.addUpdateLayers(f,"overlays",["baselayers","layers"]));this.subs.push(d)}}setMapState(l){const h=this.mapStateSvc.getLastAction().getValue();"user"===l.options.notifier&&("setExtent"===h?this.mapSvc.setExtent(l.extent,!0):"setState"===h&&(this.mapSvc.setZoom(l.zoom),this.mapSvc.setCenter([l.center.lon,l.center.lat],!0)))}subscribeToMapState(){if(this.mapStateSvc){const l=this.mapStateSvc.getMapState().pipe(function O2e(c){return a=>a.lift(new N2e(c))}(1)).subscribe(h=>this.setMapState(h));this.subs.push(l)}}subscribeToMapEvents(){this.mapOnMoveend=l=>{const h=this.mapStateSvc.getMapState().getValue(),d=this.mapSvc.getZoom(),f=this.mapSvc.getCenter(!0),m=this.mapSvc.getCurrentExtent(!0),g={lat:parseFloat(f[1]),lon:parseFloat(f[0])},y=new xy(d,g,{notifier:"map"},m,h.time);this.mapStateSvc.setMapState(y)},this.map.on("moveend",this.mapOnMoveend),this.mapOnClickMove=l=>{this.mapSvc.layersOnMapEvent(l)},this.map.on(["click","pointermove"],this.mapOnClickMove),this.mapOnDclick=l=>{this.mapSvc.removeAllPopups()},this.map.on("dblclick",this.mapOnDclick)}initMap(){const l=this.mapSvc.createMap();this.map=l.map;const h=this.map.getInteractions();yj().forEach(f=>{h.getArray().find(g=>g.constructor.name===f.constructor.name)||this.map.addInteraction(f)}),this.setControls(),this.layersSvc||console.log("there is no layersSvc as defined!"),this.mapStateSvc||console.log("there is no mapStateSvc as defined!")}setControls(){const l=[],h=[];if(this.map&&(this.map.getControls().getArray().forEach(f=>h.push(f)),this.map.getControls().clear()),this.controls&&this.map){if(!1!==this.controls.attribution){let d={collapsible:!0,collapsed:!1};"object"==typeof this.controls.attribution&&(d=Object.assign(d,this.controls.attribution));const f=new lj(d);l.push(f)}if(this.controls.scaleLine){let d={};"object"==typeof this.controls.scaleLine&&(d=Object.assign(d,this.controls.scaleLine));const f=new B2e(d);l.push(f)}if(!1!==this.controls.zoom){let d={};"object"==typeof this.controls.zoom&&(d=Object.assign(d,this.controls.zoom));const f=new uj(d);l.push(f)}if(this.controls.mousePosition){let d={coordinateFormat:m=>function x7(c,a){return function z0e(c,a,l){return c?a.replace("{x}",c[0].toFixed(l)).replace("{y}",c[1].toFixed(l)):""}(c,"{x}, {y}",a)}(m,2),projection:"EPSG:4326"};"object"==typeof this.controls.mousePosition&&(d=Object.assign(d,this.controls.mousePosition));const f=new z2e(d);l.push(f)}if(this.controls.fullScreen){let d={};"object"==typeof this.controls.fullScreen&&(d=Object.assign(d,this.controls.fullScreen));const f=new W2e(d);l.push(f)}if(this.controls.overviewMap){const d=document.createElement("spawn");d.innerHTML='<clr-icon shape="world"></clr-icon>';let f={layers:[new gu({source:new cM})],label:d};"object"==typeof this.controls.overviewMap&&(f=Object.assign(f,this.controls.overviewMap));const m=new q2e(f);l.push(m)}if(this.controls.rotate){let d={};"object"==typeof this.controls.rotate&&(d=Object.assign(d,this.controls.rotate));const f=new cj(d);l.push(f)}l.length&&(h.filter(f=>!l.includes(f)).forEach(f=>l.push(f)),this.map.getControls().extend(l))}}}return c.\u0275fac=function(l){return new(l||c)(N(Ss),N(Yn))},c.\u0275cmp=He({type:c,selectors:[["ukis-map-ol"]],viewQuery:function(l,h){if(1&l&&hi(Z2e,5),2&l){let d;vt(d=bt())&&(h.mapDivView=d.first)}},inputs:{layersSvc:"layersSvc",mapStateSvc:["mapState","mapStateSvc"],controls:"controls"},decls:3,vars:1,consts:[["ref","map",1,"map"],["mapDiv",""],["class","crosshair",4,"ngIf"],[1,"crosshair"]],template:function(l,h){1&l&&(U(0,"div",0,1),ce(2,K2e,2,0,"div",2),H()),2&l&&(V(2),z("ngIf",h.controls&&h.controls.crosshair))},dependencies:[bn],styles:['@charset "UTF-8";:root{--ukis-crosshair-color: #ff0004;--ukis-popup-bg-color: rgb(238, 238, 238);--ukis-drop-shadow: drop-shadow(0 1px 4px rgba(0, 0, 0, .2));--ukis-ol-bbox-bg-color: rgba(255, 255, 255, .4);--ukis-ol-bbox-border-color: rgba(87, 87, 87, .4);--ukis-ol-overviewmap-left: .5em;--ukis-ol-overviewmap-bottom: 3em;--ukis-ol-control-bg-color: rgba(87, 87, 87, .6);--ukis-ol-control-border-color: rgba(87, 87, 87, .4)}.map{width:100%;height:100%;position:relative}.ol-popup{position:absolute;background-color:var(--ukis-popup-bg-color);filter:var(--ukis-drop-shadow);padding:15px;border-radius:2px;bottom:12px;left:-50px;min-width:280px;display:none;z-index:1000000}.ol-popup .ol-popup-closer{text-decoration:none;position:absolute;top:0;right:8px;cursor:pointer}.ol-popup .ol-popup-closer:after{content:"\\2716"}.ol-popup:after,.ol-popup:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup:after{border-top-color:var(--ukis-popup-bg-color);border-width:10px;left:48px;margin-left:-10px}.ol-popup:before{border-width:11px;left:48px;margin-left:-11px}.ol-popup.hidden{visibility:hidden}.crosshair{top:50%;left:50%;font-size:large;color:var(--ukis-crosshair-color);z-index:1;position:absolute;cursor:default}.ol-control{padding:1px;--ol-subtle-background-color: #fff6}.ol-control button{--ol-subtle-foreground-color: #fff;--ol-foreground-color: #fff;cursor:pointer;background-color:var(--ukis-ol-control-bg-color)}.ol-control button:focus{background-color:var(--ukis-ol-control-bg-color)}.ol-control button:hover{background-color:var(--ukis-ol-control-border-color)}.ol-scale-line{background:rgba(255,255,255,.4);line-height:1.375em;padding:1px}.ol-scale-line .ol-scale-line-inner{background:var(--ukis-ol-control-bg-color);border-color:var(--ukis-ol-control-bg-color);--ol-foreground-color: #fff}.ol-attribution:not(.ol-collapsed){padding:0 2px}.ol-attribution ul{font-size:.5rem}.ol-box{background-color:var(--ukis-ol-bbox-bg-color);border-color:var(--ukis-ol-bbox-border-color)!important}.ol-box.ol-drag-select{border-color:var(--clr-color-action-600, var(--fallback-color-no-clr))!important}.ol-overviewmap{left:var(--ukis-ol-overviewmap-left)!important;bottom:var(--ukis-ol-overviewmap-bottom)!important}\n'],encapsulation:2}),c})(),J2e=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({providers:[Ss],imports:[Un]}),c})();class v$ extends Hd{constructor(a={}){const l=a;super({element:document.createElement("div"),target:l.target}),this.toggle="zoom";const h=void 0!==l.className?l.className:"zoom-number ol-unselectable ol-control",d=document.createElement("button");d.className=h+"-reset",d.setAttribute("type","button"),d.innerHTML="Z",d.addEventListener("click",this.toggleZoomResolution.bind(this),!1);const m=this.element;m.className=h+" ",m.appendChild(d)}setMap(a){super.setMap(a),a&&this.listenerKeys.push(Zn(a,"moveend",this.handleMapMoveend_,this))}getMapZoom(){return this.getMap().getView().getZoom()}getMapResolution(){return this.getMap().getView().getResolution()}toggleZoomResolution(){this.toggle="zoom"===this.toggle?"resolution":"zoom",this.handleMapMoveend_()}handleMapMoveend_(){if(this.element instanceof HTMLElement&&this.element.firstElementChild instanceof HTMLElement)if("zoom"===this.toggle){const a=this.getMapZoom();this.element.firstElementChild.innerHTML=""+Math.round(1*a)/1,this.element.firstElementChild.title=`z: ${a}`}else{const a=this.getMapResolution();this.element.firstElementChild.innerHTML=""+Math.round(1*a)/1,this.element.firstElementChild.title=`r: ${a}`}}}class eLe{constructor(a,l){this.fn=a,this.subscriptions=l}unsubscribe(){const a=this.subscriptions.indexOf(this);-1!==a&&this.subscriptions.splice(a,1)}}function vf(c){return null!=c&&"object"==typeof c&&!0===c["@@functional/placeholder"]}function Fh(c){return function a(l){return 0===arguments.length||vf(l)?a:c.apply(this,arguments)}}function bf(c){return function a(l,h){switch(arguments.length){case 0:return a;case 1:return vf(l)?a:Fh(function(d){return c(l,d)});default:return vf(l)&&vf(h)?a:vf(l)?Fh(function(d){return c(d,h)}):vf(h)?Fh(function(d){return c(l,d)}):c(l,h)}}}const uM=bf(function(a,l){return l instanceof a||null!=l&&(l.constructor===a||"Object"===a.name&&"object"==typeof l)});function hM(c,a){return Object.prototype.hasOwnProperty.call(a,c)}var b$=Object.prototype.toString;const S$=function(){return"[object Arguments]"===b$.call(arguments)?function(a){return"[object Arguments]"===b$.call(a)}:function(a){return hM("callee",a)}}(),T$=Array.isArray||function(a){return null!=a&&a.length>=0&&"[object Array]"===Object.prototype.toString.call(a)};function C$(c){return"[object String]"===Object.prototype.toString.call(c)}var sLe=Fh(function(a){return null!=a&&"function"==typeof a["fantasy-land/empty"]?a["fantasy-land/empty"]():null!=a&&null!=a.constructor&&"function"==typeof a.constructor["fantasy-land/empty"]?a.constructor["fantasy-land/empty"]():null!=a&&"function"==typeof a.empty?a.empty():null!=a&&null!=a.constructor&&"function"==typeof a.constructor.empty?a.constructor.empty():T$(a)?[]:C$(a)?"":function w$(c){return"[object Object]"===Object.prototype.toString.call(c)}(a)?{}:S$(a)?function(){return arguments}():function rLe(c){var a=Object.prototype.toString.call(c);return"[object Uint8ClampedArray]"===a||"[object Int8Array]"===a||"[object Uint8Array]"===a||"[object Int16Array]"===a||"[object Uint16Array]"===a||"[object Int32Array]"===a||"[object Uint32Array]"===a||"[object Float32Array]"===a||"[object Float64Array]"===a||"[object BigInt64Array]"===a||"[object BigUint64Array]"===a}(a)?a.constructor.from(""):void 0});const oLe=sLe;function x$(c){for(var l,a=[];!(l=c.next()).done;)a.push(l.value);return a}function E$(c,a,l){for(var h=0,d=l.length;h<d;){if(c(a,l[h]))return!0;h+=1}return!1}const DF="function"==typeof Object.is?Object.is:function lLe(c,a){return c===a?0!==c||1/c==1/a:c!=c&&a!=a};var cLe=!{toString:null}.propertyIsEnumerable("toString"),M$=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],D$=function(){return arguments.propertyIsEnumerable("length")}(),uLe=function(a,l){for(var h=0;h<a.length;){if(a[h]===l)return!0;h+=1}return!1};const AF=Fh("function"!=typeof Object.keys||D$?function(a){if(Object(a)!==a)return[];var l,h,d=[],f=D$&&S$(a);for(l in a)hM(l,a)&&(!f||"length"!==l)&&(d[d.length]=l);if(cLe)for(h=M$.length-1;h>=0;)hM(l=M$[h],a)&&!uLe(d,l)&&(d[d.length]=l),h-=1;return d}:function(a){return Object(a)!==a?[]:Object.keys(a)}),A$=Fh(function(a){return null===a?"Null":void 0===a?"Undefined":Object.prototype.toString.call(a).slice(8,-1)});function I$(c,a,l,h){var d=x$(c);function m(g,y){return IF(g,y,l.slice(),h.slice())}return!E$(function(g,y){return!E$(m,y,g)},x$(a),d)}function IF(c,a,l,h){if(DF(c,a))return!0;var d=A$(c);if(d!==A$(a))return!1;if("function"==typeof c["fantasy-land/equals"]||"function"==typeof a["fantasy-land/equals"])return"function"==typeof c["fantasy-land/equals"]&&c["fantasy-land/equals"](a)&&"function"==typeof a["fantasy-land/equals"]&&a["fantasy-land/equals"](c);if("function"==typeof c.equals||"function"==typeof a.equals)return"function"==typeof c.equals&&c.equals(a)&&"function"==typeof a.equals&&a.equals(c);switch(d){case"Arguments":case"Array":case"Object":if("function"==typeof c.constructor&&"Promise"===function aLe(c){var a=String(c).match(/^function (\w*)/);return null==a?"":a[1]}(c.constructor))return c===a;break;case"Boolean":case"Number":case"String":if(typeof c!=typeof a||!DF(c.valueOf(),a.valueOf()))return!1;break;case"Date":if(!DF(c.valueOf(),a.valueOf()))return!1;break;case"Error":return c.name===a.name&&c.message===a.message;case"RegExp":if(c.source!==a.source||c.global!==a.global||c.ignoreCase!==a.ignoreCase||c.multiline!==a.multiline||c.sticky!==a.sticky||c.unicode!==a.unicode)return!1}for(var f=l.length-1;f>=0;){if(l[f]===c)return h[f]===a;f-=1}switch(d){case"Map":return c.size===a.size&&I$(c.entries(),a.entries(),l.concat([c]),h.concat([a]));case"Set":return c.size===a.size&&I$(c.values(),a.values(),l.concat([c]),h.concat([a]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var m=AF(c);if(m.length!==AF(a).length)return!1;var g=l.concat([c]),y=h.concat([a]);for(f=m.length-1;f>=0;){var _=m[f];if(!hM(_,a)||!IF(a[_],c[_],g,y))return!1;f-=1}return!0}const R$=bf(function(a,l){return IF(a,l,[],[])}),L$=Fh(function(a){return null!=a&&R$(a,oLe(a))});function XS(c){return null==c}function Sf(c){return XS(c)||L$(c)}function RF(c){return uM(String,c)}function dM(c){return uM(Object,c)}function O$(c){return uM(Map,c)}function N$(c,a){return c!==a}function F$(c,a){return JSON.stringify(c)===JSON.stringify(a)}function k$(c){const a=new Map;for(const[l,h]of c)O$(h)?a.set(l,k$(h)):a.set(l,h);return a}function bLe(c){switch(!0){case O$(c):return k$(c);case dM(c)&&!Array.isArray(c):return vm({},c);default:return JSON.parse(JSON.stringify(c))}}function vm(...c){const a={};return c.map(l=>dM(l)?{...l}:{}).forEach(l=>{Object.keys(l).forEach(h=>{const d=l[h];a[h]=Array.isArray(d)?Array.from(d):dM(d)?vm(a[h]||{},d):d})}),a}function B$(c=window){return!XS(c)}let fM,U$,LF,PF;function z$(c=!0){if(!c||!fM){const a=document&&document.querySelector("[ng-version]");fM=a?""+a.getAttribute("ng-version"):void 0}return fM}function xLe(c=!0){return c&&fM||(U$=window?.angular?.version?.full),U$}function G$(c=!0){return c&&LF||(LF=window?.CDS?._react?.version?window.CDS._react.version:document.querySelector("[data-reactroot], [data-reactid]")?"unknown version":void 0),LF}function H$(c=!0){if(!c||!PF){const a=document.querySelectorAll("*");let l;for(let h=0;h<a.length;h++)if(a[h].__vue__){l=a[h];break}PF=l?"unknown version":void 0}return PF}function bm(c){return c.replace(/[A-Z]/g,a=>"-"+a.toLowerCase())}function X$(c){return c.charAt(0).toUpperCase()+c.slice(1)}const LLe=new class{constructor(){if(this.supports={js:!0},!document.body.hasAttribute("cds-supports")||"no-js"===document.body.getAttribute("cds-supports")){const c=bm(Object.keys(this.supports).reduce((a,l)=>`${a} ${this.supports[l]?l:"no-"+l}`,"")).trim();document.body.setAttribute("cds-supports",c)}}};function Y$(c,a){switch(c){case 0:return function(){return a.apply(this,arguments)};case 1:return function(l){return a.apply(this,arguments)};case 2:return function(l,h){return a.apply(this,arguments)};case 3:return function(l,h,d){return a.apply(this,arguments)};case 4:return function(l,h,d,f){return a.apply(this,arguments)};case 5:return function(l,h,d,f,m){return a.apply(this,arguments)};case 6:return function(l,h,d,f,m,g){return a.apply(this,arguments)};case 7:return function(l,h,d,f,m,g,y){return a.apply(this,arguments)};case 8:return function(l,h,d,f,m,g,y,_){return a.apply(this,arguments)};case 9:return function(l,h,d,f,m,g,y,_,v){return a.apply(this,arguments)};case 10:return function(l,h,d,f,m,g,y,_,v,b){return a.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function Z$(c,a,l){return function(){for(var h=[],d=0,f=c,m=0;m<a.length||d<arguments.length;){var g;m<a.length&&(!vf(a[m])||d>=arguments.length)?g=a[m]:(g=arguments[d],d+=1),h[m]=g,vf(g)||(f-=1),m+=1}return f<=0?l.apply(this,h):Y$(f,Z$(c,h,l))}}const K$=bf(function(a,l){return 1===a?Fh(l):Y$(a,Z$(a,[],l))}),OLe=Number.isInteger||function(a){return a<<0===a},FLe=bf(function(a,l){var h=a<0?l.length+a:a;return C$(l)?l.charAt(h):l[h]}),VLe=bf(function(a,l){return a.map(function(h){for(var m,d=l,f=0;f<h.length;){if(null==d)return;d=OLe(m=h[f])?FLe(m,d):d[m],f+=1}return d})}),ULe=bf(function(a,l){return VLe([a],l)[0]}),GLe=K$(2,(c,a)=>void 0!==ULe(c,a)),J$=GLe({"@@functional/placeholder":!0},window);class Sm{static log(...a){FF()&&NF()&&console.log(...a)}static warn(...a){FF()&&NF()&&console.warn(...a)}static error(...a){FF()&&NF()&&console.error(...a)}}function NF(){return!J$(["jasmine"])}function FF(){return!window.CDS.environment.production}function Q$(){B$()&&(window.CDS=window.CDS||{_version:[],_react:{version:void 0},_supports:LLe.supports,_isStateProxied:!1,_state:{focusTrapItems:[],layerElements:[],i18nRegistry:{},elementRegistry:{},iconRegistry:{},motionRegistry:{}},environment:{production:!1},getDetails:eY,logDetails:jLe},function(){const c="6.4.2";window.CDS._version.indexOf(c)<0&&(window.CDS._version.push(c),document.querySelector("body")?.setAttribute("cds-version",window.CDS._version.join(" "))),window.CDS._version.length>1&&Sm.warn("Running more than one version of Clarity can cause unexpected issues. Please ensure only one version is loaded.")}(),window.CDS._isStateProxied||(window.CDS._isStateProxied=!0,window.CDS._state=new Proxy(window.CDS._state,{set:(c,a,l)=>{const h={key:a,prev:window.CDS._state[a],current:l};return c[a]=l,document.dispatchEvent(new CustomEvent("CDS_STATE_UPDATE",{detail:h})),!0}})))}function eY(){return{versions:window.CDS._version,environment:window.CDS.environment,userAgent:navigator.userAgent,supports:window.CDS._supports,angularVersion:z$(!1),angularJSVersion:xLe(!1),reactVersion:G$(!1),vueVersion:H$(!1),state:{...window.CDS._state,iconRegistry:Object.keys(window.CDS._state.iconRegistry),motionRegistry:Object.keys(window.CDS._state.motionRegistry),focusTrapRegistry:Object.keys(window.CDS._state.focusTrapItems.map(c=>c.focusTrapId))}}}function jLe(){Sm.log(JSON.stringify(eY(),null,2))}const kF=new class tLe{constructor(){this.subscriptions=[]}subscribe(a){const l=new eLe(a,this.subscriptions);return this.subscriptions.push(l),l}emit(a){this.subscriptions.forEach(l=>l.fn(a))}toEventObservable(){return this}};kF.listener=document.addEventListener("CDS_STATE_UPDATE",c=>kF.emit(c.detail));class Ts{static get state(){return Q$(),window.CDS._state}static getValue(a){return Ts.state[a]}static setValue(a,l){Ts.state[a]=l}static log(){Sm.log(JSON.stringify(Ts.state,null,2))}}Ts.stateUpdates=kF.toEventObservable();const WLe=["unknown",{outline:'<circle class="cds-internal-dot-3" cx="31.1" cy="18" r="2.9"/><circle class="cds-internal-dot-2" cx="18" cy="18" r="2.9"/><circle class="cds-internal-dot-1" cx="4.9" cy="18" r="2.9"/>'}];class Pi{static get registry(){return{unknown:WLe[1],...Ts.state.iconRegistry}}static addIcons(...a){Ts.state.iconRegistry={...Ts.state.iconRegistry,...Object.fromEntries(a.filter(([l])=>!Pi.registry[l]))}}static addAliases(...a){const l=a.filter(([h])=>Pi.registry[h]).flatMap(([h,d])=>d.map(f=>[f,Pi.registry[h]]));Ts.state.iconRegistry={...Ts.state.iconRegistry,...Object.fromEntries(l)}}static getIconNameFromShape(a){return a[0]}}const D_=["angle",{outline:'<path d="M29.52,22.52,18,10.6,6.48,22.52a1.7,1.7,0,0,0,2.45,2.36L18,15.49l9.08,9.39a1.7,1.7,0,0,0,2.45-2.36Z"/>'}],fl=["exclamation-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M18,20.07a1.3,1.3,0,0,1-1.3-1.3v-6a1.3,1.3,0,1,1,2.6,0v6A1.3,1.3,0,0,1,18,20.07Z"/><circle cx="17.95" cy="23.02" r="1.5"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-1.49,6a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,25.5a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,25.5Z"/>'}],pl=["check-circle",{outline:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/><path d="M16.34,23.74l-5-5a1,1,0,0,1,1.41-1.41l3.59,3.59,6.78-6.78a1,1,0,0,1,1.41,1.41Z"/>',solid:'<path d="M30,18A12,12,0,1,1,18,6,12,12,0,0,1,30,18Zm-4.77-2.16a1.4,1.4,0,0,0-2-2l-6.77,6.77L13,17.16a1.4,1.4,0,0,0-2,2l5.45,5.45Z"/>'}],tY=["ellipsis-horizontal",{outline:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>',outlineBadged:'<circle cx="31.1" cy="18" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="4.9" cy="18" r="2.9"/>'}],qS=["window-close",{outline:'<path d="M19.41,18l7.29-7.29a1,1,0,0,0-1.41-1.41L18,16.59,10.71,9.29a1,1,0,0,0-1.41,1.41L16.59,18,9.29,25.29a1,1,0,1,0,1.41,1.41L18,19.41l7.29,7.29a1,1,0,0,0,1.41-1.41Z"/>'}],XLe=["event",{outline:'<path d="M16.17,25.86,10.81,20.5a1,1,0,0,1,1.41-1.41L16.17,23l8.64-8.64a1,1,0,0,1,1.41,1.41Z"/><path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0,.23-.41H23.8L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/><path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',outlineBadged:'<path d="M10.81,20.5l5.36,5.36L26.22,15.81a1,1,0,0,0-1.41-1.41L16.17,23l-3.94-3.94a1,1,0,0,0-1.41,1.41Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><path d="M32.25,6h-4V9a2.2,2.2,0,0,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM25.94,16.58l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>',solidAlerted:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M33.68,15.4H26.3a1.34,1.34,0,0,1-.36,1.18l-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38,7-7h-1A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5Zm-4.06,3.08-9.67,9.67L11,20.94A1.36,1.36,0,0,1,12.9,19l3.38,3.38L24,14.66a1.36,1.36,0,1,1,1.93,1.93Z"/>'}],qLe=["calendar",{outline:'<path d="M32.25,6H29V8h3V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect" x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/><rect x="13" y="6" width="10" height="2"/>',outlineAlerted:'<path d="M33.68,15.4H32V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><polygon points="21.29 6 13 6 13 8 20.14 8 21.29 6"/>',outlineBadged:'<path d="M32,13.22V30H4V8H7V6H3.75A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,32,13.22Z"/><rect x="8" y="14" width="2" height="2"/><rect x="14" y="14" width="2" height="2"/><rect x="20" y="14" width="2" height="2"/><rect x="26" y="14" width="2" height="2"/><rect x="8" y="19" width="2" height="2"/><rect x="14" y="19" width="2" height="2"/><rect x="20" y="19" width="2" height="2"/><rect x="26" y="19" width="2" height="2"/><rect x="8" y="24" width="2" height="2"/><rect x="14" y="24" width="2" height="2"/><rect x="20" y="24" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M22.5,6H13V8h9.78A7.49,7.49,0,0,1,22.5,6Z"/>',solid:'<path d="M32.25,6h-4V9a2.2,2.2,0,1,1-4.4,0V6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V7.81A1.78,1.78,0,0,0,32.25,6ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M26,10a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V9A1,1,0,0,0,26,10Z"/>',solidAlerted:'<path d="M33.68,15.4H22.23A3.68,3.68,0,0,1,19,9.89L21.29,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V15.38ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm6,5H26V24h2Zm0-5H26V19h2Z"/><path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/>',solidBadged:'<path d="M10,10a1,1,0,0,0,1-1V3A1,1,0,0,0,9,3V9A1,1,0,0,0,10,10Z"/><path d="M30,13.5A7.5,7.5,0,0,1,22.5,6H12.2V9A2.2,2.2,0,0,1,7.8,9V6h-4A1.78,1.78,0,0,0,2,7.81V30.19A1.78,1.78,0,0,0,3.75,32h28.5A1.78,1.78,0,0,0,34,30.19V12.34A7.45,7.45,0,0,1,30,13.5ZM10,26H8V24h2Zm0-5H8V19h2Zm0-5H8V14h2Zm6,10H14V24h2Zm0-5H14V19h2Zm0-5H14V14h2Zm6,10H20V24h2Zm0-5H20V19h2Zm0-5H20V14h2Zm6,10H26V24h2Zm0-5H26V19h2Zm0-5H26V14h2Z"/>'}],$Le=["eye-hide",{outline:'<path d="M25.19,20.4A6.78,6.78,0,0,0,25.62,18a6.86,6.86,0,0,0-6.86-6.86,6.79,6.79,0,0,0-2.37.43L18,13.23a4.78,4.78,0,0,1,.74-.06A4.87,4.87,0,0,1,23.62,18a4.79,4.79,0,0,1-.06.74Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm9.75,9.75,6.65,6.65a4.81,4.81,0,0,1-2.5.72A4.87,4.87,0,0,1,13.9,18,4.81,4.81,0,0,1,14.62,15.53Zm-1.45-1.45a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>',solid:'<path d="M18.37,11.17A6.79,6.79,0,0,0,16,11.6l8.8,8.8A6.78,6.78,0,0,0,25.23,18,6.86,6.86,0,0,0,18.37,11.17Z"/><path d="M34.29,17.53c-3.37-6.23-9.28-10-15.82-10a16.82,16.82,0,0,0-5.24.85L14.84,10a14.78,14.78,0,0,1,3.63-.47c5.63,0,10.75,3.14,13.8,8.43a17.75,17.75,0,0,1-4.37,5.1l1.42,1.42a19.93,19.93,0,0,0,5-6l.26-.48Z"/><path d="M4.87,5.78l4.46,4.46a19.52,19.52,0,0,0-6.69,7.29L2.38,18l.26.48c3.37,6.23,9.28,10,15.82,10a16.93,16.93,0,0,0,7.37-1.69l5,5,1.75-1.5-26-26Zm8.3,8.3a6.85,6.85,0,0,0,9.55,9.55l1.6,1.6a14.91,14.91,0,0,1-5.86,1.2c-5.63,0-10.75-3.14-13.8-8.43a17.29,17.29,0,0,1,6.12-6.3Z"/>'}],YLe=["eye",{outline:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><path d="M18.09,11.17A6.86,6.86,0,1,0,25,18,6.86,6.86,0,0,0,18.09,11.17Zm0,11.72A4.86,4.86,0,1,1,23,18,4.87,4.87,0,0,1,18.09,22.89Z"/>',solid:'<path d="M33.62,17.53c-3.37-6.23-9.28-10-15.82-10S5.34,11.3,2,17.53L1.72,18l.26.48c3.37,6.23,9.28,10,15.82,10s12.46-3.72,15.82-10l.26-.48ZM17.8,26.43C12.17,26.43,7,23.29,4,18c3-5.29,8.17-8.43,13.8-8.43S28.54,12.72,31.59,18C28.54,23.29,23.42,26.43,17.8,26.43Z"/><circle cx="18.09" cy="18.03" r="6.86"/>'}],ZLe=["ellipsis-vertical",{outline:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>',outlineBadged:'<circle cx="18" cy="4.9" r="2.9"/><circle cx="18" cy="18" r="2.9"/><circle cx="18" cy="31.1" r="2.9"/>'}],KLe=["view-columns",{outline:'<path d="M31,5H5A2,2,0,0,0,3,7V29a2,2,0,0,0,2,2H31a2,2,0,0,0,2-2V7A2,2,0,0,0,31,5ZM13,29H5V7h8Zm10,0H15V7h8Z"/>'}],JLe=["arrow",{outline:'<path d="M27.66,15.61,18,6,8.34,15.61A1,1,0,1,0,9.75,17L17,9.81V28.94a1,1,0,1,0,2,0V9.81L26.25,17a1,1,0,0,0,1.41-1.42Z"/>'}],nY=["times",{outline:'<path d="M19.41,18l8.29-8.29a1,1,0,0,0-1.41-1.41L18,16.59,9.71,8.29A1,1,0,0,0,8.29,9.71L16.59,18,8.29,26.29a1,1,0,1,0,1.41,1.41L18,19.41l8.29,8.29a1,1,0,0,0,1.41-1.41Z"/>'}],QLe=["step-forward-2",{outline:'<path d="M7.08,6.52a1.68,1.68,0,0,0,0,2.4L16.51,18,7.12,27.08a1.7,1.7,0,0,0,2.36,2.44h0L21.4,18,9.48,6.47A1.69,1.69,0,0,0,7.08,6.52Z"/><path d="M26.49,5a1.7,1.7,0,0,0-1.7,1.7V29.3a1.7,1.7,0,0,0,3.4,0V6.7A1.7,1.7,0,0,0,26.49,5Z"/>'}],iY=["angle-double",{outline:'<path d="M29,19.41a1,1,0,0,1-.71-.29L18,8.83,7.71,19.12a1,1,0,0,1-1.41-1.41L18,6,29.71,17.71A1,1,0,0,1,29,19.41Z"/><path d="M29,30.41a1,1,0,0,1-.71-.29L18,19.83,7.71,30.12a1,1,0,0,1-1.41-1.41L18,17,29.71,28.71A1,1,0,0,1,29,30.41Z"/>'}],ePe=["filter-grid-circle",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/><path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],tPe=["filter-grid",{outline:'<path d="M15,25.86l2,1V20.27a1,1,0,0,0-.29-.7L10.23,13H25.79l-6.47,6.57a1,1,0,0,0-.29.7L19,28l2,1V20.68L27.58,14A1.46,1.46,0,0,0,28,13V12a1,1,0,0,0-1-1H9a1,1,0,0,0-1,1v1a1.46,1.46,0,0,0,.42,1L15,20.68Z"/>',solid:'<path d="M8,11v1.12a.5.5,0,0,0,.15.35l7.28,7.36a.5.5,0,0,1,.15.35v6.89a.5.5,0,0,0,.28.45l3.95,1.41a.5.5,0,0,0,.72-.45l0-8.39a.54.54,0,0,1,.18-.35l7.12-7.25a.5.5,0,0,0,.15-.35V11Z"/>'}],rY=["info-circle",{outline:'<circle cx="17.93" cy="11.9" r="1.4"/><path d="M21,23H19V15H16a1,1,0,0,0,0,2h1v6H15a1,1,0,1,0,0,2h6a1,1,0,0,0,0-2Z"/><path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm0,22A10,10,0,1,1,28,18,10,10,0,0,1,18,28Z"/>',solid:'<path d="M18,6A12,12,0,1,0,30,18,12,12,0,0,0,18,6Zm-2,5.15a2,2,0,1,1,2,2A2,2,0,0,1,15.9,11.15ZM23,24a1,1,0,0,1-1,1H15a1,1,0,1,1,0-2h2V17H16a1,1,0,0,1,0-2h4v8h2A1,1,0,0,1,23,24Z"/>'}],nPe=["exclamation-triangle",{outline:'<path d="M18,21.32a1.3,1.3,0,0,0,1.3-1.3V14a1.3,1.3,0,1,0-2.6,0v6A1.3,1.3,0,0,0,18,21.32Z"/><circle cx="17.95" cy="24.27" r="1.5"/><path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43Zm-1.78,1.94a1,1,0,0,1-.86.49H8.21a1,1,0,0,1-.88-1.48L17.07,8.55a1,1,0,0,1,1.76,0l9.74,17.94A1,1,0,0,1,28.55,27.48Z"/>',solid:'<path d="M30.33,25.54,20.59,7.6a3,3,0,0,0-5.27,0L5.57,25.54A3,3,0,0,0,8.21,30H27.69a3,3,0,0,0,2.64-4.43ZM16.46,12.74a1.49,1.49,0,0,1,3,0v6.89a1.49,1.49,0,1,1-3,0ZM18,26.25a1.72,1.72,0,1,1,1.72-1.72A1.72,1.72,0,0,1,18,26.25Z"/>'}],iPe=["circle",{outline:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34Z"/>'}],rPe=["dot-circle",{outline:'<path d="M18,11a7,7,0,1,1-7,7,7,7,0,0,1,7-7"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>'}],sY=["error-standard",{outline:'<circle cx="18" cy="26.06" r="1.33"/><path d="M18,22.61a1,1,0,0,1-1-1v-12a1,1,0,1,1,2,0v12A1,1,0,0,1,18,22.61Z"/><path d="M18,34A16,16,0,1,1,34,18,16,16,0,0,1,18,34ZM18,4A14,14,0,1,0,32,18,14,14,0,0,0,18,4Z"/>',solid:'<path d="M18,2.1a16,16,0,1,0,16,16A16,16,0,0,0,18,2.1ZM16.6,8.8a1.4,1.4,0,0,1,2.8,0v12a1.4,1.4,0,0,1-2.8,0ZM18,28.6a1.8,1.8,0,1,1,1.8-1.8A1.8,1.8,0,0,1,18,28.6Z"/>'}],sPe=["success-standard",{outline:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2Zm0,30A14,14,0,1,1,32,18,14,14,0,0,1,18,32Z"/><path d="M28,12.1a1,1,0,0,0-1.41,0L15.49,23.15l-6-6A1,1,0,0,0,8,18.53L15.49,26,28,13.52A1,1,0,0,0,28,12.1Z"/>',solid:'<path d="M18,2A16,16,0,1,0,34,18,16,16,0,0,0,18,2ZM28.45,12.63,15.31,25.76,7.55,18a1.4,1.4,0,0,1,2-2l5.78,5.78L26.47,10.65a1.4,1.4,0,1,1,2,2Z"/>'}];class dPe extends O{constructor(a,l){super()}schedule(a,l=0){return this}}class pM extends dPe{constructor(a,l){super(a,l),this.scheduler=a,this.work=l,this.pending=!1}schedule(a,l=0){if(this.closed)return this;this.state=a;const h=this.id,d=this.scheduler;return null!=h&&(this.id=this.recycleAsyncId(d,h,l)),this.pending=!0,this.delay=l,this.id=this.id||this.requestAsyncId(d,this.id,l),this}requestAsyncId(a,l,h=0){return setInterval(a.flush.bind(a,this),h)}recycleAsyncId(a,l,h=0){if(null!==h&&this.delay===h&&!1===this.pending)return l;clearInterval(l)}execute(a,l){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const h=this._execute(a,l);if(h)return h;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(a,l){let d,h=!1;try{this.work(a)}catch(f){h=!0,d=!!f&&f||new Error(f)}if(h)return this.unsubscribe(),d}_unsubscribe(){const a=this.id,l=this.scheduler,h=l.actions,d=h.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==d&&h.splice(d,1),null!=a&&(this.id=this.recycleAsyncId(l,a,null)),this.delay=null}}let oY=(()=>{class c{constructor(l,h=c.now){this.SchedulerAction=l,this.now=h}schedule(l,h=0,d){return new this.SchedulerAction(this,l).schedule(d,h)}}return c.now=()=>Date.now(),c})();class Ic extends oY{constructor(a,l=oY.now){super(a,()=>Ic.delegate&&Ic.delegate!==this?Ic.delegate.now():l()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(a,l=0,h){return Ic.delegate&&Ic.delegate!==this?Ic.delegate.schedule(a,l,h):super.schedule(a,l,h)}flush(a){const{actions:l}=this;if(this.active)return void l.push(a);let h;this.active=!0;do{if(h=a.execute(a.state,a.delay))break}while(a=l.shift());if(this.active=!1,h){for(;a=l.shift();)a.unsubscribe();throw h}}}const A_=new Ic(pM);function I_(c,a=A_){return l=>l.lift(new fPe(c,a))}class fPe{constructor(a,l){this.dueTime=a,this.scheduler=l}call(a,l){return l.subscribe(new pPe(a,this.dueTime,this.scheduler))}}class pPe extends ee{constructor(a,l,h){super(a),this.dueTime=l,this.scheduler=h,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(a){this.clearDebounce(),this.lastValue=a,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(mPe,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:a}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(a)}}clearDebounce(){const a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)}}function mPe(c){c.debouncedNext()}function Eu(c){return a=>a.lift(new gPe(c))}class gPe{constructor(a){this.notifier=a}call(a,l){const h=new yPe(a),d=bg(this.notifier,new _g(h));return d&&!h.seenValue?(h.add(d),l.subscribe(h)):h}}class yPe extends vg{constructor(a){super(a),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}class Oa{constructor(a,l,h){this.kind=a,this.value=l,this.error=h,this.hasValue="N"===a}observe(a){switch(this.kind){case"N":return a.next&&a.next(this.value);case"E":return a.error&&a.error(this.error);case"C":return a.complete&&a.complete()}}do(a,l,h){switch(this.kind){case"N":return a&&a(this.value);case"E":return l&&l(this.error);case"C":return h&&h()}}accept(a,l,h){return a&&"function"==typeof a.next?this.observe(a):this.do(a,l,h)}toObservable(){switch(this.kind){case"N":return Ct(this.value);case"E":return my(this.error);case"C":return UC()}throw new Error("unexpected notification kind value")}static createNext(a){return typeof a<"u"?new Oa("N",a):Oa.undefinedValueNotification}static createError(a){return new Oa("E",void 0,a)}static createComplete(){return Oa.completeNotification}}Oa.completeNotification=new Oa("C"),Oa.undefinedValueNotification=new Oa("N",void 0);class vPe{constructor(a,l){this.delay=a,this.scheduler=l}call(a,l){return l.subscribe(new VF(a,this.delay,this.scheduler))}}class VF extends ee{constructor(a,l,h){super(a),this.delay=l,this.scheduler=h,this.queue=[],this.active=!1,this.errored=!1}static dispatch(a){const l=a.source,h=l.queue,d=a.scheduler,f=a.destination;for(;h.length>0&&h[0].time-d.now()<=0;)h.shift().notification.observe(f);if(h.length>0){const m=Math.max(0,h[0].time-d.now());this.schedule(a,m)}else this.unsubscribe(),l.active=!1}_schedule(a){this.active=!0,this.destination.add(a.schedule(VF.dispatch,this.delay,{source:this,destination:this.destination,scheduler:a}))}scheduleNotification(a){if(!0===this.errored)return;const l=this.scheduler,h=new bPe(l.now()+this.delay,a);this.queue.push(h),!1===this.active&&this._schedule(l)}_next(a){this.scheduleNotification(Oa.createNext(a))}_error(a){this.errored=!0,this.queue=[],this.destination.error(a),this.unsubscribe()}_complete(){this.scheduleNotification(Oa.createComplete()),this.unsubscribe()}}class bPe{constructor(a,l){this.time=a,this.notification=l}}function Mu(c,a,l,h){return Dt(l)&&(h=l,l=void 0),h?Mu(c,a,l).pipe(q(d=>Ee(d)?h(...d):h(d))):new Tt(d=>{lY(c,a,function f(m){d.next(arguments.length>1?Array.prototype.slice.call(arguments):m)},d,l)})}function lY(c,a,l,h,d){let f;if(function wPe(c){return c&&"function"==typeof c.addEventListener&&"function"==typeof c.removeEventListener}(c)){const m=c;c.addEventListener(a,l,d),f=()=>m.removeEventListener(a,l,d)}else if(function TPe(c){return c&&"function"==typeof c.on&&"function"==typeof c.off}(c)){const m=c;c.on(a,l),f=()=>m.off(a,l)}else if(function SPe(c){return c&&"function"==typeof c.addListener&&"function"==typeof c.removeListener}(c)){const m=c;c.addListener(a,l),f=()=>m.removeListener(a,l)}else{if(!c||!c.length)throw new TypeError("Invalid event target");for(let m=0,g=c.length;m<g;m++)lY(c[m],a,l,h,d)}h.add(f)}const EPe=new class xPe extends Ic{}(class CPe extends pM{constructor(a,l){super(a,l),this.scheduler=a,this.work=l}schedule(a,l=0){return l>0?super.schedule(a,l):(this.delay=l,this.state=a,this.scheduler.flush(this),this)}execute(a,l){return l>0||this.closed?super.execute(a,l):this._execute(a,l)}requestAsyncId(a,l,h=0){return null!==h&&h>0||null===h&&this.delay>0?super.requestAsyncId(a,l,h):a.flush(this)}});class mM extends ee{constructor(a,l,h=0){super(a),this.scheduler=l,this.delay=h}static dispatch(a){const{notification:l,destination:h}=a;l.observe(h),this.unsubscribe()}scheduleMessage(a){this.destination.add(this.scheduler.schedule(mM.dispatch,this.delay,new DPe(a,this.destination)))}_next(a){this.scheduleMessage(Oa.createNext(a))}_error(a){this.scheduleMessage(Oa.createError(a)),this.unsubscribe()}_complete(){this.scheduleMessage(Oa.createComplete()),this.unsubscribe()}}class DPe{constructor(a,l){this.notification=a,this.destination=l}}class BF extends Qe{constructor(a=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,h){super(),this.scheduler=h,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=a<1?1:a,this._windowTime=l<1?1:l,l===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(a){if(!this.isStopped){const l=this._events;l.push(a),l.length>this._bufferSize&&l.shift()}super.next(a)}nextTimeWindow(a){this.isStopped||(this._events.push(new APe(this._getNow(),a)),this._trimBufferThenGetEvents()),super.next(a)}_subscribe(a){const l=this._infiniteTimeWindow,h=l?this._events:this._trimBufferThenGetEvents(),d=this.scheduler,f=h.length;let m;if(this.closed)throw new gi;if(this.isStopped||this.hasError?m=O.EMPTY:(this.observers.push(a),m=new yi(this,a)),d&&a.add(a=new mM(a,d)),l)for(let g=0;g<f&&!a.closed;g++)a.next(h[g]);else for(let g=0;g<f&&!a.closed;g++)a.next(h[g].value);return this.hasError?a.error(this.thrownError):this.isStopped&&a.complete(),m}_getNow(){return(this.scheduler||EPe).now()}_trimBufferThenGetEvents(){const a=this._getNow(),l=this._bufferSize,h=this._windowTime,d=this._events,f=d.length;let m=0;for(;m<f&&!(a-d[m].time<h);)m++;return f>l&&(m=Math.max(m,f-l)),m>0&&d.splice(0,m),d}}class APe{constructor(a,l){this.time=a,this.value=l}}class uY{}const kh="*";function ml(c,a){return{type:7,name:c,definitions:a,options:{}}}function Co(c,a=null){return{type:4,styles:a,timings:c}}function hY(c,a=null){return{type:2,steps:c,options:a}}function vi(c){return{type:6,styles:c,offset:null}}function gM(c,a,l){return{type:0,name:c,styles:a,options:l}}function Ns(c,a,l=null){return{type:1,expr:c,animation:a,options:l}}function dY(c){Promise.resolve().then(c)}class $S{constructor(a=0,l=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=a+l}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}onStart(a){this._originalOnStartFns.push(a),this._onStartFns.push(a)}onDone(a){this._originalOnDoneFns.push(a),this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){dY(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(a=>a()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(a){this._position=this.totalTime?a*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(a){const l="start"==a?this._onStartFns:this._onDoneFns;l.forEach(h=>h()),l.length=0}}class fY{constructor(a){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=a;let l=0,h=0,d=0;const f=this.players.length;0==f?dY(()=>this._onFinish()):this.players.forEach(m=>{m.onDone(()=>{++l==f&&this._onFinish()}),m.onDestroy(()=>{++h==f&&this._onDestroy()}),m.onStart(()=>{++d==f&&this._onStart()})}),this.totalTime=this.players.reduce((m,g)=>Math.max(m,g.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this.players.forEach(a=>a.init())}onStart(a){this._onStartFns.push(a)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(a=>a()),this._onStartFns=[])}onDone(a){this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(a=>a.play())}pause(){this.players.forEach(a=>a.pause())}restart(){this.players.forEach(a=>a.restart())}finish(){this._onFinish(),this.players.forEach(a=>a.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(a=>a.destroy()),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}reset(){this.players.forEach(a=>a.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(a){const l=a*this.totalTime;this.players.forEach(h=>{const d=h.totalTime?Math.min(1,l/h.totalTime):1;h.setPosition(d)})}getPosition(){const a=this.players.reduce((l,h)=>null===l||h.totalTime>l.totalTime?h:l,null);return null!=a?a.getPosition():0}beforeDestroy(){this.players.forEach(a=>{a.beforeDestroy&&a.beforeDestroy()})}triggerCallback(a){const l="start"==a?this._onStartFns:this._onDoneFns;l.forEach(h=>h()),l.length=0}}function yM(...c){if(1===c.length){const a=c[0];if(Ee(a))return _M(a,null);if(C(a)&&Object.getPrototypeOf(a)===Object.prototype){const l=Object.keys(a);return _M(l.map(h=>a[h]),l)}}if("function"==typeof c[c.length-1]){const a=c.pop();return _M(c=1===c.length&&Ee(c[0])?c[0]:c,null).pipe(q(l=>a(...l)))}return _M(c,null)}function _M(c,a){return new Tt(l=>{const h=c.length;if(0===h)return void l.complete();const d=new Array(h);let f=0,m=0;for(let g=0;g<h;g++){const y=Pn(c[g]);let _=!1;l.add(y.subscribe({next:v=>{_||(_=!0,m++),d[g]=v},error:v=>l.error(v),complete:()=>{f++,(f===h||!_)&&(m===h&&l.next(a?a.reduce((v,b,S)=>(v[b]=d[S],v),{}):d),l.complete())}}))}})}let pY=(()=>{class c{constructor(l,h){this._renderer=l,this._elementRef=h,this.onChange=d=>{},this.onTouched=()=>{}}setProperty(l,h){this._renderer.setProperty(this._elementRef.nativeElement,l,h)}registerOnTouched(l){this.onTouched=l}registerOnChange(l){this.onChange=l}setDisabledState(l){this.setProperty("disabled",l)}}return c.\u0275fac=function(l){return new(l||c)(N(Gn),N(Xt))},c.\u0275dir=Ke({type:c}),c})(),Tm=(()=>{class c extends pY{}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Fr(c)))(h||c)}}(),c.\u0275dir=Ke({type:c,features:[rn]}),c})();const Du=new Vt("NgValueAccessor"),LPe={provide:Du,useExisting:Tr(()=>R_),multi:!0};let R_=(()=>{class c extends Tm{writeValue(l){this.setProperty("checked",l)}}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Fr(c)))(h||c)}}(),c.\u0275dir=Ke({type:c,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(l,h){1&l&&De("change",function(f){return h.onChange(f.target.checked)})("blur",function(){return h.onTouched()})},features:[Lt([LPe]),rn]}),c})();const PPe={provide:Du,useExisting:Tr(()=>ql),multi:!0},NPe=new Vt("CompositionEventMode");let ql=(()=>{class c extends pY{constructor(l,h,d){super(l,h),this._compositionMode=d,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function OPe(){const c=su()?su().getUserAgent():"";return/android (\d+)/.test(c.toLowerCase())}())}writeValue(l){this.setProperty("value",l??"")}_handleInput(l){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(l)}_compositionStart(){this._composing=!0}_compositionEnd(l){this._composing=!1,this._compositionMode&&this.onChange(l)}}return c.\u0275fac=function(l){return new(l||c)(N(Gn),N(Xt),N(NPe,8))},c.\u0275dir=Ke({type:c,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(l,h){1&l&&De("input",function(f){return h._handleInput(f.target.value)})("blur",function(){return h.onTouched()})("compositionstart",function(){return h._compositionStart()})("compositionend",function(f){return h._compositionEnd(f.target.value)})},features:[Lt([PPe]),rn]}),c})();function Tf(c){return null==c||("string"==typeof c||Array.isArray(c))&&0===c.length}function mY(c){return null!=c&&"number"==typeof c.length}const xo=new Vt("NgValidators"),wf=new Vt("NgAsyncValidators"),kPe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class YS{static min(a){return gY(a)}static max(a){return yY(a)}static required(a){return function _Y(c){return Tf(c.value)?{required:!0}:null}(a)}static requiredTrue(a){return function vY(c){return!0===c.value?null:{required:!0}}(a)}static email(a){return function bY(c){return Tf(c.value)||kPe.test(c.value)?null:{email:!0}}(a)}static minLength(a){return function SY(c){return a=>Tf(a.value)||!mY(a.value)?null:a.value.length<c?{minlength:{requiredLength:c,actualLength:a.value.length}}:null}(a)}static maxLength(a){return function TY(c){return a=>mY(a.value)&&a.value.length>c?{maxlength:{requiredLength:c,actualLength:a.value.length}}:null}(a)}static pattern(a){return function wY(c){if(!c)return vM;let a,l;return"string"==typeof c?(l="","^"!==c.charAt(0)&&(l+="^"),l+=c,"$"!==c.charAt(c.length-1)&&(l+="$"),a=new RegExp(l)):(l=c.toString(),a=c),h=>{if(Tf(h.value))return null;const d=h.value;return a.test(d)?null:{pattern:{requiredPattern:l,actualValue:d}}}}(a)}static nullValidator(a){return null}static compose(a){return AY(a)}static composeAsync(a){return IY(a)}}function gY(c){return a=>{if(Tf(a.value)||Tf(c))return null;const l=parseFloat(a.value);return!isNaN(l)&&l<c?{min:{min:c,actual:a.value}}:null}}function yY(c){return a=>{if(Tf(a.value)||Tf(c))return null;const l=parseFloat(a.value);return!isNaN(l)&&l>c?{max:{max:c,actual:a.value}}:null}}function vM(c){return null}function CY(c){return null!=c}function xY(c){return z0(c)?Pn(c):c}function EY(c){let a={};return c.forEach(l=>{a=null!=l?{...a,...l}:a}),0===Object.keys(a).length?null:a}function MY(c,a){return a.map(l=>l(c))}function DY(c){return c.map(a=>function VPe(c){return!c.validate}(a)?a:l=>a.validate(l))}function AY(c){if(!c)return null;const a=c.filter(CY);return 0==a.length?null:function(l){return EY(MY(l,a))}}function zF(c){return null!=c?AY(DY(c)):null}function IY(c){if(!c)return null;const a=c.filter(CY);return 0==a.length?null:function(l){return yM(MY(l,a).map(xY)).pipe(q(EY))}}function GF(c){return null!=c?IY(DY(c)):null}function RY(c,a){return null===c?[a]:Array.isArray(c)?[...c,a]:[c,a]}function LY(c){return c._rawValidators}function PY(c){return c._rawAsyncValidators}function HF(c){return c?Array.isArray(c)?c:[c]:[]}function bM(c,a){return Array.isArray(c)?c.includes(a):c===a}function OY(c,a){const l=HF(a);return HF(c).forEach(d=>{bM(l,d)||l.push(d)}),l}function NY(c,a){return HF(a).filter(l=>!bM(c,l))}class FY{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(a){this._rawValidators=a||[],this._composedValidatorFn=zF(this._rawValidators)}_setAsyncValidators(a){this._rawAsyncValidators=a||[],this._composedAsyncValidatorFn=GF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(a){this._onDestroyCallbacks.push(a)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(a=>a()),this._onDestroyCallbacks=[]}reset(a){this.control&&this.control.reset(a)}hasError(a,l){return!!this.control&&this.control.hasError(a,l)}getError(a,l){return this.control?this.control.getError(a,l):null}}class pa extends FY{get formDirective(){return null}get path(){return null}}class ma extends FY{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class kY{constructor(a){this._cd=a}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Na=(()=>{class c extends kY{constructor(l){super(l)}}return c.\u0275fac=function(l){return new(l||c)(N(ma,2))},c.\u0275dir=Ke({type:c,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(l,h){2&l&&ot("ng-untouched",h.isUntouched)("ng-touched",h.isTouched)("ng-pristine",h.isPristine)("ng-dirty",h.isDirty)("ng-valid",h.isValid)("ng-invalid",h.isInvalid)("ng-pending",h.isPending)},features:[rn]}),c})(),SM=(()=>{class c extends kY{constructor(l){super(l)}}return c.\u0275fac=function(l){return new(l||c)(N(pa,10))},c.\u0275dir=Ke({type:c,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(l,h){2&l&&ot("ng-untouched",h.isUntouched)("ng-touched",h.isTouched)("ng-pristine",h.isPristine)("ng-dirty",h.isDirty)("ng-valid",h.isValid)("ng-invalid",h.isInvalid)("ng-pending",h.isPending)("ng-submitted",h.isSubmitted)},features:[rn]}),c})();const ZS="VALID",wM="INVALID",L_="PENDING",KS="DISABLED";function qF(c){return(CM(c)?c.validators:c)||null}function BY(c){return Array.isArray(c)?zF(c):c||null}function $F(c,a){return(CM(a)?a.asyncValidators:c)||null}function UY(c){return Array.isArray(c)?GF(c):c||null}function CM(c){return null!=c&&!Array.isArray(c)&&"object"==typeof c}class HY{constructor(a,l){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=a,this._rawAsyncValidators=l,this._composedValidatorFn=BY(this._rawValidators),this._composedAsyncValidatorFn=UY(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(a){this._rawValidators=this._composedValidatorFn=a}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(a){this._rawAsyncValidators=this._composedAsyncValidatorFn=a}get parent(){return this._parent}get valid(){return this.status===ZS}get invalid(){return this.status===wM}get pending(){return this.status==L_}get disabled(){return this.status===KS}get enabled(){return this.status!==KS}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(a){this._rawValidators=a,this._composedValidatorFn=BY(a)}setAsyncValidators(a){this._rawAsyncValidators=a,this._composedAsyncValidatorFn=UY(a)}addValidators(a){this.setValidators(OY(a,this._rawValidators))}addAsyncValidators(a){this.setAsyncValidators(OY(a,this._rawAsyncValidators))}removeValidators(a){this.setValidators(NY(a,this._rawValidators))}removeAsyncValidators(a){this.setAsyncValidators(NY(a,this._rawAsyncValidators))}hasValidator(a){return bM(this._rawValidators,a)}hasAsyncValidator(a){return bM(this._rawAsyncValidators,a)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(a={}){this.touched=!0,this._parent&&!a.onlySelf&&this._parent.markAsTouched(a)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(a=>a.markAllAsTouched())}markAsUntouched(a={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(l=>{l.markAsUntouched({onlySelf:!0})}),this._parent&&!a.onlySelf&&this._parent._updateTouched(a)}markAsDirty(a={}){this.pristine=!1,this._parent&&!a.onlySelf&&this._parent.markAsDirty(a)}markAsPristine(a={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(l=>{l.markAsPristine({onlySelf:!0})}),this._parent&&!a.onlySelf&&this._parent._updatePristine(a)}markAsPending(a={}){this.status=L_,!1!==a.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!a.onlySelf&&this._parent.markAsPending(a)}disable(a={}){const l=this._parentMarkedDirty(a.onlySelf);this.status=KS,this.errors=null,this._forEachChild(h=>{h.disable({...a,onlySelf:!0})}),this._updateValue(),!1!==a.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...a,skipPristineCheck:l}),this._onDisabledChange.forEach(h=>h(!0))}enable(a={}){const l=this._parentMarkedDirty(a.onlySelf);this.status=ZS,this._forEachChild(h=>{h.enable({...a,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent}),this._updateAncestors({...a,skipPristineCheck:l}),this._onDisabledChange.forEach(h=>h(!1))}_updateAncestors(a){this._parent&&!a.onlySelf&&(this._parent.updateValueAndValidity(a),a.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(a){this._parent=a}getRawValue(){return this.value}updateValueAndValidity(a={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ZS||this.status===L_)&&this._runAsyncValidator(a.emitEvent)),!1!==a.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!a.onlySelf&&this._parent.updateValueAndValidity(a)}_updateTreeValidity(a={emitEvent:!0}){this._forEachChild(l=>l._updateTreeValidity(a)),this.updateValueAndValidity({onlySelf:!0,emitEvent:a.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?KS:ZS}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(a){if(this.asyncValidator){this.status=L_,this._hasOwnPendingAsyncValidator=!0;const l=xY(this.asyncValidator(this));this._asyncValidationSubscription=l.subscribe(h=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(h,{emitEvent:a})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(a,l={}){this.errors=a,this._updateControlsErrors(!1!==l.emitEvent)}get(a){let l=a;return null==l||(Array.isArray(l)||(l=l.split(".")),0===l.length)?null:l.reduce((h,d)=>h&&h._find(d),this)}getError(a,l){const h=l?this.get(l):this;return h&&h.errors?h.errors[a]:null}hasError(a,l){return!!this.getError(a,l)}get root(){let a=this;for(;a._parent;)a=a._parent;return a}_updateControlsErrors(a){this.status=this._calculateStatus(),a&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(a)}_initObservables(){this.valueChanges=new st,this.statusChanges=new st}_calculateStatus(){return this._allControlsDisabled()?KS:this.errors?wM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(L_)?L_:this._anyControlsHaveStatus(wM)?wM:ZS}_anyControlsHaveStatus(a){return this._anyControls(l=>l.status===a)}_anyControlsDirty(){return this._anyControls(a=>a.dirty)}_anyControlsTouched(){return this._anyControls(a=>a.touched)}_updatePristine(a={}){this.pristine=!this._anyControlsDirty(),this._parent&&!a.onlySelf&&this._parent._updatePristine(a)}_updateTouched(a={}){this.touched=this._anyControlsTouched(),this._parent&&!a.onlySelf&&this._parent._updateTouched(a)}_registerOnCollectionChange(a){this._onCollectionChange=a}_setUpdateStrategy(a){CM(a)&&null!=a.updateOn&&(this._updateOn=a.updateOn)}_parentMarkedDirty(a){return!a&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(a){return null}}class P_ extends HY{constructor(a,l,h){super(qF(l),$F(h,l)),this.controls=a,this._initObservables(),this._setUpdateStrategy(l),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(a,l){return this.controls[a]?this.controls[a]:(this.controls[a]=l,l.setParent(this),l._registerOnCollectionChange(this._onCollectionChange),l)}addControl(a,l,h={}){this.registerControl(a,l),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}removeControl(a,l={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),delete this.controls[a],this.updateValueAndValidity({emitEvent:l.emitEvent}),this._onCollectionChange()}setControl(a,l,h={}){this.controls[a]&&this.controls[a]._registerOnCollectionChange(()=>{}),delete this.controls[a],l&&this.registerControl(a,l),this.updateValueAndValidity({emitEvent:h.emitEvent}),this._onCollectionChange()}contains(a){return this.controls.hasOwnProperty(a)&&this.controls[a].enabled}setValue(a,l={}){(function GY(c,a,l){c._forEachChild((h,d)=>{if(void 0===l[d])throw new rt(1002,"")})})(this,0,a),Object.keys(a).forEach(h=>{(function zY(c,a,l){const h=c.controls;if(!(a?Object.keys(h):h).length)throw new rt(1e3,"");if(!h[l])throw new rt(1001,"")})(this,!0,h),this.controls[h].setValue(a[h],{onlySelf:!0,emitEvent:l.emitEvent})}),this.updateValueAndValidity(l)}patchValue(a,l={}){null!=a&&(Object.keys(a).forEach(h=>{const d=this.controls[h];d&&d.patchValue(a[h],{onlySelf:!0,emitEvent:l.emitEvent})}),this.updateValueAndValidity(l))}reset(a={},l={}){this._forEachChild((h,d)=>{h.reset(a[d],{onlySelf:!0,emitEvent:l.emitEvent})}),this._updatePristine(l),this._updateTouched(l),this.updateValueAndValidity(l)}getRawValue(){return this._reduceChildren({},(a,l,h)=>(a[h]=l.getRawValue(),a))}_syncPendingControls(){let a=this._reduceChildren(!1,(l,h)=>!!h._syncPendingControls()||l);return a&&this.updateValueAndValidity({onlySelf:!0}),a}_forEachChild(a){Object.keys(this.controls).forEach(l=>{const h=this.controls[l];h&&a(h,l)})}_setUpControls(){this._forEachChild(a=>{a.setParent(this),a._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(a){for(const[l,h]of Object.entries(this.controls))if(this.contains(l)&&a(h))return!0;return!1}_reduceValue(){return this._reduceChildren({},(l,h,d)=>((h.enabled||this.disabled)&&(l[d]=h.value),l))}_reduceChildren(a,l){let h=a;return this._forEachChild((d,f)=>{h=l(h,d,f)}),h}_allControlsDisabled(){for(const a of Object.keys(this.controls))if(this.controls[a].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(a){return this.controls.hasOwnProperty(a)?this.controls[a]:null}}function xM(c,a){return[...a.path,c]}function JS(c,a){YF(c,a),a.valueAccessor.writeValue(c.value),c.disabled&&a.valueAccessor.setDisabledState?.(!0),function qPe(c,a){a.valueAccessor.registerOnChange(l=>{c._pendingValue=l,c._pendingChange=!0,c._pendingDirty=!0,"change"===c.updateOn&&jY(c,a)})}(c,a),function YPe(c,a){const l=(h,d)=>{a.valueAccessor.writeValue(h),d&&a.viewToModelUpdate(h)};c.registerOnChange(l),a._registerOnDestroy(()=>{c._unregisterOnChange(l)})}(c,a),function $Pe(c,a){a.valueAccessor.registerOnTouched(()=>{c._pendingTouched=!0,"blur"===c.updateOn&&c._pendingChange&&jY(c,a),"submit"!==c.updateOn&&c.markAsTouched()})}(c,a),function XPe(c,a){if(a.valueAccessor.setDisabledState){const l=h=>{a.valueAccessor.setDisabledState(h)};c.registerOnDisabledChange(l),a._registerOnDestroy(()=>{c._unregisterOnDisabledChange(l)})}}(c,a)}function EM(c,a,l=!0){const h=()=>{};a.valueAccessor&&(a.valueAccessor.registerOnChange(h),a.valueAccessor.registerOnTouched(h)),DM(c,a),c&&(a._invokeOnDestroyCallbacks(),c._registerOnCollectionChange(()=>{}))}function MM(c,a){c.forEach(l=>{l.registerOnValidatorChange&&l.registerOnValidatorChange(a)})}function YF(c,a){const l=LY(c);null!==a.validator?c.setValidators(RY(l,a.validator)):"function"==typeof l&&c.setValidators([l]);const h=PY(c);null!==a.asyncValidator?c.setAsyncValidators(RY(h,a.asyncValidator)):"function"==typeof h&&c.setAsyncValidators([h]);const d=()=>c.updateValueAndValidity();MM(a._rawValidators,d),MM(a._rawAsyncValidators,d)}function DM(c,a){let l=!1;if(null!==c){if(null!==a.validator){const d=LY(c);if(Array.isArray(d)&&d.length>0){const f=d.filter(m=>m!==a.validator);f.length!==d.length&&(l=!0,c.setValidators(f))}}if(null!==a.asyncValidator){const d=PY(c);if(Array.isArray(d)&&d.length>0){const f=d.filter(m=>m!==a.asyncValidator);f.length!==d.length&&(l=!0,c.setAsyncValidators(f))}}}const h=()=>{};return MM(a._rawValidators,h),MM(a._rawAsyncValidators,h),l}function jY(c,a){c._pendingDirty&&c.markAsDirty(),c.setValue(c._pendingValue,{emitModelToViewChange:!1}),a.viewToModelUpdate(c._pendingValue),c._pendingChange=!1}function WY(c,a){YF(c,a)}function ZF(c,a){if(!c.hasOwnProperty("model"))return!1;const l=c.model;return!!l.isFirstChange()||!Object.is(a,l.currentValue)}function qY(c,a){c._syncPendingControls(),a.forEach(l=>{const h=l.control;"submit"===h.updateOn&&h._pendingChange&&(l.viewToModelUpdate(h._pendingValue),h._pendingChange=!1)})}function KF(c,a){if(!a)return null;let l,h,d;return Array.isArray(a),a.forEach(f=>{f.constructor===ql?l=f:function JPe(c){return Object.getPrototypeOf(c.constructor)===Tm}(f)?h=f:d=f}),d||h||l||null}const eOe={provide:pa,useExisting:Tr(()=>e1)},QS=(()=>Promise.resolve())();let e1=(()=>{class c extends pa{constructor(l,h){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new st,this.form=new P_({},zF(l),GF(h))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(l){QS.then(()=>{const h=this._findContainer(l.path);l.control=h.registerControl(l.name,l.control),JS(l.control,l),l.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(l)})}getControl(l){return this.form.get(l.path)}removeControl(l){QS.then(()=>{const h=this._findContainer(l.path);h&&h.removeControl(l.name),this._directives.delete(l)})}addFormGroup(l){QS.then(()=>{const h=this._findContainer(l.path),d=new P_({});WY(d,l),h.registerControl(l.name,d),d.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(l){QS.then(()=>{const h=this._findContainer(l.path);h&&h.removeControl(l.name)})}getFormGroup(l){return this.form.get(l.path)}updateModel(l,h){QS.then(()=>{this.form.get(l.path).setValue(h)})}setValue(l){this.control.setValue(l)}onSubmit(l){return this.submitted=!0,qY(this.form,this._directives),this.ngSubmit.emit(l),"dialog"===l?.target?.method}onReset(){this.resetForm()}resetForm(l){this.form.reset(l),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(l){return l.pop(),l.length?this.form.get(l):this.form}}return c.\u0275fac=function(l){return new(l||c)(N(xo,10),N(wf,10))},c.\u0275dir=Ke({type:c,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(l,h){1&l&&De("submit",function(f){return h.onSubmit(f)})("reset",function(){return h.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Lt([eOe]),rn]}),c})();function $Y(c,a){const l=c.indexOf(a);l>-1&&c.splice(l,1)}function YY(c){return"object"==typeof c&&null!==c&&2===Object.keys(c).length&&"value"in c&&"disabled"in c}const Cf=class extends HY{constructor(a=null,l,h){super(qF(l),$F(h,l)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(a),this._setUpdateStrategy(l),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),CM(l)&&(l.nonNullable||l.initialValueIsDefault)&&(this.defaultValue=YY(a)?a.value:a)}setValue(a,l={}){this.value=this._pendingValue=a,this._onChange.length&&!1!==l.emitModelToViewChange&&this._onChange.forEach(h=>h(this.value,!1!==l.emitViewToModelChange)),this.updateValueAndValidity(l)}patchValue(a,l={}){this.setValue(a,l)}reset(a=this.defaultValue,l={}){this._applyFormState(a),this.markAsPristine(l),this.markAsUntouched(l),this.setValue(this.value,l),this._pendingChange=!1}_updateValue(){}_anyControls(a){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(a){this._onChange.push(a)}_unregisterOnChange(a){$Y(this._onChange,a)}registerOnDisabledChange(a){this._onDisabledChange.push(a)}_unregisterOnDisabledChange(a){$Y(this._onDisabledChange,a)}_forEachChild(a){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(a){YY(a)?(this.value=this._pendingValue=a.value,a.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=a}},iOe={provide:ma,useExisting:Tr(()=>gl)},KY=(()=>Promise.resolve())();let gl=(()=>{class c extends ma{constructor(l,h,d,f,m){super(),this._changeDetectorRef=m,this.control=new Cf,this._registered=!1,this.update=new st,this._parent=l,this._setValidators(h),this._setAsyncValidators(d),this.valueAccessor=KF(0,f)}ngOnChanges(l){if(this._checkForErrors(),!this._registered||"name"in l){if(this._registered&&(this._checkName(),this.formDirective)){const h=l.name.previousValue;this.formDirective.removeControl({name:h,path:this._getPath(h)})}this._setUpControl()}"isDisabled"in l&&this._updateDisabled(l),ZF(l,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(l){this.viewModel=l,this.update.emit(l)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){JS(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(l){KY.then(()=>{this.control.setValue(l,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(l){const h=l.isDisabled.currentValue,d=0!==h&&lh(h);KY.then(()=>{d&&!this.control.disabled?this.control.disable():!d&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(l){return this._parent?xM(l,this._parent):[l]}}return c.\u0275fac=function(l){return new(l||c)(N(pa,9),N(xo,10),N(wf,10),N(Du,10),N(Ls,8))},c.\u0275dir=Ke({type:c,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Lt([iOe]),rn,ps]}),c})(),AM=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=Ke({type:c,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),c})();const rOe={provide:Du,useExisting:Tr(()=>t1),multi:!0};let t1=(()=>{class c extends Tm{writeValue(l){this.setProperty("value",l??"")}registerOnChange(l){this.onChange=h=>{l(""==h?null:parseFloat(h))}}}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Fr(c)))(h||c)}}(),c.\u0275dir=Ke({type:c,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(l,h){1&l&&De("input",function(f){return h.onChange(f.target.value)})("blur",function(){return h.onTouched()})},features:[Lt([rOe]),rn]}),c})();const sOe={provide:Du,useExisting:Tr(()=>QF),multi:!0};let JY=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({}),c})(),oOe=(()=>{class c{constructor(){this._accessors=[]}add(l,h){this._accessors.push([l,h])}remove(l){for(let h=this._accessors.length-1;h>=0;--h)if(this._accessors[h][1]===l)return void this._accessors.splice(h,1)}select(l){this._accessors.forEach(h=>{this._isSameGroup(h,l)&&h[1]!==l&&h[1].fireUncheck(l.value)})}_isSameGroup(l,h){return!!l[0].control&&l[0]._parent===h._control._parent&&l[1].name===h.name}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:JY}),c})(),QF=(()=>{class c extends Tm{constructor(l,h,d,f){super(l,h),this._registry=d,this._injector=f,this.onChange=()=>{}}ngOnInit(){this._control=this._injector.get(ma),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(l){this._state=l===this.value,this.setProperty("checked",this._state)}registerOnChange(l){this._fn=l,this.onChange=()=>{l(this.value),this._registry.select(this)}}fireUncheck(l){this.writeValue(l)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return c.\u0275fac=function(l){return new(l||c)(N(Gn),N(Xt),N(oOe),N(cr))},c.\u0275dir=Ke({type:c,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(l,h){1&l&&De("change",function(){return h.onChange()})("blur",function(){return h.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[Lt([sOe]),rn]}),c})();const aOe={provide:Du,useExisting:Tr(()=>n1),multi:!0};let n1=(()=>{class c extends Tm{writeValue(l){this.setProperty("value",parseFloat(l))}registerOnChange(l){this.onChange=h=>{l(""==h?null:parseFloat(h))}}}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Fr(c)))(h||c)}}(),c.\u0275dir=Ke({type:c,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(l,h){1&l&&De("change",function(f){return h.onChange(f.target.value)})("input",function(f){return h.onChange(f.target.value)})("blur",function(){return h.onTouched()})},features:[Lt([aOe]),rn]}),c})();const ek=new Vt("NgModelWithFormControlWarning"),cOe={provide:pa,useExisting:Tr(()=>O_)};let O_=(()=>{class c extends pa{constructor(l,h){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new st,this._setValidators(l),this._setAsyncValidators(h)}ngOnChanges(l){this._checkFormPresent(),l.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(DM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(l){const h=this.form.get(l.path);return JS(h,l),h.updateValueAndValidity({emitEvent:!1}),this.directives.push(l),h}getControl(l){return this.form.get(l.path)}removeControl(l){EM(l.control||null,l,!1),function QPe(c,a){const l=c.indexOf(a);l>-1&&c.splice(l,1)}(this.directives,l)}addFormGroup(l){this._setUpFormContainer(l)}removeFormGroup(l){this._cleanUpFormContainer(l)}getFormGroup(l){return this.form.get(l.path)}addFormArray(l){this._setUpFormContainer(l)}removeFormArray(l){this._cleanUpFormContainer(l)}getFormArray(l){return this.form.get(l.path)}updateModel(l,h){this.form.get(l.path).setValue(h)}onSubmit(l){return this.submitted=!0,qY(this.form,this.directives),this.ngSubmit.emit(l),"dialog"===l?.target?.method}onReset(){this.resetForm()}resetForm(l){this.form.reset(l),this.submitted=!1}_updateDomValue(){this.directives.forEach(l=>{const h=l.control,d=this.form.get(l.path);h!==d&&(EM(h||null,l),(c=>c instanceof Cf)(d)&&(JS(d,l),l.control=d))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(l){const h=this.form.get(l.path);WY(h,l),h.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(l){if(this.form){const h=this.form.get(l.path);h&&function ZPe(c,a){return DM(c,a)}(h,l)&&h.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){YF(this.form,this),this._oldForm&&DM(this._oldForm,this)}_checkFormPresent(){}}return c.\u0275fac=function(l){return new(l||c)(N(xo,10),N(wf,10))},c.\u0275dir=Ke({type:c,selectors:[["","formGroup",""]],hostBindings:function(l,h){1&l&&De("submit",function(f){return h.onSubmit(f)})("reset",function(){return h.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Lt([cOe]),rn,ps]}),c})();const dOe={provide:ma,useExisting:Tr(()=>RM)};let RM=(()=>{class c extends ma{constructor(l,h,d,f,m){super(),this._ngModelWarningConfig=m,this._added=!1,this.update=new st,this._ngModelWarningSent=!1,this._parent=l,this._setValidators(h),this._setAsyncValidators(d),this.valueAccessor=KF(0,f)}set isDisabled(l){}ngOnChanges(l){this._added||this._setUpControl(),ZF(l,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(l){this.viewModel=l,this.update.emit(l)}get path(){return xM(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return c._ngModelWarningSentOnce=!1,c.\u0275fac=function(l){return new(l||c)(N(pa,13),N(xo,10),N(wf,10),N(Du,10),N(ek,8))},c.\u0275dir=Ke({type:c,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Lt([dOe]),rn,ps]}),c})();const fOe={provide:Du,useExisting:Tr(()=>r1),multi:!0};function tZ(c,a){return null==c?`${a}`:(a&&"object"==typeof a&&(a="Object"),`${c}: ${a}`.slice(0,50))}let r1=(()=>{class c extends Tm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(l){this._compareWith=l}writeValue(l){this.value=l;const d=tZ(this._getOptionId(l),l);this.setProperty("value",d)}registerOnChange(l){this.onChange=h=>{this.value=this._getOptionValue(h),l(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(l){for(const h of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(h),l))return h;return null}_getOptionValue(l){const h=function pOe(c){return c.split(":")[0]}(l);return this._optionMap.has(h)?this._optionMap.get(h):l}}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Fr(c)))(h||c)}}(),c.\u0275dir=Ke({type:c,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(l,h){1&l&&De("change",function(f){return h.onChange(f.target.value)})("blur",function(){return h.onTouched()})},inputs:{compareWith:"compareWith"},features:[Lt([fOe]),rn]}),c})(),LM=(()=>{class c{constructor(l,h,d){this._element=l,this._renderer=h,this._select=d,this._select&&(this.id=this._select._registerOption())}set ngValue(l){null!=this._select&&(this._select._optionMap.set(this.id,l),this._setElementValue(tZ(this.id,l)),this._select.writeValue(this._select.value))}set value(l){this._setElementValue(l),this._select&&this._select.writeValue(this._select.value)}_setElementValue(l){this._renderer.setProperty(this._element.nativeElement,"value",l)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return c.\u0275fac=function(l){return new(l||c)(N(Xt),N(Gn),N(r1,9))},c.\u0275dir=Ke({type:c,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),c})();const mOe={provide:Du,useExisting:Tr(()=>s1),multi:!0};function nZ(c,a){return null==c?`${a}`:("string"==typeof a&&(a=`'${a}'`),a&&"object"==typeof a&&(a="Object"),`${c}: ${a}`.slice(0,50))}let s1=(()=>{class c extends Tm{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(l){this._compareWith=l}writeValue(l){let h;if(this.value=l,Array.isArray(l)){const d=l.map(f=>this._getOptionId(f));h=(f,m)=>{f._setSelected(d.indexOf(m.toString())>-1)}}else h=(d,f)=>{d._setSelected(!1)};this._optionMap.forEach(h)}registerOnChange(l){this.onChange=h=>{const d=[],f=h.selectedOptions;if(void 0!==f){const m=f;for(let g=0;g<m.length;g++){const _=this._getOptionValue(m[g].value);d.push(_)}}else{const m=h.options;for(let g=0;g<m.length;g++){const y=m[g];if(y.selected){const _=this._getOptionValue(y.value);d.push(_)}}}this.value=d,l(d)}}_registerOption(l){const h=(this._idCounter++).toString();return this._optionMap.set(h,l),h}_getOptionId(l){for(const h of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(h)._value,l))return h;return null}_getOptionValue(l){const h=function gOe(c){return c.split(":")[0]}(l);return this._optionMap.has(h)?this._optionMap.get(h)._value:l}}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Fr(c)))(h||c)}}(),c.\u0275dir=Ke({type:c,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(l,h){1&l&&De("change",function(f){return h.onChange(f.target)})("blur",function(){return h.onTouched()})},inputs:{compareWith:"compareWith"},features:[Lt([mOe]),rn]}),c})(),PM=(()=>{class c{constructor(l,h,d){this._element=l,this._renderer=h,this._select=d,this._select&&(this.id=this._select._registerOption(this))}set ngValue(l){null!=this._select&&(this._value=l,this._setElementValue(nZ(this.id,l)),this._select.writeValue(this._select.value))}set value(l){this._select?(this._value=l,this._setElementValue(nZ(this.id,l)),this._select.writeValue(this._select.value)):this._setElementValue(l)}_setElementValue(l){this._renderer.setProperty(this._element.nativeElement,"value",l)}_setSelected(l){this._renderer.setProperty(this._element.nativeElement,"selected",l)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return c.\u0275fac=function(l){return new(l||c)(N(Xt),N(Gn),N(s1,9))},c.\u0275dir=Ke({type:c,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),c})();function rZ(c){return"number"==typeof c?c:parseFloat(c)}let wm=(()=>{class c{constructor(){this._validator=vM}ngOnChanges(l){if(this.inputName in l){const h=this.normalizeInput(l[this.inputName].currentValue);this._enabled=this.enabled(h),this._validator=this._enabled?this.createValidator(h):vM,this._onChange&&this._onChange()}}validate(l){return this._validator(l)}registerOnValidatorChange(l){this._onChange=l}enabled(l){return null!=l}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=Ke({type:c,features:[ps]}),c})();const yOe={provide:xo,useExisting:Tr(()=>OM),multi:!0};let OM=(()=>{class c extends wm{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=l=>rZ(l),this.createValidator=l=>yY(l)}}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Fr(c)))(h||c)}}(),c.\u0275dir=Ke({type:c,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(l,h){2&l&&Ue("max",h._enabled?h.max:null)},inputs:{max:"max"},features:[Lt([yOe]),rn]}),c})();const _Oe={provide:xo,useExisting:Tr(()=>NM),multi:!0};let NM=(()=>{class c extends wm{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=l=>rZ(l),this.createValidator=l=>gY(l)}}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Fr(c)))(h||c)}}(),c.\u0275dir=Ke({type:c,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(l,h){2&l&&Ue("min",h._enabled?h.min:null)},inputs:{min:"min"},features:[Lt([_Oe]),rn]}),c})(),uZ=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[JY]}),c})(),Au=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[uZ]}),c})(),xOe=(()=>{class c{static withConfig(l){return{ngModule:c,providers:[{provide:ek,useValue:l.warnOnNgModelWithFormControl}]}}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[uZ]}),c})();function MOe(c){this.wrapped=c}function FM(c){var a,l;function d(m,g){try{var y=c[m](g),_=y.value,v=_ instanceof MOe;Promise.resolve(v?_.wrapped:_).then(function(b){v?d("return"===m?"return":"next",b):f(y.done?"return":"normal",b)},function(b){d("throw",b)})}catch(b){f("throw",b)}}function f(m,g){switch(m){case"return":a.resolve({value:g,done:!0});break;case"throw":a.reject(g);break;default:a.resolve({value:g,done:!1})}(a=a.next)?d(a.key,a.arg):l=null}this._invoke=function h(m,g){return new Promise(function(y,_){var v={key:m,arg:g,resolve:y,reject:_,next:null};l?l=l.next=v:(a=l=v,d(m,g))})},"function"!=typeof c.return&&(this.return=void 0)}FM.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},FM.prototype.next=function(c){return this._invoke("next",c)},FM.prototype.throw=function(c){return this._invoke("throw",c)},FM.prototype.return=function(c){return this._invoke("return",c)};class kM{static getTrapElements(){return[...Ts.state.focusTrapItems]}static setTrapElements(a){const l=document.querySelector("html");null!==l&&function rk(c,...a){c&&a.forEach(([l,h])=>{!1===h||null===h?c.removeAttribute(l):c.setAttribute(l,h+"")})}(l,["cds-focus-trap",!!a.length&&""]),Ts.state.focusTrapItems=[...a]}static removeTrapElement(a){this.getTrapElements().length<1||this.setTrapElements([...this.getTrapElements().filter(l=>l.focusTrapId!==a.focusTrapId)])}static setCurrent(a){a?.focusTrapId&&this.setTrapElements([...this.getTrapElements().filter(l=>l.focusTrapId!==a.focusTrapId),a])}static activatePreviousCurrent(){this.setTrapElements([...this.getTrapElements()].slice(0,-1))}static getCurrent(){return function DOe(c){return c.length?c[c.length-1]:void 0}(this.getTrapElements())||null}}const XOe=K$(3,(c,a,l)=>{!function HLe(c,a){return a||(a=window&&window.customElements),!a||!!a.get(c)}(c)||function ELe(){return window?.location?.href?.includes("localhost:6006")}()?(l.define(c,a),Q$(),window&&!Object.keys(window.CDS._state.elementRegistry).some(h=>h===c)&&(window.CDS._state.elementRegistry={...window.CDS._state.elementRegistry,[c]:{}})):Sm.warn(c+" has already been registered")});function fZ(c,a){B$()&&J$(["customElements"])&&XOe(c,a,window.customElements)}function Ar(c,a,l,h){var m,d=arguments.length,f=d<3?a:null===h?h=Object.getOwnPropertyDescriptor(a,l):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)f=Reflect.decorate(c,a,l,h);else for(var g=c.length-1;g>=0;g--)(m=c[g])&&(f=(d<3?m(f):d>3?m(a,l,f):m(a,l))||f);return d>3&&f&&Object.defineProperty(a,l,f),f}let mZ=!1;function fNe(c){if((c=Math.trunc(c)||0)<0&&(c+=this.length),!(c<0||c>=this.length))return this[c]}if(!mZ){mZ=!0;const c=Reflect.getPrototypeOf(Int8Array);for(const a of[Array,String,c])Object.defineProperty(a.prototype,"at",{value:fNe,writable:!0,enumerable:!1,configurable:!0})}let gZ=!1,yZ=!1;function _Z(c,a,l){Object.defineProperty(c,l,{configurable:!0,enumerable:!0,get:function(){return this.hasAttribute(a)?this.getAttribute(a):null},set:function(h){null!==h?this.setAttribute(a,h):this.removeAttribute(a)}})}function vZ(c,a,l,h,d,f,m){try{var g=c[f](m),y=g.value}catch(_){return void l(_)}g.done?a(y):Promise.resolve(y).then(h,d)}function Cm(c){return function(){var a=this,l=arguments;return new Promise(function(h,d){var f=c.apply(a,l);function m(y){vZ(f,h,d,m,g,"next",y)}function g(y){vZ(f,h,d,m,g,"throw",y)}m(void 0)})}}gZ||Element.prototype.hasOwnProperty("role")||(_Z(Element.prototype,"role","role"),gZ=!0),yZ||Element.prototype.hasOwnProperty("ariaLabel")||(yZ=!0,["ActiveDescendant","Atomic","AutoComplete","Busy","Checked","ColCount","ColIndex","ColSpan","Controls","Current","DescribedBy","Details","Disabled","ErrorMessage","Expanded","FlowTo","HasPopup","Hidden","Invalid","KeyShortcuts","Label","LabelledBy","Level","Live","Modal","MultiLine","MultiSelectable","Orientation","Owns","Placeholder","PosInSet","Pressed","ReadOnly","Relevant","Required","RoleDescription","RowCount","RowIndex","RowSpan","Selected","SetSize","Sort","ValueMax","ValueMin","ValueNow","ValueText"].forEach(c=>_Z(Element.prototype,"aria-"+c.toLowerCase(),"aria"+c)));const VM=window,ck=VM.ShadowRoot&&(void 0===VM.ShadyCSS||VM.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,uk=Symbol(),bZ=new WeakMap;class SZ{constructor(a,l,h){if(this._$cssResult$=!0,h!==uk)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=a,this.t=l}get styleSheet(){let a=this.o;const l=this.t;if(ck&&void 0===a){const h=void 0!==l&&1===l.length;h&&(a=bZ.get(l)),void 0===a&&((this.o=a=new CSSStyleSheet).replaceSync(this.cssText),h&&bZ.set(l,a))}return a}toString(){return this.cssText}}const hk=(c,...a)=>{const l=1===c.length?c[0]:a.reduce((h,d,f)=>h+(m=>{if(!0===m._$cssResult$)return m.cssText;if("number"==typeof m)return m;throw Error("Value passed to 'css' function must be a 'css' function result: "+m+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(d)+c[f+1],c[0]);return new SZ(l,c,uk)},TZ=ck?c=>c:c=>c instanceof CSSStyleSheet?(a=>{let l="";for(const h of a.cssRules)l+=h.cssText;return(c=>new SZ("string"==typeof c?c:c+"",void 0,uk))(l)})(c):c;var dk;const BM=window,wZ=BM.trustedTypes,gNe=wZ?wZ.emptyScript:"",CZ=BM.reactiveElementPolyfillSupport,fk={toAttribute(c,a){switch(a){case Boolean:c=c?gNe:null;break;case Object:case Array:c=null==c?c:JSON.stringify(c)}return c},fromAttribute(c,a){let l=c;switch(a){case Boolean:l=null!==c;break;case Number:l=null===c?null:Number(c);break;case Object:case Array:try{l=JSON.parse(c)}catch{l=null}}return l}},xZ=(c,a)=>a!==c&&(a==a||c==c),pk={attribute:!0,type:String,converter:fk,reflect:!1,hasChanged:xZ};class N_ extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(a){var l;this.finalize(),(null!==(l=this.h)&&void 0!==l?l:this.h=[]).push(a)}static get observedAttributes(){this.finalize();const a=[];return this.elementProperties.forEach((l,h)=>{const d=this._$Ep(h,l);void 0!==d&&(this._$Ev.set(d,h),a.push(d))}),a}static createProperty(a,l=pk){if(l.state&&(l.attribute=!1),this.finalize(),this.elementProperties.set(a,l),!l.noAccessor&&!this.prototype.hasOwnProperty(a)){const h="symbol"==typeof a?Symbol():"__"+a,d=this.getPropertyDescriptor(a,h,l);void 0!==d&&Object.defineProperty(this.prototype,a,d)}}static getPropertyDescriptor(a,l,h){return{get(){return this[l]},set(d){const f=this[a];this[l]=d,this.requestUpdate(a,f,h)},configurable:!0,enumerable:!0}}static getPropertyOptions(a){return this.elementProperties.get(a)||pk}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const a=Object.getPrototypeOf(this);if(a.finalize(),void 0!==a.h&&(this.h=[...a.h]),this.elementProperties=new Map(a.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const l=this.properties,h=[...Object.getOwnPropertyNames(l),...Object.getOwnPropertySymbols(l)];for(const d of h)this.createProperty(d,l[d])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(a){const l=[];if(Array.isArray(a)){const h=new Set(a.flat(1/0).reverse());for(const d of h)l.unshift(TZ(d))}else void 0!==a&&l.push(TZ(a));return l}static _$Ep(a,l){const h=l.attribute;return!1===h?void 0:"string"==typeof h?h:"string"==typeof a?a.toLowerCase():void 0}u(){var a;this._$E_=new Promise(l=>this.enableUpdating=l),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(a=this.constructor.h)||void 0===a||a.forEach(l=>l(this))}addController(a){var l,h;(null!==(l=this._$ES)&&void 0!==l?l:this._$ES=[]).push(a),void 0!==this.renderRoot&&this.isConnected&&(null===(h=a.hostConnected)||void 0===h||h.call(a))}removeController(a){var l;null===(l=this._$ES)||void 0===l||l.splice(this._$ES.indexOf(a)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((a,l)=>{this.hasOwnProperty(l)&&(this._$Ei.set(l,this[l]),delete this[l])})}createRenderRoot(){var a;const l=null!==(a=this.shadowRoot)&&void 0!==a?a:this.attachShadow(this.constructor.shadowRootOptions);return((c,a)=>{ck?c.adoptedStyleSheets=a.map(l=>l instanceof CSSStyleSheet?l:l.styleSheet):a.forEach(l=>{const h=document.createElement("style"),d=VM.litNonce;void 0!==d&&h.setAttribute("nonce",d),h.textContent=l.cssText,c.appendChild(h)})})(l,this.constructor.elementStyles),l}connectedCallback(){var a;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(a=this._$ES)||void 0===a||a.forEach(l=>{var h;return null===(h=l.hostConnected)||void 0===h?void 0:h.call(l)})}enableUpdating(a){}disconnectedCallback(){var a;null===(a=this._$ES)||void 0===a||a.forEach(l=>{var h;return null===(h=l.hostDisconnected)||void 0===h?void 0:h.call(l)})}attributeChangedCallback(a,l,h){this._$AK(a,h)}_$EO(a,l,h=pk){var d;const f=this.constructor._$Ep(a,h);if(void 0!==f&&!0===h.reflect){const m=(void 0!==(null===(d=h.converter)||void 0===d?void 0:d.toAttribute)?h.converter:fk).toAttribute(l,h.type);this._$El=a,null==m?this.removeAttribute(f):this.setAttribute(f,m),this._$El=null}}_$AK(a,l){var h;const d=this.constructor,f=d._$Ev.get(a);if(void 0!==f&&this._$El!==f){const m=d.getPropertyOptions(f),g="function"==typeof m.converter?{fromAttribute:m.converter}:void 0!==(null===(h=m.converter)||void 0===h?void 0:h.fromAttribute)?m.converter:fk;this._$El=f,this[f]=g.fromAttribute(l,m.type),this._$El=null}}requestUpdate(a,l,h){let d=!0;void 0!==a&&(((h=h||this.constructor.getPropertyOptions(a)).hasChanged||xZ)(this[a],l)?(this._$AL.has(a)||this._$AL.set(a,l),!0===h.reflect&&this._$El!==a&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(a,h))):d=!1),!this.isUpdatePending&&d&&(this._$E_=this._$Ej())}_$Ej(){var a=this;return Cm(function*(){a.isUpdatePending=!0;try{yield a._$E_}catch(h){Promise.reject(h)}const l=a.scheduleUpdate();return null!=l&&(yield l),!a.isUpdatePending})()}scheduleUpdate(){return this.performUpdate()}performUpdate(){var a;if(!this.isUpdatePending)return;this._$Ei&&(this._$Ei.forEach((d,f)=>this[f]=d),this._$Ei=void 0);let l=!1;const h=this._$AL;try{l=this.shouldUpdate(h),l?(this.willUpdate(h),null===(a=this._$ES)||void 0===a||a.forEach(d=>{var f;return null===(f=d.hostUpdate)||void 0===f?void 0:f.call(d)}),this.update(h)):this._$Ek()}catch(d){throw l=!1,this._$Ek(),d}l&&this._$AE(h)}willUpdate(a){}_$AE(a){var l;null===(l=this._$ES)||void 0===l||l.forEach(h=>{var d;return null===(d=h.hostUpdated)||void 0===d?void 0:d.call(h)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(a)),this.updated(a)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(a){return!0}update(a){void 0!==this._$EC&&(this._$EC.forEach((l,h)=>this._$EO(h,this[h],l)),this._$EC=void 0),this._$Ek()}updated(a){}firstUpdated(a){}}var mk;N_.finalized=!0,N_.elementProperties=new Map,N_.elementStyles=[],N_.shadowRootOptions={mode:"open"},CZ?.({ReactiveElement:N_}),(null!==(dk=BM.reactiveElementVersions)&&void 0!==dk?dk:BM.reactiveElementVersions=[]).push("1.6.1");const UM=window,F_=UM.trustedTypes,EZ=F_?F_.createPolicy("lit-html",{createHTML:c=>c}):void 0,zM="$lit$",Vh=`lit$${(Math.random()+"").slice(9)}$`,gk="?"+Vh,yNe=`<${gk}>`,xm=document,a1=()=>xm.createComment(""),l1=c=>null===c||"object"!=typeof c&&"function"!=typeof c,MZ=Array.isArray,yk="[ \t\n\f\r]",c1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,AZ=/-->/g,IZ=/>/g,Em=RegExp(`>|${yk}(?:([^\\s"'>=/]+)(${yk}*=${yk}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),RZ=/'/g,LZ=/"/g,PZ=/^(?:script|style|textarea|title)$/i,OZ=c=>(a,...l)=>({_$litType$:c,strings:a,values:l}),_k=OZ(1),_Ne=OZ(2),k_=Symbol.for("lit-noChange"),Ys=Symbol.for("lit-nothing"),NZ=new WeakMap,Mm=xm.createTreeWalker(xm,129,null,!1);class u1{constructor({strings:a,_$litType$:l},h){let d;this.parts=[];let f=0,m=0;const g=a.length-1,y=this.parts,[_,v]=((c,a)=>{const l=c.length-1,h=[];let d,f=2===a?"<svg>":"",m=c1;for(let y=0;y<l;y++){const _=c[y];let v,b,S=-1,T=0;for(;T<_.length&&(m.lastIndex=T,b=m.exec(_),null!==b);)T=m.lastIndex,m===c1?"!--"===b[1]?m=AZ:void 0!==b[1]?m=IZ:void 0!==b[2]?(PZ.test(b[2])&&(d=RegExp("</"+b[2],"g")),m=Em):void 0!==b[3]&&(m=Em):m===Em?">"===b[0]?(m=d??c1,S=-1):void 0===b[1]?S=-2:(S=m.lastIndex-b[2].length,v=b[1],m=void 0===b[3]?Em:'"'===b[3]?LZ:RZ):m===LZ||m===RZ?m=Em:m===AZ||m===IZ?m=c1:(m=Em,d=void 0);const x=m===Em&&c[y+1].startsWith("/>")?" ":"";f+=m===c1?_+yNe:S>=0?(h.push(v),_.slice(0,S)+zM+_.slice(S)+Vh+x):_+Vh+(-2===S?(h.push(void 0),y):x)}const g=f+(c[l]||"<?>")+(2===a?"</svg>":"");if(!Array.isArray(c)||!c.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==EZ?EZ.createHTML(g):g,h]})(a,l);if(this.el=u1.createElement(_,h),Mm.currentNode=this.el.content,2===l){const b=this.el.content,S=b.firstChild;S.remove(),b.append(...S.childNodes)}for(;null!==(d=Mm.nextNode())&&y.length<g;){if(1===d.nodeType){if(d.hasAttributes()){const b=[];for(const S of d.getAttributeNames())if(S.endsWith(zM)||S.startsWith(Vh)){const T=v[m++];if(b.push(S),void 0!==T){const x=d.getAttribute(T.toLowerCase()+zM).split(Vh),E=/([.?@])?(.*)/.exec(T);y.push({type:1,index:f,name:E[2],strings:x,ctor:"."===E[1]?VZ:"?"===E[1]?BZ:"@"===E[1]?UZ:h1})}else y.push({type:6,index:f})}for(const S of b)d.removeAttribute(S)}if(PZ.test(d.tagName)){const b=d.textContent.split(Vh),S=b.length-1;if(S>0){d.textContent=F_?F_.emptyScript:"";for(let T=0;T<S;T++)d.append(b[T],a1()),Mm.nextNode(),y.push({type:2,index:++f});d.append(b[S],a1())}}}else if(8===d.nodeType)if(d.data===gk)y.push({type:2,index:f});else{let b=-1;for(;-1!==(b=d.data.indexOf(Vh,b+1));)y.push({type:7,index:f}),b+=Vh.length-1}f++}}static createElement(a,l){const h=xm.createElement("template");return h.innerHTML=a,h}}function Dm(c,a,l=c,h){var d,f,m,g;if(a===k_)return a;let y=void 0!==h?null===(d=l._$Co)||void 0===d?void 0:d[h]:l._$Cl;const _=l1(a)?void 0:a._$litDirective$;return y?.constructor!==_&&(null===(f=y?._$AO)||void 0===f||f.call(y,!1),void 0===_?y=void 0:(y=new _(c),y._$AT(c,l,h)),void 0!==h?(null!==(m=(g=l)._$Co)&&void 0!==m?m:g._$Co=[])[h]=y:l._$Cl=y),void 0!==y&&(a=Dm(c,y._$AS(c,a.values),y,h)),a}class kZ{constructor(a,l){this._$AV=[],this._$AN=void 0,this._$AD=a,this._$AM=l}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(a){var l;const{el:{content:h},parts:d}=this._$AD,f=(null!==(l=a?.creationScope)&&void 0!==l?l:xm).importNode(h,!0);Mm.currentNode=f;let m=Mm.nextNode(),g=0,y=0,_=d[0];for(;void 0!==_;){if(g===_.index){let v;2===_.type?v=new V_(m,m.nextSibling,this,a):1===_.type?v=new _.ctor(m,_.name,_.strings,this,a):6===_.type&&(v=new zZ(m,this,a)),this._$AV.push(v),_=d[++y]}g!==_?.index&&(m=Mm.nextNode(),g++)}return Mm.currentNode=xm,f}v(a){let l=0;for(const h of this._$AV)void 0!==h&&(void 0!==h.strings?(h._$AI(a,h,l),l+=h.strings.length-2):h._$AI(a[l])),l++}}class V_{constructor(a,l,h,d){var f;this.type=2,this._$AH=Ys,this._$AN=void 0,this._$AA=a,this._$AB=l,this._$AM=h,this.options=d,this._$Cp=null===(f=d?.isConnected)||void 0===f||f}get _$AU(){var a,l;return null!==(l=null===(a=this._$AM)||void 0===a?void 0:a._$AU)&&void 0!==l?l:this._$Cp}get parentNode(){let a=this._$AA.parentNode;const l=this._$AM;return void 0!==l&&11===a?.nodeType&&(a=l.parentNode),a}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(a,l=this){a=Dm(this,a,l),l1(a)?a===Ys||null==a||""===a?(this._$AH!==Ys&&this._$AR(),this._$AH=Ys):a!==this._$AH&&a!==k_&&this._(a):void 0!==a._$litType$?this.g(a):void 0!==a.nodeType?this.$(a):(c=>MZ(c)||"function"==typeof c?.[Symbol.iterator])(a)?this.T(a):this._(a)}k(a){return this._$AA.parentNode.insertBefore(a,this._$AB)}$(a){this._$AH!==a&&(this._$AR(),this._$AH=this.k(a))}_(a){this._$AH!==Ys&&l1(this._$AH)?this._$AA.nextSibling.data=a:this.$(xm.createTextNode(a)),this._$AH=a}g(a){var l;const{values:h,_$litType$:d}=a,f="number"==typeof d?this._$AC(a):(void 0===d.el&&(d.el=u1.createElement(d.h,this.options)),d);if((null===(l=this._$AH)||void 0===l?void 0:l._$AD)===f)this._$AH.v(h);else{const m=new kZ(f,this),g=m.u(this.options);m.v(h),this.$(g),this._$AH=m}}_$AC(a){let l=NZ.get(a.strings);return void 0===l&&NZ.set(a.strings,l=new u1(a)),l}T(a){MZ(this._$AH)||(this._$AH=[],this._$AR());const l=this._$AH;let h,d=0;for(const f of a)d===l.length?l.push(h=new V_(this.k(a1()),this.k(a1()),this,this.options)):h=l[d],h._$AI(f),d++;d<l.length&&(this._$AR(h&&h._$AB.nextSibling,d),l.length=d)}_$AR(a=this._$AA.nextSibling,l){var h;for(null===(h=this._$AP)||void 0===h||h.call(this,!1,!0,l);a&&a!==this._$AB;){const d=a.nextSibling;a.remove(),a=d}}setConnected(a){var l;void 0===this._$AM&&(this._$Cp=a,null===(l=this._$AP)||void 0===l||l.call(this,a))}}class h1{constructor(a,l,h,d,f){this.type=1,this._$AH=Ys,this._$AN=void 0,this.element=a,this.name=l,this._$AM=d,this.options=f,h.length>2||""!==h[0]||""!==h[1]?(this._$AH=Array(h.length-1).fill(new String),this.strings=h):this._$AH=Ys}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(a,l=this,h,d){const f=this.strings;let m=!1;if(void 0===f)a=Dm(this,a,l,0),m=!l1(a)||a!==this._$AH&&a!==k_,m&&(this._$AH=a);else{const g=a;let y,_;for(a=f[0],y=0;y<f.length-1;y++)_=Dm(this,g[h+y],l,y),_===k_&&(_=this._$AH[y]),m||(m=!l1(_)||_!==this._$AH[y]),_===Ys?a=Ys:a!==Ys&&(a+=(_??"")+f[y+1]),this._$AH[y]=_}m&&!d&&this.j(a)}j(a){a===Ys?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,a??"")}}class VZ extends h1{constructor(){super(...arguments),this.type=3}j(a){this.element[this.name]=a===Ys?void 0:a}}const vNe=F_?F_.emptyScript:"";class BZ extends h1{constructor(){super(...arguments),this.type=4}j(a){a&&a!==Ys?this.element.setAttribute(this.name,vNe):this.element.removeAttribute(this.name)}}class UZ extends h1{constructor(a,l,h,d,f){super(a,l,h,d,f),this.type=5}_$AI(a,l=this){var h;if((a=null!==(h=Dm(this,a,l,0))&&void 0!==h?h:Ys)===k_)return;const d=this._$AH,f=a===Ys&&d!==Ys||a.capture!==d.capture||a.once!==d.once||a.passive!==d.passive,m=a!==Ys&&(d===Ys||f);f&&this.element.removeEventListener(this.name,this,d),m&&this.element.addEventListener(this.name,this,a),this._$AH=a}handleEvent(a){var l,h;"function"==typeof this._$AH?this._$AH.call(null!==(h=null===(l=this.options)||void 0===l?void 0:l.host)&&void 0!==h?h:this.element,a):this._$AH.handleEvent(a)}}class zZ{constructor(a,l,h){this.element=a,this.type=6,this._$AN=void 0,this._$AM=l,this.options=h}get _$AU(){return this._$AM._$AU}_$AI(a){Dm(this,a)}}(0,UM.litHtmlPolyfillSupport)?.(u1,V_),(null!==(mk=UM.litHtmlVersions)&&void 0!==mk?mk:UM.litHtmlVersions=[]).push("2.7.4");const HZ=(c,a,l)=>{var h,d;const f=null!==(h=l?.renderBefore)&&void 0!==h?h:a;let m=f._$litPart$;if(void 0===m){const g=null!==(d=l?.renderBefore)&&void 0!==d?d:null;f._$litPart$=m=new V_(a.insertBefore(a1(),g),g,void 0,l??{})}return m._$AI(c),m};var vk,bk;class B_ extends N_{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var a,l;const h=super.createRenderRoot();return null!==(a=(l=this.renderOptions).renderBefore)&&void 0!==a||(l.renderBefore=h.firstChild),h}update(a){const l=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(a),this._$Do=HZ(l,this.renderRoot,this.renderOptions)}connectedCallback(){var a;super.connectedCallback(),null===(a=this._$Do)||void 0===a||a.setConnected(!0)}disconnectedCallback(){var a;super.disconnectedCallback(),null===(a=this._$Do)||void 0===a||a.setConnected(!1)}render(){return k_}}B_.finalized=!0,B_._$litElement$=!0,null===(vk=globalThis.litElementHydrateSupport)||void 0===vk||vk.call(globalThis,{LitElement:B_}),(0,globalThis.litElementPolyfillSupport)?.({LitElement:B_}),(null!==(bk=globalThis.litElementVersions)&&void 0!==bk?bk:globalThis.litElementVersions=[]).push("3.3.2");const WZ=hk`@charset "UTF-8";:host,:root{--2:var(--cds-global-layout-space-xxs, calc(4 * 1rem / var(--cds-global-base, 20)));--3:var(--cds-global-layout-space-xs, calc(8 * 1rem / var(--cds-global-base, 20)));--4:var(--cds-global-layout-space-sm, calc(12 * 1rem / var(--cds-global-base, 20)));--5:var(--cds-global-layout-space-md, calc(16 * 1rem / var(--cds-global-base, 20)));--6:var(--cds-global-layout-space-lg, calc(24 * 1rem / var(--cds-global-base, 20)));--7:var(--cds-global-layout-space-xl, calc(32 * 1rem / var(--cds-global-base, 20)))}[cds-layout~="wrap:none"]{flex-wrap:nowrap!important}[cds-layout*="align:stretch"]{flex-grow:1!important}[cds-layout*="align:shrink"]{flex-shrink:1!important;flex-grow:0!important}[cds-layout~=horizontal]{display:flex;flex-direction:row;flex-wrap:wrap;justify-items:flex-start;align-items:flex-start;width:100%;margin:0;min-height:0}[cds-layout~=horizontal]>[cds-layout~=horizontal],[cds-layout~=horizontal]>[cds-layout~=vertical],[cds-layout~=horizontal]>[cds-text]{width:initial!important}[cds-layout~=horizontal][cds-layout*="align:top"]{align-items:flex-start}[cds-layout~=horizontal][cds-layout*="align:left"]{justify-content:flex-start}[cds-layout~=horizontal][cds-layout*="align:right"]{justify-content:flex-end}[cds-layout~=horizontal][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=horizontal][cds-layout*="align:horizontal-center"]{justify-content:center}[cds-layout~=horizontal][cds-layout*="align:center"]{align-items:center;align-content:center;justify-content:center}[cds-layout~=horizontal][cds-layout*="order:reverse"]{flex-direction:row-reverse}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]{justify-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>*{flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;flex-grow:1}[cds-layout~=horizontal][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:vertical-center"]{align-self:center}[cds-layout~=horizontal]>[cds-layout*="align:center"],[cds-layout~=horizontal]>[cds-layout*="align:horizontal-center"]{margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:top"]{align-self:flex-start}[cds-layout~=horizontal]>[cds-layout*="align:right"]{margin-left:auto!important}[cds-layout~=horizontal]>[cds-layout*="align:left"]{margin-right:auto!important}[cds-layout~=vertical]{width:100%;display:flex;flex-direction:column;align-items:flex-start}[cds-layout~=vertical],[cds-layout~=vertical][cds-layout*="align:top"]{justify-content:flex-start}[cds-layout~=vertical][cds-layout*="align:left"]{align-items:flex-start}[cds-layout~=vertical][cds-layout*="align:right"]{align-items:flex-end}[cds-layout~=vertical][cds-layout*="align:vertical-center"]{justify-content:center}[cds-layout~=vertical][cds-layout*="align:horizontal-center"]{align-items:center}[cds-layout~=vertical][cds-layout*="align:center"]{align-items:center;justify-content:center}[cds-layout~=vertical][cds-layout*="order:reverse"]{flex-direction:column-reverse}[cds-layout~=vertical][cds-layout*="align:horizontal-stretch"]{align-items:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]{align-items:stretch;justify-content:stretch}[cds-layout~=vertical][cds-layout*="align:stretch"]>*{flex-grow:1}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:vertical-center"]{margin-top:auto;margin-bottom:auto}[cds-layout~=vertical]>[cds-layout*="align:center"],[cds-layout~=vertical]>[cds-layout*="align:horizontal-center"]{align-self:center}[cds-layout~=vertical]>[cds-layout*="align:top"]{margin-bottom:auto!important}[cds-layout~=vertical]>[cds-layout*="align:right"]{margin-left:auto}[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}[cds-layout~=grid]{display:grid;align-items:start;align-content:start;grid-template-columns:repeat(var(--cds-global-layout-grid-cols,12),1fr);width:100%}[cds-layout~=grid][cds-layout*=rows]{grid-template-rows:repeat(12,auto)}[cds-layout~=grid]>[cds-layout*=row]{align-self:stretch}[cds-layout~=grid][cds-layout*="align:top"]{align-content:start}[cds-layout~=grid][cds-layout*="align:right"]{justify-content:end}[cds-layout~=grid][cds-layout*="align:left"]{justify-content:start}[cds-layout~=grid][cds-layout*="align:horizontal-stretch"]{justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:stretch"]{align-items:stretch;align-content:stretch;justify-items:stretch;justify-content:stretch}[cds-layout~=grid][cds-layout*="align:vertical-center"]{align-items:center;align-content:center}[cds-layout~=grid][cds-layout*="align:horizontal-center"]{justify-items:center;justify-content:center}[cds-layout~=grid][cds-layout*="align:center"]{align-items:center;align-content:center;justify-items:center;justify-content:center}::slotted([cds-layout~="display:screen-reader-only"]),[cds-layout~="display:screen-reader-only"]{position:absolute!important;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);padding:0;border:0;height:1px;width:1px;overflow:hidden;white-space:nowrap;top:0;left:0;display:block!important}[cds-layout*="gap:none"]{gap:0}[cds-layout*="gap:xxs"]{gap:var(--2)}[cds-layout*="gap:xs"]{gap:var(--3)}[cds-layout*="gap:sm"]{gap:var(--4)}[cds-layout*="gap:md"]{gap:var(--5)}[cds-layout*="gap:lg"]{gap:var(--6)}[cds-layout~="p:none"]{padding:0!important}[cds-layout~="p:xxs"]{padding:var(--2)!important}[cds-layout~="p:xs"]{padding:var(--3)!important}[cds-layout~="p:sm"]{padding:var(--4)!important}[cds-layout~="p:md"]{padding:var(--5)!important}[cds-layout~="m:md"]{margin:var(--5)!important}[cds-layout~="p:lg"]{padding:var(--6)!important}[cds-layout~="p-y:xs"]{padding-top:var(--3)!important;padding-bottom:var(--3)!important}[cds-layout~="p-x:lg"]{padding-left:var(--6)!important;padding-right:var(--6)!important}[cds-layout~="p-y:lg"]{padding-top:var(--6)!important;padding-bottom:var(--6)!important}[cds-layout~="p-l:md"]{padding-left:var(--5)!important}@media (min-width:992px){[cds-layout*="gap@md:lg"]{gap:var(--6)}[cds-layout~="p@md:lg"]{padding:var(--6)!important}[cds-layout~="m@md:xl"]{margin:var(--7)!important}}[cds-layout~=fill]{width:100%!important}*,:after,:before{box-sizing:border-box}[cds-layout~=horizontal][cds-layout*="align:horizontal-stretch"]>::slotted(*),[cds-layout~=horizontal][cds-layout*="align:stretch"]>::slotted(*),[cds-layout~=vertical][cds-layout*="align:stretch"]>::slotted(*){flex-grow:1}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align:left"]),[cds-layout~=vertical]>[cds-layout*="align:left"]{margin-right:auto}@media (min-width:576px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto}}@media (min-width:768px){[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto}}@media (min-width:992px){[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@md:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@md:left"]){margin-right:auto}}@media (min-width:1200px){[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto}}@media (min-width:1440px){[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:vertical-center"]){margin-top:auto;margin-bottom:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:horizontal-center"]){align-self:center}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:top"]){margin-bottom:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:bottom"]){margin-top:auto!important}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto}[cds-layout~=vertical] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto}}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align:left"]){margin-right:auto!important}@media (min-width:576px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xs:left"]){margin-right:auto!important}}@media (min-width:768px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@sm:left"]){margin-right:auto!important}}@media (min-width:992px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@md:left"]){margin-right:auto!important}}@media (min-width:1200px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@lg:left"]){margin-right:auto!important}}@media (min-width:1440px){[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:vertical-center"]){align-self:center}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:center"]),[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:horizontal-center"]){margin-left:auto!important;margin-right:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:top"]){align-self:flex-start}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:bottom"]){align-self:flex-end}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:right"]){margin-left:auto!important}[cds-layout~=horizontal] ::slotted([cds-layout*="align@xl:left"]){margin-right:auto!important}}[cds-text]{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);margin-top:0;margin-bottom:0}[cds-text][cds-layout~=grid]::after,[cds-text][cds-layout~=grid]::before,[cds-text][cds-layout~=horizontal]::after,[cds-text][cds-layout~=horizontal]::before,[cds-text][cds-layout~=vertical]::after,[cds-text][cds-layout~=vertical]::before{display:none}[cds-text*=display],[cds-text*=section],[cds-text*=subsection],[cds-text*=title]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);color:var(--cds-global-typography-color-400,var(--cds-global-color-construction-900,#21333b))}[cds-text*=body],[cds-text*=message],[cds-text*=secondary]{color:var(--cds-global-typography-color-500,var(--cds-global-color-black,#000))}[cds-text*=inline]{width:auto!important;display:inline-block!important}[cds-text*=display]{font-size:var(--cds-global-typography-display-font-size,calc(40 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-display-font-weight,400);line-height:var(--cds-global-typography-display-line-height,1.1em);letter-spacing:var(--cds-global-typography-display-letter-spacing,-.0125em)}[cds-text*=display]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) + .037em)}[cds-text*=display]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-display-line-height,1.1em) - 1em)/ 2))*-1) - .044em)}[cds-text*=title]{font-size:var(--cds-global-typography-title-font-size,calc(24 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-title-font-weight,400);line-height:var(--cds-global-typography-title-line-height,1.16667em);letter-spacing:var(--cds-global-typography-title-letter-spacing,-.008333em)}[cds-text*=title]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) + .037em)}[cds-text*=title]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-title-line-height,1.16667em) - 1em)/ 2))*-1) - .044em)}[cds-text*=section]{font-size:var(--cds-global-typography-section-font-size,calc(20 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-section-font-weight,400);line-height:var(--cds-global-typography-section-line-height,1.2em);letter-spacing:var(--cds-global-typography-section-letter-spacing,-.01em)}[cds-text*=section]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) + .037em)}[cds-text*=section]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-section-line-height,1.2em) - 1em)/ 2))*-1) - .044em)}[cds-text*=subsection]{font-size:var(--cds-global-typography-subsection-font-size,calc(16 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-subsection-font-weight,400);line-height:var(--cds-global-typography-subsection-line-height,1.25em);letter-spacing:var(--cds-global-typography-subsection-letter-spacing,-.0125em)}[cds-text*=subsection]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-subsection-line-height,1.25em) - 1em)/ 2))*-1) + .037em)}[cds-text*=subsection]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-subsection-line-height,1.25em) - 1em)/ 2))*-1) - .044em)}[cds-text*=body]{font-weight:var(--cds-global-typography-body-font-weight,400);font-size:var(--cds-global-typography-body-font-size,calc(14 * 1rem / var(--cds-global-base,20)));letter-spacing:var(--cds-global-typography-body-letter-spacing,-.014286em);line-height:var(--cds-global-typography-body-line-height,1.42857em)}[cds-text*=body]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) + .1em)}[cds-text*=body]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-body-line-height,1.42857em) - 1em)/ 2))*-1) - .044em)}body[cds-text*=body]::after,body[cds-text*=body]::before{content:none}[cds-text*=message]{font-size:var(--cds-global-typography-message-font-size,calc(16 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-message-font-weight,calc(400 * 1rem / var(--cds-global-base,20)));line-height:var(--cds-global-typography-message-line-height,1.25em);letter-spacing:var(--cds-global-typography-message-letter-spacing,-.0125em)}[cds-text*=message]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) + .037em)}[cds-text*=message]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-message-line-height,1.25em) - 1em)/ 2))*-1) - .044em)}[cds-text*=secondary]{font-size:var(--cds-global-typography-secondary-font-size,calc(13 * 1rem / var(--cds-global-base,20)));font-weight:var(--cds-global-typography-secondary-font-weight,400);line-height:var(--cds-global-typography-secondary-line-height,1.23077em);letter-spacing:var(--cds-global-typography-secondary-letter-spacing,-.007692em)}[cds-text*=secondary]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) + .037em)}[cds-text*=secondary]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((var(--cds-global-typography-secondary-line-height,1.23077em) - 1em)/ 2))*-1) - .044em)}[cds-text~=link]{color:var(--cds-global-typography-link-color,var(--cds-global-color-blue-800,#00608a))!important;text-decoration:underline!important;line-height:inherit!important;font-size:inherit!important}[cds-text~=link]:focus{outline:var(--cds-alias-object-interaction-outline,Highlight solid 2px);outline-offset:var(--cds-alias-object-interaction-outline-offset,1px)}[cds-text~=link]:hover{color:var(--cds-global-typography-link-color-hover,var(--cds-global-color-blue-900,#004b6b))!important}[cds-text~=link]:visited:not([cds-text~=static]){color:var(--cds-global-typography-link-color-visited,var(--cds-global-color-lavender-600,#3b40ce))!important}[cds-text~=link]:visited:not([cds-text~=static]):hover{color:var(--cds-global-typography-link-color-visited-hover,var(--cds-global-color-lavender-700,#2429c2))!important}@media (-webkit-min-device-pixel-ratio:0){[cds-text=link]:focus{outline:var(--cds-alias-object-interaction-outline-webkit,5px auto -webkit-focus-ring-color)}}[cds-text~=code]{color:var(--cds-alias-status-danger,var(--cds-global-color-red-700,#e02200));font-family:monospace;font-size:1.1em}[cds-divider]{display:block;height:var(--cds-alias-object-border-width-100,calc(1 * 1rem / var(--cds-global-base,20)));overflow:hidden;box-shadow:var(--cds-alias-object-border-color,var(--cds-global-color-construction-200,#cbd4d8)) 0 0 0 var(--cds-alias-object-border-width-100,calc(1 * 1rem / var(--cds-global-base,20))) inset}[cds-text~=light]{font-weight:var(--cds-global-typography-font-weight-light,300)!important}[cds-text~=justify]{text-align:justify!important}[cds-text~=left]{text-align:left!important}[cds-text~=right]{text-align:right!important}[cds-text~=center]{text-align:center!important}[cds-text~=lhe]{padding:.05px 0}[cds-text~=lhe]::before{content:"";margin-top:-.124em;display:block;height:0}[cds-text~=lhe]::after{content:"";margin-bottom:-.221em;display:block;height:0}[cds-text*=h2],[cds-text*=h3]{font-family:var(--cds-global-typography-header-font-family, "Clarity City", "Avenir Next", sans-serif);font-size:1.4rem;font-weight:200;color:var(--cds-global-typography-color-400);line-height:1.7143em;letter-spacing:-.017857em}[cds-text*=h2]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.7143em - 1em)/ 2))*-1) + .037em)}[cds-text*=h2]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.7143em - 1em)/ 2))*-1) - .044em)}[cds-text*=h3]{font-size:1.1rem;line-height:1.0909em;letter-spacing:-.013636em}[cds-text*=h3]::before{content:"";display:block;height:0;width:0;margin-bottom:calc(((var(--cds-global-typography-top-gap-height,.1475em) + calc((1.0909em - 1em)/ 2))*-1) + .037em)}[cds-text*=h3]::after{content:"";display:block;height:0;width:0;margin-top:calc((((1em - var(--cds-global-typography-top-gap-height,.1475em) - var(--cds-global-typography-ascender-height,.1703em) - var(--cds-global-typography-x-height,.517em)) + calc((1.0909em - 1em)/ 2))*-1) - .044em)}:host{all:initial;display:block;visibility:inherit;font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);contain:layout;box-sizing:border-box!important;-webkit-appearance:none!important}*,:after,:before{box-sizing:inherit!important}slot{font-family:var(--cds-global-typography-font-family, "Clarity City", "Avenir Next", sans-serif);display:contents!important}::slotted(*){font-family:inherit;box-sizing:inherit}::slotted(*)::placeholder{color:var(--cds-global-typography-color-200,var(--cds-global-color-construction-600,#4f6169))}:host([_is-anchor]),:host([role=button]){cursor:pointer!important}:host([_is-anchor]) ::slotted(*),:host([role=button]) ::slotted(*){cursor:pointer!important}:host([role=button][disabled]){cursor:not-allowed!important}:host([role=button][disabled]) ::slotted(*){cursor:not-allowed!important;pointer-events:none}:host([hidden]),[hidden]{display:none!important}:host([hidden*=false]){display:block!important}:host([role=dialog][hidden]),:host([role=dialog][hidden]) ::slotted(*){display:block!important;visibility:hidden!important}:host([role=dialog][hidden*=false]),:host([role=dialog][hidden*=false]) ::slotted(*){visibility:visible!important}:host([_focused]) .input,:host([_focused]) [focusable],:host([tabindex="0"]:focus),:host([tabindex="0"]:focus) [focusable],[tabindex="0"][focusable]:focus{outline:Highlight solid 2px;outline:5px auto -webkit-focus-ring-color;outline-offset:var(--cds-alias-object-interaction-outline-offset,1px)}`;function Sk(c){return`calc((${c} / var(--cds-global-base)) * 1rem)`}const CNe=(c,a)=>"method"===a.kind&&a.descriptor&&!("value"in a.descriptor)?{...a,finisher(l){l.createProperty(a.key,c)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:a.key,initializer(){"function"==typeof a.initializer&&(this[a.key]=a.initializer.call(this))},finisher(l){l.createProperty(a.key,c)}};function XZ(c){return(a,l)=>void 0!==l?void a.constructor.createProperty(l,c):CNe(c,a)}function qZ(c,a){switch(a&&a.type){case Array:case Object:return{reflect:!1,...a};case String:return{reflect:!0,attribute:bm(c),converter:{toAttribute:l=>l||null},...a};case Number:return{reflect:!0,attribute:bm(c),...a};case Boolean:return{reflect:!0,attribute:bm(c),converter:{toAttribute:l=>l?"":null,fromAttribute:l=>function WOe(c){return null!=c&&""+c!="false"}(l)},...a};case Date:return{reflect:!1,converter:{fromAttribute:l=>new Date(l)},...a};default:return{...a}}}function us(c){return(a,l)=>(c?.required&&function xNe(c,a,l){const h=c.firstUpdated;c.firstUpdated=function(d){if(l&&l.required&&Sf(this[a])){const f=l.requiredMessage||function(m="warning",g,y){const _=y.toLocaleLowerCase();return`${X$(m)}: ${g} is required to use ${_} component. Set the JS Property or HTML Attribute.\n\n`+(z$()?`Angular: <${_} [${g}]="..."></${_}>\n`:"")+(H$()?`Vue: <${_} :${g}="..."></${_}>\n`:"")+(G$()?`React: <${function DLe(c){return X$(function MLe(c){return c.split("-").map((a,l)=>l?a.charAt(0).toUpperCase()+a.slice(1).toLowerCase():a).join("")}(c))}(_)} ${v=g,v.startsWith("aria")?bm(v):v}={...} />\n`:"")+`HTML: <${_} ${bm(g)}="..."></${_}>\nJavaScript: document.querySelector('${_}').${g} = '...';\n\n`;var v}(l.required,a,this.tagName);if("error"===l.required)throw Error(f);Sm.warn(f,this)}h&&h.call(this,d)}}(a,l,c),XZ(qZ(l,c))(a,l))}function $Z(c){return(a,l)=>{const h=qZ(l,c);return h&&(h.reflect=!!c?.reflect&&c.reflect,h.reflect&&!c?.attribute&&(h.attribute="_"+bm(l))),XZ(h)(a,l)}}var Iu,DNe=hk`@keyframes fadeInAndOut{0%,to{opacity:0}75%{opacity:1}}:host{--color:currentColor;display:inline-block;height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));margin:0;vertical-align:middle;fill:var(--color);color:var(--color);contain:strict;cursor:inherit}svg{display:block}:host([size*=xs]){height:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20)))}:host([size*=sm]){height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-7,calc(16 * 1rem / var(--cds-global-base,20)))}:host([size*=md]){height:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-9,calc(24 * 1rem / var(--cds-global-base,20)))}:host([size*=lg]){height:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-11,calc(36 * 1rem / var(--cds-global-base,20)))}:host([size*=xl]){height:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)));width:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)));min-height:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)));min-width:var(--cds-global-space-12,calc(48 * 1rem / var(--cds-global-base,20)))}:host([size*=xxl]){height:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))));width:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))));min-height:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))));min-width:calc(var(--cds-global-space-13,calc(64 * 1rem / var(--cds-global-base,20))) - var(--cds-global-space-5,calc(8 * 1rem / var(--cds-global-base,20))))}:host([size*=fit]){height:auto;width:auto;contain:layout}:host([status=success]){--color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([status=danger]){--color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([status=warning]){--color:var(--cds-alias-status-warning-dark, var(--cds-global-color-ochre-800, #a36500))}:host([status=info]){--color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}:host([inverse]){--color:var(--cds-global-color-construction-200, #cbd4d8)}:host([direction=up]){transform:rotate(0)}:host([direction=down]){transform:rotate(180deg)}:host([direction=right]){transform:rotate(90deg)}:host([direction=left]){transform:rotate(270deg)}:host([flip=horizontal]){transform:scale(-1) rotateX(180deg)}:host([flip=vertical]){transform:scale(-1) rotateY(180deg)}.alert,.badge{fill:var(--badge-color,var(--cds-alias-status-danger,var(--cds-global-color-red-700,#e02200)))}:host([badge=success]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge=danger]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge*=warning]){--badge-color:var(--cds-alias-status-warning-dark, var(--cds-global-color-ochre-800, #a36500))}:host([badge=inherit]){--badge-color:currentColor}:host([badge=info]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}:host([badge=inherit-triangle]){--badge-color:currentColor}:host([badge][inverse]){--badge-color:var(--cds-alias-status-danger, var(--cds-global-color-red-700, #e02200))}:host([badge=success][inverse]){--badge-color:var(--cds-alias-status-success, var(--cds-global-color-green-700, #42810e))}:host([badge*=warning][inverse]){--badge-color:var(--cds-alias-status-warning-dark, var(--cds-global-color-ochre-800, #a36500))}:host([badge*=inherit][inverse]){--badge-color:currentColor}:host([badge=info][inverse]){--badge-color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}.cds-internal-dot-1{animation:fadeInAndOut 1.8s ease-in 0s infinite}.cds-internal-dot-2{animation:fadeInAndOut 1.8s ease-out .422s infinite}.cds-internal-dot-3{animation:fadeInAndOut 1.8s ease-out .675s infinite}@media (prefers-reduced-motion){.cds-internal-dot-1,.cds-internal-dot-2,.cds-internal-dot-3{animation:none}}`;function LNe(c,a){let l="";switch(function ANe(c){switch(!0){case Sf(c):return Iu.NilSizeValue;case function YZ(c){return["xxs","xs","sm","md","lg","xl","xxl"].indexOf(c)>-1}(c):return Iu.ValidSizeString;case function P$(c){return RF(c)&&!L$(c.trim())&&+c==+c}(c):return Iu.ValidNumericString;default:return Iu.BadSizeValue}}(function INe(c){return Sf(c)?"":function ALe(c,a,l=""){const h=c.split(" "),d=""===l?h.filter(f=>f!==a):h.map(f=>f===a?l:f);return d.length>0?d.join(" "):""}(c,"fit")}(a))){case Iu.ValidNumericString:return l=Sk(parseInt(a)),void function TNe(c,...a){a.forEach(([l,h])=>{c.style[l]=h})}(c,...function RNe(c,a){return!XS(c)&&c.indexOf("fit")>-1?[["width","auto"],["height","auto"],["min-width",a],["min-height",a]]:[["width",a],["height",a],["min-width",a],["min-height",a]]}(a,l));case Iu.ValidSizeString:case Iu.NilSizeValue:return void function wNe(c,...a){a.forEach(l=>{c.style[l]=""})}(c,"width","height","min-width","min-height");default:return}}function Tk(c){return c.badge&&("inherit-triangle"===c.badge||"warning-triangle"===c.badge)}!function(c){c.BadSizeValue="bad-value",c.ValidSizeString="value-is-string",c.ValidNumericString="value-is-numeric",c.NilSizeValue="value-is-nil"}(Iu||(Iu={}));class Rc extends B_{constructor(){super(...arguments),this._shape="unknown",this.solid=!1,this.inverse=!1}static get styles(){return[WZ,DNe]}get shape(){return this._shape}set shape(a){if(function yLe(c,a){return!Sf(c)&&N$(c,a)}(a,this._shape)){const l=this._shape;this._shape=a,this.requestUpdate("shape",l)}}get size(){return this._size}set size(a){if(function gLe(c,a){return function mLe(c){return uM(String,c)||XS(c)}(c)&&N$(c,a)}(a,this._size)){const l=this._size;this._size=a,LNe(this,a),this.requestUpdate("size",l)}}updated(a){if(a.has("innerOffset")&&this.innerOffset>0){const l=Sk(-1*this.innerOffset),h=`calc(100% + ${Sk(2*this.innerOffset)})`;this.svg.style.width=h,this.svg.style.height=h,this.svg.style.margin=`${l} 0 0 ${l}`}}firstUpdated(a){if(super.firstUpdated(a),this.isConnected){let l="unknown";this.subscription=Ts.stateUpdates.subscribe(h=>{"iconRegistry"===h.key&&Pi.registry[this.shape]&&l!==this.shape&&(l=this.shape,this.requestUpdate("shape"))})}}disconnectedCallback(){super.disconnectedCallback(),this.subscription?.unsubscribe()}render(){return RF(Pi.registry[this.shape])?_k`<span .innerHTML="${Pi.registry[this.shape]}"></span>`:_Ne`<svg .innerHTML="${function ONe(c){const a=Pi.registry[c.shape]??Pi.registry.unknown;let l=c.solid&&a.solid?a.solid:a.outline;return c.badge&&!Tk(c)&&(l=c.solid?a.solidBadged??l:a.outlineBadged??l),Tk(c)&&(l=c.solid?a.solidAlerted??l:a.outlineAlerted??l),l}(this)+function PNe(c){let a="";return c.badge&&Tk(c)?a='<path d="M26.85 1.14L21.13 11a1.28 1.28 0 001.1 2h11.45a1.28 1.28 0 001.1-2l-5.72-9.86a1.28 1.28 0 00-2.21 0z" class="alert" />':c.badge&&(a='<circle cx="30" cy="6" r="5" class="badge" />'),a}(this)}" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"></svg>`}}Ar([us({type:String})],Rc.prototype,"shape",null),Ar([us({type:String})],Rc.prototype,"size",null),Ar([us({type:String})],Rc.prototype,"direction",void 0),Ar([us({type:String})],Rc.prototype,"flip",void 0),Ar([us({type:Boolean})],Rc.prototype,"solid",void 0),Ar([us({type:String})],Rc.prototype,"status",void 0),Ar([us({type:Boolean})],Rc.prototype,"inverse",void 0),Ar([us({type:String})],Rc.prototype,"badge",void 0),Ar([$Z({type:Number})],Rc.prototype,"innerOffset",void 0),Ar([function MNe(c,a){return(({finisher:c,descriptor:a})=>(l,h)=>{var d;if(void 0===h){const f=null!==(d=l.originalKey)&&void 0!==d?d:l.key,m=null!=a?{kind:"method",placement:"prototype",key:f,descriptor:a(l.key)}:{...l,key:f};return null!=c&&(m.finisher=function(g){c(g,f)}),m}{const f=l.constructor;void 0!==a&&Object.defineProperty(l,h,a(h)),c?.(f,h)}})({descriptor:l=>{const h={get(){var d,f;return null!==(f=null===(d=this.renderRoot)||void 0===d?void 0:d.querySelector(c))&&void 0!==f?f:null},enumerable:!0,configurable:!0};if(a){const d="symbol"==typeof l?Symbol():"__"+l;h.get=function(){var f,m;return void 0===this[d]&&(this[d]=null!==(m=null===(f=this.renderRoot)||void 0===f?void 0:f.querySelector(c))&&void 0!==m?m:null),this[d]}}return h}})}("svg")],Rc.prototype,"svg",void 0),fZ("cds-icon",Rc);class FNe{constructor(a){this.host=a,this.host.addController(this)}hostConnected(){var a=this;return Cm(function*(){yield a.host.updateComplete,a.host.addEventListener("keydown",l=>a.emulateActive(l)),a.host.addEventListener("mousedown",l=>a.emulateActive(l)),a.host.addEventListener("keyup",()=>a.emulateInactive()),a.host.addEventListener("blur",()=>a.emulateInactive()),a.host.addEventListener("mouseup",()=>a.emulateInactive())})()}emulateActive(a){this.host.disabled||this.host?.setAttribute("cds-active",""),"Space"===a.code&&a.target===this.host&&a.preventDefault()}emulateInactive(){this.host.removeAttribute("cds-active")}}class VNe{constructor(a){this.host=a,this.host.addController(this)}hostConnected(){(this.host.hasAttribute("aria-controls")||this.host.ariaControls)&&(this.host.ariaHasPopup="true",this.host.ariaExpanded="false")}}class UNe{constructor(a){this.host=a,this.host.addController(this)}hostUpdated(){null!==this.host.disabled&&(this.host.ariaDisabled=this.host.disabled),this.host.readonly&&(this.host.ariaDisabled=null)}}class GNe{constructor(a){this.host=a,this.host.addController(this)}hostUpdated(){null!=this.host.pressed&&(this.host.ariaPressed=this.host.pressed?"true":"false"),this.host.readonly&&(this.host.ariaPressed=null)}}class jNe{constructor(a){this.host=a,this.host.addController(this)}hostConnected(){this.host.tabIndex=0}hostUpdated(){this.host.role=this.host.readonly?null:"button",this.host.tabIndex=this.host.disabled?-1:0,this.host.readonly&&this.host.removeAttribute("tabindex")}}class XNe{constructor(a){this.host=a,this.host.addController(this)}get currentAnchor(){return"A"===this.host.parentElement?.tagName?this.host.parentElement:null}hostConnected(){this.setAnchor()}hostUpdated(){this.setAnchor()}setAnchor(){this.currentAnchor&&this.currentAnchor!==this.previousAnchor&&(this.previousAnchor=this.currentAnchor,this.host.readonly=!0,this.currentAnchor.style.lineHeight="0",this.currentAnchor.style.textDecoration="none")}}const wk=c=>c??Ys;function ZZ(c){c.preventDefault(),c.stopPropagation()}const Ck=new Map([["arrow-left","ArrowLeft"],["arrow-right","ArrowRight"],["arrow-up","ArrowUp"],["arrow-down","ArrowDown"],["tab","Tab"],["enter","Enter"],["escape","Escape"],["space"," "],["home","Home"],["end","End"]]);var Ru;!function(c){c.ArrowUp="ArrowUp",c.ArrowDown="ArrowDown",c.ArrowLeft="ArrowLeft",c.ArrowRight="ArrowRight",c.End="End",c.Home="Home",c.PageUp="PageUp",c.PageDown="PageDown"}(Ru||(Ru={}));class nFe{constructor(a){this.host=a,this.triggerNativeButtonBehaviorHandler=this.triggerNativeButtonBehavior.bind(this),this.emulateKeyBoardEventBehaviorHandler=this.emulateKeyBoardEventBehavior.bind(this),this.host.addController(this)}hostUpdated(){this.setButtonType(),this.setupNativeButtonBehavior()}setButtonType(){!this.host.type&&this.host.closest("form")&&(this.host.type="submit")}setupNativeButtonBehavior(){this.host.readonly||this.host.disabled?(this.host.removeEventListener("click",this.triggerNativeButtonBehaviorHandler),this.host.removeEventListener("keyup",this.emulateKeyBoardEventBehaviorHandler)):(this.host.addEventListener("click",this.triggerNativeButtonBehaviorHandler),this.host.addEventListener("keyup",this.emulateKeyBoardEventBehaviorHandler))}emulateKeyBoardEventBehavior(a){!function ZNe(c,a,l){c.filter(h=>function xk(c,a){return class $Ne{static get keycodes(){return bLe(Ck)}static add(a,l){Ck.set(a,l)}static has(a){return Ck.has(a)}static getCode(a,l=this.keycodes){return function YNe(c,a){return a.get(c)||""}(a,l)}}.getCode(a)===c.key}(a,h)).length>0&&l()}(["enter","space"],a,()=>{"submit"===this.host.type?this.triggerNativeButtonBehavior(a):this.host.click(),ZZ(a)})}triggerNativeButtonBehavior(a){if(this.host.disabled)ZZ(a);else if(!a.defaultPrevented){const l=function eFe(c,a,l){const h=document.createElement("div");a.appendChild(h),HZ(c,a,{renderBefore:h,...l});const d=h.previousSibling;return h.remove(),d}(_k`<button aria-hidden="true" role="presentation" ?disabled="${this.host.disabled}" tabindex="-1" style="display:none!important" value="${wk(this.host.value)}" name="${wk(this.host.name)}" type="${wk(this.host.type)}"></button>`,this.host);l?.dispatchEvent(new MouseEvent("click",{relatedTarget:this.host,composed:!0})),l?.remove()}}}class rFe{constructor(a){this.host=a,this.host.addController(this)}hostUpdated(){null!=this.host.expanded&&(this.host.ariaExpanded=this.host.expanded?"true":"false"),this.host.readonly&&(this.host.ariaExpanded=null)}}let Lc=class extends B_{constructor(){super(...arguments),this._disabled=!1}get disabled(){return this._disabled}set disabled(c){const a=this._disabled;this._disabled=c,this.requestUpdate("disabled",a)}};Ar([us({type:Boolean})],Lc.prototype,"pressed",void 0),Ar([us({type:Boolean})],Lc.prototype,"expanded",void 0),Ar([us({type:Boolean})],Lc.prototype,"readonly",void 0),Ar([us({type:String})],Lc.prototype,"type",void 0),Ar([us({type:String})],Lc.prototype,"name",void 0),Ar([us({type:String})],Lc.prototype,"value",void 0),Ar([us({type:Boolean})],Lc.prototype,"disabled",null),Ar([us({type:String})],Lc.prototype,"popup",void 0),Lc=Ar([function NNe(){return c=>c.addInitializer(a=>new FNe(a))}(),function HNe(){return c=>c.addInitializer(a=>new jNe(a))}(),function zNe(){return c=>c.addInitializer(a=>new GNe(a))}(),function iFe(){return c=>c.addInitializer(a=>new rFe(a))}(),function BNe(){return c=>c.addInitializer(a=>new UNe(a))}(),function kNe(){return c=>c.addInitializer(a=>new VNe(a))}(),function tFe(){return c=>c.addInitializer(a=>new nFe(a))}(),function WNe(){return c=>c.addInitializer(a=>new XNe(a))}()],Lc);const GM={actions:{sort:"Sort",expand:"Expand",close:"Close",resize:"Resize",filter:"Filter"},alert:{closeButtonAriaLabel:"Close",loading:"Loading",info:"Info",success:"Success",warning:"Warning",danger:"Error"},dropdown:{open:"Open"},file:{browse:"browse",files:"files",removeFile:"remove file"},modal:{closeButtonAriaLabel:"Close modal",contentStart:"Beginning of modal content",contentBox:"Scrollable modal body",contentEnd:"End of modal content"},navigation:{navigationElement:"navigation",navigationLabel:"navigation menu",navigationAbridgedText:"View abridged menu",navigationUnabridgedText:"View unabridged menu"},overlay:{closeButtonAriaLabel:"Close dialog",contentStart:"Beginning of dialog content",contentEnd:"End of dialog content"},popup:{closeButtonAriaLabel:"Close popup",contentStart:"Beginning of popup content",contentEnd:"End of popup content"},password:{showButtonAriaLabel:"Show password",hideButtonAriaLabel:"Hide password"},progress:{loading:"Loading",looping:"Loading"},treeview:{loading:"Loading"},grid:{resizeColumn:"Resize Column",closeDetails:"Close Details",noData:"No Results Found",rowDetailStart:"Start of row details",rowDetailEnd:"End of row details",footerEnd:"End of grid rows",action:"Action",dropTarget:"Drop Item",pagination:{label:"grid pagination",firstPage:"go to first page",previousPage:"go to previous page",nextPage:"go to next page",lastPage:"go to last page",pageSize:"rows per page",page:"page"}}};class Am{static get keys(){return 0===Object.keys(Ts.state.i18nRegistry).length&&(Ts.state.i18nRegistry=vm(GM,Ts.state.i18nRegistry)),vm(GM,Ts.state.i18nRegistry)}static findKey(a){const l=Am.keys;return Object.keys(l).find(h=>F$(l[h],a))}static get(a){return a&&Am.keys[a]||{}}static reset(){Ts.state.i18nRegistry=vm({},GM)}static hydrate(a,l){return JSON.parse(function RLe(c,a,l){return c.replace(/\$\{.+?\}/g,h=>function vLe(c,a,l=`\${${c}}`){return c.split(".").reduce((h,d)=>{try{const f=h[d];switch(!0){case null===f:case!1===f:case""===f:case 0===f:return f;default:return f||l}}catch{return l}},a)}(h.substr(2,h.length-3).trim(),a,l))}(JSON.stringify(a),l))}static localize(a){Ts.state.i18nRegistry=vm(GM,Ts.state.i18nRegistry,a)}}var lFe=hk`:host{--icon-width:var(--cds-global-space-7, calc(16 * 1rem / var(--cds-global-base, 20)));--icon-height:var(--cds-global-space-7, calc(16 * 1rem / var(--cds-global-base, 20)));--width:var(--icon-width);--height:var(--icon-width);--cursor:pointer;--color:var(--cds-global-typography-color-300, var(--cds-global-color-construction-800, #2d4048));--font-size:var(--cds-global-typography-font-size-3, calc(13 * 1rem / var(--cds-global-base, 20)));--background:transparent;--padding:0;--outline:var(--cds-alias-object-interaction-outline, Highlight solid 2px);--outline-offset:calc(var(--cds-alias-object-interaction-outline-offset, 1px) * -1);pointer-events:none;display:inline-block;outline:0!important}:host([role=button]){pointer-events:initial;cursor:var(--cursor)!important}:host([status=active]){--color:var(--cds-alias-status-info, var(--cds-global-color-blue-700, #0079ad))}::slotted([shape=close]),::slotted([shape=info-circle]),::slotted([shape=times]),:host([shape=close]),:host([shape=info-circle]){--icon-width:var(--cds-global-space-8, calc(18 * 1rem / var(--cds-global-base, 20)));--icon-height:var(--cds-global-space-8, calc(18 * 1rem / var(--cds-global-base, 20)))}:host(:hover){--color:var(--cds-alias-object-interaction-color-hover, var(--cds-global-color-construction-1000, #1b2b32))}:host(:active){--color:var(--cds-alias-object-interaction-color-active, var(--cds-global-color-construction-1000, #1b2b32))}:host(:active) .private-host{transform:translateY(calc(var(--cds-global-space-1,calc(1 * 1rem / var(--cds-global-base,20)))/ 2))}:host([disabled]){--color:var(--cds-alias-object-interaction-color-disabled, var(--cds-global-color-construction-300, #aeb8bc))}.private-host{--icon-color:var(--color);background:var(--background);padding:var(--padding);color:var(--color);font-size:var(--font-size);display:flex;justify-content:center;align-items:center;min-width:var(--width);min-height:var(--height)}::slotted(cds-icon),cds-icon{width:var(--icon-width);height:var(--icon-height);pointer-events:none}::slotted(cds-icon:not([status])),cds-icon{--color:var(--icon-color)}:host([disabled]:active){pointer-events:none!important}.private-host::after{content:"";position:absolute;left:calc(-1*var(--width) - 1);top:calc(-1*var(--height) - 1);width:var(--cds-alias-object-interaction-touch-target,calc(36 * 1rem / var(--cds-global-base,20)));height:var(--cds-alias-object-interaction-touch-target,calc(36 * 1rem / var(--cds-global-base,20)))}:host([disabled]) .private-host::after{outline:0!important}:host(:focus) .private-host::after{outline:var(--outline);outline-offset:var(--outline-offset)}@media (-webkit-min-device-pixel-ratio:0){:host(:focus) .private-host::after{outline-color:-webkit-focus-ring-color}}`;class Im extends Lc{constructor(){super(...arguments),this.i18n=Am.keys.actions,this.cdsButtonAction=!0}render(){return _k`<div class="private-host"><slot><cds-icon .shape="${this.shape?this.shape:"ellipsis-vertical"}" .size="${this.iconSize}" ?solid="${this.pressed||this.expanded}" inner-offset="${1}"></cds-icon></slot></div>`}updated(a){super.updated(a),this.ariaLabel||this.readonly||Sm.warn("A aria-label is required for interactive cds-button-action type",this),a.has("readonly")&&(this.ariaHidden=this.readonly&&!this.hasAttribute("aria-label")?"true":null)}}Im.styles=[WZ,lFe],Ar([us({type:String})],Im.prototype,"shape",void 0),Ar([us({type:String,reflect:!0})],Im.prototype,"action",void 0),Ar([us({type:String})],Im.prototype,"iconSize",void 0),Ar([function sFe(){return(c,a)=>{const l=c.connectedCallback,h=c.disconnectedCallback;c.connectedCallback=function(){c.__i18nSub=Ts.stateUpdates.subscribe(f=>{"i18nRegistry"===f.key&&this.requestUpdate(a)}),l&&l.apply(this)},c.disconnectedCallback=function(){c.__i18nSub.unsubscribe(),h&&h.apply(this)};const d={get(){const f=vm(Am.keys[this.__i18nKey],this.__i18n||{});return Am.hydrate(f,this)},set(f){const m=function oFe(c,a){if(Sf(c)){let l={};if(a.hasAttribute("cds-i18n")){const h=a.getAttribute("cds-i18n")+"";if(Sf(h))l={};else try{l=JSON.parse(h)}catch{Sm.warn("Clarity i18n: Invalid JSON passed to cds-i18n"),l={}}}return l}return c}(f,this),g=function aFe(c,a,l,h){return Sf(c)?F$(l,h)?{update:!1}:{update:!0,values:l}:c===a?{update:!1,values:{}}:{update:!0,key:c,values:{}}}(Am.findKey(m)||"",this.__i18nKey,m,this.__i18n);void 0!==g.key&&(this.__i18nKey=g.key+""),void 0!==g.values&&(this.__i18n={...g.values}),!0===g.update&&this.requestUpdate(),this.requestUpdate(a)},enumerable:!0,configurable:!0};return void 0!==a?function(f,m,g){const y=Object.defineProperty(m,g,f);return us({type:Object,attribute:"cds-i18n"})(y,g)}(d,c,a):function(f,m){const g={kind:"method",placement:"prototype",key:m.key,descriptor:f};return us({type:Object})(g)}(d,c)}}()],Im.prototype,"i18n",void 0),Ar([$Z({type:Boolean,reflect:!0,attribute:"cds-button-action"})],Im.prototype,"cdsButtonAction",void 0);class JZ extends Im{constructor(){super(...arguments),this.shape="close"}connectedCallback(){super.connectedCallback(),this.ariaLabel=this.ariaLabel?this.ariaLabel:this.i18n.close}}Ar([us({type:String})],JZ.prototype,"shape",void 0),fZ("cds-internal-close-button",JZ),Pi.addIcons(nY),Pi.addAliases(["times",["close"]]);const yn=["*"];function zFe(c,a){1&c&&xe(0,"label")}const GFe=[[["","clrCheckbox",""],["","clrToggle",""]],[["label"]]],HFe=["[clrCheckbox],[clrToggle]","label"];function jFe(c,a){1&c&&xe(0,"label")}function WFe(c,a){1&c&&ze(0,2,["*ngIf","showHelper"])}function XFe(c,a){1&c&&xe(0,"cds-icon",5)}function qFe(c,a){1&c&&xe(0,"cds-icon",6)}function $Fe(c,a){1&c&&ze(0,3,["*ngIf","showInvalid"])}function YFe(c,a){1&c&&ze(0,4,["*ngIf","showValid"])}const ZFe=[[["label"]],[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],KFe=["label","clr-checkbox-wrapper,clr-toggle-wrapper","clr-control-helper","clr-control-error","clr-control-success"];function ike(c,a){1&c&&xe(0,"label")}function rke(c,a){1&c&&xe(0,"cds-icon",5)}function ske(c,a){1&c&&xe(0,"cds-icon",6)}function oke(c,a){1&c&&ze(0,2,["*ngIf","showHelper"])}function ake(c,a){1&c&&ze(0,3,["*ngIf","showInvalid"])}function lke(c,a){1&c&&ze(0,4,["*ngIf","showValid"])}const cke=[[["label"]],[["","clrInput",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],uke=["label","[clrInput]","clr-control-helper","clr-control-error","clr-control-success"];function Ike(c,a){1&c&&xe(0,"label")}const Rke=[[["","clrRadio",""]],[["label"]]],Lke=["[clrRadio]","label"];function Pke(c,a){1&c&&xe(0,"label")}function Oke(c,a){1&c&&xe(0,"span",6),2&c&&oy("width",he().getRangeProgressFillWidth())}function Nke(c,a){1&c&&xe(0,"cds-icon",7)}function Fke(c,a){1&c&&xe(0,"cds-icon",8)}function kke(c,a){1&c&&ze(0,2,["*ngIf","showHelper"])}function Vke(c,a){1&c&&ze(0,3,["*ngIf","showInvalid"])}function Bke(c,a){1&c&&ze(0,4,["*ngIf","showValid"])}const Uke=[[["label"]],[["","clrRange",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],zke=["label","[clrRange]","clr-control-helper","clr-control-error","clr-control-success"];function Gke(c,a){1&c&&xe(0,"label")}function Hke(c,a){1&c&&xe(0,"cds-icon",5)}function jke(c,a){1&c&&xe(0,"cds-icon",6)}function Wke(c,a){1&c&&ze(0,2,["*ngIf","showHelper"])}function Xke(c,a){1&c&&ze(0,3,["*ngIf","showInvalid"])}function qke(c,a){1&c&&ze(0,4,["*ngIf","showValid"])}const $ke=[[["label"]],[["","clrSelect",""]],[["clr-control-helper"]],[["clr-control-error"]],[["clr-control-success"]]],Yke=["label","[clrSelect]","clr-control-helper","clr-control-error","clr-control-success"],Zke=["anchor"];function Kke(c,a){if(1&c&&(U(0,"div",4)(1,"div",5)(2,"button",6),xe(3,"cds-icon",7),H()(),ze(4),H()),2&c){const l=he();z("id",l.popoverId),Ue("aria-label",l.commonStrings.keys.datagridFilterDialogAriaLabel),V(3),Ue("title",l.commonStrings.keys.close)}}const Jke=["input_low"],Qke=["input"],e3e=["columnPortal"];function t3e(c,a){1&c&&ze(0)}const n3e=["resizeTracker"],i3e=["columnHandle"];function r3e(c,a){1&c&&xa(0)}function s3e(c,a){1&c&&xe(0,"cds-icon",10),2&c&&Ue("direction",he(2).sortDirection)}function o3e(c,a){if(1&c){const l=$t();U(0,"button",7),De("click",function(){return yt(l),_t(he().sort())}),ce(1,r3e,1,0,"ng-container",8),ce(2,s3e,1,1,"cds-icon",9),H()}if(2&c){const l=he(),h=as(6);V(1),z("ngTemplateOutlet",h),V(1),z("ngIf",l.sortDirection)}}function a3e(c,a){if(1&c){const l=$t();U(0,"clr-dg-string-filter",11),De("clrFilterValueChange",function(d){return yt(l),_t(he().filterValue=d)}),H()}if(2&c){const l=he();z("clrFilterPlaceholder",l.filterStringPlaceholder)("clrDgStringFilter",l.registered)("clrFilterValue",l.filterValue)}}function l3e(c,a){if(1&c){const l=$t();U(0,"clr-dg-numeric-filter",12),De("clrFilterValueChange",function(d){return yt(l),_t(he().filterValue=d)}),H()}if(2&c){const l=he();z("clrFilterMaxPlaceholder",l.filterNumberMaxPlaceholder)("clrFilterMinPlaceholder",l.filterNumberMinPlaceholder)("clrDgNumericFilter",l.registered)("clrFilterValue",l.filterValue)}}function c3e(c,a){1&c&&ze(0,1)}function u3e(c,a){1&c&&xa(0)}function h3e(c,a){if(1&c&&(U(0,"span",13),ce(1,u3e,1,0,"ng-container",8),H()),2&c){he();const l=as(6);V(1),z("ngTemplateOutlet",l)}}function d3e(c,a){1&c&&xe(0,"clr-dg-column-separator")}const f3e=[[["clr-dg-filter"],["clr-dg-string-filter"],["clr-dg-numeric-filter"]],"*"],p3e=["clr-dg-filter, clr-dg-string-filter, clr-dg-numeric-filter","*"];function m3e(c,a){1&c&&xe(0,"div",4)}function g3e(c,a){1&c&&ze(0,0,["*ngIf","emptyDatagrid"])}function y3e(c,a){if(1&c&&(ci(0),U(1,"button",1),xe(2,"cds-icon",2),H(),ui()),2&c){const l=he();V(2),Ue("title",l.commonStrings.keys.info)}}const _3e=["cellPortal"];function v3e(c,a){1&c&&ze(0)}const b3e=["rowPortal"];function S3e(c,a){1&c&&ze(0)}const T3e=["detailButton"],w3e=["stickyCells"],C3e=["scrollableCells"],x3e=["calculatedCells"];function E3e(c,a){}function M3e(c,a){if(1&c&&(U(0,"clr-expandable-animation",7),ce(1,E3e,0,0,"ng-template",8),H()),2&c){const l=he(2),h=as(6);z("clrExpandTrigger",l.expandAnimationTrigger),V(1),z("ngTemplateOutlet",h)}}function D3e(c,a){}function A3e(c,a){1&c&&ce(0,D3e,0,0,"ng-template",8),2&c&&(he(2),z("ngTemplateOutlet",as(6)))}function I3e(c,a){if(1&c){const l=$t();U(0,"div",6),De("mousedown",function(d){return yt(l),_t(he().clearRanges(d))})("click",function(){yt(l);const d=he();return _t(d.selectRow(!d.selected))}),ce(1,M3e,2,2,"clr-expandable-animation",1),ce(2,A3e,1,1,null,2),H()}if(2&c){const l=he();V(1),z("ngIf",l.expand.expandable),V(1),z("ngIf",!l.expand.expandable)}}function R3e(c,a){}function L3e(c,a){if(1&c&&(U(0,"clr-expandable-animation",7),ce(1,R3e,0,0,"ng-template",8),H()),2&c){const l=he(),h=as(6);z("clrExpandTrigger",l.expandAnimationTrigger),V(1),z("ngTemplateOutlet",h)}}function P3e(c,a){}function O3e(c,a){1&c&&ce(0,P3e,0,0,"ng-template",8),2&c&&(he(),z("ngTemplateOutlet",as(6)))}function N3e(c,a){1&c&&ze(0)}const tK=function(c){return{"clr-form-control-disabled":c}};function F3e(c,a){if(1&c){const l=$t();U(0,"div",19)(1,"div",20)(2,"input",21),De("ngModelChange",function(d){return yt(l),_t(he(2).toggle(d))}),H(),U(3,"label",22),De("click",function(d){return yt(l),_t(he(2).clearRanges(d))}),U(4,"span",23),ve(5),H()()()()}if(2&c){const l=he(2);z("ngClass",mr(8,tK,!l.clrDgSelectable)),V(2),z("ngModel",l.selected)("id",l.checkboxId)("disabled",!l.clrDgSelectable||null),Ue("aria-disabled",!l.clrDgSelectable||null)("aria-label",l.clrDgRowAriaLabel),V(1),z("for",l.checkboxId),V(2),Kt(l.commonStrings.keys.select)}}function k3e(c,a){if(1&c){const l=$t();U(0,"div",19)(1,"input",24),De("ngModelChange",function(d){return yt(l),_t(he(2).selection.currentSingle=d)}),H()()}if(2&c){const l=he(2);z("ngClass",mr(9,tK,!l.clrDgSelectable)),V(1),z("id",l.radioId)("name",l.selection.id+"-radio")("value",l.item)("ngModel",l.selection.currentSingle)("checked",l.selection.currentSingle===l.item)("disabled",!l.clrDgSelectable||null),Ue("aria-disabled",!l.clrDgSelectable||null)("aria-label",l.clrDgRowAriaLabel)}}function V3e(c,a){1&c&&(U(0,"div",25),ze(1,2),H())}function B3e(c,a){if(1&c){const l=$t();U(0,"button",29),De("click",function(){return yt(l),_t(he(4).toggleExpand())}),xe(1,"cds-icon",30),H()}if(2&c){const l=he(4);Ue("aria-expanded",l.expand.expanded)("aria-label",l.expand.expanded?l.clrDgDetailCloseLabel:l.clrDgDetailOpenLabel)("aria-controls",l.expandableId),V(1),Ue("direction",l.expand.expanded?"down":"right")("title",l.expand.expanded?l.commonStrings.keys.collapse:l.commonStrings.keys.expand)}}function U3e(c,a){if(1&c&&(U(0,"clr-spinner",31),ve(1),H()),2&c){const l=he(4);V(1),Kt(l.commonStrings.keys.loading)}}function z3e(c,a){if(1&c&&(ci(0),ce(1,B3e,2,5,"button",27),ce(2,U3e,2,1,"clr-spinner",28),ui()),2&c){const l=he(3);V(1),z("ngIf",!l.expand.loading),V(1),z("ngIf",l.expand.loading)}}function G3e(c,a){if(1&c&&(U(0,"div",26),ce(1,z3e,3,2,"ng-container",2),H()),2&c){const l=he(2);V(1),z("ngIf",l.expand.expandable)}}function H3e(c,a){if(1&c){const l=$t();U(0,"div",32)(1,"button",33,34),De("click",function(){yt(l);const d=as(2),f=he(2);return _t(f.detailService.toggle(f.item,d))}),xe(3,"cds-icon",35),H()()}if(2&c){const l=he(2);V(1),ot("is-open",l.detailService.isRowOpen(l.item)),Ue("aria-label",l.detailService.isRowOpen(l.item)?l.clrDgDetailCloseLabel:l.clrDgDetailOpenLabel)("aria-expanded",l.detailService.isOpen)("aria-controls",l.detailService.id),V(2),Ue("direction",l.detailService.isRowOpen(l.item)?"left":"right")("title",l.detailService.isRowOpen(l.item)?l.commonStrings.keys.close:l.commonStrings.keys.open)}}function j3e(c,a){}function W3e(c,a){1&c&&ce(0,j3e,0,0,"ng-template",8),2&c&&(he(2),z("ngTemplateOutlet",as(4)))}function X3e(c,a){}function q3e(c,a){1&c&&ce(0,X3e,0,0,"ng-template",8),2&c&&(he(2),z("ngTemplateOutlet",as(4)))}const $3e=function(c){return{"is-replaced":c}};function Y3e(c,a){if(1&c&&(U(0,"div",9)(1,"div",10),ci(2,null,11),ce(4,F3e,6,10,"div",12),ce(5,k3e,2,11,"div",12),ce(6,V3e,2,0,"div",13),ce(7,G3e,2,1,"div",14),ce(8,H3e,4,7,"div",15),ui(),H(),U(9,"div",16)(10,"div",17),ze(11,1),xa(12,null,18),H(),ce(14,W3e,1,1,null,2),ce(15,q3e,1,1,null,2),H()()),2&c){const l=he();ot("datagrid-row-detail-open",l.detailService.isRowOpen(l.item)),z("id",l.id),V(4),z("ngIf",l.selection.selectionType===l.SELECTION_TYPE.Multi),V(1),z("ngIf",l.selection.selectionType===l.SELECTION_TYPE.Single),V(1),z("ngIf",l.rowActionService.hasActionableRow),V(1),z("ngIf",l.globalExpandable.hasExpandableRow),V(1),z("ngIf",l.detailService.enabled),V(1),z("ngClass",mr(11,$3e,l.replaced&&l.expanded)),V(5),z("ngIf",l.replaced&&!l.expand.loading),V(1),z("ngIf",!l.replaced&&!l.expand.loading)}}const Z3e=[[["clr-dg-row-detail"]],[["clr-dg-cell"]],[["clr-dg-action-overflow"]]],K3e=["clr-dg-row-detail","clr-dg-cell","clr-dg-action-overflow"],J3e=["scrollableColumns"],Q3e=["datagridTable"],e4e=["projectedDisplayColumns"],t4e=["projectedCalculationColumns"],n4e=["displayedRows"],i4e=["calculationRows"];function r4e(c,a){if(1&c){const l=$t();U(0,"div",24),De("keydown.space",function(d){yt(l);const f=he();return f.allSelected=!f.allSelected,_t(d.preventDefault())}),U(1,"div",25)(2,"input",26),De("ngModelChange",function(d){return yt(l),_t(he().allSelected=d)}),H(),U(3,"label",27)(4,"span",28),ve(5),H()()(),xe(6,"div",29),H()}if(2&c){const l=he();V(2),z("id",l.selectAllId)("ngModel",l.allSelected),Ue("aria-label",l.commonStrings.keys.selectAll),V(1),z("for",l.selectAllId),V(2),Kt(l.commonStrings.keys.selectAll)}}function s4e(c,a){1&c&&(U(0,"div",30),xe(1,"div",29),H()),2&c&&Ue("aria-label",he().clrDgSingleSelectionAriaLabel)}function o4e(c,a){1&c&&(U(0,"div",31),xe(1,"div",29),H()),2&c&&Ue("aria-label",he().clrDgSingleActionableAriaLabel)}function a4e(c,a){1&c&&(U(0,"div",32),xe(1,"div",29),H()),2&c&&Ue("aria-label",he().clrDetailExpandableAriaLabel)}function l4e(c,a){1&c&&xe(0,"clr-dg-placeholder")}function c4e(c,a){1&c&&(U(0,"div",33)(1,"clr-spinner",34),ve(2,"Loading"),H()())}const u4e=[[["clr-dg-action-bar"]],[["clr-dg-placeholder"]],[["clr-dg-footer"]],[["","clrIfDetail",""],["clr-dg-detail"]]],h4e=["clr-dg-action-bar","clr-dg-placeholder","clr-dg-footer","[clrIfDetail],clr-dg-detail"],f4e=["allSelected"];function p4e(c,a){if(1&c&&(ci(0),U(1,"h2"),ve(2),H(),ui()),2&c){const l=he(2);V(2),Kt(l.commonStrings.keys.showColumns)}}function m4e(c,a){}function g4e(c,a){if(1&c){const l=$t();U(0,"li")(1,"clr-checkbox-wrapper")(2,"input",14),De("ngModelChange",function(d){const m=yt(l).$implicit;return _t(he(2).toggleColumnState(m,!d))}),H(),U(3,"label"),ce(4,m4e,0,0,"ng-template",15),H()()()}if(2&c){const l=a.$implicit,h=he(2);V(2),z("disabled",h.hasOnlyOneVisibleColumn&&!l.hidden)("ngModel",!l.hidden),V(2),z("ngTemplateOutlet",l.titleTemplateRef)}}function y4e(c,a){if(1&c){const l=$t();U(0,"clr-dg-column-toggle-button",16),De("clrAllSelected",function(){return yt(l),_t(he(2).allColumnsSelected())}),ve(1),H()}if(2&c){const l=he(2);V(1),pr(" ",l.commonStrings.keys.selectAll," ")}}function _4e(c,a){if(1&c&&(U(0,"div",2)(1,"div",3)(2,"div",4,5),ve(4),H(),ce(5,p4e,3,1,"ng-container",6),ze(6),U(7,"button",7),xe(8,"cds-icon",8),U(9,"span",9),ve(10),H()()(),U(11,"ul",10),ce(12,g4e,5,3,"li",11),H(),U(13,"div",12),ze(14,1),ce(15,y4e,2,1,"clr-dg-column-toggle-button",13),H()()),2&c){const l=he();z("id",l.popoverId),Ue("aria-label",l.commonStrings.keys.showColumnsMenuDescription),V(4),Kt(l.commonStrings.keys.allColumnsSelected),V(1),z("ngIf",!l.customToggleTitle),V(2),Ue("aria-label",l.commonStrings.keys.close),V(1),Ue("title",l.commonStrings.keys.close),V(2),Kt(l.commonStrings.keys.close),V(2),z("ngForOf",l.hideableColumnStates)("ngForTrackBy",l.trackByFn),V(3),z("ngIf",!l.customToggleButton)}}const v4e=[[["clr-dg-column-toggle-title"]],[["clr-dg-column-toggle-button"]]],b4e=["clr-dg-column-toggle-title","clr-dg-column-toggle-button"];function w4e(c,a){if(1&c&&(ci(0),U(1,"div",1)(2,"clr-checkbox-wrapper",2),xe(3,"input",3),U(4,"label"),ve(5),H(),U(6,"span",4),ve(7),H()()(),ui()),2&c){const l=he();V(5),Kt(l.selection.current.length),V(2),Kt(l.commonStrings.keys.selectedRows)}}function C4e(c,a){1&c&&xe(0,"clr-dg-column-toggle")}function x4e(c,a){if(1&c&&(ci(0),ze(1,1),ce(2,C4e,1,0,"clr-dg-column-toggle",0),U(3,"div",5),ze(4,2),H(),ui()),2&c){const l=he();V(2),z("ngIf",l.hasHideableColumns&&!l.toggle)}}const E4e=[[["clr-dg-pagination"]],[["clr-dg-column-toggle"]],"*"],M4e=["clr-dg-pagination","clr-dg-column-toggle","*"];function gVe(c,a){if(1&c){const l=$t();U(0,"button",3),De("click",function(){yt(l);const d=he();return _t(d.openNav(d.responsiveNavCodes.NAV_LEVEL_1))}),xe(1,"span"),H()}if(2&c){const l=he();Ue("aria-label",l.responsiveNavCommonString)("aria-expanded",1===l.openNavLevel?"true":"false")}}function yVe(c,a){if(1&c){const l=$t();U(0,"button",4),De("click",function(){yt(l);const d=he();return _t(d.openNav(d.responsiveNavCodes.NAV_LEVEL_2))}),xe(1,"span"),H()}if(2&c){const l=he();Ue("aria-label",l.responsiveOverflowCommonString)("aria-expanded",2===l.openNavLevel?"true":"false")}}function DVe(c,a){if(1&c){const l=$t();U(0,"button",3),De("click",function(){return yt(l),_t(he().toggleByButton())}),xe(1,"cds-icon",4),H()}if(2&c){const l=he();ot("on-collapse",l.collapsed),Ue("aria-expanded",l.ariaExpanded)("aria-label",l.commonStrings.keys.verticalNavToggle),V(1),Ue("direction",l.collapsed?"right":"left")("title",l.collapsed?l.commonStrings.keys.expand:l.commonStrings.keys.collapse)}}function AVe(c,a){if(1&c){const l=$t();U(0,"button",5),De("click",function(){return yt(l),_t(he().collapsed=!1)}),H()}2&c&&Ue("aria-label",he().commonStrings.keys.verticalNavToggle)}const IVe=[[["","clrVerticalNavLink",""]],[["","clrVerticalNavIcon",""]],"*",[["","clrIfExpanded",""],["clr-vertical-nav-group-children"]]],RVe=["[clrVerticalNavLink]","[clrVerticalNavIcon]","*","[clrIfExpanded], clr-vertical-nav-group-children"];let ga=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=Ke({type:c,selectors:[["clr-icon"]]}),c})(),Xi=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=Ke({type:c,selectors:[["cds-icon"]]}),c})(),qi=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})();class d1{}var Eo=(()=>(function(c){c[c.DEFAULT=0]="DEFAULT",c[c.LOADING=1]="LOADING",c[c.SUCCESS=2]="SUCCESS",c[c.ERROR=3]="ERROR"}(Eo||(Eo={})),Eo))();let ya=(()=>{class c{constructor(){this.expandable=0,this._loading=!1,this._expanded=!1,this._expandChange=new Qe}get loading(){return this._loading}set loading(l){(l=!!l)!==this._loading&&(this._loading=l)}get expanded(){return this._expanded}set expanded(l){(l=!!l)!==this._expanded&&(this._expanded=l,this._expandChange.next(l))}toggle(){this.expanded=!this._expanded}get expandChange(){return this._expandChange.asObservable()}loadingStateChange(l){this.loading=l===Eo.LOADING}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),cBe=0;function Zs(){return"clr-id-"+cBe++}const Oc="0.2s ease-in-out",Ek=(ml("skipInitialRender",[Ns(":enter",[])]),ml("toggle",[Ns("void => *",[vi({display:"block",height:0}),Co(Oc,vi({height:"*"}))])]),ml("skipInitialRender",[Ns(":enter",[])]),ml("toggle",[Ns("void => *",[vi({display:"block",height:0}),Co(Oc,vi({height:"*"}))]),Ns("* => void",[vi({display:"block"}),Co(Oc,vi({height:0,display:"none"}))])]),{open:"Open",close:"Close",show:"Show",hide:"Hide",expand:"Expand",collapse:"Collapse",more:"More",select:"Select",selectAll:"Select All",previous:"Previous",next:"Next",current:"Jump to current",info:"Info",success:"Success",warning:"Warning",danger:"Error",rowActions:"Available actions",pickColumns:"Manage Columns",showColumns:"Show Columns",sortColumn:"Sort Column",firstPage:"First Page",lastPage:"Last Page",nextPage:"Next Page",previousPage:"Previous Page",currentPage:"Current Page",totalPages:"Total Pages",filterItems:"Filter items",minValue:"Min value",maxValue:"Max value",modalContentStart:"Beginning of Modal Content",modalContentEnd:"End of Modal Content",showColumnsMenuDescription:"Show or hide columns menu",allColumnsSelected:"All columns selected",signpostToggle:"Signpost Toggle",signpostClose:"Signpost Close",loading:"Loading",detailPaneStart:"Start of row details",detailPaneEnd:"End of row details",singleSelectionAriaLabel:"Single selection header",singleActionableAriaLabel:"Single actionable header",detailExpandableAriaLabel:"Toggle more row content",datagridFilterAriaLabel:"Toggle {COLUMN} filter",datagridFilterDialogAriaLabel:"Filter dialog",columnSeparatorAriaLabel:"Column resize handle",columnSeparatorDescription:"Use left or right key to resize the column",alertCloseButtonAriaLabel:"Close alert",alertNextAlertAriaLabel:"Next alert message, {CURRENT} of {COUNT}",alertPreviousAlertAriaLabel:"Previous alert message, {CURRENT} of {COUNT}",datepickerDialogLabel:"Choose date",datepickerToggle:"Toggle datepicker",datepickerToggleChooseDateLabel:"Choose date",datepickerToggleChangeDateLabel:"Change date, {SELECTED_DATE}",datepickerPreviousMonth:"Previous month",datepickerCurrentMonth:"Current month",datepickerNextMonth:"Next month",datepickerPreviousDecade:"Previous decade",datepickerNextDecade:"Next decade",datepickerCurrentDecade:"Current decade",datepickerSelectMonthText:"Select month, the current month is {CALENDAR_MONTH}",datepickerSelectYearText:"Select year, the current year is {CALENDAR_YEAR}",datepickerSelectedLabel:"{FULL_DATE} - Selected",stackViewChanged:"Value changed.",responsiveNavToggleOpen:"Navigation menu",responsiveNavToggleClose:"Navigation menu",responsiveNavOverflowOpen:"Navigation overflow menu",responsiveNavOverflowClose:"Navigation overflow menu",verticalNavGroupToggle:"Toggle vertical navigation group",verticalNavToggle:"Toggle vertical navigation",timelineStepNotStarted:"Not started",timelineStepCurrent:"Current",timelineStepSuccess:"Completed",timelineStepError:"Error",timelineStepProcessing:"In progress",comboboxDelete:"Delete selected option",comboboxSearching:'Searching for matches for "{INPUT}"',comboboxSelection:"Selection",comboboxSelected:"Selected",comboboxNoResults:"No results",comboboxOpen:"Show options",datagridExpandableBeginningOf:"Beginning of",datagridExpandableEndOf:"End of",datagridExpandableRowContent:"Expandable row content",datagridExpandableRowsHelperText:"Screen reader table commands may not work for viewing expanded content, please use your screen reader's browse mode to read the content exposed by this button",wizardStepSuccess:"Completed",wizardStepError:"Error",passwordHide:"Hide password",passwordShow:"Show password",selectedRows:"Selected rows"});let xi=(()=>{class c{constructor(){this._strings=Ek}localize(l){this._strings={...this._strings,...l}}get keys(){return this._strings}parse(l,h={}){const d=Object.keys(h);let f=l;return d.length&&d.forEach(m=>{f=f.replace(`{${m}}`,h[m])}),f}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),U_=(()=>{class c{constructor(){this._chocolate=new Qe,this.disableChocolateCheck=!1}get chocolate(){return this._chocolate.asObservable()}ngAfterViewChecked(){this.disableChocolateCheck||this._chocolate.next()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=Ke({type:c}),c})(),z_=(()=>{class c{constructor(l,h){this.subscription=h.chocolate.subscribe(()=>{this.latestFlavor!==this.flavor&&(h.disableChocolateCheck=!0,l.detectChanges(),h.disableChocolateCheck=!1)})}ngAfterContentChecked(){this.latestFlavor=this.flavor}ngOnDestroy(){this.subscription.unsubscribe()}}return c.\u0275fac=function(l){return new(l||c)(N(Ls),N(U_))},c.\u0275dir=Ke({type:c}),c})(),sK=(()=>{class c{constructor(){Pi.addIcons(D_,fl,pl)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi]]}),c})(),SBe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi,sK],sK]}),c})();var cn=(()=>(function(c){c.ArrowLeft="ArrowLeft",c.ArrowUp="ArrowUp",c.ArrowRight="ArrowRight",c.ArrowDown="ArrowDown",c.Backspace="Backspace",c.Tab="Tab",c.Enter="Enter",c.Escape="Escape",c.Space="Space",c.Spacebar=" ",c.Home="Home",c.End="End"}(cn||(cn={})),cn))(),Bh=(()=>(function(c){c.ArrowUp="Up",c.ArrowDown="Down",c.ArrowRight="Right",c.ArrowLeft="Left",c.Space="Spacebar",c.Escape="Esc"}(Bh||(Bh={})),Bh))();function Nc(c){return c===cn.ArrowUp||c===Bh.ArrowUp?cn.ArrowUp:c===cn.ArrowDown||c===Bh.ArrowDown?cn.ArrowDown:c===cn.ArrowRight||c===Bh.ArrowRight?cn.ArrowRight:c===cn.ArrowLeft||c===Bh.ArrowLeft?cn.ArrowLeft:c===cn.Space||c===Bh.Space?cn.Space:c===cn.Escape||c===Bh.Escape?cn.Escape:c}let zi=(()=>{class c{constructor(){this._open=!1,this._openChange=new Qe,this._openEventChange=new Qe,this._popoverAligned=new Qe}get openChange(){return this._openChange.asObservable()}set openEvent(l){this._openEvent=l,this._openEventChange.next(l)}get openEvent(){return this._openEvent}getEventChange(){return this._openEventChange.asObservable()}set open(l){this._open!==(l=!!l)&&(this._open=l,this._openChange.next(l))}get open(){return this._open}get originalEvent(){return this._openEvent}toggleWithEvent(l){(function Ak(c){const a=Nc(c.key);(a===cn.ArrowUp||a===cn.ArrowDown||a===cn.ArrowLeft||a===cn.ArrowRight)&&c.preventDefault()})(l),this.openEvent=l,this.open=!this.open}get popoverAligned(){return this._popoverAligned.asObservable()}popoverAlignedEmit(l){this._popoverAligned.next(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),Uh=(()=>{class c{constructor(l,h,d){this.renderer=l,this.smartOpenService=h,this.document=d,this.outsideClickClose=!0,this.scrollToClose=!0,this.subscriptions=[],this.subscriptions.push(h.openChange.subscribe(f=>{f?(this.addEscapeListener(),this.addClickListener(),this.addScrollListener()):this.removeAllEventListeners()}),h.getEventChange().subscribe(f=>{this.ignoredEvent=f}))}addScrollListener(){this.scrollToClose&&(this.documentScroller=Mu(this.document,"scroll",{capture:!0}),this.scrollSubscription=this.documentScroller.pipe(Ki(this.testForSmartPopoverContentContainer)).subscribe(()=>{this.smartOpenService.open=!1,this.setAnchorFocus()}))}removeScrollListener(){this.documentScroller&&(this.scrollSubscription.unsubscribe(),delete this.documentScroller)}testForSmartPopoverContentContainer(l){let h=l.target;for(;h.classList&&"body"!==h.parentElement.localName;)h=h.parentElement;return!!h.classList&&!h.classList.contains("clr-popover-content")}addClickListener(){this.outsideClickClose&&(this.documentClickListener=this.renderer.listen(this.document,"click",l=>{l===this.ignoredEvent?delete this.ignoredEvent:(this.smartOpenService.open=!1,l.target.focus())}))}removeClickListener(){this.outsideClickClose&&(delete this.ignoredEvent,this.documentClickListener&&(this.documentClickListener(),delete this.documentClickListener))}addEscapeListener(){this.escapeListener=this.renderer.listen(this.document,"keydown.escape",()=>{this.smartOpenService.open=!1,this.setAnchorFocus()})}removeEscapeListener(){this.escapeListener&&(this.escapeListener(),delete this.escapeListener)}set anchorButtonRef(l){this._anchorButtonRef=l}get anchorButtonRef(){return this._anchorButtonRef}set closeButtonRef(l){this._closeButtonRef=l}get closeButtonRef(){return this._closeButtonRef}setCloseFocus(){this._closeButtonRef.nativeElement.focus()}setAnchorFocus(){this.anchorButtonRef.nativeElement.focus()}set contentRef(l){this._contentRef=l}get contentRef(){return this._contentRef}removeAllEventListeners(){this.removeScrollListener(),this.removeClickListener(),this.removeEscapeListener()}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe()),this.removeAllEventListeners()}}return c.\u0275fac=function(l){return new(l||c)(Oe(Gn),Oe(zi),Oe(Ci))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),g1=(()=>{class c{constructor(l,h){l.anchorButtonRef=h}}return c.\u0275fac=function(l){return new(l||c)(N(Uh),N(Xt))},c.\u0275dir=Ke({type:c,selectors:[["","clrPopoverAnchor",""]],hostVars:2,hostBindings:function(l,h){2&l&&ot("clr-anchor",!0)}}),c})(),lK=(()=>{class c{constructor(l,h,d){this.elementRef=l,this.smartEventsService=h,this.smartOpenService=d,this.subscriptions=[],this.closeChange=new st,this.subscriptions.push(d.openChange.pipe(Ki(f=>!f)).subscribe(()=>{this.closeChange.next()}))}handleClick(l){this.smartOpenService.toggleWithEvent(l),this.smartEventsService.setAnchorFocus()}ngAfterViewInit(){this.smartEventsService.closeButtonRef=this.elementRef,this.smartEventsService.setCloseFocus()}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(N(Xt),N(Uh),N(zi))},c.\u0275dir=Ke({type:c,selectors:[["","clrPopoverCloseButton",""]],hostVars:2,hostBindings:function(l,h){1&l&&De("click",function(f){return h.handleClick(f)}),2&l&&ot("clr-smart-close-button",!0)},outputs:{closeChange:"clrPopoverOnCloseChange"}}),c})();var ho=(()=>(function(c){c[c.VERTICAL=0]="VERTICAL",c[c.HORIZONTAL=1]="HORIZONTAL"}(ho||(ho={})),ho))(),Ti=(()=>(function(c){c[c.START=0]="START",c[c.CENTER=.5]="CENTER",c[c.END=1]="END"}(Ti||(Ti={})),Ti))(),Lm=(()=>(function(c){c[c.BOTTOM=0]="BOTTOM",c[c.LEFT=1]="LEFT",c[c.RIGHT=2]="RIGHT",c[c.TOP=3]="TOP"}(Lm||(Lm={})),Lm))();const xf=c=>({...c,side:-1*c.side}),zh=(c,a)=>{const l=c.content+(a?.5:-.5);return l<0||l>1?c:{...c,content:l}};function G_(c,a,l){return h=>a(c(h),l)}function yl(c,a,l){let h=a.left,d=a.top;switch(c.axis+c.side){case-1:h+=cK(c,a,l),d-=l.height;break;case 1:h+=cK(c,a,l),d+=a.height;break;case 0:h-=l.width,d+=uK(c,a,l);break;case 2:h+=a.width,d+=uK(c,a,l)}return{xOffset:h,yOffset:d}}function cK(c,a,l){let h=0;switch(c.anchor){case Ti.START:break;case Ti.CENTER:h+=a.width/2;break;case Ti.END:h+=a.width}switch(c.content){case Ti.START:break;case Ti.CENTER:h-=l.width/2;break;case Ti.END:h-=l.width}return h}function uK(c,a,l){let h=0;switch(c.anchor){case Ti.START:break;case Ti.CENTER:h+=a.height/2;break;case Ti.END:h+=a.height}switch(c.content){case Ti.START:break;case Ti.CENTER:h-=l.height/2;break;case Ti.END:h-=l.height}return h}let H_=(()=>{class c{constructor(l,h){this.eventService=l,this.platformId=h,this._shouldRealign=new Qe,this.shouldRealign=this._shouldRealign.asObservable()}realign(){this._shouldRealign.next()}set position(l){this._position=l}get position(){return this._position}alignContent(l){if(!Ei(this.platformId))return{xOffset:0,yOffset:0};this.currentAnchorCoords=this.eventService.anchorButtonRef.nativeElement.getBoundingClientRect(),this.currentContentCoords=l.getBoundingClientRect(),this.contentOffsets=yl(this.position,this.currentAnchorCoords,this.currentContentCoords);const h=function wBe(c,a){const l=[],h_bottom=c.yOffset+a.height,h_left=c.xOffset,h_right=c.xOffset+a.width;return c.yOffset>=0||l.push(Lm.TOP),h_left>=0||l.push(Lm.LEFT),h_bottom<=(window.innerHeight||document.documentElement.clientHeight)||l.push(Lm.BOTTOM),h_right<=(window.innerWidth||document.documentElement.clientWidth)||l.push(Lm.RIGHT),l}(this.contentOffsets,this.currentContentCoords),d=h.reduce((f,m)=>f+m,0);return 1===h.length&&this.position.axis===ho.VERTICAL?this.handleVerticalAxisOneViolation(d):1===h.length&&this.position.axis===ho.HORIZONTAL?this.handleHorizontalAxisOneViolation(d):2===h.length&&this.position.axis===ho.VERTICAL?this.handleVerticalAxisTwoViolations(d):2===h.length&&this.position.axis===ho.HORIZONTAL&&this.handleHorizontalAxisTwoViolations(d),this.contentOffsets}handleVerticalAxisOneViolation(l){switch(l){case 0:case 3:this.contentOffsets=yl(xf(this.position),this.currentAnchorCoords,this.currentContentCoords);break;case 1:this.contentOffsets=yl(this.position,this.currentAnchorCoords,this.currentContentCoords),this.contentOffsets.xOffset<0&&(this.contentOffsets.xOffset=10);break;case 2:this.contentOffsets=yl(zh(this.position,!0),this.currentAnchorCoords,this.currentContentCoords)}}handleVerticalAxisTwoViolations(l){switch(l){case 5:{const h=G_(xf,zh,!0);this.contentOffsets=yl(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 4:{const h=G_(xf,zh,!1);this.contentOffsets=yl(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 3:default:break;case 2:{const h=G_(xf,zh,!0);this.contentOffsets=yl(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 1:{const h=G_(xf,zh,!1);this.contentOffsets=yl(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}}}handleHorizontalAxisOneViolation(l){switch(l){case 1:case 2:this.contentOffsets=yl(xf(this.position),this.currentAnchorCoords,this.currentContentCoords);break;case 0:this.contentOffsets=yl(zh(this.position,!0),this.currentAnchorCoords,this.currentContentCoords);break;case 3:this.contentOffsets=yl(zh(this.position),this.currentAnchorCoords,this.currentContentCoords)}}handleHorizontalAxisTwoViolations(l){switch(l){case 5:case 4:{const h=G_(xf,zh,!1);this.contentOffsets=yl(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}case 3:default:break;case 2:case 1:{const h=G_(xf,zh,!0);this.contentOffsets=yl(h(this.position),this.currentAnchorCoords,this.currentContentCoords);break}}}}return c.\u0275fac=function(l){return new(l||c)(Oe(Uh),Oe(kr))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),y1=(()=>{class c{constructor(l,h,d,f,m,g,y){this.document=l,this.container=h,this.template=d,this.renderer=f,this.smartPositionService=m,this.smartEventsService=g,this.smartOpenService=y,this.subscriptions=[],this.removeClickListenerFn=null,this.shouldRealign=!1,this.checkCollector=new st}set open(l){this.smartOpenService.open=!!l}set contentAt(l){this.smartPositionService.position=l}set outsideClickClose(l){this.smartEventsService.outsideClickClose=!!l}set scrollToClose(l){this.smartEventsService.scrollToClose=!!l}ngAfterViewInit(){this.subscriptions.push(this.smartOpenService.openChange.subscribe(l=>{l?this.addContent():this.removeContent()}),this.smartPositionService.shouldRealign.subscribe(()=>{this.shouldRealign=!0,this.view&&this.renderer.setStyle(this.view.rootNodes[0],"opacity","0")}),this.checkCollector.pipe(I_(0)).subscribe(()=>{this.alignContent(),this.shouldRealign=!1,this.view&&this.renderer.setStyle(this.view.rootNodes[0],"opacity","1")}))}ngOnDestroy(){this.removeContent(),this.subscriptions.forEach(l=>l.unsubscribe())}removeContent(){!this.view||(this.removeClickListenerFn&&(this.removeClickListenerFn(),this.removeClickListenerFn=null),this.view.rootNodes.forEach(l=>this.renderer.removeChild(this.document.body,l)),this.container.clear(),delete this.view)}addContent(){this.view=this.container.createEmbeddedView(this.template);const[l]=this.view.rootNodes;this.smartEventsService.contentRef=l,this.renderer.addClass(l,"clr-popover-content"),this.renderer.setStyle(l,"top","0px"),this.renderer.setStyle(l,"left","0px"),this.renderer.setStyle(l,"opacity","0"),this.removeClickListenerFn=this.renderer.listen(l,"click",h=>{this.smartOpenService.openEvent=h}),this.view.rootNodes.forEach(h=>{this.renderer.appendChild(this.document.body,h)}),this.shouldRealign=!0}ngAfterContentChecked(){this.smartOpenService.open&&this.view&&this.shouldRealign&&this.checkCollector.emit()}alignContent(){if(!this.view)return;const l=this.smartPositionService.alignContent(this.view.rootNodes[0]);this.renderer.setStyle(this.view.rootNodes[0],"top",`${l.yOffset}px`),this.renderer.setStyle(this.view.rootNodes[0],"left",`${l.xOffset}px`),this.smartOpenService.popoverAlignedEmit(this.view.rootNodes[0])}}return c.\u0275fac=function(l){return new(l||c)(N(Ci),N(ii),N(Xr),N(Gn),N(H_),N(Uh),N(zi))},c.\u0275dir=Ke({type:c,selectors:[["","clrPopoverContent",""]],inputs:{open:["clrPopoverContent","open"],contentAt:["clrPopoverContentAt","contentAt"],outsideClickClose:["clrPopoverContentOutsideClickToClose","outsideClickClose"],scrollToClose:["clrPopoverContentScrollToClose","scrollToClose"]}}),c})(),_1=(()=>{class c{constructor(l){this.smartOpenService=l,this.subscriptions=[],this.openCloseChange=new st,this.subscriptions.push(this.smartOpenService.openChange.subscribe(h=>{this.openCloseChange.next(h)}))}handleClick(l){this.smartOpenService.toggleWithEvent(l)}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(N(zi))},c.\u0275dir=Ke({type:c,selectors:[["","clrPopoverOpenCloseButton",""]],hostVars:2,hostBindings:function(l,h){1&l&&De("click",function(f){return h.handleClick(f)}),2&l&&ot("clr-smart-open-close",!0)},outputs:{openCloseChange:"clrPopoverOpenCloseChange"}}),c})(),v1=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[]]}),c})();var _a=(()=>(function(c){c.UP="up",c.DOWN="down",c.LEFT="left",c.RIGHT="right"}(_a||(_a={})),_a))();let b1=(()=>{class c{constructor(l){this.renderer=l,this._unlistenFuncs=[]}get current(){return this._current}reset(l){this._current=l}listenToArrowKeys(l){this._unlistenFuncs.push(this.renderer.listen(l,"keydown.arrowup",()=>!this.move(_a.UP))),this._unlistenFuncs.push(this.renderer.listen(l,"keydown.arrowdown",()=>!this.move(_a.DOWN))),this._unlistenFuncs.push(this.renderer.listen(l,"keydown.arrowleft",()=>!this.move(_a.LEFT))),this._unlistenFuncs.push(this.renderer.listen(l,"keydown.arrowright",()=>!this.move(_a.RIGHT)))}registerContainer(l,h="0"){this.renderer.setAttribute(l,"tabindex",h),this.listenToArrowKeys(l),this._unlistenFuncs.push(this.renderer.listen(l,"keydown.space",()=>!this.activateCurrent())),this._unlistenFuncs.push(this.renderer.listen(l,"keydown.enter",()=>!this.activateCurrent()))}moveTo(l){void 0!==l&&(this.current&&this.current.blur(),l.focus(),this._current=l)}move(l){let h=!1;if(this.current){const d=this.current[l];d&&(function cY(c){return!!c&&(c instanceof Tt||"function"==typeof c.lift&&"function"==typeof c.subscribe)}(d)?d:Ct(d)).subscribe(m=>{m&&(this.moveTo(m),h=!0)})}return h}activateCurrent(){return!(!this.current||!this.current.activate||(this.current.activate(),0))}detachListeners(){this._unlistenFuncs.forEach(l=>l())}}return c.\u0275fac=function(l){return new(l||c)(Oe(Gn))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();new bd,new Sd;var Fa=(()=>(function(c){c[c.BEFORE=-1]="BEFORE",c[c.AFTER=1]="AFTER"}(Fa||(Fa={})),Fa))();class ka{}ka["top-right"]={axis:ho.VERTICAL,side:Fa.BEFORE,anchor:Ti.END,content:Ti.END},ka["top-left"]={axis:ho.VERTICAL,side:Fa.BEFORE,anchor:Ti.START,content:Ti.START},ka["bottom-right"]={axis:ho.VERTICAL,side:Fa.AFTER,anchor:Ti.END,content:Ti.END},ka["bottom-left"]={axis:ho.VERTICAL,side:Fa.AFTER,anchor:Ti.START,content:Ti.START},ka["right-top"]={axis:ho.HORIZONTAL,side:Fa.AFTER,anchor:Ti.CENTER,content:Ti.END},ka["right-bottom"]={axis:ho.HORIZONTAL,side:Fa.AFTER,anchor:Ti.START,content:Ti.START},ka["left-top"]={axis:ho.HORIZONTAL,side:Fa.BEFORE,anchor:Ti.CENTER,content:Ti.END},ka["left-bottom"]={axis:ho.HORIZONTAL,side:Fa.BEFORE,anchor:Ti.START,content:Ti.START};class Rk{static linkParent(a,l,h){a.forEach(d=>d[h]=l)}static linkVertical(a,l=!0){a.forEach((h,d)=>{d>0&&(h.up=a[d-1]),d<a.length-1&&(h.down=a[d+1])}),l&&a.length>1&&(a[0].up=a[a.length-1],a[a.length-1].down=a[0])}}let _l=(()=>{class c{userDefinedWidth(l){l.classList.add("datagrid-cell-width-zero");const h=this.clientRect(l).width;return l.classList.remove("datagrid-cell-width-zero"),h}scrollBarWidth(l){return l.offsetWidth-l.clientWidth}scrollWidth(l){return l.scrollWidth||0}computedHeight(l){return parseInt(getComputedStyle(l).getPropertyValue("height"),10)}clientRect(l){const h=l.getBoundingClientRect();return{top:parseInt(h.top,10),bottom:parseInt(h.bottom,10),left:parseInt(h.left,10),right:parseInt(h.right,10),width:parseInt(h.width,10),height:parseInt(h.height,10)}}minWidth(l){return parseInt(getComputedStyle(l).getPropertyValue("min-width"),10)}focus(l){l.focus()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),HM=(()=>{class c{constructor(l,h){this.element=l,this.domAdapter=h,this.startHeight=0}get expandAnimation(){return{value:this.clrExpandTrigger,params:{startHeight:this.startHeight}}}animationDone(){this.updateStartHeight()}updateStartHeight(){this.startHeight=this.domAdapter.computedHeight(this.element.nativeElement)||0}}return c.\u0275fac=function(l){return new(l||c)(N(Xt),N(_l))},c.\u0275cmp=He({type:c,selectors:[["clr-expandable-animation"]],hostVars:1,hostBindings:function(l,h){1&l&&F2("@expandAnimation.done",function(){return h.animationDone()}),2&l&&rC("@expandAnimation",h.expandAnimation)},inputs:{clrExpandTrigger:"clrExpandTrigger"},features:[Lt([_l])],ngContentSelectors:yn,decls:1,vars:0,template:function(l,h){1&l&&(At(),ze(0))},styles:["[_nghost-%COMP%]{display:block;overflow:hidden}"],data:{animation:[ml("expandAnimation",[Ns("true <=> false",[vi({height:"{{startHeight}}px"}),Co("0.2s ease-in-out",vi({height:"*"}))])])]}}),c})(),Lk=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})();new Vt("IF_ACTIVE_ID");let jM=(()=>{class c{constructor(l,h,d){this.toggleService=l,this.template=h,this.container=d,this.openChange=new st(!1),this.subscription=this.toggleService.openChange.subscribe(f=>{this.updateView(f),this.openChange.emit(f)})}set open(l){this.toggleService.open=l}get open(){return this.toggleService.open}updateView(l){l?this.container.createEmbeddedView(this.template):this.container.clear()}ngOnDestroy(){this.subscription.unsubscribe()}}return c.\u0275fac=function(l){return new(l||c)(N(zi),N(Xr),N(ii))},c.\u0275dir=Ke({type:c,selectors:[["","clrIfOpen",""]],inputs:{open:["clrIfOpen","open"]},outputs:{openChange:"clrIfOpenChange"}}),c})(),$l=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})();class Gh{constructor(a){this.dragPosition=a.dragPosition,this.group=a.group,this.dragDataTransfer=a.dragDataTransfer,this.dropPointPosition=a.dropPointPosition}}var Ho=(()=>(function(c){c[c.DRAG_START=0]="DRAG_START",c[c.DRAG_MOVE=1]="DRAG_MOVE",c[c.DRAG_END=2]="DRAG_END",c[c.DRAG_ENTER=3]="DRAG_ENTER",c[c.DRAG_LEAVE=4]="DRAG_LEAVE",c[c.DROP=5]="DROP"}(Ho||(Ho={})),Ho))();let pK=(()=>{class c{constructor(){this.dragStart=new Qe,this.dragMove=new Qe,this.dragEnd=new Qe,this.drop=new Qe}get dragStarted(){return this.dragStart.asObservable()}get dragMoved(){return this.dragMove.asObservable()}get dragEnded(){return this.dragEnd.asObservable()}get dropped(){return this.drop.asObservable()}broadcast(l){switch(l.type){case Ho.DRAG_START:this.dragStart.next(l);break;case Ho.DRAG_MOVE:this.dragMove.next(l);break;case Ho.DRAG_END:this.dragEnd.next(l);break;case Ho.DROP:this.drop.next(l)}}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),S1=(()=>{class c{constructor(l,h,d){this.ngZone=l,this.renderer=h,this.eventBus=d,this.listeners=[],this.dragStart=new Qe,this.dragMove=new Qe,this.dragEnd=new Qe,this.hasDragStarted=!1,this.dragStartDelay=0}get dragStarted(){return this.dragStart.asObservable()}get dragMoved(){return this.dragMove.asObservable()}get dragEnded(){return this.dragEnd.asObservable()}get dragStartPosition(){return this.initialPosition}attachDragListeners(l){this.draggableEl=l,this.listeners.push(this.customDragEvent(this.draggableEl,"mousedown","mousemove","mouseup")),this.listeners.push(this.customDragEvent(this.draggableEl,"touchstart","touchmove","touchend"))}detachDragListeners(){this.listeners&&this.listeners.map(l=>l()),this.nestedListeners&&this.nestedListeners.map(l=>l()),this.checkDragStartBoundaryListener&&this.checkDragStartBoundaryListener()}getNativeEventObject(l){return Object.prototype.hasOwnProperty.call(l,"changedTouches")?l.changedTouches[0]:l}customDragEvent(l,h,d,f){return this.renderer.listen(l,h,m=>{this.initialPosition={pageX:this.getNativeEventObject(m).pageX,pageY:this.getNativeEventObject(m).pageY},this.nestedListeners=[],this.ngZone.runOutsideAngular(()=>{this.nestedListeners.push(this.renderer.listen("document","selectstart",g=>{g.preventDefault(),g.stopImmediatePropagation()})),this.checkDragStartBoundary(d),this.dragStartDelayTimeout=setTimeout(()=>{this.checkDragStartBoundaryListener&&this.checkDragStartBoundaryListener(),this.hasDragStarted=!0,this.broadcast(m,Ho.DRAG_START),this.nestedListeners.push(this.renderer.listen("document",d,g=>{g.stopImmediatePropagation(),this.hasDragStarted&&this.broadcast(g,Ho.DRAG_MOVE)}))},this.dragStartDelay)}),this.nestedListeners.push(this.renderer.listen("document",f,g=>{this.hasDragStarted&&(this.hasDragStarted=!1,this.broadcast(g,Ho.DRAG_END)),clearTimeout(this.dragStartDelayTimeout),this.nestedListeners.map(y=>y()),this.checkDragStartBoundaryListener&&this.checkDragStartBoundaryListener()}))})}checkDragStartBoundary(l){this.checkDragStartBoundaryListener=this.renderer.listen("document",l,h=>{const d=Math.abs(this.getNativeEventObject(h).pageX-this.initialPosition.pageX),f=Math.abs(this.getNativeEventObject(h).pageY-this.initialPosition.pageY);(d>1||f>1)&&(clearTimeout(this.dragStartDelayTimeout),this.checkDragStartBoundaryListener&&this.checkDragStartBoundaryListener())})}broadcast(l,h){const d=this.generateDragEvent(l,h);switch(d.type){case Ho.DRAG_START:this.dragStart.next(d);break;case Ho.DRAG_MOVE:this.dragMove.next(d);break;case Ho.DRAG_END:this.dragEnd.next(d)}d.ghostElement=this.ghostElement,d.dropPointPosition=this.dropPointPosition,this.eventBus.broadcast(d)}generateDragEvent(l,h){const d=this.getNativeEventObject(l);return{type:h,dragPosition:{pageX:d.pageX,pageY:d.pageY,moveX:d.pageX-this.initialPosition.pageX,moveY:d.pageY-this.initialPosition.pageY},group:this.group,dragDataTransfer:this.dragDataTransfer,ghostElement:this.ghostElement}}}return c.\u0275fac=function(l){return new(l||c)(Oe(Yn),Oe(Gn),Oe(pK))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),Pk=(()=>{class c{constructor(l){this.domAdapter=l}capture(l,h){this.draggableElClientRect=this.domAdapter.clientRect(l),this.snapshotDragEvent=h}discard(){delete this.draggableElClientRect,delete this.snapshotDragEvent}get hasDraggableState(){return!!this.snapshotDragEvent&&!!this.draggableElClientRect}get clientRect(){return this.draggableElClientRect}get dragEvent(){return this.snapshotDragEvent}}return c.\u0275fac=function(l){return new(l||c)(Oe(_l))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),mK=(()=>{class c{constructor(l,h,d,f,m){if(this.el=l,this.dragEventListener=h,this.draggableSnapshot=d,this.renderer=f,this.ngZone=m,this.subscriptions=[],this.leaveAnimConfig={value:0,params:{top:"0px",left:"0px"}},!this.dragEventListener||!this.draggableSnapshot)throw new Error("The clr-draggable-ghost component can only be used inside of a clrDraggable directive.");this.draggableGhostEl=this.el.nativeElement,this.renderer.addClass(this.draggableGhostEl,"draggable-ghost"),this.dragEventListener.ghostElement=this.draggableGhostEl,this.setDefaultGhostSize(this.draggableGhostEl);const g={top:this.draggableSnapshot.hasDraggableState?this.draggableSnapshot.dragEvent.dragPosition.pageY-this.draggableSnapshot.clientRect.top:0,left:this.draggableSnapshot.hasDraggableState?this.draggableSnapshot.dragEvent.dragPosition.pageX-this.draggableSnapshot.clientRect.left:0};let y=!1;this.subscriptions.push(this.dragEventListener.dragMoved.subscribe(_=>{y||(this.draggableSnapshot.hasDraggableState?this.animateToOnLeave(`${this.draggableSnapshot.clientRect.top}px`,`${this.draggableSnapshot.clientRect.left}px`):this.animateToOnLeave(`${this.dragEventListener.dragStartPosition.pageY}px`,`${this.dragEventListener.dragStartPosition.pageY}px`),y=!0);const v=this.findTopLeftPosition(_.dragPosition,g);this.setPositionStyle(this.draggableGhostEl,v.pageX,v.pageY),this.dragEventListener.dropPointPosition=this.findDropPointPosition(v)}))}setDefaultGhostSize(l){this.draggableSnapshot.hasDraggableState&&this.setSizeStyle(l,this.draggableSnapshot.clientRect.width,this.draggableSnapshot.clientRect.height)}animateToOnLeave(l,h){this.ngZone.run(()=>{this.leaveAnimConfig={value:0,params:{top:l,left:h}}})}findTopLeftPosition(l,h){return{pageX:l.pageX-h.left,pageY:l.pageY-h.top}}findDropPointPosition(l){return this.draggableSnapshot.hasDraggableState?{pageX:l.pageX+this.draggableSnapshot.clientRect.width/2,pageY:l.pageY+this.draggableSnapshot.clientRect.height/2}:l}setSizeStyle(l,h,d){this.renderer.setStyle(l,"width",`${h}px`),this.renderer.setStyle(l,"height",`${d}px`)}setPositionStyle(l,h,d){this.renderer.setStyle(l,"left",`${h}px`),this.renderer.setStyle(l,"top",`${d}px`),this.renderer.setStyle(l,"visibility","visible")}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(N(Xt),N(S1,8),N(Pk,8),N(Gn),N(Yn))},c.\u0275cmp=He({type:c,selectors:[["clr-draggable-ghost"]],hostVars:1,hostBindings:function(l,h){2&l&&rC("@leaveAnimation",h.leaveAnimConfig)},ngContentSelectors:yn,decls:1,vars:0,template:function(l,h){1&l&&(At(),ze(0))},encapsulation:2,data:{animation:[ml("leaveAnimation",[Ns(":leave",[vi({left:"*",top:"*"}),Co("0.2s ease-in-out",vi({top:"{{top}}",left:"{{left}}"}))])])]}}),c})(),gK=(()=>{class c{constructor(l,h,d){if(this.template=l,this.container=h,this.dragEventListener=d,this.subscriptions=[],!this.dragEventListener||!this.container)throw new Error("The *clrIfDragged directive can only be used inside of a clrDraggable directive.");this.subscriptions.push(this.dragEventListener.dragStarted.subscribe(()=>{this.container.createEmbeddedView(this.template)})),this.subscriptions.push(this.dragEventListener.dragEnded.subscribe(()=>{this.container.clear()}))}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(N(Xr),N(ii,12),N(S1,8))},c.\u0275dir=Ke({type:c,selectors:[["","clrIfDragged",""]]}),c})(),Ok=(()=>{class c{constructor(l,h){this.dragEventListener=l,this.renderer=h}get defaultHandleEl(){return this._defaultHandleEl}set defaultHandleEl(l){this._defaultHandleEl=l,this._customHandleEl||this.makeElementHandle(this._defaultHandleEl)}makeElementHandle(l){this._defaultHandleEl&&this._defaultHandleEl!==l&&this.renderer.removeClass(this._defaultHandleEl,"drag-handle"),this.dragEventListener.attachDragListeners(l),this.renderer.addClass(l,"drag-handle")}get customHandleEl(){return this._customHandleEl}registerCustomHandle(l){this.dragEventListener.detachDragListeners(),this._customHandleEl=l,this.makeElementHandle(this._customHandleEl)}unregisterCustomHandle(){this.dragEventListener.detachDragListeners(),this.renderer.removeClass(this._customHandleEl,"drag-handle"),delete this._customHandleEl,this._defaultHandleEl&&this.makeElementHandle(this._defaultHandleEl)}}return c.\u0275fac=function(l){return new(l||c)(Oe(S1),Oe(Gn))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),yK=(()=>{class c{constructor(l){this.renderer=l}enter(){this.renderer.addClass(document.body,"in-drag")}exit(){this.renderer.removeClass(document.body,"in-drag")}}return c.\u0275fac=function(l){return new(l||c)(Oe(Gn))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),_K=(()=>{class c{constructor(l,h,d,f,m,g,y,_){this.el=l,this.dragEventListener=h,this.dragHandleRegistrar=d,this.viewContainerRef=f,this.cfr=m,this.injector=g,this.draggableSnapshot=y,this.globalDragMode=_,this.subscriptions=[],this.dragOn=!1,this.dragStartEmitter=new st,this.dragMoveEmitter=new st,this.dragEndEmitter=new st,this.draggableEl=this.el.nativeElement,this.componentFactory=this.cfr.resolveComponentFactory(mK)}set dataTransfer(l){this.dragEventListener.dragDataTransfer=l}set group(l){this.dragEventListener.group=l}set dragStartDelay(l){"number"==typeof l?this.dragEventListener.dragStartDelay=l:"string"==typeof l&&(this.dragEventListener.dragStartDelay=parseInt(l,10)||0)}createDefaultGhost(l){this.draggableSnapshot.capture(this.draggableEl,l),this.viewContainerRef.createComponent(this.componentFactory,0,this.injector,[[this.draggableEl.cloneNode(!0)]])}destroyDefaultGhost(){this.viewContainerRef.clear(),this.draggableSnapshot.discard()}ngAfterContentInit(){this.dragHandleRegistrar.defaultHandleEl=this.draggableEl,this.subscriptions.push(this.dragEventListener.dragStarted.subscribe(l=>{this.globalDragMode.enter(),this.dragOn=!0,this.customGhost||this.createDefaultGhost(l),this.dragStartEmitter.emit(new Gh(l))})),this.subscriptions.push(this.dragEventListener.dragMoved.subscribe(l=>{this.dragMoveEmitter.emit(new Gh(l))})),this.subscriptions.push(this.dragEventListener.dragEnded.subscribe(l=>{this.globalDragMode.exit(),this.dragOn=!1,this.customGhost||this.destroyDefaultGhost(),this.dragEndEmitter.emit(new Gh(l))}))}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe()),this.dragEventListener.detachDragListeners()}}return c.\u0275fac=function(l){return new(l||c)(N(Xt),N(S1),N(Ok),N(ii),N(wd),N(cr),N(Pk),N(yK))},c.\u0275dir=Ke({type:c,selectors:[["","clrDraggable",""]],contentQueries:function(l,h,d){if(1&l&&Cn(d,gK,5),2&l){let f;vt(f=bt())&&(h.customGhost=f.first)}},hostVars:4,hostBindings:function(l,h){2&l&&ot("draggable",!0)("being-dragged",h.dragOn)},inputs:{dataTransfer:["clrDraggable","dataTransfer"],group:["clrGroup","group"],dragStartDelay:["clrDragStartDelay","dragStartDelay"]},outputs:{dragStartEmitter:"clrDragStart",dragMoveEmitter:"clrDragMove",dragEndEmitter:"clrDragEnd"},features:[Lt([S1,Ok,Pk,yK,_l])]}),c})(),vK=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})();const ABe={provide:new Vt("FOCUS_ON_VIEW_INIT"),useValue:!0};let Om=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({providers:[ABe],imports:[[Un]]}),c})(),IBe=(()=>{class c{constructor(){this._previousFocusTraps=[]}get current(){return this._current}set current(l){this._previousFocusTraps.push(this._current),this._current=l}get nbFocusTrappers(){return this._previousFocusTraps.length}activatePreviousTrapper(){this._current=this._previousFocusTraps.pop()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Mf=(()=>{class c{constructor(l,h,d,f,m){this.el=l,this.injector=h,this.focusTrapsTracker=d,this.renderer=f,this.platformId=m,this.localFocusEscaped=!1,this._config={strict:!0},this.document=this.injector.get(Ci),this.focusTrapsTracker.current=this}set config(l){this._config=Object.assign(this._config,""===l?{}:l)}onFocusIn(l){const h=this.el.nativeElement;this.focusTrapsTracker.current!==this||!Ei(this.platformId)||this.localFocusEscaped||h.contains(l.target)||(l.target===this.topReboundEl&&h.contains(l.relatedTarget)?(this.focusLastFocusable(),this.focusTrapElIfOutside()):l.target===this.bottomReboundEl&&h.contains(l.relatedTarget)?(this.focusFirstFocusable(),this.focusTrapElIfOutside()):this._config.strict?this.el.nativeElement.focus():this.localFocusEscaped=!0)}createFocusableOffScreenEl(){const l=this.document.createElement("span");return this.renderer.setAttribute(l,"tabindex","0"),this.renderer.addClass(l,"offscreen-focus-rebounder"),l}addReboundEls(){if(Ei(this.platformId)){this.topReboundEl=this.createFocusableOffScreenEl(),this.bottomReboundEl=this.createFocusableOffScreenEl();const l=this.el.nativeElement;this.renderer.insertBefore(l.parentElement,this.topReboundEl,l),l.nextSibling?this.renderer.insertBefore(l.parentNode,this.bottomReboundEl,l.nextSibling):this.renderer.appendChild(l.parentNode,this.bottomReboundEl)}}removeReboundEls(){Ei(this.platformId)&&this.topReboundEl&&this.bottomReboundEl&&(this.parentElement.removeChild(this.topReboundEl),this.parentElement.removeChild(this.bottomReboundEl),delete this.topReboundEl,delete this.bottomReboundEl)}setPreviousFocus(){this.previousActiveElement&&this.previousActiveElement.focus&&this.previousActiveElement.focus()}ngOnInit(){Ei(this.platformId)&&(this.renderer.setAttribute(this.el.nativeElement,"tabindex","-1"),this.el.nativeElement.focus())}ngAfterViewInit(){Ei(this.platformId)&&(this.previousActiveElement=this.document.activeElement,this.parentElement=this.el.nativeElement.parentElement),this.addReboundEls()}get potentiallyFocusableEls(){return[...this.el.nativeElement.querySelectorAll('[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), [contenteditable="true"]:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"]) ')]}focusFirstFocusable(){for(let l=0;l<this.potentiallyFocusableEls.length&&(this.firstFocusableEl=this.focusElement(this.potentiallyFocusableEls[l]),!this.firstFocusableEl);l++);}focusLastFocusable(){for(let l=this.potentiallyFocusableEls.length-1;l>=0&&(this.lastFocusableEl=this.focusElement(this.potentiallyFocusableEls[l]),!this.lastFocusableEl);l--);}focusTrapElIfOutside(){this.el.nativeElement.contains(document.activeElement)||this.el.nativeElement.focus()}focusElement(l){return l&&l.focus&&(l.focus(),document.activeElement===l)?l:null}ngOnDestroy(){this.removeReboundEls(),this.setPreviousFocus(),this.focusTrapsTracker.activatePreviousTrapper()}}return c.\u0275fac=function(l){return new(l||c)(N(Xt),N(cr),N(IBe),N(Gn),N(kr))},c.\u0275dir=Ke({type:c,selectors:[["","clrFocusTrap",""]],hostBindings:function(l,h){1&l&&De("focusin",function(f){return h.onFocusIn(f)},0,F0)},inputs:{config:["clrFocusTrap","config"]}}),c})(),WM=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})(),PBe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})(),NBe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi,v1]]}),c})(),kBe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})(),VBe=(()=>{class c{constructor(){Pi.addIcons(tY)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[kBe,NBe]}),c})(),BBe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ng-component"]],decls:0,vars:0,template:function(l,h){},encapsulation:2}),c})(),XM=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({}),c})(),UBe=0,vl=(()=>{class c{constructor(){this._id="clr-form-control-"+ ++UBe,this._idChange=new Ui(this._id)}get id(){return this._id}set id(l){this._id=l,this._idChange.next(l)}get idChange(){return this._idChange.asObservable()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),zBe=0,W_=(()=>{class c{constructor(){this._id="clr-form-container-"+ ++zBe,this._idChange=new Ui(this._id)}get id(){return this._id}set id(l){this._id=l,this._idChange.next(l)}get idChange(){return this._idChange.asObservable()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();let Fk=(()=>{class c{constructor(l,h){this.controlIdService=l,this.containerIdService=h,this.controlIdSuffix="abstract"}get id(){return this.containerIdService?`${this.containerIdService.id}-${this.controlIdSuffix}`:this.controlIdService?`${this.controlIdService.id}-${this.controlIdSuffix}`:null}}return c.\u0275fac=function(l){return new(l||c)(N(vl,8),N(W_,8))},c.\u0275dir=Ke({type:c}),c})(),GBe=(()=>{class c extends Fk{constructor(l,h){super(l,h),this.controlIdService=l,this.containerIdService=h,this.controlIdSuffix="error"}}return c.\u0275fac=function(l){return new(l||c)(N(vl,8),N(W_,8))},c.\u0275cmp=He({type:c,selectors:[["clr-control-error"]],hostVars:3,hostBindings:function(l,h){2&l&&(Ue("id",h.id),ot("clr-subtext",!0))},features:[rn],ngContentSelectors:yn,decls:1,vars:0,template:function(l,h){1&l&&(At(),ze(0))},encapsulation:2}),c})(),qM=(()=>{class c extends Fk{constructor(l,h){super(l,h),this.controlIdService=l,this.containerIdService=h,this.controlIdSuffix="helper"}}return c.\u0275fac=function(l){return new(l||c)(N(vl,8),N(W_,8))},c.\u0275cmp=He({type:c,selectors:[["clr-control-helper"]],hostVars:3,hostBindings:function(l,h){2&l&&(Ue("id",h.id),ot("clr-subtext",!0))},features:[rn],ngContentSelectors:yn,decls:1,vars:0,template:function(l,h){1&l&&(At(),ze(0))},encapsulation:2}),c})(),bl=(()=>{class c{constructor(){this._controlChanges=new Qe,this._helpers=new Qe}get controlChanges(){return this._controlChanges.asObservable()}setControl(l){this._controlChanges.next(l)}get helpersChange(){return this._helpers.asObservable()}setHelpers(l){this._helpers.next(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();var jo=(()=>(function(c){c.NONE="NONE",c.VALID="VALID",c.INVALID="INVALID"}(jo||(jo={})),jo))();let Fc=(()=>{class c{constructor(l){this.ngControlService=l,this.subscriptions=[],this._statusChanges=new Ui(jo.NONE),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(h=>{h&&(this.control=h,this.subscriptions.push(this.control.statusChanges.subscribe(()=>{this.triggerStatusChange()})))}))}get statusChanges(){return this._statusChanges.asObservable()}triggerStatusChange(){if(this.control){const l=jo[this.control.status];this._statusChanges.next(["VALID","INVALID"].includes(l)?l:jo.NONE)}}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(Oe(bl))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();var Hh=(()=>(function(c){c.VERTICAL="vertical",c.HORIZONTAL="horizontal",c.COMPACT="compact"}(Hh||(Hh={})),Hh))();let Lu=(()=>{class c{constructor(){this.minLabelSize=1,this.maxLabelSize=12,this.layout=Hh.HORIZONTAL,this.layoutValues=Object.keys(Hh).map(l=>Hh[l]),this._labelSize=2}set labelSize(l){this.labelSizeIsValid(l)&&(this._labelSize=l)}get labelSize(){return this._labelSize}isVertical(){return this.layout===Hh.VERTICAL}isHorizontal(){return this.layout===Hh.HORIZONTAL}isCompact(){return this.layout===Hh.COMPACT}get layoutClass(){return`clr-form-${this.layout}`}isValid(l){return this.layoutValues.indexOf(l)>-1}labelSizeIsValid(l){return Number.isInteger(l)&&l>=this.minLabelSize&&l<=this.maxLabelSize}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),Qr=(()=>{class c{constructor(l,h,d,f,m){this.controlIdService=l,this.layoutService=h,this.ngControlService=d,this.renderer=f,this.el=m,this.subscriptions=[],this.enableGrid=!0}get labelText(){return this.el.nativeElement&&this.el.nativeElement.textContent}ngOnInit(){(this.controlIdService||this.ngControlService)&&this.renderer.addClass(this.el.nativeElement,"clr-control-label"),this.enableGrid&&this.layoutService&&!this.layoutService.isVertical()&&this.el.nativeElement&&this.el.nativeElement.className.indexOf("clr-col")<0&&(this.renderer.addClass(this.el.nativeElement,"clr-col-12"),this.renderer.addClass(this.el.nativeElement,`clr-col-md-${this.layoutService.labelSize}`)),this.controlIdService&&!this.forAttr&&this.subscriptions.push(this.controlIdService.idChange.subscribe(l=>this.forAttr=l))}disableGrid(){this.enableGrid=!1}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(N(vl,8),N(Lu,8),N(bl,8),N(Gn),N(Xt))},c.\u0275dir=Ke({type:c,selectors:[["label"]],hostVars:1,hostBindings:function(l,h){2&l&&Ue("for",h.forAttr)},inputs:{forAttr:["for","forAttr"]}}),c})(),HBe=(()=>{class c extends Fk{constructor(l,h){super(l,h),this.controlIdService=l,this.containerIdService=h,this.controlIdSuffix="success"}}return c.\u0275fac=function(l){return new(l||c)(N(vl,8),N(W_,8))},c.\u0275cmp=He({type:c,selectors:[["clr-control-success"]],hostVars:3,hostBindings:function(l,h){2&l&&(Ue("id",h.id),ot("clr-subtext",!0))},features:[rn],ngContentSelectors:yn,decls:1,vars:0,template:function(l,h){1&l&&(At(),ze(0))},encapsulation:2}),c})(),kc=(()=>{class c{constructor(l){this.layoutService=l,this.className=""}controlClass(l=jo.NONE,h=!1,d=""){const f=[this.className,d];switch(l){case jo.VALID:f.push("clr-success");break;case jo.INVALID:f.push("clr-error")}return h&&this.layoutService&&-1===this.className.indexOf("clr-col")&&f.push(`clr-col-md-${this.layoutService.maxLabelSize-this.layoutService.labelSize} clr-col-12`),f.join(" ").trim()}initControlClass(l,h){h&&h.className&&(this.className=h.className,h.className.split(" ").forEach(f=>{f.startsWith("clr-col")&&l.removeClass(h,f)}))}}return c.\u0275fac=function(l){return new(l||c)(Oe(Lu,8))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),T1=(()=>{class c{constructor(l,h,d,f){this.ifControlStateService=l,this.layoutService=h,this.controlClassService=d,this.ngControlService=f,this.subscriptions=[],this._dynamic=!1,this.subscriptions.push(this.ifControlStateService.statusChanges.subscribe(m=>{this.state=m,this.updateHelpers()})),this.subscriptions.push(this.ngControlService.controlChanges.subscribe(m=>{this.control=m}))}get showHelper(){return!!this.controlHelperComponent&&(!!this.controlHelperComponent&&(!this.touched||this.state===jo.NONE)||!this.controlSuccessComponent&&this.state===jo.VALID||!this.controlErrorComponent&&this.state===jo.INVALID)}get showValid(){return this.touched&&this.state===jo.VALID&&!!this.controlSuccessComponent}get showInvalid(){return this.touched&&this.state===jo.INVALID&&!!this.controlErrorComponent}ngAfterContentInit(){this.updateHelpers()}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}controlClass(){return this.controlClassService.controlClass(!this.controlSuccessComponent&&this.state===jo.VALID||!this.touched?jo.NONE:this.state,this.addGrid())}addGrid(){return this.layoutService&&!this.layoutService.isVertical()}updateHelpers(){this.ngControlService&&this.ngControlService.setHelpers({show:this.showInvalid||this.showHelper||this.showValid,showInvalid:this.showInvalid,showHelper:this.showHelper,showValid:this.showValid})}get touched(){return this.control?.touched}}return c.\u0275fac=function(l){return new(l||c)(N(Fc),N(Lu,8),N(kc),N(bl))},c.\u0275dir=Ke({type:c,contentQueries:function(l,h,d){if(1&l&&(Cn(d,Qr,5),Cn(d,HBe,5),Cn(d,GBe,5),Cn(d,qM,5)),2&l){let f;vt(f=bt())&&(h.label=f.first),vt(f=bt())&&(h.controlSuccessComponent=f.first),vt(f=bt())&&(h.controlErrorComponent=f.first),vt(f=bt())&&(h.controlHelperComponent=f.first)}}}),c})();class $M{constructor(a,l,h=0){if(this.injector=l.injector,!this.injector.get(a,null)){const d=this.injector.get(wd),f=this.injector.get(Xt);l.createComponent(d.resolveComponentFactory(BBe));const m=d.resolveComponentFactory(a),g=[];g[h]=[f.nativeElement];const y=l.createComponent(m,void 0,void 0,g);l.remove(0),y.instance._dynamic=!0,this.injector=y.injector}}get(a,l){return this.injector.get(a,l)}}let kk=(()=>{class c{constructor(){this._touched=new Qe}get touchedChange(){return this._touched.asObservable()}markAsTouched(){this._touched.next()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),q_=(()=>{class c{constructor(l,h,d,f,m,g){this.vcr=l,this.wrapperType=h,this.ngControl=f,this.subscriptions=[],this.index=0,this.renderer=m,this.el=g;try{this.ngControlService=d.get(bl),this.ifControlStateService=d.get(Fc),this.controlClassService=d.get(kc),this.markControlService=d.get(kk)}catch{}this.controlClassService&&this.controlClassService.initControlClass(m,g.nativeElement),this.markControlService&&this.subscriptions.push(this.markControlService.touchedChange.subscribe(()=>{this.markAsTouched()})),this.ngControlService&&this.subscriptions.push(this.ngControlService.helpersChange.subscribe(y=>{this.setAriaDescribedBy(y)}))}get id(){return this._id}set id(l){this._id=l,this.controlIdService&&(this.controlIdService.id=l)}triggerValidation(){this.ifControlStateService&&this.ifControlStateService.triggerStatusChange()}markAsTouched(){this.ngControl.control.markAsTouched(),this.ngControl.control.updateValueAndValidity()}getProviderFromContainer(l,h){try{return this._containerInjector.get(l,h)}catch{return h}}ngOnInit(){this._containerInjector=new $M(this.wrapperType,this.vcr,this.index),this.controlIdService=this._containerInjector.get(vl);try{this.containerIdService=this._containerInjector.get(W_)}catch{}this._id?this.controlIdService.id=this._id:this._id=this.controlIdService.id,this.ngControlService&&this.ngControlService.setControl(this.ngControl)}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}setAriaDescribedBy(l){if(l.show){const h=this.getAriaDescribedById(l);if(null!==h)return void this.renderer.setAttribute(this.el.nativeElement,"aria-describedby",h)}this.renderer.removeAttribute(this.el.nativeElement,"aria-describedby")}getAriaDescribedById(l){let h="helper";return l.showInvalid?h="error":l.showValid&&(h="success"),this.containerIdService?this.containerIdService.id.concat("-",h):this.controlIdService?this.controlIdService.id.concat("-",h):null}}return c.\u0275fac=function(l){return new(l||c)(N(ii),N(Iw),N(cr),N(ma),N(Gn),N(Xt))},c.\u0275dir=Ke({type:c,hostVars:1,hostBindings:function(l,h){1&l&&De("blur",function(){return h.triggerValidation()}),2&l&&iu("id",h.id)},inputs:{id:"id"}}),c})(),Vk=(()=>{class c{constructor(l,h){this.layoutService=l,this.markControlService=h}set labelSize(l){const h=parseInt(l,10)||2;this.layoutService.labelSize=h}markAsTouched(){this.markControlService.markAsTouched()}onFormSubmit(){this.markAsTouched()}}return c.\u0275fac=function(l){return new(l||c)(N(Lu),N(kk))},c.\u0275dir=Ke({type:c,selectors:[["","clrForm",""]],contentQueries:function(l,h,d){if(1&l&&Cn(d,Qr,5),2&l){let f;vt(f=bt())&&(h.labels=f)}},hostVars:6,hostBindings:function(l,h){1&l&&De("submit",function(){return h.onFormSubmit()}),2&l&&ot("clr-form",!0)("clr-form-horizontal",h.layoutService.isHorizontal())("clr-form-compact",h.layoutService.isCompact())},inputs:{labelSize:["clrLabelSize","labelSize"]},features:[Lt([Lu,kk])]}),c})(),TK=(()=>{class c{constructor(l){this.layoutService=l}ngOnInit(){this.layout&&this.layoutService.isValid(this.layout)&&(this.layoutService.layout=this.layout)}}return c.\u0275fac=function(l){return new(l||c)(N(Lu))},c.\u0275dir=Ke({type:c,selectors:[["","clrForm","","clrLayout",""]],inputs:{layout:["clrLayout","layout"]}}),c})(),fo=(()=>{class c{constructor(){Pi.addIcons(fl,pl)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi]]}),c})();const Bk=new Vt("IS_TOGGLE"),qBe={provide:Bk,useFactory:function XBe(){return new Ui(!1)}};let w1=(()=>{class c{constructor(l){this._dynamic=!1,this.toggle=!1,this.subscriptions=[],this.subscriptions.push(l.subscribe(h=>{this.toggle=h}))}ngOnInit(){this.label&&this.label.disableGrid()}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(N(Bk))},c.\u0275cmp=He({type:c,selectors:[["clr-checkbox-wrapper"],["clr-toggle-wrapper"]],contentQueries:function(l,h,d){if(1&l&&Cn(d,Qr,7),2&l){let f;vt(f=bt())&&(h.label=f.first)}},hostVars:4,hostBindings:function(l,h){2&l&&ot("clr-checkbox-wrapper",!h.toggle)("clr-toggle-wrapper",h.toggle)},features:[Lt([vl,qBe])],ngContentSelectors:HFe,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(l,h){1&l&&(At(GFe),ze(0),ze(1,1),ce(2,zFe,1,0,"label",0)),2&l&&(V(2),z("ngIf",!h.label))},dependencies:[bn,Qr],encapsulation:2}),c})(),C1=(()=>{class c extends q_{constructor(l,h,d,f,m,g){super(l,w1,h,d,f,m),this.toggle=g}ngOnInit(){super.ngOnInit();const l=this.getProviderFromContainer(Bk,null);l&&null!==this.toggle&&l.next(!0)}}return c.\u0275fac=function(l){return new(l||c)(N(ii),N(cr),N(ma,10),N(Gn),N(Xt),Lg("clrToggle"))},c.\u0275dir=Ke({type:c,selectors:[["","clrCheckbox",""],["","clrToggle",""]],features:[rn]}),c})(),$Be=(()=>{class c extends T1{constructor(l,h,d,f){super(f,l,h,d),this.layoutService=l,this.controlClassService=h,this.ngControlService=d,this.ifControlStateService=f,this.inline=!1}set clrInline(l){this.inline="string"==typeof l?"false"!==l:!!l}get clrInline(){return this.inline}ngAfterContentInit(){this.setAriaRoles()}setAriaRoles(){this.role=this.checkboxes.length?"group":null}}return c.\u0275fac=function(l){return new(l||c)(N(Lu,8),N(kc),N(bl),N(Fc))},c.\u0275cmp=He({type:c,selectors:[["clr-checkbox-container"],["clr-toggle-container"]],contentQueries:function(l,h,d){if(1&l&&Cn(d,C1,5),2&l){let f;vt(f=bt())&&(h.checkboxes=f)}},hostVars:7,hostBindings:function(l,h){2&l&&(Ue("role",h.role),ot("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid()))},inputs:{clrInline:"clrInline"},features:[Lt([Fc,bl,kc,W_]),rn],ngContentSelectors:KFe,decls:10,vars:9,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-subtext-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","status","danger","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","status","danger","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(l,h){1&l&&(At(ZFe),ze(0),ce(1,jFe,1,0,"label",0),U(2,"div",1),ze(3,1),U(4,"div",2),ce(5,WFe,1,0,"ng-content",0),ce(6,XFe,1,0,"cds-icon",3),ce(7,qFe,1,0,"cds-icon",4),ce(8,$Fe,1,0,"ng-content",0),ce(9,YFe,1,0,"ng-content",0),H()()),2&l&&(V(1),z("ngIf",!h.label&&h.addGrid()),V(1),ot("clr-control-inline",h.clrInline),z("ngClass",h.controlClass()),V(3),z("ngIf",h.showHelper),V(1),z("ngIf",h.showInvalid),V(1),z("ngIf",h.showValid),V(1),z("ngIf",h.showInvalid),V(1),z("ngIf",h.showValid))},dependencies:[bn,Qr,ro,Xi],encapsulation:2}),c})(),YBe=(()=>{class c{constructor(){Pi.addIcons(fl,pl)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi,fo,XM],fo]}),c})();function Yl(c){return null!==c&&("string"==typeof c?c.length>=0:"boolean"==typeof c&&c)}let x1=(()=>{class c{get spinnerClass(){return!0}get inlineClass(){return this._inline}set clrInline(l){this._inline=Yl(l)}get inverseClass(){return this._inverse}set clrInverse(l){this._inverse=Yl(l)}get smallClass(){return this._small}set clrSmall(l){this._small=Yl(l)}get mediumClass(){return!this._small&&this._medium}set clrMedium(l){this._medium=Yl(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["clr-spinner"]],hostVars:11,hostBindings:function(l,h){2&l&&(Ue("aria-busy",!0),ot("spinner",h.spinnerClass)("spinner-inline",h.inlineClass)("spinner-inverse",h.inverseClass)("spinner-sm",h.smallClass)("spinner-md",h.mediumClass))},inputs:{clrInline:"clrInline",clrInverse:"clrInverse",clrSmall:"clrSmall",clrMedium:"clrMedium"},ngContentSelectors:yn,decls:1,vars:0,template:function(l,h){1&l&&(At(),ze(0))},encapsulation:2}),c})(),E1=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})(),Uk=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})();const Y_=new Vt("POPOVER_HOST_ANCHOR");class YM{}function CK(c){return[c,{provide:YM,useExisting:c}]}class JBe extends class KBe{containsItem(a){return this.model===a}select(a){this.model=a}unselect(a){this.containsItem(a)&&(this.model=null)}isEmpty(){return!this.model}pop(){const a=this.model;return this.model=null,a}toString(a){return this.model?a&&this.model[a]?this.model[a]:this.model.toString():""}}{constructor(){super(...arguments),this._focusChanged=new Ui(null)}get focusChanged(){return this._focusChanged.asObservable()}select(a){this.model!==a&&(this.model=a,this._focusChanged.next(a))}}let QBe=(()=>{class c{constructor(){this.loading=!1,this._currentInput="",this._inputChanged=new Ui(""),this.inputChanged=this._inputChanged.asObservable(),this._selectionChanged=new BF(1)}get currentInput(){return this._currentInput}set currentInput(l){""===l&&!this.multiselectable&&this.setSelectionValue(null),this._currentInput=l,this._inputChanged.next(l)}get selectionChanged(){return this._selectionChanged.asObservable()}select(l){null==l||this.selectionModel.containsItem(l)||(this.selectionModel.select(l),this._selectionChanged.next(this.selectionModel))}toggle(l){null!=l&&(this.selectionModel.containsItem(l)?this.selectionModel.unselect(l):this.selectionModel.select(l),this._selectionChanged.next(this.selectionModel))}unselect(l){null==l||!this.selectionModel.containsItem(l)||(this.selectionModel.unselect(l),this._selectionChanged.next(this.selectionModel))}get multiselectable(){return this.selectionModel instanceof class ZBe{containsItem(a){return!!this.model&&this.model.includes(a)}select(a){this.addItem(a)}unselect(a){this.removeItem(a)}isEmpty(){return!(this.model&&this.model.length>0)}pop(){let a;return this.model&&this.model.length>0&&(a=this.model[this.model.length-1],this.removeItem(a)),a}toString(a,l=-1){let h="";return this.model&&(l>-1?this.model[l]&&(h+=a&&this.model[l][a]?this.model[l][a]:this.model[l].toString()):this.model.forEach(d=>{h+=a&&d[a]?d[a]:d.toString(),h+=" "})),h.trim()}addItem(a){this.containsItem(a)||(this.model=this.model||[],this.model.push(a))}removeItem(a){if(null==this.model)return;const l=this.model.indexOf(a);l>-1&&this.model.splice(l,1),0===this.model.length&&(this.model=null)}}}setSelectionValue(l){!this.selectionModel||this.selectionModel.model===l||!this.selectionModel.model&&!l||(this.selectionModel.model=l,this._selectionChanged.next(this.selectionModel))}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();CK((()=>{class c{constructor(l,h,d,f){this.toggleService=h,this.selectionService=d,this.platformId=f,this.pseudoFocus=new JBe,this.optionData=[],this.handleFocusSubscription(),this.renderer=l.createRenderer(null,null)}handleFocusSubscription(){this.toggleService.openChange.subscribe(l=>{l||(this.pseudoFocus.model=null)})}get trigger(){return this._trigger}set trigger(l){this._trigger=l,this.addFocusOnBlurListener(l)}get listbox(){return this._listbox}set listbox(l){this._listbox=l,this.addFocusOnBlurListener(l)}get textInput(){return this._textInput}set textInput(l){this._textInput=l,this.renderer.listen(l,"keydown",h=>!this.handleTextInput(h)),this.addFocusOnBlurListener(l)}moveFocusTo(l){let h=this.optionData.findIndex(d=>d.equals(this.pseudoFocus.model));l===_a.UP?-1===h||0===h?h=this.optionData.length-1:h--:l===_a.DOWN&&(-1===h||h===this.optionData.length-1?h=0:h++),this.pseudoFocus.select(this.optionData[h]),this.scrollIntoSelectedModel()}openAndMoveTo(l){this.toggleService.open?this.moveFocusTo(l):(this.toggleService.openChange.pipe(dh(1)).subscribe(h=>{h&&this.moveFocusTo(l)}),this.toggleService.open=!0)}handleTextInput(l){let h=!1;const d=Nc(l.key);if(l)switch(d){case cn.Enter:this.toggleService.open&&this.pseudoFocus.model&&(this.selectionService.multiselectable?this.selectionService.toggle(this.pseudoFocus.model.value):this.selectionService.select(this.pseudoFocus.model.value),h=!0);break;case cn.Space:this.toggleService.open||(this.toggleService.open=!0,h=!0);break;case cn.ArrowUp:this.preventViewportScrolling(l),this.openAndMoveTo(_a.UP),h=!0;break;case cn.ArrowDown:this.preventViewportScrolling(l),this.openAndMoveTo(_a.DOWN),h=!0;break;default:l.key!==cn.Tab&&(!this.selectionService.multiselectable||l.key!==cn.Backspace)&&l.key!==cn.Escape&&!this.toggleService.open&&(this.toggleService.open=!0)}return h}scrollIntoSelectedModel(l="smooth"){this.pseudoFocus.model&&this.pseudoFocus.model.el&&this.pseudoFocus.model.el.scrollIntoView({behavior:l,block:"center",inline:"nearest"})}preventViewportScrolling(l){l.preventDefault(),l.stopImmediatePropagation()}focusInput(){this.textInput&&Ei(this.platformId)&&this.textInput.focus()}addFocusOnBlurListener(l){Ei(this.platformId)&&this.renderer.listen(l,"blur",h=>{this.focusOutOfComponent(h)&&(this.toggleService.open=!1,this.componentCdRef&&this.componentCdRef.detectChanges())})}focusOutOfComponent(l){const h=l.relatedTarget||document.activeElement;return!(this.textInput.contains(h)||this.trigger.contains(h)||this.listbox.contains(h))}focusFirstActive(){if(this.optionData.length>0)if(this.selectionService.selectionModel.isEmpty())this.pseudoFocus.select(this.optionData[0]);else{let l;l=this.selectionService.multiselectable?this.selectionService.selectionModel.model[0]:this.selectionService.selectionModel.model;const h=this.optionData.find(d=>d.value===l);this.pseudoFocus.select(h||this.optionData[0]),this.scrollIntoSelectedModel("auto")}}addOptionValues(l){this.optionData=l}}return c.\u0275fac=function(l){return new(l||c)(Oe(Hg),Oe(zi),Oe(QBe),Oe(kr))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})());let e5e=(()=>{class c{constructor(){Pi.addIcons(fl,pl,D_,qS)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,Au,qi,Uk,fo,$l,v1,E1],fo,$l]}),c})(),M1=(()=>{class c extends T1{}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Fr(c)))(h||c)}}(),c.\u0275cmp=He({type:c,selectors:[["clr-input-container"]],hostVars:6,hostBindings:function(l,h){2&l&&ot("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid())},features:[Lt([Fc,bl,vl,kc]),rn],ngContentSelectors:uke,decls:10,vars:7,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-input-wrapper"],["class","clr-validate-icon","shape","exclamation-circle","status","danger","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","status","danger","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(l,h){1&l&&(At(cke),ze(0),ce(1,ike,1,0,"label",0),U(2,"div",1)(3,"div",2),ze(4,1),ce(5,rke,1,0,"cds-icon",3),ce(6,ske,1,0,"cds-icon",4),H(),ce(7,oke,1,0,"ng-content",0),ce(8,ake,1,0,"ng-content",0),ce(9,lke,1,0,"ng-content",0),H()),2&l&&(V(1),z("ngIf",!h.label&&h.addGrid()),V(1),z("ngClass",h.controlClass()),V(3),z("ngIf",h.showInvalid),V(1),z("ngIf",h.showValid),V(1),z("ngIf",h.showHelper),V(1),z("ngIf",h.showInvalid),V(1),z("ngIf",h.showValid))},dependencies:[bn,Qr,ro,Xi],encapsulation:2}),c})(),ZM=(()=>{class c extends q_{constructor(l,h,d,f,m){super(l,M1,h,d,f,m),this.index=1}}return c.\u0275fac=function(l){return new(l||c)(N(ii),N(cr),N(ma,10),N(Gn),N(Xt))},c.\u0275dir=Ke({type:c,selectors:[["","clrInput",""]],hostVars:2,hostBindings:function(l,h){2&l&&ot("clr-input",!0)},features:[rn]}),c})(),xK=(()=>{class c{constructor(){Pi.addIcons(fl,pl)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,Au,qi,fo],fo]}),c})(),t5e=(()=>{class c{constructor(){Pi.addIcons(fl,pl)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,xK,qi]]}),c})(),y5e=(()=>{class c{constructor(){Pi.addIcons(fl,pl,D_,XLe,qLe)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,XM,$l,v1,qi,WM,fo]]}),c})();new Vt(void 0);let b5e=(()=>{class c{constructor(){Pi.addIcons($Le,YLe,fl,pl)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,Au,qi,fo],fo]}),c})(),S5e=(()=>{class c{constructor(){this._dynamic=!1}ngOnInit(){this.label&&this.label.disableGrid()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["clr-radio-wrapper"]],contentQueries:function(l,h,d){if(1&l&&Cn(d,Qr,7),2&l){let f;vt(f=bt())&&(h.label=f.first)}},hostVars:2,hostBindings:function(l,h){2&l&&ot("clr-radio-wrapper",!0)},features:[Lt([vl])],ngContentSelectors:Lke,decls:3,vars:1,consts:[[4,"ngIf"]],template:function(l,h){1&l&&(At(Rke),ze(0),ze(1,1),ce(2,Ike,1,0,"label",0)),2&l&&(V(2),z("ngIf",!h.label))},dependencies:[bn,Qr],encapsulation:2}),c})(),T5e=(()=>{class c extends q_{constructor(l,h,d,f,m){super(l,S5e,h,d,f,m)}}return c.\u0275fac=function(l){return new(l||c)(N(ii),N(cr),N(ma,10),N(Gn),N(Xt))},c.\u0275dir=Ke({type:c,selectors:[["","clrRadio",""]],features:[rn]}),c})(),w5e=(()=>{class c{constructor(){Pi.addIcons(fl,pl)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,fo,XM,qi],fo]}),c})(),NK=(()=>{class c extends T1{constructor(l,h,d,f,m,g){super(g,l,h,d),this.renderer=f,this.idService=m,this.ifControlStateService=g,this._hasProgress=!1}set hasProgress(l){const h=!!l;h!==this._hasProgress&&(this._hasProgress=h)}get hasProgress(){return this._hasProgress}getRangeProgressFillWidth(){const l=this.renderer.selectRootElement("[clrRange]#"+this.idService.id),d=+l.min;let f=+l.max;return 0===d&&0===f&&(f=100),100*((this.control&&void 0!==this.control.value?this.control.value:(d+f)/2)-d)/(f-d)*l.offsetWidth/100+"px"}}return c.\u0275fac=function(l){return new(l||c)(N(Lu,8),N(kc),N(bl),N(Gn),N(vl),N(Fc))},c.\u0275cmp=He({type:c,selectors:[["clr-range-container"]],hostVars:6,hostBindings:function(l,h){2&l&&ot("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid())},inputs:{hasProgress:["clrRangeHasProgress","hasProgress"]},features:[Lt([Fc,bl,vl,kc]),rn],ngContentSelectors:zke,decls:11,vars:10,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[1,"clr-range-wrapper"],["class","fill-input",3,"width",4,"ngIf"],["class","clr-validate-icon","shape","exclamation-circle","status","danger","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],[1,"fill-input"],["shape","exclamation-circle","status","danger","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(l,h){1&l&&(At(Uke),ze(0),ce(1,Pke,1,0,"label",0),U(2,"div",1)(3,"div",2),ze(4,1),ce(5,Oke,1,2,"span",3),ce(6,Nke,1,0,"cds-icon",4),ce(7,Fke,1,0,"cds-icon",5),H(),ce(8,kke,1,0,"ng-content",0),ce(9,Vke,1,0,"ng-content",0),ce(10,Bke,1,0,"ng-content",0),H()),2&l&&(V(1),z("ngIf",!h.label&&h.addGrid()),V(1),z("ngClass",h.controlClass()),V(1),ot("progress-fill",h.hasProgress),V(2),z("ngIf",h.hasProgress),V(1),z("ngIf",h.showInvalid),V(1),z("ngIf",h.showValid),V(1),z("ngIf",h.showHelper),V(1),z("ngIf",h.showInvalid),V(1),z("ngIf",h.showValid))},dependencies:[bn,Qr,ro,Xi],encapsulation:2}),c})(),C5e=(()=>{class c extends q_{constructor(l,h,d,f,m){super(l,NK,h,d,f,m)}}return c.\u0275fac=function(l){return new(l||c)(N(ii),N(cr),N(ma,10),N(Gn),N(Xt))},c.\u0275dir=Ke({type:c,selectors:[["","clrRange",""]],hostVars:2,hostBindings:function(l,h){2&l&&ot("clr-range",!0)},features:[rn]}),c})(),x5e=(()=>{class c{constructor(){Pi.addIcons(fl,pl)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,fo,XM,qi],fo]}),c})(),FK=(()=>{class c extends T1{constructor(l,h,d,f){super(f,l,h,d),this.layoutService=l,this.controlClassService=h,this.ngControlService=d,this.ifControlStateService=f,this.multi=!1}ngOnInit(){this.subscriptions.push(this.ngControlService.controlChanges.subscribe(l=>{l&&(this.multi=l.valueAccessor instanceof s1,this.control=l)}))}wrapperClass(){return this.multi?"clr-multiselect-wrapper":"clr-select-wrapper"}}return c.\u0275fac=function(l){return new(l||c)(N(Lu,8),N(kc),N(bl),N(Fc))},c.\u0275cmp=He({type:c,selectors:[["clr-select-container"]],contentQueries:function(l,h,d){if(1&l&&Cn(d,s1,5),2&l){let f;vt(f=bt())&&(h.multiple=f.first)}},hostVars:6,hostBindings:function(l,h){2&l&&ot("clr-form-control",!0)("clr-form-control-disabled",null==h.control?null:h.control.disabled)("clr-row",h.addGrid())},features:[Lt([Fc,bl,vl,kc]),rn],ngContentSelectors:Yke,decls:10,vars:8,consts:[[4,"ngIf"],[1,"clr-control-container",3,"ngClass"],[3,"ngClass"],["class","clr-validate-icon","shape","exclamation-circle","status","danger","aria-hidden","true",4,"ngIf"],["class","clr-validate-icon","shape","check-circle","status","success","aria-hidden","true",4,"ngIf"],["shape","exclamation-circle","status","danger","aria-hidden","true",1,"clr-validate-icon"],["shape","check-circle","status","success","aria-hidden","true",1,"clr-validate-icon"]],template:function(l,h){1&l&&(At($ke),ze(0),ce(1,Gke,1,0,"label",0),U(2,"div",1)(3,"div",2),ze(4,1),ce(5,Hke,1,0,"cds-icon",3),ce(6,jke,1,0,"cds-icon",4),H(),ce(7,Wke,1,0,"ng-content",0),ce(8,Xke,1,0,"ng-content",0),ce(9,qke,1,0,"ng-content",0),H()),2&l&&(V(1),z("ngIf",!h.label&&h.addGrid()),V(1),z("ngClass",h.controlClass()),V(1),z("ngClass",h.wrapperClass()),V(2),z("ngIf",h.showInvalid),V(1),z("ngIf",h.showValid),V(1),z("ngIf",h.showHelper),V(1),z("ngIf",h.showInvalid),V(1),z("ngIf",h.showValid))},dependencies:[bn,Qr,ro,Xi],encapsulation:2}),c})(),kK=(()=>{class c extends q_{constructor(l,h,d,f,m){super(l,FK,h,d,f,m),this.index=1}}return c.\u0275fac=function(l){return new(l||c)(N(ii),N(cr),N(ma,10),N(Gn),N(Xt))},c.\u0275dir=Ke({type:c,selectors:[["","clrSelect",""]],hostVars:2,hostBindings:function(l,h){2&l&&ot("clr-select",!0)},features:[rn]}),c})(),E5e=(()=>{class c{constructor(){Pi.addIcons(fl,pl)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,Au,qi,fo],fo]}),c})(),M5e=(()=>{class c{constructor(){Pi.addIcons(fl,pl)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,Au,qi,fo],fo]}),c})(),VK=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un],fo,YBe,e5e,y5e,xK,b5e,w5e,E5e,M5e,x5e,t5e]}),c})(),BK=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})(),D5e=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})();class QM{}let R1=(()=>{class c{constructor(){this._change=new Qe,this.nbChanges=0}get change(){return this._change.asObservable()}changeStart(){this.nbChanges++}changeDone(){0==--this.nbChanges&&this._change.next()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),Df=(()=>{class c{constructor(l){this.stateDebouncer=l,this.preventEmit=!1,this.activated=!1,this._size=0,this._change=new Qe,this._sizeChange=new Qe,this._current=1}get size(){return this._size}set size(l){const h=this._size;l!==h&&(this.preventEmit||this.stateDebouncer.changeStart(),this._size=l,this._current=0===l?1:Math.floor(h/l*(this._current-1))+1,this.preventEmit||(this._change.next(this._current),this._sizeChange.next(this._size),this.stateDebouncer.changeDone())),this.preventEmit=!1}get totalItems(){return this._totalItems||0}set totalItems(l){this._totalItems=l,this.current>this.last&&(this.current=this.last)}get last(){return this._last?this._last:this.size>0&&this.totalItems?Math.ceil(this.totalItems/this.size):1}set last(l){this._last=l}get change(){return this._change.asObservable()}get sizeChange(){return this._sizeChange.asObservable()}get current(){return this._current}set current(l){l!==this._current&&(this.stateDebouncer.changeStart(),this._current=l,this._change.next(l),this.stateDebouncer.changeDone())}previous(){this.current>1&&this.current--}next(){this.current<this.last&&this.current++}get firstItem(){return 0===this._totalItems?-1:0===this.size?0:(this.current-1)*this.size}get lastItem(){if(0===this._totalItems)return-1;if(0===this.size)return this.totalItems-1;let l=this.current*this.size-1;return this.totalItems&&(l=Math.min(l,this.totalItems-1)),l}resetPageSize(l=!1){this.preventEmit=l,this.size=0}}return c.\u0275fac=function(l){return new(l||c)(Oe(R1))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),Wh=(()=>{class c{constructor(l,h){this._page=l,this.stateDebouncer=h,this._change=new Qe,this._all=[]}get change(){return this._change.asObservable()}hasActiveFilters(){for(const{filter:l}of this._all)if(l&&l.isActive())return!0;return!1}getActiveFilters(){const l=[];for(const{filter:h}of this._all)h&&h.isActive()&&l.push(h);return l}add(l){const h=l.changes.subscribe(()=>this.resetPageAndEmitFilterChange([l]));let d=!1;const f=new eD(l,()=>{if(d)return;h.unsubscribe();const m=this._all.findIndex(g=>g.filter===l);m>=0&&this._all.splice(m,1),l.isActive()&&this.resetPageAndEmitFilterChange([]),d=!0});return this._all.push(f),l.isActive()&&this.resetPageAndEmitFilterChange([l]),f}accepts(l){for(const{filter:h}of this._all)if(h&&h.isActive()&&!h.accepts(l))return!1;return!0}resetPageAndEmitFilterChange(l){this.stateDebouncer.changeStart(),this._page.current=1,this._change.next(l),this.stateDebouncer.changeDone()}}return c.\u0275fac=function(l){return new(l||c)(Oe(Df),Oe(R1))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();class eD{constructor(a,l){this.filter=a,this.unregister=l}}let tD=(()=>{class c{constructor(l){this.filters=l}get filter(){return this.registered&&this.registered.filter}setFilter(l){this.deleteFilter(),l instanceof eD?this.registered=l:l&&(this.registered=this.filters.add(l))}deleteFilter(){this.registered&&(this.registered.unregister(),delete this.registered)}ngOnDestroy(){this.deleteFilter()}}return c.\u0275fac=function(l){return new(l||c)(N(Wh))},c.\u0275dir=Ke({type:c}),c})(),L1=(()=>{class c extends tD{constructor(l,h,d,f,m){super(l),this.commonStrings=h,this.smartToggleService=d,this.platformId=f,this.elementRef=m,this.subs=[],this.ariaExpanded=!1,this.popoverId=Zs(),this.smartPosition={axis:ho.VERTICAL,side:Fa.AFTER,anchor:Ti.END,content:Ti.END},this._open=!1,this.openChange=new st(!1),this.subs.push(d.openChange.subscribe(g=>{this.open=g,this.ariaExpanded=g}))}get open(){return this._open}set open(l){this.open!==(l=!!l)&&(this.smartToggleService.open=l,this.openChange.emit(l),!l&&Ei(this.platformId)&&this.anchor.nativeElement.focus(),this._open=l)}set customFilter(l){this.setFilter(l)}get active(){return!!this.filter&&this.filter.isActive()}ngOnChanges(){this.setToggleButtonAriaLabel()}ngOnDestroy(){super.ngOnDestroy(),this.subs.forEach(l=>l.unsubscribe())}setToggleButtonAriaLabel(){const d=this.elementRef.nativeElement?.closest("clr-dg-column")?.querySelector(".datagrid-column-title")?.textContent.trim().toLocaleLowerCase();this.toggleButtonAriaLabel=this.commonStrings.parse(this.commonStrings.keys.datagridFilterAriaLabel,{COLUMN:d||""})}}return c.\u0275fac=function(l){return new(l||c)(N(Wh),N(xi),N(zi),N(kr),N(Xt))},c.\u0275cmp=He({type:c,selectors:[["clr-dg-filter"]],viewQuery:function(l,h){if(1&l&&hi(Zke,5,Xt),2&l){let d;vt(d=bt())&&(h.anchor=d.first)}},inputs:{open:["clrDgFilterOpen","open"],customFilter:["clrDgFilter","customFilter"]},outputs:{openChange:"clrDgFilterOpenChange"},features:[Lt([{provide:QM,useExisting:c}]),rn,ps],ngContentSelectors:yn,decls:4,vars:13,consts:[["type","button","clrPopoverAnchor","","clrPopoverOpenCloseButton","",1,"datagrid-filter-toggle"],["anchor",""],["solid",""],["class","datagrid-filter","clrFocusTrap","","role","dialog",3,"id",4,"clrPopoverContent","clrPopoverContentAt","clrPopoverContentOutsideClickToClose","clrPopoverContentScrollToClose"],["clrFocusTrap","","role","dialog",1,"datagrid-filter",3,"id"],[1,"datagrid-filter-close-wrapper"],["type","button","clrPopoverCloseButton","",1,"close"],["shape","window-close"]],template:function(l,h){1&l&&(At(),U(0,"button",0,1),xe(2,"cds-icon",2),H(),ce(3,Kke,5,3,"div",3)),2&l&&(ot("datagrid-filter-open",h.open)("datagrid-filtered",h.active),Ue("aria-label",h.toggleButtonAriaLabel)("aria-expanded",h.ariaExpanded)("aria-controls",h.popoverId),V(2),Ue("status",h.active?"info":null)("shape",h.active?"filter-grid-circle":"filter-grid"),V(1),z("clrPopoverContent",h.open)("clrPopoverContentAt",h.smartPosition)("clrPopoverContentOutsideClickToClose",!0)("clrPopoverContentScrollToClose",!0))},dependencies:[g1,_1,Xi,y1,Mf,lK],encapsulation:2}),c})();class $k{constructor(a){this.prop=a,a.indexOf(".")>=0&&(this.splitProp=a.split("."))}getPropValue(a){if(this.splitProp){let l=a;for(const h of this.splitProp){if(null===l||typeof l>"u"||typeof l[h]>"u")return;l=l[h]}return l}return a[this.prop]}}class nD{constructor(a,l=!1){this.prop=a,this.exact=l,this.nestedProp=new $k(a)}accepts(a,l,h){const d=this.nestedProp.getPropValue(a);return!(void 0===d||null!==l&&("number"!=typeof d||d<l)||null!==h&&("number"!=typeof d||d>h))}}class Nm{constructor(a){this.filterFn=a,this._changes=new Qe,this._low=null,this._high=null}get changes(){return this._changes.asObservable()}get value(){return[this._low,this._high]}set value(a){const l=a[0],h=a[1];(l!==this._low||h!==this._high)&&(this._low=l,this._high=h,this._changes.next([this._low,this._high]))}get low(){return this._low}set low(a){a!==this._low&&(this._low=a,this._changes.next([this._low,this._high]))}get high(){return this._high}set high(a){a!==this._high&&(this._high=a,this._changes.next([this._low,this._high]))}isActive(){return null!==this._low||null!==this.high}accepts(a){return this.filterFn.accepts(a,this._low,this._high)}get state(){return this.filterFn instanceof nD?{property:this.filterFn.prop,low:this._low,high:this._high}:this}equals(a){return a instanceof Nm&&(a.filterFn instanceof nD?this.filterFn instanceof nD&&a.filterFn.prop===this.filterFn.prop&&a.low===this._low&&a.high===this._high:a===this)}}let UK=(()=>{class c extends tD{constructor(l,h,d,f,m){super(l),this.domAdapter=h,this.commonStrings=d,this.popoverToggleService=f,this.ngZone=m,this.subscriptions=[],this.open=!1,this.filterValueChange=new st}ngOnDestroy(){super.ngOnDestroy(),this.subscriptions.forEach(l=>{l.unsubscribe()})}get maxPlaceholderValue(){return this.maxPlaceholder||this.commonStrings.keys.maxValue}get minPlaceholderValue(){return this.minPlaceholder||this.commonStrings.keys.minValue}set customNumericFilter(l){this.setFilter(l instanceof eD?l:new Nm(l)),this.initFilterValues&&(this.value=this.initFilterValues,delete this.initFilterValues)}ngAfterViewInit(){this.subscriptions.push(this.popoverToggleService.openChange.subscribe(l=>{this.open=l,this.ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.domAdapter.focus(this.input.nativeElement)})})}))}get value(){return[this.filter.low,this.filter.high]}set value(l){this.filter&&Array.isArray(l)?l&&(l[0]!==this.filter.low||l[1]!==this.filter.high)&&(this.filter.low="number"==typeof l[0]?l[0]:null,this.filter.high="number"==typeof l[1]?l[1]:null,this.filterValueChange.emit(l)):this.initFilterValues=l}get low(){return"number"==typeof this.filter.low&&isFinite(this.filter.low)?this.filter.low:null}set low(l){"number"==typeof l&&l!==this.filter.low?(this.filter.low=l,this.filterValueChange.emit([this.filter.low,this.filter.high])):"number"!=typeof l&&(this.filter.low=null,this.filterValueChange.emit([this.filter.low,this.filter.high]))}get high(){return"number"==typeof this.filter.high&&isFinite(this.filter.high)?this.filter.high:null}set high(l){"number"==typeof l&&l!==this.filter.high?(this.filter.high=l,this.filterValueChange.emit([this.filter.low,this.filter.high])):"number"!=typeof l&&(this.filter.high=null,this.filterValueChange.emit([this.filter.low,this.filter.high]))}}return c.\u0275fac=function(l){return new(l||c)(N(Wh),N(_l),N(xi),N(zi),N(Yn))},c.\u0275cmp=He({type:c,selectors:[["clr-dg-numeric-filter"]],viewQuery:function(l,h){if(1&l&&(hi(Jke,5),hi(L1,5)),2&l){let d;vt(d=bt())&&(h.input=d.first),vt(d=bt())&&(h.filterContainer=d.first)}},inputs:{maxPlaceholder:["clrFilterMaxPlaceholder","maxPlaceholder"],minPlaceholder:["clrFilterMinPlaceholder","minPlaceholder"],customNumericFilter:["clrDgNumericFilter","customNumericFilter"],value:["clrFilterValue","value"]},outputs:{filterValueChange:"clrFilterValueChange"},features:[Lt([{provide:QM,useExisting:c}]),rn],decls:6,vars:8,consts:[[3,"clrDgFilter","clrDgFilterOpen","clrDgFilterOpenChange"],["type","number","autocomplete","off","name","low",1,"datagrid-numeric-filter-input",3,"ngModel","placeholder","ngModelChange"],["input_low",""],[1,"datagrid-filter-input-spacer"],["type","number","autocomplete","off","name","high",1,"datagrid-numeric-filter-input",3,"ngModel","placeholder","ngModelChange"],["input_high",""]],template:function(l,h){1&l&&(U(0,"clr-dg-filter",0),De("clrDgFilterOpenChange",function(f){return h.open=f}),U(1,"input",1,2),De("ngModelChange",function(f){return h.low=f}),H(),xe(3,"span",3),U(4,"input",4,5),De("ngModelChange",function(f){return h.high=f}),H()()),2&l&&(z("clrDgFilter",h.registered)("clrDgFilterOpen",h.open),V(1),z("ngModel",h.low)("placeholder",h.minPlaceholderValue),Ue("aria-label",h.minPlaceholderValue),V(3),z("ngModel",h.high)("placeholder",h.maxPlaceholderValue),Ue("aria-label",h.maxPlaceholderValue))},dependencies:[L1,t1,ql,Na,gl],encapsulation:2}),c})();class iD{constructor(a,l=!1){this.prop=a,this.exact=l,this.nestedProp=new $k(a)}accepts(a,l){const h=this.nestedProp.getPropValue(a);return!(typeof h>"u")&&(this.exact?(""+h).toLowerCase()===l:(""+h).toLowerCase().indexOf(l)>=0)}}class Fm{constructor(a){this.filterFn=a,this._changes=new Qe,this._lowerCaseValue="",this._rawValue=""}get changes(){return this._changes.asObservable()}get lowerCaseValue(){return this._lowerCaseValue}get value(){return this._rawValue}set value(a){a||(a=""),a!==this._rawValue&&(this._rawValue=a,this._lowerCaseValue=a.toLowerCase().trim(),this._changes.next(a))}isActive(){return!!this.value}accepts(a){return this.filterFn.accepts(a,this.lowerCaseValue)}get state(){return this.filterFn instanceof iD?{property:this.filterFn.prop,value:this.value}:this}equals(a){return a instanceof Fm&&(a.filterFn instanceof iD?this.filterFn instanceof iD&&a.filterFn.prop===this.filterFn.prop&&a.value===this.value:a===this)}}let zK=(()=>{class c extends tD{constructor(l,h,d,f,m){super(l),this.domAdapter=h,this.commonStrings=d,this.smartToggleService=f,this.ngZone=m,this.subs=[],this.open=!1,this.filterValueChange=new st}get placeholderValue(){return this.placeholder||this.commonStrings.keys.filterItems}set customStringFilter(l){this.setFilter(l instanceof eD?l:new Fm(l)),this.initFilterValue&&(this.value=this.initFilterValue,delete this.initFilterValue)}ngAfterViewInit(){this.subs.push(this.smartToggleService.openChange.subscribe(l=>{this.open=l,this.ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this.domAdapter.focus(this.input.nativeElement)})})}))}ngOnDestroy(){super.ngOnDestroy(),this.subs.forEach(l=>l.unsubscribe())}get value(){return this.filter.value}set value(l){this.filter&&"string"==typeof l?(l||(l=""),l!==this.filter.value&&(this.filter.value=l,this.filterValueChange.emit(l))):this.initFilterValue=l}}return c.\u0275fac=function(l){return new(l||c)(N(Wh),N(_l),N(xi),N(zi),N(Yn))},c.\u0275cmp=He({type:c,selectors:[["clr-dg-string-filter"]],viewQuery:function(l,h){if(1&l&&(hi(Qke,5),hi(L1,5)),2&l){let d;vt(d=bt())&&(h.input=d.first),vt(d=bt())&&(h.filterContainer=d.first)}},inputs:{placeholder:["clrFilterPlaceholder","placeholder"],customStringFilter:["clrDgStringFilter","customStringFilter"],value:["clrFilterValue","value"]},outputs:{filterValueChange:"clrFilterValueChange"},features:[Lt([{provide:QM,useExisting:c}]),rn],decls:3,vars:5,consts:[[3,"clrDgFilter","clrDgFilterOpen","clrDgFilterOpenChange"],["type","text","autocomplete","off","name","search",1,"clr-input",3,"ngModel","placeholder","ngModelChange"],["input",""]],template:function(l,h){1&l&&(U(0,"clr-dg-filter",0),De("clrDgFilterOpenChange",function(f){return h.open=f}),U(1,"input",1,2),De("ngModelChange",function(f){return h.value=f}),H()()),2&l&&(z("clrDgFilter",h.registered)("clrDgFilterOpen",h.open),V(1),z("ngModel",h.value)("placeholder",h.placeholderValue),Ue("aria-label",h.placeholderValue))},dependencies:[L1,ql,Na,gl],encapsulation:2}),c})(),P1=(()=>{class c extends U_{}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Fr(c)))(h||c)}}(),c.\u0275dir=Ke({type:c,selectors:[["clr-datagrid"]],features:[rn]}),c})(),ev=(()=>{class c{constructor(){this.actionableCount=0}register(){this.actionableCount++}unregister(){this.actionableCount--}get hasActionableRow(){return this.actionableCount>0}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),Yk=(()=>{class c extends z_{constructor(l,h,d){if(!h)throw new Error("clr-dg-row should only be used inside of a clr-datagrid");super(l,h),this.rowActions=d}get flavor(){return this.rowActions.hasActionableRow}}return c.\u0275fac=function(l){return new(l||c)(N(Ls),N(P1,8),N(ev))},c.\u0275dir=Ke({type:c,selectors:[["clr-datagrid"],["clr-dg-row"]],features:[rn]}),c})(),Bc=(()=>{class c{constructor(){this.toggleState=!1,this._state=new Ui(this.toggleState),this._enabled=!1}get enabled(){return this._enabled}set enabled(l){this._enabled=l}get stateChange(){return this._state.asObservable()}close(){this.toggleState=!1,this._state.next(this.toggleState),this.button&&(this.button.focus(),this.button=null)}open(l,h){this.cache=l,this.button=h,this.toggleState=!0,this._state.next(this.toggleState)}toggle(l,h){this.isRowOpen(l)||!l?this.close():this.open(l,h)}get state(){return this.cache}isRowOpen(l){return!(!this.toggleState||this.cache!==l)}get isOpen(){return!0===this.toggleState}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),tv=(()=>{class c{constructor(l){this.detailService=l,this.expandableCount=0}register(){this.expandableCount++}unregister(){this.expandableCount--}get hasExpandableRow(){return!this.detailService.enabled&&this.expandableCount>0}}return c.\u0275fac=function(l){return new(l||c)(Oe(Bc))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),Zk=(()=>{class c extends z_{constructor(l,h,d){if(!h)throw new Error("clr-dg-row should only be used inside of a clr-datagrid");super(l,h),this.expandableCount=d}get flavor(){return this.expandableCount.hasExpandableRow}}return c.\u0275fac=function(l){return new(l||c)(N(Ls),N(P1,8),N(tv))},c.\u0275dir=Ke({type:c,selectors:[["clr-datagrid"],["clr-dg-row"]],features:[rn]}),c})();class rD{constructor(a){this.prop=a,this.nestedProp=new $k(a)}compare(a,l){let h=this.nestedProp.getPropValue(a),d=this.nestedProp.getPropValue(l);return"string"==typeof h&&(h=h.toLowerCase()),"string"==typeof d&&(d=d.toLowerCase()),typeof h>"u"||null===h?typeof d>"u"||null===d?0:1:typeof d>"u"||null===d||h<d?-1:h>d?1:0}}var Wo=(()=>(function(c){c[c.UNSORTED=0]="UNSORTED",c[c.ASC=1]="ASC",c[c.DESC=-1]="DESC"}(Wo||(Wo={})),Wo))();let Kk=(()=>{class c{constructor(){this._dynamic=!1}ngAfterViewInit(){this.columnView=this.templateRef.createEmbeddedView(null)}ngOnDestroy(){this.columnView.destroy()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["dg-wrapped-column"]],viewQuery:function(l,h){if(1&l&&hi(e3e,5),2&l){let d;vt(d=bt())&&(h.templateRef=d.first)}},ngContentSelectors:yn,decls:2,vars:0,consts:[["columnPortal",""]],template:function(l,h){1&l&&(At(),ce(0,t3e,1,0,"ng-template",null,0,io))},encapsulation:2}),c})(),sD=(()=>{class c{constructor(l){this.stateDebouncer=l,this._reverse=!1,this._change=new Qe}get comparator(){return this._comparator}set comparator(l){this.stateDebouncer.changeStart(),this._comparator=l,this.emitChange(),this.stateDebouncer.changeDone()}get reverse(){return this._reverse}set reverse(l){this.stateDebouncer.changeStart(),this._reverse=l,this.emitChange(),this.stateDebouncer.changeDone()}emitChange(){this._change.next(this)}get change(){return this._change.asObservable()}toggle(l,h){this.stateDebouncer.changeStart(),this.comparator===l?this._reverse=typeof h<"u"&&h||!this._reverse:(this._comparator=l,this._reverse=typeof h<"u"&&h),this.emitChange(),this.stateDebouncer.changeDone()}clear(){this.comparator=null}compare(l,h){return(this.reverse?-1:1)*this.comparator.compare(l,h)}}return c.\u0275fac=function(l){return new(l||c)(Oe(R1))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();var Tl=(()=>(function(c){c[c.ALIGN_COLUMNS=0]="ALIGN_COLUMNS",c[c.CALCULATE_MODE_ON=1]="CALCULATE_MODE_ON",c[c.CALCULATE_MODE_OFF=2]="CALCULATE_MODE_OFF",c[c.CLEAR_WIDTHS=3]="CLEAR_WIDTHS",c[c.COMPUTE_COLUMN_WIDTHS=4]="COMPUTE_COLUMN_WIDTHS"}(Tl||(Tl={})),Tl))();let km=(()=>{class c{constructor(){this._renderStep=new Qe,this.alreadySized=!1}get renderStep(){return this._renderStep.asObservable()}filterRenderSteps(l){return this.renderStep.pipe(Ki(h=>l===h))}resize(){this._renderStep.next(Tl.CALCULATE_MODE_ON),this.alreadySized&&this._renderStep.next(Tl.CLEAR_WIDTHS),this._renderStep.next(Tl.COMPUTE_COLUMN_WIDTHS),this._renderStep.next(Tl.ALIGN_COLUMNS),this.alreadySized=!0,this._renderStep.next(Tl.CALCULATE_MODE_OFF)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),Jk=(()=>{class c{constructor(l,h,d){this.el=l,this.domAdapter=h,this.organizer=d,this._resizedBy=0}get resizedBy(){return this._resizedBy}get minColumnWidth(){return this.domAdapter.minWidth(this.el.nativeElement)||96}get maxResizeRange(){return this.widthBeforeResize-this.minColumnWidth}startResize(){this._resizedBy=0,this.isWithinMaxResizeRange=!0,this.widthBeforeResize=this.domAdapter.clientRect(this.el.nativeElement).width}endResize(){this.organizer.resize()}get widthAfterResize(){return this.widthBeforeResize+this._resizedBy}calculateResize(l){l<-this.maxResizeRange?(this._resizedBy=-this.maxResizeRange,this.isWithinMaxResizeRange=!1):(this._resizedBy=l,this.isWithinMaxResizeRange=!0)}}return c.\u0275fac=function(l){return new(l||c)(Oe(Xt),Oe(_l),Oe(km))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),Qk=(()=>{class c{constructor(l){this.platformId=l}get tableRef(){return this._tableRef}set tableRef(l){this._tableRef=l}set table(l){Ei(this.platformId)&&l.nativeElement&&(this.tableRef=l.nativeElement.querySelector(".datagrid-table"))}getColumnDragHeight(){return this.tableRef?`${this.tableRef.clientHeight}px`:null}}return c.\u0275fac=function(l){return new(l||c)(Oe(kr))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),HK=(()=>{class c{constructor(l,h,d,f,m,g){this.columnResizerService=l,this.renderer=h,this.ngZone=d,this.tableSizeService=f,this.commonString=m,this.document=g,this.columnSeparatorId=Zs(),this.resizeStartedOnKeyDown=!1,this.unlisteners=[]}get resizeTrackerEl(){return this.resizeTrackerRef.nativeElement}get columnHandleEl(){return this.columnHandleRef.nativeElement}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.unlisteners.push(this.renderer.listen(this.columnHandleEl,"keydown",l=>{this.showTrackerOnFirstKeyDown(l),this.moveTrackerOnKeyDown(l)})),this.unlisteners.push(this.renderer.listen(this.columnHandleEl,"keyup",l=>{this.hideTrackerOnKeyUp(l)}))})}get descriptionId(){return`${this.columnSeparatorId}-aria-describedby`}showTracker(){this.columnResizerService.startResize();const l=this.tableSizeService.getColumnDragHeight();this.renderer.setStyle(this.resizeTrackerEl,"height",l),this.renderer.setStyle(this.resizeTrackerEl,"display","block")}moveTracker(l){this.columnResizerService.calculateResize(l),this.renderer.setStyle(this.resizeTrackerEl,"transform",`translateX(${this.columnResizerService.resizedBy}px)`),this.renderer.setStyle(this.document.body,"cursor","col-resize"),this.redFlagTracker()}hideTracker(){this.columnResizerService.endResize(),this.renderer.setStyle(this.resizeTrackerEl,"display","none"),this.renderer.setStyle(this.resizeTrackerEl,"transform","translateX(0px)"),this.renderer.setStyle(this.document.body,"cursor","auto")}showTrackerOnFirstKeyDown(l){!this.resizeStartedOnKeyDown&&(this.isArrowLeftKeyEvent(l)||this.isArrowRightKeyEvent(l))&&(this.resizeStartedOnKeyDown=!0,this.renderer.addClass(this.resizeTrackerEl,"on-arrow-key-resize"),this.showTracker())}moveTrackerOnKeyDown(l){this.isArrowLeftKeyEvent(l)?this.moveTracker(this.columnResizerService.resizedBy-12):this.isArrowRightKeyEvent(l)&&this.moveTracker(this.columnResizerService.resizedBy+12)}hideTrackerOnKeyUp(l){this.resizeStartedOnKeyDown&&(this.isArrowLeftKeyEvent(l)||this.isArrowRightKeyEvent(l))&&(this.resizeStartedOnKeyDown=!1,this.renderer.removeClass(this.resizeTrackerEl,"on-arrow-key-resize"),this.hideTracker(),this.columnHandleEl.focus())}redFlagTracker(){this.isWithinMaxResizeRange!==this.columnResizerService.isWithinMaxResizeRange&&(this.isWithinMaxResizeRange=this.columnResizerService.isWithinMaxResizeRange,this.isWithinMaxResizeRange?this.renderer.removeClass(this.resizeTrackerEl,"exceeded-max"):this.renderer.addClass(this.resizeTrackerEl,"exceeded-max"))}isArrowLeftKeyEvent(l){return Nc(l.key)===cn.ArrowLeft}isArrowRightKeyEvent(l){return Nc(l.key)===cn.ArrowRight}ngOnDestroy(){this.unlisteners.forEach(l=>l())}}return c.\u0275fac=function(l){return new(l||c)(N(Jk),N(Gn),N(Yn),N(Qk),N(xi),N(Ci))},c.\u0275cmp=He({type:c,selectors:[["clr-dg-column-separator"]],viewQuery:function(l,h){if(1&l&&(hi(n3e,5),hi(i3e,5)),2&l){let d;vt(d=bt())&&(h.resizeTrackerRef=d.first),vt(d=bt())&&(h.columnHandleRef=d.first)}},hostVars:2,hostBindings:function(l,h){2&l&&ot("datagrid-column-separator",!0)},decls:6,vars:5,consts:[["type","button","clrDraggable","",1,"datagrid-column-handle",3,"clrGroup","clrDragStart","clrDragMove","clrDragEnd"],["columnHandle",""],[1,"clr-sr-only"],[1,"datagrid-column-resize-tracker"],["resizeTracker",""]],template:function(l,h){1&l&&(U(0,"button",0,1),De("clrDragStart",function(){return h.showTracker()})("clrDragMove",function(f){return h.moveTracker(f.dragPosition.moveX)})("clrDragEnd",function(){return h.hideTracker()}),H(),U(2,"span",2),ve(3),H(),xe(4,"div",3,4)),2&l&&(z("clrGroup",h.columnSeparatorId),Ue("aria-label",h.commonString.keys.columnSeparatorAriaLabel)("aria-describedby",h.descriptionId),V(2),Ue("id",h.descriptionId),V(1),pr(" ",h.commonString.keys.columnSeparatorDescription," "))},dependencies:[_K],encapsulation:2}),c})(),oD=(()=>{class c extends tD{constructor(l,h,d,f,m){super(h),this._sort=l,this.vcr=d,this.detailService=f,this.changeDetectorRef=m,this.showSeparator=!0,this.subscriptions=[],this._colType="string",this._sorted=!1,this.sortedChange=new st,this._sortOrder=Wo.UNSORTED,this.sortOrderChange=new st,this.customFilter=!1,this.filterValueChange=new st,this.subscriptions.push(this.listenForSortingChanges()),this.subscriptions.push(this.listenForDetailPaneChanges())}ngOnDestroy(){super.ngOnDestroy(),this.subscriptions.forEach(l=>l.unsubscribe())}listenForDetailPaneChanges(){return this.detailService.stateChange.subscribe(l=>{this.showSeparator!==!l&&(this.showSeparator=!l,this.changeDetectorRef.markForCheck())})}listenForSortingChanges(){return this._sort.change.subscribe(l=>{this.changeDetectorRef.markForCheck(),this.sortOrder!==Wo.UNSORTED&&l.comparator!==this._sortBy&&(this._sortOrder=Wo.UNSORTED,this.sortOrderChange.emit(this._sortOrder),this.sortIcon=null,this._sortDirection=null),this.sorted&&l.comparator!==this._sortBy&&(this._sorted=!1,this.sortedChange.emit(!1))})}get colType(){return this._colType}set colType(l){this._colType=l}get field(){return this._field}set field(l){"string"==typeof l&&(this._field=l,this._sortBy||(this._sortBy=new rD(l)))}setupDefaultFilter(l,h){"number"===h?this.setFilter(new Nm(new nD(l))):"string"===h&&this.setFilter(new Fm(new iD(l))),this.filter&&this.initFilterValue&&(this.updateFilterValue=this.initFilterValue,delete this.initFilterValue)}ngOnChanges(l){l.colType&&l.colType.currentValue&&l.colType.currentValue!==l.colType.previousValue&&!this.customFilter&&!this.filter&&this.colType&&this.field&&this.setupDefaultFilter(this.field,this.colType),l.field&&l.field.currentValue&&l.field.currentValue!==l.field.previousValue&&!this.customFilter&&this.colType&&this.setupDefaultFilter(this.field,this.colType)}get sortBy(){return this._sortBy}set sortBy(l){"string"==typeof l?this._sortBy=new rD(l):l?this._sortBy=l:this.field?this._sortBy=new rD(this.field):delete this._sortBy}get sortable(){return!!this._sortBy}get sorted(){return this._sorted}set sorted(l){!l&&this.sorted?(this._sorted=!1,this._sort.clear()):l&&!this.sorted&&this.sort()}get sortOrder(){return this._sortOrder}set sortOrder(l){if(!(typeof l>"u")&&this._sortOrder!==l)switch(l){default:case Wo.UNSORTED:this._sort.clear();break;case Wo.ASC:this.sort(!1);break;case Wo.DESC:this.sort(!0)}}get ariaSort(){switch(this._sortOrder){default:case Wo.UNSORTED:return"none";case Wo.ASC:return"ascending";case Wo.DESC:return"descending"}}get sortDirection(){return this._sortDirection}sort(l){!this.sortable||(this._sort.toggle(this._sortBy,l),this._sortOrder=this._sort.reverse?Wo.DESC:Wo.ASC,this._sortDirection=this._sortOrder===Wo.DESC?"down":"up",this.sortIcon=this._sortOrder===Wo.DESC?"arrow down":"arrow",this.sortOrderChange.emit(this._sortOrder),this._sorted=!0,this.sortedChange.emit(!0))}set projectedFilter(l){l&&(this.deleteFilter(),this.customFilter=!0)}set updateFilterValue(l){this.filter?this.filter instanceof Fm?((!l||"string"!=typeof l)&&(l=""),l!==this.filter.value&&(this.filter.value=l)):this.filter instanceof Nm&&((!l||!(l instanceof Array))&&(l=[null,null]),2===l.length&&(l[0]!==this.filter.value[0]||l[1]!==this.filter.value[1])&&(this.filter.value=l)):this.initFilterValue=l}get filterValue(){return this.filter instanceof Fm||this.filter instanceof Nm?this.filter.value:null}set filterValue(l){(this.filter instanceof Fm||this.filter instanceof Nm)&&(this.updateFilterValue=l,this.filterValueChange.emit(this.filter.value))}ngOnInit(){this.wrappedInjector=new $M(Kk,this.vcr)}get _view(){return this.wrappedInjector.get(Kk,this.vcr).columnView}}return c.\u0275fac=function(l){return new(l||c)(N(sD),N(Wh),N(ii),N(Bc),N(Ls))},c.\u0275cmp=He({type:c,selectors:[["clr-dg-column"]],contentQueries:function(l,h,d){if(1&l&&Cn(d,QM,5),2&l){let f;vt(f=bt())&&(h.projectedFilter=f.first)}},hostAttrs:["role","columnheader"],hostVars:3,hostBindings:function(l,h){2&l&&(Ue("aria-sort",h.ariaSort),ot("datagrid-column",!0))},inputs:{colType:["clrDgColType","colType"],field:["clrDgField","field"],sortBy:["clrDgSortBy","sortBy"],sorted:["clrDgSorted","sorted"],sortOrder:["clrDgSortOrder","sortOrder"],filterStringPlaceholder:["clrFilterStringPlaceholder","filterStringPlaceholder"],filterNumberMaxPlaceholder:["clrFilterNumberMaxPlaceholder","filterNumberMaxPlaceholder"],filterNumberMinPlaceholder:["clrFilterNumberMinPlaceholder","filterNumberMinPlaceholder"],updateFilterValue:["clrFilterValue","updateFilterValue"]},outputs:{sortedChange:"clrDgSortedChange",sortOrderChange:"clrDgSortOrderChange",filterValueChange:"clrFilterValueChange"},features:[Lt([H_,Uh,zi]),rn,ps],ngContentSelectors:p3e,decls:9,vars:5,consts:[[1,"datagrid-column-flex"],["class","datagrid-column-title","type","button",3,"click",4,"ngIf"],[3,"clrFilterPlaceholder","clrDgStringFilter","clrFilterValue","clrFilterValueChange",4,"ngIf"],[3,"clrFilterMaxPlaceholder","clrFilterMinPlaceholder","clrDgNumericFilter","clrFilterValue","clrFilterValueChange",4,"ngIf"],["columnTitle",""],["class","datagrid-column-title",4,"ngIf"],[4,"ngIf"],["type","button",1,"datagrid-column-title",3,"click"],[4,"ngTemplateOutlet"],["shape","arrow","aria-hidden","true","class","sort-icon",4,"ngIf"],["shape","arrow","aria-hidden","true",1,"sort-icon"],[3,"clrFilterPlaceholder","clrDgStringFilter","clrFilterValue","clrFilterValueChange"],[3,"clrFilterMaxPlaceholder","clrFilterMinPlaceholder","clrDgNumericFilter","clrFilterValue","clrFilterValueChange"],[1,"datagrid-column-title"]],template:function(l,h){1&l&&(At(f3e),U(0,"div",0),ce(1,o3e,3,2,"button",1),ze(2),ce(3,a3e,1,3,"clr-dg-string-filter",2),ce(4,l3e,1,4,"clr-dg-numeric-filter",3),ce(5,c3e,1,0,"ng-template",null,4,io),ce(7,h3e,2,1,"span",5),ce(8,d3e,1,0,"clr-dg-column-separator",6),H()),2&l&&(V(1),z("ngIf",h.sortable),V(2),z("ngIf",h.field&&!h.customFilter&&"string"==h.colType),V(1),z("ngIf",h.field&&!h.customFilter&&"number"==h.colType),V(3),z("ngIf",!h.sortable),V(1),z("ngIf",h.showSeparator))},dependencies:[zK,UK,HK,bn,hh,Xi],encapsulation:2,changeDetection:0}),c})(),Af=(()=>{class c{constructor(l,h,d){this._filters=l,this._sort=h,this._page=d,this.loading=!1,this.iteratorTrackBy=(f,m)=>m,this._smart=!1,this._displayed=[],this._change=new Qe,this._allChanges=new Qe}destroy(){this._filtersSub&&this._filtersSub.unsubscribe(),this._sortSub&&this._sortSub.unsubscribe(),this._pageSub&&this._pageSub.unsubscribe()}get smart(){return this._smart}smartenUp(){this._smart=!0,this._filtersSub=this._filters.change.subscribe(()=>this._filterItems()),this._sortSub=this._sort.change.subscribe(()=>{this._sort.comparator?this._sortItems():this._filterItems()}),this._pageSub=this._page.change.subscribe(()=>this._changePage())}get all(){return this._all}set all(l){this._all=l,this.emitAllChanges(l),this.smart?this._filterItems():(this._displayed=l,this.emitChange())}refresh(){this.smart&&this._filterItems()}canTrackBy(){return!!this.datagridTrackBy||Array.isArray(this.all)}trackBy(l,h){if(this.datagridTrackBy)return this.datagridTrackBy(l);if(Array.isArray(this.all))return h=h??this.all.indexOf(l),this.iteratorTrackBy(h,l);throw new Error("improper call to Items#trackBy")}get displayed(){return this._displayed}emitChange(){this._change.next(this.displayed)}get change(){return this._change.asObservable()}emitAllChanges(l){this._allChanges.next(l)}get allChanges(){return this._allChanges.asObservable()}get uninitialized(){return!this._all}_filterItems(){this.uninitialized||(this._filtered=this._filters.hasActiveFilters()?this._all.filter(l=>this._filters.accepts(l)):this._all.slice(),this._page.totalItems=this._filtered.length,this._sortItems())}_sortItems(){this.uninitialized||(this._sort.comparator&&this._filtered.sort((l,h)=>this._sort.compare(l,h)),this._changePage())}_changePage(){this.uninitialized||this._page.activated&&0===this._page.size||(this._displayed=this._page.size>0?this._filtered.slice(this._page.firstItem,this._page.lastItem+1):this._filtered,this.emitChange())}}return c.\u0275fac=function(l){return new(l||c)(Oe(Wh),Oe(sD),Oe(Df))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),jK=(()=>{class c{constructor(l,h,d,f){this.template=l,this.differs=h,this.items=d,this.vcr=f,this.differ=null,this.subscriptions=[],d.smartenUp(),this.iterableProxy=new Er(this.vcr,this.template,this.differs),this.subscriptions.push(d.change.subscribe(m=>{this.iterableProxy.ngForOf=m,this.iterableProxy.ngDoCheck()}))}set rawItems(l){this._rawItems=l||[]}set trackBy(l){this.items.iteratorTrackBy=l,this.iterableProxy.ngForTrackBy=l}static ngTemplateContextGuard(l,h){return!0}ngDoCheck(){this.differ||(this.differ=this.differs.find(this._rawItems).create(this.iterableProxy.ngForTrackBy)),this.differ&&this.differ.diff(this._rawItems)&&(this.items.all=this._rawItems)}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(N(Xr),N(fy),N(Af),N(ii))},c.\u0275dir=Ke({type:c,selectors:[["","clrDgItems","","clrDgItemsOf",""]],inputs:{rawItems:["clrDgItemsOf","rawItems"],trackBy:["clrDgItemsTrackBy","trackBy"]}}),c})(),e3=(()=>{class c{constructor(l){this.items=l}get emptyDatagrid(){return!(this.items.loading||this.items.displayed&&0!==this.items.displayed.length)}}return c.\u0275fac=function(l){return new(l||c)(N(Af))},c.\u0275cmp=He({type:c,selectors:[["clr-dg-placeholder"]],hostVars:2,hostBindings:function(l,h){2&l&&ot("datagrid-placeholder-container",!0)},ngContentSelectors:yn,decls:4,vars:4,consts:[["role","row",1,"datagrid-placeholder"],["class","datagrid-placeholder-image",4,"ngIf"],["role","gridcell",1,"datagrid-placeholder-content"],[4,"ngIf"],[1,"datagrid-placeholder-image"]],template:function(l,h){1&l&&(At(),U(0,"div",0),ce(1,m3e,1,0,"div",1),U(2,"span",2),ce(3,g3e,1,0,"ng-content",3),H()()),2&l&&(ot("datagrid-empty",h.emptyDatagrid),V(1),z("ngIf",h.emptyDatagrid),V(2),z("ngIf",h.emptyDatagrid))},dependencies:[bn],encapsulation:2}),c})(),t3=(()=>{class c{set triggerEl(l){this._triggerEl=l}focusTrigger(){this._triggerEl&&this._triggerEl.focus()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),n3=(()=>{class c{constructor(){this._id=new Qe}setId(l){this._id.next(l)}get id(){return this._id.asObservable()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),i3=(()=>{class c{constructor(l,h,d,f,m,g,y){this.toggleService=l,this.el=h,this.commonStrings=d,this.signpostIdService=f,this.signpostFocusManager=m,this.platformId=y,this.subscriptions=[],this.document=g}ngOnInit(){this.signpostFocusManager.triggerEl=this.el.nativeElement,this.subscriptions.push(this.toggleService.openChange.subscribe(l=>{this.ariaExpanded=l;const h=this.isOpen;this.isOpen=l,!this.isOpen&&h&&this.focusOnClose()}),this.signpostIdService.id.subscribe(l=>this.ariaControl=l)),this.addDefaultAriaLabel(this.el.nativeElement)}addDefaultAriaLabel(l){l.hasAttribute("aria-label")||l.setAttribute("aria-label",this.commonStrings.keys.signpostToggle)}focusOnClose(){!Ei(this.platformId)||!this.isOpen&&this.document.activeElement===this.document.body&&this.signpostFocusManager.focusTrigger()}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}onSignpostTriggerClick(l){this.toggleService.toggleWithEvent(l)}}return c.\u0275fac=function(l){return new(l||c)(N(zi),N(Xt),N(xi),N(n3),N(t3),N(Ci),N(kr))},c.\u0275dir=Ke({type:c,selectors:[["","clrSignpostTrigger",""]],hostAttrs:[1,"signpost-trigger"],hostVars:4,hostBindings:function(l,h){1&l&&De("click",function(f){return h.onSignpostTriggerClick(f)}),2&l&&(Ue("aria-expanded",h.ariaExpanded)("aria-controls",h.ariaControl),ot("active",h.isOpen))}}),c})(),O1=(()=>{class c{constructor(l){this.commonStrings=l,this.useCustomTrigger=!1}set customTrigger(l){this.useCustomTrigger=!!l}}return c.\u0275fac=function(l){return new(l||c)(N(xi))},c.\u0275cmp=He({type:c,selectors:[["clr-signpost"]],contentQueries:function(l,h,d){if(1&l&&Cn(d,i3,5),2&l){let f;vt(f=bt())&&(h.customTrigger=f.first)}},hostVars:2,hostBindings:function(l,h){2&l&&ot("signpost",!0)},features:[Lt([zi,t3,{provide:Y_,useExisting:Xt},n3])],ngContentSelectors:yn,decls:2,vars:1,consts:[[4,"ngIf"],["type","button","clrSignpostTrigger","",1,"signpost-action","btn","btn-small","btn-link"],["shape","info-circle"]],template:function(l,h){1&l&&(At(),ce(0,y3e,3,1,"ng-container",0),ze(1)),2&l&&z("ngIf",!h.useCustomTrigger)},dependencies:[bn,i3,Xi],encapsulation:2}),c})(),r3=(()=>{class c{constructor(){this._dynamic=!1}ngAfterViewInit(){this.cellView=this.templateRef.createEmbeddedView(null)}ngOnDestroy(){this.cellView.destroy()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["dg-wrapped-cell"]],viewQuery:function(l,h){if(1&l&&hi(_3e,5),2&l){let d;vt(d=bt())&&(h.templateRef=d.first)}},ngContentSelectors:yn,decls:2,vars:0,consts:[["cellPortal",""]],template:function(l,h){1&l&&(At(),ce(0,v3e,1,0,"ng-template",null,0,io))},encapsulation:2}),c})(),N1=(()=>{class c{constructor(l){this.vcr=l}ngOnInit(){this.wrappedInjector=new $M(r3,this.vcr)}get _view(){return this.wrappedInjector.get(r3,this.vcr).cellView}}return c.\u0275fac=function(l){return new(l||c)(N(ii))},c.\u0275cmp=He({type:c,selectors:[["clr-dg-cell"]],contentQueries:function(l,h,d){if(1&l&&Cn(d,O1,4),2&l){let f;vt(f=bt())&&(h.signpost=f)}},hostAttrs:["role","gridcell"],hostVars:4,hostBindings:function(l,h){2&l&&ot("datagrid-cell",!0)("datagrid-signpost-trigger",h.signpost.length>0)},ngContentSelectors:yn,decls:1,vars:0,template:function(l,h){1&l&&(At(),ze(0))},encapsulation:2}),c})(),WK=0,F1=(()=>{class c extends ya{constructor(){super(),this.expandableId="",this._replace=new Ui(!1),this._animate=new Qe,WK++,this.expandableId="clr-dg-expandable-row-"+WK}get expanded(){return this._expanded}set expanded(l){(l=!!l)!==this._expanded&&(this._expanded=l,this._animate.next(),this._expandChange.next(l))}loadingStateChange(l){super.loadingStateChange(l),l!==Eo.LOADING&&this._animate.next()}get replace(){return this._replace.asObservable()}setReplace(l){this._replace.next(l)}get animate(){return this._animate.asObservable()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();var If=(()=>(function(c){c[c.DISPLAY=0]="DISPLAY",c[c.CALCULATE=1]="CALCULATE"}(If||(If={})),If))(),Fi=(()=>(function(c){c[c.None=0]="None",c[c.Single=1]="Single",c[c.Multi=2]="Multi"}(Fi||(Fi={})),Fi))();let s3=(()=>{class c{constructor(){this._dynamic=!1}ngAfterViewInit(){this.rowView=this.templateRef.createEmbeddedView(null)}ngOnDestroy(){this.rowView.destroy()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["dg-wrapped-row"]],viewQuery:function(l,h){if(1&l&&hi(b3e,5),2&l){let d;vt(d=bt())&&(h.templateRef=d.first)}},ngContentSelectors:yn,decls:2,vars:0,consts:[["rowPortal",""]],template:function(l,h){1&l&&(At(),ce(0,S3e,1,0,"ng-template",null,0,io))},encapsulation:2}),c})(),I5e=0,nv=(()=>{class c{constructor(l,h){this._items=l,this._filters=h,this.preserveSelection=!1,this.prevSelectionRefs=[],this.lockedRefs=[],this._selectionType=Fi.None,this.rowSelectionMode=!1,this.subscriptions=[],this.shiftPressed=!1,this.valueCollector=new Qe,this._change=new Qe,this.id="clr-dg-selection"+I5e++,this.subscriptions.push(this._filters.change.subscribe(()=>{!this._selectable||this.preserveSelection||this.clearSelection()})),this.subscriptions.push(this._items.allChanges.subscribe(d=>{const f=[];switch(this.selectionType){case Fi.None:break;case Fi.Single:{let m,g=!1;this.currentSingle&&!this.prevSingleSelectionRef&&this._items.canTrackBy()&&(this.prevSingleSelectionRef=this._items.trackBy(this.currentSingle)),d.forEach((y,_)=>{const v=this._items.trackBy(y,_);this.prevSingleSelectionRef===v&&(m=y,g=!0),this.lockedRefs.indexOf(v)>-1&&f.push(v)}),this._items.smart&&!m&&(g=!0),setTimeout(()=>{g&&(this.currentSingle=m)},0);break}case Fi.Multi:{let m=this.current.slice(),g=!1;this.current.length>0&&this.prevSelectionRefs.length!==this.current.length&&this._items.canTrackBy()&&(this.prevSelectionRefs=[],this.current.forEach(y=>{this.prevSelectionRefs.push(this._items.trackBy(y))})),d.forEach((y,_)=>{const v=this._items.trackBy(y,_);this.lockedRefs.indexOf(v)>-1&&f.push(v)}),m.length>0&&(d.forEach((y,_)=>{const v=this._items.trackBy(y,_),b=this.prevSelectionRefs.indexOf(v);b>-1&&(m[b]=y,g=!0)}),this._items.smart&&(m=m.filter(y=>d.indexOf(y)>-1),this.current.length!==m.length&&(g=!0)),setTimeout(()=>{g&&(this.current=m)},0));break}}this.lockedRefs=f})),this.subscriptions.push(this.valueCollector.pipe(I_(0)).subscribe(()=>this.emitChange()))}clearSelection(){this._current=[],this.prevSelectionRefs=[],this.prevSingleSelectionRef=null,this._currentSingle=null,this.emitChange()}get selectionType(){return this._selectionType}set selectionType(l){l!==this.selectionType&&(this._selectionType=l,l===Fi.None?delete this.current:this.updateCurrent([],!1))}get _selectable(){return this._selectionType===Fi.Multi||this._selectionType===Fi.Single}destroy(){this.subscriptions.forEach(l=>l.unsubscribe())}get currentSingle(){return this._currentSingle}set currentSingle(l){l!==this._currentSingle&&(this._currentSingle=l,this._items.canTrackBy()&&l&&(this.prevSingleSelectionRef=this._items.trackBy(l)),this.emitChange())}get current(){return this._current}set current(l){this.updateCurrent(l,!0)}updateCurrent(l,h){this._current=l,h&&this.valueCollector.next(l)}emitChange(){this._selectionType===Fi.Single?this._change.next(this.currentSingle):this._selectionType===Fi.Multi&&this._change.next(this.current)}get change(){return this._change.asObservable()}isSelected(l){return this._selectionType===Fi.Single?this.currentSingle===l:this._selectionType===Fi.Multi&&this.current.indexOf(l)>=0}selectItem(l){this.current=this.current.concat(l),this._items.canTrackBy()&&this.prevSelectionRefs.push(this._items.trackBy(l))}deselectItem(l){if(this.current=this.current.slice(0,l).concat(this.current.slice(l+1)),l<this.prevSelectionRefs.length){const h=this.prevSelectionRefs.splice(l,1);this.lockedRefs=this.lockedRefs.filter(d=>d!==h[0])}}setSelected(l,h){const d=this.current?this.current.indexOf(l):-1;switch(this._selectionType){case Fi.None:case Fi.Single:break;case Fi.Multi:d>=0&&!h?this.deselectItem(d):d<0&&h&&this.selectItem(l)}}isAllSelected(){if(this._selectionType!==Fi.Multi||!this._items.displayed)return!1;const l=this._items.displayed.filter(f=>!1===this.isLocked(f));return!(l.length<1)&&l.filter(f=>this.current.indexOf(f)>-1).length===l.length}canItBeLocked(){return this._selectionType!==Fi.None&&this._items.canTrackBy()}lockItem(l,h){if(this.canItBeLocked()){const d=this._items.trackBy(l);!0===h?this.lockedRefs.push(d):this.lockedRefs=this.lockedRefs.filter(f=>d!==f)}}isLocked(l){if(this.canItBeLocked()){const h=this._items.trackBy(l);return this.lockedRefs.indexOf(h)>-1}return!1}toggleAll(){this._selectionType===Fi.None||this._selectionType===Fi.Single||(this.isAllSelected()?this._items.displayed.forEach(l=>{const h=this.current.indexOf(l);h>-1&&!1===this.isLocked(l)&&this.deselectItem(h)}):this._items.displayed.forEach(l=>{this.current.indexOf(l)<0&&!1===this.isLocked(l)&&this.selectItem(l)}))}}return c.\u0275fac=function(l){return new(l||c)(Oe(Af),Oe(Wh))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),o3=(()=>{class c{constructor(l){this.subscriptions=[],this._view=new Ui(If.DISPLAY),this.subscriptions.push(l.filterRenderSteps(Tl.CALCULATE_MODE_ON).subscribe(()=>this._view.next(If.CALCULATE))),this.subscriptions.push(l.filterRenderSteps(Tl.CALCULATE_MODE_OFF).subscribe(()=>this._view.next(If.DISPLAY)))}get view(){return this._view.asObservable()}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(Oe(km))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),a3=(()=>{class c{constructor(l){this.selection=l}onSelectionCellClick(l){this.selection.rowSelectionMode||"LABEL"!==l.target.tagName&&"INPUT"!==l.target.tagName&&l.target.querySelector("input").click()}}return c.\u0275fac=function(l){return new(l||c)(N(nv))},c.\u0275dir=Ke({type:c,selectors:[["",8,"datagrid-select"]],hostBindings:function(l,h){1&l&&De("click",function(f){return h.onSelectionCellClick(f)})}}),c})(),aD=0,lD=(()=>{class c{constructor(l,h,d,f,m,g,y,_,v,b,S,T){this.selection=l,this.rowActionService=h,this.globalExpandable=d,this.expand=f,this.detailService=m,this.displayMode=g,this.vcr=y,this.renderer=_,this.el=v,this.commonStrings=b,this.items=S,this.document=T,this.SELECTION_TYPE=Fi,this.expandAnimationTrigger=!1,this._selected=!1,this._selectable=!0,this.selectedChanged=new st(!1),this.expandedChange=new st(!1),this._detailOpenLabel="",this._detailCloseLabel="",this._rowAriaLabel="",this.subscriptions=[],this.displayCells=!1,aD++,this.id="clr-dg-row"+aD,this.radioId="clr-dg-row-rd"+aD,this.checkboxId="clr-dg-row-cb"+aD,this.expandableId=f.expandableId,this.subscriptions.push(VC(this.expand.replace,this.expand.expandChange).subscribe(([x,E])=>{x&&E?(this.replaced=!0,this.renderer.addClass(this.el.nativeElement,"datagrid-row-replaced")):(this.replaced=!1,this.renderer.removeClass(this.el.nativeElement,"datagrid-row-replaced"))}))}set item(l){this._item=l,this.clrDgSelectable=this._selectable}get item(){return this._item}clearRanges(l){l.shiftKey&&(this.document.getSelection().removeAllRanges(),-1!==window.navigator.userAgent.indexOf("Firefox")&&(l.preventDefault(),this.toggle(!0)))}get selected(){return this.selection.selectionType===Fi.None?this._selected:this.selection.isSelected(this.item)}set selected(l){this.selection.selectionType===Fi.None?this._selected=l:(l&&this.selection.selectionType===Fi.Multi?this.rangeSelect():this.selection.rangeStart=null,this.selection.setSelected(this.item,l))}set clrDgSelectable(l){this.item&&this.selection.lockItem(this.item,"false"===l||!1===l),this._selectable=l}get clrDgSelectable(){return!this.selection.isLocked(this.item)}toggle(l=!this.selected){l!==this.selected&&(this.selected=l,this.selectedChanged.emit(l))}selectRow(l=!this.selected){this.selection.selectionType===this.SELECTION_TYPE.Single?this.selection.currentSingle=this.item:this.toggle(l)}get expanded(){return this.expand.expanded}set expanded(l){this.expand.expanded=l}toggleExpand(){this.expand.expandable&&(this.expandAnimation.updateStartHeight(),this.expanded=!this.expanded,this.expandedChange.emit(this.expanded))}set clrDgDetailOpenLabel(l){this._detailOpenLabel=l}get clrDgDetailOpenLabel(){return this._detailOpenLabel?this._detailOpenLabel:this.commonStrings.keys.open}set clrDgDetailCloseLabel(l){this._detailCloseLabel=l}get clrDgDetailCloseLabel(){return this._detailCloseLabel?this._detailCloseLabel:this.commonStrings.keys.close}set clrDgRowAriaLabel(l){this._rowAriaLabel=l}get clrDgRowAriaLabel(){return this._rowAriaLabel?this._rowAriaLabel:this.commonStrings.keys.select}ngAfterContentInit(){this.dgCells.changes.subscribe(()=>{this.dgCells.forEach(l=>{l._view.destroyed||this._scrollableCells.insert(l._view)})})}ngAfterViewInit(){this.subscriptions.push(this.displayMode.view.subscribe(l=>{for(let h=this._scrollableCells.length;h>0;h--)this._scrollableCells.detach();for(let h=this._calculatedCells.length;h>0;h--)this._calculatedCells.detach();l===If.CALCULATE?(this.displayCells=!1,this.dgCells.forEach(h=>{h._view.destroyed||this._calculatedCells.insert(h._view)})):(this.displayCells=!0,this.dgCells.forEach(h=>{h._view.destroyed||this._scrollableCells.insert(h._view)}))}),this.expand.animate.subscribe(()=>{this.expandAnimationTrigger=!this.expandAnimationTrigger}))}rangeSelect(){const l=this.items.displayed;if(!l)return;const h=l.indexOf(this.selection.rangeStart);if(this.selection.rangeStart&&this.selection.current.includes(this.selection.rangeStart)&&this.selection.shiftPressed&&-1!==h){const d=l.indexOf(this.item),f=new Set(this.selection.current.concat(l.slice(Math.min(h,d),Math.max(h,d)+1)));this.selection.clearSelection(),this.selection.current.push(...f)}else this.selection.rangeStart=this.item}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}ngOnInit(){this.wrappedInjector=new $M(s3,this.vcr),this.selection.lockItem(this.item,!1===this.clrDgSelectable)}get _view(){return this.wrappedInjector.get(s3,this.vcr).rowView}}return c.\u0275fac=function(l){return new(l||c)(N(nv),N(ev),N(tv),N(F1),N(Bc),N(o3),N(ii),N(Gn),N(Xt),N(xi),N(Af),N(Ci))},c.\u0275cmp=He({type:c,selectors:[["clr-dg-row"]],contentQueries:function(l,h,d){if(1&l&&Cn(d,N1,4),2&l){let f;vt(f=bt())&&(h.dgCells=f)}},viewQuery:function(l,h){if(1&l&&(hi(HM,5),hi(T3e,5),hi(w3e,5,ii),hi(C3e,5,ii),hi(x3e,5,ii)),2&l){let d;vt(d=bt())&&(h.expandAnimation=d.first),vt(d=bt())&&(h.detailButton=d.first),vt(d=bt())&&(h._stickyCells=d.first),vt(d=bt())&&(h._scrollableCells=d.first),vt(d=bt())&&(h._calculatedCells=d.first)}},hostAttrs:["role","rowgroup"],hostVars:5,hostBindings:function(l,h){2&l&&(Ue("aria-owns",h.id),ot("datagrid-row",!0)("datagrid-selected",h.selected))},inputs:{item:["clrDgItem","item"],selected:["clrDgSelected","selected"],clrDgSelectable:"clrDgSelectable",expanded:["clrDgExpanded","expanded"],clrDgDetailOpenLabel:"clrDgDetailOpenLabel",clrDgDetailCloseLabel:"clrDgDetailCloseLabel",clrDgRowAriaLabel:"clrDgRowAriaLabel"},outputs:{selectedChanged:"clrDgSelectedChange",expandedChange:"clrDgExpandedChange"},features:[Lt([F1,{provide:ya,useExisting:F1},{provide:d1,useExisting:F1}])],ngContentSelectors:K3e,decls:9,vars:3,consts:[["class","datagrid-row-clickable",3,"mousedown","click",4,"ngIf"],[3,"clrExpandTrigger",4,"ngIf"],[4,"ngIf"],["detail",""],["rowContent",""],["calculatedCells",""],[1,"datagrid-row-clickable",3,"mousedown","click"],[3,"clrExpandTrigger"],[3,"ngTemplateOutlet"],["role","row",1,"datagrid-row-master","datagrid-row-flex",3,"id"],[1,"datagrid-row-sticky"],["stickyCells",""],["class","datagrid-select datagrid-fixed-column datagrid-cell","role","gridcell",3,"ngClass",4,"ngIf"],["class","datagrid-row-actions datagrid-fixed-column datagrid-cell","role","gridcell",4,"ngIf"],["class","datagrid-expandable-caret datagrid-fixed-column datagrid-cell","role","gridcell",4,"ngIf"],["class","datagrid-detail-caret datagrid-fixed-column datagrid-cell",4,"ngIf"],[1,"datagrid-row-scrollable",3,"ngClass"],[1,"datagrid-scrolling-cells"],["scrollableCells",""],["role","gridcell",1,"datagrid-select","datagrid-fixed-column","datagrid-cell",3,"ngClass"],[1,"clr-checkbox-wrapper"],["type","checkbox",3,"ngModel","id","disabled","ngModelChange"],[1,"clr-control-label","clr-col-null",3,"for","click"],[1,"clr-sr-only"],["type","radio","clrRadio","",3,"id","name","value","ngModel","checked","disabled","ngModelChange"],["role","gridcell",1,"datagrid-row-actions","datagrid-fixed-column","datagrid-cell"],["role","gridcell",1,"datagrid-expandable-caret","datagrid-fixed-column","datagrid-cell"],["type","button","class","datagrid-expandable-caret-button",3,"click",4,"ngIf"],["clrSmall","",4,"ngIf"],["type","button",1,"datagrid-expandable-caret-button",3,"click"],["shape","angle",1,"datagrid-expandable-caret-icon"],["clrSmall",""],[1,"datagrid-detail-caret","datagrid-fixed-column","datagrid-cell"],["type","button","aria-haspopup","dialog",1,"datagrid-detail-caret-button",3,"click"],["detailButton",""],["shape","angle-double",1,"datagrid-detail-caret-icon"]],template:function(l,h){1&l&&(At(Z3e),ce(0,I3e,3,2,"div",0),ce(1,L3e,2,2,"clr-expandable-animation",1),ce(2,O3e,1,1,null,2),ce(3,N3e,1,0,"ng-template",null,3,io),ce(5,Y3e,16,13,"ng-template",null,4,io),xa(7,null,5)),2&l&&(z("ngIf",h.selection.rowSelectionMode),V(1),z("ngIf",!h.selection.rowSelectionMode&&h.expand.expandable),V(1),z("ngIf",!h.selection.rowSelectionMode&&!h.expand.expandable))},dependencies:[HM,x1,bn,hh,a3,ro,R_,Na,gl,Qr,QF,ql,T5e,Xi],encapsulation:2}),c})();var Xo=(()=>(function(c){c[c.WIDTH=0]="WIDTH",c[c.HIDDEN=1]="HIDDEN"}(Xo||(Xo={})),Xo))();const XK=Object.keys(Xo).map(c=>Xo[c]).filter(c=>c===parseInt(c,10));let Xh=(()=>{class c{constructor(){this.columns=[],this._cache=[]}cache(){this._cache=this.columns.map(l=>{const h={...l.value};return delete h.changes,h})}hasCache(){return!!this._cache.length}resetToLastCache(){this._cache.forEach((l,h)=>{this.columns[h].next({...l,changes:XK})}),this._cache=[]}get columnStates(){return this.columns.map(l=>l.value)}get hasHideableColumns(){return this.columnStates.filter(l=>l.hideable).length>0}emitStateChangeAt(l,h){!this.columns[l]||this.emitStateChange(this.columns[l],h)}emitStateChange(l,h){l.next({...l.value,...h})}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),qK=(()=>{class c{constructor(l,h,d,f){this.filters=l,this.sort=h,this.page=d,this.debouncer=f,this.change=this.debouncer.change.pipe(q(()=>this.state))}get state(){const l={};this.page.size>0&&(l.page={from:this.page.firstItem,to:this.page.lastItem,size:this.page.size,current:this.page.current}),this.sort.comparator&&(l.sort=this.sort.comparator instanceof rD?{by:this.sort.comparator.prop,reverse:this.sort.reverse}:{by:this.sort.comparator,reverse:this.sort.reverse});const h=this.filters.getActiveFilters();if(h.length>0){l.filters=[];for(const d of h)l.filters.push(d.state?d.state:d)}return l}}return c.\u0275fac=function(l){return new(l||c)(Oe(Wh),Oe(sD),Oe(Df),Oe(R1))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),$K=(()=>{class c{constructor(l){this.zone=l,this.listenersAdded=!1,this.destroy$=new Qe,this.config={keyGridRows:"[role=row]:not(.datagrid-placeholder)",keyGridCells:"[role=gridcell]:not(.datagrid-hidden-column):not(.datagrid-placeholder-content), [role=columnheader]:not(.datagrid-hidden-column):not(.datagrid-placeholder-content), .datagrid-detail-caret",keyGrid:"[role=grid]"}}get grid(){return this.host?.querySelector(this.config.keyGrid)}get rows(){return this.host?.querySelectorAll(this.config.keyGridRows)}get cells(){return this.host?.querySelectorAll(this.config.keyGridCells)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}addListeners(){this.listenersAdded||(this.zone.runOutsideAngular(()=>{Mu(this.grid,"mousedown").pipe(Eu(this.destroy$)).subscribe(l=>{if(1===l.buttons&&!l.ctrlKey){const h=this.cells?Array.from(this.cells).find(d=>d===l.target||d===l.target.closest(this.config.keyGridCells)):null;h&&this.setActiveCell(h)}}),Mu(this.grid,"keydown").pipe(Eu(this.destroy$)).subscribe(l=>{if((!l.target.classList.contains("drag-handle")||"ArrowLeft"!==l.code&&"ArrowRight"!==l.code)&&("ArrowUp"===l.code||"ArrowDown"===l.code||"ArrowLeft"===l.code||"ArrowRight"===l.code||"End"===l.code||"Home"===l.code||"PageUp"===l.code||"PageDown"===l.code)){const{x:h,y:d}=this.getNextItemCoordinate(l),f=this.rows?Array.from(this.rows[d].querySelectorAll(this.config.keyGridCells))[h]:null;f&&this.setActiveCell(f),l.preventDefault()}})}),this.listenersAdded=!0)}initializeKeyGrid(l){this.host=l,this.addListeners(),this.resetKeyGrid()}resetKeyGrid(){this.cells?.forEach(h=>h.setAttribute("tabindex","-1")),(this.cells?this.cells[0]:null)?.setAttribute("tabindex","0")}setActiveCell(l){const h=this.cells?Array.from(this.cells).find(m=>"0"===m.getAttribute("tabindex")):null;h&&h.setAttribute("tabindex","-1"),l.setAttribute("tabindex","0");const d=function R5e(c){const a=["a[href]","area[href]","input:not([disabled])","button:not([disabled])","select:not([disabled])","textarea:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable=true]","[role=button]:not([disabled])"].join(",");return Array.from(c.querySelectorAll(a))}(l);("columnheader"!==l.getAttribute("role")&&d[0]?d[0]:l).focus()}getNextItemCoordinate(l){let h=this.cells?Array.from(this.cells).find(T=>"0"===T.getAttribute("tabindex")):null;"Tab"===l.code&&(h=document.activeElement);const d=this.rows&&h?Array.from(this.rows).find(T=>T.contains(h)):null,f=this.rows?this.rows.length-1:0,m=this.cells?this.cells.length/this.rows.length-1:0;let g=d&&h?Array.from(d.querySelectorAll(this.config.keyGridCells)).indexOf(h):0,y=d&&h&&this.rows?Array.from(this.rows).indexOf(d):0;const _=this.host.dir,v="rtl"===_?"ArrowRight":"ArrowLeft",b="rtl"===_?"ArrowLeft":"ArrowRight",S=Math.floor(this.host?.querySelector(".datagrid").clientHeight/this.rows[0].clientHeight)-1||0;return"ArrowUp"===l.code&&0!==y?y-=1:"ArrowDown"===l.code&&y<f?y+=1:l.code===v&&0!==g?g-=1:l.code===b&&g<m?g+=1:"End"===l.code?(g=m,l.ctrlKey&&(y=f)):"Home"===l.code?(g=0,l.ctrlKey&&(y=0)):"PageUp"===l.code?y=y-S>0?y-S:0:"PageDown"===l.code&&(y=y+S<f?y+S:f),{x:g,y}}}return c.\u0275fac=function(l){return new(l||c)(Oe(Yn))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),l3=(()=>{class c{constructor(l,h,d,f,m,g,y,_,v,b,S,T,x,E,I,M){this.organizer=l,this.items=h,this.expandableRows=d,this.selection=f,this.rowActionService=m,this.stateProvider=g,this.displayMode=y,this.renderer=_,this.detailService=v,this.document=b,this.el=S,this.page=T,this.commonStrings=x,this.columnsService=E,this.keyNavigation=I,this.zone=M,this.SELECTION_TYPE=Fi,this.refresh=new st(!1),this.selectedChanged=new st(!1),this.singleSelectedChanged=new st(!1),this.clrDgSingleSelectionAriaLabel=this.commonStrings.keys.singleSelectionAriaLabel,this.clrDgSingleActionableAriaLabel=this.commonStrings.keys.singleActionableAriaLabel,this.clrDetailExpandableAriaLabel=this.commonStrings.keys.detailExpandableAriaLabel,this.clrDgDisablePageFocus=!1,this._subscriptions=[];const D=Zs();this.selectAllId="clr-dg-select-all-"+D,this.detailService.id=D}get loading(){return this.items.loading}set loading(l){this.items.loading=l}dataChanged(){this.items.refresh()}set selected(l){this.selection.selectionType=l?Fi.Multi:Fi.None,this.selection.updateCurrent(l,!1)}set singleSelected(l){this.selection.selectionType=Fi.Single,l?this.selection.currentSingle=l:this.selection.currentSingle&&(this.selection.currentSingle=null)}set clrDgPreserveSelection(l){this.selection.preserveSelection=l}set rowSelectionMode(l){this.selection.rowSelectionMode=l}set trackBy(l){this.items.datagridTrackBy=l}get allSelected(){return this.selection.isAllSelected()}set allSelected(l){this.selection.toggleAll()}ngAfterContentInit(){this.items.smart||(this.items.all=this.rows.map(l=>l.item)),this._subscriptions.push(this.rows.changes.subscribe(()=>{this.items.smart||(this.items.all=this.rows.map(l=>l.item));for(let l=this._displayedRows.length-1;l>=0;l--)this._displayedRows.get(l).destroyed&&this._displayedRows.remove(l);if(this.rows.forEach(l=>{this._displayedRows.insert(l._view)}),this.detailService.state&&this.detailService.isOpen){const l=this.items.canTrackBy()?this.rows.find(h=>this.items.trackBy(h.item)===this.items.trackBy(this.detailService.state)):void 0;l?this.detailService.open(l.item,l.detailButton.nativeElement):this.detailService.close()}}))}ngAfterViewInit(){this.keyNavigation.initializeKeyGrid(this.el.nativeElement),this.refresh.emit(this.stateProvider.state),this._subscriptions.push(this.stateProvider.change.subscribe(l=>this.refresh.emit(l)),this.selection.change.subscribe(l=>{this.selection.selectionType===Fi.Single?this.singleSelectedChanged.emit(l):this.selection.selectionType===Fi.Multi&&this.selectedChanged.emit(l)}),this.page.change.subscribe(()=>{this.keyNavigation.resetKeyGrid(),this.clrDgDisablePageFocus||this.datagridTable.nativeElement.focus()}),VC(this.columnsService.columns).subscribe(()=>this.keyNavigation?.resetKeyGrid()),this.displayMode.view.subscribe(l=>{for(let h=this._projectedDisplayColumns.length;h>0;h--)this._projectedDisplayColumns.detach();for(let h=this._projectedCalculationColumns.length;h>0;h--)this._projectedCalculationColumns.detach();for(let h=this._calculationRows.length;h>0;h--)this._calculationRows.detach();for(let h=this._displayedRows.length;h>0;h--)this._displayedRows.detach();l===If.DISPLAY?(this.renderer.removeClass(this.el.nativeElement,"datagrid-calculate-mode"),this.columns.forEach(h=>{this._projectedDisplayColumns.insert(h._view)}),this.rows.forEach(h=>{this._displayedRows.insert(h._view)})):(this.renderer.addClass(this.el.nativeElement,"datagrid-calculate-mode"),this.columns.forEach(h=>{this._projectedCalculationColumns.insert(h._view)}),this.rows.forEach(h=>{this._calculationRows.insert(h._view)}))})),this.zone.runOutsideAngular(()=>{this._subscriptions.push(Mu(this.document.body,"keydown").subscribe(l=>{"Shift"===l.key&&(this.selection.shiftPressed=!0)}),Mu(this.document.body,"keyup").subscribe(l=>{"Shift"===l.key&&(this.selection.shiftPressed=!1)}))})}ngOnDestroy(){this._subscriptions.forEach(l=>l.unsubscribe())}resize(){this.organizer.resize()}}return c.\u0275fac=function(l){return new(l||c)(N(km),N(Af),N(tv),N(nv),N(ev),N(qK),N(o3),N(Gn),N(Bc),N(Ci),N(Xt),N(Df),N(xi),N(Xh),N($K),N(Yn))},c.\u0275cmp=He({type:c,selectors:[["clr-datagrid"]],contentQueries:function(l,h,d){if(1&l&&(Cn(d,jK,5),Cn(d,e3,5),Cn(d,oD,4),Cn(d,lD,4)),2&l){let f;vt(f=bt())&&(h.iterator=f.first),vt(f=bt())&&(h.placeholder=f.first),vt(f=bt())&&(h.columns=f),vt(f=bt())&&(h.rows=f)}},viewQuery:function(l,h){if(1&l&&(hi(J3e,5,ii),hi(Q3e,5,Xt),hi(e4e,5,ii),hi(t4e,5,ii),hi(n4e,5,ii),hi(i4e,5,ii)),2&l){let d;vt(d=bt())&&(h.scrollableColumns=d.first),vt(d=bt())&&(h.datagridTable=d.first),vt(d=bt())&&(h._projectedDisplayColumns=d.first),vt(d=bt())&&(h._projectedCalculationColumns=d.first),vt(d=bt())&&(h._displayedRows=d.first),vt(d=bt())&&(h._calculationRows=d.first)}},hostVars:4,hostBindings:function(l,h){2&l&&ot("datagrid-host",!0)("datagrid-detail-open",h.detailService.isOpen)},inputs:{loading:["clrDgLoading","loading"],selected:["clrDgSelected","selected"],singleSelected:["clrDgSingleSelected","singleSelected"],clrDgSingleSelectionAriaLabel:"clrDgSingleSelectionAriaLabel",clrDgSingleActionableAriaLabel:"clrDgSingleActionableAriaLabel",clrDetailExpandableAriaLabel:"clrDetailExpandableAriaLabel",clrDgDisablePageFocus:"clrDgDisablePageFocus",clrDgPreserveSelection:"clrDgPreserveSelection",rowSelectionMode:["clrDgRowSelection","rowSelectionMode"],trackBy:["clrDgItemsTrackBy","trackBy"]},outputs:{refresh:"clrDgRefresh",selectedChanged:"clrDgSelectedChange",singleSelectedChanged:"clrDgSingleSelectedChange"},features:[Lt([nv,sD,Wh,Df,Af,km,ev,tv,R1,Bc,qK,Qk,Xh,o3,$K])],ngContentSelectors:h4e,decls:32,vars:7,consts:[[1,"datagrid-outer-wrapper"],[1,"datagrid-inner-wrapper"],[1,"datagrid"],["datagrid",""],[1,"datagrid-table-wrapper"],["role","grid","tabindex","-1",1,"datagrid-table"],["datagridTable",""],["role","rowgroup",1,"datagrid-header"],["role","row",1,"datagrid-row"],[1,"datagrid-row-master","datagrid-row-flex"],[1,"datagrid-row-sticky"],["role","columnheader","class","datagrid-column datagrid-select datagrid-fixed-column",3,"keydown.space",4,"ngIf"],["role","columnheader","class","datagrid-column datagrid-select datagrid-fixed-column",4,"ngIf"],["role","columnheader","class","datagrid-column datagrid-row-actions datagrid-fixed-column",4,"ngIf"],["role","columnheader","class","datagrid-column datagrid-expandable-caret datagrid-fixed-column",4,"ngIf"],[1,"datagrid-row-scrollable"],["projectedDisplayColumns",""],["displayedRows",""],[4,"ngIf"],["class","datagrid-spinner",4,"ngIf"],[1,"datagrid-calculation-table"],[1,"datagrid-calculation-header"],["projectedCalculationColumns",""],["calculationRows",""],["role","columnheader",1,"datagrid-column","datagrid-select","datagrid-fixed-column",3,"keydown.space"],[1,"clr-checkbox-wrapper"],["type","checkbox","tabindex","-1",3,"id","ngModel","ngModelChange"],[1,"clr-control-label","clr-col-null",3,"for"],[1,"clr-sr-only"],[1,"datagrid-column-separator"],["role","columnheader",1,"datagrid-column","datagrid-select","datagrid-fixed-column"],["role","columnheader",1,"datagrid-column","datagrid-row-actions","datagrid-fixed-column"],["role","columnheader",1,"datagrid-column","datagrid-expandable-caret","datagrid-fixed-column"],[1,"datagrid-spinner"],["clrMedium",""]],template:function(l,h){1&l&&(At(u4e),ze(0),U(1,"div",0)(2,"div",1)(3,"div",2,3)(5,"div",4)(6,"div",5,6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10),ce(12,r4e,7,5,"div",11),ce(13,s4e,2,1,"div",12),ce(14,o4e,2,1,"div",13),ce(15,a4e,2,1,"div",14),H(),U(16,"div",15),xa(17,null,16),H()()()(),xa(19,null,17),ze(21,1),ce(22,l4e,1,0,"clr-dg-placeholder",18),H()()(),ze(23,2),ce(24,c4e,3,0,"div",19),H(),ze(25,3),H(),U(26,"div",20)(27,"div",21),xa(28,null,22),H(),xa(30,null,23),H()),2&l&&(V(3),Ue("aria-hidden",!!h.detailService.isOpen||null),V(9),z("ngIf",h.selection.selectionType===h.SELECTION_TYPE.Multi),V(1),z("ngIf",h.selection.selectionType===h.SELECTION_TYPE.Single),V(1),z("ngIf",h.rowActionService.hasActionableRow),V(1),z("ngIf",h.expandableRows.hasExpandableRow||h.detailService.enabled),V(7),z("ngIf",!h.placeholder),V(2),z("ngIf",h.loading))},dependencies:[e3,x1,bn,a3,R_,Na,gl,Qr],encapsulation:2}),c})(),c3=(()=>{class c{constructor(l){this.columnsService=l,this.allSelected=new st}get clrAllSelected(){return this.allSelected.asObservable()}hideableColumns(){return this.columnsService.columns.filter(l=>l.value.hideable)}get allHideablesVisible(){return 0===this.hideableColumns().filter(l=>l.value.hidden).length}selectAll(){this.hideableColumns().forEach(l=>this.columnsService.emitStateChange(l,{hidden:!1,changes:[Xo.HIDDEN]})),this.allSelected.next(!0)}}return c.\u0275fac=function(l){return new(l||c)(N(Xh))},c.\u0275cmp=He({type:c,selectors:[["clr-dg-column-toggle-button"]],outputs:{clrAllSelected:"clrAllSelected"},ngContentSelectors:yn,decls:2,vars:1,consts:[["type","button",1,"btn","btn-sm","btn-link","switch-button",3,"disabled","click"]],template:function(l,h){1&l&&(At(),U(0,"button",0),De("click",function(){return h.selectAll()}),ze(1),H()),2&l&&z("disabled",h.allHideablesVisible)},encapsulation:2}),c})(),YK=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["clr-dg-column-toggle-title"]],ngContentSelectors:yn,decls:1,vars:0,template:function(l,h){1&l&&(At(),ze(0))},encapsulation:2}),c})();const ZK=c=>c;let KK=(()=>{class c{constructor(l){this._items=l}set trackBy(l){l!==ZK&&this._items&&(this._items.iteratorTrackBy=l)}}return c.\u0275fac=function(l){return new(l||c)(N(Af,8))},c.\u0275dir=Ke({type:c,selectors:[["","ngForTrackBy",""]],inputs:{trackBy:["ngForTrackBy","trackBy"]}}),c})(),u3=(()=>{class c{constructor(l,h,d){this.commonStrings=l,this.columnsService=h,this.popoverId=Zs(),this.smartPosition={axis:ho.VERTICAL,side:Fa.BEFORE,anchor:Ti.START,content:Ti.START},this.trackByFn=ZK,this.subscription=d.openChange.subscribe(f=>this.openState=f)}get allColumnsVisible(){return this._allColumnsVisible}set allColumnsVisible(l){this._allColumnsVisible=l}ngOnDestroy(){this.subscription.unsubscribe()}get hideableColumnStates(){return this.columnsService.columns.filter(h=>h.value.hideable).map(h=>h.value)}get hasOnlyOneVisibleColumn(){return this.columnsService.columns.length-this.hideableColumnStates.length==0&&1===this.hideableColumnStates.filter(h=>!h.hidden).length}toggleColumnState(l,h){const d=this.columnsService.columns.filter(f=>f.value===l)[0];this.columnsService.emitStateChange(d,{hidden:h,changes:[Xo.HIDDEN]})}toggleSwitchPanel(){this.openState=!this.openState}allColumnsSelected(){this.allSelectedElement.nativeElement.focus()}}return c.\u0275fac=function(l){return new(l||c)(N(xi),N(Xh),N(zi))},c.\u0275cmp=He({type:c,selectors:[["clr-dg-column-toggle"]],contentQueries:function(l,h,d){if(1&l&&(Cn(d,YK,5),Cn(d,c3,5)),2&l){let f;vt(f=bt())&&(h.customToggleTitle=f.first),vt(f=bt())&&(h.customToggleButton=f.first)}},viewQuery:function(l,h){if(1&l&&hi(f4e,5,Xt),2&l){let d;vt(d=bt())&&(h.allSelectedElement=d.first)}},hostVars:4,hostBindings:function(l,h){2&l&&ot("column-switch-wrapper",!0)("active",h.openState)},features:[Lt([Uh,H_,zi])],ngContentSelectors:b4e,decls:3,vars:8,consts:[["role","button","type","button","clrPopoverAnchor","","clrPopoverOpenCloseButton","",1,"btn","btn-sm","column-toggle--action"],["class","column-switch","role","dialog","clrFocusTrap","",3,"id",4,"clrPopoverContent","clrPopoverContentAt","clrPopoverContentOutsideClickToClose","clrPopoverContentScrollToClose"],["role","dialog","clrFocusTrap","",1,"column-switch",3,"id"],[1,"switch-header"],["tabindex","-1",1,"clr-sr-only"],["allSelected",""],[4,"ngIf"],["clrPopoverCloseButton","","type","button",1,"btn","btn-sm","btn-link","toggle-switch-close-button"],["shape","window-close","aria-hidden","true"],[1,"clr-sr-only"],[1,"switch-content","list-unstyled"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"switch-footer"],[3,"clrAllSelected",4,"ngIf"],["clrCheckbox","","type","checkbox",3,"disabled","ngModel","ngModelChange"],[3,"ngTemplateOutlet"],[3,"clrAllSelected"]],template:function(l,h){1&l&&(At(v4e),U(0,"button",0),ve(1),H(),ce(2,_4e,16,10,"div",1)),2&l&&(Ue("aria-controls",h.popoverId)("aria-owns",h.popoverId)("aria-expanded",h.openState),V(1),pr(" ",h.commonStrings.keys.pickColumns," "),V(1),z("clrPopoverContent",h.openState)("clrPopoverContentAt",h.smartPosition)("clrPopoverContentOutsideClickToClose",!0)("clrPopoverContentScrollToClose",!0))},dependencies:[w1,c3,g1,_1,y1,Mf,bn,lK,Xi,Er,KK,R_,C1,Na,gl,Qr,hh],encapsulation:2}),c})(),QK=(()=>{class c{constructor(l,h,d,f){this.selection=l,this.detailService=h,this.columnsService=d,this.commonStrings=f,this.SELECTION_TYPE=Fi}get hasHideableColumns(){return this.columnsService.hasHideableColumns}}return c.\u0275fac=function(l){return new(l||c)(N(nv),N(Bc),N(Xh),N(xi))},c.\u0275cmp=He({type:c,selectors:[["clr-dg-footer"]],contentQueries:function(l,h,d){if(1&l&&Cn(d,u3,5),2&l){let f;vt(f=bt())&&(h.toggle=f.first)}},hostVars:2,hostBindings:function(l,h){2&l&&ot("datagrid-footer",!0)},ngContentSelectors:M4e,decls:3,vars:2,consts:[[4,"ngIf"],[1,"clr-form-control-disabled"],[1,"datagrid-footer-select"],["clrCheckbox","","type","checkbox","checked","checked","disabled",""],[1,"clr-sr-only"],[1,"datagrid-footer-description"]],template:function(l,h){1&l&&(At(E4e),ce(0,w4e,8,2,"ng-container",0),ce(1,x4e,5,1,"ng-container",0),ze(2)),2&l&&(z("ngIf",h.selection.selectionType===h.SELECTION_TYPE.Multi&&h.selection.current.length>0),V(1),z("ngIf",!h.detailService.isOpen))},dependencies:[w1,u3,bn,C1,Qr],encapsulation:2}),c})();const h3=new Vt("COLUMN_STATE"),B5e={provide:h3,useFactory:function V5e(){return new Ui({changes:[]})}},iv="datagrid-fixed-width",cD="datagrid-hidden-column";let uD=(()=>{class c{constructor(l,h,d){this.el=l,this.renderer=h,this.subscriptions=[],this.subscriptions.push(d.filterRenderSteps(Tl.CLEAR_WIDTHS).subscribe(()=>this.clearWidth()))}set columnState(l){this.stateSubscription&&this.stateSubscription.unsubscribe(),this.runAllChanges=XK,this.stateSubscription=l.subscribe(h=>this.stateChanges(h))}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe()),this.stateSubscription&&this.stateSubscription.unsubscribe()}stateChanges(l){this.runAllChanges&&(l.changes=this.runAllChanges,delete this.runAllChanges),l.changes&&l.changes.length&&l.changes.forEach(h=>{switch(h){case Xo.WIDTH:this.setWidth(l);break;case Xo.HIDDEN:this.setHidden(l)}})}clearWidth(){this.renderer.removeClass(this.el.nativeElement,iv),this.renderer.setStyle(this.el.nativeElement,"width",null)}setWidth(l){l.strictWidth?this.renderer.addClass(this.el.nativeElement,iv):this.renderer.removeClass(this.el.nativeElement,iv),this.renderer.setStyle(this.el.nativeElement,"width",l.width+"px")}setHidden(l){l.hidden?this.renderer.addClass(this.el.nativeElement,cD):this.renderer.removeClass(this.el.nativeElement,cD)}}return c.\u0275fac=function(l){return new(l||c)(N(Xt),N(Gn),N(km))},c.\u0275dir=Ke({type:c,selectors:[["clr-dg-cell"]]}),c})(),hD=(()=>{class c{constructor(l,h,d,f,m,g,y){this.el=l,this.renderer=h,this.organizer=d,this.domAdapter=f,this.columnResizerService=m,this.columnsService=g,this.columnState=y,this.resizeEmitter=new st,this.widthSet=!1,this.autoSet=!1,this.subscriptions=[],this.subscriptions.push(this.organizer.filterRenderSteps(Tl.CLEAR_WIDTHS).subscribe(()=>this.clearWidth())),this.subscriptions.push(y.subscribe(_=>this.stateChanges(_)))}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}stateChanges(l){l.changes&&l.changes.length&&l.changes.forEach(h=>{switch(h){case Xo.WIDTH:this.setWidth(l);break;case Xo.HIDDEN:this.setHidden(l)}})}clearWidth(){this.widthSet&&!this.columnResizerService.resizedBy&&this.renderer.setStyle(this.el.nativeElement,"width",null),this.autoSet&&this.renderer.removeClass(this.el.nativeElement,iv)}detectStrictWidth(){return this.columnResizerService.resizedBy?this.columnResizerService.widthAfterResize:this.autoSet?0:this.domAdapter.userDefinedWidth(this.el.nativeElement)}computeWidth(l){let h=l;return h||(h=this.domAdapter.scrollWidth(this.el.nativeElement)),h}getColumnWidthState(){const l=this.detectStrictWidth();return{width:this.computeWidth(l),strictWidth:l}}setColumnState(l){this.columnsService.columns[l]=this.columnState}setWidth(l){l.strictWidth?(this.columnResizerService.resizedBy&&(this.resizeEmitter.emit(l.width),this.renderer.setStyle(this.el.nativeElement,"width",l.width+"px"),this.widthSet=!1),this.renderer.addClass(this.el.nativeElement,iv),this.autoSet=!1):(this.renderer.removeClass(this.el.nativeElement,iv),this.renderer.setStyle(this.el.nativeElement,"width",l.width+"px"),this.widthSet=!0,this.autoSet=!0)}setHidden(l){l.hidden?this.renderer.addClass(this.el.nativeElement,cD):this.renderer.removeClass(this.el.nativeElement,cD)}}return c.\u0275fac=function(l){return new(l||c)(N(Xt),N(Gn),N(km),N(_l),N(Jk),N(Xh),N(h3))},c.\u0275dir=Ke({type:c,selectors:[["clr-dg-column"]],outputs:{resizeEmitter:"clrDgColumnResize"},features:[Lt([Jk,B5e])]}),c})(),j5e=(()=>{class c{userDefinedWidth(l){return 0}scrollBarWidth(l){return 0}scrollWidth(l){return 0}computedHeight(l){return 0}clientRect(l){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}minWidth(l){return 0}focus(l){}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),dD=(()=>{class c{constructor(l){this.columnsService=l,this.subscriptions=[]}ngAfterContentInit(){this.setColumnState(),this.subscriptions.push(this.cells.changes.subscribe(()=>{this.setColumnState()}))}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}setColumnState(){this.cells.length===this.columnsService.columns.length&&this.cells.forEach((l,h)=>{this.columnsService.columns[h]&&(l.columnState=this.columnsService.columns[h])})}}return c.\u0275fac=function(l){return new(l||c)(N(Xh))},c.\u0275dir=Ke({type:c,selectors:[["clr-dg-row"],["clr-dg-row-detail"]],contentQueries:function(l,h,d){if(1&l&&Cn(d,uD,4),2&l){let f;vt(f=bt())&&(h.cells=f)}}}),c})();const W5e=c=>Ei(c)?new _l:new j5e;let d3=(()=>{class c{constructor(l,h,d,f,m,g,y,_,v,b){this.organizer=l,this.items=h,this.page=d,this.domAdapter=f,this.el=m,this.renderer=g,this.detailService=y,this.tableSizeService=_,this.columnsService=v,this.ngZone=b,this._heightSet=!1,this.subscriptions=[],this.columnsSizesStable=!1,this.shouldStabilizeColumns=!0,this.subscriptions.push(this.organizer.filterRenderSteps(Tl.COMPUTE_COLUMN_WIDTHS).subscribe(()=>this.computeHeadersWidth())),this.subscriptions.push(this.page.sizeChange.subscribe(()=>{this._heightSet&&this.resetDatagridHeight()})),this.subscriptions.push(this.detailService.stateChange.subscribe(S=>this.toggleDetailPane(S))),this.subscriptions.push(this.items.change.subscribe(()=>this.shouldStabilizeColumns=!0))}ngAfterContentInit(){this.setupColumns(),this.subscriptions.push(this.headers.changes.subscribe(()=>{this.setupColumns(),this.columnsSizesStable=!1,this.stabilizeColumns()}))}ngAfterViewInit(){this.tableSizeService.table=this.el}ngAfterViewChecked(){this.shouldStabilizeColumns&&this.stabilizeColumns(),this.shouldComputeHeight()&&this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.computeDatagridHeight()})})}setupColumns(){this.headers.forEach((l,h)=>l.setColumnState(h)),this.columnsService.columns.splice(this.headers.length),this.rows.forEach(l=>l.setColumnState())}shouldComputeHeight(){return!this._heightSet&&this.page.size>0&&this.items.displayed.length===this.page.size}toggleDetailPane(l){this.headers&&(l&&!this.columnsService.hasCache()?(this.columnsService.cache(),this.headers.forEach((h,d)=>{d>0&&this.columnsService.emitStateChangeAt(d,{changes:[Xo.HIDDEN],hidden:l})})):l||this.columnsService.resetToLastCache())}computeDatagridHeight(){const l=this.domAdapter.clientRect(this.el.nativeElement).height;this.renderer.setStyle(this.el.nativeElement,"height",l+"px"),this._heightSet=!0}resetDatagridHeight(){this.renderer.setStyle(this.el.nativeElement,"height",""),this._heightSet=!1}ngOnDestroy(){this.subscriptions.forEach(l=>l.unsubscribe())}computeHeadersWidth(){const l=this.headers.length;let h=!0;this.headers.forEach((d,f)=>{const m={changes:[Xo.WIDTH],...d.getColumnWidthState()};m.strictWidth||(h=!1),l===f+1&&h&&(m.strictWidth=0),this.columnsService.emitStateChangeAt(f,m)})}stabilizeColumns(){this.shouldStabilizeColumns=!1,!this.columnsSizesStable&&this.items.displayed.length>0&&(this.organizer.resize(),this.columnsSizesStable=!0)}}return c.\u0275fac=function(l){return new(l||c)(N(km),N(Af),N(Df),N(_l),N(Xt),N(Gn),N(Bc),N(Qk),N(Xh),N(Yn))},c.\u0275dir=Ke({type:c,selectors:[["clr-datagrid"]],contentQueries:function(l,h,d){if(1&l&&(Cn(d,hD,4),Cn(d,dD,5)),2&l){let f;vt(f=bt())&&(h.headers=f),vt(f=bt())&&(h.rows=f)}},features:[Lt([{provide:_l,useFactory:W5e,deps:[kr]}])]}),c})(),X5e=(()=>{class c{constructor(){Pi.addIcons(ZLe,KLe,qS,JLe,nY,QLe,iY,ePe,tPe)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi,VK,Au,Lk,$l,D5e,BK,vK,E1,v1,Uk,WM,Om]]}),c})(),K5e=(()=>{class c{constructor(){Pi.addIcons(D_)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,Au,qi,BK]]}),c})();new bd,new Sd;let rUe=(()=>{class c{constructor(){Pi.addIcons(D_)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi,Lk]]}),c})(),sUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[X5e,K5e,rUe]}),c})();function lJ(c,a,l){return Tt.create(h=>{a(h);const d=c.subscribe(h);return()=>{d.unsubscribe(),l&&l(h)}})}let p3=(()=>{class c{constructor(l,h,d,f,m){this.renderer=l,this.parent=h,this.toggleService=d,this.focusService=f,this.platformId=m,this.id=Zs(),this._unlistenFuncs=[],this.focusBackOnTrigger=!1,this.resetChildren(),this.moveToFirstItemWhenOpen(),this.parent||this.handleRootFocus()}moveToFirstItemWhenOpen(){const l=this.toggleService.openChange.subscribe(h=>{h&&this.toggleService.originalEvent&&setTimeout(()=>{this.focusService.moveTo(this),this.focusService.move(this.parent?_a.RIGHT:_a.DOWN)})});this._unlistenFuncs.push(()=>l.unsubscribe())}handleRootFocus(){const l=this.toggleService.openChange.subscribe(h=>{h||(this.focusService.reset(this),this.focusBackOnTrigger&&this.focus()),this.focusBackOnTrigger=h});this._unlistenFuncs.push(()=>l.unsubscribe())}get trigger(){return this._trigger}set trigger(l){this._trigger=l,this.parent?this._unlistenFuncs.push(this.renderer.listen(l,"keydown.arrowright",h=>this.toggleService.toggleWithEvent(h))):(this._unlistenFuncs.push(this.renderer.listen(l,"keydown.arrowup",h=>this.toggleService.toggleWithEvent(h))),this._unlistenFuncs.push(this.renderer.listen(l,"keydown.arrowdown",h=>this.toggleService.toggleWithEvent(h))),this.focusService.listenToArrowKeys(l))}get container(){return this._container}set container(l){this._container=l,this._unlistenFuncs.push(this.renderer.listen(l,"keydown.tab",h=>this.toggleService.toggleWithEvent(h))),this.parent?this._unlistenFuncs.push(this.renderer.listen(l,"keydown.escape",h=>{this.focusService.move(_a.LEFT),h.stopPropagation()})):(this.focusService.registerContainer(l),this._unlistenFuncs.push(this.renderer.listen(l,"keydown.escape",h=>this.toggleService.toggleWithEvent(h))),this._unlistenFuncs.push(this.renderer.listen(l,"blur",h=>{this.children.pipe(dh(1)).subscribe(f=>f.forEach(m=>m.blur()));const d=h.relatedTarget||document.activeElement;d&&Ei(this.platformId)&&(l.contains(d)||d===this.trigger)||(this.focusBackOnTrigger=!1,this.toggleService.open=!1)})))}focus(){this.trigger&&Ei(this.platformId)&&this.trigger.focus()}blur(){this.trigger&&Ei(this.platformId)&&this.trigger.blur()}activate(){Ei(this.platformId)&&this.trigger.click()}openAndGetChildren(){return lJ(this.children,()=>this.toggleService.open=!0)}closeAndGetThis(){return lJ(Ct(this),()=>this.toggleService.open=!1)}resetChildren(){this.children=new BF(1),this.parent?this.right=this.openAndGetChildren().pipe(q(l=>l[0])):(this.down=this.openAndGetChildren().pipe(q(l=>l[0])),this.up=this.openAndGetChildren().pipe(q(l=>l[l.length-1])))}addChildren(l){Rk.linkVertical(l),this.parent&&Rk.linkParent(l,this.closeAndGetThis(),_a.LEFT),this.children.next(l)}ngOnDestroy(){this._unlistenFuncs.forEach(l=>l()),this.focusService.detachListeners()}}return c.\u0275fac=function(l){return new(l||c)(Oe(Gn),Oe(c,12),Oe(zi),Oe(b1),Oe(kr))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();CK(p3);new bd,new Sd;var it=(()=>(function(c){c[c.RIGHT_CENTER=0]="RIGHT_CENTER",c[c.RIGHT_TOP=1]="RIGHT_TOP",c[c.RIGHT_BOTTOM=2]="RIGHT_BOTTOM",c[c.TOP_CENTER=3]="TOP_CENTER",c[c.TOP_RIGHT=4]="TOP_RIGHT",c[c.TOP_LEFT=5]="TOP_LEFT",c[c.BOTTOM_CENTER=6]="BOTTOM_CENTER",c[c.BOTTOM_RIGHT=7]="BOTTOM_RIGHT",c[c.BOTTOM_LEFT=8]="BOTTOM_LEFT",c[c.LEFT_CENTER=9]="LEFT_CENTER",c[c.LEFT_TOP=10]="LEFT_TOP",c[c.LEFT_BOTTOM=11]="LEFT_BOTTOM"}(it||(it={})),it))();const cJ="absolute";class fUe{constructor(a){this.element=a,this.scrollableElements=[],this.boundOnScrollListener=this.emitScrollEvent.bind(this),a.style.position=cJ,a.style.top=0,a.style.bottom="auto",a.style.left=0,a.style.right="auto"}anchor(a,l,h,{offsetX:d=0,offsetY:f=0,useAnchorParent:m=!1}={}){this.addScrollEventListeners(a),m&&(a=a.parentNode),a.style.position="static";const g=a.getBoundingClientRect(),y=this.element.getBoundingClientRect();let _=g.left-y.left+d,v=g.top-y.top+f;switch(l){case it.LEFT_TOP:case it.TOP_LEFT:break;case it.TOP_CENTER:_+=g.width/2;break;case it.TOP_RIGHT:case it.RIGHT_TOP:_+=g.width;break;case it.LEFT_BOTTOM:case it.BOTTOM_LEFT:v+=g.height;break;case it.BOTTOM_CENTER:v+=g.height,_+=g.width/2;break;case it.BOTTOM_RIGHT:case it.RIGHT_BOTTOM:v+=g.height,_+=g.width;break;case it.LEFT_CENTER:v+=g.height/2;break;case it.RIGHT_CENTER:v+=g.height/2,_+=g.width}switch(h){case it.LEFT_TOP:case it.TOP_LEFT:break;case it.TOP_CENTER:_-=y.width/2;break;case it.TOP_RIGHT:case it.RIGHT_TOP:_-=y.width;break;case it.LEFT_BOTTOM:case it.BOTTOM_LEFT:v-=y.height;break;case it.BOTTOM_CENTER:v-=y.height,_-=y.width/2;break;case it.BOTTOM_RIGHT:case it.RIGHT_BOTTOM:v-=y.height,_-=y.width;break;case it.LEFT_CENTER:v-=y.height/2;break;case it.RIGHT_CENTER:v-=y.height/2,_-=y.width}const b=getComputedStyle(this.element),S=parseInt(b.marginLeft,10),T=parseInt(b.marginRight,10),x=parseInt(b.marginTop,10),E=parseInt(b.marginBottom,10);switch(l){case it.LEFT_TOP:case it.TOP_LEFT:case it.TOP_RIGHT:case it.RIGHT_TOP:(h===it.BOTTOM_RIGHT||h===it.RIGHT_BOTTOM)&&(v-=E,_-=T),(h===it.BOTTOM_LEFT||h===it.LEFT_BOTTOM)&&(v-=x,_+=S),(h===it.TOP_LEFT||h===it.LEFT_TOP)&&(v+=x,_+=S),(h===it.TOP_RIGHT||h===it.RIGHT_TOP)&&(v+=x,_-=T);break;case it.LEFT_BOTTOM:case it.BOTTOM_LEFT:case it.BOTTOM_RIGHT:case it.RIGHT_BOTTOM:(h===it.BOTTOM_LEFT||h===it.LEFT_BOTTOM)&&(v-=E,_+=S),(h===it.BOTTOM_RIGHT||h===it.RIGHT_BOTTOM)&&(v-=E,_-=T),(h===it.TOP_LEFT||h===it.LEFT_TOP)&&(v+=x,_+=S),(h===it.TOP_RIGHT||h===it.RIGHT_TOP)&&(v+=x,_-=T);break;case it.TOP_CENTER:v-=E,_+=S,_-=T;break;case it.BOTTOM_CENTER:v+=x,_+=S,_-=T;break;case it.LEFT_CENTER:v+=x,v-=E,_-=T;break;case it.RIGHT_CENTER:v+=x,v-=E,_+=S}return this.element.style.transform=`translateX(${Math.round(_)}px) translateY(${Math.round(v)}px)`,this._scroll.asObservable()}release(){this.element.style.transform="",this.removeScrollEventListeners()}isPositioned(a){const l=getComputedStyle(a).position;return"relative"===l||l===cJ||"fixed"===l}emitScrollEvent(){this._scroll.next()}addScrollEventListeners(a){this._scroll=new Qe;const l=a;let h=a;for(;h&&h!==document&&(this.scrolls(h)&&(h.addEventListener("scroll",this.boundOnScrollListener),this.scrollableElements.push(h)),h===l||!this.isPositioned(h));)h=h.parentNode}removeScrollEventListeners(){for(const a of this.scrollableElements)a.removeEventListener("scroll",this.boundOnScrollListener);this.scrollableElements.length=0,this._scroll&&(this._scroll.complete(),delete this._scroll)}scrolls(a){const l=getComputedStyle(a);return"scroll"===l.overflowX||"auto"===l.overflowX||"scroll"===l.overflowY||"auto"===l.overflowY}}let g3=(()=>{class c{constructor(l,h){this.parentHost=h,this.updateAnchor=!1,this.popoverOptions={},this.closeOnOutsideClick=!1,this.documentESCListener=null,this.closeOnOutsideClickCallback=d=>{this.anchorElem.contains(d.target)||(this.toggleService.open=!1)},this.el=l.get(Xt),this.toggleService=l.get(zi),this.renderer=l.get(Gn),this.ngZone=l.get(Yn),this.ref=l.get(Ls),this.anchorElem=h.nativeElement,this.popoverInstance=new fUe(this.el.nativeElement),this.subscription=this.toggleService.openChange.subscribe(d=>{d?(this.anchor(),this.attachESCListener()):(this.release(),this.detachESCListener())}),this.toggleService.open&&(this.anchor(),this.attachESCListener())}anchor(){this.updateAnchor=!0}release(){this.detachOutsideClickListener(),this.popoverInstance.release()}ngAfterViewChecked(){this.updateAnchor&&(this.updateAnchor=!1,this.popoverInstance.anchor(this.anchorElem,this.anchorPoint,this.popoverPoint,this.popoverOptions).subscribe(()=>{this.toggleService.open=!1}),this.attachOutsideClickListener())}ngOnDestroy(){this.release(),this.detachESCListener(),this.subscription.unsubscribe()}get isOffScreen(){return!this.toggleService.open}attachESCListener(){this.popoverOptions.ignoreGlobalESCListener||this.ngZone.runOutsideAngular(()=>{this.documentESCListener=this.renderer.listen("document","keydown",l=>{l&&l.key&&Nc(l.key)===cn.Escape&&this.ngZone.run(()=>{this.toggleService.open=!1,this.ref.markForCheck()})})})}detachESCListener(){this.documentESCListener&&(this.documentESCListener(),this.documentESCListener=null)}attachOutsideClickListener(){this.closeOnOutsideClick&&this.toggleService.open&&document&&document.addEventListener&&document.addEventListener("click",this.closeOnOutsideClickCallback,!0)}detachOutsideClickListener(){this.closeOnOutsideClick&&document&&document.removeEventListener&&document.removeEventListener("click",this.closeOnOutsideClickCallback,!0)}}return c.\u0275fac=function(l){return new(l||c)(N(cr),N(Xt,4))},c.\u0275dir=Ke({type:c,hostVars:2,hostBindings:function(l,h){2&l&&ot("is-off-screen",h.isOffScreen)}}),c})(),y3=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un],$l,qi]}),c})(),v3=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275dir=Ke({type:c,selectors:[["",8,"alert-text"]]}),c})(),pJ=(()=>{class c{constructor(){Pi.addIcons(pl,rY,fl,nPe,qS)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi,y3]]}),c})(),gUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[pJ]}),c})(),Gi=(()=>{class c{}return c.NAV_LEVEL_1=1,c.NAV_LEVEL_2=2,c.NAV_CLOSE_ALL="NAV_CLOSE_ALL",c.NAV_OPEN="NAV_OPEN",c.NAV_CLOSE="NAV_CLOSE",c.NAV_TOGGLE="NAV_TOGGLE",c.NAV_CLASS_HAMBURGER_MENU="open-hamburger-menu",c.NAV_CLASS_OVERFLOW_MENU="open-overflow-menu",c.NAV_CLASS_TRIGGER_1="header-hamburger-trigger",c.NAV_CLASS_TRIGGER_2="header-overflow-trigger",c.NAV_CLASS_LEVEL_1="clr-nav-level-1",c.NAV_CLASS_LEVEL_2="clr-nav-level-2",c})();class mJ{constructor(a,l){this._controlCode=a,this._navLevel=l}get controlCode(){return this._controlCode}get navLevel(){return this._navLevel}}let mD=(()=>{class c{constructor(){this.responsiveNavList=[],this.registerNavSubject=new BF,this.controlNavSubject=new Qe,this.closeAllNavs()}get registeredNavs(){return this.registerNavSubject.asObservable()}get navControl(){return this.controlNavSubject.asObservable()}registerNav(l){!l||this.isNavRegistered(l)||(this.responsiveNavList.push(l),this.registerNavSubject.next(this.responsiveNavList))}isNavRegistered(l){return this.responsiveNavList.indexOf(l)>-1&&(console.error("Multiple clr-nav-level "+l+" attributes found. Please make sure that only one exists"),!0)}unregisterNav(l){const h=this.responsiveNavList.indexOf(l);h>-1&&(this.responsiveNavList.splice(h,1),this.registerNavSubject.next(this.responsiveNavList))}sendControlMessage(l,h){const d=new mJ(l,h);this.controlNavSubject.next(d)}closeAllNavs(){const l=new mJ(Gi.NAV_CLOSE_ALL,-999);this.controlNavSubject.next(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),gJ=(()=>{class c{constructor(l,h){this.elRef=l,this.responsiveNavService=h}ngOnInit(){this._classList=this.elRef.nativeElement.classList,this._subscription=this.responsiveNavService.navControl.subscribe({next:l=>{this.processMessage(l)}})}processMessage(l){let h=Gi.NAV_CLASS_HAMBURGER_MENU;l.controlCode===Gi.NAV_CLOSE_ALL?(this._classList.remove(Gi.NAV_CLASS_HAMBURGER_MENU),this._classList.remove(Gi.NAV_CLASS_OVERFLOW_MENU)):l.navLevel===Gi.NAV_LEVEL_1?this.controlNav(l.controlCode,h):l.navLevel===Gi.NAV_LEVEL_2&&(h=Gi.NAV_CLASS_OVERFLOW_MENU,this.controlNav(l.controlCode,h))}controlNav(l,h){l===Gi.NAV_OPEN?this._classList.add(h):l===Gi.NAV_CLOSE?this._classList.remove(h):l===Gi.NAV_TOGGLE&&this._classList.toggle(h)}ngOnDestroy(){this._subscription.unsubscribe()}}return c.\u0275fac=function(l){return new(l||c)(N(Xt),N(mD))},c.\u0275dir=Ke({type:c,selectors:[["clr-main-container"]],hostVars:2,hostBindings:function(l,h){2&l&&ot("main-container",!0)}}),c})(),yUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi]]}),c})(),b3=(()=>{class c extends U_{}return c.\u0275fac=function(){let a;return function(h){return(a||(a=Fr(c)))(h||c)}}(),c.\u0275dir=Ke({type:c,selectors:[["clr-main-container"]],features:[rn]}),c})(),yJ=(()=>{class c extends z_{constructor(l,h,d){if(!h)throw new Error("clr-header should only be used inside of a clr-main-container");super(l,h),this.responsiveNavService=d}get flavor(){return this.responsiveNavService.responsiveNavList.reduce((l,h)=>l+h,0)}}return c.\u0275fac=function(l){return new(l||c)(N(Ls),N(b3,8),N(mD))},c.\u0275dir=Ke({type:c,selectors:[["clr-header"]],features:[rn]}),c})(),_J=(()=>{class c{constructor(l,h){this.responsiveNavService=l,this.commonStrings=h,this.isNavLevel1OnPage=!1,this.isNavLevel2OnPage=!1,this.openNavLevel=null,this.responsiveNavCodes=Gi,this._subscription=this.responsiveNavService.registeredNavs.subscribe({next:d=>{this.initializeNavTriggers(d)}}),this._subscription.add(this.responsiveNavService.navControl.pipe(Ki(({controlCode:d})=>d===Gi.NAV_CLOSE||d===Gi.NAV_CLOSE_ALL)).subscribe(()=>{this.openNavLevel=null}))}get responsiveNavCommonString(){const l=this.commonStrings.keys;return this.openNavLevel!==this.responsiveNavCodes.NAV_LEVEL_1?l.responsiveNavToggleOpen:l.responsiveNavToggleClose}get responsiveOverflowCommonString(){const l=this.commonStrings.keys;return this.openNavLevel!==this.responsiveNavCodes.NAV_LEVEL_2?l.responsiveNavOverflowOpen:l.responsiveNavOverflowClose}resetNavTriggers(){this.isNavLevel1OnPage=!1,this.isNavLevel2OnPage=!1}initializeNavTriggers(l){this.resetNavTriggers(),l.length>2?console.error("More than 2 Nav Levels detected."):l.forEach(h=>{h===Gi.NAV_LEVEL_1?this.isNavLevel1OnPage=!0:h===Gi.NAV_LEVEL_2&&(this.isNavLevel2OnPage=!0)})}closeOpenNav(){this.responsiveNavService.closeAllNavs()}toggleNav(l){this.openNavLevel!==l?this.openNav(l):this.responsiveNavService.sendControlMessage(Gi.NAV_CLOSE,l)}openNav(l){this.openNavLevel=l,this.responsiveNavService.sendControlMessage(Gi.NAV_OPEN,l)}ngOnDestroy(){this._subscription.unsubscribe()}}return c.\u0275fac=function(l){return new(l||c)(N(mD),N(xi))},c.\u0275cmp=He({type:c,selectors:[["clr-header"]],hostVars:2,hostBindings:function(l,h){2&l&&ot("header",!0)},ngContentSelectors:yn,decls:4,vars:2,consts:[["type","button","class","header-hamburger-trigger",3,"click",4,"ngIf"],["type","button","class","header-overflow-trigger",3,"click",4,"ngIf"],[1,"header-backdrop",3,"click"],["type","button",1,"header-hamburger-trigger",3,"click"],["type","button",1,"header-overflow-trigger",3,"click"]],template:function(l,h){1&l&&(At(),ce(0,gVe,2,2,"button",0),ze(1),ce(2,yVe,2,2,"button",1),U(3,"div",2),De("click",function(){return h.closeOpenNav()}),H()),2&l&&(z("ngIf",h.isNavLevel1OnPage),V(2),z("ngIf",h.isNavLevel2OnPage))},dependencies:[bn],encapsulation:2}),c})();function vJ(c){const a=c.createElement("span");return a.setAttribute("tabindex","0"),a.classList.add("offscreen-focus-rebounder"),a}let Uc=(()=>{class c extends class wUe{constructor(a,l,h,d){this.renderer=a,this.active=!1,Ei(h)&&(this._document=l.get(Ci)),d.focusTrapId||(d.focusTrapId=function _Le(c="_"){return`${c}${Math.random().toString(36).substr(2,9)}`}()),this.focusTrapElement=d}enableFocusTrap(){const a=this.focusTrapElement,l=a.querySelector("[cds-first-focus]"),h=this._document.activeElement;if(kM.getCurrent()===a)throw new Error("Focus trap is already enabled for this instance.");this.firstFocusElement=l||this.focusTrapElement,function SUe(c,a){if(a&&!a.topReboundElement&&!a.bottomReboundElement){a.topReboundElement=vJ(c),a.bottomReboundElement=vJ(c);const l=a.parentElement,h=a.nextSibling;l&&(l.insertBefore(a.topReboundElement,a),h?l.insertBefore(a.bottomReboundElement,h):l.appendChild(a.bottomReboundElement))}}(this._document,a),function BOe(c){switch(c.tagName.toLowerCase()){case"input":return"hidden"!==c.getAttribute("type")&&!c.hasAttribute("disabled")&&!c.hasAttribute("readonly");case"button":case"select":case"textarea":return!c.hasAttribute("disabled");case"iframe":case"embed":case"object":return!0;case"a":case"area":return c.hasAttribute("href");case"audio":case"video":return c.hasAttribute("controls");default:return c.hasAttribute("tabindex")||"true"===c.getAttribute("contenteditable")||"button"===c.getAttribute("role")&&!c.hasAttribute("disabled")}}(a)||a.setAttribute("tabindex","-1"),h&&function GOe(c){return!!c&&c instanceof HTMLElement}(h)&&(this.previousFocus=h),kM.setCurrent(a);const d=setTimeout(()=>{this.firstFocusElement.focus(),clearTimeout(d)},10);this.onFocusInEvent=this.onFocusIn.bind(this),this.unlisten=this.renderer.listen(this._document,"focusin",this.onFocusInEvent),this.active=!0}removeFocusTrap(){this.unlisten&&this.unlisten(),function TUe(c){if(c){const a=c.parentElement;if(a){const l=c.topReboundElement,h=c.bottomReboundElement;l&&a.removeChild(l),h&&a.removeChild(h)}delete c.topReboundElement,delete c.bottomReboundElement}}(this.focusTrapElement),this.renderer.removeAttribute(this.focusTrapElement,"tabindex"),kM.activatePreviousCurrent(),this.active=!1,this.previousFocus&&this.previousFocus.focus()}onFocusIn(a){!function vUe(c,a,l){const h=kM.getCurrent()===a,d=function bUe(c,a){return c===a.topReboundElement||c===a.bottomReboundElement||!(a.contains(c)||null!==a&&a.contains(c))}(c,a);h&&d?(l=l||a).focus():c.focus()}(a.composedPath()[0],this.focusTrapElement,this.firstFocusElement)}}{constructor(l,h,d,f,m){super(f,m,l,d.nativeElement),this.responsiveNavService=h,this.elementRef=d,this._isOpen=!1,Ei(l)&&(this._document=m.get(Ci)),this._subscription=h.navControl.pipe(Ki(g=>g.navLevel===this.level),Ki(({controlCode:g})=>g===Gi.NAV_OPEN&&!this.isOpen||g===Gi.NAV_CLOSE&&this.isOpen)).subscribe(({controlCode:g})=>{g!==Gi.NAV_OPEN?this.close():this.open()}),this._subscription.add(h.navControl.pipe(Ki(({controlCode:g})=>g===Gi.NAV_CLOSE_ALL)).subscribe(()=>this.close()))}ngOnInit(){this.closeButtonAriaLabel||(this.closeButtonAriaLabel=this._level===Gi.NAV_LEVEL_1?Ek.responsiveNavToggleClose:Ek.responsiveNavOverflowClose),this.level===Gi.NAV_LEVEL_1||this.level===Gi.NAV_LEVEL_2?(this.responsiveNavService.registerNav(this.level),this.addNavClass(this.level)):console.error("Nav Level can only be 1 or 2")}ngAfterViewInit(){const l=((c,a)=>{const l=this._document.createElement("cds-internal-close-button");return l.setAttribute("icon-size","32"),l.setAttribute("aria-label",a),l.setAttribute("aria-hidden","true"),l.setAttribute("type","button"),l.setAttribute("hidden","true"),l.className="clr-nav-close",l})(0,this.closeButtonAriaLabel);this.renderer.listen(l,"click",this.close.bind(this)),this.renderer.insertBefore(this.elementRef.nativeElement,l,this.elementRef.nativeElement.firstChild),this._document.body.clientWidth<992&&this.close()}addNavClass(l){const h=this.elementRef.nativeElement.classList;l===Gi.NAV_LEVEL_1?h.add(Gi.NAV_CLASS_LEVEL_1):l===Gi.NAV_LEVEL_2&&h.add(Gi.NAV_CLASS_LEVEL_2)}get level(){return this._level}get responsiveNavCodes(){return Gi}get isOpen(){return this._isOpen}onResize(l){l.target.innerWidth<992&&this.isOpen?this.close():this.showNavigation()}open(){this._isOpen=!0,this.showNavigation(),this.enableFocusTrap(),this.showCloseButton(),this.responsiveNavService.sendControlMessage(Gi.NAV_OPEN,this.level)}close(){this._isOpen=!1,this.hideNavigation(),this.removeFocusTrap(),this.hideCloseButton(),this.responsiveNavService.sendControlMessage(Gi.NAV_CLOSE,this.level)}onMouseClick(l){let h=l;const d=this.elementRef.nativeElement;for(;h;){if(h===d)return;if(h.classList.contains("nav-link")&&this._document.body.clientWidth<992)return void this.close();h=h.parentNode}}hideNavigation(){this.renderer.setAttribute(this.elementRef.nativeElement,"aria-hidden","true"),this.renderer.setAttribute(this.elementRef.nativeElement,"hidden","true")}showNavigation(){this.renderer.setAttribute(this.elementRef.nativeElement,"aria-hidden","false"),this.renderer.removeAttribute(this.elementRef.nativeElement,"hidden")}hideCloseButton(){this.renderer.setAttribute(this.elementRef.nativeElement,"aria-hidden","true"),this.renderer.setAttribute(this.elementRef.nativeElement.querySelector(".clr-nav-close"),"hidden","true")}showCloseButton(){this.renderer.setAttribute(this.elementRef.nativeElement.querySelector(".clr-nav-close"),"aria-hidden","false"),this.renderer.removeAttribute(this.elementRef.nativeElement.querySelector(".clr-nav-close"),"hidden")}ngOnDestroy(){this.responsiveNavService.unregisterNav(this.level),this._subscription.unsubscribe()}}return c.\u0275fac=function(l){return new(l||c)(N(kr),N(mD),N(Xt),N(Gn),N(cr))},c.\u0275dir=Ke({type:c,selectors:[["","clr-nav-level",""]],hostBindings:function(l,h){1&l&&De("resize",function(f){return h.onResize(f)},0,r2)("click",function(f){return h.onMouseClick(f.target)})},inputs:{_level:["clr-nav-level","_level"],closeButtonAriaLabel:["closeAriaLabel","closeButtonAriaLabel"]},features:[rn]}),c})(),xUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi,y3]]}),c})(),EUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})();new Vt("TABS_ID");let PUe=(()=>{class c{constructor(){Pi.addIcons(tY)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,$l,qi,EUe,Uk],$l]}),c})(),w3=(()=>{class c{constructor(){this.navGroupCount=0}registerNavGroup(){this.navGroupCount++}unregisterNavGroup(){this.navGroupCount--}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),C3=(()=>{class c{constructor(){this._icons=0}get hasIcons(){return this._icons>0}registerIcon(){this._icons++}unregisterIcon(){this._icons--}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),x3=(()=>{class c{constructor(){this._animateOnCollapsed=new Qe,this._collapsedChanged=new Qe,this._collapsed=!1,this._collapsible=!1}get animateOnCollapsed(){return this._animateOnCollapsed.asObservable()}get collapsedChanged(){return this._collapsedChanged.asObservable()}get collapsed(){return this._collapsed}set collapsed(l){l=!!l,this.collapsible&&this._collapsed!==l&&this.updateCollapseBehavior(l)}get collapsible(){return this._collapsible}set collapsible(l){this._collapsible!==(l=!!l)&&(!l&&this.collapsed&&this.updateCollapseBehavior(!1),this._collapsible=l)}updateCollapseBehavior(l){this._animateOnCollapsed.next(l),this._collapsed=l,this._collapsedChanged.next(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),Ou=(()=>{class c{constructor(l,h,d,f){this._navService=l,this._navIconService=h,this._navGroupRegistrationService=d,this.commonStrings=f,this._collapsedChanged=new st(!0),this._sub=this._navService.collapsedChanged.subscribe(m=>{this._collapsedChanged.emit(m)})}get collapsible(){return this._navService.collapsible}set collapsible(l){this._navService.collapsible=l}get collapsed(){return this._navService.collapsed}set collapsed(l){this._navService.collapsed=l}get hasNavGroups(){return this._navGroupRegistrationService.navGroupCount>0}get hasIcons(){return this._navIconService.hasIcons}get ariaExpanded(){return this.collapsible?this.collapsed?"false":"true":null}toggleByButton(){this.collapsed=!this.collapsed}ngOnDestroy(){this._sub.unsubscribe()}}return c.\u0275fac=function(l){return new(l||c)(N(x3),N(C3),N(w3),N(xi))},c.\u0275cmp=He({type:c,selectors:[["clr-vertical-nav"]],hostAttrs:[1,"clr-vertical-nav"],hostVars:6,hostBindings:function(l,h){2&l&&ot("is-collapsed",h.collapsed)("has-nav-groups",h.hasNavGroups)("has-icons",h.hasIcons)},inputs:{collapsible:["clrVerticalNavCollapsible","collapsible"],collapsed:["clrVerticalNavCollapsed","collapsed"]},outputs:{_collapsedChanged:"clrVerticalNavCollapsedChange"},features:[Lt([x3,C3,w3])],ngContentSelectors:yn,decls:4,vars:2,consts:[["type","button","class","nav-trigger",3,"on-collapse","click",4,"ngIf"],[1,"nav-content"],["class","nav-btn","aria-hidden","true","tabindex","-1",3,"click",4,"ngIf"],["type","button",1,"nav-trigger",3,"click"],["shape","angle-double",1,"nav-trigger-icon"],["aria-hidden","true","tabindex","-1",1,"nav-btn",3,"click"]],template:function(l,h){1&l&&(At(),ce(0,DVe,2,6,"button",0),U(1,"div",1),ze(2),ce(3,AVe,1,1,"button",2),H()),2&l&&(z("ngIf",h.collapsible),V(3),z("ngIf",h.collapsible&&h.collapsed))},dependencies:[bn,Xi],encapsulation:2}),c})(),E3=(()=>{class c{constructor(){this._expandChange=new Qe}get expandChange(){return this._expandChange.asObservable()}expand(){this._expandChange.next(!0)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();const U1="expanded",$h="collapsed";let Nu=(()=>{class c{constructor(l,h,d,f,m){this._itemExpand=l,this._navGroupRegistrationService=h,this._navGroupService=d,this._navService=f,this.commonStrings=m,this.wasExpanded=!1,this.groupLabel=this.commonStrings.keys.verticalNavGroupToggle,this.expandedChange=new st(!0),this._subscriptions=[],this._expandAnimationState=$h,this._navGroupRegistrationService.registerNavGroup(),this._subscriptions.push(this._itemExpand.expandChange.subscribe(g=>{g&&this.expandAnimationState===$h?(this._navService.collapsed&&(this._navService.collapsed=!1),this.expandAnimationState=U1):!g&&this.expandAnimationState===U1&&(this.expandAnimationState=$h)})),this._subscriptions.push(this._navService.animateOnCollapsed.subscribe(g=>{g&&this.expanded?(this.wasExpanded=!0,this.expandAnimationState=$h):!g&&this.wasExpanded&&(this.expandGroup(),this.wasExpanded=!1)})),this._subscriptions.push(this._navGroupService.expandChange.subscribe(g=>{g&&!this.expanded&&this.expandGroup()}))}get expanded(){return this._itemExpand.expanded}set expanded(l){this._itemExpand.expanded!==l&&(this._itemExpand.expanded=l,this.expandedChange.emit(l))}set userExpandedInput(l){this.expanded!==(l=!!l)&&this.toggleExpand()}expandGroup(){this.expanded=!0,this.expandAnimationState=U1}collapseGroup(){this.expandAnimationState=$h}expandAnimationDone(l){l.toState===$h&&(this.expanded=!1)}get expandAnimationState(){return this._expandAnimationState}set expandAnimationState(l){l!==this._expandAnimationState&&(this._expandAnimationState=l)}toggleExpand(){this.expanded?this.collapseGroup():(this._navService.collapsed&&(this._navService.collapsed=!1),this.expandGroup())}ngAfterContentInit(){this._navService.collapsed&&this.expanded&&(this.wasExpanded=!0,this.expandAnimationState=$h)}ngOnDestroy(){this._subscriptions.forEach(l=>l.unsubscribe()),this._navGroupRegistrationService.unregisterNavGroup()}}return c.\u0275fac=function(l){return new(l||c)(N(ya),N(w3),N(E3),N(x3),N(xi))},c.\u0275cmp=He({type:c,selectors:[["clr-vertical-nav-group"]],hostAttrs:[1,"nav-group"],hostVars:2,hostBindings:function(l,h){2&l&&ot("is-expanded",h.expanded)},inputs:{groupLabel:["clrVerticalNavGroupLabel","groupLabel"],userExpandedInput:["clrVerticalNavGroupExpanded","userExpandedInput"]},outputs:{expandedChange:"clrVerticalNavGroupExpandedChange"},features:[Lt([ya,E3])],ngContentSelectors:RVe,decls:9,vars:5,consts:[[1,"nav-group-content"],["type","button",1,"nav-group-trigger",3,"click"],[1,"nav-group-text"],["shape","angle",1,"nav-group-trigger-icon"],[1,"nav-group-children"]],template:function(l,h){1&l&&(At(IVe),U(0,"div",0),ze(1),U(2,"button",1),De("click",function(){return h.toggleExpand()}),ze(3,1),U(4,"div",2),ze(5,2),H(),xe(6,"cds-icon",3),H()(),U(7,"div",4),De("@clrExpand.done",function(f){return h.expandAnimationDone(f)}),ze(8,3),H()),2&l&&(V(2),Ue("aria-expanded",h.expanded)("aria-label",h.groupLabel),V(4),Ue("direction",h.expanded?"down":"right")("title",h.expanded?h.commonStrings.keys.collapse:h.commonStrings.keys.expand),V(1),z("@clrExpand",h.expandAnimationState))},dependencies:[Xi],encapsulation:2,data:{animation:[ml("clrExpand",[gM(U1,vi({height:"*"})),gM($h,vi({height:0,visibility:"hidden"})),Ns(`${U1} <=> ${$h}`,Co("0.2s ease-in-out"))])]}}),c})(),Fu=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["clr-vertical-nav-group-children"]],ngContentSelectors:yn,decls:1,vars:0,template:function(l,h){1&l&&(At(),ze(0))},encapsulation:2}),c})(),ku=(()=>{class c{constructor(l){this._verticalNavIconService=l,this._verticalNavIconService.registerIcon()}ngOnDestroy(){this._verticalNavIconService.unregisterIcon()}}return c.\u0275fac=function(l){return new(l||c)(N(C3))},c.\u0275dir=Ke({type:c,selectors:[["","clrVerticalNavIcon",""]],hostAttrs:[1,"nav-icon"]}),c})(),OUe=(()=>{class c{constructor(){Pi.addIcons(D_,iY)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi,$l,Om],$l,qi,Om]}),c})(),NUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[yUe,xUe,PUe,OUe]}),c})(),DJ=(()=>{class c{constructor(){Pi.addIcons(qS)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi,WM,Om],qi,Om]}),c})();const FUe={"top-left":{anchorPoint:it.TOP_CENTER,popoverPoint:it.BOTTOM_RIGHT,offsetY:-10,offsetX:0},"top-middle":{anchorPoint:it.TOP_CENTER,popoverPoint:it.BOTTOM_CENTER,offsetY:-10,offsetX:0},"top-right":{anchorPoint:it.TOP_CENTER,popoverPoint:it.BOTTOM_LEFT,offsetY:-10,offsetX:0},"right-top":{anchorPoint:it.RIGHT_CENTER,popoverPoint:it.LEFT_BOTTOM,offsetY:2,offsetX:14},"right-middle":{anchorPoint:it.RIGHT_CENTER,popoverPoint:it.LEFT_CENTER,offsetY:6,offsetX:14},"right-bottom":{anchorPoint:it.RIGHT_CENTER,popoverPoint:it.LEFT_TOP,offsetY:-1,offsetX:14},"bottom-right":{anchorPoint:it.BOTTOM_CENTER,popoverPoint:it.TOP_LEFT,offsetY:9,offsetX:-1},"bottom-middle":{anchorPoint:it.BOTTOM_CENTER,popoverPoint:it.TOP_CENTER,offsetY:9,offsetX:12},"bottom-left":{anchorPoint:it.BOTTOM_CENTER,popoverPoint:it.TOP_RIGHT,offsetY:9,offsetX:0},"left-bottom":{anchorPoint:it.LEFT_CENTER,popoverPoint:it.RIGHT_TOP,offsetY:0,offsetX:-14},"left-middle":{anchorPoint:it.LEFT_CENTER,popoverPoint:it.RIGHT_CENTER,offsetY:4,offsetX:-14},"left-top":{anchorPoint:it.LEFT_CENTER,popoverPoint:it.RIGHT_BOTTOM,offsetY:0,offsetX:-14},default:{anchorPoint:it.RIGHT_CENTER,popoverPoint:it.LEFT_CENTER,offsetY:6,offsetX:14}},kUe=["top-left","top-middle","top-right","right-top","right-middle","right-bottom","bottom-right","bottom-middle","bottom-left","left-bottom","left-middle","left-top"];let gD=(()=>{class c extends g3{constructor(l,h,d,f,m,g,y){if(super(l,h),this.commonStrings=d,this.signpostIdService=f,this.signpostFocusManager=m,this.platformId=g,this.signpostContentId=Zs(),!h)throw new Error("clr-signpost-content should only be used inside of a clr-signpost");this.position="right-middle",this.closeOnOutsideClick=!0,this.signpostIdService.setId(this.signpostContentId),this.document=y}close(){this.toggleService.open=!1}get position(){return this._position}set position(l){this.renderer.removeClass(this.el.nativeElement,this.position),this._position=l&&kUe.indexOf(l)>-1?l:"right-middle",this.renderer.addClass(this.el.nativeElement,this.position);const h=FUe[this.position];this.anchorPoint=h.anchorPoint,this.popoverPoint=h.popoverPoint,this.popoverOptions.offsetY=h.offsetY,this.popoverOptions.offsetX=h.offsetX}ngOnDestroy(){super.ngOnDestroy(),Ei(this.platformId)&&this.el.nativeElement.contains(this.document.activeElement)&&this.signpostFocusManager.focusTrigger()}}return c.\u0275fac=function(l){return new(l||c)(N(cr),N(Y_,8),N(xi),N(n3),N(t3),N(kr),N(Ci))},c.\u0275cmp=He({type:c,selectors:[["clr-signpost-content"]],hostVars:3,hostBindings:function(l,h){2&l&&(iu("id",h.signpostContentId),ot("signpost-content",!0))},inputs:{position:["clrPosition","position"]},features:[rn],ngContentSelectors:yn,decls:7,vars:3,consts:[[1,"signpost-wrap"],[1,"popover-pointer"],[1,"signpost-content-header"],["type","button",1,"signpost-action","close",3,"click"],["shape","window-close"],[1,"signpost-content-body"]],template:function(l,h){1&l&&(At(),U(0,"div",0),xe(1,"div",1),U(2,"div",2)(3,"button",3),De("click",function(){return h.close()}),xe(4,"cds-icon",4),H()(),U(5,"div",5),ze(6),H()()),2&l&&(V(3),Ue("aria-label",h.commonStrings.keys.signpostClose)("aria-controls",h.signpostContentId),V(1),Ue("title",h.commonStrings.keys.close))},dependencies:[Xi],encapsulation:2}),c})(),VUe=(()=>{class c{constructor(){Pi.addIcons(qS,rY)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi,Om],$l]}),c})(),HUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un],$l,qi]}),c})(),jUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[y3,VUe,HUe]}),c})(),WUe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un]]}),c})(),qUe=(()=>{class c{constructor(){Pi.addIcons(iPe,rPe,sY,sPe)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,qi,E1],qi,E1]}),c})(),JUe=(()=>{class c{constructor(){Pi.addIcons(sY)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[[Un,DJ,pJ]]}),c})(),yD=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[gUe,sUe,qi,DJ,Lk,$l,WM,Om,PBe,VBe,VK,NUe,jUe,JUe,vK,SBe,E1,WUe,v1,qUe]}),c})();function QUe(c,a){if(1&c&&(U(0,"clr-dg-column"),ve(1),H()),2&c){const l=a.$implicit;V(1),Kt(l.key)}}function eze(c,a){if(1&c&&(U(0,"clr-dg-cell"),ve(1),H()),2&c){const l=a.$implicit;V(1),Kt(l.value)}}let A3=(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["app-table-popup"]],inputs:{data:"data"},decls:6,vars:6,consts:[[4,"ngFor","ngForOf"]],template:function(l,h){1&l&&(U(0,"clr-datagrid"),ce(1,QUe,2,1,"clr-dg-column",0),ms(2,"keyvalue"),U(3,"clr-dg-row"),ce(4,eze,2,1,"clr-dg-cell",0),ms(5,"keyvalue"),H()()),2&l&&(V(1),z("ngForOf",_o(2,2,h.data)),V(3),z("ngForOf",_o(5,4,h.data)))},dependencies:[Er,l3,N1,oD,lD,uD,hD,d3,dD,Yk,P1,Zk,AC]}),c})();const tze=JSON.parse('{"type":"FeatureCollection","poperties":{"description":"This are a few test cities and locations collected with geojson.io"},"features":[{"type":"Feature","properties":{"name":"Munich"},"geometry":{"type":"Point","coordinates":[11.575899124145508,48.137740422322295]}},{"type":"Feature","properties":{"name":"Landshut"},"geometry":{"type":"Point","coordinates":[12.152938842773436,48.5370678355958]}},{"type":"Feature","properties":{"name":"Ulm"},"geometry":{"type":"Point","coordinates":[9.986572265624998,48.40003249610685]}},{"type":"Feature","properties":{"name":"Ingolstadt"},"geometry":{"type":"Point","coordinates":[11.42578125,48.75618876280552]}},{"type":"Feature","properties":{"name":"Paris"},"geometry":{"type":"Point","coordinates":[2.3291015625,48.83579746243093]}},{"type":"Feature","properties":{"name":"Dreux"},"geometry":{"type":"Point","coordinates":[1.3677978515625,48.73445537176822]}},{"type":"Feature","properties":{"name":"Meaux"},"geometry":{"type":"Point","coordinates":[2.8729248046875,48.95497369808868]}},{"type":"Feature","properties":{"name":"Rome"},"geometry":{"type":"Point","coordinates":[12.480468749999998,41.86956082699455]}},{"type":"Feature","properties":{"name":"Anzio"},"geometry":{"type":"Point","coordinates":[12.6287841796875,41.4509614012039]}},{"type":"Feature","properties":{"name":"Berlin"},"geometry":{"type":"Point","coordinates":[13.403320312499998,52.50953477032727]}},{"type":"Feature","properties":{"name":"Potsdam"},"geometry":{"type":"Point","coordinates":[13.058624267578125,52.40074312027673]}}]}');let HJ=(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["app-example-layer-description"]],inputs:{layer:"layer",description:"description"},decls:9,vars:1,consts:[[1,"custom-description"]],template:function(l,h){1&l&&(U(0,"div",0),ve(1),U(2,"p"),ve(3," This description was styled with a dynamic component as the layer.description. "),H(),U(4,"p"),ve(5," Keep in mind that this breaks @dlr-eoc/services-ogc generateResourceFromLayer() for this layer when exporting a "),U(6,"b"),ve(7,"IOwsContext"),H(),ve(8,". "),H()()),2&l&&(V(1),pr(" ",h.description,". "))},styles:[".custom-description[_ngcontent-%COMP%]{word-break:normal;color:#0072a3}.custom-description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{word-break:normal;color:#ffa52e}"]}),c})(),nze=(()=>{class c{constructor(){this.legendImages=[]}ngOnInit(){this.legendImages=this.group.layers.filter(l=>l.legendImg&&"string"==typeof l.legendImg).map(l=>({url:l.legendImg})).reverse()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["app-example-group-legend"]],inputs:{group:"group"},decls:6,vars:4,consts:[[1,"wrapper"],["width","256","height","256",1,"stacked",3,"src"],["usemap","#legendmap",3,"src"],["name","legendmap"],["shape","rect","coords","0,0,256,128","alt","top","title","Show full Image overlay","target","_blank",3,"href"],["shape","rect","coords","0,128,256,256","alt","below","title","Show full Image base","target","_blank",3,"href"]],template:function(l,h){1&l&&(U(0,"div",0),xe(1,"img",1)(2,"img",2),U(3,"map",3),xe(4,"area",4)(5,"area",5),H()()),2&l&&(V(1),z("src",h.legendImages[0].url,Ka),V(1),z("src",h.legendImages[1].url,Ka),V(2),z("href",h.legendImages[0].url,Ka),V(1),z("href",h.legendImages[1].url,Ka))},styles:[".wrapper[_ngcontent-%COMP%]{position:relative}.wrapper[_ngcontent-%COMP%]   .stacked[_ngcontent-%COMP%]{position:absolute;pointer-events:none}"]}),c})();const ize=JSON.parse('{"version":8,"name":"Positron","metadata":{"mapbox:autocomposite":false,"mapbox:groups":{"101da9f13b64a08fa4b6ac1168e89e5f":{"collapsed":false,"name":"Places"},"a14c9607bc7954ba1df7205bf660433f":{"name":"Boundaries"},"b6371a3f2f5a9932464fa3867530a2e5":{"collapsed":false,"name":"Transportation"}},"mapbox:type":"template","openmaptiles:mapbox:owner":"openmaptiles","openmaptiles:mapbox:source:url":"mapbox://openmaptiles.4qljc88t","openmaptiles:version":"3.x","maputnik:renderer":"mbgljs","maputnik:thunderforest_access_token":""},"sources":{"planet_eoc":{"type":"vector","__Comment":"The url to the tilejson is not public available so we use the tiles array to skip the request, to make use of the tms service. See https://github.com/openlayers/ol-mapbox-style/blob/v8.2.1/src/util.js#L109","url":"","tiles":["https://a.tiles.geoservice.dlr.de/service/tms/1.0.0/planet_eoc@EPSG%3A900913@pbf/{z}/{x}/{y}.pbf?flipy=true","https://b.tiles.geoservice.dlr.de/service/tms/1.0.0/planet_eoc@EPSG%3A900913@pbf/{z}/{x}/{y}.pbf?flipy=true","https://c.tiles.geoservice.dlr.de/service/tms/1.0.0/planet_eoc@EPSG%3A900913@pbf/{z}/{x}/{y}.pbf?flipy=true","https://d.tiles.geoservice.dlr.de/service/tms/1.0.0/planet_eoc@EPSG%3A900913@pbf/{z}/{x}/{y}.pbf?flipy=true"]}},"sprite":"https://openmaptiles.github.io/positron-gl-style/sprite","glyphs":"http://fonts.openmaptiles.org/{fontstack}/{range}.pbf","layers":[{"id":"background","type":"background","paint":{"background-color":"rgb(242,243,240)"}},{"id":"park","type":"fill","source":"planet_eoc","source-layer":"park","filter":["==","$type","Polygon"],"layout":{"visibility":"none"},"paint":{"fill-color":"rgb(230, 233, 229)"}},{"id":"water","type":"fill","source":"planet_eoc","source-layer":"water","filter":["all",["==","$type","Polygon"],["!=","brunnel","tunnel"]],"layout":{"visibility":"visible"},"paint":{"fill-antialias":true,"fill-color":"rgba(196, 203, 205, 1)"}},{"id":"landcover_ice_shelf","type":"fill","source":"planet_eoc","source-layer":"landcover","maxzoom":8,"filter":["all",["==","$type","Polygon"],["==","subclass","ice_shelf"]],"layout":{"visibility":"visible"},"paint":{"fill-color":"hsl(0, 0%, 98%)","fill-opacity":0.7}},{"id":"landcover_glacier","type":"fill","source":"planet_eoc","source-layer":"landcover","maxzoom":8,"filter":["all",["==","$type","Polygon"],["==","subclass","glacier"]],"layout":{"visibility":"visible"},"paint":{"fill-color":"hsl(0, 0%, 98%)","fill-opacity":{"base":1,"stops":[[0,1],[8,0.5]]}}},{"id":"landuse_residential","type":"fill","source":"planet_eoc","source-layer":"landuse","minzoom":0,"maxzoom":24,"filter":["all",["==","$type","Polygon"],["==","class",""]],"layout":{"visibility":"visible"},"paint":{"fill-color":"rgb(234, 234, 230)","fill-opacity":{"base":0.6,"stops":[[8,0.8],[9,0.6]]}}},{"id":"landcover_wood","type":"fill","source":"planet_eoc","source-layer":"landcover","minzoom":0,"filter":["all",["==","$type","Polygon"],["==","class","wood"]],"layout":{"visibility":"none"},"paint":{"fill-color":"rgb(220,224,220)","fill-opacity":{"base":1,"stops":[[0,1],[12,1]]}}},{"id":"waterway","type":"line","source":"planet_eoc","source-layer":"waterway","filter":["==","$type","LineString"],"layout":{"visibility":"visible"},"paint":{"line-color":"hsl(195, 17%, 78%)"}},{"id":"water_name","type":"symbol","source":"planet_eoc","source-layer":"water_name","filter":["==","$type","LineString"],"layout":{"symbol-placement":"line","symbol-spacing":500,"text-field":"{name:latin}\\n{name:nonlatin}","text-font":["Metropolis Medium Italic","Noto Sans Italic"],"text-rotation-alignment":"map","text-size":12},"paint":{"text-color":"rgb(157,169,177)","text-halo-blur":1,"text-halo-color":"rgb(242,243,240)","text-halo-width":1}},{"id":"building","type":"fill","source":"planet_eoc","source-layer":"building","minzoom":12,"paint":{"fill-antialias":true,"fill-color":"rgb(234, 234, 229)","fill-outline-color":"rgb(219, 219, 218)"}},{"id":"tunnel_motorway_casing","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":6,"filter":["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","motorway"]]],"layout":{"line-cap":"butt","line-join":"miter","visibility":"visible"},"paint":{"line-color":"rgb(213, 213, 213)","line-opacity":1,"line-width":{"base":1.4,"stops":[[5.8,0],[6,3],[20,40]]}}},{"id":"tunnel_motorway_inner","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":6,"filter":["all",["==","$type","LineString"],["all",["==","brunnel","tunnel"],["==","class","motorway"]]],"layout":{"line-cap":"round","line-join":"round","visibility":"visible"},"paint":{"line-color":"rgb(234,234,234)","line-width":{"base":1.4,"stops":[[4,2],[6,1.3],[20,30]]}}},{"id":"aeroway-taxiway","type":"line","metadata":{"mapbox:group":"1444849345966.4436"},"source":"planet_eoc","source-layer":"aeroway","minzoom":12,"filter":["all",["in","class","taxiway"]],"layout":{"line-cap":"round","line-join":"round","visibility":"visible"},"paint":{"line-color":"hsl(0, 0%, 88%)","line-opacity":1,"line-width":{"base":1.55,"stops":[[13,1.8],[20,20]]}}},{"id":"aeroway-runway-casing","type":"line","metadata":{"mapbox:group":"1444849345966.4436"},"source":"planet_eoc","source-layer":"aeroway","minzoom":11,"filter":["all",["in","class","runway"]],"layout":{"line-cap":"round","line-join":"round","visibility":"visible"},"paint":{"line-color":"hsl(0, 0%, 88%)","line-opacity":1,"line-width":{"base":1.5,"stops":[[11,6],[17,55]]}}},{"id":"aeroway-area","type":"fill","metadata":{"mapbox:group":"1444849345966.4436"},"source":"planet_eoc","source-layer":"aeroway","minzoom":4,"filter":["all",["==","$type","Polygon"],["in","class","runway","taxiway"]],"layout":{"visibility":"visible"},"paint":{"fill-color":"rgba(255, 255, 255, 1)","fill-opacity":{"base":1,"stops":[[13,0],[14,1]]}}},{"id":"aeroway-runway","type":"line","metadata":{"mapbox:group":"1444849345966.4436"},"source":"planet_eoc","source-layer":"aeroway","minzoom":11,"filter":["all",["in","class","runway"],["==","$type","LineString"]],"layout":{"line-cap":"round","line-join":"round","visibility":"visible"},"paint":{"line-color":"rgba(255, 255, 255, 1)","line-opacity":1,"line-width":{"base":1.5,"stops":[[11,4],[17,50]]}}},{"id":"road_area_pier","type":"fill","metadata":{},"source":"planet_eoc","source-layer":"transportation","filter":["all",["==","$type","Polygon"],["==","class","pier"]],"layout":{"visibility":"none"},"paint":{"fill-antialias":true,"fill-color":"rgb(242,243,240)"}},{"id":"road_pier","type":"line","metadata":{},"source":"planet_eoc","source-layer":"transportation","filter":["all",["==","$type","LineString"],["in","class","pier"]],"layout":{"line-cap":"round","line-join":"round","visibility":"none"},"paint":{"line-color":"rgb(242,243,240)","line-width":{"base":1.2,"stops":[[15,1],[17,4]]}}},{"id":"highway_path","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","filter":["all",["==","$type","LineString"],["==","class","path"]],"layout":{"line-cap":"round","line-join":"round","visibility":"none"},"paint":{"line-color":"rgba(238, 235, 235, 1)","line-opacity":0.9,"line-width":{"base":1.2,"stops":[[13,1],[20,10]]}}},{"id":"highway_minor","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":0,"filter":["all",["==","$type","LineString"],["in","class","minor","service","track"]],"layout":{"line-cap":"round","line-join":"round","visibility":"none"},"paint":{"line-color":"rgba(245, 244, 244, 1)","line-opacity":0.9,"line-width":{"base":1.55,"stops":[[13,1.8],[20,20]]}}},{"id":"highway_major_casing","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":11,"filter":["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary","trunk"]],"layout":{"line-cap":"butt","line-join":"miter","visibility":"none"},"paint":{"line-color":"rgb(213, 213, 213)","line-dasharray":[12,0],"line-width":{"base":1.3,"stops":[[10,3],[20,23]]}}},{"id":"highway_major_inner","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":11,"filter":["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary","trunk"]],"layout":{"line-cap":"round","line-join":"round","visibility":"none"},"paint":{"line-color":"#fff","line-width":{"base":1.3,"stops":[[10,2],[20,20]]}}},{"id":"highway_motorway_casing","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":0,"filter":["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],"layout":{"line-cap":"butt","line-join":"miter","visibility":"none"},"paint":{"line-color":"rgb(213, 213, 213)","line-dasharray":[2,0],"line-opacity":1,"line-width":{"base":1.4,"stops":[[5.8,0],[6,3],[20,40]]}}},{"id":"highway_motorway_inner","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":0,"filter":["all",["==","$type","LineString"],["all",["!in","brunnel","bridge","tunnel"],["==","class","motorway"]]],"layout":{"line-cap":"round","line-join":"round","visibility":"none"},"paint":{"line-color":{"base":1,"stops":[[5.8,"hsla(0, 0%, 85%, 0.53)"],[6,"#fff"]]},"line-width":{"base":1.4,"stops":[[4,2],[6,1.3],[20,30]]}}},{"id":"highway_motorway_subtle","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":0,"maxzoom":20,"filter":["all",["==","$type","LineString"],["==","class","motorway"]],"layout":{"line-cap":"round","line-join":"round","visibility":"none"},"paint":{"line-color":"hsla(0, 0%, 85%, 0.53)","line-width":{"base":1.4,"stops":[[4,2],[6,1.3]]}}},{"id":"railway_transit","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":16,"filter":["all",["==","$type","LineString"],["all",["==","class","transit"],["!in","brunnel","tunnel"]]],"layout":{"line-join":"round","visibility":"visible"},"paint":{"line-color":"#dddddd","line-width":3}},{"id":"railway_transit_dashline","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":16,"filter":["all",["==","$type","LineString"],["all",["==","class","transit"],["!in","brunnel","tunnel"]]],"layout":{"line-join":"round","visibility":"visible"},"paint":{"line-color":"#fafafa","line-dasharray":[3,3],"line-width":2}},{"id":"railway_service","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":16,"filter":["all",["==","$type","LineString"],["all",["==","class","rail"],["has","service"]]],"layout":{"line-join":"round","visibility":"visible"},"paint":{"line-color":"#dddddd","line-width":3}},{"id":"railway_service_dashline","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":16,"filter":["all",["==","$type","LineString"],["==","class","rail"],["has","service"]],"layout":{"line-join":"round","visibility":"visible"},"paint":{"line-color":"#fafafa","line-dasharray":[3,3],"line-width":2}},{"id":"railway","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":13,"filter":["all",["==","$type","LineString"],["all",["!has","service"],["==","class","rail"]]],"layout":{"line-join":"round","visibility":"visible"},"paint":{"line-color":"#dddddd","line-width":{"base":1.3,"stops":[[16,3],[20,7]]}}},{"id":"railway_dashline","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":13,"filter":["all",["==","$type","LineString"],["all",["!has","service"],["==","class","rail"]]],"layout":{"line-join":"round","visibility":"visible"},"paint":{"line-color":"#fafafa","line-dasharray":[3,3],"line-width":{"base":1.3,"stops":[[16,2],[20,6]]}}},{"id":"highway_motorway_bridge_casing","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":0,"filter":["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","motorway"]]],"layout":{"line-cap":"butt","line-join":"miter","visibility":"none"},"paint":{"line-color":"rgb(213, 213, 213)","line-dasharray":[2,0],"line-opacity":1,"line-width":{"base":1.4,"stops":[[5.8,0],[6,5],[20,45]]}}},{"id":"highway_motorway_bridge_inner","type":"line","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation","minzoom":0,"filter":["all",["==","$type","LineString"],["all",["==","brunnel","bridge"],["==","class","motorway"]]],"layout":{"line-cap":"round","line-join":"round","visibility":"none"},"paint":{"line-color":{"base":1,"stops":[[5.8,"hsla(0, 0%, 85%, 0.53)"],[6,"#fff"]]},"line-width":{"base":1.4,"stops":[[4,2],[6,1.3],[20,30]]}}},{"id":"highway_name_other","type":"symbol","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation_name","filter":["all",["!=","class","motorway"],["==","$type","LineString"]],"layout":{"symbol-placement":"line","symbol-spacing":350,"text-field":"{name:latin} {name:nonlatin}","text-font":["Metropolis Regular","Noto Sans Regular"],"text-max-angle":30,"text-pitch-alignment":"viewport","text-rotation-alignment":"map","text-size":10,"text-transform":"uppercase","visibility":"none"},"paint":{"text-color":"#bbb","text-halo-blur":1,"text-halo-color":"#fff","text-halo-width":2,"text-translate":[0,0]}},{"id":"highway_name_motorway","type":"symbol","metadata":{"mapbox:group":"b6371a3f2f5a9932464fa3867530a2e5"},"source":"planet_eoc","source-layer":"transportation_name","minzoom":9,"filter":["all",["==","$type","LineString"],["==","class","motorway"]],"layout":{"symbol-placement":"line","symbol-spacing":350,"text-field":"{ref}","text-font":["Metropolis Light","Noto Sans Regular"],"text-pitch-alignment":"viewport","text-rotation-alignment":"viewport","text-size":10,"visibility":"none"},"paint":{"text-color":"rgb(117, 129, 145)","text-halo-blur":1,"text-halo-color":"hsl(0, 0%, 100%)","text-halo-width":1,"text-translate":[0,2]}},{"id":"boundary_state","type":"line","metadata":{"mapbox:group":"a14c9607bc7954ba1df7205bf660433f"},"source":"planet_eoc","source-layer":"boundary","filter":["==","admin_level",4],"layout":{"line-cap":"round","line-join":"round","visibility":"none"},"paint":{"line-blur":0.4,"line-color":"rgb(230, 204, 207)","line-dasharray":[2,2],"line-opacity":1,"line-width":{"base":1.3,"stops":[[3,1],[22,15]]}}},{"id":"boundary_country_z0-4","type":"line","metadata":{"mapbox:group":"a14c9607bc7954ba1df7205bf660433f"},"source":"planet_eoc","source-layer":"boundary","maxzoom":5,"filter":["all",["==","admin_level",2],["!has","claimed_by"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-blur":{"base":1,"stops":[[0,0.4],[22,4]]},"line-color":"rgba(181, 170, 171, 1)","line-opacity":1,"line-width":{"base":1.1,"stops":[[3,1],[22,20]]}}},{"id":"boundary_country_z5-","type":"line","metadata":{"mapbox:group":"a14c9607bc7954ba1df7205bf660433f"},"source":"planet_eoc","source-layer":"boundary","minzoom":5,"filter":["==","admin_level",2],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-blur":{"base":1,"stops":[[0,0.4],[22,4]]},"line-color":"rgba(181, 170, 171, 1)","line-opacity":1,"line-width":{"base":1.1,"stops":[[3,1],[22,20]]}}},{"id":"place_suburb","type":"symbol","metadata":{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},"source":"planet_eoc","source-layer":"place","minzoom":9,"maxzoom":15,"filter":["all",["==","$type","Point"],["==","class","suburb"]],"layout":{"text-anchor":"center","text-field":"{name:latin}\\n{name:nonlatin}","text-font":["Metropolis Regular","Noto Sans Regular"],"text-justify":"center","text-offset":[0.5,0],"text-size":10,"text-transform":"uppercase","visibility":"visible"},"paint":{"text-color":"rgb(117, 129, 145)","text-halo-blur":1,"text-halo-color":"rgb(242,243,240)","text-halo-width":1}},{"id":"place_village","type":"symbol","metadata":{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},"source":"planet_eoc","source-layer":"place","minzoom":11,"maxzoom":24,"filter":["all",["==","$type","Point"],["==","class","village"]],"layout":{"icon-size":0.4,"text-anchor":"left","text-field":"{name:latin}\\n{name:nonlatin}","text-font":["Metropolis Regular","Noto Sans Regular"],"text-justify":"left","text-offset":[0.5,0.2],"text-size":10,"text-transform":"uppercase","visibility":"visible"},"paint":{"icon-opacity":0.7,"text-color":"rgb(117, 129, 145)","text-halo-blur":1,"text-halo-color":"rgb(242,243,240)","text-halo-width":1}},{"id":"place_town","type":"symbol","metadata":{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},"source":"planet_eoc","source-layer":"place","minzoom":9,"maxzoom":15,"filter":["all",["==","$type","Point"],["==","class","town"]],"layout":{"icon-image":{"base":1,"stops":[[0,"circle-11"],[8,""]]},"icon-size":0.4,"text-anchor":{"base":1,"stops":[[0,"left"],[8,"center"]]},"text-field":"{name:latin}\\n{name:nonlatin}","text-font":["Metropolis Regular","Noto Sans Regular"],"text-justify":"left","text-offset":[0.5,0.2],"text-size":10,"text-transform":"uppercase","visibility":"visible"},"paint":{"icon-opacity":0.7,"text-color":"rgb(117, 129, 145)","text-halo-blur":1,"text-halo-color":"rgb(242,243,240)","text-halo-width":1}},{"id":"place_city","type":"symbol","metadata":{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},"source":"planet_eoc","source-layer":"place","minzoom":7,"maxzoom":14,"filter":["all",["==","$type","Point"],["all",["!=","capital",2],["==","class","city"],[">","rank",3]]],"layout":{"icon-image":{"base":1,"stops":[[0,"circle-11"],[8,""]]},"icon-size":0.4,"text-anchor":{"base":1,"stops":[[0,"left"],[8,"center"]]},"text-field":"{name:latin}\\n{name:nonlatin}","text-font":["Metropolis Regular","Noto Sans Regular"],"text-justify":"left","text-offset":[0.5,0.2],"text-size":10,"text-transform":"uppercase","visibility":"visible"},"paint":{"icon-opacity":0.7,"text-color":"rgb(117, 129, 145)","text-halo-blur":1,"text-halo-color":"rgb(242,243,240)","text-halo-width":1}},{"id":"place_capital","type":"symbol","metadata":{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},"source":"planet_eoc","source-layer":"place","minzoom":3,"maxzoom":12,"filter":["all",["==","$type","Point"],["all",["==","capital",2],["==","class","city"]]],"layout":{"icon-image":{"base":1,"stops":[[0,"circle-11"],[8,""]]},"text-anchor":{"base":1,"stops":[[0,"left"],[8,"center"]]},"text-field":"{name:latin}\\n{name:nonlatin}","text-font":["Metropolis Regular","Noto Sans Regular"],"text-justify":"left","text-offset":[0.5,0.2],"text-transform":"uppercase","visibility":"visible","text-size":14,"icon-size":0},"paint":{"icon-opacity":0.7,"text-color":"rgb(117, 129, 145)","text-halo-blur":1,"text-halo-color":"rgb(242,243,240)","text-halo-width":1}},{"id":"place_city_large","type":"symbol","metadata":{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},"source":"planet_eoc","source-layer":"place","minzoom":4,"maxzoom":12,"filter":["all",["==","$type","Point"],["all",["!=","capital",2],["<=","rank",3],["==","class","city"]]],"layout":{"icon-image":{"base":1,"stops":[[0,"circle-11"],[8,""]]},"icon-size":0.4,"text-anchor":{"base":1,"stops":[[0,"left"],[8,"center"]]},"text-field":"{name:latin}\\n{name:nonlatin}","text-font":["Metropolis Regular","Noto Sans Regular"],"text-justify":"left","text-offset":[0.5,0.2],"text-size":14,"text-transform":"uppercase","visibility":"visible"},"paint":{"icon-opacity":0.7,"text-color":"rgb(117, 129, 145)","text-halo-blur":1,"text-halo-color":"rgb(242,243,240)","text-halo-width":1}},{"id":"place_state","type":"symbol","metadata":{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},"source":"planet_eoc","source-layer":"place","maxzoom":12,"filter":["all",["==","$type","Point"],["==","class","state"]],"layout":{"text-field":"{name:latin}\\n{name:nonlatin}","text-font":["Metropolis Regular","Noto Sans Regular"],"text-size":10,"text-transform":"uppercase","visibility":"visible"},"paint":{"text-color":"rgb(113, 129, 144)","text-halo-blur":1,"text-halo-color":"rgb(242,243,240)","text-halo-width":1}},{"id":"place_country_other","type":"symbol","metadata":{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},"source":"planet_eoc","source-layer":"place","maxzoom":8,"filter":["all",["==","$type","Point"],["==","class","country"],["!has","iso_a2"]],"layout":{"text-field":"{name:latin}","text-font":["Metropolis Light Italic","Noto Sans Italic"],"text-size":{"base":1,"stops":[[0,9],[6,11]]},"text-transform":"uppercase","visibility":"visible"},"paint":{"text-color":{"base":1,"stops":[[3,"rgb(157,169,177)"],[4,"rgb(153, 153, 153)"]]},"text-halo-color":"rgba(236,236,234,0.7)","text-halo-width":1.4}},{"id":"place_country_minor","type":"symbol","metadata":{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},"source":"planet_eoc","source-layer":"place","maxzoom":8,"filter":["all",["==","$type","Point"],["==","class","country"],[">=","rank",2],["has","iso_a2"]],"layout":{"text-field":"{name:latin}","text-font":["Metropolis Regular","Noto Sans Regular"],"text-size":{"base":1,"stops":[[0,10],[6,12]]},"text-transform":"uppercase","visibility":"visible"},"paint":{"text-color":{"base":1,"stops":[[3,"rgb(157,169,177)"],[4,"rgb(153, 153, 153)"]]},"text-halo-color":"rgba(236,236,234,0.7)","text-halo-width":1.4}},{"id":"place_country_major","type":"symbol","metadata":{"mapbox:group":"101da9f13b64a08fa4b6ac1168e89e5f"},"source":"planet_eoc","source-layer":"place","maxzoom":6,"filter":["all",["==","$type","Point"],["<=","rank",1],["==","class","country"],["has","iso_a2"]],"layout":{"text-anchor":"center","text-field":"{name:latin}","text-font":["Metropolis Regular","Noto Sans Regular"],"text-size":{"base":1.4,"stops":[[0,10],[3,12],[4,14]]},"text-transform":"uppercase","visibility":"visible"},"paint":{"text-color":{"base":1,"stops":[[3,"rgb(157,169,177)"],[4,"rgb(153, 153, 153)"]]},"text-halo-color":"rgba(236,236,234,0.7)","text-halo-width":1.4}}],"id":"positron"}');let rze=(()=>{class c{constructor(){this.fillColor="rgba(196, 203, 205, 1)",this.fillChanged=!1}ngOnInit(){const l=this.layer;if(l){const h=l.options.style;let d=h.layers.findIndex(f=>"water"===f.id);this.fillChanged=h.layers[d].paint["fill-color"]!==this.fillColor}}switchWater(l){const h=this.layer,d=h.options.style;let f=d.layers.findIndex(m=>"water"===m.id);this.fillChanged?(d.layers[f].paint["fill-color"]=this.fillColor,this.fillChanged=!1):(d.layers[f].paint["fill-color"]="rgba(0, 0, 0, 1)",this.fillChanged=!0),this.layersSvc.updateLayer(h)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["app-vtile-layer-action"]],inputs:{layer:"layer",layersSvc:"layersSvc"},decls:4,vars:2,consts:[["type","checkbox","name","switch_water","clrCheckbox","",3,"value","checked","change"]],template:function(l,h){1&l&&(U(0,"clr-checkbox-wrapper")(1,"label"),ve(2," Change Water color "),H(),U(3,"input",0),De("change",function(f){return h.switchWater(f)}),H()()),2&l&&(V(3),z("value",h.fillChanged)("checked",h.fillChanged))},dependencies:[Qr,C1,w1]}),c})();class jJ{}class WJ{}class Bu{constructor(a){this.normalizedNames=new Map,this.lazyUpdate=null,a?this.lazyInit="string"==typeof a?()=>{this.headers=new Map,a.split("\n").forEach(l=>{const h=l.indexOf(":");if(h>0){const d=l.slice(0,h),f=d.toLowerCase(),m=l.slice(h+1).trim();this.maybeSetNormalizedName(d,f),this.headers.has(f)?this.headers.get(f).push(m):this.headers.set(f,[m])}})}:()=>{this.headers=new Map,Object.keys(a).forEach(l=>{let h=a[l];const d=l.toLowerCase();"string"==typeof h&&(h=[h]),h.length>0&&(this.headers.set(d,h),this.maybeSetNormalizedName(l,d))})}:this.headers=new Map}has(a){return this.init(),this.headers.has(a.toLowerCase())}get(a){this.init();const l=this.headers.get(a.toLowerCase());return l&&l.length>0?l[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(a){return this.init(),this.headers.get(a.toLowerCase())||null}append(a,l){return this.clone({name:a,value:l,op:"a"})}set(a,l){return this.clone({name:a,value:l,op:"s"})}delete(a,l){return this.clone({name:a,value:l,op:"d"})}maybeSetNormalizedName(a,l){this.normalizedNames.has(l)||this.normalizedNames.set(l,a)}init(){this.lazyInit&&(this.lazyInit instanceof Bu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(a=>this.applyUpdate(a)),this.lazyUpdate=null))}copyFrom(a){a.init(),Array.from(a.headers.keys()).forEach(l=>{this.headers.set(l,a.headers.get(l)),this.normalizedNames.set(l,a.normalizedNames.get(l))})}clone(a){const l=new Bu;return l.lazyInit=this.lazyInit&&this.lazyInit instanceof Bu?this.lazyInit:this,l.lazyUpdate=(this.lazyUpdate||[]).concat([a]),l}applyUpdate(a){const l=a.name.toLowerCase();switch(a.op){case"a":case"s":let h=a.value;if("string"==typeof h&&(h=[h]),0===h.length)return;this.maybeSetNormalizedName(a.name,l);const d=("a"===a.op?this.headers.get(l):void 0)||[];d.push(...h),this.headers.set(l,d);break;case"d":const f=a.value;if(f){let m=this.headers.get(l);if(!m)return;m=m.filter(g=>-1===f.indexOf(g)),0===m.length?(this.headers.delete(l),this.normalizedNames.delete(l)):this.headers.set(l,m)}else this.headers.delete(l),this.normalizedNames.delete(l)}}forEach(a){this.init(),Array.from(this.normalizedNames.keys()).forEach(l=>a(this.normalizedNames.get(l),this.headers.get(l)))}}class sze{encodeKey(a){return XJ(a)}encodeValue(a){return XJ(a)}decodeKey(a){return decodeURIComponent(a)}decodeValue(a){return decodeURIComponent(a)}}const aze=/%(\d[a-f0-9])/gi,lze={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function XJ(c){return encodeURIComponent(c).replace(aze,(a,l)=>lze[l]??a)}function _D(c){return`${c}`}class Rf{constructor(a={}){if(this.updates=null,this.cloneFrom=null,this.encoder=a.encoder||new sze,a.fromString){if(a.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function oze(c,a){const l=new Map;return c.length>0&&c.replace(/^\?/,"").split("&").forEach(d=>{const f=d.indexOf("="),[m,g]=-1==f?[a.decodeKey(d),""]:[a.decodeKey(d.slice(0,f)),a.decodeValue(d.slice(f+1))],y=l.get(m)||[];y.push(g),l.set(m,y)}),l}(a.fromString,this.encoder)}else a.fromObject?(this.map=new Map,Object.keys(a.fromObject).forEach(l=>{const h=a.fromObject[l],d=Array.isArray(h)?h.map(_D):[_D(h)];this.map.set(l,d)})):this.map=null}has(a){return this.init(),this.map.has(a)}get(a){this.init();const l=this.map.get(a);return l?l[0]:null}getAll(a){return this.init(),this.map.get(a)||null}keys(){return this.init(),Array.from(this.map.keys())}append(a,l){return this.clone({param:a,value:l,op:"a"})}appendAll(a){const l=[];return Object.keys(a).forEach(h=>{const d=a[h];Array.isArray(d)?d.forEach(f=>{l.push({param:h,value:f,op:"a"})}):l.push({param:h,value:d,op:"a"})}),this.clone(l)}set(a,l){return this.clone({param:a,value:l,op:"s"})}delete(a,l){return this.clone({param:a,value:l,op:"d"})}toString(){return this.init(),this.keys().map(a=>{const l=this.encoder.encodeKey(a);return this.map.get(a).map(h=>l+"="+this.encoder.encodeValue(h)).join("&")}).filter(a=>""!==a).join("&")}clone(a){const l=new Rf({encoder:this.encoder});return l.cloneFrom=this.cloneFrom||this,l.updates=(this.updates||[]).concat(a),l}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(a=>this.map.set(a,this.cloneFrom.map.get(a))),this.updates.forEach(a=>{switch(a.op){case"a":case"s":const l=("a"===a.op?this.map.get(a.param):void 0)||[];l.push(_D(a.value)),this.map.set(a.param,l);break;case"d":if(void 0===a.value){this.map.delete(a.param);break}{let h=this.map.get(a.param)||[];const d=h.indexOf(_D(a.value));-1!==d&&h.splice(d,1),h.length>0?this.map.set(a.param,h):this.map.delete(a.param)}}}),this.cloneFrom=this.updates=null)}}class cze{constructor(){this.map=new Map}set(a,l){return this.map.set(a,l),this}get(a){return this.map.has(a)||this.map.set(a,a.defaultValue()),this.map.get(a)}delete(a){return this.map.delete(a),this}has(a){return this.map.has(a)}keys(){return this.map.keys()}}function qJ(c){return typeof ArrayBuffer<"u"&&c instanceof ArrayBuffer}function $J(c){return typeof Blob<"u"&&c instanceof Blob}function YJ(c){return typeof FormData<"u"&&c instanceof FormData}class H1{constructor(a,l,h,d){let f;if(this.url=l,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=a.toUpperCase(),function uze(c){switch(c){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||d?(this.body=void 0!==h?h:null,f=d):f=h,f&&(this.reportProgress=!!f.reportProgress,this.withCredentials=!!f.withCredentials,f.responseType&&(this.responseType=f.responseType),f.headers&&(this.headers=f.headers),f.context&&(this.context=f.context),f.params&&(this.params=f.params)),this.headers||(this.headers=new Bu),this.context||(this.context=new cze),this.params){const m=this.params.toString();if(0===m.length)this.urlWithParams=l;else{const g=l.indexOf("?");this.urlWithParams=l+(-1===g?"?":g<l.length-1?"&":"")+m}}else this.params=new Rf,this.urlWithParams=l}serializeBody(){return null===this.body?null:qJ(this.body)||$J(this.body)||YJ(this.body)||function hze(c){return typeof URLSearchParams<"u"&&c instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Rf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||YJ(this.body)?null:$J(this.body)?this.body.type||null:qJ(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Rf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(a={}){const l=a.method||this.method,h=a.url||this.url,d=a.responseType||this.responseType,f=void 0!==a.body?a.body:this.body,m=void 0!==a.withCredentials?a.withCredentials:this.withCredentials,g=void 0!==a.reportProgress?a.reportProgress:this.reportProgress;let y=a.headers||this.headers,_=a.params||this.params;const v=a.context??this.context;return void 0!==a.setHeaders&&(y=Object.keys(a.setHeaders).reduce((b,S)=>b.set(S,a.setHeaders[S]),y)),a.setParams&&(_=Object.keys(a.setParams).reduce((b,S)=>b.set(S,a.setParams[S]),_)),new H1(l,h,f,{params:_,headers:y,context:v,reportProgress:g,responseType:d,withCredentials:m})}}var Fs=(()=>((Fs=Fs||{})[Fs.Sent=0]="Sent",Fs[Fs.UploadProgress=1]="UploadProgress",Fs[Fs.ResponseHeader=2]="ResponseHeader",Fs[Fs.DownloadProgress=3]="DownloadProgress",Fs[Fs.Response=4]="Response",Fs[Fs.User=5]="User",Fs))();class I3{constructor(a,l=200,h="OK"){this.headers=a.headers||new Bu,this.status=void 0!==a.status?a.status:l,this.statusText=a.statusText||h,this.url=a.url||null,this.ok=this.status>=200&&this.status<300}}class R3 extends I3{constructor(a={}){super(a),this.type=Fs.ResponseHeader}clone(a={}){return new R3({headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}class vD extends I3{constructor(a={}){super(a),this.type=Fs.Response,this.body=void 0!==a.body?a.body:null}clone(a={}){return new vD({body:void 0!==a.body?a.body:this.body,headers:a.headers||this.headers,status:void 0!==a.status?a.status:this.status,statusText:a.statusText||this.statusText,url:a.url||this.url||void 0})}}class ZJ extends I3{constructor(a){super(a,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${a.url||"(unknown url)"}`:`Http failure response for ${a.url||"(unknown url)"}: ${a.status} ${a.statusText}`,this.error=a.error||null}}function L3(c,a){return{body:a,headers:c.headers,context:c.context,observe:c.observe,params:c.params,reportProgress:c.reportProgress,responseType:c.responseType,withCredentials:c.withCredentials}}let Yh=(()=>{class c{constructor(l){this.handler=l}request(l,h,d={}){let f;if(l instanceof H1)f=l;else{let y,_;y=d.headers instanceof Bu?d.headers:new Bu(d.headers),d.params&&(_=d.params instanceof Rf?d.params:new Rf({fromObject:d.params})),f=new H1(l,h,void 0!==d.body?d.body:null,{headers:y,context:d.context,params:_,reportProgress:d.reportProgress,responseType:d.responseType||"json",withCredentials:d.withCredentials})}const m=Ct(f).pipe(Ad(y=>this.handler.handle(y)));if(l instanceof H1||"events"===d.observe)return m;const g=m.pipe(Ki(y=>y instanceof vD));switch(d.observe||"body"){case"body":switch(f.responseType){case"arraybuffer":return g.pipe(q(y=>{if(null!==y.body&&!(y.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return y.body}));case"blob":return g.pipe(q(y=>{if(null!==y.body&&!(y.body instanceof Blob))throw new Error("Response is not a Blob.");return y.body}));case"text":return g.pipe(q(y=>{if(null!==y.body&&"string"!=typeof y.body)throw new Error("Response is not a string.");return y.body}));default:return g.pipe(q(y=>y.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${d.observe}}`)}}delete(l,h={}){return this.request("DELETE",l,h)}get(l,h={}){return this.request("GET",l,h)}head(l,h={}){return this.request("HEAD",l,h)}jsonp(l,h){return this.request("JSONP",l,{params:(new Rf).append(h,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(l,h={}){return this.request("OPTIONS",l,h)}patch(l,h,d={}){return this.request("PATCH",l,L3(d,h))}post(l,h,d={}){return this.request("POST",l,L3(d,h))}put(l,h,d={}){return this.request("PUT",l,L3(d,h))}}return c.\u0275fac=function(l){return new(l||c)(Oe(jJ))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();class KJ{constructor(a,l){this.next=a,this.interceptor=l}handle(a){return this.interceptor.intercept(a,this.next)}}const JJ=new Vt("HTTP_INTERCEPTORS");let dze=(()=>{class c{intercept(l,h){return h.handle(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();const fze=/^\)\]\}',?\n/;let QJ=(()=>{class c{constructor(l){this.xhrFactory=l}handle(l){if("JSONP"===l.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Tt(h=>{const d=this.xhrFactory.build();if(d.open(l.method,l.urlWithParams),l.withCredentials&&(d.withCredentials=!0),l.headers.forEach((T,x)=>d.setRequestHeader(T,x.join(","))),l.headers.has("Accept")||d.setRequestHeader("Accept","application/json, text/plain, */*"),!l.headers.has("Content-Type")){const T=l.detectContentTypeHeader();null!==T&&d.setRequestHeader("Content-Type",T)}if(l.responseType){const T=l.responseType.toLowerCase();d.responseType="json"!==T?T:"text"}const f=l.serializeBody();let m=null;const g=()=>{if(null!==m)return m;const T=d.statusText||"OK",x=new Bu(d.getAllResponseHeaders()),E=function pze(c){return"responseURL"in c&&c.responseURL?c.responseURL:/^X-Request-URL:/m.test(c.getAllResponseHeaders())?c.getResponseHeader("X-Request-URL"):null}(d)||l.url;return m=new R3({headers:x,status:d.status,statusText:T,url:E}),m},y=()=>{let{headers:T,status:x,statusText:E,url:I}=g(),M=null;204!==x&&(M=typeof d.response>"u"?d.responseText:d.response),0===x&&(x=M?200:0);let D=x>=200&&x<300;if("json"===l.responseType&&"string"==typeof M){const L=M;M=M.replace(fze,"");try{M=""!==M?JSON.parse(M):null}catch(P){M=L,D&&(D=!1,M={error:P,text:M})}}D?(h.next(new vD({body:M,headers:T,status:x,statusText:E,url:I||void 0})),h.complete()):h.error(new ZJ({error:M,headers:T,status:x,statusText:E,url:I||void 0}))},_=T=>{const{url:x}=g(),E=new ZJ({error:T,status:d.status||0,statusText:d.statusText||"Unknown Error",url:x||void 0});h.error(E)};let v=!1;const b=T=>{v||(h.next(g()),v=!0);let x={type:Fs.DownloadProgress,loaded:T.loaded};T.lengthComputable&&(x.total=T.total),"text"===l.responseType&&!!d.responseText&&(x.partialText=d.responseText),h.next(x)},S=T=>{let x={type:Fs.UploadProgress,loaded:T.loaded};T.lengthComputable&&(x.total=T.total),h.next(x)};return d.addEventListener("load",y),d.addEventListener("error",_),d.addEventListener("timeout",_),d.addEventListener("abort",_),l.reportProgress&&(d.addEventListener("progress",b),null!==f&&d.upload&&d.upload.addEventListener("progress",S)),d.send(f),h.next({type:Fs.Sent}),()=>{d.removeEventListener("error",_),d.removeEventListener("abort",_),d.removeEventListener("load",y),d.removeEventListener("timeout",_),l.reportProgress&&(d.removeEventListener("progress",b),null!==f&&d.upload&&d.upload.removeEventListener("progress",S)),d.readyState!==d.DONE&&d.abort()}})}}return c.\u0275fac=function(l){return new(l||c)(Oe(cH))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();const P3=new Vt("XSRF_COOKIE_NAME"),O3=new Vt("XSRF_HEADER_NAME");class eQ{}let mze=(()=>{class c{constructor(l,h,d){this.doc=l,this.platform=h,this.cookieName=d,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const l=this.doc.cookie||"";return l!==this.lastCookieString&&(this.parseCount++,this.lastToken=Q8(l,this.cookieName),this.lastCookieString=l),this.lastToken}}return c.\u0275fac=function(l){return new(l||c)(Oe(Ci),Oe(kr),Oe(P3))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),N3=(()=>{class c{constructor(l,h){this.tokenService=l,this.headerName=h}intercept(l,h){const d=l.url.toLowerCase();if("GET"===l.method||"HEAD"===l.method||d.startsWith("http://")||d.startsWith("https://"))return h.handle(l);const f=this.tokenService.getToken();return null!==f&&!l.headers.has(this.headerName)&&(l=l.clone({headers:l.headers.set(this.headerName,f)})),h.handle(l)}}return c.\u0275fac=function(l){return new(l||c)(Oe(eQ),Oe(O3))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),gze=(()=>{class c{constructor(l,h){this.backend=l,this.injector=h,this.chain=null}handle(l){if(null===this.chain){const h=this.injector.get(JJ,[]);this.chain=h.reduceRight((d,f)=>new KJ(d,f),this.backend)}return this.chain.handle(l)}}return c.\u0275fac=function(l){return new(l||c)(Oe(WJ),Oe(cr))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),yze=(()=>{class c{static disable(){return{ngModule:c,providers:[{provide:N3,useClass:dze}]}}static withOptions(l={}){return{ngModule:c,providers:[l.cookieName?{provide:P3,useValue:l.cookieName}:[],l.headerName?{provide:O3,useValue:l.headerName}:[]]}}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({providers:[N3,{provide:JJ,useExisting:N3,multi:!0},{provide:eQ,useClass:mze},{provide:P3,useValue:"XSRF-TOKEN"},{provide:O3,useValue:"X-XSRF-TOKEN"}]}),c})(),_ze=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({providers:[Yh,{provide:jJ,useClass:gze},QJ,{provide:WJ,useExisting:QJ}],imports:[yze.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),c})();var tQ=ft(394),nQ=ft(856),iQ=ft(723),vze=ft(955),bze=ft(535),Sze=ft(578),Tze=ft(788);const wze=nQ.XLink_1_0,Cze=iQ.OWS_1_1_0,xze=vze.SMIL_2_0,Eze=bze.SMIL_2_0_Language,Mze=Sze.GML_3_1_1,Dze=Tze.WMTS_1_0;let rQ=(()=>{class c{constructor(l){this.http=l;const h=new tQ.Jsonix.Context([xze,Eze,Mze,wze,Cze,Dze]);this.xmlunmarshaller=h.createUnmarshaller(),this.xmlmarshaller=h.createMarshaller()}getCapabilities(l,h="1.1.0"){const d=`${l}?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=${h}`,f=new Bu({"Content-Type":"text/xml",Accept:"text/xml, application/xml"});return this.http.get(d,{headers:f,responseType:"text"}).pipe(q(m=>this.xmlunmarshaller.unmarshalString(m)))}}return c.\u0275fac=function(l){return new(l||c)(Oe(Yh))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();var Aze=ft(530),Ize=ft(496),Rze=ft(815),Lze=ft(10),Pze=ft(731);function F3(c){return!Ee(c)&&c-parseFloat(c)+1>=0}function sQ(c=0,a,l){let h=-1;return F3(a)?h=Number(a)<1?1:Number(a):Ce(a)&&(l=a),Ce(l)||(l=A_),new Tt(d=>{const f=F3(c)?c:+c-l.now();return l.schedule(Oze,f,{index:0,period:h,subscriber:d})})}function Oze(c){const{index:a,period:l,subscriber:h}=c;if(h.next(a),!h.closed){if(-1===l)return h.complete();c.index=a+1,this.schedule(c,l)}}class Fze{constructor(a,l){this.notifier=a,this.source=l}call(a,l){return l.subscribe(new kze(a,this.notifier,this.source))}}class kze extends vg{constructor(a,l,h){super(a),this.notifier=l,this.source=h}error(a){if(!this.isStopped){let l=this.errors,h=this.retries,d=this.retriesSubscription;if(h)this.errors=void 0,this.retriesSubscription=void 0;else{l=new Qe;try{const{notifier:f}=this;h=f(l)}catch(f){return super.error(f)}d=bg(h,new _g(this))}this._unsubscribeAndRecycle(),this.errors=l,this.retries=h,this.retriesSubscription=d,l.next(a)}}_unsubscribe(){const{errors:a,retriesSubscription:l}=this;a&&(a.unsubscribe(),this.errors=void 0),l&&(l.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:a}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=a,this.source.subscribe(this)}}function k3(c,a=3){let l=1;return h=>h.pipe(function Nze(c){return a=>a.lift(new Fze(c,a))}(d=>d.pipe(function aY(c,a=A_){const h=function _Pe(c){return c instanceof Date&&!isNaN(+c)}(c)?+c-a.now():Math.abs(c);return d=>d.lift(new vPe(h,a))}(c),As(f=>{if(f.status&&400===f.status)throw f;if(l<=a)return console.log("http-error. Retrying ..."),l+=1,Ct(f);throw console.log(`Persistent http-errors after ${l} attempts. Giving up.`),f}))))}class Bze{set(a,l){return Ct(!0)}get(a){return Ct(null)}}const oQ=nQ.XLink_1_0,Uze=iQ.OWS_1_1_0,zze=Rze.OWS_2_0,Gze=Lze.WPS_1_0_0,Hze=Pze.WPS_2_0,aQ=tQ.Jsonix;function V3(c){return c.getAttributeNS("http://www.w3.org/1999/xlink","href")}const Mo=[null,"http://www.opengis.net/wms"],$ze=Yt(Mo,{Service:nt(function mGe(c,a){return Jn({},Kze,c,a)}),Capability:nt(function pGe(c,a){return Jn({},Yze,c,a)})}),Yze=Yt(Mo,{Request:nt(function TGe(c,a){return Jn({},rGe,c,a)}),Exception:nt(function vGe(c,a){return Jn([],tGe,c,a)}),Layer:nt(function bGe(c,a){const l=Jn({},lQ,c,a);return void 0===l.Layer?Object.assign(l,cQ(c,a)):l})}),Kze=Yt(Mo,{Name:nt(Hn),Title:nt(Hn),Abstract:nt(Hn),KeywordList:nt(hQ),OnlineResource:nt(V3),ContactInformation:nt(function gGe(c,a){return Jn({},Jze,c,a)}),Fees:nt(Hn),AccessConstraints:nt(Hn),LayerLimit:nt($N),MaxWidth:nt($N),MaxHeight:nt($N)}),Jze=Yt(Mo,{ContactPersonPrimary:nt(function yGe(c,a){return Jn({},Qze,c,a)}),ContactPosition:nt(Hn),ContactAddress:nt(function _Ge(c,a){return Jn({},eGe,c,a)}),ContactVoiceTelephone:nt(Hn),ContactFacsimileTelephone:nt(Hn),ContactElectronicMailAddress:nt(Hn)}),Qze=Yt(Mo,{ContactPerson:nt(Hn),ContactOrganization:nt(Hn)}),eGe=Yt(Mo,{AddressType:nt(Hn),Address:nt(Hn),City:nt(Hn),StateOrProvince:nt(Hn),PostCode:nt(Hn),Country:nt(Hn)}),tGe=Yt(Mo,{Format:Su(Hn)}),lQ=Yt(Mo,{Name:nt(Hn),Title:nt(Hn),Abstract:nt(Hn),KeywordList:nt(hQ),CRS:cl(Hn),EX_GeographicBoundingBox:nt(function fGe(c,a){const l=Jn({},iGe,c,a);if(!l)return;const h=l.westBoundLongitude,d=l.southBoundLatitude,f=l.eastBoundLongitude,m=l.northBoundLatitude;return void 0!==h&&void 0!==d&&void 0!==f&&void 0!==m?[h,d,f,m]:void 0}),BoundingBox:cl(function dGe(c,a){const l=[Lh(c.getAttribute("minx")),Lh(c.getAttribute("miny")),Lh(c.getAttribute("maxx")),Lh(c.getAttribute("maxy"))],h=[Lh(c.getAttribute("resx")),Lh(c.getAttribute("resy"))];return{crs:c.getAttribute("CRS"),extent:l,res:h}}),Dimension:cl(function SGe(c,a){return{name:c.getAttribute("name"),units:c.getAttribute("units"),unitSymbol:c.getAttribute("unitSymbol"),default:c.getAttribute("default"),multipleValues:mm(c.getAttribute("multipleValues")),nearestValue:mm(c.getAttribute("nearestValue")),current:mm(c.getAttribute("current")),values:Hn(c)}}),Attribution:nt(function hGe(c,a){return Jn({},nGe,c,a)}),AuthorityURL:cl(function xGe(c,a){const l=Zh(c,a);if(l)return l.name=c.getAttribute("name"),l}),Identifier:cl(Hn),MetadataURL:cl(function EGe(c,a){const l=Zh(c,a);if(l)return l.type=c.getAttribute("type"),l}),DataURL:cl(Zh),FeatureListURL:cl(Zh),Style:cl(function MGe(c,a){return Jn({},lGe,c,a)}),MinScaleDenominator:nt(Zr),MaxScaleDenominator:nt(Zr),Layer:cl(cQ)}),nGe=Yt(Mo,{Title:nt(Hn),OnlineResource:nt(V3),LogoURL:nt(uQ)}),iGe=Yt(Mo,{westBoundLongitude:nt(Zr),eastBoundLongitude:nt(Zr),southBoundLatitude:nt(Zr),northBoundLatitude:nt(Zr)}),rGe=Yt(Mo,{GetCapabilities:nt(B3),GetMap:nt(B3),GetFeatureInfo:nt(B3)}),sGe=Yt(Mo,{Format:cl(Hn),DCPType:cl(function wGe(c,a){return Jn({},oGe,c,a)})}),oGe=Yt(Mo,{HTTP:nt(function CGe(c,a){return Jn({},aGe,c,a)})}),aGe=Yt(Mo,{Get:nt(Zh),Post:nt(Zh)}),lGe=Yt(Mo,{Name:nt(Hn),Title:nt(Hn),Abstract:nt(Hn),LegendURL:cl(uQ),StyleSheetURL:nt(Zh),StyleURL:nt(Zh)}),cGe=Yt(Mo,{Format:nt(Hn),OnlineResource:nt(V3)}),uGe=Yt(Mo,{Keyword:Su(Hn)});function cQ(c,a){const l=a[a.length-1],h=Jn({},lQ,c,a);if(!h)return;let d=mm(c.getAttribute("queryable"));void 0===d&&(d=l.queryable),h.queryable=void 0!==d&&d;let f=RE(c.getAttribute("cascaded"));void 0===f&&(f=l.cascaded),h.cascaded=f;let m=mm(c.getAttribute("opaque"));void 0===m&&(m=l.opaque),h.opaque=void 0!==m&&m;let g=mm(c.getAttribute("noSubsets"));void 0===g&&(g=l.noSubsets),h.noSubsets=void 0!==g&&g;let y=Lh(c.getAttribute("fixedWidth"));y||(y=l.fixedWidth),h.fixedWidth=y;let _=Lh(c.getAttribute("fixedHeight"));return _||(_=l.fixedHeight),h.fixedHeight=_,["Style","CRS","AuthorityURL"].forEach(function(S){S in l&&(h[S]=(h[S]||[]).concat(l[S]))}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(S){S in h||(h[S]=l[S])}),h}function Zh(c,a){return Jn({},cGe,c,a)}function B3(c,a){return Jn({},sGe,c,a)}function uQ(c,a){const l=Zh(c,a);if(l){const h=[RE(c.getAttribute("width")),RE(c.getAttribute("height"))];return l.size=h,l}}function hQ(c,a){return Jn([],uGe,c,a)}let dQ=(()=>{class c extends class AGe{constructor(a){this.http=a,this.parser=new class Zze extends class Wze{read(a){if(!a)return null;if("string"==typeof a){const l=df(a);return this.readFromDocument(l)}return hf(a)?this.readFromDocument(a):this.readFromNode(a)}readFromDocument(a){for(let l=a.firstChild;l;l=l.nextSibling)if(l.nodeType==Node.ELEMENT_NODE)return this.readFromNode(l);return null}readFromNode(a){}}{constructor(){super(),this.version=void 0}readFromNode(a){return this.version=a.getAttribute("version").trim(),Jn({version:this.version},$ze,a,[])||null}}}getCapabilities(a,l="1.1.0"){return this.http.get(`${a}?SERVICE=WMS&REQUEST=GetCapabilities&VERSION=${l}`,{headers:{"Content-Type":"text/xml",Accept:"text/xml, application/xml"},responseType:"text"}).pipe(q(d=>this.parser.read(d)))}getLayerFromCapabilities(a,l){return this.getLayerFromCapabilitiesLayer(a,l.Capability.Layer)}getLayerFromCapabilitiesLayer(a,l){const h=l;return h?h.Name&&h.Name===a?h:h.Layer&&Array.isArray(h.Layer)?h.Layer.find(d=>this.getLayerFromCapabilitiesLayer(a,d)):h.Layer&&h.Layer.Name&&h.Layer.Name===a?h.Layer:void 0:null}getTimeDimensionFromLayer(a){return a.Dimension?.find(l=>"time"===l.name)}}{constructor(l){super(l)}}return c.\u0275fac=function(l){return new(l||c)(Oe(Yh))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),IGe=(()=>{class c extends class jze{constructor(a="1.0.0",l,h){let d;if(this.webclient=l,this.cache=new Bze,this.version=a,h&&(this.cache=h),"1.0.0"===this.version)this.wpsmarshaller=new Aze.m,d=new aQ.Context([oQ,Uze,Gze]);else{if("2.0.0"!==this.version)throw new Error("You entered a WPS version other than 1.0.0 or 2.0.0.");this.wpsmarshaller=new Ize.Y,d=new aQ.Context([oQ,zze,Hze])}this.xmlunmarshaller=d.createUnmarshaller(),this.xmlmarshaller=d.createMarshaller()}getCapabilities(a){const l=this.wpsmarshaller.getCapabilitiesUrl(a);return this.getRaw(l).pipe(q(h=>{const d=this.xmlunmarshaller.unmarshalString(h);return this.wpsmarshaller.unmarshalCapabilities(d.value)}))}describeProcess(a,l){const h=this.wpsmarshaller.getDescribeProcessUrl(a,l);return this.getRaw(h).pipe(q(d=>{const f=this.xmlunmarshaller.unmarshalString(d);return this.wpsmarshaller.unmarshalProcessDescription(f.value)}))}executeAsync(a,l,h,d,f=1e3,m,g){const _=this.executeAsyncBasic(a,l,h,d).pipe(As(v=>function Vze(c,a,l,h=1e3){l&&l(null);const m=yM(c.pipe(Br(g=>{l&&l(g)})),sQ(h)).pipe(q(g=>g[0])).pipe(As(g=>a(g)?Ct(g):m));return m}(this.getNextState(v,a,l,h,d),T=>{if("Failed"===T.status)throw new Error(`Error during execution of process ${l}: `+T.statusLocation);return"Succeeded"===T.status},m,f)),As(v=>this.fetchResults(v,a,l,h,d,g)),Br(v=>{for(const b of v)if("error"===b.description.type)throw console.log("server responded with 200, but body contained an error-result: ",b),new Error(b.value)}));return this.cachedQuery(a,l,h,d,_)}cachedQuery(a,l,h,d,f){return this.cache.get({url:a,processId:l,inputs:h,outputs:d}).pipe(Ma(g=>g?Ct(g):f.pipe(Br(y=>{this.cache.set({url:a,processId:l,inputs:h,outputs:d},y).subscribe(_=>{console.log("set data in cache",_)})}))))}getNextState(a,l,h,d,f){let m;if("1.0.0"===this.version){if(!a.statusLocation)throw Error("No status location");m=this.getRaw(a.statusLocation)}else{if("2.0.0"!==this.version)throw new Error(`'GetStatus' has not yet been implemented for this WPS-Version (${this.version}).`);{if(!a.jobID)throw Error("No job-Id");const y=this.wpsmarshaller.marshallGetStatusBody(l,h,a.jobID),_=this.xmlmarshaller.marshalString(y);m=this.postRaw(l,_)}}return m.pipe(k3(2e3,2),q(y=>{const _=this.xmlunmarshaller.unmarshalString(y);return this.wpsmarshaller.unmarshalGetStateResponse(_,l,h,d,f)}))}fetchResults(a,l,h,d,f,m){if(a.results){let g;return g=m?m(a.results):this.wpsmarshaller.unmarshalSyncExecuteResponse(a.results,l,h,d,f),Ct(g)}{if(!a.jobID)throw new Error("You want me to get a result, but I can't find a jobId. I don't know what to do now!");const g=this.wpsmarshaller.marshallGetResultBody(l,h,a.jobID),y=this.xmlmarshaller.marshalString(g);return this.postRaw(l,y).pipe(q(_=>{const v=this.xmlunmarshaller.unmarshalString(_);let b;return b=m?m(v):this.wpsmarshaller.unmarshalSyncExecuteResponse(v,l,h,d,f),b}))}}executeAsyncBasic(a,l,h,d){const f=this.wpsmarshaller.executeUrl(a,l),m=this.wpsmarshaller.marshalExecBody(l,h,d,!0),g=this.xmlmarshaller.marshalString(m);return this.postRaw(f,g).pipe(q(y=>{const _=this.xmlunmarshaller.unmarshalString(y);return this.wpsmarshaller.unmarshalAsyncExecuteResponse(_,a,l,h,d)}))}execute(a,l,h,d,f){const m=this.wpsmarshaller.executeUrl(a,l),g=this.wpsmarshaller.marshalExecBody(l,h,d,!1),y=this.xmlmarshaller.marshalString(g);return this.postRaw(m,y).pipe(q(_=>{const v=this.xmlunmarshaller.unmarshalString(_);return f?f(v):this.wpsmarshaller.unmarshalSyncExecuteResponse(v,a,l,h,d)}))}dismiss(a,l,h){const d=this.wpsmarshaller.dismissUrl(a,l,h),f=this.wpsmarshaller.marshalDismissBody(h),m=this.xmlmarshaller.marshalString(f);return this.postRaw(d,m).pipe(q(g=>{const y=this.xmlunmarshaller.unmarshalString(g);return this.wpsmarshaller.unmarshalDismissResponse(y,a,l)}))}postRaw(a,l){return this.webclient.post(a,l,{headers:{"Content-Type":"text/xml",Accept:"text/xml, application/xml"},responseType:"text"}).pipe(k3(2e3,2),Br(d=>{this.parseResponseForErrors(a,d)}),o5())}getRaw(a){return this.webclient.get(a,{headers:{Accept:"text/xml, application/xml"},responseType:"text"}).pipe(k3(2e3,2),Br(h=>{this.parseResponseForErrors(a,h)}))}parseResponseForErrors(a,l){if(l.match("<title>404 Not Found</title>")||l.match("ows:ExceptionReport"))throw new Error(`From ${a}:  `+l)}setCache(a){this.cache=a}}{constructor(l="1.0.0",h,d){super(l,h,d),this.webClient=h}}return c.\u0275fac=function(l){return new(l||c)(Oe("WPS_VERSION"),Oe(Yh),Oe("WPS_CACHE"))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();const fQ="http://www.opengis.net/spec/owc-geojson/1.0/req/wms",pQ="http://www.opengis.net/spec/owc-geojson/1.0/req/wfs",mQ="http://www.opengis.net/spec/owc-geojson/1.0/req/wmts",gQ="http://www.opengis.net/spec/owc-geojson/1.0/req/kml",yQ="http://www.opengis.net/spec/owc-geojson/1.0/req/geojson",_Q="http://www.opengis.net/spec/owc-geojson/1.0/req/xyz",vQ="http://www.opengis.net/spec/owc-geojson/1.0/req/tms",U3="GetMap",bD="GetFeature",z3="GetTile",j1="REST",G3="GetCapabilities",bQ="GetFeatureInfo";function j3(c){return"type"in c}function W3(c){return c===fQ}function SQ(c){return c===pQ}function X3(c){return c===mQ}function TQ(c){return c===_Q}function SD(c){return c===vQ}class Bm extends Error{}class zGe extends Bm{constructor(a){super(`Invalid DateTime: ${a.toMessage()}`)}}class GGe extends Bm{constructor(a){super(`Invalid Interval: ${a.toMessage()}`)}}class HGe extends Bm{constructor(a){super(`Invalid Duration: ${a.toMessage()}`)}}class W1 extends Bm{}class wQ extends Bm{constructor(a){super(`Invalid unit ${a}`)}}class Zl extends Bm{}class Lf extends Bm{constructor(){super("Zone is an abstract class")}}const Ut="numeric",zc="short",wl="long",q3={year:Ut,month:Ut,day:Ut},CQ={year:Ut,month:zc,day:Ut},jGe={year:Ut,month:zc,day:Ut,weekday:zc},xQ={year:Ut,month:wl,day:Ut},EQ={year:Ut,month:wl,day:Ut,weekday:wl},MQ={hour:Ut,minute:Ut},DQ={hour:Ut,minute:Ut,second:Ut},AQ={hour:Ut,minute:Ut,second:Ut,timeZoneName:zc},IQ={hour:Ut,minute:Ut,second:Ut,timeZoneName:wl},RQ={hour:Ut,minute:Ut,hourCycle:"h23"},LQ={hour:Ut,minute:Ut,second:Ut,hourCycle:"h23"},PQ={hour:Ut,minute:Ut,second:Ut,hourCycle:"h23",timeZoneName:zc},OQ={hour:Ut,minute:Ut,second:Ut,hourCycle:"h23",timeZoneName:wl},NQ={year:Ut,month:Ut,day:Ut,hour:Ut,minute:Ut},FQ={year:Ut,month:Ut,day:Ut,hour:Ut,minute:Ut,second:Ut},kQ={year:Ut,month:zc,day:Ut,hour:Ut,minute:Ut},VQ={year:Ut,month:zc,day:Ut,hour:Ut,minute:Ut,second:Ut},WGe={year:Ut,month:zc,day:Ut,weekday:zc,hour:Ut,minute:Ut},BQ={year:Ut,month:wl,day:Ut,hour:Ut,minute:Ut,timeZoneName:zc},UQ={year:Ut,month:wl,day:Ut,hour:Ut,minute:Ut,second:Ut,timeZoneName:zc},zQ={year:Ut,month:wl,day:Ut,weekday:wl,hour:Ut,minute:Ut,timeZoneName:wl},GQ={year:Ut,month:wl,day:Ut,weekday:wl,hour:Ut,minute:Ut,second:Ut,timeZoneName:wl};function Oi(c){return typeof c>"u"}function Um(c){return"number"==typeof c}function TD(c){return"number"==typeof c&&c%1==0}function HQ(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function jQ(c,a,l){if(0!==c.length)return c.reduce((h,d)=>{const f=[a(d),d];return h&&l(h[0],f[0])===h[0]?h:f},null)[1]}function av(c,a){return Object.prototype.hasOwnProperty.call(c,a)}function Kh(c,a,l){return TD(c)&&c>=a&&c<=l}function ks(c,a=2){let h;return h=c<0?"-"+(""+-c).padStart(a,"0"):(""+c).padStart(a,"0"),h}function Pf(c){if(!Oi(c)&&null!==c&&""!==c)return parseInt(c,10)}function zm(c){if(!Oi(c)&&null!==c&&""!==c)return parseFloat(c)}function $3(c){if(!Oi(c)&&null!==c&&""!==c){const a=1e3*parseFloat("0."+c);return Math.floor(a)}}function Y3(c,a,l=!1){const h=10**a;return(l?Math.trunc:Math.round)(c*h)/h}function X1(c){return c%4==0&&(c%100!=0||c%400==0)}function q1(c){return X1(c)?366:365}function wD(c,a){const l=function ZGe(c,a){return c-a*Math.floor(c/a)}(a-1,12)+1;return 2===l?X1(c+(a-l)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][l-1]}function Z3(c){let a=Date.UTC(c.year,c.month-1,c.day,c.hour,c.minute,c.second,c.millisecond);return c.year<100&&c.year>=0&&(a=new Date(a),a.setUTCFullYear(a.getUTCFullYear()-1900)),+a}function CD(c){const a=(c+Math.floor(c/4)-Math.floor(c/100)+Math.floor(c/400))%7,l=c-1,h=(l+Math.floor(l/4)-Math.floor(l/100)+Math.floor(l/400))%7;return 4===a||3===h?53:52}function K3(c){return c>99?c:c>60?1900+c:2e3+c}function WQ(c,a,l,h=null){const d=new Date(c),f={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};h&&(f.timeZone=h);const m={timeZoneName:a,...f},g=new Intl.DateTimeFormat(l,m).formatToParts(d).find(y=>"timezonename"===y.type.toLowerCase());return g?g.value:null}function xD(c,a){let l=parseInt(c,10);Number.isNaN(l)&&(l=0);const h=parseInt(a,10)||0;return 60*l+(l<0||Object.is(l,-0)?-h:h)}function XQ(c){const a=Number(c);if("boolean"==typeof c||""===c||Number.isNaN(a))throw new Zl(`Invalid unit value ${c}`);return a}function ED(c,a){const l={};for(const h in c)if(av(c,h)){const d=c[h];if(null==d)continue;l[a(h)]=XQ(d)}return l}function $1(c,a){const l=Math.trunc(Math.abs(c/60)),h=Math.trunc(Math.abs(c%60)),d=c>=0?"+":"-";switch(a){case"short":return`${d}${ks(l,2)}:${ks(h,2)}`;case"narrow":return`${d}${l}${h>0?`:${h}`:""}`;case"techie":return`${d}${ks(l,2)}${ks(h,2)}`;default:throw new RangeError(`Value format ${a} is out of range for property format`)}}function MD(c){return function YGe(c,a){return a.reduce((l,h)=>(l[h]=c[h],l),{})}(c,["hour","minute","second","millisecond"])}const qQ=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,KGe=["January","February","March","April","May","June","July","August","September","October","November","December"],$Q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JGe=["J","F","M","A","M","J","J","A","S","O","N","D"];function YQ(c){switch(c){case"narrow":return[...JGe];case"short":return[...$Q];case"long":return[...KGe];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const ZQ=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],KQ=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],QGe=["M","T","W","T","F","S","S"];function JQ(c){switch(c){case"narrow":return[...QGe];case"short":return[...KQ];case"long":return[...ZQ];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const QQ=["AM","PM"],e6e=["Before Christ","Anno Domini"],t6e=["BC","AD"],n6e=["B","A"];function eee(c){switch(c){case"narrow":return[...n6e];case"short":return[...t6e];case"long":return[...e6e];default:return null}}function tee(c,a){let l="";for(const h of c)l+=h.literal?h.val:a(h.val);return l}const l6e={D:q3,DD:CQ,DDD:xQ,DDDD:EQ,t:MQ,tt:DQ,ttt:AQ,tttt:IQ,T:RQ,TT:LQ,TTT:PQ,TTTT:OQ,f:NQ,ff:kQ,fff:BQ,ffff:zQ,F:FQ,FF:VQ,FFF:UQ,FFFF:GQ};class Va{static create(a,l={}){return new Va(a,l)}static parseFormat(a){let l=null,h="",d=!1;const f=[];for(let m=0;m<a.length;m++){const g=a.charAt(m);"'"===g?(h.length>0&&f.push({literal:d,val:h}),l=null,h="",d=!d):d||g===l?h+=g:(h.length>0&&f.push({literal:!1,val:h}),h=g,l=g)}return h.length>0&&f.push({literal:d,val:h}),f}static macroTokenToFormatOpts(a){return l6e[a]}constructor(a,l){this.opts=l,this.loc=a,this.systemLoc=null}formatWithSystemDefault(a,l){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(a,{...this.opts,...l}).format()}formatDateTime(a,l={}){return this.loc.dtFormatter(a,{...this.opts,...l}).format()}formatDateTimeParts(a,l={}){return this.loc.dtFormatter(a,{...this.opts,...l}).formatToParts()}resolvedOptions(a,l={}){return this.loc.dtFormatter(a,{...this.opts,...l}).resolvedOptions()}num(a,l=0){if(this.opts.forceSimple)return ks(a,l);const h={...this.opts};return l>0&&(h.padTo=l),this.loc.numberFormatter(h).format(a)}formatDateTimeFromString(a,l){const h="en"===this.loc.listingMode(),d=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,f=(T,x)=>this.loc.extract(a,T,x),m=T=>a.isOffsetFixed&&0===a.offset&&T.allowZ?"Z":a.isValid?a.zone.formatOffset(a.ts,T.format):"",y=(T,x)=>h?function s6e(c,a){return YQ(a)[c.month-1]}(a,T):f(x?{month:T}:{month:T,day:"numeric"},"month"),_=(T,x)=>h?function r6e(c,a){return JQ(a)[c.weekday-1]}(a,T):f(x?{weekday:T}:{weekday:T,month:"long",day:"numeric"},"weekday"),v=T=>{const x=Va.macroTokenToFormatOpts(T);return x?this.formatWithSystemDefault(a,x):T},b=T=>h?function o6e(c,a){return eee(a)[c.year<0?0:1]}(a,T):f({era:T},"era");return tee(Va.parseFormat(l),T=>{switch(T){case"S":return this.num(a.millisecond);case"u":case"SSS":return this.num(a.millisecond,3);case"s":return this.num(a.second);case"ss":return this.num(a.second,2);case"uu":return this.num(Math.floor(a.millisecond/10),2);case"uuu":return this.num(Math.floor(a.millisecond/100));case"m":return this.num(a.minute);case"mm":return this.num(a.minute,2);case"h":return this.num(a.hour%12==0?12:a.hour%12);case"hh":return this.num(a.hour%12==0?12:a.hour%12,2);case"H":return this.num(a.hour);case"HH":return this.num(a.hour,2);case"Z":return m({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return m({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return m({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return a.zone.offsetName(a.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return a.zone.offsetName(a.ts,{format:"long",locale:this.loc.locale});case"z":return a.zoneName;case"a":return h?function i6e(c){return QQ[c.hour<12?0:1]}(a):f({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return d?f({day:"numeric"},"day"):this.num(a.day);case"dd":return d?f({day:"2-digit"},"day"):this.num(a.day,2);case"c":case"E":return this.num(a.weekday);case"ccc":return _("short",!0);case"cccc":return _("long",!0);case"ccccc":return _("narrow",!0);case"EEE":return _("short",!1);case"EEEE":return _("long",!1);case"EEEEE":return _("narrow",!1);case"L":return d?f({month:"numeric",day:"numeric"},"month"):this.num(a.month);case"LL":return d?f({month:"2-digit",day:"numeric"},"month"):this.num(a.month,2);case"LLL":return y("short",!0);case"LLLL":return y("long",!0);case"LLLLL":return y("narrow",!0);case"M":return d?f({month:"numeric"},"month"):this.num(a.month);case"MM":return d?f({month:"2-digit"},"month"):this.num(a.month,2);case"MMM":return y("short",!1);case"MMMM":return y("long",!1);case"MMMMM":return y("narrow",!1);case"y":return d?f({year:"numeric"},"year"):this.num(a.year);case"yy":return d?f({year:"2-digit"},"year"):this.num(a.year.toString().slice(-2),2);case"yyyy":return d?f({year:"numeric"},"year"):this.num(a.year,4);case"yyyyyy":return d?f({year:"numeric"},"year"):this.num(a.year,6);case"G":return b("short");case"GG":return b("long");case"GGGGG":return b("narrow");case"kk":return this.num(a.weekYear.toString().slice(-2),2);case"kkkk":return this.num(a.weekYear,4);case"W":return this.num(a.weekNumber);case"WW":return this.num(a.weekNumber,2);case"o":return this.num(a.ordinal);case"ooo":return this.num(a.ordinal,3);case"q":return this.num(a.quarter);case"qq":return this.num(a.quarter,2);case"X":return this.num(Math.floor(a.ts/1e3));case"x":return this.num(a.ts);default:return v(T)}})}formatDurationFromString(a,l){const h=y=>{switch(y[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},f=Va.parseFormat(l),m=f.reduce((y,{literal:_,val:v})=>_?y:y.concat(v),[]);return tee(f,(y=>_=>{const v=h(_);return v?this.num(y.get(v),_.length):_})(a.shiftTo(...m.map(h).filter(y=>y))))}}class Gc{constructor(a,l){this.reason=a,this.explanation=l}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class Y1{get type(){throw new Lf}get name(){throw new Lf}get ianaName(){return this.name}get isUniversal(){throw new Lf}offsetName(a,l){throw new Lf}formatOffset(a,l){throw new Lf}offset(a){throw new Lf}equals(a){throw new Lf}get isValid(){throw new Lf}}let J3=null;class Q3 extends Y1{static get instance(){return null===J3&&(J3=new Q3),J3}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(a,{format:l,locale:h}){return WQ(a,l,h)}formatOffset(a,l){return $1(this.offset(a),l)}offset(a){return-new Date(a).getTimezoneOffset()}equals(a){return"system"===a.type}get isValid(){return!0}}let DD={};const u6e={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let AD={};class Jh extends Y1{static create(a){return AD[a]||(AD[a]=new Jh(a)),AD[a]}static resetCache(){AD={},DD={}}static isValidSpecifier(a){return this.isValidZone(a)}static isValidZone(a){if(!a)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:a}).format(),!0}catch{return!1}}constructor(a){super(),this.zoneName=a,this.valid=Jh.isValidZone(a)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(a,{format:l,locale:h}){return WQ(a,l,h,this.name)}formatOffset(a,l){return $1(this.offset(a),l)}offset(a){const l=new Date(a);if(isNaN(l))return NaN;const h=function c6e(c){return DD[c]||(DD[c]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:c,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),DD[c]}(this.name);let[d,f,m,g,y,_,v]=h.formatToParts?function d6e(c,a){const l=c.formatToParts(a),h=[];for(let d=0;d<l.length;d++){const{type:f,value:m}=l[d],g=u6e[f];"era"===f?h[g]=m:Oi(g)||(h[g]=parseInt(m,10))}return h}(h,l):function h6e(c,a){const l=c.format(a).replace(/\u200E/g,""),h=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(l),[,d,f,m,g,y,_,v]=h;return[m,d,f,g,y,_,v]}(h,l);"BC"===g&&(d=1-Math.abs(d));let T=+l;const x=T%1e3;return T-=x>=0?x:1e3+x,(Z3({year:d,month:f,day:m,hour:24===y?0:y,minute:_,second:v,millisecond:0})-T)/6e4}equals(a){return"iana"===a.type&&a.name===this.name}get isValid(){return this.valid}}let e4=null;class va extends Y1{static get utcInstance(){return null===e4&&(e4=new va(0)),e4}static instance(a){return 0===a?va.utcInstance:new va(a)}static parseSpecifier(a){if(a){const l=a.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(l)return new va(xD(l[1],l[2]))}return null}constructor(a){super(),this.fixed=a}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${$1(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${$1(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(a,l){return $1(this.fixed,l)}get isUniversal(){return!0}offset(){return this.fixed}equals(a){return"fixed"===a.type&&a.fixed===this.fixed}get isValid(){return!0}}class f6e extends Y1{constructor(a){super(),this.zoneName=a}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Of(c,a){if(Oi(c)||null===c)return a;if(c instanceof Y1)return c;if(function XGe(c){return"string"==typeof c}(c)){const h=c.toLowerCase();return"local"===h||"system"===h?a:"utc"===h||"gmt"===h?va.utcInstance:va.parseSpecifier(h)||Jh.create(c)}return Um(c)?va.instance(c):"object"==typeof c&&c.offset&&"number"==typeof c.offset?c:new f6e(c)}let aee,nee=()=>Date.now(),iee="system",ree=null,see=null,oee=null;class Ks{static get now(){return nee}static set now(a){nee=a}static set defaultZone(a){iee=a}static get defaultZone(){return Of(iee,Q3.instance)}static get defaultLocale(){return ree}static set defaultLocale(a){ree=a}static get defaultNumberingSystem(){return see}static set defaultNumberingSystem(a){see=a}static get defaultOutputCalendar(){return oee}static set defaultOutputCalendar(a){oee=a}static get throwOnInvalid(){return aee}static set throwOnInvalid(a){aee=a}static resetCaches(){ts.resetCache(),Jh.resetCache()}}let lee={},t4={};function n4(c,a={}){const l=JSON.stringify([c,a]);let h=t4[l];return h||(h=new Intl.DateTimeFormat(c,a),t4[l]=h),h}let i4={},r4={},Z1=null;function ID(c,a,l,h,d){const f=c.listingMode(l);return"error"===f?null:"en"===f?h(a):d(a)}class w6e{constructor(a,l,h){this.padTo=h.padTo||0,this.floor=h.floor||!1;const{padTo:d,floor:f,...m}=h;if(!l||Object.keys(m).length>0){const g={useGrouping:!1,...h};h.padTo>0&&(g.minimumIntegerDigits=h.padTo),this.inf=function m6e(c,a={}){const l=JSON.stringify([c,a]);let h=i4[l];return h||(h=new Intl.NumberFormat(c,a),i4[l]=h),h}(a,g)}}format(a){if(this.inf){const l=this.floor?Math.floor(a):a;return this.inf.format(l)}return ks(this.floor?Math.floor(a):Y3(a,3),this.padTo)}}class C6e{constructor(a,l,h){let d;if(this.opts=h,a.zone.isUniversal){const m=a.offset/60*-1,g=m>=0?`Etc/GMT+${m}`:`Etc/GMT${m}`;0!==a.offset&&Jh.create(g).valid?(d=g,this.dt=a):(d="UTC",this.dt=h.timeZoneName||0===a.offset?a:oi.fromMillis(a.ts+60*a.offset*1e3))}else"system"===a.zone.type?this.dt=a:(this.dt=a,d=a.zone.name);const f={...this.opts};d&&(f.timeZone=d),this.dtf=n4(l,f)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class x6e{constructor(a,l,h){this.opts={style:"long",...h},!l&&HQ()&&(this.rtf=function g6e(c,a={}){const{base:l,...h}=a,d=JSON.stringify([c,h]);let f=r4[d];return f||(f=new Intl.RelativeTimeFormat(c,a),r4[d]=f),f}(a,h))}format(a,l){return this.rtf?this.rtf.format(a,l):function a6e(c,a,l="always",h=!1){const d={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},f=-1===["hours","minutes","seconds"].indexOf(c);if("auto"===l&&f){const b="days"===c;switch(a){case 1:return b?"tomorrow":`next ${d[c][0]}`;case-1:return b?"yesterday":`last ${d[c][0]}`;case 0:return b?"today":`this ${d[c][0]}`}}const m=Object.is(a,-0)||a<0,g=Math.abs(a),y=1===g,_=d[c],v=h?y?_[1]:_[2]||_[1]:y?d[c][0]:c;return m?`${g} ${v} ago`:`in ${g} ${v}`}(l,a,this.opts.numeric,"long"!==this.opts.style)}formatToParts(a,l){return this.rtf?this.rtf.formatToParts(a,l):[]}}class ts{static fromOpts(a){return ts.create(a.locale,a.numberingSystem,a.outputCalendar,a.defaultToEN)}static create(a,l,h,d=!1){const f=a||Ks.defaultLocale,m=f||(d?"en-US":function y6e(){return Z1||(Z1=(new Intl.DateTimeFormat).resolvedOptions().locale,Z1)}());return new ts(m,l||Ks.defaultNumberingSystem,h||Ks.defaultOutputCalendar,f)}static resetCache(){Z1=null,t4={},i4={},r4={}}static fromObject({locale:a,numberingSystem:l,outputCalendar:h}={}){return ts.create(a,l,h)}constructor(a,l,h,d){const[f,m,g]=function _6e(c){const a=c.indexOf("-u-");if(-1===a)return[c];{let l;const h=c.substring(0,a);try{l=n4(c).resolvedOptions()}catch{l=n4(h).resolvedOptions()}const{numberingSystem:d,calendar:f}=l;return[h,d,f]}}(a);this.locale=f,this.numberingSystem=l||m||null,this.outputCalendar=h||g||null,this.intl=function v6e(c,a,l){return(l||a)&&(c+="-u",l&&(c+=`-ca-${l}`),a&&(c+=`-nu-${a}`)),c}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=d,this.fastNumbersCached=null}get fastNumbers(){return null==this.fastNumbersCached&&(this.fastNumbersCached=function T6e(c){return(!c.numberingSystem||"latn"===c.numberingSystem)&&("latn"===c.numberingSystem||!c.locale||c.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(c.intl).resolvedOptions().numberingSystem)}(this)),this.fastNumbersCached}listingMode(){return this.isEnglish()&&!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar)?"en":"intl"}clone(a){return a&&0!==Object.getOwnPropertyNames(a).length?ts.create(a.locale||this.specifiedLocale,a.numberingSystem||this.numberingSystem,a.outputCalendar||this.outputCalendar,a.defaultToEN||!1):this}redefaultToEN(a={}){return this.clone({...a,defaultToEN:!0})}redefaultToSystem(a={}){return this.clone({...a,defaultToEN:!1})}months(a,l=!1,h=!0){return ID(this,a,h,YQ,()=>{const d=l?{month:a,day:"numeric"}:{month:a},f=l?"format":"standalone";return this.monthsCache[f][a]||(this.monthsCache[f][a]=function b6e(c){const a=[];for(let l=1;l<=12;l++){const h=oi.utc(2016,l,1);a.push(c(h))}return a}(m=>this.extract(m,d,"month"))),this.monthsCache[f][a]})}weekdays(a,l=!1,h=!0){return ID(this,a,h,JQ,()=>{const d=l?{weekday:a,year:"numeric",month:"long",day:"numeric"}:{weekday:a},f=l?"format":"standalone";return this.weekdaysCache[f][a]||(this.weekdaysCache[f][a]=function S6e(c){const a=[];for(let l=1;l<=7;l++){const h=oi.utc(2016,11,13+l);a.push(c(h))}return a}(m=>this.extract(m,d,"weekday"))),this.weekdaysCache[f][a]})}meridiems(a=!0){return ID(this,void 0,a,()=>QQ,()=>{if(!this.meridiemCache){const l={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[oi.utc(2016,11,13,9),oi.utc(2016,11,13,19)].map(h=>this.extract(h,l,"dayperiod"))}return this.meridiemCache})}eras(a,l=!0){return ID(this,a,l,eee,()=>{const h={era:a};return this.eraCache[a]||(this.eraCache[a]=[oi.utc(-40,1,1),oi.utc(2017,1,1)].map(d=>this.extract(d,h,"era"))),this.eraCache[a]})}extract(a,l,h){const m=this.dtFormatter(a,l).formatToParts().find(g=>g.type.toLowerCase()===h);return m?m.value:null}numberFormatter(a={}){return new w6e(this.intl,a.forceSimple||this.fastNumbers,a)}dtFormatter(a,l={}){return new C6e(a,this.intl,l)}relFormatter(a={}){return new x6e(this.intl,this.isEnglish(),a)}listFormatter(a={}){return function p6e(c,a={}){const l=JSON.stringify([c,a]);let h=lee[l];return h||(h=new Intl.ListFormat(c,a),lee[l]=h),h}(this.intl,a)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(a){return this.locale===a.locale&&this.numberingSystem===a.numberingSystem&&this.outputCalendar===a.outputCalendar}}function lv(...c){const a=c.reduce((l,h)=>l+h.source,"");return RegExp(`^${a}$`)}function cv(...c){return a=>c.reduce(([l,h,d],f)=>{const[m,g,y]=f(a,d);return[{...l,...m},g||h,y]},[{},null,1]).slice(0,2)}function uv(c,...a){if(null==c)return[null,null];for(const[l,h]of a){const d=l.exec(c);if(d)return h(d)}return[null,null]}function cee(...c){return(a,l)=>{const h={};let d;for(d=0;d<c.length;d++)h[c[d]]=Pf(a[l+d]);return[h,null,l+d]}}const uee=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,s4=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,hee=RegExp(`${s4.source}(?:${uee.source}?(?:\\[(${qQ.source})\\])?)?`),o4=RegExp(`(?:T${hee.source})?`),I6e=cee("weekYear","weekNumber","weekDay"),R6e=cee("year","ordinal"),dee=RegExp(`${s4.source} ?(?:${uee.source}|(${qQ.source}))?`),P6e=RegExp(`(?: ${dee.source})?`);function hv(c,a,l){const h=c[a];return Oi(h)?l:Pf(h)}function dv(c,a){return[{hours:hv(c,a,0),minutes:hv(c,a+1,0),seconds:hv(c,a+2,0),milliseconds:$3(c[a+3])},null,a+4]}function K1(c,a){const l=!c[a]&&!c[a+1],h=xD(c[a+1],c[a+2]);return[{},l?null:va.instance(h),a+3]}function J1(c,a){return[{},c[a]?Jh.create(c[a]):null,a+1]}const N6e=RegExp(`^T?${s4.source}$`),F6e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function k6e(c){const[a,l,h,d,f,m,g,y,_]=c,v="-"===a[0],b=y&&"-"===y[0],S=(T,x=!1)=>void 0!==T&&(x||T&&v)?-T:T;return[{years:S(zm(l)),months:S(zm(h)),weeks:S(zm(d)),days:S(zm(f)),hours:S(zm(m)),minutes:S(zm(g)),seconds:S(zm(y),"-0"===y),milliseconds:S($3(_),b)}]}const V6e={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function a4(c,a,l,h,d,f,m){const g={year:2===a.length?K3(Pf(a)):Pf(a),month:$Q.indexOf(l)+1,day:Pf(h),hour:Pf(d),minute:Pf(f)};return m&&(g.second=Pf(m)),c&&(g.weekday=c.length>3?ZQ.indexOf(c)+1:KQ.indexOf(c)+1),g}const B6e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function U6e(c){const[,a,l,h,d,f,m,g,y,_,v,b]=c,S=a4(a,d,h,l,f,m,g);let T;return T=y?V6e[y]:_?0:xD(v,b),[S,new va(T)]}const G6e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,H6e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,j6e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function fee(c){const[,a,l,h,d,f,m,g]=c;return[a4(a,d,h,l,f,m,g),va.utcInstance]}function W6e(c){const[,a,l,h,d,f,m,g]=c;return[a4(a,g,l,h,d,f,m),va.utcInstance]}const X6e=lv(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,o4),q6e=lv(/(\d{4})-?W(\d\d)(?:-?(\d))?/,o4),$6e=lv(/(\d{4})-?(\d{3})/,o4),Y6e=lv(hee),pee=cv(function O6e(c,a){return[{year:hv(c,a),month:hv(c,a+1,1),day:hv(c,a+2,1)},null,a+3]},dv,K1,J1),Z6e=cv(I6e,dv,K1,J1),K6e=cv(R6e,dv,K1,J1),J6e=cv(dv,K1,J1),i8e=cv(dv),s8e=lv(/(\d{4})-(\d\d)-(\d\d)/,P6e),o8e=lv(dee),a8e=cv(dv,K1,J1),mee={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},u8e={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...mee},Kl=365.2425,fv=30.436875,h8e={years:{quarters:4,months:12,weeks:Kl/7,days:Kl,hours:24*Kl,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:Kl/28,days:Kl/4,hours:24*Kl/4,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:fv/7,days:fv,hours:24*fv,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...mee},Gm=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],d8e=Gm.slice(0).reverse();function Hm(c,a,l=!1){const h={values:l?a.values:{...c.values,...a.values||{}},loc:c.loc.clone(a.loc),conversionAccuracy:a.conversionAccuracy||c.conversionAccuracy};return new ki(h)}function gee(c,a,l,h,d){const f=c[d][l],m=a[l]/f,y=Math.sign(m)!==Math.sign(h[d])&&0!==h[d]&&Math.abs(m)<=1?function f8e(c){return c<0?Math.floor(c):Math.ceil(c)}(m):Math.trunc(m);h[d]+=y,a[l]-=y*f}class ki{constructor(a){const l="longterm"===a.conversionAccuracy||!1;this.values=a.values,this.loc=a.loc||ts.create(),this.conversionAccuracy=l?"longterm":"casual",this.invalid=a.invalid||null,this.matrix=l?h8e:u8e,this.isLuxonDuration=!0}static fromMillis(a,l){return ki.fromObject({milliseconds:a},l)}static fromObject(a,l={}){if(null==a||"object"!=typeof a)throw new Zl("Duration.fromObject: argument expected to be an object, got "+(null===a?"null":typeof a));return new ki({values:ED(a,ki.normalizeUnit),loc:ts.fromObject(l),conversionAccuracy:l.conversionAccuracy})}static fromDurationLike(a){if(Um(a))return ki.fromMillis(a);if(ki.isDuration(a))return a;if("object"==typeof a)return ki.fromObject(a);throw new Zl(`Unknown duration argument ${a} of type ${typeof a}`)}static fromISO(a,l){const[h]=function n8e(c){return uv(c,[F6e,k6e])}(a);return h?ki.fromObject(h,l):ki.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static fromISOTime(a,l){const[h]=function r8e(c){return uv(c,[N6e,i8e])}(a);return h?ki.fromObject(h,l):ki.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static invalid(a,l=null){if(!a)throw new Zl("need to specify a reason the Duration is invalid");const h=a instanceof Gc?a:new Gc(a,l);if(Ks.throwOnInvalid)throw new HGe(h);return new ki({invalid:h})}static normalizeUnit(a){const l={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[a&&a.toLowerCase()];if(!l)throw new wQ(a);return l}static isDuration(a){return a&&a.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(a,l={}){const h={...l,floor:!1!==l.round&&!1!==l.floor};return this.isValid?Va.create(this.loc,h).formatDurationFromString(this,a):"Invalid Duration"}toHuman(a={}){const l=Gm.map(h=>{const d=this.values[h];return Oi(d)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...a,unit:h.slice(0,-1)}).format(d)}).filter(h=>h);return this.loc.listFormatter({type:"conjunction",style:a.listStyle||"narrow",...a}).format(l)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let a="P";return 0!==this.years&&(a+=this.years+"Y"),(0!==this.months||0!==this.quarters)&&(a+=this.months+3*this.quarters+"M"),0!==this.weeks&&(a+=this.weeks+"W"),0!==this.days&&(a+=this.days+"D"),(0!==this.hours||0!==this.minutes||0!==this.seconds||0!==this.milliseconds)&&(a+="T"),0!==this.hours&&(a+=this.hours+"H"),0!==this.minutes&&(a+=this.minutes+"M"),(0!==this.seconds||0!==this.milliseconds)&&(a+=Y3(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===a&&(a+="T0S"),a}toISOTime(a={}){if(!this.isValid)return null;const l=this.toMillis();if(l<0||l>=864e5)return null;a={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...a};const h=this.shiftTo("hours","minutes","seconds","milliseconds");let d="basic"===a.format?"hhmm":"hh:mm";(!a.suppressSeconds||0!==h.seconds||0!==h.milliseconds)&&(d+="basic"===a.format?"ss":":ss",(!a.suppressMilliseconds||0!==h.milliseconds)&&(d+=".SSS"));let f=h.toFormat(d);return a.includePrefix&&(f="T"+f),f}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(a){if(!this.isValid)return this;const l=ki.fromDurationLike(a),h={};for(const d of Gm)(av(l.values,d)||av(this.values,d))&&(h[d]=l.get(d)+this.get(d));return Hm(this,{values:h},!0)}minus(a){if(!this.isValid)return this;const l=ki.fromDurationLike(a);return this.plus(l.negate())}mapUnits(a){if(!this.isValid)return this;const l={};for(const h of Object.keys(this.values))l[h]=XQ(a(this.values[h],h));return Hm(this,{values:l},!0)}get(a){return this[ki.normalizeUnit(a)]}set(a){return this.isValid?Hm(this,{values:{...this.values,...ED(a,ki.normalizeUnit)}}):this}reconfigure({locale:a,numberingSystem:l,conversionAccuracy:h}={}){const f={loc:this.loc.clone({locale:a,numberingSystem:l})};return h&&(f.conversionAccuracy=h),Hm(this,f)}as(a){return this.isValid?this.shiftTo(a).get(a):NaN}normalize(){if(!this.isValid)return this;const a=this.toObject();return function p8e(c,a){d8e.reduce((l,h)=>Oi(a[h])?l:(l&&gee(c,a,l,a,h),h),null)}(this.matrix,a),Hm(this,{values:a},!0)}shiftTo(...a){if(!this.isValid)return this;if(0===a.length)return this;a=a.map(m=>ki.normalizeUnit(m));const l={},h={},d=this.toObject();let f;for(const m of Gm)if(a.indexOf(m)>=0){f=m;let g=0;for(const _ in h)g+=this.matrix[_][m]*h[_],h[_]=0;Um(d[m])&&(g+=d[m]);const y=Math.trunc(g);l[m]=y,h[m]=(1e3*g-1e3*y)/1e3;for(const _ in d)Gm.indexOf(_)>Gm.indexOf(m)&&gee(this.matrix,d,_,l,m)}else Um(d[m])&&(h[m]=d[m]);for(const m in h)0!==h[m]&&(l[f]+=m===f?h[m]:h[m]/this.matrix[f][m]);return Hm(this,{values:l},!0).normalize()}negate(){if(!this.isValid)return this;const a={};for(const l of Object.keys(this.values))a[l]=0===this.values[l]?0:-this.values[l];return Hm(this,{values:a},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(a){if(!this.isValid||!a.isValid||!this.loc.equals(a.loc))return!1;function l(h,d){return void 0===h||0===h?void 0===d||0===d:h===d}for(const h of Gm)if(!l(this.values[h],a.values[h]))return!1;return!0}}const Q1="Invalid Interval";class ns{constructor(a){this.s=a.start,this.e=a.end,this.invalid=a.invalid||null,this.isLuxonInterval=!0}static invalid(a,l=null){if(!a)throw new Zl("need to specify a reason the Interval is invalid");const h=a instanceof Gc?a:new Gc(a,l);if(Ks.throwOnInvalid)throw new GGe(h);return new ns({invalid:h})}static fromDateTimes(a,l){const h=nT(a),d=nT(l),f=function m8e(c,a){return c&&c.isValid?a&&a.isValid?a<c?ns.invalid("end before start",`The end of an interval must be after its start, but you had start=${c.toISO()} and end=${a.toISO()}`):null:ns.invalid("missing or invalid end"):ns.invalid("missing or invalid start")}(h,d);return f??new ns({start:h,end:d})}static after(a,l){const h=ki.fromDurationLike(l),d=nT(a);return ns.fromDateTimes(d,d.plus(h))}static before(a,l){const h=ki.fromDurationLike(l),d=nT(a);return ns.fromDateTimes(d.minus(h),d)}static fromISO(a,l){const[h,d]=(a||"").split("/",2);if(h&&d){let f,m,g,y;try{f=oi.fromISO(h,l),m=f.isValid}catch{m=!1}try{g=oi.fromISO(d,l),y=g.isValid}catch{y=!1}if(m&&y)return ns.fromDateTimes(f,g);if(m){const _=ki.fromISO(d,l);if(_.isValid)return ns.after(f,_)}else if(y){const _=ki.fromISO(h,l);if(_.isValid)return ns.before(g,_)}}return ns.invalid("unparsable",`the input "${a}" can't be parsed as ISO 8601`)}static isInterval(a){return a&&a.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(a="milliseconds"){return this.isValid?this.toDuration(a).get(a):NaN}count(a="milliseconds"){if(!this.isValid)return NaN;const l=this.start.startOf(a),h=this.end.startOf(a);return Math.floor(h.diff(l,a).get(a))+1}hasSame(a){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,a))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(a){return!!this.isValid&&this.s>a}isBefore(a){return!!this.isValid&&this.e<=a}contains(a){return!!this.isValid&&this.s<=a&&this.e>a}set({start:a,end:l}={}){return this.isValid?ns.fromDateTimes(a||this.s,l||this.e):this}splitAt(...a){if(!this.isValid)return[];const l=a.map(nT).filter(m=>this.contains(m)).sort(),h=[];let{s:d}=this,f=0;for(;d<this.e;){const m=l[f]||this.e,g=+m>+this.e?this.e:m;h.push(ns.fromDateTimes(d,g)),d=g,f+=1}return h}splitBy(a){const l=ki.fromDurationLike(a);if(!this.isValid||!l.isValid||0===l.as("milliseconds"))return[];let f,{s:h}=this,d=1;const m=[];for(;h<this.e;){const g=this.start.plus(l.mapUnits(y=>y*d));f=+g>+this.e?this.e:g,m.push(ns.fromDateTimes(h,f)),h=f,d+=1}return m}divideEqually(a){return this.isValid?this.splitBy(this.length()/a).slice(0,a):[]}overlaps(a){return this.e>a.s&&this.s<a.e}abutsStart(a){return!!this.isValid&&+this.e==+a.s}abutsEnd(a){return!!this.isValid&&+a.e==+this.s}engulfs(a){return!!this.isValid&&this.s<=a.s&&this.e>=a.e}equals(a){return!(!this.isValid||!a.isValid)&&this.s.equals(a.s)&&this.e.equals(a.e)}intersection(a){if(!this.isValid)return this;const l=this.s>a.s?this.s:a.s,h=this.e<a.e?this.e:a.e;return l>=h?null:ns.fromDateTimes(l,h)}union(a){return this.isValid?ns.fromDateTimes(this.s<a.s?this.s:a.s,this.e>a.e?this.e:a.e):this}static merge(a){const[l,h]=a.sort((d,f)=>d.s-f.s).reduce(([d,f],m)=>f?f.overlaps(m)||f.abutsStart(m)?[d,f.union(m)]:[d.concat([f]),m]:[d,m],[[],null]);return h&&l.push(h),l}static xor(a){let l=null,h=0;const d=[],f=a.map(y=>[{time:y.s,type:"s"},{time:y.e,type:"e"}]),g=Array.prototype.concat(...f).sort((y,_)=>y.time-_.time);for(const y of g)h+="s"===y.type?1:-1,1===h?l=y.time:(l&&+l!=+y.time&&d.push(ns.fromDateTimes(l,y.time)),l=null);return ns.merge(d)}difference(...a){return ns.xor([this].concat(a)).map(l=>this.intersection(l)).filter(l=>l&&!l.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Q1}toISO(a){return this.isValid?`${this.s.toISO(a)}/${this.e.toISO(a)}`:Q1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Q1}toISOTime(a){return this.isValid?`${this.s.toISOTime(a)}/${this.e.toISOTime(a)}`:Q1}toFormat(a,{separator:l=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(a)}${l}${this.e.toFormat(a)}`:Q1}toDuration(a,l){return this.isValid?this.e.diff(this.s,a,l):ki.invalid(this.invalidReason)}mapEndpoints(a){return ns.fromDateTimes(a(this.s),a(this.e))}}class RD{static hasDST(a=Ks.defaultZone){const l=oi.now().setZone(a).set({month:12});return!a.isUniversal&&l.offset!==l.set({month:6}).offset}static isValidIANAZone(a){return Jh.isValidZone(a)}static normalizeZone(a){return Of(a,Ks.defaultZone)}static months(a="long",{locale:l=null,numberingSystem:h=null,locObj:d=null,outputCalendar:f="gregory"}={}){return(d||ts.create(l,h,f)).months(a)}static monthsFormat(a="long",{locale:l=null,numberingSystem:h=null,locObj:d=null,outputCalendar:f="gregory"}={}){return(d||ts.create(l,h,f)).months(a,!0)}static weekdays(a="long",{locale:l=null,numberingSystem:h=null,locObj:d=null}={}){return(d||ts.create(l,h,null)).weekdays(a)}static weekdaysFormat(a="long",{locale:l=null,numberingSystem:h=null,locObj:d=null}={}){return(d||ts.create(l,h,null)).weekdays(a,!0)}static meridiems({locale:a=null}={}){return ts.create(a).meridiems()}static eras(a="short",{locale:l=null}={}){return ts.create(l,null,"gregory").eras(a)}static features(){return{relative:HQ()}}}function yee(c,a){const l=d=>d.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),h=l(a)-l(c);return Math.floor(ki.fromMillis(h).as("days"))}const l4={arab:"[\u0660-\u0669]",arabext:"[\u06f0-\u06f9]",bali:"[\u1b50-\u1b59]",beng:"[\u09e6-\u09ef]",deva:"[\u0966-\u096f]",fullwide:"[\uff10-\uff19]",gujr:"[\u0ae6-\u0aef]",hanidec:"[\u3007|\u4e00|\u4e8c|\u4e09|\u56db|\u4e94|\u516d|\u4e03|\u516b|\u4e5d]",khmr:"[\u17e0-\u17e9]",knda:"[\u0ce6-\u0cef]",laoo:"[\u0ed0-\u0ed9]",limb:"[\u1946-\u194f]",mlym:"[\u0d66-\u0d6f]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0b66-\u0b6f]",tamldec:"[\u0be6-\u0bef]",telu:"[\u0c66-\u0c6f]",thai:"[\u0e50-\u0e59]",tibt:"[\u0f20-\u0f29]",latn:"\\d"},_ee={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},_8e=l4.hanidec.replace(/[\[|\]]/g,"").split("");function Hc({numberingSystem:c},a=""){return new RegExp(`${l4[c||"latn"]}${a}`)}function $i(c,a=(l=>l)){return{regex:c,deser:([l])=>a(function v8e(c){let a=parseInt(c,10);if(isNaN(a)){a="";for(let l=0;l<c.length;l++){const h=c.charCodeAt(l);if(-1!==c[l].search(l4.hanidec))a+=_8e.indexOf(c[l]);else for(const d in _ee){const[f,m]=_ee[d];h>=f&&h<=m&&(a+=h-f)}}return parseInt(a,10)}return a}(l))}}const vee=`[ ${String.fromCharCode(160)}]`,bee=new RegExp(vee,"g");function S8e(c){return c.replace(/\./g,"\\.?").replace(bee,vee)}function See(c){return c.replace(/\./g,"").replace(bee," ").toLowerCase()}function jc(c,a){return null===c?null:{regex:RegExp(c.map(S8e).join("|")),deser:([l])=>c.findIndex(h=>See(l)===See(h))+a}}function Tee(c,a){return{regex:c,deser:([,l,h])=>xD(l,h),groups:a}}function c4(c){return{regex:c,deser:([a])=>a}}function T8e(c){return c.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}const C8e={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};let u4=null;function wee(c,a,l){const h=function R8e(c,a){return Array.prototype.concat(...c.map(l=>function I8e(c,a){if(c.literal)return c;const l=Va.macroTokenToFormatOpts(c.val);if(!l)return c;const f=Va.create(a,l).formatDateTimeParts(function A8e(){return u4||(u4=oi.fromMillis(1555555555555)),u4}()).map(m=>function x8e(c,a,l){const{type:h,value:d}=c;if("literal"===h)return{literal:!0,val:d};let m=C8e[h];return"object"==typeof m&&(m=m[l[h]]),m?{literal:!1,val:m}:void 0}(m,0,l));return f.includes(void 0)?c:f}(l,a)))}(Va.parseFormat(l),c),d=h.map(m=>function w8e(c,a){const l=Hc(a),h=Hc(a,"{2}"),d=Hc(a,"{3}"),f=Hc(a,"{4}"),m=Hc(a,"{6}"),g=Hc(a,"{1,2}"),y=Hc(a,"{1,3}"),_=Hc(a,"{1,6}"),v=Hc(a,"{1,9}"),b=Hc(a,"{2,4}"),S=Hc(a,"{4,6}"),T=I=>({regex:RegExp(T8e(I.val)),deser:([M])=>M,literal:!0}),E=(I=>{if(c.literal)return T(I);switch(I.val){case"G":return jc(a.eras("short",!1),0);case"GG":return jc(a.eras("long",!1),0);case"y":return $i(_);case"yy":case"kk":return $i(b,K3);case"yyyy":case"kkkk":return $i(f);case"yyyyy":return $i(S);case"yyyyyy":return $i(m);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return $i(g);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return $i(h);case"MMM":return jc(a.months("short",!0,!1),1);case"MMMM":return jc(a.months("long",!0,!1),1);case"LLL":return jc(a.months("short",!1,!1),1);case"LLLL":return jc(a.months("long",!1,!1),1);case"o":case"S":return $i(y);case"ooo":case"SSS":return $i(d);case"u":return c4(v);case"uu":return c4(g);case"uuu":case"E":case"c":return $i(l);case"a":return jc(a.meridiems(),0);case"EEE":return jc(a.weekdays("short",!1,!1),1);case"EEEE":return jc(a.weekdays("long",!1,!1),1);case"ccc":return jc(a.weekdays("short",!0,!1),1);case"cccc":return jc(a.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Tee(new RegExp(`([+-]${g.source})(?::(${h.source}))?`),2);case"ZZZ":return Tee(new RegExp(`([+-]${g.source})(${h.source})?`),2);case"z":return c4(/[a-z_+-/]{1,256}?/i);default:return T(I)}})(c)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return E.token=c,E}(m,c)),f=d.find(m=>m.invalidReason);if(f)return{input:a,tokens:h,invalidReason:f.invalidReason};{const[m,g]=function E8e(c){return[`^${c.map(l=>l.regex).reduce((l,h)=>`${l}(${h.source})`,"")}$`,c]}(d),y=RegExp(m,"i"),[_,v]=function M8e(c,a,l){const h=c.match(a);if(h){const d={};let f=1;for(const m in l)if(av(l,m)){const g=l[m],y=g.groups?g.groups+1:1;!g.literal&&g.token&&(d[g.token.val[0]]=g.deser(h.slice(f,f+y))),f+=y}return[h,d]}return[h,{}]}(a,y,g),[b,S,T]=v?function D8e(c){let h,l=null;return Oi(c.z)||(l=Jh.create(c.z)),Oi(c.Z)||(l||(l=new va(c.Z)),h=c.Z),Oi(c.q)||(c.M=3*(c.q-1)+1),Oi(c.h)||(c.h<12&&1===c.a?c.h+=12:12===c.h&&0===c.a&&(c.h=0)),0===c.G&&c.y&&(c.y=-c.y),Oi(c.u)||(c.S=$3(c.u)),[Object.keys(c).reduce((f,m)=>{const g=(f=>{switch(f){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(m);return g&&(f[g]=c[m]),f},{}),l,h]}(v):[null,null,void 0];if(av(v,"a")&&av(v,"H"))throw new W1("Can't include meridiem when specifying 24-hour format");return{input:a,tokens:h,regex:y,rawMatches:_,matches:v,result:b,zone:S,specificOffset:T}}}const Cee=[0,31,59,90,120,151,181,212,243,273,304,334],xee=[0,31,60,91,121,152,182,213,244,274,305,335];function Jl(c,a){return new Gc("unit out of range",`you specified ${a} (of type ${typeof a}) as a ${c}, which is invalid`)}function Eee(c,a,l){const h=new Date(Date.UTC(c,a-1,l));c<100&&c>=0&&h.setUTCFullYear(h.getUTCFullYear()-1900);const d=h.getUTCDay();return 0===d?7:d}function Mee(c,a,l){return l+(X1(c)?xee:Cee)[a-1]}function Dee(c,a){const l=X1(c)?xee:Cee,h=l.findIndex(f=>f<a);return{month:h+1,day:a-l[h]}}function h4(c){const{year:a,month:l,day:h}=c,d=Mee(a,l,h),f=Eee(a,l,h);let g,m=Math.floor((d-f+10)/7);return m<1?(g=a-1,m=CD(g)):m>CD(a)?(g=a+1,m=1):g=a,{weekYear:g,weekNumber:m,weekday:f,...MD(c)}}function Aee(c){const{weekYear:a,weekNumber:l,weekday:h}=c,d=Eee(a,1,4),f=q1(a);let g,m=7*l+h-d-3;m<1?(g=a-1,m+=q1(g)):m>f?(g=a+1,m-=q1(a)):g=a;const{month:y,day:_}=Dee(g,m);return{year:g,month:y,day:_,...MD(c)}}function d4(c){const{year:a,month:l,day:h}=c;return{year:a,ordinal:Mee(a,l,h),...MD(c)}}function Iee(c){const{year:a,ordinal:l}=c,{month:h,day:d}=Dee(a,l);return{year:a,month:h,day:d,...MD(c)}}function Ree(c){const a=TD(c.year),l=Kh(c.month,1,12),h=Kh(c.day,1,wD(c.year,c.month));return a?l?!h&&Jl("day",c.day):Jl("month",c.month):Jl("year",c.year)}function Lee(c){const{hour:a,minute:l,second:h,millisecond:d}=c,f=Kh(a,0,23)||24===a&&0===l&&0===h&&0===d,m=Kh(l,0,59),g=Kh(h,0,59),y=Kh(d,0,999);return f?m?g?!y&&Jl("millisecond",d):Jl("second",h):Jl("minute",l):Jl("hour",a)}const f4="Invalid DateTime",Pee=864e13;function LD(c){return new Gc("unsupported zone",`the zone "${c.name}" is not supported`)}function p4(c){return null===c.weekData&&(c.weekData=h4(c.c)),c.weekData}function eT(c,a){const l={ts:c.ts,zone:c.zone,c:c.c,o:c.o,loc:c.loc,invalid:c.invalid};return new oi({...l,...a,old:l})}function Oee(c,a,l){let h=c-60*a*1e3;const d=l.offset(h);if(a===d)return[h,a];h-=60*(d-a)*1e3;const f=l.offset(h);return d===f?[h,d]:[c-60*Math.min(d,f)*1e3,Math.max(d,f)]}function Nee(c,a){const l=new Date(c+=60*a*1e3);return{year:l.getUTCFullYear(),month:l.getUTCMonth()+1,day:l.getUTCDate(),hour:l.getUTCHours(),minute:l.getUTCMinutes(),second:l.getUTCSeconds(),millisecond:l.getUTCMilliseconds()}}function PD(c,a,l){return Oee(Z3(c),a,l)}function Fee(c,a){const l=c.o,h=c.c.year+Math.trunc(a.years),d=c.c.month+Math.trunc(a.months)+3*Math.trunc(a.quarters),f={...c.c,year:h,month:d,day:Math.min(c.c.day,wD(h,d))+Math.trunc(a.days)+7*Math.trunc(a.weeks)},m=ki.fromObject({years:a.years-Math.trunc(a.years),quarters:a.quarters-Math.trunc(a.quarters),months:a.months-Math.trunc(a.months),weeks:a.weeks-Math.trunc(a.weeks),days:a.days-Math.trunc(a.days),hours:a.hours,minutes:a.minutes,seconds:a.seconds,milliseconds:a.milliseconds}).as("milliseconds"),g=Z3(f);let[y,_]=Oee(g,l,c.zone);return 0!==m&&(y+=m,_=c.zone.offset(y)),{ts:y,o:_}}function tT(c,a,l,h,d,f){const{setZone:m,zone:g}=l;if(c&&0!==Object.keys(c).length){const y=a||g,_=oi.fromObject(c,{...l,zone:y,specificOffset:f});return m?_:_.setZone(g)}return oi.invalid(new Gc("unparsable",`the input "${d}" can't be parsed as ${h}`))}function OD(c,a,l=!0){return c.isValid?Va.create(ts.create("en-US"),{allowZ:l,forceSimple:!0}).formatDateTimeFromString(c,a):null}function m4(c,a){const l=c.c.year>9999||c.c.year<0;let h="";return l&&c.c.year>=0&&(h+="+"),h+=ks(c.c.year,l?6:4),a?(h+="-",h+=ks(c.c.month),h+="-",h+=ks(c.c.day)):(h+=ks(c.c.month),h+=ks(c.c.day)),h}function kee(c,a,l,h,d,f){let m=ks(c.c.hour);return a?(m+=":",m+=ks(c.c.minute),(0!==c.c.second||!l)&&(m+=":")):m+=ks(c.c.minute),(0!==c.c.second||!l)&&(m+=ks(c.c.second),(0!==c.c.millisecond||!h)&&(m+=".",m+=ks(c.c.millisecond,3))),d&&(c.isOffsetFixed&&0===c.offset&&!f?m+="Z":c.o<0?(m+="-",m+=ks(Math.trunc(-c.o/60)),m+=":",m+=ks(Math.trunc(-c.o%60))):(m+="+",m+=ks(Math.trunc(c.o/60)),m+=":",m+=ks(Math.trunc(c.o%60)))),f&&(m+="["+c.zone.ianaName+"]"),m}const Vee={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},N8e={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},F8e={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Bee=["year","month","day","hour","minute","second","millisecond"],k8e=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],V8e=["year","ordinal","hour","minute","second","millisecond"];function Uee(c){const a={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[c.toLowerCase()];if(!a)throw new wQ(c);return a}function zee(c,a){const l=Of(a.zone,Ks.defaultZone),h=ts.fromObject(a),d=Ks.now();let f,m;if(Oi(c.year))f=d;else{for(const _ of Bee)Oi(c[_])&&(c[_]=Vee[_]);const g=Ree(c)||Lee(c);if(g)return oi.invalid(g);const y=l.offset(d);[f,m]=PD(c,y,l)}return new oi({ts:f,zone:l,loc:h,o:m})}function Gee(c,a,l){const h=!!Oi(l.round)||l.round,d=(m,g)=>(m=Y3(m,h||l.calendary?0:2,!0),a.loc.clone(l).relFormatter(l).format(m,g)),f=m=>l.calendary?a.hasSame(c,m)?0:a.startOf(m).diff(c.startOf(m),m).get(m):a.diff(c,m).get(m);if(l.unit)return d(f(l.unit),l.unit);for(const m of l.units){const g=f(m);if(Math.abs(g)>=1)return d(g,m)}return d(c>a?-0:0,l.units[l.units.length-1])}function Hee(c){let l,a={};return c.length>0&&"object"==typeof c[c.length-1]?(a=c[c.length-1],l=Array.from(c).slice(0,c.length-1)):l=Array.from(c),[a,l]}class oi{constructor(a){const l=a.zone||Ks.defaultZone;let h=a.invalid||(Number.isNaN(a.ts)?new Gc("invalid input"):null)||(l.isValid?null:LD(l));this.ts=Oi(a.ts)?Ks.now():a.ts;let d=null,f=null;if(!h)if(a.old&&a.old.ts===this.ts&&a.old.zone.equals(l))[d,f]=[a.old.c,a.old.o];else{const g=l.offset(this.ts);d=Nee(this.ts,g),h=Number.isNaN(d.year)?new Gc("invalid input"):null,d=h?null:d,f=h?null:g}this._zone=l,this.loc=a.loc||ts.create(),this.invalid=h,this.weekData=null,this.c=d,this.o=f,this.isLuxonDateTime=!0}static now(){return new oi({})}static local(){const[a,l]=Hee(arguments),[h,d,f,m,g,y,_]=l;return zee({year:h,month:d,day:f,hour:m,minute:g,second:y,millisecond:_},a)}static utc(){const[a,l]=Hee(arguments),[h,d,f,m,g,y,_]=l;return a.zone=va.utcInstance,zee({year:h,month:d,day:f,hour:m,minute:g,second:y,millisecond:_},a)}static fromJSDate(a,l={}){const h=function qGe(c){return"[object Date]"===Object.prototype.toString.call(c)}(a)?a.valueOf():NaN;if(Number.isNaN(h))return oi.invalid("invalid input");const d=Of(l.zone,Ks.defaultZone);return d.isValid?new oi({ts:h,zone:d,loc:ts.fromObject(l)}):oi.invalid(LD(d))}static fromMillis(a,l={}){if(Um(a))return a<-Pee||a>Pee?oi.invalid("Timestamp out of range"):new oi({ts:a,zone:Of(l.zone,Ks.defaultZone),loc:ts.fromObject(l)});throw new Zl(`fromMillis requires a numerical input, but received a ${typeof a} with value ${a}`)}static fromSeconds(a,l={}){if(Um(a))return new oi({ts:1e3*a,zone:Of(l.zone,Ks.defaultZone),loc:ts.fromObject(l)});throw new Zl("fromSeconds requires a numerical input")}static fromObject(a,l={}){a=a||{};const h=Of(l.zone,Ks.defaultZone);if(!h.isValid)return oi.invalid(LD(h));const d=Ks.now(),f=Oi(l.specificOffset)?h.offset(d):l.specificOffset,m=ED(a,Uee),g=!Oi(m.ordinal),y=!Oi(m.year),_=!Oi(m.month)||!Oi(m.day),v=y||_,b=m.weekYear||m.weekNumber,S=ts.fromObject(l);if((v||g)&&b)throw new W1("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(_&&g)throw new W1("Can't mix ordinal dates with month/day");const T=b||m.weekday&&!v;let x,E,I=Nee(d,f);T?(x=k8e,E=N8e,I=h4(I)):g?(x=V8e,E=F8e,I=d4(I)):(x=Bee,E=Vee);let M=!1;for(const $ of x)Oi(m[$])?m[$]=M?E[$]:I[$]:M=!0;const D=T?function P8e(c){const a=TD(c.weekYear),l=Kh(c.weekNumber,1,CD(c.weekYear)),h=Kh(c.weekday,1,7);return a?l?!h&&Jl("weekday",c.weekday):Jl("week",c.week):Jl("weekYear",c.weekYear)}(m):g?function O8e(c){const a=TD(c.year),l=Kh(c.ordinal,1,q1(c.year));return a?!l&&Jl("ordinal",c.ordinal):Jl("year",c.year)}(m):Ree(m),L=D||Lee(m);if(L)return oi.invalid(L);const P=T?Aee(m):g?Iee(m):m,[F,B]=PD(P,f,h),G=new oi({ts:F,zone:h,o:B,loc:S});return m.weekday&&v&&a.weekday!==G.weekday?oi.invalid("mismatched weekday",`you can't specify both a weekday of ${m.weekday} and a date of ${G.toISO()}`):G}static fromISO(a,l={}){const[h,d]=function Q6e(c){return uv(c,[X6e,pee],[q6e,Z6e],[$6e,K6e],[Y6e,J6e])}(a);return tT(h,d,l,"ISO 8601",a)}static fromRFC2822(a,l={}){const[h,d]=function e8e(c){return uv(function z6e(c){return c.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(c),[B6e,U6e])}(a);return tT(h,d,l,"RFC 2822",a)}static fromHTTP(a,l={}){const[h,d]=function t8e(c){return uv(c,[G6e,fee],[H6e,fee],[j6e,W6e])}(a);return tT(h,d,l,"HTTP",l)}static fromFormat(a,l,h={}){if(Oi(a)||Oi(l))throw new Zl("fromFormat requires an input string and a format");const{locale:d=null,numberingSystem:f=null}=h,m=ts.fromOpts({locale:d,numberingSystem:f,defaultToEN:!0}),[g,y,_,v]=function L8e(c,a,l){const{result:h,zone:d,specificOffset:f,invalidReason:m}=wee(c,a,l);return[h,d,f,m]}(m,a,l);return v?oi.invalid(v):tT(g,y,h,`format ${l}`,a,_)}static fromString(a,l,h={}){return oi.fromFormat(a,l,h)}static fromSQL(a,l={}){const[h,d]=function l8e(c){return uv(c,[s8e,pee],[o8e,a8e])}(a);return tT(h,d,l,"SQL",a)}static invalid(a,l=null){if(!a)throw new Zl("need to specify a reason the DateTime is invalid");const h=a instanceof Gc?a:new Gc(a,l);if(Ks.throwOnInvalid)throw new zGe(h);return new oi({invalid:h})}static isDateTime(a){return a&&a.isLuxonDateTime||!1}get(a){return this[a]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?p4(this).weekYear:NaN}get weekNumber(){return this.isValid?p4(this).weekNumber:NaN}get weekday(){return this.isValid?p4(this).weekday:NaN}get ordinal(){return this.isValid?d4(this.c).ordinal:NaN}get monthShort(){return this.isValid?RD.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?RD.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?RD.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?RD.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}get isInLeapYear(){return X1(this.year)}get daysInMonth(){return wD(this.year,this.month)}get daysInYear(){return this.isValid?q1(this.year):NaN}get weeksInWeekYear(){return this.isValid?CD(this.weekYear):NaN}resolvedLocaleOptions(a={}){const{locale:l,numberingSystem:h,calendar:d}=Va.create(this.loc.clone(a),a).resolvedOptions(this);return{locale:l,numberingSystem:h,outputCalendar:d}}toUTC(a=0,l={}){return this.setZone(va.instance(a),l)}toLocal(){return this.setZone(Ks.defaultZone)}setZone(a,{keepLocalTime:l=!1,keepCalendarTime:h=!1}={}){if((a=Of(a,Ks.defaultZone)).equals(this.zone))return this;if(a.isValid){let d=this.ts;if(l||h){const f=a.offset(this.ts),m=this.toObject();[d]=PD(m,f,a)}return eT(this,{ts:d,zone:a})}return oi.invalid(LD(a))}reconfigure({locale:a,numberingSystem:l,outputCalendar:h}={}){return eT(this,{loc:this.loc.clone({locale:a,numberingSystem:l,outputCalendar:h})})}setLocale(a){return this.reconfigure({locale:a})}set(a){if(!this.isValid)return this;const l=ED(a,Uee),h=!Oi(l.weekYear)||!Oi(l.weekNumber)||!Oi(l.weekday),d=!Oi(l.ordinal),f=!Oi(l.year),m=!Oi(l.month)||!Oi(l.day);if((f||m||d)&&(l.weekYear||l.weekNumber))throw new W1("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&d)throw new W1("Can't mix ordinal dates with month/day");let _;h?_=Aee({...h4(this.c),...l}):Oi(l.ordinal)?(_={...this.toObject(),...l},Oi(l.day)&&(_.day=Math.min(wD(_.year,_.month),_.day))):_=Iee({...d4(this.c),...l});const[v,b]=PD(_,this.o,this.zone);return eT(this,{ts:v,o:b})}plus(a){return this.isValid?eT(this,Fee(this,ki.fromDurationLike(a))):this}minus(a){return this.isValid?eT(this,Fee(this,ki.fromDurationLike(a).negate())):this}startOf(a){if(!this.isValid)return this;const l={},h=ki.normalizeUnit(a);switch(h){case"years":l.month=1;case"quarters":case"months":l.day=1;case"weeks":case"days":l.hour=0;case"hours":l.minute=0;case"minutes":l.second=0;case"seconds":l.millisecond=0}if("weeks"===h&&(l.weekday=1),"quarters"===h){const d=Math.ceil(this.month/3);l.month=3*(d-1)+1}return this.set(l)}endOf(a){return this.isValid?this.plus({[a]:1}).startOf(a).minus(1):this}toFormat(a,l={}){return this.isValid?Va.create(this.loc.redefaultToEN(l)).formatDateTimeFromString(this,a):f4}toLocaleString(a=q3,l={}){return this.isValid?Va.create(this.loc.clone(l),a).formatDateTime(this):f4}toLocaleParts(a={}){return this.isValid?Va.create(this.loc.clone(a),a).formatDateTimeParts(this):[]}toISO({format:a="extended",suppressSeconds:l=!1,suppressMilliseconds:h=!1,includeOffset:d=!0,extendedZone:f=!1}={}){if(!this.isValid)return null;const m="extended"===a;let g=m4(this,m);return g+="T",g+=kee(this,m,l,h,d,f),g}toISODate({format:a="extended"}={}){return this.isValid?m4(this,"extended"===a):null}toISOWeekDate(){return OD(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:a=!1,suppressSeconds:l=!1,includeOffset:h=!0,includePrefix:d=!1,extendedZone:f=!1,format:m="extended"}={}){return this.isValid?(d?"T":"")+kee(this,"extended"===m,l,a,h,f):null}toRFC2822(){return OD(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return OD(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?m4(this,!0):null}toSQLTime({includeOffset:a=!0,includeZone:l=!1,includeOffsetSpace:h=!0}={}){let d="HH:mm:ss.SSS";return(l||a)&&(h&&(d+=" "),l?d+="z":a&&(d+="ZZ")),OD(this,d,!0)}toSQL(a={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(a)}`:null}toString(){return this.isValid?this.toISO():f4}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(a={}){if(!this.isValid)return{};const l={...this.c};return a.includeConfig&&(l.outputCalendar=this.outputCalendar,l.numberingSystem=this.loc.numberingSystem,l.locale=this.loc.locale),l}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(a,l="milliseconds",h={}){if(!this.isValid||!a.isValid)return ki.invalid("created by diffing an invalid DateTime");const d={locale:this.locale,numberingSystem:this.numberingSystem,...h},f=function $Ge(c){return Array.isArray(c)?c:[c]}(l).map(ki.normalizeUnit),m=a.valueOf()>this.valueOf(),_=function y8e(c,a,l,h){let[d,f,m,g]=function g8e(c,a,l){const h=[["years",(g,y)=>y.year-g.year],["quarters",(g,y)=>y.quarter-g.quarter],["months",(g,y)=>y.month-g.month+12*(y.year-g.year)],["weeks",(g,y)=>{const _=yee(g,y);return(_-_%7)/7}],["days",yee]],d={};let f,m;for(const[g,y]of h)if(l.indexOf(g)>=0){f=g;let _=y(c,a);m=c.plus({[g]:_}),m>a?(c=c.plus({[g]:_-1}),_-=1):c=m,d[g]=_}return[c,d,m,f]}(c,a,l);const y=a-d,_=l.filter(b=>["hours","minutes","seconds","milliseconds"].indexOf(b)>=0);0===_.length&&(m<a&&(m=d.plus({[g]:1})),m!==d&&(f[g]=(f[g]||0)+y/(m-d)));const v=ki.fromObject(f,h);return _.length>0?ki.fromMillis(y,h).shiftTo(..._).plus(v):v}(m?this:a,m?a:this,f,d);return m?_.negate():_}diffNow(a="milliseconds",l={}){return this.diff(oi.now(),a,l)}until(a){return this.isValid?ns.fromDateTimes(this,a):this}hasSame(a,l){if(!this.isValid)return!1;const h=a.valueOf(),d=this.setZone(a.zone,{keepLocalTime:!0});return d.startOf(l)<=h&&h<=d.endOf(l)}equals(a){return this.isValid&&a.isValid&&this.valueOf()===a.valueOf()&&this.zone.equals(a.zone)&&this.loc.equals(a.loc)}toRelative(a={}){if(!this.isValid)return null;const l=a.base||oi.fromObject({},{zone:this.zone}),h=a.padding?this<l?-a.padding:a.padding:0;let d=["years","months","days","hours","minutes","seconds"],f=a.unit;return Array.isArray(a.unit)&&(d=a.unit,f=void 0),Gee(l,this.plus(h),{...a,numeric:"always",units:d,unit:f})}toRelativeCalendar(a={}){return this.isValid?Gee(a.base||oi.fromObject({},{zone:this.zone}),this,{...a,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...a){if(!a.every(oi.isDateTime))throw new Zl("min requires all arguments be DateTimes");return jQ(a,l=>l.valueOf(),Math.min)}static max(...a){if(!a.every(oi.isDateTime))throw new Zl("max requires all arguments be DateTimes");return jQ(a,l=>l.valueOf(),Math.max)}static fromFormatExplain(a,l,h={}){const{locale:d=null,numberingSystem:f=null}=h;return wee(ts.fromOpts({locale:d,numberingSystem:f,defaultToEN:!0}),a,l)}static fromStringExplain(a,l,h={}){return oi.fromFormatExplain(a,l,h)}static get DATE_SHORT(){return q3}static get DATE_MED(){return CQ}static get DATE_MED_WITH_WEEKDAY(){return jGe}static get DATE_FULL(){return xQ}static get DATE_HUGE(){return EQ}static get TIME_SIMPLE(){return MQ}static get TIME_WITH_SECONDS(){return DQ}static get TIME_WITH_SHORT_OFFSET(){return AQ}static get TIME_WITH_LONG_OFFSET(){return IQ}static get TIME_24_SIMPLE(){return RQ}static get TIME_24_WITH_SECONDS(){return LQ}static get TIME_24_WITH_SHORT_OFFSET(){return PQ}static get TIME_24_WITH_LONG_OFFSET(){return OQ}static get DATETIME_SHORT(){return NQ}static get DATETIME_SHORT_WITH_SECONDS(){return FQ}static get DATETIME_MED(){return kQ}static get DATETIME_MED_WITH_SECONDS(){return VQ}static get DATETIME_MED_WITH_WEEKDAY(){return WGe}static get DATETIME_FULL(){return BQ}static get DATETIME_FULL_WITH_SECONDS(){return UQ}static get DATETIME_HUGE(){return zQ}static get DATETIME_HUGE_WITH_SECONDS(){return GQ}}function nT(c){if(oi.isDateTime(c))return c;if(c&&c.valueOf&&Um(c.valueOf()))return oi.fromJSDate(c);if(c&&"object"==typeof c)return oi.fromObject(c);throw new Zl(`Unknown datetime argument: ${c}, of type ${typeof c}`)}function jee(c){if(!c)return;const a=[],l=c.split(",");for(const h in l)if(l[h]){const d=l[h].split("-");if(1===d.length)a.push(l[h]);else if(2===d.length){const f=d[0].charCodeAt(0),m=d[1].charCodeAt(0);if(f<=m)for(let g=f;g<=m;g++)a.push(String.fromCharCode(g).toLowerCase());else for(let g=f;g>=m;g--)a.push(String.fromCharCode(g).toLowerCase())}}return a}let Wee=(()=>{class c{constructor(l,h){this.wmtsClient=l,this.http=h}checkContext(l){return function LGe(c){let a;return c?.properties?.links&&(a=c.properties.links.profiles.find(l=>"http://www.opengis.net/spec/owc-geojson/1.0/req/core"===l.href)),!!a||(console.error("this is not a valid OWS Context v1.0!"),!1)}(l)}getContextTitle(l){return l.properties.title}getContextPublisher(l){return l.properties.publisher?l.properties.publisher:null}getContextExtent(l){return l.bbox?l.bbox:null}getResources(l){return l.features}getGroupResources(l){return l.features.filter(d=>{const f=this.getLayerGroupFromFolder(d);return f&&!Object.keys(zl).includes(f)})}getSingleResources(l){return l.features.filter(d=>{const f=this.getLayerGroupFromFolder(d);return!f||Object.keys(zl).includes(f)})}getResourceTitle(l){return l.properties.title}getResourceFolder(l){return l.properties.folder}getLayerGroupFromFolder(l){const h=this.getResourceFolder(l);if(h){const d=h.split("/");if(1===d.length){if(!zl[h])return h}else{if(2===d.length)return zl[d[0]]||console.warn(`Folder (${h}) should be named like: ${Object.keys(zl).map(m=>`${m}/<FolderName>`).join(" | ")}`),d[1];console.log("only one Folder hierarchy is implemented",d)}}}getFilterType(l){if(l.properties.folder){const d=l.properties.folder.split("/")[0];if(zl[d])return d}}getResourceUpdated(l){return l.properties.updated}getResourceDate(l){return l.properties.date?l.properties.date:null}getResourceOfferings(l){return l.properties.offerings?l.properties.offerings:null}isActive(l){let h=!0;return(!1===l.properties.active||l.properties?.active)&&(h=l.properties.active),h}getResourceDescription(l){let h="";return l.properties.abstract&&(h=l.properties.abstract),h}getResourceOpacity(l){let h=1;return l.properties?.opacity&&(h=l.properties.opacity),h}getResourceAttribution(l){let h="";return l.properties?.attribution?h=l.properties.attribution:l.properties.rights&&(h=l.properties.rights),h}getResourceShards(l){if(l.properties?.shards)return l.properties.shards}getResourceMinMaxZoom(l,h="EPSG:4326"){const d={minZoom:null,maxZoom:null};return l.properties.minZoom?d.minZoom=l.properties.minZoom:l.properties.maxscaledenominator&&(d.minZoom=this.scaleDenominatorToZoom(l.properties.maxscaledenominator,h)||null),l.properties.maxZoom?d.maxZoom=l.properties.maxZoom:l.properties.minscaledenominator&&(d.maxZoom=this.scaleDenominatorToZoom(l.properties.minscaledenominator,h)||null),d}getTimeValueFromDimensions(l,h){if(null!==l)if(/,/g.test(l)){const f=l.split(",");if(f.length>0){const m=[];for(const g of f){const y=this.parseSingleTimeOrPeriod(g);"object"==typeof y&&y.interval&&(!y.periodicity&&h?y.periodicity=h:!y.periodicity&&!h&&console.warn("Interval without a period",l,h)),m.push(y)}return m}}else{const f=this.parseSingleTimeOrPeriod(l);if("object"==typeof f&&f.interval)return!f.periodicity&&h?f.periodicity=h:!f.periodicity&&!h&&console.warn("Interval without a period",l,h),f;if("string"==typeof f)return[f]}}parseSingleTimeOrPeriod(l){const h=oi.fromISO(l);if(h.isValid)return h.toUTC().toISO();{const d=ns.fromISO(l);return d.isValid?{periodicity:this.parseISO8601Period(l),interval:`${d.start.toUTC().toISO()}/${d.end.toUTC().toISO()}`}:(console.warn("no Interval or not valid",l),null)}}parseISO8601Period(l){const h=l.match(/P\d*[YMWD](T\d\d[HMS])*/);if(h)return h[0]}getResourceDimensions(l){if(!l.properties.dimensions)return;const h={};for(const d of l.properties.dimensions){const f=d.name;"time"===f?(h.time=this.getTimeDimensions(l.properties.dimensions),null===h.time.values&&console.log("check to get time dimensions value from OGC Service later!!",l)):"elevation"===f?(h.elevation=this.getElevationDimension(l.properties.dimensions),null===h.elevation.values&&console.log("check to get elevation dimensions value from OGC Service later!!",l)):h[f]=d}return h}getTimeDimensions(l){let h={values:null,units:null};const d=l.find(m=>"time"===m.name);if(!d)return;const f=this.getTimeValueFromDimensions(d.values,d?.display?.period);return h={values:null,units:d.units,display:{}},Array.isArray(f)?h.values=f:f&&"string"!=typeof f&&f.interval&&f.periodicity&&(h.values=f,f.periodicity&&(h.display.period=f.periodicity)),d?.display?.format&&(h.display.format=d.display.format),h}getElevationDimension(l){const h={values:null,units:null},d=l.find(f=>"elevation"===f.name);if(d)return h.values=d.value,h.units=d.units,d.display&&(h.display=d.display),h}getLayertypeFromOfferingCode(l){return W3(l.code)?yc:X3(l.code)?_c:SQ(l.code)?gh:function BGe(c){return c===gQ}(l.code)?mh:function UGe(c){return c===yQ}(l.code)?au:TQ(l.code)?Nd:SD(l.code)?el:l.code}checkIfServiceOffering(l){return!(l.contents||!l.operations)}checkIfDataOffering(l){return!(!l.contents||l.operations)}getLegendUrl(l){let h="";if(l.styles){const d=l.styles.find(f=>f.default);if(d)return d.legendURL}else l.legendUrl&&(h=l.legendUrl);return h}getLayers(l,h){const d=[],f=this.getResources(l),m=[];return f.forEach(g=>{const y=this.createLayerOrGroupFromResource(g,l,h,m);d.push(y)}),yM(d).pipe(q(g=>g.filter(y=>y))).pipe(q(g=>g.reverse()))}createLayerOrGroupFromResource(l,h,d,f){const m=this.getGroupResources(h),g=this.getLayerGroupFromFolder(l);if(g){if(f.includes(g))return Ct(null);{f.push(g);const y=m.filter(v=>this.getLayerGroupFromFolder(v)===g).reverse();return this.createLayerGroup(g,y,h,d)}}return this.createLayerFromDefaultOffering(l,h,d)}createLayerGroup(l,h,d,f){const m=[];let g=null;for(const _ of h)g=this.getFilterType(_),m.push(this.createLayerFromDefaultOffering(_,d,f));return yM(m).pipe(q(_=>_.filter(v=>v))).pipe(q(_=>{if(_.length){if(g===zl.Baselayers){const v=_.filter(E=>E.description),b=v.map(E=>E.description),S=_.map(E=>E.legendImg).filter(E=>E),T={id:`${l}_${_.map(E=>E.id).join(" ")}`.replace(/\s/g,"_"),name:l,layers:_,filtertype:zl.Baselayers};return b.length&&(T.description=b.map((E,I)=>this.generateAbstractFromLayerDescription(E,v[I].id)).join(";\r\n")),S&&(T.legendImg=S[0]),new ux(T)}return new Ur({id:`${l}_${_.map(b=>b.id).join(" ")}`.replace(/\s/g,"_"),name:l,layers:_,filtertype:_[0].filtertype})}})).pipe(Ki(_=>_ instanceof Ur||_ instanceof so))}createLayerFromDefaultOffering(l,h,d){const f=l.properties?.offerings;if(f){const m=f.find(g=>W3(g.code))||f.find(g=>X3(g.code))||f.find(g=>SQ(g.code))||f.find(g=>SD(g.code))||f[0];return this.createLayerFromOffering(m,l,h,d)}return Ct(null)}createLayerFromOffering(l,h,d,f){const m=this.getLayertypeFromOfferingCode(l);return this.isRasterLayerType(m)&&this.isVectorLayerType(m)?BC(this.createRasterLayerFromOffering(l,h,d,f),this.createVectorLayerFromOffering(l,h,d,f)).pipe(Ki(v=>v instanceof so)):this.isRasterLayerType(m)?this.createRasterLayerFromOffering(l,h,d,f):this.isVectorLayerType(m)?this.createVectorLayerFromOffering(l,h,d,f):(console.warn(`This type of service (${m}) has not been implemented yet.`,l),Ct(null))}createVectorLayerFromOffering(l,h,d,f){const m=this.getLayertypeFromOfferingCode(l);let g=Ct(null);switch(m){case gh:g=this.createWfsLayerFromOffering(l,h,d);break;case el:g=this.createVectorTileLayerFromOffering(l,h,d,f);break;case au:case mh:g=this.createDataVectorLayerFromOffering(l,h,d);break;default:console.warn(`This type of layer '${m}' / offering '${l.code}' cannot be converted into a VectorLayer`,l)}return g}isVectorLayerType(l){return[gh,mh,au,el].includes(l)}getVectorLayerOptions(l,h,d,f){const m=this.getLayerOptions(l,h,d);if(this.isVectorLayerType(m.type)){const{minZoom:g,maxZoom:y}=this.getResourceMinMaxZoom(h,f),_=jee(this.getResourceShards(h));return{...m,type:m.type,subdomains:_,maxZoom:y,minZoom:g}}console.error(`The layer ${m.id} is not a VectorLayer`,m)}getWfsOptions(l){let d=null;if(l.operations.find(f=>f.code===bD)){const{url:f,searchParams:m}=this.checkWfsParams(l);f&&m&&(d=`${f}?${m.toString()}`)}return d}checkWfsParams(l){const{url:h,searchParams:d}=this.parseOperationUrl(l,bD),f_typeNames=d.get("TYPENAME")||d.get("TYPENAMES"),f_version=d.get("VERSION"),f_service=d.get("SERVICE"),f_request=d.get("REQUEST");return(f_typeNames||f_version)&&f_service&&f_request?{url:h,searchParams:d}:(console.warn(`URL does not contain the minimum required arguments for a WFS typeName: ${f_typeNames}, version: ${f_version}, service: ${f_service}, request: ${f_request}`,`${h}?${d.toString()}`),{url:null,searchParams:null})}createRasterLayerFromOffering(l,h,d,f){const m=this.getLayertypeFromOfferingCode(l);let g=Ct(null);switch(m){case yc:g=this.createWmsLayerFromOffering(l,h,d,f);break;case _c:g=this.createWmtsLayerFromOffering(l,h,d,f);break;case Nd:g=this.createXyzLayerFromOffering(l,h,d,f);break;case el:g=this.createTmsRasterLayerFromOffering(l,h,d,f);break;default:console.warn(`This type of offering '${l.code}' cannot be converted into a RasterLayer.`,l)}return g}isRasterLayerType(l){return[yc,_c,Nd,el].includes(l)}createVectorTileLayerFromOffering(l,h,d,f){if(!SD(l.code))return Ct(null);if(!l.operations.find(g=>"application/vnd.mapbox-vector-tile"===g.type))return Ct(null);{const g=this.getVectorLayerOptions(l,h,d),y=l.operations.find(_=>_.code===j1).href;if(g.url=y,!l.styles||"OpenMapStyle"!==l.styles[0]?.content.type)return Ct(new qr(g));{const _=l.styles[0].content;if(_?.styleSource){let v;return g.options?g.options.style||(g.options.style={},g.options.styleSource=_.styleSource):g.options={styleSource:_.styleSource,style:null},_?.content?v=Ct("string"==typeof _.content?JSON.parse(_.content):_.content):_?.href?v=this.http.get(_.href):console.warn("Couldn't find style for Tms-Offering",l),v?v.pipe(q(b=>(g.options.style=b,new qr(g)))):Ct(new qr(g))}}}}createWfsLayerFromOffering(l,h,d){let f;if(l.operations){f=this.getWfsOptions(l);const m=this.getVectorLayerOptions(l,h,d);m.url=f;const g=new qr(m);return h.bbox?g.bbox=h.bbox:d&&d.bbox&&(g.bbox=d.bbox),Ct(g)}if(null===f)return Ct(null)}createDataVectorLayerFromOffering(l,h,d){if(l.contents){let f,m;l.contents.forEach(_=>{_?.content?"application/geo+json"===_.type?f="string"==typeof _.content?JSON.parse(_.content):_.content:"application/vnd.google-earth.kml+xml"===_.type&&(f=_.content):_?.href&&(m=_.href)});const g=this.getVectorLayerOptions(l,h,d);return f?g.data=f:m&&(g.url=m),h.bbox?g.bbox=h.bbox:d&&d.bbox&&(g.bbox=d.bbox),Ct(new qr(g))}return Ct(null)}createTmsRasterLayerFromOffering(l,h,d,f){if(SD(l.code)){if(l.operations.find(g=>"image/png"===g.type||"image/jpeg"===g.type)){const g=this.getRasterLayerOptions(l,h,d,f);return g.type="xyz",Ct(new ra(g))}return Ct(null)}return Ct(null)}createWmtsLayerFromOffering(l,h,d,f){return X3(l.code)?this.getWmtsOptions(l,h,d,f).pipe(q(m=>new Da(m))):Ct(null)}createWmsLayerFromOffering(l,h,d,f){if(W3(l.code)){const m=this.getWmsOptions(l,h,d,f);return Ct(new Cy(m))}return Ct(null)}createXyzLayerFromOffering(l,h,d,f){if(TQ(l.code)){const m=this.getRasterLayerOptions(l,h,d,f);return m.type="xyz",Ct(new ra(m))}return Ct(null)}getWmtsOptions(l,h,d,f){const m=this.getRasterLayerOptions(l,h,d,f),{searchParams:g}=this.parseOperationUrl(l,z3),y={layer:g.get("LAYER"),style:"default",projection:f},_=l?.styles?.find(v=>v.default);return _&&_.name?y.style=_.name:g.has("STYLE")&&(y.style=g.get("STYLE")),g.has("FORMAT")&&(y.format=g.get("FORMAT")),g.has("VERSION")&&(y.version=g.get("VERSION")),this.getMatrixSetForWMTS(l,f).pipe(q(v=>{const b={...m,type:"wmts",params:y};return v&&(b.params.matrixSetOptions={matrixSet:v.matrixSet,matrixIds:v.matrixIds,resolutions:v.resolutions}),b}))}parseOperationUrl(l,h){const d={url:null,searchParams:null};if(l.operations){const f=l.operations.find(m=>m.code===h);if(f){const{url:m,searchParams:g}=this.getJsonFromUri(f.href);d.url=m,d.searchParams=g}else console.error(`There is no ${h} -operation in the offering ${l.code}.`,l)}else console.error(`The offering ${l.code} has no operations.`,l);return d}getMatrixSetForWMTS(l,h){if(l?.matrixSets)return Ct(l.matrixSets.find(f=>f.srs===h));if(null===l.matrixSets)return Ct(null);{const d=this.parseOperationUrl(l,"GetCapabilities").url;return this.wmtsClient.getCapabilities(d).pipe(q(f=>{const m=f.value.contents.tileMatrixSet;let g=m.find(_=>_.identifier.value===h);if(!g&&"EPSG:3857"===h){const _="EPSG:900913";g=m.find(v=>v.identifier.value===_)}return{srs:h,matrixSet:g.identifier.value,matrixIds:g.tileMatrix.map(_=>_.identifier.value),resolutions:g.tileMatrix.map(_=>_.scaleDenominator),origin:{x:g.tileMatrix[0].topLeftCorner[1],y:g.tileMatrix[0].topLeftCorner[0]},tilesize:g.tileMatrix[0].tileHeight}}))}}getWmsOptions(l,h,d,f){const m=this.getRasterLayerOptions(l,h,d,f);if(m?.type===yc){const{searchParams:g}=this.parseOperationUrl(l,U3),y={LAYERS:g.get("LAYERS"),TRANSPARENT:!0},_=l?.styles?.find(b=>b.default);return _&&_.name?y.STYLES=_.name:g.has("STYLES")&&(y.STYLES=g.get("STYLES")),g.has("FORMAT")&&(y.FORMAT=g.get("FORMAT")),g.has("TIME")&&(y.TIME=g.get("TIME")),g.has("VERSION")&&(y.VERSION=g.get("VERSION")),g.has("TILED")&&(y.TILED=g.get("TILED")),g.has("CQL_FILTER")&&(y.CQL_FILTER=g.get("CQL_FILTER")),g.has("FILTER")&&(y.FILTER=g.get("FILTER")),{...m,type:"wms",params:y}}console.warn(`resource ${h.id} cannot be converted into a WMS - Layer`,l)}getRasterLayerOptions(l,h,d,f){const m=this.getLayerOptions(l,h,d);if(this.isRasterLayerType(m.type)){let g,y;const _=h.properties?.dimensions;_&&(g=this.getTimeDimensions(_),y=this.getElevationDimension(_));const{minZoom:v,maxZoom:b}=this.getResourceMinMaxZoom(h,f),S=jee(this.getResourceShards(h)),T=l.operations.find(x=>function kGe(c){return!!function H3(c){return"code"in c&&"method"in c&&(!c.request||j3(c.request))&&(!c.result||j3(c.result))}(c)&&[U3,z3,j1].includes(c.code)}(x));if(T){const x={...m,type:m.type,url:this.getJsonFromUri(T.href).url};return v&&(x.minZoom=v),b&&(x.maxZoom=b),S?.length&&(x.subdomains=S),g&&(x.dimensions||(x.dimensions={}),x.dimensions.time=g),y&&(x.dimensions||(x.dimensions={}),x.dimensions.elevation=y),x}console.warn("There is no Raster operation for the offering",l)}else console.error(`The layer ${m.id} is not a RasterLayer`,m)}getLayerOptions(l,h,d){const f={id:h.id,type:this.getLayertypeFromOfferingCode(l),name:this.getResourceTitle(h),removable:!0,continuousWorld:!1,opacity:this.getResourceOpacity(h),displayName:this.getResourceTitle(h),visible:this.isActive(h),attribution:this.getResourceAttribution(h),dimensions:this.getResourceDimensions(h),legendImg:this.getLegendUrl(l),styles:l.styles,description:this.getResourceDescription(h)};h.bbox?f.bbox=h.bbox:d&&d.bbox&&(f.bbox=d.bbox),h.properties?.folder===zl.Baselayers&&!h.bbox&&(f.bbox=null);const m=this.getFilterType(h);return m&&(f.filtertype=m),f}scaleDenominatorToZoom(l,h){const d=dn(h);if(!d)return console.error(`The projection '${h}' is unknown.You'll have to manually register it with 'proj4.defs'.`),null;if(!d.getWorldExtent())return console.error(`No world extent given for projection '${h}'.`),null;const f=1/d.getMetersPerUnit(),m=d.getWorldExtent(),_=Math.max(m[2]-m[0],m[3]-m[1]);return Math.log2(_/(l*f/2571.42*256))}getJsonFromUri(l){let h=null;h=0===l.indexOf("http://")||0===l.indexOf("https://")?new URL(l):new URL(l,window.location.origin);const d=new URLSearchParams;h.searchParams.forEach((m,g)=>{d.set(g.toUpperCase(),m)});const f=-1!==l.indexOf("?")?l.indexOf("?"):l.length;return{url:l.substring(0,f),searchParams:d}}generateOwsContextFrom(l,h,d,f){const m=[],g=[],y=[];h.forEach(S=>{S.filtertype===zl.Overlays?m.push(S):S.filtertype===zl.Layers?g.push(S):S.filtertype===zl.Baselayers&&y.push(S)});const _=[...m.reverse(),...g.reverse(),...y.reverse()];let v={links:{profiles:[{href:"http://www.opengis.net/spec/owc-geojson/1.0/req/core"}]},lang:"en",title:"This is an automatically created context",updated:(new Date).toISOString(),subtitle:`Context created from ${_.map(S=>`Layer:${S.id}`).join(", ")}`};f&&(v=Object.assign(v,f));const b={id:l,type:"FeatureCollection",properties:v,features:[]};return d&&(b.bbox=d),_.forEach(S=>{if(S instanceof Ur){const T=S.name;[...S.layers].reverse().forEach(E=>{const I=this.generateResourceFromLayer(E,T);b.features.push(I)})}else{const T=this.generateResourceFromLayer(S);b.features.push(T)}}),b}generateAbstractFromLayerDescription(l,h){return l?"string"==typeof l?l:l.inputs?.description?JSON.stringify(l):`Could not generate description from layer: ${h} - dynamic component`:""}generateResourceFromLayer(l,h){const d={id:l.id,properties:{title:l.displayName||l.name,opacity:l.opacity,active:l.visible,abstract:this.generateAbstractFromLayerDescription(l.description,l.id),rights:l.attribution,minZoom:l.minZoom,maxZoom:l.maxZoom,updated:(new Date).toISOString(),offerings:[this.generateOfferingFromLayer(l)]},bbox:l.bbox,type:"Feature",geometry:null};return d.properties.folder=h?`${l.filtertype}/${h}`:`${l.filtertype}`,(l instanceof ra&&l.subdomains||l instanceof qr&&l.subdomains)&&(d.properties.shards=`${l.subdomains[0]}-${l.subdomains[l.subdomains.length-1]}`),l.dimensions&&(d.properties.dimensions=this.generateDimensionsFromLayer(l)),d}generateOfferingFromLayer(l){const h={code:this.getOfferingCodeFromLayer(l),title:l.name,styles:[]};return l.type===au||l.type===mh?h.contents=this.getContentsFromLayer(l):h.operations=this.getOperationsFromLayer(l),l instanceof ra?(l?.params?.STYLES||l?.params?.style||l.legendImg)&&h.styles.push({name:l?.params?.STYLES||l?.params?.style||null,title:`${l.name}-StyleTitle`,default:!!(l?.params?.STYLES||l?.params?.style||l.legendImg),legendURL:"string"==typeof l.legendImg?l.legendImg:null}):l instanceof qr&&"tms"===l.type?l?.options?.style&&l?.options?.styleSource&&h.styles.push({name:null,title:`${l.name}-StyleTitle`,default:!0,legendURL:"string"==typeof l.legendImg?l.legendImg:null,content:{type:"OpenMapStyle",styleSource:l.options.styleSource,content:l.options.style}}):h.styles.push({name:null,title:`${l.name}-StyleTitle`,default:!0,legendURL:"string"==typeof l.legendImg?l.legendImg:null}),h.styles.length||delete h.styles,h}getOfferingCodeFromLayer(l){switch(l.type){case yc:return fQ;case _c:return mQ;case au:return yQ;case Nd:return _Q;case gh:return pQ;case mh:return gQ;case el:return vQ;default:return console.warn(`This type of layer (${l.type}) has not been implemented yet.`,l),null}}getContentsFromLayer(l){const h=[];switch(l.type){case au:l.data?h.push({type:"application/geo+json",content:JSON.stringify(l.data)}):l.url&&h.push({type:"application/geo+json",href:l.url});break;case mh:l.data?h.push({type:"application/vnd.google-earth.kml+xml",content:l.data}):l.url&&h.push({type:"application/vnd.google-earth.kml+xml",href:l.url});break;default:console.warn(`Cannot get contents for this type of VectorLayer: (${l.type})`,l)}return h}getOperationsFromLayer(l){if(l instanceof ra)switch(l.type){case yc:return this.getWmsOperationsFromLayer(l);case _c:return this.getWmtsOperationsFromLayer(l);case Nd:return this.getXyzOperationsFromLayer(l);case el:return this.getTMSRasterOperationsFromLayer(l);default:return console.warn(`Cannot get operations for this type of layer: (${l.type})`,l),[]}else if(l instanceof qr)switch(l.type){case gh:return this.getWfsOperationsFromLayer(l);case el:return this.getTMSVectorOperationsFromLayer(l);default:return console.warn(`Cannot get operations for this type of layer: (${l.type})`,l),[]}}getXyzOperationsFromLayer(l){return[{code:j1,method:"GET",type:"image/png",href:`${l.url}`}]}getTMSRasterOperationsFromLayer(l){return[{code:j1,method:"GET",type:"image/png",href:`${l.url}`}]}getWfsOperationsFromLayer(l){const h=l.options?.version?l.options.version:"1.1.0",{url:d,searchParams:f}=this.getJsonFromUri(l.url),m=f.get("TYPENAME")||f.get("TYPENAMES");return m?[{code:bD,method:"GET",type:"application/json",href:`${d}?${f.toString()}`},{code:G3,method:"GET",type:"application/xml",href:`${d}?service=WFS&request=GetCapabilities`},{code:"DescribeFeatureType",method:"GET",type:"application/json",href:`${d}?service=WFS&request=DescribeFeatureType&version=${h}&typeNames=${m}&outputFormat=application/json`}]:(console.warn(`URL does not contain the minimum required arguments for a WFS typeName: ${m}`,d),[])}getTMSVectorOperationsFromLayer(l){return[{code:j1,method:"GET",type:"application/vnd.mapbox-vector-tile",href:`${l.url}`}]}getWmsOperationsFromLayer(l){let h=l.url;h.endsWith("?")&&(h=h.substr(0,h.length-1));const d=new URLSearchParams;return Object.keys(l.params).forEach(_=>{const v=l.params[_];v&&d.set(_,v)}),d.set("REQUEST","GetMap"),d.set("SERVICE","WMS"),d.get("FORMAT")||d.set("FORMAT","image/png"),[{code:U3,method:"GET",type:d.get("FORMAT"),href:`${h}?${d.toString()}`},{code:G3,method:"GET",type:"application/xml",href:`${h}?service=WMS&version=${d.get("VERSION")}&request=GetCapabilities`},{code:bQ,method:"GET",type:"application/json",href:`${h}?service=WMS&version=${d.get("VERSION")}&request=GetFeatureInfo&TRANSPARENT=TRUE&LAYERS=${d.get("LAYERS")}&INFO_FORMAT=application/json`}]}getWmtsOperationsFromLayer(l){let h=l.url;h.endsWith("?")&&(h=h.substr(0,h.length-1));const d=new URLSearchParams;return Object.keys(l.params).forEach(_=>{const v=l.params[_];v&&d.set(_.toUpperCase(),v)}),d.set("REQUEST","GetTile"),d.set("SERVICE","WMTS"),d.get("FORMAT")||d.set("FORMAT","image/png"),d.has("MATRIXSETOPTIONS")&&d.delete("MATRIXSETOPTIONS"),[{code:z3,href:`${h}?${d.toString()}`,method:"GET",type:d.get("FORMAT")},{code:G3,href:`${h}?SERVICE=WMTS&REQUEST=GetCapabilities&VERSION=${d.get("VERSION")}`,method:"GET",type:"application/xml"},{code:bQ,href:`${h}?SERVICE=WMS&REQUEST=GetFeatureInfo&VERSION=${d.get("VERSION")}`,method:"GET",type:"text/html"}]}generateDimensionsFromLayer(l){const h=[];if(l?.dimensions?.time){const d={name:"time",values:null,units:"ISO8601"};l.dimensions.time.display&&(d.display=l.dimensions.time.display),d.values=Array.isArray(l.dimensions.time.values)?"string"==typeof l.dimensions.time.values[0]?l.dimensions.time.values.join(","):l.dimensions.time.values.map(f=>`${f.interval}/${f.periodicity}`).join(","):`${l.dimensions.time.values.interval}/${l.dimensions.time.values.periodicity}`,h.push(d)}if(l?.dimensions?.elevation){const d={name:"elevation",value:l.dimensions.elevation.values,units:l.dimensions.elevation.units};l.dimensions.elevation.display&&(d.display=l.dimensions.elevation.display),h.push(d)}return h.length?h:null}}return c.\u0275fac=function(l){return new(l||c)(Oe(rQ),Oe(Yh))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),B8e=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({providers:[rQ,dQ,Wee,IGe]}),c})();function pv(c){return null!=c&&"false"!=`${c}`}function Xee(c,a=0){return function U8e(c){return!isNaN(parseFloat(c))&&!isNaN(Number(c))}(c)?Number(c):a}function Ba(c){return c instanceof Xt?c.nativeElement:c}const qee=new class H8e extends Ic{flush(a){this.active=!0,this.scheduled=void 0;const{actions:l}=this;let h,d=-1,f=l.length;a=a||l.shift();do{if(h=a.execute(a.state,a.delay))break}while(++d<f&&(a=l.shift()));if(this.active=!1,h){for(;++d<f&&(a=l.shift());)a.unsubscribe();throw h}}}(class G8e extends pM{constructor(a,l){super(a,l),this.scheduler=a,this.work=l}requestAsyncId(a,l,h=0){return null!==h&&h>0?super.requestAsyncId(a,l,h):(a.actions.push(this),a.scheduled||(a.scheduled=requestAnimationFrame(()=>a.flush(null))))}recycleAsyncId(a,l,h=0){if(null!==h&&h>0||null===h&&this.delay>0)return super.recycleAsyncId(a,l,h);0===a.actions.length&&(cancelAnimationFrame(l),a.scheduled=void 0)}});let j8e=1;const W8e=Promise.resolve(),ND={};function $ee(c){return c in ND&&(delete ND[c],!0)}const Yee={setImmediate(c){const a=j8e++;return ND[a]=!0,W8e.then(()=>$ee(a)&&c()),a},clearImmediate(c){$ee(c)}};new class q8e extends Ic{flush(a){this.active=!0,this.scheduled=void 0;const{actions:l}=this;let h,d=-1,f=l.length;a=a||l.shift();do{if(h=a.execute(a.state,a.delay))break}while(++d<f&&(a=l.shift()));if(this.active=!1,h){for(;++d<f&&(a=l.shift());)a.unsubscribe();throw h}}}(class X8e extends pM{constructor(a,l){super(a,l),this.scheduler=a,this.work=l}requestAsyncId(a,l,h=0){return null!==h&&h>0?super.requestAsyncId(a,l,h):(a.actions.push(this),a.scheduled||(a.scheduled=Yee.setImmediate(a.flush.bind(a,null))))}recycleAsyncId(a,l,h=0){if(null!==h&&h>0||null===h&&this.delay>0)return super.recycleAsyncId(a,l,h);0===a.actions.length&&(Yee.clearImmediate(l),a.scheduled=void 0)}});class Z8e{constructor(a){this.durationSelector=a}call(a,l){return l.subscribe(new K8e(a,this.durationSelector))}}class K8e extends vg{constructor(a,l){super(a),this.durationSelector=l,this.hasValue=!1}_next(a){if(this.value=a,this.hasValue=!0,!this.throttled){let l;try{const{durationSelector:d}=this;l=d(a)}catch(d){return this.destination.error(d)}const h=bg(l,new _g(this));!h||h.closed?this.clearThrottle():this.add(this.throttled=h)}}clearThrottle(){const{value:a,hasValue:l,throttled:h}=this;h&&(this.remove(h),this.throttled=void 0,h.unsubscribe()),l&&(this.value=void 0,this.hasValue=!1,this.destination.next(a))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function Zee(c,a=A_){return function Y8e(c){return function(l){return l.lift(new Z8e(c))}}(()=>sQ(c,a))}let g4;try{g4=typeof Intl<"u"&&Intl.v8BreakIterator}catch{g4=!1}let iT,y4,Kee=(()=>{class c{constructor(l){this._platformId=l,this.isBrowser=this._platformId?Ei(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!g4)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return c.\u0275fac=function(l){return new(l||c)(Oe(kr))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function rT(c){return function J8e(){if(null==iT&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>iT=!0}))}finally{iT=iT||!1}return iT}()?c:!!c.capture}function Qee(c){if(function Q8e(){if(null==y4){const c=typeof document<"u"?document.head:null;y4=!(!c||!c.createShadowRoot&&!c.attachShadow)}return y4}()){const a=c.getRootNode?c.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&a instanceof ShadowRoot)return a}return null}function kD(c){return c.composedPath?c.composedPath()[0]:c.target}let tHe=(()=>{class c{constructor(l,h,d){this._ngZone=l,this._platform=h,this._scrolled=new Qe,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=d}register(l){this.scrollContainers.has(l)||this.scrollContainers.set(l,l.elementScrolled().subscribe(()=>this._scrolled.next(l)))}deregister(l){const h=this.scrollContainers.get(l);h&&(h.unsubscribe(),this.scrollContainers.delete(l))}scrolled(l=20){return this._platform.isBrowser?new Tt(h=>{this._globalSubscription||this._addGlobalListener();const d=l>0?this._scrolled.pipe(Zee(l)).subscribe(h):this._scrolled.subscribe(h);return this._scrolledCount++,()=>{d.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ct()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((l,h)=>this.deregister(h)),this._scrolled.complete()}ancestorScrolled(l,h){const d=this.getAncestorScrollContainers(l);return this.scrolled(h).pipe(Ki(f=>!f||d.indexOf(f)>-1))}getAncestorScrollContainers(l){const h=[];return this.scrollContainers.forEach((d,f)=>{this._scrollableContainsElement(f,l)&&h.push(f)}),h}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(l,h){let d=Ba(h),f=l.getElementRef().nativeElement;do{if(d==f)return!0}while(d=d.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Mu(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return c.\u0275fac=function(l){return new(l||c)(Oe(Yn),Oe(Kee),Oe(Ci,8))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),iHe=(()=>{class c{constructor(l,h,d){this._platform=l,this._change=new Qe,this._changeListener=f=>{this._change.next(f)},this._document=d,h.runOutsideAngular(()=>{if(l.isBrowser){const f=this._getWindow();f.addEventListener("resize",this._changeListener),f.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const l=this._getWindow();l.removeEventListener("resize",this._changeListener),l.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const l={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),l}getViewportRect(){const l=this.getViewportScrollPosition(),{width:h,height:d}=this.getViewportSize();return{top:l.top,left:l.left,bottom:l.top+d,right:l.left+h,height:d,width:h}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const l=this._document,h=this._getWindow(),d=l.documentElement,f=d.getBoundingClientRect();return{top:-f.top||l.body.scrollTop||h.scrollY||d.scrollTop||0,left:-f.left||l.body.scrollLeft||h.scrollX||d.scrollLeft||0}}change(l=20){return l>0?this._change.pipe(Zee(l)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const l=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:l.innerWidth,height:l.innerHeight}:{width:0,height:0}}}return c.\u0275fac=function(l){return new(l||c)(Oe(Kee),Oe(Yn),Oe(Ci,8))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),rHe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({}),c})();function SHe(c){const{subscriber:a,counter:l,period:h}=c;a.next(l),this.schedule({subscriber:a,counter:l+1,period:h},h)}const THe=new Vt("cdk-dir-doc",{providedIn:"root",factory:function wHe(){return os(Ci)}}),CHe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let ite=(()=>{class c{constructor(l){if(this.value="ltr",this.change=new st,l){const d=l.documentElement?l.documentElement.dir:null;this.value=function xHe(c){const a=c?.toLowerCase()||"";return"auto"===a&&typeof navigator<"u"&&navigator?.language?CHe.test(navigator.language)?"rtl":"ltr":"rtl"===a?"rtl":"ltr"}((l.body?l.body.dir:null)||d||"ltr")}}ngOnDestroy(){this.change.complete()}}return c.\u0275fac=function(l){return new(l||c)(Oe(THe,8))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function _4(c,a,l){for(let h in a)if(a.hasOwnProperty(h)){const d=a[h];d?c.setProperty(h,d,l?.has(h)?"important":""):c.removeProperty(h)}return c}function gv(c,a){const l=a?"":"none";_4(c.style,{"touch-action":a?"":"none","-webkit-user-drag":a?"":"none","-webkit-tap-highlight-color":a?"":"transparent","user-select":l,"-ms-user-select":l,"-webkit-user-select":l,"-moz-user-select":l})}function rte(c,a,l){_4(c.style,{position:a?"":"fixed",top:a?"":"0",opacity:a?"":"0",left:a?"":"-999em"},l)}function VD(c,a){return a&&"none"!=a?c+" "+a:c}function ste(c){const a=c.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(c)*a}function v4(c,a){return c.getPropertyValue(a).split(",").map(h=>h.trim())}function b4(c){const a=c.getBoundingClientRect();return{top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:a.width,height:a.height,x:a.x,y:a.y}}function S4(c,a,l){const{top:h,bottom:d,left:f,right:m}=c;return l>=h&&l<=d&&a>=f&&a<=m}function sT(c,a,l){c.top+=a,c.bottom=c.top+c.height,c.left+=l,c.right=c.left+c.width}function ote(c,a,l,h){const{top:d,right:f,bottom:m,left:g,width:y,height:_}=c,v=y*a,b=_*a;return h>d-b&&h<m+b&&l>g-v&&l<f+v}class ate{constructor(a){this._document=a,this.positions=new Map}clear(){this.positions.clear()}cache(a){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),a.forEach(l=>{this.positions.set(l,{scrollPosition:{top:l.scrollTop,left:l.scrollLeft},clientRect:b4(l)})})}handleScroll(a){const l=kD(a),h=this.positions.get(l);if(!h)return null;const d=h.scrollPosition;let f,m;if(l===this._document){const _=this.getViewportScrollPosition();f=_.top,m=_.left}else f=l.scrollTop,m=l.scrollLeft;const g=d.top-f,y=d.left-m;return this.positions.forEach((_,v)=>{_.clientRect&&l!==v&&l.contains(v)&&sT(_.clientRect,g,y)}),d.top=f,d.left=m,{top:g,left:y}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function lte(c){const a=c.cloneNode(!0),l=a.querySelectorAll("[id]"),h=c.nodeName.toLowerCase();a.removeAttribute("id");for(let d=0;d<l.length;d++)l[d].removeAttribute("id");return"canvas"===h?hte(c,a):("input"===h||"select"===h||"textarea"===h)&&ute(c,a),cte("canvas",c,a,hte),cte("input, textarea, select",c,a,ute),a}function cte(c,a,l,h){const d=a.querySelectorAll(c);if(d.length){const f=l.querySelectorAll(c);for(let m=0;m<d.length;m++)h(d[m],f[m])}}let MHe=0;function ute(c,a){"file"!==a.type&&(a.value=c.value),"radio"===a.type&&a.name&&(a.name=`mat-clone-${a.name}-${MHe++}`)}function hte(c,a){const l=a.getContext("2d");if(l)try{l.drawImage(c,0,0)}catch{}}const dte=rT({passive:!0}),BD=rT({passive:!1}),T4=new Set(["position"]);class AHe{constructor(a,l,h,d,f,m){this._config=l,this._document=h,this._ngZone=d,this._viewportRuler=f,this._dragDropRegistry=m,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Qe,this._pointerMoveSubscription=O.EMPTY,this._pointerUpSubscription=O.EMPTY,this._scrollSubscription=O.EMPTY,this._resizeSubscription=O.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Qe,this.started=new Qe,this.released=new Qe,this.ended=new Qe,this.entered=new Qe,this.exited=new Qe,this.dropped=new Qe,this.moved=this._moveEvents,this._pointerDown=g=>{if(this.beforeStarted.next(),this._handles.length){const y=this._getTargetHandle(g);y&&!this._disabledHandles.has(y)&&!this.disabled&&this._initializeDragSequence(y,g)}else this.disabled||this._initializeDragSequence(this._rootElement,g)},this._pointerMove=g=>{const y=this._getPointerPositionOnPage(g);if(!this._hasStartedDragging){if(Math.abs(y.x-this._pickupPositionOnPage.x)+Math.abs(y.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const T=Date.now()>=this._dragStartTime+this._getDragStartDelay(g),x=this._dropContainer;if(!T)return void this._endDragSequence(g);(!x||!x.isDragging()&&!x.isReceiving())&&(g.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(g)))}return}g.preventDefault();const _=this._getConstrainedPointerPosition(y);if(this._hasMoved=!0,this._lastKnownPointerPosition=y,this._updatePointerDirectionDelta(_),this._dropContainer)this._updateActiveDropContainer(_,y);else{const v=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,b=this._activeTransform;b.x=_.x-v.x+this._passiveTransform.x,b.y=_.y-v.y+this._passiveTransform.y,this._applyRootElementTransform(b.x,b.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:_,event:g,distance:this._getDragDistance(_),delta:this._pointerDirectionDelta})})},this._pointerUp=g=>{this._endDragSequence(g)},this._nativeDragStart=g=>{if(this._handles.length){const y=this._getTargetHandle(g);y&&!this._disabledHandles.has(y)&&!this.disabled&&g.preventDefault()}else this.disabled||g.preventDefault()},this.withRootElement(a).withParent(l.parentDragRef||null),this._parentPositions=new ate(h),m.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(a){const l=pv(a);l!==this._disabled&&(this._disabled=l,this._toggleNativeDragInteractions(),this._handles.forEach(h=>gv(h,l)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(a){this._handles=a.map(h=>Ba(h)),this._handles.forEach(h=>gv(h,this.disabled)),this._toggleNativeDragInteractions();const l=new Set;return this._disabledHandles.forEach(h=>{this._handles.indexOf(h)>-1&&l.add(h)}),this._disabledHandles=l,this}withPreviewTemplate(a){return this._previewTemplate=a,this}withPlaceholderTemplate(a){return this._placeholderTemplate=a,this}withRootElement(a){const l=Ba(a);return l!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{l.addEventListener("mousedown",this._pointerDown,BD),l.addEventListener("touchstart",this._pointerDown,dte),l.addEventListener("dragstart",this._nativeDragStart,BD)}),this._initialTransform=void 0,this._rootElement=l),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(a){return this._boundaryElement=a?Ba(a):null,this._resizeSubscription.unsubscribe(),a&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(a){return this._parentDragRef=a,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(a){!this._disabledHandles.has(a)&&this._handles.indexOf(a)>-1&&(this._disabledHandles.add(a),gv(a,!0))}enableHandle(a){this._disabledHandles.has(a)&&(this._disabledHandles.delete(a),gv(a,this.disabled))}withDirection(a){return this._direction=a,this}_withDropContainer(a){this._dropContainer=a}getFreeDragPosition(){const a=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:a.x,y:a.y}}setFreeDragPosition(a){return this._activeTransform={x:0,y:0},this._passiveTransform.x=a.x,this._passiveTransform.y=a.y,this._dropContainer||this._applyRootElementTransform(a.x,a.y),this}withPreviewContainer(a){return this._previewContainer=a,this}_sortFromLastPointerPosition(){const a=this._lastKnownPointerPosition;a&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(a),a)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(a){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:a}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(a),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const l=this._getPointerPositionOnPage(a);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(l),dropPoint:l,event:a})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(a){oT(a)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const l=this._dropContainer;if(l){const h=this._rootElement,d=h.parentNode,f=this._placeholder=this._createPlaceholderElement(),m=this._anchor=this._anchor||this._document.createComment(""),g=this._getShadowRoot();d.insertBefore(m,h),this._initialTransform=h.style.transform||"",this._preview=this._createPreviewElement(),rte(h,!1,T4),this._document.body.appendChild(d.replaceChild(f,h)),this._getPreviewInsertionPoint(d,g).appendChild(this._preview),this.started.next({source:this,event:a}),l.start(),this._initialContainer=l,this._initialIndex=l.getItemIndex(this)}else this.started.next({source:this,event:a}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(l?l.getScrollableParents():[])}_initializeDragSequence(a,l){this._parentDragRef&&l.stopPropagation();const h=this.isDragging(),d=oT(l),f=!d&&0!==l.button,m=this._rootElement,g=kD(l),y=!d&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),_=d?function _He(c){const a=c.touches&&c.touches[0]||c.changedTouches&&c.changedTouches[0];return!(!a||-1!==a.identifier||null!=a.radiusX&&1!==a.radiusX||null!=a.radiusY&&1!==a.radiusY)}(l):function yHe(c){return 0===c.buttons||0===c.offsetX&&0===c.offsetY}(l);if(g&&g.draggable&&"mousedown"===l.type&&l.preventDefault(),h||f||y||_)return;if(this._handles.length){const S=m.style;this._rootElementTapHighlight=S.webkitTapHighlightColor||"",S.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(S=>this._updateOnScroll(S)),this._boundaryElement&&(this._boundaryRect=b4(this._boundaryElement));const v=this._previewTemplate;this._pickupPositionInElement=v&&v.template&&!v.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,a,l);const b=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(l);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:b.x,y:b.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,l)}_cleanupDragArtifacts(a){rte(this._rootElement,!0,T4),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const l=this._dropContainer,h=l.getItemIndex(this),d=this._getPointerPositionOnPage(a),f=this._getDragDistance(d),m=l._isOverContainer(d.x,d.y);this.ended.next({source:this,distance:f,dropPoint:d,event:a}),this.dropped.next({item:this,currentIndex:h,previousIndex:this._initialIndex,container:l,previousContainer:this._initialContainer,isPointerOverContainer:m,distance:f,dropPoint:d,event:a}),l.drop(this,h,this._initialIndex,this._initialContainer,m,f,d,a),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:a,y:l},{x:h,y:d}){let f=this._initialContainer._getSiblingContainerFromPosition(this,a,l);!f&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(a,l)&&(f=this._initialContainer),f&&f!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=f,this._dropContainer.enter(this,a,l,f===this._initialContainer&&f.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:f,currentIndex:f.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(h,d),this._dropContainer._sortItem(this,a,l,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(a,l):this._applyPreviewTransform(a-this._pickupPositionInElement.x,l-this._pickupPositionInElement.y))}_createPreviewElement(){const a=this._previewTemplate,l=this.previewClass,h=a?a.template:null;let d;if(h&&a){const f=a.matchSize?this._initialClientRect:null,m=a.viewContainer.createEmbeddedView(h,a.context);m.detectChanges(),d=pte(m,this._document),this._previewRef=m,a.matchSize?mte(d,f):d.style.transform=UD(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else d=lte(this._rootElement),mte(d,this._initialClientRect),this._initialTransform&&(d.style.transform=this._initialTransform);return _4(d.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},T4),gv(d,!1),d.classList.add("cdk-drag-preview"),d.setAttribute("dir",this._direction),l&&(Array.isArray(l)?l.forEach(f=>d.classList.add(f)):d.classList.add(l)),d}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const a=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(a.left,a.top);const l=function EHe(c){const a=getComputedStyle(c),l=v4(a,"transition-property"),h=l.find(g=>"transform"===g||"all"===g);if(!h)return 0;const d=l.indexOf(h),f=v4(a,"transition-duration"),m=v4(a,"transition-delay");return ste(f[d])+ste(m[d])}(this._preview);return 0===l?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(h=>{const d=m=>{(!m||kD(m)===this._preview&&"transform"===m.propertyName)&&(this._preview?.removeEventListener("transitionend",d),h(),clearTimeout(f))},f=setTimeout(d,1.5*l);this._preview.addEventListener("transitionend",d)}))}_createPlaceholderElement(){const a=this._placeholderTemplate,l=a?a.template:null;let h;return l?(this._placeholderRef=a.viewContainer.createEmbeddedView(l,a.context),this._placeholderRef.detectChanges(),h=pte(this._placeholderRef,this._document)):h=lte(this._rootElement),h.style.pointerEvents="none",h.classList.add("cdk-drag-placeholder"),h}_getPointerPositionInElement(a,l,h){const d=l===this._rootElement?null:l,f=d?d.getBoundingClientRect():a,m=oT(h)?h.targetTouches[0]:h,g=this._getViewportScrollPosition();return{x:f.left-a.left+(m.pageX-f.left-g.left),y:f.top-a.top+(m.pageY-f.top-g.top)}}_getPointerPositionOnPage(a){const l=this._getViewportScrollPosition(),h=oT(a)?a.touches[0]||a.changedTouches[0]||{pageX:0,pageY:0}:a,d=h.pageX-l.left,f=h.pageY-l.top;if(this._ownerSVGElement){const m=this._ownerSVGElement.getScreenCTM();if(m){const g=this._ownerSVGElement.createSVGPoint();return g.x=d,g.y=f,g.matrixTransform(m.inverse())}}return{x:d,y:f}}_getConstrainedPointerPosition(a){const l=this._dropContainer?this._dropContainer.lockAxis:null;let{x:h,y:d}=this.constrainPosition?this.constrainPosition(a,this,this._initialClientRect,this._pickupPositionInElement):a;if("x"===this.lockAxis||"x"===l?d=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===l)&&(h=this._pickupPositionOnPage.x),this._boundaryRect){const{x:f,y:m}=this._pickupPositionInElement,g=this._boundaryRect,{width:y,height:_}=this._getPreviewRect(),v=g.top+m,b=g.bottom-(_-m);h=fte(h,g.left+f,g.right-(y-f)),d=fte(d,v,b)}return{x:h,y:d}}_updatePointerDirectionDelta(a){const{x:l,y:h}=a,d=this._pointerDirectionDelta,f=this._pointerPositionAtLastDirectionChange,m=Math.abs(l-f.x),g=Math.abs(h-f.y);return m>this._config.pointerDirectionChangeThreshold&&(d.x=l>f.x?1:-1,f.x=l),g>this._config.pointerDirectionChangeThreshold&&(d.y=h>f.y?1:-1,f.y=h),d}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const a=this._handles.length>0||!this.isDragging();a!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=a,gv(this._rootElement,a))}_removeRootElementListeners(a){a.removeEventListener("mousedown",this._pointerDown,BD),a.removeEventListener("touchstart",this._pointerDown,dte),a.removeEventListener("dragstart",this._nativeDragStart,BD)}_applyRootElementTransform(a,l){const h=UD(a,l),d=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=d.transform&&"none"!=d.transform?d.transform:""),d.transform=VD(h,this._initialTransform)}_applyPreviewTransform(a,l){const h=this._previewTemplate?.template?void 0:this._initialTransform,d=UD(a,l);this._preview.style.transform=VD(d,h)}_getDragDistance(a){const l=this._pickupPositionOnPage;return l?{x:a.x-l.x,y:a.y-l.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:a,y:l}=this._passiveTransform;if(0===a&&0===l||this.isDragging()||!this._boundaryElement)return;const h=this._rootElement.getBoundingClientRect(),d=this._boundaryElement.getBoundingClientRect();if(0===d.width&&0===d.height||0===h.width&&0===h.height)return;const f=d.left-h.left,m=h.right-d.right,g=d.top-h.top,y=h.bottom-d.bottom;d.width>h.width?(f>0&&(a+=f),m>0&&(a-=m)):a=0,d.height>h.height?(g>0&&(l+=g),y>0&&(l-=y)):l=0,(a!==this._passiveTransform.x||l!==this._passiveTransform.y)&&this.setFreeDragPosition({y:l,x:a})}_getDragStartDelay(a){const l=this.dragStartDelay;return"number"==typeof l?l:oT(a)?l.touch:l?l.mouse:0}_updateOnScroll(a){const l=this._parentPositions.handleScroll(a);if(l){const h=kD(a);this._boundaryRect&&h!==this._boundaryElement&&h.contains(this._boundaryElement)&&sT(this._boundaryRect,l.top,l.left),this._pickupPositionOnPage.x+=l.left,this._pickupPositionOnPage.y+=l.top,this._dropContainer||(this._activeTransform.x-=l.left,this._activeTransform.y-=l.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Qee(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(a,l){const h=this._previewContainer||"global";if("parent"===h)return a;if("global"===h){const d=this._document;return l||d.fullscreenElement||d.webkitFullscreenElement||d.mozFullScreenElement||d.msFullscreenElement||d.body}return Ba(h)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(a){return this._handles.find(l=>a.target&&(a.target===l||l.contains(a.target)))}}function UD(c,a){return`translate3d(${Math.round(c)}px, ${Math.round(a)}px, 0)`}function fte(c,a,l){return Math.max(a,Math.min(l,c))}function oT(c){return"t"===c.type[0]}function pte(c,a){const l=c.rootNodes;if(1===l.length&&l[0].nodeType===a.ELEMENT_NODE)return l[0];const h=a.createElement("div");return l.forEach(d=>h.appendChild(d)),h}function mte(c,a){c.style.width=`${a.width}px`,c.style.height=`${a.height}px`,c.style.transform=UD(a.left,a.top)}function gte(c,a,l){const h=aT(a,c.length-1),d=aT(l,c.length-1);if(h===d)return;const f=c[h],m=d<h?-1:1;for(let g=h;g!==d;g+=m)c[g]=c[g+m];c[d]=f}function aT(c,a){return Math.max(0,Math.min(a,c))}class IHe{constructor(a,l){this._element=a,this._dragDropRegistry=l,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(a){this.withItems(a)}sort(a,l,h,d){const f=this._itemPositions,m=this._getItemIndexFromPointerPosition(a,l,h,d);if(-1===m&&f.length>0)return null;const g="horizontal"===this.orientation,y=f.findIndex(I=>I.drag===a),_=f[m],b=_.clientRect,S=y>m?1:-1,T=this._getItemOffsetPx(f[y].clientRect,b,S),x=this._getSiblingOffsetPx(y,f,S),E=f.slice();return gte(f,y,m),f.forEach((I,M)=>{if(E[M]===I)return;const D=I.drag===a,L=D?T:x,P=D?a.getPlaceholderElement():I.drag.getRootElement();I.offset+=L,g?(P.style.transform=VD(`translate3d(${Math.round(I.offset)}px, 0, 0)`,I.initialTransform),sT(I.clientRect,0,L)):(P.style.transform=VD(`translate3d(0, ${Math.round(I.offset)}px, 0)`,I.initialTransform),sT(I.clientRect,L,0))}),this._previousSwap.overlaps=S4(b,l,h),this._previousSwap.drag=_.drag,this._previousSwap.delta=g?d.x:d.y,{previousIndex:y,currentIndex:m}}enter(a,l,h,d){const f=null==d||d<0?this._getItemIndexFromPointerPosition(a,l,h):d,m=this._activeDraggables,g=m.indexOf(a),y=a.getPlaceholderElement();let _=m[f];if(_===a&&(_=m[f+1]),!_&&(null==f||-1===f||f<m.length-1)&&this._shouldEnterAsFirstChild(l,h)&&(_=m[0]),g>-1&&m.splice(g,1),_&&!this._dragDropRegistry.isDragging(_)){const v=_.getRootElement();v.parentElement.insertBefore(y,v),m.splice(f,0,a)}else Ba(this._element).appendChild(y),m.push(a);y.style.transform="",this._cacheItemPositions()}withItems(a){this._activeDraggables=a.slice(),this._cacheItemPositions()}withSortPredicate(a){this._sortPredicate=a}reset(){this._activeDraggables.forEach(a=>{const l=a.getRootElement();if(l){const h=this._itemPositions.find(d=>d.drag===a)?.initialTransform;l.style.transform=h||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(a){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(h=>h.drag===a)}updateOnScroll(a,l){this._itemPositions.forEach(({clientRect:h})=>{sT(h,a,l)}),this._itemPositions.forEach(({drag:h})=>{this._dragDropRegistry.isDragging(h)&&h._sortFromLastPointerPosition()})}_cacheItemPositions(){const a="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(l=>{const h=l.getVisibleElement();return{drag:l,offset:0,initialTransform:h.style.transform||"",clientRect:b4(h)}}).sort((l,h)=>a?l.clientRect.left-h.clientRect.left:l.clientRect.top-h.clientRect.top)}_getItemOffsetPx(a,l,h){const d="horizontal"===this.orientation;let f=d?l.left-a.left:l.top-a.top;return-1===h&&(f+=d?l.width-a.width:l.height-a.height),f}_getSiblingOffsetPx(a,l,h){const d="horizontal"===this.orientation,f=l[a].clientRect,m=l[a+-1*h];let g=f[d?"width":"height"]*h;if(m){const y=d?"left":"top",_=d?"right":"bottom";-1===h?g-=m.clientRect[y]-f[_]:g+=f[y]-m.clientRect[_]}return g}_shouldEnterAsFirstChild(a,l){if(!this._activeDraggables.length)return!1;const h=this._itemPositions,d="horizontal"===this.orientation;if(h[0].drag!==this._activeDraggables[0]){const m=h[h.length-1].clientRect;return d?a>=m.right:l>=m.bottom}{const m=h[0].clientRect;return d?a<=m.left:l<=m.top}}_getItemIndexFromPointerPosition(a,l,h,d){const f="horizontal"===this.orientation,m=this._itemPositions.findIndex(({drag:g,clientRect:y})=>{if(g===a)return!1;if(d){const _=f?d.x:d.y;if(g===this._previousSwap.drag&&this._previousSwap.overlaps&&_===this._previousSwap.delta)return!1}return f?l>=Math.floor(y.left)&&l<Math.floor(y.right):h>=Math.floor(y.top)&&h<Math.floor(y.bottom)});return-1!==m&&this._sortPredicate(m,a)?m:-1}}class RHe{constructor(a,l,h,d,f){this._dragDropRegistry=l,this._ngZone=d,this._viewportRuler=f,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Qe,this.entered=new Qe,this.exited=new Qe,this.dropped=new Qe,this.sorted=new Qe,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=O.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Qe,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function bHe(c=0,a=A_){return(!F3(c)||c<0)&&(c=0),(!a||"function"!=typeof a.schedule)&&(a=A_),new Tt(l=>(l.add(a.schedule(SHe,c,{subscriber:l,counter:0,period:c})),l))}(0,qee).pipe(Eu(this._stopScrollTimers)).subscribe(()=>{const m=this._scrollNode,g=this.autoScrollStep;1===this._verticalScrollDirection?m.scrollBy(0,-g):2===this._verticalScrollDirection&&m.scrollBy(0,g),1===this._horizontalScrollDirection?m.scrollBy(-g,0):2===this._horizontalScrollDirection&&m.scrollBy(g,0)})},this.element=Ba(a),this._document=h,this.withScrollableParents([this.element]),l.registerDropContainer(this),this._parentPositions=new ate(h),this._sortStrategy=new IHe(this.element,l),this._sortStrategy.withSortPredicate((m,g)=>this.sortPredicate(m,g,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(a,l,h,d){this._draggingStarted(),null==d&&this.sortingDisabled&&(d=this._draggables.indexOf(a)),this._sortStrategy.enter(a,l,h,d),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:a,container:this,currentIndex:this.getItemIndex(a)})}exit(a){this._reset(),this.exited.next({item:a,container:this})}drop(a,l,h,d,f,m,g,y={}){this._reset(),this.dropped.next({item:a,currentIndex:l,previousIndex:h,container:this,previousContainer:d,isPointerOverContainer:f,distance:m,dropPoint:g,event:y})}withItems(a){const l=this._draggables;return this._draggables=a,a.forEach(h=>h._withDropContainer(this)),this.isDragging()&&(l.filter(d=>d.isDragging()).every(d=>-1===a.indexOf(d))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(a){return this._sortStrategy.direction=a,this}connectedTo(a){return this._siblings=a.slice(),this}withOrientation(a){return this._sortStrategy.orientation=a,this}withScrollableParents(a){const l=Ba(this.element);return this._scrollableElements=-1===a.indexOf(l)?[l,...a]:a.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(a){return this._isDragging?this._sortStrategy.getItemIndex(a):this._draggables.indexOf(a)}isReceiving(){return this._activeSiblings.size>0}_sortItem(a,l,h,d){if(this.sortingDisabled||!this._clientRect||!ote(this._clientRect,.05,l,h))return;const f=this._sortStrategy.sort(a,l,h,d);f&&this.sorted.next({previousIndex:f.previousIndex,currentIndex:f.currentIndex,container:this,item:a})}_startScrollingIfNecessary(a,l){if(this.autoScrollDisabled)return;let h,d=0,f=0;if(this._parentPositions.positions.forEach((m,g)=>{g===this._document||!m.clientRect||h||ote(m.clientRect,.05,a,l)&&([d,f]=function LHe(c,a,l,h){const d=vte(a,h),f=bte(a,l);let m=0,g=0;if(d){const y=c.scrollTop;1===d?y>0&&(m=1):c.scrollHeight-y>c.clientHeight&&(m=2)}if(f){const y=c.scrollLeft;1===f?y>0&&(g=1):c.scrollWidth-y>c.clientWidth&&(g=2)}return[m,g]}(g,m.clientRect,a,l),(d||f)&&(h=g))}),!d&&!f){const{width:m,height:g}=this._viewportRuler.getViewportSize(),y={width:m,height:g,top:0,right:m,bottom:g,left:0};d=vte(y,l),f=bte(y,a),h=window}h&&(d!==this._verticalScrollDirection||f!==this._horizontalScrollDirection||h!==this._scrollNode)&&(this._verticalScrollDirection=d,this._horizontalScrollDirection=f,this._scrollNode=h,(d||f)&&h?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const a=Ba(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=a.msScrollSnapType||a.scrollSnapType||"",a.scrollSnapType=a.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const a=Ba(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(a).clientRect}_reset(){this._isDragging=!1;const a=Ba(this.element).style;a.scrollSnapType=a.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(l=>l._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(a,l){return null!=this._clientRect&&S4(this._clientRect,a,l)}_getSiblingContainerFromPosition(a,l,h){return this._siblings.find(d=>d._canReceive(a,l,h))}_canReceive(a,l,h){if(!this._clientRect||!S4(this._clientRect,l,h)||!this.enterPredicate(a,this))return!1;const d=this._getShadowRoot().elementFromPoint(l,h);if(!d)return!1;const f=Ba(this.element);return d===f||f.contains(d)}_startReceiving(a,l){const h=this._activeSiblings;!h.has(a)&&l.every(d=>this.enterPredicate(d,this)||this._draggables.indexOf(d)>-1)&&(h.add(a),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(a){this._activeSiblings.delete(a),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(a=>{if(this.isDragging()){const l=this._parentPositions.handleScroll(a);l&&this._sortStrategy.updateOnScroll(l.top,l.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const a=Qee(Ba(this.element));this._cachedShadowRoot=a||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const a=this._sortStrategy.getActiveItemsSnapshot().filter(l=>l.isDragging());this._siblings.forEach(l=>l._startReceiving(this,a))}}function vte(c,a){const{top:l,bottom:h,height:d}=c,f=.05*d;return a>=l-f&&a<=l+f?1:a>=h-f&&a<=h+f?2:0}function bte(c,a){const{left:l,right:h,width:d}=c,f=.05*d;return a>=l-f&&a<=l+f?1:a>=h-f&&a<=h+f?2:0}const zD=rT({passive:!1,capture:!0});let PHe=(()=>{class c{constructor(l,h){this._ngZone=l,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=d=>d.isDragging(),this.pointerMove=new Qe,this.pointerUp=new Qe,this.scroll=new Qe,this._preventDefaultWhileDragging=d=>{this._activeDragInstances.length>0&&d.preventDefault()},this._persistentTouchmoveListener=d=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&d.preventDefault(),this.pointerMove.next(d))},this._document=h}registerDropContainer(l){this._dropInstances.has(l)||this._dropInstances.add(l)}registerDragItem(l){this._dragInstances.add(l),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,zD)})}removeDropContainer(l){this._dropInstances.delete(l)}removeDragItem(l){this._dragInstances.delete(l),this.stopDragging(l),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,zD)}startDragging(l,h){if(!(this._activeDragInstances.indexOf(l)>-1)&&(this._activeDragInstances.push(l),1===this._activeDragInstances.length)){const d=h.type.startsWith("touch");this._globalListeners.set(d?"touchend":"mouseup",{handler:f=>this.pointerUp.next(f),options:!0}).set("scroll",{handler:f=>this.scroll.next(f),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:zD}),d||this._globalListeners.set("mousemove",{handler:f=>this.pointerMove.next(f),options:zD}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((f,m)=>{this._document.addEventListener(m,f.handler,f.options)})})}}stopDragging(l){const h=this._activeDragInstances.indexOf(l);h>-1&&(this._activeDragInstances.splice(h,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(l){return this._activeDragInstances.indexOf(l)>-1}scrolled(l){const h=[this.scroll];return l&&l!==this._document&&h.push(new Tt(d=>this._ngZone.runOutsideAngular(()=>{const m=g=>{this._activeDragInstances.length&&d.next(g)};return l.addEventListener("scroll",m,!0),()=>{l.removeEventListener("scroll",m,!0)}}))),VI(...h)}ngOnDestroy(){this._dragInstances.forEach(l=>this.removeDragItem(l)),this._dropInstances.forEach(l=>this.removeDropContainer(l)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((l,h)=>{this._document.removeEventListener(h,l.handler,l.options)}),this._globalListeners.clear()}}return c.\u0275fac=function(l){return new(l||c)(Oe(Yn),Oe(Ci))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const OHe={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let w4=(()=>{class c{constructor(l,h,d,f){this._document=l,this._ngZone=h,this._viewportRuler=d,this._dragDropRegistry=f}createDrag(l,h=OHe){return new AHe(l,h,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(l){return new RHe(l,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return c.\u0275fac=function(l){return new(l||c)(Oe(Ci),Oe(Yn),Oe(iHe),Oe(PHe))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const C4=new Vt("CDK_DRAG_PARENT"),Ste=new Vt("CdkDropListGroup"),Tte=new Vt("CDK_DRAG_CONFIG");let NHe=0;const wte=new Vt("CdkDropList");let Cte=(()=>{class c{constructor(l,h,d,f,m,g,y){this.element=l,this._changeDetectorRef=d,this._scrollDispatcher=f,this._dir=m,this._group=g,this._destroyed=new Qe,this.connectedTo=[],this.id="cdk-drop-list-"+NHe++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new st,this.entered=new st,this.exited=new st,this.sorted=new st,this._unsortedItems=new Set,this._dropListRef=h.createDropList(l),this._dropListRef.data=this,y&&this._assignDefaults(y),this._dropListRef.enterPredicate=(_,v)=>this.enterPredicate(_.data,v.data),this._dropListRef.sortPredicate=(_,v,b)=>this.sortPredicate(_,v.data,b.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),c._dropLists.push(this),g&&g._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(l){this._dropListRef.disabled=this._disabled=pv(l)}addItem(l){this._unsortedItems.add(l),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(l){this._unsortedItems.delete(l),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((l,h)=>l._dragRef.getVisibleElement().compareDocumentPosition(h._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const l=c._dropLists.indexOf(this);l>-1&&c._dropLists.splice(l,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(l){this._dir&&this._dir.change.pipe(Dd(this._dir.value),Eu(this._destroyed)).subscribe(h=>l.withDirection(h)),l.beforeStarted.subscribe(()=>{const h=function z8e(c){return Array.isArray(c)?c:[c]}(this.connectedTo).map(d=>"string"==typeof d?c._dropLists.find(m=>m.id===d):d);if(this._group&&this._group._items.forEach(d=>{-1===h.indexOf(d)&&h.push(d)}),!this._scrollableParentsResolved){const d=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(f=>f.getElementRef().nativeElement);this._dropListRef.withScrollableParents(d),this._scrollableParentsResolved=!0}l.disabled=this.disabled,l.lockAxis=this.lockAxis,l.sortingDisabled=pv(this.sortingDisabled),l.autoScrollDisabled=pv(this.autoScrollDisabled),l.autoScrollStep=Xee(this.autoScrollStep,2),l.connectedTo(h.filter(d=>d&&d!==this).map(d=>d._dropListRef)).withOrientation(this.orientation)})}_handleEvents(l){l.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),l.entered.subscribe(h=>{this.entered.emit({container:this,item:h.item.data,currentIndex:h.currentIndex})}),l.exited.subscribe(h=>{this.exited.emit({container:this,item:h.item.data}),this._changeDetectorRef.markForCheck()}),l.sorted.subscribe(h=>{this.sorted.emit({previousIndex:h.previousIndex,currentIndex:h.currentIndex,container:this,item:h.item.data})}),l.dropped.subscribe(h=>{this.dropped.emit({previousIndex:h.previousIndex,currentIndex:h.currentIndex,previousContainer:h.previousContainer.data,container:h.container.data,item:h.item.data,isPointerOverContainer:h.isPointerOverContainer,distance:h.distance,dropPoint:h.dropPoint,event:h.event}),this._changeDetectorRef.markForCheck()})}_assignDefaults(l){const{lockAxis:h,draggingDisabled:d,sortingDisabled:f,listAutoScrollDisabled:m,listOrientation:g}=l;this.disabled=d??!1,this.sortingDisabled=f??!1,this.autoScrollDisabled=m??!1,this.orientation=g||"vertical",h&&(this.lockAxis=h)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(l=>l._dragRef))}}return c._dropLists=[],c.\u0275fac=function(l){return new(l||c)(N(Xt),N(w4),N(Ls),N(tHe),N(ite,8),N(Ste,12),N(Tte,8))},c.\u0275dir=Ke({type:c,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(l,h){2&l&&(Ue("id",h.id),ot("cdk-drop-list-disabled",h.disabled)("cdk-drop-list-dragging",h._dropListRef.isDragging())("cdk-drop-list-receiving",h._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[Lt([{provide:Ste,useValue:void 0},{provide:wte,useExisting:c}])]}),c})();const x4=new Vt("CdkDragHandle");let xte=(()=>{class c{constructor(l,h){this.element=l,this._stateChanges=new Qe,this._disabled=!1,this._parentDrag=h}get disabled(){return this._disabled}set disabled(l){this._disabled=pv(l),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return c.\u0275fac=function(l){return new(l||c)(N(Xt),N(C4,12))},c.\u0275dir=Ke({type:c,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[Lt([{provide:x4,useExisting:c}])]}),c})();const FHe=new Vt("CdkDragPlaceholder"),kHe=new Vt("CdkDragPreview");let Ete=(()=>{class c{constructor(l,h,d,f,m,g,y,_,v,b,S){this.element=l,this.dropContainer=h,this._ngZone=f,this._viewContainerRef=m,this._dir=y,this._changeDetectorRef=v,this._selfHandle=b,this._parentDrag=S,this._destroyed=new Qe,this.started=new st,this.released=new st,this.ended=new st,this.entered=new st,this.exited=new st,this.dropped=new st,this.moved=new Tt(T=>{const x=this._dragRef.moved.pipe(q(E=>({source:this,pointerPosition:E.pointerPosition,event:E.event,delta:E.delta,distance:E.distance}))).subscribe(T);return()=>{x.unsubscribe()}}),this._dragRef=_.createDrag(l,{dragStartThreshold:g&&null!=g.dragStartThreshold?g.dragStartThreshold:5,pointerDirectionChangeThreshold:g&&null!=g.pointerDirectionChangeThreshold?g.pointerDirectionChangeThreshold:5,zIndex:g?.zIndex}),this._dragRef.data=this,c._dragInstances.push(this),g&&this._assignDefaults(g),h&&(this._dragRef._withDropContainer(h._dropListRef),h.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(l){this._disabled=pv(l),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(l){this._dragRef.setFreeDragPosition(l)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(dh(1),Eu(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(l){const h=l.rootElementSelector,d=l.freeDragPosition;h&&!h.firstChange&&this._updateRootElement(),d&&!d.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const l=c._dragInstances.indexOf(this);l>-1&&c._dragInstances.splice(l,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const l=this.element.nativeElement;let h=l;this.rootElementSelector&&(h=void 0!==l.closest?l.closest(this.rootElementSelector):l.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(h||l)}_getBoundaryElement(){const l=this.boundaryElement;return l?"string"==typeof l?this.element.nativeElement.closest(l):Ba(l):null}_syncInputs(l){l.beforeStarted.subscribe(()=>{if(!l.isDragging()){const h=this._dir,d=this.dragStartDelay,f=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,m=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;l.disabled=this.disabled,l.lockAxis=this.lockAxis,l.dragStartDelay="object"==typeof d&&d?d:Xee(d),l.constrainPosition=this.constrainPosition,l.previewClass=this.previewClass,l.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(f).withPreviewTemplate(m).withPreviewContainer(this.previewContainer||"global"),h&&l.withDirection(h.value)}}),l.beforeStarted.pipe(dh(1)).subscribe(()=>{if(this._parentDrag)return void l.withParent(this._parentDrag._dragRef);let h=this.element.nativeElement.parentElement;for(;h;){if(h.classList.contains("cdk-drag")){l.withParent(c._dragInstances.find(d=>d.element.nativeElement===h)?._dragRef||null);break}h=h.parentElement}})}_handleEvents(l){l.started.subscribe(h=>{this.started.emit({source:this,event:h.event}),this._changeDetectorRef.markForCheck()}),l.released.subscribe(h=>{this.released.emit({source:this,event:h.event})}),l.ended.subscribe(h=>{this.ended.emit({source:this,distance:h.distance,dropPoint:h.dropPoint,event:h.event}),this._changeDetectorRef.markForCheck()}),l.entered.subscribe(h=>{this.entered.emit({container:h.container.data,item:this,currentIndex:h.currentIndex})}),l.exited.subscribe(h=>{this.exited.emit({container:h.container.data,item:this})}),l.dropped.subscribe(h=>{this.dropped.emit({previousIndex:h.previousIndex,currentIndex:h.currentIndex,previousContainer:h.previousContainer.data,container:h.container.data,isPointerOverContainer:h.isPointerOverContainer,item:this,distance:h.distance,dropPoint:h.dropPoint,event:h.event})})}_assignDefaults(l){const{lockAxis:h,dragStartDelay:d,constrainPosition:f,previewClass:m,boundaryElement:g,draggingDisabled:y,rootElementSelector:_,previewContainer:v}=l;this.disabled=y??!1,this.dragStartDelay=d||0,h&&(this.lockAxis=h),f&&(this.constrainPosition=f),m&&(this.previewClass=m),g&&(this.boundaryElement=g),_&&(this.rootElementSelector=_),v&&(this.previewContainer=v)}_setupHandlesListener(){this._handles.changes.pipe(Dd(this._handles),Br(l=>{const h=l.filter(d=>d._parentDrag===this).map(d=>d.element);this._selfHandle&&this.rootElementSelector&&h.push(this.element),this._dragRef.withHandles(h)}),Ma(l=>VI(...l.map(h=>h._stateChanges.pipe(Dd(h))))),Eu(this._destroyed)).subscribe(l=>{const h=this._dragRef,d=l.element.nativeElement;l.disabled?h.disableHandle(d):h.enableHandle(d)})}}return c._dragInstances=[],c.\u0275fac=function(l){return new(l||c)(N(Xt),N(wte,12),N(Ci),N(Yn),N(ii),N(Tte,8),N(ite,8),N(w4),N(Ls),N(x4,10),N(C4,12))},c.\u0275dir=Ke({type:c,selectors:[["","cdkDrag",""]],contentQueries:function(l,h,d){if(1&l&&(Cn(d,kHe,5),Cn(d,FHe,5),Cn(d,x4,5)),2&l){let f;vt(f=bt())&&(h._previewTemplate=f.first),vt(f=bt())&&(h._placeholderTemplate=f.first),vt(f=bt())&&(h._handles=f)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(l,h){2&l&&ot("cdk-drag-disabled",h.disabled)("cdk-drag-dragging",h._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[Lt([{provide:C4,useExisting:c}]),ps]}),c})(),BHe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({providers:[w4],imports:[rHe]}),c})();function UHe(c,a){}let Mte=(()=>{class c{constructor(l){this.viewContainerRef=l}}return c.\u0275fac=function(l){return new(l||c)(N(ii))},c.\u0275dir=Ke({type:c,selectors:[["","ukisAddHost",""]]}),c})(),Dte=(()=>{class c{constructor(){this.dynamicComponentChange=new st,this.subs=[]}loadComponent(){this.dynamicComponent&&(this.viewContainerRef=this.ukisAddHost.viewContainerRef,this.viewContainerRef.clear(),this.componentRef=this.viewContainerRef.createComponent(this.dynamicComponent.component),this.setInputOutputs())}setInputOutputs(){this.componentRef&&this.dynamicComponent.inputs&&Object.keys(this.dynamicComponent.inputs).map(h=>{const d=h;if(this.dynamicComponent.inputs){this.componentRef.instance[d]=this.dynamicComponent.inputs[d];const f=`${d}Change`;if(this.componentRef.instance[f]&&this.componentRef.instance[f]instanceof st){const m=this.componentRef.instance[f].subscribe(g=>{this.dynamicComponent.inputs&&(this.dynamicComponent.inputs[d]=g),this.dynamicComponent.outputs&&this.dynamicComponent.outputs[f]&&this.dynamicComponent.outputs[f](g),this.dynamicComponentChange.emit(this.dynamicComponent)});this.subs.push(m)}}})}ngOnChanges(l){l.dynamicComponent&&(Array.isArray(this.subs)&&this.subs.map(h=>h.unsubscribe()),this.subs.map(h=>h.unsubscribe()),this.subs=[],this.setInputOutputs())}ngOnInit(){this.loadComponent()}ngOnDestroy(){this.componentRef&&(this.subs.map(l=>l.unsubscribe()),this.componentRef.destroy(),this.componentRef=null),this.viewContainerRef&&(this.viewContainerRef.clear(),this.viewContainerRef=null)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ukis-dynamic-component"]],viewQuery:function(l,h){if(1&l&&hi(Mte,7),2&l){let d;vt(d=bt())&&(h.ukisAddHost=d.first)}},inputs:{dynamicComponent:"dynamicComponent"},outputs:{dynamicComponentChange:"dynamicComponentChange"},features:[ps],decls:1,vars:0,consts:[["ukisAddHost",""]],template:function(l,h){1&l&&ce(0,UHe,0,0,"ng-template",0)},dependencies:[Mte],encapsulation:2}),c})();const E4=function(c){return{disabled:c}};function zHe(c,a){if(1&c){const l=$t();U(0,"clr-icon",11),De("click",function(){return yt(l),_t(he().showProperties())}),H()}if(2&c){const l=he();z("ngStyle",l.getExpandShape())("ngClass",mr(2,E4,l.is_expandable()))}}function GHe(c,a){if(1&c){const l=$t();U(0,"span",12),De("click",function(){return yt(l),_t(he().showProperties())}),ve(1),H()}if(2&c){const l=he();z("title",l.getLayerName(l.layer)),V(1),pr(" ",l.getLayerName(l.layer)," ")}}function HHe(c,a){if(1&c){const l=$t();U(0,"span")(1,"clr-icon",13),De("click",function(){yt(l);const d=he();return _t(d.setLayerIndex(d.layer,"down",d.group))}),H(),U(2,"clr-icon",14),De("click",function(){yt(l);const d=he();return _t(d.setLayerIndex(d.layer,"up",d.group))}),H()()}if(2&c){const l=he();V(1),z("hidden",l.layerGroups&&1==l.layerGroups.length)("ngClass",mr(4,E4,l.isLast(l.layer))),V(1),z("hidden",l.layerGroups&&1==l.layerGroups.length)("ngClass",mr(6,E4,l.isFirst(l.layer)))}}const Ate=function(c){return{"is-solid":c}};function jHe(c,a){if(1&c&&xe(0,"clr-icon",15),2&c){const l=he();Vo("title",l.layer.visible?"Choose another layer":"Show layer"),z("ngClass",mr(3,Ate,l.layer.visible)),Ue("shape",l.layer.visible?"dot-circle":"circle")}}function WHe(c,a){if(1&c&&xe(0,"clr-icon",15),2&c){const l=he();Vo("title",l.layer.visible?"Hide layer":"Show layer"),z("ngClass",mr(3,Ate,l.layer.visible)),Ue("shape",l.layer.visible?"eye":"eye-hide")}}const M4=function(c){return{active:c}};function XHe(c,a){if(1&c){const l=$t();U(0,"clr-icon",25),De("click",function(){return yt(l),_t(he(2).switchTab("settings"))}),H()}if(2&c){const l=he(2);z("ngClass",mr(1,M4,l.activeTabs.settings))}}function qHe(c,a){if(1&c){const l=$t();U(0,"clr-icon",26),De("click",function(){return yt(l),_t(he(2).switchTab("legend"))}),H()}if(2&c){const l=he(2);z("ngClass",mr(1,M4,l.activeTabs.legend))}}function $He(c,a){if(1&c){const l=$t();U(0,"clr-icon",27),De("click",function(){return yt(l),_t(he(2).switchTab("description"))}),H()}if(2&c){const l=he(2);z("ngClass",mr(1,M4,l.activeTabs.description))}}function YHe(c,a){if(1&c){const l=$t();U(0,"clr-icon",28),De("click",function(){const f=yt(l).$implicit,m=he(2);return _t(f.action(m.layer))}),H()}if(2&c){const l=a.$implicit;z("title",l.title),Ue("shape",l.icon)}}function ZHe(c,a){if(1&c){const l=$t();U(0,"clr-icon",29),De("click",function(){yt(l);const d=he(2);return _t(d.zoomTo(d.layer))}),H()}}function KHe(c,a){if(1&c){const l=$t();U(0,"clr-icon",30),De("click",function(){yt(l);const d=he(2);return _t(d.removeLayer(d.group,d.layer))}),H()}}function JHe(c,a){if(1&c){const l=$t();U(0,"div",37)(1,"label"),ve(2,"Opacity: "),U(3,"input",38),De("change",function(){yt(l);const d=he(4);return _t(d.setLayerOpacity(d.layer))})("ngModelChange",function(d){return yt(l),_t(he(4).layer.opacity=d)}),H()(),U(4,"span"),ve(5),H()()}if(2&c){const l=he(4);V(3),z("value",l.layer.opacity)("min",0)("max",1)("step",.1)("ngModel",l.layer.opacity),V(2),Kt(" "+l.layer.opacity)}}function QHe(c,a){if(1&c&&(U(0,"option",41),ve(1),H()),2&c){const l=a.$implicit,h=he(5);z("value",l.name),Ue("selected",!!h.isSelectedStyle(l.name)||null),V(1),Kt(l.title)}}function e9e(c,a){if(1&c){const l=$t();ci(0),U(1,"select",39),De("change",function(d){return yt(l),_t(he(4).executeChangeStyle(d))}),ce(2,QHe,2,3,"option",40),H(),ui()}if(2&c){const l=he(4);V(2),z("ngForOf",l.layer.styles)}}function t9e(c,a){if(1&c){const l=$t();ci(0),U(1,"ukis-dynamic-component",42),De("dynamicComponentChange",function(d){return yt(l),_t(he(4).dynamicComponents.action=d)}),H(),ui()}if(2&c){const l=he(4);V(1),z("dynamicComponent",l.dynamicComponents.action)}}function n9e(c,a){if(1&c&&(U(0,"div",35),ce(1,JHe,6,6,"div",36),ce(2,e9e,3,1,"ng-container",6),ce(3,t9e,2,1,"ng-container",6),H()),2&c){const l=he(3);V(1),z("ngIf",!l.checkBaselayer(l.layer,l.group)),V(1),z("ngIf",l.layer.styles&&(null==l.layer.styles?null:l.layer.styles.length)>1),V(1),z("ngIf",l.checkIsComponentItem(l.layer,"action"))}}function i9e(c,a){if(1&c){const l=$t();ci(0),U(1,"ukis-dynamic-component",42),De("dynamicComponentChange",function(d){return yt(l),_t(he(4).dynamicComponents.legendImg=d)}),H(),ui()}if(2&c){const l=he(4);V(1),z("dynamicComponent",l.dynamicComponents.legendImg)}}function r9e(c,a){if(1&c&&(U(0,"a",46),xe(1,"img",47),H()),2&c){const l=he(4);z("href",l.layer.legendImg,Ka),V(1),z("src",l.layer.legendImg,Ka)}}function s9e(c,a){if(1&c&&(U(0,"div",43),ce(1,i9e,2,1,"ng-container",44),ce(2,r9e,2,2,"ng-template",null,45,io),H()),2&c){const l=as(3),h=he(3);V(1),z("ngIf",h.checkIsComponentItem(h.layer,"legendImg"))("ngIfElse",l)}}function o9e(c,a){if(1&c){const l=$t();ci(0),U(1,"ukis-dynamic-component",42),De("dynamicComponentChange",function(d){return yt(l),_t(he(4).dynamicComponents.description=d)}),H(),ui()}if(2&c){const l=he(4);V(1),z("dynamicComponent",l.dynamicComponents.description)}}function a9e(c,a){1&c&&xe(0,"span",50),2&c&&z("innerHTML",he(4).layer.description,Gw)}function l9e(c,a){if(1&c&&(U(0,"div",48),ce(1,o9e,2,1,"ng-container",44),ce(2,a9e,1,1,"ng-template",null,49,io),H()),2&c){const l=as(3),h=he(3);V(1),z("ngIf",h.checkIsComponentItem(h.layer,"description"))("ngIfElse",l)}}function c9e(c,a){if(1&c&&(U(0,"div",31),ce(1,n9e,4,3,"div",32),ce(2,s9e,4,2,"div",33),ce(3,l9e,4,2,"div",34),H()),2&c){const l=he(2);V(1),z("ngIf",l.activeTabs.settings),V(1),z("ngIf",l.activeTabs.legend&&l.layer.legendImg),V(1),z("ngIf",l.activeTabs.description&&l.layer.description)}}function u9e(c,a){if(1&c&&(U(0,"div",16)(1,"div",17),ce(2,XHe,1,3,"clr-icon",18),ce(3,qHe,1,3,"clr-icon",19),ce(4,$He,1,3,"clr-icon",20),ce(5,YHe,1,2,"clr-icon",21),xe(6,"span"),ce(7,ZHe,1,0,"clr-icon",22),ce(8,KHe,1,0,"clr-icon",23),H(),ce(9,c9e,4,3,"div",24),H()),2&c){const l=he();V(2),z("ngIf",!l.checkBaselayer(l.layer,l.group)||l.layer.action),V(1),z("ngIf",l.layer.legendImg),V(1),z("ngIf",l.layer.description),V(1),z("ngForOf",l.layer.actions),V(2),z("ngIf",l.canZoomToLayer),V(1),z("ngIf",l.layer.removable),V(1),z("ngIf",l.hasTabsbody&&l.hasActiveTabs())}}const h9e=function(c){return{expanded:c}},d9e=["*"];var GD=(()=>(function(c){c.settings="settings",c.legend="legend",c.description="description"}(GD||(GD={})),GD))();let D4=(()=>{class c{constructor(){this.expandable=!0,this.sorting=!0,this.update=new st,this.canZoomToLayer=!1,this.activeTabs={settings:!1,legend:!0,description:!1},this.hasTabsbody=!0,this.dynamicComponents={legendImg:null,action:null,description:null}}get visible(){return this.layer.visible}get cssClass(){return this.layer.cssClass}set expanded(l){this.layer&&(this.layer.expanded=l)}get expanded(){return!!this.layer&&!!this.layer.expanded}checkIsComponentItem(l,h){const d=l[h];let f=!1;if(d&&"object"==typeof d&&"component"in d){const m=d.component;d.inputs?d.inputs&&!d.inputs.layer?this.dynamicComponents[h]={component:d.component,inputs:Object.assign({},d.inputs,{layer:l})}:d.inputs&&d.inputs.layer&&(this.dynamicComponents[h]={component:d.component,inputs:Object.assign({},d.inputs)}):this.dynamicComponents[h]={component:m,inputs:{layer:l}},d.outputs&&(this.dynamicComponents[h].outputs=Object.assign({},d.outputs)),f=!0}return f}getLayerName(l){return l.displayName?l.displayName:l.name}ngOnInit(){this.layersSvc||console.error("you need to provide a layersService!"),"object"==typeof this.layer?.expanded&&Object.keys(GD).includes(this.layer.expanded.tab)?(this.switchTab(this.layer.expanded.tab),!1===this.layer.expanded.expanded&&(this.activeTabs[this.layer.expanded.tab]=!1)):this.setDefaultActiveTabs(),this.layer.bbox&&this.layer.bbox.length>=4&&(this.canZoomToLayer=!0),"Baselayers"!==this.layer.filtertype||this.layer.legendImg||this.layer.description||this.layer.action||this.layer.actions||this.layer.styles||this.layer.styles?.length>1||(this.hasTabsbody=!1)}setDefaultActiveTabs(){this.layer.legendImg||this.switchTab("description"),!this.layer.legendImg&&!this.layer.description&&this.switchTab("settings")}setLayerVisibility(l,h){if(h){if(h.layers.length>0)if("Baselayers"===h.filtertype){for(const d of h.layers)d.visible=d===l;this.update.emit({layer:this.layer})}else{const d=h.visible;l.visible=!l.visible,d!==h.visible?this.update.emit({layer:this.layer}):this.layersSvc.updateLayer(l,l.filtertype||"Layers")}}else if("Baselayers"===l.filtertype){l.visible=!l.visible;const d=this.layerGroups.filter(f=>"Baselayers"===f.filtertype);for(const f of d)f instanceof so&&f.id!==l.id&&(f.visible=!l.visible,this.layersSvc.updateLayer(f,f.filtertype||"Baselayers"))}else l.visible=!l.visible,this.layersSvc.updateLayer(l,l.filtertype||"Layers")}setLayerIndex(l,h,d){d?this.layersSvc.setLayerIndexInGroup(l,h,d):this.layersSvc.setGroupLayerIndex(l,h)}removeLayer(l,h){l?this.layersSvc.removeLayerFromGroup(h,l):this.layersSvc.removeLayer(h,h.filtertype)}zoomTo(l){this.mapState&&l.bbox&&l.bbox.length>=4&&this.mapState.setExtent(l.bbox)}setLayerOpacity(l){this.group?this.update.emit({layer:l}):this.layersSvc.updateLayer(l,l.filtertype||"Layers")}checkBaselayer(l,h){return!!("Baselayers"===l.filtertype||h&&"Baselayers"===h.filtertype)}is_expandable(){return this.group?!this.layer.legendImg&&"Baselayers"===this.group.filtertype:!this.hasTabsbody}showProperties(){this.is_expandable()||(this.expanded=!this.expanded)}switchTab(l,h=!0){for(const d of Object.keys(this.activeTabs)){const f=l===d;this.activeTabs[d]=(!this.activeTabs[d]||!h)&&f}}hasActiveTabs(){return Object.values(this.activeTabs).filter(l=>l).length>0}isSelectedStyle(l){return this.layer instanceof Cy?this.layer.params.STYLES===l:this.layer instanceof Da&&this.layer.params.style===l}executeChangeStyle(l){const h=l.target.value;if(this.layer.styles){const d=this.layer.styles.find(f=>f.name===h);d&&(this.layer.legendImg=d.legendURL,this.layer instanceof Cy?this.layer.params.STYLES=d.name:this.layer instanceof Da&&(this.layer.params.style=d.name),this.layersSvc.updateLayer(this.layer,this.layer.filtertype))}}isFirst(l){return this.group?this.layersSvc.isGroupFirst(l,this.group.layers):this.layersSvc.isGroupFirst(l,null,l.filtertype)}isLast(l){return this.group?this.layersSvc.isGroupLast(l,this.group.layers):this.layersSvc.isGroupLast(l,null,l.filtertype)}getExpandShape(){return this.expanded?{transform:"rotate(180deg)"}:{transform:"rotate(90deg)"}}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ukis-layerentry"]],hostVars:4,hostBindings:function(l,h){2&l&&(na(h.cssClass),ot("layer-visible",h.visible))},inputs:{layersSvc:"layersSvc",mapState:"mapState",layer:"layer",group:"group",layerGroups:"layerGroups",expanded:"expanded",expandable:"expandable",sorting:"sorting"},outputs:{update:"update"},ngContentSelectors:d9e,decls:14,vars:13,consts:[[1,"layer",3,"ngClass"],[1,"head"],["shape","angle","class","iconButton","title","Details",3,"ngStyle","ngClass","click",4,"ngIf"],[1,"item-title-replacement","title",3,"title","click"],["ref",""],["class","title",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","iconButton",3,"ngClass","title",4,"ngIf","ngIfElse"],["notBaselayer",""],[1,"hide",3,"type","name","checked","change"],["class","body",4,"ngIf"],["shape","angle","title","Details",1,"iconButton",3,"ngStyle","ngClass","click"],[1,"title",3,"title","click"],["shape","arrow","title","up",1,"iconButton",3,"hidden","ngClass","click"],["shape","arrow","title","down","dir","down",1,"iconButton",3,"hidden","ngClass","click"],[1,"iconButton",3,"ngClass","title"],[1,"body"],[1,"tools"],["title","Layer settings","shape","cog","class","iconButton",3,"ngClass","click",4,"ngIf"],["title","Layer Legend","shape","image","class","iconButton",3,"ngClass","click",4,"ngIf"],["title","Layer info","shape","info-standard","class","iconButton",3,"ngClass","click",4,"ngIf"],["class","iconButton",3,"title","click",4,"ngFor","ngForOf"],["shape","zoom-in","class","iconButton","title","Zoom to layer",3,"click",4,"ngIf"],["shape","trash","class","iconButton","title","Remove layer",3,"click",4,"ngIf"],["class","tabsbody",4,"ngIf"],["title","Layer settings","shape","cog",1,"iconButton",3,"ngClass","click"],["title","Layer Legend","shape","image",1,"iconButton",3,"ngClass","click"],["title","Layer info","shape","info-standard",1,"iconButton",3,"ngClass","click"],[1,"iconButton",3,"title","click"],["shape","zoom-in","title","Zoom to layer",1,"iconButton",3,"click"],["shape","trash","title","Remove layer",1,"iconButton",3,"click"],[1,"tabsbody"],["class","layersettings",4,"ngIf"],["class","legend",4,"ngIf"],["class","description",4,"ngIf"],[1,"layersettings"],["class","form-group",4,"ngIf"],[1,"form-group"],["type","range","name","points",1,"ukis-range-input","opacity-input",3,"value","min","max","step","ngModel","change","ngModelChange"],["clrSelect","",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dynamicComponent","dynamicComponentChange"],[1,"legend"],[4,"ngIf","ngIfElse"],["imageUrl",""],["target","_blank","title","Show full Image",3,"href"],[3,"src"],[1,"description"],["descriptionText",""],[3,"innerHTML"]],template:function(l,h){if(1&l&&(At(),U(0,"div",0)(1,"div",1),ce(2,zHe,1,4,"clr-icon",2),U(3,"div",3,4),De("click",function(){return h.showProperties()}),ze(5),H(),ce(6,GHe,2,2,"span",5),ce(7,HHe,3,8,"span",6),U(8,"label"),ce(9,jHe,1,5,"clr-icon",7),ce(10,WHe,1,5,"ng-template",null,8,io),U(12,"input",9),De("change",function(){return h.setLayerVisibility(h.layer,h.group)}),H()()(),ce(13,u9e,10,7,"div",10),H()),2&l){const d=as(4),f=as(11);z("ngClass",mr(11,h9e,h.expanded)),V(2),z("ngIf",h.hasTabsbody),V(1),z("title",h.getLayerName(h.layer)),V(3),z("ngIf",0==d.children.length),V(1),z("ngIf",!h.checkBaselayer(h.layer,h.group)&&h.sorting),V(2),z("ngIf",h.checkBaselayer(h.layer,h.group))("ngIfElse",f),V(3),z("type",h.checkBaselayer(h.layer,h.group)?"radio":"checkbox")("name","layer")("checked",h.layer.visible),V(1),z("ngIf",h.expandable&&h.expanded)}},dependencies:[ro,Er,bn,OL,ga,Qr,kK,LM,PM,ql,n1,Na,gl,Dte],styles:[".title[_ngcontent-%COMP%]{cursor:pointer}.item-title-replacement[_ngcontent-%COMP%]:empty{display:none}.body[_ngcontent-%COMP%]{cursor:default}.tabsbody[_ngcontent-%COMP%]{overflow:hidden}.tabsbody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;max-width:100%}"]}),c})(),Ite=(()=>{class c{transform(l,h){return l.filter(h)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275pipe=Po({name:"itemsfilter",type:c,pure:!1}),c})(),A4=(()=>{class c{transform(l){return"string"==typeof l?l.split("").reverse().join(""):Array.isArray(l)?l.slice().reverse():l}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275pipe=Po({name:"reverse",type:c,pure:!1}),c})();function f9e(c,a){if(1&c){const l=$t();U(0,"span",8),De("click",function(){return yt(l),_t(he().showProperties())}),ve(1),H()}if(2&c){const l=he();z("title",l.getLayerName(l.group)),V(1),pr(" ",l.getLayerName(l.group)," ")}}const Rte=function(c){return{disabled:c}};function p9e(c,a){if(1&c){const l=$t();U(0,"span")(1,"clr-icon",9),De("click",function(){yt(l);const d=he();return _t(d.setLayerGroupIndex(d.group,"down"))}),H(),U(2,"clr-icon",10),De("click",function(){yt(l);const d=he();return _t(d.setLayerGroupIndex(d.group,"up"))}),H()()}if(2&c){const l=he();V(1),z("ngClass",mr(2,Rte,l.isLast(l.group))),V(1),z("ngClass",mr(4,Rte,l.isFirst(l.group)))}}const lT=function(c){return{"is-solid":c}};function m9e(c,a){if(1&c){const l=$t();U(0,"span")(1,"label"),xe(2,"clr-icon",11),U(3,"input",12),De("change",function(){return yt(l),_t(he().setGroupLayersVisibility())}),H()()()}if(2&c){const l=he();V(2),Vo("title",l.group.visible?"Hide Group":"Show Group"),z("ngClass",mr(6,lT,l.group.visible)),Ue("shape",l.group.visible?"eye":"eye-hide"),V(1),z("type","checkbox")("checked",l.group.visible)("name","group")}}function g9e(c,a){if(1&c){const l=$t();U(0,"clr-icon",27),De("click",function(){return yt(l),_t(he(2).switchTab("settings"))}),H()}if(2&c){const l=he(2);Vo("title",l.activeTabs.settings?"Hide settings":"Show settings"),z("ngClass",mr(2,lT,l.activeTabs.settings))}}function y9e(c,a){if(1&c){const l=$t();U(0,"clr-icon",28),De("click",function(){return yt(l),_t(he(2).switchTab("legend"))}),H()}if(2&c){const l=he(2);Vo("title",l.activeTabs.legend?"Hide Legend":"Show Legend"),z("ngClass",mr(2,lT,l.activeTabs.legend))}}function _9e(c,a){if(1&c){const l=$t();U(0,"clr-icon",29),De("click",function(){return yt(l),_t(he(2).switchTab("description"))}),H()}if(2&c){const l=he(2);Vo("title",l.activeTabs.description?"Hide Info":"Show Info"),z("ngClass",mr(2,lT,l.activeTabs.description))}}function v9e(c,a){if(1&c){const l=$t();U(0,"clr-icon",2),De("click",function(){const f=yt(l).$implicit,m=he(2);return _t(f.action(m.group))}),H()}if(2&c){const l=a.$implicit;z("title",l.title),Ue("shape",l.icon)}}function b9e(c,a){if(1&c){const l=$t();U(0,"clr-icon",30),De("click",function(){yt(l);const d=he(2);return _t(d.zoomTo(d.group))}),H()}}function S9e(c,a){if(1&c){const l=$t();U(0,"clr-icon",31),De("click",function(){yt(l);const d=he(2);return _t(d.removeLayerGroup(d.group))}),H()}}function T9e(c,a){if(1&c){const l=$t();ci(0),U(1,"ukis-dynamic-component",35),De("dynamicComponentChange",function(d){return yt(l),_t(he(3).dynamicComponents.description=d)}),H(),ui()}if(2&c){const l=he(3);V(1),z("dynamicComponent",l.dynamicComponents.description)}}function w9e(c,a){1&c&&xe(0,"span",36),2&c&&z("innerHTML",he(3).group.description,Gw)}function C9e(c,a){if(1&c&&(U(0,"div",32),ce(1,T9e,2,1,"ng-container",33),ce(2,w9e,1,1,"ng-template",null,34,io),H()),2&c){const l=as(3),h=he(2);V(1),z("ngIf",h.checkIsComponentItem(h.group,"description"))("ngIfElse",l)}}function x9e(c,a){if(1&c){const l=$t();ci(0),U(1,"ukis-dynamic-component",35),De("dynamicComponentChange",function(d){return yt(l),_t(he(3).group.action=d)}),H(),ui()}if(2&c){const l=he(3);V(1),z("dynamicComponent",l.group.action)}}function E9e(c,a){if(1&c&&(U(0,"div",37),ce(1,x9e,2,1,"ng-container",6),H()),2&c){const l=he(2);V(1),z("ngIf",l.checkIsComponentItem(l.group,"action"))}}function M9e(c,a){if(1&c){const l=$t();ci(0),U(1,"ukis-dynamic-component",35),De("dynamicComponentChange",function(d){return yt(l),_t(he(3).dynamicComponents.legendImg=d)}),H(),ui()}if(2&c){const l=he(3);V(1),z("dynamicComponent",l.dynamicComponents.legendImg)}}function D9e(c,a){if(1&c&&(U(0,"a",40),xe(1,"img",41),H()),2&c){const l=he(3);z("href",l.group.legendImg,Ka),V(1),z("src",l.group.legendImg,Ka)}}function A9e(c,a){if(1&c&&(U(0,"div",38),ce(1,M9e,2,1,"ng-container",33),ce(2,D9e,2,2,"ng-template",null,39,io),H()),2&c){const l=as(3),h=he(2);V(1),z("ngIf",h.checkIsComponentItem(h.group,"legendImg"))("ngIfElse",l)}}const I9e=function(c){return{id:c}};function R9e(c,a){if(1&c){const l=$t();ci(0),U(1,"div",42)(2,"ukis-layerentry",43),De("update",function(d){yt(l);const f=he(2);return _t(f.layerUpdate(d,f.group))}),U(3,"span",44),ve(4),H()()(),ui()}if(2&c){const l=a.$implicit,h=he(2);V(1),z("cdkDragData",mr(8,I9e,l.id)),V(1),z("expanded",h.openAllLayersProperties)("layersSvc",h.layersSvc)("mapState",h.mapState)("layer",l)("group",h.group)("sorting",h.groupLayersSort),V(2),pr(" ",l.displayName||l.name," ")}}function L9e(c,a){if(1&c){const l=$t();U(0,"div",13)(1,"div",14),ce(2,g9e,1,4,"clr-icon",15),ce(3,y9e,1,4,"clr-icon",16),ce(4,_9e,1,4,"clr-icon",17),U(5,"clr-icon",18),De("click",function(){return yt(l),_t(he().showHideAllDetails())}),H(),ce(6,v9e,1,2,"clr-icon",19),xe(7,"span"),ce(8,b9e,1,0,"clr-icon",20),ce(9,S9e,1,0,"clr-icon",21),H(),ce(10,C9e,4,2,"div",22),ce(11,E9e,2,1,"div",23),ce(12,A9e,4,2,"div",24),U(13,"div",25),De("cdkDropListDropped",function(d){return yt(l),_t(he().drop(d))}),ms(14,"reverse"),ms(15,"itemsfilter"),ce(16,R9e,5,10,"ng-container",26),ms(17,"reverse"),ms(18,"itemsfilter"),H()()}if(2&c){const l=he();V(2),z("ngIf",l.group.action),V(1),z("ngIf",l.group.legendImg),V(1),z("ngIf",l.group.description),V(1),Vo("title",l.openAllLayersProperties?"Hide all layers details":"Show all layers details"),z("ngClass",mr(24,lT,l.openAllLayersProperties)),V(1),z("ngForOf",l.group.actions),V(2),z("ngIf",l.canZoomToGroup),V(1),z("ngIf",l.group.removable),V(1),z("ngIf",l.group.description&&l.activeTabs.description),V(1),z("ngIf",l.group.action&&l.activeTabs.settings),V(1),z("ngIf",l.group.legendImg&&l.activeTabs.legend),V(1),z("cdkDropListDisabled",!l.groupLayersSort)("cdkDropListData",_o(14,14,Z0(15,16,l.group.layers,l.checkClassHide))),V(3),z("ngForOf",_o(17,19,Z0(18,21,l.group.layers,l.checkClassHide)))}}const P9e=["*"];var HD=(()=>(function(c){c.settings="settings",c.legend="legend",c.description="description"}(HD||(HD={})),HD))();let Lte=(()=>{class c{constructor(){this.groupSort=!0,this.groupLayersSort=!0,this.canZoomToGroup=!1,this.activeTabs={settings:!1,legend:!0,description:!1},this.dynamicComponents={legendImg:null,action:null,description:null}}get visible(){return this.group.visible}get cssClass(){return this.group.cssClass}set openAllLayersProperties(l){this.group&&this.group.layers.length&&this.group.layers.forEach(h=>h.expanded=l)}get openAllLayersProperties(){return!(!this.group||!this.group.layers.length)&&this.group.layers.filter(l=>!0===l.expanded).length===this.group.layers.length}ngOnInit(){this.group.bbox&&this.group.bbox.length>=4&&(this.canZoomToGroup=!0),"object"==typeof this.group?.expanded&&Object.keys(HD).includes(this.group.expanded.tab)?(this.switchTab(this.group.expanded.tab),!1===this.group.expanded.expanded&&(this.activeTabs[this.group.expanded.tab]=!1)):this.setDefaultActiveTabs()}setDefaultActiveTabs(){this.group?.action||(this.activeTabs.settings=!1)}checkIsComponentItem(l,h){const d=l[h];let f=!1;if(d&&"object"==typeof d&&"component"in d){const m=d.component;d.inputs?d.inputs&&!d.inputs.group?this.dynamicComponents[h]={component:d.component,inputs:Object.assign({},d.inputs,{group:l})}:d.inputs&&d.inputs.group&&(this.dynamicComponents[h]={component:d.component,inputs:Object.assign({},d.inputs)}):this.dynamicComponents[h]={component:m,inputs:{group:l}},d.outputs&&(this.dynamicComponents[h].outputs=Object.assign({},d.outputs)),f=!0}return f}checkBaselayer(l){return!(!l||"Baselayers"!==l.filtertype)}checkClassHide(l){return!l?.cssClass?.includes("hide")}getLayerName(l){return l.displayName?l.displayName:l.name}setLayerGroupIndex(l,h){this.layersSvc.setGroupLayerIndex(l,h)}setGroupLayersVisibility(){this.group.visible=!this.group.visible,this.layersSvc.updateLayerGroup(this.group)}removeLayerGroup(l){this.layersSvc.removeLayerGroup(l)}zoomTo(l){this.mapState&&l.bbox&&l.bbox.length>=4&&this.mapState.setExtent(l.bbox)}layerUpdate(l,h){this.layersSvc.updateLayerGroup(h)}showProperties(){this.group.expanded=!this.group.expanded}switchTab(l,h=!0){for(const d of Object.keys(this.activeTabs)){const f=l===d;this.activeTabs[d]=(!this.activeTabs[d]||!h)&&f}}showHideAllDetails(){if(this.openAllLayersProperties){this.openAllLayersProperties=!1;for(const l of Object.keys(this.activeTabs))this.activeTabs[l]=!1}else this.openAllLayersProperties=!0,this.group.legendImg?this.switchTab("legend",!1):this.group.description?this.switchTab("description",!1):this.group.action&&this.switchTab("settings",!1)}isFirst(l){return this.layersSvc.isGroupFirst(l,this.layerGroups,l.filtertype)}isLast(l){return this.layersSvc.isGroupLast(l,this.layerGroups,l.filtertype)}drop(l){const h=this.group.layers,d=h.length,f=l.container.data;let g,y;if(d===f.length)g=d-l.previousIndex-1,y=d-l.currentIndex-1;else{const _=f[l.currentIndex],v=h.findIndex(S=>S.id===l.item.data.id);let b=h.findIndex(S=>S.id===_.id);l.previousIndex===l.currentIndex&&(b=v),g=v,y=b}gte(this.group.layers,g,y),this.layersSvc.updateLayerGroup(this.group)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ukis-layerentry-group"]],hostVars:4,hostBindings:function(l,h){2&l&&(na(h.cssClass),ot("group-visible",h.visible))},inputs:{layersSvc:"layersSvc",mapState:"mapState",group:"group",layerGroups:"layerGroups",groupSort:"groupSort",groupLayersSort:"groupLayersSort"},ngContentSelectors:P9e,decls:10,vars:7,consts:[[1,"layergroup"],[1,"head"],[1,"iconButton",3,"title","click"],[1,"item-title-replacement","title",3,"title","click"],["ref",""],["class","title",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","body",4,"ngIf"],[1,"title",3,"title","click"],["shape","arrow","title","up",1,"iconButton","move-item",3,"ngClass","click"],["shape","arrow","title","down","dir","down",1,"iconButton","move-item",3,"ngClass","click"],[1,"iconButton",3,"ngClass","title"],[1,"hide",3,"type","checked","name","change"],[1,"body"],[1,"tools"],["shape","cog","class","iconButton",3,"ngClass","title","click",4,"ngIf"],["shape","image","class","iconButton",3,"title","ngClass","click",4,"ngIf"],["shape","info-standard","class","iconButton",3,"ngClass","title","click",4,"ngIf"],["shape","details",1,"iconButton",3,"ngClass","title","click"],["class","iconButton",3,"title","click",4,"ngFor","ngForOf"],["shape","zoom-in","class","iconButton","title","Zoom to group",3,"click",4,"ngIf"],["shape","trash","class","iconButton","title","Remove group",3,"click",4,"ngIf"],["class","tabsbody description",4,"ngIf"],["class","tabsbody layersettings",4,"ngIf"],["class","tabsbody legend",4,"ngIf"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["shape","cog",1,"iconButton",3,"ngClass","title","click"],["shape","image",1,"iconButton",3,"title","ngClass","click"],["shape","info-standard",1,"iconButton",3,"ngClass","title","click"],["shape","zoom-in","title","Zoom to group",1,"iconButton",3,"click"],["shape","trash","title","Remove group",1,"iconButton",3,"click"],[1,"tabsbody","description"],[4,"ngIf","ngIfElse"],["descriptionText",""],[3,"dynamicComponent","dynamicComponentChange"],[3,"innerHTML"],[1,"tabsbody","layersettings"],[1,"tabsbody","legend"],["imageUrl",""],["target","_blank","title","Show full Image",3,"href"],[3,"src"],["cdkDragLockAxis","y","cdkDrag","",1,"sublayers",3,"cdkDragData"],[3,"expanded","layersSvc","mapState","layer","group","sorting","update"],["cdkDragHandle","",1,"move-item"]],template:function(l,h){if(1&l&&(At(),U(0,"div",0)(1,"div",1)(2,"clr-icon",2),De("click",function(){return h.showProperties()}),H(),U(3,"div",3,4),De("click",function(){return h.showProperties()}),ze(5),H(),ce(6,f9e,2,2,"span",5),ce(7,p9e,3,6,"span",6),ce(8,m9e,4,8,"span",6),H(),ce(9,L9e,19,26,"div",7),H()),2&l){const d=as(4);V(2),Vo("title",h.group.expanded?"Close":"Open"),Ue("shape",h.group.expanded?"folder-open":"folder"),V(1),z("title",h.getLayerName(h.group)),V(3),z("ngIf",0==d.children.length),V(1),z("ngIf",h.layerGroups.length>1&&h.groupSort),V(1),z("ngIf",!h.checkBaselayer(h.group)),V(1),z("ngIf",h.group.expanded)}},dependencies:[ro,Er,bn,ga,Qr,Cte,Ete,xte,Dte,D4,Ite,A4],styles:[".title[_ngcontent-%COMP%]{cursor:pointer}.item-title-replacement[_ngcontent-%COMP%]:empty{display:none}.move-item[_ngcontent-%COMP%]{cursor:move}.cdk-drop-list-disabled[_ngcontent-%COMP%]   .move-item[_ngcontent-%COMP%]{cursor:pointer}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 10px;box-sizing:border-box;border-radius:2px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;overflow:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .sublayers[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.info[_ngcontent-%COMP%]{padding-left:.2rem}.tabsbody[_ngcontent-%COMP%]{overflow:hidden}.tabsbody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;max-width:100%}"]}),c})();function O9e(c,a){if(1&c&&(U(0,"ukis-layerentry-group",5)(1,"span",6),ve(2),H()()),2&c){const l=he().$implicit,h=he();z("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("group",l)("layerGroups",h.layergroups)("groupSort",h.layersSort)("groupLayersSort",h.groupLayersSort),V(2),pr(" ",l.displayName||l.name," ")}}function N9e(c,a){if(1&c&&(U(0,"ukis-layerentry",7)(1,"span",6),ve(2),H()()),2&c){const l=he().$implicit,h=he();z("layerGroups",h.layergroups)("expanded",!1)("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("layer",l)("group",null)("sorting",h.layersSort),V(2),pr(" ",l.displayName||l.name," ")}}const F9e=function(c){return{id:c}};function k9e(c,a){if(1&c&&(ci(0),U(1,"div",2),ce(2,O9e,3,7,"ukis-layerentry-group",3),ce(3,N9e,3,8,"ukis-layerentry",4),H(),ui()),2&c){const l=a.$implicit,h=he();V(1),z("cdkDragData",mr(3,F9e,l.id)),V(1),z("ngIf",h.isLayerGroup(l)&&l.filtertype===h.layerfilter),V(1),z("ngIf",!h.isLayerGroup(l)&&l.filtertype===h.layerfilter)}}let Qh=(()=>{class c{constructor(){this.layerfilter="Layers",this.layersSort=!0,this.groupLayersSort=!0,this.layergroups=[]}ngOnInit(){this.layerGroupsSubscription=this.layersSvc.getLayerGroups().subscribe(l=>{this.layergroups=l})}isLayerGroup(l){return l instanceof Ur}ngOnDestroy(){this.layerGroupsSubscription.unsubscribe()}drop(l){const h=this.layergroups,d=h.length,f=l.container.data;let g,y;if(d===f.length)g=d-l.previousIndex-1,y=d-l.currentIndex-1;else{const _=f[l.currentIndex],v=h.findIndex(S=>S.id===l.item.data.id);let b=h.findIndex(S=>S.id===_.id);l.previousIndex===l.currentIndex&&(b=v),g=v,y=b}this.layersSvc.arrayMove(this.layergroups,g,y),this.layersSvc.setLayerGroups(this.layergroups)}checkBaselayer(l,h){return!!("Baselayers"===l.filtertype||h&&"Baselayers"===h.filtertype)}checkClassHide(l){return!l?.cssClass?.includes("hide")}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ukis-layer-control"]],inputs:{layersSvc:"layersSvc",mapStateSvc:"mapStateSvc",layerfilter:"layerfilter",layersSort:"layersSort",groupLayersSort:"groupLayersSort"},decls:6,vars:13,consts:[["cdkDropList","",3,"cdkDropListDisabled","cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["cdkDragLockAxis","y","cdkDrag","",1,"list-item",3,"cdkDragData"],[3,"layersSvc","mapState","group","layerGroups","groupSort","groupLayersSort",4,"ngIf"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group","sorting",4,"ngIf"],[3,"layersSvc","mapState","group","layerGroups","groupSort","groupLayersSort"],["cdkDragHandle","",1,"move-item"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group","sorting"]],template:function(l,h){1&l&&(U(0,"div",0),De("cdkDropListDropped",function(f){return h.drop(f)}),ms(1,"reverse"),ms(2,"itemsfilter"),ce(3,k9e,4,5,"ng-container",1),ms(4,"reverse"),ms(5,"itemsfilter"),H()),2&l&&(z("cdkDropListDisabled",!h.layersSort)("cdkDropListData",_o(1,3,Z0(2,5,h.layergroups,h.checkClassHide))),V(3),z("ngForOf",_o(4,8,Z0(5,10,h.layergroups,h.checkClassHide))))},dependencies:[Er,bn,Cte,Ete,xte,D4,Lte,Ite,A4],styles:[".list-item[_ngcontent-%COMP%]{cursor:pointer}.move-item[_ngcontent-%COMP%]{cursor:move}.cdk-drop-list-disabled[_ngcontent-%COMP%]   .move-item[_ngcontent-%COMP%]{cursor:pointer}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;align-items:center;padding:15px 10px;box-sizing:border-box;border-radius:2px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;overflow:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),c})();function V9e(c,a){if(1&c&&xe(0,"ukis-layerentry-group",4),2&c){const l=he().$implicit,h=he();z("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("group",l)("layerGroups",h.layergroups)}}function B9e(c,a){if(1&c&&xe(0,"ukis-layerentry",5),2&c){const l=he().$implicit,h=he();z("layerGroups",h.layergroups)("expanded",!1)("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("layer",l)("group",null)}}function U9e(c,a){if(1&c&&(U(0,"div",1),ce(1,V9e,1,4,"ukis-layerentry-group",2),ce(2,B9e,1,6,"ukis-layerentry",3),H()),2&c){const l=a.$implicit,h=he();V(1),z("ngIf",h.isLayerGroup(l)),V(1),z("ngIf",!h.isLayerGroup(l))}}let jD=(()=>{class c{constructor(){this.layergroups=[]}ngOnInit(){this.layerGroupsSubscription=this.layersSvc.getLayerGroups().subscribe(l=>{this.layergroups=l.filter(h=>"Baselayers"===h.filtertype)})}isLayerGroup(l){return l instanceof Ur}ngOnDestroy(){this.layerGroupsSubscription.unsubscribe()}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ukis-base-layer-control"]],inputs:{layersSvc:"layersSvc",mapStateSvc:"mapStateSvc"},decls:2,vars:3,consts:[["class","list-item",4,"ngFor","ngForOf"],[1,"list-item"],[3,"layersSvc","mapState","group","layerGroups",4,"ngIf"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group",4,"ngIf"],[3,"layersSvc","mapState","group","layerGroups"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group"]],template:function(l,h){1&l&&(ce(0,U9e,3,2,"div",0),ms(1,"reverse")),2&l&&z("ngForOf",_o(1,1,h.layergroups))},dependencies:[Er,bn,D4,Lte,A4]}),c})();function z9e(c,a){if(1&c&&xe(0,"ukis-map-ol",12),2&c){const l=he();z("layersSvc",l.layersSvc)("mapState",l.mapStateSvc)("controls",l.controls)}}let G9e=(()=>{class c{constructor(l,h,d,f){this.layersSvc=l,this.mapStateSvc=h,this.mapSvc=d,this.wmsSvc=f,this.class="content-container",this.showMap=!0,this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.mapSvc.map.addControl(new v$),this.addBaseLayers(),this.addLayers(),this.addOverlays(),this.setExtent()}setExtent(){this.mapStateSvc.setExtent([-14,33,40,57])}parseCapabilities(){this.wmsSvc.getCapabilities("https://geoservice.dlr.de/eoc/land/wms").subscribe(l=>{const h=this.wmsSvc.getLayerFromCapabilities("AGRODE_S2_EVI_P1M",l);console.log(h)})}addBaseLayers(){const l=new qr({name:"Transparenter Hintergrund",id:"blank",type:"geojson"}),h=new qve({tileSize:512}),d=new X9,f=new ux({id:"eocLiteAndOverlay",name:"EOC Lite with Overlay",description:"merged/stacked Layers EOC Lite with Overlay",legendImg:h.legendImg,layers:[h,d],visible:!0}),m=new Da({type:"wmts",url:"https://tiles.geoservice.dlr.de/service/wmts",name:"Relief",id:"world_relief_bw",params:{layer:"eoc:world_relief_bw",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},visible:!1,description:{component:HJ,inputs:{description:"eoc:world_relief_bw as web map tile service"}},attribution:'Relief: <a src="https://www.dlr.de/eoc">DLR/EOC</>',legendImg:""});[f,new Tb({id:"OSM_Base"}),l,m,new qr({name:"Open Map Styles",id:"planet_eoc_vector_tiles",attribution:'\xa9 <a href="http://openmaptiles.org/" target="_blank">OpenMapTiles</a> \xa9 <a href="https://www.openstreetmap.org/copyright" target="_blank"> OpenStreetMap contributors</a>',description:'EOC-Geoservice TMS-Service, Vector Tiles with OpenMapTiles and customised <a href="https://openmaptiles.org/styles/#positron">positron</a> Style.',type:"tms",url:"https://{s}.tiles.geoservice.dlr.de/service/tms/1.0.0/planet_eoc@EPSG%3A900913@pbf/{z}/{x}/{y}.pbf?flipy=true",subdomains:["a","b","c","d"],options:{style:ize,styleSource:"planet_eoc"},visible:!1,action:{component:rze,inputs:{layersSvc:this.layersSvc}}})].map(v=>this.layersSvc.addLayer(v,"Baselayers"))}addLayers(){const l=new ra({type:"wms",url:"https://geoservice.dlr.de/eoc/land/wms",name:"GUF Mosaic",id:"GUF28_DLR_v1_Mosaic",params:{LAYERS:"GUF28_DLR_v1_Mosaic",STYLES:"guf_8bit"},tileSize:512,visible:!1,description:"GUF28_DLR_v1_Mosaic",attribution:' | GUF\xae: <a href="https://www.dlr.de/eoc/en/desktopdefault.aspx/tabid-9628/16557_read-40454/">DLR License</a>',legendImg:"",popup:{asyncPopup:(D,L)=>{!function Q2e(c,a,l){const h=c.layer.getSource(),d=c.mapEvent,f=a.map.getView().getResolution(),m=h.getFeatureInfoUrl(d.coordinate,f,a.EPSG,{INFO_FORMAT:"application/json"});fetch(m).then(g=>g.json()).catch(g=>{console.log(g)}).then(g=>{if(g.features.length){const y=a.createPopupHtml(g.features[0].properties);l(y)}else l("<p>No Data!</p>")})}(D,this.mapSvc,L)}}}),h=new Da({type:"wmts",url:"https://tiles.geoservice.dlr.de/service/wmts",name:"TDM90 DEM",id:"TDM90_DEM",params:{layer:"TDM90_DEM",style:"default",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"},format:"image/png"},visible:!1,description:"TDM90_DEM maxZoom: 8",attribution:' | TDM90 Data \xa9: <a href="http://www.dlr.de" target="_blank">DLR</a>  licensed for <a rel="license" target="_blank" href="https://geoservice.dlr.de/resources/licenses/tdm90/License_for_the_Utilization_of_90m_DEM_for_Scientific_Use.pdf">scientific use</a>',legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=TDM90_DEM&style=default&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A4&TileCol=8&TileRow=5",cssClass:"custom-layer"}),d=new qr({id:"geojson_test",name:"GeoJSON Vector Layer",attribution:"\xa9 DLR GeoJSON",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Polygon"},geometry:{type:"Polygon",coordinates:[[[11.53564453125,48.80686346108517],[11.42578125,48.61838518688487],[11.97509765625,48.516604348867475],[12.2607421875,48.69096039092549],[12.0849609375,48.99463598353405],[11.53564453125,48.80686346108517]]]}},{type:"Feature",properties:{title:"Rectangle"},geometry:{type:"Polygon",coordinates:[[[10.986328125,43.89789239125797],[11.755371093749998,43.89789239125797],[11.755371093749998,44.41808794374846],[10.986328125,44.41808794374846],[10.986328125,43.89789239125797]]]}},{type:"Feature",properties:{title:"Line"},geometry:{type:"LineString",coordinates:[[13.29345703125,48.268569112964336],[15.073242187499998,47.56170075451973],[14.1064453125,46.40756396630067],[15.886230468750002,44.94924926661153]]}},{type:"Feature",properties:{title:"Point"},geometry:{type:"Point",coordinates:[11.513671874999998,46.42271253466717]}}]},visible:!1,popup:{event:"move",dynamicPopup:{component:A3,getAttributes:D=>({data:D.properties})}}}),f=new qr({id:"geojson_test_3",name:"GeoJSON Point Layer",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Munich",type:"City",image:"https://en.wikipedia.org/wiki/Munich#/media/File:Stadtbild_M%C3%BCnchen.jpg",wiki:"https://en.wikipedia.org/wiki/Munich"},geometry:{type:"Point",coordinates:[11.557617187499998,48.151428143221224]}}]},visible:!1,popup:{properties:{title:"Title",type:"Type"}}}),m=new qr({id:"geojson_test_2",name:"Vector Layer in Group",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{type:"Polygon",name:"Vector Layer in Group",data:"geojson"},geometry:{type:"Polygon",coordinates:[[[-4.9658203125,41.09591205639546],[-6.459960937499999,39.52099229357195],[-5.009765625,38.42777351132902],[-1.8896484375,38.77121637244273],[-.68115234375,40.84706035607122],[-2.900390625,41.65649719441145],[-4.9658203125,41.09591205639546]]]}}]},visible:!1,popup:["type","name"],actions:[{title:"download",icon:"download-cloud",action:D=>{console.log(D)}}]}),g=new qr({id:"geojson_test_cluster",name:"Cluster - GeoJSON Vector Layer",type:"geojson",cluster:{distance:20},data:tze,visible:!0,actions:[{title:"update Layer",icon:"sync",action:D=>{D.cluster.distance=25,D.options||(D.options={}),D.options.style=L=>{const P=L.get("features").length;return new er({image:new Xp({radius:P<=1?6:10,stroke:new _s({color:"#fff"}),fill:new yr({color:P<=1?"green":"red"})})})},this.layersSvc.updateLayer(D)}}],popup:{popupFunction:D=>`<div>${JSON.stringify(D.properties)} </div>`},expanded:{tab:"settings",expanded:!1}}),y=new qr({id:"WfsLayer",name:"WFS Pennsylvania",type:"wfs",visible:!1,url:"https://ahocevar.com/geoserver/wfs?service=WFS&request=GetFeature&outputFormat=application/json&version=1.1.0&srsname=EPSG:3857&typenames=usa:states&cql_filter=STATE_NAME='Pennsylvania'",bbox:[-83.1005859375,38.37611542403604,-72.50976562499999,43.03677585761058],popup:{dynamicPopup:{component:A3,getAttributes:D=>({data:D})}}}),_=new $ve;_.cssClass="hide";const v=new X9,b=new hx;b.legendImg="https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aliteoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A4&TileCol=8&TileRow=5";const S=new Ur({id:"group_1",name:"Test Group",layers:[_,v,b],description:"This is a group with a hidden eocBasemap (layer.cssClass = hide), eocBaseoverlay and a eocLiteoverlay",expanded:{tab:"description"},actions:[{title:"download",icon:"download-cloud",action:D=>{console.log(D)}}]}),T=new hx;T.id="eoc_Liteoverlay_2";const x=new Ur({id:"group_2",name:"Test Group 2",description:{component:HJ,inputs:{description:"A LayerGroup with a hidden vectorLayer2."}},legendImg:{component:nze},cssClass:"custom-layer-group",layers:[h,m,T]}),E=new Ur({id:"group_3",name:"Test Group Vector-Data",expanded:!1,layers:[d,f,y]});[l,new Yve({popup:{popupFunction:D=>`\n            <table>\n              <tbody>\n                <tr>\n                  <td style="vertical-align: top; padding-right: 7px;"><b>Name: ${D.properties.name}</b></td>\n                  <td></td>\n                </tr>\n                <tr>\n                  <td style="vertical-align: top; padding-right: 7px;"><b>type: ${D.properties.type}</b></td>\n                  <td></td>\n                </tr>\n              </tbody>\n            </table>\n            <img src="${D.properties.legendImg}">\n            `}}),E,x,S,g].map(D=>{D instanceof so?this.layersSvc.addLayer(D,"Layers"):D instanceof Ur&&this.layersSvc.addLayerGroup(D)})}addOverlays(){const l=new q9({crossOrigin:"anonymous"}),h=new Xve({crossOrigin:"anonymous"});this.layersSvc.addLayer(l,"Overlays"),this.layersSvc.addLayer(h,"Overlays");const d=new q9({id:"merge_BlueMarble"}),f=new hx({id:"merge_Liteoverlay"}),m=new ux({id:"BlueMarbleTile_Overlay",name:"BlueMarble with Overlay",visible:!1,legendImg:d.legendImg,description:"merged/stacked Layers BlueMarble with Overlay",layers:[d,f]});this.layersSvc.addLayer(m,"Overlays")}updateLayerGroup(){const l=this.layersSvc.getLayerOrGroupById("group_1");l.expanded=!0,l.layers[1].cssClass=null,this.layersSvc.updateLayerGroup(l);const h=this.layersSvc.getLayerOrGroupById("group_2");h.layers[1].visible=!0,this.layersSvc.updateLayerGroup(h)}addLayerToGroup(){const l=this.layersSvc.getLayerOrGroupById("group_2"),h=new $9;this.layersSvc.addLayerToGroup(h,l)}removeAllLayers(){this.layersSvc.removeLayers()}toggleMap(){this.showMap=!this.showMap}}return c.\u0275fac=function(l){return new(l||c)(N(qs),N(oo),N(Ss),N(dQ))},c.\u0275cmp=He({type:c,selectors:[["app-route-map"]],hostVars:2,hostBindings:function(l,h){2&l&&na(h.class)},features:[Lt([qs,oo,Ss])],decls:34,vars:14,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls",4,"ngIf"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","world","title","Overlays","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc","layerfilter"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""],["shape","cog","title","Actions","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"],["id","olMap",3,"layersSvc","mapState","controls"]],template:function(l,h){1&l&&(U(0,"main",0),ce(1,z9e,1,3,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ve(5," Overlays "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",7),ve(10," Layers "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-layer-control",8),H()(),U(13,"clr-vertical-nav-group",3),xe(14,"clr-icon",9),ve(15," Baselayers "),U(16,"clr-vertical-nav-group-children",5),xe(17,"ukis-base-layer-control",8),H()(),U(18,"clr-vertical-nav-group",3),xe(19,"clr-icon",10),ve(20," Actions "),U(21,"clr-vertical-nav-group-children",5)(22,"button",11),De("click",function(){return h.updateLayerGroup()}),ve(23,"update LayerGroup"),H(),U(24,"button",11),De("click",function(){return h.addLayerToGroup()}),ve(25,"add Layer to LayerGroup"),H(),U(26,"button",11),De("click",function(){return h.removeAllLayers()}),ve(27,"remove All Layers"),H(),U(28,"button",11),De("click",function(){return h.setExtent()}),ve(29,"set Extent"),H(),U(30,"button",11),De("click",function(){return h.parseCapabilities()}),ve(31,"Parse WMS capabilities"),H(),U(32,"button",11),De("click",function(){return h.toggleMap()}),ve(33,"toggle Map"),H()()()()),2&l&&(V(1),z("ngIf",h.showMap),V(1),z("clrVerticalNavCollapsible",!0)("clr-nav-level",2),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc)("layerfilter","Overlays"),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),V(1),z("clrVerticalNavGroupExpanded",!0))},dependencies:[bn,ga,Uc,Ou,Nu,Fu,ku,Nh,Qh,jD],styles:["[_nghost-%COMP%]     .custom-layer-group .head>.title{color:#660f00}[_nghost-%COMP%]     .custom-layer .head>.title{color:#b87d00}[_nghost-%COMP%]     .zoom-number{bottom:2.5em;left:8px}"]}),c})(),H9e=(()=>{class c{constructor(){this.inputStep=.01,this.precision=2}ngOnInit(){this.subscription=this.mapState.getMapState().subscribe(l=>{this.mapstate=l})}ngOnDestroy(){this.subscription.unsubscribe()}zoomIn(){this.mapstate.zoom++,this.setNewState(this.mapstate)}zoomOut(){this.mapstate.zoom--,this.setNewState(this.mapstate)}setNewState(l){l.options.notifier="user",this.mapState.setMapState(l)}stateChange(l){this.setNewState(this.mapstate)}setInputStep(l){const h=Array.from(Array(l),(d,f)=>"0").join("");this.inputStep=1/Number(`1${h}`)}toPrecision(l,h){return l.toFixed(h)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ukis-map-navigator"]],inputs:{mapState:"mapState"},decls:22,vars:7,consts:[[1,"clr-row"],[1,"clr-col-9"],[1,"output-container"],["clrForm",""],["clrInput","","type","number","name","lon",3,"ngModel","step","ngModelChange"],["clrInput","","type","number","name","lat",3,"ngModel","step","ngModelChange"],["clrInput","","type","number","name","zoom",3,"ngModel","step","ngModelChange"],[1,"clr-col-3"],[1,"input-container"],["type","number","min","0","max","8","step","1","name","precision","clrInput","",3,"ngModel","ngModelChange"]],template:function(l,h){1&l&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"clr-input-container")(5,"label"),ve(6,"Lon"),H(),U(7,"input",4),De("ngModelChange",function(f){return h.mapstate.center.lon=f})("ngModelChange",function(f){return h.stateChange(f)}),H()(),U(8,"clr-input-container")(9,"label"),ve(10,"Lat"),H(),U(11,"input",5),De("ngModelChange",function(f){return h.mapstate.center.lat=f})("ngModelChange",function(f){return h.stateChange(f)}),H()(),U(12,"clr-input-container")(13,"label"),ve(14,"Zoom"),H(),U(15,"input",6),De("ngModelChange",function(f){return h.mapstate.zoom=f})("ngModelChange",function(f){return h.stateChange(f)}),H()()()()(),U(16,"div",7)(17,"div",8)(18,"clr-input-container")(19,"label"),ve(20,"Precision "),H(),U(21,"input",9),De("ngModelChange",function(f){return h.precision=f})("ngModelChange",function(f){return h.setInputStep(f)}),H()()()()()),2&l&&(V(7),z("ngModel",h.mapstate.center.lon)("step",h.inputStep),V(4),z("ngModel",h.mapstate.center.lat)("step",h.inputStep),V(4),z("ngModel",h.mapstate.zoom)("step",h.inputStep),V(6),z("ngModel",h.precision))},dependencies:[AM,ql,t1,Na,SM,NM,OM,gl,e1,Qr,Vk,ZM,M1],styles:[".output-container[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]:first-child{margin-top:0rem}.output-container[_ngcontent-%COMP%]   .clr-input[_ngcontent-%COMP%]{width:90%}"]}),c})();function j9e(c,a){if(1&c&&(U(0,"option",9),ve(1),H()),2&c){const l=a.$implicit;z("value",l.value),V(1),Kt(l.title)}}let Pte=(()=>{class c{constructor(l){this.mapSvc=l,this.mapCoordinates=[0,0],this.zoom=0,this.precision=2,this.x="Lon",this.y="Lat",this.mapMoveSubscription=h=>{h.coordinate&&(this.mapCoordinates=rl(h.coordinate,this.mapProjection,dn(this.selectedProjection)))},this.mapOnMoveend=h=>{const d=h.map.getView().getZoom();this.zoom!==d&&(this.zoom=d)},this.mapSub=this.mapSvc.projectionChange.subscribe(h=>{this.mapProjection=h,this.setProjection(h)})}ngOnInit(){this.mapSvc.map.on("pointermove",this.mapMoveSubscription),this.mapSvc.map.on("moveend",this.mapOnMoveend)}setProjection(l){const h=l.getCode();this.projections="EPSG:4326"===h?[{title:h,value:h}]:[{title:"EPSG:4326",value:"EPSG:4326"},{title:h,value:h}],this.selectedProjection=this.projections[0].value}ngOnDestroy(){this.mapSvc.map.un("pointermove",this.mapMoveSubscription),this.mapSvc.map.un("moveend",this.mapOnMoveend),this.mapSub.unsubscribe()}onChangeProj(l){const h=l.target.value;"EPSG:4326"===h?(this.x="Lon",this.y="Lat"):(this.x="X",this.y="Y");const d=this.selectedProjection;this.selectedProjection=h,this.mapCoordinates=rl(this.mapCoordinates,dn(d),dn(this.selectedProjection))}toPrecision(l,h){return l.toFixed(h)}}return c.\u0275fac=function(l){return new(l||c)(N(Ss))},c.\u0275cmp=He({type:c,selectors:[["ukis-mouse-position"]],decls:27,vars:7,consts:[[1,"mouse-position-control"],[1,"clr-row"],[1,"clr-col-7"],[1,"output-container"],[1,"clr-col-5"],[1,"input-container"],["clrSelect","",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","number","min","0","max","12","name","precision","clrInput","",3,"ngModel","ngModelChange"],[3,"value"]],template:function(l,h){1&l&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"b"),ve(6),H(),ve(7),H(),U(8,"div")(9,"b"),ve(10),H(),ve(11),H(),U(12,"div")(13,"b"),ve(14,"Zoom"),H(),ve(15),H()()(),U(16,"div",4)(17,"div",5)(18,"clr-select-container")(19,"label"),ve(20,"Projection "),H(),U(21,"select",6),De("change",function(f){return h.onChangeProj(f)}),ce(22,j9e,2,2,"option",7),H()(),U(23,"clr-input-container")(24,"label"),ve(25,"Precision "),H(),U(26,"input",8),De("ngModelChange",function(f){return h.precision=f}),H()()()()()()),2&l&&(V(6),Kt(h.x),V(1),pr(" ",h.toPrecision(h.mapCoordinates[0],h.precision),""),V(3),Kt(h.y),V(1),pr(" ",h.toPrecision(h.mapCoordinates[1],h.precision),""),V(4),pr(" ",h.toPrecision(h.zoom,h.precision),""),V(7),z("ngForOf",h.projections),V(4),z("ngModel",h.precision))},dependencies:[Er,LM,PM,ql,t1,Na,NM,OM,gl,Qr,ZM,M1,kK,FK],styles:[".mouse-position-control[_ngcontent-%COMP%]{margin-left:.2rem;padding-bottom:.4rem}.mouse-position-control[_ngcontent-%COMP%]   .output-container[_ngcontent-%COMP%]{line-height:1.6rem}.mouse-position-control[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]:first-child{margin-top:0rem}"]}),c})();const W9e=function(c){return{"is-solid":c}};function X9e(c,a){if(1&c){const l=$t();U(0,"div",2),De("click",function(){const f=yt(l).$implicit;return _t(he(2).setNewProjection(f))}),U(1,"div",3)(2,"div",4)(3,"span",5),De("click",function(){const f=yt(l).$implicit;return _t(he(2).setNewProjection(f))}),ve(4),H(),xe(5,"clr-icon",6),H()()()}if(2&c){const l=a.$implicit,h=he(2);V(3),z("title",l.title),V(1),pr(" ",l.title||l.code," "),V(1),Vo("title",l.code),z("ngClass",mr(5,W9e,l===h.selectedProj)),Ue("shape",l===h.selectedProj?"eye":"eye-hide")}}function q9e(c,a){if(1&c&&(U(0,"div"),ce(1,X9e,6,7,"div",1),H()),2&c){const l=he();V(1),z("ngForOf",l.projList)}}let $9e=(()=>{class c{constructor(){}ngOnInit(){this.projList[0]&&this.setNewProjection(this.projList[0])}setNewProjection(l){this.mapSvc.registerProjection(l);const h=this.mapSvc.getOlProjection(l);this.mapSvc.setProjection(h),this.selectedProj=l}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ukis-projection-switch"]],inputs:{mapSvc:"mapSvc",projList:["projectionList","projList"]},decls:1,vars:1,consts:[[4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"layergroup"],[1,"head"],[1,"title",3,"title","click"],[1,"iconButton",3,"ngClass","title"]],template:function(l,h){1&l&&ce(0,q9e,2,1,"div",0),2&l&&z("ngIf",h.projList)},dependencies:[ro,Er,bn,ga],encapsulation:2}),c})(),Y9e=(()=>{class c{constructor(l,h,d){this.layersSvc=l,this.mapStateSvc=h,this.mapSvc=d,this.class="content-container",this.controls={attribution:!0,scaleLine:!0},this.projections=[{code:"EPSG:3857",proj4js:"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",title:"Spherical Mercator",extent:[-20026376.39,-20048966.1,20026376.39,20048966.1],worldExtent:[-180,-85.06,180,85.06],global:!0,units:"m"},{code:"EPSG:3995",proj4js:"+proj=stere +lat_0=90 +lat_ts=71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs",title:"Arctic Polar Stereographic",extent:[-20048966.1,-20048966.1,20048966.1,20048966.1],worldExtent:[-180,60,180,90],global:!1,units:"m"},{code:"EPSG:3031",proj4js:"+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs",title:"Antarctic Polar Stereographic",extent:[-20048966.1,-20048966.1,20048966.1,20048966.1],worldExtent:[-180,-90,180,-60],global:!1,units:"m"}],this.addOverlays(),this.mapStateSvc.setExtent([-14,33,40,57])}ngOnInit(){}addOverlays(){[new Tb({removable:!0,legendImg:null,visible:!0,id:"osm"}),new ra({type:"wms",url:"https://geoservice.dlr.de/eoc/land/wms",name:"GUF Mosaic",id:"GUF28_DLR_v1_Mosaic",params:{layers:"GUF28_DLR_v1_Mosaic",styles:"guf_8bit"},visible:!1,description:"GUF28_DLR_v1_Mosaic",attribution:' | GUF\xae: <a href="https://www.dlr.de/eoc/en/desktopdefault.aspx/tabid-9628/16557_read-40454/">DLR License</a>',legendImg:""}),new qr({id:"geojson_test",name:"GeoJSON Vector Layer",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[12.65625,49.61070993807422],[20.698242187499996,46.830133640447386],[22.5,49.781264058178344],[15.161132812500002,51.508742458803326],[12.65625,49.61070993807422]]]}}]},visible:!0})].map(m=>this.layersSvc.addLayer(m,"Layers"))}}return c.\u0275fac=function(l){return new(l||c)(N(qs),N(oo),N(Ss))},c.\u0275cmp=He({type:c,selectors:[["app-route-map2"]],hostVars:2,hostBindings:function(l,h){2&l&&na(h.class)},features:[Lt([qs,oo,Ss])],decls:23,vars:14,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["title","Projection",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","map","clrVerticalNavIcon",""],[3,"mapSvc","projectionList"],["title","Coordinates",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","compass","clrVerticalNavIcon",""],["title","Navigator",1,"layers",3,"clrVerticalNavGroupExpanded"],[3,"mapState"]],template:function(l,h){1&l&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ve(5," Layers "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",7),xe(9,"clr-icon",8),ve(10," Projection "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-projection-switch",9),H()(),U(13,"clr-vertical-nav-group",10),xe(14,"clr-icon",11),ve(15," Coordinates "),U(16,"clr-vertical-nav-group-children",5),xe(17,"ukis-mouse-position"),H()(),U(18,"clr-vertical-nav-group",12),xe(19,"clr-icon",11),ve(20," Navigator "),U(21,"clr-vertical-nav-group-children",5),xe(22,"ukis-map-navigator",13),H()()()),2&l&&(V(1),z("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),V(1),z("clrVerticalNavCollapsible",!0)("clr-nav-level",2),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("mapSvc",h.mapSvc)("projectionList",h.projections),V(1),z("clrVerticalNavGroupExpanded",!0),V(5),z("clrVerticalNavGroupExpanded",!0),V(4),z("mapState",h.mapStateSvc))},dependencies:[ga,Uc,Ou,Nu,Fu,ku,Nh,Qh,H9e,Pte,$9e]}),c})();const K9e=class Z9e extends Pj{constructor(a){super(a),this.vectorRenderer_=new iS(a),this.layerImageRatio_=a.getImageRatio(),this.coordinateToVectorPixelTransform_=[1,0,0,1,0,0],this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(a){if(!this.vectorRenderer_)return Promise.resolve([]);const l=Or(this.coordinateToVectorPixelTransform_,Or(this.renderedPixelToCoordinateTransform_,a.slice()));return this.vectorRenderer_.getFeatures(l)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(a){const l=a.pixelRatio,h=a.viewState,d=h.resolution,f=a.viewHints,m=this.vectorRenderer_;let g=a.extent;1!==this.layerImageRatio_&&(g=g.slice(0),IP(g,this.layerImageRatio_));const y=Kn(g)/d,_=gr(g)/d;if(!f[0]&&!f[1]&&!Ry(g)){m.useContainer(null,null);const v=m.context,b=a.layerStatesArray[a.layerIndex];v.globalAlpha=b.opacity;const S=Object.assign({},b,{opacity:1}),T=Object.assign({},a,{declutterTree:new bO(9),extent:g,size:[y,_],viewState:Object.assign({},a.viewState,{rotation:0}),layerStatesArray:[S],layerIndex:0});let x=!0;const E=new WN(g,d,l,v.canvas,function(I){m.prepareFrame(T)&&m.replayGroupChanged&&(m.clipping=!1,m.renderFrame(T,null)&&(m.renderDeclutter(T),x=!1),I())});E.addEventListener("change",()=>{if(2!==E.getState())return;this.image_=x?null:E;const I=E.getResolution(),M=E.getPixelRatio(),D=I*l/M;this.renderedResolution=D,this.coordinateToVectorPixelTransform_=sa(this.coordinateToVectorPixelTransform_,y/2,_/2,1/D,-1/D,0,-h.center[0],-h.center[1])}),E.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=a.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(a,l,h,d,f){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(a,l,h,d,f):super.forEachFeatureAtCoordinate(a,l,h,d,f)}},cT=class J9e extends zy{constructor(a){a=a||{};const l=Object.assign({},a);delete l.imageRatio,super(l),this.imageRatio_=void 0!==a.imageRatio?a.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new K9e(this)}},Ote=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"title":"Polygon 1"},"geometry":{"type":"Polygon","coordinates":[[[-178.59375,15.961329081596647],[-166.640625,15.961329081596647],[-166.640625,27.994401411046148],[-178.59375,27.994401411046148],[-178.59375,15.961329081596647]]]}},{"type":"Feature","properties":{"title":"Polygon 2"},"geometry":{"type":"Polygon","coordinates":[[[-179.296875,-1.4061088354351594],[-168.75,-1.4061088354351594],[-168.75,10.487811882056695],[-179.296875,10.487811882056695],[-179.296875,-1.4061088354351594]]]}},{"type":"Feature","properties":{"title":"Polygon 3"},"geometry":{"type":"Polygon","coordinates":[[[-158.203125,5.61598581915534],[-146.25,5.61598581915534],[-146.25,22.59372606392931],[-158.203125,22.59372606392931],[-158.203125,5.61598581915534]]]}},{"type":"Feature","properties":{"title":"Polygon 4"},"geometry":{"type":"Polygon","coordinates":[[[-162.0703125,-13.2399454992863],[-150.82031249999997,-13.2399454992863],[-150.82031249999997,-1.0546279422758742],[-162.0703125,-1.0546279422758742],[-162.0703125,-13.2399454992863]]]}},{"type":"Feature","properties":{"title":"Polygon 5"},"geometry":{"type":"Polygon","coordinates":[[[-142.3828125,-20.632784250388013],[-131.1328125,-20.632784250388013],[-131.1328125,-2.108898659243126],[-142.3828125,-2.108898659243126],[-142.3828125,-20.632784250388013]]]}},{"type":"Feature","properties":{"title":"Polygon 6"},"geometry":{"type":"Polygon","coordinates":[[[-106.171875,44.08758502824516],[-100.8984375,39.90973623453719],[-95.625,42.8115217450979],[-101.25,46.800059446787316],[-106.171875,44.08758502824516]]]}}]}');function WD(c,a){return Or(c.inversePixelTransform,a.slice(0))}let I4=(()=>{class c{constructor(){this.alertSource=new Qe,this.alert$=this.alertSource.asObservable()}alert(l){this.alertSource.next(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),R4=(()=>{class c{constructor(){this.progressSource=new Qe,this.progress$=this.progressSource.asObservable()}progress(l){this.progressSource.next(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),t7e=(()=>{class c{constructor(l,h,d,f,m,g){this.layersSvc=l,this.mapStateSvc=h,this.mapSvc=d,this.alertSvc=f,this.progressService=m,this.route=g,this.class="content-container floating",this.subs=[],this.startBbox=null,this.updateLayerOnZoom=y=>{const _=this.mapStateSvc.getMapState().getValue(),S="gridLayer",E=((c,a,l,h,d)=>{const f=[];let m=80;l>1&&(m=40),l>2&&(m=20),l>3&&(m=10),l>4&&(m=6),l>5&&(m=4),l>6&&(m=3),l>7&&(m=2),l>8&&(m=1);const g=.5*m;let y=10;y>10&&(y=10),d=tl(d,g);const _=c[0]+y,v=c[1]+y,x=c[3]-y-v,E=Math.floor((c[2]-y-_)/g),I=Math.floor(x/g);let M=_;for(let D=E;D>0;D--){let L=v;for(let P=I;P>0;P--){const F=M+g,B=L+g,G=[M,L],j=[[G,[M,B],[F,B],[F,L],G]];if(console.log(),Ab(d,M,L)&&Ab(d,F,B)){const ae=new Th(j).transform("EPSG:4326",h),ue=new Ky({geometry:ae,column:D,row:P,id:f.length+1});f.push(ue)}L+=g}M+=g}return f})([-180,-90,180,90],0,_.zoom,this.mapSvc.EPSG,_.extent),I=new _r({features:E,wrapX:!1}),M=new cT({source:I});M.set("id",S);const D=this.layersSvc.getLayerById(S);if(D)D.custom_layer=M,this.layersSvc.updateLayer(D,D.filtertype);else{const L=new Ji({id:S,name:"gridLayer",type:"custom",opacity:.3,custom_layer:M});this.layersSvc.addLayer(L,"Layers")}},this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.addLayers(),this.subscribeToLayers(),this.subscribeToMapState(),this.subscribeToRoute(),this.startBbox&&this.mapStateSvc.setExtent(this.startBbox)}ngAfterViewInit(){this.mapSvc.map.on("moveend",this.updateLayerOnZoom)}ngOnDestroy(){this.subs.map(l=>l.unsubscribe()),this.mapSvc.map.un("moveend",this.updateLayerOnZoom)}addLayers(){const l=new Tb({visible:!1}),h=new bP({visible:!0,tileSize:512}),d=new jN({url:"https://ahocevar.com/geoserver/wms",params:{LAYERS:"topp:states"},serverType:"geoserver"});d.on("imageloadstart",()=>{this.progressService.progress({indeterminate:!0})}),d.on("imageloadend",()=>{this.progressService.progress(null)}),d.on("imageloaderror",()=>{this.progressService.progress(null)});const f=new Ji({id:"event_layer",name:"Image load Layer",type:"custom",custom_layer:new qd({source:d}),visible:!1,bbox:[-133.9453125,18.979025953255267,-60.46875,52.908902047770255]}),m=new qr({id:"updatable_feature_layer",name:"Updatable feature layer",type:"geojson",visible:!1,data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[-192.48046875,-24.686952411999144],[-88.06640625,-24.686952411999144],[-88.06640625,50.28933925329178],[-192.48046875,50.28933925329178],[-192.48046875,-24.686952411999144]]]}}]},actions:[{action:y=>{m.data=Ote,this.layersSvc.updateLayer(m)},icon:"download",title:"Load data"}]});[h,l,f,m].forEach(y=>this.layersSvc.addLayer(y,"Layers"))}removeLayer(){this.layersSvc.removeLayerOrGroupById("event_layer2")}addLayer(){const l=new Qe,h=new Qe,d=new gu({source:new bS({url:"https://geoservice.dlr.de/eoc/land/wms",params:{LAYERS:"GUF28_DLR_v1_Mosaic"}})}),f=y=>{var _=y.context,v=this.mapSvc.map.getSize(),b=.5*v[0],S=WD(y,[b,0]),T=WD(y,[v[0],0]),x=WD(y,[b,v[1]]),E=WD(y,v);_.save(),_.beginPath(),_.moveTo(S[0],S[1]),_.lineTo(x[0],x[1]),_.lineTo(E[0],E[1]),_.lineTo(T[0],T[1]),_.closePath(),_.clip()};d.on("prerender",y=>{f(y)}),d.on("postrender",y=>{(y=>{y.context.restore()})(y)});const g=new Ji({id:"event_layer2",name:"Image load Layer 2",type:"custom",custom_layer:new Dr({layers:[d]}),visible:!0,removable:!0,events:{source:[{event:"tileloadstart",listener:y=>{l.next(y)}},{event:"tileloadend",listener:y=>{h.next(y)}}],layer:[{event:"prerender",listener:y=>{f(y)}},{event:"postrender",listener:y=>{f(y)}}]}});l.subscribe(y=>this.progressService.progress({indeterminate:!0})),h.pipe(I_(200)).subscribe(y=>this.progressService.progress(null)),this.layersSvc.addLayer(g,"Layers")}getSearchParamsHashRouting(l=window.location.href){-1===l.indexOf("http")&&(l=new URL(l,`${window.location.origin}${window.location.pathname}`).toString());const h=new URL(window.location.href,window.location.origin),[d,f]=h.hash.split("?");let m=new URLSearchParams;return f&&(m=new URLSearchParams(f)),{query:m,urlHashRouting:h,hash:d}}updateSearchParamsHashRouting(l){const{query:h,urlHashRouting:d,hash:f}=this.getSearchParamsHashRouting();Object.keys(l).map(y=>{h.set(y,l[y])});const m=decodeURIComponent(`${h}`);return`${d.protocol}//${d.host}${d.pathname||"/"}${f||"#/"}?${m}`}subscribeToMapState(){const l=this.mapStateSvc.getMapState().subscribe(h=>{if(history.pushState){const d=h.extent.map(m=>m.toFixed(3)),f=this.updateSearchParamsHashRouting({bbox:d.join(","),zoom:h.zoom.toString()});window.history.pushState({path:f},"",f)}});this.subs.push(l)}subscribeToRoute(){const l=this.route.queryParams.pipe(Qa()).subscribe(h=>{if(Object.keys(h).length>0&&h.bbox){const d=h.bbox.split(",").map(f=>parseFloat(f));4===d.length&&(this.startBbox=d)}});this.subs.push(l)}subscribeToLayers(){if(this.layersSvc){const l=this.layersSvc.getLayers().subscribe(h=>{h.filter(f=>!0===f.visible).forEach(f=>{"updatable_feature_layer"===f.id&&f.data.features.length<=1&&this.alertSvc.alert({type:"info",text:"Click the layer setting down arrow icon to load new features.",closeable:!0})})});this.subs.push(l)}}}return c.\u0275fac=function(l){return new(l||c)(N(qs),N(oo),N(Ss),N(I4),N(R4),N(Od))},c.\u0275cmp=He({type:c,selectors:[["app-route-map3"]],hostVars:2,hostBindings:function(l,h){2&l&&na(h.class)},features:[Lt([qs,oo,Ss])],decls:21,vars:10,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["title","Coordinates",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","compass","clrVerticalNavIcon",""],["title","Test",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","cog","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(l,h){1&l&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ve(5," Layers "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",7),xe(9,"clr-icon",8),ve(10," Coordinates "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-mouse-position"),H()(),U(13,"clr-vertical-nav-group",9),xe(14,"clr-icon",10),ve(15," Test "),U(16,"clr-vertical-nav-group-children",5)(17,"button",11),De("click",function(){return h.removeLayer()}),ve(18,"remove Layer"),H(),U(19,"button",11),De("click",function(){return h.addLayer()}),ve(20,"add Layer"),H()()()()),2&l&&(V(1),z("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),V(1),z("clrVerticalNavCollapsible",!0)("clr-nav-level",2),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),V(1),z("clrVerticalNavGroupExpanded",!1),V(5),z("clrVerticalNavGroupExpanded",!0))},dependencies:[ga,Uc,Ou,Nu,Fu,ku,Nh,Qh,Pte]}),c})();const XD=34962,Fte=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function P4(c,a){a=Object.assign({preserveDrawingBuffer:!0,antialias:!c0e},a);const l=Fte.length;for(let h=0;h<l;++h)try{const d=c.getContext(Fte[h],a);if(d)return d}catch{}return null}function N4(c){switch(c){case XD:return Float32Array;case 34963:return Uint32Array;default:return Float32Array}}const F4=class l7e{constructor(a,l){this.array=null,this.type=a,En(a===XD||34963===a,62),this.usage=void 0!==l?l:35044}ofSize(a){this.array=new(N4(this.type))(a)}fromArray(a){this.array=N4(this.type).from(a)}fromArrayBuffer(a){this.array=new(N4(this.type))(a)}getType(){return this.type}getArray(){return this.array}getUsage(){return this.usage}getSize(){return this.array?this.array.length:0}},kte=class h7e{constructor(a){this.gl_=a.webGlContext;const l=this.gl_;this.scaleRatio_=a.scaleRatio||1,this.renderTargetTexture_=l.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=l.createFramebuffer();const h=l.createShader(l.VERTEX_SHADER);l.shaderSource(h,a.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),l.compileShader(h);const d=l.createShader(l.FRAGMENT_SHADER);l.shaderSource(d,a.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),l.compileShader(d),this.renderTargetProgram_=l.createProgram(),l.attachShader(this.renderTargetProgram_,h),l.attachShader(this.renderTargetProgram_,d),l.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),l.bufferData(l.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),l.STATIC_DRAW),this.renderTargetAttribLocation_=l.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=l.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=l.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=l.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],a.uniforms&&Object.keys(a.uniforms).forEach(m=>{this.uniforms_.push({value:a.uniforms[m],location:l.getUniformLocation(this.renderTargetProgram_,m)})})}getGL(){return this.gl_}init(a){const l=this.getGL(),h=[l.drawingBufferWidth*this.scaleRatio_,l.drawingBufferHeight*this.scaleRatio_];if(l.bindFramebuffer(l.FRAMEBUFFER,this.getFrameBuffer()),l.viewport(0,0,h[0],h[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==h[0]||this.renderTargetTextureSize_[1]!==h[1]){this.renderTargetTextureSize_=h;const d=0,f=l.RGBA,m=0,g=l.RGBA,y=l.UNSIGNED_BYTE,_=null;l.bindTexture(l.TEXTURE_2D,this.renderTargetTexture_),l.texImage2D(l.TEXTURE_2D,d,f,h[0],h[1],m,g,y,_),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,this.renderTargetTexture_,0)}}apply(a,l,h,d){const f=this.getGL(),m=a.size;if(f.bindFramebuffer(f.FRAMEBUFFER,l?l.getFrameBuffer():null),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,this.renderTargetTexture_),!l){const y=an(f.canvas);if(!a.renderTargets[y]){const _=f.getContextAttributes();_&&_.preserveDrawingBuffer&&(f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT)),a.renderTargets[y]=!0}}f.enable(f.BLEND),f.blendFunc(f.ONE,f.ONE_MINUS_SRC_ALPHA),f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),f.bindBuffer(f.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),f.useProgram(this.renderTargetProgram_),f.enableVertexAttribArray(this.renderTargetAttribLocation_),f.vertexAttribPointer(this.renderTargetAttribLocation_,2,f.FLOAT,!1,0,0),f.uniform2f(this.renderTargetUniformLocation_,m[0],m[1]),f.uniform1i(this.renderTargetTextureLocation_,0),f.uniform1f(this.renderTargetOpacityLocation_,a.layerStatesArray[a.layerIndex].opacity),this.applyUniforms(a),h&&h(f,a),f.drawArrays(f.TRIANGLES,0,6),d&&d(f,a)}getFrameBuffer(){return this.frameBuffer_}applyUniforms(a){const l=this.getGL();let h,d=1;this.uniforms_.forEach(function(f){if(h="function"==typeof f.value?f.value(a):f.value,h instanceof HTMLCanvasElement||h instanceof ImageData)f.texture||(f.texture=l.createTexture()),l.activeTexture(l[`TEXTURE${d}`]),l.bindTexture(l.TEXTURE_2D,f.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),h instanceof ImageData?l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,h.width,h.height,0,l.UNSIGNED_BYTE,new Uint8Array(h.data)):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,h),l.uniform1i(f.location,d++);else if(Array.isArray(h))switch(h.length){case 2:return void l.uniform2f(f.location,h[0],h[1]);case 3:return void l.uniform3f(f.location,h[0],h[1],h[2]);case 4:return void l.uniform4f(f.location,h[0],h[1],h[2],h[3]);default:return}else"number"==typeof h&&l.uniform1f(f.location,h)})}};function k4(c,a){return c[0]=a[0],c[1]=a[1],c[4]=a[2],c[5]=a[3],c[12]=a[4],c[13]=a[5],c}const Wc={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},YD={};function Vte(c){return"shared/"+c}let Bte=0;function Ute(c){switch(c){case Wc.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Wc.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Wc.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;default:return Float32Array.BYTES_PER_ELEMENT}}const _7e=class g7e extends wb{constructor(a){super(),a=a||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=a.canvasCacheKey?Vte(a.canvasCacheKey):function f7e(){const c="unique/"+Bte;return Bte+=1,c}(),this.canvas_=function p7e(c){let a=YD[c];if(!a){const l=document.createElement("canvas");l.style.position="absolute",l.style.left="0",a={users:0,canvas:l},YD[c]=a}return a.users+=1,a.canvas}(this.canvasCacheKey_),this.gl_=P4(this.canvas_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.canvas_.addEventListener("webglcontextlost",this.boundHandleWebGLContextLost_),this.canvas_.addEventListener("webglcontextrestored",this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=[1,0,0,1,0,0],this.offsetScaleMatrix_=[1,0,0,1,0,0],this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.uniformLocations_={},this.attribLocations_={},this.uniforms_=[],a.uniforms&&this.setUniforms(a.uniforms);const l=this.getGL();this.postProcessPasses_=a.postProcesses?a.postProcesses.map(function(h){return new kte({webGlContext:l,scaleRatio:h.scaleRatio,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,uniforms:h.uniforms})}):[new kte({webGlContext:l})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(a){this.uniforms_=[];for(const l in a)this.uniforms_.push({name:l,value:a[l]});this.uniformLocations_={}}canvasCacheKeyMatches(a){return this.canvasCacheKey_===Vte(a)}getExtension(a){if(a in this.extensionCache_)return this.extensionCache_[a];const l=this.gl_.getExtension(a);return this.extensionCache_[a]=l,l}bindBuffer(a){const l=this.getGL(),h=an(a);let d=this.bufferCache_[h];d||(d={buffer:a,webGlBuffer:l.createBuffer()},this.bufferCache_[h]=d),l.bindBuffer(a.getType(),d.webGlBuffer)}flushBufferData(a){const l=this.getGL();this.bindBuffer(a),l.bufferData(a.getType(),a.getArray(),a.getUsage())}deleteBuffer(a){const l=this.getGL(),h=an(a),d=this.bufferCache_[h];d&&!l.isContextLost()&&l.deleteBuffer(d.webGlBuffer),delete this.bufferCache_[h]}disposeInternal(){this.canvas_.removeEventListener("webglcontextlost",this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener("webglcontextrestored",this.boundHandleWebGLContextRestored_),function m7e(c){const a=YD[c];if(!a||(a.users-=1,a.users>0))return;const d=P4(a.canvas).getExtension("WEBGL_lose_context");d&&d.loseContext(),delete YD[c]}(this.canvasCacheKey_),delete this.gl_,delete this.canvas_}prepareDraw(a,l){const h=this.getGL(),d=this.getCanvas(),f=a.size,m=a.pixelRatio;d.width=f[0]*m,d.height=f[1]*m,d.style.width=f[0]+"px",d.style.height=f[1]+"px";for(let g=this.postProcessPasses_.length-1;g>=0;g--)this.postProcessPasses_[g].init(a);h.bindTexture(h.TEXTURE_2D,null),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),h.enable(h.BLEND),h.blendFunc(h.ONE,l?h.ZERO:h.ONE_MINUS_SRC_ALPHA)}prepareDrawToRenderTarget(a,l,h){const d=this.getGL(),f=l.getSize();d.bindFramebuffer(d.FRAMEBUFFER,l.getFramebuffer()),d.viewport(0,0,f[0],f[1]),d.bindTexture(d.TEXTURE_2D,l.getTexture()),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),d.enable(d.BLEND),d.blendFunc(d.ONE,h?d.ZERO:d.ONE_MINUS_SRC_ALPHA)}drawElements(a,l){const h=this.getGL();this.getExtension("OES_element_index_uint"),h.drawElements(h.TRIANGLES,l-a,h.UNSIGNED_INT,4*a)}finalizeDraw(a,l,h){for(let d=0,f=this.postProcessPasses_.length;d<f;d++)d===f-1?this.postProcessPasses_[d].apply(a,null,l,h):this.postProcessPasses_[d].apply(a,this.postProcessPasses_[d+1])}getCanvas(){return this.canvas_}getGL(){return this.gl_}applyFrameState(a){const l=a.size,h=a.viewState.rotation,d=a.pixelRatio,f=Mb(this.offsetScaleMatrix_);gx(f,2/l[0],2/l[1]);const m=Mb(this.offsetRotateMatrix_);0!==h&&function p0e(c,a){const l=Math.cos(a),h=Math.sin(a);Lp(c,Db(TP,l,h,-h,l,0,0))}(m,-h),this.setUniformMatrixValue("u_offsetScaleMatrix",k4(this.tmpMat4_,f)),this.setUniformMatrixValue("u_offsetRotateMatrix",k4(this.tmpMat4_,m)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",a.viewState.zoom),this.setUniformFloatValue("u_resolution",a.viewState.resolution),this.setUniformFloatValue("u_pixelRatio",d),this.setUniformFloatVec2("u_sizePx",[l[0],l[1]])}applyUniforms(a){const l=this.getGL();let h,d=0;this.uniforms_.forEach(f=>{if(h="function"==typeof f.value?f.value(a):f.value,h instanceof HTMLCanvasElement||h instanceof HTMLImageElement||h instanceof ImageData)f.texture||(f.prevValue=void 0,f.texture=l.createTexture()),l.activeTexture(l[`TEXTURE${d}`]),l.bindTexture(l.TEXTURE_2D,f.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),(!(h instanceof HTMLImageElement)||h.complete)&&f.prevValue!==h&&(f.prevValue=h,l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,h)),l.uniform1i(this.getUniformLocation(f.name),d++);else if(Array.isArray(h)&&6===h.length)this.setUniformMatrixValue(f.name,k4(this.tmpMat4_,h));else if(Array.isArray(h)&&h.length<=4)switch(h.length){case 2:return void l.uniform2f(this.getUniformLocation(f.name),h[0],h[1]);case 3:return void l.uniform3f(this.getUniformLocation(f.name),h[0],h[1],h[2]);case 4:return void l.uniform4f(this.getUniformLocation(f.name),h[0],h[1],h[2],h[3]);default:return}else"number"==typeof h&&l.uniform1f(this.getUniformLocation(f.name),h)})}useProgram(a,l){this.getGL().useProgram(a),this.currentProgram_=a,this.uniformLocations_={},this.attribLocations_={},this.applyFrameState(l),this.applyUniforms(l)}compileShader(a,l){const h=this.getGL(),d=h.createShader(l);return h.shaderSource(d,a),h.compileShader(d),d}getProgram(a,l){const h=this.getGL(),d=this.compileShader(a,h.FRAGMENT_SHADER),f=this.compileShader(l,h.VERTEX_SHADER),m=h.createProgram();if(h.attachShader(m,d),h.attachShader(m,f),h.linkProgram(m),!h.getShaderParameter(d,h.COMPILE_STATUS)){const g=`Fragment shader compilation failed: ${h.getShaderInfoLog(d)}`;throw new Error(g)}if(h.deleteShader(d),!h.getShaderParameter(f,h.COMPILE_STATUS)){const g=`Vertex shader compilation failed: ${h.getShaderInfoLog(f)}`;throw new Error(g)}if(h.deleteShader(f),!h.getProgramParameter(m,h.LINK_STATUS)){const g=`GL program linking failed: ${h.getShaderInfoLog(f)}`;throw new Error(g)}return m}getUniformLocation(a){return void 0===this.uniformLocations_[a]&&(this.uniformLocations_[a]=this.getGL().getUniformLocation(this.currentProgram_,a)),this.uniformLocations_[a]}getAttributeLocation(a){return void 0===this.attribLocations_[a]&&(this.attribLocations_[a]=this.getGL().getAttribLocation(this.currentProgram_,a)),this.attribLocations_[a]}makeProjectionTransform(a,l){const h=a.size,d=a.viewState.rotation,f=a.viewState.resolution,m=a.viewState.center;return Mb(l),sa(l,0,0,2/(f*h[0]),2/(f*h[1]),-d,-m[0],-m[1]),l}setUniformFloatValue(a,l){this.getGL().uniform1f(this.getUniformLocation(a),l)}setUniformFloatVec2(a,l){this.getGL().uniform2fv(this.getUniformLocation(a),l)}setUniformFloatVec4(a,l){this.getGL().uniform4fv(this.getUniformLocation(a),l)}setUniformMatrixValue(a,l){this.getGL().uniformMatrix4fv(this.getUniformLocation(a),!1,l)}enableAttributeArray_(a,l,h,d,f){const m=this.getAttributeLocation(a);m<0||(this.getGL().enableVertexAttribArray(m),this.getGL().vertexAttribPointer(m,l,h,!1,d,f))}enableAttributes(a){const l=function y7e(c){let a=0;for(let l=0;l<c.length;l++){const h=c[l];a+=h.size*Ute(h.type)}return a}(a);let h=0;for(let d=0;d<a.length;d++){const f=a[d];this.enableAttributeArray_(f.name,f.size,f.type||5126,l,h),h+=f.size*Ute(f.type)}}handleWebGLContextLost(){My(this.bufferCache_),this.currentProgram_=null}handleWebGLContextRestored(){}createTexture(a,l,h){const d=this.getGL();h=h||d.createTexture();const m=d.RGBA,y=d.RGBA,_=d.UNSIGNED_BYTE;return d.bindTexture(d.TEXTURE_2D,h),l?d.texImage2D(d.TEXTURE_2D,0,m,y,_,l):d.texImage2D(d.TEXTURE_2D,0,m,a[0],a[1],0,y,_,null),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),h}};class V4 extends RO{constructor(a,l){super(a),l=l||{},this.inversePixelTransform_=[1,0,0,1,0,0],this.pixelContext_=null,this.postProcesses_=l.postProcesses,this.uniforms_=l.uniforms,a.addChangeListener("map",this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(a,l){const h=this.getLayer();if(h.hasListener("precompose")){const d=new Vb("precompose",void 0,l,a);h.dispatchEvent(d)}}dispatchPostComposeEvent(a,l){const h=this.getLayer();if(h.hasListener("postcompose")){const d=new Vb("postcompose",void 0,l,a);h.dispatchEvent(d)}}reset(a){this.uniforms_=a.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(a){if(this.getLayer().getRenderSource()){let d,l=!0,h=-1;for(let m=0,g=a.layerStatesArray.length;m<g;m++){const y=a.layerStatesArray[m].layer,_=y.getRenderer();if(!(_ instanceof V4)){l=!0;continue}const v=y.getClassName();if((l||v!==d)&&(h+=1,l=!1),d=v,_===this)break}const f="map/"+a.mapId+"/group/"+h;(!this.helper||!this.helper.canvasCacheKeyMatches(f))&&(this.removeHelper(),this.helper=new _7e({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:f}),d&&(this.helper.getCanvas().className=d),this.afterHelperCreated())}return this.prepareFrameInternal(a)}afterHelperCreated(){}prepareFrameInternal(a){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(a,l,h){const d=this.getLayer();if(d.hasListener(a)){sa(this.inversePixelTransform_,0,0,h.pixelRatio,-h.pixelRatio,0,0,-h.size[1]);const f=new Vb(a,this.inversePixelTransform_,h,l);d.dispatchEvent(f)}}preRender(a,l){this.dispatchRenderEvent_("prerender",a,l)}postRender(a,l){this.dispatchRenderEvent_("postrender",a,l)}}const v7e=V4,Uu=new Uint8Array(4);function w7e(c,a){const l=256,h=255;return(a=a||[])[0]=Math.floor(c/l/l/l)/h,a[1]=Math.floor(c/l/l)%l/h,a[2]=Math.floor(c/l)%l/h,a[3]=c%l/h,a}ft(604);const M7e=class E7e extends v7e{constructor(a,l){const h=l.uniforms||{},d=[1,0,0,1,0,0];h.u_projectionMatrix=d,super(a,{uniforms:h,postProcesses:l.postProcesses}),this.ready=!1,this.sourceRevision_=-1,this.verticesBuffer_=new F4(XD,35048),this.hitVerticesBuffer_=new F4(XD,35048),this.indicesBuffer_=new F4(34963,35048),this.vertexShader_=l.vertexShader,this.fragmentShader_=l.fragmentShader,this.hitDetectionEnabled_=!(!l.hitFragmentShader||!l.hitVertexShader),this.hitVertexShader_=l.hitVertexShader,this.hitFragmentShader_=l.hitFragmentShader;const f=l.attributes?l.attributes.map(function(g){return{name:"a_"+g.name,size:1,type:Wc.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:Wc.FLOAT},{name:"a_index",size:1,type:Wc.FLOAT}].concat(f),this.hitDetectionAttributes=[{name:"a_position",size:2,type:Wc.FLOAT},{name:"a_index",size:1,type:Wc.FLOAT},{name:"a_hitColor",size:4,type:Wc.FLOAT},{name:"a_featureUid",size:1,type:Wc.FLOAT}].concat(f),this.customAttributes=l.attributes?l.attributes:[],this.previousExtent_=[1/0,1/0,-1/0,-1/0],this.currentTransform_=d,this.renderTransform_=[1,0,0,1,0,0],this.invertRenderTransform_=[1,0,0,1,0,0],this.renderInstructions_=new Float32Array(0),this.hitRenderInstructions_=new Float32Array(0),this.generateBuffersRun_=0,this.worker_=function x7e(){const c='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS",r={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:\'`renderMode` must be `"hybrid"` or `"vector"`\',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class o extends Error{constructor(e){const t=r[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}var i=o;function a(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function s(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new i(t)}(0!==n,32);const o=t[0],a=t[1],s=t[2],u=t[3],f=t[4],x=t[5];return e[0]=u/n,e[1]=-a/n,e[2]=-s/n,e[3]=o/n,e[4]=(s*x-u*f)/n,e[5]=-(o*x-a*f)/n,e}new Array(6);var u={};function f(e,t,n){n=n||2;var r,o,i,a,s,u,f,l=t&&t.length,c=l?t[0]*n:e.length,v=x(e,0,c,n,!0),d=[];if(!v||v.next===v.prev)return d;if(l&&(v=function(e,t,n,r){var o,i,a,s=[];for(o=0,i=t.length;o<i;o++)(a=x(e,t[o]*r,o<i-1?t[o+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(w(a));for(s.sort(p),o=0;o<s.length;o++)n=b(s[o],n);return n}(e,t,v,n)),e.length>80*n){r=i=e[0],o=a=e[1];for(var y=n;y<c;y+=n)(s=e[y])<r&&(r=s),(u=e[y+1])<o&&(o=u),s>i&&(i=s),u>a&&(a=u);f=0!==(f=Math.max(i-r,a-o))?32767/f:0}return h(v,d,n,r,o,f,0),d}function x(e,t,n,r,o){var i,a;if(o===B(e,t,n,r)>0)for(i=t;i<n;i+=r)a=k(i,e[i],e[i+1],a);else for(i=n-r;i>=t;i-=r)a=k(i,e[i],e[i+1],a);return a&&M(a,a.next)&&(z(a),a=a.next),a}function l(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!M(r,r.next)&&0!==Z(r.prev,r,r.next))r=r.next;else{if(z(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function h(e,t,n,r,o,i,a){if(e){!a&&i&&function(e,t,n,r){var o=e;do{0===o.z&&(o.z=m(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,r,o,i,a,s,u,f=1;do{for(n=e,e=null,i=null,a=0;n;){for(a++,r=n,s=0,t=0;t<f&&(s++,r=r.nextZ);t++);for(u=f;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(o=n,n=n.nextZ,s--):(o=r,r=r.nextZ,u--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;n=r}i.nextZ=null,f*=2}while(a>1)}(o)}(e,r,o,i);for(var s,u,f=e;e.prev!==e.next;)if(s=e.prev,u=e.next,i?v(e,r,o,i):c(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),z(e),e=u.next,f=u.next;else if((e=u)===f){a?1===a?h(e=d(l(e),t,n),t,n,r,o,i,2):2===a&&y(e,t,n,r,o,i):h(l(e),t,n,r,o,i,1);break}}}function c(e){var t=e.prev,n=e,r=e.next;if(Z(t,n,r)>=0)return!1;for(var o=t.x,i=n.x,a=r.x,s=t.y,u=n.y,f=r.y,x=o<i?o<a?o:a:i<a?i:a,l=s<u?s<f?s:f:u<f?u:f,h=o>i?o>a?o:a:i>a?i:a,c=s>u?s>f?s:f:u>f?u:f,v=r.next;v!==t;){if(v.x>=x&&v.x<=h&&v.y>=l&&v.y<=c&&A(o,s,i,u,a,f,v.x,v.y)&&Z(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function v(e,t,n,r){var o=e.prev,i=e,a=e.next;if(Z(o,i,a)>=0)return!1;for(var s=o.x,u=i.x,f=a.x,x=o.y,l=i.y,h=a.y,c=s<u?s<f?s:f:u<f?u:f,v=x<l?x<h?x:h:l<h?l:h,d=s>u?s>f?s:f:u>f?u:f,y=x>l?x>h?x:h:l>h?l:h,p=m(c,v,t,n,r),b=m(d,y,t,n,r),g=e.prevZ,w=e.nextZ;g&&g.z>=p&&w&&w.z<=b;){if(g.x>=c&&g.x<=d&&g.y>=v&&g.y<=y&&g!==o&&g!==a&&A(s,x,u,l,f,h,g.x,g.y)&&Z(g.prev,g,g.next)>=0)return!1;if(g=g.prevZ,w.x>=c&&w.x<=d&&w.y>=v&&w.y<=y&&w!==o&&w!==a&&A(s,x,u,l,f,h,w.x,w.y)&&Z(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;g&&g.z>=p;){if(g.x>=c&&g.x<=d&&g.y>=v&&g.y<=y&&g!==o&&g!==a&&A(s,x,u,l,f,h,g.x,g.y)&&Z(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;w&&w.z<=b;){if(w.x>=c&&w.x<=d&&w.y>=v&&w.y<=y&&w!==o&&w!==a&&A(s,x,u,l,f,h,w.x,w.y)&&Z(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function d(e,t,n){var r=e;do{var o=r.prev,i=r.next.next;!M(o,i)&&F(o,r,r.next,i)&&S(o,i)&&S(i,o)&&(t.push(o.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),z(r),z(r.next),r=e=i),r=r.next}while(r!==e);return l(r)}function y(e,t,n,r,o,i){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&E(a,s)){var u=U(a,s);return a=l(a,a.next),u=l(u,u.next),h(a,t,n,r,o,i,0),void h(u,t,n,r,o,i,0)}s=s.next}a=a.next}while(a!==e)}function p(e,t){return e.x-t.x}function b(e,t){var n=function(e,t){var n,r=t,o=e.x,i=e.y,a=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=o&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===o))return n}r=r.next}while(r!==t);if(!n)return null;var u,f=n,x=n.x,l=n.y,h=1/0;r=n;do{o>=r.x&&r.x>=x&&o!==r.x&&A(i<l?o:a,i,x,l,i<l?a:o,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(o-r.x),S(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,h=u)),r=r.next}while(r!==f);return n}(e,t);if(!n)return t;var r=U(n,e);return l(r,r.next),l(n,n.next)}function g(e,t){return Z(e.prev,e,t.prev)<0&&Z(t.next,e,e.next)<0}function m(e,t,n,r,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function w(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function A(e,t,n,r,o,i,a,s){return(o-a)*(t-s)>=(e-a)*(i-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(i-s)>=(o-a)*(r-s)}function E(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&F(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(S(e,t)&&S(t,e)&&function(e,t){var n=e,r=!1,o=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Z(e.prev,e,t.prev)||Z(e,t.prev,t))||M(e,t)&&Z(e.prev,e,e.next)>0&&Z(t.prev,t,t.next)>0)}function Z(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function M(e,t){return e.x===t.x&&e.y===t.y}function F(e,t,n,r){var o=I(Z(e,t,n)),i=I(Z(e,t,r)),a=I(Z(n,r,e)),s=I(Z(n,r,t));return o!==i&&a!==s||(!(0!==o||!T(e,n,t))||(!(0!==i||!T(e,r,t))||(!(0!==a||!T(n,e,r))||!(0!==s||!T(n,t,r)))))}function T(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function S(e,t){return Z(e.prev,e,e.next)<0?Z(e,t,e.next)>=0&&Z(e,e.prev,t)>=0:Z(e,t,e.prev)<0||Z(e,e.next,t)<0}function U(e,t){var n=new R(e.i,e.x,e.y),r=new R(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function k(e,t,n,r){var o=new R(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function z(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function R(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function B(e,t,n,r){for(var o=0,i=t,a=n-r;i<n;i+=r)o+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return o}({get exports(){return u},set exports(e){u=e}}).exports=f,u.default=f,f.deviation=function(e,t,n,r){var o=t&&t.length,i=o?t[0]*n:e.length,a=Math.abs(B(e,0,i,n));if(o)for(var s=0,u=t.length;s<u;s++){var f=t[s]*n,x=s<u-1?t[s+1]*n:e.length;a-=Math.abs(B(e,f,x,n))}var l=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,c=r[s+1]*n,v=r[s+2]*n;l+=Math.abs((e[h]-e[v])*(e[c+1]-e[h+1])-(e[h]-e[c])*(e[v+1]-e[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},f.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,o=0;o<e.length;o++){for(var i=0;i<e[o].length;i++)for(var a=0;a<t;a++)n.vertices.push(e[o][i][a]);o>0&&(r+=e[o-1].length,n.holes.push(r))}return n};const N=[],P={vertexPosition:0,indexPosition:0};function C(e,t,n,r,o){e[t+0]=n,e[t+1]=r,e[t+2]=o}function _(e,t,n,r,o,i){const a=3+o,s=e[t+0],u=e[t+1],f=N;f.length=o;for(let n=0;n<f.length;n++)f[n]=e[t+2+n];let x=i?i.vertexPosition:0,l=i?i.indexPosition:0;const h=x/a;return C(n,x,s,u,0),f.length&&n.set(f,x+3),x+=a,C(n,x,s,u,1),f.length&&n.set(f,x+3),x+=a,C(n,x,s,u,2),f.length&&n.set(f,x+3),x+=a,C(n,x,s,u,3),f.length&&n.set(f,x+3),x+=a,r[l++]=h,r[l++]=h+1,r[l++]=h+3,r[l++]=h+1,r[l++]=h+2,r[l++]=h+3,P.vertexPosition=x,P.indexPosition=l,P}function q(e,t,n,r,o,i,s,u,f,x){const l=5+u.length,h=i.length/l,c=[e[t+0],e[t+1]],v=[e[n],e[n+1]],d=a(x,[...c]),y=a(x,[...v]);function p(e,t,n){const r=1e4;return Math.round(1500*t)+Math.round(1500*n)*r+e*r*r}function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),o=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-o[1],o[0]],a=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),s=[(n[0]-e[0])/a,(n[1]-e[1])/a],u=0===r||0===a?0:Math.acos((f=s[0]*o[0]+s[1]*o[1],x=-1,l=1,Math.min(Math.max(f,x),l)));var f,x,l;return s[0]*i[0]+s[1]*i[1]>0?u:2*Math.PI-u}const g=null!==o;let m=0,w=0;if(null!==r){m=b(d,y,a(x,[...[e[r],e[r+1]]]))}if(g){w=b(y,d,a(x,[...[e[o],e[o+1]]]))}i.push(c[0],c[1],v[0],v[1],p(0,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(1,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(2,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(3,m,w)),i.push(...u),s.push(h,h+1,h+2,h+1,h+3,h+2)}function L(e,t,n,r,o){const i=2+o;let a=t;const s=e.slice(a,a+o);a+=o;const f=e[a++];let x=0;const l=new Array(f-1);for(let t=0;t<f;t++)x+=e[a++],t<f-1&&(l[t]=x);const h=e.slice(a,a+2*x),c=u(h,l,2);for(let e=0;e<c.length;e++)r.push(c[e]+n.length/i);for(let e=0;e<h.length;e+=2)n.push(h[e],h[e+1],...s);return a+2*x}const G=self;G.onmessage=r=>{const o=r.data;switch(o.type){case t:{const e=3,t=2,n=o.customAttributesCount,r=t+n,i=new Float32Array(o.renderInstructions),a=i.length/r,s=4*a*(n+e),u=new Uint32Array(6*a),f=new Float32Array(s);let x;for(let e=0;e<i.length;e+=r)x=_(i,e,f,u,n,x);const l=Object.assign({vertexBuffer:f.buffer,indexBuffer:u.buffer,renderInstructions:i.buffer},o);G.postMessage(l,[f.buffer,u.buffer,i.buffer]);break}case n:{const e=[],t=[],n=o.customAttributesCount,r=2,i=new Float32Array(o.renderInstructions);let a=0;const u=o.renderInstructionsTransform,f=[1,0,0,1,0,0];let x,l;for(s(f,u);a<i.length;){l=Array.from(i.slice(a,a+n)),a+=n,x=i[a++];for(let n=0;n<x-1;n++)q(i,a+n*r,a+(n+1)*r,n>0?a+(n-1)*r:null,n<x-2?a+(n+2)*r:null,e,t,l,0,f);a+=x*r}const h=Uint32Array.from(t),c=Float32Array.from(e),v=Object.assign({vertexBuffer:c.buffer,indexBuffer:h.buffer,renderInstructions:i.buffer},o);G.postMessage(v,[c.buffer,h.buffer,i.buffer]);break}case e:{const e=[],t=[],n=o.customAttributesCount,r=new Float32Array(o.renderInstructions);let i=0;for(;i<r.length;)i=L(r,i,e,t,n);const a=Uint32Array.from(t),s=Float32Array.from(e),u=Object.assign({vertexBuffer:s.buffer,indexBuffer:a.buffer,renderInstructions:r.buffer},o);G.postMessage(u,[s.buffer,a.buffer,r.buffer]);break}}};';return new Worker(typeof Blob>"u"?"data:application/javascript;base64,"+Buffer.from(c,"binary").toString("base64"):URL.createObjectURL(new Blob([c],{type:"application/javascript"})))}(),this.worker_.addEventListener("message",g=>{const y=g.data;if("GENERATE_POINT_BUFFERS"===y.type){const _=y.projectionTransform;y.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(y.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(y.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(y.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=_,Dy(this.invertRenderTransform_,this.renderTransform_),y.hitDetection?this.hitRenderInstructions_=new Float32Array(g.data.renderInstructions):(this.renderInstructions_=new Float32Array(g.data.renderInstructions),y.generateBuffersRun===this.generateBuffersRun_&&(this.ready=!0)),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;const m=this.getLayer().getSource();this.sourceListenKeys_=[Zn(m,"addfeature",this.handleSourceFeatureAdded_,this),Zn(m,"changefeature",this.handleSourceFeatureChanged_,this),Zn(m,"removefeature",this.handleSourceFeatureDelete_,this),Zn(m,"clear",this.handleSourceFeatureClear_,this)],m.forEachFeature(g=>{this.featureCache_[an(g)]={feature:g,properties:g.getProperties(),geometry:g.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitProgram_=this.helper.getProgram(this.hitFragmentShader_,this.hitVertexShader_),this.hitRenderTarget_=new class b7e{constructor(a,l){this.helper_=a;const h=a.getGL();this.texture_=h.createTexture(),this.framebuffer_=h.createFramebuffer(),this.size_=l||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(a){yh(a,this.size_)||(this.size_[0]=a[0],this.size_[1]=a[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const a=this.size_,l=this.helper_.getGL();l.bindFramebuffer(l.FRAMEBUFFER,this.framebuffer_),l.readPixels(0,0,a[0],a[1],l.RGBA,l.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(a,l){if(a<0||l<0||a>this.size_[0]||l>=this.size_[1])return Uu[0]=0,Uu[1]=0,Uu[2]=0,Uu[3]=0,Uu;this.readAll();const h=Math.floor(a)+(this.size_[1]-Math.floor(l)-1)*this.size_[0];return Uu[0]=this.data_[4*h],Uu[1]=this.data_[4*h+1],Uu[2]=this.data_[4*h+2],Uu[3]=this.data_[4*h+3],Uu}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}updateSize_(){const a=this.size_,l=this.helper_.getGL();this.texture_=this.helper_.createTexture(a,null,this.texture_),l.bindFramebuffer(l.FRAMEBUFFER,this.framebuffer_),l.viewport(0,0,a[0],a[1]),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(a[0]*a[1]*4)}}(this.helper))}handleSourceFeatureAdded_(a){const l=a.feature;this.featureCache_[an(l)]={feature:l,properties:l.getProperties(),geometry:l.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(a){const l=a.feature;this.featureCache_[an(l)]={feature:l,properties:l.getProperties(),geometry:l.getGeometry()}}handleSourceFeatureDelete_(a){delete this.featureCache_[an(a.feature)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(a){const l=this.helper.getGL();this.preRender(l,a);const h=a.viewState.projection,m=this.getLayer().getSource().getWrapX()&&h.canWrapX(),g=h.getExtent(),y=a.extent,_=m?Kn(g):null,v=m?Math.ceil((y[2]-g[2])/_)+1:1,b=m?Math.floor((y[0]-g[0])/_):0;let S=b;const T=this.indicesBuffer_.getSize();do{this.helper.makeProjectionTransform(a,this.currentTransform_),wP(this.currentTransform_,S*_,0),Lp(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(a),this.helper.drawElements(0,T)}while(++S<v);this.helper.finalizeDraw(a,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const x=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderHitDetection(a,b,v,_),this.hitRenderTarget_.clearCachedData()),this.postRender(l,a),x}prepareFrameInternal(a){const l=this.getLayer(),h=l.getSource(),d=a.viewState,f=!a.viewHints[0]&&!a.viewHints[1],m=!Gl(this.previousExtent_,a.extent),g=this.sourceRevision_<h.getRevision();if(g&&(this.sourceRevision_=h.getRevision()),f&&(m||g)){const y=d.projection,_=d.resolution,v=l instanceof zy?l.getRenderBuffer():0,b=tl(a.extent,v*_);h.loadFeatures(b,_,y),this.rebuildBuffers_(a),this.previousExtent_=a.extent.slice()}return this.helper.useProgram(this.program_,a),this.helper.prepareDraw(a),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(a){const l=[1,0,0,1,0,0];this.helper.makeProjectionTransform(a,l);const h=(2+this.customAttributes.length)*this.featureCount_;if((!this.renderInstructions_||this.renderInstructions_.length!==h)&&(this.renderInstructions_=new Float32Array(h)),this.hitDetectionEnabled_){const S=(7+this.customAttributes.length)*this.featureCount_;(!this.hitRenderInstructions_||this.hitRenderInstructions_.length!==S)&&(this.hitRenderInstructions_=new Float32Array(S))}let d,f;const m=[],g=[];let v,y=0,_=0;for(const S in this.featureCache_){if(d=this.featureCache_[S],f=d.geometry,!f||"Point"!==f.getType())continue;let T;m[0]=f.getFlatCoordinates()[0],m[1]=f.getFlatCoordinates()[1],Or(l,m),v=w7e(_+6,g),this.renderInstructions_[y++]=m[0],this.renderInstructions_[y++]=m[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[_++]=m[0],this.hitRenderInstructions_[_++]=m[1],this.hitRenderInstructions_[_++]=v[0],this.hitRenderInstructions_[_++]=v[1],this.hitRenderInstructions_[_++]=v[2],this.hitRenderInstructions_[_++]=v[3],this.hitRenderInstructions_[_++]=Number(S));for(let x=0;x<this.customAttributes.length;x++)T=this.customAttributes[x].callback(d.feature,d.properties),this.renderInstructions_[y++]=T,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[_++]=T)}const b={id:0,type:"GENERATE_POINT_BUFFERS",renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(b.projectionTransform=l,b.generateBuffersRun=++this.generateBuffersRun_,this.ready=!1,this.worker_.postMessage(b,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){const S={id:0,type:"GENERATE_POINT_BUFFERS",renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};S.projectionTransform=l,S.hitDetection=!0,this.worker_.postMessage(S,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}}forEachFeatureAtCoordinate(a,l,h,d,f){if(En(this.hitDetectionEnabled_,66),!this.hitRenderInstructions_)return;const m=Or(l.coordinateToPixelTransform,a.slice()),g=this.hitRenderTarget_.readPixel(m[0]/2,m[1]/2),_=function C7e(c){let a=0;const l=256,h=255;return a+=Math.round(c[0]*l*l*l*h),a+=Math.round(c[1]*l*l*h),a+=Math.round(c[2]*l*h),a+=Math.round(c[3]*h),a}([g[0]/255,g[1]/255,g[2]/255,g[3]/255]),b=Math.floor(this.hitRenderInstructions_[_]).toString(),T=this.getLayer().getSource().getFeatureByUid(b);return T?d(T,this.getLayer(),null):void 0}renderHitDetection(a,l,h,d){if(!this.hitVerticesBuffer_.getSize())return;let f=l;this.hitRenderTarget_.setSize([Math.floor(a.size[0]/2),Math.floor(a.size[1]/2)]),this.helper.useProgram(this.hitProgram_,a),this.helper.prepareDrawToRenderTarget(a,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);do{this.helper.makeProjectionTransform(a,this.currentTransform_),wP(this.currentTransform_,f*d,0),Lp(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(a);const m=this.indicesBuffer_.getSize();this.helper.drawElements(0,m)}while(++f<h)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(a){or(a)}),this.sourceListenKeys_=null,super.disposeInternal()}},D7e=["#00f","#0ff","#0f0","#ff0","#f00"],R7e=class A7e extends zy{constructor(a){a=a||{};const l=Object.assign({},a);delete l.gradient,delete l.radius,delete l.blur,delete l.weight,super(l),this.gradient_=null,this.addChangeListener("gradient",this.handleGradientChanged_),this.setGradient(a.gradient?a.gradient:D7e),this.setBlur(void 0!==a.blur?a.blur:15),this.setRadius(void 0!==a.radius?a.radius:8);const h=a.weight?a.weight:"weight";this.weightFunction_="string"==typeof h?function(d){return d.get(h)}:h,this.setRenderOrder(null)}getBlur(){return this.get("blur")}getGradient(){return this.get("gradient")}getRadius(){return this.get("radius")}handleGradientChanged_(){this.gradient_=function I7e(c){const h=Yr(1,256),d=h.createLinearGradient(0,0,1,256),f=1/(c.length-1);for(let m=0,g=c.length;m<g;++m)d.addColorStop(m*f,c[m]);return h.fillStyle=d,h.fillRect(0,0,1,256),h.canvas}(this.getGradient())}setBlur(a){this.set("blur",a)}setGradient(a){this.set("gradient",a)}setRadius(a){this.set("radius",a)}createRenderer(){return new M7e(this,{className:this.getClassName(),attributes:[{name:"weight",callback:a=>{const l=this.weightFunction_(a);return void 0!==l?Qn(l,0,1):1}}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:()=>2*(this.get("radius")+this.get("blur")),u_blurSlope:()=>this.get("radius")/Math.max(1,this.get("blur"))},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}},zte=class L7e extends d_{constructor(a){const l=void 0!==a.crossOrigin?a.crossOrigin:null,h=void 0!==a.imageLoadFunction?a.imageLoadFunction:NX;super({attributions:a.attributions,interpolate:a.interpolate,projection:dn(a.projection)}),this.url_=a.url,this.imageExtent_=a.imageExtent,this.image_=new Dj(this.imageExtent_,void 0,1,this.url_,l,h,Yr(1,1)),this.imageSize_=a.imageSize?a.imageSize:null,this.image_.addEventListener("change",this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(a,l,h,d){return Mr(a,this.image_.getExtent())?this.image_:null}getUrl(){return this.url_}handleImageChange(a){if(2==this.image_.getState()){const l=this.image_.getExtent(),h=this.image_.getImage();let d,f;this.imageSize_?(d=this.imageSize_[0],f=this.imageSize_[1]):(d=h.width,f=h.height);const m=Kn(l),g=gr(l),y=m/d,_=g/f;let v=d,b=f;if(y>_?v=Math.round(m/_):b=Math.round(g/y),v!==d||b!==f){const S=Yr(v,b);this.getInterpolate()||(S.imageSmoothingEnabled=!1);const T=S.canvas;S.drawImage(h,0,0,d,f,0,0,T.width,T.height),this.image_.setImage(T)}}super.handleImageChange(a)}},O7e=class P7e extends d_{constructor(a){super({attributions:(a=a||{}).attributions,interpolate:a.interpolate,projection:a.projection,resolutions:a.resolutions,state:a.state}),this.canvasFunction_=a.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==a.ratio?a.ratio:1.5}getImageInternal(a,l,h,d){l=this.findNearestResolution(l);let f=this.canvas_;if(f&&this.renderedRevision_==this.getRevision()&&f.getResolution()==l&&f.getPixelRatio()==h&&Ia(f.getExtent(),a))return f;IP(a=a.slice(),this.ratio_);const m=Kn(a)/l,g=gr(a)/l,_=this.canvasFunction_.call(this,a,l,h,[m*h,g*h],d);return _&&(f=new WN(a,l,h,_)),this.canvas_=f,this.renderedRevision_=this.getRevision(),f}},F7e={Point:function k7e(c,a,l){const h=c.coordinates;return a&&l&&z4(h,a,l),new du(h)},LineString:function B7e(c,a){const l=KD(c.arcs,a);return new Eh(l)},Polygon:function z7e(c,a){const l=[];for(let h=0,d=c.arcs.length;h<d;++h)l[h]=KD(c.arcs[h],a);return new Th(l)},MultiPoint:function V7e(c,a,l){const h=c.coordinates;if(a&&l)for(let d=0,f=h.length;d<f;++d)z4(h[d],a,l);return new lS(h)},MultiLineString:function U7e(c,a){const l=[];for(let h=0,d=c.arcs.length;h<d;++h)l[h]=KD(c.arcs[h],a);return new aS(l)},MultiPolygon:function G7e(c,a){const l=[];for(let h=0,d=c.arcs.length;h<d;++h){const f=c.arcs[h],m=[];for(let g=0,y=f.length;g<y;++g)m[g]=KD(f[g],a);l[h]=m}return new rE(l)}};function KD(c,a){const l=[];let h;for(let d=0,f=c.length;d<f;++d)if(h=c[d],d>0&&l.pop(),h>=0){const m=a[h];for(let g=0,y=m.length;g<y;++g)l.push(m[g].slice(0))}else{const m=a[~h];for(let g=m.length-1;g>=0;--g)l.push(m[g].slice(0))}return l}function H7e(c,a,l,h,d,f,m){const g=c.geometries,y=[];for(let _=0,v=g.length;_<v;++_)y[_]=Gte(g[_],a,l,h,d,f,m);return y}function Gte(c,a,l,h,d,f,m){let g=null;const y=c.type;if(y){const b=F7e[y];g="Point"===y||"MultiPoint"===y?b(c,l,h):b(c,a),g=Jy(g,!1,m)}const _=new Ky({geometry:g});void 0!==c.id&&_.setId(c.id);let v=c.properties;return d&&(v||(v={}),v[d]=f),v&&_.setProperties(v,!0),_}function W7e(c,a,l){let h=0,d=0;for(let f=0,m=c.length;f<m;++f){const g=c[f];h+=g[0],d+=g[1],g[0]=h,g[1]=d,z4(g,a,l)}}function z4(c,a,l){c[0]=c[0]*a[0]+l[0],c[1]=c[1]*a[1]+l[1]}const X7e=class N7e extends gW{constructor(a){super(),this.layerName_=(a=a||{}).layerName,this.layers_=a.layers?a.layers:null,this.dataProjection=dn(a.dataProjection?a.dataProjection:"EPSG:4326")}readFeaturesFromObject(a,l){if("Topology"==a.type){const h=a;let d,f=null,m=null;h.transform&&(d=h.transform,f=d.scale,m=d.translate);const g=h.arcs;d&&function j7e(c,a,l){for(let h=0,d=c.length;h<d;++h)W7e(c[h],a,l)}(g,f,m);const y=[],_=h.objects,v=this.layerName_;let b;for(const S in _)this.layers_&&!this.layers_.includes(S)||("GeometryCollection"===_[S].type?(b=_[S],y.push.apply(y,H7e(b,g,f,m,v,S,l))):(b=_[S],y.push(Gte(b,g,f,m,v,S,l))));return y}return[]}readProjectionFromObject(a){return this.dataProjection}};let q7e=(()=>{class c{constructor(){this.privValue=1,this.valueChange=new st}set value(l){this.privValue!==l&&(this.privValue=l,this.layer?.custom_layer&&this.layer.custom_layer.setRadius(l))}get value(){return this.privValue}ngOnInit(){this.layer.custom_layer.setRadius(this.value)}changeValue(l){const h=parseInt(l.target.value,10);this.value=h,this.valueChange.emit(h),this.layer.custom_layer&&this.layer.custom_layer.setRadius(h)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["app-example-layer-action"]],inputs:{layer:"layer",value:"value"},outputs:{valueChange:"valueChange"},decls:6,vars:2,consts:[[1,"heatmap-range"],["type","range","clrRange","","name","two","min","1","max","50","step","1",1,"ukis-range-input",3,"value","change"]],template:function(l,h){1&l&&(U(0,"clr-range-container",0)(1,"label"),ve(2,"Heatmap radius:"),H(),U(3,"input",1),De("change",function(f){return h.changeValue(f)}),H(),U(4,"clr-control-helper"),ve(5),H()()),2&l&&(V(3),z("value",h.value),V(2),Kt(" "+h.value))},dependencies:[Qr,qM,C5e,NK],styles:[".heatmap-range[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:400}"]}),c})();const Hte={type:"FeatureCollection",features:[{type:"Feature",properties:{height:2},geometry:{type:"Polygon",coordinates:[[[11.539764404296875,48.17707562779612,2],[11.53289794921875,48.13126755117026],[11.51641845703125,48.12301775410865],[11.517791748046875,48.10926514749487],[11.56036376953125,48.11384975871469],[11.564483642578125,48.12301775410865],[11.58233642578125,48.130350972491556],[11.592292785644531,48.14043243818811],[11.594696044921875,48.14730502988628],[11.602935791015625,48.15715413998257],[11.595039367675781,48.1640244926387],[11.59950256347656,48.17226770127996],[11.587142944335938,48.177533502046636],[11.572036743164062,48.177533502046636],[11.539764404296875,48.17707562779612]]]}},{type:"Feature",properties:{height:1},geometry:{type:"Polygon",coordinates:[[[11.605682373046875,48.156238023440835],[11.596412658691406,48.147534100428686],[11.59332275390625,48.13699579726703],[11.583709716796875,48.12851776605501],[11.564826965332031,48.121413473016034],[11.561737060546875,48.11247441829591],[11.575126647949217,48.11155750423242],[11.581993103027344,48.10490938797694],[11.614608764648438,48.11178673428214],[11.620101928710938,48.12462198509838],[11.614952087402344,48.12920522613733],[11.614265441894531,48.13905780942574],[11.61529541015625,48.15165719536032],[11.605682373046875,48.156238023440835]]]}},{type:"Feature",properties:{height:3},geometry:{type:"Polygon",coordinates:[[[11.516075134277344,48.12347611093252],[11.532554626464844,48.131496693283744],[11.538734436035156,48.176388808753124],[11.52191162109375,48.175701980509444],[11.511268615722656,48.17249666038475],[11.507148742675781,48.16379549570767],[11.492729187011719,48.165398452755674],[11.486892700195312,48.16379549570767],[11.458740234375,48.164482483433744],[11.457366943359375,48.15188624647704],[11.455307006835938,48.148221305921446],[11.436767578124998,48.133329793382636],[11.430244445800781,48.12874692043826],[11.443977355957031,48.12828861064926],[11.45050048828125,48.12553866602599],[11.4862060546875,48.124392812310205],[11.503028869628904,48.12553866602599],[11.516075134277344,48.12347611093252]]]}},{type:"Feature",properties:{height:0},geometry:{type:"Polygon",coordinates:[[[11.517448425292969,48.10972362702285],[11.487579345703125,48.095738161288885],[11.488265991210938,48.08381312049231],[11.485176086425781,48.075785093732456],[11.487922668457031,48.07486752519069],[11.493759155273438,48.07693203139914],[11.506805419921875,48.0762438718672],[11.517448425292969,48.06890293081563],[11.536331176757812,48.068214663899795],[11.538734436035156,48.07349114169717],[11.540107727050781,48.08427182703979],[11.548004150390625,48.09367440979962],[11.549720764160154,48.10559716402152],[11.559333801269531,48.11407897853892],[11.517448425292969,48.10972362702285]]]}}]},G4={type:"FeatureCollection",features:[{type:"Feature",properties:{pid:1},geometry:{type:"Point",coordinates:[10.9423828125,49.001843917978526]}},{type:"Feature",properties:{pid:2},geometry:{type:"Point",coordinates:[11.18408203125,49.088257784724675]}},{type:"Feature",properties:{pid:3},geometry:{type:"Point",coordinates:[11.030273437499998,49.35375571830993]}},{type:"Feature",properties:{pid:4},geometry:{type:"Point",coordinates:[10.72265625,49.24629332459796]}},{type:"Feature",properties:{pid:5},geometry:{type:"Point",coordinates:[12.76611328125,48.011975126709956]}},{type:"Feature",properties:{pid:6},geometry:{type:"Point",coordinates:[13.55712890625,49.15296965617042]}},{type:"Feature",properties:{pid:7},geometry:{type:"Point",coordinates:[13.3154296875,48.545705491847464]}},{type:"Feature",properties:{pid:8},geometry:{type:"Point",coordinates:[4.482421875,49.224772722794825]}}]},$7e={type:"FeatureCollection",features:[{type:"Feature",properties:{name:"Feature 1 - Polygon"},geometry:{type:"Polygon",coordinates:[[[7.91015625,50.233151832472245],[9.140625,47.81315451752768],[13.33740234375,48.28319289548349],[13.7109375,50.17689812200107],[7.91015625,50.233151832472245]]]}}]},Y7e={type:"FeatureCollection",features:[{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.3",geometry:{type:"Point",coordinates:[14.354708,54.004536]},geometry_name:"geom",properties:{lat:"54.004536",lon:"14.354708",id:"3",timestamp:"2020-09-13T16:52:57Z",SWH:"1.13",plength:"209.7",windSpeed:"4.25",pdirection:"125.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.4",geometry:{type:"Point",coordinates:[14.445045,54.013187]},geometry_name:"geom",properties:{lat:"54.013187",lon:"14.445045",id:"4",timestamp:"2020-09-13T16:52:57Z",SWH:"0.91",plength:"251.0",windSpeed:"3.75",pdirection:"11.3"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.5",geometry:{type:"Point",coordinates:[14.535383,54.021835]},geometry_name:"geom",properties:{lat:"54.021835",lon:"14.535383",id:"5",timestamp:"2020-09-13T16:52:57Z",SWH:"1.08",plength:"475.4",windSpeed:"4.00",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.6",geometry:{type:"Point",coordinates:[14.625798,54.030346]},geometry_name:"geom",properties:{lat:"54.030346",lon:"14.625798",id:"6",timestamp:"2020-09-13T16:52:57Z",SWH:"0.99",plength:"194.6",windSpeed:"4.00",pdirection:"171.3"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.7",geometry:{type:"Point",coordinates:[14.716214,54.038853]},geometry_name:"geom",properties:{lat:"54.038853",lon:"14.716214",id:"7",timestamp:"2020-09-13T16:52:57Z",SWH:"0.90",plength:"475.4",windSpeed:"4.05",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.8",geometry:{type:"Point",coordinates:[13.978081,54.022915]},geometry_name:"geom",properties:{lat:"54.022915",lon:"13.978081",id:"8",timestamp:"2020-09-13T16:52:57Z",SWH:"0.66",plength:"475.4",windSpeed:"3.50",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.9",geometry:{type:"Point",coordinates:[14.068372,54.031853]},geometry_name:"geom",properties:{lat:"54.031853",lon:"14.068372",id:"9",timestamp:"2020-09-13T16:52:57Z",SWH:"1.03",plength:"452.5",windSpeed:"4.20",pdirection:"135.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.10",geometry:{type:"Point",coordinates:[14.158684,54.040756]},geometry_name:"geom",properties:{lat:"54.040756",lon:"14.158684",id:"10",timestamp:"2020-09-13T16:52:57Z",SWH:"0.47",plength:"199.9",windSpeed:"4.40",pdirection:"51.3"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.11",geometry:{type:"Point",coordinates:[14.249058,54.049553]},geometry_name:"geom",properties:{lat:"54.049553",lon:"14.249058",id:"11",timestamp:"2020-09-13T16:52:57Z",SWH:"1.36",plength:"420.9",windSpeed:"4.40",pdirection:"80.5"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.12",geometry:{type:"Point",coordinates:[14.339441,54.058331]},geometry_name:"geom",properties:{lat:"54.058331",lon:"14.339441",id:"12",timestamp:"2020-09-13T16:52:57Z",SWH:"0.94",plength:"134.6",windSpeed:"3.95",pdirection:"3.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.13",geometry:{type:"Point",coordinates:[14.429894,54.066982]},geometry_name:"geom",properties:{lat:"54.066982",lon:"14.429894",id:"13",timestamp:"2020-09-13T16:52:57Z",SWH:"1.01",plength:"351.6",windSpeed:"4.15",pdirection:"164.1"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.14",geometry:{type:"Point",coordinates:[14.52035,54.075634]},geometry_name:"geom",properties:{lat:"54.075634",lon:"14.520350",id:"14",timestamp:"2020-09-13T16:52:57Z",SWH:"1.16",plength:"310.4",windSpeed:"4.45",pdirection:"166.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.15",geometry:{type:"Point",coordinates:[14.610882,54.084145]},geometry_name:"geom",properties:{lat:"54.084145",lon:"14.610882",id:"15",timestamp:"2020-09-13T16:52:57Z",SWH:"1.00",plength:"210.4",windSpeed:"4.05",pdirection:"170.5"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.16",geometry:{type:"Point",coordinates:[14.701414,54.092651]},geometry_name:"geom",properties:{lat:"54.092651",lon:"14.701414",id:"16",timestamp:"2020-09-13T16:52:57Z",SWH:"0.98",plength:"254.7",windSpeed:"4.40",pdirection:"174.3"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.17",geometry:{type:"Point",coordinates:[14.792017,54.101032]},geometry_name:"geom",properties:{lat:"54.101032",lon:"14.792017",id:"17",timestamp:"2020-09-13T16:52:57Z",SWH:"1.10",plength:"475.4",windSpeed:"4.45",pdirection:"158.2"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.18",geometry:{type:"Point",coordinates:[14.882627,54.109398]},geometry_name:"geom",properties:{lat:"54.109398",lon:"14.882627",id:"18",timestamp:"2020-09-13T16:52:57Z",SWH:"0.94",plength:"188.2",windSpeed:"4.25",pdirection:"107.1"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.19",geometry:{type:"Point",coordinates:[14.973297,54.117649]},geometry_name:"geom",properties:{lat:"54.117649",lon:"14.973297",id:"19",timestamp:"2020-09-13T16:52:57Z",SWH:"0.91",plength:"404.8",windSpeed:"4.00",pdirection:"161.6"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.20",geometry:{type:"Point",coordinates:[15.063984,54.12587]},geometry_name:"geom",properties:{lat:"54.125870",lon:"15.063984",id:"20",timestamp:"2020-09-13T16:52:57Z",SWH:"0.90",plength:"170.3",windSpeed:"4.10",pdirection:"176.2"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.21",geometry:{type:"Point",coordinates:[15.154721,54.133991]},geometry_name:"geom",properties:{lat:"54.133991",lon:"15.154721",id:"21",timestamp:"2020-09-13T16:52:57Z",SWH:"0.69",plength:"475.4",windSpeed:"4.00",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.22",geometry:{type:"Point",coordinates:[14.052757,54.085644]},geometry_name:"geom",properties:{lat:"54.085644",lon:"14.052757",id:"22",timestamp:"2020-09-13T16:52:57Z",SWH:"0.28",plength:"475.4",windSpeed:"4.25",pdirection:"21.8"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.26",geometry:{type:"Point",coordinates:[14.414745,54.120781]},geometry_name:"geom",properties:{lat:"54.120781",lon:"14.414745",id:"26",timestamp:"2020-09-13T16:52:57Z",SWH:"1.10",plength:"129.3",windSpeed:"4.20",pdirection:"45.0"}},{type:"Feature",id:"S1A_IW_GRDH_1SDV_20200913T165301_20200913T165326_034343_03FE2F_9368_WAVE.27",geometry:{type:"Point",coordinates:[14.505316,54.129433]},geometry_name:"geom",properties:{lat:"54.129433",lon:"14.505316",id:"27",timestamp:"2020-09-13T16:52:57Z",SWH:"0.50",plength:"310.4",windSpeed:"4.60",pdirection:"14.0"}}]};let Z7e=(()=>{class c{constructor(){this.sunlightForm=new P_({x:new Cf(0,YS.required),y:new Cf(0,YS.required)})}ngOnInit(){this.sunlightForm.valueChanges.subscribe(l=>{this.changeHandler(parseInt(l.x.toString(),10)/100,parseInt(l.y.toString(),10)/100)})}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["app-sunlight"]],inputs:{changeHandler:"changeHandler"},decls:15,vars:1,consts:[["clrForm","","clrLayout","horizontal",3,"formGroup"],["type","range","min","-100","max","100","value","0","clrInput","","formControlName","x",1,"ukis-range-input"],["type","range","min","-100","max","100","value","0","clrInput","","formControlName","y",1,"ukis-range-input"]],template:function(l,h){1&l&&(U(0,"form",0)(1,"label"),ve(2,"Sun position"),H(),U(3,"clr-input-container")(4,"label"),ve(5,"x"),H(),xe(6,"input",1),U(7,"clr-control-helper"),ve(8,"east -> west"),H()(),U(9,"clr-input-container")(10,"label"),ve(11,"y"),H(),xe(12,"input",2),U(13,"clr-control-helper"),ve(14,"south -> north"),H()()()),2&l&&z("formGroup",h.sunlightForm)},dependencies:[Qr,qM,Vk,TK,ZM,M1,AM,ql,n1,Na,SM,O_,RM]}),c})(),K7e=(()=>{class c{constructor(){this.interpolationForm=new P_({power:new Cf(2,YS.required),smooth:new Cf(!0,YS.required),labels:new Cf(!1,YS.required)})}ngOnInit(){this.interpolationForm.valueChanges.subscribe(l=>{this.changeHandler(l.power,l.smooth,l.labels)})}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["app-interpolation-settings"]],inputs:{changeHandler:"changeHandler"},decls:21,vars:1,consts:[["clrForm","","clrLayout","vertical",3,"formGroup"],["type","range","min","1","max","7","value","1","clrInput","","formControlName","power",1,"ukis-range-input"],["type","checkbox","clrCheckbox","","name","options","value","true","formControlName","smooth",1,"ukis-range-input"],["type","checkbox","clrCheckbox","","name","options","value","false","formControlName","labels",1,"ukis-range-input"]],template:function(l,h){1&l&&(U(0,"form",0)(1,"clr-input-container")(2,"label"),ve(3,"Power"),H(),xe(4,"input",1),U(5,"clr-control-helper"),ve(6,"inverse distance weighting power"),H()(),U(7,"clr-checkbox-container")(8,"label"),ve(9,"Smoothing"),H(),U(10,"clr-checkbox-wrapper"),xe(11,"input",2),U(12,"label"),ve(13,"Smoothing"),H()()(),U(14,"clr-checkbox-container")(15,"label"),ve(16,"Labels"),H(),U(17,"clr-checkbox-wrapper"),xe(18,"input",3),U(19,"label"),ve(20,"Show labels"),H()()()()),2&l&&z("formGroup",h.interpolationForm)},dependencies:[Qr,qM,Vk,TK,C1,$Be,w1,ZM,M1,AM,ql,n1,R_,Na,SM,O_,RM]}),c})();const qm=1e3,Do=1001,ws=1003,Gr=1006,Vf=1008,Bf=1009,pT=1012,Uf=1015,Tv=1016,wv=1020,qo=1023,$m=1026,Cv=1027,mT=2300,xv=2301,Ev=2400,Mv=2401,zf=3e3,vr=3001,gT=35044,yT=35048;class Gf{addEventListener(a,l){void 0===this._listeners&&(this._listeners={});const h=this._listeners;void 0===h[a]&&(h[a]=[]),-1===h[a].indexOf(l)&&h[a].push(l)}hasEventListener(a,l){if(void 0===this._listeners)return!1;const h=this._listeners;return void 0!==h[a]&&-1!==h[a].indexOf(l)}removeEventListener(a,l){if(void 0===this._listeners)return;const d=this._listeners[a];if(void 0!==d){const f=d.indexOf(l);-1!==f&&d.splice(f,1)}}dispatchEvent(a){if(void 0===this._listeners)return;const h=this._listeners[a.type];if(void 0!==h){a.target=this;const d=h.slice(0);for(let f=0,m=d.length;f<m;f++)d[f].call(this,a);a.target=null}}}const Ao=[];for(let c=0;c<256;c++)Ao[c]=(c<16?"0":"")+c.toString(16);let oA=1234567;const Zm=Math.PI/180,_T=180/Math.PI;function Cl(){const c=4294967295*Math.random()|0,a=4294967295*Math.random()|0,l=4294967295*Math.random()|0,h=4294967295*Math.random()|0;return(Ao[255&c]+Ao[c>>8&255]+Ao[c>>16&255]+Ao[c>>24&255]+"-"+Ao[255&a]+Ao[a>>8&255]+"-"+Ao[a>>16&15|64]+Ao[a>>24&255]+"-"+Ao[63&l|128]+Ao[l>>8&255]+"-"+Ao[l>>16&255]+Ao[l>>24&255]+Ao[255&h]+Ao[h>>8&255]+Ao[h>>16&255]+Ao[h>>24&255]).toUpperCase()}function Io(c,a,l){return Math.max(a,Math.min(l,c))}function tV(c,a){return(c%a+a)%a}function vT(c,a,l){return(1-l)*c+l*a}function nV(c){return 0==(c&c-1)&&0!==c}function Cne(c){return Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))}function xne(c){return Math.pow(2,Math.floor(Math.log(c)/Math.LN2))}var uWe=Object.freeze({__proto__:null,DEG2RAD:Zm,RAD2DEG:_T,generateUUID:Cl,clamp:Io,euclideanModulo:tV,mapLinear:function Kje(c,a,l,h,d){return h+(c-a)*(d-h)/(l-a)},inverseLerp:function Jje(c,a,l){return c!==a?(l-c)/(a-c):0},lerp:vT,damp:function Qje(c,a,l,h){return vT(c,a,1-Math.exp(-l*h))},pingpong:function eWe(c,a=1){return a-Math.abs(tV(c,2*a)-a)},smoothstep:function tWe(c,a,l){return c<=a?0:c>=l?1:(c=(c-a)/(l-a))*c*(3-2*c)},smootherstep:function nWe(c,a,l){return c<=a?0:c>=l?1:(c=(c-a)/(l-a))*c*c*(c*(6*c-15)+10)},randInt:function iWe(c,a){return c+Math.floor(Math.random()*(a-c+1))},randFloat:function rWe(c,a){return c+Math.random()*(a-c)},randFloatSpread:function sWe(c){return c*(.5-Math.random())},seededRandom:function oWe(c){return void 0!==c&&(oA=c%2147483647),oA=16807*oA%2147483647,(oA-1)/2147483646},degToRad:function aWe(c){return c*Zm},radToDeg:function lWe(c){return c*_T},isPowerOfTwo:nV,ceilPowerOfTwo:Cne,floorPowerOfTwo:xne,setQuaternionFromProperEuler:function cWe(c,a,l,h,d){const f=Math.cos,m=Math.sin,g=f(l/2),y=m(l/2),_=f((a+h)/2),v=m((a+h)/2),b=f((a-h)/2),S=m((a-h)/2),T=f((h-a)/2),x=m((h-a)/2);switch(d){case"XYX":c.set(g*v,y*b,y*S,g*_);break;case"YZY":c.set(y*S,g*v,y*b,g*_);break;case"ZXZ":c.set(y*b,y*S,g*v,g*_);break;case"XZX":c.set(g*v,y*x,y*T,g*_);break;case"YXY":c.set(y*T,g*v,y*x,g*_);break;case"ZYZ":c.set(y*x,y*T,g*v,g*_);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+d)}}});class tt{constructor(a=0,l=0){this.x=a,this.y=l}get width(){return this.x}set width(a){this.x=a}get height(){return this.y}set height(a){this.y=a}set(a,l){return this.x=a,this.y=l,this}setScalar(a){return this.x=a,this.y=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setComponent(a,l){switch(a){case 0:this.x=l;break;case 1:this.y=l;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y)}copy(a){return this.x=a.x,this.y=a.y,this}add(a,l){return void 0!==l?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,l)):(this.x+=a.x,this.y+=a.y,this)}addScalar(a){return this.x+=a,this.y+=a,this}addVectors(a,l){return this.x=a.x+l.x,this.y=a.y+l.y,this}addScaledVector(a,l){return this.x+=a.x*l,this.y+=a.y*l,this}sub(a,l){return void 0!==l?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,l)):(this.x-=a.x,this.y-=a.y,this)}subScalar(a){return this.x-=a,this.y-=a,this}subVectors(a,l){return this.x=a.x-l.x,this.y=a.y-l.y,this}multiply(a){return this.x*=a.x,this.y*=a.y,this}multiplyScalar(a){return this.x*=a,this.y*=a,this}divide(a){return this.x/=a.x,this.y/=a.y,this}divideScalar(a){return this.multiplyScalar(1/a)}applyMatrix3(a){const l=this.x,h=this.y,d=a.elements;return this.x=d[0]*l+d[3]*h+d[6],this.y=d[1]*l+d[4]*h+d[7],this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this}clamp(a,l){return this.x=Math.max(a.x,Math.min(l.x,this.x)),this.y=Math.max(a.y,Math.min(l.y,this.y)),this}clampScalar(a,l){return this.x=Math.max(a,Math.min(l,this.x)),this.y=Math.max(a,Math.min(l,this.y)),this}clampLength(a,l){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(a,Math.min(l,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(a){return this.x*a.x+this.y*a.y}cross(a){return this.x*a.y-this.y*a.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const l=this.x-a.x,h=this.y-a.y;return l*l+h*h}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,l){return this.x+=(a.x-this.x)*l,this.y+=(a.y-this.y)*l,this}lerpVectors(a,l,h){return this.x=a.x+(l.x-a.x)*h,this.y=a.y+(l.y-a.y)*h,this}equals(a){return a.x===this.x&&a.y===this.y}fromArray(a,l=0){return this.x=a[l],this.y=a[l+1],this}toArray(a=[],l=0){return a[l]=this.x,a[l+1]=this.y,a}fromBufferAttribute(a,l,h){return void 0!==h&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(l),this.y=a.getY(l),this}rotateAround(a,l){const h=Math.cos(l),d=Math.sin(l),f=this.x-a.x,m=this.y-a.y;return this.x=f*h-m*d+a.x,this.y=f*d+m*h+a.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}tt.prototype.isVector2=!0;class po{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(a,l,h,d,f,m,g,y,_){const v=this.elements;return v[0]=a,v[1]=d,v[2]=g,v[3]=l,v[4]=f,v[5]=y,v[6]=h,v[7]=m,v[8]=_,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(a){const l=this.elements,h=a.elements;return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],this}extractBasis(a,l,h){return a.setFromMatrix3Column(this,0),l.setFromMatrix3Column(this,1),h.setFromMatrix3Column(this,2),this}setFromMatrix4(a){const l=a.elements;return this.set(l[0],l[4],l[8],l[1],l[5],l[9],l[2],l[6],l[10]),this}multiply(a){return this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,l){const h=a.elements,d=l.elements,f=this.elements,m=h[0],g=h[3],y=h[6],_=h[1],v=h[4],b=h[7],S=h[2],T=h[5],x=h[8],E=d[0],I=d[3],M=d[6],D=d[1],L=d[4],P=d[7],F=d[2],B=d[5],G=d[8];return f[0]=m*E+g*D+y*F,f[3]=m*I+g*L+y*B,f[6]=m*M+g*P+y*G,f[1]=_*E+v*D+b*F,f[4]=_*I+v*L+b*B,f[7]=_*M+v*P+b*G,f[2]=S*E+T*D+x*F,f[5]=S*I+T*L+x*B,f[8]=S*M+T*P+x*G,this}multiplyScalar(a){const l=this.elements;return l[0]*=a,l[3]*=a,l[6]*=a,l[1]*=a,l[4]*=a,l[7]*=a,l[2]*=a,l[5]*=a,l[8]*=a,this}determinant(){const a=this.elements,l=a[0],h=a[1],d=a[2],f=a[3],m=a[4],g=a[5],y=a[6],_=a[7],v=a[8];return l*m*v-l*g*_-h*f*v+h*g*y+d*f*_-d*m*y}invert(){const a=this.elements,l=a[0],h=a[1],d=a[2],f=a[3],m=a[4],g=a[5],y=a[6],_=a[7],v=a[8],b=v*m-g*_,S=g*y-v*f,T=_*f-m*y,x=l*b+h*S+d*T;if(0===x)return this.set(0,0,0,0,0,0,0,0,0);const E=1/x;return a[0]=b*E,a[1]=(d*_-v*h)*E,a[2]=(g*h-d*m)*E,a[3]=S*E,a[4]=(v*l-d*y)*E,a[5]=(d*f-g*l)*E,a[6]=T*E,a[7]=(h*y-_*l)*E,a[8]=(m*l-h*f)*E,this}transpose(){let a;const l=this.elements;return a=l[1],l[1]=l[3],l[3]=a,a=l[2],l[2]=l[6],l[6]=a,a=l[5],l[5]=l[7],l[7]=a,this}getNormalMatrix(a){return this.setFromMatrix4(a).invert().transpose()}transposeIntoArray(a){const l=this.elements;return a[0]=l[0],a[1]=l[3],a[2]=l[6],a[3]=l[1],a[4]=l[4],a[5]=l[7],a[6]=l[2],a[7]=l[5],a[8]=l[8],this}setUvTransform(a,l,h,d,f,m,g){const y=Math.cos(f),_=Math.sin(f);return this.set(h*y,h*_,-h*(y*m+_*g)+m+a,-d*_,d*y,-d*(-_*m+y*g)+g+l,0,0,1),this}scale(a,l){const h=this.elements;return h[0]*=a,h[3]*=a,h[6]*=a,h[1]*=l,h[4]*=l,h[7]*=l,this}rotate(a){const l=Math.cos(a),h=Math.sin(a),d=this.elements,f=d[0],m=d[3],g=d[6],y=d[1],_=d[4],v=d[7];return d[0]=l*f+h*y,d[3]=l*m+h*_,d[6]=l*g+h*v,d[1]=-h*f+l*y,d[4]=-h*m+l*_,d[7]=-h*g+l*v,this}translate(a,l){const h=this.elements;return h[0]+=a*h[2],h[3]+=a*h[5],h[6]+=a*h[8],h[1]+=l*h[2],h[4]+=l*h[5],h[7]+=l*h[8],this}equals(a){const l=this.elements,h=a.elements;for(let d=0;d<9;d++)if(l[d]!==h[d])return!1;return!0}fromArray(a,l=0){for(let h=0;h<9;h++)this.elements[h]=a[h+l];return this}toArray(a=[],l=0){const h=this.elements;return a[l]=h[0],a[l+1]=h[1],a[l+2]=h[2],a[l+3]=h[3],a[l+4]=h[4],a[l+5]=h[5],a[l+6]=h[6],a[l+7]=h[7],a[l+8]=h[8],a}clone(){return(new this.constructor).fromArray(this.elements)}}function Ene(c){for(let a=c.length-1;a>=0;--a)if(c[a]>65535)return!0;return!1}function bT(c){return document.createElementNS("http://www.w3.org/1999/xhtml",c)}po.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Mne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},qc={h:0,s:0,l:0},aA={h:0,s:0,l:0};function iV(c,a,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?c+6*(a-c)*l:l<.5?a:l<2/3?c+6*(a-c)*(2/3-l):c}function Av(c){return c<.04045?.0773993808*c:Math.pow(.9478672986*c+.0521327014,2.4)}function rV(c){return c<.0031308?12.92*c:1.055*Math.pow(c,.41666)-.055}let Iv,Pt=(()=>{class c{constructor(l,h,d){return void 0===h&&void 0===d?this.set(l):this.setRGB(l,h,d)}set(l){return l&&l.isColor?this.copy(l):"number"==typeof l?this.setHex(l):"string"==typeof l&&this.setStyle(l),this}setScalar(l){return this.r=l,this.g=l,this.b=l,this}setHex(l){return l=Math.floor(l),this.r=(l>>16&255)/255,this.g=(l>>8&255)/255,this.b=(255&l)/255,this}setRGB(l,h,d){return this.r=l,this.g=h,this.b=d,this}setHSL(l,h,d){if(l=tV(l,1),h=Io(h,0,1),d=Io(d,0,1),0===h)this.r=this.g=this.b=d;else{const f=d<=.5?d*(1+h):d+h-d*h,m=2*d-f;this.r=iV(m,f,l+1/3),this.g=iV(m,f,l),this.b=iV(m,f,l-1/3)}return this}setStyle(l){function h(f){void 0!==f&&parseFloat(f)<1&&console.warn("THREE.Color: Alpha component of "+l+" will be ignored.")}let d;if(d=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(l)){let f;const g=d[2];switch(d[1]){case"rgb":case"rgba":if(f=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(255,parseInt(f[1],10))/255,this.g=Math.min(255,parseInt(f[2],10))/255,this.b=Math.min(255,parseInt(f[3],10))/255,h(f[4]),this;if(f=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g))return this.r=Math.min(100,parseInt(f[1],10))/100,this.g=Math.min(100,parseInt(f[2],10))/100,this.b=Math.min(100,parseInt(f[3],10))/100,h(f[4]),this;break;case"hsl":case"hsla":if(f=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(g)){const y=parseFloat(f[1])/360,_=parseInt(f[2],10)/100,v=parseInt(f[3],10)/100;return h(f[4]),this.setHSL(y,_,v)}}}else if(d=/^\#([A-Fa-f\d]+)$/.exec(l)){const f=d[1],m=f.length;if(3===m)return this.r=parseInt(f.charAt(0)+f.charAt(0),16)/255,this.g=parseInt(f.charAt(1)+f.charAt(1),16)/255,this.b=parseInt(f.charAt(2)+f.charAt(2),16)/255,this;if(6===m)return this.r=parseInt(f.charAt(0)+f.charAt(1),16)/255,this.g=parseInt(f.charAt(2)+f.charAt(3),16)/255,this.b=parseInt(f.charAt(4)+f.charAt(5),16)/255,this}return l&&l.length>0?this.setColorName(l):this}setColorName(l){const h=Mne[l.toLowerCase()];return void 0!==h?this.setHex(h):console.warn("THREE.Color: Unknown color "+l),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(l){return this.r=l.r,this.g=l.g,this.b=l.b,this}copySRGBToLinear(l){return this.r=Av(l.r),this.g=Av(l.g),this.b=Av(l.b),this}copyLinearToSRGB(l){return this.r=rV(l.r),this.g=rV(l.g),this.b=rV(l.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(l){const h=this.r,d=this.g,f=this.b,m=Math.max(h,d,f),g=Math.min(h,d,f);let y,_;const v=(g+m)/2;if(g===m)y=0,_=0;else{const b=m-g;switch(_=v<=.5?b/(m+g):b/(2-m-g),m){case h:y=(d-f)/b+(d<f?6:0);break;case d:y=(f-h)/b+2;break;case f:y=(h-d)/b+4}y/=6}return l.h=y,l.s=_,l.l=v,l}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(l,h,d){return this.getHSL(qc),qc.h+=l,qc.s+=h,qc.l+=d,this.setHSL(qc.h,qc.s,qc.l),this}add(l){return this.r+=l.r,this.g+=l.g,this.b+=l.b,this}addColors(l,h){return this.r=l.r+h.r,this.g=l.g+h.g,this.b=l.b+h.b,this}addScalar(l){return this.r+=l,this.g+=l,this.b+=l,this}sub(l){return this.r=Math.max(0,this.r-l.r),this.g=Math.max(0,this.g-l.g),this.b=Math.max(0,this.b-l.b),this}multiply(l){return this.r*=l.r,this.g*=l.g,this.b*=l.b,this}multiplyScalar(l){return this.r*=l,this.g*=l,this.b*=l,this}lerp(l,h){return this.r+=(l.r-this.r)*h,this.g+=(l.g-this.g)*h,this.b+=(l.b-this.b)*h,this}lerpColors(l,h,d){return this.r=l.r+(h.r-l.r)*d,this.g=l.g+(h.g-l.g)*d,this.b=l.b+(h.b-l.b)*d,this}lerpHSL(l,h){this.getHSL(qc),l.getHSL(aA);const d=vT(qc.h,aA.h,h),f=vT(qc.s,aA.s,h),m=vT(qc.l,aA.l,h);return this.setHSL(d,f,m),this}equals(l){return l.r===this.r&&l.g===this.g&&l.b===this.b}fromArray(l,h=0){return this.r=l[h],this.g=l[h+1],this.b=l[h+2],this}toArray(l=[],h=0){return l[h]=this.r,l[h+1]=this.g,l[h+2]=this.b,l}fromBufferAttribute(l,h){return this.r=l.getX(h),this.g=l.getY(h),this.b=l.getZ(h),!0===l.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}return c.NAMES=Mne,c})();Pt.prototype.isColor=!0,Pt.prototype.r=1,Pt.prototype.g=1,Pt.prototype.b=1;class Km{static getDataURL(a){if(/^data:/i.test(a.src)||typeof HTMLCanvasElement>"u")return a.src;let l;if(a instanceof HTMLCanvasElement)l=a;else{void 0===Iv&&(Iv=bT("canvas")),Iv.width=a.width,Iv.height=a.height;const h=Iv.getContext("2d");a instanceof ImageData?h.putImageData(a,0,0):h.drawImage(a,0,0,a.width,a.height),l=Iv}return l.width>2048||l.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",a),l.toDataURL("image/jpeg",.6)):l.toDataURL("image/png")}static sRGBToLinear(a){if(typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap){const l=bT("canvas");l.width=a.width,l.height=a.height;const h=l.getContext("2d");h.drawImage(a,0,0,a.width,a.height);const d=h.getImageData(0,0,a.width,a.height),f=d.data;for(let m=0;m<f.length;m++)f[m]=255*Av(f[m]/255);return h.putImageData(d,0,0),l}if(a.data){const l=a.data.slice(0);for(let h=0;h<l.length;h++)l[h]=l instanceof Uint8Array||l instanceof Uint8ClampedArray?Math.floor(255*Av(l[h]/255)):Av(l[h]);return{data:l,width:a.width,height:a.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),a}}let dWe=0;class Cs extends Gf{constructor(a=Cs.DEFAULT_IMAGE,l=Cs.DEFAULT_MAPPING,h=Do,d=Do,f=Gr,m=Vf,g=qo,y=Bf,_=1,v=zf){super(),Object.defineProperty(this,"id",{value:dWe++}),this.uuid=Cl(),this.name="",this.image=a,this.mipmaps=[],this.mapping=l,this.wrapS=h,this.wrapT=d,this.magFilter=f,this.minFilter=m,this.anisotropy=_,this.format=g,this.internalFormat=null,this.type=y,this.offset=new tt(0,0),this.repeat=new tt(1,1),this.center=new tt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new po,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=v,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(a){return this.name=a.name,this.image=a.image,this.mipmaps=a.mipmaps.slice(0),this.mapping=a.mapping,this.wrapS=a.wrapS,this.wrapT=a.wrapT,this.magFilter=a.magFilter,this.minFilter=a.minFilter,this.anisotropy=a.anisotropy,this.format=a.format,this.internalFormat=a.internalFormat,this.type=a.type,this.offset.copy(a.offset),this.repeat.copy(a.repeat),this.center.copy(a.center),this.rotation=a.rotation,this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrix.copy(a.matrix),this.generateMipmaps=a.generateMipmaps,this.premultiplyAlpha=a.premultiplyAlpha,this.flipY=a.flipY,this.unpackAlignment=a.unpackAlignment,this.encoding=a.encoding,this.userData=JSON.parse(JSON.stringify(a.userData)),this}toJSON(a){const l=void 0===a||"string"==typeof a;if(!l&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];const h={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const d=this.image;if(void 0===d.uuid&&(d.uuid=Cl()),!l&&void 0===a.images[d.uuid]){let f;if(Array.isArray(d)){f=[];for(let m=0,g=d.length;m<g;m++)f.push(sV(d[m].isDataTexture?d[m].image:d[m]))}else f=sV(d);a.images[d.uuid]={uuid:d.uuid,url:f}}h.image=d.uuid}return"{}"!==JSON.stringify(this.userData)&&(h.userData=this.userData),l||(a.textures[this.uuid]=h),h}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(a){if(300!==this.mapping)return a;if(a.applyMatrix3(this.matrix),a.x<0||a.x>1)switch(this.wrapS){case qm:a.x=a.x-Math.floor(a.x);break;case Do:a.x=a.x<0?0:1;break;case 1002:a.x=1===Math.abs(Math.floor(a.x)%2)?Math.ceil(a.x)-a.x:a.x-Math.floor(a.x)}if(a.y<0||a.y>1)switch(this.wrapT){case qm:a.y=a.y-Math.floor(a.y);break;case Do:a.y=a.y<0?0:1;break;case 1002:a.y=1===Math.abs(Math.floor(a.y)%2)?Math.ceil(a.y)-a.y:a.y-Math.floor(a.y)}return this.flipY&&(a.y=1-a.y),a}set needsUpdate(a){!0===a&&this.version++}}function sV(c){return typeof HTMLImageElement<"u"&&c instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&c instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&c instanceof ImageBitmap?Km.getDataURL(c):c.data?{data:Array.prototype.slice.call(c.data),width:c.width,height:c.height,type:c.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Cs.DEFAULT_IMAGE=void 0,Cs.DEFAULT_MAPPING=300,Cs.prototype.isTexture=!0;class hr{constructor(a=0,l=0,h=0,d=1){this.x=a,this.y=l,this.z=h,this.w=d}get width(){return this.z}set width(a){this.z=a}get height(){return this.w}set height(a){this.w=a}set(a,l,h,d){return this.x=a,this.y=l,this.z=h,this.w=d,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this.w=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setW(a){return this.w=a,this}setComponent(a,l){switch(a){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;case 3:this.w=l;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this}add(a,l){return void 0!==l?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,l)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this.w+=a.w,this)}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this.w+=a,this}addVectors(a,l){return this.x=a.x+l.x,this.y=a.y+l.y,this.z=a.z+l.z,this.w=a.w+l.w,this}addScaledVector(a,l){return this.x+=a.x*l,this.y+=a.y*l,this.z+=a.z*l,this.w+=a.w*l,this}sub(a,l){return void 0!==l?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,l)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this.w-=a.w,this)}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this.w-=a,this}subVectors(a,l){return this.x=a.x-l.x,this.y=a.y-l.y,this.z=a.z-l.z,this.w=a.w-l.w,this}multiply(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z,this.w*=a.w,this}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this}applyMatrix4(a){const l=this.x,h=this.y,d=this.z,f=this.w,m=a.elements;return this.x=m[0]*l+m[4]*h+m[8]*d+m[12]*f,this.y=m[1]*l+m[5]*h+m[9]*d+m[13]*f,this.z=m[2]*l+m[6]*h+m[10]*d+m[14]*f,this.w=m[3]*l+m[7]*h+m[11]*d+m[15]*f,this}divideScalar(a){return this.multiplyScalar(1/a)}setAxisAngleFromQuaternion(a){this.w=2*Math.acos(a.w);const l=Math.sqrt(1-a.w*a.w);return l<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=a.x/l,this.y=a.y/l,this.z=a.z/l),this}setAxisAngleFromRotationMatrix(a){let l,h,d,f;const y=a.elements,_=y[0],v=y[4],b=y[8],S=y[1],T=y[5],x=y[9],E=y[2],I=y[6],M=y[10];if(Math.abs(v-S)<.01&&Math.abs(b-E)<.01&&Math.abs(x-I)<.01){if(Math.abs(v+S)<.1&&Math.abs(b+E)<.1&&Math.abs(x+I)<.1&&Math.abs(_+T+M-3)<.1)return this.set(1,0,0,0),this;l=Math.PI;const L=(_+1)/2,P=(T+1)/2,F=(M+1)/2,B=(v+S)/4,G=(b+E)/4,$=(x+I)/4;return L>P&&L>F?L<.01?(h=0,d=.707106781,f=.707106781):(h=Math.sqrt(L),d=B/h,f=G/h):P>F?P<.01?(h=.707106781,d=0,f=.707106781):(d=Math.sqrt(P),h=B/d,f=$/d):F<.01?(h=.707106781,d=.707106781,f=0):(f=Math.sqrt(F),h=G/f,d=$/f),this.set(h,d,f,l),this}let D=Math.sqrt((I-x)*(I-x)+(b-E)*(b-E)+(S-v)*(S-v));return Math.abs(D)<.001&&(D=1),this.x=(I-x)/D,this.y=(b-E)/D,this.z=(S-v)/D,this.w=Math.acos((_+T+M-1)/2),this}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this.w=Math.min(this.w,a.w),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this.w=Math.max(this.w,a.w),this}clamp(a,l){return this.x=Math.max(a.x,Math.min(l.x,this.x)),this.y=Math.max(a.y,Math.min(l.y,this.y)),this.z=Math.max(a.z,Math.min(l.z,this.z)),this.w=Math.max(a.w,Math.min(l.w,this.w)),this}clampScalar(a,l){return this.x=Math.max(a,Math.min(l,this.x)),this.y=Math.max(a,Math.min(l,this.y)),this.z=Math.max(a,Math.min(l,this.z)),this.w=Math.max(a,Math.min(l,this.w)),this}clampLength(a,l){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(a,Math.min(l,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,l){return this.x+=(a.x-this.x)*l,this.y+=(a.y-this.y)*l,this.z+=(a.z-this.z)*l,this.w+=(a.w-this.w)*l,this}lerpVectors(a,l,h){return this.x=a.x+(l.x-a.x)*h,this.y=a.y+(l.y-a.y)*h,this.z=a.z+(l.z-a.z)*h,this.w=a.w+(l.w-a.w)*h,this}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w}fromArray(a,l=0){return this.x=a[l],this.y=a[l+1],this.z=a[l+2],this.w=a[l+3],this}toArray(a=[],l=0){return a[l]=this.x,a[l+1]=this.y,a[l+2]=this.z,a[l+3]=this.w,a}fromBufferAttribute(a,l,h){return void 0!==h&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(l),this.y=a.getY(l),this.z=a.getZ(l),this.w=a.getW(l),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}hr.prototype.isVector4=!0;class Ql extends Gf{constructor(a,l,h={}){super(),this.width=a,this.height=l,this.depth=1,this.scissor=new hr(0,0,a,l),this.scissorTest=!1,this.viewport=new hr(0,0,a,l),this.texture=new Cs(void 0,h.mapping,h.wrapS,h.wrapT,h.magFilter,h.minFilter,h.format,h.type,h.anisotropy,h.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:a,height:l,depth:1},this.texture.generateMipmaps=void 0!==h.generateMipmaps&&h.generateMipmaps,this.texture.internalFormat=void 0!==h.internalFormat?h.internalFormat:null,this.texture.minFilter=void 0!==h.minFilter?h.minFilter:Gr,this.depthBuffer=void 0===h.depthBuffer||h.depthBuffer,this.stencilBuffer=void 0!==h.stencilBuffer&&h.stencilBuffer,this.depthTexture=void 0!==h.depthTexture?h.depthTexture:null}setTexture(a){a.image={width:this.width,height:this.height,depth:this.depth},this.texture=a}setSize(a,l,h=1){(this.width!==a||this.height!==l||this.depth!==h)&&(this.width=a,this.height=l,this.depth=h,this.texture.image.width=a,this.texture.image.height=l,this.texture.image.depth=h,this.dispose()),this.viewport.set(0,0,a,l),this.scissor.set(0,0,a,l)}clone(){return(new this.constructor).copy(this)}copy(a){return this.width=a.width,this.height=a.height,this.depth=a.depth,this.viewport.copy(a.viewport),this.texture=a.texture.clone(),this.texture.image=Object.assign({},a.texture.image),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Ql.prototype.isWebGLRenderTarget=!0,class fWe extends Ql{constructor(a,l,h){super(a,l);const d=this.texture;this.texture=[];for(let f=0;f<h;f++)this.texture[f]=d.clone()}setSize(a,l,h=1){if(this.width!==a||this.height!==l||this.depth!==h){this.width=a,this.height=l,this.depth=h;for(let d=0,f=this.texture.length;d<f;d++)this.texture[d].image.width=a,this.texture[d].image.height=l,this.texture[d].image.depth=h;this.dispose()}return this.viewport.set(0,0,a,l),this.scissor.set(0,0,a,l),this}copy(a){this.dispose(),this.width=a.width,this.height=a.height,this.depth=a.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=a.depthBuffer,this.stencilBuffer=a.stencilBuffer,this.depthTexture=a.depthTexture,this.texture.length=0;for(let l=0,h=a.texture.length;l<h;l++)this.texture[l]=a.texture[l].clone();return this}}.prototype.isWebGLMultipleRenderTargets=!0;class oV extends Ql{constructor(a,l,h={}){super(a,l,h),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===h.ignoreDepth||h.ignoreDepth,this.useRenderToTexture=void 0!==h.useRenderToTexture&&h.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(a){return super.copy.call(this,a),this.samples=a.samples,this.useRenderToTexture=a.useRenderToTexture,this.useRenderbuffer=a.useRenderbuffer,this}}oV.prototype.isWebGLMultisampleRenderTarget=!0;class Js{constructor(a=0,l=0,h=0,d=1){this._x=a,this._y=l,this._z=h,this._w=d}static slerp(a,l,h,d){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),h.slerpQuaternions(a,l,d)}static slerpFlat(a,l,h,d,f,m,g){let y=h[d+0],_=h[d+1],v=h[d+2],b=h[d+3];const S=f[m+0],T=f[m+1],x=f[m+2],E=f[m+3];if(0===g)return a[l+0]=y,a[l+1]=_,a[l+2]=v,void(a[l+3]=b);if(1===g)return a[l+0]=S,a[l+1]=T,a[l+2]=x,void(a[l+3]=E);if(b!==E||y!==S||_!==T||v!==x){let I=1-g;const M=y*S+_*T+v*x+b*E,D=M>=0?1:-1,L=1-M*M;if(L>Number.EPSILON){const F=Math.sqrt(L),B=Math.atan2(F,M*D);I=Math.sin(I*B)/F,g=Math.sin(g*B)/F}const P=g*D;if(y=y*I+S*P,_=_*I+T*P,v=v*I+x*P,b=b*I+E*P,I===1-g){const F=1/Math.sqrt(y*y+_*_+v*v+b*b);y*=F,_*=F,v*=F,b*=F}}a[l]=y,a[l+1]=_,a[l+2]=v,a[l+3]=b}static multiplyQuaternionsFlat(a,l,h,d,f,m){const g=h[d],y=h[d+1],_=h[d+2],v=h[d+3],b=f[m],S=f[m+1],T=f[m+2],x=f[m+3];return a[l]=g*x+v*b+y*T-_*S,a[l+1]=y*x+v*S+_*b-g*T,a[l+2]=_*x+v*T+g*S-y*b,a[l+3]=v*x-g*b-y*S-_*T,a}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get w(){return this._w}set w(a){this._w=a,this._onChangeCallback()}set(a,l,h,d){return this._x=a,this._y=l,this._z=h,this._w=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(a){return this._x=a.x,this._y=a.y,this._z=a.z,this._w=a.w,this._onChangeCallback(),this}setFromEuler(a,l){if(!a||!a.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const h=a._x,d=a._y,f=a._z,m=a._order,g=Math.cos,y=Math.sin,_=g(h/2),v=g(d/2),b=g(f/2),S=y(h/2),T=y(d/2),x=y(f/2);switch(m){case"XYZ":this._x=S*v*b+_*T*x,this._y=_*T*b-S*v*x,this._z=_*v*x+S*T*b,this._w=_*v*b-S*T*x;break;case"YXZ":this._x=S*v*b+_*T*x,this._y=_*T*b-S*v*x,this._z=_*v*x-S*T*b,this._w=_*v*b+S*T*x;break;case"ZXY":this._x=S*v*b-_*T*x,this._y=_*T*b+S*v*x,this._z=_*v*x+S*T*b,this._w=_*v*b-S*T*x;break;case"ZYX":this._x=S*v*b-_*T*x,this._y=_*T*b+S*v*x,this._z=_*v*x-S*T*b,this._w=_*v*b+S*T*x;break;case"YZX":this._x=S*v*b+_*T*x,this._y=_*T*b+S*v*x,this._z=_*v*x-S*T*b,this._w=_*v*b-S*T*x;break;case"XZY":this._x=S*v*b-_*T*x,this._y=_*T*b-S*v*x,this._z=_*v*x+S*T*b,this._w=_*v*b+S*T*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+m)}return!1!==l&&this._onChangeCallback(),this}setFromAxisAngle(a,l){const h=l/2,d=Math.sin(h);return this._x=a.x*d,this._y=a.y*d,this._z=a.z*d,this._w=Math.cos(h),this._onChangeCallback(),this}setFromRotationMatrix(a){const l=a.elements,h=l[0],d=l[4],f=l[8],m=l[1],g=l[5],y=l[9],_=l[2],v=l[6],b=l[10],S=h+g+b;if(S>0){const T=.5/Math.sqrt(S+1);this._w=.25/T,this._x=(v-y)*T,this._y=(f-_)*T,this._z=(m-d)*T}else if(h>g&&h>b){const T=2*Math.sqrt(1+h-g-b);this._w=(v-y)/T,this._x=.25*T,this._y=(d+m)/T,this._z=(f+_)/T}else if(g>b){const T=2*Math.sqrt(1+g-h-b);this._w=(f-_)/T,this._x=(d+m)/T,this._y=.25*T,this._z=(y+v)/T}else{const T=2*Math.sqrt(1+b-h-g);this._w=(m-d)/T,this._x=(f+_)/T,this._y=(y+v)/T,this._z=.25*T}return this._onChangeCallback(),this}setFromUnitVectors(a,l){let h=a.dot(l)+1;return h<Number.EPSILON?(h=0,Math.abs(a.x)>Math.abs(a.z)?(this._x=-a.y,this._y=a.x,this._z=0,this._w=h):(this._x=0,this._y=-a.z,this._z=a.y,this._w=h)):(this._x=a.y*l.z-a.z*l.y,this._y=a.z*l.x-a.x*l.z,this._z=a.x*l.y-a.y*l.x,this._w=h),this.normalize()}angleTo(a){return 2*Math.acos(Math.abs(Io(this.dot(a),-1,1)))}rotateTowards(a,l){const h=this.angleTo(a);if(0===h)return this;const d=Math.min(1,l/h);return this.slerp(a,d),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let a=this.length();return 0===a?(this._x=0,this._y=0,this._z=0,this._w=1):(a=1/a,this._x=this._x*a,this._y=this._y*a,this._z=this._z*a,this._w=this._w*a),this._onChangeCallback(),this}multiply(a,l){return void 0!==l?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,l)):this.multiplyQuaternions(this,a)}premultiply(a){return this.multiplyQuaternions(a,this)}multiplyQuaternions(a,l){const h=a._x,d=a._y,f=a._z,m=a._w,g=l._x,y=l._y,_=l._z,v=l._w;return this._x=h*v+m*g+d*_-f*y,this._y=d*v+m*y+f*g-h*_,this._z=f*v+m*_+h*y-d*g,this._w=m*v-h*g-d*y-f*_,this._onChangeCallback(),this}slerp(a,l){if(0===l)return this;if(1===l)return this.copy(a);const h=this._x,d=this._y,f=this._z,m=this._w;let g=m*a._w+h*a._x+d*a._y+f*a._z;if(g<0?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=-a._z,g=-g):this.copy(a),g>=1)return this._w=m,this._x=h,this._y=d,this._z=f,this;const y=1-g*g;if(y<=Number.EPSILON){const T=1-l;return this._w=T*m+l*this._w,this._x=T*h+l*this._x,this._y=T*d+l*this._y,this._z=T*f+l*this._z,this.normalize(),this._onChangeCallback(),this}const _=Math.sqrt(y),v=Math.atan2(_,g),b=Math.sin((1-l)*v)/_,S=Math.sin(l*v)/_;return this._w=m*b+this._w*S,this._x=h*b+this._x*S,this._y=d*b+this._y*S,this._z=f*b+this._z*S,this._onChangeCallback(),this}slerpQuaternions(a,l,h){return this.copy(a).slerp(l,h)}random(){const a=Math.random(),l=Math.sqrt(1-a),h=Math.sqrt(a),d=2*Math.PI*Math.random(),f=2*Math.PI*Math.random();return this.set(l*Math.cos(d),h*Math.sin(f),h*Math.cos(f),l*Math.sin(d))}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w}fromArray(a,l=0){return this._x=a[l],this._y=a[l+1],this._z=a[l+2],this._w=a[l+3],this._onChangeCallback(),this}toArray(a=[],l=0){return a[l]=this._x,a[l+1]=this._y,a[l+2]=this._z,a[l+3]=this._w,a}fromBufferAttribute(a,l){return this._x=a.getX(l),this._y=a.getY(l),this._z=a.getZ(l),this._w=a.getW(l),this}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}}Js.prototype.isQuaternion=!0;class te{constructor(a=0,l=0,h=0){this.x=a,this.y=l,this.z=h}set(a,l,h){return void 0===h&&(h=this.z),this.x=a,this.y=l,this.z=h,this}setScalar(a){return this.x=a,this.y=a,this.z=a,this}setX(a){return this.x=a,this}setY(a){return this.y=a,this}setZ(a){return this.z=a,this}setComponent(a,l){switch(a){case 0:this.x=l;break;case 1:this.y=l;break;case 2:this.z=l;break;default:throw new Error("index is out of range: "+a)}return this}getComponent(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(a){return this.x=a.x,this.y=a.y,this.z=a.z,this}add(a,l){return void 0!==l?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,l)):(this.x+=a.x,this.y+=a.y,this.z+=a.z,this)}addScalar(a){return this.x+=a,this.y+=a,this.z+=a,this}addVectors(a,l){return this.x=a.x+l.x,this.y=a.y+l.y,this.z=a.z+l.z,this}addScaledVector(a,l){return this.x+=a.x*l,this.y+=a.y*l,this.z+=a.z*l,this}sub(a,l){return void 0!==l?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,l)):(this.x-=a.x,this.y-=a.y,this.z-=a.z,this)}subScalar(a){return this.x-=a,this.y-=a,this.z-=a,this}subVectors(a,l){return this.x=a.x-l.x,this.y=a.y-l.y,this.z=a.z-l.z,this}multiply(a,l){return void 0!==l?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,l)):(this.x*=a.x,this.y*=a.y,this.z*=a.z,this)}multiplyScalar(a){return this.x*=a,this.y*=a,this.z*=a,this}multiplyVectors(a,l){return this.x=a.x*l.x,this.y=a.y*l.y,this.z=a.z*l.z,this}applyEuler(a){return a&&a.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Dne.setFromEuler(a))}applyAxisAngle(a,l){return this.applyQuaternion(Dne.setFromAxisAngle(a,l))}applyMatrix3(a){const l=this.x,h=this.y,d=this.z,f=a.elements;return this.x=f[0]*l+f[3]*h+f[6]*d,this.y=f[1]*l+f[4]*h+f[7]*d,this.z=f[2]*l+f[5]*h+f[8]*d,this}applyNormalMatrix(a){return this.applyMatrix3(a).normalize()}applyMatrix4(a){const l=this.x,h=this.y,d=this.z,f=a.elements,m=1/(f[3]*l+f[7]*h+f[11]*d+f[15]);return this.x=(f[0]*l+f[4]*h+f[8]*d+f[12])*m,this.y=(f[1]*l+f[5]*h+f[9]*d+f[13])*m,this.z=(f[2]*l+f[6]*h+f[10]*d+f[14])*m,this}applyQuaternion(a){const l=this.x,h=this.y,d=this.z,f=a.x,m=a.y,g=a.z,y=a.w,_=y*l+m*d-g*h,v=y*h+g*l-f*d,b=y*d+f*h-m*l,S=-f*l-m*h-g*d;return this.x=_*y+S*-f+v*-g-b*-m,this.y=v*y+S*-m+b*-f-_*-g,this.z=b*y+S*-g+_*-m-v*-f,this}project(a){return this.applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix)}unproject(a){return this.applyMatrix4(a.projectionMatrixInverse).applyMatrix4(a.matrixWorld)}transformDirection(a){const l=this.x,h=this.y,d=this.z,f=a.elements;return this.x=f[0]*l+f[4]*h+f[8]*d,this.y=f[1]*l+f[5]*h+f[9]*d,this.z=f[2]*l+f[6]*h+f[10]*d,this.normalize()}divide(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z,this}divideScalar(a){return this.multiplyScalar(1/a)}min(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this}max(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this}clamp(a,l){return this.x=Math.max(a.x,Math.min(l.x,this.x)),this.y=Math.max(a.y,Math.min(l.y,this.y)),this.z=Math.max(a.z,Math.min(l.z,this.z)),this}clampScalar(a,l){return this.x=Math.max(a,Math.min(l,this.x)),this.y=Math.max(a,Math.min(l,this.y)),this.z=Math.max(a,Math.min(l,this.z)),this}clampLength(a,l){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(a,Math.min(l,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(a){return this.x*a.x+this.y*a.y+this.z*a.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(a){return this.normalize().multiplyScalar(a)}lerp(a,l){return this.x+=(a.x-this.x)*l,this.y+=(a.y-this.y)*l,this.z+=(a.z-this.z)*l,this}lerpVectors(a,l,h){return this.x=a.x+(l.x-a.x)*h,this.y=a.y+(l.y-a.y)*h,this.z=a.z+(l.z-a.z)*h,this}cross(a,l){return void 0!==l?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,l)):this.crossVectors(this,a)}crossVectors(a,l){const h=a.x,d=a.y,f=a.z,m=l.x,g=l.y,y=l.z;return this.x=d*y-f*g,this.y=f*m-h*y,this.z=h*g-d*m,this}projectOnVector(a){const l=a.lengthSq();if(0===l)return this.set(0,0,0);const h=a.dot(this)/l;return this.copy(a).multiplyScalar(h)}projectOnPlane(a){return aV.copy(this).projectOnVector(a),this.sub(aV)}reflect(a){return this.sub(aV.copy(a).multiplyScalar(2*this.dot(a)))}angleTo(a){const l=Math.sqrt(this.lengthSq()*a.lengthSq());if(0===l)return Math.PI/2;const h=this.dot(a)/l;return Math.acos(Io(h,-1,1))}distanceTo(a){return Math.sqrt(this.distanceToSquared(a))}distanceToSquared(a){const l=this.x-a.x,h=this.y-a.y,d=this.z-a.z;return l*l+h*h+d*d}manhattanDistanceTo(a){return Math.abs(this.x-a.x)+Math.abs(this.y-a.y)+Math.abs(this.z-a.z)}setFromSpherical(a){return this.setFromSphericalCoords(a.radius,a.phi,a.theta)}setFromSphericalCoords(a,l,h){const d=Math.sin(l)*a;return this.x=d*Math.sin(h),this.y=Math.cos(l)*a,this.z=d*Math.cos(h),this}setFromCylindrical(a){return this.setFromCylindricalCoords(a.radius,a.theta,a.y)}setFromCylindricalCoords(a,l,h){return this.x=a*Math.sin(l),this.y=h,this.z=a*Math.cos(l),this}setFromMatrixPosition(a){const l=a.elements;return this.x=l[12],this.y=l[13],this.z=l[14],this}setFromMatrixScale(a){const l=this.setFromMatrixColumn(a,0).length(),h=this.setFromMatrixColumn(a,1).length(),d=this.setFromMatrixColumn(a,2).length();return this.x=l,this.y=h,this.z=d,this}setFromMatrixColumn(a,l){return this.fromArray(a.elements,4*l)}setFromMatrix3Column(a,l){return this.fromArray(a.elements,3*l)}equals(a){return a.x===this.x&&a.y===this.y&&a.z===this.z}fromArray(a,l=0){return this.x=a[l],this.y=a[l+1],this.z=a[l+2],this}toArray(a=[],l=0){return a[l]=this.x,a[l+1]=this.y,a[l+2]=this.z,a}fromBufferAttribute(a,l,h){return void 0!==h&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=a.getX(l),this.y=a.getY(l),this.z=a.getZ(l),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const a=2*(Math.random()-.5),l=Math.random()*Math.PI*2,h=Math.sqrt(1-a**2);return this.x=h*Math.cos(l),this.y=h*Math.sin(l),this.z=a,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}te.prototype.isVector3=!0;const aV=new te,Dne=new Js;class xl{constructor(a=new te(1/0,1/0,1/0),l=new te(-1/0,-1/0,-1/0)){this.min=a,this.max=l}set(a,l){return this.min.copy(a),this.max.copy(l),this}setFromArray(a){let l=1/0,h=1/0,d=1/0,f=-1/0,m=-1/0,g=-1/0;for(let y=0,_=a.length;y<_;y+=3){const v=a[y],b=a[y+1],S=a[y+2];v<l&&(l=v),b<h&&(h=b),S<d&&(d=S),v>f&&(f=v),b>m&&(m=b),S>g&&(g=S)}return this.min.set(l,h,d),this.max.set(f,m,g),this}setFromBufferAttribute(a){let l=1/0,h=1/0,d=1/0,f=-1/0,m=-1/0,g=-1/0;for(let y=0,_=a.count;y<_;y++){const v=a.getX(y),b=a.getY(y),S=a.getZ(y);v<l&&(l=v),b<h&&(h=b),S<d&&(d=S),v>f&&(f=v),b>m&&(m=b),S>g&&(g=S)}return this.min.set(l,h,d),this.max.set(f,m,g),this}setFromPoints(a){this.makeEmpty();for(let l=0,h=a.length;l<h;l++)this.expandByPoint(a[l]);return this}setFromCenterAndSize(a,l){const h=Jm.copy(l).multiplyScalar(.5);return this.min.copy(a).sub(h),this.max.copy(a).add(h),this}setFromObject(a,l=!1){return this.makeEmpty(),this.expandByObject(a,l)}clone(){return(new this.constructor).copy(this)}copy(a){return this.min.copy(a.min),this.max.copy(a.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(a){return this.isEmpty()?a.set(0,0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0,0):a.subVectors(this.max,this.min)}expandByPoint(a){return this.min.min(a),this.max.max(a),this}expandByVector(a){return this.min.sub(a),this.max.add(a),this}expandByScalar(a){return this.min.addScalar(-a),this.max.addScalar(a),this}expandByObject(a,l=!1){a.updateWorldMatrix(!1,!1);const h=a.geometry;if(void 0!==h)if(l&&null!=h.attributes&&void 0!==h.attributes.position){const f=h.attributes.position;for(let m=0,g=f.count;m<g;m++)Jm.fromBufferAttribute(f,m).applyMatrix4(a.matrixWorld),this.expandByPoint(Jm)}else null===h.boundingBox&&h.computeBoundingBox(),lV.copy(h.boundingBox),lV.applyMatrix4(a.matrixWorld),this.union(lV);const d=a.children;for(let f=0,m=d.length;f<m;f++)this.expandByObject(d[f],l);return this}containsPoint(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y||a.z<this.min.z||a.z>this.max.z)}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y&&this.min.z<=a.min.z&&a.max.z<=this.max.z}getParameter(a,l){return l.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y||a.max.z<this.min.z||a.min.z>this.max.z)}intersectsSphere(a){return this.clampPoint(a.center,Jm),Jm.distanceToSquared(a.center)<=a.radius*a.radius}intersectsPlane(a){let l,h;return a.normal.x>0?(l=a.normal.x*this.min.x,h=a.normal.x*this.max.x):(l=a.normal.x*this.max.x,h=a.normal.x*this.min.x),a.normal.y>0?(l+=a.normal.y*this.min.y,h+=a.normal.y*this.max.y):(l+=a.normal.y*this.max.y,h+=a.normal.y*this.min.y),a.normal.z>0?(l+=a.normal.z*this.min.z,h+=a.normal.z*this.max.z):(l+=a.normal.z*this.max.z,h+=a.normal.z*this.min.z),l<=-a.constant&&h>=-a.constant}intersectsTriangle(a){if(this.isEmpty())return!1;this.getCenter(ST),lA.subVectors(this.max,ST),Rv.subVectors(a.a,ST),Lv.subVectors(a.b,ST),Pv.subVectors(a.c,ST),Hf.subVectors(Lv,Rv),jf.subVectors(Pv,Lv),Qm.subVectors(Rv,Pv);let l=[0,-Hf.z,Hf.y,0,-jf.z,jf.y,0,-Qm.z,Qm.y,Hf.z,0,-Hf.x,jf.z,0,-jf.x,Qm.z,0,-Qm.x,-Hf.y,Hf.x,0,-jf.y,jf.x,0,-Qm.y,Qm.x,0];return!(!cV(l,Rv,Lv,Pv,lA)||(l=[1,0,0,0,1,0,0,0,1],!cV(l,Rv,Lv,Pv,lA)))&&(cA.crossVectors(Hf,jf),l=[cA.x,cA.y,cA.z],cV(l,Rv,Lv,Pv,lA))}clampPoint(a,l){return l.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return Jm.copy(a).clamp(this.min,this.max).sub(a).length()}getBoundingSphere(a){return this.getCenter(a.center),a.radius=.5*this.getSize(Jm).length(),a}intersect(a){return this.min.max(a.min),this.max.min(a.max),this.isEmpty()&&this.makeEmpty(),this}union(a){return this.min.min(a.min),this.max.max(a.max),this}applyMatrix4(a){return this.isEmpty()||(ed[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(a),ed[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(a),ed[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(a),ed[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(a),ed[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(a),ed[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(a),ed[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(a),ed[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(a),this.setFromPoints(ed)),this}translate(a){return this.min.add(a),this.max.add(a),this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}xl.prototype.isBox3=!0;const ed=[new te,new te,new te,new te,new te,new te,new te,new te],Jm=new te,lV=new xl,Rv=new te,Lv=new te,Pv=new te,Hf=new te,jf=new te,Qm=new te,ST=new te,lA=new te,cA=new te,eg=new te;function cV(c,a,l,h,d){for(let f=0,m=c.length-3;f<=m;f+=3){eg.fromArray(c,f);const g=d.x*Math.abs(eg.x)+d.y*Math.abs(eg.y)+d.z*Math.abs(eg.z),y=a.dot(eg),_=l.dot(eg),v=h.dot(eg);if(Math.max(-Math.max(y,_,v),Math.min(y,_,v))>g)return!1}return!0}const pWe=new xl,Ane=new te,uA=new te,uV=new te;class Wf{constructor(a=new te,l=-1){this.center=a,this.radius=l}set(a,l){return this.center.copy(a),this.radius=l,this}setFromPoints(a,l){const h=this.center;void 0!==l?h.copy(l):pWe.setFromPoints(a).getCenter(h);let d=0;for(let f=0,m=a.length;f<m;f++)d=Math.max(d,h.distanceToSquared(a[f]));return this.radius=Math.sqrt(d),this}copy(a){return this.center.copy(a.center),this.radius=a.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(a){return a.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(a){return a.distanceTo(this.center)-this.radius}intersectsSphere(a){const l=this.radius+a.radius;return a.center.distanceToSquared(this.center)<=l*l}intersectsBox(a){return a.intersectsSphere(this)}intersectsPlane(a){return Math.abs(a.distanceToPoint(this.center))<=this.radius}clampPoint(a,l){const h=this.center.distanceToSquared(a);return l.copy(a),h>this.radius*this.radius&&(l.sub(this.center).normalize(),l.multiplyScalar(this.radius).add(this.center)),l}getBoundingBox(a){return this.isEmpty()?(a.makeEmpty(),a):(a.set(this.center,this.center),a.expandByScalar(this.radius),a)}applyMatrix4(a){return this.center.applyMatrix4(a),this.radius=this.radius*a.getMaxScaleOnAxis(),this}translate(a){return this.center.add(a),this}expandByPoint(a){uV.subVectors(a,this.center);const l=uV.lengthSq();if(l>this.radius*this.radius){const h=Math.sqrt(l),d=.5*(h-this.radius);this.center.add(uV.multiplyScalar(d/h)),this.radius+=d}return this}union(a){return!0===this.center.equals(a.center)?uA.set(0,0,1).multiplyScalar(a.radius):uA.subVectors(a.center,this.center).normalize().multiplyScalar(a.radius),this.expandByPoint(Ane.copy(a.center).add(uA)),this.expandByPoint(Ane.copy(a.center).sub(uA)),this}equals(a){return a.center.equals(this.center)&&a.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const td=new te,hV=new te,hA=new te,Xf=new te,dV=new te,dA=new te,fV=new te;class tg{constructor(a=new te,l=new te(0,0,-1)){this.origin=a,this.direction=l}set(a,l){return this.origin.copy(a),this.direction.copy(l),this}copy(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this}at(a,l){return l.copy(this.direction).multiplyScalar(a).add(this.origin)}lookAt(a){return this.direction.copy(a).sub(this.origin).normalize(),this}recast(a){return this.origin.copy(this.at(a,td)),this}closestPointToPoint(a,l){l.subVectors(a,this.origin);const h=l.dot(this.direction);return h<0?l.copy(this.origin):l.copy(this.direction).multiplyScalar(h).add(this.origin)}distanceToPoint(a){return Math.sqrt(this.distanceSqToPoint(a))}distanceSqToPoint(a){const l=td.subVectors(a,this.origin).dot(this.direction);return l<0?this.origin.distanceToSquared(a):(td.copy(this.direction).multiplyScalar(l).add(this.origin),td.distanceToSquared(a))}distanceSqToSegment(a,l,h,d){hV.copy(a).add(l).multiplyScalar(.5),hA.copy(l).sub(a).normalize(),Xf.copy(this.origin).sub(hV);const f=.5*a.distanceTo(l),m=-this.direction.dot(hA),g=Xf.dot(this.direction),y=-Xf.dot(hA),_=Xf.lengthSq(),v=Math.abs(1-m*m);let b,S,T,x;if(v>0)if(b=m*y-g,S=m*g-y,x=f*v,b>=0)if(S>=-x)if(S<=x){const E=1/v;b*=E,S*=E,T=b*(b+m*S+2*g)+S*(m*b+S+2*y)+_}else S=f,b=Math.max(0,-(m*S+g)),T=-b*b+S*(S+2*y)+_;else S=-f,b=Math.max(0,-(m*S+g)),T=-b*b+S*(S+2*y)+_;else S<=-x?(b=Math.max(0,-(-m*f+g)),S=b>0?-f:Math.min(Math.max(-f,-y),f),T=-b*b+S*(S+2*y)+_):S<=x?(b=0,S=Math.min(Math.max(-f,-y),f),T=S*(S+2*y)+_):(b=Math.max(0,-(m*f+g)),S=b>0?f:Math.min(Math.max(-f,-y),f),T=-b*b+S*(S+2*y)+_);else S=m>0?-f:f,b=Math.max(0,-(m*S+g)),T=-b*b+S*(S+2*y)+_;return h&&h.copy(this.direction).multiplyScalar(b).add(this.origin),d&&d.copy(hA).multiplyScalar(S).add(hV),T}intersectSphere(a,l){td.subVectors(a.center,this.origin);const h=td.dot(this.direction),d=td.dot(td)-h*h,f=a.radius*a.radius;if(d>f)return null;const m=Math.sqrt(f-d),g=h-m,y=h+m;return g<0&&y<0?null:this.at(g<0?y:g,l)}intersectsSphere(a){return this.distanceSqToPoint(a.center)<=a.radius*a.radius}distanceToPlane(a){const l=a.normal.dot(this.direction);if(0===l)return 0===a.distanceToPoint(this.origin)?0:null;const h=-(this.origin.dot(a.normal)+a.constant)/l;return h>=0?h:null}intersectPlane(a,l){const h=this.distanceToPlane(a);return null===h?null:this.at(h,l)}intersectsPlane(a){const l=a.distanceToPoint(this.origin);return 0===l||a.normal.dot(this.direction)*l<0}intersectBox(a,l){let h,d,f,m,g,y;const _=1/this.direction.x,v=1/this.direction.y,b=1/this.direction.z,S=this.origin;return _>=0?(h=(a.min.x-S.x)*_,d=(a.max.x-S.x)*_):(h=(a.max.x-S.x)*_,d=(a.min.x-S.x)*_),v>=0?(f=(a.min.y-S.y)*v,m=(a.max.y-S.y)*v):(f=(a.max.y-S.y)*v,m=(a.min.y-S.y)*v),h>m||f>d||((f>h||h!=h)&&(h=f),(m<d||d!=d)&&(d=m),b>=0?(g=(a.min.z-S.z)*b,y=(a.max.z-S.z)*b):(g=(a.max.z-S.z)*b,y=(a.min.z-S.z)*b),h>y||g>d)||((g>h||h!=h)&&(h=g),(y<d||d!=d)&&(d=y),d<0)?null:this.at(h>=0?h:d,l)}intersectsBox(a){return null!==this.intersectBox(a,td)}intersectTriangle(a,l,h,d,f){dV.subVectors(l,a),dA.subVectors(h,a),fV.crossVectors(dV,dA);let g,m=this.direction.dot(fV);if(m>0){if(d)return null;g=1}else{if(!(m<0))return null;g=-1,m=-m}Xf.subVectors(this.origin,a);const y=g*this.direction.dot(dA.crossVectors(Xf,dA));if(y<0)return null;const _=g*this.direction.dot(dV.cross(Xf));if(_<0||y+_>m)return null;const v=-g*Xf.dot(fV);return v<0?null:this.at(v/m,f)}applyMatrix4(a){return this.origin.applyMatrix4(a),this.direction.transformDirection(a),this}equals(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class un{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(a,l,h,d,f,m,g,y,_,v,b,S,T,x,E,I){const M=this.elements;return M[0]=a,M[4]=l,M[8]=h,M[12]=d,M[1]=f,M[5]=m,M[9]=g,M[13]=y,M[2]=_,M[6]=v,M[10]=b,M[14]=S,M[3]=T,M[7]=x,M[11]=E,M[15]=I,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new un).fromArray(this.elements)}copy(a){const l=this.elements,h=a.elements;return l[0]=h[0],l[1]=h[1],l[2]=h[2],l[3]=h[3],l[4]=h[4],l[5]=h[5],l[6]=h[6],l[7]=h[7],l[8]=h[8],l[9]=h[9],l[10]=h[10],l[11]=h[11],l[12]=h[12],l[13]=h[13],l[14]=h[14],l[15]=h[15],this}copyPosition(a){const l=this.elements,h=a.elements;return l[12]=h[12],l[13]=h[13],l[14]=h[14],this}setFromMatrix3(a){const l=a.elements;return this.set(l[0],l[3],l[6],0,l[1],l[4],l[7],0,l[2],l[5],l[8],0,0,0,0,1),this}extractBasis(a,l,h){return a.setFromMatrixColumn(this,0),l.setFromMatrixColumn(this,1),h.setFromMatrixColumn(this,2),this}makeBasis(a,l,h){return this.set(a.x,l.x,h.x,0,a.y,l.y,h.y,0,a.z,l.z,h.z,0,0,0,0,1),this}extractRotation(a){const l=this.elements,h=a.elements,d=1/Ov.setFromMatrixColumn(a,0).length(),f=1/Ov.setFromMatrixColumn(a,1).length(),m=1/Ov.setFromMatrixColumn(a,2).length();return l[0]=h[0]*d,l[1]=h[1]*d,l[2]=h[2]*d,l[3]=0,l[4]=h[4]*f,l[5]=h[5]*f,l[6]=h[6]*f,l[7]=0,l[8]=h[8]*m,l[9]=h[9]*m,l[10]=h[10]*m,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}makeRotationFromEuler(a){a&&a.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const l=this.elements,h=a.x,d=a.y,f=a.z,m=Math.cos(h),g=Math.sin(h),y=Math.cos(d),_=Math.sin(d),v=Math.cos(f),b=Math.sin(f);if("XYZ"===a.order){const S=m*v,T=m*b,x=g*v,E=g*b;l[0]=y*v,l[4]=-y*b,l[8]=_,l[1]=T+x*_,l[5]=S-E*_,l[9]=-g*y,l[2]=E-S*_,l[6]=x+T*_,l[10]=m*y}else if("YXZ"===a.order){const S=y*v,T=y*b,x=_*v,E=_*b;l[0]=S+E*g,l[4]=x*g-T,l[8]=m*_,l[1]=m*b,l[5]=m*v,l[9]=-g,l[2]=T*g-x,l[6]=E+S*g,l[10]=m*y}else if("ZXY"===a.order){const S=y*v,T=y*b,x=_*v,E=_*b;l[0]=S-E*g,l[4]=-m*b,l[8]=x+T*g,l[1]=T+x*g,l[5]=m*v,l[9]=E-S*g,l[2]=-m*_,l[6]=g,l[10]=m*y}else if("ZYX"===a.order){const S=m*v,T=m*b,x=g*v,E=g*b;l[0]=y*v,l[4]=x*_-T,l[8]=S*_+E,l[1]=y*b,l[5]=E*_+S,l[9]=T*_-x,l[2]=-_,l[6]=g*y,l[10]=m*y}else if("YZX"===a.order){const S=m*y,T=m*_,x=g*y,E=g*_;l[0]=y*v,l[4]=E-S*b,l[8]=x*b+T,l[1]=b,l[5]=m*v,l[9]=-g*v,l[2]=-_*v,l[6]=T*b+x,l[10]=S-E*b}else if("XZY"===a.order){const S=m*y,T=m*_,x=g*y,E=g*_;l[0]=y*v,l[4]=-b,l[8]=_*v,l[1]=S*b+E,l[5]=m*v,l[9]=T*b-x,l[2]=x*b-T,l[6]=g*v,l[10]=E*b+S}return l[3]=0,l[7]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,this}makeRotationFromQuaternion(a){return this.compose(mWe,a,gWe)}lookAt(a,l,h){const d=this.elements;return El.subVectors(a,l),0===El.lengthSq()&&(El.z=1),El.normalize(),qf.crossVectors(h,El),0===qf.lengthSq()&&(1===Math.abs(h.z)?El.x+=1e-4:El.z+=1e-4,El.normalize(),qf.crossVectors(h,El)),qf.normalize(),fA.crossVectors(El,qf),d[0]=qf.x,d[4]=fA.x,d[8]=El.x,d[1]=qf.y,d[5]=fA.y,d[9]=El.y,d[2]=qf.z,d[6]=fA.z,d[10]=El.z,this}multiply(a,l){return void 0!==l?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,l)):this.multiplyMatrices(this,a)}premultiply(a){return this.multiplyMatrices(a,this)}multiplyMatrices(a,l){const h=a.elements,d=l.elements,f=this.elements,m=h[0],g=h[4],y=h[8],_=h[12],v=h[1],b=h[5],S=h[9],T=h[13],x=h[2],E=h[6],I=h[10],M=h[14],D=h[3],L=h[7],P=h[11],F=h[15],B=d[0],G=d[4],$=d[8],se=d[12],ie=d[1],j=d[5],J=d[9],ae=d[13],ue=d[2],ge=d[6],K=d[10],le=d[14],ye=d[3],ke=d[7],_e=d[11],Ne=d[15];return f[0]=m*B+g*ie+y*ue+_*ye,f[4]=m*G+g*j+y*ge+_*ke,f[8]=m*$+g*J+y*K+_*_e,f[12]=m*se+g*ae+y*le+_*Ne,f[1]=v*B+b*ie+S*ue+T*ye,f[5]=v*G+b*j+S*ge+T*ke,f[9]=v*$+b*J+S*K+T*_e,f[13]=v*se+b*ae+S*le+T*Ne,f[2]=x*B+E*ie+I*ue+M*ye,f[6]=x*G+E*j+I*ge+M*ke,f[10]=x*$+E*J+I*K+M*_e,f[14]=x*se+E*ae+I*le+M*Ne,f[3]=D*B+L*ie+P*ue+F*ye,f[7]=D*G+L*j+P*ge+F*ke,f[11]=D*$+L*J+P*K+F*_e,f[15]=D*se+L*ae+P*le+F*Ne,this}multiplyScalar(a){const l=this.elements;return l[0]*=a,l[4]*=a,l[8]*=a,l[12]*=a,l[1]*=a,l[5]*=a,l[9]*=a,l[13]*=a,l[2]*=a,l[6]*=a,l[10]*=a,l[14]*=a,l[3]*=a,l[7]*=a,l[11]*=a,l[15]*=a,this}determinant(){const a=this.elements,l=a[0],h=a[4],d=a[8],f=a[12],m=a[1],g=a[5],y=a[9],_=a[13],v=a[2],b=a[6],S=a[10],T=a[14];return a[3]*(+f*y*b-d*_*b-f*g*S+h*_*S+d*g*T-h*y*T)+a[7]*(+l*y*T-l*_*S+f*m*S-d*m*T+d*_*v-f*y*v)+a[11]*(+l*_*b-l*g*T-f*m*b+h*m*T+f*g*v-h*_*v)+a[15]*(-d*g*v-l*y*b+l*g*S+d*m*b-h*m*S+h*y*v)}transpose(){const a=this.elements;let l;return l=a[1],a[1]=a[4],a[4]=l,l=a[2],a[2]=a[8],a[8]=l,l=a[6],a[6]=a[9],a[9]=l,l=a[3],a[3]=a[12],a[12]=l,l=a[7],a[7]=a[13],a[13]=l,l=a[11],a[11]=a[14],a[14]=l,this}setPosition(a,l,h){const d=this.elements;return a.isVector3?(d[12]=a.x,d[13]=a.y,d[14]=a.z):(d[12]=a,d[13]=l,d[14]=h),this}invert(){const a=this.elements,l=a[0],h=a[1],d=a[2],f=a[3],m=a[4],g=a[5],y=a[6],_=a[7],v=a[8],b=a[9],S=a[10],T=a[11],x=a[12],E=a[13],I=a[14],M=a[15],D=b*I*_-E*S*_+E*y*T-g*I*T-b*y*M+g*S*M,L=x*S*_-v*I*_-x*y*T+m*I*T+v*y*M-m*S*M,P=v*E*_-x*b*_+x*g*T-m*E*T-v*g*M+m*b*M,F=x*b*y-v*E*y-x*g*S+m*E*S+v*g*I-m*b*I,B=l*D+h*L+d*P+f*F;if(0===B)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const G=1/B;return a[0]=D*G,a[1]=(E*S*f-b*I*f-E*d*T+h*I*T+b*d*M-h*S*M)*G,a[2]=(g*I*f-E*y*f+E*d*_-h*I*_-g*d*M+h*y*M)*G,a[3]=(b*y*f-g*S*f-b*d*_+h*S*_+g*d*T-h*y*T)*G,a[4]=L*G,a[5]=(v*I*f-x*S*f+x*d*T-l*I*T-v*d*M+l*S*M)*G,a[6]=(x*y*f-m*I*f-x*d*_+l*I*_+m*d*M-l*y*M)*G,a[7]=(m*S*f-v*y*f+v*d*_-l*S*_-m*d*T+l*y*T)*G,a[8]=P*G,a[9]=(x*b*f-v*E*f-x*h*T+l*E*T+v*h*M-l*b*M)*G,a[10]=(m*E*f-x*g*f+x*h*_-l*E*_-m*h*M+l*g*M)*G,a[11]=(v*g*f-m*b*f-v*h*_+l*b*_+m*h*T-l*g*T)*G,a[12]=F*G,a[13]=(v*E*d-x*b*d+x*h*S-l*E*S-v*h*I+l*b*I)*G,a[14]=(x*g*d-m*E*d-x*h*y+l*E*y+m*h*I-l*g*I)*G,a[15]=(m*b*d-v*g*d+v*h*y-l*b*y-m*h*S+l*g*S)*G,this}scale(a){const l=this.elements,h=a.x,d=a.y,f=a.z;return l[0]*=h,l[4]*=d,l[8]*=f,l[1]*=h,l[5]*=d,l[9]*=f,l[2]*=h,l[6]*=d,l[10]*=f,l[3]*=h,l[7]*=d,l[11]*=f,this}getMaxScaleOnAxis(){const a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10]))}makeTranslation(a,l,h){return this.set(1,0,0,a,0,1,0,l,0,0,1,h,0,0,0,1),this}makeRotationX(a){const l=Math.cos(a),h=Math.sin(a);return this.set(1,0,0,0,0,l,-h,0,0,h,l,0,0,0,0,1),this}makeRotationY(a){const l=Math.cos(a),h=Math.sin(a);return this.set(l,0,h,0,0,1,0,0,-h,0,l,0,0,0,0,1),this}makeRotationZ(a){const l=Math.cos(a),h=Math.sin(a);return this.set(l,-h,0,0,h,l,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(a,l){const h=Math.cos(l),d=Math.sin(l),f=1-h,m=a.x,g=a.y,y=a.z,_=f*m,v=f*g;return this.set(_*m+h,_*g-d*y,_*y+d*g,0,_*g+d*y,v*g+h,v*y-d*m,0,_*y-d*g,v*y+d*m,f*y*y+h,0,0,0,0,1),this}makeScale(a,l,h){return this.set(a,0,0,0,0,l,0,0,0,0,h,0,0,0,0,1),this}makeShear(a,l,h,d,f,m){return this.set(1,h,f,0,a,1,m,0,l,d,1,0,0,0,0,1),this}compose(a,l,h){const d=this.elements,f=l._x,m=l._y,g=l._z,y=l._w,_=f+f,v=m+m,b=g+g,S=f*_,T=f*v,x=f*b,E=m*v,I=m*b,M=g*b,D=y*_,L=y*v,P=y*b,F=h.x,B=h.y,G=h.z;return d[0]=(1-(E+M))*F,d[1]=(T+P)*F,d[2]=(x-L)*F,d[3]=0,d[4]=(T-P)*B,d[5]=(1-(S+M))*B,d[6]=(I+D)*B,d[7]=0,d[8]=(x+L)*G,d[9]=(I-D)*G,d[10]=(1-(S+E))*G,d[11]=0,d[12]=a.x,d[13]=a.y,d[14]=a.z,d[15]=1,this}decompose(a,l,h){const d=this.elements;let f=Ov.set(d[0],d[1],d[2]).length();const m=Ov.set(d[4],d[5],d[6]).length(),g=Ov.set(d[8],d[9],d[10]).length();this.determinant()<0&&(f=-f),a.x=d[12],a.y=d[13],a.z=d[14],$c.copy(this);const _=1/f,v=1/m,b=1/g;return $c.elements[0]*=_,$c.elements[1]*=_,$c.elements[2]*=_,$c.elements[4]*=v,$c.elements[5]*=v,$c.elements[6]*=v,$c.elements[8]*=b,$c.elements[9]*=b,$c.elements[10]*=b,l.setFromRotationMatrix($c),h.x=f,h.y=m,h.z=g,this}makePerspective(a,l,h,d,f,m){void 0===m&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const g=this.elements,_=2*f/(h-d),v=(l+a)/(l-a),b=(h+d)/(h-d),S=-(m+f)/(m-f),T=-2*m*f/(m-f);return g[0]=2*f/(l-a),g[4]=0,g[8]=v,g[12]=0,g[1]=0,g[5]=_,g[9]=b,g[13]=0,g[2]=0,g[6]=0,g[10]=S,g[14]=T,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this}makeOrthographic(a,l,h,d,f,m){const g=this.elements,y=1/(l-a),_=1/(h-d),v=1/(m-f),b=(l+a)*y,S=(h+d)*_,T=(m+f)*v;return g[0]=2*y,g[4]=0,g[8]=0,g[12]=-b,g[1]=0,g[5]=2*_,g[9]=0,g[13]=-S,g[2]=0,g[6]=0,g[10]=-2*v,g[14]=-T,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this}equals(a){const l=this.elements,h=a.elements;for(let d=0;d<16;d++)if(l[d]!==h[d])return!1;return!0}fromArray(a,l=0){for(let h=0;h<16;h++)this.elements[h]=a[h+l];return this}toArray(a=[],l=0){const h=this.elements;return a[l]=h[0],a[l+1]=h[1],a[l+2]=h[2],a[l+3]=h[3],a[l+4]=h[4],a[l+5]=h[5],a[l+6]=h[6],a[l+7]=h[7],a[l+8]=h[8],a[l+9]=h[9],a[l+10]=h[10],a[l+11]=h[11],a[l+12]=h[12],a[l+13]=h[13],a[l+14]=h[14],a[l+15]=h[15],a}}un.prototype.isMatrix4=!0;const Ov=new te,$c=new un,mWe=new te(0,0,0),gWe=new te(1,1,1),qf=new te,fA=new te,El=new te,Ine=new un,Rne=new Js;class Nv{constructor(a=0,l=0,h=0,d=Nv.DefaultOrder){this._x=a,this._y=l,this._z=h,this._order=d}get x(){return this._x}set x(a){this._x=a,this._onChangeCallback()}get y(){return this._y}set y(a){this._y=a,this._onChangeCallback()}get z(){return this._z}set z(a){this._z=a,this._onChangeCallback()}get order(){return this._order}set order(a){this._order=a,this._onChangeCallback()}set(a,l,h,d=this._order){return this._x=a,this._y=l,this._z=h,this._order=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(a){return this._x=a._x,this._y=a._y,this._z=a._z,this._order=a._order,this._onChangeCallback(),this}setFromRotationMatrix(a,l=this._order,h=!0){const d=a.elements,f=d[0],m=d[4],g=d[8],y=d[1],_=d[5],v=d[9],b=d[2],S=d[6],T=d[10];switch(l){case"XYZ":this._y=Math.asin(Io(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-v,T),this._z=Math.atan2(-m,f)):(this._x=Math.atan2(S,_),this._z=0);break;case"YXZ":this._x=Math.asin(-Io(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(g,T),this._z=Math.atan2(y,_)):(this._y=Math.atan2(-b,f),this._z=0);break;case"ZXY":this._x=Math.asin(Io(S,-1,1)),Math.abs(S)<.9999999?(this._y=Math.atan2(-b,T),this._z=Math.atan2(-m,_)):(this._y=0,this._z=Math.atan2(y,f));break;case"ZYX":this._y=Math.asin(-Io(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(S,T),this._z=Math.atan2(y,f)):(this._x=0,this._z=Math.atan2(-m,_));break;case"YZX":this._z=Math.asin(Io(y,-1,1)),Math.abs(y)<.9999999?(this._x=Math.atan2(-v,_),this._y=Math.atan2(-b,f)):(this._x=0,this._y=Math.atan2(g,T));break;case"XZY":this._z=Math.asin(-Io(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(S,_),this._y=Math.atan2(g,f)):(this._x=Math.atan2(-v,T),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+l)}return this._order=l,!0===h&&this._onChangeCallback(),this}setFromQuaternion(a,l,h){return Ine.makeRotationFromQuaternion(a),this.setFromRotationMatrix(Ine,l,h)}setFromVector3(a,l=this._order){return this.set(a.x,a.y,a.z,l)}reorder(a){return Rne.setFromEuler(this),this.setFromQuaternion(Rne,a)}equals(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order}fromArray(a){return this._x=a[0],this._y=a[1],this._z=a[2],void 0!==a[3]&&(this._order=a[3]),this._onChangeCallback(),this}toArray(a=[],l=0){return a[l]=this._x,a[l+1]=this._y,a[l+2]=this._z,a[l+3]=this._order,a}toVector3(a){return a?a.set(this._x,this._y,this._z):new te(this._x,this._y,this._z)}_onChange(a){return this._onChangeCallback=a,this}_onChangeCallback(){}}Nv.prototype.isEuler=!0,Nv.DefaultOrder="XYZ",Nv.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class pV{constructor(){this.mask=1}set(a){this.mask=(1<<a|0)>>>0}enable(a){this.mask|=1<<a|0}enableAll(){this.mask=-1}toggle(a){this.mask^=1<<a|0}disable(a){this.mask&=~(1<<a|0)}disableAll(){this.mask=0}test(a){return 0!=(this.mask&a.mask)}isEnabled(a){return 0!=(this.mask&(1<<a|0))}}let yWe=0;const Lne=new te,Fv=new Js,nd=new un,pA=new te,TT=new te,_We=new te,vWe=new Js,Pne=new te(1,0,0),One=new te(0,1,0),Nne=new te(0,0,1),bWe={type:"added"},Fne={type:"removed"};class Yi extends Gf{constructor(){super(),Object.defineProperty(this,"id",{value:yWe++}),this.uuid=Cl(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yi.DefaultUp.clone();const a=new te,l=new Nv,h=new Js,d=new te(1,1,1);l._onChange(function f(){h.setFromEuler(l,!1)}),h._onChange(function m(){l.setFromQuaternion(h,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:a},rotation:{configurable:!0,enumerable:!0,value:l},quaternion:{configurable:!0,enumerable:!0,value:h},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new un},normalMatrix:{value:new po}}),this.matrix=new un,this.matrixWorld=new un,this.matrixAutoUpdate=Yi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new pV,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(a){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(a),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(a){return this.quaternion.premultiply(a),this}setRotationFromAxisAngle(a,l){this.quaternion.setFromAxisAngle(a,l)}setRotationFromEuler(a){this.quaternion.setFromEuler(a,!0)}setRotationFromMatrix(a){this.quaternion.setFromRotationMatrix(a)}setRotationFromQuaternion(a){this.quaternion.copy(a)}rotateOnAxis(a,l){return Fv.setFromAxisAngle(a,l),this.quaternion.multiply(Fv),this}rotateOnWorldAxis(a,l){return Fv.setFromAxisAngle(a,l),this.quaternion.premultiply(Fv),this}rotateX(a){return this.rotateOnAxis(Pne,a)}rotateY(a){return this.rotateOnAxis(One,a)}rotateZ(a){return this.rotateOnAxis(Nne,a)}translateOnAxis(a,l){return Lne.copy(a).applyQuaternion(this.quaternion),this.position.add(Lne.multiplyScalar(l)),this}translateX(a){return this.translateOnAxis(Pne,a)}translateY(a){return this.translateOnAxis(One,a)}translateZ(a){return this.translateOnAxis(Nne,a)}localToWorld(a){return a.applyMatrix4(this.matrixWorld)}worldToLocal(a){return a.applyMatrix4(nd.copy(this.matrixWorld).invert())}lookAt(a,l,h){a.isVector3?pA.copy(a):pA.set(a,l,h);const d=this.parent;this.updateWorldMatrix(!0,!1),TT.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?nd.lookAt(TT,pA,this.up):nd.lookAt(pA,TT,this.up),this.quaternion.setFromRotationMatrix(nd),d&&(nd.extractRotation(d.matrixWorld),Fv.setFromRotationMatrix(nd),this.quaternion.premultiply(Fv.invert()))}add(a){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.add(arguments[l]);return this}return a===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",a),this):(a&&a.isObject3D?(null!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a),a.dispatchEvent(bWe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",a),this)}remove(a){if(arguments.length>1){for(let h=0;h<arguments.length;h++)this.remove(arguments[h]);return this}const l=this.children.indexOf(a);return-1!==l&&(a.parent=null,this.children.splice(l,1),a.dispatchEvent(Fne)),this}removeFromParent(){const a=this.parent;return null!==a&&a.remove(this),this}clear(){for(let a=0;a<this.children.length;a++){const l=this.children[a];l.parent=null,l.dispatchEvent(Fne)}return this.children.length=0,this}attach(a){return this.updateWorldMatrix(!0,!1),nd.copy(this.matrixWorld).invert(),null!==a.parent&&(a.parent.updateWorldMatrix(!0,!1),nd.multiply(a.parent.matrixWorld)),a.applyMatrix4(nd),this.add(a),a.updateWorldMatrix(!1,!0),this}getObjectById(a){return this.getObjectByProperty("id",a)}getObjectByName(a){return this.getObjectByProperty("name",a)}getObjectByProperty(a,l){if(this[a]===l)return this;for(let h=0,d=this.children.length;h<d;h++){const m=this.children[h].getObjectByProperty(a,l);if(void 0!==m)return m}}getWorldPosition(a){return this.updateWorldMatrix(!0,!1),a.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(TT,a,_We),a}getWorldScale(a){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(TT,vWe,a),a}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const l=this.matrixWorld.elements;return a.set(l[8],l[9],l[10]).normalize()}raycast(){}traverse(a){a(this);const l=this.children;for(let h=0,d=l.length;h<d;h++)l[h].traverse(a)}traverseVisible(a){if(!1===this.visible)return;a(this);const l=this.children;for(let h=0,d=l.length;h<d;h++)l[h].traverseVisible(a)}traverseAncestors(a){const l=this.parent;null!==l&&(a(l),l.traverseAncestors(a))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);const l=this.children;for(let h=0,d=l.length;h<d;h++)l[h].updateMatrixWorld(a)}updateWorldMatrix(a,l){const h=this.parent;if(!0===a&&null!==h&&h.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===l){const d=this.children;for(let f=0,m=d.length;f<m;f++)d[f].updateWorldMatrix(!1,!0)}}toJSON(a){const l=void 0===a||"string"==typeof a,h={};l&&(a={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},h.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const d={};function f(g,y){return void 0===g[y.uuid]&&(g[y.uuid]=y.toJSON(a)),y.uuid}if(d.uuid=this.uuid,d.type=this.type,""!==this.name&&(d.name=this.name),!0===this.castShadow&&(d.castShadow=!0),!0===this.receiveShadow&&(d.receiveShadow=!0),!1===this.visible&&(d.visible=!1),!1===this.frustumCulled&&(d.frustumCulled=!1),0!==this.renderOrder&&(d.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(d.userData=this.userData),d.layers=this.layers.mask,d.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(d.matrixAutoUpdate=!1),this.isInstancedMesh&&(d.type="InstancedMesh",d.count=this.count,d.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(d.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?d.background=this.background.toJSON():this.background.isTexture&&(d.background=this.background.toJSON(a).uuid)),this.environment&&this.environment.isTexture&&(d.environment=this.environment.toJSON(a).uuid);else if(this.isMesh||this.isLine||this.isPoints){d.geometry=f(a.geometries,this.geometry);const g=this.geometry.parameters;if(void 0!==g&&void 0!==g.shapes){const y=g.shapes;if(Array.isArray(y))for(let _=0,v=y.length;_<v;_++)f(a.shapes,y[_]);else f(a.shapes,y)}}if(this.isSkinnedMesh&&(d.bindMode=this.bindMode,d.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(f(a.skeletons,this.skeleton),d.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const g=[];for(let y=0,_=this.material.length;y<_;y++)g.push(f(a.materials,this.material[y]));d.material=g}else d.material=f(a.materials,this.material);if(this.children.length>0){d.children=[];for(let g=0;g<this.children.length;g++)d.children.push(this.children[g].toJSON(a).object)}if(this.animations.length>0){d.animations=[];for(let g=0;g<this.animations.length;g++)d.animations.push(f(a.animations,this.animations[g]))}if(l){const g=m(a.geometries),y=m(a.materials),_=m(a.textures),v=m(a.images),b=m(a.shapes),S=m(a.skeletons),T=m(a.animations);g.length>0&&(h.geometries=g),y.length>0&&(h.materials=y),_.length>0&&(h.textures=_),v.length>0&&(h.images=v),b.length>0&&(h.shapes=b),S.length>0&&(h.skeletons=S),T.length>0&&(h.animations=T)}return h.object=d,h;function m(g){const y=[];for(const _ in g){const v=g[_];delete v.metadata,y.push(v)}return y}}clone(a){return(new this.constructor).copy(this,a)}copy(a,l=!0){if(this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.rotation.order=a.rotation.order,this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===l)for(let h=0;h<a.children.length;h++)this.add(a.children[h].clone());return this}}Yi.DefaultUp=new te(0,1,0),Yi.DefaultMatrixAutoUpdate=!0,Yi.prototype.isObject3D=!0;const Yc=new te,id=new te,mV=new te,rd=new te,kv=new te,Vv=new te,kne=new te,gV=new te,yV=new te,_V=new te;class Bs{constructor(a=new te,l=new te,h=new te){this.a=a,this.b=l,this.c=h}static getNormal(a,l,h,d){d.subVectors(h,l),Yc.subVectors(a,l),d.cross(Yc);const f=d.lengthSq();return f>0?d.multiplyScalar(1/Math.sqrt(f)):d.set(0,0,0)}static getBarycoord(a,l,h,d,f){Yc.subVectors(d,l),id.subVectors(h,l),mV.subVectors(a,l);const m=Yc.dot(Yc),g=Yc.dot(id),y=Yc.dot(mV),_=id.dot(id),v=id.dot(mV),b=m*_-g*g;if(0===b)return f.set(-2,-1,-1);const S=1/b,T=(_*y-g*v)*S,x=(m*v-g*y)*S;return f.set(1-T-x,x,T)}static containsPoint(a,l,h,d){return this.getBarycoord(a,l,h,d,rd),rd.x>=0&&rd.y>=0&&rd.x+rd.y<=1}static getUV(a,l,h,d,f,m,g,y){return this.getBarycoord(a,l,h,d,rd),y.set(0,0),y.addScaledVector(f,rd.x),y.addScaledVector(m,rd.y),y.addScaledVector(g,rd.z),y}static isFrontFacing(a,l,h,d){return Yc.subVectors(h,l),id.subVectors(a,l),Yc.cross(id).dot(d)<0}set(a,l,h){return this.a.copy(a),this.b.copy(l),this.c.copy(h),this}setFromPointsAndIndices(a,l,h,d){return this.a.copy(a[l]),this.b.copy(a[h]),this.c.copy(a[d]),this}setFromAttributeAndIndices(a,l,h,d){return this.a.fromBufferAttribute(a,l),this.b.fromBufferAttribute(a,h),this.c.fromBufferAttribute(a,d),this}clone(){return(new this.constructor).copy(this)}copy(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this}getArea(){return Yc.subVectors(this.c,this.b),id.subVectors(this.a,this.b),.5*Yc.cross(id).length()}getMidpoint(a){return a.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(a){return Bs.getNormal(this.a,this.b,this.c,a)}getPlane(a){return a.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(a,l){return Bs.getBarycoord(a,this.a,this.b,this.c,l)}getUV(a,l,h,d,f){return Bs.getUV(a,this.a,this.b,this.c,l,h,d,f)}containsPoint(a){return Bs.containsPoint(a,this.a,this.b,this.c)}isFrontFacing(a){return Bs.isFrontFacing(this.a,this.b,this.c,a)}intersectsBox(a){return a.intersectsTriangle(this)}closestPointToPoint(a,l){const h=this.a,d=this.b,f=this.c;let m,g;kv.subVectors(d,h),Vv.subVectors(f,h),gV.subVectors(a,h);const y=kv.dot(gV),_=Vv.dot(gV);if(y<=0&&_<=0)return l.copy(h);yV.subVectors(a,d);const v=kv.dot(yV),b=Vv.dot(yV);if(v>=0&&b<=v)return l.copy(d);const S=y*b-v*_;if(S<=0&&y>=0&&v<=0)return m=y/(y-v),l.copy(h).addScaledVector(kv,m);_V.subVectors(a,f);const T=kv.dot(_V),x=Vv.dot(_V);if(x>=0&&T<=x)return l.copy(f);const E=T*_-y*x;if(E<=0&&_>=0&&x<=0)return g=_/(_-x),l.copy(h).addScaledVector(Vv,g);const I=v*x-T*b;if(I<=0&&b-v>=0&&T-x>=0)return kne.subVectors(f,d),g=(b-v)/(b-v+(T-x)),l.copy(d).addScaledVector(kne,g);const M=1/(I+E+S);return m=E*M,g=S*M,l.copy(h).addScaledVector(kv,m).addScaledVector(Vv,g)}equals(a){return a.a.equals(this.a)&&a.b.equals(this.b)&&a.c.equals(this.c)}}let SWe=0;class Us extends Gf{constructor(){super(),Object.defineProperty(this,"id",{value:SWe++}),this.uuid=Cl(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(a){this._alphaTest>0!=a>0&&this.version++,this._alphaTest=a}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(a){if(void 0!==a)for(const l in a){const h=a[l];if(void 0===h){console.warn("THREE.Material: '"+l+"' parameter is undefined.");continue}if("shading"===l){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===h;continue}const d=this[l];void 0!==d?d&&d.isColor?d.set(h):d&&d.isVector3&&h&&h.isVector3?d.copy(h):this[l]=h:console.warn("THREE."+this.type+": '"+l+"' is not a property of this material.")}}toJSON(a){const l=void 0===a||"string"==typeof a;l&&(a={textures:{},images:{}});const h={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function d(f){const m=[];for(const g in f){const y=f[g];delete y.metadata,m.push(y)}return m}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),this.color&&this.color.isColor&&(h.color=this.color.getHex()),void 0!==this.roughness&&(h.roughness=this.roughness),void 0!==this.metalness&&(h.metalness=this.metalness),void 0!==this.sheen&&(h.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(h.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(h.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(h.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(h.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(h.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(h.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(h.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(h.shininess=this.shininess),void 0!==this.clearcoat&&(h.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(h.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(h.clearcoatMap=this.clearcoatMap.toJSON(a).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(h.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(a).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(h.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(a).uuid,h.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(h.map=this.map.toJSON(a).uuid),this.matcap&&this.matcap.isTexture&&(h.matcap=this.matcap.toJSON(a).uuid),this.alphaMap&&this.alphaMap.isTexture&&(h.alphaMap=this.alphaMap.toJSON(a).uuid),this.lightMap&&this.lightMap.isTexture&&(h.lightMap=this.lightMap.toJSON(a).uuid,h.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(h.aoMap=this.aoMap.toJSON(a).uuid,h.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(h.bumpMap=this.bumpMap.toJSON(a).uuid,h.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(h.normalMap=this.normalMap.toJSON(a).uuid,h.normalMapType=this.normalMapType,h.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(h.displacementMap=this.displacementMap.toJSON(a).uuid,h.displacementScale=this.displacementScale,h.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(h.roughnessMap=this.roughnessMap.toJSON(a).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(h.metalnessMap=this.metalnessMap.toJSON(a).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(h.emissiveMap=this.emissiveMap.toJSON(a).uuid),this.specularMap&&this.specularMap.isTexture&&(h.specularMap=this.specularMap.toJSON(a).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(h.specularIntensityMap=this.specularIntensityMap.toJSON(a).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(h.specularColorMap=this.specularColorMap.toJSON(a).uuid),this.envMap&&this.envMap.isTexture&&(h.envMap=this.envMap.toJSON(a).uuid,void 0!==this.combine&&(h.combine=this.combine)),void 0!==this.envMapIntensity&&(h.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(h.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(h.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(h.gradientMap=this.gradientMap.toJSON(a).uuid),void 0!==this.transmission&&(h.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(h.transmissionMap=this.transmissionMap.toJSON(a).uuid),void 0!==this.thickness&&(h.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(h.thicknessMap=this.thicknessMap.toJSON(a).uuid),void 0!==this.attenuationDistance&&(h.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(h.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(h.size=this.size),null!==this.shadowSide&&(h.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(h.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(h.blending=this.blending),0!==this.side&&(h.side=this.side),this.vertexColors&&(h.vertexColors=!0),this.opacity<1&&(h.opacity=this.opacity),!0===this.transparent&&(h.transparent=this.transparent),h.depthFunc=this.depthFunc,h.depthTest=this.depthTest,h.depthWrite=this.depthWrite,h.colorWrite=this.colorWrite,h.stencilWrite=this.stencilWrite,h.stencilWriteMask=this.stencilWriteMask,h.stencilFunc=this.stencilFunc,h.stencilRef=this.stencilRef,h.stencilFuncMask=this.stencilFuncMask,h.stencilFail=this.stencilFail,h.stencilZFail=this.stencilZFail,h.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(h.rotation=this.rotation),!0===this.polygonOffset&&(h.polygonOffset=!0),0!==this.polygonOffsetFactor&&(h.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(h.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(h.linewidth=this.linewidth),void 0!==this.dashSize&&(h.dashSize=this.dashSize),void 0!==this.gapSize&&(h.gapSize=this.gapSize),void 0!==this.scale&&(h.scale=this.scale),!0===this.dithering&&(h.dithering=!0),this.alphaTest>0&&(h.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(h.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(h.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(h.wireframe=this.wireframe),this.wireframeLinewidth>1&&(h.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(h.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(h.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(h.flatShading=this.flatShading),!1===this.visible&&(h.visible=!1),!1===this.toneMapped&&(h.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(h.userData=this.userData),l){const f=d(a.textures),m=d(a.images);f.length>0&&(h.textures=f),m.length>0&&(h.images=m)}return h}clone(){return(new this.constructor).copy(this)}copy(a){this.name=a.name,this.fog=a.fog,this.blending=a.blending,this.side=a.side,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.stencilWriteMask=a.stencilWriteMask,this.stencilFunc=a.stencilFunc,this.stencilRef=a.stencilRef,this.stencilFuncMask=a.stencilFuncMask,this.stencilFail=a.stencilFail,this.stencilZFail=a.stencilZFail,this.stencilZPass=a.stencilZPass,this.stencilWrite=a.stencilWrite;const l=a.clippingPlanes;let h=null;if(null!==l){const d=l.length;h=new Array(d);for(let f=0;f!==d;++f)h[f]=l[f].clone()}return this.clippingPlanes=h,this.clipIntersection=a.clipIntersection,this.clipShadows=a.clipShadows,this.shadowSide=a.shadowSide,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.alphaToCoverage=a.alphaToCoverage,this.premultipliedAlpha=a.premultipliedAlpha,this.visible=a.visible,this.toneMapped=a.toneMapped,this.userData=JSON.parse(JSON.stringify(a.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(a){!0===a&&this.version++}}Us.prototype.isMaterial=!0;class Ml extends Us{constructor(a){super(),this.type="MeshBasicMaterial",this.color=new Pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this}}Ml.prototype.isMeshBasicMaterial=!0;const Ir=new te,mA=new tt;class ar{constructor(a,l,h){if(Array.isArray(a))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=a,this.itemSize=l,this.count=void 0!==a?a.length/l:0,this.normalized=!0===h,this.usage=gT,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}setUsage(a){return this.usage=a,this}copy(a){return this.name=a.name,this.array=new a.array.constructor(a.array),this.itemSize=a.itemSize,this.count=a.count,this.normalized=a.normalized,this.usage=a.usage,this}copyAt(a,l,h){a*=this.itemSize,h*=l.itemSize;for(let d=0,f=this.itemSize;d<f;d++)this.array[a+d]=l.array[h+d];return this}copyArray(a){return this.array.set(a),this}copyColorsArray(a){const l=this.array;let h=0;for(let d=0,f=a.length;d<f;d++){let m=a[d];void 0===m&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),m=new Pt),l[h++]=m.r,l[h++]=m.g,l[h++]=m.b}return this}copyVector2sArray(a){const l=this.array;let h=0;for(let d=0,f=a.length;d<f;d++){let m=a[d];void 0===m&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),m=new tt),l[h++]=m.x,l[h++]=m.y}return this}copyVector3sArray(a){const l=this.array;let h=0;for(let d=0,f=a.length;d<f;d++){let m=a[d];void 0===m&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),m=new te),l[h++]=m.x,l[h++]=m.y,l[h++]=m.z}return this}copyVector4sArray(a){const l=this.array;let h=0;for(let d=0,f=a.length;d<f;d++){let m=a[d];void 0===m&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),m=new hr),l[h++]=m.x,l[h++]=m.y,l[h++]=m.z,l[h++]=m.w}return this}applyMatrix3(a){if(2===this.itemSize)for(let l=0,h=this.count;l<h;l++)mA.fromBufferAttribute(this,l),mA.applyMatrix3(a),this.setXY(l,mA.x,mA.y);else if(3===this.itemSize)for(let l=0,h=this.count;l<h;l++)Ir.fromBufferAttribute(this,l),Ir.applyMatrix3(a),this.setXYZ(l,Ir.x,Ir.y,Ir.z);return this}applyMatrix4(a){for(let l=0,h=this.count;l<h;l++)Ir.x=this.getX(l),Ir.y=this.getY(l),Ir.z=this.getZ(l),Ir.applyMatrix4(a),this.setXYZ(l,Ir.x,Ir.y,Ir.z);return this}applyNormalMatrix(a){for(let l=0,h=this.count;l<h;l++)Ir.x=this.getX(l),Ir.y=this.getY(l),Ir.z=this.getZ(l),Ir.applyNormalMatrix(a),this.setXYZ(l,Ir.x,Ir.y,Ir.z);return this}transformDirection(a){for(let l=0,h=this.count;l<h;l++)Ir.x=this.getX(l),Ir.y=this.getY(l),Ir.z=this.getZ(l),Ir.transformDirection(a),this.setXYZ(l,Ir.x,Ir.y,Ir.z);return this}set(a,l=0){return this.array.set(a,l),this}getX(a){return this.array[a*this.itemSize]}setX(a,l){return this.array[a*this.itemSize]=l,this}getY(a){return this.array[a*this.itemSize+1]}setY(a,l){return this.array[a*this.itemSize+1]=l,this}getZ(a){return this.array[a*this.itemSize+2]}setZ(a,l){return this.array[a*this.itemSize+2]=l,this}getW(a){return this.array[a*this.itemSize+3]}setW(a,l){return this.array[a*this.itemSize+3]=l,this}setXY(a,l,h){return this.array[0+(a*=this.itemSize)]=l,this.array[a+1]=h,this}setXYZ(a,l,h,d){return this.array[0+(a*=this.itemSize)]=l,this.array[a+1]=h,this.array[a+2]=d,this}setXYZW(a,l,h,d,f){return this.array[0+(a*=this.itemSize)]=l,this.array[a+1]=h,this.array[a+2]=d,this.array[a+3]=f,this}onUpload(a){return this.onUploadCallback=a,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const a={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(a.name=this.name),this.usage!==gT&&(a.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(a.updateRange=this.updateRange),a}}ar.prototype.isBufferAttribute=!0;class vV extends ar{constructor(a,l,h){super(new Uint16Array(a),l,h)}}class bV extends ar{constructor(a,l,h){super(new Uint32Array(a),l,h)}}(class MWe extends ar{constructor(a,l,h){super(new Uint16Array(a),l,h)}}).prototype.isFloat16BufferAttribute=!0;class hn extends ar{constructor(a,l,h){super(new Float32Array(a),l,h)}}let AWe=0;const ec=new un,SV=new Yi,Bv=new te,Dl=new xl,wT=new xl,mo=new te;class Nn extends Gf{constructor(){super(),Object.defineProperty(this,"id",{value:AWe++}),this.uuid=Cl(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(a){return this.index=Array.isArray(a)?new(Ene(a)?bV:vV)(a,1):a,this}getAttribute(a){return this.attributes[a]}setAttribute(a,l){return this.attributes[a]=l,this}deleteAttribute(a){return delete this.attributes[a],this}hasAttribute(a){return void 0!==this.attributes[a]}addGroup(a,l,h=0){this.groups.push({start:a,count:l,materialIndex:h})}clearGroups(){this.groups=[]}setDrawRange(a,l){this.drawRange.start=a,this.drawRange.count=l}applyMatrix4(a){const l=this.attributes.position;void 0!==l&&(l.applyMatrix4(a),l.needsUpdate=!0);const h=this.attributes.normal;if(void 0!==h){const f=(new po).getNormalMatrix(a);h.applyNormalMatrix(f),h.needsUpdate=!0}const d=this.attributes.tangent;return void 0!==d&&(d.transformDirection(a),d.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(a){return ec.makeRotationFromQuaternion(a),this.applyMatrix4(ec),this}rotateX(a){return ec.makeRotationX(a),this.applyMatrix4(ec),this}rotateY(a){return ec.makeRotationY(a),this.applyMatrix4(ec),this}rotateZ(a){return ec.makeRotationZ(a),this.applyMatrix4(ec),this}translate(a,l,h){return ec.makeTranslation(a,l,h),this.applyMatrix4(ec),this}scale(a,l,h){return ec.makeScale(a,l,h),this.applyMatrix4(ec),this}lookAt(a){return SV.lookAt(a),SV.updateMatrix(),this.applyMatrix4(SV.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Bv).negate(),this.translate(Bv.x,Bv.y,Bv.z),this}setFromPoints(a){const l=[];for(let h=0,d=a.length;h<d;h++){const f=a[h];l.push(f.x,f.y,f.z||0)}return this.setAttribute("position",new hn(l,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new xl);const a=this.attributes.position,l=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new te(-1/0,-1/0,-1/0),new te(1/0,1/0,1/0));if(void 0!==a){if(this.boundingBox.setFromBufferAttribute(a),l)for(let h=0,d=l.length;h<d;h++)Dl.setFromBufferAttribute(l[h]),this.morphTargetsRelative?(mo.addVectors(this.boundingBox.min,Dl.min),this.boundingBox.expandByPoint(mo),mo.addVectors(this.boundingBox.max,Dl.max),this.boundingBox.expandByPoint(mo)):(this.boundingBox.expandByPoint(Dl.min),this.boundingBox.expandByPoint(Dl.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Wf);const a=this.attributes.position,l=this.morphAttributes.position;if(a&&a.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new te,1/0);if(a){const h=this.boundingSphere.center;if(Dl.setFromBufferAttribute(a),l)for(let f=0,m=l.length;f<m;f++)wT.setFromBufferAttribute(l[f]),this.morphTargetsRelative?(mo.addVectors(Dl.min,wT.min),Dl.expandByPoint(mo),mo.addVectors(Dl.max,wT.max),Dl.expandByPoint(mo)):(Dl.expandByPoint(wT.min),Dl.expandByPoint(wT.max));Dl.getCenter(h);let d=0;for(let f=0,m=a.count;f<m;f++)mo.fromBufferAttribute(a,f),d=Math.max(d,h.distanceToSquared(mo));if(l)for(let f=0,m=l.length;f<m;f++){const g=l[f],y=this.morphTargetsRelative;for(let _=0,v=g.count;_<v;_++)mo.fromBufferAttribute(g,_),y&&(Bv.fromBufferAttribute(a,_),mo.add(Bv)),d=Math.max(d,h.distanceToSquared(mo))}this.boundingSphere.radius=Math.sqrt(d),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const a=this.index,l=this.attributes;if(null===a||void 0===l.position||void 0===l.normal||void 0===l.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const h=a.array,d=l.position.array,f=l.normal.array,m=l.uv.array,g=d.length/3;void 0===l.tangent&&this.setAttribute("tangent",new ar(new Float32Array(4*g),4));const y=l.tangent.array,_=[],v=[];for(let ie=0;ie<g;ie++)_[ie]=new te,v[ie]=new te;const b=new te,S=new te,T=new te,x=new tt,E=new tt,I=new tt,M=new te,D=new te;function L(ie,j,J){b.fromArray(d,3*ie),S.fromArray(d,3*j),T.fromArray(d,3*J),x.fromArray(m,2*ie),E.fromArray(m,2*j),I.fromArray(m,2*J),S.sub(b),T.sub(b),E.sub(x),I.sub(x);const ae=1/(E.x*I.y-I.x*E.y);!isFinite(ae)||(M.copy(S).multiplyScalar(I.y).addScaledVector(T,-E.y).multiplyScalar(ae),D.copy(T).multiplyScalar(E.x).addScaledVector(S,-I.x).multiplyScalar(ae),_[ie].add(M),_[j].add(M),_[J].add(M),v[ie].add(D),v[j].add(D),v[J].add(D))}let P=this.groups;0===P.length&&(P=[{start:0,count:h.length}]);for(let ie=0,j=P.length;ie<j;++ie){const J=P[ie],ae=J.start;for(let ge=ae,K=ae+J.count;ge<K;ge+=3)L(h[ge+0],h[ge+1],h[ge+2])}const F=new te,B=new te,G=new te,$=new te;function se(ie){G.fromArray(f,3*ie),$.copy(G);const j=_[ie];F.copy(j),F.sub(G.multiplyScalar(G.dot(j))).normalize(),B.crossVectors($,j);const ae=B.dot(v[ie])<0?-1:1;y[4*ie]=F.x,y[4*ie+1]=F.y,y[4*ie+2]=F.z,y[4*ie+3]=ae}for(let ie=0,j=P.length;ie<j;++ie){const J=P[ie],ae=J.start;for(let ge=ae,K=ae+J.count;ge<K;ge+=3)se(h[ge+0]),se(h[ge+1]),se(h[ge+2])}}computeVertexNormals(){const a=this.index,l=this.getAttribute("position");if(void 0!==l){let h=this.getAttribute("normal");if(void 0===h)h=new ar(new Float32Array(3*l.count),3),this.setAttribute("normal",h);else for(let S=0,T=h.count;S<T;S++)h.setXYZ(S,0,0,0);const d=new te,f=new te,m=new te,g=new te,y=new te,_=new te,v=new te,b=new te;if(a)for(let S=0,T=a.count;S<T;S+=3){const x=a.getX(S+0),E=a.getX(S+1),I=a.getX(S+2);d.fromBufferAttribute(l,x),f.fromBufferAttribute(l,E),m.fromBufferAttribute(l,I),v.subVectors(m,f),b.subVectors(d,f),v.cross(b),g.fromBufferAttribute(h,x),y.fromBufferAttribute(h,E),_.fromBufferAttribute(h,I),g.add(v),y.add(v),_.add(v),h.setXYZ(x,g.x,g.y,g.z),h.setXYZ(E,y.x,y.y,y.z),h.setXYZ(I,_.x,_.y,_.z)}else for(let S=0,T=l.count;S<T;S+=3)d.fromBufferAttribute(l,S+0),f.fromBufferAttribute(l,S+1),m.fromBufferAttribute(l,S+2),v.subVectors(m,f),b.subVectors(d,f),v.cross(b),h.setXYZ(S+0,v.x,v.y,v.z),h.setXYZ(S+1,v.x,v.y,v.z),h.setXYZ(S+2,v.x,v.y,v.z);this.normalizeNormals(),h.needsUpdate=!0}}merge(a,l){if(!a||!a.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",a);void 0===l&&(l=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const h=this.attributes;for(const d in h){if(void 0===a.attributes[d])continue;const m=h[d].array,g=a.attributes[d],y=g.array,_=g.itemSize*l,v=Math.min(y.length,m.length-_);for(let b=0,S=_;b<v;b++,S++)m[S]=y[b]}return this}normalizeNormals(){const a=this.attributes.normal;for(let l=0,h=a.count;l<h;l++)mo.fromBufferAttribute(a,l),mo.normalize(),a.setXYZ(l,mo.x,mo.y,mo.z)}toNonIndexed(){function a(g,y){const _=g.array,v=g.itemSize,b=g.normalized,S=new _.constructor(y.length*v);let T=0,x=0;for(let E=0,I=y.length;E<I;E++){T=g.isInterleavedBufferAttribute?y[E]*g.data.stride+g.offset:y[E]*v;for(let M=0;M<v;M++)S[x++]=_[T++]}return new ar(S,v,b)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const l=new Nn,h=this.index.array,d=this.attributes;for(const g in d){const _=a(d[g],h);l.setAttribute(g,_)}const f=this.morphAttributes;for(const g in f){const y=[],_=f[g];for(let v=0,b=_.length;v<b;v++){const T=a(_[v],h);y.push(T)}l.morphAttributes[g]=y}l.morphTargetsRelative=this.morphTargetsRelative;const m=this.groups;for(let g=0,y=m.length;g<y;g++){const _=m[g];l.addGroup(_.start,_.count,_.materialIndex)}return l}toJSON(){const a={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),Object.keys(this.userData).length>0&&(a.userData=this.userData),void 0!==this.parameters){const y=this.parameters;for(const _ in y)void 0!==y[_]&&(a[_]=y[_]);return a}a.data={attributes:{}};const l=this.index;null!==l&&(a.data.index={type:l.array.constructor.name,array:Array.prototype.slice.call(l.array)});const h=this.attributes;for(const y in h)a.data.attributes[y]=h[y].toJSON(a.data);const d={};let f=!1;for(const y in this.morphAttributes){const _=this.morphAttributes[y],v=[];for(let b=0,S=_.length;b<S;b++)v.push(_[b].toJSON(a.data));v.length>0&&(d[y]=v,f=!0)}f&&(a.data.morphAttributes=d,a.data.morphTargetsRelative=this.morphTargetsRelative);const m=this.groups;m.length>0&&(a.data.groups=JSON.parse(JSON.stringify(m)));const g=this.boundingSphere;return null!==g&&(a.data.boundingSphere={center:g.center.toArray(),radius:g.radius}),a}clone(){return(new this.constructor).copy(this)}copy(a){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const l={};this.name=a.name;const h=a.index;null!==h&&this.setIndex(h.clone(l));const d=a.attributes;for(const _ in d)this.setAttribute(_,d[_].clone(l));const f=a.morphAttributes;for(const _ in f){const v=[],b=f[_];for(let S=0,T=b.length;S<T;S++)v.push(b[S].clone(l));this.morphAttributes[_]=v}this.morphTargetsRelative=a.morphTargetsRelative;const m=a.groups;for(let _=0,v=m.length;_<v;_++){const b=m[_];this.addGroup(b.start,b.count,b.materialIndex)}const g=a.boundingBox;null!==g&&(this.boundingBox=g.clone());const y=a.boundingSphere;return null!==y&&(this.boundingSphere=y.clone()),this.drawRange.start=a.drawRange.start,this.drawRange.count=a.drawRange.count,this.userData=a.userData,void 0!==a.parameters&&(this.parameters=Object.assign({},a.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Nn.prototype.isBufferGeometry=!0;const Vne=new un,Uv=new tg,TV=new Wf,$f=new te,Yf=new te,Zf=new te,wV=new te,CV=new te,xV=new te,gA=new te,yA=new te,_A=new te,vA=new tt,bA=new tt,SA=new tt,EV=new te,TA=new te;class xs extends Yi{constructor(a=new Nn,l=new Ml){super(),this.type="Mesh",this.geometry=a,this.material=l,this.updateMorphTargets()}copy(a){return super.copy(a),void 0!==a.morphTargetInfluences&&(this.morphTargetInfluences=a.morphTargetInfluences.slice()),void 0!==a.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},a.morphTargetDictionary)),this.material=a.material,this.geometry=a.geometry,this}updateMorphTargets(){const a=this.geometry;if(a.isBufferGeometry){const l=a.morphAttributes,h=Object.keys(l);if(h.length>0){const d=l[h[0]];if(void 0!==d){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let f=0,m=d.length;f<m;f++){const g=d[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=f}}}}else{const l=a.morphTargets;void 0!==l&&l.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(a,l){const h=this.geometry,d=this.material,f=this.matrixWorld;if(void 0===d||(null===h.boundingSphere&&h.computeBoundingSphere(),TV.copy(h.boundingSphere),TV.applyMatrix4(f),!1===a.ray.intersectsSphere(TV))||(Vne.copy(f).invert(),Uv.copy(a.ray).applyMatrix4(Vne),null!==h.boundingBox&&!1===Uv.intersectsBox(h.boundingBox)))return;let m;if(h.isBufferGeometry){const g=h.index,y=h.attributes.position,_=h.morphAttributes.position,v=h.morphTargetsRelative,b=h.attributes.uv,S=h.attributes.uv2,T=h.groups,x=h.drawRange;if(null!==g)if(Array.isArray(d))for(let E=0,I=T.length;E<I;E++){const M=T[E],D=d[M.materialIndex];for(let F=Math.max(M.start,x.start),B=Math.min(g.count,Math.min(M.start+M.count,x.start+x.count));F<B;F+=3){const G=g.getX(F),$=g.getX(F+1),se=g.getX(F+2);m=wA(this,D,a,Uv,y,_,v,b,S,G,$,se),m&&(m.faceIndex=Math.floor(F/3),m.face.materialIndex=M.materialIndex,l.push(m))}}else for(let M=Math.max(0,x.start),D=Math.min(g.count,x.start+x.count);M<D;M+=3){const L=g.getX(M),P=g.getX(M+1),F=g.getX(M+2);m=wA(this,d,a,Uv,y,_,v,b,S,L,P,F),m&&(m.faceIndex=Math.floor(M/3),l.push(m))}else if(void 0!==y)if(Array.isArray(d))for(let E=0,I=T.length;E<I;E++){const M=T[E],D=d[M.materialIndex];for(let F=Math.max(M.start,x.start),B=Math.min(y.count,Math.min(M.start+M.count,x.start+x.count));F<B;F+=3)m=wA(this,D,a,Uv,y,_,v,b,S,F,F+1,F+2),m&&(m.faceIndex=Math.floor(F/3),m.face.materialIndex=M.materialIndex,l.push(m))}else for(let M=Math.max(0,x.start),D=Math.min(y.count,x.start+x.count);M<D;M+=3)m=wA(this,d,a,Uv,y,_,v,b,S,M,M+1,M+2),m&&(m.faceIndex=Math.floor(M/3),l.push(m))}else h.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function wA(c,a,l,h,d,f,m,g,y,_,v,b){$f.fromBufferAttribute(d,_),Yf.fromBufferAttribute(d,v),Zf.fromBufferAttribute(d,b);const S=c.morphTargetInfluences;if(f&&S){gA.set(0,0,0),yA.set(0,0,0),_A.set(0,0,0);for(let x=0,E=f.length;x<E;x++){const I=S[x],M=f[x];0!==I&&(wV.fromBufferAttribute(M,_),CV.fromBufferAttribute(M,v),xV.fromBufferAttribute(M,b),m?(gA.addScaledVector(wV,I),yA.addScaledVector(CV,I),_A.addScaledVector(xV,I)):(gA.addScaledVector(wV.sub($f),I),yA.addScaledVector(CV.sub(Yf),I),_A.addScaledVector(xV.sub(Zf),I)))}$f.add(gA),Yf.add(yA),Zf.add(_A)}c.isSkinnedMesh&&(c.boneTransform(_,$f),c.boneTransform(v,Yf),c.boneTransform(b,Zf));const T=function IWe(c,a,l,h,d,f,m,g){let y;if(y=1===a.side?h.intersectTriangle(m,f,d,!0,g):h.intersectTriangle(d,f,m,2!==a.side,g),null===y)return null;TA.copy(g),TA.applyMatrix4(c.matrixWorld);const _=l.ray.origin.distanceTo(TA);return _<l.near||_>l.far?null:{distance:_,point:TA.clone(),object:c}}(c,a,l,h,$f,Yf,Zf,EV);if(T){g&&(vA.fromBufferAttribute(g,_),bA.fromBufferAttribute(g,v),SA.fromBufferAttribute(g,b),T.uv=Bs.getUV(EV,$f,Yf,Zf,vA,bA,SA,new tt)),y&&(vA.fromBufferAttribute(y,_),bA.fromBufferAttribute(y,v),SA.fromBufferAttribute(y,b),T.uv2=Bs.getUV(EV,$f,Yf,Zf,vA,bA,SA,new tt));const x={a:_,b:v,c:b,normal:new te,materialIndex:0};Bs.getNormal($f,Yf,Zf,x.normal),T.face=x}return T}xs.prototype.isMesh=!0;class ng extends Nn{constructor(a=1,l=1,h=1,d=1,f=1,m=1){super(),this.type="BoxGeometry",this.parameters={width:a,height:l,depth:h,widthSegments:d,heightSegments:f,depthSegments:m};const g=this;d=Math.floor(d),f=Math.floor(f),m=Math.floor(m);const y=[],_=[],v=[],b=[];let S=0,T=0;function x(E,I,M,D,L,P,F,B,G,$,se){const ie=P/G,j=F/$,J=P/2,ae=F/2,ue=B/2,ge=G+1,K=$+1;let le=0,ye=0;const ke=new te;for(let _e=0;_e<K;_e++){const Ne=_e*j-ae;for(let me=0;me<ge;me++)ke[E]=(me*ie-J)*D,ke[I]=Ne*L,ke[M]=ue,_.push(ke.x,ke.y,ke.z),ke[E]=0,ke[I]=0,ke[M]=B>0?1:-1,v.push(ke.x,ke.y,ke.z),b.push(me/G),b.push(1-_e/$),le+=1}for(let _e=0;_e<$;_e++)for(let Ne=0;Ne<G;Ne++){const Xe=S+Ne+ge*(_e+1),qe=S+(Ne+1)+ge*(_e+1),Ae=S+(Ne+1)+ge*_e;y.push(S+Ne+ge*_e,Xe,Ae),y.push(Xe,qe,Ae),ye+=6}g.addGroup(T,ye,se),T+=ye,S+=le}x("z","y","x",-1,-1,h,l,a,m,f,0),x("z","y","x",1,-1,h,l,-a,m,f,1),x("x","z","y",1,1,a,h,l,d,m,2),x("x","z","y",1,-1,a,h,-l,d,m,3),x("x","y","z",1,-1,a,l,h,d,f,4),x("x","y","z",-1,-1,a,l,-h,d,f,5),this.setIndex(y),this.setAttribute("position",new hn(_,3)),this.setAttribute("normal",new hn(v,3)),this.setAttribute("uv",new hn(b,2))}static fromJSON(a){return new ng(a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments)}}function zv(c){const a={};for(const l in c){a[l]={};for(const h in c[l]){const d=c[l][h];a[l][h]=d&&(d.isColor||d.isMatrix3||d.isMatrix4||d.isVector2||d.isVector3||d.isVector4||d.isTexture||d.isQuaternion)?d.clone():Array.isArray(d)?d.slice():d}}return a}function $o(c){const a={};for(let l=0;l<c.length;l++){const h=zv(c[l]);for(const d in h)a[d]=h[d]}return a}const RWe={clone:zv,merge:$o};class sd extends Us{constructor(a){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==a&&(void 0!==a.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(a))}copy(a){return super.copy(a),this.fragmentShader=a.fragmentShader,this.vertexShader=a.vertexShader,this.uniforms=zv(a.uniforms),this.defines=Object.assign({},a.defines),this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.lights=a.lights,this.clipping=a.clipping,this.extensions=Object.assign({},a.extensions),this.glslVersion=a.glslVersion,this}toJSON(a){const l=super.toJSON(a);l.glslVersion=this.glslVersion,l.uniforms={};for(const d in this.uniforms){const m=this.uniforms[d].value;l.uniforms[d]=m&&m.isTexture?{type:"t",value:m.toJSON(a).uuid}:m&&m.isColor?{type:"c",value:m.getHex()}:m&&m.isVector2?{type:"v2",value:m.toArray()}:m&&m.isVector3?{type:"v3",value:m.toArray()}:m&&m.isVector4?{type:"v4",value:m.toArray()}:m&&m.isMatrix3?{type:"m3",value:m.toArray()}:m&&m.isMatrix4?{type:"m4",value:m.toArray()}:{value:m}}Object.keys(this.defines).length>0&&(l.defines=this.defines),l.vertexShader=this.vertexShader,l.fragmentShader=this.fragmentShader;const h={};for(const d in this.extensions)!0===this.extensions[d]&&(h[d]=!0);return Object.keys(h).length>0&&(l.extensions=h),l}}sd.prototype.isShaderMaterial=!0;class CA extends Yi{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new un,this.projectionMatrix=new un,this.projectionMatrixInverse=new un}copy(a,l){return super.copy(a,l),this.matrixWorldInverse.copy(a.matrixWorldInverse),this.projectionMatrix.copy(a.projectionMatrix),this.projectionMatrixInverse.copy(a.projectionMatrixInverse),this}getWorldDirection(a){this.updateWorldMatrix(!0,!1);const l=this.matrixWorld.elements;return a.set(-l[8],-l[9],-l[10]).normalize()}updateMatrixWorld(a){super.updateMatrixWorld(a),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(a,l){super.updateWorldMatrix(a,l),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}CA.prototype.isCamera=!0;class zs extends CA{constructor(a=50,l=1,h=.1,d=2e3){super(),this.type="PerspectiveCamera",this.fov=a,this.zoom=1,this.near=h,this.far=d,this.focus=10,this.aspect=l,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(a,l){return super.copy(a,l),this.fov=a.fov,this.zoom=a.zoom,this.near=a.near,this.far=a.far,this.focus=a.focus,this.aspect=a.aspect,this.view=null===a.view?null:Object.assign({},a.view),this.filmGauge=a.filmGauge,this.filmOffset=a.filmOffset,this}setFocalLength(a){const l=.5*this.getFilmHeight()/a;this.fov=2*_T*Math.atan(l),this.updateProjectionMatrix()}getFocalLength(){const a=Math.tan(.5*Zm*this.fov);return.5*this.getFilmHeight()/a}getEffectiveFOV(){return 2*_T*Math.atan(Math.tan(.5*Zm*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(a,l,h,d,f,m){this.aspect=a/l,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=l,this.view.offsetX=h,this.view.offsetY=d,this.view.width=f,this.view.height=m,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=this.near;let l=a*Math.tan(.5*Zm*this.fov)/this.zoom,h=2*l,d=this.aspect*h,f=-.5*d;const m=this.view;if(null!==this.view&&this.view.enabled){const y=m.fullWidth,_=m.fullHeight;f+=m.offsetX*d/y,l-=m.offsetY*h/_,d*=m.width/y,h*=m.height/_}const g=this.filmOffset;0!==g&&(f+=a*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(f,f+d,l,l-h,a,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const l=super.toJSON(a);return l.object.fov=this.fov,l.object.zoom=this.zoom,l.object.near=this.near,l.object.far=this.far,l.object.focus=this.focus,l.object.aspect=this.aspect,null!==this.view&&(l.object.view=Object.assign({},this.view)),l.object.filmGauge=this.filmGauge,l.object.filmOffset=this.filmOffset,l}}zs.prototype.isPerspectiveCamera=!0;class MV extends Yi{constructor(a,l,h){if(super(),this.type="CubeCamera",!0!==h.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=h;const d=new zs(90,1,a,l);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new te(1,0,0)),this.add(d);const f=new zs(90,1,a,l);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new te(-1,0,0)),this.add(f);const m=new zs(90,1,a,l);m.layers=this.layers,m.up.set(0,0,1),m.lookAt(new te(0,1,0)),this.add(m);const g=new zs(90,1,a,l);g.layers=this.layers,g.up.set(0,0,-1),g.lookAt(new te(0,-1,0)),this.add(g);const y=new zs(90,1,a,l);y.layers=this.layers,y.up.set(0,-1,0),y.lookAt(new te(0,0,1)),this.add(y);const _=new zs(90,1,a,l);_.layers=this.layers,_.up.set(0,-1,0),_.lookAt(new te(0,0,-1)),this.add(_)}update(a,l){null===this.parent&&this.updateMatrixWorld();const h=this.renderTarget,[d,f,m,g,y,_]=this.children,v=a.xr.enabled,b=a.getRenderTarget();a.xr.enabled=!1;const S=h.texture.generateMipmaps;h.texture.generateMipmaps=!1,a.setRenderTarget(h,0),a.render(l,d),a.setRenderTarget(h,1),a.render(l,f),a.setRenderTarget(h,2),a.render(l,m),a.setRenderTarget(h,3),a.render(l,g),a.setRenderTarget(h,4),a.render(l,y),h.texture.generateMipmaps=S,a.setRenderTarget(h,5),a.render(l,_),a.setRenderTarget(b),a.xr.enabled=v,h.texture.needsPMREMUpdate=!0}}class CT extends Cs{constructor(a,l,h,d,f,m,g,y,_,v){super(a=void 0!==a?a:[],l=void 0!==l?l:301,h,d,f,m,g,y,_,v),this.flipY=!1}get images(){return this.image}set images(a){this.image=a}}CT.prototype.isCubeTexture=!0;class DV extends Ql{constructor(a,l,h){Number.isInteger(l)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),l=h),super(a,a,l),this.texture=new CT(void 0,(l=l||{}).mapping,l.wrapS,l.wrapT,l.magFilter,l.minFilter,l.format,l.type,l.anisotropy,l.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==l.generateMipmaps&&l.generateMipmaps,this.texture.minFilter=void 0!==l.minFilter?l.minFilter:Gr}fromEquirectangularTexture(a,l){this.texture.type=l.type,this.texture.format=qo,this.texture.encoding=l.encoding,this.texture.generateMipmaps=l.generateMipmaps,this.texture.minFilter=l.minFilter,this.texture.magFilter=l.magFilter;const h_uniforms={tEquirect:{value:null}},h_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",h_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",d=new ng(5,5,5),f=new sd({name:"CubemapFromEquirect",uniforms:zv(h_uniforms),vertexShader:h_vertexShader,fragmentShader:h_fragmentShader,side:1,blending:0});f.uniforms.tEquirect.value=l;const m=new xs(d,f),g=l.minFilter;return l.minFilter===Vf&&(l.minFilter=Gr),new MV(1,10,this).update(a,m),l.minFilter=g,m.geometry.dispose(),m.material.dispose(),this}clear(a,l,h,d){const f=a.getRenderTarget();for(let m=0;m<6;m++)a.setRenderTarget(this,m),a.clear(l,h,d);a.setRenderTarget(f)}}DV.prototype.isWebGLCubeRenderTarget=!0;const AV=new te,OWe=new te,NWe=new po;class od{constructor(a=new te(1,0,0),l=0){this.normal=a,this.constant=l}set(a,l){return this.normal.copy(a),this.constant=l,this}setComponents(a,l,h,d){return this.normal.set(a,l,h),this.constant=d,this}setFromNormalAndCoplanarPoint(a,l){return this.normal.copy(a),this.constant=-l.dot(this.normal),this}setFromCoplanarPoints(a,l,h){const d=AV.subVectors(h,l).cross(OWe.subVectors(a,l)).normalize();return this.setFromNormalAndCoplanarPoint(d,a),this}copy(a){return this.normal.copy(a.normal),this.constant=a.constant,this}normalize(){const a=1/this.normal.length();return this.normal.multiplyScalar(a),this.constant*=a,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(a){return this.normal.dot(a)+this.constant}distanceToSphere(a){return this.distanceToPoint(a.center)-a.radius}projectPoint(a,l){return l.copy(this.normal).multiplyScalar(-this.distanceToPoint(a)).add(a)}intersectLine(a,l){const h=a.delta(AV),d=this.normal.dot(h);if(0===d)return 0===this.distanceToPoint(a.start)?l.copy(a.start):null;const f=-(a.start.dot(this.normal)+this.constant)/d;return f<0||f>1?null:l.copy(h).multiplyScalar(f).add(a.start)}intersectsLine(a){const l=this.distanceToPoint(a.start),h=this.distanceToPoint(a.end);return l<0&&h>0||h<0&&l>0}intersectsBox(a){return a.intersectsPlane(this)}intersectsSphere(a){return a.intersectsPlane(this)}coplanarPoint(a){return a.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(a,l){const h=l||NWe.getNormalMatrix(a),d=this.coplanarPoint(AV).applyMatrix4(a),f=this.normal.applyMatrix3(h).normalize();return this.constant=-d.dot(f),this}translate(a){return this.constant-=a.dot(this.normal),this}equals(a){return a.normal.equals(this.normal)&&a.constant===this.constant}clone(){return(new this.constructor).copy(this)}}od.prototype.isPlane=!0;const jv=new Wf,xA=new te;class EA{constructor(a=new od,l=new od,h=new od,d=new od,f=new od,m=new od){this.planes=[a,l,h,d,f,m]}set(a,l,h,d,f,m){const g=this.planes;return g[0].copy(a),g[1].copy(l),g[2].copy(h),g[3].copy(d),g[4].copy(f),g[5].copy(m),this}copy(a){const l=this.planes;for(let h=0;h<6;h++)l[h].copy(a.planes[h]);return this}setFromProjectionMatrix(a){const l=this.planes,h=a.elements,d=h[0],f=h[1],m=h[2],g=h[3],y=h[4],_=h[5],v=h[6],b=h[7],S=h[8],T=h[9],x=h[10],E=h[11],I=h[12],M=h[13],D=h[14],L=h[15];return l[0].setComponents(g-d,b-y,E-S,L-I).normalize(),l[1].setComponents(g+d,b+y,E+S,L+I).normalize(),l[2].setComponents(g+f,b+_,E+T,L+M).normalize(),l[3].setComponents(g-f,b-_,E-T,L-M).normalize(),l[4].setComponents(g-m,b-v,E-x,L-D).normalize(),l[5].setComponents(g+m,b+v,E+x,L+D).normalize(),this}intersectsObject(a){const l=a.geometry;return null===l.boundingSphere&&l.computeBoundingSphere(),jv.copy(l.boundingSphere).applyMatrix4(a.matrixWorld),this.intersectsSphere(jv)}intersectsSprite(a){return jv.center.set(0,0,0),jv.radius=.7071067811865476,jv.applyMatrix4(a.matrixWorld),this.intersectsSphere(jv)}intersectsSphere(a){const l=this.planes,h=a.center,d=-a.radius;for(let f=0;f<6;f++)if(l[f].distanceToPoint(h)<d)return!1;return!0}intersectsBox(a){const l=this.planes;for(let h=0;h<6;h++){const d=l[h];if(xA.x=d.normal.x>0?a.max.x:a.min.x,xA.y=d.normal.y>0?a.max.y:a.min.y,xA.z=d.normal.z>0?a.max.z:a.min.z,d.distanceToPoint(xA)<0)return!1}return!0}containsPoint(a){const l=this.planes;for(let h=0;h<6;h++)if(l[h].distanceToPoint(a)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Bne(){let c=null,a=!1,l=null,h=null;function d(f,m){l(f,m),h=c.requestAnimationFrame(d)}return{start:function(){!0!==a&&null!==l&&(h=c.requestAnimationFrame(d),a=!0)},stop:function(){c.cancelAnimationFrame(h),a=!1},setAnimationLoop:function(f){l=f},setContext:function(f){c=f}}}function FWe(c,a){const l=a.isWebGL2,h=new WeakMap;return{get:function m(_){return _.isInterleavedBufferAttribute&&(_=_.data),h.get(_)},remove:function g(_){_.isInterleavedBufferAttribute&&(_=_.data);const v=h.get(_);v&&(c.deleteBuffer(v.buffer),h.delete(_))},update:function y(_,v){if(_.isGLBufferAttribute){const S=h.get(_);return void((!S||S.version<_.version)&&h.set(_,{buffer:_.buffer,type:_.type,bytesPerElement:_.elementSize,version:_.version}))}_.isInterleavedBufferAttribute&&(_=_.data);const b=h.get(_);void 0===b?h.set(_,function d(_,v){const b=_.array,S=_.usage,T=c.createBuffer();c.bindBuffer(v,T),c.bufferData(v,b,S),_.onUploadCallback();let x=5126;return b instanceof Float32Array?x=5126:b instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):b instanceof Uint16Array?_.isFloat16BufferAttribute?l?x=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):x=5123:b instanceof Int16Array?x=5122:b instanceof Uint32Array?x=5125:b instanceof Int32Array?x=5124:b instanceof Int8Array?x=5120:(b instanceof Uint8Array||b instanceof Uint8ClampedArray)&&(x=5121),{buffer:T,type:x,bytesPerElement:b.BYTES_PER_ELEMENT,version:_.version}}(_,v)):b.version<_.version&&(function f(_,v,b){const S=v.array,T=v.updateRange;c.bindBuffer(b,_),-1===T.count?c.bufferSubData(b,0,S):(l?c.bufferSubData(b,T.offset*S.BYTES_PER_ELEMENT,S,T.offset,T.count):c.bufferSubData(b,T.offset*S.BYTES_PER_ELEMENT,S.subarray(T.offset,T.offset+T.count)),T.count=-1)}(b.buffer,_,v),b.version=_.version)}}}class xT extends Nn{constructor(a=1,l=1,h=1,d=1){super(),this.type="PlaneGeometry",this.parameters={width:a,height:l,widthSegments:h,heightSegments:d};const f=a/2,m=l/2,g=Math.floor(h),y=Math.floor(d),_=g+1,v=y+1,b=a/g,S=l/y,T=[],x=[],E=[],I=[];for(let M=0;M<v;M++){const D=M*S-m;for(let L=0;L<_;L++)x.push(L*b-f,-D,0),E.push(0,0,1),I.push(L/g),I.push(1-M/y)}for(let M=0;M<y;M++)for(let D=0;D<g;D++){const P=D+_*(M+1),F=D+1+_*(M+1),B=D+1+_*M;T.push(D+_*M,P,B),T.push(P,F,B)}this.setIndex(T),this.setAttribute("position",new hn(x,3)),this.setAttribute("normal",new hn(E,3)),this.setAttribute("uv",new hn(I,2))}static fromJSON(a){return new xT(a.width,a.height,a.widthSegments,a.heightSegments)}}const wi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},zt={common:{diffuse:{value:new Pt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new po},uv2Transform:{value:new po},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new tt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new po}},sprite:{diffuse:{value:new Pt(16777215)},opacity:{value:1},center:{value:new tt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new po}}},zu={basic:{uniforms:$o([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.fog]),vertexShader:wi.meshbasic_vert,fragmentShader:wi.meshbasic_frag},lambert:{uniforms:$o([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.fog,zt.lights,{emissive:{value:new Pt(0)}}]),vertexShader:wi.meshlambert_vert,fragmentShader:wi.meshlambert_frag},phong:{uniforms:$o([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,zt.lights,{emissive:{value:new Pt(0)},specular:{value:new Pt(1118481)},shininess:{value:30}}]),vertexShader:wi.meshphong_vert,fragmentShader:wi.meshphong_frag},standard:{uniforms:$o([zt.common,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.roughnessmap,zt.metalnessmap,zt.fog,zt.lights,{emissive:{value:new Pt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wi.meshphysical_vert,fragmentShader:wi.meshphysical_frag},toon:{uniforms:$o([zt.common,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.gradientmap,zt.fog,zt.lights,{emissive:{value:new Pt(0)}}]),vertexShader:wi.meshtoon_vert,fragmentShader:wi.meshtoon_frag},matcap:{uniforms:$o([zt.common,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,{matcap:{value:null}}]),vertexShader:wi.meshmatcap_vert,fragmentShader:wi.meshmatcap_frag},points:{uniforms:$o([zt.points,zt.fog]),vertexShader:wi.points_vert,fragmentShader:wi.points_frag},dashed:{uniforms:$o([zt.common,zt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wi.linedashed_vert,fragmentShader:wi.linedashed_frag},depth:{uniforms:$o([zt.common,zt.displacementmap]),vertexShader:wi.depth_vert,fragmentShader:wi.depth_frag},normal:{uniforms:$o([zt.common,zt.bumpmap,zt.normalmap,zt.displacementmap,{opacity:{value:1}}]),vertexShader:wi.meshnormal_vert,fragmentShader:wi.meshnormal_frag},sprite:{uniforms:$o([zt.sprite,zt.fog]),vertexShader:wi.sprite_vert,fragmentShader:wi.sprite_frag},background:{uniforms:{uvTransform:{value:new po},t2D:{value:null}},vertexShader:wi.background_vert,fragmentShader:wi.background_frag},cube:{uniforms:$o([zt.envmap,{opacity:{value:1}}]),vertexShader:wi.cube_vert,fragmentShader:wi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wi.equirect_vert,fragmentShader:wi.equirect_frag},distanceRGBA:{uniforms:$o([zt.common,zt.displacementmap,{referencePosition:{value:new te},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wi.distanceRGBA_vert,fragmentShader:wi.distanceRGBA_frag},shadow:{uniforms:$o([zt.lights,zt.fog,{color:{value:new Pt(0)},opacity:{value:1}}]),vertexShader:wi.shadow_vert,fragmentShader:wi.shadow_frag}};function Rqe(c,a,l,h,d,f){const m=new Pt(0);let y,_,g=!0===d?0:1,v=null,b=0,S=null;function x(E,I){l.buffers.color.setClear(E.r,E.g,E.b,I,f)}return{getClearColor:function(){return m},setClearColor:function(E,I=1){m.set(E),g=I,x(m,g)},getClearAlpha:function(){return g},setClearAlpha:function(E){g=E,x(m,g)},render:function T(E,I){let M=!1,D=!0===I.isScene?I.background:null;D&&D.isTexture&&(D=a.get(D));const L=c.xr,P=L.getSession&&L.getSession();P&&"additive"===P.environmentBlendMode&&(D=null),null===D?x(m,g):D&&D.isColor&&(x(D,1),M=!0),(c.autoClear||M)&&c.clear(c.autoClearColor,c.autoClearDepth,c.autoClearStencil),D&&(D.isCubeTexture||306===D.mapping)?(void 0===_&&(_=new xs(new ng(1,1,1),new sd({name:"BackgroundCubeMaterial",uniforms:zv(zu.cube.uniforms),vertexShader:zu.cube.vertexShader,fragmentShader:zu.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),_.geometry.deleteAttribute("normal"),_.geometry.deleteAttribute("uv"),_.onBeforeRender=function(F,B,G){this.matrixWorld.copyPosition(G.matrixWorld)},Object.defineProperty(_.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),h.update(_)),_.material.uniforms.envMap.value=D,_.material.uniforms.flipEnvMap.value=D.isCubeTexture&&!1===D.isRenderTargetTexture?-1:1,(v!==D||b!==D.version||S!==c.toneMapping)&&(_.material.needsUpdate=!0,v=D,b=D.version,S=c.toneMapping),E.unshift(_,_.geometry,_.material,0,0,null)):D&&D.isTexture&&(void 0===y&&(y=new xs(new xT(2,2),new sd({name:"BackgroundMaterial",uniforms:zv(zu.background.uniforms),vertexShader:zu.background.vertexShader,fragmentShader:zu.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),y.geometry.deleteAttribute("normal"),Object.defineProperty(y.material,"map",{get:function(){return this.uniforms.t2D.value}}),h.update(y)),y.material.uniforms.t2D.value=D,!0===D.matrixAutoUpdate&&D.updateMatrix(),y.material.uniforms.uvTransform.value.copy(D.matrix),(v!==D||b!==D.version||S!==c.toneMapping)&&(y.material.needsUpdate=!0,v=D,b=D.version,S=c.toneMapping),E.unshift(y,y.geometry,y.material,0,0,null))}}}function Lqe(c,a,l,h){const d=c.getParameter(34921),f=h.isWebGL2?null:a.get("OES_vertex_array_object"),m=h.isWebGL2||null!==f,g={},y=E(null);let _=y;function S(ae){return h.isWebGL2?c.bindVertexArray(ae):f.bindVertexArrayOES(ae)}function T(ae){return h.isWebGL2?c.deleteVertexArray(ae):f.deleteVertexArrayOES(ae)}function E(ae){const ue=[],ge=[],K=[];for(let le=0;le<d;le++)ue[le]=0,ge[le]=0,K[le]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ue,enabledAttributes:ge,attributeDivisors:K,object:ae,attributes:{},index:null}}function D(){const ae=_.newAttributes;for(let ue=0,ge=ae.length;ue<ge;ue++)ae[ue]=0}function L(ae){P(ae,0)}function P(ae,ue){const K=_.enabledAttributes,le=_.attributeDivisors;_.newAttributes[ae]=1,0===K[ae]&&(c.enableVertexAttribArray(ae),K[ae]=1),le[ae]!==ue&&((h.isWebGL2?c:a.get("ANGLE_instanced_arrays"))[h.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ae,ue),le[ae]=ue)}function F(){const ae=_.newAttributes,ue=_.enabledAttributes;for(let ge=0,K=ue.length;ge<K;ge++)ue[ge]!==ae[ge]&&(c.disableVertexAttribArray(ge),ue[ge]=0)}function B(ae,ue,ge,K,le,ye){!0!==h.isWebGL2||5124!==ge&&5125!==ge?c.vertexAttribPointer(ae,ue,ge,K,le,ye):c.vertexAttribIPointer(ae,ue,ge,le,ye)}function j(){J(),_!==y&&(_=y,S(_.object))}function J(){y.geometry=null,y.program=null,y.wireframe=!1}return{setup:function v(ae,ue,ge,K,le){let ye=!1;if(m){const ke=function x(ae,ue,ge){const K=!0===ge.wireframe;let le=g[ae.id];void 0===le&&(le={},g[ae.id]=le);let ye=le[ue.id];void 0===ye&&(ye={},le[ue.id]=ye);let ke=ye[K];return void 0===ke&&(ke=E(function b(){return h.isWebGL2?c.createVertexArray():f.createVertexArrayOES()}()),ye[K]=ke),ke}(K,ge,ue);_!==ke&&(_=ke,S(_.object)),ye=function I(ae,ue){const ge=_.attributes,K=ae.attributes;let le=0;for(const ye in K){const ke=ge[ye],_e=K[ye];if(void 0===ke||ke.attribute!==_e||ke.data!==_e.data)return!0;le++}return _.attributesNum!==le||_.index!==ue}(K,le),ye&&function M(ae,ue){const ge={},K=ae.attributes;let le=0;for(const ye in K){const ke=K[ye],_e={};_e.attribute=ke,ke.data&&(_e.data=ke.data),ge[ye]=_e,le++}_.attributes=ge,_.attributesNum=le,_.index=ue}(K,le)}else{const ke=!0===ue.wireframe;(_.geometry!==K.id||_.program!==ge.id||_.wireframe!==ke)&&(_.geometry=K.id,_.program=ge.id,_.wireframe=ke,ye=!0)}!0===ae.isInstancedMesh&&(ye=!0),null!==le&&l.update(le,34963),ye&&(function G(ae,ue,ge,K){if(!1===h.isWebGL2&&(ae.isInstancedMesh||K.isInstancedBufferGeometry)&&null===a.get("ANGLE_instanced_arrays"))return;D();const le=K.attributes,ye=ge.getAttributes(),ke=ue.defaultAttributeValues;for(const _e in ye){const Ne=ye[_e];if(Ne.location>=0){let me=le[_e];if(void 0===me&&("instanceMatrix"===_e&&ae.instanceMatrix&&(me=ae.instanceMatrix),"instanceColor"===_e&&ae.instanceColor&&(me=ae.instanceColor)),void 0!==me){const Xe=me.normalized,qe=me.itemSize,Ae=l.get(me);if(void 0===Ae)continue;const Tn=Ae.buffer,wt=Ae.type,Bt=Ae.bytesPerElement;if(me.isInterleavedBufferAttribute){const Pe=me.data,_n=Pe.stride,on=me.offset;if(Pe&&Pe.isInstancedInterleavedBuffer){for(let et=0;et<Ne.locationSize;et++)P(Ne.location+et,Pe.meshPerAttribute);!0!==ae.isInstancedMesh&&void 0===K._maxInstanceCount&&(K._maxInstanceCount=Pe.meshPerAttribute*Pe.count)}else for(let et=0;et<Ne.locationSize;et++)L(Ne.location+et);c.bindBuffer(34962,Tn);for(let et=0;et<Ne.locationSize;et++)B(Ne.location+et,qe/Ne.locationSize,wt,Xe,_n*Bt,(on+qe/Ne.locationSize*et)*Bt)}else{if(me.isInstancedBufferAttribute){for(let Pe=0;Pe<Ne.locationSize;Pe++)P(Ne.location+Pe,me.meshPerAttribute);!0!==ae.isInstancedMesh&&void 0===K._maxInstanceCount&&(K._maxInstanceCount=me.meshPerAttribute*me.count)}else for(let Pe=0;Pe<Ne.locationSize;Pe++)L(Ne.location+Pe);c.bindBuffer(34962,Tn);for(let Pe=0;Pe<Ne.locationSize;Pe++)B(Ne.location+Pe,qe/Ne.locationSize,wt,Xe,qe*Bt,qe/Ne.locationSize*Pe*Bt)}}else if(void 0!==ke){const Xe=ke[_e];if(void 0!==Xe)switch(Xe.length){case 2:c.vertexAttrib2fv(Ne.location,Xe);break;case 3:c.vertexAttrib3fv(Ne.location,Xe);break;case 4:c.vertexAttrib4fv(Ne.location,Xe);break;default:c.vertexAttrib1fv(Ne.location,Xe)}}}}F()}(ae,ue,ge,K),null!==le&&c.bindBuffer(34963,l.get(le).buffer))},reset:j,resetDefaultState:J,dispose:function $(){j();for(const ae in g){const ue=g[ae];for(const ge in ue){const K=ue[ge];for(const le in K)T(K[le].object),delete K[le];delete ue[ge]}delete g[ae]}},releaseStatesOfGeometry:function se(ae){if(void 0===g[ae.id])return;const ue=g[ae.id];for(const ge in ue){const K=ue[ge];for(const le in K)T(K[le].object),delete K[le];delete ue[ge]}delete g[ae.id]},releaseStatesOfProgram:function ie(ae){for(const ue in g){const ge=g[ue];if(void 0===ge[ae.id])continue;const K=ge[ae.id];for(const le in K)T(K[le].object),delete K[le];delete ge[ae.id]}},initAttributes:D,enableAttribute:L,disableUnusedAttributes:F}}function Pqe(c,a,l,h){const d=h.isWebGL2;let f;this.setMode=function m(_){f=_},this.render=function g(_,v){c.drawArrays(f,_,v),l.update(v,f,1)},this.renderInstances=function y(_,v,b){if(0===b)return;let S,T;if(d)S=c,T="drawArraysInstanced";else if(S=a.get("ANGLE_instanced_arrays"),T="drawArraysInstancedANGLE",null===S)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");S[T](f,_,v,b),l.update(v,f,b)}}function Oqe(c,a,l){let h;function f(G){if("highp"===G){if(c.getShaderPrecisionFormat(35633,36338).precision>0&&c.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";G="mediump"}return"mediump"===G&&c.getShaderPrecisionFormat(35633,36337).precision>0&&c.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const m=typeof WebGL2RenderingContext<"u"&&c instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&c instanceof WebGL2ComputeRenderingContext;let g=void 0!==l.precision?l.precision:"highp";const y=f(g);y!==g&&(console.warn("THREE.WebGLRenderer:",g,"not supported, using",y,"instead."),g=y);const _=m||a.has("WEBGL_draw_buffers"),v=!0===l.logarithmicDepthBuffer,b=c.getParameter(34930),S=c.getParameter(35660),T=c.getParameter(3379),x=c.getParameter(34076),E=c.getParameter(34921),I=c.getParameter(36347),M=c.getParameter(36348),D=c.getParameter(36349),L=S>0,P=m||a.has("OES_texture_float");return{isWebGL2:m,drawBuffers:_,getMaxAnisotropy:function d(){if(void 0!==h)return h;if(!0===a.has("EXT_texture_filter_anisotropic")){const G=a.get("EXT_texture_filter_anisotropic");h=c.getParameter(G.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else h=0;return h},getMaxPrecision:f,precision:g,logarithmicDepthBuffer:v,maxTextures:b,maxVertexTextures:S,maxTextureSize:T,maxCubemapSize:x,maxAttributes:E,maxVertexUniforms:I,maxVaryings:M,maxFragmentUniforms:D,vertexTextures:L,floatFragmentTextures:P,floatVertexTextures:L&&P,maxSamples:m?c.getParameter(36183):0}}function Nqe(c){const a=this;let l=null,h=0,d=!1,f=!1;const m=new od,g=new po,y={value:null,needsUpdate:!1};function _(){y.value!==l&&(y.value=l,y.needsUpdate=h>0),a.numPlanes=h,a.numIntersection=0}function v(b,S,T,x){const E=null!==b?b.length:0;let I=null;if(0!==E){if(I=y.value,!0!==x||null===I){const M=T+4*E,D=S.matrixWorldInverse;g.getNormalMatrix(D),(null===I||I.length<M)&&(I=new Float32Array(M));for(let L=0,P=T;L!==E;++L,P+=4)m.copy(b[L]).applyMatrix4(D,g),m.normal.toArray(I,P),I[P+3]=m.constant}y.value=I,y.needsUpdate=!0}return a.numPlanes=E,a.numIntersection=0,I}this.uniform=y,this.numPlanes=0,this.numIntersection=0,this.init=function(b,S,T){const x=0!==b.length||S||0!==h||d;return d=S,l=v(b,T,0),h=b.length,x},this.beginShadows=function(){f=!0,v(null)},this.endShadows=function(){f=!1,_()},this.setState=function(b,S,T){const x=b.clippingPlanes,E=b.clipIntersection,I=b.clipShadows,M=c.get(b);if(!d||null===x||0===x.length||f&&!I)f?v(null):_();else{const D=f?0:h,L=4*D;let P=M.clippingState||null;y.value=P,P=v(x,S,L,T);for(let F=0;F!==L;++F)P[F]=l[F];M.clippingState=P,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=D}}}function Fqe(c){let a=new WeakMap;function l(m,g){return 303===g?m.mapping=301:304===g&&(m.mapping=302),m}function d(m){const g=m.target;g.removeEventListener("dispose",d);const y=a.get(g);void 0!==y&&(a.delete(g),y.dispose())}return{get:function h(m){if(m&&m.isTexture&&!1===m.isRenderTargetTexture){const g=m.mapping;if(303===g||304===g){if(a.has(m))return l(a.get(m).texture,m.mapping);{const y=m.image;if(y&&y.height>0){const _=new DV(y.height/2);return _.fromEquirectangularTexture(c,m),a.set(m,_),m.addEventListener("dispose",d),l(_.texture,m.mapping)}return null}}}return m},dispose:function f(){a=new WeakMap}}}zu.physical={uniforms:$o([zu.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new tt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Pt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new tt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Pt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Pt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:wi.meshphysical_vert,fragmentShader:wi.meshphysical_frag};class ET extends CA{constructor(a=-1,l=1,h=1,d=-1,f=.1,m=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=a,this.right=l,this.top=h,this.bottom=d,this.near=f,this.far=m,this.updateProjectionMatrix()}copy(a,l){return super.copy(a,l),this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this.near=a.near,this.far=a.far,this.zoom=a.zoom,this.view=null===a.view?null:Object.assign({},a.view),this}setViewOffset(a,l,h,d,f,m){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=a,this.view.fullHeight=l,this.view.offsetX=h,this.view.offsetY=d,this.view.width=f,this.view.height=m,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const a=(this.right-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),h=(this.right+this.left)/2,d=(this.top+this.bottom)/2;let f=h-a,m=h+a,g=d+l,y=d-l;if(null!==this.view&&this.view.enabled){const _=(this.right-this.left)/this.view.fullWidth/this.zoom,v=(this.top-this.bottom)/this.view.fullHeight/this.zoom;f+=_*this.view.offsetX,m=f+_*this.view.width,g-=v*this.view.offsetY,y=g-v*this.view.height}this.projectionMatrix.makeOrthographic(f,m,g,y,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(a){const l=super.toJSON(a);return l.object.zoom=this.zoom,l.object.left=this.left,l.object.right=this.right,l.object.top=this.top,l.object.bottom=this.bottom,l.object.near=this.near,l.object.far=this.far,null!==this.view&&(l.object.view=Object.assign({},this.view)),l}}ET.prototype.isOrthographicCamera=!0;class MT extends sd{constructor(a){super(a),this.type="RawShaderMaterial"}}MT.prototype.isRawShaderMaterial=!0;const Gu=Math.pow(2,8),Une=[.125,.215,.35,.446,.526,.582],zne=5+Une.length,IV=new ET,{_lodPlanes:DT,_sizeLods:Gne,_sigmas:MA}=kqe(),Hne=new Pt;let RV=null;const ig=(1+Math.sqrt(5))/2,qv=1/ig,jne=[new te(1,1,1),new te(-1,1,1),new te(1,1,-1),new te(-1,1,-1),new te(0,ig,qv),new te(0,ig,-qv),new te(qv,0,ig),new te(-qv,0,ig),new te(ig,qv,0),new te(-ig,qv,0)];class Wne{constructor(a){this._renderer=a,this._pingPongRenderTarget=null,this._blurMaterial=function Vqe(c){const a=new Float32Array(c),l=new te(0,1,0);return new MT({name:"SphericalGaussianBlur",defines:{n:c},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:a},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(a,l=0,h=.1,d=100){RV=this._renderer.getRenderTarget();const f=this._allocateTargets();return this._sceneToCubeUV(a,h,d,f),l>0&&this._blur(f,0,0,l),this._applyPMREM(f),this._cleanup(f),f}fromEquirectangular(a,l=null){return this._fromTexture(a,l)}fromCubemap(a,l=null){return this._fromTexture(a,l)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=$ne(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=qne(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let a=0;a<DT.length;a++)DT[a].dispose()}_cleanup(a){this._renderer.setRenderTarget(RV),a.scissorTest=!1,DA(a,0,0,a.width,a.height)}_fromTexture(a,l){RV=this._renderer.getRenderTarget();const h=l||this._allocateTargets(a);return this._textureToCubeUV(a,h),this._applyPMREM(h),this._cleanup(h),h}_allocateTargets(a){const l={magFilter:Gr,minFilter:Gr,generateMipmaps:!1,type:Tv,format:qo,encoding:zf,depthBuffer:!1},h=Xne(l);return h.depthBuffer=!a,null===this._pingPongRenderTarget&&(this._pingPongRenderTarget=Xne(l)),h}_compileMaterial(a){const l=new xs(DT[0],a);this._renderer.compile(l,IV)}_sceneToCubeUV(a,l,h,d){const g=new zs(90,1,l,h),y=[1,-1,1,1,1,1],_=[1,1,1,-1,-1,-1],v=this._renderer,b=v.autoClear,S=v.toneMapping;v.getClearColor(Hne),v.toneMapping=0,v.autoClear=!1;const T=new Ml({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),x=new xs(new ng,T);let E=!1;const I=a.background;I?I.isColor&&(T.color.copy(I),a.background=null,E=!0):(T.color.copy(Hne),E=!0);for(let M=0;M<6;M++){const D=M%3;0===D?(g.up.set(0,y[M],0),g.lookAt(_[M],0,0)):1===D?(g.up.set(0,0,y[M]),g.lookAt(0,_[M],0)):(g.up.set(0,y[M],0),g.lookAt(0,0,_[M])),DA(d,D*Gu,M>2?Gu:0,Gu,Gu),v.setRenderTarget(d),E&&v.render(x,g),v.render(a,g)}x.geometry.dispose(),x.material.dispose(),v.toneMapping=S,v.autoClear=b,a.background=I}_textureToCubeUV(a,l){const h=this._renderer,d=301===a.mapping||302===a.mapping;d?(null===this._cubemapShader&&(this._cubemapShader=$ne()),this._cubemapShader.uniforms.flipEnvMap.value=!1===a.isRenderTargetTexture?-1:1):null===this._equirectShader&&(this._equirectShader=qne());const f=d?this._cubemapShader:this._equirectShader,m=new xs(DT[0],f),g=f.uniforms;g.envMap.value=a,d||g.texelSize.value.set(1/a.image.width,1/a.image.height),DA(l,0,0,3*Gu,2*Gu),h.setRenderTarget(l),h.render(m,IV)}_applyPMREM(a){const l=this._renderer,h=l.autoClear;l.autoClear=!1;for(let d=1;d<zne;d++){const f=Math.sqrt(MA[d]*MA[d]-MA[d-1]*MA[d-1]);this._blur(a,d-1,d,f,jne[(d-1)%jne.length])}l.autoClear=h}_blur(a,l,h,d,f){const m=this._pingPongRenderTarget;this._halfBlur(a,m,l,h,d,"latitudinal",f),this._halfBlur(m,a,h,h,d,"longitudinal",f)}_halfBlur(a,l,h,d,f,m,g){const y=this._renderer,_=this._blurMaterial;"latitudinal"!==m&&"longitudinal"!==m&&console.error("blur direction must be either latitudinal or longitudinal!");const b=new xs(DT[d],_),S=_.uniforms,T=Gne[h]-1,x=isFinite(f)?Math.PI/(2*T):2*Math.PI/39,E=f/x,I=isFinite(f)?1+Math.floor(3*E):20;I>20&&console.warn(`sigmaRadians, ${f}, is too large and will clip, as it requested ${I} samples when the maximum is set to 20`);const M=[];let D=0;for(let B=0;B<20;++B){const G=B/E,$=Math.exp(-G*G/2);M.push($),0===B?D+=$:B<I&&(D+=2*$)}for(let B=0;B<M.length;B++)M[B]=M[B]/D;S.envMap.value=a.texture,S.samples.value=I,S.weights.value=M,S.latitudinal.value="latitudinal"===m,g&&(S.poleAxis.value=g),S.dTheta.value=x,S.mipInt.value=8-h;const L=Gne[d];DA(l,3*Math.max(0,Gu-2*L),(0===d?0:2*Gu)+2*L*(d>4?d-8+4:0),3*L,2*L),y.setRenderTarget(l),y.render(b,IV)}}function kqe(){const c=[],a=[],l=[];let h=8;for(let d=0;d<zne;d++){const f=Math.pow(2,h);a.push(f);let m=1/f;d>4?m=Une[d-8+4-1]:0===d&&(m=0),l.push(m);const g=1/(f-1),y=-g/2,_=1+g/2,v=[y,y,_,y,_,_,y,y,_,_,y,_],b=6,S=6,T=3,x=2,E=1,I=new Float32Array(T*S*b),M=new Float32Array(x*S*b),D=new Float32Array(E*S*b);for(let P=0;P<b;P++){const F=P%3*2/3-1,B=P>2?0:-1;I.set([F,B,0,F+2/3,B,0,F+2/3,B+1,0,F,B,0,F+2/3,B+1,0,F,B+1,0],T*S*P),M.set(v,x*S*P),D.set([P,P,P,P,P,P],E*S*P)}const L=new Nn;L.setAttribute("position",new ar(I,T)),L.setAttribute("uv",new ar(M,x)),L.setAttribute("faceIndex",new ar(D,E)),c.push(L),h>4&&h--}return{_lodPlanes:c,_sizeLods:a,_sigmas:l}}function Xne(c){const a=new Ql(3*Gu,3*Gu,c);return a.texture.mapping=306,a.texture.name="PMREM.cubeUv",a.scissorTest=!0,a}function DA(c,a,l,h,d){c.viewport.set(a,l,h,d),c.scissor.set(a,l,h,d)}function qne(){const c=new tt(1,1);return new MT({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:c}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = texture2D ( envMap, uv ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = texture2D ( envMap, uv ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function $ne(){return new MT({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Bqe(c){let a=new WeakMap,l=null;function f(g){const y=g.target;y.removeEventListener("dispose",f);const _=a.get(y);void 0!==_&&(a.delete(y),_.dispose())}return{get:function h(g){if(g&&g.isTexture){const y=g.mapping,_=303===y||304===y,v=301===y||302===y;if(_||v){if(g.isRenderTargetTexture&&!0===g.needsPMREMUpdate){g.needsPMREMUpdate=!1;let b=a.get(g);return null===l&&(l=new Wne(c)),b=_?l.fromEquirectangular(g,b):l.fromCubemap(g,b),a.set(g,b),b.texture}if(a.has(g))return a.get(g).texture;{const b=g.image;if(_&&b&&b.height>0||v&&b&&function d(g){let y=0;for(let v=0;v<6;v++)void 0!==g[v]&&y++;return 6===y}(b)){null===l&&(l=new Wne(c));const S=_?l.fromEquirectangular(g):l.fromCubemap(g);return a.set(g,S),g.addEventListener("dispose",f),S.texture}return null}}}return g},dispose:function m(){a=new WeakMap,null!==l&&(l.dispose(),l=null)}}}function Uqe(c){const a={};function l(h){if(void 0!==a[h])return a[h];let d;switch(h){case"WEBGL_depth_texture":d=c.getExtension("WEBGL_depth_texture")||c.getExtension("MOZ_WEBGL_depth_texture")||c.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=c.getExtension("WEBGL_compressed_texture_s3tc")||c.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=c.getExtension("WEBGL_compressed_texture_pvrtc")||c.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=c.getExtension(h)}return a[h]=d,d}return{has:function(h){return null!==l(h)},init:function(h){h.isWebGL2?l("EXT_color_buffer_float"):(l("WEBGL_depth_texture"),l("OES_texture_float"),l("OES_texture_half_float"),l("OES_texture_half_float_linear"),l("OES_standard_derivatives"),l("OES_element_index_uint"),l("OES_vertex_array_object"),l("ANGLE_instanced_arrays")),l("OES_texture_float_linear"),l("EXT_color_buffer_half_float"),l("WEBGL_multisampled_render_to_texture")},get:function(h){const d=l(h);return null===d&&console.warn("THREE.WebGLRenderer: "+h+" extension not supported."),d}}}function zqe(c,a,l,h){const d={},f=new WeakMap;function m(b){const S=b.target;null!==S.index&&a.remove(S.index);for(const x in S.attributes)a.remove(S.attributes[x]);S.removeEventListener("dispose",m),delete d[S.id];const T=f.get(S);T&&(a.remove(T),f.delete(S)),h.releaseStatesOfGeometry(S),!0===S.isInstancedBufferGeometry&&delete S._maxInstanceCount,l.memory.geometries--}function _(b){const S=[],T=b.index,x=b.attributes.position;let E=0;if(null!==T){const D=T.array;E=T.version;for(let L=0,P=D.length;L<P;L+=3){const F=D[L+0],B=D[L+1],G=D[L+2];S.push(F,B,B,G,G,F)}}else{E=x.version;for(let L=0,P=x.array.length/3-1;L<P;L+=3){const F=L+0,B=L+1,G=L+2;S.push(F,B,B,G,G,F)}}const I=new(Ene(S)?bV:vV)(S,1);I.version=E;const M=f.get(b);M&&a.remove(M),f.set(b,I)}return{get:function g(b,S){return!0===d[S.id]||(S.addEventListener("dispose",m),d[S.id]=!0,l.memory.geometries++),S},update:function y(b){const S=b.attributes;for(const x in S)a.update(S[x],34962);const T=b.morphAttributes;for(const x in T){const E=T[x];for(let I=0,M=E.length;I<M;I++)a.update(E[I],34962)}},getWireframeAttribute:function v(b){const S=f.get(b);if(S){const T=b.index;null!==T&&S.version<T.version&&_(b)}else _(b);return f.get(b)}}}function Gqe(c,a,l,h){const d=h.isWebGL2;let f,g,y;this.setMode=function m(S){f=S},this.setIndex=function _(S){g=S.type,y=S.bytesPerElement},this.render=function v(S,T){c.drawElements(f,T,g,S*y),l.update(T,f,1)},this.renderInstances=function b(S,T,x){if(0===x)return;let E,I;if(d)E=c,I="drawElementsInstanced";else if(E=a.get("ANGLE_instanced_arrays"),I="drawElementsInstancedANGLE",null===E)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");E[I](f,T,g,S*y,x),l.update(T,f,x)}}function Hqe(c){const l={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:l,programs:null,autoReset:!0,reset:function d(){l.frame++,l.calls=0,l.triangles=0,l.points=0,l.lines=0},update:function h(f,m,g){switch(l.calls++,m){case 4:l.triangles+=g*(f/3);break;case 1:l.lines+=g*(f/2);break;case 3:l.lines+=g*(f-1);break;case 2:l.lines+=g*f;break;case 0:l.points+=g*f;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",m)}}}}class PV extends Cs{constructor(a=null,l=1,h=1,d=1){super(null),this.image={data:a,width:l,height:h,depth:d},this.magFilter=ws,this.minFilter=ws,this.wrapR=Do,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function jqe(c,a){return c[0]-a[0]}function Wqe(c,a){return Math.abs(a[1])-Math.abs(c[1])}function Yne(c,a){let l=1;const h=a.isInterleavedBufferAttribute?a.data.array:a.array;h instanceof Int8Array?l=127:h instanceof Int16Array?l=32767:h instanceof Int32Array?l=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",h),c.divideScalar(l)}function Xqe(c,a,l){const h={},d=new Float32Array(8),f=new WeakMap,m=new te,g=[];for(let _=0;_<8;_++)g[_]=[_,0];return{update:function y(_,v,b,S){const T=_.morphTargetInfluences;if(!0===a.isWebGL2){const x=v.morphAttributes.position.length;let E=f.get(v);if(void 0===E||E.count!==x){let J=function(){ie.dispose(),f.delete(v),v.removeEventListener("dispose",J)};void 0!==E&&E.texture.dispose();const D=void 0!==v.morphAttributes.normal,L=v.morphAttributes.position,P=v.morphAttributes.normal||[],B=!0===D?2:1;let G=v.attributes.position.count*B,$=1;G>a.maxTextureSize&&($=Math.ceil(G/a.maxTextureSize),G=a.maxTextureSize);const se=new Float32Array(G*$*4*x),ie=new PV(se,G,$,x);ie.format=qo,ie.type=Uf,ie.needsUpdate=!0;const j=4*B;for(let ae=0;ae<x;ae++){const ue=L[ae],ge=P[ae],K=G*$*4*ae;for(let le=0;le<ue.count;le++){m.fromBufferAttribute(ue,le),!0===ue.normalized&&Yne(m,ue);const ye=le*j;se[K+ye+0]=m.x,se[K+ye+1]=m.y,se[K+ye+2]=m.z,se[K+ye+3]=0,!0===D&&(m.fromBufferAttribute(ge,le),!0===ge.normalized&&Yne(m,ge),se[K+ye+4]=m.x,se[K+ye+5]=m.y,se[K+ye+6]=m.z,se[K+ye+7]=0)}}E={count:x,texture:ie,size:new tt(G,$)},f.set(v,E),v.addEventListener("dispose",J)}let I=0;for(let D=0;D<T.length;D++)I+=T[D];const M=v.morphTargetsRelative?1:1-I;S.getUniforms().setValue(c,"morphTargetBaseInfluence",M),S.getUniforms().setValue(c,"morphTargetInfluences",T),S.getUniforms().setValue(c,"morphTargetsTexture",E.texture,l),S.getUniforms().setValue(c,"morphTargetsTextureSize",E.size)}else{const x=void 0===T?0:T.length;let E=h[v.id];if(void 0===E||E.length!==x){E=[];for(let P=0;P<x;P++)E[P]=[P,0];h[v.id]=E}for(let P=0;P<x;P++){const F=E[P];F[0]=P,F[1]=T[P]}E.sort(Wqe);for(let P=0;P<8;P++)P<x&&E[P][1]?(g[P][0]=E[P][0],g[P][1]=E[P][1]):(g[P][0]=Number.MAX_SAFE_INTEGER,g[P][1]=0);g.sort(jqe);const I=v.morphAttributes.position,M=v.morphAttributes.normal;let D=0;for(let P=0;P<8;P++){const F=g[P],B=F[0],G=F[1];B!==Number.MAX_SAFE_INTEGER&&G?(I&&v.getAttribute("morphTarget"+P)!==I[B]&&v.setAttribute("morphTarget"+P,I[B]),M&&v.getAttribute("morphNormal"+P)!==M[B]&&v.setAttribute("morphNormal"+P,M[B]),d[P]=G,D+=G):(I&&!0===v.hasAttribute("morphTarget"+P)&&v.deleteAttribute("morphTarget"+P),M&&!0===v.hasAttribute("morphNormal"+P)&&v.deleteAttribute("morphNormal"+P),d[P]=0)}const L=v.morphTargetsRelative?1:1-D;S.getUniforms().setValue(c,"morphTargetBaseInfluence",L),S.getUniforms().setValue(c,"morphTargetInfluences",d)}}}}function qqe(c,a,l,h){let d=new WeakMap;function g(y){const _=y.target;_.removeEventListener("dispose",g),l.remove(_.instanceMatrix),null!==_.instanceColor&&l.remove(_.instanceColor)}return{update:function f(y){const _=h.render.frame,b=a.get(y,y.geometry);return d.get(b)!==_&&(a.update(b),d.set(b,_)),y.isInstancedMesh&&(!1===y.hasEventListener("dispose",g)&&y.addEventListener("dispose",g),l.update(y.instanceMatrix,34962),null!==y.instanceColor&&l.update(y.instanceColor,34962)),b},dispose:function m(){d=new WeakMap}}}PV.prototype.isDataTexture2DArray=!0;class Zne extends Cs{constructor(a=null,l=1,h=1,d=1){super(null),this.image={data:a,width:l,height:h,depth:d},this.magFilter=ws,this.minFilter=ws,this.wrapR=Do,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Zne.prototype.isDataTexture3D=!0;const Kne=new Cs,Jne=new PV,Qne=new Zne,eie=new CT,tie=[],nie=[],iie=new Float32Array(16),rie=new Float32Array(9),sie=new Float32Array(4);function $v(c,a,l){const h=c[0];if(h<=0||h>0)return c;const d=a*l;let f=tie[d];if(void 0===f&&(f=new Float32Array(d),tie[d]=f),0!==a){h.toArray(f,0);for(let m=1,g=0;m!==a;++m)g+=l,c[m].toArray(f,g)}return f}function ba(c,a){if(c.length!==a.length)return!1;for(let l=0,h=c.length;l<h;l++)if(c[l]!==a[l])return!1;return!0}function Yo(c,a){for(let l=0,h=a.length;l<h;l++)c[l]=a[l]}function AA(c,a){let l=nie[a];void 0===l&&(l=new Int32Array(a),nie[a]=l);for(let h=0;h!==a;++h)l[h]=c.allocateTextureUnit();return l}function $qe(c,a){const l=this.cache;l[0]!==a&&(c.uniform1f(this.addr,a),l[0]=a)}function Yqe(c,a){const l=this.cache;if(void 0!==a.x)(l[0]!==a.x||l[1]!==a.y)&&(c.uniform2f(this.addr,a.x,a.y),l[0]=a.x,l[1]=a.y);else{if(ba(l,a))return;c.uniform2fv(this.addr,a),Yo(l,a)}}function Zqe(c,a){const l=this.cache;if(void 0!==a.x)(l[0]!==a.x||l[1]!==a.y||l[2]!==a.z)&&(c.uniform3f(this.addr,a.x,a.y,a.z),l[0]=a.x,l[1]=a.y,l[2]=a.z);else if(void 0!==a.r)(l[0]!==a.r||l[1]!==a.g||l[2]!==a.b)&&(c.uniform3f(this.addr,a.r,a.g,a.b),l[0]=a.r,l[1]=a.g,l[2]=a.b);else{if(ba(l,a))return;c.uniform3fv(this.addr,a),Yo(l,a)}}function Kqe(c,a){const l=this.cache;if(void 0!==a.x)(l[0]!==a.x||l[1]!==a.y||l[2]!==a.z||l[3]!==a.w)&&(c.uniform4f(this.addr,a.x,a.y,a.z,a.w),l[0]=a.x,l[1]=a.y,l[2]=a.z,l[3]=a.w);else{if(ba(l,a))return;c.uniform4fv(this.addr,a),Yo(l,a)}}function Jqe(c,a){const l=this.cache,h=a.elements;if(void 0===h){if(ba(l,a))return;c.uniformMatrix2fv(this.addr,!1,a),Yo(l,a)}else{if(ba(l,h))return;sie.set(h),c.uniformMatrix2fv(this.addr,!1,sie),Yo(l,h)}}function Qqe(c,a){const l=this.cache,h=a.elements;if(void 0===h){if(ba(l,a))return;c.uniformMatrix3fv(this.addr,!1,a),Yo(l,a)}else{if(ba(l,h))return;rie.set(h),c.uniformMatrix3fv(this.addr,!1,rie),Yo(l,h)}}function e$e(c,a){const l=this.cache,h=a.elements;if(void 0===h){if(ba(l,a))return;c.uniformMatrix4fv(this.addr,!1,a),Yo(l,a)}else{if(ba(l,h))return;iie.set(h),c.uniformMatrix4fv(this.addr,!1,iie),Yo(l,h)}}function t$e(c,a){const l=this.cache;l[0]!==a&&(c.uniform1i(this.addr,a),l[0]=a)}function n$e(c,a){const l=this.cache;ba(l,a)||(c.uniform2iv(this.addr,a),Yo(l,a))}function i$e(c,a){const l=this.cache;ba(l,a)||(c.uniform3iv(this.addr,a),Yo(l,a))}function r$e(c,a){const l=this.cache;ba(l,a)||(c.uniform4iv(this.addr,a),Yo(l,a))}function s$e(c,a){const l=this.cache;l[0]!==a&&(c.uniform1ui(this.addr,a),l[0]=a)}function o$e(c,a){const l=this.cache;ba(l,a)||(c.uniform2uiv(this.addr,a),Yo(l,a))}function a$e(c,a){const l=this.cache;ba(l,a)||(c.uniform3uiv(this.addr,a),Yo(l,a))}function l$e(c,a){const l=this.cache;ba(l,a)||(c.uniform4uiv(this.addr,a),Yo(l,a))}function c$e(c,a,l){const h=this.cache,d=l.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),l.safeSetTexture2D(a||Kne,d)}function u$e(c,a,l){const h=this.cache,d=l.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),l.setTexture3D(a||Qne,d)}function h$e(c,a,l){const h=this.cache,d=l.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),l.safeSetTextureCube(a||eie,d)}function d$e(c,a,l){const h=this.cache,d=l.allocateTextureUnit();h[0]!==d&&(c.uniform1i(this.addr,d),h[0]=d),l.setTexture2DArray(a||Jne,d)}function p$e(c,a){c.uniform1fv(this.addr,a)}function m$e(c,a){const l=$v(a,this.size,2);c.uniform2fv(this.addr,l)}function g$e(c,a){const l=$v(a,this.size,3);c.uniform3fv(this.addr,l)}function y$e(c,a){const l=$v(a,this.size,4);c.uniform4fv(this.addr,l)}function _$e(c,a){const l=$v(a,this.size,4);c.uniformMatrix2fv(this.addr,!1,l)}function v$e(c,a){const l=$v(a,this.size,9);c.uniformMatrix3fv(this.addr,!1,l)}function b$e(c,a){const l=$v(a,this.size,16);c.uniformMatrix4fv(this.addr,!1,l)}function S$e(c,a){c.uniform1iv(this.addr,a)}function T$e(c,a){c.uniform2iv(this.addr,a)}function w$e(c,a){c.uniform3iv(this.addr,a)}function C$e(c,a){c.uniform4iv(this.addr,a)}function x$e(c,a){c.uniform1uiv(this.addr,a)}function E$e(c,a){c.uniform2uiv(this.addr,a)}function M$e(c,a){c.uniform3uiv(this.addr,a)}function D$e(c,a){c.uniform4uiv(this.addr,a)}function A$e(c,a,l){const h=a.length,d=AA(l,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)l.safeSetTexture2D(a[f]||Kne,d[f])}function I$e(c,a,l){const h=a.length,d=AA(l,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)l.setTexture3D(a[f]||Qne,d[f])}function R$e(c,a,l){const h=a.length,d=AA(l,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)l.safeSetTextureCube(a[f]||eie,d[f])}function L$e(c,a,l){const h=a.length,d=AA(l,h);c.uniform1iv(this.addr,d);for(let f=0;f!==h;++f)l.setTexture2DArray(a[f]||Jne,d[f])}function O$e(c,a,l){this.id=c,this.addr=l,this.cache=[],this.setValue=function f$e(c){switch(c){case 5126:return $qe;case 35664:return Yqe;case 35665:return Zqe;case 35666:return Kqe;case 35674:return Jqe;case 35675:return Qqe;case 35676:return e$e;case 5124:case 35670:return t$e;case 35667:case 35671:return n$e;case 35668:case 35672:return i$e;case 35669:case 35673:return r$e;case 5125:return s$e;case 36294:return o$e;case 36295:return a$e;case 36296:return l$e;case 35678:case 36198:case 36298:case 36306:case 35682:return c$e;case 35679:case 36299:case 36307:return u$e;case 35680:case 36300:case 36308:case 36293:return h$e;case 36289:case 36303:case 36311:case 36292:return d$e}}(a.type)}function oie(c,a,l){this.id=c,this.addr=l,this.cache=[],this.size=a.size,this.setValue=function P$e(c){switch(c){case 5126:return p$e;case 35664:return m$e;case 35665:return g$e;case 35666:return y$e;case 35674:return _$e;case 35675:return v$e;case 35676:return b$e;case 5124:case 35670:return S$e;case 35667:case 35671:return T$e;case 35668:case 35672:return w$e;case 35669:case 35673:return C$e;case 5125:return x$e;case 36294:return E$e;case 36295:return M$e;case 36296:return D$e;case 35678:case 36198:case 36298:case 36306:case 35682:return A$e;case 35679:case 36299:case 36307:return I$e;case 35680:case 36300:case 36308:case 36293:return R$e;case 36289:case 36303:case 36311:case 36292:return L$e}}(a.type)}function aie(c){this.id=c,this.seq=[],this.map={}}oie.prototype.updateCache=function(c){const a=this.cache;c instanceof Float32Array&&a.length!==c.length&&(this.cache=new Float32Array(c.length)),Yo(a,c)},aie.prototype.setValue=function(c,a,l){const h=this.seq;for(let d=0,f=h.length;d!==f;++d){const m=h[d];m.setValue(c,a[m.id],l)}};const OV=/(\w+)(\])?(\[|\.)?/g;function lie(c,a){c.seq.push(a),c.map[a.id]=a}function N$e(c,a,l){const h=c.name,d=h.length;for(OV.lastIndex=0;;){const f=OV.exec(h),m=OV.lastIndex;let g=f[1];const _=f[3];if("]"===f[2]&&(g|=0),void 0===_||"["===_&&m+2===d){lie(l,void 0===_?new O$e(g,c,a):new oie(g,c,a));break}{let b=l.map[g];void 0===b&&(b=new aie(g),lie(l,b)),l=b}}}function Jf(c,a){this.seq=[],this.map={};const l=c.getProgramParameter(a,35718);for(let h=0;h<l;++h){const d=c.getActiveUniform(a,h);N$e(d,c.getUniformLocation(a,d.name),this)}}function cie(c,a,l){const h=c.createShader(a);return c.shaderSource(h,l),c.compileShader(h),h}Jf.prototype.setValue=function(c,a,l,h){const d=this.map[a];void 0!==d&&d.setValue(c,l,h)},Jf.prototype.setOptional=function(c,a,l){const h=a[l];void 0!==h&&this.setValue(c,l,h)},Jf.upload=function(c,a,l,h){for(let d=0,f=a.length;d!==f;++d){const m=a[d],g=l[m.id];!1!==g.needsUpdate&&m.setValue(c,g.value,h)}},Jf.seqWithValue=function(c,a){const l=[];for(let h=0,d=c.length;h!==d;++h){const f=c[h];f.id in a&&l.push(f)}return l};let F$e=0;function uie(c,a,l){const h=c.getShaderParameter(a,35713),d=c.getShaderInfoLog(a).trim();return h&&""===d?"":l.toUpperCase()+"\n\n"+d+"\n\n"+function k$e(c){const a=c.split("\n");for(let l=0;l<a.length;l++)a[l]=l+1+": "+a[l];return a.join("\n")}(c.getShaderSource(a))}function B$e(c,a){const l=function V$e(c){switch(c){case zf:return["Linear","( value )"];case vr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",c),["Linear","( value )"]}}(a);return"vec4 "+c+"( vec4 value ) { return LinearTo"+l[0]+l[1]+"; }"}function U$e(c,a){let l;switch(a){case 1:l="Linear";break;case 2:l="Reinhard";break;case 3:l="OptimizedCineon";break;case 4:l="ACESFilmic";break;case 5:l="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",a),l="Linear"}return"vec3 "+c+"( vec3 color ) { return "+l+"ToneMapping( color ); }"}function AT(c){return""!==c}function hie(c,a){return c.replace(/NUM_DIR_LIGHTS/g,a.numDirLights).replace(/NUM_SPOT_LIGHTS/g,a.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,a.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,a.numPointLights).replace(/NUM_HEMI_LIGHTS/g,a.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,a.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,a.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,a.numPointLightShadows)}function die(c,a){return c.replace(/NUM_CLIPPING_PLANES/g,a.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,a.numClippingPlanes-a.numClipIntersection)}const j$e=/^[ \t]*#include +<([\w\d./]+)>/gm;function NV(c){return c.replace(j$e,W$e)}function W$e(c,a){const l=wi[a];if(void 0===l)throw new Error("Can not resolve #include <"+a+">");return NV(l)}const X$e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,q$e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function fie(c){return c.replace(q$e,pie).replace(X$e,$$e)}function $$e(c,a,l,h){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),pie(0,a,l,h)}function pie(c,a,l,h){let d="";for(let f=parseInt(a);f<parseInt(l);f++)d+=h.replace(/\[\s*i\s*\]/g,"[ "+f+" ]").replace(/UNROLLED_LOOP_INDEX/g,f);return d}function mie(c){let a="precision "+c.precision+" float;\nprecision "+c.precision+" int;";return"highp"===c.precision?a+="\n#define HIGH_PRECISION":"mediump"===c.precision?a+="\n#define MEDIUM_PRECISION":"lowp"===c.precision&&(a+="\n#define LOW_PRECISION"),a}function Q$e(c,a,l,h){const d=c.getContext(),f=l.defines;let m=l.vertexShader,g=l.fragmentShader;const y=function Y$e(c){let a="SHADOWMAP_TYPE_BASIC";return 1===c.shadowMapType?a="SHADOWMAP_TYPE_PCF":2===c.shadowMapType?a="SHADOWMAP_TYPE_PCF_SOFT":3===c.shadowMapType&&(a="SHADOWMAP_TYPE_VSM"),a}(l),_=function Z$e(c){let a="ENVMAP_TYPE_CUBE";if(c.envMap)switch(c.envMapMode){case 301:case 302:a="ENVMAP_TYPE_CUBE";break;case 306:case 307:a="ENVMAP_TYPE_CUBE_UV"}return a}(l),v=function K$e(c){let a="ENVMAP_MODE_REFLECTION";if(c.envMap)switch(c.envMapMode){case 302:case 307:a="ENVMAP_MODE_REFRACTION"}return a}(l),b=function J$e(c){let a="ENVMAP_BLENDING_NONE";if(c.envMap)switch(c.combine){case 0:a="ENVMAP_BLENDING_MULTIPLY";break;case 1:a="ENVMAP_BLENDING_MIX";break;case 2:a="ENVMAP_BLENDING_ADD"}return a}(l),S=l.isWebGL2?"":function z$e(c){return[c.extensionDerivatives||c.envMapCubeUV||c.bumpMap||c.tangentSpaceNormalMap||c.clearcoatNormalMap||c.flatShading||"physical"===c.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(c.extensionFragDepth||c.logarithmicDepthBuffer)&&c.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",c.extensionDrawBuffers&&c.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(c.extensionShaderTextureLOD||c.envMap||c.transmission)&&c.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(AT).join("\n")}(l),T=function G$e(c){const a=[];for(const l in c){const h=c[l];!1!==h&&a.push("#define "+l+" "+h)}return a.join("\n")}(f),x=d.createProgram();let E,I,M=l.glslVersion?"#version "+l.glslVersion+"\n":"";l.isRawShaderMaterial?(E=[T].filter(AT).join("\n"),E.length>0&&(E+="\n"),I=[S,T].filter(AT).join("\n"),I.length>0&&(I+="\n")):(E=[mie(l),"#define SHADER_NAME "+l.shaderName,T,l.instancing?"#define USE_INSTANCING":"",l.instancingColor?"#define USE_INSTANCING_COLOR":"",l.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+l.maxBones,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp2?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+v:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.normalMap&&l.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",l.normalMap&&l.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",l.clearcoatMap?"#define USE_CLEARCOATMAP":"",l.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",l.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",l.displacementMap&&l.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",l.specularColorMap?"#define USE_SPECULARCOLORMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.transmission?"#define USE_TRANSMISSION":"",l.transmissionMap?"#define USE_TRANSMISSIONMAP":"",l.thicknessMap?"#define USE_THICKNESSMAP":"",l.sheenColorMap?"#define USE_SHEENCOLORMAP":"",l.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",l.vertexTangents?"#define USE_TANGENT":"",l.vertexColors?"#define USE_COLOR":"",l.vertexAlphas?"#define USE_COLOR_ALPHA":"",l.vertexUvs?"#define USE_UV":"",l.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",l.flatShading?"#define FLAT_SHADED":"",l.skinning?"#define USE_SKINNING":"",l.useVertexTexture?"#define BONE_TEXTURE":"",l.morphTargets?"#define USE_MORPHTARGETS":"",l.morphNormals&&!1===l.flatShading?"#define USE_MORPHNORMALS":"",l.morphTargets&&l.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",l.morphTargets&&l.isWebGL2?"#define MORPHTARGETS_COUNT "+l.morphTargetsCount:"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+y:"",l.sizeAttenuation?"#define USE_SIZEATTENUATION":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&l.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(AT).join("\n"),I=[S,mie(l),"#define SHADER_NAME "+l.shaderName,T,l.useFog&&l.fog?"#define USE_FOG":"",l.useFog&&l.fogExp2?"#define FOG_EXP2":"",l.map?"#define USE_MAP":"",l.matcap?"#define USE_MATCAP":"",l.envMap?"#define USE_ENVMAP":"",l.envMap?"#define "+_:"",l.envMap?"#define "+v:"",l.envMap?"#define "+b:"",l.lightMap?"#define USE_LIGHTMAP":"",l.aoMap?"#define USE_AOMAP":"",l.emissiveMap?"#define USE_EMISSIVEMAP":"",l.bumpMap?"#define USE_BUMPMAP":"",l.normalMap?"#define USE_NORMALMAP":"",l.normalMap&&l.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",l.normalMap&&l.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",l.clearcoat?"#define USE_CLEARCOAT":"",l.clearcoatMap?"#define USE_CLEARCOATMAP":"",l.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",l.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",l.specularMap?"#define USE_SPECULARMAP":"",l.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",l.specularColorMap?"#define USE_SPECULARCOLORMAP":"",l.roughnessMap?"#define USE_ROUGHNESSMAP":"",l.metalnessMap?"#define USE_METALNESSMAP":"",l.alphaMap?"#define USE_ALPHAMAP":"",l.alphaTest?"#define USE_ALPHATEST":"",l.sheen?"#define USE_SHEEN":"",l.sheenColorMap?"#define USE_SHEENCOLORMAP":"",l.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",l.transmission?"#define USE_TRANSMISSION":"",l.transmissionMap?"#define USE_TRANSMISSIONMAP":"",l.thicknessMap?"#define USE_THICKNESSMAP":"",l.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",l.vertexTangents?"#define USE_TANGENT":"",l.vertexColors||l.instancingColor?"#define USE_COLOR":"",l.vertexAlphas?"#define USE_COLOR_ALPHA":"",l.vertexUvs?"#define USE_UV":"",l.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",l.gradientMap?"#define USE_GRADIENTMAP":"",l.flatShading?"#define FLAT_SHADED":"",l.doubleSided?"#define DOUBLE_SIDED":"",l.flipSided?"#define FLIP_SIDED":"",l.shadowMapEnabled?"#define USE_SHADOWMAP":"",l.shadowMapEnabled?"#define "+y:"",l.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",l.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",l.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",l.logarithmicDepthBuffer&&l.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(l.extensionShaderTextureLOD||l.envMap)&&l.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==l.toneMapping?"#define TONE_MAPPING":"",0!==l.toneMapping?wi.tonemapping_pars_fragment:"",0!==l.toneMapping?U$e("toneMapping",l.toneMapping):"",l.dithering?"#define DITHERING":"",l.transparent?"":"#define OPAQUE",wi.encodings_pars_fragment,B$e("linearToOutputTexel",l.outputEncoding),l.depthPacking?"#define DEPTH_PACKING "+l.depthPacking:"","\n"].filter(AT).join("\n")),m=NV(m),m=hie(m,l),m=die(m,l),g=NV(g),g=hie(g,l),g=die(g,l),m=fie(m),g=fie(g),l.isWebGL2&&!0!==l.isRawShaderMaterial&&(M="#version 300 es\n",E=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+E,I=["#define varying in","300 es"===l.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===l.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+I);const L=M+I+g,P=cie(d,35633,M+E+m),F=cie(d,35632,L);if(d.attachShader(x,P),d.attachShader(x,F),void 0!==l.index0AttributeName?d.bindAttribLocation(x,0,l.index0AttributeName):!0===l.morphTargets&&d.bindAttribLocation(x,0,"position"),d.linkProgram(x),c.debug.checkShaderErrors){const $=d.getProgramInfoLog(x).trim(),se=d.getShaderInfoLog(P).trim(),ie=d.getShaderInfoLog(F).trim();let j=!0,J=!0;if(!1===d.getProgramParameter(x,35714)){j=!1;const ae=uie(d,P,"vertex"),ue=uie(d,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+d.getError()+" - VALIDATE_STATUS "+d.getProgramParameter(x,35715)+"\n\nProgram Info Log: "+$+"\n"+ae+"\n"+ue)}else""!==$?console.warn("THREE.WebGLProgram: Program Info Log:",$):(""===se||""===ie)&&(J=!1);J&&(this.diagnostics={runnable:j,programLog:$,vertexShader:{log:se,prefix:E},fragmentShader:{log:ie,prefix:I}})}let B,G;return d.deleteShader(P),d.deleteShader(F),this.getUniforms=function(){return void 0===B&&(B=new Jf(d,x)),B},this.getAttributes=function(){return void 0===G&&(G=function H$e(c,a){const l={},h=c.getProgramParameter(a,35721);for(let d=0;d<h;d++){const f=c.getActiveAttrib(a,d),m=f.name;let g=1;35674===f.type&&(g=2),35675===f.type&&(g=3),35676===f.type&&(g=4),l[m]={type:f.type,location:c.getAttribLocation(a,m),locationSize:g}}return l}(d,x)),G},this.destroy=function(){h.releaseStatesOfProgram(this),d.deleteProgram(x),this.program=void 0},this.name=l.shaderName,this.id=F$e++,this.cacheKey=a,this.usedTimes=1,this.program=x,this.vertexShader=P,this.fragmentShader=F,this}let eYe=0;class tYe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(a){const h=a.fragmentShader,d=this._getShaderStage(a.vertexShader),f=this._getShaderStage(h),m=this._getShaderCacheForMaterial(a);return!1===m.has(d)&&(m.add(d),d.usedTimes++),!1===m.has(f)&&(m.add(f),f.usedTimes++),this}remove(a){const l=this.materialCache.get(a);for(const h of l)h.usedTimes--,0===h.usedTimes&&this.shaderCache.delete(h);return this.materialCache.delete(a),this}getVertexShaderID(a){return this._getShaderStage(a.vertexShader).id}getFragmentShaderID(a){return this._getShaderStage(a.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(a){const l=this.materialCache;return!1===l.has(a)&&l.set(a,new Set),l.get(a)}_getShaderStage(a){const l=this.shaderCache;if(!1===l.has(a)){const h=new nYe;l.set(a,h)}return l.get(a)}}class nYe{constructor(){this.id=eYe++,this.usedTimes=0}}function iYe(c,a,l,h,d,f,m){const g=new pV,y=new tYe,_=[],v=d.isWebGL2,b=d.logarithmicDepthBuffer,S=d.floatVertexTextures,T=d.maxVertexUniforms,x=d.vertexTextures;let E=d.precision;const I={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function D(j,J,ae,ue,ge){const K=ue.fog,ye=(j.isMeshStandardMaterial?l:a).get(j.envMap||(j.isMeshStandardMaterial?ue.environment:null)),ke=I[j.type],_e=ge.isSkinnedMesh?function M(j){const ae=j.skeleton.bones;if(S)return 1024;{const ge=Math.floor((T-20)/4),K=Math.min(ge,ae.length);return K<ae.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+ae.length+" bones. This GPU supports "+K+"."),0):K}}(ge):0;let Ne,me,Xe,qe;if(null!==j.precision&&(E=d.getMaxPrecision(j.precision),E!==j.precision&&console.warn("THREE.WebGLProgram.getParameters:",j.precision,"not supported, using",E,"instead.")),ke){const Pe=zu[ke];Ne=Pe.vertexShader,me=Pe.fragmentShader}else Ne=j.vertexShader,me=j.fragmentShader,y.update(j),Xe=y.getVertexShaderID(j),qe=y.getFragmentShaderID(j);const Ae=c.getRenderTarget(),wt=j.clearcoat>0;return{isWebGL2:v,shaderID:ke,shaderName:j.type,vertexShader:Ne,fragmentShader:me,defines:j.defines,customVertexShaderID:Xe,customFragmentShaderID:qe,isRawShaderMaterial:!0===j.isRawShaderMaterial,glslVersion:j.glslVersion,precision:E,instancing:!0===ge.isInstancedMesh,instancingColor:!0===ge.isInstancedMesh&&null!==ge.instanceColor,supportsVertexTextures:x,outputEncoding:null===Ae?c.outputEncoding:!0===Ae.isXRRenderTarget?Ae.texture.encoding:zf,map:!!j.map,matcap:!!j.matcap,envMap:!!ye,envMapMode:ye&&ye.mapping,envMapCubeUV:!!ye&&(306===ye.mapping||307===ye.mapping),lightMap:!!j.lightMap,aoMap:!!j.aoMap,emissiveMap:!!j.emissiveMap,bumpMap:!!j.bumpMap,normalMap:!!j.normalMap,objectSpaceNormalMap:1===j.normalMapType,tangentSpaceNormalMap:0===j.normalMapType,decodeVideoTexture:!!j.map&&!0===j.map.isVideoTexture&&j.map.encoding===vr,clearcoat:wt,clearcoatMap:wt&&!!j.clearcoatMap,clearcoatRoughnessMap:wt&&!!j.clearcoatRoughnessMap,clearcoatNormalMap:wt&&!!j.clearcoatNormalMap,displacementMap:!!j.displacementMap,roughnessMap:!!j.roughnessMap,metalnessMap:!!j.metalnessMap,specularMap:!!j.specularMap,specularIntensityMap:!!j.specularIntensityMap,specularColorMap:!!j.specularColorMap,transparent:j.transparent,alphaMap:!!j.alphaMap,alphaTest:j.alphaTest>0,gradientMap:!!j.gradientMap,sheen:j.sheen>0,sheenColorMap:!!j.sheenColorMap,sheenRoughnessMap:!!j.sheenRoughnessMap,transmission:j.transmission>0,transmissionMap:!!j.transmissionMap,thicknessMap:!!j.thicknessMap,combine:j.combine,vertexTangents:!!j.normalMap&&!!ge.geometry&&!!ge.geometry.attributes.tangent,vertexColors:j.vertexColors,vertexAlphas:!0===j.vertexColors&&!!ge.geometry&&!!ge.geometry.attributes.color&&4===ge.geometry.attributes.color.itemSize,vertexUvs:!!(j.map||j.bumpMap||j.normalMap||j.specularMap||j.alphaMap||j.emissiveMap||j.roughnessMap||j.metalnessMap||j.clearcoatMap||j.clearcoatRoughnessMap||j.clearcoatNormalMap||j.displacementMap||j.transmissionMap||j.thicknessMap||j.specularIntensityMap||j.specularColorMap||j.sheenColorMap||j.sheenRoughnessMap),uvsVertexOnly:!(j.map||j.bumpMap||j.normalMap||j.specularMap||j.alphaMap||j.emissiveMap||j.roughnessMap||j.metalnessMap||j.clearcoatNormalMap||j.transmission>0||j.transmissionMap||j.thicknessMap||j.specularIntensityMap||j.specularColorMap||j.sheen>0||j.sheenColorMap||j.sheenRoughnessMap||!j.displacementMap),fog:!!K,useFog:j.fog,fogExp2:K&&K.isFogExp2,flatShading:!!j.flatShading,sizeAttenuation:j.sizeAttenuation,logarithmicDepthBuffer:b,skinning:!0===ge.isSkinnedMesh&&_e>0,maxBones:_e,useVertexTexture:S,morphTargets:!!ge.geometry&&!!ge.geometry.morphAttributes.position,morphNormals:!!ge.geometry&&!!ge.geometry.morphAttributes.normal,morphTargetsCount:ge.geometry&&ge.geometry.morphAttributes.position?ge.geometry.morphAttributes.position.length:0,numDirLights:J.directional.length,numPointLights:J.point.length,numSpotLights:J.spot.length,numRectAreaLights:J.rectArea.length,numHemiLights:J.hemi.length,numDirLightShadows:J.directionalShadowMap.length,numPointLightShadows:J.pointShadowMap.length,numSpotLightShadows:J.spotShadowMap.length,numClippingPlanes:m.numPlanes,numClipIntersection:m.numIntersection,dithering:j.dithering,shadowMapEnabled:c.shadowMap.enabled&&ae.length>0,shadowMapType:c.shadowMap.type,toneMapping:j.toneMapped?c.toneMapping:0,physicallyCorrectLights:c.physicallyCorrectLights,premultipliedAlpha:j.premultipliedAlpha,doubleSided:2===j.side,flipSided:1===j.side,depthPacking:void 0!==j.depthPacking&&j.depthPacking,index0AttributeName:j.index0AttributeName,extensionDerivatives:j.extensions&&j.extensions.derivatives,extensionFragDepth:j.extensions&&j.extensions.fragDepth,extensionDrawBuffers:j.extensions&&j.extensions.drawBuffers,extensionShaderTextureLOD:j.extensions&&j.extensions.shaderTextureLOD,rendererExtensionFragDepth:v||h.has("EXT_frag_depth"),rendererExtensionDrawBuffers:v||h.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:v||h.has("EXT_shader_texture_lod"),customProgramCacheKey:j.customProgramCacheKey()}},getProgramCacheKey:function L(j){const J=[];if(j.shaderID?J.push(j.shaderID):(J.push(j.customVertexShaderID),J.push(j.customFragmentShaderID)),void 0!==j.defines)for(const ae in j.defines)J.push(ae),J.push(j.defines[ae]);return!1===j.isRawShaderMaterial&&(function P(j,J){j.push(J.precision),j.push(J.outputEncoding),j.push(J.envMapMode),j.push(J.combine),j.push(J.vertexUvs),j.push(J.fogExp2),j.push(J.sizeAttenuation),j.push(J.maxBones),j.push(J.morphTargetsCount),j.push(J.numDirLights),j.push(J.numPointLights),j.push(J.numSpotLights),j.push(J.numHemiLights),j.push(J.numRectAreaLights),j.push(J.numDirLightShadows),j.push(J.numPointLightShadows),j.push(J.numSpotLightShadows),j.push(J.shadowMapType),j.push(J.toneMapping),j.push(J.numClippingPlanes),j.push(J.numClipIntersection)}(J,j),function F(j,J){g.disableAll(),J.isWebGL2&&g.enable(0),J.supportsVertexTextures&&g.enable(1),J.instancing&&g.enable(2),J.instancingColor&&g.enable(3),J.map&&g.enable(4),J.matcap&&g.enable(5),J.envMap&&g.enable(6),J.envMapCubeUV&&g.enable(7),J.lightMap&&g.enable(8),J.aoMap&&g.enable(9),J.emissiveMap&&g.enable(10),J.bumpMap&&g.enable(11),J.normalMap&&g.enable(12),J.objectSpaceNormalMap&&g.enable(13),J.tangentSpaceNormalMap&&g.enable(14),J.clearcoat&&g.enable(15),J.clearcoatMap&&g.enable(16),J.clearcoatRoughnessMap&&g.enable(17),J.clearcoatNormalMap&&g.enable(18),J.displacementMap&&g.enable(19),J.specularMap&&g.enable(20),J.roughnessMap&&g.enable(21),J.metalnessMap&&g.enable(22),J.gradientMap&&g.enable(23),J.alphaMap&&g.enable(24),J.alphaTest&&g.enable(25),J.vertexColors&&g.enable(26),J.vertexAlphas&&g.enable(27),J.vertexUvs&&g.enable(28),J.vertexTangents&&g.enable(29),J.uvsVertexOnly&&g.enable(30),J.fog&&g.enable(31),j.push(g.mask),g.disableAll(),J.useFog&&g.enable(0),J.flatShading&&g.enable(1),J.logarithmicDepthBuffer&&g.enable(2),J.skinning&&g.enable(3),J.useVertexTexture&&g.enable(4),J.morphTargets&&g.enable(5),J.morphNormals&&g.enable(6),J.premultipliedAlpha&&g.enable(7),J.shadowMapEnabled&&g.enable(8),J.physicallyCorrectLights&&g.enable(9),J.doubleSided&&g.enable(10),J.flipSided&&g.enable(11),J.depthPacking&&g.enable(12),J.dithering&&g.enable(13),J.specularIntensityMap&&g.enable(14),J.specularColorMap&&g.enable(15),J.transmission&&g.enable(16),J.transmissionMap&&g.enable(17),J.thicknessMap&&g.enable(18),J.sheen&&g.enable(19),J.sheenColorMap&&g.enable(20),J.sheenRoughnessMap&&g.enable(21),J.decodeVideoTexture&&g.enable(22),J.transparent&&g.enable(23),j.push(g.mask)}(J,j),J.push(c.outputEncoding)),J.push(j.customProgramCacheKey),J.join()},getUniforms:function B(j){const J=I[j.type];let ae;return ae=J?RWe.clone(zu[J].uniforms):j.uniforms,ae},acquireProgram:function G(j,J){let ae;for(let ue=0,ge=_.length;ue<ge;ue++){const K=_[ue];if(K.cacheKey===J){ae=K,++ae.usedTimes;break}}return void 0===ae&&(ae=new Q$e(c,J,j,f),_.push(ae)),ae},releaseProgram:function $(j){if(0==--j.usedTimes){const J=_.indexOf(j);_[J]=_[_.length-1],_.pop(),j.destroy()}},releaseShaderCache:function se(j){y.remove(j)},programs:_,dispose:function ie(){y.dispose()}}}function rYe(){let c=new WeakMap;return{get:function a(f){let m=c.get(f);return void 0===m&&(m={},c.set(f,m)),m},remove:function l(f){c.delete(f)},update:function h(f,m,g){c.get(f)[m]=g},dispose:function d(){c=new WeakMap}}}function sYe(c,a){return c.groupOrder!==a.groupOrder?c.groupOrder-a.groupOrder:c.renderOrder!==a.renderOrder?c.renderOrder-a.renderOrder:c.material.id!==a.material.id?c.material.id-a.material.id:c.z!==a.z?c.z-a.z:c.id-a.id}function gie(c,a){return c.groupOrder!==a.groupOrder?c.groupOrder-a.groupOrder:c.renderOrder!==a.renderOrder?c.renderOrder-a.renderOrder:c.z!==a.z?a.z-c.z:c.id-a.id}function yie(){const c=[];let a=0;const l=[],h=[],d=[];function m(b,S,T,x,E,I){let M=c[a];return void 0===M?(M={id:b.id,object:b,geometry:S,material:T,groupOrder:x,renderOrder:b.renderOrder,z:E,group:I},c[a]=M):(M.id=b.id,M.object=b,M.geometry=S,M.material=T,M.groupOrder=x,M.renderOrder=b.renderOrder,M.z=E,M.group=I),a++,M}return{opaque:l,transmissive:h,transparent:d,init:function f(){a=0,l.length=0,h.length=0,d.length=0},push:function g(b,S,T,x,E,I){const M=m(b,S,T,x,E,I);T.transmission>0?h.push(M):!0===T.transparent?d.push(M):l.push(M)},unshift:function y(b,S,T,x,E,I){const M=m(b,S,T,x,E,I);T.transmission>0?h.unshift(M):!0===T.transparent?d.unshift(M):l.unshift(M)},finish:function v(){for(let b=a,S=c.length;b<S;b++){const T=c[b];if(null===T.id)break;T.id=null,T.object=null,T.geometry=null,T.material=null,T.group=null}},sort:function _(b,S){l.length>1&&l.sort(b||sYe),h.length>1&&h.sort(S||gie),d.length>1&&d.sort(S||gie)}}}function oYe(){let c=new WeakMap;return{get:function a(h,d){let f;return!1===c.has(h)?(f=new yie,c.set(h,[f])):d>=c.get(h).length?(f=new yie,c.get(h).push(f)):f=c.get(h)[d],f},dispose:function l(){c=new WeakMap}}}function aYe(){const c={};return{get:function(a){if(void 0!==c[a.id])return c[a.id];let l;switch(a.type){case"DirectionalLight":l={direction:new te,color:new Pt};break;case"SpotLight":l={position:new te,direction:new te,color:new Pt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":l={position:new te,color:new Pt,distance:0,decay:0};break;case"HemisphereLight":l={direction:new te,skyColor:new Pt,groundColor:new Pt};break;case"RectAreaLight":l={color:new Pt,position:new te,halfWidth:new te,halfHeight:new te}}return c[a.id]=l,l}}}let cYe=0;function uYe(c,a){return(a.castShadow?1:0)-(c.castShadow?1:0)}function hYe(c,a){const l=new aYe,h=function lYe(){const c={};return{get:function(a){if(void 0!==c[a.id])return c[a.id];let l;switch(a.type){case"DirectionalLight":case"SpotLight":l={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"PointLight":l={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt,shadowCameraNear:1,shadowCameraFar:1e3}}return c[a.id]=l,l}}}(),d={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let v=0;v<9;v++)d.probe.push(new te);const f=new te,m=new un,g=new un;return{setup:function y(v,b){let S=0,T=0,x=0;for(let se=0;se<9;se++)d.probe[se].set(0,0,0);let E=0,I=0,M=0,D=0,L=0,P=0,F=0,B=0;v.sort(uYe);const G=!0!==b?Math.PI:1;for(let se=0,ie=v.length;se<ie;se++){const j=v[se],J=j.color,ae=j.intensity,ue=j.distance,ge=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)S+=J.r*ae*G,T+=J.g*ae*G,x+=J.b*ae*G;else if(j.isLightProbe)for(let K=0;K<9;K++)d.probe[K].addScaledVector(j.sh.coefficients[K],ae);else if(j.isDirectionalLight){const K=l.get(j);if(K.color.copy(j.color).multiplyScalar(j.intensity*G),j.castShadow){const le=j.shadow,ye=h.get(j);ye.shadowBias=le.bias,ye.shadowNormalBias=le.normalBias,ye.shadowRadius=le.radius,ye.shadowMapSize=le.mapSize,d.directionalShadow[E]=ye,d.directionalShadowMap[E]=ge,d.directionalShadowMatrix[E]=j.shadow.matrix,P++}d.directional[E]=K,E++}else if(j.isSpotLight){const K=l.get(j);if(K.position.setFromMatrixPosition(j.matrixWorld),K.color.copy(J).multiplyScalar(ae*G),K.distance=ue,K.coneCos=Math.cos(j.angle),K.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),K.decay=j.decay,j.castShadow){const le=j.shadow,ye=h.get(j);ye.shadowBias=le.bias,ye.shadowNormalBias=le.normalBias,ye.shadowRadius=le.radius,ye.shadowMapSize=le.mapSize,d.spotShadow[M]=ye,d.spotShadowMap[M]=ge,d.spotShadowMatrix[M]=j.shadow.matrix,B++}d.spot[M]=K,M++}else if(j.isRectAreaLight){const K=l.get(j);K.color.copy(J).multiplyScalar(ae),K.halfWidth.set(.5*j.width,0,0),K.halfHeight.set(0,.5*j.height,0),d.rectArea[D]=K,D++}else if(j.isPointLight){const K=l.get(j);if(K.color.copy(j.color).multiplyScalar(j.intensity*G),K.distance=j.distance,K.decay=j.decay,j.castShadow){const le=j.shadow,ye=h.get(j);ye.shadowBias=le.bias,ye.shadowNormalBias=le.normalBias,ye.shadowRadius=le.radius,ye.shadowMapSize=le.mapSize,ye.shadowCameraNear=le.camera.near,ye.shadowCameraFar=le.camera.far,d.pointShadow[I]=ye,d.pointShadowMap[I]=ge,d.pointShadowMatrix[I]=j.shadow.matrix,F++}d.point[I]=K,I++}else if(j.isHemisphereLight){const K=l.get(j);K.skyColor.copy(j.color).multiplyScalar(ae*G),K.groundColor.copy(j.groundColor).multiplyScalar(ae*G),d.hemi[L]=K,L++}}D>0&&(a.isWebGL2||!0===c.has("OES_texture_float_linear")?(d.rectAreaLTC1=zt.LTC_FLOAT_1,d.rectAreaLTC2=zt.LTC_FLOAT_2):!0===c.has("OES_texture_half_float_linear")?(d.rectAreaLTC1=zt.LTC_HALF_1,d.rectAreaLTC2=zt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),d.ambient[0]=S,d.ambient[1]=T,d.ambient[2]=x;const $=d.hash;($.directionalLength!==E||$.pointLength!==I||$.spotLength!==M||$.rectAreaLength!==D||$.hemiLength!==L||$.numDirectionalShadows!==P||$.numPointShadows!==F||$.numSpotShadows!==B)&&(d.directional.length=E,d.spot.length=M,d.rectArea.length=D,d.point.length=I,d.hemi.length=L,d.directionalShadow.length=P,d.directionalShadowMap.length=P,d.pointShadow.length=F,d.pointShadowMap.length=F,d.spotShadow.length=B,d.spotShadowMap.length=B,d.directionalShadowMatrix.length=P,d.pointShadowMatrix.length=F,d.spotShadowMatrix.length=B,$.directionalLength=E,$.pointLength=I,$.spotLength=M,$.rectAreaLength=D,$.hemiLength=L,$.numDirectionalShadows=P,$.numPointShadows=F,$.numSpotShadows=B,d.version=cYe++)},setupView:function _(v,b){let S=0,T=0,x=0,E=0,I=0;const M=b.matrixWorldInverse;for(let D=0,L=v.length;D<L;D++){const P=v[D];if(P.isDirectionalLight){const F=d.directional[S];F.direction.setFromMatrixPosition(P.matrixWorld),f.setFromMatrixPosition(P.target.matrixWorld),F.direction.sub(f),F.direction.transformDirection(M),S++}else if(P.isSpotLight){const F=d.spot[x];F.position.setFromMatrixPosition(P.matrixWorld),F.position.applyMatrix4(M),F.direction.setFromMatrixPosition(P.matrixWorld),f.setFromMatrixPosition(P.target.matrixWorld),F.direction.sub(f),F.direction.transformDirection(M),x++}else if(P.isRectAreaLight){const F=d.rectArea[E];F.position.setFromMatrixPosition(P.matrixWorld),F.position.applyMatrix4(M),g.identity(),m.copy(P.matrixWorld),m.premultiply(M),g.extractRotation(m),F.halfWidth.set(.5*P.width,0,0),F.halfHeight.set(0,.5*P.height,0),F.halfWidth.applyMatrix4(g),F.halfHeight.applyMatrix4(g),E++}else if(P.isPointLight){const F=d.point[T];F.position.setFromMatrixPosition(P.matrixWorld),F.position.applyMatrix4(M),T++}else if(P.isHemisphereLight){const F=d.hemi[I];F.direction.setFromMatrixPosition(P.matrixWorld),F.direction.transformDirection(M),F.direction.normalize(),I++}}},state:d}}function _ie(c,a){const l=new hYe(c,a),h=[],d=[];return{init:function f(){h.length=0,d.length=0},state:{lightsArray:h,shadowsArray:d,lights:l},setupLights:function y(b){l.setup(h,b)},setupLightsView:function _(b){l.setupView(h,b)},pushLight:function m(b){h.push(b)},pushShadow:function g(b){d.push(b)}}}function dYe(c,a){let l=new WeakMap;return{get:function h(f,m=0){let g;return!1===l.has(f)?(g=new _ie(c,a),l.set(f,[g])):m>=l.get(f).length?(g=new _ie(c,a),l.get(f).push(g)):g=l.get(f)[m],g},dispose:function d(){l=new WeakMap}}}class FV extends Us{constructor(a){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(a)}copy(a){return super.copy(a),this.depthPacking=a.depthPacking,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this}}FV.prototype.isMeshDepthMaterial=!0;class kV extends Us{constructor(a){super(),this.type="MeshDistanceMaterial",this.referencePosition=new te,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(a)}copy(a){return super.copy(a),this.referencePosition.copy(a.referencePosition),this.nearDistance=a.nearDistance,this.farDistance=a.farDistance,this.map=a.map,this.alphaMap=a.alphaMap,this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this}}function vie(c,a,l){let h=new EA;const d=new tt,f=new tt,m=new hr,g=new FV({depthPacking:3201}),y=new kV,_={},v=l.maxTextureSize,b={0:1,1:0,2:2},S=new sd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),T=S.clone();T.defines.HORIZONTAL_PASS=1;const x=new Nn;x.setAttribute("position",new ar(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new xs(x,S),I=this;function M(P,F){const B=a.update(E);S.defines.VSM_SAMPLES!==P.blurSamples&&(S.defines.VSM_SAMPLES=P.blurSamples,T.defines.VSM_SAMPLES=P.blurSamples,S.needsUpdate=!0,T.needsUpdate=!0),S.uniforms.shadow_pass.value=P.map.texture,S.uniforms.resolution.value=P.mapSize,S.uniforms.radius.value=P.radius,c.setRenderTarget(P.mapPass),c.clear(),c.renderBufferDirect(F,null,B,S,E,null),T.uniforms.shadow_pass.value=P.mapPass.texture,T.uniforms.resolution.value=P.mapSize,T.uniforms.radius.value=P.radius,c.setRenderTarget(P.map),c.clear(),c.renderBufferDirect(F,null,B,T,E,null)}function D(P,F,B,G,$,se,ie){let j=null;const J=!0===G.isPointLight?P.customDistanceMaterial:P.customDepthMaterial;if(j=void 0!==J?J:!0===G.isPointLight?y:g,c.localClippingEnabled&&!0===B.clipShadows&&0!==B.clippingPlanes.length||B.displacementMap&&0!==B.displacementScale||B.alphaMap&&B.alphaTest>0){const ae=j.uuid,ue=B.uuid;let ge=_[ae];void 0===ge&&(ge={},_[ae]=ge);let K=ge[ue];void 0===K&&(K=j.clone(),ge[ue]=K),j=K}return j.visible=B.visible,j.wireframe=B.wireframe,j.side=3===ie?null!==B.shadowSide?B.shadowSide:B.side:null!==B.shadowSide?B.shadowSide:b[B.side],j.alphaMap=B.alphaMap,j.alphaTest=B.alphaTest,j.clipShadows=B.clipShadows,j.clippingPlanes=B.clippingPlanes,j.clipIntersection=B.clipIntersection,j.displacementMap=B.displacementMap,j.displacementScale=B.displacementScale,j.displacementBias=B.displacementBias,j.wireframeLinewidth=B.wireframeLinewidth,j.linewidth=B.linewidth,!0===G.isPointLight&&!0===j.isMeshDistanceMaterial&&(j.referencePosition.setFromMatrixPosition(G.matrixWorld),j.nearDistance=$,j.farDistance=se),j}function L(P,F,B,G,$){if(!1===P.visible)return;if(P.layers.test(F.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&3===$)&&(!P.frustumCulled||h.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,P.matrixWorld);const j=a.update(P),J=P.material;if(Array.isArray(J)){const ae=j.groups;for(let ue=0,ge=ae.length;ue<ge;ue++){const K=ae[ue],le=J[K.materialIndex];if(le&&le.visible){const ye=D(P,0,le,G,B.near,B.far,$);c.renderBufferDirect(B,null,j,ye,P,K)}}}else if(J.visible){const ae=D(P,0,J,G,B.near,B.far,$);c.renderBufferDirect(B,null,j,ae,P,null)}}const ie=P.children;for(let j=0,J=ie.length;j<J;j++)L(ie[j],F,B,G,$)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(P,F,B){if(!1===I.enabled||!1===I.autoUpdate&&!1===I.needsUpdate||0===P.length)return;const G=c.getRenderTarget(),$=c.getActiveCubeFace(),se=c.getActiveMipmapLevel(),ie=c.state;ie.setBlending(0),ie.buffers.color.setClear(1,1,1,1),ie.buffers.depth.setTest(!0),ie.setScissorTest(!1);for(let j=0,J=P.length;j<J;j++){const ae=P[j],ue=ae.shadow;if(void 0===ue){console.warn("THREE.WebGLShadowMap:",ae,"has no shadow.");continue}if(!1===ue.autoUpdate&&!1===ue.needsUpdate)continue;d.copy(ue.mapSize);const ge=ue.getFrameExtents();if(d.multiply(ge),f.copy(ue.mapSize),(d.x>v||d.y>v)&&(d.x>v&&(f.x=Math.floor(v/ge.x),d.x=f.x*ge.x,ue.mapSize.x=f.x),d.y>v&&(f.y=Math.floor(v/ge.y),d.y=f.y*ge.y,ue.mapSize.y=f.y)),null===ue.map&&!ue.isPointLightShadow&&3===this.type){const le={minFilter:Gr,magFilter:Gr,format:qo};ue.map=new Ql(d.x,d.y,le),ue.map.texture.name=ae.name+".shadowMap",ue.mapPass=new Ql(d.x,d.y,le),ue.camera.updateProjectionMatrix()}null===ue.map&&(ue.map=new Ql(d.x,d.y,{minFilter:ws,magFilter:ws,format:qo}),ue.map.texture.name=ae.name+".shadowMap",ue.camera.updateProjectionMatrix()),c.setRenderTarget(ue.map),c.clear();const K=ue.getViewportCount();for(let le=0;le<K;le++){const ye=ue.getViewport(le);m.set(f.x*ye.x,f.y*ye.y,f.x*ye.z,f.y*ye.w),ie.viewport(m),ue.updateMatrices(ae,le),h=ue.getFrustum(),L(F,B,ue.camera,ae,this.type)}!ue.isPointLightShadow&&3===this.type&&M(ue,B),ue.needsUpdate=!1}I.needsUpdate=!1,c.setRenderTarget(G,$,se)}}function mYe(c,a,l){const h=l.isWebGL2,g=new function d(){let Te=!1;const Zt=new hr;let kt=null;const mn=new hr(0,0,0,0);return{setMask:function(Ze){kt!==Ze&&!Te&&(c.colorMask(Ze,Ze,Ze,Ze),kt=Ze)},setLocked:function(Ze){Te=Ze},setClear:function(Ze,nn,zn,Ni,Ds){!0===Ds&&(Ze*=Ni,nn*=Ni,zn*=Ni),Zt.set(Ze,nn,zn,Ni),!1===mn.equals(Zt)&&(c.clearColor(Ze,nn,zn,Ni),mn.copy(Zt))},reset:function(){Te=!1,kt=null,mn.set(-1,0,0,0)}}},y=new function f(){let Te=!1,Zt=null,kt=null,mn=null;return{setTest:function(Ze){Ze?Ae(2929):Tn(2929)},setMask:function(Ze){Zt!==Ze&&!Te&&(c.depthMask(Ze),Zt=Ze)},setFunc:function(Ze){if(kt!==Ze){if(Ze)switch(Ze){case 0:c.depthFunc(512);break;case 1:c.depthFunc(519);break;case 2:c.depthFunc(513);break;case 3:default:c.depthFunc(515);break;case 4:c.depthFunc(514);break;case 5:c.depthFunc(518);break;case 6:c.depthFunc(516);break;case 7:c.depthFunc(517)}else c.depthFunc(515);kt=Ze}},setLocked:function(Ze){Te=Ze},setClear:function(Ze){mn!==Ze&&(c.clearDepth(Ze),mn=Ze)},reset:function(){Te=!1,Zt=null,kt=null,mn=null}}},_=new function m(){let Te=!1,Zt=null,kt=null,mn=null,Ze=null,nn=null,zn=null,Ni=null,Ds=null;return{setTest:function(Di){Te||(Di?Ae(2960):Tn(2960))},setMask:function(Di){Zt!==Di&&!Te&&(c.stencilMask(Di),Zt=Di)},setFunc:function(Di,Sa,Ro){(kt!==Di||mn!==Sa||Ze!==Ro)&&(c.stencilFunc(Di,Sa,Ro),kt=Di,mn=Sa,Ze=Ro)},setOp:function(Di,Sa,Ro){(nn!==Di||zn!==Sa||Ni!==Ro)&&(c.stencilOp(Di,Sa,Ro),nn=Di,zn=Sa,Ni=Ro)},setLocked:function(Di){Te=Di},setClear:function(Di){Ds!==Di&&(c.clearStencil(Di),Ds=Di)},reset:function(){Te=!1,Zt=null,kt=null,mn=null,Ze=null,nn=null,zn=null,Ni=null,Ds=null}}};let v={},b={},S=new WeakMap,T=[],x=null,E=!1,I=null,M=null,D=null,L=null,P=null,F=null,B=null,G=!1,$=null,se=null,ie=null,j=null,J=null;const ae=c.getParameter(35661);let ue=!1,ge=0;const K=c.getParameter(7938);-1!==K.indexOf("WebGL")?(ge=parseFloat(/^WebGL (\d)/.exec(K)[1]),ue=ge>=1):-1!==K.indexOf("OpenGL ES")&&(ge=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),ue=ge>=2);let le=null,ye={};const ke=c.getParameter(3088),_e=c.getParameter(2978),Ne=(new hr).fromArray(ke),me=(new hr).fromArray(_e);function Xe(Te,Zt,kt){const mn=new Uint8Array(4),Ze=c.createTexture();c.bindTexture(Te,Ze),c.texParameteri(Te,10241,9728),c.texParameteri(Te,10240,9728);for(let nn=0;nn<kt;nn++)c.texImage2D(Zt+nn,0,6408,1,1,0,6408,5121,mn);return Ze}const qe={};function Ae(Te){!0!==v[Te]&&(c.enable(Te),v[Te]=!0)}function Tn(Te){!1!==v[Te]&&(c.disable(Te),v[Te]=!1)}qe[3553]=Xe(3553,3553,1),qe[34067]=Xe(34067,34069,6),g.setClear(0,0,0,1),y.setClear(1),_.setClear(0),Ae(2929),y.setFunc(3),pt(!1),Rt(1),Ae(2884),et(0);const _n={100:32774,101:32778,102:32779};if(h)_n[103]=32775,_n[104]=32776;else{const Te=a.get("EXT_blend_minmax");null!==Te&&(_n[103]=Te.MIN_EXT,_n[104]=Te.MAX_EXT)}const on={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function et(Te,Zt,kt,mn,Ze,nn,zn,Ni){if(0!==Te){if(!1===E&&(Ae(3042),E=!0),5===Te)Ze=Ze||Zt,nn=nn||kt,zn=zn||mn,(Zt!==M||Ze!==P)&&(c.blendEquationSeparate(_n[Zt],_n[Ze]),M=Zt,P=Ze),(kt!==D||mn!==L||nn!==F||zn!==B)&&(c.blendFuncSeparate(on[kt],on[mn],on[nn],on[zn]),D=kt,L=mn,F=nn,B=zn),I=Te,G=null;else if(Te!==I||Ni!==G){if((100!==M||100!==P)&&(c.blendEquation(32774),M=100,P=100),Ni)switch(Te){case 1:c.blendFuncSeparate(1,771,1,771);break;case 2:c.blendFunc(1,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te)}else switch(Te){case 1:c.blendFuncSeparate(770,771,1,771);break;case 2:c.blendFunc(770,1);break;case 3:c.blendFuncSeparate(0,769,0,1);break;case 4:c.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te)}D=null,L=null,F=null,B=null,I=Te,G=Ni}}else!0===E&&(Tn(3042),E=!1)}function pt(Te){$!==Te&&(c.frontFace(Te?2304:2305),$=Te)}function Rt(Te){0!==Te?(Ae(2884),Te!==se&&c.cullFace(1===Te?1029:2===Te?1028:1032)):Tn(2884),se=Te}function sn(Te,Zt,kt){Te?(Ae(32823),(j!==Zt||J!==kt)&&(c.polygonOffset(Zt,kt),j=Zt,J=kt)):Tn(32823)}function ct(Te){void 0===Te&&(Te=33984+ae-1),le!==Te&&(c.activeTexture(Te),le=Te)}return{buffers:{color:g,depth:y,stencil:_},enable:Ae,disable:Tn,bindFramebuffer:function wt(Te,Zt){return b[Te]!==Zt&&(c.bindFramebuffer(Te,Zt),b[Te]=Zt,h&&(36009===Te&&(b[36160]=Zt),36160===Te&&(b[36009]=Zt)),!0)},drawBuffers:function Bt(Te,Zt){let kt=T,mn=!1;if(Te)if(kt=S.get(Zt),void 0===kt&&(kt=[],S.set(Zt,kt)),Te.isWebGLMultipleRenderTargets){const Ze=Te.texture;if(kt.length!==Ze.length||36064!==kt[0]){for(let nn=0,zn=Ze.length;nn<zn;nn++)kt[nn]=36064+nn;kt.length=Ze.length,mn=!0}}else 36064!==kt[0]&&(kt[0]=36064,mn=!0);else 1029!==kt[0]&&(kt[0]=1029,mn=!0);mn&&(l.isWebGL2?c.drawBuffers(kt):a.get("WEBGL_draw_buffers").drawBuffersWEBGL(kt))},useProgram:function Pe(Te){return x!==Te&&(c.useProgram(Te),x=Te,!0)},setBlending:et,setMaterial:function Et(Te,Zt){2===Te.side?Tn(2884):Ae(2884);let kt=1===Te.side;Zt&&(kt=!kt),pt(kt),1===Te.blending&&!1===Te.transparent?et(0):et(Te.blending,Te.blendEquation,Te.blendSrc,Te.blendDst,Te.blendEquationAlpha,Te.blendSrcAlpha,Te.blendDstAlpha,Te.premultipliedAlpha),y.setFunc(Te.depthFunc),y.setTest(Te.depthTest),y.setMask(Te.depthWrite),g.setMask(Te.colorWrite);const mn=Te.stencilWrite;_.setTest(mn),mn&&(_.setMask(Te.stencilWriteMask),_.setFunc(Te.stencilFunc,Te.stencilRef,Te.stencilFuncMask),_.setOp(Te.stencilFail,Te.stencilZFail,Te.stencilZPass)),sn(Te.polygonOffset,Te.polygonOffsetFactor,Te.polygonOffsetUnits),!0===Te.alphaToCoverage?Ae(32926):Tn(32926)},setFlipSided:pt,setCullFace:Rt,setLineWidth:function Mt(Te){Te!==ie&&(ue&&c.lineWidth(Te),ie=Te)},setPolygonOffset:sn,setScissorTest:function ln(Te){Te?Ae(3089):Tn(3089)},activeTexture:ct,bindTexture:function ei(Te,Zt){null===le&&ct();let kt=ye[le];void 0===kt&&(kt={type:void 0,texture:void 0},ye[le]=kt),(kt.type!==Te||kt.texture!==Zt)&&(c.bindTexture(Te,Zt||qe[Te]),kt.type=Te,kt.texture=Zt)},unbindTexture:function mi(){const Te=ye[le];void 0!==Te&&void 0!==Te.type&&(c.bindTexture(Te.type,null),Te.type=void 0,Te.texture=void 0)},compressedTexImage2D:function fe(){try{c.compressedTexImage2D.apply(c,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}},texImage2D:function en(){try{c.texImage2D.apply(c,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}},texImage3D:function Se(){try{c.texImage3D.apply(c,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}},texStorage2D:function Qt(){try{c.texStorage2D.apply(c,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}},texStorage3D:function Je(){try{c.texStorage3D.apply(c,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}},texSubImage2D:function re(){try{c.texSubImage2D.apply(c,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}},texSubImage3D:function $e(){try{c.texSubImage3D.apply(c,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}},compressedTexSubImage2D:function mt(){try{c.compressedTexSubImage2D.apply(c,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}},scissor:function Ve(Te){!1===Ne.equals(Te)&&(c.scissor(Te.x,Te.y,Te.z,Te.w),Ne.copy(Te))},viewport:function ut(Te){!1===me.equals(Te)&&(c.viewport(Te.x,Te.y,Te.z,Te.w),me.copy(Te))},reset:function Jt(){c.disable(3042),c.disable(2884),c.disable(2929),c.disable(32823),c.disable(3089),c.disable(2960),c.disable(32926),c.blendEquation(32774),c.blendFunc(1,0),c.blendFuncSeparate(1,0,1,0),c.colorMask(!0,!0,!0,!0),c.clearColor(0,0,0,0),c.depthMask(!0),c.depthFunc(513),c.clearDepth(1),c.stencilMask(4294967295),c.stencilFunc(519,0,4294967295),c.stencilOp(7680,7680,7680),c.clearStencil(0),c.cullFace(1029),c.frontFace(2305),c.polygonOffset(0,0),c.activeTexture(33984),c.bindFramebuffer(36160,null),!0===h&&(c.bindFramebuffer(36009,null),c.bindFramebuffer(36008,null)),c.useProgram(null),c.lineWidth(1),c.scissor(0,0,c.canvas.width,c.canvas.height),c.viewport(0,0,c.canvas.width,c.canvas.height),v={},le=null,ye={},b={},S=new WeakMap,T=[],x=null,E=!1,I=null,M=null,D=null,L=null,P=null,F=null,B=null,G=!1,$=null,se=null,ie=null,j=null,J=null,Ne.set(0,0,c.canvas.width,c.canvas.height),me.set(0,0,c.canvas.width,c.canvas.height),g.reset(),y.reset(),_.reset()}}}function gYe(c,a,l,h,d,f,m){const g=d.isWebGL2,y=d.maxTextures,_=d.maxCubemapSize,v=d.maxTextureSize,b=d.maxSamples,T=a.has("WEBGL_multisampled_render_to_texture")?a.get("WEBGL_multisampled_render_to_texture"):void 0,x=new WeakMap;let E,I=!1;try{I=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function M(fe,re){return I?new OffscreenCanvas(fe,re):bT("canvas")}function D(fe,re,$e,mt){let Qt=1;if((fe.width>mt||fe.height>mt)&&(Qt=mt/Math.max(fe.width,fe.height)),Qt<1||!0===re){if(typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&fe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&fe instanceof ImageBitmap){const Je=re?xne:Math.floor,en=Je(Qt*fe.width),Se=Je(Qt*fe.height);void 0===E&&(E=M(en,Se));const Ve=$e?M(en,Se):E;return Ve.width=en,Ve.height=Se,Ve.getContext("2d").drawImage(fe,0,0,en,Se),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+fe.width+"x"+fe.height+") to ("+en+"x"+Se+")."),Ve}return"data"in fe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+fe.width+"x"+fe.height+")."),fe}return fe}function L(fe){return nV(fe.width)&&nV(fe.height)}function F(fe,re){return fe.generateMipmaps&&re&&fe.minFilter!==ws&&fe.minFilter!==Gr}function B(fe){c.generateMipmap(fe)}function G(fe,re,$e,mt,Qt=!1){if(!1===g)return re;if(null!==fe){if(void 0!==c[fe])return c[fe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+fe+"'")}let Je=re;return 6403===re&&(5126===$e&&(Je=33326),5131===$e&&(Je=33325),5121===$e&&(Je=33321)),33319===re&&(5126===$e&&(Je=33328),5131===$e&&(Je=33327),5121===$e&&(Je=33323)),6408===re&&(5126===$e&&(Je=34836),5131===$e&&(Je=34842),5121===$e&&(Je=mt===vr&&!1===Qt?35907:32856),32819===$e&&(Je=32854),32820===$e&&(Je=32855)),(33325===Je||33326===Je||33327===Je||33328===Je||34842===Je||34836===Je)&&a.get("EXT_color_buffer_float"),Je}function $(fe,re,$e){return!0===F(fe,$e)||fe.isFramebufferTexture&&fe.minFilter!==ws&&fe.minFilter!==Gr?Math.log2(Math.max(re.width,re.height))+1:void 0!==fe.mipmaps&&fe.mipmaps.length>0?fe.mipmaps.length:fe.isCompressedTexture&&Array.isArray(fe.image)?re.mipmaps.length:1}function se(fe){return fe===ws||1004===fe||1005===fe?9728:9729}function ie(fe){const re=fe.target;re.removeEventListener("dispose",ie),function J(fe){const re=h.get(fe);void 0!==re.__webglInit&&(c.deleteTexture(re.__webglTexture),h.remove(fe))}(re),re.isVideoTexture&&x.delete(re),m.memory.textures--}function j(fe){const re=fe.target;re.removeEventListener("dispose",j),function ae(fe){const re=fe.texture,$e=h.get(fe),mt=h.get(re);if(fe){if(void 0!==mt.__webglTexture&&(c.deleteTexture(mt.__webglTexture),m.memory.textures--),fe.depthTexture&&fe.depthTexture.dispose(),fe.isWebGLCubeRenderTarget)for(let Qt=0;Qt<6;Qt++)c.deleteFramebuffer($e.__webglFramebuffer[Qt]),$e.__webglDepthbuffer&&c.deleteRenderbuffer($e.__webglDepthbuffer[Qt]);else c.deleteFramebuffer($e.__webglFramebuffer),$e.__webglDepthbuffer&&c.deleteRenderbuffer($e.__webglDepthbuffer),$e.__webglMultisampledFramebuffer&&c.deleteFramebuffer($e.__webglMultisampledFramebuffer),$e.__webglColorRenderbuffer&&c.deleteRenderbuffer($e.__webglColorRenderbuffer),$e.__webglDepthRenderbuffer&&c.deleteRenderbuffer($e.__webglDepthRenderbuffer);if(fe.isWebGLMultipleRenderTargets)for(let Qt=0,Je=re.length;Qt<Je;Qt++){const en=h.get(re[Qt]);en.__webglTexture&&(c.deleteTexture(en.__webglTexture),m.memory.textures--),h.remove(re[Qt])}h.remove(re),h.remove(fe)}}(re)}let ue=0;function le(fe,re){const $e=h.get(fe);if(fe.isVideoTexture&&function Mt(fe){const re=m.render.frame;x.get(fe)!==re&&(x.set(fe,re),fe.update())}(fe),fe.version>0&&$e.__version!==fe.version){const mt=fe.image;if(void 0===mt)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==mt.complete)return void Ae($e,fe,re);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}l.activeTexture(33984+re),l.bindTexture(3553,$e.__webglTexture)}function _e(fe,re){const $e=h.get(fe);fe.version>0&&$e.__version!==fe.version?function Tn(fe,re,$e){if(6!==re.image.length)return;qe(fe,re),l.activeTexture(33984+$e),l.bindTexture(34067,fe.__webglTexture),c.pixelStorei(37440,re.flipY),c.pixelStorei(37441,re.premultiplyAlpha),c.pixelStorei(3317,re.unpackAlignment),c.pixelStorei(37443,0);const mt=re&&(re.isCompressedTexture||re.image[0].isCompressedTexture),Qt=re.image[0]&&re.image[0].isDataTexture,Je=[];for(let Ze=0;Ze<6;Ze++)Je[Ze]=mt||Qt?Qt?re.image[Ze].image:re.image[Ze]:D(re.image[Ze],!1,!0,_),Je[Ze]=sn(re,Je[Ze]);const en=Je[0],Se=L(en)||g,Ve=f.convert(re.format,re.encoding),ut=f.convert(re.type),Jt=G(re.internalFormat,Ve,ut,re.encoding),Te=g&&!0!==re.isVideoTexture,Zt=void 0===fe.__version;let mn,kt=$(re,en,Se);if(Xe(34067,re,Se),mt){Te&&Zt&&l.texStorage2D(34067,kt,Jt,en.width,en.height);for(let Ze=0;Ze<6;Ze++){mn=Je[Ze].mipmaps;for(let nn=0;nn<mn.length;nn++){const zn=mn[nn];re.format!==qo?null!==Ve?Te?l.compressedTexSubImage2D(34069+Ze,nn,0,0,zn.width,zn.height,Ve,zn.data):l.compressedTexImage2D(34069+Ze,nn,Jt,zn.width,zn.height,0,zn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Te?l.texSubImage2D(34069+Ze,nn,0,0,zn.width,zn.height,Ve,ut,zn.data):l.texImage2D(34069+Ze,nn,Jt,zn.width,zn.height,0,Ve,ut,zn.data)}}}else{mn=re.mipmaps,Te&&Zt&&(mn.length>0&&kt++,l.texStorage2D(34067,kt,Jt,Je[0].width,Je[0].height));for(let Ze=0;Ze<6;Ze++)if(Qt){Te?l.texSubImage2D(34069+Ze,0,0,0,Je[Ze].width,Je[Ze].height,Ve,ut,Je[Ze].data):l.texImage2D(34069+Ze,0,Jt,Je[Ze].width,Je[Ze].height,0,Ve,ut,Je[Ze].data);for(let nn=0;nn<mn.length;nn++){const Ni=mn[nn].image[Ze].image;Te?l.texSubImage2D(34069+Ze,nn+1,0,0,Ni.width,Ni.height,Ve,ut,Ni.data):l.texImage2D(34069+Ze,nn+1,Jt,Ni.width,Ni.height,0,Ve,ut,Ni.data)}}else{Te?l.texSubImage2D(34069+Ze,0,0,0,Ve,ut,Je[Ze]):l.texImage2D(34069+Ze,0,Jt,Ve,ut,Je[Ze]);for(let nn=0;nn<mn.length;nn++){const zn=mn[nn];Te?l.texSubImage2D(34069+Ze,nn+1,0,0,Ve,ut,zn.image[Ze]):l.texImage2D(34069+Ze,nn+1,Jt,Ve,ut,zn.image[Ze])}}}F(re,Se)&&B(34067),fe.__version=re.version,re.onUpdate&&re.onUpdate(re)}($e,fe,re):(l.activeTexture(33984+re),l.bindTexture(34067,$e.__webglTexture))}const Ne={[qm]:10497,[Do]:33071,1002:33648},me={[ws]:9728,1004:9984,1005:9986,[Gr]:9729,1007:9985,[Vf]:9987};function Xe(fe,re,$e){if($e?(c.texParameteri(fe,10242,Ne[re.wrapS]),c.texParameteri(fe,10243,Ne[re.wrapT]),(32879===fe||35866===fe)&&c.texParameteri(fe,32882,Ne[re.wrapR]),c.texParameteri(fe,10240,me[re.magFilter]),c.texParameteri(fe,10241,me[re.minFilter])):(c.texParameteri(fe,10242,33071),c.texParameteri(fe,10243,33071),(32879===fe||35866===fe)&&c.texParameteri(fe,32882,33071),(re.wrapS!==Do||re.wrapT!==Do)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),c.texParameteri(fe,10240,se(re.magFilter)),c.texParameteri(fe,10241,se(re.minFilter)),re.minFilter!==ws&&re.minFilter!==Gr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===a.has("EXT_texture_filter_anisotropic")){const mt=a.get("EXT_texture_filter_anisotropic");if(re.type===Uf&&!1===a.has("OES_texture_float_linear")||!1===g&&re.type===Tv&&!1===a.has("OES_texture_half_float_linear"))return;(re.anisotropy>1||h.get(re).__currentAnisotropy)&&(c.texParameterf(fe,mt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(re.anisotropy,d.getMaxAnisotropy())),h.get(re).__currentAnisotropy=re.anisotropy)}}function qe(fe,re){void 0===fe.__webglInit&&(fe.__webglInit=!0,re.addEventListener("dispose",ie),fe.__webglTexture=c.createTexture(),m.memory.textures++)}function Ae(fe,re,$e){let mt=3553;re.isDataTexture2DArray&&(mt=35866),re.isDataTexture3D&&(mt=32879),qe(fe,re),l.activeTexture(33984+$e),l.bindTexture(mt,fe.__webglTexture),c.pixelStorei(37440,re.flipY),c.pixelStorei(37441,re.premultiplyAlpha),c.pixelStorei(3317,re.unpackAlignment),c.pixelStorei(37443,0);const Qt=function P(fe){return!g&&(fe.wrapS!==Do||fe.wrapT!==Do||fe.minFilter!==ws&&fe.minFilter!==Gr)}(re)&&!1===L(re.image);let Je=D(re.image,Qt,!1,v);Je=sn(re,Je);const en=L(Je)||g,Se=f.convert(re.format,re.encoding);let Jt,Ve=f.convert(re.type),ut=G(re.internalFormat,Se,Ve,re.encoding,re.isVideoTexture);Xe(mt,re,en);const Te=re.mipmaps,Zt=g&&!0!==re.isVideoTexture,kt=void 0===fe.__version,mn=$(re,Je,en);if(re.isDepthTexture)ut=6402,g?ut=re.type===Uf?36012:1014===re.type?33190:re.type===wv?35056:33189:re.type===Uf&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),re.format===$m&&6402===ut&&re.type!==pT&&1014!==re.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),re.type=pT,Ve=f.convert(re.type)),re.format===Cv&&6402===ut&&(ut=34041,re.type!==wv&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),re.type=wv,Ve=f.convert(re.type))),Zt&&kt?l.texStorage2D(3553,1,ut,Je.width,Je.height):l.texImage2D(3553,0,ut,Je.width,Je.height,0,Se,Ve,null);else if(re.isDataTexture)if(Te.length>0&&en){Zt&&kt&&l.texStorage2D(3553,mn,ut,Te[0].width,Te[0].height);for(let Ze=0,nn=Te.length;Ze<nn;Ze++)Jt=Te[Ze],Zt?l.texSubImage2D(3553,0,0,0,Jt.width,Jt.height,Se,Ve,Jt.data):l.texImage2D(3553,Ze,ut,Jt.width,Jt.height,0,Se,Ve,Jt.data);re.generateMipmaps=!1}else Zt?(kt&&l.texStorage2D(3553,mn,ut,Je.width,Je.height),l.texSubImage2D(3553,0,0,0,Je.width,Je.height,Se,Ve,Je.data)):l.texImage2D(3553,0,ut,Je.width,Je.height,0,Se,Ve,Je.data);else if(re.isCompressedTexture){Zt&&kt&&l.texStorage2D(3553,mn,ut,Te[0].width,Te[0].height);for(let Ze=0,nn=Te.length;Ze<nn;Ze++)Jt=Te[Ze],re.format!==qo?null!==Se?Zt?l.compressedTexSubImage2D(3553,Ze,0,0,Jt.width,Jt.height,Se,Jt.data):l.compressedTexImage2D(3553,Ze,ut,Jt.width,Jt.height,0,Jt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Zt?l.texSubImage2D(3553,Ze,0,0,Jt.width,Jt.height,Se,Ve,Jt.data):l.texImage2D(3553,Ze,ut,Jt.width,Jt.height,0,Se,Ve,Jt.data)}else if(re.isDataTexture2DArray)Zt?(kt&&l.texStorage3D(35866,mn,ut,Je.width,Je.height,Je.depth),l.texSubImage3D(35866,0,0,0,0,Je.width,Je.height,Je.depth,Se,Ve,Je.data)):l.texImage3D(35866,0,ut,Je.width,Je.height,Je.depth,0,Se,Ve,Je.data);else if(re.isDataTexture3D)Zt?(kt&&l.texStorage3D(32879,mn,ut,Je.width,Je.height,Je.depth),l.texSubImage3D(32879,0,0,0,0,Je.width,Je.height,Je.depth,Se,Ve,Je.data)):l.texImage3D(32879,0,ut,Je.width,Je.height,Je.depth,0,Se,Ve,Je.data);else if(re.isFramebufferTexture)Zt&&kt?l.texStorage2D(3553,mn,ut,Je.width,Je.height):l.texImage2D(3553,0,ut,Je.width,Je.height,0,Se,Ve,null);else if(Te.length>0&&en){Zt&&kt&&l.texStorage2D(3553,mn,ut,Te[0].width,Te[0].height);for(let Ze=0,nn=Te.length;Ze<nn;Ze++)Jt=Te[Ze],Zt?l.texSubImage2D(3553,Ze,0,0,Se,Ve,Jt):l.texImage2D(3553,Ze,ut,Se,Ve,Jt);re.generateMipmaps=!1}else Zt?(kt&&l.texStorage2D(3553,mn,ut,Je.width,Je.height),l.texSubImage2D(3553,0,0,0,Se,Ve,Je)):l.texImage2D(3553,0,ut,Se,Ve,Je);F(re,en)&&B(mt),fe.__version=re.version,re.onUpdate&&re.onUpdate(re)}function wt(fe,re,$e,mt,Qt){const Je=f.convert($e.format,$e.encoding),en=f.convert($e.type),Se=G($e.internalFormat,Je,en,$e.encoding);h.get(re).__hasExternalTextures||(32879===Qt||35866===Qt?l.texImage3D(Qt,0,Se,re.width,re.height,re.depth,0,Je,en,null):l.texImage2D(Qt,0,Se,re.width,re.height,0,Je,en,null)),l.bindFramebuffer(36160,fe),re.useRenderToTexture?T.framebufferTexture2DMultisampleEXT(36160,mt,Qt,h.get($e).__webglTexture,0,Rt(re)):c.framebufferTexture2D(36160,mt,Qt,h.get($e).__webglTexture,0),l.bindFramebuffer(36160,null)}function Bt(fe,re,$e){if(c.bindRenderbuffer(36161,fe),re.depthBuffer&&!re.stencilBuffer){let mt=33189;if($e||re.useRenderToTexture){const Qt=re.depthTexture;Qt&&Qt.isDepthTexture&&(Qt.type===Uf?mt=36012:1014===Qt.type&&(mt=33190));const Je=Rt(re);re.useRenderToTexture?T.renderbufferStorageMultisampleEXT(36161,Je,mt,re.width,re.height):c.renderbufferStorageMultisample(36161,Je,mt,re.width,re.height)}else c.renderbufferStorage(36161,mt,re.width,re.height);c.framebufferRenderbuffer(36160,36096,36161,fe)}else if(re.depthBuffer&&re.stencilBuffer){const mt=Rt(re);$e&&re.useRenderbuffer?c.renderbufferStorageMultisample(36161,mt,35056,re.width,re.height):re.useRenderToTexture?T.renderbufferStorageMultisampleEXT(36161,mt,35056,re.width,re.height):c.renderbufferStorage(36161,34041,re.width,re.height),c.framebufferRenderbuffer(36160,33306,36161,fe)}else{const mt=!0===re.isWebGLMultipleRenderTargets?re.texture[0]:re.texture,Qt=f.convert(mt.format,mt.encoding),Je=f.convert(mt.type),en=G(mt.internalFormat,Qt,Je,mt.encoding),Se=Rt(re);$e&&re.useRenderbuffer?c.renderbufferStorageMultisample(36161,Se,en,re.width,re.height):re.useRenderToTexture?T.renderbufferStorageMultisampleEXT(36161,Se,en,re.width,re.height):c.renderbufferStorage(36161,en,re.width,re.height)}c.bindRenderbuffer(36161,null)}function _n(fe){const re=h.get(fe),$e=!0===fe.isWebGLCubeRenderTarget;if(fe.depthTexture&&!re.__autoAllocateDepthBuffer){if($e)throw new Error("target.depthTexture not supported in Cube render targets");!function Pe(fe,re){if(re&&re.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(l.bindFramebuffer(36160,fe),!re.depthTexture||!re.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!h.get(re.depthTexture).__webglTexture||re.depthTexture.image.width!==re.width||re.depthTexture.image.height!==re.height)&&(re.depthTexture.image.width=re.width,re.depthTexture.image.height=re.height,re.depthTexture.needsUpdate=!0),le(re.depthTexture,0);const mt=h.get(re.depthTexture).__webglTexture,Qt=Rt(re);if(re.depthTexture.format===$m)re.useRenderToTexture?T.framebufferTexture2DMultisampleEXT(36160,36096,3553,mt,0,Qt):c.framebufferTexture2D(36160,36096,3553,mt,0);else{if(re.depthTexture.format!==Cv)throw new Error("Unknown depthTexture format");re.useRenderToTexture?T.framebufferTexture2DMultisampleEXT(36160,33306,3553,mt,0,Qt):c.framebufferTexture2D(36160,33306,3553,mt,0)}}(re.__webglFramebuffer,fe)}else if($e){re.__webglDepthbuffer=[];for(let mt=0;mt<6;mt++)l.bindFramebuffer(36160,re.__webglFramebuffer[mt]),re.__webglDepthbuffer[mt]=c.createRenderbuffer(),Bt(re.__webglDepthbuffer[mt],fe,!1)}else l.bindFramebuffer(36160,re.__webglFramebuffer),re.__webglDepthbuffer=c.createRenderbuffer(),Bt(re.__webglDepthbuffer,fe,!1);l.bindFramebuffer(36160,null)}function Rt(fe){return g&&(fe.useRenderbuffer||fe.useRenderToTexture)?Math.min(b,fe.samples):0}function sn(fe,re){const $e=fe.encoding,mt=fe.format,Qt=fe.type;return!0===fe.isCompressedTexture||!0===fe.isVideoTexture||1035===fe.format||$e!==zf&&($e===vr?!1===g?!0===a.has("EXT_sRGB")&&mt===qo?(fe.format=1035,fe.minFilter=Gr,fe.generateMipmaps=!1):re=Km.sRGBToLinear(re):(mt!==qo||Qt!==Bf)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",$e)),re}let ln=!1,ct=!1;this.allocateTextureUnit=function K(){const fe=ue;return fe>=y&&console.warn("THREE.WebGLTextures: Trying to use "+fe+" texture units while this GPU supports only "+y),ue+=1,fe},this.resetTextureUnits=function ge(){ue=0},this.setTexture2D=le,this.setTexture2DArray=function ye(fe,re){const $e=h.get(fe);fe.version>0&&$e.__version!==fe.version?Ae($e,fe,re):(l.activeTexture(33984+re),l.bindTexture(35866,$e.__webglTexture))},this.setTexture3D=function ke(fe,re){const $e=h.get(fe);fe.version>0&&$e.__version!==fe.version?Ae($e,fe,re):(l.activeTexture(33984+re),l.bindTexture(32879,$e.__webglTexture))},this.setTextureCube=_e,this.rebindTextures=function on(fe,re,$e){const mt=h.get(fe);void 0!==re&&wt(mt.__webglFramebuffer,fe,fe.texture,36064,3553),void 0!==$e&&_n(fe)},this.setupRenderTarget=function et(fe){const re=fe.texture,$e=h.get(fe),mt=h.get(re);fe.addEventListener("dispose",j),!0!==fe.isWebGLMultipleRenderTargets&&(void 0===mt.__webglTexture&&(mt.__webglTexture=c.createTexture()),mt.__version=re.version,m.memory.textures++);const Qt=!0===fe.isWebGLCubeRenderTarget,Je=!0===fe.isWebGLMultipleRenderTargets,en=re.isDataTexture3D||re.isDataTexture2DArray,Se=L(fe)||g;if(Qt){$e.__webglFramebuffer=[];for(let Ve=0;Ve<6;Ve++)$e.__webglFramebuffer[Ve]=c.createFramebuffer()}else if($e.__webglFramebuffer=c.createFramebuffer(),Je)if(d.drawBuffers){const Ve=fe.texture;for(let ut=0,Jt=Ve.length;ut<Jt;ut++){const Te=h.get(Ve[ut]);void 0===Te.__webglTexture&&(Te.__webglTexture=c.createTexture(),m.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(fe.useRenderbuffer)if(g){$e.__webglMultisampledFramebuffer=c.createFramebuffer(),$e.__webglColorRenderbuffer=c.createRenderbuffer(),c.bindRenderbuffer(36161,$e.__webglColorRenderbuffer);const Ve=f.convert(re.format,re.encoding),ut=f.convert(re.type),Jt=G(re.internalFormat,Ve,ut,re.encoding),Te=Rt(fe);c.renderbufferStorageMultisample(36161,Te,Jt,fe.width,fe.height),l.bindFramebuffer(36160,$e.__webglMultisampledFramebuffer),c.framebufferRenderbuffer(36160,36064,36161,$e.__webglColorRenderbuffer),c.bindRenderbuffer(36161,null),fe.depthBuffer&&($e.__webglDepthRenderbuffer=c.createRenderbuffer(),Bt($e.__webglDepthRenderbuffer,fe,!0)),l.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Qt){l.bindTexture(34067,mt.__webglTexture),Xe(34067,re,Se);for(let Ve=0;Ve<6;Ve++)wt($e.__webglFramebuffer[Ve],fe,re,36064,34069+Ve);F(re,Se)&&B(34067),l.unbindTexture()}else if(Je){const Ve=fe.texture;for(let ut=0,Jt=Ve.length;ut<Jt;ut++){const Te=Ve[ut],Zt=h.get(Te);l.bindTexture(3553,Zt.__webglTexture),Xe(3553,Te,Se),wt($e.__webglFramebuffer,fe,Te,36064+ut,3553),F(Te,Se)&&B(3553)}l.unbindTexture()}else{let Ve=3553;en&&(g?Ve=re.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),l.bindTexture(Ve,mt.__webglTexture),Xe(Ve,re,Se),wt($e.__webglFramebuffer,fe,re,36064,Ve),F(re,Se)&&B(Ve),l.unbindTexture()}fe.depthBuffer&&_n(fe)},this.updateRenderTargetMipmap=function Et(fe){const re=L(fe)||g,$e=!0===fe.isWebGLMultipleRenderTargets?fe.texture:[fe.texture];for(let mt=0,Qt=$e.length;mt<Qt;mt++){const Je=$e[mt];if(F(Je,re)){const en=fe.isWebGLCubeRenderTarget?34067:3553,Se=h.get(Je).__webglTexture;l.bindTexture(en,Se),B(en),l.unbindTexture()}}},this.updateMultisampleRenderTarget=function pt(fe){if(fe.useRenderbuffer)if(g){const re=fe.width,$e=fe.height;let mt=16384;const Qt=[36064],Je=fe.stencilBuffer?33306:36096;fe.depthBuffer&&Qt.push(Je),fe.ignoreDepthForMultisampleCopy||(fe.depthBuffer&&(mt|=256),fe.stencilBuffer&&(mt|=1024));const en=h.get(fe);l.bindFramebuffer(36008,en.__webglMultisampledFramebuffer),l.bindFramebuffer(36009,en.__webglFramebuffer),fe.ignoreDepthForMultisampleCopy&&(c.invalidateFramebuffer(36008,[Je]),c.invalidateFramebuffer(36009,[Je])),c.blitFramebuffer(0,0,re,$e,0,0,re,$e,mt,9728),c.invalidateFramebuffer(36008,Qt),l.bindFramebuffer(36008,null),l.bindFramebuffer(36009,en.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=_n,this.setupFrameBufferTexture=wt,this.safeSetTexture2D=function ei(fe,re){fe&&fe.isWebGLRenderTarget&&(!1===ln&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ln=!0),fe=fe.texture),le(fe,re)},this.safeSetTextureCube=function mi(fe,re){fe&&fe.isWebGLCubeRenderTarget&&(!1===ct&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ct=!0),fe=fe.texture),_e(fe,re)}}function yYe(c,a,l){const h=l.isWebGL2;return{convert:function d(f,m=null){let g;if(f===Bf)return 5121;if(1017===f)return 32819;if(1018===f)return 32820;if(1010===f)return 5120;if(1011===f)return 5122;if(f===pT)return 5123;if(1013===f)return 5124;if(1014===f)return 5125;if(f===Uf)return 5126;if(f===Tv)return h?5131:(g=a.get("OES_texture_half_float"),null!==g?g.HALF_FLOAT_OES:null);if(1021===f)return 6406;if(f===qo)return 6408;if(1024===f)return 6409;if(1025===f)return 6410;if(f===$m)return 6402;if(f===Cv)return 34041;if(1028===f)return 6403;if(1022===f)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(1035===f)return g=a.get("EXT_sRGB"),null!==g?g.SRGB_ALPHA_EXT:null;if(1029===f)return 36244;if(1030===f)return 33319;if(1031===f)return 33320;if(1033===f)return 36249;if(33776===f||33777===f||33778===f||33779===f)if(m===vr){if(g=a.get("WEBGL_compressed_texture_s3tc_srgb"),null===g)return null;if(33776===f)return g.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===f)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===f)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===f)return g.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(g=a.get("WEBGL_compressed_texture_s3tc"),null===g)return null;if(33776===f)return g.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===f)return g.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===f)return g.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===f)return g.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===f||35841===f||35842===f||35843===f){if(g=a.get("WEBGL_compressed_texture_pvrtc"),null===g)return null;if(35840===f)return g.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===f)return g.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===f)return g.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===f)return g.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===f)return g=a.get("WEBGL_compressed_texture_etc1"),null!==g?g.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===f||37496===f){if(g=a.get("WEBGL_compressed_texture_etc"),null===g)return null;if(37492===f)return m===vr?g.COMPRESSED_SRGB8_ETC2:g.COMPRESSED_RGB8_ETC2;if(37496===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:g.COMPRESSED_RGBA8_ETC2_EAC}if(37808===f||37809===f||37810===f||37811===f||37812===f||37813===f||37814===f||37815===f||37816===f||37817===f||37818===f||37819===f||37820===f||37821===f){if(g=a.get("WEBGL_compressed_texture_astc"),null===g)return null;if(37808===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:g.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:g.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:g.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:g.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:g.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:g.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:g.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:g.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:g.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:g.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:g.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:g.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:g.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===f)return m===vr?g.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:g.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===f){if(g=a.get("EXT_texture_compression_bptc"),null===g)return null;if(36492===f)return m===vr?g.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:g.COMPRESSED_RGBA_BPTC_UNORM_EXT}return f===wv?h?34042:(g=a.get("WEBGL_depth_texture"),null!==g?g.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}kV.prototype.isMeshDistanceMaterial=!0;class bie extends zs{constructor(a=[]){super(),this.cameras=a}}bie.prototype.isArrayCamera=!0;class ad extends Yi{constructor(){super(),this.type="Group"}}ad.prototype.isGroup=!0;const _Ye={type:"move"};class VV{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ad,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ad,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new te,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new te),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ad,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new te,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new te),this._grip}dispatchEvent(a){return null!==this._targetRay&&this._targetRay.dispatchEvent(a),null!==this._grip&&this._grip.dispatchEvent(a),null!==this._hand&&this._hand.dispatchEvent(a),this}disconnect(a){return this.dispatchEvent({type:"disconnected",data:a}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(a,l,h){let d=null,f=null,m=null;const g=this._targetRay,y=this._grip,_=this._hand;if(a&&"visible-blurred"!==l.session.visibilityState)if(null!==g&&(d=l.getPose(a.targetRaySpace,h),null!==d&&(g.matrix.fromArray(d.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),d.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(d.linearVelocity)):g.hasLinearVelocity=!1,d.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(d.angularVelocity)):g.hasAngularVelocity=!1,this.dispatchEvent(_Ye))),_&&a.hand){m=!0;for(const E of a.hand.values()){const I=l.getJointPose(E,h);if(void 0===_.joints[E.jointName]){const D=new ad;D.matrixAutoUpdate=!1,D.visible=!1,_.joints[E.jointName]=D,_.add(D)}const M=_.joints[E.jointName];null!==I&&(M.matrix.fromArray(I.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.jointRadius=I.radius),M.visible=null!==I}const S=_.joints["index-finger-tip"].position.distanceTo(_.joints["thumb-tip"].position),T=.02,x=.005;_.inputState.pinching&&S>T+x?(_.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:a.handedness,target:this})):!_.inputState.pinching&&S<=T-x&&(_.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:a.handedness,target:this}))}else null!==y&&a.gripSpace&&(f=l.getPose(a.gripSpace,h),null!==f&&(y.matrix.fromArray(f.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),f.linearVelocity?(y.hasLinearVelocity=!0,y.linearVelocity.copy(f.linearVelocity)):y.hasLinearVelocity=!1,f.angularVelocity?(y.hasAngularVelocity=!0,y.angularVelocity.copy(f.angularVelocity)):y.hasAngularVelocity=!1));return null!==g&&(g.visible=null!==d),null!==y&&(y.visible=null!==f),null!==_&&(_.visible=null!==m),this}}class BV extends Cs{constructor(a,l,h,d,f,m,g,y,_,v){if((v=void 0!==v?v:$m)!==$m&&v!==Cv)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===h&&v===$m&&(h=pT),void 0===h&&v===Cv&&(h=wv),super(null,d,f,m,g,y,v,h,_),this.image={width:a,height:l},this.magFilter=void 0!==g?g:ws,this.minFilter=void 0!==y?y:ws,this.flipY=!1,this.generateMipmaps=!1}}BV.prototype.isDepthTexture=!0;class vYe extends Gf{constructor(a,l){super();const h=this;let d=null,f=1,m=null,g="local-floor";const y=a.extensions.has("WEBGL_multisampled_render_to_texture");let _=null,v=null,b=null,S=null,T=!1,x=null;const E=l.getContextAttributes();let I=null,M=null;const D=[],L=new Map,P=new zs;P.layers.enable(1),P.viewport=new hr;const F=new zs;F.layers.enable(2),F.viewport=new hr;const B=[P,F],G=new bie;G.layers.enable(1),G.layers.enable(2);let $=null,se=null;function ie(_e){const Ne=L.get(_e.inputSource);Ne&&Ne.dispatchEvent({type:_e.type,data:_e.inputSource})}function j(){L.forEach(function(_e,Ne){_e.disconnect(Ne)}),L.clear(),$=null,se=null,a.setRenderTarget(I),S=null,b=null,v=null,d=null,M=null,ke.stop(),h.isPresenting=!1,h.dispatchEvent({type:"sessionend"})}function J(_e){const Ne=d.inputSources;for(let me=0;me<D.length;me++)L.set(Ne[me],D[me]);for(let me=0;me<_e.removed.length;me++){const Xe=_e.removed[me],qe=L.get(Xe);qe&&(qe.dispatchEvent({type:"disconnected",data:Xe}),L.delete(Xe))}for(let me=0;me<_e.added.length;me++){const Xe=_e.added[me],qe=L.get(Xe);qe&&qe.dispatchEvent({type:"connected",data:Xe})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(_e){let Ne=D[_e];return void 0===Ne&&(Ne=new VV,D[_e]=Ne),Ne.getTargetRaySpace()},this.getControllerGrip=function(_e){let Ne=D[_e];return void 0===Ne&&(Ne=new VV,D[_e]=Ne),Ne.getGripSpace()},this.getHand=function(_e){let Ne=D[_e];return void 0===Ne&&(Ne=new VV,D[_e]=Ne),Ne.getHandSpace()},this.setFramebufferScaleFactor=function(_e){f=_e,!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(_e){g=_e,!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return m},this.getBaseLayer=function(){return null!==b?b:S},this.getBinding=function(){return v},this.getFrame=function(){return x},this.getSession=function(){return d},this.setSession=function(){var _e=Cm(function*(Ne){if(d=Ne,null!==d){if(I=a.getRenderTarget(),d.addEventListener("select",ie),d.addEventListener("selectstart",ie),d.addEventListener("selectend",ie),d.addEventListener("squeeze",ie),d.addEventListener("squeezestart",ie),d.addEventListener("squeezeend",ie),d.addEventListener("end",j),d.addEventListener("inputsourceschange",J),!0!==E.xrCompatible&&(yield l.makeXRCompatible()),void 0===d.renderState.layers||!1===a.capabilities.isWebGL2)S=new XRWebGLLayer(d,l,{antialias:void 0!==d.renderState.layers||E.antialias,alpha:E.alpha,depth:E.depth,stencil:E.stencil,framebufferScaleFactor:f}),d.updateRenderState({baseLayer:S}),M=new Ql(S.framebufferWidth,S.framebufferHeight,{format:qo,type:Bf,encoding:a.outputEncoding});else{T=E.antialias;let me=null,Xe=null,qe=null;E.depth&&(qe=E.stencil?35056:33190,me=E.stencil?Cv:$m,Xe=E.stencil?wv:pT);const Ae={colorFormat:a.outputEncoding===vr?35907:32856,depthFormat:qe,scaleFactor:f};v=new XRWebGLBinding(d,l),b=v.createProjectionLayer(Ae),d.updateRenderState({layers:[b]}),M=T?new oV(b.textureWidth,b.textureHeight,{format:qo,type:Bf,depthTexture:new BV(b.textureWidth,b.textureHeight,Xe,void 0,void 0,void 0,void 0,void 0,void 0,me),stencilBuffer:E.stencil,ignoreDepth:b.ignoreDepthValues,useRenderToTexture:y,encoding:a.outputEncoding}):new Ql(b.textureWidth,b.textureHeight,{format:qo,type:Bf,depthTexture:new BV(b.textureWidth,b.textureHeight,Xe,void 0,void 0,void 0,void 0,void 0,void 0,me),stencilBuffer:E.stencil,ignoreDepth:b.ignoreDepthValues,encoding:a.outputEncoding})}M.isXRRenderTarget=!0,this.setFoveation(1),m=yield d.requestReferenceSpace(g),ke.setContext(d),ke.start(),h.isPresenting=!0,h.dispatchEvent({type:"sessionstart"})}});return function(Ne){return _e.apply(this,arguments)}}();const ae=new te,ue=new te;function K(_e,Ne){null===Ne?_e.matrixWorld.copy(_e.matrix):_e.matrixWorld.multiplyMatrices(Ne.matrixWorld,_e.matrix),_e.matrixWorldInverse.copy(_e.matrixWorld).invert()}this.updateCamera=function(_e){if(null===d)return;G.near=F.near=P.near=_e.near,G.far=F.far=P.far=_e.far,($!==G.near||se!==G.far)&&(d.updateRenderState({depthNear:G.near,depthFar:G.far}),$=G.near,se=G.far);const Ne=_e.parent,me=G.cameras;K(G,Ne);for(let qe=0;qe<me.length;qe++)K(me[qe],Ne);G.matrixWorld.decompose(G.position,G.quaternion,G.scale),_e.position.copy(G.position),_e.quaternion.copy(G.quaternion),_e.scale.copy(G.scale),_e.matrix.copy(G.matrix),_e.matrixWorld.copy(G.matrixWorld);const Xe=_e.children;for(let qe=0,Ae=Xe.length;qe<Ae;qe++)Xe[qe].updateMatrixWorld(!0);2===me.length?function ge(_e,Ne,me){ae.setFromMatrixPosition(Ne.matrixWorld),ue.setFromMatrixPosition(me.matrixWorld);const Xe=ae.distanceTo(ue),qe=Ne.projectionMatrix.elements,Ae=me.projectionMatrix.elements,Tn=qe[14]/(qe[10]-1),wt=qe[14]/(qe[10]+1),Bt=(qe[9]+1)/qe[5],Pe=(qe[9]-1)/qe[5],_n=(qe[8]-1)/qe[0],on=(Ae[8]+1)/Ae[0],et=Tn*_n,Et=Tn*on,pt=Xe/(-_n+on),Rt=pt*-_n;Ne.matrixWorld.decompose(_e.position,_e.quaternion,_e.scale),_e.translateX(Rt),_e.translateZ(pt),_e.matrixWorld.compose(_e.position,_e.quaternion,_e.scale),_e.matrixWorldInverse.copy(_e.matrixWorld).invert();const Mt=Tn+pt,sn=wt+pt;_e.projectionMatrix.makePerspective(et-Rt,Et+(Xe-Rt),Bt*wt/sn*Mt,Pe*wt/sn*Mt,Mt,sn)}(G,P,F):G.projectionMatrix.copy(P.projectionMatrix)},this.getCamera=function(){return G},this.getFoveation=function(){return null!==b?b.fixedFoveation:null!==S?S.fixedFoveation:void 0},this.setFoveation=function(_e){null!==b&&(b.fixedFoveation=_e),null!==S&&void 0!==S.fixedFoveation&&(S.fixedFoveation=_e)};let le=null;const ke=new Bne;ke.setAnimationLoop(function ye(_e,Ne){if(_=Ne.getViewerPose(m),x=Ne,null!==_){const Xe=_.views;null!==S&&(a.setRenderTargetFramebuffer(M,S.framebuffer),a.setRenderTarget(M));let qe=!1;Xe.length!==G.cameras.length&&(G.cameras.length=0,qe=!0);for(let Ae=0;Ae<Xe.length;Ae++){const Tn=Xe[Ae];let wt=null;if(null!==S)wt=S.getViewport(Tn);else{const Pe=v.getViewSubImage(b,Tn);wt=Pe.viewport,0===Ae&&(a.setRenderTargetTextures(M,Pe.colorTexture,b.ignoreDepthValues?void 0:Pe.depthStencilTexture),a.setRenderTarget(M))}const Bt=B[Ae];Bt.matrix.fromArray(Tn.transform.matrix),Bt.projectionMatrix.fromArray(Tn.projectionMatrix),Bt.viewport.set(wt.x,wt.y,wt.width,wt.height),0===Ae&&G.matrix.copy(Bt.matrix),!0===qe&&G.cameras.push(Bt)}}const me=d.inputSources;for(let Xe=0;Xe<D.length;Xe++)D[Xe].update(me[Xe],Ne,m);le&&le(_e,Ne),x=null}),this.setAnimationLoop=function(_e){le=_e},this.dispose=function(){}}}function bYe(c){function h(M,D){M.opacity.value=D.opacity,D.color&&M.diffuse.value.copy(D.color),D.emissive&&M.emissive.value.copy(D.emissive).multiplyScalar(D.emissiveIntensity),D.map&&(M.map.value=D.map),D.alphaMap&&(M.alphaMap.value=D.alphaMap),D.specularMap&&(M.specularMap.value=D.specularMap),D.alphaTest>0&&(M.alphaTest.value=D.alphaTest);const L=c.get(D).envMap;let P,F;L&&(M.envMap.value=L,M.flipEnvMap.value=L.isCubeTexture&&!1===L.isRenderTargetTexture?-1:1,M.reflectivity.value=D.reflectivity,M.ior.value=D.ior,M.refractionRatio.value=D.refractionRatio),D.lightMap&&(M.lightMap.value=D.lightMap,M.lightMapIntensity.value=D.lightMapIntensity),D.aoMap&&(M.aoMap.value=D.aoMap,M.aoMapIntensity.value=D.aoMapIntensity),D.map?P=D.map:D.specularMap?P=D.specularMap:D.displacementMap?P=D.displacementMap:D.normalMap?P=D.normalMap:D.bumpMap?P=D.bumpMap:D.roughnessMap?P=D.roughnessMap:D.metalnessMap?P=D.metalnessMap:D.alphaMap?P=D.alphaMap:D.emissiveMap?P=D.emissiveMap:D.clearcoatMap?P=D.clearcoatMap:D.clearcoatNormalMap?P=D.clearcoatNormalMap:D.clearcoatRoughnessMap?P=D.clearcoatRoughnessMap:D.specularIntensityMap?P=D.specularIntensityMap:D.specularColorMap?P=D.specularColorMap:D.transmissionMap?P=D.transmissionMap:D.thicknessMap?P=D.thicknessMap:D.sheenColorMap?P=D.sheenColorMap:D.sheenRoughnessMap&&(P=D.sheenRoughnessMap),void 0!==P&&(P.isWebGLRenderTarget&&(P=P.texture),!0===P.matrixAutoUpdate&&P.updateMatrix(),M.uvTransform.value.copy(P.matrix)),D.aoMap?F=D.aoMap:D.lightMap&&(F=D.lightMap),void 0!==F&&(F.isWebGLRenderTarget&&(F=F.texture),!0===F.matrixAutoUpdate&&F.updateMatrix(),M.uv2Transform.value.copy(F.matrix))}function b(M,D){M.roughness.value=D.roughness,M.metalness.value=D.metalness,D.roughnessMap&&(M.roughnessMap.value=D.roughnessMap),D.metalnessMap&&(M.metalnessMap.value=D.metalnessMap),D.emissiveMap&&(M.emissiveMap.value=D.emissiveMap),D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,1===D.side&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),1===D.side&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias),c.get(D).envMap&&(M.envMapIntensity.value=D.envMapIntensity)}return{refreshFogUniforms:function a(M,D){M.fogColor.value.copy(D.color),D.isFog?(M.fogNear.value=D.near,M.fogFar.value=D.far):D.isFogExp2&&(M.fogDensity.value=D.density)},refreshMaterialUniforms:function l(M,D,L,P,F){D.isMeshBasicMaterial?h(M,D):D.isMeshLambertMaterial?(h(M,D),function y(M,D){D.emissiveMap&&(M.emissiveMap.value=D.emissiveMap)}(M,D)):D.isMeshToonMaterial?(h(M,D),function v(M,D){D.gradientMap&&(M.gradientMap.value=D.gradientMap),D.emissiveMap&&(M.emissiveMap.value=D.emissiveMap),D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,1===D.side&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),1===D.side&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(M,D)):D.isMeshPhongMaterial?(h(M,D),function _(M,D){M.specular.value.copy(D.specular),M.shininess.value=Math.max(D.shininess,1e-4),D.emissiveMap&&(M.emissiveMap.value=D.emissiveMap),D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,1===D.side&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),1===D.side&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(M,D)):D.isMeshStandardMaterial?(h(M,D),D.isMeshPhysicalMaterial?function S(M,D,L){b(M,D),M.ior.value=D.ior,D.sheen>0&&(M.sheenColor.value.copy(D.sheenColor).multiplyScalar(D.sheen),M.sheenRoughness.value=D.sheenRoughness,D.sheenColorMap&&(M.sheenColorMap.value=D.sheenColorMap),D.sheenRoughnessMap&&(M.sheenRoughnessMap.value=D.sheenRoughnessMap)),D.clearcoat>0&&(M.clearcoat.value=D.clearcoat,M.clearcoatRoughness.value=D.clearcoatRoughness,D.clearcoatMap&&(M.clearcoatMap.value=D.clearcoatMap),D.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=D.clearcoatRoughnessMap),D.clearcoatNormalMap&&(M.clearcoatNormalScale.value.copy(D.clearcoatNormalScale),M.clearcoatNormalMap.value=D.clearcoatNormalMap,1===D.side&&M.clearcoatNormalScale.value.negate())),D.transmission>0&&(M.transmission.value=D.transmission,M.transmissionSamplerMap.value=L.texture,M.transmissionSamplerSize.value.set(L.width,L.height),D.transmissionMap&&(M.transmissionMap.value=D.transmissionMap),M.thickness.value=D.thickness,D.thicknessMap&&(M.thicknessMap.value=D.thicknessMap),M.attenuationDistance.value=D.attenuationDistance,M.attenuationColor.value.copy(D.attenuationColor)),M.specularIntensity.value=D.specularIntensity,M.specularColor.value.copy(D.specularColor),D.specularIntensityMap&&(M.specularIntensityMap.value=D.specularIntensityMap),D.specularColorMap&&(M.specularColorMap.value=D.specularColorMap)}(M,D,F):b(M,D)):D.isMeshMatcapMaterial?(h(M,D),function T(M,D){D.matcap&&(M.matcap.value=D.matcap),D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,1===D.side&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),1===D.side&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(M,D)):D.isMeshDepthMaterial?(h(M,D),function x(M,D){D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(M,D)):D.isMeshDistanceMaterial?(h(M,D),function E(M,D){D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias),M.referencePosition.value.copy(D.referencePosition),M.nearDistance.value=D.nearDistance,M.farDistance.value=D.farDistance}(M,D)):D.isMeshNormalMaterial?(h(M,D),function I(M,D){D.bumpMap&&(M.bumpMap.value=D.bumpMap,M.bumpScale.value=D.bumpScale,1===D.side&&(M.bumpScale.value*=-1)),D.normalMap&&(M.normalMap.value=D.normalMap,M.normalScale.value.copy(D.normalScale),1===D.side&&M.normalScale.value.negate()),D.displacementMap&&(M.displacementMap.value=D.displacementMap,M.displacementScale.value=D.displacementScale,M.displacementBias.value=D.displacementBias)}(M,D)):D.isLineBasicMaterial?(function d(M,D){M.diffuse.value.copy(D.color),M.opacity.value=D.opacity}(M,D),D.isLineDashedMaterial&&function f(M,D){M.dashSize.value=D.dashSize,M.totalSize.value=D.dashSize+D.gapSize,M.scale.value=D.scale}(M,D)):D.isPointsMaterial?function m(M,D,L,P){let F;M.diffuse.value.copy(D.color),M.opacity.value=D.opacity,M.size.value=D.size*L,M.scale.value=.5*P,D.map&&(M.map.value=D.map),D.alphaMap&&(M.alphaMap.value=D.alphaMap),D.alphaTest>0&&(M.alphaTest.value=D.alphaTest),D.map?F=D.map:D.alphaMap&&(F=D.alphaMap),void 0!==F&&(!0===F.matrixAutoUpdate&&F.updateMatrix(),M.uvTransform.value.copy(F.matrix))}(M,D,L,P):D.isSpriteMaterial?function g(M,D){let L;M.diffuse.value.copy(D.color),M.opacity.value=D.opacity,M.rotation.value=D.rotation,D.map&&(M.map.value=D.map),D.alphaMap&&(M.alphaMap.value=D.alphaMap),D.alphaTest>0&&(M.alphaTest.value=D.alphaTest),D.map?L=D.map:D.alphaMap&&(L=D.alphaMap),void 0!==L&&(!0===L.matrixAutoUpdate&&L.updateMatrix(),M.uvTransform.value.copy(L.matrix))}(M,D):D.isShadowMaterial?(M.color.value.copy(D.color),M.opacity.value=D.opacity):D.isShaderMaterial&&(D.uniformsNeedUpdate=!1)}}}function ir(c={}){const a=void 0!==c.canvas?c.canvas:function SYe(){const c=bT("canvas");return c.style.display="block",c}(),l=void 0!==c.context?c.context:null,h=void 0!==c.alpha&&c.alpha,d=void 0===c.depth||c.depth,f=void 0===c.stencil||c.stencil,m=void 0!==c.antialias&&c.antialias,g=void 0===c.premultipliedAlpha||c.premultipliedAlpha,y=void 0!==c.preserveDrawingBuffer&&c.preserveDrawingBuffer,_=void 0!==c.powerPreference?c.powerPreference:"default",v=void 0!==c.failIfMajorPerformanceCaveat&&c.failIfMajorPerformanceCaveat;let b=null,S=null;const T=[],x=[];this.domElement=a,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=zf,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const E=this;let I=!1,M=0,D=0,L=null,P=-1,F=null;const B=new hr,G=new hr;let $=null,se=a.width,ie=a.height,j=1,J=null,ae=null;const ue=new hr(0,0,se,ie),ge=new hr(0,0,se,ie);let K=!1;const le=new EA;let ye=!1,ke=!1,_e=null;const Ne=new un,me=new te,Xe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function qe(){return null===L?j:1}let wt,Bt,Pe,_n,on,et,Et,pt,Rt,Mt,sn,ln,ct,ei,mi,fe,re,$e,mt,Qt,Je,en,Se,Ae=l;function Tn(oe,Ie){for(let je=0;je<oe.length;je++){const at=a.getContext(oe[je],Ie);if(null!==at)return at}return null}try{const oe={alpha:!0,depth:d,stencil:f,antialias:m,premultipliedAlpha:g,preserveDrawingBuffer:y,powerPreference:_,failIfMajorPerformanceCaveat:v};if("setAttribute"in a&&a.setAttribute("data-engine","three.js r137"),a.addEventListener("webglcontextlost",Jt,!1),a.addEventListener("webglcontextrestored",Te,!1),null===Ae){const Ie=["webgl2","webgl","experimental-webgl"];if(!0===E.isWebGL1Renderer&&Ie.shift(),Ae=Tn(Ie,oe),null===Ae)throw Tn(Ie)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ae.getShaderPrecisionFormat&&(Ae.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(oe){throw console.error("THREE.WebGLRenderer: "+oe.message),oe}function Ve(){wt=new Uqe(Ae),Bt=new Oqe(Ae,wt,c),wt.init(Bt),en=new yYe(Ae,wt,Bt),Pe=new mYe(Ae,wt,Bt),_n=new Hqe(Ae),on=new rYe,et=new gYe(Ae,wt,Pe,on,Bt,en,_n),Et=new Fqe(E),pt=new Bqe(E),Rt=new FWe(Ae,Bt),Se=new Lqe(Ae,wt,Rt,Bt),Mt=new zqe(Ae,Rt,_n,Se),sn=new qqe(Ae,Mt,Rt,_n),mt=new Xqe(Ae,Bt,et),fe=new Nqe(on),ln=new iYe(E,Et,pt,wt,Bt,Se,fe),ct=new bYe(on),ei=new oYe,mi=new dYe(wt,Bt),$e=new Rqe(E,Et,Pe,sn,h,g),re=new vie(E,sn,Bt),Qt=new Pqe(Ae,wt,_n,Bt),Je=new Gqe(Ae,wt,_n,Bt),_n.programs=ln.programs,E.capabilities=Bt,E.extensions=wt,E.properties=on,E.renderLists=ei,E.shadowMap=re,E.state=Pe,E.info=_n}Ve();const ut=new vYe(E,Ae);function Jt(oe){oe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),I=!0}function Te(){console.log("THREE.WebGLRenderer: Context Restored."),I=!1;const oe=_n.autoReset,Ie=re.enabled,je=re.autoUpdate,We=re.needsUpdate,at=re.type;Ve(),_n.autoReset=oe,re.enabled=Ie,re.autoUpdate=je,re.needsUpdate=We,re.type=at}function Zt(oe){const Ie=oe.target;Ie.removeEventListener("dispose",Zt),function kt(oe){(function mn(oe){const Ie=on.get(oe).programs;void 0!==Ie&&(Ie.forEach(function(je){ln.releaseProgram(je)}),oe.isShaderMaterial&&ln.releaseShaderCache(oe))})(oe),on.remove(oe)}(Ie)}this.xr=ut,this.getContext=function(){return Ae},this.getContextAttributes=function(){return Ae.getContextAttributes()},this.forceContextLoss=function(){const oe=wt.get("WEBGL_lose_context");oe&&oe.loseContext()},this.forceContextRestore=function(){const oe=wt.get("WEBGL_lose_context");oe&&oe.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(oe){void 0!==oe&&(j=oe,this.setSize(se,ie,!1))},this.getSize=function(oe){return oe.set(se,ie)},this.setSize=function(oe,Ie,je){ut.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(se=oe,ie=Ie,a.width=Math.floor(oe*j),a.height=Math.floor(Ie*j),!1!==je&&(a.style.width=oe+"px",a.style.height=Ie+"px"),this.setViewport(0,0,oe,Ie))},this.getDrawingBufferSize=function(oe){return oe.set(se*j,ie*j).floor()},this.setDrawingBufferSize=function(oe,Ie,je){se=oe,ie=Ie,j=je,a.width=Math.floor(oe*je),a.height=Math.floor(Ie*je),this.setViewport(0,0,oe,Ie)},this.getCurrentViewport=function(oe){return oe.copy(B)},this.getViewport=function(oe){return oe.copy(ue)},this.setViewport=function(oe,Ie,je,We){oe.isVector4?ue.set(oe.x,oe.y,oe.z,oe.w):ue.set(oe,Ie,je,We),Pe.viewport(B.copy(ue).multiplyScalar(j).floor())},this.getScissor=function(oe){return oe.copy(ge)},this.setScissor=function(oe,Ie,je,We){oe.isVector4?ge.set(oe.x,oe.y,oe.z,oe.w):ge.set(oe,Ie,je,We),Pe.scissor(G.copy(ge).multiplyScalar(j).floor())},this.getScissorTest=function(){return K},this.setScissorTest=function(oe){Pe.setScissorTest(K=oe)},this.setOpaqueSort=function(oe){J=oe},this.setTransparentSort=function(oe){ae=oe},this.getClearColor=function(oe){return oe.copy($e.getClearColor())},this.setClearColor=function(){$e.setClearColor.apply($e,arguments)},this.getClearAlpha=function(){return $e.getClearAlpha()},this.setClearAlpha=function(){$e.setClearAlpha.apply($e,arguments)},this.clear=function(oe,Ie,je){let We=0;(void 0===oe||oe)&&(We|=16384),(void 0===Ie||Ie)&&(We|=256),(void 0===je||je)&&(We|=1024),Ae.clear(We)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){a.removeEventListener("webglcontextlost",Jt,!1),a.removeEventListener("webglcontextrestored",Te,!1),ei.dispose(),mi.dispose(),on.dispose(),Et.dispose(),pt.dispose(),sn.dispose(),Se.dispose(),ln.dispose(),ut.dispose(),ut.removeEventListener("sessionstart",zn),ut.removeEventListener("sessionend",Ni),_e&&(_e.dispose(),_e=null),Ds.stop()},this.renderBufferDirect=function(oe,Ie,je,We,at,wn){null===Ie&&(Ie=Xe);const jn=at.isMesh&&at.matrixWorld.determinant()<0,ai=function Qs(oe,Ie,je,We,at){!0!==Ie.isScene&&(Ie=Xe),et.resetTextureUnits();const wn=Ie.fog,ai=null===L?E.outputEncoding:!0===L.isXRRenderTarget?L.texture.encoding:zf,ti=(We.isMeshStandardMaterial?pt:Et).get(We.envMap||(We.isMeshStandardMaterial?Ie.environment:null)),Hi=!0===We.vertexColors&&!!je.attributes.color&&4===je.attributes.color.itemSize,Si=!!We.normalMap&&!!je.attributes.tangent,Ai=!!je.morphAttributes.position,br=!!je.morphAttributes.normal,Ua=je.morphAttributes.position?je.morphAttributes.position.length:0,rc=We.toneMapped?E.toneMapping:0,Ii=on.get(We),Rl=S.state.lights;!0!==ye||!0!==ke&&oe===F||fe.setState(We,oe,oe===F&&We.id===P);let fs=!1;We.version===Ii.__version?(Ii.needsLights&&Ii.lightsStateVersion!==Rl.state.version||Ii.outputEncoding!==ai||at.isInstancedMesh&&!1===Ii.instancing||!at.isInstancedMesh&&!0===Ii.instancing||at.isSkinnedMesh&&!1===Ii.skinning||!at.isSkinnedMesh&&!0===Ii.skinning||Ii.envMap!==ti||We.fog&&Ii.fog!==wn||void 0!==Ii.numClippingPlanes&&(Ii.numClippingPlanes!==fe.numPlanes||Ii.numIntersection!==fe.numIntersection)||Ii.vertexAlphas!==Hi||Ii.vertexTangents!==Si||Ii.morphTargets!==Ai||Ii.morphNormals!==br||Ii.toneMapping!==rc||!0===Bt.isWebGL2&&Ii.morphTargetsCount!==Ua)&&(fs=!0):(fs=!0,Ii.__version=We.version);let Ll=Ii.currentProgram;!0===fs&&(Ll=yo(We,Ie,at));let lp=!1,za=!1,Pl=!1;const eo=Ll.getUniforms(),rs=Ii.uniforms;if(Pe.useProgram(Ll.program)&&(lp=!0,za=!0,Pl=!0),We.id!==P&&(P=We.id,za=!0),lp||F!==oe){if(eo.setValue(Ae,"projectionMatrix",oe.projectionMatrix),Bt.logarithmicDepthBuffer&&eo.setValue(Ae,"logDepthBufFC",2/(Math.log(oe.far+1)/Math.LN2)),F!==oe&&(F=oe,za=!0,Pl=!0),We.isShaderMaterial||We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshStandardMaterial||We.envMap){const Lo=eo.map.cameraPosition;void 0!==Lo&&Lo.setValue(Ae,me.setFromMatrixPosition(oe.matrixWorld))}(We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshLambertMaterial||We.isMeshBasicMaterial||We.isMeshStandardMaterial||We.isShaderMaterial)&&eo.setValue(Ae,"isOrthographic",!0===oe.isOrthographicCamera),(We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshLambertMaterial||We.isMeshBasicMaterial||We.isMeshStandardMaterial||We.isShaderMaterial||We.isShadowMaterial||at.isSkinnedMesh)&&eo.setValue(Ae,"viewMatrix",oe.matrixWorldInverse)}if(at.isSkinnedMesh){eo.setOptional(Ae,at,"bindMatrix"),eo.setOptional(Ae,at,"bindMatrixInverse");const Lo=at.skeleton;Lo&&(Bt.floatVertexTextures?(null===Lo.boneTexture&&Lo.computeBoneTexture(),eo.setValue(Ae,"boneTexture",Lo.boneTexture,et),eo.setValue(Ae,"boneTextureSize",Lo.boneTextureSize)):eo.setOptional(Ae,Lo,"boneMatrices"))}return!!je&&(void 0!==je.morphAttributes.position||void 0!==je.morphAttributes.normal)&&mt.update(at,je,We,Ll),(za||Ii.receiveShadow!==at.receiveShadow)&&(Ii.receiveShadow=at.receiveShadow,eo.setValue(Ae,"receiveShadow",at.receiveShadow)),za&&(eo.setValue(Ae,"toneMappingExposure",E.toneMappingExposure),Ii.needsLights&&function $u(oe,Ie){oe.ambientLightColor.needsUpdate=Ie,oe.lightProbe.needsUpdate=Ie,oe.directionalLights.needsUpdate=Ie,oe.directionalLightShadows.needsUpdate=Ie,oe.pointLights.needsUpdate=Ie,oe.pointLightShadows.needsUpdate=Ie,oe.spotLights.needsUpdate=Ie,oe.spotLightShadows.needsUpdate=Ie,oe.rectAreaLights.needsUpdate=Ie,oe.hemisphereLights.needsUpdate=Ie}(rs,Pl),wn&&We.fog&&ct.refreshFogUniforms(rs,wn),ct.refreshMaterialUniforms(rs,We,j,ie,_e),Jf.upload(Ae,Ii.uniformsList,rs,et)),We.isShaderMaterial&&!0===We.uniformsNeedUpdate&&(Jf.upload(Ae,Ii.uniformsList,rs,et),We.uniformsNeedUpdate=!1),We.isSpriteMaterial&&eo.setValue(Ae,"center",at.center),eo.setValue(Ae,"modelViewMatrix",at.modelViewMatrix),eo.setValue(Ae,"normalMatrix",at.normalMatrix),eo.setValue(Ae,"modelMatrix",at.matrixWorld),Ll}(oe,Ie,je,We,at);Pe.setMaterial(We,jn);let ti=je.index;const Hi=je.attributes.position;if(null===ti){if(void 0===Hi||0===Hi.count)return}else if(0===ti.count)return;let Si=1;!0===We.wireframe&&(ti=Mt.getWireframeAttribute(je),Si=2),Se.setup(at,We,ai,je,ti);let Ai,br=Qt;null!==ti&&(Ai=Rt.get(ti),br=Je,br.setIndex(Ai));const Ua=null!==ti?ti.count:Hi.count,rc=je.drawRange.start*Si,Ii=je.drawRange.count*Si,Rl=null!==wn?wn.start*Si:0,fs=null!==wn?wn.count*Si:1/0,Ll=Math.max(rc,Rl),lp=Math.min(Ua,rc+Ii,Rl+fs)-1,za=Math.max(0,lp-Ll+1);if(0!==za){if(at.isMesh)!0===We.wireframe?(Pe.setLineWidth(We.wireframeLinewidth*qe()),br.setMode(1)):br.setMode(4);else if(at.isLine){let Pl=We.linewidth;void 0===Pl&&(Pl=1),Pe.setLineWidth(Pl*qe()),br.setMode(at.isLineSegments?1:at.isLineLoop?2:3)}else at.isPoints?br.setMode(0):at.isSprite&&br.setMode(4);if(at.isInstancedMesh)br.renderInstances(Ll,za,at.count);else if(je.isInstancedBufferGeometry){const Pl=Math.min(je.instanceCount,je._maxInstanceCount);br.renderInstances(Ll,za,Pl)}else br.render(Ll,za)}},this.compile=function(oe,Ie){S=mi.get(oe),S.init(),x.push(S),oe.traverseVisible(function(je){je.isLight&&je.layers.test(Ie.layers)&&(S.pushLight(je),je.castShadow&&S.pushShadow(je))}),S.setupLights(E.physicallyCorrectLights),oe.traverse(function(je){const We=je.material;if(We)if(Array.isArray(We))for(let at=0;at<We.length;at++)yo(We[at],oe,je);else yo(We,oe,je)}),x.pop(),S=null};let Ze=null;function zn(){Ds.stop()}function Ni(){Ds.start()}const Ds=new Bne;function Di(oe,Ie,je,We){if(!1===oe.visible)return;if(oe.layers.test(Ie.layers))if(oe.isGroup)je=oe.renderOrder;else if(oe.isLOD)!0===oe.autoUpdate&&oe.update(Ie);else if(oe.isLight)S.pushLight(oe),oe.castShadow&&S.pushShadow(oe);else if(oe.isSprite){if(!oe.frustumCulled||le.intersectsSprite(oe)){We&&me.setFromMatrixPosition(oe.matrixWorld).applyMatrix4(Ne);const jn=sn.update(oe),ai=oe.material;ai.visible&&b.push(oe,jn,ai,je,me.z,null)}}else if((oe.isMesh||oe.isLine||oe.isPoints)&&(oe.isSkinnedMesh&&oe.skeleton.frame!==_n.render.frame&&(oe.skeleton.update(),oe.skeleton.frame=_n.render.frame),!oe.frustumCulled||le.intersectsObject(oe))){We&&me.setFromMatrixPosition(oe.matrixWorld).applyMatrix4(Ne);const jn=sn.update(oe),ai=oe.material;if(Array.isArray(ai)){const ti=jn.groups;for(let Hi=0,Si=ti.length;Hi<Si;Hi++){const Ai=ti[Hi],br=ai[Ai.materialIndex];br&&br.visible&&b.push(oe,jn,br,je,me.z,Ai)}}else ai.visible&&b.push(oe,jn,ai,je,me.z,null)}const wn=oe.children;for(let jn=0,ai=wn.length;jn<ai;jn++)Di(wn[jn],Ie,je,We)}function Sa(oe,Ie,je,We){const at=oe.opaque,wn=oe.transmissive,jn=oe.transparent;S.setupLightsView(je),wn.length>0&&function Ro(oe,Ie,je){null===_e&&(_e=new(!0===m&&!0===Bt.isWebGL2?oV:Ql)(1024,1024,{generateMipmaps:!0,type:null!==en.convert(Tv)?Tv:Bf,minFilter:Vf,magFilter:ws,wrapS:Do,wrapT:Do,useRenderToTexture:wt.has("WEBGL_multisampled_render_to_texture")}));const We=E.getRenderTarget();E.setRenderTarget(_e),E.clear();const at=E.toneMapping;E.toneMapping=0,jr(oe,Ie,je),E.toneMapping=at,et.updateMultisampleRenderTarget(_e),et.updateRenderTargetMipmap(_e),E.setRenderTarget(We)}(at,Ie,je),We&&Pe.viewport(B.copy(We)),at.length>0&&jr(at,Ie,je),wn.length>0&&jr(wn,Ie,je),jn.length>0&&jr(jn,Ie,je)}function jr(oe,Ie,je){const We=!0===Ie.isScene?Ie.overrideMaterial:null;for(let at=0,wn=oe.length;at<wn;at++){const jn=oe[at],ai=jn.object,ti=jn.geometry,Hi=null===We?jn.material:We,Si=jn.group;ai.layers.test(je.layers)&&Ta(ai,Ie,je,ti,Hi,Si)}}function Ta(oe,Ie,je,We,at,wn){oe.onBeforeRender(E,Ie,je,We,at,wn),oe.modelViewMatrix.multiplyMatrices(je.matrixWorldInverse,oe.matrixWorld),oe.normalMatrix.getNormalMatrix(oe.modelViewMatrix),at.onBeforeRender(E,Ie,je,We,oe,wn),!0===at.transparent&&2===at.side?(at.side=1,at.needsUpdate=!0,E.renderBufferDirect(je,Ie,We,at,oe,wn),at.side=0,at.needsUpdate=!0,E.renderBufferDirect(je,Ie,We,at,oe,wn),at.side=2):E.renderBufferDirect(je,Ie,We,at,oe,wn),oe.onAfterRender(E,Ie,je,We,at,wn)}function yo(oe,Ie,je){!0!==Ie.isScene&&(Ie=Xe);const We=on.get(oe),at=S.state.lights,jn=at.state.version,ai=ln.getParameters(oe,at.state,S.state.shadowsArray,Ie,je),ti=ln.getProgramCacheKey(ai);let Hi=We.programs;We.environment=oe.isMeshStandardMaterial?Ie.environment:null,We.fog=Ie.fog,We.envMap=(oe.isMeshStandardMaterial?pt:Et).get(oe.envMap||We.environment),void 0===Hi&&(oe.addEventListener("dispose",Zt),Hi=new Map,We.programs=Hi);let Si=Hi.get(ti);if(void 0!==Si){if(We.currentProgram===Si&&We.lightsStateVersion===jn)return Zo(oe,ai),Si}else ai.uniforms=ln.getUniforms(oe),oe.onBuild(je,ai,E),oe.onBeforeCompile(ai,E),Si=ln.acquireProgram(ai,ti),Hi.set(ti,Si),We.uniforms=ai.uniforms;const Ai=We.uniforms;(!oe.isShaderMaterial&&!oe.isRawShaderMaterial||!0===oe.clipping)&&(Ai.clippingPlanes=fe.uniform),Zo(oe,ai),We.needsLights=function Yu(oe){return oe.isMeshLambertMaterial||oe.isMeshToonMaterial||oe.isMeshPhongMaterial||oe.isMeshStandardMaterial||oe.isShadowMaterial||oe.isShaderMaterial&&!0===oe.lights}(oe),We.lightsStateVersion=jn,We.needsLights&&(Ai.ambientLightColor.value=at.state.ambient,Ai.lightProbe.value=at.state.probe,Ai.directionalLights.value=at.state.directional,Ai.directionalLightShadows.value=at.state.directionalShadow,Ai.spotLights.value=at.state.spot,Ai.spotLightShadows.value=at.state.spotShadow,Ai.rectAreaLights.value=at.state.rectArea,Ai.ltc_1.value=at.state.rectAreaLTC1,Ai.ltc_2.value=at.state.rectAreaLTC2,Ai.pointLights.value=at.state.point,Ai.pointLightShadows.value=at.state.pointShadow,Ai.hemisphereLights.value=at.state.hemi,Ai.directionalShadowMap.value=at.state.directionalShadowMap,Ai.directionalShadowMatrix.value=at.state.directionalShadowMatrix,Ai.spotShadowMap.value=at.state.spotShadowMap,Ai.spotShadowMatrix.value=at.state.spotShadowMatrix,Ai.pointShadowMap.value=at.state.pointShadowMap,Ai.pointShadowMatrix.value=at.state.pointShadowMatrix);const br=Si.getUniforms(),Ua=Jf.seqWithValue(br.seq,Ai);return We.currentProgram=Si,We.uniformsList=Ua,Si}function Zo(oe,Ie){const je=on.get(oe);je.outputEncoding=Ie.outputEncoding,je.instancing=Ie.instancing,je.skinning=Ie.skinning,je.morphTargets=Ie.morphTargets,je.morphNormals=Ie.morphNormals,je.morphTargetsCount=Ie.morphTargetsCount,je.numClippingPlanes=Ie.numClippingPlanes,je.numIntersection=Ie.numClipIntersection,je.vertexAlphas=Ie.vertexAlphas,je.vertexTangents=Ie.vertexTangents,je.toneMapping=Ie.toneMapping}Ds.setAnimationLoop(function nn(oe){Ze&&Ze(oe)}),typeof window<"u"&&Ds.setContext(window),this.setAnimationLoop=function(oe){Ze=oe,ut.setAnimationLoop(oe),null===oe?Ds.stop():Ds.start()},ut.addEventListener("sessionstart",zn),ut.addEventListener("sessionend",Ni),this.render=function(oe,Ie){if(void 0===Ie||!0===Ie.isCamera){if(!0!==I){if(!0===oe.autoUpdate&&oe.updateMatrixWorld(),null===Ie.parent&&Ie.updateMatrixWorld(),!0===ut.enabled&&!0===ut.isPresenting&&(!0===ut.cameraAutoUpdate&&ut.updateCamera(Ie),Ie=ut.getCamera()),!0===oe.isScene&&oe.onBeforeRender(E,oe,Ie,L),S=mi.get(oe,x.length),S.init(),x.push(S),Ne.multiplyMatrices(Ie.projectionMatrix,Ie.matrixWorldInverse),le.setFromProjectionMatrix(Ne),ke=this.localClippingEnabled,ye=fe.init(this.clippingPlanes,ke,Ie),b=ei.get(oe,T.length),b.init(),T.push(b),Di(oe,Ie,0,E.sortObjects),b.finish(),!0===E.sortObjects&&b.sort(J,ae),!0===ye&&fe.beginShadows(),re.render(S.state.shadowsArray,oe,Ie),!0===ye&&fe.endShadows(),!0===this.info.autoReset&&this.info.reset(),$e.render(b,oe),S.setupLights(E.physicallyCorrectLights),Ie.isArrayCamera){const We=Ie.cameras;for(let at=0,wn=We.length;at<wn;at++){const jn=We[at];Sa(b,oe,jn,jn.viewport)}}else Sa(b,oe,Ie);null!==L&&(et.updateMultisampleRenderTarget(L),et.updateRenderTargetMipmap(L)),!0===oe.isScene&&oe.onAfterRender(E,oe,Ie),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1),Se.resetDefaultState(),P=-1,F=null,x.pop(),S=x.length>0?x[x.length-1]:null,T.pop(),b=T.length>0?T[T.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(oe,Ie,je){on.get(oe.texture).__webglTexture=Ie,on.get(oe.depthTexture).__webglTexture=je;const We=on.get(oe);We.__hasExternalTextures=!0,We.__hasExternalTextures&&(We.__autoAllocateDepthBuffer=void 0===je,We.__autoAllocateDepthBuffer||oe.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),oe.useRenderToTexture=!1,oe.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(oe,Ie){const je=on.get(oe);je.__webglFramebuffer=Ie,je.__useDefaultFramebuffer=void 0===Ie},this.setRenderTarget=function(oe,Ie=0,je=0){L=oe,M=Ie,D=je;let We=!0;if(oe){const ti=on.get(oe);void 0!==ti.__useDefaultFramebuffer?(Pe.bindFramebuffer(36160,null),We=!1):void 0===ti.__webglFramebuffer?et.setupRenderTarget(oe):ti.__hasExternalTextures&&et.rebindTextures(oe,on.get(oe.texture).__webglTexture,on.get(oe.depthTexture).__webglTexture)}let at=null,wn=!1,jn=!1;if(oe){const ti=oe.texture;(ti.isDataTexture3D||ti.isDataTexture2DArray)&&(jn=!0);const Hi=on.get(oe).__webglFramebuffer;oe.isWebGLCubeRenderTarget?(at=Hi[Ie],wn=!0):at=oe.useRenderbuffer?on.get(oe).__webglMultisampledFramebuffer:Hi,B.copy(oe.viewport),G.copy(oe.scissor),$=oe.scissorTest}else B.copy(ue).multiplyScalar(j).floor(),G.copy(ge).multiplyScalar(j).floor(),$=K;if(Pe.bindFramebuffer(36160,at)&&Bt.drawBuffers&&We&&Pe.drawBuffers(oe,at),Pe.viewport(B),Pe.scissor(G),Pe.setScissorTest($),wn){const ti=on.get(oe.texture);Ae.framebufferTexture2D(36160,36064,34069+Ie,ti.__webglTexture,je)}else if(jn){const ti=on.get(oe.texture);Ae.framebufferTextureLayer(36160,36064,ti.__webglTexture,je||0,Ie||0)}P=-1},this.readRenderTargetPixels=function(oe,Ie,je,We,at,wn,jn){if(!oe||!oe.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ai=on.get(oe).__webglFramebuffer;if(oe.isWebGLCubeRenderTarget&&void 0!==jn&&(ai=ai[jn]),ai){Pe.bindFramebuffer(36160,ai);try{const ti=oe.texture,Hi=ti.format,Si=ti.type;if(Hi!==qo&&en.convert(Hi)!==Ae.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const Ai=Si===Tv&&(wt.has("EXT_color_buffer_half_float")||Bt.isWebGL2&&wt.has("EXT_color_buffer_float"));if(!(Si===Bf||en.convert(Si)===Ae.getParameter(35738)||Si===Uf&&(Bt.isWebGL2||wt.has("OES_texture_float")||wt.has("WEBGL_color_buffer_float"))||Ai))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===Ae.checkFramebufferStatus(36160)?Ie>=0&&Ie<=oe.width-We&&je>=0&&je<=oe.height-at&&Ae.readPixels(Ie,je,We,at,en.convert(Hi),en.convert(Si),wn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const ti=null!==L?on.get(L).__webglFramebuffer:null;Pe.bindFramebuffer(36160,ti)}}},this.copyFramebufferToTexture=function(oe,Ie,je=0){if(!0!==Ie.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const We=Math.pow(2,-je),at=Math.floor(Ie.image.width*We),wn=Math.floor(Ie.image.height*We);et.setTexture2D(Ie,0),Ae.copyTexSubImage2D(3553,je,0,0,oe.x,oe.y,at,wn),Pe.unbindTexture()},this.copyTextureToTexture=function(oe,Ie,je,We=0){const at=Ie.image.width,wn=Ie.image.height,jn=en.convert(je.format),ai=en.convert(je.type);et.setTexture2D(je,0),Ae.pixelStorei(37440,je.flipY),Ae.pixelStorei(37441,je.premultiplyAlpha),Ae.pixelStorei(3317,je.unpackAlignment),Ie.isDataTexture?Ae.texSubImage2D(3553,We,oe.x,oe.y,at,wn,jn,ai,Ie.image.data):Ie.isCompressedTexture?Ae.compressedTexSubImage2D(3553,We,oe.x,oe.y,Ie.mipmaps[0].width,Ie.mipmaps[0].height,jn,Ie.mipmaps[0].data):Ae.texSubImage2D(3553,We,oe.x,oe.y,jn,ai,Ie.image),0===We&&je.generateMipmaps&&Ae.generateMipmap(3553),Pe.unbindTexture()},this.copyTextureToTexture3D=function(oe,Ie,je,We,at=0){if(E.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const wn=oe.max.x-oe.min.x+1,jn=oe.max.y-oe.min.y+1,ai=oe.max.z-oe.min.z+1,ti=en.convert(We.format),Hi=en.convert(We.type);let Si;if(We.isDataTexture3D)et.setTexture3D(We,0),Si=32879;else{if(!We.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");et.setTexture2DArray(We,0),Si=35866}Ae.pixelStorei(37440,We.flipY),Ae.pixelStorei(37441,We.premultiplyAlpha),Ae.pixelStorei(3317,We.unpackAlignment);const Ai=Ae.getParameter(3314),br=Ae.getParameter(32878),Ua=Ae.getParameter(3316),rc=Ae.getParameter(3315),Ii=Ae.getParameter(32877),Rl=je.isCompressedTexture?je.mipmaps[0]:je.image;Ae.pixelStorei(3314,Rl.width),Ae.pixelStorei(32878,Rl.height),Ae.pixelStorei(3316,oe.min.x),Ae.pixelStorei(3315,oe.min.y),Ae.pixelStorei(32877,oe.min.z),je.isDataTexture||je.isDataTexture3D?Ae.texSubImage3D(Si,at,Ie.x,Ie.y,Ie.z,wn,jn,ai,ti,Hi,Rl.data):je.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ae.compressedTexSubImage3D(Si,at,Ie.x,Ie.y,Ie.z,wn,jn,ai,ti,Rl.data)):Ae.texSubImage3D(Si,at,Ie.x,Ie.y,Ie.z,wn,jn,ai,ti,Hi,Rl),Ae.pixelStorei(3314,Ai),Ae.pixelStorei(32878,br),Ae.pixelStorei(3316,Ua),Ae.pixelStorei(3315,rc),Ae.pixelStorei(32877,Ii),0===at&&We.generateMipmaps&&Ae.generateMipmap(Si),Pe.unbindTexture()},this.initTexture=function(oe){et.setTexture2D(oe,0),Pe.unbindTexture()},this.resetState=function(){M=0,D=0,L=null,Pe.reset(),Se.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}ir.prototype.isWebGLRenderer=!0,class TYe extends ir{}.prototype.isWebGL1Renderer=!0;class IA{constructor(a,l=25e-5){this.name="",this.color=new Pt(a),this.density=l}clone(){return new IA(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}IA.prototype.isFogExp2=!0;class RA{constructor(a,l=1,h=1e3){this.name="",this.color=new Pt(a),this.near=l,this.far=h}clone(){return new RA(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}RA.prototype.isFog=!0;class IT extends Yi{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(a,l){return super.copy(a,l),null!==a.background&&(this.background=a.background.clone()),null!==a.environment&&(this.environment=a.environment.clone()),null!==a.fog&&(this.fog=a.fog.clone()),null!==a.overrideMaterial&&(this.overrideMaterial=a.overrideMaterial.clone()),this.autoUpdate=a.autoUpdate,this.matrixAutoUpdate=a.matrixAutoUpdate,this}toJSON(a){const l=super.toJSON(a);return null!==this.fog&&(l.object.fog=this.fog.toJSON()),l}}IT.prototype.isScene=!0;class rg{constructor(a,l){this.array=a,this.stride=l,this.count=void 0!==a?a.length/l:0,this.usage=gT,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Cl()}onUploadCallback(){}set needsUpdate(a){!0===a&&this.version++}setUsage(a){return this.usage=a,this}copy(a){return this.array=new a.array.constructor(a.array),this.count=a.count,this.stride=a.stride,this.usage=a.usage,this}copyAt(a,l,h){a*=this.stride,h*=l.stride;for(let d=0,f=this.stride;d<f;d++)this.array[a+d]=l.array[h+d];return this}set(a,l=0){return this.array.set(a,l),this}clone(a){void 0===a.arrayBuffers&&(a.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Cl()),void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const l=new this.array.constructor(a.arrayBuffers[this.array.buffer._uuid]),h=new this.constructor(l,this.stride);return h.setUsage(this.usage),h}onUpload(a){return this.onUploadCallback=a,this}toJSON(a){return void 0===a.arrayBuffers&&(a.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Cl()),void 0===a.arrayBuffers[this.array.buffer._uuid]&&(a.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}rg.prototype.isInterleavedBuffer=!0;const Es=new te;class Qf{constructor(a,l,h,d=!1){this.name="",this.data=a,this.itemSize=l,this.offset=h,this.normalized=!0===d}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(a){this.data.needsUpdate=a}applyMatrix4(a){for(let l=0,h=this.data.count;l<h;l++)Es.x=this.getX(l),Es.y=this.getY(l),Es.z=this.getZ(l),Es.applyMatrix4(a),this.setXYZ(l,Es.x,Es.y,Es.z);return this}applyNormalMatrix(a){for(let l=0,h=this.count;l<h;l++)Es.x=this.getX(l),Es.y=this.getY(l),Es.z=this.getZ(l),Es.applyNormalMatrix(a),this.setXYZ(l,Es.x,Es.y,Es.z);return this}transformDirection(a){for(let l=0,h=this.count;l<h;l++)Es.x=this.getX(l),Es.y=this.getY(l),Es.z=this.getZ(l),Es.transformDirection(a),this.setXYZ(l,Es.x,Es.y,Es.z);return this}setX(a,l){return this.data.array[a*this.data.stride+this.offset]=l,this}setY(a,l){return this.data.array[a*this.data.stride+this.offset+1]=l,this}setZ(a,l){return this.data.array[a*this.data.stride+this.offset+2]=l,this}setW(a,l){return this.data.array[a*this.data.stride+this.offset+3]=l,this}getX(a){return this.data.array[a*this.data.stride+this.offset]}getY(a){return this.data.array[a*this.data.stride+this.offset+1]}getZ(a){return this.data.array[a*this.data.stride+this.offset+2]}getW(a){return this.data.array[a*this.data.stride+this.offset+3]}setXY(a,l,h){return this.data.array[(a=a*this.data.stride+this.offset)+0]=l,this.data.array[a+1]=h,this}setXYZ(a,l,h,d){return this.data.array[(a=a*this.data.stride+this.offset)+0]=l,this.data.array[a+1]=h,this.data.array[a+2]=d,this}setXYZW(a,l,h,d,f){return this.data.array[(a=a*this.data.stride+this.offset)+0]=l,this.data.array[a+1]=h,this.data.array[a+2]=d,this.data.array[a+3]=f,this}clone(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const l=[];for(let h=0;h<this.count;h++){const d=h*this.data.stride+this.offset;for(let f=0;f<this.itemSize;f++)l.push(this.data.array[d+f])}return new ar(new this.array.constructor(l),this.itemSize,this.normalized)}return void 0===a.interleavedBuffers&&(a.interleavedBuffers={}),void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.clone(a)),new Qf(a.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(a){if(void 0===a){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const l=[];for(let h=0;h<this.count;h++){const d=h*this.data.stride+this.offset;for(let f=0;f<this.itemSize;f++)l.push(this.data.array[d+f])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:l,normalized:this.normalized}}return void 0===a.interleavedBuffers&&(a.interleavedBuffers={}),void 0===a.interleavedBuffers[this.data.uuid]&&(a.interleavedBuffers[this.data.uuid]=this.data.toJSON(a)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Qf.prototype.isInterleavedBufferAttribute=!0;class UV extends Us{constructor(a){super(),this.type="SpriteMaterial",this.color=new Pt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.rotation=a.rotation,this.sizeAttenuation=a.sizeAttenuation,this}}let Yv;UV.prototype.isSpriteMaterial=!0;const RT=new te,Zv=new te,Kv=new te,Jv=new tt,LT=new tt,Sie=new un,LA=new te,PT=new te,PA=new te,Tie=new tt,zV=new tt,wie=new tt;function OA(c,a,l,h,d,f){Jv.subVectors(c,l).addScalar(.5).multiply(h),void 0!==d?(LT.x=f*Jv.x-d*Jv.y,LT.y=d*Jv.x+f*Jv.y):LT.copy(Jv),c.copy(a),c.x+=LT.x,c.y+=LT.y,c.applyMatrix4(Sie)}(class GV extends Yi{constructor(a){if(super(),this.type="Sprite",void 0===Yv){Yv=new Nn;const l=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),h=new rg(l,5);Yv.setIndex([0,1,2,0,2,3]),Yv.setAttribute("position",new Qf(h,3,0,!1)),Yv.setAttribute("uv",new Qf(h,2,3,!1))}this.geometry=Yv,this.material=void 0!==a?a:new UV,this.center=new tt(.5,.5)}raycast(a,l){null===a.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zv.setFromMatrixScale(this.matrixWorld),Sie.copy(a.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(a.camera.matrixWorldInverse,this.matrixWorld),Kv.setFromMatrixPosition(this.modelViewMatrix),a.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Zv.multiplyScalar(-Kv.z);const h=this.material.rotation;let d,f;0!==h&&(f=Math.cos(h),d=Math.sin(h));const m=this.center;OA(LA.set(-.5,-.5,0),Kv,m,Zv,d,f),OA(PT.set(.5,-.5,0),Kv,m,Zv,d,f),OA(PA.set(.5,.5,0),Kv,m,Zv,d,f),Tie.set(0,0),zV.set(1,0),wie.set(1,1);let g=a.ray.intersectTriangle(LA,PT,PA,!1,RT);if(null===g&&(OA(PT.set(-.5,.5,0),Kv,m,Zv,d,f),zV.set(0,1),g=a.ray.intersectTriangle(LA,PA,PT,!1,RT),null===g))return;const y=a.ray.origin.distanceTo(RT);y<a.near||y>a.far||l.push({distance:y,point:RT.clone(),uv:Bs.getUV(RT,LA,PT,PA,Tie,zV,wie,new tt),face:null,object:this})}copy(a){return super.copy(a),void 0!==a.center&&this.center.copy(a.center),this.material=a.material,this}}).prototype.isSprite=!0;const xie=new te,Eie=new hr,Mie=new hr,CYe=new te,Die=new un;class FA extends xs{constructor(a,l){super(a,l),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new un,this.bindMatrixInverse=new un}copy(a){return super.copy(a),this.bindMode=a.bindMode,this.bindMatrix.copy(a.bindMatrix),this.bindMatrixInverse.copy(a.bindMatrixInverse),this.skeleton=a.skeleton,this}bind(a,l){this.skeleton=a,void 0===l&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),l=this.matrixWorld),this.bindMatrix.copy(l),this.bindMatrixInverse.copy(l).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const a=new hr,l=this.geometry.attributes.skinWeight;for(let h=0,d=l.count;h<d;h++){a.x=l.getX(h),a.y=l.getY(h),a.z=l.getZ(h),a.w=l.getW(h);const f=1/a.manhattanLength();f!==1/0?a.multiplyScalar(f):a.set(1,0,0,0),l.setXYZW(h,a.x,a.y,a.z,a.w)}}updateMatrixWorld(a){super.updateMatrixWorld(a),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(a,l){const h=this.skeleton,d=this.geometry;Eie.fromBufferAttribute(d.attributes.skinIndex,a),Mie.fromBufferAttribute(d.attributes.skinWeight,a),xie.copy(l).applyMatrix4(this.bindMatrix),l.set(0,0,0);for(let f=0;f<4;f++){const m=Mie.getComponent(f);if(0!==m){const g=Eie.getComponent(f);Die.multiplyMatrices(h.bones[g].matrixWorld,h.boneInverses[g]),l.addScaledVector(CYe.copy(xie).applyMatrix4(Die),m)}}return l.applyMatrix4(this.bindMatrixInverse)}}FA.prototype.isSkinnedMesh=!0;class kA extends Yi{constructor(){super(),this.type="Bone"}}kA.prototype.isBone=!0;class Qv extends Cs{constructor(a=null,l=1,h=1,d,f,m,g,y,_=ws,v=ws,b,S){super(null,m,g,y,_,v,d,f,b,S),this.image={data:a,width:l,height:h},this.magFilter=_,this.minFilter=v,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Qv.prototype.isDataTexture=!0;const Aie=new un,xYe=new un;class VA{constructor(a=[],l=[]){this.uuid=Cl(),this.bones=a.slice(0),this.boneInverses=l,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const a=this.bones,l=this.boneInverses;if(this.boneMatrices=new Float32Array(16*a.length),0===l.length)this.calculateInverses();else if(a.length!==l.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let h=0,d=this.bones.length;h<d;h++)this.boneInverses.push(new un)}}calculateInverses(){this.boneInverses.length=0;for(let a=0,l=this.bones.length;a<l;a++){const h=new un;this.bones[a]&&h.copy(this.bones[a].matrixWorld).invert(),this.boneInverses.push(h)}}pose(){for(let a=0,l=this.bones.length;a<l;a++){const h=this.bones[a];h&&h.matrixWorld.copy(this.boneInverses[a]).invert()}for(let a=0,l=this.bones.length;a<l;a++){const h=this.bones[a];h&&(h.parent&&h.parent.isBone?(h.matrix.copy(h.parent.matrixWorld).invert(),h.matrix.multiply(h.matrixWorld)):h.matrix.copy(h.matrixWorld),h.matrix.decompose(h.position,h.quaternion,h.scale))}}update(){const a=this.bones,l=this.boneInverses,h=this.boneMatrices,d=this.boneTexture;for(let f=0,m=a.length;f<m;f++)Aie.multiplyMatrices(a[f]?a[f].matrixWorld:xYe,l[f]),Aie.toArray(h,16*f);null!==d&&(d.needsUpdate=!0)}clone(){return new VA(this.bones,this.boneInverses)}computeBoneTexture(){let a=Math.sqrt(4*this.bones.length);a=Cne(a),a=Math.max(a,4);const l=new Float32Array(a*a*4);l.set(this.boneMatrices);const h=new Qv(l,a,a,qo,Uf);return h.needsUpdate=!0,this.boneMatrices=l,this.boneTexture=h,this.boneTextureSize=a,this}getBoneByName(a){for(let l=0,h=this.bones.length;l<h;l++){const d=this.bones[l];if(d.name===a)return d}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(a,l){this.uuid=a.uuid;for(let h=0,d=a.bones.length;h<d;h++){const f=a.bones[h];let m=l[f];void 0===m&&(console.warn("THREE.Skeleton: No bone found with UUID:",f),m=new kA),this.bones.push(m),this.boneInverses.push((new un).fromArray(a.boneInverses[h]))}return this.init(),this}toJSON(){const a={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};a.uuid=this.uuid;const l=this.bones,h=this.boneInverses;for(let d=0,f=l.length;d<f;d++)a.bones.push(l[d].uuid),a.boneInverses.push(h[d].toArray());return a}}class e0 extends ar{constructor(a,l,h,d=1){"number"==typeof h&&(d=h,h=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(a,l,h),this.meshPerAttribute=d}copy(a){return super.copy(a),this.meshPerAttribute=a.meshPerAttribute,this}toJSON(){const a=super.toJSON();return a.meshPerAttribute=this.meshPerAttribute,a.isInstancedBufferAttribute=!0,a}}e0.prototype.isInstancedBufferAttribute=!0;const Iie=new un,Rie=new un,BA=[],OT=new xs;(class Lie extends xs{constructor(a,l,h){super(a,l),this.instanceMatrix=new e0(new Float32Array(16*h),16),this.instanceColor=null,this.count=h,this.frustumCulled=!1}copy(a){return super.copy(a),this.instanceMatrix.copy(a.instanceMatrix),null!==a.instanceColor&&(this.instanceColor=a.instanceColor.clone()),this.count=a.count,this}getColorAt(a,l){l.fromArray(this.instanceColor.array,3*a)}getMatrixAt(a,l){l.fromArray(this.instanceMatrix.array,16*a)}raycast(a,l){const h=this.matrixWorld,d=this.count;if(OT.geometry=this.geometry,OT.material=this.material,void 0!==OT.material)for(let f=0;f<d;f++){this.getMatrixAt(f,Iie),Rie.multiplyMatrices(h,Iie),OT.matrixWorld=Rie,OT.raycast(a,BA);for(let m=0,g=BA.length;m<g;m++){const y=BA[m];y.instanceId=f,y.object=this,l.push(y)}BA.length=0}}setColorAt(a,l){null===this.instanceColor&&(this.instanceColor=new e0(new Float32Array(3*this.instanceMatrix.count),3)),l.toArray(this.instanceColor.array,3*a)}setMatrixAt(a,l){l.toArray(this.instanceMatrix.array,16*a)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}).prototype.isInstancedMesh=!0;class go extends Us{constructor(a){super(),this.type="LineBasicMaterial",this.color=new Pt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.linewidth=a.linewidth,this.linecap=a.linecap,this.linejoin=a.linejoin,this}}go.prototype.isLineBasicMaterial=!0;const Pie=new te,Oie=new te,Nie=new un,HV=new tg,UA=new Wf;class ep extends Yi{constructor(a=new Nn,l=new go){super(),this.type="Line",this.geometry=a,this.material=l,this.updateMorphTargets()}copy(a){return super.copy(a),this.material=a.material,this.geometry=a.geometry,this}computeLineDistances(){const a=this.geometry;if(a.isBufferGeometry)if(null===a.index){const l=a.attributes.position,h=[0];for(let d=1,f=l.count;d<f;d++)Pie.fromBufferAttribute(l,d-1),Oie.fromBufferAttribute(l,d),h[d]=h[d-1],h[d]+=Pie.distanceTo(Oie);a.setAttribute("lineDistance",new hn(h,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else a.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(a,l){const h=this.geometry,d=this.matrixWorld,f=a.params.Line.threshold,m=h.drawRange;if(null===h.boundingSphere&&h.computeBoundingSphere(),UA.copy(h.boundingSphere),UA.applyMatrix4(d),UA.radius+=f,!1===a.ray.intersectsSphere(UA))return;Nie.copy(d).invert(),HV.copy(a.ray).applyMatrix4(Nie);const g=f/((this.scale.x+this.scale.y+this.scale.z)/3),y=g*g,_=new te,v=new te,b=new te,S=new te,T=this.isLineSegments?2:1;if(h.isBufferGeometry){const x=h.index,I=h.attributes.position;if(null!==x)for(let L=Math.max(0,m.start),P=Math.min(x.count,m.start+m.count)-1;L<P;L+=T){const F=x.getX(L),B=x.getX(L+1);if(_.fromBufferAttribute(I,F),v.fromBufferAttribute(I,B),HV.distanceSqToSegment(_,v,S,b)>y)continue;S.applyMatrix4(this.matrixWorld);const $=a.ray.origin.distanceTo(S);$<a.near||$>a.far||l.push({distance:$,point:b.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}else for(let L=Math.max(0,m.start),P=Math.min(I.count,m.start+m.count)-1;L<P;L+=T){if(_.fromBufferAttribute(I,L),v.fromBufferAttribute(I,L+1),HV.distanceSqToSegment(_,v,S,b)>y)continue;S.applyMatrix4(this.matrixWorld);const B=a.ray.origin.distanceTo(S);B<a.near||B>a.far||l.push({distance:B,point:b.clone().applyMatrix4(this.matrixWorld),index:L,face:null,faceIndex:null,object:this})}}else h.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const a=this.geometry;if(a.isBufferGeometry){const l=a.morphAttributes,h=Object.keys(l);if(h.length>0){const d=l[h[0]];if(void 0!==d){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let f=0,m=d.length;f<m;f++){const g=d[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=f}}}}else{const l=a.morphTargets;void 0!==l&&l.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}ep.prototype.isLine=!0;const Fie=new te,kie=new te;class ld extends ep{constructor(a,l){super(a,l),this.type="LineSegments"}computeLineDistances(){const a=this.geometry;if(a.isBufferGeometry)if(null===a.index){const l=a.attributes.position,h=[];for(let d=0,f=l.count;d<f;d+=2)Fie.fromBufferAttribute(l,d),kie.fromBufferAttribute(l,d+1),h[d]=0===d?0:h[d-1],h[d+1]=h[d]+Fie.distanceTo(kie);a.setAttribute("lineDistance",new hn(h,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else a.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}ld.prototype.isLineSegments=!0;class jV extends ep{constructor(a,l){super(a,l),this.type="LineLoop"}}jV.prototype.isLineLoop=!0;class sg extends Us{constructor(a){super(),this.type="PointsMaterial",this.color=new Pt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.alphaMap=a.alphaMap,this.size=a.size,this.sizeAttenuation=a.sizeAttenuation,this}}sg.prototype.isPointsMaterial=!0;const Vie=new un,WV=new tg,zA=new Wf,GA=new te;class NT extends Yi{constructor(a=new Nn,l=new sg){super(),this.type="Points",this.geometry=a,this.material=l,this.updateMorphTargets()}copy(a){return super.copy(a),this.material=a.material,this.geometry=a.geometry,this}raycast(a,l){const h=this.geometry,d=this.matrixWorld,f=a.params.Points.threshold,m=h.drawRange;if(null===h.boundingSphere&&h.computeBoundingSphere(),zA.copy(h.boundingSphere),zA.applyMatrix4(d),zA.radius+=f,!1===a.ray.intersectsSphere(zA))return;Vie.copy(d).invert(),WV.copy(a.ray).applyMatrix4(Vie);const g=f/((this.scale.x+this.scale.y+this.scale.z)/3),y=g*g;if(h.isBufferGeometry){const _=h.index,b=h.attributes.position;if(null!==_)for(let x=Math.max(0,m.start),E=Math.min(_.count,m.start+m.count);x<E;x++){const I=_.getX(x);GA.fromBufferAttribute(b,I),Bie(GA,I,y,d,a,l,this)}else for(let x=Math.max(0,m.start),E=Math.min(b.count,m.start+m.count);x<E;x++)GA.fromBufferAttribute(b,x),Bie(GA,x,y,d,a,l,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const a=this.geometry;if(a.isBufferGeometry){const l=a.morphAttributes,h=Object.keys(l);if(h.length>0){const d=l[h[0]];if(void 0!==d){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let f=0,m=d.length;f<m;f++){const g=d[f].name||String(f);this.morphTargetInfluences.push(0),this.morphTargetDictionary[g]=f}}}}else{const l=a.morphTargets;void 0!==l&&l.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Bie(c,a,l,h,d,f,m){const g=WV.distanceSqToPoint(c);if(g<l){const y=new te;WV.closestPointToPoint(c,y),y.applyMatrix4(h);const _=d.ray.origin.distanceTo(y);if(_<d.near||_>d.far)return;f.push({distance:_,distanceToRay:Math.sqrt(g),point:y,index:a,face:null,object:m})}}NT.prototype.isPoints=!0,class EYe extends Cs{constructor(a,l,h,d,f,m,g,y,_){super(a,l,h,d,f,m,g,y,_),this.minFilter=void 0!==m?m:Gr,this.magFilter=void 0!==f?f:Gr,this.generateMipmaps=!1;const v=this;"requestVideoFrameCallback"in a&&a.requestVideoFrameCallback(function b(){v.needsUpdate=!0,a.requestVideoFrameCallback(b)})}clone(){return new this.constructor(this.image).copy(this)}update(){const a=this.image;"requestVideoFrameCallback"in a==0&&a.readyState>=a.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}.prototype.isVideoTexture=!0,class MYe extends Cs{constructor(a,l,h){super({width:a,height:l}),this.format=h,this.magFilter=ws,this.minFilter=ws,this.generateMipmaps=!1,this.needsUpdate=!0}}.prototype.isFramebufferTexture=!0;(class Uie extends Cs{constructor(a,l,h,d,f,m,g,y,_,v,b,S){super(null,m,g,y,_,v,d,f,b,S),this.image={width:l,height:h},this.mipmaps=a,this.flipY=!1,this.generateMipmaps=!1}}).prototype.isCompressedTexture=!0;class zie extends Cs{constructor(a,l,h,d,f,m,g,y,_){super(a,l,h,d,f,m,g,y,_),this.needsUpdate=!0}}zie.prototype.isCanvasTexture=!0,new te,new te,new te,new Bs;class tc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(a,l){const h=this.getUtoTmapping(a);return this.getPoint(h,l)}getPoints(a=5){const l=[];for(let h=0;h<=a;h++)l.push(this.getPoint(h/a));return l}getSpacedPoints(a=5){const l=[];for(let h=0;h<=a;h++)l.push(this.getPointAt(h/a));return l}getLength(){const a=this.getLengths();return a[a.length-1]}getLengths(a=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===a+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const l=[];let h,d=this.getPoint(0),f=0;l.push(0);for(let m=1;m<=a;m++)h=this.getPoint(m/a),f+=h.distanceTo(d),l.push(f),d=h;return this.cacheArcLengths=l,l}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(a,l){const h=this.getLengths();let d=0;const f=h.length;let m;m=l||a*h[f-1];let _,g=0,y=f-1;for(;g<=y;)if(d=Math.floor(g+(y-g)/2),_=h[d]-m,_<0)g=d+1;else{if(!(_>0)){y=d;break}y=d-1}if(d=y,h[d]===m)return d/(f-1);const v=h[d];return(d+(m-v)/(h[d+1]-v))/(f-1)}getTangent(a,l){let d=a-1e-4,f=a+1e-4;d<0&&(d=0),f>1&&(f=1);const m=this.getPoint(d),g=this.getPoint(f),y=l||(m.isVector2?new tt:new te);return y.copy(g).sub(m).normalize(),y}getTangentAt(a,l){const h=this.getUtoTmapping(a);return this.getTangent(h,l)}computeFrenetFrames(a,l){const h=new te,d=[],f=[],m=[],g=new te,y=new un;for(let T=0;T<=a;T++)d[T]=this.getTangentAt(T/a,new te);f[0]=new te,m[0]=new te;let _=Number.MAX_VALUE;const v=Math.abs(d[0].x),b=Math.abs(d[0].y),S=Math.abs(d[0].z);v<=_&&(_=v,h.set(1,0,0)),b<=_&&(_=b,h.set(0,1,0)),S<=_&&h.set(0,0,1),g.crossVectors(d[0],h).normalize(),f[0].crossVectors(d[0],g),m[0].crossVectors(d[0],f[0]);for(let T=1;T<=a;T++){if(f[T]=f[T-1].clone(),m[T]=m[T-1].clone(),g.crossVectors(d[T-1],d[T]),g.length()>Number.EPSILON){g.normalize();const x=Math.acos(Io(d[T-1].dot(d[T]),-1,1));f[T].applyMatrix4(y.makeRotationAxis(g,x))}m[T].crossVectors(d[T],f[T])}if(!0===l){let T=Math.acos(Io(f[0].dot(f[a]),-1,1));T/=a,d[0].dot(g.crossVectors(f[0],f[a]))>0&&(T=-T);for(let x=1;x<=a;x++)f[x].applyMatrix4(y.makeRotationAxis(d[x],T*x)),m[x].crossVectors(d[x],f[x])}return{tangents:d,normals:f,binormals:m}}clone(){return(new this.constructor).copy(this)}copy(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}toJSON(){const a={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return a.arcLengthDivisions=this.arcLengthDivisions,a.type=this.type,a}fromJSON(a){return this.arcLengthDivisions=a.arcLengthDivisions,this}}class YA extends tc{constructor(a=0,l=0,h=1,d=1,f=0,m=2*Math.PI,g=!1,y=0){super(),this.type="EllipseCurve",this.aX=a,this.aY=l,this.xRadius=h,this.yRadius=d,this.aStartAngle=f,this.aEndAngle=m,this.aClockwise=g,this.aRotation=y}getPoint(a,l){const h=l||new tt,d=2*Math.PI;let f=this.aEndAngle-this.aStartAngle;const m=Math.abs(f)<Number.EPSILON;for(;f<0;)f+=d;for(;f>d;)f-=d;f<Number.EPSILON&&(f=m?0:d),!0===this.aClockwise&&!m&&(f===d?f=-d:f-=d);const g=this.aStartAngle+a*f;let y=this.aX+this.xRadius*Math.cos(g),_=this.aY+this.yRadius*Math.sin(g);if(0!==this.aRotation){const v=Math.cos(this.aRotation),b=Math.sin(this.aRotation),S=y-this.aX,T=_-this.aY;y=S*v-T*b+this.aX,_=S*b+T*v+this.aY}return h.set(y,_)}copy(a){return super.copy(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}toJSON(){const a=super.toJSON();return a.aX=this.aX,a.aY=this.aY,a.xRadius=this.xRadius,a.yRadius=this.yRadius,a.aStartAngle=this.aStartAngle,a.aEndAngle=this.aEndAngle,a.aClockwise=this.aClockwise,a.aRotation=this.aRotation,a}fromJSON(a){return super.fromJSON(a),this.aX=a.aX,this.aY=a.aY,this.xRadius=a.xRadius,this.yRadius=a.yRadius,this.aStartAngle=a.aStartAngle,this.aEndAngle=a.aEndAngle,this.aClockwise=a.aClockwise,this.aRotation=a.aRotation,this}}YA.prototype.isEllipseCurve=!0;class Hie extends YA{constructor(a,l,h,d,f,m){super(a,l,h,h,d,f,m),this.type="ArcCurve"}}function qV(){let c=0,a=0,l=0,h=0;function d(f,m,g,y){c=f,a=g,l=-3*f+3*m-2*g-y,h=2*f-2*m+g+y}return{initCatmullRom:function(f,m,g,y,_){d(m,g,_*(g-f),_*(y-m))},initNonuniformCatmullRom:function(f,m,g,y,_,v,b){let S=(m-f)/_-(g-f)/(_+v)+(g-m)/v,T=(g-m)/v-(y-m)/(v+b)+(y-g)/b;S*=v,T*=v,d(m,g,S,T)},calc:function(f){const m=f*f;return c+a*f+l*m+h*(m*f)}}}Hie.prototype.isArcCurve=!0;const ZA=new te,$V=new qV,YV=new qV,ZV=new qV;class jie extends tc{constructor(a=[],l=!1,h="centripetal",d=.5){super(),this.type="CatmullRomCurve3",this.points=a,this.closed=l,this.curveType=h,this.tension=d}getPoint(a,l=new te){const h=l,d=this.points,f=d.length,m=(f-(this.closed?0:1))*a;let _,v,g=Math.floor(m),y=m-g;this.closed?g+=g>0?0:(Math.floor(Math.abs(g)/f)+1)*f:0===y&&g===f-1&&(g=f-2,y=1),this.closed||g>0?_=d[(g-1)%f]:(ZA.subVectors(d[0],d[1]).add(d[0]),_=ZA);const b=d[g%f],S=d[(g+1)%f];if(this.closed||g+2<f?v=d[(g+2)%f]:(ZA.subVectors(d[f-1],d[f-2]).add(d[f-1]),v=ZA),"centripetal"===this.curveType||"chordal"===this.curveType){const T="chordal"===this.curveType?.5:.25;let x=Math.pow(_.distanceToSquared(b),T),E=Math.pow(b.distanceToSquared(S),T),I=Math.pow(S.distanceToSquared(v),T);E<1e-4&&(E=1),x<1e-4&&(x=E),I<1e-4&&(I=E),$V.initNonuniformCatmullRom(_.x,b.x,S.x,v.x,x,E,I),YV.initNonuniformCatmullRom(_.y,b.y,S.y,v.y,x,E,I),ZV.initNonuniformCatmullRom(_.z,b.z,S.z,v.z,x,E,I)}else"catmullrom"===this.curveType&&($V.initCatmullRom(_.x,b.x,S.x,v.x,this.tension),YV.initCatmullRom(_.y,b.y,S.y,v.y,this.tension),ZV.initCatmullRom(_.z,b.z,S.z,v.z,this.tension));return h.set($V.calc(y),YV.calc(y),ZV.calc(y)),h}copy(a){super.copy(a),this.points=[];for(let l=0,h=a.points.length;l<h;l++)this.points.push(a.points[l].clone());return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}toJSON(){const a=super.toJSON();a.points=[];for(let l=0,h=this.points.length;l<h;l++)a.points.push(this.points[l].toArray());return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a}fromJSON(a){super.fromJSON(a),this.points=[];for(let l=0,h=a.points.length;l<h;l++){const d=a.points[l];this.points.push((new te).fromArray(d))}return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this}}function Wie(c,a,l,h,d){const f=.5*(h-a),m=.5*(d-l),g=c*c;return(2*l-2*h+f+m)*(c*g)+(-3*l+3*h-2*f-m)*g+f*c+l}function FT(c,a,l,h){return function DYe(c,a){const l=1-c;return l*l*a}(c,a)+function AYe(c,a){return 2*(1-c)*c*a}(c,l)+function IYe(c,a){return c*c*a}(c,h)}function kT(c,a,l,h,d){return function RYe(c,a){const l=1-c;return l*l*l*a}(c,a)+function LYe(c,a){const l=1-c;return 3*l*l*c*a}(c,l)+function PYe(c,a){return 3*(1-c)*c*c*a}(c,h)+function OYe(c,a){return c*c*c*a}(c,d)}jie.prototype.isCatmullRomCurve3=!0;class KV extends tc{constructor(a=new tt,l=new tt,h=new tt,d=new tt){super(),this.type="CubicBezierCurve",this.v0=a,this.v1=l,this.v2=h,this.v3=d}getPoint(a,l=new tt){const h=l,d=this.v0,f=this.v1,m=this.v2,g=this.v3;return h.set(kT(a,d.x,f.x,m.x,g.x),kT(a,d.y,f.y,m.y,g.y)),h}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}KV.prototype.isCubicBezierCurve=!0;class Xie extends tc{constructor(a=new te,l=new te,h=new te,d=new te){super(),this.type="CubicBezierCurve3",this.v0=a,this.v1=l,this.v2=h,this.v3=d}getPoint(a,l=new te){const h=l,d=this.v0,f=this.v1,m=this.v2,g=this.v3;return h.set(kT(a,d.x,f.x,m.x,g.x),kT(a,d.y,f.y,m.y,g.y),kT(a,d.z,f.z,m.z,g.z)),h}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this.v3.copy(a.v3),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a.v3=this.v3.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this.v3.fromArray(a.v3),this}}Xie.prototype.isCubicBezierCurve3=!0;class KA extends tc{constructor(a=new tt,l=new tt){super(),this.type="LineCurve",this.v1=a,this.v2=l}getPoint(a,l=new tt){const h=l;return 1===a?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(a).add(this.v1)),h}getPointAt(a,l){return this.getPoint(a,l)}getTangent(a,l){const h=l||new tt;return h.copy(this.v2).sub(this.v1).normalize(),h}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}KA.prototype.isLineCurve=!0;class JV extends tc{constructor(a=new tt,l=new tt,h=new tt){super(),this.type="QuadraticBezierCurve",this.v0=a,this.v1=l,this.v2=h}getPoint(a,l=new tt){const h=l,d=this.v0,f=this.v1,m=this.v2;return h.set(FT(a,d.x,f.x,m.x),FT(a,d.y,f.y,m.y)),h}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}JV.prototype.isQuadraticBezierCurve=!0;class QV extends tc{constructor(a=new te,l=new te,h=new te){super(),this.type="QuadraticBezierCurve3",this.v0=a,this.v1=l,this.v2=h}getPoint(a,l=new te){const h=l,d=this.v0,f=this.v1,m=this.v2;return h.set(FT(a,d.x,f.x,m.x),FT(a,d.y,f.y,m.y),FT(a,d.z,f.z,m.z)),h}copy(a){return super.copy(a),this.v0.copy(a.v0),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v0=this.v0.toArray(),a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v0.fromArray(a.v0),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}}QV.prototype.isQuadraticBezierCurve3=!0;class eB extends tc{constructor(a=[]){super(),this.type="SplineCurve",this.points=a}getPoint(a,l=new tt){const h=l,d=this.points,f=(d.length-1)*a,m=Math.floor(f),g=f-m,y=d[0===m?m:m-1],_=d[m],v=d[m>d.length-2?d.length-1:m+1],b=d[m>d.length-3?d.length-1:m+2];return h.set(Wie(g,y.x,_.x,v.x,b.x),Wie(g,y.y,_.y,v.y,b.y)),h}copy(a){super.copy(a),this.points=[];for(let l=0,h=a.points.length;l<h;l++)this.points.push(a.points[l].clone());return this}toJSON(){const a=super.toJSON();a.points=[];for(let l=0,h=this.points.length;l<h;l++)a.points.push(this.points[l].toArray());return a}fromJSON(a){super.fromJSON(a),this.points=[];for(let l=0,h=a.points.length;l<h;l++){const d=a.points[l];this.points.push((new tt).fromArray(d))}return this}}eB.prototype.isSplineCurve=!0;var tB=Object.freeze({__proto__:null,ArcCurve:Hie,CatmullRomCurve3:jie,CubicBezierCurve:KV,CubicBezierCurve3:Xie,EllipseCurve:YA,LineCurve:KA,LineCurve3:class NYe extends tc{constructor(a=new te,l=new te){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=a,this.v2=l}getPoint(a,l=new te){const h=l;return 1===a?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(a).add(this.v1)),h}getPointAt(a,l){return this.getPoint(a,l)}copy(a){return super.copy(a),this.v1.copy(a.v1),this.v2.copy(a.v2),this}toJSON(){const a=super.toJSON();return a.v1=this.v1.toArray(),a.v2=this.v2.toArray(),a}fromJSON(a){return super.fromJSON(a),this.v1.fromArray(a.v1),this.v2.fromArray(a.v2),this}},QuadraticBezierCurve:JV,QuadraticBezierCurve3:QV,SplineCurve:eB});class FYe extends tc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(a){this.curves.push(a)}closePath(){const a=this.curves[0].getPoint(0),l=this.curves[this.curves.length-1].getPoint(1);a.equals(l)||this.curves.push(new KA(l,a))}getPoint(a,l){const h=a*this.getLength(),d=this.getCurveLengths();let f=0;for(;f<d.length;){if(d[f]>=h){const m=d[f]-h,g=this.curves[f],y=g.getLength();return g.getPointAt(0===y?0:1-m/y,l)}f++}return null}getLength(){const a=this.getCurveLengths();return a[a.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const a=[];let l=0;for(let h=0,d=this.curves.length;h<d;h++)l+=this.curves[h].getLength(),a.push(l);return this.cacheLengths=a,a}getSpacedPoints(a=40){const l=[];for(let h=0;h<=a;h++)l.push(this.getPoint(h/a));return this.autoClose&&l.push(l[0]),l}getPoints(a=12){const l=[];let h;for(let d=0,f=this.curves;d<f.length;d++){const m=f[d],y=m.getPoints(m&&m.isEllipseCurve?2*a:m&&(m.isLineCurve||m.isLineCurve3)?1:m&&m.isSplineCurve?a*m.points.length:a);for(let _=0;_<y.length;_++){const v=y[_];h&&h.equals(v)||(l.push(v),h=v)}}return this.autoClose&&l.length>1&&!l[l.length-1].equals(l[0])&&l.push(l[0]),l}copy(a){super.copy(a),this.curves=[];for(let l=0,h=a.curves.length;l<h;l++)this.curves.push(a.curves[l].clone());return this.autoClose=a.autoClose,this}toJSON(){const a=super.toJSON();a.autoClose=this.autoClose,a.curves=[];for(let l=0,h=this.curves.length;l<h;l++)a.curves.push(this.curves[l].toJSON());return a}fromJSON(a){super.fromJSON(a),this.autoClose=a.autoClose,this.curves=[];for(let l=0,h=a.curves.length;l<h;l++){const d=a.curves[l];this.curves.push((new tB[d.type]).fromJSON(d))}return this}}class JA extends FYe{constructor(a){super(),this.type="Path",this.currentPoint=new tt,a&&this.setFromPoints(a)}setFromPoints(a){this.moveTo(a[0].x,a[0].y);for(let l=1,h=a.length;l<h;l++)this.lineTo(a[l].x,a[l].y);return this}moveTo(a,l){return this.currentPoint.set(a,l),this}lineTo(a,l){const h=new KA(this.currentPoint.clone(),new tt(a,l));return this.curves.push(h),this.currentPoint.set(a,l),this}quadraticCurveTo(a,l,h,d){const f=new JV(this.currentPoint.clone(),new tt(a,l),new tt(h,d));return this.curves.push(f),this.currentPoint.set(h,d),this}bezierCurveTo(a,l,h,d,f,m){const g=new KV(this.currentPoint.clone(),new tt(a,l),new tt(h,d),new tt(f,m));return this.curves.push(g),this.currentPoint.set(f,m),this}splineThru(a){const l=[this.currentPoint.clone()].concat(a),h=new eB(l);return this.curves.push(h),this.currentPoint.copy(a[a.length-1]),this}arc(a,l,h,d,f,m){return this.absarc(a+this.currentPoint.x,l+this.currentPoint.y,h,d,f,m),this}absarc(a,l,h,d,f,m){return this.absellipse(a,l,h,h,d,f,m),this}ellipse(a,l,h,d,f,m,g,y){return this.absellipse(a+this.currentPoint.x,l+this.currentPoint.y,h,d,f,m,g,y),this}absellipse(a,l,h,d,f,m,g,y){const _=new YA(a,l,h,d,f,m,g,y);if(this.curves.length>0){const b=_.getPoint(0);b.equals(this.currentPoint)||this.lineTo(b.x,b.y)}this.curves.push(_);const v=_.getPoint(1);return this.currentPoint.copy(v),this}copy(a){return super.copy(a),this.currentPoint.copy(a.currentPoint),this}toJSON(){const a=super.toJSON();return a.currentPoint=this.currentPoint.toArray(),a}fromJSON(a){return super.fromJSON(a),this.currentPoint.fromArray(a.currentPoint),this}}class Hu extends JA{constructor(a){super(a),this.uuid=Cl(),this.type="Shape",this.holes=[]}getPointsHoles(a){const l=[];for(let h=0,d=this.holes.length;h<d;h++)l[h]=this.holes[h].getPoints(a);return l}extractPoints(a){return{shape:this.getPoints(a),holes:this.getPointsHoles(a)}}copy(a){super.copy(a),this.holes=[];for(let l=0,h=a.holes.length;l<h;l++)this.holes.push(a.holes[l].clone());return this}toJSON(){const a=super.toJSON();a.uuid=this.uuid,a.holes=[];for(let l=0,h=this.holes.length;l<h;l++)a.holes.push(this.holes[l].toJSON());return a}fromJSON(a){super.fromJSON(a),this.uuid=a.uuid,this.holes=[];for(let l=0,h=a.holes.length;l<h;l++){const d=a.holes[l];this.holes.push((new JA).fromJSON(d))}return this}}function qie(c,a,l,h,d){let f,m;if(d===function QYe(c,a,l,h){let d=0;for(let f=a,m=l-h;f<l;f+=h)d+=(c[m]-c[f])*(c[f+1]+c[m+1]),m=f;return d}(c,a,l,h)>0)for(f=a;f<l;f+=h)m=Zie(f,c[f],c[f+1],m);else for(f=l-h;f>=a;f-=h)m=Zie(f,c[f],c[f+1],m);return m&&QA(m,m.next)&&(UT(m),m=m.next),m}function np(c,a){if(!c)return c;a||(a=c);let h,l=c;do{if(h=!1,l.steiner||!QA(l,l.next)&&0!==is(l.prev,l,l.next))l=l.next;else{if(UT(l),l=a=l.prev,l===l.next)break;h=!0}}while(h||l!==a);return a}function VT(c,a,l,h,d,f,m){if(!c)return;!m&&f&&function qYe(c,a,l,h){let d=c;do{null===d.z&&(d.z=nB(d.x,d.y,a,l,h)),d.prevZ=d.prev,d.nextZ=d.next,d=d.next}while(d!==c);d.prevZ.nextZ=null,d.prevZ=null,function $Ye(c){let a,l,h,d,f,m,g,y,_=1;do{for(l=c,c=null,f=null,m=0;l;){for(m++,h=l,g=0,a=0;a<_&&(g++,h=h.nextZ,h);a++);for(y=_;g>0||y>0&&h;)0!==g&&(0===y||!h||l.z<=h.z)?(d=l,l=l.nextZ,g--):(d=h,h=h.nextZ,y--),f?f.nextZ=d:c=d,d.prevZ=f,f=d;l=h}f.nextZ=null,_*=2}while(m>1)}(d)}(c,h,d,f);let y,_,g=c;for(;c.prev!==c.next;)if(y=c.prev,_=c.next,f?BYe(c,h,d,f):VYe(c))a.push(y.i/l),a.push(c.i/l),a.push(_.i/l),UT(c),c=_.next,g=_.next;else if((c=_)===g){m?1===m?VT(c=UYe(np(c),a,l),a,l,h,d,f,2):2===m&&zYe(c,a,l,h,d,f):VT(np(c),a,l,h,d,f,1);break}}function VYe(c){const a=c.prev,l=c,h=c.next;if(is(a,l,h)>=0)return!1;let d=c.next.next;for(;d!==c.prev;){if(n0(a.x,a.y,l.x,l.y,h.x,h.y,d.x,d.y)&&is(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function BYe(c,a,l,h){const d=c.prev,f=c,m=c.next;if(is(d,f,m)>=0)return!1;const _=d.x>f.x?d.x>m.x?d.x:m.x:f.x>m.x?f.x:m.x,v=d.y>f.y?d.y>m.y?d.y:m.y:f.y>m.y?f.y:m.y,b=nB(d.x<f.x?d.x<m.x?d.x:m.x:f.x<m.x?f.x:m.x,d.y<f.y?d.y<m.y?d.y:m.y:f.y<m.y?f.y:m.y,a,l,h),S=nB(_,v,a,l,h);let T=c.prevZ,x=c.nextZ;for(;T&&T.z>=b&&x&&x.z<=S;){if(T!==c.prev&&T!==c.next&&n0(d.x,d.y,f.x,f.y,m.x,m.y,T.x,T.y)&&is(T.prev,T,T.next)>=0||(T=T.prevZ,x!==c.prev&&x!==c.next&&n0(d.x,d.y,f.x,f.y,m.x,m.y,x.x,x.y)&&is(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;T&&T.z>=b;){if(T!==c.prev&&T!==c.next&&n0(d.x,d.y,f.x,f.y,m.x,m.y,T.x,T.y)&&is(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;x&&x.z<=S;){if(x!==c.prev&&x!==c.next&&n0(d.x,d.y,f.x,f.y,m.x,m.y,x.x,x.y)&&is(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function UYe(c,a,l){let h=c;do{const d=h.prev,f=h.next.next;!QA(d,f)&&$ie(d,h,h.next,f)&&BT(d,f)&&BT(f,d)&&(a.push(d.i/l),a.push(h.i/l),a.push(f.i/l),UT(h),UT(h.next),h=c=f),h=h.next}while(h!==c);return np(h)}function zYe(c,a,l,h,d,f){let m=c;do{let g=m.next.next;for(;g!==m.prev;){if(m.i!==g.i&&ZYe(m,g)){let y=Yie(m,g);return m=np(m,m.next),y=np(y,y.next),VT(m,a,l,h,d,f),void VT(y,a,l,h,d,f)}g=g.next}m=m.next}while(m!==c)}function HYe(c,a){return c.x-a.x}function jYe(c,a){if(a=function WYe(c,a){let l=a;const h=c.x,d=c.y;let m,f=-1/0;do{if(d<=l.y&&d>=l.next.y&&l.next.y!==l.y){const S=l.x+(d-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(S<=h&&S>f){if(f=S,S===h){if(d===l.y)return l;if(d===l.next.y)return l.next}m=l.x<l.next.x?l:l.next}}l=l.next}while(l!==a);if(!m)return null;if(h===f)return m;const g=m,y=m.x,_=m.y;let b,v=1/0;l=m;do{h>=l.x&&l.x>=y&&h!==l.x&&n0(d<_?h:f,d,y,_,d<_?f:h,d,l.x,l.y)&&(b=Math.abs(d-l.y)/(h-l.x),BT(l,c)&&(b<v||b===v&&(l.x>m.x||l.x===m.x&&XYe(m,l)))&&(m=l,v=b)),l=l.next}while(l!==g);return m}(c,a),a){const l=Yie(a,c);np(a,a.next),np(l,l.next)}}function XYe(c,a){return is(c.prev,c,a.prev)<0&&is(a.next,c,c.next)<0}function nB(c,a,l,h,d){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=32767*(c-l)*d)|c<<8))|c<<4))|c<<2))|c<<1))|(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-h)*d)|a<<8))|a<<4))|a<<2))|a<<1))<<1}function YYe(c){let a=c,l=c;do{(a.x<l.x||a.x===l.x&&a.y<l.y)&&(l=a),a=a.next}while(a!==c);return l}function n0(c,a,l,h,d,f,m,g){return(d-m)*(a-g)-(c-m)*(f-g)>=0&&(c-m)*(h-g)-(l-m)*(a-g)>=0&&(l-m)*(f-g)-(d-m)*(h-g)>=0}function ZYe(c,a){return c.next.i!==a.i&&c.prev.i!==a.i&&!function KYe(c,a){let l=c;do{if(l.i!==c.i&&l.next.i!==c.i&&l.i!==a.i&&l.next.i!==a.i&&$ie(l,l.next,c,a))return!0;l=l.next}while(l!==c);return!1}(c,a)&&(BT(c,a)&&BT(a,c)&&function JYe(c,a){let l=c,h=!1;const d=(c.x+a.x)/2,f=(c.y+a.y)/2;do{l.y>f!=l.next.y>f&&l.next.y!==l.y&&d<(l.next.x-l.x)*(f-l.y)/(l.next.y-l.y)+l.x&&(h=!h),l=l.next}while(l!==c);return h}(c,a)&&(is(c.prev,c,a.prev)||is(c,a.prev,a))||QA(c,a)&&is(c.prev,c,c.next)>0&&is(a.prev,a,a.next)>0)}function is(c,a,l){return(a.y-c.y)*(l.x-a.x)-(a.x-c.x)*(l.y-a.y)}function QA(c,a){return c.x===a.x&&c.y===a.y}function $ie(c,a,l,h){const d=tI(is(c,a,l)),f=tI(is(c,a,h)),m=tI(is(l,h,c)),g=tI(is(l,h,a));return!!(d!==f&&m!==g||0===d&&eI(c,l,a)||0===f&&eI(c,h,a)||0===m&&eI(l,c,h)||0===g&&eI(l,a,h))}function eI(c,a,l){return a.x<=Math.max(c.x,l.x)&&a.x>=Math.min(c.x,l.x)&&a.y<=Math.max(c.y,l.y)&&a.y>=Math.min(c.y,l.y)}function tI(c){return c>0?1:c<0?-1:0}function BT(c,a){return is(c.prev,c,c.next)<0?is(c,a,c.next)>=0&&is(c,c.prev,a)>=0:is(c,a,c.prev)<0||is(c,c.next,a)<0}function Yie(c,a){const l=new iB(c.i,c.x,c.y),h=new iB(a.i,a.x,a.y),d=c.next,f=a.prev;return c.next=a,a.prev=c,l.next=d,d.prev=l,h.next=l,l.prev=h,f.next=h,h.prev=f,h}function Zie(c,a,l,h){const d=new iB(c,a,l);return h?(d.next=h.next,d.prev=h,h.next.prev=d,h.next=d):(d.prev=d,d.next=d),d}function UT(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function iB(c,a,l){this.i=c,this.x=a,this.y=l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class cd{static area(a){const l=a.length;let h=0;for(let d=l-1,f=0;f<l;d=f++)h+=a[d].x*a[f].y-a[f].x*a[d].y;return.5*h}static isClockWise(a){return cd.area(a)<0}static triangulateShape(a,l){const h=[],d=[],f=[];Kie(a),Jie(h,a);let m=a.length;l.forEach(Kie);for(let y=0;y<l.length;y++)d.push(m),m+=l[y].length,Jie(h,l[y]);const g=function(c,a,l=2){const h=a&&a.length,d=h?a[0]*l:c.length;let f=qie(c,0,d,l,!0);const m=[];if(!f||f.next===f.prev)return m;let g,y,_,v,b,S,T;if(h&&(f=function GYe(c,a,l,h){const d=[];let f,m,g,y,_;for(f=0,m=a.length;f<m;f++)g=a[f]*h,y=f<m-1?a[f+1]*h:c.length,_=qie(c,g,y,h,!1),_===_.next&&(_.steiner=!0),d.push(YYe(_));for(d.sort(HYe),f=0;f<d.length;f++)jYe(d[f],l),l=np(l,l.next);return l}(c,a,f,l)),c.length>80*l){g=_=c[0],y=v=c[1];for(let x=l;x<d;x+=l)b=c[x],S=c[x+1],b<g&&(g=b),S<y&&(y=S),b>_&&(_=b),S>v&&(v=S);T=Math.max(_-g,v-y),T=0!==T?1/T:0}return VT(f,m,l,g,y,T),m}(h,d);for(let y=0;y<g.length;y+=3)f.push(g.slice(y,y+3));return f}}function Kie(c){const a=c.length;a>2&&c[a-1].equals(c[0])&&c.pop()}function Jie(c,a){for(let l=0;l<a.length;l++)c.push(a[l].x),c.push(a[l].y)}class ud extends Nn{constructor(a=new Hu([new tt(.5,.5),new tt(-.5,.5),new tt(-.5,-.5),new tt(.5,-.5)]),l={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:a,options:l},a=Array.isArray(a)?a:[a];const h=this,d=[],f=[];for(let g=0,y=a.length;g<y;g++)m(a[g]);function m(g){const y=[],_=void 0!==l.curveSegments?l.curveSegments:12,v=void 0!==l.steps?l.steps:1;let b=void 0!==l.depth?l.depth:1,S=void 0===l.bevelEnabled||l.bevelEnabled,T=void 0!==l.bevelThickness?l.bevelThickness:.2,x=void 0!==l.bevelSize?l.bevelSize:T-.1,E=void 0!==l.bevelOffset?l.bevelOffset:0,I=void 0!==l.bevelSegments?l.bevelSegments:3;const M=l.extrudePath,D=void 0!==l.UVGenerator?l.UVGenerator:eZe;void 0!==l.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),b=l.amount);let L,F,B,G,$,P=!1;M&&(L=M.getSpacedPoints(v),P=!0,S=!1,F=M.computeFrenetFrames(v,!1),B=new te,G=new te,$=new te),S||(I=0,T=0,x=0,E=0);const se=g.extractPoints(_);let ie=se.shape;const j=se.holes;if(!cd.isClockWise(ie)){ie=ie.reverse();for(let et=0,Et=j.length;et<Et;et++){const pt=j[et];cd.isClockWise(pt)&&(j[et]=pt.reverse())}}const ae=cd.triangulateShape(ie,j),ue=ie;for(let et=0,Et=j.length;et<Et;et++)ie=ie.concat(j[et]);function ge(et,Et,pt){return Et||console.error("THREE.ExtrudeGeometry: vec does not exist"),Et.clone().multiplyScalar(pt).add(et)}const K=ie.length,le=ae.length;function ye(et,Et,pt){let Rt,Mt,sn;const ln=et.x-Et.x,ct=et.y-Et.y,ei=pt.x-et.x,mi=pt.y-et.y,fe=ln*ln+ct*ct;if(Math.abs(ln*mi-ct*ei)>Number.EPSILON){const $e=Math.sqrt(fe),mt=Math.sqrt(ei*ei+mi*mi),Qt=Et.x-ct/$e,Je=Et.y+ln/$e,Ve=((pt.x-mi/mt-Qt)*mi-(pt.y+ei/mt-Je)*ei)/(ln*mi-ct*ei);Rt=Qt+ln*Ve-et.x,Mt=Je+ct*Ve-et.y;const ut=Rt*Rt+Mt*Mt;if(ut<=2)return new tt(Rt,Mt);sn=Math.sqrt(ut/2)}else{let $e=!1;ln>Number.EPSILON?ei>Number.EPSILON&&($e=!0):ln<-Number.EPSILON?ei<-Number.EPSILON&&($e=!0):Math.sign(ct)===Math.sign(mi)&&($e=!0),$e?(Rt=-ct,Mt=ln,sn=Math.sqrt(fe)):(Rt=ln,Mt=ct,sn=Math.sqrt(fe/2))}return new tt(Rt/sn,Mt/sn)}const ke=[];for(let et=0,Et=ue.length,pt=Et-1,Rt=et+1;et<Et;et++,pt++,Rt++)pt===Et&&(pt=0),Rt===Et&&(Rt=0),ke[et]=ye(ue[et],ue[pt],ue[Rt]);const _e=[];let Ne,me=ke.concat();for(let et=0,Et=j.length;et<Et;et++){const pt=j[et];Ne=[];for(let Rt=0,Mt=pt.length,sn=Mt-1,ln=Rt+1;Rt<Mt;Rt++,sn++,ln++)sn===Mt&&(sn=0),ln===Mt&&(ln=0),Ne[Rt]=ye(pt[Rt],pt[sn],pt[ln]);_e.push(Ne),me=me.concat(Ne)}for(let et=0;et<I;et++){const Et=et/I,pt=T*Math.cos(Et*Math.PI/2),Rt=x*Math.sin(Et*Math.PI/2)+E;for(let Mt=0,sn=ue.length;Mt<sn;Mt++){const ln=ge(ue[Mt],ke[Mt],Rt);wt(ln.x,ln.y,-pt)}for(let Mt=0,sn=j.length;Mt<sn;Mt++){const ln=j[Mt];Ne=_e[Mt];for(let ct=0,ei=ln.length;ct<ei;ct++){const mi=ge(ln[ct],Ne[ct],Rt);wt(mi.x,mi.y,-pt)}}}const Xe=x+E;for(let et=0;et<K;et++){const Et=S?ge(ie[et],me[et],Xe):ie[et];P?(G.copy(F.normals[0]).multiplyScalar(Et.x),B.copy(F.binormals[0]).multiplyScalar(Et.y),$.copy(L[0]).add(G).add(B),wt($.x,$.y,$.z)):wt(Et.x,Et.y,0)}for(let et=1;et<=v;et++)for(let Et=0;Et<K;Et++){const pt=S?ge(ie[Et],me[Et],Xe):ie[Et];P?(G.copy(F.normals[et]).multiplyScalar(pt.x),B.copy(F.binormals[et]).multiplyScalar(pt.y),$.copy(L[et]).add(G).add(B),wt($.x,$.y,$.z)):wt(pt.x,pt.y,b/v*et)}for(let et=I-1;et>=0;et--){const Et=et/I,pt=T*Math.cos(Et*Math.PI/2),Rt=x*Math.sin(Et*Math.PI/2)+E;for(let Mt=0,sn=ue.length;Mt<sn;Mt++){const ln=ge(ue[Mt],ke[Mt],Rt);wt(ln.x,ln.y,b+pt)}for(let Mt=0,sn=j.length;Mt<sn;Mt++){const ln=j[Mt];Ne=_e[Mt];for(let ct=0,ei=ln.length;ct<ei;ct++){const mi=ge(ln[ct],Ne[ct],Rt);P?wt(mi.x,mi.y+L[v-1].y,L[v-1].x+pt):wt(mi.x,mi.y,b+pt)}}}function Tn(et,Et){let pt=et.length;for(;--pt>=0;){const Rt=pt;let Mt=pt-1;Mt<0&&(Mt=et.length-1);for(let sn=0,ln=v+2*I;sn<ln;sn++){const ct=K*sn,ei=K*(sn+1);Pe(Et+Rt+ct,Et+Mt+ct,Et+Mt+ei,Et+Rt+ei)}}}function wt(et,Et,pt){y.push(et),y.push(Et),y.push(pt)}function Bt(et,Et,pt){_n(et),_n(Et),_n(pt);const Rt=d.length/3,Mt=D.generateTopUV(h,d,Rt-3,Rt-2,Rt-1);on(Mt[0]),on(Mt[1]),on(Mt[2])}function Pe(et,Et,pt,Rt){_n(et),_n(Et),_n(Rt),_n(Et),_n(pt),_n(Rt);const Mt=d.length/3,sn=D.generateSideWallUV(h,d,Mt-6,Mt-3,Mt-2,Mt-1);on(sn[0]),on(sn[1]),on(sn[3]),on(sn[1]),on(sn[2]),on(sn[3])}function _n(et){d.push(y[3*et+0]),d.push(y[3*et+1]),d.push(y[3*et+2])}function on(et){f.push(et.x),f.push(et.y)}(function qe(){const et=d.length/3;if(S){let Et=0,pt=K*Et;for(let Rt=0;Rt<le;Rt++){const Mt=ae[Rt];Bt(Mt[2]+pt,Mt[1]+pt,Mt[0]+pt)}Et=v+2*I,pt=K*Et;for(let Rt=0;Rt<le;Rt++){const Mt=ae[Rt];Bt(Mt[0]+pt,Mt[1]+pt,Mt[2]+pt)}}else{for(let Et=0;Et<le;Et++){const pt=ae[Et];Bt(pt[2],pt[1],pt[0])}for(let Et=0;Et<le;Et++){const pt=ae[Et];Bt(pt[0]+K*v,pt[1]+K*v,pt[2]+K*v)}}h.addGroup(et,d.length/3-et,0)})(),function Ae(){const et=d.length/3;let Et=0;Tn(ue,Et),Et+=ue.length;for(let pt=0,Rt=j.length;pt<Rt;pt++){const Mt=j[pt];Tn(Mt,Et),Et+=Mt.length}h.addGroup(et,d.length/3-et,1)}()}this.setAttribute("position",new hn(d,3)),this.setAttribute("uv",new hn(f,2)),this.computeVertexNormals()}toJSON(){const a=super.toJSON();return function tZe(c,a,l){if(l.shapes=[],Array.isArray(c))for(let h=0,d=c.length;h<d;h++)l.shapes.push(c[h].uuid);else l.shapes.push(c.uuid);return void 0!==a.extrudePath&&(l.options.extrudePath=a.extrudePath.toJSON()),l}(this.parameters.shapes,this.parameters.options,a)}static fromJSON(a,l){const h=[];for(let f=0,m=a.shapes.length;f<m;f++)h.push(l[a.shapes[f]]);const d=a.options.extrudePath;return void 0!==d&&(a.options.extrudePath=(new tB[d.type]).fromJSON(d)),new ud(h,a.options)}}const eZe={generateTopUV:function(c,a,l,h,d){const g=a[3*h],y=a[3*h+1],_=a[3*d],v=a[3*d+1];return[new tt(a[3*l],a[3*l+1]),new tt(g,y),new tt(_,v)]},generateSideWallUV:function(c,a,l,h,d,f){const m=a[3*l],g=a[3*l+1],y=a[3*l+2],_=a[3*h],v=a[3*h+1],b=a[3*h+2],S=a[3*d],T=a[3*d+1],x=a[3*d+2],E=a[3*f],I=a[3*f+1],M=a[3*f+2];return Math.abs(g-v)<Math.abs(m-_)?[new tt(m,1-y),new tt(_,1-b),new tt(S,1-x),new tt(E,1-M)]:[new tt(g,1-y),new tt(v,1-b),new tt(T,1-x),new tt(I,1-M)]}};class GT extends Nn{constructor(a=new Hu([new tt(0,.5),new tt(-.5,-.5),new tt(.5,-.5)]),l=12){super(),this.type="ShapeGeometry",this.parameters={shapes:a,curveSegments:l};const h=[],d=[],f=[],m=[];let g=0,y=0;if(!1===Array.isArray(a))_(a);else for(let v=0;v<a.length;v++)_(a[v]),this.addGroup(g,y,v),g+=y,y=0;function _(v){const b=d.length/3,S=v.extractPoints(l);let T=S.shape;const x=S.holes;!1===cd.isClockWise(T)&&(T=T.reverse());for(let I=0,M=x.length;I<M;I++){const D=x[I];!0===cd.isClockWise(D)&&(x[I]=D.reverse())}const E=cd.triangulateShape(T,x);for(let I=0,M=x.length;I<M;I++)T=T.concat(x[I]);for(let I=0,M=T.length;I<M;I++){const D=T[I];d.push(D.x,D.y,0),f.push(0,0,1),m.push(D.x,D.y)}for(let I=0,M=E.length;I<M;I++){const D=E[I];h.push(D[0]+b,D[1]+b,D[2]+b),y+=3}}this.setIndex(h),this.setAttribute("position",new hn(d,3)),this.setAttribute("normal",new hn(f,3)),this.setAttribute("uv",new hn(m,2))}toJSON(){const a=super.toJSON();return function nZe(c,a){if(a.shapes=[],Array.isArray(c))for(let l=0,h=c.length;l<h;l++)a.shapes.push(c[l].uuid);else a.shapes.push(c.uuid);return a}(this.parameters.shapes,a)}static fromJSON(a,l){const h=[];for(let d=0,f=a.shapes.length;d<f;d++)h.push(l[a.shapes[d]]);return new GT(h,a.curveSegments)}}(class nre extends Us{constructor(a){super(),this.type="ShadowMaterial",this.color=new Pt(0),this.transparent=!0,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this}}).prototype.isShadowMaterial=!0;class r0 extends Us{constructor(a){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Pt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.defines={STANDARD:""},this.color.copy(a.color),this.roughness=a.roughness,this.metalness=a.metalness,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.roughnessMap=a.roughnessMap,this.metalnessMap=a.metalnessMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.envMapIntensity=a.envMapIntensity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this}}r0.prototype.isMeshStandardMaterial=!0;class ip extends r0{constructor(a){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new tt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Io(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(l){this.ior=(1+.4*l)/(1-.4*l)}}),this.sheenColor=new Pt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Pt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Pt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(a)}get sheen(){return this._sheen}set sheen(a){this._sheen>0!=a>0&&this.version++,this._sheen=a}get clearcoat(){return this._clearcoat}set clearcoat(a){this._clearcoat>0!=a>0&&this.version++,this._clearcoat=a}get transmission(){return this._transmission}set transmission(a){this._transmission>0!=a>0&&this.version++,this._transmission=a}copy(a){return super.copy(a),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=a.clearcoat,this.clearcoatMap=a.clearcoatMap,this.clearcoatRoughness=a.clearcoatRoughness,this.clearcoatRoughnessMap=a.clearcoatRoughnessMap,this.clearcoatNormalMap=a.clearcoatNormalMap,this.clearcoatNormalScale.copy(a.clearcoatNormalScale),this.ior=a.ior,this.sheen=a.sheen,this.sheenColor.copy(a.sheenColor),this.sheenColorMap=a.sheenColorMap,this.sheenRoughness=a.sheenRoughness,this.sheenRoughnessMap=a.sheenRoughnessMap,this.transmission=a.transmission,this.transmissionMap=a.transmissionMap,this.thickness=a.thickness,this.thicknessMap=a.thicknessMap,this.attenuationDistance=a.attenuationDistance,this.attenuationColor.copy(a.attenuationColor),this.specularIntensity=a.specularIntensity,this.specularIntensityMap=a.specularIntensityMap,this.specularColor.copy(a.specularColor),this.specularColorMap=a.specularColorMap,this}}ip.prototype.isMeshPhysicalMaterial=!0;class rB extends Us{constructor(a){super(),this.type="MeshPhongMaterial",this.color=new Pt(16777215),this.specular=new Pt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.specular.copy(a.specular),this.shininess=a.shininess,this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this.flatShading=a.flatShading,this}}rB.prototype.isMeshPhongMaterial=!0;(class ire extends Us{constructor(a){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Pt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.gradientMap=a.gradientMap,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this}}).prototype.isMeshToonMaterial=!0;(class rre extends Us{constructor(a){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.flatShading=a.flatShading,this}}).prototype.isMeshNormalMaterial=!0;(class sre extends Us{constructor(a){super(),this.type="MeshLambertMaterial",this.color=new Pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(a)}copy(a){return super.copy(a),this.color.copy(a.color),this.map=a.map,this.lightMap=a.lightMap,this.lightMapIntensity=a.lightMapIntensity,this.aoMap=a.aoMap,this.aoMapIntensity=a.aoMapIntensity,this.emissive.copy(a.emissive),this.emissiveMap=a.emissiveMap,this.emissiveIntensity=a.emissiveIntensity,this.specularMap=a.specularMap,this.alphaMap=a.alphaMap,this.envMap=a.envMap,this.combine=a.combine,this.reflectivity=a.reflectivity,this.refractionRatio=a.refractionRatio,this.wireframe=a.wireframe,this.wireframeLinewidth=a.wireframeLinewidth,this.wireframeLinecap=a.wireframeLinecap,this.wireframeLinejoin=a.wireframeLinejoin,this}}).prototype.isMeshLambertMaterial=!0;(class ore extends Us{constructor(a){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Pt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(a)}copy(a){return super.copy(a),this.defines={MATCAP:""},this.color.copy(a.color),this.matcap=a.matcap,this.map=a.map,this.bumpMap=a.bumpMap,this.bumpScale=a.bumpScale,this.normalMap=a.normalMap,this.normalMapType=a.normalMapType,this.normalScale.copy(a.normalScale),this.displacementMap=a.displacementMap,this.displacementScale=a.displacementScale,this.displacementBias=a.displacementBias,this.alphaMap=a.alphaMap,this.flatShading=a.flatShading,this}}).prototype.isMeshMatcapMaterial=!0;(class are extends go{constructor(a){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(a)}copy(a){return super.copy(a),this.scale=a.scale,this.dashSize=a.dashSize,this.gapSize=a.gapSize,this}}).prototype.isLineDashedMaterial=!0;const Hr={arraySlice:function(c,a,l){return Hr.isTypedArray(c)?new c.constructor(c.subarray(a,void 0!==l?l:c.length)):c.slice(a,l)},convertArray:function(c,a,l){return!c||!l&&c.constructor===a?c:"number"==typeof a.BYTES_PER_ELEMENT?new a(c):Array.prototype.slice.call(c)},isTypedArray:function(c){return ArrayBuffer.isView(c)&&!(c instanceof DataView)},getKeyframeOrder:function(c){const l=c.length,h=new Array(l);for(let d=0;d!==l;++d)h[d]=d;return h.sort(function a(d,f){return c[d]-c[f]}),h},sortedArray:function(c,a,l){const h=c.length,d=new c.constructor(h);for(let f=0,m=0;m!==h;++f){const g=l[f]*a;for(let y=0;y!==a;++y)d[m++]=c[g+y]}return d},flattenJSON:function(c,a,l,h){let d=1,f=c[0];for(;void 0!==f&&void 0===f[h];)f=c[d++];if(void 0===f)return;let m=f[h];if(void 0!==m)if(Array.isArray(m))do{m=f[h],void 0!==m&&(a.push(f.time),l.push.apply(l,m)),f=c[d++]}while(void 0!==f);else if(void 0!==m.toArray)do{m=f[h],void 0!==m&&(a.push(f.time),m.toArray(l,l.length)),f=c[d++]}while(void 0!==f);else do{m=f[h],void 0!==m&&(a.push(f.time),l.push(m)),f=c[d++]}while(void 0!==f)},subclip:function(c,a,l,h,d=30){const f=c.clone();f.name=a;const m=[];for(let y=0;y<f.tracks.length;++y){const _=f.tracks[y],v=_.getValueSize(),b=[],S=[];for(let T=0;T<_.times.length;++T){const x=_.times[T]*d;if(!(x<l||x>=h)){b.push(_.times[T]);for(let E=0;E<v;++E)S.push(_.values[T*v+E])}}0!==b.length&&(_.times=Hr.convertArray(b,_.times.constructor),_.values=Hr.convertArray(S,_.values.constructor),m.push(_))}f.tracks=m;let g=1/0;for(let y=0;y<f.tracks.length;++y)g>f.tracks[y].times[0]&&(g=f.tracks[y].times[0]);for(let y=0;y<f.tracks.length;++y)f.tracks[y].shift(-1*g);return f.resetDuration(),f},makeClipAdditive:function(c,a=0,l=c,h=30){h<=0&&(h=30);const d=l.tracks.length,f=a/h;for(let m=0;m<d;++m){const g=l.tracks[m],y=g.ValueTypeName;if("bool"===y||"string"===y)continue;const _=c.tracks.find(function(M){return M.name===g.name&&M.ValueTypeName===y});if(void 0===_)continue;let v=0;const b=g.getValueSize();g.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=b/3);let S=0;const T=_.getValueSize();_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(S=T/3);const x=g.times.length-1;let E;if(f<=g.times[0])E=Hr.arraySlice(g.values,v,b-v);else if(f>=g.times[x]){const M=x*b+v;E=Hr.arraySlice(g.values,M,M+b-v)}else{const M=g.createInterpolant(),D=v,L=b-v;M.evaluate(f),E=Hr.arraySlice(M.resultBuffer,D,L)}"quaternion"===y&&(new Js).fromArray(E).normalize().conjugate().toArray(E);const I=_.times.length;for(let M=0;M<I;++M){const D=M*T+S;if("quaternion"===y)Js.multiplyQuaternionsFlat(_.values,D,E,0,_.values,D);else{const L=T-2*S;for(let P=0;P<L;++P)_.values[D+P]-=E[P]}}}return c.blendMode=2501,c}};class hd{constructor(a,l,h,d){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0!==d?d:new l.constructor(h),this.sampleValues=l,this.valueSize=h,this.settings=null,this.DefaultSettings_={}}evaluate(a){const l=this.parameterPositions;let h=this._cachedIndex,d=l[h],f=l[h-1];e:{t:{let m;n:{i:if(!(a<d)){for(let g=h+2;;){if(void 0===d){if(a<f)break i;return h=l.length,this._cachedIndex=h,this.afterEnd_(h-1,a,f)}if(h===g)break;if(f=d,d=l[++h],a<d)break t}m=l.length;break n}if(a>=f)break e;{const g=l[1];a<g&&(h=2,f=g);for(let y=h-2;;){if(void 0===f)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(h===y)break;if(d=f,f=l[--h-1],a>=f)break t}m=h,h=0}}for(;h<m;){const g=h+m>>>1;a<l[g]?m=g:h=g+1}if(d=l[h],f=l[h-1],void 0===f)return this._cachedIndex=0,this.beforeStart_(0,a,d);if(void 0===d)return h=l.length,this._cachedIndex=h,this.afterEnd_(h-1,f,a)}this._cachedIndex=h,this.intervalChanged_(h,f,d)}return this.interpolate_(h,f,a,d)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(a){const l=this.resultBuffer,h=this.sampleValues,d=this.valueSize,f=a*d;for(let m=0;m!==d;++m)l[m]=h[f+m];return l}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}hd.prototype.beforeStart_=hd.prototype.copySampleValue_,hd.prototype.afterEnd_=hd.prototype.copySampleValue_;class rZe extends hd{constructor(a,l,h,d){super(a,l,h,d),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ev,endingEnd:Ev}}intervalChanged_(a,l,h){const d=this.parameterPositions;let f=a-2,m=a+1,g=d[f],y=d[m];if(void 0===g)switch(this.getSettings_().endingStart){case Mv:f=a,g=2*l-h;break;case 2402:f=d.length-2,g=l+d[f]-d[f+1];break;default:f=a,g=h}if(void 0===y)switch(this.getSettings_().endingEnd){case Mv:m=a,y=2*h-l;break;case 2402:m=1,y=h+d[1]-d[0];break;default:m=a-1,y=l}const _=.5*(h-l),v=this.valueSize;this._weightPrev=_/(l-g),this._weightNext=_/(y-h),this._offsetPrev=f*v,this._offsetNext=m*v}interpolate_(a,l,h,d){const f=this.resultBuffer,m=this.sampleValues,g=this.valueSize,y=a*g,_=y-g,v=this._offsetPrev,b=this._offsetNext,S=this._weightPrev,T=this._weightNext,x=(h-l)/(d-l),E=x*x,I=E*x,M=-S*I+2*S*E-S*x,D=(1+S)*I+(-1.5-2*S)*E+(-.5+S)*x+1,L=(-1-T)*I+(1.5+T)*E+.5*x,P=T*I-T*E;for(let F=0;F!==g;++F)f[F]=M*m[v+F]+D*m[_+F]+L*m[y+F]+P*m[b+F];return f}}class lre extends hd{constructor(a,l,h,d){super(a,l,h,d)}interpolate_(a,l,h,d){const f=this.resultBuffer,m=this.sampleValues,g=this.valueSize,y=a*g,_=y-g,v=(h-l)/(d-l),b=1-v;for(let S=0;S!==g;++S)f[S]=m[_+S]*b+m[y+S]*v;return f}}class sZe extends hd{constructor(a,l,h,d){super(a,l,h,d)}interpolate_(a){return this.copySampleValue_(a-1)}}class ju{constructor(a,l,h,d){if(void 0===a)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===l||0===l.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=Hr.convertArray(l,this.TimeBufferType),this.values=Hr.convertArray(h,this.ValueBufferType),this.setInterpolation(d||this.DefaultInterpolation)}static toJSON(a){const l=a.constructor;let h;if(l.toJSON!==this.toJSON)h=l.toJSON(a);else{h={name:a.name,times:Hr.convertArray(a.times,Array),values:Hr.convertArray(a.values,Array)};const d=a.getInterpolation();d!==a.DefaultInterpolation&&(h.interpolation=d)}return h.type=a.ValueTypeName,h}InterpolantFactoryMethodDiscrete(a){return new sZe(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodLinear(a){return new lre(this.times,this.values,this.getValueSize(),a)}InterpolantFactoryMethodSmooth(a){return new rZe(this.times,this.values,this.getValueSize(),a)}setInterpolation(a){let l;switch(a){case mT:l=this.InterpolantFactoryMethodDiscrete;break;case xv:l=this.InterpolantFactoryMethodLinear;break;case 2302:l=this.InterpolantFactoryMethodSmooth}if(void 0===l){const h="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(a===this.DefaultInterpolation)throw new Error(h);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",h),this}return this.createInterpolant=l,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return mT;case this.InterpolantFactoryMethodLinear:return xv;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(a){if(0!==a){const l=this.times;for(let h=0,d=l.length;h!==d;++h)l[h]+=a}return this}scale(a){if(1!==a){const l=this.times;for(let h=0,d=l.length;h!==d;++h)l[h]*=a}return this}trim(a,l){const h=this.times,d=h.length;let f=0,m=d-1;for(;f!==d&&h[f]<a;)++f;for(;-1!==m&&h[m]>l;)--m;if(++m,0!==f||m!==d){f>=m&&(m=Math.max(m,1),f=m-1);const g=this.getValueSize();this.times=Hr.arraySlice(h,f,m),this.values=Hr.arraySlice(this.values,f*g,m*g)}return this}validate(){let a=!0;const l=this.getValueSize();l-Math.floor(l)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),a=!1);const h=this.times,d=this.values,f=h.length;0===f&&(console.error("THREE.KeyframeTrack: Track is empty.",this),a=!1);let m=null;for(let g=0;g!==f;g++){const y=h[g];if("number"==typeof y&&isNaN(y)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,g,y),a=!1;break}if(null!==m&&m>y){console.error("THREE.KeyframeTrack: Out of order keys.",this,g,y,m),a=!1;break}m=y}if(void 0!==d&&Hr.isTypedArray(d))for(let g=0,y=d.length;g!==y;++g){const _=d[g];if(isNaN(_)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,_),a=!1;break}}return a}optimize(){const a=Hr.arraySlice(this.times),l=Hr.arraySlice(this.values),h=this.getValueSize(),d=2302===this.getInterpolation(),f=a.length-1;let m=1;for(let g=1;g<f;++g){let y=!1;const _=a[g];if(_!==a[g+1]&&(1!==g||_!==a[0]))if(d)y=!0;else{const b=g*h,S=b-h,T=b+h;for(let x=0;x!==h;++x){const E=l[b+x];if(E!==l[S+x]||E!==l[T+x]){y=!0;break}}}if(y){if(g!==m){a[m]=a[g];const b=g*h,S=m*h;for(let T=0;T!==h;++T)l[S+T]=l[b+T]}++m}}if(f>0){a[m]=a[f];for(let g=f*h,y=m*h,_=0;_!==h;++_)l[y+_]=l[g+_];++m}return m!==a.length?(this.times=Hr.arraySlice(a,0,m),this.values=Hr.arraySlice(l,0,m*h)):(this.times=a,this.values=l),this}clone(){const a=Hr.arraySlice(this.times,0),l=Hr.arraySlice(this.values,0),d=new(0,this.constructor)(this.name,a,l);return d.createInterpolant=this.createInterpolant,d}}ju.prototype.TimeBufferType=Float32Array,ju.prototype.ValueBufferType=Float32Array,ju.prototype.DefaultInterpolation=xv;class s0 extends ju{}s0.prototype.ValueTypeName="bool",s0.prototype.ValueBufferType=Array,s0.prototype.DefaultInterpolation=mT,s0.prototype.InterpolantFactoryMethodLinear=void 0,s0.prototype.InterpolantFactoryMethodSmooth=void 0;class cre extends ju{}cre.prototype.ValueTypeName="color";class jT extends ju{}jT.prototype.ValueTypeName="number";class oZe extends hd{constructor(a,l,h,d){super(a,l,h,d)}interpolate_(a,l,h,d){const f=this.resultBuffer,m=this.sampleValues,g=this.valueSize,y=(h-l)/(d-l);let _=a*g;for(let v=_+g;_!==v;_+=4)Js.slerpFlat(f,0,m,_-g,m,_,y);return f}}class og extends ju{InterpolantFactoryMethodLinear(a){return new oZe(this.times,this.values,this.getValueSize(),a)}}og.prototype.ValueTypeName="quaternion",og.prototype.DefaultInterpolation=xv,og.prototype.InterpolantFactoryMethodSmooth=void 0;class o0 extends ju{}o0.prototype.ValueTypeName="string",o0.prototype.ValueBufferType=Array,o0.prototype.DefaultInterpolation=mT,o0.prototype.InterpolantFactoryMethodLinear=void 0,o0.prototype.InterpolantFactoryMethodSmooth=void 0;class WT extends ju{}WT.prototype.ValueTypeName="vector";class XT{constructor(a,l=-1,h,d=2500){this.name=a,this.tracks=h,this.duration=l,this.blendMode=d,this.uuid=Cl(),this.duration<0&&this.resetDuration()}static parse(a){const l=[],h=a.tracks,d=1/(a.fps||1);for(let m=0,g=h.length;m!==g;++m)l.push(lZe(h[m]).scale(d));const f=new this(a.name,a.duration,l,a.blendMode);return f.uuid=a.uuid,f}static toJSON(a){const l=[],h=a.tracks,d={name:a.name,duration:a.duration,tracks:l,uuid:a.uuid,blendMode:a.blendMode};for(let f=0,m=h.length;f!==m;++f)l.push(ju.toJSON(h[f]));return d}static CreateFromMorphTargetSequence(a,l,h,d){const f=l.length,m=[];for(let g=0;g<f;g++){let y=[],_=[];y.push((g+f-1)%f,g,(g+1)%f),_.push(0,1,0);const v=Hr.getKeyframeOrder(y);y=Hr.sortedArray(y,1,v),_=Hr.sortedArray(_,1,v),!d&&0===y[0]&&(y.push(f),_.push(_[0])),m.push(new jT(".morphTargetInfluences["+l[g].name+"]",y,_).scale(1/h))}return new this(a,-1,m)}static findByName(a,l){let h=a;if(!Array.isArray(a)){const d=a;h=d.geometry&&d.geometry.animations||d.animations}for(let d=0;d<h.length;d++)if(h[d].name===l)return h[d];return null}static CreateClipsFromMorphTargetSequences(a,l,h){const d={},f=/^([\w-]*?)([\d]+)$/;for(let g=0,y=a.length;g<y;g++){const _=a[g],v=_.name.match(f);if(v&&v.length>1){const b=v[1];let S=d[b];S||(d[b]=S=[]),S.push(_)}}const m=[];for(const g in d)m.push(this.CreateFromMorphTargetSequence(g,d[g],l,h));return m}static parseAnimation(a,l){if(!a)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const h=function(b,S,T,x,E){if(0!==T.length){const I=[],M=[];Hr.flattenJSON(T,I,M,x),0!==I.length&&E.push(new b(S,I,M))}},d=[],f=a.name||"default",m=a.fps||30,g=a.blendMode;let y=a.length||-1;const _=a.hierarchy||[];for(let b=0;b<_.length;b++){const S=_[b].keys;if(S&&0!==S.length)if(S[0].morphTargets){const T={};let x;for(x=0;x<S.length;x++)if(S[x].morphTargets)for(let E=0;E<S[x].morphTargets.length;E++)T[S[x].morphTargets[E]]=-1;for(const E in T){const I=[],M=[];for(let D=0;D!==S[x].morphTargets.length;++D){const L=S[x];I.push(L.time),M.push(L.morphTarget===E?1:0)}d.push(new jT(".morphTargetInfluence["+E+"]",I,M))}y=T.length*(m||1)}else{const T=".bones["+l[b].name+"]";h(WT,T+".position",S,"pos",d),h(og,T+".quaternion",S,"rot",d),h(WT,T+".scale",S,"scl",d)}}return 0===d.length?null:new this(f,y,d,g)}resetDuration(){let l=0;for(let h=0,d=this.tracks.length;h!==d;++h){const f=this.tracks[h];l=Math.max(l,f.times[f.times.length-1])}return this.duration=l,this}trim(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].trim(0,this.duration);return this}validate(){let a=!0;for(let l=0;l<this.tracks.length;l++)a=a&&this.tracks[l].validate();return a}optimize(){for(let a=0;a<this.tracks.length;a++)this.tracks[a].optimize();return this}clone(){const a=[];for(let l=0;l<this.tracks.length;l++)a.push(this.tracks[l].clone());return new this.constructor(this.name,this.duration,a,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function lZe(c){if(void 0===c.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const a=function aZe(c){switch(c.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return jT;case"vector":case"vector2":case"vector3":case"vector4":return WT;case"color":return cre;case"quaternion":return og;case"bool":case"boolean":return s0;case"string":return o0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+c)}(c.type);if(void 0===c.times){const l=[],h=[];Hr.flattenJSON(c.keys,l,h,"value"),c.times=l,c.values=h}return void 0!==a.parse?a.parse(c):new a(c.name,c.times,c.values,c.interpolation)}const a0={enabled:!1,files:{},add:function(c,a){!1!==this.enabled&&(this.files[c]=a)},get:function(c){if(!1!==this.enabled)return this.files[c]},remove:function(c){delete this.files[c]},clear:function(){this.files={}}};const cZe=new class ure{constructor(a,l,h){const d=this;let y,f=!1,m=0,g=0;const _=[];this.onStart=void 0,this.onLoad=a,this.onProgress=l,this.onError=h,this.itemStart=function(v){g++,!1===f&&void 0!==d.onStart&&d.onStart(v,m,g),f=!0},this.itemEnd=function(v){m++,void 0!==d.onProgress&&d.onProgress(v,m,g),m===g&&(f=!1,void 0!==d.onLoad&&d.onLoad())},this.itemError=function(v){void 0!==d.onError&&d.onError(v)},this.resolveURL=function(v){return y?y(v):v},this.setURLModifier=function(v){return y=v,this},this.addHandler=function(v,b){return _.push(v,b),this},this.removeHandler=function(v){const b=_.indexOf(v);return-1!==b&&_.splice(b,2),this},this.getHandler=function(v){for(let b=0,S=_.length;b<S;b+=2){const T=_[b],x=_[b+1];if(T.global&&(T.lastIndex=0),T.test(v))return x}return null}}};class dd{constructor(a){this.manager=void 0!==a?a:cZe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(a,l){const h=this;return new Promise(function(d,f){h.load(a,d,l,f)})}parse(){}setCrossOrigin(a){return this.crossOrigin=a,this}setWithCredentials(a){return this.withCredentials=a,this}setPath(a){return this.path=a,this}setResourcePath(a){return this.resourcePath=a,this}setRequestHeader(a){return this.requestHeader=a,this}}const fd={};class Zc extends dd{constructor(a){super(a)}load(a,l,h,d){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);const f=a0.get(a);if(void 0!==f)return this.manager.itemStart(a),setTimeout(()=>{l&&l(f),this.manager.itemEnd(a)},0),f;if(void 0!==fd[a])return void fd[a].push({onLoad:l,onProgress:h,onError:d});fd[a]=[],fd[a].push({onLoad:l,onProgress:h,onError:d});const m=new Request(a,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),g=this.mimeType,y=this.responseType;fetch(m).then(_=>{if(200===_.status||0===_.status){if(0===_.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===_.body.getReader)return _;const v=fd[a],b=_.body.getReader(),S=_.headers.get("Content-Length"),T=S?parseInt(S):0,x=0!==T;let E=0;const I=new ReadableStream({start(M){!function D(){b.read().then(({done:L,value:P})=>{if(L)M.close();else{E+=P.byteLength;const F=new ProgressEvent("progress",{lengthComputable:x,loaded:E,total:T});for(let B=0,G=v.length;B<G;B++){const $=v[B];$.onProgress&&$.onProgress(F)}M.enqueue(P),D()}})}()}});return new Response(I)}throw Error(`fetch for "${_.url}" responded with ${_.status}: ${_.statusText}`)}).then(_=>{switch(y){case"arraybuffer":return _.arrayBuffer();case"blob":return _.blob();case"document":return _.text().then(v=>(new DOMParser).parseFromString(v,g));case"json":return _.json();default:if(void 0===g)return _.text();{const b=/charset="?([^;"\s]*)"?/i.exec(g),S=b&&b[1]?b[1].toLowerCase():void 0,T=new TextDecoder(S);return _.arrayBuffer().then(x=>T.decode(x))}}}).then(_=>{a0.add(a,_);const v=fd[a];delete fd[a];for(let b=0,S=v.length;b<S;b++){const T=v[b];T.onLoad&&T.onLoad(_)}}).catch(_=>{const v=fd[a];if(void 0===v)throw this.manager.itemError(a),_;delete fd[a];for(let b=0,S=v.length;b<S;b++){const T=v[b];T.onError&&T.onError(_)}this.manager.itemError(a)}).finally(()=>{this.manager.itemEnd(a)}),this.manager.itemStart(a)}setResponseType(a){return this.responseType=a,this}setMimeType(a){return this.mimeType=a,this}}class cI extends dd{constructor(a){super(a)}load(a,l,h,d){void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);const f=this,m=a0.get(a);if(void 0!==m)return f.manager.itemStart(a),setTimeout(function(){l&&l(m),f.manager.itemEnd(a)},0),m;const g=bT("img");function y(){v(),a0.add(a,this),l&&l(this),f.manager.itemEnd(a)}function _(b){v(),d&&d(b),f.manager.itemError(a),f.manager.itemEnd(a)}function v(){g.removeEventListener("load",y,!1),g.removeEventListener("error",_,!1)}return g.addEventListener("load",y,!1),g.addEventListener("error",_,!1),"data:"!==a.substr(0,5)&&void 0!==this.crossOrigin&&(g.crossOrigin=this.crossOrigin),f.manager.itemStart(a),g.src=a,g}}class hre extends dd{constructor(a){super(a)}load(a,l,h,d){const f=new CT,m=new cI(this.manager);m.setCrossOrigin(this.crossOrigin),m.setPath(this.path);let g=0;function y(_){m.load(a[_],function(v){f.images[_]=v,g++,6===g&&(f.needsUpdate=!0,l&&l(f))},void 0,d)}for(let _=0;_<a.length;++_)y(_);return f}}class dre extends dd{constructor(a){super(a)}load(a,l,h,d){const f=new Cs,m=new cI(this.manager);return m.setCrossOrigin(this.crossOrigin),m.setPath(this.path),m.load(a,function(g){f.image=g,f.needsUpdate=!0,void 0!==l&&l(f)},h,d),f}}class Wu extends Yi{constructor(a,l=1){super(),this.type="Light",this.color=new Pt(a),this.intensity=l}dispose(){}copy(a){return super.copy(a),this.color.copy(a.color),this.intensity=a.intensity,this}toJSON(a){const l=super.toJSON(a);return l.object.color=this.color.getHex(),l.object.intensity=this.intensity,void 0!==this.groundColor&&(l.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(l.object.distance=this.distance),void 0!==this.angle&&(l.object.angle=this.angle),void 0!==this.decay&&(l.object.decay=this.decay),void 0!==this.penumbra&&(l.object.penumbra=this.penumbra),void 0!==this.shadow&&(l.object.shadow=this.shadow.toJSON()),l}}Wu.prototype.isLight=!0;(class fre extends Wu{constructor(a,l,h){super(a,h),this.type="HemisphereLight",this.position.copy(Yi.DefaultUp),this.updateMatrix(),this.groundColor=new Pt(l)}copy(a){return Wu.prototype.copy.call(this,a),this.groundColor.copy(a.groundColor),this}}).prototype.isHemisphereLight=!0;const pre=new un,mre=new te,gre=new te;class sB{constructor(a){this.camera=a,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tt(512,512),this.map=null,this.mapPass=null,this.matrix=new un,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new EA,this._frameExtents=new tt(1,1),this._viewportCount=1,this._viewports=[new hr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(a){const l=this.camera,h=this.matrix;mre.setFromMatrixPosition(a.matrixWorld),l.position.copy(mre),gre.setFromMatrixPosition(a.target.matrixWorld),l.lookAt(gre),l.updateMatrixWorld(),pre.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pre),h.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),h.multiply(l.projectionMatrix),h.multiply(l.matrixWorldInverse)}getViewport(a){return this._viewports[a]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(a){return this.camera=a.camera.clone(),this.bias=a.bias,this.radius=a.radius,this.mapSize.copy(a.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const a={};return 0!==this.bias&&(a.bias=this.bias),0!==this.normalBias&&(a.normalBias=this.normalBias),1!==this.radius&&(a.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(a.mapSize=this.mapSize.toArray()),a.camera=this.camera.toJSON(!1).object,delete a.camera.matrix,a}}class yre extends sB{constructor(){super(new zs(50,1,.5,500)),this.focus=1}updateMatrices(a){const l=this.camera,h=2*_T*a.angle*this.focus,d=this.mapSize.width/this.mapSize.height,f=a.distance||l.far;(h!==l.fov||d!==l.aspect||f!==l.far)&&(l.fov=h,l.aspect=d,l.far=f,l.updateProjectionMatrix()),super.updateMatrices(a)}copy(a){return super.copy(a),this.focus=a.focus,this}}yre.prototype.isSpotLightShadow=!0;class oB extends Wu{constructor(a,l,h=0,d=Math.PI/3,f=0,m=1){super(a,l),this.type="SpotLight",this.position.copy(Yi.DefaultUp),this.updateMatrix(),this.target=new Yi,this.distance=h,this.angle=d,this.penumbra=f,this.decay=m,this.shadow=new yre}get power(){return this.intensity*Math.PI}set power(a){this.intensity=a/Math.PI}dispose(){this.shadow.dispose()}copy(a){return super.copy(a),this.distance=a.distance,this.angle=a.angle,this.penumbra=a.penumbra,this.decay=a.decay,this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}oB.prototype.isSpotLight=!0;const _re=new un,qT=new te,aB=new te;class vre extends sB{constructor(){super(new zs(90,1,.5,500)),this._frameExtents=new tt(4,2),this._viewportCount=6,this._viewports=[new hr(2,1,1,1),new hr(0,1,1,1),new hr(3,1,1,1),new hr(1,1,1,1),new hr(3,0,1,1),new hr(1,0,1,1)],this._cubeDirections=[new te(1,0,0),new te(-1,0,0),new te(0,0,1),new te(0,0,-1),new te(0,1,0),new te(0,-1,0)],this._cubeUps=[new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,1,0),new te(0,0,1),new te(0,0,-1)]}updateMatrices(a,l=0){const h=this.camera,d=this.matrix,f=a.distance||h.far;f!==h.far&&(h.far=f,h.updateProjectionMatrix()),qT.setFromMatrixPosition(a.matrixWorld),h.position.copy(qT),aB.copy(h.position),aB.add(this._cubeDirections[l]),h.up.copy(this._cubeUps[l]),h.lookAt(aB),h.updateMatrixWorld(),d.makeTranslation(-qT.x,-qT.y,-qT.z),_re.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_re)}}vre.prototype.isPointLightShadow=!0;class lB extends Wu{constructor(a,l,h=0,d=1){super(a,l),this.type="PointLight",this.distance=h,this.decay=d,this.shadow=new vre}get power(){return 4*this.intensity*Math.PI}set power(a){this.intensity=a/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(a){return super.copy(a),this.distance=a.distance,this.decay=a.decay,this.shadow=a.shadow.clone(),this}}lB.prototype.isPointLight=!0;class bre extends sB{constructor(){super(new ET(-5,5,5,-5,.5,500))}}bre.prototype.isDirectionalLightShadow=!0;class uI extends Wu{constructor(a,l){super(a,l),this.type="DirectionalLight",this.position.copy(Yi.DefaultUp),this.updateMatrix(),this.target=new Yi,this.shadow=new bre}dispose(){this.shadow.dispose()}copy(a){return super.copy(a),this.target=a.target.clone(),this.shadow=a.shadow.clone(),this}}uI.prototype.isDirectionalLight=!0;(class Sre extends Wu{constructor(a,l){super(a,l),this.type="AmbientLight"}}).prototype.isAmbientLight=!0;(class Tre extends Wu{constructor(a,l,h=10,d=10){super(a,l),this.type="RectAreaLight",this.width=h,this.height=d}get power(){return this.intensity*this.width*this.height*Math.PI}set power(a){this.intensity=a/(this.width*this.height*Math.PI)}copy(a){return super.copy(a),this.width=a.width,this.height=a.height,this}toJSON(a){const l=super.toJSON(a);return l.object.width=this.width,l.object.height=this.height,l}}).prototype.isRectAreaLight=!0;class wre{constructor(){this.coefficients=[];for(let a=0;a<9;a++)this.coefficients.push(new te)}set(a){for(let l=0;l<9;l++)this.coefficients[l].copy(a[l]);return this}zero(){for(let a=0;a<9;a++)this.coefficients[a].set(0,0,0);return this}getAt(a,l){const h=a.x,d=a.y,f=a.z,m=this.coefficients;return l.copy(m[0]).multiplyScalar(.282095),l.addScaledVector(m[1],.488603*d),l.addScaledVector(m[2],.488603*f),l.addScaledVector(m[3],.488603*h),l.addScaledVector(m[4],h*d*1.092548),l.addScaledVector(m[5],d*f*1.092548),l.addScaledVector(m[6],.315392*(3*f*f-1)),l.addScaledVector(m[7],h*f*1.092548),l.addScaledVector(m[8],.546274*(h*h-d*d)),l}getIrradianceAt(a,l){const h=a.x,d=a.y,f=a.z,m=this.coefficients;return l.copy(m[0]).multiplyScalar(.886227),l.addScaledVector(m[1],1.023328*d),l.addScaledVector(m[2],1.023328*f),l.addScaledVector(m[3],1.023328*h),l.addScaledVector(m[4],.858086*h*d),l.addScaledVector(m[5],.858086*d*f),l.addScaledVector(m[6],.743125*f*f-.247708),l.addScaledVector(m[7],.858086*h*f),l.addScaledVector(m[8],.429043*(h*h-d*d)),l}add(a){for(let l=0;l<9;l++)this.coefficients[l].add(a.coefficients[l]);return this}addScaledSH(a,l){for(let h=0;h<9;h++)this.coefficients[h].addScaledVector(a.coefficients[h],l);return this}scale(a){for(let l=0;l<9;l++)this.coefficients[l].multiplyScalar(a);return this}lerp(a,l){for(let h=0;h<9;h++)this.coefficients[h].lerp(a.coefficients[h],l);return this}equals(a){for(let l=0;l<9;l++)if(!this.coefficients[l].equals(a.coefficients[l]))return!1;return!0}copy(a){return this.set(a.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(a,l=0){const h=this.coefficients;for(let d=0;d<9;d++)h[d].fromArray(a,l+3*d);return this}toArray(a=[],l=0){const h=this.coefficients;for(let d=0;d<9;d++)h[d].toArray(a,l+3*d);return a}static getBasisAt(a,l){const h=a.x,d=a.y,f=a.z;l[0]=.282095,l[1]=.488603*d,l[2]=.488603*f,l[3]=.488603*h,l[4]=1.092548*h*d,l[5]=1.092548*d*f,l[6]=.315392*(3*f*f-1),l[7]=1.092548*h*f,l[8]=.546274*(h*h-d*d)}}wre.prototype.isSphericalHarmonics3=!0;class hI extends Wu{constructor(a=new wre,l=1){super(void 0,l),this.sh=a}copy(a){return super.copy(a),this.sh.copy(a.sh),this}fromJSON(a){return this.intensity=a.intensity,this.sh.fromArray(a.sh),this}toJSON(a){const l=super.toJSON(a);return l.object.sh=this.sh.toArray(),l}}hI.prototype.isLightProbe=!0;class Xu{static decodeText(a){if(typeof TextDecoder<"u")return(new TextDecoder).decode(a);let l="";for(let h=0,d=a.length;h<d;h++)l+=String.fromCharCode(a[h]);try{return decodeURIComponent(escape(l))}catch{return l}}static extractUrlBase(a){const l=a.lastIndexOf("/");return-1===l?"./":a.substr(0,l+1)}static resolveURL(a,l){return"string"!=typeof a||""===a?"":(/^https?:\/\//i.test(l)&&/^\//.test(a)&&(l=l.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(a)||/^data:.*,.*$/i.test(a)||/^blob:.*$/i.test(a)?a:l+a)}}(class Cre extends Nn{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(a){return super.copy(a),this.instanceCount=a.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const a=super.toJSON(this);return a.instanceCount=this.instanceCount,a.isInstancedBufferGeometry=!0,a}}).prototype.isInstancedBufferGeometry=!0;class Mre extends dd{constructor(a){super(a),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(a){return this.options=a,this}load(a,l,h,d){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);const f=this,m=a0.get(a);if(void 0!==m)return f.manager.itemStart(a),setTimeout(function(){l&&l(m),f.manager.itemEnd(a)},0),m;const g={};g.credentials="anonymous"===this.crossOrigin?"same-origin":"include",g.headers=this.requestHeader,fetch(a,g).then(function(y){return y.blob()}).then(function(y){return createImageBitmap(y,Object.assign(f.options,{colorSpaceConversion:"none"}))}).then(function(y){a0.add(a,y),l&&l(y),f.manager.itemEnd(a)}).catch(function(y){d&&d(y),f.manager.itemError(a),f.manager.itemEnd(a)}),f.manager.itemStart(a)}}let dI;Mre.prototype.isImageBitmapLoader=!0;class pZe extends dd{constructor(a){super(a)}load(a,l,h,d){const f=this,m=new Zc(this.manager);m.setResponseType("arraybuffer"),m.setPath(this.path),m.setRequestHeader(this.requestHeader),m.setWithCredentials(this.withCredentials),m.load(a,function(g){try{const y=g.slice(0);(void 0===dI&&(dI=new(window.AudioContext||window.webkitAudioContext)),dI).decodeAudioData(y,function(v){l(v)})}catch(y){d?d(y):console.error(y),f.manager.itemError(a)}},h,d)}}(class mZe extends hI{constructor(a,l,h=1){super(void 0,h);const d=(new Pt).set(a),f=(new Pt).set(l),m=new te(d.r,d.g,d.b),g=new te(f.r,f.g,f.b),y=Math.sqrt(Math.PI),_=y*Math.sqrt(.75);this.sh.coefficients[0].copy(m).add(g).multiplyScalar(y),this.sh.coefficients[1].copy(m).sub(g).multiplyScalar(_)}}).prototype.isHemisphereLightProbe=!0,class gZe extends hI{constructor(a,l=1){super(void 0,l);const h=(new Pt).set(a);this.sh.coefficients[0].set(h.r,h.g,h.b).multiplyScalar(2*Math.sqrt(Math.PI))}}.prototype.isAmbientLightProbe=!0;class TZe{constructor(a,l,h){let d,f,m;switch(this.binding=a,this.valueSize=h,l){case"quaternion":d=this._slerp,f=this._slerpAdditive,m=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*h),this._workIndex=5;break;case"string":case"bool":d=this._select,f=this._select,m=this._setAdditiveIdentityOther,this.buffer=new Array(5*h);break;default:d=this._lerp,f=this._lerpAdditive,m=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*h)}this._mixBufferRegion=d,this._mixBufferRegionAdditive=f,this._setIdentity=m,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(a,l){const h=this.buffer,d=this.valueSize,f=a*d+d;let m=this.cumulativeWeight;if(0===m){for(let g=0;g!==d;++g)h[f+g]=h[g];m=l}else m+=l,this._mixBufferRegion(h,f,0,l/m,d);this.cumulativeWeight=m}accumulateAdditive(a){const l=this.buffer,h=this.valueSize,d=h*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(l,d,0,a,h),this.cumulativeWeightAdditive+=a}apply(a){const l=this.valueSize,h=this.buffer,d=a*l+l,f=this.cumulativeWeight,m=this.cumulativeWeightAdditive,g=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,f<1&&this._mixBufferRegion(h,d,l*this._origIndex,1-f,l),m>0&&this._mixBufferRegionAdditive(h,d,this._addIndex*l,1,l);for(let y=l,_=l+l;y!==_;++y)if(h[y]!==h[y+l]){g.setValue(h,d);break}}saveOriginalState(){const l=this.buffer,h=this.valueSize,d=h*this._origIndex;this.binding.getValue(l,d);for(let f=h,m=d;f!==m;++f)l[f]=l[d+f%h];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){this.binding.setValue(this.buffer,3*this.valueSize)}_setAdditiveIdentityNumeric(){const a=this._addIndex*this.valueSize,l=a+this.valueSize;for(let h=a;h<l;h++)this.buffer[h]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const a=this._origIndex*this.valueSize,l=this._addIndex*this.valueSize;for(let h=0;h<this.valueSize;h++)this.buffer[l+h]=this.buffer[a+h]}_select(a,l,h,d,f){if(d>=.5)for(let m=0;m!==f;++m)a[l+m]=a[h+m]}_slerp(a,l,h,d){Js.slerpFlat(a,l,a,l,a,h,d)}_slerpAdditive(a,l,h,d,f){const m=this._workIndex*f;Js.multiplyQuaternionsFlat(a,m,a,l,a,h),Js.slerpFlat(a,l,a,l,a,m,d)}_lerp(a,l,h,d,f){const m=1-d;for(let g=0;g!==f;++g){const y=l+g;a[y]=a[y]*m+a[h+g]*d}}_lerpAdditive(a,l,h,d,f){for(let m=0;m!==f;++m){const g=l+m;a[g]=a[g]+a[h+m]*d}}}const cB="\\[\\]\\.:\\/",wZe=new RegExp("["+cB+"]","g"),uB="[^"+cB+"]",CZe="[^"+cB.replace("\\.","")+"]",xZe=/((?:WC+[\/:])*)/.source.replace("WC",uB),EZe=/(WCOD+)?/.source.replace("WCOD",CZe),MZe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",uB),DZe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",uB),AZe=new RegExp("^"+xZe+EZe+MZe+DZe+"$"),IZe=["material","materials","bones"];class RZe{constructor(a,l,h){const d=h||Rr.parseTrackName(l);this._targetGroup=a,this._bindings=a.subscribe_(l,d)}getValue(a,l){this.bind();const d=this._bindings[this._targetGroup.nCachedObjects_];void 0!==d&&d.getValue(a,l)}setValue(a,l){const h=this._bindings;for(let d=this._targetGroup.nCachedObjects_,f=h.length;d!==f;++d)h[d].setValue(a,l)}bind(){const a=this._bindings;for(let l=this._targetGroup.nCachedObjects_,h=a.length;l!==h;++l)a[l].bind()}unbind(){const a=this._bindings;for(let l=this._targetGroup.nCachedObjects_,h=a.length;l!==h;++l)a[l].unbind()}}let Rr=(()=>{class c{constructor(l,h,d){this.path=h,this.parsedPath=d||c.parseTrackName(h),this.node=c.findNode(l,this.parsedPath.nodeName)||l,this.rootNode=l,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(l,h,d){return l&&l.isAnimationObjectGroup?new c.Composite(l,h,d):new c(l,h,d)}static sanitizeNodeName(l){return l.replace(/\s/g,"_").replace(wZe,"")}static parseTrackName(l){const h=AZe.exec(l);if(!h)throw new Error("PropertyBinding: Cannot parse trackName: "+l);const d={nodeName:h[2],objectName:h[3],objectIndex:h[4],propertyName:h[5],propertyIndex:h[6]},f=d.nodeName&&d.nodeName.lastIndexOf(".");if(void 0!==f&&-1!==f){const m=d.nodeName.substring(f+1);-1!==IZe.indexOf(m)&&(d.nodeName=d.nodeName.substring(0,f),d.objectName=m)}if(null===d.propertyName||0===d.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+l);return d}static findNode(l,h){if(!h||""===h||"."===h||-1===h||h===l.name||h===l.uuid)return l;if(l.skeleton){const d=l.skeleton.getBoneByName(h);if(void 0!==d)return d}if(l.children){const d=function(m){for(let g=0;g<m.length;g++){const y=m[g];if(y.name===h||y.uuid===h)return y;const _=d(y.children);if(_)return _}return null},f=d(l.children);if(f)return f}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(l,h){l[h]=this.targetObject[this.propertyName]}_getValue_array(l,h){const d=this.resolvedProperty;for(let f=0,m=d.length;f!==m;++f)l[h++]=d[f]}_getValue_arrayElement(l,h){l[h]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(l,h){this.resolvedProperty.toArray(l,h)}_setValue_direct(l,h){this.targetObject[this.propertyName]=l[h]}_setValue_direct_setNeedsUpdate(l,h){this.targetObject[this.propertyName]=l[h],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(l,h){this.targetObject[this.propertyName]=l[h],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(l,h){const d=this.resolvedProperty;for(let f=0,m=d.length;f!==m;++f)d[f]=l[h++]}_setValue_array_setNeedsUpdate(l,h){const d=this.resolvedProperty;for(let f=0,m=d.length;f!==m;++f)d[f]=l[h++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(l,h){const d=this.resolvedProperty;for(let f=0,m=d.length;f!==m;++f)d[f]=l[h++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(l,h){this.resolvedProperty[this.propertyIndex]=l[h]}_setValue_arrayElement_setNeedsUpdate(l,h){this.resolvedProperty[this.propertyIndex]=l[h],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(l,h){this.resolvedProperty[this.propertyIndex]=l[h],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(l,h){this.resolvedProperty.fromArray(l,h)}_setValue_fromArray_setNeedsUpdate(l,h){this.resolvedProperty.fromArray(l,h),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(l,h){this.resolvedProperty.fromArray(l,h),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(l,h){this.bind(),this.getValue(l,h)}_setValue_unbound(l,h){this.bind(),this.setValue(l,h)}bind(){let l=this.node;const h=this.parsedPath,d=h.objectName,f=h.propertyName;let m=h.propertyIndex;if(l||(l=c.findNode(this.rootNode,h.nodeName)||this.rootNode,this.node=l),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!l)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(d){let v=h.objectIndex;switch(d){case"materials":if(!l.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!l.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);l=l.material.materials;break;case"bones":if(!l.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);l=l.skeleton.bones;for(let b=0;b<l.length;b++)if(l[b].name===v){v=b;break}break;default:if(void 0===l[d])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);l=l[d]}if(void 0!==v){if(void 0===l[v])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,l);l=l[v]}}const g=l[f];if(void 0===g)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+h.nodeName+"."+f+" but it wasn't found.",l);let y=this.Versioning.None;this.targetObject=l,void 0!==l.needsUpdate?y=this.Versioning.NeedsUpdate:void 0!==l.matrixWorldNeedsUpdate&&(y=this.Versioning.MatrixWorldNeedsUpdate);let _=this.BindingType.Direct;if(void 0!==m){if("morphTargetInfluences"===f){if(!l.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!l.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!l.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==l.morphTargetDictionary[m]&&(m=l.morphTargetDictionary[m])}_=this.BindingType.ArrayElement,this.resolvedProperty=g,this.propertyIndex=m}else void 0!==g.fromArray&&void 0!==g.toArray?(_=this.BindingType.HasFromToArray,this.resolvedProperty=g):Array.isArray(g)?(_=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=f;this.getValue=this.GetterByBindingType[_],this.setValue=this.SetterByBindingTypeAndVersioning[_][y]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return c.Composite=RZe,c})();Rr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Rr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Rr.prototype.GetterByBindingType=[Rr.prototype._getValue_direct,Rr.prototype._getValue_array,Rr.prototype._getValue_arrayElement,Rr.prototype._getValue_toArray],Rr.prototype.SetterByBindingTypeAndVersioning=[[Rr.prototype._setValue_direct,Rr.prototype._setValue_direct_setNeedsUpdate,Rr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Rr.prototype._setValue_array,Rr.prototype._setValue_array_setNeedsUpdate,Rr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Rr.prototype._setValue_arrayElement,Rr.prototype._setValue_arrayElement_setNeedsUpdate,Rr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Rr.prototype._setValue_fromArray,Rr.prototype._setValue_fromArray_setNeedsUpdate,Rr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class PZe{constructor(a,l,h=null,d=l.blendMode){this._mixer=a,this._clip=l,this._localRoot=h,this.blendMode=d;const f=l.tracks,m=f.length,g=new Array(m),y={endingStart:Ev,endingEnd:Ev};for(let _=0;_!==m;++_){const v=f[_].createInterpolant(null);g[_]=v,v.settings=y}this._interpolantSettings=y,this._interpolants=g,this._propertyBindings=new Array(m),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(a){return this._startTime=a,this}setLoop(a,l){return this.loop=a,this.repetitions=l,this}setEffectiveWeight(a){return this.weight=a,this._effectiveWeight=this.enabled?a:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(a){return this._scheduleFading(a,0,1)}fadeOut(a){return this._scheduleFading(a,1,0)}crossFadeFrom(a,l,h){if(a.fadeOut(l),this.fadeIn(l),h){const d=this._clip.duration,f=a._clip.duration,g=d/f;a.warp(1,f/d,l),this.warp(g,1,l)}return this}crossFadeTo(a,l,h){return a.crossFadeFrom(this,l,h)}stopFading(){const a=this._weightInterpolant;return null!==a&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this}setEffectiveTimeScale(a){return this.timeScale=a,this._effectiveTimeScale=this.paused?0:a,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(a){return this.timeScale=this._clip.duration/a,this.stopWarping()}syncWith(a){return this.time=a.time,this.timeScale=a.timeScale,this.stopWarping()}halt(a){return this.warp(this._effectiveTimeScale,0,a)}warp(a,l,h){const d=this._mixer,f=d.time,m=this.timeScale;let g=this._timeScaleInterpolant;null===g&&(g=d._lendControlInterpolant(),this._timeScaleInterpolant=g);const y=g.parameterPositions,_=g.sampleValues;return y[0]=f,y[1]=f+h,_[0]=a/m,_[1]=l/m,this}stopWarping(){const a=this._timeScaleInterpolant;return null!==a&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(a)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(a,l,h,d){if(!this.enabled)return void this._updateWeight(a);const f=this._startTime;if(null!==f){const y=(a-f)*h;if(y<0||0===h)return;this._startTime=null,l=h*y}l*=this._updateTimeScale(a);const m=this._updateTime(l),g=this._updateWeight(a);if(g>0){const y=this._interpolants,_=this._propertyBindings;if(2501===this.blendMode)for(let v=0,b=y.length;v!==b;++v)y[v].evaluate(m),_[v].accumulateAdditive(g);else for(let v=0,b=y.length;v!==b;++v)y[v].evaluate(m),_[v].accumulate(d,g)}}_updateWeight(a){let l=0;if(this.enabled){l=this.weight;const h=this._weightInterpolant;if(null!==h){const d=h.evaluate(a)[0];l*=d,a>h.parameterPositions[1]&&(this.stopFading(),0===d&&(this.enabled=!1))}}return this._effectiveWeight=l,l}_updateTimeScale(a){let l=0;if(!this.paused){l=this.timeScale;const h=this._timeScaleInterpolant;null!==h&&(l*=h.evaluate(a)[0],a>h.parameterPositions[1]&&(this.stopWarping(),0===l?this.paused=!0:this.timeScale=l))}return this._effectiveTimeScale=l,l}_updateTime(a){const l=this._clip.duration,h=this.loop;let d=this.time+a,f=this._loopCount;const m=2202===h;if(0===a)return-1===f?d:m&&1==(1&f)?l-d:d;if(2200===h){-1===f&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(d>=l)d=l;else{if(!(d<0)){this.time=d;break e}d=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=d,this._mixer.dispatchEvent({type:"finished",action:this,direction:a<0?-1:1})}}else{if(-1===f&&(a>=0?(f=0,this._setEndings(!0,0===this.repetitions,m)):this._setEndings(0===this.repetitions,!0,m)),d>=l||d<0){const g=Math.floor(d/l);d-=l*g,f+=Math.abs(g);const y=this.repetitions-f;if(y<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,d=a>0?l:0,this.time=d,this._mixer.dispatchEvent({type:"finished",action:this,direction:a>0?1:-1});else{if(1===y){const _=a<0;this._setEndings(_,!_,m)}else this._setEndings(!1,!1,m);this._loopCount=f,this.time=d,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:g})}}else this.time=d;if(m&&1==(1&f))return l-d}return d}_setEndings(a,l,h){const d=this._interpolantSettings;h?(d.endingStart=Mv,d.endingEnd=Mv):(d.endingStart=a?this.zeroSlopeAtStart?Mv:Ev:2402,d.endingEnd=l?this.zeroSlopeAtEnd?Mv:Ev:2402)}_scheduleFading(a,l,h){const d=this._mixer,f=d.time;let m=this._weightInterpolant;null===m&&(m=d._lendControlInterpolant(),this._weightInterpolant=m);const g=m.parameterPositions,y=m.sampleValues;return g[0]=f,y[0]=l,g[1]=f+a,y[1]=h,this}}(class OZe extends Gf{constructor(a){super(),this._root=a,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(a,l){const h=a._localRoot||this._root,d=a._clip.tracks,f=d.length,m=a._propertyBindings,g=a._interpolants,y=h.uuid,_=this._bindingsByRootAndName;let v=_[y];void 0===v&&(v={},_[y]=v);for(let b=0;b!==f;++b){const S=d[b],T=S.name;let x=v[T];if(void 0!==x)++x.referenceCount,m[b]=x;else{if(x=m[b],void 0!==x){null===x._cacheIndex&&(++x.referenceCount,this._addInactiveBinding(x,y,T));continue}x=new TZe(Rr.create(h,T,l&&l._propertyBindings[b].binding.parsedPath),S.ValueTypeName,S.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,y,T),m[b]=x}g[b].resultBuffer=x.buffer}}_activateAction(a){if(!this._isActiveAction(a)){if(null===a._cacheIndex){const h=(a._localRoot||this._root).uuid,d=a._clip.uuid,f=this._actionsByClip[d];this._bindAction(a,f&&f.knownActions[0]),this._addInactiveAction(a,d,h)}const l=a._propertyBindings;for(let h=0,d=l.length;h!==d;++h){const f=l[h];0==f.useCount++&&(this._lendBinding(f),f.saveOriginalState())}this._lendAction(a)}}_deactivateAction(a){if(this._isActiveAction(a)){const l=a._propertyBindings;for(let h=0,d=l.length;h!==d;++h){const f=l[h];0==--f.useCount&&(f.restoreOriginalState(),this._takeBackBinding(f))}this._takeBackAction(a)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const a=this;this.stats={actions:{get total(){return a._actions.length},get inUse(){return a._nActiveActions}},bindings:{get total(){return a._bindings.length},get inUse(){return a._nActiveBindings}},controlInterpolants:{get total(){return a._controlInterpolants.length},get inUse(){return a._nActiveControlInterpolants}}}}_isActiveAction(a){const l=a._cacheIndex;return null!==l&&l<this._nActiveActions}_addInactiveAction(a,l,h){const d=this._actions,f=this._actionsByClip;let m=f[l];if(void 0===m)m={knownActions:[a],actionByRoot:{}},a._byClipCacheIndex=0,f[l]=m;else{const g=m.knownActions;a._byClipCacheIndex=g.length,g.push(a)}a._cacheIndex=d.length,d.push(a),m.actionByRoot[h]=a}_removeInactiveAction(a){const l=this._actions,h=l[l.length-1],d=a._cacheIndex;h._cacheIndex=d,l[d]=h,l.pop(),a._cacheIndex=null;const f=a._clip.uuid,m=this._actionsByClip,g=m[f],y=g.knownActions,_=y[y.length-1],v=a._byClipCacheIndex;_._byClipCacheIndex=v,y[v]=_,y.pop(),a._byClipCacheIndex=null,delete g.actionByRoot[(a._localRoot||this._root).uuid],0===y.length&&delete m[f],this._removeInactiveBindingsForAction(a)}_removeInactiveBindingsForAction(a){const l=a._propertyBindings;for(let h=0,d=l.length;h!==d;++h){const f=l[h];0==--f.referenceCount&&this._removeInactiveBinding(f)}}_lendAction(a){const l=this._actions,h=a._cacheIndex,d=this._nActiveActions++,f=l[d];a._cacheIndex=d,l[d]=a,f._cacheIndex=h,l[h]=f}_takeBackAction(a){const l=this._actions,h=a._cacheIndex,d=--this._nActiveActions,f=l[d];a._cacheIndex=d,l[d]=a,f._cacheIndex=h,l[h]=f}_addInactiveBinding(a,l,h){const d=this._bindingsByRootAndName,f=this._bindings;let m=d[l];void 0===m&&(m={},d[l]=m),m[h]=a,a._cacheIndex=f.length,f.push(a)}_removeInactiveBinding(a){const l=this._bindings,h=a.binding,d=h.rootNode.uuid,f=h.path,m=this._bindingsByRootAndName,g=m[d],y=l[l.length-1],_=a._cacheIndex;y._cacheIndex=_,l[_]=y,l.pop(),delete g[f],0===Object.keys(g).length&&delete m[d]}_lendBinding(a){const l=this._bindings,h=a._cacheIndex,d=this._nActiveBindings++,f=l[d];a._cacheIndex=d,l[d]=a,f._cacheIndex=h,l[h]=f}_takeBackBinding(a){const l=this._bindings,h=a._cacheIndex,d=--this._nActiveBindings,f=l[d];a._cacheIndex=d,l[d]=a,f._cacheIndex=h,l[h]=f}_lendControlInterpolant(){const a=this._controlInterpolants,l=this._nActiveControlInterpolants++;let h=a[l];return void 0===h&&(h=new lre(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),h.__cacheIndex=l,a[l]=h),h}_takeBackControlInterpolant(a){const l=this._controlInterpolants,h=a.__cacheIndex,d=--this._nActiveControlInterpolants,f=l[d];a.__cacheIndex=d,l[d]=a,f.__cacheIndex=h,l[h]=f}clipAction(a,l,h){const d=l||this._root,f=d.uuid;let m="string"==typeof a?XT.findByName(d,a):a;const g=null!==m?m.uuid:a,y=this._actionsByClip[g];let _=null;if(void 0===h&&(h=null!==m?m.blendMode:2500),void 0!==y){const b=y.actionByRoot[f];if(void 0!==b&&b.blendMode===h)return b;_=y.knownActions[0],null===m&&(m=_._clip)}if(null===m)return null;const v=new PZe(this,m,l,h);return this._bindAction(v,_),this._addInactiveAction(v,g,f),v}existingAction(a,l){const h=l||this._root,d=h.uuid,f="string"==typeof a?XT.findByName(h,a):a,g=this._actionsByClip[f?f.uuid:a];return void 0!==g&&g.actionByRoot[d]||null}stopAllAction(){const a=this._actions;for(let h=this._nActiveActions-1;h>=0;--h)a[h].stop();return this}update(a){const l=this._actions,h=this._nActiveActions,d=this.time+=a*=this.timeScale,f=Math.sign(a),m=this._accuIndex^=1;for(let _=0;_!==h;++_)l[_]._update(d,a,f,m);const g=this._bindings,y=this._nActiveBindings;for(let _=0;_!==y;++_)g[_].apply(m);return this}setTime(a){this.time=0;for(let l=0;l<this._actions.length;l++)this._actions[l].time=0;return this.update(a)}getRoot(){return this._root}uncacheClip(a){const l=this._actions,h=a.uuid,d=this._actionsByClip,f=d[h];if(void 0!==f){const m=f.knownActions;for(let g=0,y=m.length;g!==y;++g){const _=m[g];this._deactivateAction(_);const v=_._cacheIndex,b=l[l.length-1];_._cacheIndex=null,_._byClipCacheIndex=null,b._cacheIndex=v,l[v]=b,l.pop(),this._removeInactiveBindingsForAction(_)}delete d[h]}}uncacheRoot(a){const l=a.uuid,h=this._actionsByClip;for(const m in h){const y=h[m].actionByRoot[l];void 0!==y&&(this._deactivateAction(y),this._removeInactiveAction(y))}const f=this._bindingsByRootAndName[l];if(void 0!==f)for(const m in f){const g=f[m];g.restoreOriginalState(),this._removeInactiveBinding(g)}}uncacheAction(a,l){const h=this.existingAction(a,l);null!==h&&(this._deactivateAction(h),this._removeInactiveAction(h))}}).prototype._controlInterpolantsResultBuffer=new Float32Array(1);class hB{constructor(a){"string"==typeof a&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),a=arguments[1]),this.value=a}clone(){return new hB(void 0===this.value.clone?this.value:this.value.clone())}}(class NZe extends rg{constructor(a,l,h=1){super(a,l),this.meshPerAttribute=h}copy(a){return super.copy(a),this.meshPerAttribute=a.meshPerAttribute,this}clone(a){const l=super.clone(a);return l.meshPerAttribute=this.meshPerAttribute,l}toJSON(a){const l=super.toJSON(a);return l.isInstancedInterleavedBuffer=!0,l.meshPerAttribute=this.meshPerAttribute,l}}).prototype.isInstancedInterleavedBuffer=!0;class Nre{constructor(a=1,l=0,h=0){return this.radius=a,this.phi=l,this.theta=h,this}set(a,l,h){return this.radius=a,this.phi=l,this.theta=h,this}copy(a){return this.radius=a.radius,this.phi=a.phi,this.theta=a.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(a){return this.setFromCartesianCoords(a.x,a.y,a.z)}setFromCartesianCoords(a,l,h){return this.radius=Math.sqrt(a*a+l*l+h*h),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(a,h),this.phi=Math.acos(Io(l/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Fre=new tt;class $T{constructor(a=new tt(1/0,1/0),l=new tt(-1/0,-1/0)){this.min=a,this.max=l}set(a,l){return this.min.copy(a),this.max.copy(l),this}setFromPoints(a){this.makeEmpty();for(let l=0,h=a.length;l<h;l++)this.expandByPoint(a[l]);return this}setFromCenterAndSize(a,l){const h=Fre.copy(l).multiplyScalar(.5);return this.min.copy(a).sub(h),this.max.copy(a).add(h),this}clone(){return(new this.constructor).copy(this)}copy(a){return this.min.copy(a.min),this.max.copy(a.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(a){return this.isEmpty()?a.set(0,0):a.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(a){return this.isEmpty()?a.set(0,0):a.subVectors(this.max,this.min)}expandByPoint(a){return this.min.min(a),this.max.max(a),this}expandByVector(a){return this.min.sub(a),this.max.add(a),this}expandByScalar(a){return this.min.addScalar(-a),this.max.addScalar(a),this}containsPoint(a){return!(a.x<this.min.x||a.x>this.max.x||a.y<this.min.y||a.y>this.max.y)}containsBox(a){return this.min.x<=a.min.x&&a.max.x<=this.max.x&&this.min.y<=a.min.y&&a.max.y<=this.max.y}getParameter(a,l){return l.set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(a){return!(a.max.x<this.min.x||a.min.x>this.max.x||a.max.y<this.min.y||a.min.y>this.max.y)}clampPoint(a,l){return l.copy(a).clamp(this.min,this.max)}distanceToPoint(a){return Fre.copy(a).clamp(this.min,this.max).sub(a).length()}intersect(a){return this.min.max(a.min),this.max.min(a.max),this}union(a){return this.min.min(a.min),this.max.max(a.max),this}translate(a){return this.min.add(a),this.max.add(a),this}equals(a){return a.min.equals(this.min)&&a.max.equals(this.max)}}$T.prototype.isBox2=!0;const rp=new te,pI=new un,fB=new un;function Bre(c){const a=[];c&&c.isBone&&a.push(c);for(let l=0;l<c.children.length;l++)a.push.apply(a,Bre(c.children[l]));return a}const Wre=new Float32Array(1);new Int32Array(Wre.buffer),tc.create=function(c,a){return console.log("THREE.Curve.create() has been deprecated"),c.prototype=Object.create(tc.prototype),c.prototype.constructor=c,c.prototype.getPoint=a,c},JA.prototype.fromPoints=function(c){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(c)},class UZe extends ld{constructor(a=10,l=10,h=4473924,d=8947848){h=new Pt(h),d=new Pt(d);const f=l/2,m=a/l,g=a/2,y=[],_=[];for(let S=0,T=0,x=-g;S<=l;S++,x+=m){y.push(-g,0,x,g,0,x),y.push(x,0,-g,x,0,g);const E=S===f?h:d;E.toArray(_,T),T+=3,E.toArray(_,T),T+=3,E.toArray(_,T),T+=3,E.toArray(_,T),T+=3}const v=new Nn;v.setAttribute("position",new hn(y,3)),v.setAttribute("color",new hn(_,3)),super(v,new go({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},class VZe extends ld{constructor(a){const l=Bre(a),h=new Nn,d=[],f=[],m=new Pt(0,0,1),g=new Pt(0,1,0);for(let _=0;_<l.length;_++){const v=l[_];v.parent&&v.parent.isBone&&(d.push(0,0,0),d.push(0,0,0),f.push(m.r,m.g,m.b),f.push(g.r,g.g,g.b))}h.setAttribute("position",new hn(d,3)),h.setAttribute("color",new hn(f,3)),super(h,new go({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=a,this.bones=l,this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(a){const l=this.bones,h=this.geometry,d=h.getAttribute("position");fB.copy(this.root.matrixWorld).invert();for(let f=0,m=0;f<l.length;f++){const g=l[f];g.parent&&g.parent.isBone&&(pI.multiplyMatrices(fB,g.matrixWorld),rp.setFromMatrixPosition(pI),d.setXYZ(m,rp.x,rp.y,rp.z),pI.multiplyMatrices(fB,g.parent.matrixWorld),rp.setFromMatrixPosition(pI),d.setXYZ(m+1,rp.x,rp.y,rp.z),m+=2)}h.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(a)}}.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},dd.prototype.extractUrlBase=function(c){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Xu.extractUrlBase(c)},dd.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},$T.prototype.center=function(c){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(c)},$T.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},$T.prototype.isIntersectionBox=function(c){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(c)},$T.prototype.size=function(c){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(c)},xl.prototype.center=function(c){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(c)},xl.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},xl.prototype.isIntersectionBox=function(c){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(c)},xl.prototype.isIntersectionSphere=function(c){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(c)},xl.prototype.size=function(c){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(c)},Wf.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},EA.prototype.setFromMatrix=function(c){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(c)},po.prototype.flattenToArrayOffset=function(c,a){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(c,a)},po.prototype.multiplyVector3=function(c){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),c.applyMatrix3(this)},po.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},po.prototype.applyToBufferAttribute=function(c){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),c.applyMatrix3(this)},po.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},po.prototype.getInverse=function(c){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(c).invert()},un.prototype.extractPosition=function(c){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(c)},un.prototype.flattenToArrayOffset=function(c,a){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(c,a)},un.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new te).setFromMatrixColumn(this,3)},un.prototype.setRotationFromQuaternion=function(c){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(c)},un.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},un.prototype.multiplyVector3=function(c){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),c.applyMatrix4(this)},un.prototype.multiplyVector4=function(c){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),c.applyMatrix4(this)},un.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},un.prototype.rotateAxis=function(c){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),c.transformDirection(this)},un.prototype.crossVector=function(c){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),c.applyMatrix4(this)},un.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},un.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},un.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},un.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},un.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},un.prototype.applyToBufferAttribute=function(c){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),c.applyMatrix4(this)},un.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},un.prototype.makeFrustum=function(c,a,l,h,d,f){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(c,a,h,l,d,f)},un.prototype.getInverse=function(c){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(c).invert()},od.prototype.isIntersectionLine=function(c){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(c)},Js.prototype.multiplyVector3=function(c){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),c.applyQuaternion(this)},Js.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},tg.prototype.isIntersectionBox=function(c){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(c)},tg.prototype.isIntersectionPlane=function(c){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(c)},tg.prototype.isIntersectionSphere=function(c){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(c)},Bs.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Bs.prototype.barycoordFromPoint=function(c,a){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(c,a)},Bs.prototype.midpoint=function(c){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(c)},Bs.prototypenormal=function(c){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(c)},Bs.prototype.plane=function(c){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(c)},Bs.barycoordFromPoint=function(c,a,l,h,d){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Bs.getBarycoord(c,a,l,h,d)},Bs.normal=function(c,a,l,h){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Bs.getNormal(c,a,l,h)},Hu.prototype.extractAllPoints=function(c){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(c)},Hu.prototype.extrude=function(c){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ud(this,c)},Hu.prototype.makeGeometry=function(c){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new GT(this,c)},tt.prototype.fromAttribute=function(c,a,l){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(c,a,l)},tt.prototype.distanceToManhattan=function(c){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(c)},tt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},te.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},te.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},te.prototype.getPositionFromMatrix=function(c){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(c)},te.prototype.getScaleFromMatrix=function(c){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(c)},te.prototype.getColumnFromMatrix=function(c,a){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(a,c)},te.prototype.applyProjection=function(c){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(c)},te.prototype.fromAttribute=function(c,a,l){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(c,a,l)},te.prototype.distanceToManhattan=function(c){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(c)},te.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},hr.prototype.fromAttribute=function(c,a,l){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(c,a,l)},hr.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Yi.prototype.getChildByName=function(c){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(c)},Yi.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Yi.prototype.translate=function(c,a){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(a,c)},Yi.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Yi.prototype.applyMatrix=function(c){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(c)},Object.defineProperties(Yi.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(c){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=c}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),xs.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(xs.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),FA.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},zs.prototype.setLens=function(c,a){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==a&&(this.filmGauge=a),this.setFocalLength(c)},Object.defineProperties(Wu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(c){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=c}},shadowCameraLeft:{set:function(c){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=c}},shadowCameraRight:{set:function(c){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=c}},shadowCameraTop:{set:function(c){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=c}},shadowCameraBottom:{set:function(c){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=c}},shadowCameraNear:{set:function(c){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=c}},shadowCameraFar:{set:function(c){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=c}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(c){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=c}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(c){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=c}},shadowMapHeight:{set:function(c){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=c}}}),Object.defineProperties(ar.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===yT},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(yT)}}}),ar.prototype.setDynamic=function(c){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===c?yT:gT),this},ar.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},ar.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Nn.prototype.addIndex=function(c){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(c)},Nn.prototype.addAttribute=function(c,a){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),a&&a.isBufferAttribute||a&&a.isInterleavedBufferAttribute?"index"===c?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(a),this):this.setAttribute(c,a):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(c,new ar(arguments[1],arguments[2])))},Nn.prototype.addDrawCall=function(c,a,l){void 0!==l&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(c,a)},Nn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Nn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Nn.prototype.removeAttribute=function(c){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(c)},Nn.prototype.applyMatrix=function(c){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(c)},Object.defineProperties(Nn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),rg.prototype.setDynamic=function(c){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===c?yT:gT),this},rg.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ud.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ud.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ud.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},IT.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},hB.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Us.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Pt}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(c){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===c}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(c){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=c}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(sd.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(c){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=c}}}),ir.prototype.clearTarget=function(c,a,l,h){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(c),this.clear(a,l,h)},ir.prototype.animate=function(c){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(c)},ir.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},ir.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},ir.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},ir.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},ir.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},ir.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},ir.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},ir.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},ir.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},ir.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},ir.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},ir.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},ir.prototype.enableScissorTest=function(c){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(c)},ir.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},ir.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},ir.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},ir.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},ir.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},ir.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},ir.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},ir.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},ir.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},ir.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(ir.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(c){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=c}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(c){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=c}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(c){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===c?vr:zf}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(vie.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ql.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(c){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=c}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(c){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=c}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(c){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=c}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(c){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=c}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(c){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=c}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(c){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=c}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(c){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=c}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(c){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=c}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(c){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=c}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(c){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=c}}}),class vZe extends Yi{constructor(a){super(),this.type="Audio",this.listener=a,this.context=a.context,this.gain=this.context.createGain(),this.gain.connect(a.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(a){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=a,this.connect(),this}setMediaElementSource(a){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(a),this.connect(),this}setMediaStreamSource(a){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(a),this.connect(),this}setBuffer(a){return this.buffer=a,this.sourceType="buffer",this.autoplay&&this.play(),this}play(a=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+a;const l=this.context.createBufferSource();return l.buffer=this.buffer,l.loop=this.loop,l.loopStart=this.loopStart,l.loopEnd=this.loopEnd,l.onended=this.onEnded.bind(this),l.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=l,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let a=1,l=this.filters.length;a<l;a++)this.filters[a-1].connect(this.filters[a]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let a=1,l=this.filters.length;a<l;a++)this.filters[a-1].disconnect(this.filters[a]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(a){return a||(a=[]),!0===this._connected?(this.disconnect(),this.filters=a.slice(),this.connect()):this.filters=a.slice(),this}setDetune(a){if(this.detune=a,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(a){return this.setFilters(a?[a]:[])}setPlaybackRate(a){if(!1!==this.hasPlaybackControl)return this.playbackRate=a,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(a){if(!1!==this.hasPlaybackControl)return this.loop=a,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(a){return this.loopStart=a,this}setLoopEnd(a){return this.loopEnd=a,this}getVolume(){return this.gain.gain.value}setVolume(a){return this.gain.gain.setTargetAtTime(a,this.context.currentTime,.01),this}}.prototype.load=function(c){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const a=this;return(new pZe).load(c,function(h){a.setBuffer(h)}),this},MV.prototype.updateCubeMap=function(c,a){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(c,a)},MV.prototype.clear=function(c,a,l,h){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(c,a,l,h)},Km.crossOrigin=void 0,Km.loadTexture=function(c,a,l,h){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const d=new dre;d.setCrossOrigin(this.crossOrigin);const f=d.load(c,l,void 0,h);return a&&(f.mapping=a),f},Km.loadTextureCube=function(c,a,l,h){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const d=new hre;d.setCrossOrigin(this.crossOrigin);const f=d.load(c,l,void 0,h);return a&&(f.mapping=a),f},Km.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Km.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"137"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="137");const Xre={type:"change"},mB={type:"start"},qre={type:"end"};class jZe extends Gf{constructor(a,l){super(),void 0===l&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),l===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=a,this.domElement=l,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new te,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return g.phi},this.getAzimuthalAngle=function(){return g.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Se){Se.addEventListener("keydown",mi),this._domElementKeyEvents=Se},this.saveState=function(){h.target0.copy(h.target),h.position0.copy(h.object.position),h.zoom0=h.object.zoom},this.reset=function(){h.target.copy(h.target0),h.object.position.copy(h.position0),h.object.zoom=h.zoom0,h.object.updateProjectionMatrix(),h.dispatchEvent(Xre),h.update(),f=d.NONE},this.update=function(){const Se=new te,Ve=(new Js).setFromUnitVectors(a.up,new te(0,1,0)),ut=Ve.clone().invert(),Jt=new te,Te=new Js,Zt=2*Math.PI;return function(){const mn=h.object.position;Se.copy(mn).sub(h.target),Se.applyQuaternion(Ve),g.setFromVector3(Se),h.autoRotate&&f===d.NONE&&se(function G(){return 2*Math.PI/60/60*h.autoRotateSpeed}()),h.enableDamping?(g.theta+=y.theta*h.dampingFactor,g.phi+=y.phi*h.dampingFactor):(g.theta+=y.theta,g.phi+=y.phi);let Ze=h.minAzimuthAngle,nn=h.maxAzimuthAngle;return isFinite(Ze)&&isFinite(nn)&&(Ze<-Math.PI?Ze+=Zt:Ze>Math.PI&&(Ze-=Zt),nn<-Math.PI?nn+=Zt:nn>Math.PI&&(nn-=Zt),g.theta=Ze<=nn?Math.max(Ze,Math.min(nn,g.theta)):g.theta>(Ze+nn)/2?Math.max(Ze,g.theta):Math.min(nn,g.theta)),g.phi=Math.max(h.minPolarAngle,Math.min(h.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=_,g.radius=Math.max(h.minDistance,Math.min(h.maxDistance,g.radius)),!0===h.enableDamping?h.target.addScaledVector(v,h.dampingFactor):h.target.add(v),Se.setFromSpherical(g),Se.applyQuaternion(ut),mn.copy(h.target).add(Se),h.object.lookAt(h.target),!0===h.enableDamping?(y.theta*=1-h.dampingFactor,y.phi*=1-h.dampingFactor,v.multiplyScalar(1-h.dampingFactor)):(y.set(0,0,0),v.set(0,0,0)),_=1,!!(b||Jt.distanceToSquared(h.object.position)>m||8*(1-Te.dot(h.object.quaternion))>m)&&(h.dispatchEvent(Xre),Jt.copy(h.object.position),Te.copy(h.object.quaternion),b=!1,!0)}}(),this.dispose=function(){h.domElement.removeEventListener("contextmenu",$e),h.domElement.removeEventListener("pointerdown",pt),h.domElement.removeEventListener("pointercancel",sn),h.domElement.removeEventListener("wheel",ei),h.domElement.removeEventListener("pointermove",Rt),h.domElement.removeEventListener("pointerup",Mt),null!==h._domElementKeyEvents&&h._domElementKeyEvents.removeEventListener("keydown",mi)};const h=this,d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let f=d.NONE;const m=1e-6,g=new Nre,y=new Nre;let _=1;const v=new te;let b=!1;const S=new tt,T=new tt,x=new tt,E=new tt,I=new tt,M=new tt,D=new tt,L=new tt,P=new tt,F=[],B={};function $(){return Math.pow(.95,h.zoomSpeed)}function se(Se){y.theta-=Se}function ie(Se){y.phi-=Se}const j=function(){const Se=new te;return function(ut,Jt){Se.setFromMatrixColumn(Jt,0),Se.multiplyScalar(-ut),v.add(Se)}}(),J=function(){const Se=new te;return function(ut,Jt){!0===h.screenSpacePanning?Se.setFromMatrixColumn(Jt,1):(Se.setFromMatrixColumn(Jt,0),Se.crossVectors(h.object.up,Se)),Se.multiplyScalar(ut),v.add(Se)}}(),ae=function(){const Se=new te;return function(ut,Jt){const Te=h.domElement;if(h.object.isPerspectiveCamera){Se.copy(h.object.position).sub(h.target);let kt=Se.length();kt*=Math.tan(h.object.fov/2*Math.PI/180),j(2*ut*kt/Te.clientHeight,h.object.matrix),J(2*Jt*kt/Te.clientHeight,h.object.matrix)}else h.object.isOrthographicCamera?(j(ut*(h.object.right-h.object.left)/h.object.zoom/Te.clientWidth,h.object.matrix),J(Jt*(h.object.top-h.object.bottom)/h.object.zoom/Te.clientHeight,h.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),h.enablePan=!1)}}();function ue(Se){h.object.isPerspectiveCamera?_/=Se:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom*Se)),h.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function ge(Se){h.object.isPerspectiveCamera?_*=Se:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom/Se)),h.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function K(Se){S.set(Se.clientX,Se.clientY)}function ye(Se){E.set(Se.clientX,Se.clientY)}function qe(){1===F.length?S.set(F[0].pageX,F[0].pageY):S.set(.5*(F[0].pageX+F[1].pageX),.5*(F[0].pageY+F[1].pageY))}function Ae(){1===F.length?E.set(F[0].pageX,F[0].pageY):E.set(.5*(F[0].pageX+F[1].pageX),.5*(F[0].pageY+F[1].pageY))}function Tn(){const Se=F[0].pageX-F[1].pageX,Ve=F[0].pageY-F[1].pageY,ut=Math.sqrt(Se*Se+Ve*Ve);D.set(0,ut)}function Pe(Se){if(1==F.length)T.set(Se.pageX,Se.pageY);else{const ut=en(Se);T.set(.5*(Se.pageX+ut.x),.5*(Se.pageY+ut.y))}x.subVectors(T,S).multiplyScalar(h.rotateSpeed);const Ve=h.domElement;se(2*Math.PI*x.x/Ve.clientHeight),ie(2*Math.PI*x.y/Ve.clientHeight),S.copy(T)}function _n(Se){if(1===F.length)I.set(Se.pageX,Se.pageY);else{const Ve=en(Se);I.set(.5*(Se.pageX+Ve.x),.5*(Se.pageY+Ve.y))}M.subVectors(I,E).multiplyScalar(h.panSpeed),ae(M.x,M.y),E.copy(I)}function on(Se){const Ve=en(Se),ut=Se.pageX-Ve.x,Jt=Se.pageY-Ve.y,Te=Math.sqrt(ut*ut+Jt*Jt);L.set(0,Te),P.set(0,Math.pow(L.y/D.y,h.zoomSpeed)),ue(P.y),D.copy(L)}function pt(Se){!1!==h.enabled&&(0===F.length&&(h.domElement.setPointerCapture(Se.pointerId),h.domElement.addEventListener("pointermove",Rt),h.domElement.addEventListener("pointerup",Mt)),function mt(Se){F.push(Se)}(Se),"touch"===Se.pointerType?function fe(Se){switch(Je(Se),F.length){case 1:switch(h.touches.ONE){case 0:if(!1===h.enableRotate)return;qe(),f=d.TOUCH_ROTATE;break;case 1:if(!1===h.enablePan)return;Ae(),f=d.TOUCH_PAN;break;default:f=d.NONE}break;case 2:switch(h.touches.TWO){case 2:if(!1===h.enableZoom&&!1===h.enablePan)return;(function wt(){h.enableZoom&&Tn(),h.enablePan&&Ae()})(),f=d.TOUCH_DOLLY_PAN;break;case 3:if(!1===h.enableZoom&&!1===h.enableRotate)return;(function Bt(){h.enableZoom&&Tn(),h.enableRotate&&qe()})(),f=d.TOUCH_DOLLY_ROTATE;break;default:f=d.NONE}break;default:f=d.NONE}f!==d.NONE&&h.dispatchEvent(mB)}(Se):function ln(Se){let Ve;switch(Se.button){case 0:Ve=h.mouseButtons.LEFT;break;case 1:Ve=h.mouseButtons.MIDDLE;break;case 2:Ve=h.mouseButtons.RIGHT;break;default:Ve=-1}switch(Ve){case 1:if(!1===h.enableZoom)return;(function le(Se){D.set(Se.clientX,Se.clientY)})(Se),f=d.DOLLY;break;case 0:if(Se.ctrlKey||Se.metaKey||Se.shiftKey){if(!1===h.enablePan)return;ye(Se),f=d.PAN}else{if(!1===h.enableRotate)return;K(Se),f=d.ROTATE}break;case 2:if(Se.ctrlKey||Se.metaKey||Se.shiftKey){if(!1===h.enableRotate)return;K(Se),f=d.ROTATE}else{if(!1===h.enablePan)return;ye(Se),f=d.PAN}break;default:f=d.NONE}f!==d.NONE&&h.dispatchEvent(mB)}(Se))}function Rt(Se){!1!==h.enabled&&("touch"===Se.pointerType?function re(Se){switch(Je(Se),f){case d.TOUCH_ROTATE:if(!1===h.enableRotate)return;Pe(Se),h.update();break;case d.TOUCH_PAN:if(!1===h.enablePan)return;_n(Se),h.update();break;case d.TOUCH_DOLLY_PAN:if(!1===h.enableZoom&&!1===h.enablePan)return;(function et(Se){h.enableZoom&&on(Se),h.enablePan&&_n(Se)})(Se),h.update();break;case d.TOUCH_DOLLY_ROTATE:if(!1===h.enableZoom&&!1===h.enableRotate)return;(function Et(Se){h.enableZoom&&on(Se),h.enableRotate&&Pe(Se)})(Se),h.update();break;default:f=d.NONE}}(Se):function ct(Se){if(!1!==h.enabled)switch(f){case d.ROTATE:if(!1===h.enableRotate)return;!function ke(Se){T.set(Se.clientX,Se.clientY),x.subVectors(T,S).multiplyScalar(h.rotateSpeed);const Ve=h.domElement;se(2*Math.PI*x.x/Ve.clientHeight),ie(2*Math.PI*x.y/Ve.clientHeight),S.copy(T),h.update()}(Se);break;case d.DOLLY:if(!1===h.enableZoom)return;!function _e(Se){L.set(Se.clientX,Se.clientY),P.subVectors(L,D),P.y>0?ue($()):P.y<0&&ge($()),D.copy(L),h.update()}(Se);break;case d.PAN:if(!1===h.enablePan)return;!function Ne(Se){I.set(Se.clientX,Se.clientY),M.subVectors(I,E).multiplyScalar(h.panSpeed),ae(M.x,M.y),E.copy(I),h.update()}(Se)}}(Se))}function Mt(Se){Qt(Se),0===F.length&&(h.domElement.releasePointerCapture(Se.pointerId),h.domElement.removeEventListener("pointermove",Rt),h.domElement.removeEventListener("pointerup",Mt)),h.dispatchEvent(qre),f=d.NONE}function sn(Se){Qt(Se)}function ei(Se){!1===h.enabled||!1===h.enableZoom||f!==d.NONE||(Se.preventDefault(),h.dispatchEvent(mB),function me(Se){Se.deltaY<0?ge($()):Se.deltaY>0&&ue($()),h.update()}(Se),h.dispatchEvent(qre))}function mi(Se){!1===h.enabled||!1===h.enablePan||function Xe(Se){let Ve=!1;switch(Se.code){case h.keys.UP:ae(0,h.keyPanSpeed),Ve=!0;break;case h.keys.BOTTOM:ae(0,-h.keyPanSpeed),Ve=!0;break;case h.keys.LEFT:ae(h.keyPanSpeed,0),Ve=!0;break;case h.keys.RIGHT:ae(-h.keyPanSpeed,0),Ve=!0}Ve&&(Se.preventDefault(),h.update())}(Se)}function $e(Se){!1!==h.enabled&&Se.preventDefault()}function Qt(Se){delete B[Se.pointerId];for(let Ve=0;Ve<F.length;Ve++)if(F[Ve].pointerId==Se.pointerId)return void F.splice(Ve,1)}function Je(Se){let Ve=B[Se.pointerId];void 0===Ve&&(Ve=new tt,B[Se.pointerId]=Ve),Ve.set(Se.pageX,Se.pageY)}function en(Se){return B[(Se.pointerId===F[0].pointerId?F[1]:F[0]).pointerId]}h.domElement.addEventListener("contextmenu",$e),h.domElement.addEventListener("pointerdown",pt),h.domElement.addEventListener("pointercancel",sn),h.domElement.addEventListener("wheel",ei,{passive:!1}),this.update()}}function gB(c){const l=c.map(h=>h**2).reduce((h,d)=>h+d,0);return Math.sqrt(l)}function yB(c){return c%360*(2*Math.PI)/360}function $re(c,a){return c/2/Math.tan(yB(a/2))}class YZe{constructor(a=360/(2*Math.PI),l=10,h){this.mapRadiusMU=a,this.mapWidthMU=2*Math.PI*a,this.mapUnitsPerSphereUnits=a/l,this.sphereRadiusSU=l,this.sphereCircumferenceSU=2*Math.PI*l,this.sphereUnitsPerMapUnits=l/a,this.fovDeg=h}mapWidth2SphereHeight(a){const h=$re(a,this.fovDeg)*this.sphereUnitsPerMapUnits;return this.sphereRadiusSU+h}sphereHeight2mapWidth(a){return function XZe(c,a){return 2*c*Math.tan(yB(a/2))}((a-this.sphereRadiusSU)*this.mapUnitsPerSphereUnits,this.fovDeg)}sphereHeight2zoom(a){const l=this.sphereHeight2mapWidth(a);return this.widthMU2Zoom(l)}zoom2sphereHeight(a){const l=this.zoom2WidthMU(a);return this.mapWidth2SphereHeight(l)}spherePos2zoom(a,l,h){const d=gB([a,l,h]);return this.sphereHeight2zoom(d)}zoom2WidthMU(a){return function qZe(c,a){return a*Math.pow(.5,c)}(a,this.mapWidthMU)}widthMU2Zoom(a){return function $Ze(c,a){return Math.log2(a/c)}(a,this.mapWidthMU)}lonLatZoom2XYZ(a,l,h){const d=this.mu2rad(a),f=this.mu2rad(l),m=this.zoom2WidthMU(h),g=this.mapWidth2SphereHeight(m);return[g*Math.cos(f)*Math.sin(d),g*Math.sin(f),g*Math.cos(f)*Math.cos(d)]}xyz2LonLatZoom(a,l,h){const d=Math.asin(l/gB([a,l,h])),f=Math.asin(a/gB([a,h])),m=180*d/Math.PI;let g=180*f/Math.PI;return h<=0&&(g=180-g),[g,m,this.spherePos2zoom(a,l,h)]}mu2rad(a){return yB(a)}rad2mu(a){return function WZe(c){return c%(2*Math.PI)*360/(2*Math.PI)}(a)}}class ZZe extends xs{constructor(a,l){const h=new zie(a);super(l,new sd({vertexShader:"\n        varying vec2 vUv;\n        uniform vec4 bbox;\n        uniform vec2 textureSize;\n\n        vec2 positionToLonLat(vec3 position) {\n          float pi = 3.141592653589793;\n\n          float latRad = asin(position.y / length(position));\n          float latDeg = 180.0 * latRad / pi;\n\n          float lonRad = asin(position.x / length(position.xz));\n          float lonDeg = 180.0 * lonRad / pi;\n          if (position.z <= 0.0) {\n            lonDeg = 180.0 - lonDeg;\n          }\n          return vec2(lonDeg, latDeg);\n        }\n\n        void main() {\n          vec2 lonLat = positionToLonLat(position);\n          float u = (lonLat.x - bbox.x) / (bbox.z - bbox.x);\n          float v = (lonLat.y - bbox.y) / (bbox.w - bbox.y);\n          if  (u < 0.0) {\n            u = ((360.0 + lonLat.x) - bbox.x) / (bbox.z - bbox.x);\n          }\n          if (u > 1.0) {\n            u = ((lonLat.x - 360.0) - bbox.x) / (bbox.z - bbox.x);\n          }\n          vUv = vec2(u, v);\n          gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n        }\n        ",fragmentShader:"\n        uniform sampler2D texture1;\n        varying vec2 vUv;\n\n        void main() {\n          gl_FragColor = texture2D(texture1, vUv);\n          if (vUv.x > 1.0 || vUv.x < 0.0 || vUv.y > 1.0 || vUv.y < 0.0) {\n            gl_FragColor = vec4(0.3, 0.3, 0.3, 1.0); // <-- better: retrieve texture2D from *previous* texture.\n          }\n        }\n        ",uniforms:{texture1:{value:h},bbox:{value:[-180,-90,180,90]}}}))}perspectiveChanged(a){this.material.uniforms.bbox.value=a,this.material.uniforms.texture1.value.needsUpdate=!0}}let Yre=(()=>{class c{constructor(l,h){this.mapStateSvc=l,this.zone=h,this.subs=[],this.needsResize=!1,this.skyTexturePath="assets/image/zpos.png"}initScene(l,h,d){const f=new ir({alpha:!0,antialias:!0,canvas:l});f.setSize(l.clientWidth,l.clientHeight,!1);const m=new IT,y=new zs(50,l.clientWidth/l.clientHeight,.01,1e5);y.lookAt(0,0,0),y.position.set(-40,40,40);const _=new jZe(y,f.domElement),b=(new hre).load(new Array(6).fill(this.skyTexturePath));m.background=b;const S=document.createElement("canvas");!function o$(c,a,l,h=!1){const d=a.getContext("2d");if(!d)throw new Error("The target-canvas needs to use a 2d-context.");if(!a.width||!a.height)throw new Error("TargetCanvas: width or height have not been set.");d instanceof CanvasRenderingContext2D&&d.clearRect(0,0,a.width,a.height);const f=c.getSize();a.width=f[0],a.height=f[1];const m=yF(c.getLayers().getArray()),g=[];for(const y of m)if(y.getVisible()&&y.getOpacity()>0){const _=y.on("postrender",v=>{const S=v.context.canvas;d instanceof CanvasRenderingContext2D&&(d.beginPath(),d.drawImage(S,0,0,S.clientWidth,S.clientHeight,0,0,a.width,a.height),d.closePath())});Array.isArray(_)?_.map(v=>g.push(v)):g.push(_)}h?c.on("rendercomplete",y=>{l(a)}):c.once("rendercomplete",y=>{for(const _ of g)Y9(_);l(a)}),c.renderSync()}(d,S,()=>{},!0);const T=new ZZe(S,h.geometry);m.add(T);const x=new YZe(360/(2*Math.PI),15,50);d.on("postrender",E=>{const I=d.getView().calculateExtent(d.getSize()),[M,D]=d.getView().getCenter(),L=d.getView().getZoom();T.perspectiveChanged(I);const[P,F,B]=x.lonLatZoom2XYZ(M,D,L);y.position.set(P,F,B),y.lookAt(0,0,0)}),_.addEventListener("change",E=>{const I=y.position,[M,D,L]=x.xyz2LonLatZoom(I.x,I.y,I.z);this.mapStateSvc.setMapState({center:{lon:M,lat:D},zoom:L})}),this.zone.runOutsideAngular(()=>{!function g2e(c,a){const l=1e3/c;let d,f,m,h=l;const g=()=>{d=window.performance.now(),a(h),f=window.performance.now(),h=f-d,m=Math.max(l-h,0),setTimeout(()=>{requestAnimationFrame(g)},m)};g()}(30,E=>{this.needsResize&&((l.clientHeight!==l.height||l.clientWidth!==l.width)&&(f.setSize(l.clientWidth,l.clientHeight,!1),y.aspect=l.clientWidth/l.clientHeight,y.updateProjectionMatrix()),this.needsResize=!1),f.render(m,y)})})}onResize(l){this.needsResize=!0}ngOnDestroy(){this.subs.map(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(Oe(oo),Oe(Yn))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();class KZe extends dd{constructor(a){super(a),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(l){return new tKe(l)}),this.register(function(l){return new aKe(l)}),this.register(function(l){return new lKe(l)}),this.register(function(l){return new nKe(l)}),this.register(function(l){return new iKe(l)}),this.register(function(l){return new rKe(l)}),this.register(function(l){return new sKe(l)}),this.register(function(l){return new oKe(l)}),this.register(function(l){return new QZe(l)}),this.register(function(l){return new cKe(l)})}load(a,l,h,d){const f=this;let m;m=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Xu.extractUrlBase(a),this.manager.itemStart(a);const g=function(_){d?d(_):console.error(_),f.manager.itemError(a),f.manager.itemEnd(a)},y=new Zc(this.manager);y.setPath(this.path),y.setResponseType("arraybuffer"),y.setRequestHeader(this.requestHeader),y.setWithCredentials(this.withCredentials),y.load(a,function(_){try{f.parse(_,m,function(v){l(v),f.manager.itemEnd(a)},g)}catch(v){g(v)}},h,g)}setDRACOLoader(a){return this.dracoLoader=a,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(a){return this.ktx2Loader=a,this}setMeshoptDecoder(a){return this.meshoptDecoder=a,this}register(a){return-1===this.pluginCallbacks.indexOf(a)&&this.pluginCallbacks.push(a),this}unregister(a){return-1!==this.pluginCallbacks.indexOf(a)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(a),1),this}parse(a,l,h,d){let f;const m={},g={};if("string"==typeof a)f=a;else if(Xu.decodeText(new Uint8Array(a,0,4))===Zre){try{m[Mi.KHR_BINARY_GLTF]=new uKe(a)}catch(b){return void(d&&d(b))}f=m[Mi.KHR_BINARY_GLTF].content}else f=Xu.decodeText(new Uint8Array(a));const y=JSON.parse(f);if(void 0===y.asset||y.asset.version[0]<2)return void(d&&d(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const _=new TKe(y,{path:l||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});_.fileLoader.setRequestHeader(this.requestHeader);for(let v=0;v<this.pluginCallbacks.length;v++){const b=this.pluginCallbacks[v](_);g[b.name]=b,m[b.name]=!0}if(y.extensionsUsed)for(let v=0;v<y.extensionsUsed.length;++v){const b=y.extensionsUsed[v],S=y.extensionsRequired||[];switch(b){case Mi.KHR_MATERIALS_UNLIT:m[b]=new eKe;break;case Mi.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:m[b]=new fKe;break;case Mi.KHR_DRACO_MESH_COMPRESSION:m[b]=new hKe(y,this.dracoLoader);break;case Mi.KHR_TEXTURE_TRANSFORM:m[b]=new dKe;break;case Mi.KHR_MESH_QUANTIZATION:m[b]=new pKe;break;default:S.indexOf(b)>=0&&void 0===g[b]&&console.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}_.setExtensions(m),_.setPlugins(g),_.parse(h,d)}parseAsync(a,l){const h=this;return new Promise(function(d,f){h.parse(a,l,d,f)})}}function JZe(){let c={};return{get:function(a){return c[a]},add:function(a,l){c[a]=l},remove:function(a){delete c[a]},removeAll:function(){c={}}}}const Mi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class QZe{constructor(a){this.parser=a,this.name=Mi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const a=this.parser,l=this.parser.json.nodes||[];for(let h=0,d=l.length;h<d;h++){const f=l[h];f.extensions&&f.extensions[this.name]&&void 0!==f.extensions[this.name].light&&a._addNodeRef(this.cache,f.extensions[this.name].light)}}_loadLight(a){const l=this.parser,h="light:"+a;let d=l.cache.get(h);if(d)return d;const f=l.json,y=((f.extensions&&f.extensions[this.name]||{}).lights||[])[a];let _;const v=new Pt(16777215);void 0!==y.color&&v.fromArray(y.color);const b=void 0!==y.range?y.range:0;switch(y.type){case"directional":_=new uI(v),_.target.position.set(0,0,-1),_.add(_.target);break;case"point":_=new lB(v),_.distance=b;break;case"spot":_=new oB(v),_.distance=b,y.spot=y.spot||{},y.spot.innerConeAngle=void 0!==y.spot.innerConeAngle?y.spot.innerConeAngle:0,y.spot.outerConeAngle=void 0!==y.spot.outerConeAngle?y.spot.outerConeAngle:Math.PI/4,_.angle=y.spot.outerConeAngle,_.penumbra=1-y.spot.innerConeAngle/y.spot.outerConeAngle,_.target.position.set(0,0,-1),_.add(_.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+y.type)}return _.position.set(0,0,0),_.decay=2,void 0!==y.intensity&&(_.intensity=y.intensity),_.name=l.createUniqueName(y.name||"light_"+a),d=Promise.resolve(_),l.cache.add(h,d),d}createNodeAttachment(a){const l=this,h=this.parser,f=h.json.nodes[a],g=(f.extensions&&f.extensions[this.name]||{}).light;return void 0===g?null:this._loadLight(g).then(function(y){return h._getNodeRef(l.cache,g,y)})}}class eKe{constructor(){this.name=Mi.KHR_MATERIALS_UNLIT}getMaterialType(){return Ml}extendParams(a,l,h){const d=[];a.color=new Pt(1,1,1),a.opacity=1;const f=l.pbrMetallicRoughness;if(f){if(Array.isArray(f.baseColorFactor)){const m=f.baseColorFactor;a.color.fromArray(m),a.opacity=m[3]}void 0!==f.baseColorTexture&&d.push(h.assignTexture(a,"map",f.baseColorTexture))}return Promise.all(d)}}class tKe{constructor(a){this.parser=a,this.name=Mi.KHR_MATERIALS_CLEARCOAT}getMaterialType(a){const h=this.parser.json.materials[a];return h.extensions&&h.extensions[this.name]?ip:null}extendMaterialParams(a,l){const h=this.parser,d=h.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],m=d.extensions[this.name];if(void 0!==m.clearcoatFactor&&(l.clearcoat=m.clearcoatFactor),void 0!==m.clearcoatTexture&&f.push(h.assignTexture(l,"clearcoatMap",m.clearcoatTexture)),void 0!==m.clearcoatRoughnessFactor&&(l.clearcoatRoughness=m.clearcoatRoughnessFactor),void 0!==m.clearcoatRoughnessTexture&&f.push(h.assignTexture(l,"clearcoatRoughnessMap",m.clearcoatRoughnessTexture)),void 0!==m.clearcoatNormalTexture&&(f.push(h.assignTexture(l,"clearcoatNormalMap",m.clearcoatNormalTexture)),void 0!==m.clearcoatNormalTexture.scale)){const g=m.clearcoatNormalTexture.scale;l.clearcoatNormalScale=new tt(g,g)}return Promise.all(f)}}class nKe{constructor(a){this.parser=a,this.name=Mi.KHR_MATERIALS_SHEEN}getMaterialType(a){const h=this.parser.json.materials[a];return h.extensions&&h.extensions[this.name]?ip:null}extendMaterialParams(a,l){const h=this.parser,d=h.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[];l.sheenColor=new Pt(0,0,0),l.sheenRoughness=0,l.sheen=1;const m=d.extensions[this.name];return void 0!==m.sheenColorFactor&&l.sheenColor.fromArray(m.sheenColorFactor),void 0!==m.sheenRoughnessFactor&&(l.sheenRoughness=m.sheenRoughnessFactor),void 0!==m.sheenColorTexture&&f.push(h.assignTexture(l,"sheenColorMap",m.sheenColorTexture)),void 0!==m.sheenRoughnessTexture&&f.push(h.assignTexture(l,"sheenRoughnessMap",m.sheenRoughnessTexture)),Promise.all(f)}}class iKe{constructor(a){this.parser=a,this.name=Mi.KHR_MATERIALS_TRANSMISSION}getMaterialType(a){const h=this.parser.json.materials[a];return h.extensions&&h.extensions[this.name]?ip:null}extendMaterialParams(a,l){const h=this.parser,d=h.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],m=d.extensions[this.name];return void 0!==m.transmissionFactor&&(l.transmission=m.transmissionFactor),void 0!==m.transmissionTexture&&f.push(h.assignTexture(l,"transmissionMap",m.transmissionTexture)),Promise.all(f)}}class rKe{constructor(a){this.parser=a,this.name=Mi.KHR_MATERIALS_VOLUME}getMaterialType(a){const h=this.parser.json.materials[a];return h.extensions&&h.extensions[this.name]?ip:null}extendMaterialParams(a,l){const h=this.parser,d=h.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],m=d.extensions[this.name];l.thickness=void 0!==m.thicknessFactor?m.thicknessFactor:0,void 0!==m.thicknessTexture&&f.push(h.assignTexture(l,"thicknessMap",m.thicknessTexture)),l.attenuationDistance=m.attenuationDistance||0;const g=m.attenuationColor||[1,1,1];return l.attenuationColor=new Pt(g[0],g[1],g[2]),Promise.all(f)}}class sKe{constructor(a){this.parser=a,this.name=Mi.KHR_MATERIALS_IOR}getMaterialType(a){const h=this.parser.json.materials[a];return h.extensions&&h.extensions[this.name]?ip:null}extendMaterialParams(a,l){const d=this.parser.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=d.extensions[this.name];return l.ior=void 0!==f.ior?f.ior:1.5,Promise.resolve()}}class oKe{constructor(a){this.parser=a,this.name=Mi.KHR_MATERIALS_SPECULAR}getMaterialType(a){const h=this.parser.json.materials[a];return h.extensions&&h.extensions[this.name]?ip:null}extendMaterialParams(a,l){const h=this.parser,d=h.json.materials[a];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const f=[],m=d.extensions[this.name];l.specularIntensity=void 0!==m.specularFactor?m.specularFactor:1,void 0!==m.specularTexture&&f.push(h.assignTexture(l,"specularIntensityMap",m.specularTexture));const g=m.specularColorFactor||[1,1,1];return l.specularColor=new Pt(g[0],g[1],g[2]),void 0!==m.specularColorTexture&&f.push(h.assignTexture(l,"specularColorMap",m.specularColorTexture).then(function(y){y.encoding=vr})),Promise.all(f)}}class aKe{constructor(a){this.parser=a,this.name=Mi.KHR_TEXTURE_BASISU}loadTexture(a){const l=this.parser,h=l.json,d=h.textures[a];if(!d.extensions||!d.extensions[this.name])return null;const m=h.images[d.extensions[this.name].source],g=l.options.ktx2Loader;if(!g){if(h.extensionsRequired&&h.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return l.loadTextureImage(a,m,g)}}class lKe{constructor(a){this.parser=a,this.name=Mi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(a){const l=this.name,h=this.parser,d=h.json,f=d.textures[a];if(!f.extensions||!f.extensions[l])return null;const g=d.images[f.extensions[l].source];let y=h.textureLoader;if(g.uri){const _=h.options.manager.getHandler(g.uri);null!==_&&(y=_)}return this.detectSupport().then(function(_){if(_)return h.loadTextureImage(a,g,y);if(d.extensionsRequired&&d.extensionsRequired.indexOf(l)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return h.loadTexture(a)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(a){const l=new Image;l.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",l.onload=l.onerror=function(){a(1===l.height)}})),this.isSupported}}class cKe{constructor(a){this.name=Mi.EXT_MESHOPT_COMPRESSION,this.parser=a}loadBufferView(a){const l=this.parser.json,h=l.bufferViews[a];if(h.extensions&&h.extensions[this.name]){const d=h.extensions[this.name],f=this.parser.getDependency("buffer",d.buffer),m=this.parser.options.meshoptDecoder;if(!m||!m.supported){if(l.extensionsRequired&&l.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([f,m.ready]).then(function(g){const y=d.byteOffset||0,_=d.byteLength||0,v=d.count,b=d.byteStride,S=new ArrayBuffer(v*b),T=new Uint8Array(g[0],y,_);return m.decodeGltfBuffer(new Uint8Array(S),v,b,T,d.mode,d.filter),S})}return null}}const Zre="glTF";class uKe{constructor(a){this.name=Mi.KHR_BINARY_GLTF,this.content=null,this.body=null;const l=new DataView(a,0,12);if(this.header={magic:Xu.decodeText(new Uint8Array(a.slice(0,4))),version:l.getUint32(4,!0),length:l.getUint32(8,!0)},this.header.magic!==Zre)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const h=this.header.length-12,d=new DataView(a,12);let f=0;for(;f<h;){const m=d.getUint32(f,!0);f+=4;const g=d.getUint32(f,!0);if(f+=4,1313821514===g){const y=new Uint8Array(a,12+f,m);this.content=Xu.decodeText(y)}else if(5130562===g){const y=12+f;this.body=a.slice(y,y+m)}f+=m}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class hKe{constructor(a,l){if(!l)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Mi.KHR_DRACO_MESH_COMPRESSION,this.json=a,this.dracoLoader=l,this.dracoLoader.preload()}decodePrimitive(a,l){const h=this.json,d=this.dracoLoader,f=a.extensions[this.name].bufferView,m=a.extensions[this.name].attributes,g={},y={},_={};for(const v in m){const b=vB[v]||v.toLowerCase();g[b]=m[v]}for(const v in a.attributes){const b=vB[v]||v.toLowerCase();if(void 0!==m[v]){const S=h.accessors[a.attributes[v]];_[b]=ZT[S.componentType],y[b]=!0===S.normalized}}return l.getDependency("bufferView",f).then(function(v){return new Promise(function(b){d.decodeDracoFile(v,function(S){for(const T in S.attributes){const x=S.attributes[T],E=y[T];void 0!==E&&(x.normalized=E)}b(S)},g,_)})})}}class dKe{constructor(){this.name=Mi.KHR_TEXTURE_TRANSFORM}extendTexture(a,l){return void 0!==l.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===l.offset&&void 0===l.rotation&&void 0===l.scale||(a=a.clone(),void 0!==l.offset&&a.offset.fromArray(l.offset),void 0!==l.rotation&&(a.rotation=l.rotation),void 0!==l.scale&&a.repeat.fromArray(l.scale),a.needsUpdate=!0),a}}class _B extends r0{constructor(a){super(),this.isGLTFSpecularGlossinessMaterial=!0;const l=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),h=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),d=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),f=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),m=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),g={specular:{value:(new Pt).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=g,this.onBeforeCompile=function(y){for(const _ in g)y.uniforms[_]=g[_];y.fragmentShader=y.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",l).replace("#include <metalnessmap_pars_fragment>",h).replace("#include <roughnessmap_fragment>",d).replace("#include <metalnessmap_fragment>",f).replace("#include <lights_physical_fragment>",m)},Object.defineProperties(this,{specular:{get:function(){return g.specular.value},set:function(y){g.specular.value=y}},specularMap:{get:function(){return g.specularMap.value},set:function(y){g.specularMap.value=y,y?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return g.glossiness.value},set:function(y){g.glossiness.value=y}},glossinessMap:{get:function(){return g.glossinessMap.value},set:function(y){g.glossinessMap.value=y,y?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(a)}copy(a){return super.copy(a),this.specularMap=a.specularMap,this.specular.copy(a.specular),this.glossinessMap=a.glossinessMap,this.glossiness=a.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class fKe{constructor(){this.name=Mi.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return _B}extendParams(a,l,h){const d=l.extensions[this.name];a.color=new Pt(1,1,1),a.opacity=1;const f=[];if(Array.isArray(d.diffuseFactor)){const m=d.diffuseFactor;a.color.fromArray(m),a.opacity=m[3]}if(void 0!==d.diffuseTexture&&f.push(h.assignTexture(a,"map",d.diffuseTexture)),a.emissive=new Pt(0,0,0),a.glossiness=void 0!==d.glossinessFactor?d.glossinessFactor:1,a.specular=new Pt(1,1,1),Array.isArray(d.specularFactor)&&a.specular.fromArray(d.specularFactor),void 0!==d.specularGlossinessTexture){const m=d.specularGlossinessTexture;f.push(h.assignTexture(a,"glossinessMap",m)),f.push(h.assignTexture(a,"specularMap",m))}return Promise.all(f)}createMaterial(a){const l=new _B(a);return l.fog=!0,l.color=a.color,l.map=void 0===a.map?null:a.map,l.lightMap=null,l.lightMapIntensity=1,l.aoMap=void 0===a.aoMap?null:a.aoMap,l.aoMapIntensity=1,l.emissive=a.emissive,l.emissiveIntensity=1,l.emissiveMap=void 0===a.emissiveMap?null:a.emissiveMap,l.bumpMap=void 0===a.bumpMap?null:a.bumpMap,l.bumpScale=1,l.normalMap=void 0===a.normalMap?null:a.normalMap,l.normalMapType=0,a.normalScale&&(l.normalScale=a.normalScale),l.displacementMap=null,l.displacementScale=1,l.displacementBias=0,l.specularMap=void 0===a.specularMap?null:a.specularMap,l.specular=a.specular,l.glossinessMap=void 0===a.glossinessMap?null:a.glossinessMap,l.glossiness=a.glossiness,l.alphaMap=null,l.envMap=void 0===a.envMap?null:a.envMap,l.envMapIntensity=1,l.refractionRatio=.98,l}}class pKe{constructor(){this.name=Mi.KHR_MESH_QUANTIZATION}}class dg extends hd{constructor(a,l,h,d){super(a,l,h,d)}copySampleValue_(a){const l=this.resultBuffer,h=this.sampleValues,d=this.valueSize,f=a*d*3+d;for(let m=0;m!==d;m++)l[m]=h[f+m];return l}}dg.prototype.beforeStart_=dg.prototype.copySampleValue_,dg.prototype.afterEnd_=dg.prototype.copySampleValue_,dg.prototype.interpolate_=function(c,a,l,h){const d=this.resultBuffer,f=this.sampleValues,m=this.valueSize,g=2*m,y=3*m,_=h-a,v=(l-a)/_,b=v*v,S=b*v,T=c*y,x=T-y,E=-2*S+3*b,I=S-b,M=1-E,D=I-b+v;for(let L=0;L!==m;L++)d[L]=M*f[x+L+m]+D*(f[x+L+g]*_)+E*f[T+L+m]+I*(f[T+L]*_);return d};const mKe=new Js;class gKe extends dg{interpolate_(a,l,h,d){const f=super.interpolate_(a,l,h,d);return mKe.fromArray(f).normalize().toArray(f),f}}const ZT={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Jre={9728:ws,9729:Gr,9984:1004,9985:1007,9986:1005,9987:Vf},Qre={33071:Do,33648:1002,10497:qm},ese={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},vB={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},sp={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},yKe={CUBICSPLINE:void 0,LINEAR:xv,STEP:mT};function _Ke(c){return void 0===c.DefaultMaterial&&(c.DefaultMaterial=new r0({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),c.DefaultMaterial}function KT(c,a,l){for(const h in l.extensions)void 0===c[h]&&(a.userData.gltfExtensions=a.userData.gltfExtensions||{},a.userData.gltfExtensions[h]=l.extensions[h])}function fg(c,a){void 0!==a.extras&&("object"==typeof a.extras?Object.assign(c.userData,a.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+a.extras))}function bKe(c,a){if(c.updateMorphTargets(),void 0!==a.weights)for(let l=0,h=a.weights.length;l<h;l++)c.morphTargetInfluences[l]=a.weights[l];if(a.extras&&Array.isArray(a.extras.targetNames)){const l=a.extras.targetNames;if(c.morphTargetInfluences.length===l.length){c.morphTargetDictionary={};for(let h=0,d=l.length;h<d;h++)c.morphTargetDictionary[l[h]]=h}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function SKe(c){const a=c.extensions&&c.extensions[Mi.KHR_DRACO_MESH_COMPRESSION];let l;return l=a?"draco:"+a.bufferView+":"+a.indices+":"+tse(a.attributes):c.indices+":"+tse(c.attributes)+":"+c.mode,l}function tse(c){let a="";const l=Object.keys(c).sort();for(let h=0,d=l.length;h<d;h++)a+=l[h]+":"+c[l[h]]+";";return a}function SB(c){switch(c){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class TKe{constructor(a={},l={}){this.json=a,this.extensions={},this.plugins={},this.options=l,this.cache=new JZe,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},this.textureLoader=typeof createImageBitmap<"u"&&!1===/Firefox|^((?!chrome|android).)*safari/i.test(navigator.userAgent)?new Mre(this.options.manager):new dre(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Zc(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(a){this.extensions=a}setPlugins(a){this.plugins=a}parse(a,l){const h=this,d=this.json,f=this.extensions;this.cache.removeAll(),this._invokeAll(function(m){return m._markDefs&&m._markDefs()}),Promise.all(this._invokeAll(function(m){return m.beforeRoot&&m.beforeRoot()})).then(function(){return Promise.all([h.getDependencies("scene"),h.getDependencies("animation"),h.getDependencies("camera")])}).then(function(m){const g={scene:m[0][d.scene||0],scenes:m[0],animations:m[1],cameras:m[2],asset:d.asset,parser:h,userData:{}};KT(f,g,d),fg(g,d),Promise.all(h._invokeAll(function(y){return y.afterRoot&&y.afterRoot(g)})).then(function(){a(g)})}).catch(l)}_markDefs(){const a=this.json.nodes||[],l=this.json.skins||[],h=this.json.meshes||[];for(let d=0,f=l.length;d<f;d++){const m=l[d].joints;for(let g=0,y=m.length;g<y;g++)a[m[g]].isBone=!0}for(let d=0,f=a.length;d<f;d++){const m=a[d];void 0!==m.mesh&&(this._addNodeRef(this.meshCache,m.mesh),void 0!==m.skin&&(h[m.mesh].isSkinnedMesh=!0)),void 0!==m.camera&&this._addNodeRef(this.cameraCache,m.camera)}}_addNodeRef(a,l){void 0!==l&&(void 0===a.refs[l]&&(a.refs[l]=a.uses[l]=0),a.refs[l]++)}_getNodeRef(a,l,h){if(a.refs[l]<=1)return h;const d=h.clone(),f=(m,g)=>{const y=this.associations.get(m);null!=y&&this.associations.set(g,y);for(const[_,v]of m.children.entries())f(v,g.children[_])};return f(h,d),d.name+="_instance_"+a.uses[l]++,d}_invokeOne(a){const l=Object.values(this.plugins);l.push(this);for(let h=0;h<l.length;h++){const d=a(l[h]);if(d)return d}return null}_invokeAll(a){const l=Object.values(this.plugins);l.unshift(this);const h=[];for(let d=0;d<l.length;d++){const f=a(l[d]);f&&h.push(f)}return h}getDependency(a,l){const h=a+":"+l;let d=this.cache.get(h);if(!d){switch(a){case"scene":d=this.loadScene(l);break;case"node":d=this.loadNode(l);break;case"mesh":d=this._invokeOne(function(f){return f.loadMesh&&f.loadMesh(l)});break;case"accessor":d=this.loadAccessor(l);break;case"bufferView":d=this._invokeOne(function(f){return f.loadBufferView&&f.loadBufferView(l)});break;case"buffer":d=this.loadBuffer(l);break;case"material":d=this._invokeOne(function(f){return f.loadMaterial&&f.loadMaterial(l)});break;case"texture":d=this._invokeOne(function(f){return f.loadTexture&&f.loadTexture(l)});break;case"skin":d=this.loadSkin(l);break;case"animation":d=this.loadAnimation(l);break;case"camera":d=this.loadCamera(l);break;default:throw new Error("Unknown type: "+a)}this.cache.add(h,d)}return d}getDependencies(a){let l=this.cache.get(a);if(!l){const h=this;l=Promise.all((this.json[a+("mesh"===a?"es":"s")]||[]).map(function(f,m){return h.getDependency(a,m)})),this.cache.add(a,l)}return l}loadBuffer(a){const l=this.json.buffers[a],h=this.fileLoader;if(l.type&&"arraybuffer"!==l.type)throw new Error("THREE.GLTFLoader: "+l.type+" buffer type is not supported.");if(void 0===l.uri&&0===a)return Promise.resolve(this.extensions[Mi.KHR_BINARY_GLTF].body);const d=this.options;return new Promise(function(f,m){h.load(Xu.resolveURL(l.uri,d.path),f,void 0,function(){m(new Error('THREE.GLTFLoader: Failed to load buffer "'+l.uri+'".'))})})}loadBufferView(a){const l=this.json.bufferViews[a];return this.getDependency("buffer",l.buffer).then(function(h){const f=l.byteOffset||0;return h.slice(f,f+(l.byteLength||0))})}loadAccessor(a){const l=this,h=this.json,d=this.json.accessors[a];if(void 0===d.bufferView&&void 0===d.sparse)return Promise.resolve(null);const f=[];return f.push(void 0!==d.bufferView?this.getDependency("bufferView",d.bufferView):null),void 0!==d.sparse&&(f.push(this.getDependency("bufferView",d.sparse.indices.bufferView)),f.push(this.getDependency("bufferView",d.sparse.values.bufferView))),Promise.all(f).then(function(m){const g=m[0],y=ese[d.type],_=ZT[d.componentType],v=_.BYTES_PER_ELEMENT,S=d.byteOffset||0,T=void 0!==d.bufferView?h.bufferViews[d.bufferView].byteStride:void 0,x=!0===d.normalized;let E,I;if(T&&T!==v*y){const M=Math.floor(S/T),D="InterleavedBuffer:"+d.bufferView+":"+d.componentType+":"+M+":"+d.count;let L=l.cache.get(D);L||(E=new _(g,M*T,d.count*T/v),L=new rg(E,T/v),l.cache.add(D,L)),I=new Qf(L,y,S%T/v,x)}else E=null===g?new _(d.count*y):new _(g,S,d.count*y),I=new ar(E,y,x);if(void 0!==d.sparse){const P=d.sparse.values.byteOffset||0,F=new(0,ZT[d.sparse.indices.componentType])(m[1],d.sparse.indices.byteOffset||0,d.sparse.count*ese.SCALAR),B=new _(m[2],P,d.sparse.count*y);null!==g&&(I=new ar(I.array.slice(),I.itemSize,I.normalized));for(let G=0,$=F.length;G<$;G++){const se=F[G];if(I.setX(se,B[G*y]),y>=2&&I.setY(se,B[G*y+1]),y>=3&&I.setZ(se,B[G*y+2]),y>=4&&I.setW(se,B[G*y+3]),y>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return I})}loadTexture(a){const l=this.json,f=l.images[l.textures[a].source];let m=this.textureLoader;if(f.uri){const g=this.options.manager.getHandler(f.uri);null!==g&&(m=g)}return this.loadTextureImage(a,f,m)}loadTextureImage(a,l,h){const d=this,f=this.json,m=this.options,g=f.textures[a],y=(l.uri||l.bufferView)+":"+g.sampler;if(this.textureCache[y])return this.textureCache[y];const _=self.URL||self.webkitURL;let v=l.uri||"",b=!1;if(void 0!==l.bufferView)v=d.getDependency("bufferView",l.bufferView).then(function(T){b=!0;const x=new Blob([T],{type:l.mimeType});return v=_.createObjectURL(x),v});else if(void 0===l.uri)throw new Error("THREE.GLTFLoader: Image "+a+" is missing URI and bufferView");const S=Promise.resolve(v).then(function(T){return new Promise(function(x,E){let I=x;!0===h.isImageBitmapLoader&&(I=function(M){const D=new Cs(M);D.needsUpdate=!0,x(D)}),h.load(Xu.resolveURL(T,m.path),I,void 0,E)})}).then(function(T){!0===b&&_.revokeObjectURL(v),T.flipY=!1,g.name&&(T.name=g.name);const E=(f.samplers||{})[g.sampler]||{};return T.magFilter=Jre[E.magFilter]||Gr,T.minFilter=Jre[E.minFilter]||Vf,T.wrapS=Qre[E.wrapS]||qm,T.wrapT=Qre[E.wrapT]||qm,d.associations.set(T,{textures:a}),T}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",v),null});return this.textureCache[y]=S,S}assignTexture(a,l,h){const d=this;return this.getDependency("texture",h.index).then(function(f){if(void 0!==h.texCoord&&0!=h.texCoord&&!("aoMap"===l&&1==h.texCoord)&&console.warn("THREE.GLTFLoader: Custom UV set "+h.texCoord+" for texture "+l+" not yet supported."),d.extensions[Mi.KHR_TEXTURE_TRANSFORM]){const m=void 0!==h.extensions?h.extensions[Mi.KHR_TEXTURE_TRANSFORM]:void 0;if(m){const g=d.associations.get(f);f=d.extensions[Mi.KHR_TEXTURE_TRANSFORM].extendTexture(f,m),d.associations.set(f,g)}}return a[l]=f,f})}assignFinalMaterial(a){const l=a.geometry;let h=a.material;const d=void 0===l.attributes.tangent,f=void 0!==l.attributes.color,m=void 0===l.attributes.normal;if(a.isPoints){const g="PointsMaterial:"+h.uuid;let y=this.cache.get(g);y||(y=new sg,Us.prototype.copy.call(y,h),y.color.copy(h.color),y.map=h.map,y.sizeAttenuation=!1,this.cache.add(g,y)),h=y}else if(a.isLine){const g="LineBasicMaterial:"+h.uuid;let y=this.cache.get(g);y||(y=new go,Us.prototype.copy.call(y,h),y.color.copy(h.color),this.cache.add(g,y)),h=y}if(d||f||m){let g="ClonedMaterial:"+h.uuid+":";h.isGLTFSpecularGlossinessMaterial&&(g+="specular-glossiness:"),d&&(g+="derivative-tangents:"),f&&(g+="vertex-colors:"),m&&(g+="flat-shading:");let y=this.cache.get(g);y||(y=h.clone(),f&&(y.vertexColors=!0),m&&(y.flatShading=!0),d&&(y.normalScale&&(y.normalScale.y*=-1),y.clearcoatNormalScale&&(y.clearcoatNormalScale.y*=-1)),this.cache.add(g,y),this.associations.set(y,this.associations.get(h))),h=y}h.aoMap&&void 0===l.attributes.uv2&&void 0!==l.attributes.uv&&l.setAttribute("uv2",l.attributes.uv),a.material=h}getMaterialType(){return r0}loadMaterial(a){const l=this,d=this.extensions,f=this.json.materials[a];let m;const g={},y=f.extensions||{},_=[];if(y[Mi.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const b=d[Mi.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];m=b.getMaterialType(),_.push(b.extendParams(g,f,l))}else if(y[Mi.KHR_MATERIALS_UNLIT]){const b=d[Mi.KHR_MATERIALS_UNLIT];m=b.getMaterialType(),_.push(b.extendParams(g,f,l))}else{const b=f.pbrMetallicRoughness||{};if(g.color=new Pt(1,1,1),g.opacity=1,Array.isArray(b.baseColorFactor)){const S=b.baseColorFactor;g.color.fromArray(S),g.opacity=S[3]}void 0!==b.baseColorTexture&&_.push(l.assignTexture(g,"map",b.baseColorTexture)),g.metalness=void 0!==b.metallicFactor?b.metallicFactor:1,g.roughness=void 0!==b.roughnessFactor?b.roughnessFactor:1,void 0!==b.metallicRoughnessTexture&&(_.push(l.assignTexture(g,"metalnessMap",b.metallicRoughnessTexture)),_.push(l.assignTexture(g,"roughnessMap",b.metallicRoughnessTexture))),m=this._invokeOne(function(S){return S.getMaterialType&&S.getMaterialType(a)}),_.push(Promise.all(this._invokeAll(function(S){return S.extendMaterialParams&&S.extendMaterialParams(a,g)})))}!0===f.doubleSided&&(g.side=2);const v=f.alphaMode||"OPAQUE";if("BLEND"===v?(g.transparent=!0,g.depthWrite=!1):(g.transparent=!1,"MASK"===v&&(g.alphaTest=void 0!==f.alphaCutoff?f.alphaCutoff:.5)),void 0!==f.normalTexture&&m!==Ml&&(_.push(l.assignTexture(g,"normalMap",f.normalTexture)),g.normalScale=new tt(1,1),void 0!==f.normalTexture.scale)){const b=f.normalTexture.scale;g.normalScale.set(b,b)}return void 0!==f.occlusionTexture&&m!==Ml&&(_.push(l.assignTexture(g,"aoMap",f.occlusionTexture)),void 0!==f.occlusionTexture.strength&&(g.aoMapIntensity=f.occlusionTexture.strength)),void 0!==f.emissiveFactor&&m!==Ml&&(g.emissive=(new Pt).fromArray(f.emissiveFactor)),void 0!==f.emissiveTexture&&m!==Ml&&_.push(l.assignTexture(g,"emissiveMap",f.emissiveTexture)),Promise.all(_).then(function(){let b;return b=m===_B?d[Mi.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(g):new m(g),f.name&&(b.name=f.name),b.map&&(b.map.encoding=vr),b.emissiveMap&&(b.emissiveMap.encoding=vr),fg(b,f),l.associations.set(b,{materials:a}),f.extensions&&KT(d,b,f),b})}createUniqueName(a){const l=Rr.sanitizeNodeName(a||"");let h=l;for(let d=1;this.nodeNamesUsed[h];++d)h=l+"_"+d;return this.nodeNamesUsed[h]=!0,h}loadGeometries(a){const l=this,h=this.extensions,d=this.primitiveCache;function f(g){return h[Mi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(g,l).then(function(y){return ise(y,g,l)})}const m=[];for(let g=0,y=a.length;g<y;g++){const _=a[g],v=SKe(_),b=d[v];if(b)m.push(b.promise);else{let S;S=_.extensions&&_.extensions[Mi.KHR_DRACO_MESH_COMPRESSION]?f(_):ise(new Nn,_,l),d[v]={primitive:_,promise:S},m.push(S)}}return Promise.all(m)}loadMesh(a){const l=this,d=this.extensions,f=this.json.meshes[a],m=f.primitives,g=[];for(let y=0,_=m.length;y<_;y++){const v=void 0===m[y].material?_Ke(this.cache):this.getDependency("material",m[y].material);g.push(v)}return g.push(l.loadGeometries(m)),Promise.all(g).then(function(y){const _=y.slice(0,y.length-1),v=y[y.length-1],b=[];for(let T=0,x=v.length;T<x;T++){const E=v[T],I=m[T];let M;const D=_[T];if(4===I.mode||5===I.mode||6===I.mode||void 0===I.mode)M=!0===f.isSkinnedMesh?new FA(E,D):new xs(E,D),!0===M.isSkinnedMesh&&!M.geometry.attributes.skinWeight.normalized&&M.normalizeSkinWeights(),5===I.mode?M.geometry=rse(M.geometry,1):6===I.mode&&(M.geometry=rse(M.geometry,2));else if(1===I.mode)M=new ld(E,D);else if(3===I.mode)M=new ep(E,D);else if(2===I.mode)M=new jV(E,D);else{if(0!==I.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+I.mode);M=new NT(E,D)}Object.keys(M.geometry.morphAttributes).length>0&&bKe(M,f),M.name=l.createUniqueName(f.name||"mesh_"+a),fg(M,f),I.extensions&&KT(d,M,I),l.assignFinalMaterial(M),b.push(M)}for(let T=0,x=b.length;T<x;T++)l.associations.set(b[T],{meshes:a,primitives:T});if(1===b.length)return b[0];const S=new ad;l.associations.set(S,{meshes:a});for(let T=0,x=b.length;T<x;T++)S.add(b[T]);return S})}loadCamera(a){let l;const h=this.json.cameras[a],d=h[h.type];if(d)return"perspective"===h.type?l=new zs(uWe.radToDeg(d.yfov),d.aspectRatio||1,d.znear||1,d.zfar||2e6):"orthographic"===h.type&&(l=new ET(-d.xmag,d.xmag,d.ymag,-d.ymag,d.znear,d.zfar)),h.name&&(l.name=this.createUniqueName(h.name)),fg(l,h),Promise.resolve(l);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(a){const l=this.json.skins[a],h={joints:l.joints};return void 0===l.inverseBindMatrices?Promise.resolve(h):this.getDependency("accessor",l.inverseBindMatrices).then(function(d){return h.inverseBindMatrices=d,h})}loadAnimation(a){const h=this.json.animations[a],d=[],f=[],m=[],g=[],y=[];for(let _=0,v=h.channels.length;_<v;_++){const b=h.channels[_],S=h.samplers[b.sampler],T=b.target,E=void 0!==h.parameters?h.parameters[S.input]:S.input,I=void 0!==h.parameters?h.parameters[S.output]:S.output;d.push(this.getDependency("node",void 0!==T.node?T.node:T.id)),f.push(this.getDependency("accessor",E)),m.push(this.getDependency("accessor",I)),g.push(S),y.push(T)}return Promise.all([Promise.all(d),Promise.all(f),Promise.all(m),Promise.all(g),Promise.all(y)]).then(function(_){const v=_[0],b=_[1],S=_[2],T=_[3],x=_[4],E=[];for(let M=0,D=v.length;M<D;M++){const L=v[M],P=b[M],F=S[M],B=T[M],G=x[M];if(void 0===L)continue;let $;switch(L.updateMatrix(),L.matrixAutoUpdate=!0,sp[G.path]){case sp.weights:$=jT;break;case sp.rotation:$=og;break;default:$=WT}const se=L.name?L.name:L.uuid,ie=void 0!==B.interpolation?yKe[B.interpolation]:xv,j=[];sp[G.path]===sp.weights?L.traverse(function(ae){ae.morphTargetInfluences&&j.push(ae.name?ae.name:ae.uuid)}):j.push(se);let J=F.array;if(F.normalized){const ae=SB(J.constructor),ue=new Float32Array(J.length);for(let ge=0,K=J.length;ge<K;ge++)ue[ge]=J[ge]*ae;J=ue}for(let ae=0,ue=j.length;ae<ue;ae++){const ge=new $(j[ae]+"."+sp[G.path],P.array,J,ie);"CUBICSPLINE"===B.interpolation&&(ge.createInterpolant=function(le){return new(this instanceof og?gKe:dg)(this.times,this.values,this.getValueSize()/3,le)},ge.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),E.push(ge)}}return new XT(h.name?h.name:"animation_"+a,void 0,E)})}createNodeMesh(a){const h=this,d=this.json.nodes[a];return void 0===d.mesh?null:h.getDependency("mesh",d.mesh).then(function(f){const m=h._getNodeRef(h.meshCache,d.mesh,f);return void 0!==d.weights&&m.traverse(function(g){if(g.isMesh)for(let y=0,_=d.weights.length;y<_;y++)g.morphTargetInfluences[y]=d.weights[y]}),m})}loadNode(a){const h=this.extensions,d=this,f=this.json.nodes[a],m=f.name?d.createUniqueName(f.name):"";return function(){const g=[],y=d._invokeOne(function(_){return _.createNodeMesh&&_.createNodeMesh(a)});return y&&g.push(y),void 0!==f.camera&&g.push(d.getDependency("camera",f.camera).then(function(_){return d._getNodeRef(d.cameraCache,f.camera,_)})),d._invokeAll(function(_){return _.createNodeAttachment&&_.createNodeAttachment(a)}).forEach(function(_){g.push(_)}),Promise.all(g)}().then(function(g){let y;if(y=!0===f.isBone?new kA:g.length>1?new ad:1===g.length?g[0]:new Yi,y!==g[0])for(let _=0,v=g.length;_<v;_++)y.add(g[_]);if(f.name&&(y.userData.name=f.name,y.name=m),fg(y,f),f.extensions&&KT(h,y,f),void 0!==f.matrix){const _=new un;_.fromArray(f.matrix),y.applyMatrix4(_)}else void 0!==f.translation&&y.position.fromArray(f.translation),void 0!==f.rotation&&y.quaternion.fromArray(f.rotation),void 0!==f.scale&&y.scale.fromArray(f.scale);return d.associations.has(y)||d.associations.set(y,{}),d.associations.get(y).nodes=a,y})}loadScene(a){const l=this.json,h=this.extensions,d=this.json.scenes[a],f=this,m=new ad;d.name&&(m.name=f.createUniqueName(d.name)),fg(m,d),d.extensions&&KT(h,m,d);const g=d.nodes||[],y=[];for(let _=0,v=g.length;_<v;_++)y.push(nse(g[_],m,l,f));return Promise.all(y).then(function(){return f.associations=(v=>{const b=new Map;for(const[S,T]of f.associations)(S instanceof Us||S instanceof Cs)&&b.set(S,T);return v.traverse(S=>{const T=f.associations.get(S);null!=T&&b.set(S,T)}),b})(m),m})}}function nse(c,a,l,h){const d=l.nodes[c];return h.getDependency("node",c).then(function(f){if(void 0===d.skin)return f;let m;return h.getDependency("skin",d.skin).then(function(g){m=g;const y=[];for(let _=0,v=m.joints.length;_<v;_++)y.push(h.getDependency("node",m.joints[_]));return Promise.all(y)}).then(function(g){return f.traverse(function(y){if(!y.isMesh)return;const _=[],v=[];for(let b=0,S=g.length;b<S;b++){const T=g[b];if(T){_.push(T);const x=new un;void 0!==m.inverseBindMatrices&&x.fromArray(m.inverseBindMatrices.array,16*b),v.push(x)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',m.joints[b])}y.bind(new VA(_,v),y.matrixWorld)}),f})}).then(function(f){a.add(f);const m=[];if(d.children){const g=d.children;for(let y=0,_=g.length;y<_;y++)m.push(nse(g[y],f,l,h))}return Promise.all(m)})}function ise(c,a,l){const h=a.attributes,d=[];function f(m,g){return l.getDependency("accessor",m).then(function(y){c.setAttribute(g,y)})}for(const m in h){const g=vB[m]||m.toLowerCase();g in c.attributes||d.push(f(h[m],g))}if(void 0!==a.indices&&!c.index){const m=l.getDependency("accessor",a.indices).then(function(g){c.setIndex(g)});d.push(m)}return fg(c,a),function wKe(c,a,l){const h=a.attributes,d=new xl;if(void 0===h.POSITION)return;{const g=l.json.accessors[h.POSITION],y=g.min,_=g.max;if(void 0===y||void 0===_)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(d.set(new te(y[0],y[1],y[2]),new te(_[0],_[1],_[2])),g.normalized){const v=SB(ZT[g.componentType]);d.min.multiplyScalar(v),d.max.multiplyScalar(v)}}const f=a.targets;if(void 0!==f){const g=new te,y=new te;for(let _=0,v=f.length;_<v;_++){const b=f[_];if(void 0!==b.POSITION){const S=l.json.accessors[b.POSITION],T=S.min,x=S.max;if(void 0!==T&&void 0!==x){if(y.setX(Math.max(Math.abs(T[0]),Math.abs(x[0]))),y.setY(Math.max(Math.abs(T[1]),Math.abs(x[1]))),y.setZ(Math.max(Math.abs(T[2]),Math.abs(x[2]))),S.normalized){const E=SB(ZT[S.componentType]);y.multiplyScalar(E)}g.max(y)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}d.expandByVector(g)}c.boundingBox=d;const m=new Wf;d.getCenter(m.center),m.radius=d.min.distanceTo(d.max)/2,c.boundingSphere=m}(c,a,l),Promise.all(d).then(function(){return void 0!==a.targets?function vKe(c,a,l){let h=!1,d=!1;for(let g=0,y=a.length;g<y;g++){const _=a[g];if(void 0!==_.POSITION&&(h=!0),void 0!==_.NORMAL&&(d=!0),h&&d)break}if(!h&&!d)return Promise.resolve(c);const f=[],m=[];for(let g=0,y=a.length;g<y;g++){const _=a[g];if(h){const v=void 0!==_.POSITION?l.getDependency("accessor",_.POSITION):c.attributes.position;f.push(v)}if(d){const v=void 0!==_.NORMAL?l.getDependency("accessor",_.NORMAL):c.attributes.normal;m.push(v)}}return Promise.all([Promise.all(f),Promise.all(m)]).then(function(g){const _=g[1];return h&&(c.morphAttributes.position=g[0]),d&&(c.morphAttributes.normal=_),c.morphTargetsRelative=!0,c})}(c,a.targets,l):c})}function rse(c,a){let l=c.getIndex();if(null===l){const m=[],g=c.getAttribute("position");if(void 0===g)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),c;for(let y=0;y<g.count;y++)m.push(y);c.setIndex(m),l=c.getIndex()}const h=l.count-2,d=[];if(2===a)for(let m=1;m<=h;m++)d.push(l.getX(0)),d.push(l.getX(m)),d.push(l.getX(m+1));else for(let m=0;m<h;m++)m%2==0?(d.push(l.getX(m)),d.push(l.getX(m+1)),d.push(l.getX(m+2))):(d.push(l.getX(m+2)),d.push(l.getX(m+1)),d.push(l.getX(m)));d.length/3!==h&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const f=c.clone();return f.setIndex(d),f}const CKe=["threeCanvas"];let xKe=(()=>{class c{constructor(l){this.mapThreeSvc=l,this.modelFilePath="https://solarsystem.nasa.gov/system/resources/gltf_files/2358_Phobos_1_1000.glb",this.modelName="phobos"}ngOnInit(){}ngAfterViewInit(){new Promise(h=>{(new KZe).load(this.modelFilePath,f=>{const m=f.scene.getObjectByName(this.modelName);if(!m)throw new Error(`No object named ${this.modelName} in glb!`);h(m)})}).then(h=>{this.mapThreeSvc.initScene(this.threeCanvas.nativeElement,h,this.mapOlSvc.map)})}onResize(l){this.mapThreeSvc.onResize(l)}}return c.\u0275fac=function(l){return new(l||c)(N(Yre))},c.\u0275cmp=He({type:c,selectors:[["ukis-map-three"]],viewQuery:function(l,h){if(1&l&&hi(CKe,5),2&l){let d;vt(d=bt())&&(h.threeCanvas=d.first)}},hostBindings:function(l,h){1&l&&De("resize",function(f){return h.onResize(f)},0,r2)},inputs:{mapOlSvc:"mapOlSvc",modelFilePath:"modelFilePath",modelName:"modelName"},decls:2,vars:0,consts:[["id","threeCanvas",1,"threeCanvas"],["threeCanvas",""]],template:function(l,h){1&l&&xe(0,"canvas",0,1)},styles:[".threeCanvas[_ngcontent-%COMP%]{width:100%;height:100%;margin:0;display:block}"]}),c})(),EKe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({}),c})();class MKe extends yu{constructor(a){super(a)}createRenderer(){return new DKe(this)}}class DKe extends iS{constructor(a){super(a);const l=document.createElement("canvas");l.width=800,l.height=600,l.style.position="absolute";const d=a.getSource().getFeatures(),f=this.featuresToMeshes(d),m=new ir({canvas:l,alpha:!0}),g=new zs(45,l.width/l.height,.01,3e7);g.position.set(0,0,10),g.lookAt(new te(0,0,0));const y=new IT;for(const v of f)y.add(v);const _=new uI(16777215,1);_.position.set(-1,2,4),y.add(_),this.canvas=l,this.scene=y,this.meshes=f,this.renderer=m,this.camera=g}prepareFrame(a){const l=a.pixelRatio,h=a.size,d=Math.round(h[0]*l),f=Math.round(h[1]*l),g=a.viewState.center,v=this.extent2Height(a.extent,45);return this.camera.aspect=d/f,this.camera.fov=45,this.camera.near=.01,this.camera.far=3e8,this.camera.position.set(g[0],g[1],v),this.camera.lookAt(new te(g[0],g[1],0)),this.camera.updateProjectionMatrix(),(h[0]!==this.canvas.width||h[1]!==this.canvas.height)&&(this.canvas.width=h[0],this.canvas.height=h[1],this.renderer.setSize(this.canvas.width,this.canvas.height)),this.canvas.style.opacity=""+a.layerStatesArray[a.layerIndex].opacity,!0}renderFrame(a,l){return this.renderer.render(this.scene,this.camera),this.canvas}renderDeclutter(a){}featuresToMeshes(a){const l=[];for(const h of a){const d=h.getGeometry(),f=h.get("height"),m=this.fGeom2tGeom(d,.1*f),g=new Pt(16777215);g.setHex(16777215*Math.random());const y=new rB({color:g}),_=new xs(m,y);l.push(_)}return l}fGeom2tGeom(a,l){const h=a.getCoordinates()[0],d=new Hu;d.moveTo(h[0][0],h[0][1]);for(let f=1;f<h.length;f++){const m=h[f];d.lineTo(m[0],m[1])}return new ud(d,{depth:l,bevelEnabled:!1})}extent2Height(a,l){return $re(a[3]-a[1],l)}}const AKe=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"name":"Polygon 1"},"geometry":{"type":"Polygon","coordinates":[[[-0.703125,56.12106042504407],[-2.197265625,49.15296965617042],[5.009765625,45.460130637921004],[16.435546875,46.37725420510028],[20.0390625,55.229023057406344],[4.658203125,58.03137242177637],[-0.703125,56.12106042504407]]]}},{"type":"Feature","properties":{"name":"Polygon 2"},"geometry":{"type":"Polygon","coordinates":[[[6.6796875,58.768200159239576],[19.86328125,56.80087831233043],[22.5,62.99515845212052],[10.01953125,64.88626540914477],[6.328125,62.062733258846514],[6.6796875,58.768200159239576]]]}},{"type":"Feature","properties":{"name":"Polygon 3"},"geometry":{"type":"Polygon","coordinates":[[[30.937499999999996,62.02152819100765],[23.994140624999996,62.062733258846514],[22.587890625,55.3791104480105],[37.79296875,55.62799595426723],[30.937499999999996,62.02152819100765]]]}},{"type":"Feature","properties":{"name":"Polygon 4"},"geometry":{"type":"Polygon","coordinates":[[[-8.876953125,39.436192999314095],[-11.689453125,28.459033019728043],[0.615234375,25.562265014427492],[8.173828125,33.137551192346145],[-0.9667968749999999,38.8225909761771],[-8.876953125,39.436192999314095]]]}},{"type":"Feature","properties":{"name":"Polygon 5"},"geometry":{"type":"Polygon","coordinates":[[[-140.44921875,-52.26815737376816],[-70.83984375,-52.26815737376816],[-70.83984375,59.17592824927136],[-140.44921875,59.17592824927136],[-140.44921875,-52.26815737376816]]]}}]}');function IKe(c,a){if(1&c&&(U(0,"li"),ve(1),H()),2&c){const l=a.$implicit,h=he();V(1),H0(" ",l,": ",h.group[l]||"undefined"," ")}}let RKe=(()=>{class c{constructor(l){this.layersSvc=l}ngOnInit(){this.groupkeys=["bbox","cssClass","displayName","filtertype","id","name","removable"]}}return c.\u0275fac=function(l){return new(l||c)(N(qs))},c.\u0275cmp=He({type:c,selectors:[["app-example-group-action"]],inputs:{group:"group"},decls:5,vars:1,consts:[[4,"ngFor","ngForOf"]],template:function(l,h){1&l&&(U(0,"div")(1,"span"),ve(2,"some properties of the group:"),H(),U(3,"ul"),ce(4,IKe,2,2,"li",0),H()()),2&l&&(V(4),z("ngForOf",h.groupkeys))},dependencies:[Er]}),c})();function LKe(c,a){if(1&c&&(U(0,"th"),ve(1),H()),2&c){const l=a.$implicit;V(1),Kt(l.key)}}function PKe(c,a){if(1&c&&(U(0,"td"),ve(1),H()),2&c){const l=a.$implicit;V(1),Kt(l.value)}}let OKe=(()=>{class c{constructor(){}ngOnInit(){}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["app-popup2"]],inputs:{data:"data"},decls:11,vars:6,consts:[[1,"table"],[4,"ngFor","ngForOf"]],template:function(l,h){1&l&&(U(0,"table",0)(1,"caption"),ve(2," Demo for a basic Clarity table. "),H(),U(3,"thead")(4,"tr"),ce(5,LKe,2,1,"th",1),ms(6,"keyvalue"),H()(),U(7,"tbody")(8,"tr"),ce(9,PKe,2,1,"td",1),ms(10,"keyvalue"),H()()()),2&l&&(V(5),z("ngForOf",_o(6,2,h.data)),V(4),z("ngForOf",_o(10,4,h.data)))},dependencies:[Er,AC]}),c})(),NKe=(()=>{class c{constructor(l,h,d){this.layersSvc=l,this.mapStateSvc=h,this.mapSvc=d,this.class="content-container",this.test=[],this.inputValue={value:15},this.controls={attribution:!0,scaleLine:!0,overviewMap:!0}}ngOnInit(){this.addLayers()}setInput(){const l=this.layersSvc.getLayerById("heatmap_layer");this.inputValue.value=40,l.action.inputs.value=this.inputValue.value}addLayers(){const l=new Tb({id:"OSM1",visible:!1,bbox:[-66.408,3.577,113.592,64.94]}),h=new Ji({id:"heatmap_layer",name:"Heatmap Layer",actions:[{title:"test",icon:"",action:ue=>{}}],popup:{event:"click"},action:{component:q7e,inputs:this.inputValue,outputs:{valueChange:ue=>{this.inputValue.value=ue}}},custom_layer:new R7e({source:new _r({features:this.mapSvc.geoJsonToFeatures(G4),format:new Ra}),radius:this.inputValue.value}),visible:!1}),d=new qr({id:"Vector Layer1",name:"Vector Layer",type:"geojson",data:G4,visible:!0,popup:{single:!0}}),f=new Ji({id:"Layer_KML",name:"KML - VectorLayer",popup:!0,custom_layer:new yu({source:new _r({url:"assets/kml/TimeZones.kml",format:new GE({extractStyles:!0})})}),visible:!1,bbox:[-180,-90,180,90]}),m=new Ji({id:"topo_json_layer",name:"Topo Json - VectorImageLayer",custom_layer:new cT({source:new _r({url:"https://openlayers.org/en/latest/examples/data/topojson/world-110m.json",format:new X7e({layers:["countries"]}),overlaps:!1}),style:(ue,ge)=>(an(ue),[new er({stroke:new _s({color:"gray",width:1}),fill:new yr({color:"rgba(0, 153, 255, 0.2)"})})])}),visible:!1}),g=new Ji({id:"geo_json_layer_ocean",name:"GeoJson - VectorImageLayer ocean",popup:{event:"move"},custom_layer:new cT({source:new _r({features:this.mapSvc.geoJsonToFeatures(Ote)}),style:(ue,ge)=>new er({stroke:new _s({color:"gray",width:1}),fill:new yr({color:"rgba(20,20,20,0.9)"})})}),visible:!0,bbox:[-180.35156249999997,-22.268764039073968,-129.375,29.84064389983441]}),y=new Ji({id:"geo_json_layer_polys",name:"GeoJson polys - VectorImageLayer",popup:[{event:"click",single:!0,options:{autoPan:!1},dynamicPopup:{component:A3,getAttributes:ue=>({data:ue.properties})}},{event:"move",options:{autoPan:!1},dynamicPopup:{component:OKe,getAttributes:ue=>({data:ue.properties})}}],custom_layer:new cT({source:new _r({features:this.mapSvc.geoJsonToFeatures(AKe)}),style:(ue,ge)=>new er({stroke:new _s({color:"gray",width:1}),fill:new yr({color:"rgba(51,153,51,1)"})})}),visible:!0}),_=new Ji({id:"geo_json_layer_collection",name:"GeoJson Collection - VectorImageLayer",popup:{event:"click",single:!0,options:{autoPan:!1}},custom_layer:new cT({source:new _r({url:"assets/geojson/test.collection.json",format:new Ra}),style:(ue,ge)=>new er({stroke:new _s({color:"rgba(153,51,51,1)",width:2}),fill:new yr({color:"rgba(153,51,51,1)"}),image:new Xp({radius:5,fill:new yr({color:"rgba(153,51,51,1)"})})})}),visible:!0}),v=new Ji({id:"static_image_layer",name:"Static Image",visible:!1,popup:{filterkeys:["id","color","name"]},custom_layer:new qd({source:new zte({url:"assets/image/srtm_small.png",imageExtent:[10,45,15,50],projection:"EPSG:4326"})})}),b=new Ji({id:"osm_clip_layer",name:"OSM Clip",visible:!0,popup:{filterkeys:["id","color","name"]},custom_layer:new gu({source:new cM}),bbox:[-105.41888884797893,6.480590573390401,-15.540298246016693,42.53496284727569]}),S=new Ji({id:"customLayerOlGroup",name:"Custom Layer OlGroup",visible:!0,opacity:.6,popup:{event:"move",filterkeys:["id","color","name"],options:{autoPan:!1}},custom_layer:new Dr({layers:[new gu({source:new bS({url:"https://geoservice.dlr.de/eoc/basemap/wms",params:{LAYERS:"litemap",TILED:!0},serverType:"geoserver",transition:0})}),new gu({source:new bS({url:"https://geoservice.dlr.de/eoc/basemap/wms",params:{LAYERS:"liteoverlay",TILED:!0},serverType:"geoserver",transition:0})})]}),bbox:[-18.213,-26.814,68.344,11.783]}),T=new Ji({id:"clusterLayer",name:"cluster Layer - VectorLayer",visible:!1,popup:!0,custom_layer:new yu({source:new pm({distance:10,source:new _r({features:this.mapSvc.geoJsonToFeatures(G4)})})})}),x=new Ji({id:"vectorTile",name:"VectorTileLayer",visible:!1,popup:{event:"move",filterkeys:["name","layer","class"],properties:{name:"Name"},options:{autoPan:!1}},custom_layer:new Xy({source:new Kx({format:new sE,url:"https://tiles.geoservice.dlr.de/service/tms/1.0.0/planet_eoc@EPSG%3A900913@pbf/{z}/{x}/{y}.pbf?flipy=true"}),style:(ue,ge)=>{const K=ue.get("layer"),le=ue.get("class");if(this.test.includes(K)||this.test.push(K),K){if("water"===K)return new er({fill:new yr({color:"rgba(67,162,202,0.9)"})});if("boundary"===K)return new er({stroke:new _s({color:"gray",width:1}),fill:new yr({color:"rgba(0,0,0,0)"})});if("landcover"===K&&le){if("wood"===le)return new er({fill:new yr({color:"rgba(53,151,143,0.7)"})});if("grass"===le)return new er({fill:new yr({color:"rgba(168,221,181,0.7)"})})}}}})}),E=new Ur({name:"Heatmap Group",filtertype:"Layers",id:"group1",layers:[h,d],description:"This is a custom layer group with some custom angular components in the UI",action:{component:RKe}}),I=new Ji({id:"image_wms",name:"Image WMS",custom_layer:new qd({source:new jN({url:"https://ahocevar.com/geoserver/wms",params:{LAYERS:"topp:states"},serverType:"geoserver"})}),visible:!1,popup:{filterkeys:["id","color","name"]},bbox:[-133.9453125,18.979025953255267,-60.46875,52.908902047770255]}),M=new Ji({id:"dtmLayer",name:"SRTM DTM",filtertype:"Layers",custom_layer:new v2e({source:new zte({url:"assets/image/srtm_small.png",imageExtent:[10,45,15,50],projection:"EPSG:4326"})}),action:{component:Z7e,inputs:{changeHandler:(ue,ge)=>{M.custom_layer.updateSunAngle([ue,ge])}}},opacity:.6,visible:!1,description:"<p>This layer uses SRTM data to calculate surface-normals and uses them to dynamically create shades on hilltops. Things like these might be a nice illustration for time-enabled maps.</p>\n      <p>Use the controls to dynamically change the sun's angle.</p>"}),D=this.mapSvc.getProjection().getMetersPerUnit(),L=new Fp({code:"EPSG:4326",units:"degrees"}).getMetersPerUnit();Hte.features.map(ue=>ue.properties.height=ue.properties.height*L/D);const P=new Ji({id:"three",name:"Bars layer",custom_layer:new MKe({source:new _r({features:this.mapSvc.geoJsonToFeatures(Hte)})}),filtertype:"Layers",opacity:.7,visible:!1,description:"<p>This layer demonstrates how a common 3d-library, three.js, can be integrated in a 2d-map. Using three.js often yields less verbose code than calling WebGL directly.</p>"}),F=new _r({features:this.mapSvc.geoJsonToFeatures(Y7e)}),B=new pm({source:F,distance:25}),se=new Ji({id:"interpolation",name:"Interpolation",custom_layer:new S2e({source:B,style:(ue,ge)=>{const K=ue.getProperties().features;let le;return le=K.length>1?`${ue.getProperties().features.length}`:`${Number.parseFloat(K[0].getProperties().SWH).toPrecision(3)}`,new er({image:new Xp({radius:13,fill:new yr({color:"rgba(0, 153, 255, 0.2)"}),stroke:new _s({color:"rgba(255, 255, 255, 0.2)",width:1})}),text:new Xd({text:le,overflow:!0,offsetX:-5*le.length/2,offsetY:1,textAlign:"left",fill:new yr({color:"#ffffff"})})})},renderSettings:{maxEdgeLength:15e3/D,power:2,colorRamp:[{val:0,rgb:[166,97,26]},{val:.4,rgb:[223,194,125]},{val:.8,rgb:[247,247,247]},{val:2,rgb:[128,205,193]},{val:22.5,rgb:[1,133,113]}],smooth:!0,showLabels:!1,valueProperty:"SWH",storeInterpolatedPixelData:!1}}),action:{component:K7e,inputs:{changeHandler:(ue,ge,K)=>{se.custom_layer.updateParas(ue,ge,K)}}},filtertype:"Layers",opacity:.7,visible:!1,description:"This layer is an example of how WebGL can be used to outsource computationally expensive operations. For inverse-distance interpolation we need to account for every datapoint at every pixel."}),ie=new Ur({name:"Webgl Group",filtertype:"Layers",id:"group2",layers:[M,P,se]}),j=new Ji({name:"Transparenter Hintergrund",id:"blank",type:"custom",visible:!1,custom_layer:new qd({source:new O7e({canvasFunction:()=>document.createElement("canvas")})})}),J=new Ji({name:"Ol Raster Source OSM",id:"rasterSourceLayer",type:"custom",visible:!1,removable:!0,custom_layer:new qd({source:new SS({sources:[new cM],operation:ue=>ue[0],operationType:"image"})})});[j,J,l,x,ie,T,I,f,v,b,m,y,_,E,g,S].forEach(ue=>{ue instanceof so?this.layersSvc.addLayer(ue,"Layers"):ue instanceof Ur&&this.layersSvc.addLayerGroup(ue)}),setTimeout(()=>{J.visible=!0,J.custom_layer.setSource(new SS({sources:[new cM],operation:ue=>ue[0],operationType:"image"})),this.layersSvc.updateLayer(J)},2e3)}ngAfterViewInit(){const l=new qr({id:"Vector Layer2",name:"async add Layer",type:"geojson",data:$7e,visible:!1,popup:!0});setTimeout(()=>{this.layersSvc.addLayer(l,"Layers")},2e3)}}return c.\u0275fac=function(l){return new(l||c)(N(qs),N(oo),N(Ss))},c.\u0275cmp=He({type:c,selectors:[["app-route-map4"]],hostVars:2,hostBindings:function(l,h){2&l&&na(h.class)},features:[Lt([qs,oo,Ss])],decls:15,vars:10,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["title","set input of dynamic component from parent when it is created or the input changed",1,"btn","btn-primary",3,"click"]],template:function(l,h){1&l&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ve(5," Layers "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",4),ve(10," Test to set dynamic component "),U(11,"clr-vertical-nav-group-children",5)(12,"button",7),De("click",function(){return h.setInput()}),ve(13,"Set Heatmap Layer radius"),H(),ve(14),H()()()),2&l&&(V(1),z("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),V(1),z("clrVerticalNavCollapsible",!0)("clr-nav-level",2),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),V(1),z("clrVerticalNavGroupExpanded",!0),V(6),pr(" ",h.inputValue.value," "))},dependencies:[ga,Uc,Ou,Nu,Fu,ku,Nh,Qh]}),c})();function FKe(c,a){if(1&c&&(U(0,"tr")(1,"td",16),ve(2),H(),U(3,"td"),ve(4),H(),U(5,"td"),ve(6),H(),U(7,"td"),ve(8),H()()),2&c){const l=a.$implicit;V(2),Kt(l.properties.title),V(2),Kt(l.properties.foo),V(2),Kt(l.properties.bar),V(2),Kt(l.properties.baz)}}function kKe(c,a){if(1&c&&(U(0,"table",15)(1,"thead")(2,"tr")(3,"th",16),ve(4,"Title"),H(),U(5,"th"),ve(6,"Foo"),H(),U(7,"th"),ve(8,"Bar"),H(),U(9,"th"),ve(10,"Baz"),H()()(),U(11,"tbody"),ce(12,FKe,9,4,"tr",17),H()()),2&c){const l=he();V(12),z("ngForOf",l.geojsonData.features)}}const VKe=function(c){return{left:c}};function BKe(c,a){if(1&c&&(U(0,"th",19),ve(1),H()),2&c){const l=a.$implicit;z("ngClass",mr(2,VKe,0===a.index)),V(1),Kt(l)}}function UKe(c,a){if(1&c&&(U(0,"tr")(1,"td",16),ve(2),H(),U(3,"td"),ve(4),H(),U(5,"td"),ve(6),H(),U(7,"td"),ve(8),H()()),2&c){const l=a.$implicit,h=he(2);V(2),Kt(l.properties[h.popupData.headers[0]]),V(2),Kt(l.properties[h.popupData.headers[1]]),V(2),Kt(l.properties[h.popupData.headers[2]]),V(2),Kt(l.properties[h.popupData.headers[3]])}}function zKe(c,a){if(1&c&&(U(0,"table",15)(1,"thead")(2,"tr"),ce(3,BKe,2,4,"th",18),H()(),U(4,"tbody"),ce(5,UKe,9,4,"tr",17),H()()),2&c){const l=he();V(3),z("ngForOf",l.popupData.headers),V(2),z("ngForOf",l.popupData.features)}}const TB=function(){return{height:"95%"}},GKe=function(){return{height:"5%"}};let HKe=(()=>{class c{constructor(l,h,d){this.layersSvc=l,this.mapStateSvc=h,this.mapSvc=d,this.class="content-container",this.popupData={headers:[],features:[]},this.showTable=!1,this.subs=[],this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.addBaseLayers(),this.addLayers(),this.addOverlays(),this.mapStateSvc.setExtent([-14,33,40,57]),this.checkVisibleLayers(),this.mapSvc.popupEvents.subscribe(l=>{l.popupParams.properties?(this.popupData.headers=Object.keys(l.popupParams.properties),this.popupData.features=[{properties:l.popupParams.properties}]):this.popupData.features=[]})}addBaseLayers(){[new bP({visible:!0}),new $9].map(f=>this.layersSvc.addLayer(f,"Baselayers"))}addLayers(){this.geojsonData={type:"FeatureCollection",features:[{type:"Feature",properties:{title:"Polygon",foo:"1",bar:"test",baz:"555"},geometry:{type:"Polygon",coordinates:[[[11.53564453125,48.80686346108517],[11.42578125,48.61838518688487],[11.97509765625,48.516604348867475],[12.2607421875,48.69096039092549],[12.0849609375,48.99463598353405],[11.53564453125,48.80686346108517]]]}},{type:"Feature",properties:{title:"Rectangle",foo:"2",bar:"test2",baz:"66667"},geometry:{type:"Polygon",coordinates:[[[10.986328125,43.89789239125797],[11.755371093749998,43.89789239125797],[11.755371093749998,44.41808794374846],[10.986328125,44.41808794374846],[10.986328125,43.89789239125797]]]}},{type:"Feature",properties:{title:"Line",foo:"3",bar:"test3",baz:"111"},geometry:{type:"LineString",coordinates:[[13.29345703125,48.268569112964336],[15.073242187499998,47.56170075451973],[14.1064453125,46.40756396630067],[15.886230468750002,44.94924926661153]]}},{type:"Feature",properties:{title:"Point",foo:"4",bar:"test4",baz:"444"},geometry:{type:"Point",coordinates:[11.513671874999998,46.42271253466717]}}]};const l=new qr({id:"geojson_test",name:"GeoJSON Vector Layer",type:"geojson",data:this.geojsonData,visible:!1,popup:[{event:"click",asObservable:!0},{event:"move"}]});this.layersSvc.addLayer(l,"Layers")}checkVisibleLayers(){const l=this.layersSvc.getLayers().subscribe(h=>{h.map(d=>{d&&("geojson_test"===d.id&&!0===d.visible?this.showTable=!0:"geojson_test"===d.id&&!1===d.visible&&(this.showTable=!1))})});this.subs.push(l)}addOverlays(){const l=new hx;this.layersSvc.addLayer(l,"Overlays")}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(N(qs),N(oo),N(Ss))},c.\u0275cmp=He({type:c,selectors:[["app-route-map5"]],hostVars:2,hostBindings:function(l,h){2&l&&na(h.class)},features:[Lt([qs,oo,Ss])],decls:28,vars:27,consts:[[1,"content-area",3,"ngStyle"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level","ngStyle"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","world","title","Overlays","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc","layerfilter"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""],[3,"clrVerticalNavCollapsible","ngStyle"],[3,"clrVerticalNavGroupExpanded"],["shape","table","title","Overlays","clrVerticalNavIcon",""],["class","table",4,"ngIf"],[1,"footer","ukis-footer",3,"ngStyle"],[1,"table"],[1,"left"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(l,h){1&l&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ve(5," Overlays "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",7),ve(10," Layers "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-layer-control",8),H()(),U(13,"clr-vertical-nav-group",3),xe(14,"clr-icon",9),ve(15," Baselayers "),U(16,"clr-vertical-nav-group-children",5),xe(17,"ukis-base-layer-control",8),H()()(),U(18,"clr-vertical-nav",10)(19,"clr-vertical-nav-group",11),xe(20,"clr-icon",12),ve(21," Table "),U(22,"clr-vertical-nav-group-children",5),ce(23,kKe,13,1,"table",13),ce(24,zKe,6,2,"table",13),H()()(),U(25,"div",14)(26,"p"),ve(27,"this is the footer"),H()()),2&l&&(z("ngStyle",cy(23,TB)),V(1),z("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),V(1),z("clrVerticalNavCollapsible",!0)("clr-nav-level",2)("ngStyle",cy(24,TB)),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc)("layerfilter","Overlays"),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),V(1),z("clrVerticalNavCollapsible",!0)("ngStyle",cy(25,TB)),V(1),z("clrVerticalNavGroupExpanded",h.showTable),V(4),z("ngIf",h.showTable),V(1),z("ngIf",h.popupData.features.length),V(1),z("ngStyle",cy(26,GKe)))},dependencies:[ro,Er,bn,OL,ga,Uc,Ou,Nu,Fu,ku,Nh,Qh,jD]}),c})();function jKe(c,a){if(1&c&&(U(0,"tr")(1,"th"),ve(2),H(),U(3,"td"),ve(4),H()()),2&c){const l=a.$implicit;V(2),Kt(l.key),V(2),Kt(l.value)}}function WKe(c,a){if(1&c&&(U(0,"tbody"),ce(1,jKe,5,2,"tr",3),ms(2,"keyvalue"),H()),2&c){const l=a.ngIf;V(1),z("ngForOf",_o(2,1,l))}}function XKe(c,a){1&c&&(U(0,"clr-spinner",4),ve(1,"Loading ..."),H()),2&c&&z("clrInline",!0)}let sse=(()=>{class c{constructor(l){this.http=l}ngOnInit(){this.data$=this.getFeatureInfo().pipe(q(l=>l.features[0].properties))}getFeatureInfo(){const l=this.layer.getSource().getFeatureInfoUrl(this.event.coordinate,this.event.frameState.viewState.resolution,this.event.frameState.viewState.projection.getCode(),{INFO_FORMAT:"application/json"});return console.log("getting",l),this.http.get(l)}}return c.\u0275fac=function(l){return new(l||c)(N(Yh))},c.\u0275cmp=He({type:c,selectors:[["app-raster-feature-info"]],inputs:{layer:"layer",event:"event"},decls:7,vars:4,consts:[[1,"table","table-vertical"],[4,"ngIf","ngIfElse"],["loading",""],[4,"ngFor","ngForOf"],[3,"clrInline"]],template:function(l,h){if(1&l&&(U(0,"table",0)(1,"caption"),ve(2," Feature properties "),H(),ce(3,WKe,3,3,"tbody",1),ms(4,"async"),H(),ce(5,XKe,2,1,"ng-template",null,2,io)),2&l){const d=as(6);V(3),z("ngIf",_o(4,2,h.data$))("ngIfElse",d)}},dependencies:[Er,bn,x1,rb,AC]}),c})(),qKe=(()=>{class c{constructor(l,h){this.layersSvc=l,this.mapStateSvc=h,this.class="content-container",this.subs=[],this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.addBaseLayers(),this.addLayers(),this.mapStateSvc.setExtent([9.681317514755053,47.425291526740125,12.765729135848805,49.213103602937025]),this.layersSvc.getLayers().subscribe(l=>console.log("layers are now ",l))}addBaseLayers(){const l=new bP({visible:!0,tileSize:512});this.layersSvc.addLayer(l,"Baselayers")}addLayers(){const l=new Da({type:"wmts",id:"TDM90_AMP",visible:!1,url:"https://tiles.geoservice.dlr.de/service/wmts?",name:"TDM90_AMP",filtertype:"Layers",attribution:'| TDM90 Data &copy; <a href="http://www.dlr.de" target="_blank">DLR</a> licensed for <a rel="license" target="_blank" href="https://geoservice.dlr.de/resources/licenses/tdm90/License_for_the_Utilization_of_90m_DEM_for_Scientific_Use.pdf">scientific use</a>',params:{layer:"TDM90_AMP",version:"1.1.0",format:"image/png",style:"default",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},styles:[{default:!0,name:"default",title:"default"},{default:!1,name:"none",title:"none"}]});this.layersSvc.addLayer(l,l.filtertype);const h=new Cy({type:"wms",id:"S2_L3A_WASP_FRC_P1M",url:"https://{s}.geoservice.dlr.de/eoc/imagery/wms?",name:"Sentinel-2 L3A FRC (WASP)",subdomains:["a","b","c","d"],filtertype:"Layers",attribution:'| &copy; <a href="http://www.dlr.de" target="_blank">DLR</a> Contains modified Copernicus Sentinel Data [2020]',params:{LAYERS:"S2_L3A_WASP_FRC_P1M",VERSION:"1.1.0",FORMAT:"image/png"},expanded:!0,bbox:[2.183,47.076,8.206,49.287],styles:[{default:!0,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&request=GetLegendGraphic&format=image/png&width=20&height=20&layer=land:S2_L3A_WASP_FRC_P1M",name:"s2-ndvi",title:"NDVI"},{default:!1,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&request=GetLegendGraphic&format=image/png&width=20&height=20&layer=land:S2_L3A_WASP_FRC_P1M",name:"s2-infrared",title:"Infrared (8,4,3)"},{default:!1,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&request=GetLegendGraphic&format=image/png&width=20&height=20&layer=land:S2_L3A_WASP_FRC_P1M",name:"s2-l3a-wasp-frc",title:"Style for L3A MAJA/WASP Ground Reflectances"}],popup:{dynamicPopup:{component:sse,getAttributes:f=>({layer:f.layer,event:f.mapEvent})}}});this.layersSvc.addLayer(h,h.filtertype);const d=new Cy({type:"wms",id:"S2_L2A_MAJA_FRE",url:"https://{s}.geoservice.dlr.de/eoc/imagery/wms?",name:"Sentinel-2 L2A FRE (MAJA)",subdomains:["a","b","c","d"],filtertype:"Layers",attribution:'| &copy; <a href="http://www.dlr.de" target="_blank">DLR</a> Sentinel-2 L2A MAJA (MACCS-ATCOR Joint Algorithm) ground reflectance with the correction of slope effects (FRE) in 10m resolution based on the MAJA processor (https://doi.org/10.5281/zenodo.1209633)',bbox:[5.763545147601,46.793670688196,15.152753273727,55.945635321533],params:{LAYERS:"S2_L2A_MAJA_FRE",VERSION:"1.1.0",FORMAT:"image/png"},expanded:!0,styles:[{default:!0,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&version=1.3.0&request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=S2_L2A_MAJA_FRE",name:"s2-l2a-maja-fre",title:"True Color Image (FRE)"},{default:!1,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&version=1.3.0&request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=S2_L2A_MAJA_FRE&style=s2-swir",name:"s2-swir",title:"S2 Short-Wave Infrared"},{default:!1,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&version=1.3.0&request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=S2_L2A_MAJA_FRE&style=s2-land-water",name:"s2-land-water",title:"S2 Land/Water"},{default:!1,legendURL:"https://geoservice.dlr.de/eoc/imagery/wms?service=WMS&version=1.3.0&request=GetLegendGraphic&format=image%2Fpng&width=20&height=20&layer=S2_L2A_MAJA_FRE&style=s2-vegetation-analysis",name:"s2-vegetation-analysis",title:"S2 vegetation analysis"}],popup:{dynamicPopup:{component:sse,getAttributes:f=>({layer:f.layer,event:f.mapEvent})}}});this.layersSvc.addLayer(d,d.filtertype)}ngOnDestroy(){this.subs.forEach(l=>l.unsubscribe())}}return c.\u0275fac=function(l){return new(l||c)(N(qs),N(oo))},c.\u0275cmp=He({type:c,selectors:[["app-route-map6"]],hostVars:2,hostBindings:function(l,h){2&l&&na(h.class)},features:[Lt([qs,oo,Ss])],decls:13,vars:11,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""]],template:function(l,h){1&l&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ve(5," Layers "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",7),ve(10," Baselayers "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-base-layer-control",6),H()()()),2&l&&(V(1),z("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),V(1),z("clrVerticalNavCollapsible",!0)("clr-nav-level",2),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc))},dependencies:[ga,Uc,Ou,Nu,Fu,ku,Nh,Qh,jD]}),c})();function $Ke(c,a){1&c&&(U(0,"clr-signpost-content")(1,"h3"),ve(2,"Licenses setup"),H(),U(3,"p"),ve(4,"This component expects a "),U(5,"code"),ve(6,"assets/licenses.json"),H(),ve(7," file to be present in the project bundle."),H(),U(8,"p"),ve(9,"That file was created with the following command:"),H(),U(10,"code"),ve(11," cd ./frontend-libraries npm install -g license-checker npx license-checker --json --out ./dist/demo-maps/assets "),H(),ve(12," You might want to add this command to the build-process by adding a "),U(13,"code"),ve(14,'"postbuild"'),H(),ve(15," task to your package.json. "),H())}function YKe(c,a){if(1&c&&(U(0,"clr-dg-row")(1,"clr-dg-cell"),ve(2),H(),U(3,"clr-dg-cell"),ve(4),H(),U(5,"clr-dg-cell"),ve(6),H(),U(7,"clr-dg-cell")(8,"a",4),ve(9),H()()()),2&c){const l=a.$implicit;V(2),Kt(l.name),V(2),Kt(l.publisher),V(2),Kt(l.license),V(2),Vo("href",l.repository,Ka),V(1),Kt(l.repository)}}function ZKe(c,a){if(1&c&&(ci(0),ce(1,YKe,10,5,"clr-dg-row",3),U(2,"clr-dg-footer"),ve(3),H(),ui()),2&c){const l=a.ngIf;V(1),z("ngForOf",l),V(2),pr("",l.length," third party dependencies")}}let KKe=(()=>{class c{constructor(l){this.http=l,this.class="content-container"}ngOnInit(){this.licenses$=this.http.get("assets/licenses.json").pipe(q(l=>{const h=[];for(const d in l)if(l[d]){const f=l[d];h.push({name:d,license:f.licenses,repository:f.repository,publisher:f.publisher})}return h}))}}return c.\u0275fac=function(l){return new(l||c)(N(Yh))},c.\u0275cmp=He({type:c,selectors:[["app-route-licenses"]],hostVars:2,hostBindings:function(l,h){2&l&&na(h.class)},decls:18,vars:3,consts:[[1,"content-area","licenses"],[4,"clrIfOpen"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"href"]],template:function(l,h){1&l&&(U(0,"main",0)(1,"p"),ve(2,"A lot of third party libraries were used to create this project. Their licenses are listed here."),H(),U(3,"p"),ve(4,"For more information, click here: "),U(5,"clr-signpost"),ce(6,$Ke,16,0,"clr-signpost-content",1),H()(),U(7,"clr-datagrid")(8,"clr-dg-column"),ve(9,"Library name"),H(),U(10,"clr-dg-column"),ve(11,"Publisher"),H(),U(12,"clr-dg-column"),ve(13,"License"),H(),U(14,"clr-dg-column"),ve(15,"Repository"),H(),ce(16,ZKe,4,2,"ng-container",2),ms(17,"async"),H()()),2&l&&(V(16),z("ngIf",_o(17,1,h.licenses$)))},dependencies:[Er,bn,l3,N1,oD,QK,lD,uD,hD,d3,dD,Yk,P1,Zk,jM,O1,gD,rb],styles:[".content-area.licenses[_ngcontent-%COMP%]{padding:1em}"]}),c})(),JKe=(()=>{class c{constructor(l,h){this.http=l,this.olSvc=h,iM.defs("EPSG:2966","+proj=tmerc +lat_0=37.5 +lon_0=-87.08333333333333 +k=0.999966667 +x_0=900000 +y_0=249999.9998983998 +datum=NAD83 +units=us-ft +no_defs"),iF(iM),uu(dn("EPSG:2966"),"EPSG:4326"),this.geojson2966To4326=new Ra({dataProjection:"EPSG:2966",featureProjection:"EPSG:4326"}),this.geojson4326=new Ra({featureProjection:"EPSG:4326"})}getWfsSource(l){switch(l){case"all":return new _r({format:new Ra,url:this.getRequestUrl(this.olSvc.EPSG),strategy:vW});case"bbox":return new _r({format:new Ra,url:(f,m,g)=>{const y=g.getCode();return this.getRequestUrl(y,f)},strategy:oE});case"simplifyGeometry":const h=new _r({loader:(f,m,g)=>{const y=g.getCode();this.http.get(this.getRequestUrl(y,f)).subscribe(_=>{const v=(new Ra).readFeatures(_);for(const b of v)b.geometry=b.getGeometry().simplify(1e3);h.addFeatures(v)})},strategy:oE});return h;case"noProps":const d=new _r({loader:(f,m,g)=>{const y=g.getCode();this.http.get(this.getRequestUrl(y,f)).subscribe(_=>{const v=(new Ra).readFeatures(_);for(const b of v)b.setProperties({});d.addFeatures(v)})},strategy:oE});return d;case"tile":throw new Error("Tile-Strategy source not yet implemented.")}}getRequestUrl(l,h){l||(l="EPSG:4326");let d="https://ahocevar.com/geoserver/wfs?service=WFS&version=1.1.0&request=GetFeature";return d+=`&outputFormat=application/json&srsname=${l}`,d+="&typename=osm:water_areas",h&&(d+=`&bbox=${h.join(",")},${l}`),d}createWfsLayer(l,h,d,f){const m=this.getWfsSource(d),g=new yu({source:m,style:f});return new Ji({id:l,name:h,custom_layer:g,popup:!0,visible:!1})}createVectorTileLayer(l,h){const d=new Kx({format:new sE,url:"https://ahocevar.com/geoserver/gwc/service/tms/1.0.0/ne:ne_10m_admin_0_countries@EPSG:4326@pbf/{z}/{x}/{-y}.pbf"}),f=new Xy({source:d});return new Ji({id:l,name:h,custom_layer:f,popup:!0,visible:!1})}}return c.\u0275fac=function(l){return new(l||c)(Oe(Yh),Oe(Ss))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function QKe(c,a){1&c&&(U(0,"clr-signpost-content",4)(1,"h3"),ve(2,"Change detection"),H(),U(3,"p"),ve(4,"This badge changes its color any time angular's change-detection was executed."),H()()),2&c&&z("clrPosition","left-middle")}let eJe=(()=>{class c{constructor(){this.color="white"}ngAfterContentChecked(){this.color=this.getRandomColor()}getRandomColor(){let h="#";for(let d=0;d<6;d++)h+="0123456789ABCDEF"[Math.floor(16*Math.random())];return h}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ukis-blinker"]],decls:6,vars:2,consts:[[2,"margin","0px"],[3,"clrPosition",4,"clrIfOpen"],[1,"label"],[1,"badge"],[3,"clrPosition"]],template:function(l,h){1&l&&(U(0,"p",0)(1,"clr-signpost"),ce(2,QKe,5,1,"clr-signpost-content",1),H(),U(3,"span",2),ve(4," Change detected "),xe(5,"span",3),H()()),2&l&&(V(5),oy("background-color",h.color))},dependencies:[jM,O1,gD],styles:[".blinker[_ngcontent-%COMP%]{width:10px;height:10px}"]}),c})();function wB(){return wB=Cm(function*(c){return ose(nJe(),c,[]).then(a=>rJe(a))}),wB.apply(this,arguments)}function ose(c,a,l){return CB.apply(this,arguments)}function CB(){return CB=Cm(function*(c,a,l){return c.then(h=>(l.push(h),a>1?ose(c,a-1,l):l))}),CB.apply(this,arguments)}function nJe(){return xB.apply(this,arguments)}function xB(){return(xB=Cm(function*(){return new Promise((a,l)=>{const h=window.performance.now();setTimeout(()=>{const f=window.performance.now()-h;a(1e3/f)},0)})})).apply(this,arguments)}function rJe(c){return function sJe(c){let a=0;for(const l of c)a+=l;return a}(c)/c.length}function oJe(c,a){1&c&&(U(0,"clr-signpost-content",4)(1,"h3"),ve(2,"Frames per second"),H(),U(3,"p"),ve(4,"Estimates the number of frames that are rendered per second."),H(),U(5,"p"),ve(6,"This is done by periodically measuring the time a call to "),U(7,"code"),ve(8,"setTimeout(() => ..., 0)"),H(),ve(9," takes."),H(),U(10,"p"),ve(11,"That call is made outside the angular-zone, so as not to trigger change-detection."),H(),U(12,"p"),ve(13,"Please not that in Chrome you can also monitor FPS from the developer-tools: Hit "),U(14,"code"),ve(15,"ctrl-shift-p"),H(),ve(16," and enter "),U(17,"code"),ve(18,"fps"),H(),ve(19," to find the FPS-meter."),H()()),2&c&&z("clrPosition","left-middle")}let aJe=(()=>{class c{constructor(l,h){this.ngZone=l,this.cdRef=h,this.pollingRate=1e3,this.precission=2,this.nrSamples=10,h.detach(),this.ngZone.runOutsideAngular(()=>{this.updateFps(this.pollingRate)})}updateFps(l){setTimeout(()=>{(function tJe(c){return wB.apply(this,arguments)})(this.nrSamples).then(h=>{this.fps=function iJe(c,a){const l=Math.pow(10,a);return Math.floor(c*l)/l}(h,this.precission),this.cdRef.detectChanges(),this.updateFps(l)})},l)}}return c.\u0275fac=function(l){return new(l||c)(N(Yn),N(Ls))},c.\u0275cmp=He({type:c,selectors:[["ukis-fpser"]],decls:7,vars:1,consts:[[2,"margin","0px"],[3,"clrPosition",4,"clrIfOpen"],[1,"label"],[1,"badge"],[3,"clrPosition"]],template:function(l,h){1&l&&(U(0,"p",0)(1,"clr-signpost"),ce(2,oJe,20,1,"clr-signpost-content",1),H(),U(3,"span",2),ve(4," FPS: "),U(5,"span",3),ve(6),H()()()),2&l&&(V(6),Kt(h.fps))},dependencies:[jM,O1,gD]}),c})(),lJe=(()=>{class c{constructor(){}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ukis-performance"]],decls:8,vars:0,consts:[[1,"clr-row"],[1,"clr-col-12"]],template:function(l,h){1&l&&(U(0,"p"),ve(1,"Load data and pan the map for a while to see a drop in performance."),H(),U(2,"div",0)(3,"div",1),xe(4,"ukis-blinker"),H()(),U(5,"div",0)(6,"div",1),xe(7,"ukis-fpser"),H()())},dependencies:[eJe,aJe]}),c})(),cJe=(()=>{class c{constructor(l,h,d,f){this.layersSvc=l,this.dataSvc=h,this.mapStateSvc=d,this.mapSvc=f,this.class="content-container",this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.mapSvc.setProjection("EPSG:4326");const l=(_,v)=>{const S=_.getId().toString().match(/(\d+)/)[0],T=parseFloat(S),x=T%255,E=(T+20)%255,I=(T+40)%255;return new er({stroke:new _s({color:"gray",width:1}),fill:new yr({color:`rgba(${x}, ${E}, ${I},0.7)`})})},h=new Tb({visible:!0}),d=this.dataSvc.createWfsLayer("full","Fully loaded","all",l);d.description="Full dataset loaded at once.";const f=this.dataSvc.createWfsLayer("bbx","Current extent only","bbox",l);f.description="Bbox strategy: Only current bbox loaded at a time.";const m=this.dataSvc.createWfsLayer("simple","Simplified geometry","simplifyGeometry",l);m.description="Bbox strategy. Also: geometry simplified.";const g=this.dataSvc.createWfsLayer("noProps","No properties","noProps",l);g.description="Bbox strategy. Also: features have no properties.";const y=this.dataSvc.createWfsLayer("noStyle","No Styling","bbox");y.description="Bbox strategy. Also: no styling applied to features.",[h,d,f,m,g,y].map(_=>this.layersSvc.addLayer(_,"Layers"))}ngAfterViewInit(){this.mapSvc.map.getView().fit([-107.14,51.85,-106.14,52.33],{size:this.mapSvc.map.getSize()})}}return c.\u0275fac=function(l){return new(l||c)(N(qs),N(JKe),N(oo),N(Ss))},c.\u0275cmp=He({type:c,selectors:[["app-route-map7"]],hostVars:2,hostBindings:function(l,h){2&l&&na(h.class)},features:[Lt([qs,oo,Ss])],decls:13,vars:9,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","clock","title","Performance","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"]],template:function(l,h){1&l&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ve(5," Performance "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-performance"),H()(),U(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",6),ve(10," Layers "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-layer-control",7),H()()()),2&l&&(V(1),z("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),V(1),z("clrVerticalNavCollapsible",!0)("clr-nav-level",2),V(1),z("clrVerticalNavGroupExpanded",!0),V(5),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc))},dependencies:[ga,Uc,Ou,Nu,Fu,ku,Nh,Qh,lJe]}),c})();function EB(c,a,l){const h=[];let d=c(0),f=c(1),m=a(d),g=a(f);const y=[f,d],_=[g,m],v=[1,0],b={};let T,x,E,I,M,D,S=1e5;for(;--S>0&&v.length>0;)E=v.pop(),d=y.pop(),m=_.pop(),D=E.toString(),D in b||(h.push(m[0],m[1]),b[D]=!0),I=v.pop(),f=y.pop(),g=_.pop(),M=(E+I)/2,T=c(M),x=a(T),a7(x[0],x[1],m[0],m[1],g[0],g[1])<l?(h.push(g[0],g[1]),D=I.toString(),b[D]=!0):(v.push(I,M,M,E),_.push(g,x,x,m),y.push(f,T,T,d));return h}const dJe=new _s({color:"rgba(0,0,0,0.2)"}),fJe=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600],mJe=class pJe extends yu{constructor(a){a=a||{};const l=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},a);delete l.maxLines,delete l.strokeStyle,delete l.targetSize,delete l.showLabels,delete l.lonLabelFormatter,delete l.latLabelFormatter,delete l.lonLabelPosition,delete l.latLabelPosition,delete l.lonLabelStyle,delete l.latLabelStyle,delete l.intervals,super(l),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=void 0!==a.targetSize?a.targetSize:100,this.maxLines_=void 0!==a.maxLines?a.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==a.strokeStyle?a.strokeStyle:dJe,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,a.showLabels&&(this.lonLabelFormatter_=a.lonLabelFormatter??Ex.bind(this,"EW"),this.latLabelFormatter_=a.latLabelFormatter??Ex.bind(this,"NS"),this.lonLabelPosition_=a.lonLabelPosition??0,this.latLabelPosition_=a.latLabelPosition??1,this.lonLabelStyleBase_=new er({text:void 0!==a.lonLabelStyle?a.lonLabelStyle.clone():new Xd({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new yr({color:"rgba(0,0,0,1)"}),stroke:new _s({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=h=>{const d=h.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(d),this.lonLabelStyleBase_},this.latLabelStyleBase_=new er({text:void 0!==a.latLabelStyle?a.latLabelStyle.clone():new Xd({font:"12px Calibri,sans-serif",textAlign:"right",fill:new yr({color:"rgba(0,0,0,1)"}),stroke:new _s({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=h=>{const d=h.get("graticule_label");return this.latLabelStyleBase_.getText().setText(d),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener("postrender",this.drawLabels_.bind(this))),this.intervals_=void 0!==a.intervals?a.intervals:fJe,this.setSource(new _r({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new bo,overlaps:!1,useSpatialIndex:!1,wrapX:a.wrapX})),this.featurePool_=[],this.lineStyle_=new er({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(a,l){let h=a.slice();return this.projection_&&this.getSource().getWrapX()&&RP(h,this.projection_),this.loadedExtent_&&(function _0e(c,a,l){return Math.abs(c[0]-a[0])<l&&Math.abs(c[2]-a[2])<l&&Math.abs(c[1]-a[1])<l&&Math.abs(c[3]-a[3])<l}(this.loadedExtent_,h,l)?h=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[h]}loaderFunction(a,l,h){this.loadedExtent_=a;const d=this.getSource(),m=Sc(this.getExtent()||[-1/0,-1/0,1/0,1/0],a);if(this.renderedExtent_&&Gl(this.renderedExtent_,m)&&this.renderedResolution_===l||(this.renderedExtent_=m,this.renderedResolution_=l,Ry(m)))return;const g=aa(m),y=l*l/4;(!this.projection_||!Cc(this.projection_,h))&&this.updateProjectionInfo_(h),this.createGraticule_(m,g,l,y);let b,v=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(v+=this.meridians_.length),this.parallelsLabels_&&(v+=this.parallels_.length);v>this.featurePool_.length;)b=new Ky,this.featurePool_.push(b);const S=d.getFeaturesCollection();S.clear();let x,E,T=0;for(x=0,E=this.meridians_.length;x<E;++x)b=this.featurePool_[T++],b.setGeometry(this.meridians_[x]),b.setStyle(this.lineStyle_),S.push(b);for(x=0,E=this.parallels_.length;x<E;++x)b=this.featurePool_[T++],b.setGeometry(this.parallels_[x]),b.setStyle(this.lineStyle_),S.push(b)}addMeridian_(a,l,h,d,f,m){const g=this.getMeridian_(a,l,h,d,m);if(Mr(g.getExtent(),f)){if(this.meridiansLabels_){const y=this.lonLabelFormatter_(a);m in this.meridiansLabels_?this.meridiansLabels_[m].text=y:this.meridiansLabels_[m]={geom:new du([]),text:y}}this.meridians_[m++]=g}return m}addParallel_(a,l,h,d,f,m){const g=this.getParallel_(a,l,h,d,m);if(Mr(g.getExtent(),f)){if(this.parallelsLabels_){const y=this.latLabelFormatter_(a);m in this.parallelsLabels_?this.parallelsLabels_[m].text=y:this.parallelsLabels_[m]={geom:new du([]),text:y}}this.parallels_[m++]=g}return m}drawLabels_(a){const l=a.frameState.viewState.rotation,h=a.frameState.viewState.resolution,d=a.frameState.size,f=a.frameState.extent,m=aa(f);let g=f;if(l){const x=d[0]*h,E=d[1]*h;g=[m[0]-x/2,m[1]-E/2,m[0]+x/2,m[1]+E/2]}let y=0,_=0,v=this.latLabelPosition_<.5;const b=this.projection_.getExtent(),S=Kn(b);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Ia(b,f)&&(y=Math.floor((f[0]-b[0])/S),_=Math.ceil((f[2]-b[2])/S),v=v!==Math.abs(l)>Math.PI/2);const T=function e7e(c){if(!(c.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const a=c.inversePixelTransform[0],l=c.inversePixelTransform[1],h=Math.sqrt(a*a+l*l),d=c.frameState,f=Lp(c.inversePixelTransform.slice(),d.coordinateToPixelTransform),m=BO(d.viewState.resolution,h);let g;const y=Fb();return y&&(g=vh(y,d.viewState.projection)),new $j(c.context,h,d.extent,f,d.viewState.rotation,m,g)}(a);for(let x=y;x<=_;++x){let I,M,D,L,E=this.meridians_.length+this.parallels_.length;if(this.meridiansLabels_)for(M=0,D=this.meridiansLabels_.length;M<D;++M){const P=this.meridians_[M];if(l||0!==x){const F=P.clone();F.translate(x*S,0),F.rotate(-l,m),L=this.getMeridianPoint_(F,g,M),L.rotate(l,m)}else L=this.getMeridianPoint_(P,f,M);I=this.featurePool_[E++],I.setGeometry(L),I.set("graticule_label",this.meridiansLabels_[M].text),T.drawFeature(I,this.lonLabelStyle_(I))}if(this.parallelsLabels_&&(x===y&&v||x===_&&!v))for(M=0,D=this.parallels_.length;M<D;++M){const P=this.parallels_[M];if(l||0!==x){const F=P.clone();F.translate(x*S,0),F.rotate(-l,m),L=this.getParallelPoint_(F,g,M),L.rotate(l,m)}else L=this.getParallelPoint_(P,f,M);I=this.featurePool_[E++],I.setGeometry(L),I.set("graticule_label",this.parallelsLabels_[M].text),T.drawFeature(I,this.latLabelStyle_(I))}}}createGraticule_(a,l,h,d){const f=this.getInterval_(h);if(-1==f)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));let m=!1;const g=this.projection_.getExtent(),y=Kn(g);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!Ia(g,a)&&(Kn(a)>=y?(a[0]=g[0],a[2]=g[2]):m=!0);const _=[Qn(l[0],this.minX_,this.maxX_),Qn(l[1],this.minY_,this.maxY_)],v=this.toLonLatTransform_(_);isNaN(v[1])&&(v[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let b=Qn(v[0],this.minLon_,this.maxLon_),S=Qn(v[1],this.minLat_,this.maxLat_);const T=this.maxLines_;let x,E,I,M,D=a;m||(D=[Qn(a[0],this.minX_,this.maxX_),Qn(a[1],this.minY_,this.maxY_),Qn(a[2],this.minX_,this.maxX_),Qn(a[3],this.minY_,this.maxY_)]);const L=Sx(D,this.toLonLatTransform_,void 0,8);let P=L[3],F=L[2],B=L[1],G=L[0];if(m||(lu(D,this.bottomLeft_)&&(G=this.minLon_,B=this.minLat_),lu(D,this.bottomRight_)&&(F=this.maxLon_,B=this.minLat_),lu(D,this.topLeft_)&&(G=this.minLon_,P=this.maxLat_),lu(D,this.topRight_)&&(F=this.maxLon_,P=this.maxLat_),P=Qn(P,S,this.maxLat_),F=Qn(F,b,this.maxLon_),B=Qn(B,this.minLat_,S),G=Qn(G,this.minLon_,b)),b=Math.floor(b/f)*f,M=Qn(b,this.minLon_,this.maxLon_),E=this.addMeridian_(M,B,P,d,a,0),x=0,m)for(;(M-=f)>=G&&x++<T;)E=this.addMeridian_(M,B,P,d,a,E);else for(;M!=this.minLon_&&x++<T;)M=Math.max(M-f,this.minLon_),E=this.addMeridian_(M,B,P,d,a,E);if(M=Qn(b,this.minLon_,this.maxLon_),x=0,m)for(;(M+=f)<=F&&x++<T;)E=this.addMeridian_(M,B,P,d,a,E);else for(;M!=this.maxLon_&&x++<T;)M=Math.min(M+f,this.maxLon_),E=this.addMeridian_(M,B,P,d,a,E);for(this.meridians_.length=E,this.meridiansLabels_&&(this.meridiansLabels_.length=E),S=Math.floor(S/f)*f,I=Qn(S,this.minLat_,this.maxLat_),E=this.addParallel_(I,G,F,d,a,0),x=0;I!=this.minLat_&&x++<T;)I=Math.max(I-f,this.minLat_),E=this.addParallel_(I,G,F,d,a,E);for(I=Qn(S,this.minLat_,this.maxLat_),x=0;I!=this.maxLat_&&x++<T;)I=Math.min(I+f,this.maxLat_),E=this.addParallel_(I,G,F,d,a,E);this.parallels_.length=E,this.parallelsLabels_&&(this.parallelsLabels_.length=E)}getInterval_(a){const l=this.projectionCenterLonLat_[0],h=this.projectionCenterLonLat_[1];let d=-1;const f=Math.pow(this.targetSize_*a,2),m=[],g=[];for(let y=0,_=this.intervals_.length;y<_;++y){const v=Qn(this.intervals_[y]/2,0,90),b=Qn(h,-90+v,90-v);if(m[0]=l-v,m[1]=b-v,g[0]=l+v,g[1]=b+v,this.fromLonLatTransform_(m,m),this.fromLonLatTransform_(g,g),Math.pow(g[0]-m[0],2)+Math.pow(g[1]-m[1],2)<=f)break;d=this.intervals_[y]}return d}getMeridian_(a,l,h,d,f){const m=function uJe(c,a,l,h,d){return EB(function(m){return[c,a+(l-a)*m]},uu(dn("EPSG:4326"),h),d)}(a,l,h,this.projection_,d);let g=this.meridians_[f];return g?(g.setFlatCoordinates("XY",m),g.changed()):(g=new Eh(m,"XY"),this.meridians_[f]=g),g}getMeridianPoint_(a,l,h){const d=a.getFlatCoordinates();let f=1,m=d.length-1;d[f]>d[m]&&(f=m,m=1);const g=Math.max(l[1],d[f]),y=Math.min(l[3],d[m]),_=Qn(l[1]+Math.abs(l[1]-l[3])*this.lonLabelPosition_,g,y),S=this.meridiansLabels_[h].geom;return S.setCoordinates([d[f-1]+(d[m-1]-d[f-1])*(_-d[f])/(d[m]-d[f]),_]),S}getMeridians(){return this.meridians_}getParallel_(a,l,h,d,f){const m=function hJe(c,a,l,h,d){return EB(function(m){return[a+(l-a)*m,c]},uu(dn("EPSG:4326"),h),d)}(a,l,h,this.projection_,d);let g=this.parallels_[f];return g?(g.setFlatCoordinates("XY",m),g.changed()):g=new Eh(m,"XY"),g}getParallelPoint_(a,l,h){const d=a.getFlatCoordinates();let f=0,m=d.length-2;d[f]>d[m]&&(f=m,m=0);const g=Math.max(l[0],d[f]),y=Math.min(l[2],d[m]),_=Qn(l[0]+Math.abs(l[0]-l[2])*this.latLabelPosition_,g,y),S=this.parallelsLabels_[h].geom;return S.setCoordinates([_,d[f+1]+(d[m+1]-d[f+1])*(_-d[f])/(d[m]-d[f])]),S}getParallels(){return this.parallels_}updateProjectionInfo_(a){const l=dn("EPSG:4326"),h=a.getWorldExtent();this.maxLat_=h[3],this.maxLon_=h[2],this.minLat_=h[1],this.minLon_=h[0];const d=uu(a,l);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=d;else{const m=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(g,y,_){const v=d(g,y,_=_||2);for(let b=0,S=v.length;b<S;b+=_)v[b]<m&&(v[b]+=360);return v}}this.fromLonLatTransform_=uu(l,a);const f=Sx([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=f[0],this.maxX_=f[2],this.minY_=f[1],this.maxY_=f[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(aa(a.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=a}};let gJe=(()=>{class c{constructor(l,h,d,f){this.layersSvc=l,this.mapStateSvc=h,this.mapOlSvc=d,this.mapThreeSvc=f,this.class="content-container",this.controls={attribution:!0,mousePosition:!0,scaleLine:!0,zoom:!0}}ngOnInit(){const l=new gu({source:new bS({url:"https://planetarymaps.usgs.gov/cgi-bin/mapserv?map=/maps/mars/phobos_simp_cyl.map",params:{LAYERS:"VIKING"},crossOrigin:"anonymous"})}),h=new mJe({showLabels:!0,wrapX:!0,latLabelPosition:.5}),d=new Ji({id:"phobos",name:"Phobos",custom_layer:l,description:"There are a few objects that are very big, but still irregularly shaped.\n      Because they are big, it makes sense to serve their image-material per WMTS instead of a single, humongous file.\n      Because they are irregularly shaped, it makes sense to display them in 3d.\n\n      This demo shows how we can project openlayers-layers onto a three-js mesh to reap the benefits of both libraries."}),f=new Ji({id:"graticule",name:"Graticule",custom_layer:h,description:"Note how adding and removing this layer is reflected in both the map and the 3d-object."});this.layersSvc.addLayer(d),this.layersSvc.addLayer(f)}ngAfterViewInit(){const l=dn("EPSG:4326");this.mapOlSvc.setProjection(l),this.mapOlSvc.map.getView().setMaxZoom(4)}}return c.\u0275fac=function(l){return new(l||c)(N(qs),N(oo),N(Ss),N(Yre))},c.\u0275cmp=He({type:c,selectors:[["app-route-example-threejs"]],hostVars:2,hostBindings:function(l,h){2&l&&na(h.class)},features:[Lt([qs,Ss])],decls:25,vars:10,consts:[[1,"content-area"],[2,"height","49.5%","width","100%"],["id","olMap",3,"layersSvc","mapState","controls"],[2,"height","50%","width","100%"],["id","threeMap",3,"mapOlSvc"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","info","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[1,"card",2,"margin","0px","margin-bottom","10px"],[1,"card-block"],[1,"card-text"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"alert-item","static"],[1,"alert-text"],[3,"layersSvc","mapStateSvc"]],template:function(l,h){1&l&&(U(0,"main",0)(1,"div",1),xe(2,"ukis-map-ol",2),H(),U(3,"div",3),xe(4,"ukis-map-three",4),H()(),U(5,"clr-vertical-nav",5)(6,"clr-vertical-nav-group",6),xe(7,"clr-icon",7),ve(8," Phobos "),U(9,"clr-vertical-nav-group-children",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"p"),ve(14," This is a threejs/openlayers demo application. Here, we project an openlayers map as a canvas-texture onto a glTF model of the Mars-moon Phobos. "),H(),U(15,"p"),ve(16," There are some objects that are so irregular that they are better displayed with a three dimensional model, yet so large that their imagedata is best served per WMTS. Phobos is a good example of such an object. Note how the texture gets sharper when you zoom in: this is a new WMTS tile being loaded, projected and displayed on the fly. "),H()()()()()(),U(17,"clr-vertical-nav-group",6),xe(18,"clr-icon",12),ve(19," Layers "),U(20,"clr-vertical-nav-group-children",8)(21,"div",13)(22,"span",14),ve(23," The controls of map and 3d-object are synced. Use the mouse to pan around in either and watch both displays change. "),H()(),xe(24,"ukis-layer-control",15),H()()()),2&l&&(V(2),z("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),V(2),z("mapOlSvc",h.mapOlSvc),V(1),z("clrVerticalNavCollapsible",!0)("clr-nav-level",2),V(1),z("clrVerticalNavGroupExpanded",!0),V(11),z("clrVerticalNavGroupExpanded",!0),V(7),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc))},dependencies:[v3,ga,Uc,Ou,Nu,Fu,ku,Nh,xKe,Qh]}),c})(),yJe=(()=>{class c{constructor(l,h,d,f,m){this.layersSvc=l,this.mapStateSvc=h,this.mapSvc=d,this.owcSvc=f,this.http=m,this.class="content-container",this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.mapSvc.map.addControl(new v$),this.getOwcContext("assets/owc/ows-json-context.json")}getOwcContext(l){return this.http.get(l).subscribe(h=>{this.addLayersFromContext(h)})}addLayersFromContext(l){this.owcSvc.getLayers(l,this.mapSvc.EPSG).pipe(Qa()).subscribe(h=>{for(const d of h)d instanceof Ur?("VectorLayers_baseWFSLayer_eocGeojsonLayer_baseKMLLayer"===d.id&&d.layers.forEach(f=>f.popup=!0),this.layersSvc.addLayerGroup(d,d.filtertype)):this.layersSvc.addLayer(d,d.filtertype)}),l.bbox&&this.mapStateSvc.setExtent(l.bbox)}downloadOwc(){var l=this;return Cm(function*(){const h=yield l.layersSvc.getLayerGroups().pipe(Qa()).toPromise(),d=yield l.mapStateSvc.getExtent().pipe(Qa()).toPromise(),f=l.owcSvc.generateOwsContextFrom("Test_OWC",h,d),m=new Blob([JSON.stringify(f)],{type:"application/json"}),g=URL.createObjectURL(m);window.open(g)})()}}return c.\u0275fac=function(l){return new(l||c)(N(qs),N(oo),N(Ss),N(Wee),N(Yh))},c.\u0275cmp=He({type:c,selectors:[["app-route-example-owc-layers"]],hostVars:2,hostBindings:function(l,h){2&l&&na(h.class)},features:[Lt([qs,oo,Ss])],decls:24,vars:15,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","world","title","Overlays","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc","layerfilter"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""],["shape","export","title","Export","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(l,h){1&l&&(U(0,"main",0),xe(1,"ukis-map-ol",1),H(),U(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),xe(4,"clr-icon",4),ve(5," Overlays "),U(6,"clr-vertical-nav-group-children",5),xe(7,"ukis-layer-control",6),H()(),U(8,"clr-vertical-nav-group",3),xe(9,"clr-icon",7),ve(10," Layers "),U(11,"clr-vertical-nav-group-children",5),xe(12,"ukis-layer-control",8),H()(),U(13,"clr-vertical-nav-group",3),xe(14,"clr-icon",9),ve(15," Baselayers "),U(16,"clr-vertical-nav-group-children",5),xe(17,"ukis-base-layer-control",8),H()(),U(18,"clr-vertical-nav-group"),xe(19,"clr-icon",10),ve(20," OWC Control "),U(21,"clr-vertical-nav-group-children",5)(22,"button",11),De("click",function(){return h.downloadOwc()}),ve(23,"Download OWC"),H()()()()),2&l&&(V(1),z("layersSvc",h.layersSvc)("mapState",h.mapStateSvc)("controls",h.controls),V(1),z("clrVerticalNavCollapsible",!0)("clr-nav-level",2),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc)("layerfilter","Overlays"),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc),V(1),z("clrVerticalNavGroupExpanded",!0),V(4),z("layersSvc",h.layersSvc)("mapStateSvc",h.mapStateSvc))},dependencies:[ga,Uc,Ou,Nu,Fu,ku,Nh,Qh,jD],styles:["[_nghost-%COMP%]     .zoom-number{bottom:2.5em;left:8px}"]}),c})();function _Je(c,a){if(1&c&&(U(0,"div",16),ve(1),H()),2&c){const l=he().$implicit;V(1),pr(" ",l.description," ")}}const ase=function(c){return[c]};function vJe(c,a){if(1&c&&(U(0,"div",8)(1,"div",9)(2,"a",10)(3,"div",11),xe(4,"img",12),H()(),U(5,"div",13)(6,"a",10)(7,"div",14),ve(8),H()(),ce(9,_Je,2,1,"div",15),H()()()),2&c){const l=a.$implicit;V(2),z("routerLink",mr(7,ase,"/"+l.route))("title",l.title),V(2),z("src",l.previewUrl,Ka),V(2),z("routerLink",mr(9,ase,"/"+l.route))("title",l.title),V(2),pr(" ",l.title," "),V(1),z("ngIf",null==l?null:l.description)}}const bJe=[{path:"",redirectTo:"examples",pathMatch:"full"},{path:"examples",component:(()=>{class c{constructor(l){this.router=l,this.class="content-container",this.availableBookmarks=[]}ngOnInit(){this.routes=this.router.config.filter(l=>l.data),this.availableBookmarks=this.routes.map(l=>({title:l.data.title,route:l.path,description:l.data.description,previewUrl:l.data.img}))}}return c.\u0275fac=function(l){return new(l||c)(N(Xs))},c.\u0275cmp=He({type:c,selectors:[["app-bookmarks"]],hostVars:2,hostBindings:function(l,h){2&l&&na(h.class)},decls:22,vars:1,consts:[[1,"content-area"],[1,"content-inner"],[1,"overview-title"],["href","https://github.com/dlr-eoc/ukis-frontend-libraries","target","_blank"],[1,"overview-description"],["href","https://clarity.design/documentation/app-layout","target","_blank"],[1,"clr-row","content-inner"],["class","clr-col-sm-4 clr-col-md-4 clr-col-lg-4",4,"ngFor","ngForOf"],[1,"clr-col-sm-4","clr-col-md-4","clr-col-lg-4"],[1,"card"],[3,"routerLink","title"],[1,"card-img"],["alt","preview image",3,"src"],[1,"card-block"],[1,"card-title"],["class","card-text",4,"ngIf"],[1,"card-text"]],template:function(l,h){1&l&&(U(0,"main",0)(1,"div",1)(2,"h3",2),ve(3,"This example application shows how to work with the "),U(4,"a",3),ve(5,"ukis-frontend-libraries"),H()(),U(6,"p",4),ve(7,"Each card brings you to a route component rendered inside a "),U(8,"code"),ve(9,"`router-outlet`"),H(),ve(10,". The components have a "),U(11,"code"),ve(12,"`content-container`"),H(),ve(13," class binding to make the layout structure of "),U(14,"a",5),ve(15,"Clarity Application Layout"),H(),ve(16," correct. Each map component uses providers for "),U(17,"code"),ve(18,"`LayersService`, `MapStateService`..."),H(),ve(19," so they are encapsulated and not shared between all the routes. "),H()(),U(20,"div",6),ce(21,vJe,10,11,"div",7),H()()),2&l&&(V(21),z("ngForOf",h.availableBookmarks))},dependencies:[Er,bn,Ty],styles:[".content-inner[_ngcontent-%COMP%]{margin:.5rem;padding-bottom:.5rem}.content-inner[_ngcontent-%COMP%]   .overview-title[_ngcontent-%COMP%], .content-inner[_ngcontent-%COMP%]   .overview-description[_ngcontent-%COMP%]{text-align:center;margin:.5rem}.content-inner[_ngcontent-%COMP%]   .clr-col-sm-4[_ngcontent-%COMP%], .content-inner[_ngcontent-%COMP%]   .clr-col-md-4[_ngcontent-%COMP%], .content-inner[_ngcontent-%COMP%]   .clr-col-lg-4[_ngcontent-%COMP%]{padding-top:.5rem;padding-bottom:.5rem}.content-inner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{margin-top:0;overflow:hidden}.content-inner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.content-inner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-img[_ngcontent-%COMP%]{max-width:400px}@media screen and (min-width: 575px){.content-inner[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-height:100%}}.content-inner[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-size:1rem}.content-inner[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]{display:flex;padding:0 .5rem;max-height:1.75rem;justify-content:space-between}.content-inner[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{min-height:200px!important;margin-top:.4rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.content-inner[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}.content-inner[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{margin:0;padding-top:.5em;padding-left:.5em}.content-inner[_ngcontent-%COMP%]   .card-footer[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]   clr-icon[_ngcontent-%COMP%]{height:20px;width:20px}"]}),c})()},{path:"example-layers",component:G9e,data:{title:"Layers",description:"Example shows how to work with UKIS layers, groups and the layer-service.",img:"assets/route-layers.jpg"}},{path:"example-projection",component:Y9e,data:{title:"Projection",description:"Example shows how to work with projections using ukis-projection-switch from @dlr-eoc/map-tools.",img:"assets/route-projection.jpg"}},{path:"example-events",component:t7e,data:{title:"Events",description:"Example of map and layer events e.g. to show a loading bar or create a grid layer based on zoom.",img:"assets/route-events.jpg"}},{path:"example-custom-layers",component:NKe,data:{title:"Custom Layers",description:"Example how to use UKIS custom layer e.g. use OpenLayers instances directly, bind events, styles and renderers.",img:"assets/route-custom-layers.jpg"}},{path:"example-owc-layers",component:yJe,data:{title:"OWS Context layers",description:'Example how to declaratively configure layers in a json structure to save and exchange this state. This is using the "OWS Context GeoJSON format". The example context are sored in projects/shared-assets/owc.',img:"assets/route-ows-context.jpg"}},{path:"example-layout",component:HKe,data:{title:"Two Vertical-Nav Layout",description:'Example shows how to use "Clarity Vertical Nav" on both sides and a footer. This should not be used when working on smaller screens. See also "Clarity Design System" Responsive navigation.',img:"assets/route-2-nav.jpg"}},{path:"example-layer-style",component:qKe,data:{title:"Switching Layer-Style",description:'The example shows how styles for "WMS" and "WMTS" are switched dynamically.',img:"assets/route-style-switch.jpg"}},{path:"ol-performance",component:cJe,data:{title:"Ol-Performance",description:"Example to messure/check performance on layer rendering.",img:"assets/route-performance.jpg"}},{path:"threejs",component:gJe,data:{title:"Threejs",description:"This example shows a Threejs map connected to a OpenLayers map e.g. to display a globe and a flat map side by side.",img:"assets/route-threejs.jpg"}},{path:"licenses",component:KKe,data:{title:"Licenses",description:'This example renders all used dependencies specified in assets/licenses.json which are created with "license-checker"',img:"assets/route-licenses.jpg"}}];let SJe=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[H9.forRoot(bJe,{useHash:!0,preloadingStrategy:Ave,relativeLinkResolution:"legacy"}),H9]}),c})();function wJe(c,a){if(1&c&&(U(0,"span",12),ve(1),H()),2&c){const l=he();V(1),Kt(l.version)}}typeof window<"u"&&window.hasOwnProperty("ClarityIcons")&&window.ClarityIcons.add({ukis:'\n                <svg version="1.1" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" class="has-solid"\n                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" role="img">\n                    <title>ukis</title>\n                    <path class="clr-i-solid clr-i-solid-path-1" d="M18,31.5c4.7,0,8.9-2.4,11.3-6.1H6.7C9.1,29.1,13.3,31.5,18,31.5z"/>\n                    <path class="clr-i-solid clr-i-solid-path-2" d="M4.5,17.1c0,0.3,0,0.6,0,0.9c0,1.7,0.3,3.4,0.9,4.9h21.2L4.5,17.1z"/>\n                    <path class="clr-i-solid clr-i-solid-path-3" d="M31,21.5c0.3-1.1,0.5-2.3,0.5-3.5c0-3-1-5.7-2.6-7.9L8.7,15.6L31,21.5z"/>\n                    <path class="clr-i-solid clr-i-solid-path-4" d="M18,4.5c-6,0-11.2,4-12.9,9.5l22-6C24.7,5.8,21.5,4.5,18,4.5z"/>\n                </svg>\n            ',dlr:'\n                <svg version="1.1" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" class="has-solid"\n                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" role="img">\n                    <title>dlr</title>\n                    <path class="clr-i-solid clr-i-solid-path-1" d="M25.8,13.2V3.8l-9.4,9.4h-8l-7.7,7.7l9.4,0v9.4l9.4-9.4h8l7.7-7.7H25.8L25.8,13.2z M23.9,8.5v4.7h-4.7L23.9,8.5\n                    L23.9,8.5z M5.4,18.9l3.8-3.8h5.3l-3.8,3.8H5.4L5.4,18.9z M12.1,25.6v-4.8h4.8L12.1,25.6L12.1,25.6z M18.8,18.9h-5.4l3.8-3.8h5.4\n                    L18.8,18.9L18.8,18.9z M26.8,18.9h-5.2l3.8-3.8h5.2L26.8,18.9L26.8,18.9z M19.6,26.5h1.6c1.8,0,3.3,0.6,3.3,2.9\n                    c0,2.3-1.6,2.9-3.3,2.9h-1.6V26.5L19.6,26.5z M20.8,31.3h0.6c1,0,1.9-0.7,1.9-2c0-1.2-0.9-2-1.9-2h-0.6V31.3L20.8,31.3z M25.7,26.5\n                    h1.1v4.8h2.2v0.9h-3.4V26.5L25.7,26.5z M30.1,26.5h1.2c1.2,0,2.7,0,2.7,1.6c0,0.7-0.5,1.2-1.2,1.3v0c0.3,0,0.5,0.3,0.6,0.6l0.9,2.2\n                    h-1.3l-0.7-1.8c-0.2-0.4-0.3-0.6-0.8-0.6h-0.4v2.4h-1.1V26.5L30.1,26.5z M31.3,28.9h0.4c0.6,0,1.2-0.1,1.2-0.8\n                    c0-0.7-0.6-0.7-1.2-0.7h-0.4V28.9L31.3,28.9z"/>\n                </svg>\n            ',eoc:'\n                <svg version="1.1" viewBox="0 0 580 220" preserveAspectRatio="xMidYMid meet" class="has-solid"\n                    xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" role="img">\n                    <title>eoc</title>\n                    <path class="clr-i-solid clr-i-solid-path-1" d="M284,210c-55.1,0-100-44.9-100-100S228.9,10,284,10s100,44.9,100,100S339.1,210,284,210z M284,28.2\n                    c-45.1,0-81.8,36.7-81.8,81.8s36.7,81.8,81.8,81.8s81.8-36.7,81.8-81.8S329.1,28.2,284,28.2z M566,180.7l-12.9-12.9\n                    c-31.9,31.9-83.8,31.9-115.7,0c-31.9-31.9-31.9-83.8,0-115.7c31.9-31.9,83.8-31.9,115.7,0L566,39.3c-39-39-102.5-39-141.5,0\n                    s-39,102.5,0,141.5c19.5,19.5,45.1,29.3,70.7,29.3S546.5,200.2,566,180.7z M184.7,180.7l-12.9-12.9c-31.9,31.9-83.8,31.9-115.7,0\n                    c-15.5-15.5-24-36-24-57.8c0-21.9,8.5-42.4,24-57.8c28.6-28.6,73.4-31.8,105.5-8.7l-67.8,75.2l13.5,12.2l80.3-89.1l-6.7-6.1\n                    C141.4,0.1,80.9,1.7,43.3,39.3C24.4,58.2,14,83.3,14,110c0,26.7,10.4,51.8,29.3,70.7C62.8,200.2,88.4,210,114,210\n                    C139.6,210,165.2,200.2,184.7,180.7z"/>\n                </svg>\n            '});const CJe=[[["",8,"header-nav-el"]],"*",[["",8,"header-action-el"]]],xJe=function(c){return{"short-title":c}},EJe=[".header-nav-el","*",".header-action-el"];let MJe=(()=>{class c{constructor(){this.title="",this.shortTitle="",this.version=""}ngOnInit(){}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ukis-header"]],inputs:{title:["ukis-title","title"],shortTitle:["ukis-short-title","shortTitle"],version:["ukis-version","version"]},ngContentSelectors:EJe,decls:17,vars:9,consts:[[1,"header-1"],[1,"branding",3,"ngClass"],["href","https://www.dlr.de","target","_blank","alt","link to dlr"],["shape","dlr","size","48","alt","dlr icon",1,"is-solid"],["href","https://www.dlr.de/eoc/desktopdefault.aspx/tabid-5413/10560_read-21914","target","_blank","alt","link to dlr ukis"],["shape","ukis","size","33","alt","ukis icon",1,"is-solid"],["routerLink","/","routerLinkActive","active",1,"nav-link"],[1,"title",3,"title"],[1,"title","short",3,"title"],["class","version",4,"ngIf"],[1,"header-nav",3,"clr-nav-level"],[1,"header-actions"],[1,"version"]],template:function(l,h){1&l&&(At(CJe),U(0,"clr-header",0)(1,"div",1)(2,"a",2),xe(3,"clr-icon",3),H(),U(4,"a",4),xe(5,"clr-icon",5),H(),U(6,"a",6)(7,"span",7),ve(8),H(),U(9,"span",8),ve(10),H()(),ce(11,wJe,2,1,"span",9),H(),U(12,"div",10),ze(13),H(),ze(14,1),U(15,"div",11),ze(16,2),H()()),2&l&&(V(1),z("ngClass",mr(7,xJe,h.shortTitle)),V(6),z("title",h.title),V(1),Kt(h.title),V(1),z("title",h.title),V(1),Kt(h.shortTitle),V(1),z("ngIf",h.version),V(1),z("clr-nav-level",1))},dependencies:[ro,bn,Ty,ax,ga,_J,Uc,yJ]}),c})();function DJe(c,a){if(1&c){const l=$t();U(0,"button",11),De("click",function(){const f=yt(l).$implicit;return _t(f.callback&&f.callback())}),ve(1),H()}if(2&c){const l=a.$implicit;V(1),Kt(l.title)}}function AJe(c,a){if(1&c&&(U(0,"div",9),ce(1,DJe,2,1,"button",10),H()),2&c){const l=he(2);V(1),z("ngForOf",l.alert.actions)}}function IJe(c,a){if(1&c){const l=$t();U(0,"button",12),De("click",function(){return yt(l),_t(he(2).close())}),xe(1,"clr-icon",13),H()}}function RJe(c,a){if(1&c&&(U(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),xe(4,"clr-icon",5),H(),xe(5,"div",6),ce(6,AJe,2,1,"div",7),H()(),ce(7,IJe,2,0,"button",8),H()),2&c){const l=he();z("ngClass","alert-"+l.alert.type),V(5),z("innerHTML",l.alert.text,Gw),V(1),z("ngIf",l.alert.actions),V(1),z("ngIf",l.alert.closeable)}}let LJe=(()=>{class c{constructor(){this.alertChange=new st}close(){this.alert=null,this.alertChange.emit(this.alert)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ukis-global-alert"]],inputs:{alert:"alert"},outputs:{alertChange:"alertChange"},decls:1,vars:1,consts:[["class","alert alert-app-level","role","alert",3,"ngClass",4,"ngIf"],["role","alert",1,"alert","alert-app-level",3,"ngClass"],[1,"alert-items"],[1,"alert-item","static"],[1,"alert-icon-wrapper"],["shape","info-circle",1,"alert-icon"],[1,"alert-text",3,"innerHTML"],["class","alert-actions",4,"ngIf"],["type","button","class","close","aria-label","alert close",3,"click",4,"ngIf"],[1,"alert-actions"],["class","btn alert-action","aria-label","alert action",3,"click",4,"ngFor","ngForOf"],["aria-label","alert action",1,"btn","alert-action",3,"click"],["type","button","aria-label","alert close",1,"close",3,"click"],["aria-hidden","true","shape","close"]],template:function(l,h){1&l&&ce(0,RJe,8,4,"div",0),2&l&&z("ngIf",h.alert)},dependencies:[ro,Er,bn,v3,ga]}),c})();function PJe(c,a){if(1&c&&(U(0,"span")(1,"div",1),xe(2,"progress"),H()()),2&c){const l=he();V(1),z("ngClass",l.getProgressClass())}}function OJe(c,a){if(1&c&&(U(0,"span")(1,"div",2),xe(2,"progress",3),H()()),2&c){const l=he();V(1),z("ngClass",l.getProgressClass()),V(1),Vo("max",l.progress.max),Vo("value",l.progress.value)}}let NJe=(()=>{class c{constructor(){this.progressChange=new st}ngOnInit(){}getProgressClass(){return this.progress?.class?this.progress?.class:""}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275cmp=He({type:c,selectors:[["ukis-global-progress"]],inputs:{progress:"progress"},outputs:{progressChange:"progressChange"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"progress","loop",3,"ngClass"],[1,"progress",3,"ngClass"],[3,"max","value"]],template:function(l,h){1&l&&(ce(0,PJe,3,1,"span",0),ce(1,OJe,3,3,"span",0)),2&l&&(z("ngIf",h.progress&&h.progress.indeterminate),V(1),z("ngIf",h.progress&&!h.progress.indeterminate))},dependencies:[ro,bn],styles:[".progress[_ngcontent-%COMP%]{height:.5em}"]}),c})();function FJe(c,a){if(1&c){const l=$t();U(0,"ukis-global-alert",5),De("alertChange",function(d){return yt(l),_t(he().ui.alert=d)}),H()}2&c&&z("alert",he().ui.alert)}function kJe(c,a){if(1&c){const l=$t();U(0,"ukis-global-progress",6),De("progressChange",function(d){return yt(l),_t(he().ui.progress=d)}),H()}2&c&&z("progress",he().ui.progress)}function VJe(c,a){if(1&c&&(U(0,"a",9),ve(1),H()),2&c){const l=he().$implicit;ry("routerLink","/",l.path,""),V(1),Kt(l.data.title)}}function BJe(c,a){if(1&c&&(ci(0,7),ce(1,VJe,2,2,"a",8),ui()),2&c){const l=a.$implicit,h=he();V(1),z("ngIf",h.currentRoute===l.path)}}let UJe=(()=>{class c{constructor(l,h,d){this.alertService=l,this.progressService=h,this.router=d,this.title="",this.shortTitle="",this.version="11.1.0",this.ui={alert:null,progress:null},this.subs=[],this.showProgress=f=>{this.ui.progress=f},this.setAlert=f=>{this.ui.alert=f},this.init(),this.routes=this.router.config.filter(f=>f.data)}ngOnInit(){const l=this.router.events.pipe(Ki(h=>h instanceof Pd||h instanceof $C)).subscribe(h=>{const d=new URL(h.url,`${window.location.origin}${window.location.pathname}`);this.currentRoute="/examples"!==d.pathname?d.pathname.slice(1):null});this.subs.push(l)}ngOnDestroy(){this.subs.map(l=>l.unsubscribe())}init(){this.getHtmlMeta(["title","version","description","short-title"]),this.TITLE&&(this.title=this.TITLE),this["SHORT-TITLE"]&&(this.shortTitle=this["SHORT-TITLE"]),this.alertService.alert$.subscribe(l=>{this.setAlert(l)}),this.progressService.progress$.subscribe(l=>{this.showProgress(l)})}getHtmlMeta(l){const h=document.getElementsByTagName("meta");for(let d=0,f=h.length;d<f;d++){const m=h[d],g=m.getAttribute("name");l.includes(g)&&(this[g.toUpperCase()]=m.getAttribute("content")||m.getAttribute("value"))}}}return c.\u0275fac=function(l){return new(l||c)(N(I4),N(R4),N(Xs))},c.\u0275cmp=He({type:c,selectors:[["app-root"]],decls:8,vars:6,consts:[[3,"alert","alertChange",4,"ngIf"],[3,"progress","progressChange",4,"ngIf"],[3,"ukis-title","ukis-short-title","ukis-version"],["routerLink","/examples","routerLinkActive","active",1,"nav-link","nav-text","header-nav-el"],["class","nav-link nav-text header-nav-el",4,"ngFor","ngForOf"],[3,"alert","alertChange"],[3,"progress","progressChange"],[1,"nav-link","nav-text","header-nav-el"],["routerLinkActive","active","class","nav-link nav-text header-nav-el",3,"routerLink",4,"ngIf"],["routerLinkActive","active",1,"nav-link","nav-text","header-nav-el",3,"routerLink"]],template:function(l,h){1&l&&(U(0,"clr-main-container"),ce(1,FJe,1,1,"ukis-global-alert",0),ce(2,kJe,1,1,"ukis-global-progress",1),U(3,"ukis-header",2)(4,"a",3),ve(5,"Examples"),H(),ce(6,BJe,2,1,"ng-container",4),H(),xe(7,"router-outlet"),H()),2&l&&(V(1),z("ngIf",h.ui.alert),V(1),z("ngIf",h.ui.progress),V(1),z("ukis-title",h.title)("ukis-short-title",h.shortTitle)("ukis-version",h.version),V(3),z("ngForOf",h.routes))},dependencies:[Er,bn,oP,Ty,ax,gJ,b3,MJe,LJe,NJe]}),c})();function cse(c){return new rt(3e3,!1)}function SQe(){return typeof window<"u"&&typeof window.document<"u"}function MB(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function op(c){switch(c.length){case 0:return new $S;case 1:return c[0];default:return new fY(c)}}function use(c,a,l,h,d=new Map,f=new Map){const m=[],g=[];let y=-1,_=null;if(h.forEach(v=>{const b=v.get("offset"),S=b==y,T=S&&_||new Map;v.forEach((x,E)=>{let I=E,M=x;if("offset"!==E)switch(I=a.normalizePropertyName(I,m),M){case"!":M=d.get(E);break;case kh:M=f.get(E);break;default:M=a.normalizeStyleValue(E,I,M,m)}T.set(I,M)}),S||g.push(T),_=T,y=b}),m.length)throw function cQe(c){return new rt(3502,!1)}();return g}function DB(c,a,l,h){switch(a){case"start":c.onStart(()=>h(l&&AB(l,"start",c)));break;case"done":c.onDone(()=>h(l&&AB(l,"done",c)));break;case"destroy":c.onDestroy(()=>h(l&&AB(l,"destroy",c)))}}function AB(c,a,l){const f=IB(c.element,c.triggerName,c.fromState,c.toState,a||c.phaseName,l.totalTime??c.totalTime,!!l.disabled),m=c._data;return null!=m&&(f._data=m),f}function IB(c,a,l,h,d="",f=0,m){return{element:c,triggerName:a,fromState:l,toState:h,phaseName:d,totalTime:f,disabled:!!m}}function Al(c,a,l){let h=c.get(a);return h||c.set(a,h=l),h}function hse(c){const a=c.indexOf(":");return[c.substring(1,a),c.slice(a+1)]}let RB=(c,a)=>!1,dse=(c,a,l)=>[],fse=null;function LB(c){const a=c.parentNode||c.host;return a===fse?null:a}(MB()||typeof Element<"u")&&(SQe()?(fse=(()=>document.documentElement)(),RB=(c,a)=>{for(;a;){if(a===c)return!0;a=LB(a)}return!1}):RB=(c,a)=>c.contains(a),dse=(c,a,l)=>{if(l)return Array.from(c.querySelectorAll(a));const h=c.querySelector(a);return h?[h]:[]});let pg=null,pse=!1;const mse=RB,gse=dse;let yse=(()=>{class c{validateStyleProperty(l){return function wQe(c){pg||(pg=function CQe(){return typeof document<"u"?document.body:null}()||{},pse=!!pg.style&&"WebkitAppearance"in pg.style);let a=!0;return pg.style&&!function TQe(c){return"ebkit"==c.substring(1,6)}(c)&&(a=c in pg.style,!a&&pse&&(a="Webkit"+c.charAt(0).toUpperCase()+c.slice(1)in pg.style)),a}(l)}matchesElement(l,h){return!1}containsElement(l,h){return mse(l,h)}getParentElement(l){return LB(l)}query(l,h,d){return gse(l,h,d)}computeStyle(l,h,d){return d||""}animate(l,h,d,f,m,g=[],y){return new $S(d,f)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})(),PB=(()=>{class c{}return c.NOOP=new yse,c})();const OB="ng-enter",vI="ng-leave",bI="ng-trigger",SI=".ng-trigger",vse="ng-animating",NB=".ng-animating";function md(c){if("number"==typeof c)return c;const a=c.match(/^(-?[\.\d]+)(m?s)/);return!a||a.length<2?0:FB(parseFloat(a[1]),a[2])}function FB(c,a){return"s"===a?1e3*c:c}function TI(c,a,l){return c.hasOwnProperty("duration")?c:function MQe(c,a,l){let d,f=0,m="";if("string"==typeof c){const g=c.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===g)return a.push(cse()),{duration:0,delay:0,easing:""};d=FB(parseFloat(g[1]),g[2]);const y=g[3];null!=y&&(f=FB(parseFloat(y),g[4]));const _=g[5];_&&(m=_)}else d=c;if(!l){let g=!1,y=a.length;d<0&&(a.push(function zJe(){return new rt(3100,!1)}()),g=!0),f<0&&(a.push(function GJe(){return new rt(3101,!1)}()),g=!0),g&&a.splice(y,0,cse())}return{duration:d,delay:f,easing:m}}(c,a,l)}function JT(c,a={}){return Object.keys(c).forEach(l=>{a[l]=c[l]}),a}function bse(c){const a=new Map;return Object.keys(c).forEach(l=>{a.set(l,c[l])}),a}function ap(c,a=new Map,l){if(l)for(let[h,d]of l)a.set(h,d);for(let[h,d]of c)a.set(h,d);return a}function Tse(c,a,l){return l?a+":"+l+";":""}function wse(c){let a="";for(let l=0;l<c.style.length;l++){const h=c.style.item(l);a+=Tse(0,h,c.style.getPropertyValue(h))}for(const l in c.style)c.style.hasOwnProperty(l)&&!l.startsWith("_")&&(a+=Tse(0,RQe(l),c.style[l]));c.setAttribute("style",a)}function qu(c,a,l){c.style&&(a.forEach((h,d)=>{const f=VB(d);l&&!l.has(d)&&l.set(d,c.style[f]),c.style[f]=h}),MB()&&wse(c))}function mg(c,a){c.style&&(a.forEach((l,h)=>{const d=VB(h);c.style[d]=""}),MB()&&wse(c))}function QT(c){return Array.isArray(c)?1==c.length?c[0]:hY(c):c}const kB=new RegExp("{{\\s*(.+?)\\s*}}","g");function Cse(c){let a=[];if("string"==typeof c){let l;for(;l=kB.exec(c);)a.push(l[1]);kB.lastIndex=0}return a}function ew(c,a,l){const h=c.toString(),d=h.replace(kB,(f,m)=>{let g=a[m];return null==g&&(l.push(function jJe(c){return new rt(3003,!1)}()),g=""),g.toString()});return d==h?c:d}function wI(c){const a=[];let l=c.next();for(;!l.done;)a.push(l.value),l=c.next();return a}const IQe=/-+([a-z0-9])/g;function VB(c){return c.replace(IQe,(...a)=>a[1].toUpperCase())}function RQe(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Il(c,a,l){switch(a.type){case 7:return c.visitTrigger(a,l);case 0:return c.visitState(a,l);case 1:return c.visitTransition(a,l);case 2:return c.visitSequence(a,l);case 3:return c.visitGroup(a,l);case 4:return c.visitAnimate(a,l);case 5:return c.visitKeyframes(a,l);case 6:return c.visitStyle(a,l);case 8:return c.visitReference(a,l);case 9:return c.visitAnimateChild(a,l);case 10:return c.visitAnimateRef(a,l);case 11:return c.visitQuery(a,l);case 12:return c.visitStagger(a,l);default:throw function WJe(c){return new rt(3004,!1)}()}}function xse(c,a){return window.getComputedStyle(c)[a]}function kQe(c,a){const l=[];return"string"==typeof c?c.split(/\s*,\s*/).forEach(h=>function VQe(c,a,l){if(":"==c[0]){const y=function BQe(c,a){switch(c){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(l,h)=>parseFloat(h)>parseFloat(l);case":decrement":return(l,h)=>parseFloat(h)<parseFloat(l);default:return a.push(function sQe(c){return new rt(3016,!1)}()),"* => *"}}(c,l);if("function"==typeof y)return void a.push(y);c=y}const h=c.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==h||h.length<4)return l.push(function rQe(c){return new rt(3015,!1)}()),a;const d=h[1],f=h[2],m=h[3];a.push(Ese(d,m));"<"==f[0]&&!("*"==d&&"*"==m)&&a.push(Ese(m,d))}(h,l,a)):l.push(c),l}const MI=new Set(["true","1"]),DI=new Set(["false","0"]);function Ese(c,a){const l=MI.has(c)||DI.has(c),h=MI.has(a)||DI.has(a);return(d,f)=>{let m="*"==c||c==d,g="*"==a||a==f;return!m&&l&&"boolean"==typeof d&&(m=d?MI.has(c):DI.has(c)),!g&&h&&"boolean"==typeof f&&(g=f?MI.has(a):DI.has(a)),m&&g}}const UQe=new RegExp("s*:selfs*,?","g");function BB(c,a,l,h){return new zQe(c).build(a,l,h)}class zQe{constructor(a){this._driver=a}build(a,l,h){const d=new jQe(l);return this._resetContextStyleTimingState(d),Il(this,QT(a),d)}_resetContextStyleTimingState(a){a.currentQuerySelector="",a.collectedStyles=new Map,a.collectedStyles.set("",new Map),a.currentTime=0}visitTrigger(a,l){let h=l.queryCount=0,d=l.depCount=0;const f=[],m=[];return"@"==a.name.charAt(0)&&l.errors.push(function qJe(){return new rt(3006,!1)}()),a.definitions.forEach(g=>{if(this._resetContextStyleTimingState(l),0==g.type){const y=g,_=y.name;_.toString().split(/\s*,\s*/).forEach(v=>{y.name=v,f.push(this.visitState(y,l))}),y.name=_}else if(1==g.type){const y=this.visitTransition(g,l);h+=y.queryCount,d+=y.depCount,m.push(y)}else l.errors.push(function $Je(){return new rt(3007,!1)}())}),{type:7,name:a.name,states:f,transitions:m,queryCount:h,depCount:d,options:null}}visitState(a,l){const h=this.visitStyle(a.styles,l),d=a.options&&a.options.params||null;if(h.containsDynamicStyles){const f=new Set,m=d||{};h.styles.forEach(g=>{g instanceof Map&&g.forEach(y=>{Cse(y).forEach(_=>{m.hasOwnProperty(_)||f.add(_)})})}),f.size&&(wI(f.values()),l.errors.push(function YJe(c,a){return new rt(3008,!1)}()))}return{type:0,name:a.name,style:h,options:d?{params:d}:null}}visitTransition(a,l){l.queryCount=0,l.depCount=0;const h=Il(this,QT(a.animation),l);return{type:1,matchers:kQe(a.expr,l.errors),animation:h,queryCount:l.queryCount,depCount:l.depCount,options:gg(a.options)}}visitSequence(a,l){return{type:2,steps:a.steps.map(h=>Il(this,h,l)),options:gg(a.options)}}visitGroup(a,l){const h=l.currentTime;let d=0;const f=a.steps.map(m=>{l.currentTime=h;const g=Il(this,m,l);return d=Math.max(d,l.currentTime),g});return l.currentTime=d,{type:3,steps:f,options:gg(a.options)}}visitAnimate(a,l){const h=function XQe(c,a){if(c.hasOwnProperty("duration"))return c;if("number"==typeof c)return UB(TI(c,a).duration,0,"");const l=c;if(l.split(/\s+/).some(f=>"{"==f.charAt(0)&&"{"==f.charAt(1))){const f=UB(0,0,"");return f.dynamic=!0,f.strValue=l,f}const d=TI(l,a);return UB(d.duration,d.delay,d.easing)}(a.timings,l.errors);l.currentAnimateTimings=h;let d,f=a.styles?a.styles:vi({});if(5==f.type)d=this.visitKeyframes(f,l);else{let m=a.styles,g=!1;if(!m){g=!0;const _={};h.easing&&(_.easing=h.easing),m=vi(_)}l.currentTime+=h.duration+h.delay;const y=this.visitStyle(m,l);y.isEmptyStep=g,d=y}return l.currentAnimateTimings=null,{type:4,timings:h,style:d,options:null}}visitStyle(a,l){const h=this._makeStyleAst(a,l);return this._validateStyleAst(h,l),h}_makeStyleAst(a,l){const h=[],d=Array.isArray(a.styles)?a.styles:[a.styles];for(let g of d)"string"==typeof g?g===kh?h.push(g):l.errors.push(new rt(3002,!1)):h.push(bse(g));let f=!1,m=null;return h.forEach(g=>{if(g instanceof Map&&(g.has("easing")&&(m=g.get("easing"),g.delete("easing")),!f))for(let y of g.values())if(y.toString().indexOf("{{")>=0){f=!0;break}}),{type:6,styles:h,easing:m,offset:a.offset,containsDynamicStyles:f,options:null}}_validateStyleAst(a,l){const h=l.currentAnimateTimings;let d=l.currentTime,f=l.currentTime;h&&f>0&&(f-=h.duration+h.delay),a.styles.forEach(m=>{"string"!=typeof m&&m.forEach((g,y)=>{const _=l.collectedStyles.get(l.currentQuerySelector),v=_.get(y);let b=!0;v&&(f!=d&&f>=v.startTime&&d<=v.endTime&&(l.errors.push(function KJe(c,a,l,h,d){return new rt(3010,!1)}()),b=!1),f=v.startTime),b&&_.set(y,{startTime:f,endTime:d}),l.options&&function AQe(c,a,l){const h=a.params||{},d=Cse(c);d.length&&d.forEach(f=>{h.hasOwnProperty(f)||l.push(function HJe(c){return new rt(3001,!1)}())})}(g,l.options,l.errors)})})}visitKeyframes(a,l){const h={type:5,styles:[],options:null};if(!l.currentAnimateTimings)return l.errors.push(function JJe(){return new rt(3011,!1)}()),h;let f=0;const m=[];let g=!1,y=!1,_=0;const v=a.steps.map(M=>{const D=this._makeStyleAst(M,l);let L=null!=D.offset?D.offset:function WQe(c){if("string"==typeof c)return null;let a=null;if(Array.isArray(c))c.forEach(l=>{if(l instanceof Map&&l.has("offset")){const h=l;a=parseFloat(h.get("offset")),h.delete("offset")}});else if(c instanceof Map&&c.has("offset")){const l=c;a=parseFloat(l.get("offset")),l.delete("offset")}return a}(D.styles),P=0;return null!=L&&(f++,P=D.offset=L),y=y||P<0||P>1,g=g||P<_,_=P,m.push(P),D});y&&l.errors.push(function QJe(){return new rt(3012,!1)}()),g&&l.errors.push(function eQe(){return new rt(3200,!1)}());const b=a.steps.length;let S=0;f>0&&f<b?l.errors.push(function tQe(){return new rt(3202,!1)}()):0==f&&(S=1/(b-1));const T=b-1,x=l.currentTime,E=l.currentAnimateTimings,I=E.duration;return v.forEach((M,D)=>{const L=S>0?D==T?1:S*D:m[D],P=L*I;l.currentTime=x+E.delay+P,E.duration=P,this._validateStyleAst(M,l),M.offset=L,h.styles.push(M)}),h}visitReference(a,l){return{type:8,animation:Il(this,QT(a.animation),l),options:gg(a.options)}}visitAnimateChild(a,l){return l.depCount++,{type:9,options:gg(a.options)}}visitAnimateRef(a,l){return{type:10,animation:this.visitReference(a.animation,l),options:gg(a.options)}}visitQuery(a,l){const h=l.currentQuerySelector,d=a.options||{};l.queryCount++,l.currentQuery=a;const[f,m]=function GQe(c){const a=!!c.split(/\s*,\s*/).find(l=>":self"==l);return a&&(c=c.replace(UQe,"")),c=c.replace(/@\*/g,SI).replace(/@\w+/g,l=>SI+"-"+l.slice(1)).replace(/:animating/g,NB),[c,a]}(a.selector);l.currentQuerySelector=h.length?h+" "+f:f,Al(l.collectedStyles,l.currentQuerySelector,new Map);const g=Il(this,QT(a.animation),l);return l.currentQuery=null,l.currentQuerySelector=h,{type:11,selector:f,limit:d.limit||0,optional:!!d.optional,includeSelf:m,animation:g,originalSelector:a.selector,options:gg(a.options)}}visitStagger(a,l){l.currentQuery||l.errors.push(function nQe(){return new rt(3013,!1)}());const h="full"===a.timings?{duration:0,delay:0,easing:"full"}:TI(a.timings,l.errors,!0);return{type:12,animation:Il(this,QT(a.animation),l),timings:h,options:null}}}class jQe{constructor(a){this.errors=a,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function gg(c){return c?(c=JT(c)).params&&(c.params=function HQe(c){return c?JT(c):null}(c.params)):c={},c}function UB(c,a,l){return{duration:c,delay:a,easing:l}}function zB(c,a,l,h,d,f,m=null,g=!1){return{type:1,element:c,keyframes:a,preStyleProps:l,postStyleProps:h,duration:d,delay:f,totalTime:d+f,easing:m,subTimeline:g}}class AI{constructor(){this._map=new Map}get(a){return this._map.get(a)||[]}append(a,l){let h=this._map.get(a);h||this._map.set(a,h=[]),h.push(...l)}has(a){return this._map.has(a)}clear(){this._map.clear()}}const YQe=new RegExp(":enter","g"),KQe=new RegExp(":leave","g");function GB(c,a,l,h,d,f=new Map,m=new Map,g,y,_=[]){return(new JQe).buildKeyframes(c,a,l,h,d,f,m,g,y,_)}class JQe{buildKeyframes(a,l,h,d,f,m,g,y,_,v=[]){_=_||new AI;const b=new HB(a,l,_,d,f,v,[]);b.options=y;const S=y.delay?md(y.delay):0;b.currentTimeline.delayNextStep(S),b.currentTimeline.setStyles([m],null,b.errors,y),Il(this,h,b);const T=b.timelines.filter(x=>x.containsAnimation());if(T.length&&g.size){let x;for(let E=T.length-1;E>=0;E--){const I=T[E];if(I.element===l){x=I;break}}x&&!x.allowOnlyTimelineStyles()&&x.setStyles([g],null,b.errors,y)}return T.length?T.map(x=>x.buildKeyframes()):[zB(l,[],[],[],0,S,"",!1)]}visitTrigger(a,l){}visitState(a,l){}visitTransition(a,l){}visitAnimateChild(a,l){const h=l.subInstructions.get(l.element);if(h){const d=l.createSubContext(a.options),f=l.currentTimeline.currentTime,m=this._visitSubInstructions(h,d,d.options);f!=m&&l.transformIntoNewTimeline(m)}l.previousNode=a}visitAnimateRef(a,l){const h=l.createSubContext(a.options);h.transformIntoNewTimeline(),this._applyAnimationRefDelays([a.options,a.animation.options],l,h),this.visitReference(a.animation,h),l.transformIntoNewTimeline(h.currentTimeline.currentTime),l.previousNode=a}_applyAnimationRefDelays(a,l,h){for(const d of a){const f=d?.delay;if(f){const m="number"==typeof f?f:md(ew(f,d?.params??{},l.errors));h.delayNextStep(m)}}}_visitSubInstructions(a,l,h){let f=l.currentTimeline.currentTime;const m=null!=h.duration?md(h.duration):null,g=null!=h.delay?md(h.delay):null;return 0!==m&&a.forEach(y=>{const _=l.appendInstructionToTimeline(y,m,g);f=Math.max(f,_.duration+_.delay)}),f}visitReference(a,l){l.updateOptions(a.options,!0),Il(this,a.animation,l),l.previousNode=a}visitSequence(a,l){const h=l.subContextCount;let d=l;const f=a.options;if(f&&(f.params||f.delay)&&(d=l.createSubContext(f),d.transformIntoNewTimeline(),null!=f.delay)){6==d.previousNode.type&&(d.currentTimeline.snapshotCurrentStyles(),d.previousNode=II);const m=md(f.delay);d.delayNextStep(m)}a.steps.length&&(a.steps.forEach(m=>Il(this,m,d)),d.currentTimeline.applyStylesToKeyframe(),d.subContextCount>h&&d.transformIntoNewTimeline()),l.previousNode=a}visitGroup(a,l){const h=[];let d=l.currentTimeline.currentTime;const f=a.options&&a.options.delay?md(a.options.delay):0;a.steps.forEach(m=>{const g=l.createSubContext(a.options);f&&g.delayNextStep(f),Il(this,m,g),d=Math.max(d,g.currentTimeline.currentTime),h.push(g.currentTimeline)}),h.forEach(m=>l.currentTimeline.mergeTimelineCollectedStyles(m)),l.transformIntoNewTimeline(d),l.previousNode=a}_visitTiming(a,l){if(a.dynamic){const h=a.strValue;return TI(l.params?ew(h,l.params,l.errors):h,l.errors)}return{duration:a.duration,delay:a.delay,easing:a.easing}}visitAnimate(a,l){const h=l.currentAnimateTimings=this._visitTiming(a.timings,l),d=l.currentTimeline;h.delay&&(l.incrementTime(h.delay),d.snapshotCurrentStyles());const f=a.style;5==f.type?this.visitKeyframes(f,l):(l.incrementTime(h.duration),this.visitStyle(f,l),d.applyStylesToKeyframe()),l.currentAnimateTimings=null,l.previousNode=a}visitStyle(a,l){const h=l.currentTimeline,d=l.currentAnimateTimings;!d&&h.hasCurrentStyleProperties()&&h.forwardFrame();const f=d&&d.easing||a.easing;a.isEmptyStep?h.applyEmptyStep(f):h.setStyles(a.styles,f,l.errors,l.options),l.previousNode=a}visitKeyframes(a,l){const h=l.currentAnimateTimings,d=l.currentTimeline.duration,f=h.duration,g=l.createSubContext().currentTimeline;g.easing=h.easing,a.styles.forEach(y=>{g.forwardTime((y.offset||0)*f),g.setStyles(y.styles,y.easing,l.errors,l.options),g.applyStylesToKeyframe()}),l.currentTimeline.mergeTimelineCollectedStyles(g),l.transformIntoNewTimeline(d+f),l.previousNode=a}visitQuery(a,l){const h=l.currentTimeline.currentTime,d=a.options||{},f=d.delay?md(d.delay):0;f&&(6===l.previousNode.type||0==h&&l.currentTimeline.hasCurrentStyleProperties())&&(l.currentTimeline.snapshotCurrentStyles(),l.previousNode=II);let m=h;const g=l.invokeQuery(a.selector,a.originalSelector,a.limit,a.includeSelf,!!d.optional,l.errors);l.currentQueryTotal=g.length;let y=null;g.forEach((_,v)=>{l.currentQueryIndex=v;const b=l.createSubContext(a.options,_);f&&b.delayNextStep(f),_===l.element&&(y=b.currentTimeline),Il(this,a.animation,b),b.currentTimeline.applyStylesToKeyframe(),m=Math.max(m,b.currentTimeline.currentTime)}),l.currentQueryIndex=0,l.currentQueryTotal=0,l.transformIntoNewTimeline(m),y&&(l.currentTimeline.mergeTimelineCollectedStyles(y),l.currentTimeline.snapshotCurrentStyles()),l.previousNode=a}visitStagger(a,l){const h=l.parentContext,d=l.currentTimeline,f=a.timings,m=Math.abs(f.duration),g=m*(l.currentQueryTotal-1);let y=m*l.currentQueryIndex;switch(f.duration<0?"reverse":f.easing){case"reverse":y=g-y;break;case"full":y=h.currentStaggerTime}const v=l.currentTimeline;y&&v.delayNextStep(y);const b=v.currentTime;Il(this,a.animation,l),l.previousNode=a,h.currentStaggerTime=d.currentTime-b+(d.startTime-h.currentTimeline.startTime)}}const II={};class HB{constructor(a,l,h,d,f,m,g,y){this._driver=a,this.element=l,this.subInstructions=h,this._enterClassName=d,this._leaveClassName=f,this.errors=m,this.timelines=g,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=II,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new RI(this._driver,l,0),g.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(a,l){if(!a)return;const h=a;let d=this.options;null!=h.duration&&(d.duration=md(h.duration)),null!=h.delay&&(d.delay=md(h.delay));const f=h.params;if(f){let m=d.params;m||(m=this.options.params={}),Object.keys(f).forEach(g=>{(!l||!m.hasOwnProperty(g))&&(m[g]=ew(f[g],m,this.errors))})}}_copyOptions(){const a={};if(this.options){const l=this.options.params;if(l){const h=a.params={};Object.keys(l).forEach(d=>{h[d]=l[d]})}}return a}createSubContext(a=null,l,h){const d=l||this.element,f=new HB(this._driver,d,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(d,h||0));return f.previousNode=this.previousNode,f.currentAnimateTimings=this.currentAnimateTimings,f.options=this._copyOptions(),f.updateOptions(a),f.currentQueryIndex=this.currentQueryIndex,f.currentQueryTotal=this.currentQueryTotal,f.parentContext=this,this.subContextCount++,f}transformIntoNewTimeline(a){return this.previousNode=II,this.currentTimeline=this.currentTimeline.fork(this.element,a),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(a,l,h){const d={duration:l??a.duration,delay:this.currentTimeline.currentTime+(h??0)+a.delay,easing:""},f=new QQe(this._driver,a.element,a.keyframes,a.preStyleProps,a.postStyleProps,d,a.stretchStartingKeyframe);return this.timelines.push(f),d}incrementTime(a){this.currentTimeline.forwardTime(this.currentTimeline.duration+a)}delayNextStep(a){a>0&&this.currentTimeline.delayNextStep(a)}invokeQuery(a,l,h,d,f,m){let g=[];if(d&&g.push(this.element),a.length>0){a=(a=a.replace(YQe,"."+this._enterClassName)).replace(KQe,"."+this._leaveClassName);let _=this._driver.query(this.element,a,1!=h);0!==h&&(_=h<0?_.slice(_.length+h,_.length):_.slice(0,h)),g.push(..._)}return!f&&0==g.length&&m.push(function iQe(c){return new rt(3014,!1)}()),g}}class RI{constructor(a,l,h,d){this._driver=a,this.element=l,this.startTime=h,this._elementTimelineStylesLookup=d,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(l),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(l,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(a){const l=1===this._keyframes.size&&this._pendingStyles.size;this.duration||l?(this.forwardTime(this.currentTime+a),l&&this.snapshotCurrentStyles()):this.startTime+=a}fork(a,l){return this.applyStylesToKeyframe(),new RI(this._driver,a,l||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(a){this.applyStylesToKeyframe(),this.duration=a,this._loadKeyframe()}_updateStyle(a,l){this._localTimelineStyles.set(a,l),this._globalTimelineStyles.set(a,l),this._styleSummary.set(a,{time:this.currentTime,value:l})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(a){a&&this._previousKeyframe.set("easing",a);for(let[l,h]of this._globalTimelineStyles)this._backFill.set(l,h||kh),this._currentKeyframe.set(l,kh);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(a,l,h,d){l&&this._previousKeyframe.set("easing",l);const f=d&&d.params||{},m=function eet(c,a){const l=new Map;let h;return c.forEach(d=>{if("*"===d){h=h||a.keys();for(let f of h)l.set(f,kh)}else ap(d,l)}),l}(a,this._globalTimelineStyles);for(let[g,y]of m){const _=ew(y,f,h);this._pendingStyles.set(g,_),this._localTimelineStyles.has(g)||this._backFill.set(g,this._globalTimelineStyles.get(g)??kh),this._updateStyle(g,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((a,l)=>{this._currentKeyframe.set(l,a)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((a,l)=>{this._currentKeyframe.has(l)||this._currentKeyframe.set(l,a)}))}snapshotCurrentStyles(){for(let[a,l]of this._localTimelineStyles)this._pendingStyles.set(a,l),this._updateStyle(a,l)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const a=[];for(let l in this._currentKeyframe)a.push(l);return a}mergeTimelineCollectedStyles(a){a._styleSummary.forEach((l,h)=>{const d=this._styleSummary.get(h);(!d||l.time>d.time)&&this._updateStyle(h,l.value)})}buildKeyframes(){this.applyStylesToKeyframe();const a=new Set,l=new Set,h=1===this._keyframes.size&&0===this.duration;let d=[];this._keyframes.forEach((g,y)=>{const _=ap(g,new Map,this._backFill);_.forEach((v,b)=>{"!"===v?a.add(b):v===kh&&l.add(b)}),h||_.set("offset",y/this.duration),d.push(_)});const f=a.size?wI(a.values()):[],m=l.size?wI(l.values()):[];if(h){const g=d[0],y=new Map(g);g.set("offset",0),y.set("offset",1),d=[g,y]}return zB(this.element,d,f,m,this.duration,this.startTime,this.easing,!1)}}class QQe extends RI{constructor(a,l,h,d,f,m,g=!1){super(a,l,m.delay),this.keyframes=h,this.preStyleProps=d,this.postStyleProps=f,this._stretchStartingKeyframe=g,this.timings={duration:m.duration,delay:m.delay,easing:m.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let a=this.keyframes,{delay:l,duration:h,easing:d}=this.timings;if(this._stretchStartingKeyframe&&l){const f=[],m=h+l,g=l/m,y=ap(a[0]);y.set("offset",0),f.push(y);const _=ap(a[0]);_.set("offset",Ase(g)),f.push(_);const v=a.length-1;for(let b=1;b<=v;b++){let S=ap(a[b]);const T=S.get("offset");S.set("offset",Ase((l+T*h)/m)),f.push(S)}h=m,l=0,d="",a=f}return zB(this.element,a,this.preStyleProps,this.postStyleProps,h,l,d,!0)}}function Ase(c,a=3){const l=Math.pow(10,a-1);return Math.round(c*l)/l}class jB{}const tet=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class net extends jB{normalizePropertyName(a,l){return VB(a)}normalizeStyleValue(a,l,h,d){let f="";const m=h.toString().trim();if(tet.has(l)&&0!==h&&"0"!==h)if("number"==typeof h)f="px";else{const g=h.match(/^[+-]?[\d\.]+([a-z]*)$/);g&&0==g[1].length&&d.push(function XJe(c,a){return new rt(3005,!1)}())}return m+f}}function Ise(c,a,l,h,d,f,m,g,y,_,v,b,S){return{type:0,element:c,triggerName:a,isRemovalTransition:d,fromState:l,fromStyles:f,toState:h,toStyles:m,timelines:g,queriedElements:y,preStyleProps:_,postStyleProps:v,totalTime:b,errors:S}}const WB={};class Rse{constructor(a,l,h){this._triggerName=a,this.ast=l,this._stateStyles=h}match(a,l,h,d){return function iet(c,a,l,h,d){return c.some(f=>f(a,l,h,d))}(this.ast.matchers,a,l,h,d)}buildStyles(a,l,h){let d=this._stateStyles.get("*");return void 0!==a&&(d=this._stateStyles.get(a?.toString())||d),d?d.buildStyles(l,h):new Map}build(a,l,h,d,f,m,g,y,_,v){const b=[],S=this.ast.options&&this.ast.options.params||WB,x=this.buildStyles(h,g&&g.params||WB,b),E=y&&y.params||WB,I=this.buildStyles(d,E,b),M=new Set,D=new Map,L=new Map,P="void"===d,F={params:ret(E,S),delay:this.ast.options?.delay},B=v?[]:GB(a,l,this.ast.animation,f,m,x,I,F,_,b);let G=0;if(B.forEach(se=>{G=Math.max(se.duration+se.delay,G)}),b.length)return Ise(l,this._triggerName,h,d,P,x,I,[],[],D,L,G,b);B.forEach(se=>{const ie=se.element,j=Al(D,ie,new Set);se.preStyleProps.forEach(ae=>j.add(ae));const J=Al(L,ie,new Set);se.postStyleProps.forEach(ae=>J.add(ae)),ie!==l&&M.add(ie)});const $=wI(M.values());return Ise(l,this._triggerName,h,d,P,x,I,B,$,D,L,G)}}function ret(c,a){const l=JT(a);for(const h in c)c.hasOwnProperty(h)&&null!=c[h]&&(l[h]=c[h]);return l}class set{constructor(a,l,h){this.styles=a,this.defaultParams=l,this.normalizer=h}buildStyles(a,l){const h=new Map,d=JT(this.defaultParams);return Object.keys(a).forEach(f=>{const m=a[f];null!==m&&(d[f]=m)}),this.styles.styles.forEach(f=>{"string"!=typeof f&&f.forEach((m,g)=>{m&&(m=ew(m,d,l));const y=this.normalizer.normalizePropertyName(g,l);m=this.normalizer.normalizeStyleValue(g,y,m,l),h.set(y,m)})}),h}}class aet{constructor(a,l,h){this.name=a,this.ast=l,this._normalizer=h,this.transitionFactories=[],this.states=new Map,l.states.forEach(d=>{this.states.set(d.name,new set(d.style,d.options&&d.options.params||{},h))}),Lse(this.states,"true","1"),Lse(this.states,"false","0"),l.transitions.forEach(d=>{this.transitionFactories.push(new Rse(a,d,this.states))}),this.fallbackTransition=function cet(c,a,l){return new Rse(c,{type:1,animation:{type:2,steps:[],options:null},matchers:[(m,g)=>!0],options:null,queryCount:0,depCount:0},a)}(a,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(a,l,h,d){return this.transitionFactories.find(m=>m.match(a,l,h,d))||null}matchStyles(a,l,h){return this.fallbackTransition.buildStyles(a,l,h)}}function Lse(c,a,l){c.has(a)?c.has(l)||c.set(l,c.get(a)):c.has(l)&&c.set(a,c.get(l))}const uet=new AI;class het{constructor(a,l,h){this.bodyNode=a,this._driver=l,this._normalizer=h,this._animations=new Map,this._playersById=new Map,this.players=[]}register(a,l){const h=[],f=BB(this._driver,l,h,[]);if(h.length)throw function uQe(c){return new rt(3503,!1)}();this._animations.set(a,f)}_buildPlayer(a,l,h){const d=a.element,f=use(0,this._normalizer,0,a.keyframes,l,h);return this._driver.animate(d,f,a.duration,a.delay,a.easing,[],!0)}create(a,l,h={}){const d=[],f=this._animations.get(a);let m;const g=new Map;if(f?(m=GB(this._driver,l,f,OB,vI,new Map,new Map,h,uet,d),m.forEach(v=>{const b=Al(g,v.element,new Map);v.postStyleProps.forEach(S=>b.set(S,null))})):(d.push(function hQe(){return new rt(3300,!1)}()),m=[]),d.length)throw function dQe(c){return new rt(3504,!1)}();g.forEach((v,b)=>{v.forEach((S,T)=>{v.set(T,this._driver.computeStyle(b,T,kh))})});const _=op(m.map(v=>{const b=g.get(v.element);return this._buildPlayer(v,new Map,b)}));return this._playersById.set(a,_),_.onDestroy(()=>this.destroy(a)),this.players.push(_),_}destroy(a){const l=this._getPlayer(a);l.destroy(),this._playersById.delete(a);const h=this.players.indexOf(l);h>=0&&this.players.splice(h,1)}_getPlayer(a){const l=this._playersById.get(a);if(!l)throw function fQe(c){return new rt(3301,!1)}();return l}listen(a,l,h,d){const f=IB(l,"","","");return DB(this._getPlayer(a),h,f,d),()=>{}}command(a,l,h,d){if("register"==h)return void this.register(a,d[0]);if("create"==h)return void this.create(a,l,d[0]||{});const f=this._getPlayer(a);switch(h){case"play":f.play();break;case"pause":f.pause();break;case"reset":f.reset();break;case"restart":f.restart();break;case"finish":f.finish();break;case"init":f.init();break;case"setPosition":f.setPosition(parseFloat(d[0]));break;case"destroy":this.destroy(a)}}}const Pse="ng-animate-queued",XB="ng-animate-disabled",yet=[],Ose={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},_et={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},nc="__ng_removed";class qB{constructor(a,l=""){this.namespaceId=l;const h=a&&a.hasOwnProperty("value");if(this.value=function wet(c){return c??null}(h?a.value:a),h){const f=JT(a);delete f.value,this.options=f}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(a){const l=a.params;if(l){const h=this.options.params;Object.keys(l).forEach(d=>{null==h[d]&&(h[d]=l[d])})}}}const tw="void",$B=new qB(tw);class vet{constructor(a,l,h){this.id=a,this.hostElement=l,this._engine=h,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+a,ic(l,this._hostClassName)}listen(a,l,h,d){if(!this._triggers.has(l))throw function pQe(c,a){return new rt(3302,!1)}();if(null==h||0==h.length)throw function mQe(c){return new rt(3303,!1)}();if(!function Cet(c){return"start"==c||"done"==c}(h))throw function gQe(c,a){return new rt(3400,!1)}();const f=Al(this._elementListeners,a,[]),m={name:l,phase:h,callback:d};f.push(m);const g=Al(this._engine.statesByElement,a,new Map);return g.has(l)||(ic(a,bI),ic(a,bI+"-"+l),g.set(l,$B)),()=>{this._engine.afterFlush(()=>{const y=f.indexOf(m);y>=0&&f.splice(y,1),this._triggers.has(l)||g.delete(l)})}}register(a,l){return!this._triggers.has(a)&&(this._triggers.set(a,l),!0)}_getTrigger(a){const l=this._triggers.get(a);if(!l)throw function yQe(c){return new rt(3401,!1)}();return l}trigger(a,l,h,d=!0){const f=this._getTrigger(l),m=new YB(this.id,l,a);let g=this._engine.statesByElement.get(a);g||(ic(a,bI),ic(a,bI+"-"+l),this._engine.statesByElement.set(a,g=new Map));let y=g.get(l);const _=new qB(h,this.id);if(!(h&&h.hasOwnProperty("value"))&&y&&_.absorbOptions(y.options),g.set(l,_),y||(y=$B),_.value!==tw&&y.value===_.value){if(!function Met(c,a){const l=Object.keys(c),h=Object.keys(a);if(l.length!=h.length)return!1;for(let d=0;d<l.length;d++){const f=l[d];if(!a.hasOwnProperty(f)||c[f]!==a[f])return!1}return!0}(y.params,_.params)){const E=[],I=f.matchStyles(y.value,y.params,E),M=f.matchStyles(_.value,_.params,E);E.length?this._engine.reportError(E):this._engine.afterFlush(()=>{mg(a,I),qu(a,M)})}return}const S=Al(this._engine.playersByElement,a,[]);S.forEach(E=>{E.namespaceId==this.id&&E.triggerName==l&&E.queued&&E.destroy()});let T=f.matchTransition(y.value,_.value,a,_.params),x=!1;if(!T){if(!d)return;T=f.fallbackTransition,x=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:l,transition:T,fromState:y,toState:_,player:m,isFallbackTransition:x}),x||(ic(a,Pse),m.onStart(()=>{l0(a,Pse)})),m.onDone(()=>{let E=this.players.indexOf(m);E>=0&&this.players.splice(E,1);const I=this._engine.playersByElement.get(a);if(I){let M=I.indexOf(m);M>=0&&I.splice(M,1)}}),this.players.push(m),S.push(m),m}deregister(a){this._triggers.delete(a),this._engine.statesByElement.forEach(l=>l.delete(a)),this._elementListeners.forEach((l,h)=>{this._elementListeners.set(h,l.filter(d=>d.name!=a))})}clearElementCache(a){this._engine.statesByElement.delete(a),this._elementListeners.delete(a);const l=this._engine.playersByElement.get(a);l&&(l.forEach(h=>h.destroy()),this._engine.playersByElement.delete(a))}_signalRemovalForInnerTriggers(a,l){const h=this._engine.driver.query(a,SI,!0);h.forEach(d=>{if(d[nc])return;const f=this._engine.fetchNamespacesByElement(d);f.size?f.forEach(m=>m.triggerLeaveAnimation(d,l,!1,!0)):this.clearElementCache(d)}),this._engine.afterFlushAnimationsDone(()=>h.forEach(d=>this.clearElementCache(d)))}triggerLeaveAnimation(a,l,h,d){const f=this._engine.statesByElement.get(a),m=new Map;if(f){const g=[];if(f.forEach((y,_)=>{if(m.set(_,y.value),this._triggers.has(_)){const v=this.trigger(a,_,tw,d);v&&g.push(v)}}),g.length)return this._engine.markElementAsRemoved(this.id,a,!0,l,m),h&&op(g).onDone(()=>this._engine.processLeaveNode(a)),!0}return!1}prepareLeaveAnimationListeners(a){const l=this._elementListeners.get(a),h=this._engine.statesByElement.get(a);if(l&&h){const d=new Set;l.forEach(f=>{const m=f.name;if(d.has(m))return;d.add(m);const y=this._triggers.get(m).fallbackTransition,_=h.get(m)||$B,v=new qB(tw),b=new YB(this.id,m,a);this._engine.totalQueuedPlayers++,this._queue.push({element:a,triggerName:m,transition:y,fromState:_,toState:v,player:b,isFallbackTransition:!0})})}}removeNode(a,l){const h=this._engine;if(a.childElementCount&&this._signalRemovalForInnerTriggers(a,l),this.triggerLeaveAnimation(a,l,!0))return;let d=!1;if(h.totalAnimations){const f=h.players.length?h.playersByQueriedElement.get(a):[];if(f&&f.length)d=!0;else{let m=a;for(;m=m.parentNode;)if(h.statesByElement.get(m)){d=!0;break}}}if(this.prepareLeaveAnimationListeners(a),d)h.markElementAsRemoved(this.id,a,!1,l);else{const f=a[nc];(!f||f===Ose)&&(h.afterFlush(()=>this.clearElementCache(a)),h.destroyInnerAnimations(a),h._onRemovalComplete(a,l))}}insertNode(a,l){ic(a,this._hostClassName)}drainQueuedTransitions(a){const l=[];return this._queue.forEach(h=>{const d=h.player;if(d.destroyed)return;const f=h.element,m=this._elementListeners.get(f);m&&m.forEach(g=>{if(g.name==h.triggerName){const y=IB(f,h.triggerName,h.fromState.value,h.toState.value);y._data=a,DB(h.player,g.phase,y,g.callback)}}),d.markedForDestroy?this._engine.afterFlush(()=>{d.destroy()}):l.push(h)}),this._queue=[],l.sort((h,d)=>{const f=h.transition.ast.depCount,m=d.transition.ast.depCount;return 0==f||0==m?f-m:this._engine.driver.containsElement(h.element,d.element)?1:-1})}destroy(a){this.players.forEach(l=>l.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,a)}elementContainsData(a){let l=!1;return this._elementListeners.has(a)&&(l=!0),l=!!this._queue.find(h=>h.element===a)||l,l}}class bet{constructor(a,l,h){this.bodyNode=a,this.driver=l,this._normalizer=h,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(d,f)=>{}}_onRemovalComplete(a,l){this.onRemovalComplete(a,l)}get queuedPlayers(){const a=[];return this._namespaceList.forEach(l=>{l.players.forEach(h=>{h.queued&&a.push(h)})}),a}createNamespace(a,l){const h=new vet(a,l,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,l)?this._balanceNamespaceList(h,l):(this.newHostElements.set(l,h),this.collectEnterElement(l)),this._namespaceLookup[a]=h}_balanceNamespaceList(a,l){const h=this._namespaceList,d=this.namespacesByHostElement;if(h.length-1>=0){let m=!1,g=this.driver.getParentElement(l);for(;g;){const y=d.get(g);if(y){const _=h.indexOf(y);h.splice(_+1,0,a),m=!0;break}g=this.driver.getParentElement(g)}m||h.unshift(a)}else h.push(a);return d.set(l,a),a}register(a,l){let h=this._namespaceLookup[a];return h||(h=this.createNamespace(a,l)),h}registerTrigger(a,l,h){let d=this._namespaceLookup[a];d&&d.register(l,h)&&this.totalAnimations++}destroy(a,l){if(!a)return;const h=this._fetchNamespace(a);this.afterFlush(()=>{this.namespacesByHostElement.delete(h.hostElement),delete this._namespaceLookup[a];const d=this._namespaceList.indexOf(h);d>=0&&this._namespaceList.splice(d,1)}),this.afterFlushAnimationsDone(()=>h.destroy(l))}_fetchNamespace(a){return this._namespaceLookup[a]}fetchNamespacesByElement(a){const l=new Set,h=this.statesByElement.get(a);if(h)for(let d of h.values())if(d.namespaceId){const f=this._fetchNamespace(d.namespaceId);f&&l.add(f)}return l}trigger(a,l,h,d){if(LI(l)){const f=this._fetchNamespace(a);if(f)return f.trigger(l,h,d),!0}return!1}insertNode(a,l,h,d){if(!LI(l))return;const f=l[nc];if(f&&f.setForRemoval){f.setForRemoval=!1,f.setForMove=!0;const m=this.collectedLeaveElements.indexOf(l);m>=0&&this.collectedLeaveElements.splice(m,1)}if(a){const m=this._fetchNamespace(a);m&&m.insertNode(l,h)}d&&this.collectEnterElement(l)}collectEnterElement(a){this.collectedEnterElements.push(a)}markElementAsDisabled(a,l){l?this.disabledNodes.has(a)||(this.disabledNodes.add(a),ic(a,XB)):this.disabledNodes.has(a)&&(this.disabledNodes.delete(a),l0(a,XB))}removeNode(a,l,h,d){if(LI(l)){const f=a?this._fetchNamespace(a):null;if(f?f.removeNode(l,d):this.markElementAsRemoved(a,l,!1,d),h){const m=this.namespacesByHostElement.get(l);m&&m.id!==a&&m.removeNode(l,d)}}else this._onRemovalComplete(l,d)}markElementAsRemoved(a,l,h,d,f){this.collectedLeaveElements.push(l),l[nc]={namespaceId:a,setForRemoval:d,hasAnimation:h,removedBeforeQueried:!1,previousTriggersValues:f}}listen(a,l,h,d,f){return LI(l)?this._fetchNamespace(a).listen(l,h,d,f):()=>{}}_buildInstruction(a,l,h,d,f){return a.transition.build(this.driver,a.element,a.fromState.value,a.toState.value,h,d,a.fromState.options,a.toState.options,l,f)}destroyInnerAnimations(a){let l=this.driver.query(a,SI,!0);l.forEach(h=>this.destroyActiveAnimationsForElement(h)),0!=this.playersByQueriedElement.size&&(l=this.driver.query(a,NB,!0),l.forEach(h=>this.finishActiveQueriedAnimationOnElement(h)))}destroyActiveAnimationsForElement(a){const l=this.playersByElement.get(a);l&&l.forEach(h=>{h.queued?h.markedForDestroy=!0:h.destroy()})}finishActiveQueriedAnimationOnElement(a){const l=this.playersByQueriedElement.get(a);l&&l.forEach(h=>h.finish())}whenRenderingDone(){return new Promise(a=>{if(this.players.length)return op(this.players).onDone(()=>a());a()})}processLeaveNode(a){const l=a[nc];if(l&&l.setForRemoval){if(a[nc]=Ose,l.namespaceId){this.destroyInnerAnimations(a);const h=this._fetchNamespace(l.namespaceId);h&&h.clearElementCache(a)}this._onRemovalComplete(a,l.setForRemoval)}a.classList?.contains(XB)&&this.markElementAsDisabled(a,!1),this.driver.query(a,".ng-animate-disabled",!0).forEach(h=>{this.markElementAsDisabled(h,!1)})}flush(a=-1){let l=[];if(this.newHostElements.size&&(this.newHostElements.forEach((h,d)=>this._balanceNamespaceList(h,d)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let h=0;h<this.collectedEnterElements.length;h++)ic(this.collectedEnterElements[h],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const h=[];try{l=this._flushAnimations(h,a)}finally{for(let d=0;d<h.length;d++)h[d]()}}else for(let h=0;h<this.collectedLeaveElements.length;h++)this.processLeaveNode(this.collectedLeaveElements[h]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(h=>h()),this._flushFns=[],this._whenQuietFns.length){const h=this._whenQuietFns;this._whenQuietFns=[],l.length?op(l).onDone(()=>{h.forEach(d=>d())}):h.forEach(d=>d())}}reportError(a){throw function _Qe(c){return new rt(3402,!1)}()}_flushAnimations(a,l){const h=new AI,d=[],f=new Map,m=[],g=new Map,y=new Map,_=new Map,v=new Set;this.disabledNodes.forEach(K=>{v.add(K);const le=this.driver.query(K,".ng-animate-queued",!0);for(let ye=0;ye<le.length;ye++)v.add(le[ye])});const b=this.bodyNode,S=Array.from(this.statesByElement.keys()),T=kse(S,this.collectedEnterElements),x=new Map;let E=0;T.forEach((K,le)=>{const ye=OB+E++;x.set(le,ye),K.forEach(ke=>ic(ke,ye))});const I=[],M=new Set,D=new Set;for(let K=0;K<this.collectedLeaveElements.length;K++){const le=this.collectedLeaveElements[K],ye=le[nc];ye&&ye.setForRemoval&&(I.push(le),M.add(le),ye.hasAnimation?this.driver.query(le,".ng-star-inserted",!0).forEach(ke=>M.add(ke)):D.add(le))}const L=new Map,P=kse(S,Array.from(M));P.forEach((K,le)=>{const ye=vI+E++;L.set(le,ye),K.forEach(ke=>ic(ke,ye))}),a.push(()=>{T.forEach((K,le)=>{const ye=x.get(le);K.forEach(ke=>l0(ke,ye))}),P.forEach((K,le)=>{const ye=L.get(le);K.forEach(ke=>l0(ke,ye))}),I.forEach(K=>{this.processLeaveNode(K)})});const F=[],B=[];for(let K=this._namespaceList.length-1;K>=0;K--)this._namespaceList[K].drainQueuedTransitions(l).forEach(ye=>{const ke=ye.player,_e=ye.element;if(F.push(ke),this.collectedEnterElements.length){const wt=_e[nc];if(wt&&wt.setForMove){if(wt.previousTriggersValues&&wt.previousTriggersValues.has(ye.triggerName)){const Bt=wt.previousTriggersValues.get(ye.triggerName),Pe=this.statesByElement.get(ye.element);if(Pe&&Pe.has(ye.triggerName)){const _n=Pe.get(ye.triggerName);_n.value=Bt,Pe.set(ye.triggerName,_n)}}return void ke.destroy()}}const Ne=!b||!this.driver.containsElement(b,_e),me=L.get(_e),Xe=x.get(_e),qe=this._buildInstruction(ye,h,Xe,me,Ne);if(qe.errors&&qe.errors.length)return void B.push(qe);if(Ne)return ke.onStart(()=>mg(_e,qe.fromStyles)),ke.onDestroy(()=>qu(_e,qe.toStyles)),void d.push(ke);if(ye.isFallbackTransition)return ke.onStart(()=>mg(_e,qe.fromStyles)),ke.onDestroy(()=>qu(_e,qe.toStyles)),void d.push(ke);const Ae=[];qe.timelines.forEach(wt=>{wt.stretchStartingKeyframe=!0,this.disabledNodes.has(wt.element)||Ae.push(wt)}),qe.timelines=Ae,h.append(_e,qe.timelines),m.push({instruction:qe,player:ke,element:_e}),qe.queriedElements.forEach(wt=>Al(g,wt,[]).push(ke)),qe.preStyleProps.forEach((wt,Bt)=>{if(wt.size){let Pe=y.get(Bt);Pe||y.set(Bt,Pe=new Set),wt.forEach((_n,on)=>Pe.add(on))}}),qe.postStyleProps.forEach((wt,Bt)=>{let Pe=_.get(Bt);Pe||_.set(Bt,Pe=new Set),wt.forEach((_n,on)=>Pe.add(on))})});if(B.length){const K=[];B.forEach(le=>{K.push(function vQe(c,a){return new rt(3505,!1)}())}),F.forEach(le=>le.destroy()),this.reportError(K)}const G=new Map,$=new Map;m.forEach(K=>{const le=K.element;h.has(le)&&($.set(le,le),this._beforeAnimationBuild(K.player.namespaceId,K.instruction,G))}),d.forEach(K=>{const le=K.element;this._getPreviousPlayers(le,!1,K.namespaceId,K.triggerName,null).forEach(ke=>{Al(G,le,[]).push(ke),ke.destroy()})});const se=I.filter(K=>Bse(K,y,_)),ie=new Map;Fse(ie,this.driver,D,_,kh).forEach(K=>{Bse(K,y,_)&&se.push(K)});const J=new Map;T.forEach((K,le)=>{Fse(J,this.driver,new Set(K),y,"!")}),se.forEach(K=>{const le=ie.get(K),ye=J.get(K);ie.set(K,new Map([...Array.from(le?.entries()??[]),...Array.from(ye?.entries()??[])]))});const ae=[],ue=[],ge={};m.forEach(K=>{const{element:le,player:ye,instruction:ke}=K;if(h.has(le)){if(v.has(le))return ye.onDestroy(()=>qu(le,ke.toStyles)),ye.disabled=!0,ye.overrideTotalTime(ke.totalTime),void d.push(ye);let _e=ge;if($.size>1){let me=le;const Xe=[];for(;me=me.parentNode;){const qe=$.get(me);if(qe){_e=qe;break}Xe.push(me)}Xe.forEach(qe=>$.set(qe,_e))}const Ne=this._buildAnimation(ye.namespaceId,ke,G,f,J,ie);if(ye.setRealPlayer(Ne),_e===ge)ae.push(ye);else{const me=this.playersByElement.get(_e);me&&me.length&&(ye.parentPlayer=op(me)),d.push(ye)}}else mg(le,ke.fromStyles),ye.onDestroy(()=>qu(le,ke.toStyles)),ue.push(ye),v.has(le)&&d.push(ye)}),ue.forEach(K=>{const le=f.get(K.element);if(le&&le.length){const ye=op(le);K.setRealPlayer(ye)}}),d.forEach(K=>{K.parentPlayer?K.syncPlayerEvents(K.parentPlayer):K.destroy()});for(let K=0;K<I.length;K++){const le=I[K],ye=le[nc];if(l0(le,vI),ye&&ye.hasAnimation)continue;let ke=[];if(g.size){let Ne=g.get(le);Ne&&Ne.length&&ke.push(...Ne);let me=this.driver.query(le,NB,!0);for(let Xe=0;Xe<me.length;Xe++){let qe=g.get(me[Xe]);qe&&qe.length&&ke.push(...qe)}}const _e=ke.filter(Ne=>!Ne.destroyed);_e.length?xet(this,le,_e):this.processLeaveNode(le)}return I.length=0,ae.forEach(K=>{this.players.push(K),K.onDone(()=>{K.destroy();const le=this.players.indexOf(K);this.players.splice(le,1)}),K.play()}),ae}elementContainsData(a,l){let h=!1;const d=l[nc];return d&&d.setForRemoval&&(h=!0),this.playersByElement.has(l)&&(h=!0),this.playersByQueriedElement.has(l)&&(h=!0),this.statesByElement.has(l)&&(h=!0),this._fetchNamespace(a).elementContainsData(l)||h}afterFlush(a){this._flushFns.push(a)}afterFlushAnimationsDone(a){this._whenQuietFns.push(a)}_getPreviousPlayers(a,l,h,d,f){let m=[];if(l){const g=this.playersByQueriedElement.get(a);g&&(m=g)}else{const g=this.playersByElement.get(a);if(g){const y=!f||f==tw;g.forEach(_=>{_.queued||!y&&_.triggerName!=d||m.push(_)})}}return(h||d)&&(m=m.filter(g=>!(h&&h!=g.namespaceId||d&&d!=g.triggerName))),m}_beforeAnimationBuild(a,l,h){const f=l.element,m=l.isRemovalTransition?void 0:a,g=l.isRemovalTransition?void 0:l.triggerName;for(const y of l.timelines){const _=y.element,v=_!==f,b=Al(h,_,[]);this._getPreviousPlayers(_,v,m,g,l.toState).forEach(T=>{const x=T.getRealPlayer();x.beforeDestroy&&x.beforeDestroy(),T.destroy(),b.push(T)})}mg(f,l.fromStyles)}_buildAnimation(a,l,h,d,f,m){const g=l.triggerName,y=l.element,_=[],v=new Set,b=new Set,S=l.timelines.map(x=>{const E=x.element;v.add(E);const I=E[nc];if(I&&I.removedBeforeQueried)return new $S(x.duration,x.delay);const M=E!==y,D=function Eet(c){const a=[];return Vse(c,a),a}((h.get(E)||yet).map(G=>G.getRealPlayer())).filter(G=>!!G.element&&G.element===E),L=f.get(E),P=m.get(E),F=use(0,this._normalizer,0,x.keyframes,L,P),B=this._buildPlayer(x,F,D);if(x.subTimeline&&d&&b.add(E),M){const G=new YB(a,g,E);G.setRealPlayer(B),_.push(G)}return B});_.forEach(x=>{Al(this.playersByQueriedElement,x.element,[]).push(x),x.onDone(()=>function Tet(c,a,l){let h=c.get(a);if(h){if(h.length){const d=h.indexOf(l);h.splice(d,1)}0==h.length&&c.delete(a)}return h}(this.playersByQueriedElement,x.element,x))}),v.forEach(x=>ic(x,vse));const T=op(S);return T.onDestroy(()=>{v.forEach(x=>l0(x,vse)),qu(y,l.toStyles)}),b.forEach(x=>{Al(d,x,[]).push(T)}),T}_buildPlayer(a,l,h){return l.length>0?this.driver.animate(a.element,l,a.duration,a.delay,a.easing,h):new $S(a.duration,a.delay)}}class YB{constructor(a,l,h){this.namespaceId=a,this.triggerName=l,this.element=h,this._player=new $S,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(a){this._containsRealPlayer||(this._player=a,this._queuedCallbacks.forEach((l,h)=>{l.forEach(d=>DB(a,h,void 0,d))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(a.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(a){this.totalTime=a}syncPlayerEvents(a){const l=this._player;l.triggerCallback&&a.onStart(()=>l.triggerCallback("start")),a.onDone(()=>this.finish()),a.onDestroy(()=>this.destroy())}_queueEvent(a,l){Al(this._queuedCallbacks,a,[]).push(l)}onDone(a){this.queued&&this._queueEvent("done",a),this._player.onDone(a)}onStart(a){this.queued&&this._queueEvent("start",a),this._player.onStart(a)}onDestroy(a){this.queued&&this._queueEvent("destroy",a),this._player.onDestroy(a)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(a){this.queued||this._player.setPosition(a)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(a){const l=this._player;l.triggerCallback&&l.triggerCallback(a)}}function LI(c){return c&&1===c.nodeType}function Nse(c,a){const l=c.style.display;return c.style.display=a??"none",l}function Fse(c,a,l,h,d){const f=[];l.forEach(y=>f.push(Nse(y)));const m=[];h.forEach((y,_)=>{const v=new Map;y.forEach(b=>{const S=a.computeStyle(_,b,d);v.set(b,S),(!S||0==S.length)&&(_[nc]=_et,m.push(_))}),c.set(_,v)});let g=0;return l.forEach(y=>Nse(y,f[g++])),m}function kse(c,a){const l=new Map;if(c.forEach(g=>l.set(g,[])),0==a.length)return l;const d=new Set(a),f=new Map;function m(g){if(!g)return 1;let y=f.get(g);if(y)return y;const _=g.parentNode;return y=l.has(_)?_:d.has(_)?1:m(_),f.set(g,y),y}return a.forEach(g=>{const y=m(g);1!==y&&l.get(y).push(g)}),l}function ic(c,a){c.classList?.add(a)}function l0(c,a){c.classList?.remove(a)}function xet(c,a,l){op(l).onDone(()=>c.processLeaveNode(a))}function Vse(c,a){for(let l=0;l<c.length;l++){const h=c[l];h instanceof fY?Vse(h.players,a):a.push(h)}}function Bse(c,a,l){const h=l.get(c);if(!h)return!1;let d=a.get(c);return d?h.forEach(f=>d.add(f)):a.set(c,h),l.delete(c),!0}class PI{constructor(a,l,h){this.bodyNode=a,this._driver=l,this._normalizer=h,this._triggerCache={},this.onRemovalComplete=(d,f)=>{},this._transitionEngine=new bet(a,l,h),this._timelineEngine=new het(a,l,h),this._transitionEngine.onRemovalComplete=(d,f)=>this.onRemovalComplete(d,f)}registerTrigger(a,l,h,d,f){const m=a+"-"+d;let g=this._triggerCache[m];if(!g){const y=[],v=BB(this._driver,f,y,[]);if(y.length)throw function lQe(c,a){return new rt(3404,!1)}();g=function oet(c,a,l){return new aet(c,a,l)}(d,v,this._normalizer),this._triggerCache[m]=g}this._transitionEngine.registerTrigger(l,d,g)}register(a,l){this._transitionEngine.register(a,l)}destroy(a,l){this._transitionEngine.destroy(a,l)}onInsert(a,l,h,d){this._transitionEngine.insertNode(a,l,h,d)}onRemove(a,l,h,d){this._transitionEngine.removeNode(a,l,d||!1,h)}disableAnimations(a,l){this._transitionEngine.markElementAsDisabled(a,l)}process(a,l,h,d){if("@"==h.charAt(0)){const[f,m]=hse(h);this._timelineEngine.command(f,l,m,d)}else this._transitionEngine.trigger(a,l,h,d)}listen(a,l,h,d,f){if("@"==h.charAt(0)){const[m,g]=hse(h);return this._timelineEngine.listen(m,l,g,f)}return this._transitionEngine.listen(a,l,h,d,f)}flush(a=-1){this._transitionEngine.flush(a)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Aet=(()=>{class c{constructor(l,h,d){this._element=l,this._startStyles=h,this._endStyles=d,this._state=0;let f=c.initialStylesByElement.get(l);f||c.initialStylesByElement.set(l,f=new Map),this._initialStyles=f}start(){this._state<1&&(this._startStyles&&qu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qu(this._element,this._initialStyles),this._endStyles&&(qu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(c.initialStylesByElement.delete(this._element),this._startStyles&&(mg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(mg(this._element,this._endStyles),this._endStyles=null),qu(this._element,this._initialStyles),this._state=3)}}return c.initialStylesByElement=new WeakMap,c})();function ZB(c){let a=null;return c.forEach((l,h)=>{(function Iet(c){return"display"===c||"position"===c})(h)&&(a=a||new Map,a.set(h,l))}),a}class Use{constructor(a,l,h,d){this.element=a,this.keyframes=l,this.options=h,this._specialStyles=d,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=h.duration,this._delay=h.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(a=>a()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const a=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,a,this.options),this._finalKeyframe=a.length?a[a.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(a){const l=[];return a.forEach(h=>{l.push(Object.fromEntries(h))}),l}_triggerWebAnimation(a,l,h){return a.animate(this._convertKeyframesToObject(l),h)}onStart(a){this._originalOnStartFns.push(a),this._onStartFns.push(a)}onDone(a){this._originalOnDoneFns.push(a),this._onDoneFns.push(a)}onDestroy(a){this._onDestroyFns.push(a)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(a=>a()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(a=>a()),this._onDestroyFns=[])}setPosition(a){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=a*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const a=new Map;this.hasStarted()&&this._finalKeyframe.forEach((h,d)=>{"offset"!==d&&a.set(d,this._finished?h:xse(this.element,d))}),this.currentSnapshot=a}triggerCallback(a){const l="start"===a?this._onStartFns:this._onDoneFns;l.forEach(h=>h()),l.length=0}}class Ret{validateStyleProperty(a){return!0}validateAnimatableStyleProperty(a){return!0}matchesElement(a,l){return!1}containsElement(a,l){return mse(a,l)}getParentElement(a){return LB(a)}query(a,l,h){return gse(a,l,h)}computeStyle(a,l,h){return window.getComputedStyle(a)[l]}animate(a,l,h,d,f,m=[]){const y={duration:h,delay:d,fill:0==d?"both":"forwards"};f&&(y.easing=f);const _=new Map,v=m.filter(T=>T instanceof Use);(function LQe(c,a){return 0===c||0===a})(h,d)&&v.forEach(T=>{T.currentSnapshot.forEach((x,E)=>_.set(E,x))});let b=function DQe(c){return c.length?c[0]instanceof Map?c:c.map(a=>bse(a)):[]}(l).map(T=>ap(T));b=function PQe(c,a,l){if(l.size&&a.length){let h=a[0],d=[];if(l.forEach((f,m)=>{h.has(m)||d.push(m),h.set(m,f)}),d.length)for(let f=1;f<a.length;f++){let m=a[f];d.forEach(g=>m.set(g,xse(c,g)))}}return a}(a,b,_);const S=function Det(c,a){let l=null,h=null;return Array.isArray(a)&&a.length?(l=ZB(a[0]),a.length>1&&(h=ZB(a[a.length-1]))):a instanceof Map&&(l=ZB(a)),l||h?new Aet(c,l,h):null}(a,b);return new Use(a,b,y,S)}}let Let=(()=>{class c extends uY{constructor(l,h){super(),this._nextAnimationId=0,this._renderer=l.createRenderer(h.body,{id:"0",encapsulation:oc.None,styles:[],data:{animation:[]}})}build(l){const h=this._nextAnimationId.toString();this._nextAnimationId++;const d=Array.isArray(l)?hY(l):l;return zse(this._renderer,null,h,"register",[d]),new Pet(h,this._renderer)}}return c.\u0275fac=function(l){return new(l||c)(Oe(Hg),Oe(Ci))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();class Pet extends class IPe{}{constructor(a,l){super(),this._id=a,this._renderer=l}create(a,l){return new Oet(this._id,a,l||{},this._renderer)}}class Oet{constructor(a,l,h,d){this.id=a,this.element=l,this._renderer=d,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",h)}_listen(a,l){return this._renderer.listen(this.element,`@@${this.id}:${a}`,l)}_command(a,...l){return zse(this._renderer,this.element,this.id,a,l)}onDone(a){this._listen("done",a)}onStart(a){this._listen("start",a)}onDestroy(a){this._listen("destroy",a)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(a){this._command("setPosition",a)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function zse(c,a,l,h,d){return c.setProperty(a,`@@${l}:${h}`,d)}const Gse="@.disabled";let Net=(()=>{class c{constructor(l,h,d){this.delegate=l,this.engine=h,this._zone=d,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),h.onRemovalComplete=(f,m)=>{const g=m?.parentNode(f);g&&m.removeChild(g,f)}}createRenderer(l,h){const f=this.delegate.createRenderer(l,h);if(!(l&&h&&h.data&&h.data.animation)){let v=this._rendererCache.get(f);return v||(v=new Hse("",f,this.engine,()=>this._rendererCache.delete(f)),this._rendererCache.set(f,v)),v}const m=h.id,g=h.id+"-"+this._currentId;this._currentId++,this.engine.register(g,l);const y=v=>{Array.isArray(v)?v.forEach(y):this.engine.registerTrigger(m,g,l,v.name,v)};return h.data.animation.forEach(y),new Fet(this,g,f,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(l,h,d){l>=0&&l<this._microtaskId?this._zone.run(()=>h(d)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(f=>{const[m,g]=f;m(g)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([h,d]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return c.\u0275fac=function(l){return new(l||c)(Oe(Hg),Oe(PI),Oe(Yn))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();class Hse{constructor(a,l,h,d){this.namespaceId=a,this.delegate=l,this.engine=h,this._onDestroy=d,this.destroyNode=this.delegate.destroyNode?f=>l.destroyNode(f):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(a,l){return this.delegate.createElement(a,l)}createComment(a){return this.delegate.createComment(a)}createText(a){return this.delegate.createText(a)}appendChild(a,l){this.delegate.appendChild(a,l),this.engine.onInsert(this.namespaceId,l,a,!1)}insertBefore(a,l,h,d=!0){this.delegate.insertBefore(a,l,h),this.engine.onInsert(this.namespaceId,l,a,d)}removeChild(a,l,h){this.engine.onRemove(this.namespaceId,l,this.delegate,h)}selectRootElement(a,l){return this.delegate.selectRootElement(a,l)}parentNode(a){return this.delegate.parentNode(a)}nextSibling(a){return this.delegate.nextSibling(a)}setAttribute(a,l,h,d){this.delegate.setAttribute(a,l,h,d)}removeAttribute(a,l,h){this.delegate.removeAttribute(a,l,h)}addClass(a,l){this.delegate.addClass(a,l)}removeClass(a,l){this.delegate.removeClass(a,l)}setStyle(a,l,h,d){this.delegate.setStyle(a,l,h,d)}removeStyle(a,l,h){this.delegate.removeStyle(a,l,h)}setProperty(a,l,h){"@"==l.charAt(0)&&l==Gse?this.disableAnimations(a,!!h):this.delegate.setProperty(a,l,h)}setValue(a,l){this.delegate.setValue(a,l)}listen(a,l,h){return this.delegate.listen(a,l,h)}disableAnimations(a,l){this.engine.disableAnimations(a,l)}}class Fet extends Hse{constructor(a,l,h,d,f){super(l,h,d,f),this.factory=a,this.namespaceId=l}setProperty(a,l,h){"@"==l.charAt(0)?"."==l.charAt(1)&&l==Gse?this.disableAnimations(a,h=void 0===h||!!h):this.engine.process(this.namespaceId,a,l.slice(1),h):this.delegate.setProperty(a,l,h)}listen(a,l,h){if("@"==l.charAt(0)){const d=function ket(c){switch(c){case"body":return document.body;case"document":return document;case"window":return window;default:return c}}(a);let f=l.slice(1),m="";return"@"!=f.charAt(0)&&([f,m]=function Vet(c){const a=c.indexOf(".");return[c.substring(0,a),c.slice(a+1)]}(f)),this.engine.listen(this.namespaceId,d,f,m,g=>{this.factory.scheduleListenerCallback(g._data||-1,h,g)})}return this.delegate.listen(a,l,h)}}let Bet=(()=>{class c extends PI{constructor(l,h,d,f){super(l.body,h,d)}ngOnDestroy(){this.flush()}}return c.\u0275fac=function(l){return new(l||c)(Oe(Ci),Oe(PB),Oe(jB),Oe(dy))},c.\u0275prov=Fe({token:c,factory:c.\u0275fac}),c})();const jse=[{provide:uY,useClass:Let},{provide:jB,useFactory:function Uet(){return new net}},{provide:PI,useClass:Bet},{provide:Hg,useFactory:function zet(c,a,l){return new Net(c,a,l)},deps:[FC,PI,Yn]}],KB=[{provide:PB,useFactory:()=>new Ret},{provide:h8,useValue:"BrowserAnimations"},...jse],Wse=[{provide:PB,useClass:yse},{provide:h8,useValue:"NoopAnimations"},...jse];let Get=(()=>{class c{static withConfig(l){return{ngModule:c,providers:l.disableAnimations?Wse:KB}}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({providers:KB,imports:[AH]}),c})(),Het=(()=>{class c{constructor(){this.alertSource=new Qe,this.alert$=this.alertSource.asObservable()}alert(l){this.alertSource.next(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),jet=(()=>{class c{constructor(){this.progressSource=new Qe,this.progress$=this.progressSource.asObservable()}progress(l){this.progressSource.next(l)}}return c.\u0275fac=function(l){return new(l||c)},c.\u0275prov=Fe({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),Wet=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({providers:[Het,jet],imports:[Un,yD]}),c})(),Xet=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[Un,yD,Au,BHe,Wet]}),c})(),qet=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c}),c.\u0275inj=Gt({imports:[Un,Au,yD]}),c})(),$et=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=jt({type:c,bootstrap:[UJe]}),c.\u0275inj=Gt({providers:[I4,R4],imports:[AH,SJe,yD,Au,xOe,Get,J2e,EKe,Xet,qet,_ze,B8e]}),c})();(function rpe(){D8=!1})(),Fge().bootstrapModule($et).catch(c=>console.error(c))},530:(Vn,Dn,ft)=>{"use strict";ft.d(Dn,{m:()=>Ot});var Dt=ft(402);Vn=ft.hmd(Vn);class Ot{constructor(){}getCapabilitiesUrl(de){return`${de}?service=WPS&request=GetCapabilities&version=1.0.0`}getDescribeProcessUrl(de,Ee){return`${de}?service=WPS&request=DescribeProcess&version=1.0.0&Identifier=${Ee}`}executeUrl(de,Ee){return`${de}?service=WPS&request=Execute&version=1.0.0&identifier=${Ee}`}unmarshalCapabilities(de){const Ee=[];return de.processOfferings.process.forEach(C=>{Ee.push({id:C.identifier.value})}),Ee}unmarshalProcessDescription(de){const Ee=de.processDescription[0],C=[];for(const R of Ee.dataInputs.input)C.push({description:this.unmarshalInputDescription(R),value:null});const w=[];for(const R of Ee.processOutputs.output)w.push({description:this.unmarshalOutputDescription(R),value:null});return{id:Ee.identifier.value,processVersion:Ee.processVersion,description:Ee._abstract?.value,title:Ee.title.value,inputs:C,outputs:w}}unmarshalSyncExecuteResponse(de,Ee,C,w,R){const O=[];if(de.value.status.processFailed)O.push({description:{id:de.value.process.identifier.value,title:de.value.process.title.value,reference:!0,type:"error"},value:de.value.statusLocation});else if(de.value.processOutputs)for(const k of de.value.processOutputs.output){const W=!!k.reference;let X,ee,Y;k.reference?(X="complex",ee=k.reference.href||null,Y=k.reference.mimeType):(k.data&&k.data.literalData?(X="literal",Y=k.data.literalData.dataType):k.data&&k.data.complexData?(X="complex",Y=k.data.complexData.mimeType):(X="bbox",Y=void 0),ee=this.unmarshalOutputData(k.data)),O.push({description:{id:k.identifier.value,title:k.title.value,format:Y,reference:W,type:X},value:ee})}else de.value.statusLocation&&O.push({description:{id:de.value.process.identifier.value,title:de.value.process.title.value,reference:!0,type:"status"},value:this.unmarshalGetStateResponse(de,Ee,C,w,R)});return O}unmarshalOutputData(de){if(de.complexData)switch("base64"===de.complexData.encoding&&de.complexData.content.map(Vn.exports?Ee=>Buffer.from(Ee,"base64").toString("ascii"):Ee=>atob(Ee)),de.complexData.mimeType){case"application/vnd.geo+json":case"application/json":return de.complexData.content.map(Ee=>JSON.parse(Ee));case"application/WMS":return de.complexData.content;case"text/xml":case"application/xml":return Dt.serializeToString(de.complexData.content[0]);default:throw new Error(`Cannot unmarshal data of format ${de.complexData.mimeType}`)}else if(de.literalData)return de.literalData.value;throw new Error(`Not yet implemented: ${de}`)}unmarshalInputDescription(de){if(de.boundingBoxData)return{id:de.identifier.value,title:de.title.value,reference:!1,type:"bbox",description:de._abstract?.value,format:"text/plain"};if(de.complexData)return{id:de.identifier.value,title:de.title.value,reference:de.storeSupported,type:"complex",description:de._abstract?.value,format:de.complexData._default.format.mimeType};if(de.literalData)return{id:de.identifier.value,title:de.title.value,reference:!1,type:"literal",description:de._abstract?.value,defaultValue:de.literalData.defaultValue,options:de.literalData.allowedValues?.valueOrRange.map(Ee=>Ee.value),format:"text/plain"};throw new Error(`Cannot unmarshal the input-description for ${de.identifier.value}`)}unmarshalOutputDescription(de){if(de.complexOutput)return{id:de.identifier.value,title:de.title.value,reference:!0,type:"complex",format:de.complexOutput._default.format.mimeType};if(de.boundingBoxOutput)return{id:de.identifier.value,title:de.title.value,reference:!1,type:"bbox"};if(de.literalOutput)return{id:de.identifier.value,title:de.title.value,reference:!1,type:"literal"};throw new Error(`Cannot unmarshal the input-description for ${de.identifier.value}`)}unmarshalAsyncExecuteResponse(de,Ee,C,w,R){return this.unmarshalGetStateResponse(de,Ee,C,w,R)}unmarshalGetStateResponse(de,Ee,C,w,R){const O=de.value,W={status:O.status.processSucceeded?"Succeeded":O.status.processAccepted?"Accepted":O.status.processStarted?"Running":"Failed",statusLocation:O.statusLocation};return O.processOutputs&&O.processOutputs.output&&(W.results=de),W}marshalExecBody(de,Ee,C,w){return{name:{key:"{http://www.opengis.net/wps/1.0.0}Execute",localPart:"Execute",namespaceURI:"http://www.opengis.net/wps/1.0.0",prefix:"wps",string:"{http://www.opengis.net/wps/1.0.0}wps:Execute"},value:{dataInputs:this.marshalInputs(Ee),identifier:de,responseForm:this.marshalResponseForm(C,w),service:"WPS",version:"1.0.0"}}}marshalResponseForm(de,Ee=!1){const C=[];for(const O of de){let k;switch(O.type){case"literal":case"complex":k={identifier:{value:O.id},asReference:O.reference,mimeType:O.format};break;default:throw new Error(`This Wps-outputtype has not been implemented yet! ${O} `)}C.push(k)}return{responseDocument:{output:C,status:!!Ee,storeExecuteResponse:!!Ee}}}marshalInputs(de){const Ee=[];for(const w of de){if(null==w.value)throw new Error(`Value for input ${w.description.id} is not set`);const R=this.marshalInput(w);Ee.push(R)}return{input:Ee}}marshalInput(de){const R={identifier:{value:de.description.id},title:{value:de.description.id},_abstract:{value:""}};return de.description.reference?R.reference=this.marshalReferenceInput(de):R.data=this.marshalDataInput(de),R}marshalDataInput(de){let Ee;switch(de.description.type){case"literal":Ee={literalData:{value:String(de.value)}};break;case"bbox":const C=de.value;Ee={boundingBoxData:{lowerCorner:[C.lllat,C.lllon],upperCorner:[C.urlat,C.urlon]}};break;case"complex":Ee="text/xml"===de.description.format?{complexData:{content:[de.value],mimeType:de.description.format}}:{complexData:{content:[JSON.stringify(de.value)],mimeType:de.description.format}};break;default:throw Error(`This input is of type ${de.description.type}. We can only marshal input of type literal, bbox or complex.`)}return Ee}marshalReferenceInput(de){return{href:de.value,method:"GET",mimeType:de.description.format}}marshallGetStatusBody(de,Ee,C){return{}}marshallGetResultBody(de,Ee,C){return{}}dismissUrl(de,Ee,C){throw new Error("Wps 1.0 does not support Dismiss-operations.")}marshalDismissBody(de){throw new Error("Wps 1.0 does not support Dismiss-operations.")}unmarshalDismissResponse(de,Ee,C){throw new Error("Wps 1.0 does not support Dismiss-operations.")}}},496:(Vn,Dn,ft)=>{"use strict";ft.d(Dn,{Y:()=>de});const Dt=Ee=>Ee.hasOwnProperty("jobID")&&Ee.hasOwnProperty("status");var Re=ft(402);Vn=ft.hmd(Vn);class de{constructor(){}getCapabilitiesUrl(C){return`${C}?service=WPS&request=GetCapabilities&version=2.0.0`}getDescribeProcessUrl(C,w){return`${C}?service=WPS&request=DescribeProcess&version=2.0.0&Identifier=${w}`}unmarshalProcessDescription(C){const w=C.processOffering[0],R=[];for(const k of w.process.input)R.push({description:this.unmarshalInputDescription(k),value:null});const O=[];for(const k of w.process.output)O.push({description:this.unmarshalOutputDescription(k),value:null});return{id:w.process.identifier.value,processVersion:w.processVersion||"",description:w.process._abstract?.value,title:w.process.title?.value||"",inputs:R,outputs:O}}unmarshalInputDescription(C){if("BoundingBoxData"===C.dataDescription.name.localPart)return{id:C.identifier.value,title:C.title.value,reference:!1,type:"bbox",description:C.abstract?.value};if("LiteralData"===C.dataDescription.name.localPart)return{id:C.identifier.value,title:C.title.value,reference:!1,type:"literal",defaultValue:C.dataDescription.value.literalDataDomain?.defaultValue?.value,options:C.dataDescription.value.literalDataDomain?.allowedValues.valueOrRange.map(w=>w.value),description:C.abstract?.value};if("ComplexData"===C.dataDescription.name.localPart)return{id:C.identifier.value,title:C.title.value,reference:!0,type:"complex",format:C.dataDescription.value.format[0].mimeType,description:C.abstract?.value};throw new Error(`Cannot unmarshal input-description ${C.identifier.value}`)}unmarshalOutputDescription(C){if("BoundingBoxData"===C.dataDescription.name.localPart)return{id:C.identifier.value,title:C.title.value,reference:!1,type:"bbox",description:C.abstract?.value};if("LiteralData"===C.dataDescription.name.localPart)return{id:C.identifier.value,title:C.title.value,reference:!1,type:"literal",description:C.abstract?.value};if("ComplexData"===C.dataDescription.name.localPart)return{id:C.identifier.value,title:C.title.value,reference:!0,type:"complex",format:C.dataDescription.value.format[0].mimeType,description:C.abstract?.value};throw new Error(`Cannot unmarshal input-description ${C.identifier.value}`)}executeUrl(C,w){return C}unmarshalCapabilities(C){const w=[];return C.contents.processSummary.forEach(R=>{w.push({id:R.identifier.value})}),w}unmarshalSyncExecuteResponse(C,w,R,O,k){const W=[];if(C.value.hasOwnProperty("output"))for(const X of C.value.output){const ee=k.find(Ge=>Ge.id===X.id);if(!ee)throw new Error(`Could not find an output-description for the parameter ${X.id}.`);const Y=ee.reference,ne=ee.type,be=ee.format;let Me;if(X.reference)Me=X.reference.href||null;else{if(!X.data)throw new Error("Output has neither reference nor data field.");Me=this.unmarshalOutputData(X.data,ee)}W.push({description:{id:X.id,title:ee.title,format:be,reference:Y,type:ne},value:Me})}else Dt(C.value)&&W.push({description:{id:R,title:"",reference:!0,type:"status"},value:{status:C.value.status,jobID:C.value.jobID,percentCompleted:C.value.percentCompleted}});return W}unmarshalOutputData(C,w){if("complex"===w.type)switch("base64"===C.encoding&&C.content.map(Vn.exports?R=>Buffer.from(R,"base64").toString("ascii"):R=>atob(R)),C.mimeType){case"application/vnd.geo+json":case"application/json":return C.content.map(R=>JSON.parse(R));case"application/WMS":return C.content;case"text/xml":case"application/xml":return Re.serializeToString(C.content[0]);default:throw new Error(`Cannot unmarshal complex data of format ${C.mimeType}`)}else if("literal"===w.type)return C.content;throw new Error(`Not yet implemented: ${C}`)}unmarshalAsyncExecuteResponse(C,w,R,O,k){return this.unmarshalGetStateResponse(C,w,R,O,k)}unmarshalGetStateResponse(C,w,R,O,k){if(Dt(C.value))return{status:C.value.status,jobID:C.value.jobID,percentCompleted:C.value.percentCompleted};throw new Error(`Not a status-info: ${C}`)}marshalExecBody(C,w,R,O){return{name:{key:"{http://www.opengis.net/wps/2.0}Execute",localPart:"Execute",namespaceURI:"http://www.opengis.net/wps/2.0",prefix:"wps",string:"{http://www.opengis.net/wps/2.0}wps:Execute"},value:{TYPE_NAME:"WPS_2_0.ExecuteRequestType",service:"WPS",version:"2.0.0",identifier:{value:C},input:this.marshalInputs(w),output:this.marshalOutputs(R),mode:O?"async":"sync",response:"document"}}}marshalInputs(C){return C.map(w=>w.description.reference?{id:w.description.id,reference:{href:w.value,mimeType:w.description.format,schema:w.description.schema,encoding:w.description.encoding||"UTF-8"}}:{id:w.description.id,data:{content:this.marshalInput(w),mimeType:w.description.format}})}marshalInput(C){return"literal"===C.description.type?[C.value]:[JSON.stringify(C.value)]}marshalOutputs(C){return C.map(w=>({id:w.id,mimeType:w.format,transmission:w.reference?"reference":"value"}))}marshallGetStatusBody(C,w,R){return{name:{key:"{http://www.opengis.net/wps/2.0}GetStatus",localPart:"GetStatus",namespaceURI:"http://www.opengis.net/wps/2.0",prefix:"wps",string:"{http://www.opengis.net/wps/2.0}wps:GetStatus"},value:{jobID:R,service:"WPS",version:"2.0.0"}}}marshallGetResultBody(C,w,R){return{name:{key:"{http://www.opengis.net/wps/2.0}GetResult",localPart:"GetResult",namespaceURI:"http://www.opengis.net/wps/2.0",prefix:"wps",string:"{http://www.opengis.net/wps/2.0}wps:GetResult"},value:{service:"WPS",version:"2.0.0",jobID:R}}}dismissUrl(C,w,R){return C}marshalDismissBody(C){return{name:{key:"{http://www.opengis.net/wps/2.0}Dismiss",localPart:"Dismiss",namespaceURI:"http://www.opengis.net/wps/2.0",prefix:"wps",string:"{http://www.opengis.net/wps/2.0}wps:Dismiss"},value:{jobID:C,service:"WPS",version:"2.0.0"}}}unmarshalDismissResponse(C,w,R){return{status:C.value.status,jobID:C.value.jobID}}}}},Vn=>{Vn(Vn.s=852)}]);