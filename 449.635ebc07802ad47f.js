"use strict";(self.webpackChunkdemo_maps=self.webpackChunkdemo_maps||[]).push([[449],{9766:(A,w,s)=>{s.d(w,{um:()=>I,RP:()=>M,HF:()=>B,Kl:()=>g,aZ:()=>O,fc:()=>x,HX:()=>N,zc:()=>T,gY:()=>F,Bz:()=>Z});var y=s(2474);class F extends y.YY{constructor(l){const o={name:"OpenStreetMap",displayName:"OpenStreetMap",id:"osm",visible:!1,type:"xyz",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",subdomains:["a","b","c"],attribution:'&copy, <a href="https://www.openstreetmap.org">OpenStreetMap</a> contributors',continuousWorld:!1,legendImg:"https://a.tile.openstreetmap.org/3/4/3.png",description:"OpenStreetMap z-x-y Tiles",opacity:1};l&&Object.assign(o,l),super(o)}}class T extends y.YY{constructor(l){const o={name:"OpenSeaMap",displayName:"OpenSeaMap",id:"OpenSeaMap",visible:!1,type:"xyz",removable:!1,url:"https://{s}.openseamap.org/seamark/{z}/{x}/{y}.png",subdomains:["t1"],attribution:'&copy, <a href="https://map.openseamap.org/legend.php?lang=de&page=license">OpenSeaMap</a>',continuousWorld:!1,legendImg:"https://t1.openseamap.org/seamark/10/554/321.png",description:"http://map.openseamap.org/",opacity:1};l&&Object.assign(o,l),super(o)}}class g extends y.TI{constructor(l){const o={name:"EOC Litemap",displayName:"EOC Litemap",id:"eoc_litemap",visible:!1,type:"wms",removable:!1,params:{LAYERS:"litemap",FORMAT:"image/png",TRANSPARENT:!0},url:"https://geoservice.dlr.de/eoc/basemap/wms",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://geoservice.dlr.de/eoc/basemap/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image%2Fpng&TRANSPARENT=true&LAYERS=litemap&ATTRIBUTION=&WIDTH=256&HEIGHT=256&CRS=EPSG%3A3857&STYLES=&BBOX=0%2C0%2C10018754.171394622%2C10018754.171394622",description:"http://www.naturalearthdata.com/about/",opacity:1};l&&Object.assign(o,l),super(o)}}class O extends y.RC{constructor(l){const o={name:"EOC Litemap Tile",displayName:"EOC Litemap Tile",id:"eoc_litemap_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:litemap",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Alitemap&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"EOC Litemap as web map tile service",opacity:1};l&&Object.assign(o,l),super(o)}}class x extends y.RC{constructor(l){const o={name:"EOC Liteoverlay Tile",displayName:"EOC LiteoverlayTile",id:"eoc_Liteoverlay_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:liteoverlay",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aliteoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the liteoverlay provided for EOC Service Portals",opacity:1};l&&Object.assign(o,l),super(o)}}class M extends y.RC{constructor(l){const o={name:"EOC Basemap Tile",displayName:"EOC Basemap Tile",id:"eoc_basemap_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:basemap",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Abasemap&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the basemap for DLR Service Portals",opacity:1};l&&Object.assign(o,l),super(o)}}class B extends y.RC{constructor(l){const o={name:"EOC Baseoverlay Tile",displayName:"EOC Baseoverlay Tile",id:"eoc_Baseoverlay_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:baseoverlay",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Abaseoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the basemap for DLR Service Portals",opacity:1};l&&Object.assign(o,l),super(o)}}class I extends y.RC{constructor(l){const o={name:"BlueMarble Tile",displayName:"BlueMarble Tile",id:"blueMarble_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"bmng_topo_bathy",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=bmng_topo_bathy&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"Blue Marble NG dataset with topography and bathymetry",opacity:1};l&&Object.assign(o,l),super(o)}}class Z extends y.RC{constructor(l){const o={name:"World Relief B/W Tile",displayName:"World Relief B/W Tile",id:"eoc:world_relief_bw",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:world_relief_bw",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aworld_relief_bw&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"World Relief Black / White",opacity:1};l&&Object.assign(o,l),super(o)}}class N extends y.RC{constructor(l){const o={name:"Hillshade Tile",displayName:"Hillshade Tile",id:"eoc_hillshade",visible:!1,type:"wmts",removable:!1,params:{layer:"hillshade",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=hillshade&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"Global Hillshade based on GMTED2010",opacity:1};l&&Object.assign(o,l),super(o)}}},7248:(A,w,s)=>{s.r(w),s.d(w,{RouteMap3Module:()=>le,RouteMap3RoutingModule:()=>D});var y=s(3223),F=s(9498),T=s(1794),g=s(2474),O=s(285),x=s(9631),M=s(9766),B=s(4910),I=s(6328),Z=s(6082),N=s(1308),v=s(7176),l=s(8943),o=s(77),J=s(1050),X=s(2972),U=s(5992),Q=s(400),$=s(5504),K=s(8618),G=s(1963),q=s(9895),e=s(3714),k=s(7997),_=s(7512),h=s(7243),ee=s(3254),te=s(2227),ae=s(1832);let se=(()=>{class m{constructor(r,i,a,n,c,d){this.layersSvc=r,this.mapStateSvc=i,this.mapSvc=a,this.alertSvc=n,this.progressService=c,this.route=d,this.class="content-container floating",this.subs=[],this.startBbox=null,this.updateLayerOnZoom=()=>{const t=this.getGridLayer(),p=this.layersSvc.getLayerById(t.id);p&&(p.custom_layer=t.layer,this.layersSvc.updateLayer(p,p.filtertype))},this.getGridLayer=()=>{const t=this.mapStateSvc.getMapState().getValue(),S="gridLayer",f=((m,ne,r,i,a)=>{const n=[];let c=80;r>1&&(c=40),r>2&&(c=20),r>3&&(c=10),r>4&&(c=6),r>5&&(c=4),r>6&&(c=3),r>7&&(c=2),r>8&&(c=1);const d=.5*c;let t=10;t>10&&(t=10),a=(0,o.f3)(a,d);const p=m[0]+t,u=m[1]+t,f=m[3]-t-u,b=Math.floor((m[2]-t-p)/d),C=Math.floor(f/d);let E=p;for(let W=b;W>0;W--){let P=u;for(let V=C;V>0;V--){const Y=E+d,j=P+d,H=[E,P],ce=[[H,[E,j],[Y,j],[Y,P],H]];if((0,o.jE)(a,E,P)&&(0,o.jE)(a,Y,j)){const pe=new l.ZP(ce).transform("EPSG:4326",i),me=new v.Z({geometry:pe,column:W,row:V,id:n.length+1});n.push(me)}P+=d}E+=d}return n})([-180,-90,180,90],0,t.zoom,this.mapSvc.EPSG,t.extent),b=new N.Z({features:f,wrapX:!1}),C=new Z.Z({source:b});return C.set("id",S),{layer:C,id:S}},this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.addLayers(),this.subscribeToLayers(),this.subscribeToMapState(),this.subscribeToRoute(),this.startBbox&&this.mapStateSvc.setExtent(this.startBbox)}ngAfterViewInit(){this.mapSvc.map.on("moveend",this.updateLayerOnZoom)}ngOnDestroy(){this.subs.map(r=>r.unsubscribe()),this.mapSvc.map.un("moveend",this.updateLayerOnZoom)}addLayers(){const r=new M.gY({visible:!1}),i=new M.Kl({visible:!0,tileSize:512}),a=new I.Z({url:"https://ahocevar.com/geoserver/wms",params:{LAYERS:"topp:states"},serverType:"geoserver"});a.on("imageloadstart",()=>{this.progressService.progress({indeterminate:!0})}),a.on("imageloadend",()=>{this.progressService.progress(null)}),a.on("imageloaderror",()=>{this.progressService.progress(null)});const n=new g.AO({id:"event_layer",name:"Image load Layer",type:"custom",custom_layer:new B.Z({source:a}),visible:!1,bbox:[-133.9453125,18.979025953255267,-60.46875,52.908902047770255]}),c=new g.DJ({id:"updatable_feature_layer",name:"Updatable feature layer",type:"geojson",visible:!1,data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[-192.48046875,-24.686952411999144],[-88.06640625,-24.686952411999144],[-88.06640625,50.28933925329178],[-192.48046875,50.28933925329178],[-192.48046875,-24.686952411999144]]]}}]},actions:[{action:u=>{c.data=Q,this.layersSvc.updateLayer(c)},icon:"download",title:"Load data"}]}),d=this.getGridLayer(),t=new g.AO({id:d.id,name:"gridLayer",type:"custom",opacity:.3,custom_layer:d.layer});[i,r,n,c,t].forEach(u=>this.layersSvc.addLayer(u,"Layers"))}removeLayer(){this.layersSvc.removeLayerOrGroupById("event_layer2")}addLayer(){const r=new U.x,i=new U.x,a=new $.Z({source:new K.Z({url:"https://geoservice.dlr.de/eoc/land/wms",params:{LAYERS:"GUF28_DLR_v1_Mosaic"}})}),n=t=>{var p=t.context,u=this.mapSvc.map.getSize(),S=.5*u[0],R=(0,G.CR)(t,[S,0]),L=(0,G.CR)(t,[u[0],0]),f=(0,G.CR)(t,[S,u[1]]),b=(0,G.CR)(t,u);p.save(),p.beginPath(),p.moveTo(R[0],R[1]),p.lineTo(f[0],f[1]),p.lineTo(b[0],b[1]),p.lineTo(L[0],L[1]),p.closePath(),p.clip()};a.on("prerender",t=>{n(t)}),a.on("postrender",t=>{(t=>{t.context.restore()})(t)});const d=new g.AO({id:"event_layer2",name:"Image load Layer 2",type:"custom",custom_layer:new q.Z({layers:[a]}),visible:!0,removable:!0,events:{source:[{event:"tileloadstart",listener:t=>{r.next(t)}},{event:"tileloadend",listener:t=>{i.next(t)}}],layer:[{event:"prerender",listener:t=>{n(t)}},{event:"postrender",listener:t=>{n(t)}}]}});r.subscribe(t=>this.progressService.progress({indeterminate:!0})),i.pipe((0,J.b)(200)).subscribe(t=>this.progressService.progress(null)),this.layersSvc.addLayer(d,"Layers")}getSearchParamsHashRouting(r=window.location.href){-1===r.indexOf("http")&&(r=new URL(r,`${window.location.origin}${window.location.pathname}`).toString());const i=new URL(window.location.href,window.location.origin),[a,n]=i.hash.split("?");let c=new URLSearchParams;return n&&(c=new URLSearchParams(n)),{query:c,urlHashRouting:i,hash:a}}updateSearchParamsHashRouting(r){const{query:i,urlHashRouting:a,hash:n}=this.getSearchParamsHashRouting();Object.keys(r).map(t=>{i.set(t,r[t])});const c=decodeURIComponent(`${i}`);return`${a.protocol}//${a.host}${a.pathname||"/"}${n||"#/"}?${c}`}subscribeToMapState(){const r=this.mapStateSvc.getMapState().subscribe(i=>{if(history.pushState){const a=i.extent.map(c=>c.toFixed(3)),n=this.updateSearchParamsHashRouting({bbox:a.join(","),zoom:i.zoom.toString()});window.history.pushState({path:n},"",n)}});this.subs.push(r)}subscribeToRoute(){const r=this.route.queryParams.pipe((0,X.P)()).subscribe(i=>{if(Object.keys(i).length>0&&i.bbox){const a=i.bbox.split(",").map(n=>parseFloat(n));4===a.length&&(this.startBbox=a)}});this.subs.push(r)}subscribeToLayers(){if(this.layersSvc){const r=this.layersSvc.getLayers().subscribe(i=>{i.filter(n=>!0===n.visible).forEach(n=>{"updatable_feature_layer"===n.id&&n.data.features.length<=1&&this.alertSvc.alert({type:"info",text:"Click the layer setting down arrow icon to load new features.",closeable:!0})})});this.subs.push(r)}}static#e=this.\u0275fac=function(i){return new(i||m)(e.Y36(g.KD),e.Y36(O.I3),e.Y36(x.BR),e.Y36(k.c),e.Y36(_.N),e.Y36(T.gz))};static#t=this.\u0275cmp=e.Xpm({type:m,selectors:[["app-route-map3"]],hostVars:2,hostBindings:function(i,a){2&i&&e.Tol(a.class)},features:[e._Bn([g.KD,O.I3,x.BR])],decls:21,vars:10,consts:[[1,"content-area","map-view"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["title","Coordinates",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","compass","clrVerticalNavIcon",""],["title","Test",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","cog","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(i,a){1&i&&(e.TgZ(0,"main",0),e._UZ(1,"ukis-map-ol",1),e.qZA(),e.TgZ(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),e._UZ(4,"clr-icon",4),e._uU(5," Layers "),e.TgZ(6,"clr-vertical-nav-group-children",5),e._UZ(7,"ukis-layer-control",6),e.qZA()(),e.TgZ(8,"clr-vertical-nav-group",7),e._UZ(9,"clr-icon",8),e._uU(10," Coordinates "),e.TgZ(11,"clr-vertical-nav-group-children",5),e._UZ(12,"ukis-mouse-position"),e.qZA()(),e.TgZ(13,"clr-vertical-nav-group",9),e._UZ(14,"clr-icon",10),e._uU(15," Test "),e.TgZ(16,"clr-vertical-nav-group-children",5)(17,"button",11),e.NdJ("click",function(){return a.removeLayer()}),e._uU(18,"remove Layer"),e.qZA(),e.TgZ(19,"button",11),e.NdJ("click",function(){return a.addLayer()}),e._uU(20,"add Layer"),e.qZA()()()()),2&i&&(e.xp6(1),e.Q6J("layersSvc",a.layersSvc)("mapState",a.mapStateSvc)("controls",a.controls),e.xp6(1),e.Q6J("clrVerticalNavCollapsible",!0)("clr-nav-level",2),e.xp6(1),e.Q6J("clrVerticalNavGroupExpanded",!0),e.xp6(4),e.Q6J("layersSvc",a.layersSvc)("mapStateSvc",a.mapStateSvc),e.xp6(1),e.Q6J("clrVerticalNavGroupExpanded",!1),e.xp6(5),e.Q6J("clrVerticalNavGroupExpanded",!0))},dependencies:[h.qvL,h.saT,h.fzC,h.A0B,h.d6G,h.ogR,ee.E,te.j,ae.C]})}return m})();var re=s(2233),ie=s(1324);const oe=[{path:"",component:se}];let D=(()=>{class m{static#e=this.\u0275fac=function(i){return new(i||m)};static#t=this.\u0275mod=e.oAB({type:m});static#a=this.\u0275inj=e.cJS({imports:[T.Bz.forChild(oe),T.Bz]})}return m})(),le=(()=>{class m{static#e=this.\u0275fac=function(i){return new(i||m)};static#t=this.\u0275mod=e.oAB({type:m});static#a=this.\u0275inj=e.cJS({imports:[y.ez,F.q,D,h.K6A,re.cE,x.oC,ie.X8]})}return m})()},400:A=>{A.exports=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"title":"Polygon 1"},"geometry":{"type":"Polygon","coordinates":[[[-178.59375,15.961329081596647],[-166.640625,15.961329081596647],[-166.640625,27.994401411046148],[-178.59375,27.994401411046148],[-178.59375,15.961329081596647]]]}},{"type":"Feature","properties":{"title":"Polygon 2"},"geometry":{"type":"Polygon","coordinates":[[[-179.296875,-1.4061088354351594],[-168.75,-1.4061088354351594],[-168.75,10.487811882056695],[-179.296875,10.487811882056695],[-179.296875,-1.4061088354351594]]]}},{"type":"Feature","properties":{"title":"Polygon 3"},"geometry":{"type":"Polygon","coordinates":[[[-158.203125,5.61598581915534],[-146.25,5.61598581915534],[-146.25,22.59372606392931],[-158.203125,22.59372606392931],[-158.203125,5.61598581915534]]]}},{"type":"Feature","properties":{"title":"Polygon 4"},"geometry":{"type":"Polygon","coordinates":[[[-162.0703125,-13.2399454992863],[-150.82031249999997,-13.2399454992863],[-150.82031249999997,-1.0546279422758742],[-162.0703125,-1.0546279422758742],[-162.0703125,-13.2399454992863]]]}},{"type":"Feature","properties":{"title":"Polygon 5"},"geometry":{"type":"Polygon","coordinates":[[[-142.3828125,-20.632784250388013],[-131.1328125,-20.632784250388013],[-131.1328125,-2.108898659243126],[-142.3828125,-2.108898659243126],[-142.3828125,-20.632784250388013]]]}},{"type":"Feature","properties":{"title":"Polygon 6"},"geometry":{"type":"Polygon","coordinates":[[[-106.171875,44.08758502824516],[-100.8984375,39.90973623453719],[-95.625,42.8115217450979],[-101.25,46.800059446787316],[-106.171875,44.08758502824516]]]}}]}')}}]);