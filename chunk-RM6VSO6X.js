import{$a as ce,$b as tt,B as ee,C as $,Ca as ae,Da as Pe,E as a,G as Be,H as Me,I as k,Ib as Ye,K as De,Kb as Qe,L as te,M as h,O as L,Oa as j,Oc as it,P as y,Pb as qe,Pc as nt,Qc as ot,R as ie,S as ne,Sb as Ke,Sc as rt,T as d,Tc as st,U as I,V as T,Vb as Xe,W as V,Wb as Je,X as l,Y as c,Z as v,Za as ze,Zb as et,_a as le,aa as f,ab as pe,ac as fe,b as A,ba as _,bb as de,bc as he,ca as s,cb as je,cc as Ce,da as oe,db as He,dc as ge,ea as re,eb as me,ec as xe,f as Ge,fa as G,fb as Re,gb as ue,ha as Ee,hb as Ne,ia as Fe,ib as We,ja as Ae,ka as se,kb as $e,la as S,lb as Ze,lc as ve,ma as ke,na as P,oc as be,p as J,pa as D,qa as E,qb as ye,ra as F,rb as Ue,tb as _e,u as Oe,ua as b,v as m,va as w,w as u,wa as z,x as q,xa as Z}from"./chunk-G5LJQFAD.js";import{a as Ve}from"./chunk-FJYW2LMB.js";var Li="tms",ht="wms",at="wmts",wi="xyz",Si="geojson",ki="kml",Ii="wfs",Ct="custom",gt="stacked",Ti={Baselayers:"Baselayers",Overlays:"Overlays",Layers:"Layers"};var g=class{constructor(r){this.name="",this.id="",this.opacity=1,this.visible=!0,this.removable=!1,this.filtertype="Layers",this.continuousWorld=!1,this.expanded=!1,Object.assign(this,r)}get time(){return this.protTime}set time(r){this.protTime=r}},H=class extends g{constructor(r){if(super(r),this.styles&&this.styles.length>0){let e=this.styles.find(i=>i.default);e||(e=this.styles[0]),this.legendImg=e.legendURL,this.params?(this.type===ht?this.params.STYLES=e.name:this.type===at&&(this.params.style=e.name),this.params.STYLES=e.name):this.type===at&&(this.params||(this.params={}),this.params.style=e.name)}}set time(r){this.params&&(this.params.TIME=r),this.protTime=r}get time(){return this.protTime}};var lt=class extends g{constructor(r){super(r)}};var ct=class extends g{constructor(r){super(r),this.type=Ct,this.custom_layer={},Object.assign(this,r)}},pt=class extends g{constructor(r){super(r),this.type=gt,this.layers=[],Object.assign(this,r)}};var x=class{constructor(r){this.filtertype="Layers",this.removable=!0,this.layerRemovable=!0,this.expanded=!1,r&&r.visible!==void 0&&r.layers&&r.layers.length&&(r.layers=r.layers.map(e=>(e.visible=r.visible,e))),Object.assign(this,r)}get visible(){return this.layers&&this.layers.length&&(this.protVisible=this.layers.filter(r=>r.visible).length>0),this.protVisible}set visible(r){this.protVisible=r,this.layers&&this.layers.length&&(this.layers=this.layers.map(e=>(e.visible=r,e)))}};var K=class extends H{constructor(r){super(r)}};var X=class extends H{constructor(r){super(r)}};var Fi=(()=>{class n{constructor(){this.store=new A(Array()),this.baseLayers=new A(Array()),this.overlays=new A(Array()),this.layers=new A(Array())}addLayer(e,i,t){if(this.isInLayergroups(e))console.error(`layer or Group with id: ${e.id} already exists!`);else{i?e.filtertype=i:i=e.filtertype;let o=this.store.getValue();t?this.filterFiltertype(i):(o.push(e),this.store.next(o),this.filterFiltertype(i))}}removeLayer(e,i,t){this.isInLayergroups(e)?t?(console.log(`layer: ${e.id} is removed with force!`),this._removeLayer(e,i)):e.removable?this._removeLayer(e,i):e.removable||console.log(`layer: ${e.id} is not removable!`):console.error(`layer with id: ${e.id} not in storeItems!`)}_removeLayer(e,i){i?i!==e.filtertype&&console.error(`the layer with id: ${e.id} you want to remove from ${i} is from filtertype: ${e.filtertype}`):i=e.filtertype;let t=this.store.getValue().filter(o=>o instanceof g?o.id!==e.id:o);this.store.next(t),this.filterFiltertype(i)}updateLayer(e,i){this.isInLayergroups(e)?(i?i!==e.filtertype&&console.error(`the layer with id: ${e.id} you want to update is from filtertype: ${e.filtertype} and not from ${i} `):i=e.filtertype,e.filtertype==="Overlays"&&(this.updateLayerOrGroupInStore(e),this.filterFiltertype(e.filtertype)),e.filtertype==="Layers"&&(this.updateLayerOrGroupInStore(e),this.filterFiltertype(e.filtertype)),e.filtertype==="Baselayers"&&(this.updateLayerOrGroupInStore(e),this.filterFiltertype(e.filtertype))):console.error(`layer with id: ${e.id} you want to update not in storeItems!`)}updateLayerOrGroupInStore(e){this.store.getValue().filter((i,t,o)=>{i instanceof g&&e instanceof g?i.id===e.id&&(o[t]=e,this.store.next(o)):i instanceof x&&e instanceof x&&i.id===e.id&&(o[t]=e,this.store.next(o))})}removeLayerOrGroupById(e,i,t){this.store.getValue().filter(o=>{o instanceof g?o.id===e&&this.removeLayer(o,o.filtertype||"Layers",t):o instanceof x&&(o.id===e?this.removeLayerGroup(o,t):o.layers.forEach(p=>{p.id===e&&this.removeLayerFromGroup(p,o,i,t)}))})}addLayerToGroup(e,i){this.isInLayergroups(e)?console.error(`layer with id: ${e.id} already exists!`):(e.filtertype!==i.filtertype&&(e.filtertype=i.filtertype),this.isInLayergroups(e,[i])?console.error(`layer with id: ${e.id} already exists in ${i.id}!`,i):(i.layers.push(e),this.updateLayerGroup(i)))}addLayerToGroupById(e,i){this.store.getValue().forEach(t=>{t instanceof x&&t.id===i&&this.addLayerToGroup(e,t)})}removeLayerFromGroup(e,i,t=!0,o){i.layers=i.layers.filter(p=>p.id!==e.id),this.updateLayerGroup(i),this.filterFiltertype(e.filtertype),i.layers.length===0&&t&&this.removeLayerGroup(i,o)}setLayerIndexInGroup(e,i,t){let o=t.layers.indexOf(e);switch(i){case"up":{if(o===0)break;this.arrayMove(t.layers,o,o-1);break}case"down":{if(o===t.layers.length-1)break;this.arrayMove(t.layers,o,o+1);break}}this.updateLayer(e,t.filtertype||"Layers")}addLayerGroup(e,i){if(!this.isInLayergroups(e)){i?e.filtertype=i:i=e.filtertype;let t=this.store.getValue();this.isInLayergroups(e,e.layers)&&(e.layers=e.layers.filter(o=>o.id!==e.id)),e.layers=e.layers.map(o=>(o.filtertype=e.filtertype,o)),t.push(e),this.store.next(t),this.updateLayerGroup(e)}}removeLayerGroup(e,i){this.isInLayergroups(e)?i?(console.log(`layerGroup: ${e.id} is removed with force!`),this._removeLayerGroup(e)):e.removable?this._removeLayerGroup(e):e.removable||console.log(`layerGroup: ${e.id} is not removable!`):console.error(`layer or Group with id: ${e.id} not in storeItems!`)}_removeLayerGroup(e){for(let o of e.layers)this.removeLayerFromGroup(o,e);let t=this.store.getValue().filter(function(o,p){return o.id!==e.id});this.store.next(t)}updateLayerGroup(e,i=!1){i&&(e=this.sortLayerGroup(e)),this.updateLayerOrGroupInStore(e);for(let t of e.layers)this.updateLayer(t,e.filtertype||"Layers")}arrayMove(e,i,t){e.splice(t<0?e.length+t:t,0,e.splice(i,1)[0])}setGroupLayerIndex(e,i){let t;if(e instanceof g&&e.filtertype?t=this.getNumOfGroups(e.filtertype):e instanceof x&&(t=this.getNumOfGroups(e.filtertype)),t>1){let o=this.store.getValue(),p=o.indexOf(e);(!this.isGroupFirst(e)||!this.isGroupLast(e))&&(typeof i=="number"?this.arrayMove(o,p,i):i==="up"?this.arrayMove(o,p,p-1):i==="down"&&this.arrayMove(o,p,p+1)),this.store.next(o),this.baseLayers.next(this.filterBaseLayers()),this.layers.next(this.filterLayers()),this.overlays.next(this.filterOverlays())}}getNumOfGroups(e){let i=0,t=this.store.getValue();for(let o of t)o.filtertype===e&&i++;return i}isGroupFirst(e,i,t){let o=!1,p=this.store.getValue();return i&&(p=i),t&&(p=p.filter(C=>C.filtertype===t)),p.indexOf(e)===0&&(o=!0),o}isGroupLast(e,i,t){let o=!1,p=this.store.getValue();return i&&(p=i),t&&(p=p.filter(C=>C.filtertype===t)),p.indexOf(e)===p.length-1&&(o=!0),o}isInLayergroups(e,i){let t=!1,o;e instanceof g||e instanceof x?o=e.id:o=e;let p=this.getLayerOrGroupById(o,i);return(p&&p instanceof g||p instanceof x)&&(t=!0),t}getLayerOrGroupById(e,i){let t=[],o=this.store.getValue();if(i&&(o=i),o.map(p=>{p instanceof x?p.id===e?t.push(p):p.layers.map(C=>{C.id===e&&t.push(C)}):p instanceof g&&p.id===e&&t.push(p)}),t.length){if(t.length===1)return t[0];t.length>1&&console.log("there is a duplicate ID in the Layer Groups!")}else return null}getLayerById(e,i){let t,o=this.flattenDeepArray(this.store.getValue());return i&&(o=i),o.map(p=>{p.id===e&&(t=p)}),t}getBaseLayers(){return this.baseLayers.asObservable()}removeBaseLayers(e){let i=this.filterBaseLayers();return e&&(i=i.filter(e)),i.forEach(t=>{this.removeLayerOrGroupById(t.id)}),this.baseLayers.asObservable()}getBaseLayersCount(){return this.baseLayers.getValue().length}getOverlays(){return this.overlays.asObservable()}removeOverlays(e){let i=this.filterOverlays();return e&&(i=i.filter(e)),i.forEach(t=>{this.removeLayerOrGroupById(t.id)}),this.overlays.asObservable()}getOverlaysCount(){return this.overlays.getValue().length}getLayers(){return this.layers.asObservable()}removeLayers(e){let i=this.filterLayers();return e&&(i=i.filter(e)),i.forEach(t=>{this.removeLayerOrGroupById(t.id)}),this.layers.asObservable()}getLayersCount(){return this.layers.getValue().length}getLayerGroups(){return this.store.asObservable()}setLayerGroups(e,i){return e.length>0&&e.map(t=>{t instanceof x&&t.layers.length>0&&(t.layers=t.layers.map(o=>(o.filtertype=t.filtertype,o)))}),i?(i==="Baselayers"?this.removeBaseLayers():i==="Layers"?this.removeLayers():i==="Overlays"&&this.removeOverlays(),e.map(t=>{t instanceof g?this.addLayer(t,i):t instanceof x&&this.addLayerGroup(t,i)})):(this.store.next(e),this.baseLayers.next(this.filterBaseLayers()),this.layers.next(this.filterLayers()),this.overlays.next(this.filterOverlays())),this.store.asObservable()}getLayerGroupsCount(){return this.store.getValue().length}flattenDeepArray(e){return e.reduce((i,t)=>t instanceof x&&Array.isArray(t.layers)?i.concat(this.flattenDeepArray(t.layers)):i.concat(t),[])}filterOverlays(){let e=this.store.getValue();return this.flattenDeepArray(e.filter(t=>t.filtertype==="Overlays"))}filterBaseLayers(){let e=this.store.getValue();return this.flattenDeepArray(e.filter(t=>t.filtertype==="Baselayers"))}filterLayers(){let e=this.store.getValue();return this.flattenDeepArray(e.filter(t=>t.filtertype==="Layers"))}filterFiltertype(e){e==="Baselayers"?this.baseLayers.next(this.filterBaseLayers()):e==="Overlays"?this.overlays.next(this.filterOverlays()):e==="Layers"&&this.layers.next(this.filterLayers())}sortLayerGroup(e){return e.layers.sort((i,t)=>{let o=0;return i instanceof H?o=1:t instanceof H&&(o=-1),o}),e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var O=class{constructor(r,e,i,t=[-180,-90,180,90],o=new Date().toISOString(),p=0,C=0){let B={maxzoom:0,minzoom:0,notifier:"map"};this.zoom=r,this.center=e,this.extent=t,this.time=o,this.viewAngle=p,this.rotation=C,this.options=Object.assign(B,i)}sameCenter(r){return this.center.lat===r.lat&&this.center.lon===r.lon}sameZoom(r){return this.zoom===r}sameExtent(r){let e=r.length,i=!1;return this.extent.length===e&&(i=this.extent.every((t,o)=>r[o]===t)),i}sameNotifier(r){return this.options.notifier===r}};var xt=new O(0,{lat:0,lon:0}),Ui=(()=>{class n{constructor(){this.mapState=new A(xt),this.lastAction=new A(null)}getMapState(){return this.mapState}setMapState(e){if(e)if(this.lastAction.next("setState"),e instanceof O){let i=new O(e.zoom,e.center,e.options,e.extent,e.time,e.viewAngle,e.rotation);this.mapState.next(i)}else{let i=Ve({notifier:"user"},e.options),t=new O(e.zoom,e.center,i,e.extent,e.time,e.viewAngle,e.rotation);this.mapState.next(t)}}getExtent(){return this.mapState.pipe(Ge(e=>e.extent))}setExtent(e,i="user"){if(!Array.isArray(e))return;this.lastAction.next("setExtent");let t=this.getMapState().getValue();t.options.notifier=i;let o=new O(t.zoom,t.center,t.options,e,t.time,t.viewAngle,t.rotation);this.mapState.next(o)}setTime(e,i="user"){this.lastAction.next("setTime");let t=this.getMapState().getValue();t.options.notifier=i,e instanceof Date?t.time=e.toISOString():t.time=e,this.setMapState(t)}setViewAngle(e,i="user"){if(isNaN(e))return;this.lastAction.next("setAngle");let t=this.getMapState().getValue();t.options.notifier=i;let o=new O(t.zoom,t.center,t.options,t.extent,t.time,e,t.rotation);this.mapState.next(o)}setRotation(e,i="user"){if(isNaN(e))return;this.lastAction.next("setRotation");let t=this.getMapState().getValue();t.options.notifier=i;let o=new O(t.zoom,t.center,t.options,t.extent,t.time,t.viewAngle,e);this.mapState.next(o)}getLastAction(){return this.lastAction}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=J({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();j.addIcons(Re,Ue);var dt=["ukis-icon",`<svg version="1.1" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" class="has-solid"
xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" role="img">
<title>ukis</title>
<path class="clr-i-solid clr-i-solid-path-1" d="M18,31.5c4.7,0,8.9-2.4,11.3-6.1H6.7C9.1,29.1,13.3,31.5,18,31.5z"/>
<path class="clr-i-solid clr-i-solid-path-2" d="M4.5,17.1c0,0.3,0,0.6,0,0.9c0,1.7,0.3,3.4,0.9,4.9h21.2L4.5,17.1z"/>
<path class="clr-i-solid clr-i-solid-path-3" d="M31,21.5c0.3-1.1,0.5-2.3,0.5-3.5c0-3-1-5.7-2.6-7.9L8.7,15.6L31,21.5z"/>
<path class="clr-i-solid clr-i-solid-path-4" d="M18,4.5c-6,0-11.2,4-12.9,9.5l22-6C24.7,5.8,21.5,4.5,18,4.5z"/>
</svg>`];var mt=["dlr-icon",`<svg version="1.1" viewBox="0 0 36 36" preserveAspectRatio="xMidYMid meet" class="has-solid"
xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" role="img">
<title>dlr</title>
<path class="clr-i-solid clr-i-solid-path-1" d="M25.8,13.2V3.8l-9.4,9.4h-8l-7.7,7.7l9.4,0v9.4l9.4-9.4h8l7.7-7.7H25.8L25.8,13.2z M23.9,8.5v4.7h-4.7L23.9,8.5
L23.9,8.5z M5.4,18.9l3.8-3.8h5.3l-3.8,3.8H5.4L5.4,18.9z M12.1,25.6v-4.8h4.8L12.1,25.6L12.1,25.6z M18.8,18.9h-5.4l3.8-3.8h5.4
L18.8,18.9L18.8,18.9z M26.8,18.9h-5.2l3.8-3.8h5.2L26.8,18.9L26.8,18.9z M19.6,26.5h1.6c1.8,0,3.3,0.6,3.3,2.9
c0,2.3-1.6,2.9-3.3,2.9h-1.6V26.5L19.6,26.5z M20.8,31.3h0.6c1,0,1.9-0.7,1.9-2c0-1.2-0.9-2-1.9-2h-0.6V31.3L20.8,31.3z M25.7,26.5
h1.1v4.8h2.2v0.9h-3.4V26.5L25.7,26.5z M30.1,26.5h1.2c1.2,0,2.7,0,2.7,1.6c0,0.7-0.5,1.2-1.2,1.3v0c0.3,0,0.5,0.3,0.6,0.6l0.9,2.2
h-1.3l-0.7-1.8c-0.2-0.4-0.3-0.6-0.8-0.6h-0.4v2.4h-1.1V26.5L30.1,26.5z M31.3,28.9h0.4c0.6,0,1.2-0.1,1.2-0.8
c0-0.7-0.6-0.7-1.2-0.7h-0.4V28.9L31.3,28.9z"/>
</svg>`];j.addIcons(dt,mt,Ne);function vt(n,r){}var ut=(()=>{class n{constructor(e){this.viewContainerRef=e}static{this.\u0275fac=function(i){return new(i||n)(Be(Me))}}static{this.\u0275dir=De({type:n,selectors:[["","ukisAddHost",""]]})}}return n})(),Le=(()=>{class n{constructor(){this.dynamicComponentChange=new q,this.subs=[]}loadComponent(){this.dynamicComponent&&(this.viewContainerRef=this.ukisAddHost.viewContainerRef,this.viewContainerRef.clear(),this.componentRef=this.viewContainerRef.createComponent(this.dynamicComponent.component),this.setInputOutputs())}setInputOutputs(){this.componentRef&&this.dynamicComponent.inputs&&Object.keys(this.dynamicComponent.inputs).map(i=>{let t=i;if(this.dynamicComponent.inputs){this.componentRef.instance[t]=this.dynamicComponent.inputs[t];let o=`${t}Change`;if(this.componentRef.instance[o]&&this.componentRef.instance[o]instanceof q){let p=this.componentRef.instance[o].subscribe(C=>{this.dynamicComponent.inputs&&(this.dynamicComponent.inputs[t]=C),this.dynamicComponent.outputs&&this.dynamicComponent.outputs[o]&&this.dynamicComponent.outputs[o](C),this.dynamicComponentChange.emit(this.dynamicComponent)});this.subs.push(p)}}})}ngOnChanges(e){e.dynamicComponent&&(Array.isArray(this.subs)&&this.subs.map(i=>i.unsubscribe()),this.subs.map(i=>i.unsubscribe()),this.subs=[],this.setInputOutputs())}ngOnInit(){this.loadComponent()}ngOnDestroy(){this.componentRef&&(this.subs.map(e=>e.unsubscribe()),this.componentRef.destroy(),this.componentRef=null),this.viewContainerRef&&(this.viewContainerRef.clear(),this.viewContainerRef=null)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=k({type:n,selectors:[["ukis-dynamic-component"]],viewQuery:function(i,t){if(i&1&&Ee(ut,7),i&2){let o;Fe(o=Ae())&&(t.ukisAddHost=o.first)}},inputs:{dynamicComponent:"dynamicComponent"},outputs:{dynamicComponentChange:"dynamicComponentChange"},features:[Oe],decls:1,vars:0,consts:[["ukisAddHost",""]],template:function(i,t){i&1&&h(0,vt,0,0,"ng-template",0)},dependencies:[ut],encapsulation:2})}}return n})();var Lt=["*"],wt=n=>({expanded:n}),Ie=n=>({disabled:n}),Te=n=>({active:n});function St(n,r){if(n&1){let e=f();l(0,"cds-icon",9),_("click",function(){m(e);let t=s();return u(t.showProperties())}),c()}if(n&2){let e=s();y("ngStyle",e.getExpandShape())("ngClass",b(2,Ie,e.is_expandable()))}}function kt(n,r){if(n&1){let e=f();l(0,"span",10),_("click",function(){m(e);let t=s();return u(t.showProperties())}),S(1),c()}if(n&2){let e=s();y("title",e.getLayerName(e.layer)),a(),P(" ",e.getLayerName(e.layer)," ")}}function It(n,r){if(n&1){let e=f();l(0,"span")(1,"cds-icon",11),_("click",function(){m(e);let t=s();return u(t.setLayerIndex(t.layer,"down",t.group))}),c(),l(2,"cds-icon",12),_("click",function(){m(e);let t=s();return u(t.setLayerIndex(t.layer,"up",t.group))}),c()()}if(n&2){let e=s();a(),y("hidden",e.layerGroups&&e.layerGroups.length==1)("ngClass",b(4,Ie,e.isLast(e.layer))),a(),y("hidden",e.layerGroups&&e.layerGroups.length==1)("ngClass",b(6,Ie,e.isFirst(e.layer)))}}function Tt(n,r){if(n&1&&v(0,"cds-icon",6),n&2){let e=s();G("title",e.layer.visible?"Choose another layer":"Show layer"),L("solid",e.layer.visible)("shape",e.layer.visible?"dot-circle":"circle")}}function Vt(n,r){if(n&1&&v(0,"cds-icon",6),n&2){let e=s();G("title",e.layer.visible?"Hide layer":"Show layer"),L("solid",e.layer.visible)("shape",e.layer.visible?"eye":"eye-hide")}}function Gt(n,r){if(n&1){let e=f();l(0,"cds-icon",20),_("click",function(){m(e);let t=s(2);return u(t.switchTab("settings"))}),c()}if(n&2){let e=s(2);y("ngClass",b(1,Te,e.activeTabs.settings))}}function Ot(n,r){if(n&1){let e=f();l(0,"cds-icon",21),_("click",function(){m(e);let t=s(2);return u(t.switchTab("legend"))}),c()}if(n&2){let e=s(2);y("ngClass",b(1,Te,e.activeTabs.legend))}}function Bt(n,r){if(n&1){let e=f();l(0,"cds-icon",22),_("click",function(){m(e);let t=s(2);return u(t.switchTab("description"))}),c()}if(n&2){let e=s(2);y("ngClass",b(1,Te,e.activeTabs.description))}}function Mt(n,r){if(n&1){let e=f();l(0,"cds-icon",23),_("click",function(){let t=m(e).$implicit,o=s(2);return u(t.action(o.layer))}),c()}if(n&2){let e=r.$implicit;y("title",e.title),L("shape",e.icon)}}function Dt(n,r){if(n&1){let e=f();l(0,"cds-icon",24),_("click",function(){m(e);let t=s(2);return u(t.zoomTo(t.layer))}),c()}}function Et(n,r){if(n&1){let e=f();l(0,"cds-icon",25),_("click",function(){m(e);let t=s(2);return u(t.removeLayer(t.group,t.layer))}),c()}}function Ft(n,r){if(n&1){let e=f();l(0,"div",29)(1,"label"),S(2,"Opacity: "),l(3,"clr-range-container")(4,"input",32),_("change",function(){m(e);let t=s(4);return u(t.setLayerOpacity(t.layer))}),F("ngModelChange",function(t){m(e);let o=s(4);return E(o.layer.opacity,t)||(o.layer.opacity=t),u(t)}),c()()(),l(5,"span"),S(6),c()()}if(n&2){let e=s(4);a(4),y("value",e.layer.opacity)("min",0)("max",1)("step",.1),D("ngModel",e.layer.opacity),a(2),ke(" "+e.layer.opacity)}}function At(n,r){if(n&1&&(l(0,"option",34),S(1),c()),n&2){let e=r.$implicit,i=s(5);y("value",e.name),L("selected",i.isSelectedStyle(e.name)?!0:null),a(),ke(e.title)}}function Pt(n,r){if(n&1){let e=f();l(0,"select",33),_("change",function(t){m(e);let o=s(4);return u(o.executeChangeStyle(t))}),T(1,At,2,3,"option",34,I),c()}if(n&2){let e=s(4);a(),V(e.layer.styles)}}function zt(n,r){if(n&1){let e=f();l(0,"ukis-dynamic-component",35),F("dynamicComponentChange",function(t){m(e);let o=s(4);return E(o.dynamicComponents.action,t)||(o.dynamicComponents.action=t),u(t)}),c()}if(n&2){let e=s(4);D("dynamicComponent",e.dynamicComponents.action)}}function jt(n,r){if(n&1&&(l(0,"div",26),h(1,Ft,7,6,"div",29)(2,Pt,3,0,"select",30)(3,zt,1,1,"ukis-dynamic-component",31),c()),n&2){let e=s(3);a(),d(e.checkBaselayer(e.layer,e.group)?-1:1),a(),d(e.layer.styles&&(e.layer.styles==null?null:e.layer.styles.length)>1?2:-1),a(),d(e.checkIsComponentItem(e.layer,"action")?3:-1)}}function Ht(n,r){if(n&1){let e=f();l(0,"ukis-dynamic-component",35),F("dynamicComponentChange",function(t){m(e);let o=s(4);return E(o.dynamicComponents.legendImg,t)||(o.dynamicComponents.legendImg=t),u(t)}),c()}if(n&2){let e=s(4);D("dynamicComponent",e.dynamicComponents.legendImg)}}function Rt(n,r){if(n&1&&(l(0,"a",36),v(1,"img",37),c()),n&2){let e=s(4);y("href",e.layer.legendImg,$),a(),y("src",e.layer.legendImg,$)}}function Nt(n,r){if(n&1&&(l(0,"div",27),h(1,Ht,1,1,"ukis-dynamic-component",31)(2,Rt,2,2,"a",36),c()),n&2){let e=s(3);a(),d(e.checkIsComponentItem(e.layer,"legendImg")?1:2)}}function Wt(n,r){if(n&1){let e=f();l(0,"ukis-dynamic-component",35),F("dynamicComponentChange",function(t){m(e);let o=s(4);return E(o.dynamicComponents.description,t)||(o.dynamicComponents.description=t),u(t)}),c()}if(n&2){let e=s(4);D("dynamicComponent",e.dynamicComponents.description)}}function $t(n,r){if(n&1&&v(0,"span",38),n&2){let e=s(4);y("innerHTML",e.layer.description,ee)}}function Zt(n,r){if(n&1&&(l(0,"div",28),h(1,Wt,1,1,"ukis-dynamic-component",31)(2,$t,1,1,"span",38),c()),n&2){let e=s(3);a(),d(e.checkIsComponentItem(e.layer,"description")?1:2)}}function Ut(n,r){if(n&1&&(l(0,"div",19),h(1,jt,4,3,"div",26)(2,Nt,3,1,"div",27)(3,Zt,3,1,"div",28),c()),n&2){let e=s(2);a(),d(e.activeTabs.settings?1:-1),a(),d(e.activeTabs.legend&&e.layer.legendImg?2:-1),a(),d(e.activeTabs.description&&e.layer.description?3:-1)}}function Yt(n,r){if(n&1&&(l(0,"div",8)(1,"div",13),h(2,Gt,1,3,"cds-icon",14)(3,Ot,1,3,"cds-icon",15)(4,Bt,1,3,"cds-icon",16),T(5,Mt,1,2,"cds-icon",6,I),v(7,"span"),h(8,Dt,1,0,"cds-icon",17)(9,Et,1,0,"cds-icon",18),c(),h(10,Ut,4,3,"div",19),c()),n&2){let e=s();a(2),d(!e.checkBaselayer(e.layer,e.group)||e.layer.action?2:-1),a(),d(e.layer.legendImg?3:-1),a(),d(e.layer.description?4:-1),a(),V(e.layer.actions),a(3),d(e.canZoomToLayer?8:-1),a(),d(e.layer.removable?9:-1),a(),d(e.hasTabsbody&&e.hasActiveTabs()?10:-1)}}j.addIcons(ze,le,We,Ze,pe,de,ce,me,ue,_e,ye);var yt=function(n){return n.settings="settings",n.legend="legend",n.description="description",n}(yt||{}),U=(()=>{class n{get visible(){return this.layer.visible}get cssClass(){return this.layer.cssClass}set expanded(e){this.layer&&(this.layer.expanded=e)}get expanded(){return this.layer?!!this.layer.expanded:!1}constructor(){this.expandable=!0,this.sorting=!0,this.update=new q,this.canZoomToLayer=!1,this.activeTabs={settings:!1,legend:!0,description:!1},this.hasTabsbody=!0,this.dynamicComponents={legendImg:null,action:null,description:null}}checkIsComponentItem(e,i){let t=e[i],o=!1;if(t&&typeof t=="object"&&"component"in t){let p=t.component;t.inputs?t.inputs&&!t.inputs.layer?this.dynamicComponents[i]={component:t.component,inputs:Object.assign({},t.inputs,{layer:e})}:t.inputs&&t.inputs.layer&&(this.dynamicComponents[i]={component:t.component,inputs:Object.assign({},t.inputs)}):this.dynamicComponents[i]={component:p,inputs:{layer:e}},t.outputs&&(this.dynamicComponents[i].outputs=Object.assign({},t.outputs)),o=!0}return o}getLayerName(e){return e.displayName?e.displayName:e.name}ngOnInit(){this.layersSvc||console.error("you need to provide a layersService!"),typeof this.layer?.expanded=="object"?Object.keys(yt).includes(this.layer.expanded.tab)?(this.switchTab(this.layer.expanded.tab),this.layer.expanded.expanded===!1&&(this.activeTabs[this.layer.expanded.tab]=!1)):this.setDefaultActiveTabs():this.setDefaultActiveTabs(),this.layer.bbox&&this.layer.bbox.length>=4&&(this.canZoomToLayer=!0),this.layer.filtertype==="Baselayers"&&!this.layer.legendImg&&!this.layer.description&&!this.layer.action&&!this.layer.actions&&!this.layer.styles&&!(this.layer.styles?.length>1)&&(this.hasTabsbody=!1)}setDefaultActiveTabs(){this.layer.legendImg||this.switchTab("description"),!this.layer.legendImg&&!this.layer.description&&this.switchTab("settings")}setLayerVisibility(e,i){if(i){if(i.layers.length>0)if(i.filtertype==="Baselayers"){for(let t of i.layers)t.visible=t===e;this.update.emit({layer:this.layer})}else{let t=i.visible;e.visible=!e.visible,t!==i.visible?this.update.emit({layer:this.layer}):this.layersSvc.updateLayer(e,e.filtertype||"Layers")}}else if(e.filtertype==="Baselayers"){e.visible=!e.visible;let t=this.layerGroups.filter(o=>o.filtertype==="Baselayers");for(let o of t)o instanceof g&&o.id!==e.id&&(o.visible=!e.visible,this.layersSvc.updateLayer(o,o.filtertype||"Baselayers"))}else e.visible=!e.visible,this.layersSvc.updateLayer(e,e.filtertype||"Layers")}setLayerIndex(e,i,t){t?this.layersSvc.setLayerIndexInGroup(e,i,t):this.layersSvc.setGroupLayerIndex(e,i)}removeLayer(e,i){e?this.layersSvc.removeLayerFromGroup(i,e):this.layersSvc.removeLayer(i,i.filtertype)}zoomTo(e){this.mapState&&e.bbox&&e.bbox.length>=4&&this.mapState.setExtent(e.bbox)}setLayerOpacity(e){this.group?this.update.emit({layer:e}):this.layersSvc.updateLayer(e,e.filtertype||"Layers")}checkBaselayer(e,i){return!!(e.filtertype==="Baselayers"||i&&i.filtertype==="Baselayers")}is_expandable(){return this.group?!this.layer.legendImg&&this.group.filtertype==="Baselayers":!this.hasTabsbody}showProperties(){this.is_expandable()||(this.expanded=!this.expanded)}switchTab(e,i=!0){for(let t of Object.keys(this.activeTabs)){let o=e===t;this.activeTabs[t]&&i?this.activeTabs[t]=!1:this.activeTabs[t]=o}}hasActiveTabs(){return Object.values(this.activeTabs).filter(e=>e).length>0}isSelectedStyle(e){return this.layer instanceof X?this.layer.params.STYLES===e:this.layer instanceof K?this.layer.params.style===e:!1}executeChangeStyle(e){let i=e.target.value;if(this.layer.styles){let t=this.layer.styles.find(o=>o.name===i);t&&(this.layer.legendImg=t.legendURL,this.layer instanceof X?this.layer.params.STYLES=t.name:this.layer instanceof K&&(this.layer.params.style=t.name),this.layersSvc.updateLayer(this.layer,this.layer.filtertype))}}isFirst(e){return this.group?this.layersSvc.isGroupFirst(e,this.group.layers):this.layersSvc.isGroupFirst(e,null,e.filtertype)}isLast(e){return this.group?this.layersSvc.isGroupLast(e,this.group.layers):this.layersSvc.isGroupLast(e,null,e.filtertype)}getExpandShape(){return this.expanded?{transform:"rotate(180deg)"}:{transform:"rotate(90deg)"}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=k({type:n,selectors:[["ukis-layerentry"]],hostVars:4,hostBindings:function(i,t){i&2&&(ne(t.cssClass),ie("layer-visible",t.visible))},inputs:{layersSvc:"layersSvc",mapState:"mapState",layer:"layer",group:"group",layerGroups:"layerGroups",expanded:"expanded",expandable:"expandable",sorting:"sorting"},outputs:{update:"update"},ngContentSelectors:Lt,decls:13,vars:12,consts:[["ref",""],[1,"layer",3,"ngClass"],[1,"head"],["shape","angle","title","Details",1,"iconButton",3,"ngStyle","ngClass"],[1,"item-title-replacement","title",3,"click","title"],[1,"title",3,"title"],[1,"iconButton",3,"title"],[1,"hide",3,"change","type","name","checked"],[1,"body"],["shape","angle","title","Details",1,"iconButton",3,"click","ngStyle","ngClass"],[1,"title",3,"click","title"],["shape","arrow","title","up","direction","up",1,"iconButton",3,"click","hidden","ngClass"],["shape","arrow","title","down","direction","down",1,"iconButton",3,"click","hidden","ngClass"],[1,"tools"],["title","Layer settings","shape","cog",1,"iconButton",3,"ngClass"],["title","Layer Legend","shape","image",1,"iconButton",3,"ngClass"],["title","Layer info","shape","info-standard",1,"iconButton",3,"ngClass"],["shape","zoom-in","title","Zoom to layer",1,"iconButton"],["shape","trash","title","Remove layer",1,"iconButton"],[1,"tabsbody"],["title","Layer settings","shape","cog",1,"iconButton",3,"click","ngClass"],["title","Layer Legend","shape","image",1,"iconButton",3,"click","ngClass"],["title","Layer info","shape","info-standard",1,"iconButton",3,"click","ngClass"],[1,"iconButton",3,"click","title"],["shape","zoom-in","title","Zoom to layer",1,"iconButton",3,"click"],["shape","trash","title","Remove layer",1,"iconButton",3,"click"],[1,"layersettings"],[1,"legend"],[1,"description"],[1,"form-group","opacity-input"],["clrSelect",""],[3,"dynamicComponent"],["type","range","name","points","clrRange","",1,"ukis-range-input","opacity-input",3,"change","ngModelChange","value","min","max","step","ngModel"],["clrSelect","",3,"change"],[3,"value"],[3,"dynamicComponentChange","dynamicComponent"],["target","_blank","title","Show full Image",3,"href"],[3,"src"],[3,"innerHTML"]],template:function(i,t){if(i&1){let o=f();oe(),l(0,"div",1)(1,"div",2),h(2,St,1,4,"cds-icon",3),l(3,"div",4,0),_("click",function(){return m(o),u(t.showProperties())}),re(5),c(),h(6,kt,2,2,"span",5)(7,It,3,8,"span"),l(8,"label"),h(9,Tt,1,3,"cds-icon",6)(10,Vt,1,3,"cds-icon",6),l(11,"input",7),_("change",function(){return m(o),u(t.setLayerVisibility(t.layer,t.group))}),c()()(),h(12,Yt,11,6,"div",8),c()}if(i&2){let o=se(4);y("ngClass",b(10,wt,t.expanded)),a(2),d(t.hasTabsbody?2:-1),a(),y("title",t.getLayerName(t.layer)),a(3),d(o.children.length==0?6:-1),a(),d(!t.checkBaselayer(t.layer,t.group)&&t.sorting?7:-1),a(2),d(t.checkBaselayer(t.layer,t.group)?9:10),a(2),y("type",t.checkBaselayer(t.layer,t.group)?"radio":"checkbox")("name","layer")("checked",t.layer.visible),a(),d(t.expandable&&t.expanded?12:-1)}},dependencies:[ae,xe,ge,Pe,be,ve,ot,nt,it,et,Xe,Je,Ye,Ke,Qe,qe,st,rt,Le],styles:[".title[_ngcontent-%COMP%]{cursor:pointer}.item-title-replacement[_ngcontent-%COMP%]:empty{display:none}.body[_ngcontent-%COMP%]{cursor:default}.tabsbody[_ngcontent-%COMP%]{overflow:hidden}.tabsbody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;max-width:100%}"]})}}return n})();var we=(()=>{class n{transform(e,i){return e.filter(i)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=te({name:"itemsfilter",type:n,pure:!1})}}return n})();var Y=(()=>{class n{transform(e){return typeof e=="string"?e.split("").reverse().join(""):Array.isArray(e)?e.slice().reverse():e}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275pipe=te({name:"reverse",type:n,pure:!1})}}return n})();var Qt=["*"],_t=n=>({disabled:n}),qt=n=>({id:n});function Kt(n,r){if(n&1){let e=f();l(0,"span",7),_("click",function(){m(e);let t=s();return u(t.showProperties())}),S(1),c()}if(n&2){let e=s();y("title",e.getLayerName(e.group)),a(),P(" ",e.getLayerName(e.group)," ")}}function Xt(n,r){if(n&1){let e=f();l(0,"span")(1,"cds-icon",8),_("click",function(){m(e);let t=s();return u(t.setLayerGroupIndex(t.group,"down"))}),c(),l(2,"cds-icon",9),_("click",function(){m(e);let t=s();return u(t.setLayerGroupIndex(t.group,"up"))}),c()()}if(n&2){let e=s();a(),y("ngClass",b(2,_t,e.isLast(e.group))),a(),y("ngClass",b(4,_t,e.isFirst(e.group)))}}function Jt(n,r){if(n&1){let e=f();l(0,"span")(1,"label"),v(2,"cds-icon",10),l(3,"input",11),_("change",function(){m(e);let t=s();return u(t.setGroupLayersVisibility())}),c()()()}if(n&2){let e=s();a(2),G("title",e.group.visible?"Hide Group":"Show Group"),L("solid",e.group.visible)("shape",e.group.visible?"eye":"eye-hide"),a(),y("type","checkbox")("checked",e.group.visible)("name","group")}}function ei(n,r){if(n&1){let e=f();l(0,"cds-icon",24),_("click",function(){m(e);let t=s(2);return u(t.switchTab("settings"))}),c()}if(n&2){let e=s(2);G("title",e.activeTabs.settings?"Hide settings":"Show settings"),L("solid",e.activeTabs.settings)}}function ti(n,r){if(n&1){let e=f();l(0,"cds-icon",25),_("click",function(){m(e);let t=s(2);return u(t.switchTab("legend"))}),c()}if(n&2){let e=s(2);G("title",e.activeTabs.legend?"Hide Legend":"Show Legend"),L("solid",e.activeTabs.legend)}}function ii(n,r){if(n&1){let e=f();l(0,"cds-icon",26),_("click",function(){m(e);let t=s(2);return u(t.switchTab("description"))}),c()}if(n&2){let e=s(2);G("title",e.activeTabs.description?"Hide Info":"Show Info"),L("solid",e.activeTabs.description)}}function ni(n,r){if(n&1){let e=f();l(0,"cds-icon",3),_("click",function(){let t=m(e).$implicit,o=s(2);return u(t.action(o.group))}),c()}if(n&2){let e=r.$implicit;y("title",e.title),L("shape",e.icon)}}function oi(n,r){if(n&1){let e=f();l(0,"cds-icon",27),_("click",function(){m(e);let t=s(2);return u(t.zoomTo(t.group))}),c()}}function ri(n,r){if(n&1){let e=f();l(0,"cds-icon",28),_("click",function(){m(e);let t=s(2);return u(t.removeLayerGroup(t.group))}),c()}}function si(n,r){if(n&1){let e=f();l(0,"ukis-dynamic-component",31),F("dynamicComponentChange",function(t){m(e);let o=s(3);return E(o.dynamicComponents.description,t)||(o.dynamicComponents.description=t),u(t)}),c()}if(n&2){let e=s(3);D("dynamicComponent",e.dynamicComponents.description)}}function ai(n,r){if(n&1&&v(0,"span",30),n&2){let e=s(3);y("innerHTML",e.group.description,ee)}}function li(n,r){if(n&1&&(l(0,"div",19),h(1,si,1,1,"ukis-dynamic-component",29)(2,ai,1,1,"span",30),c()),n&2){let e=s(2);a(),d(e.checkIsComponentItem(e.group,"description")?1:2)}}function ci(n,r){if(n&1){let e=f();l(0,"ukis-dynamic-component",31),F("dynamicComponentChange",function(t){m(e);let o=s(3);return E(o.group.action,t)||(o.group.action=t),u(t)}),c()}if(n&2){let e=s(3);D("dynamicComponent",e.group.action)}}function pi(n,r){if(n&1&&(l(0,"div",20),h(1,ci,1,1,"ukis-dynamic-component",29),c()),n&2){let e=s(2);a(),d(e.checkIsComponentItem(e.group,"action")?1:-1)}}function di(n,r){if(n&1){let e=f();l(0,"ukis-dynamic-component",31),F("dynamicComponentChange",function(t){m(e);let o=s(3);return E(o.dynamicComponents.legendImg,t)||(o.dynamicComponents.legendImg=t),u(t)}),c()}if(n&2){let e=s(3);D("dynamicComponent",e.dynamicComponents.legendImg)}}function mi(n,r){if(n&1&&(l(0,"a",32),v(1,"img",33),c()),n&2){let e=s(3);y("href",e.group.legendImg,$),a(),y("src",e.group.legendImg,$)}}function ui(n,r){if(n&1&&(l(0,"div",21),h(1,di,1,1,"ukis-dynamic-component",29)(2,mi,2,2,"a",32),c()),n&2){let e=s(2);a(),d(e.checkIsComponentItem(e.group,"legendImg")?1:2)}}function yi(n,r){if(n&1){let e=f();l(0,"div",23)(1,"ukis-layerentry",34),_("update",function(t){m(e);let o=s(2);return u(o.layerUpdate(t,o.group))}),l(2,"span",35),S(3),c()()()}if(n&2){let e=r.$implicit,i=s(2);y("cdkDragData",b(8,qt,e.id)),a(),y("expanded",i.openAllLayersProperties)("layersSvc",i.layersSvc)("mapState",i.mapState)("layer",e)("group",i.group)("sorting",i.groupLayersSort),a(2),P(" ",e.displayName||e.name," ")}}function _i(n,r){if(n&1){let e=f();l(0,"div",6)(1,"div",12),h(2,ei,1,2,"cds-icon",13)(3,ti,1,2,"cds-icon",14)(4,ii,1,2,"cds-icon",15),l(5,"cds-icon",16),_("click",function(){m(e);let t=s();return u(t.showHideAllDetails())}),c(),T(6,ni,1,2,"cds-icon",10,I),v(8,"span"),h(9,oi,1,0,"cds-icon",17)(10,ri,1,0,"cds-icon",18),c(),h(11,li,3,1,"div",19)(12,pi,2,1,"div",20)(13,ui,3,1,"div",21),l(14,"div",22),w(15,"itemsfilter"),w(16,"reverse"),_("cdkDropListDropped",function(t){m(e);let o=s();return u(o.drop(t))}),T(17,yi,4,10,"div",23,I),w(19,"itemsfilter"),w(20,"reverse"),c()()}if(n&2){let e=s();a(2),d(e.group.action?2:-1),a(),d(e.group.legendImg?3:-1),a(),d(e.group.description?4:-1),a(),G("title",e.openAllLayersProperties?"Hide all layers details":"Show all layers details"),L("solid",e.openAllLayersProperties),a(),V(e.group.actions),a(3),d(e.canZoomToGroup?9:-1),a(),d(e.group.removable?10:-1),a(),d(e.group.description&&e.activeTabs.description?11:-1),a(),d(e.group.action&&e.activeTabs.settings?12:-1),a(),d(e.group.legendImg&&e.activeTabs.legend?13:-1),a(),y("cdkDropListDisabled",!e.groupLayersSort)("cdkDropListData",z(16,15,Z(15,12,e.group.layers,e.checkClassHide))),a(3),V(z(20,20,Z(19,17,e.group.layers,e.checkClassHide)))}}j.addIcons(je,He,le,pe,de,ce,me,ue,$e,_e,ye);var ft=function(n){return n.settings="settings",n.legend="legend",n.description="description",n}(ft||{}),Se=(()=>{class n{get visible(){return this.group.visible}get cssClass(){return this.group.cssClass}set openAllLayersProperties(e){this.group&&this.group.layers.length&&this.group.layers.forEach(i=>i.expanded=e)}get openAllLayersProperties(){return this.group&&this.group.layers.length?this.group.layers.filter(e=>e.expanded===!0).length===this.group.layers.length:!1}constructor(){this.groupSort=!0,this.groupLayersSort=!0,this.canZoomToGroup=!1,this.activeTabs={settings:!1,legend:!0,description:!1},this.dynamicComponents={legendImg:null,action:null,description:null}}ngOnInit(){this.group.bbox&&this.group.bbox.length>=4&&(this.canZoomToGroup=!0),typeof this.group?.expanded=="object"?Object.keys(ft).includes(this.group.expanded.tab)?(this.switchTab(this.group.expanded.tab),this.group.expanded.expanded===!1&&(this.activeTabs[this.group.expanded.tab]=!1)):this.setDefaultActiveTabs():this.setDefaultActiveTabs()}setDefaultActiveTabs(){this.group?.action||(this.activeTabs.settings=!1)}checkIsComponentItem(e,i){let t=e[i],o=!1;if(t&&typeof t=="object"&&"component"in t){let p=t.component;t.inputs?t.inputs&&!t.inputs.group?this.dynamicComponents[i]={component:t.component,inputs:Object.assign({},t.inputs,{group:e})}:t.inputs&&t.inputs.group&&(this.dynamicComponents[i]={component:t.component,inputs:Object.assign({},t.inputs)}):this.dynamicComponents[i]={component:p,inputs:{group:e}},t.outputs&&(this.dynamicComponents[i].outputs=Object.assign({},t.outputs)),o=!0}return o}checkBaselayer(e){return!!(e&&e.filtertype==="Baselayers")}checkClassHide(e){return!(e?.cssClass?.includes("hide")||!1)}getLayerName(e){return e.displayName?e.displayName:e.name}setLayerGroupIndex(e,i){this.layersSvc.setGroupLayerIndex(e,i)}setGroupLayersVisibility(){this.group.visible=!this.group.visible,this.layersSvc.updateLayerGroup(this.group)}removeLayerGroup(e){this.layersSvc.removeLayerGroup(e)}zoomTo(e){this.mapState&&e.bbox&&e.bbox.length>=4&&this.mapState.setExtent(e.bbox)}layerUpdate(e,i){let t=e.layer;this.layersSvc.updateLayerGroup(i)}showProperties(){this.group.expanded=!this.group.expanded}switchTab(e,i=!0){for(let t of Object.keys(this.activeTabs)){let o=e===t;this.activeTabs[t]&&i?this.activeTabs[t]=!1:this.activeTabs[t]=o}}showHideAllDetails(){if(this.openAllLayersProperties){this.openAllLayersProperties=!1;for(let e of Object.keys(this.activeTabs))this.activeTabs[e]=!1}else this.openAllLayersProperties=!0,this.group.legendImg?this.switchTab("legend",!1):this.group.description?this.switchTab("description",!1):this.group.action&&this.switchTab("settings",!1)}isFirst(e){return this.layersSvc.isGroupFirst(e,this.layerGroups,e.filtertype)}isLast(e){return this.layersSvc.isGroupLast(e,this.layerGroups,e.filtertype)}drop(e){let i=this.group.layers,t=i.length,o=e.container.data,p=o.length,C,B;if(t===p){let N=t-e.previousIndex-1,M=t-e.currentIndex-1;C=N,B=M}else{let N=o[e.currentIndex],M=i.findIndex(W=>W.id===e.item.data.id),Q=i.findIndex(W=>W.id===N.id);e.previousIndex===e.currentIndex&&(Q=M),C=M,B=Q}tt(this.group.layers,C,B),this.layersSvc.updateLayerGroup(this.group)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=k({type:n,selectors:[["ukis-layerentry-group"]],hostVars:4,hostBindings:function(i,t){i&2&&(ne(t.cssClass),ie("group-visible",t.visible))},inputs:{layersSvc:"layersSvc",mapState:"mapState",group:"group",layerGroups:"layerGroups",groupSort:"groupSort",groupLayersSort:"groupLayersSort"},ngContentSelectors:Qt,decls:10,vars:7,consts:[["ref",""],[1,"layergroup"],[1,"head"],[1,"iconButton",3,"click","title"],[1,"item-title-replacement","title",3,"click","title"],[1,"title",3,"title"],[1,"body"],[1,"title",3,"click","title"],["shape","arrow","title","up",1,"iconButton","move-item",3,"click","ngClass"],["shape","arrow","title","down","direction","down",1,"iconButton","move-item",3,"click","ngClass"],[1,"iconButton",3,"title"],[1,"hide",3,"change","type","checked","name"],[1,"tools"],["shape","cog",1,"iconButton",3,"title"],["shape","image",1,"iconButton",3,"title"],["shape","info-standard",1,"iconButton",3,"title"],["shape","details",1,"iconButton",3,"click","title"],["shape","zoom-in","title","Zoom to group",1,"iconButton"],["shape","trash","title","Remove group",1,"iconButton"],[1,"tabsbody","description"],[1,"tabsbody","layersettings"],[1,"tabsbody","legend"],["cdkDropList","",3,"cdkDropListDropped","cdkDropListDisabled","cdkDropListData"],["cdkDragLockAxis","y","cdkDrag","",1,"sublayers",3,"cdkDragData"],["shape","cog",1,"iconButton",3,"click","title"],["shape","image",1,"iconButton",3,"click","title"],["shape","info-standard",1,"iconButton",3,"click","title"],["shape","zoom-in","title","Zoom to group",1,"iconButton",3,"click"],["shape","trash","title","Remove group",1,"iconButton",3,"click"],[3,"dynamicComponent"],[3,"innerHTML"],[3,"dynamicComponentChange","dynamicComponent"],["target","_blank","title","Show full Image",3,"href"],[3,"src"],[3,"update","expanded","layersSvc","mapState","layer","group","sorting"],["cdkDragHandle","",1,"move-item"]],template:function(i,t){if(i&1){let o=f();oe(),l(0,"div",1)(1,"div",2)(2,"cds-icon",3),_("click",function(){return m(o),u(t.showProperties())}),c(),l(3,"div",4,0),_("click",function(){return m(o),u(t.showProperties())}),re(5),c(),h(6,Kt,2,2,"span",5)(7,Xt,3,6,"span")(8,Jt,4,6,"span"),c(),h(9,_i,21,22,"div",6),c()}if(i&2){let o=se(4);a(2),G("title",t.group.expanded?"Close":"Open"),L("shape",t.group.expanded?"folder-open":"folder"),a(),y("title",t.getLayerName(t.group)),a(3),d(o.children.length==0?6:-1),a(),d(t.layerGroups.length>1&&t.groupSort?7:-1),a(),d(t.checkBaselayer(t.group)?-1:8),a(),d(t.group.expanded?9:-1)}},dependencies:[xe,ge,ae,be,ve,Ce,he,U,fe,we,Y,Le],styles:[".title[_ngcontent-%COMP%]{cursor:pointer}.item-title-replacement[_ngcontent-%COMP%]:empty{display:none}.move-item[_ngcontent-%COMP%]{cursor:move}.cdk-drop-list-disabled[_ngcontent-%COMP%]   .move-item[_ngcontent-%COMP%]{cursor:pointer}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 10px;box-sizing:border-box;border-radius:2px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;overflow:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .sublayers[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.info[_ngcontent-%COMP%]{padding-left:.2rem}.tabsbody[_ngcontent-%COMP%]{overflow:hidden}.tabsbody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;max-width:100%}"]})}}return n})();var fi=n=>({id:n});function hi(n,r){if(n&1&&(l(0,"ukis-layerentry-group",2)(1,"span",4),S(2),c()()),n&2){let e=s().$implicit,i=s();y("layersSvc",i.layersSvc)("mapState",i.mapStateSvc)("group",e)("layerGroups",i.layergroups)("groupSort",i.layersSort)("groupLayersSort",i.groupLayersSort),a(2),P(" ",e.displayName||e.name," ")}}function Ci(n,r){if(n&1&&(l(0,"ukis-layerentry",3)(1,"span",4),S(2),c()()),n&2){let e=s().$implicit,i=s();y("layerGroups",i.layergroups)("expanded",!1)("layersSvc",i.layersSvc)("mapState",i.mapStateSvc)("layer",e)("group",null)("sorting",i.layersSort),a(2),P(" ",e.displayName||e.name," ")}}function gi(n,r){if(n&1&&(l(0,"div",1),h(1,hi,3,7,"ukis-layerentry-group",2)(2,Ci,3,8,"ukis-layerentry",3),c()),n&2){let e=r.$implicit,i=s();y("cdkDragData",b(3,fi,e.id)),a(),d(i.isLayerGroup(e)&&e.filtertype===i.layerfilter?1:-1),a(),d(!i.isLayerGroup(e)&&e.filtertype===i.layerfilter?2:-1)}}var eo=(()=>{class n{constructor(){this.layerfilter="Layers",this.layersSort=!0,this.groupLayersSort=!0,this.layergroups=[]}ngOnInit(){this.layerGroupsSubscription=this.layersSvc.getLayerGroups().subscribe(e=>{this.layergroups=e})}isLayerGroup(e){return e instanceof x}ngOnDestroy(){this.layerGroupsSubscription.unsubscribe()}drop(e){let i=this.layergroups,t=i.length,o=e.container.data,p=o.length,C,B;if(t===p){let N=t-e.previousIndex-1,M=t-e.currentIndex-1;C=N,B=M}else{let N=o[e.currentIndex],M=i.findIndex(W=>W.id===e.item.data.id),Q=i.findIndex(W=>W.id===N.id);e.previousIndex===e.currentIndex&&(Q=M),C=M,B=Q}this.layersSvc.arrayMove(this.layergroups,C,B),this.layersSvc.setLayerGroups(this.layergroups)}checkBaselayer(e,i){return!!(e.filtertype==="Baselayers"||i&&i.filtertype==="Baselayers")}checkClassHide(e){return!(e?.cssClass?.includes("hide")||!1)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=k({type:n,selectors:[["ukis-layer-control"]],inputs:{layersSvc:"layersSvc",mapStateSvc:"mapStateSvc",layerfilter:"layerfilter",layersSort:"layersSort",groupLayersSort:"groupLayersSort"},decls:7,vars:12,consts:[["cdkDropList","",3,"cdkDropListDropped","cdkDropListDisabled","cdkDropListData"],["cdkDragLockAxis","y","cdkDrag","",1,"list-item",3,"cdkDragData"],[3,"layersSvc","mapState","group","layerGroups","groupSort","groupLayersSort"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group","sorting"],["cdkDragHandle","",1,"move-item"]],template:function(i,t){i&1&&(l(0,"div",0),w(1,"itemsfilter"),w(2,"reverse"),_("cdkDropListDropped",function(p){return t.drop(p)}),T(3,gi,3,5,"div",1,I),w(5,"itemsfilter"),w(6,"reverse"),c()),i&2&&(y("cdkDropListDisabled",!t.layersSort)("cdkDropListData",z(2,5,Z(1,2,t.layergroups,t.checkClassHide))),a(3),V(z(6,10,Z(5,7,t.layergroups,t.checkClassHide))))},dependencies:[Ce,he,Se,fe,U,we,Y],styles:[".list-item[_ngcontent-%COMP%]{cursor:pointer}.move-item[_ngcontent-%COMP%]{cursor:move}.cdk-drop-list-disabled[_ngcontent-%COMP%]   .move-item[_ngcontent-%COMP%]{cursor:pointer}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;align-items:center;padding:15px 10px;box-sizing:border-box;border-radius:2px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;overflow:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}}return n})();function xi(n,r){if(n&1&&v(0,"ukis-layerentry-group",1),n&2){let e=s().$implicit,i=s();y("layersSvc",i.layersSvc)("mapState",i.mapStateSvc)("group",e)("layerGroups",i.layergroups)}}function vi(n,r){if(n&1&&v(0,"ukis-layerentry",2),n&2){let e=s().$implicit,i=s();y("layerGroups",i.layergroups)("expanded",!1)("layersSvc",i.layersSvc)("mapState",i.mapStateSvc)("layer",e)("group",null)}}function bi(n,r){if(n&1&&(l(0,"div",0),h(1,xi,1,4,"ukis-layerentry-group",1)(2,vi,1,6,"ukis-layerentry",2),c()),n&2){let e=r.$implicit,i=s();a(),d(i.isLayerGroup(e)?1:-1),a(),d(i.isLayerGroup(e)?-1:2)}}var so=(()=>{class n{constructor(){this.layergroups=[]}ngOnInit(){this.layerGroupsSubscription=this.layersSvc.getLayerGroups().subscribe(e=>{this.layergroups=e.filter(i=>i.filtertype==="Baselayers")})}isLayerGroup(e){return e instanceof x}ngOnDestroy(){this.layerGroupsSubscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=k({type:n,selectors:[["ukis-base-layer-control"]],inputs:{layersSvc:"layersSvc",mapStateSvc:"mapStateSvc"},decls:3,vars:2,consts:[[1,"list-item"],[3,"layersSvc","mapState","group","layerGroups"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group"]],template:function(i,t){i&1&&(T(0,bi,3,2,"div",0,I),w(2,"reverse")),i&2&&V(z(2,0,t.layergroups))},dependencies:[Se,U,Y],encapsulation:2})}}return n})();export{Li as a,ht as b,at as c,wi as d,Si as e,ki as f,Ii as g,Ct as h,gt as i,Ti as j,g as k,H as l,lt as m,ct as n,pt as o,x as p,K as q,X as r,Fi as s,O as t,Ui as u,eo as v,so as w};
