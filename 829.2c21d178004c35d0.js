(self.webpackChunkdemo_maps=self.webpackChunkdemo_maps||[]).push([[829],{9176:(jt,ht)=>{ht.read=function(a,z,F,k,G){var Z,A,S=8*G-k-1,P=(1<<S)-1,v=P>>1,f=-7,u=F?G-1:0,c=F?-1:1,r=a[z+u];for(u+=c,Z=r&(1<<-f)-1,r>>=-f,f+=S;f>0;Z=256*Z+a[z+u],u+=c,f-=8);for(A=Z&(1<<-f)-1,Z>>=-f,f+=k;f>0;A=256*A+a[z+u],u+=c,f-=8);if(0===Z)Z=1-v;else{if(Z===P)return A?NaN:1/0*(r?-1:1);A+=Math.pow(2,k),Z-=v}return(r?-1:1)*A*Math.pow(2,Z-k)},ht.write=function(a,z,F,k,G,Z){var A,S,P,v=8*Z-G-1,f=(1<<v)-1,u=f>>1,c=23===G?Math.pow(2,-24)-Math.pow(2,-77):0,r=k?0:Z-1,d=k?1:-1,e=z<0||0===z&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?(S=isNaN(z)?1:0,A=f):(A=Math.floor(Math.log(z)/Math.LN2),z*(P=Math.pow(2,-A))<1&&(A--,P*=2),(z+=A+u>=1?c/P:c*Math.pow(2,1-u))*P>=2&&(A++,P/=2),A+u>=f?(S=0,A=f):A+u>=1?(S=(z*P-1)*Math.pow(2,G),A+=u):(S=z*Math.pow(2,u-1)*Math.pow(2,G),A=0));G>=8;a[F+r]=255&S,r+=d,S/=256,G-=8);for(A=A<<G|S,v+=G;v>0;a[F+r]=255&A,r+=d,A/=256,v-=8);a[F+r-d]|=128*e}},1492:(jt,ht,a)=>{"use strict";jt.exports=F;var z=a(9176);function F(b){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(b)?b:new Uint8Array(b||0),this.pos=0,this.type=0,this.length=this.buf.length}F.Varint=0,F.Fixed64=1,F.Bytes=2,F.Fixed32=5;var k=4294967296,G=1/k,A=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function P(b){return b.type===F.Bytes?b.readVarint()+b.pos:b.pos+1}function r(b,L,w){var M=L<=16383?1:L<=2097151?2:L<=268435455?3:Math.floor(Math.log(L)/(7*Math.LN2));w.realloc(M);for(var C=w.pos-1;C>=b;C--)w.buf[C+M]=w.buf[C]}function d(b,L){for(var w=0;w<b.length;w++)L.writeVarint(b[w])}function e(b,L){for(var w=0;w<b.length;w++)L.writeSVarint(b[w])}function l(b,L){for(var w=0;w<b.length;w++)L.writeFloat(b[w])}function m(b,L){for(var w=0;w<b.length;w++)L.writeDouble(b[w])}function s(b,L){for(var w=0;w<b.length;w++)L.writeBoolean(b[w])}function g(b,L){for(var w=0;w<b.length;w++)L.writeFixed32(b[w])}function _(b,L){for(var w=0;w<b.length;w++)L.writeSFixed32(b[w])}function y(b,L){for(var w=0;w<b.length;w++)L.writeFixed64(b[w])}function I(b,L){for(var w=0;w<b.length;w++)L.writeSFixed64(b[w])}function O(b,L){return(b[L]|b[L+1]<<8|b[L+2]<<16)+16777216*b[L+3]}function E(b,L,w){b[w]=L,b[w+1]=L>>>8,b[w+2]=L>>>16,b[w+3]=L>>>24}function R(b,L){return(b[L]|b[L+1]<<8|b[L+2]<<16)+(b[L+3]<<24)}F.prototype={destroy:function(){this.buf=null},readFields:function(b,L,w){for(w=w||this.length;this.pos<w;){var M=this.readVarint(),C=M>>3,D=this.pos;this.type=7&M,b(C,L,this),this.pos===D&&this.skip(M)}return L},readMessage:function(b,L){return this.readFields(b,L,this.readVarint()+this.pos)},readFixed32:function(){var b=O(this.buf,this.pos);return this.pos+=4,b},readSFixed32:function(){var b=R(this.buf,this.pos);return this.pos+=4,b},readFixed64:function(){var b=O(this.buf,this.pos)+O(this.buf,this.pos+4)*k;return this.pos+=8,b},readSFixed64:function(){var b=O(this.buf,this.pos)+R(this.buf,this.pos+4)*k;return this.pos+=8,b},readFloat:function(){var b=z.read(this.buf,this.pos,!0,23,4);return this.pos+=4,b},readDouble:function(){var b=z.read(this.buf,this.pos,!0,52,8);return this.pos+=8,b},readVarint:function(b){var w,M,L=this.buf;return w=127&(M=L[this.pos++]),M<128||(w|=(127&(M=L[this.pos++]))<<7,M<128)||(w|=(127&(M=L[this.pos++]))<<14,M<128)||(w|=(127&(M=L[this.pos++]))<<21,M<128)?w:function S(b,L,w){var C,D,M=w.buf;if(C=(112&(D=M[w.pos++]))>>4,D<128||(C|=(127&(D=M[w.pos++]))<<3,D<128)||(C|=(127&(D=M[w.pos++]))<<10,D<128)||(C|=(127&(D=M[w.pos++]))<<17,D<128)||(C|=(127&(D=M[w.pos++]))<<24,D<128)||(C|=(1&(D=M[w.pos++]))<<31,D<128))return function v(b,L,w){return w?4294967296*L+(b>>>0):4294967296*(L>>>0)+(b>>>0)}(b,C,L);throw new Error("Expected varint not more than 10 bytes")}(w|=(15&(M=L[this.pos]))<<28,b,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var b=this.readVarint();return b%2==1?(b+1)/-2:b/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var b=this.readVarint()+this.pos,L=this.pos;return this.pos=b,b-L>=12&&A?function K(b,L,w){return A.decode(b.subarray(L,w))}(this.buf,L,b):function N(b,L,w){for(var M="",C=L;C<w;){var V,at,ut,D=b[C],Y=null,st=D>239?4:D>223?3:D>191?2:1;if(C+st>w)break;1===st?D<128&&(Y=D):2===st?128==(192&(V=b[C+1]))&&(Y=(31&D)<<6|63&V)<=127&&(Y=null):3===st?(at=b[C+2],128==(192&(V=b[C+1]))&&128==(192&at)&&((Y=(15&D)<<12|(63&V)<<6|63&at)<=2047||Y>=55296&&Y<=57343)&&(Y=null)):4===st&&(at=b[C+2],ut=b[C+3],128==(192&(V=b[C+1]))&&128==(192&at)&&128==(192&ut)&&((Y=(15&D)<<18|(63&V)<<12|(63&at)<<6|63&ut)<=65535||Y>=1114112)&&(Y=null)),null===Y?(Y=65533,st=1):Y>65535&&(Y-=65536,M+=String.fromCharCode(Y>>>10&1023|55296),Y=56320|1023&Y),M+=String.fromCharCode(Y),C+=st}return M}(this.buf,L,b)},readBytes:function(){var b=this.readVarint()+this.pos,L=this.buf.subarray(this.pos,b);return this.pos=b,L},readPackedVarint:function(b,L){if(this.type!==F.Bytes)return b.push(this.readVarint(L));var w=P(this);for(b=b||[];this.pos<w;)b.push(this.readVarint(L));return b},readPackedSVarint:function(b){if(this.type!==F.Bytes)return b.push(this.readSVarint());var L=P(this);for(b=b||[];this.pos<L;)b.push(this.readSVarint());return b},readPackedBoolean:function(b){if(this.type!==F.Bytes)return b.push(this.readBoolean());var L=P(this);for(b=b||[];this.pos<L;)b.push(this.readBoolean());return b},readPackedFloat:function(b){if(this.type!==F.Bytes)return b.push(this.readFloat());var L=P(this);for(b=b||[];this.pos<L;)b.push(this.readFloat());return b},readPackedDouble:function(b){if(this.type!==F.Bytes)return b.push(this.readDouble());var L=P(this);for(b=b||[];this.pos<L;)b.push(this.readDouble());return b},readPackedFixed32:function(b){if(this.type!==F.Bytes)return b.push(this.readFixed32());var L=P(this);for(b=b||[];this.pos<L;)b.push(this.readFixed32());return b},readPackedSFixed32:function(b){if(this.type!==F.Bytes)return b.push(this.readSFixed32());var L=P(this);for(b=b||[];this.pos<L;)b.push(this.readSFixed32());return b},readPackedFixed64:function(b){if(this.type!==F.Bytes)return b.push(this.readFixed64());var L=P(this);for(b=b||[];this.pos<L;)b.push(this.readFixed64());return b},readPackedSFixed64:function(b){if(this.type!==F.Bytes)return b.push(this.readSFixed64());var L=P(this);for(b=b||[];this.pos<L;)b.push(this.readSFixed64());return b},skip:function(b){var L=7&b;if(L===F.Varint)for(;this.buf[this.pos++]>127;);else if(L===F.Bytes)this.pos=this.readVarint()+this.pos;else if(L===F.Fixed32)this.pos+=4;else{if(L!==F.Fixed64)throw new Error("Unimplemented type: "+L);this.pos+=8}},writeTag:function(b,L){this.writeVarint(b<<3|L)},realloc:function(b){for(var L=this.length||16;L<this.pos+b;)L*=2;if(L!==this.length){var w=new Uint8Array(L);w.set(this.buf),this.buf=w,this.length=L}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(b){this.realloc(4),E(this.buf,b,this.pos),this.pos+=4},writeSFixed32:function(b){this.realloc(4),E(this.buf,b,this.pos),this.pos+=4},writeFixed64:function(b){this.realloc(8),E(this.buf,-1&b,this.pos),E(this.buf,Math.floor(b*G),this.pos+4),this.pos+=8},writeSFixed64:function(b){this.realloc(8),E(this.buf,-1&b,this.pos),E(this.buf,Math.floor(b*G),this.pos+4),this.pos+=8},writeVarint:function(b){(b=+b||0)>268435455||b<0?function f(b,L){var w,M;if(b>=0?(w=b%4294967296|0,M=b/4294967296|0):(M=~(-b/4294967296),4294967295^(w=~(-b%4294967296))?w=w+1|0:(w=0,M=M+1|0)),b>=0x10000000000000000||b<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");L.realloc(10),function u(b,L,w){w.buf[w.pos++]=127&b|128,b>>>=7,w.buf[w.pos++]=127&b|128,b>>>=7,w.buf[w.pos++]=127&b|128,b>>>=7,w.buf[w.pos++]=127&b|128,w.buf[w.pos]=127&(b>>>=7)}(w,0,L),function c(b,L){var w=(7&b)<<4;L.buf[L.pos++]|=w|((b>>>=3)?128:0),b&&(L.buf[L.pos++]=127&b|((b>>>=7)?128:0),b&&(L.buf[L.pos++]=127&b|((b>>>=7)?128:0),b&&(L.buf[L.pos++]=127&b|((b>>>=7)?128:0),b&&(L.buf[L.pos++]=127&b|((b>>>=7)?128:0),b&&(L.buf[L.pos++]=127&b)))))}(M,L)}(b,this):(this.realloc(4),this.buf[this.pos++]=127&b|(b>127?128:0),!(b<=127)&&(this.buf[this.pos++]=127&(b>>>=7)|(b>127?128:0),!(b<=127)&&(this.buf[this.pos++]=127&(b>>>=7)|(b>127?128:0),!(b<=127)&&(this.buf[this.pos++]=b>>>7&127))))},writeSVarint:function(b){this.writeVarint(b<0?2*-b-1:2*b)},writeBoolean:function(b){this.writeVarint(!!b)},writeString:function(b){b=String(b),this.realloc(4*b.length),this.pos++;var L=this.pos;this.pos=function rt(b,L,w){for(var C,D,M=0;M<L.length;M++){if((C=L.charCodeAt(M))>55295&&C<57344){if(!D){C>56319||M+1===L.length?(b[w++]=239,b[w++]=191,b[w++]=189):D=C;continue}if(C<56320){b[w++]=239,b[w++]=191,b[w++]=189,D=C;continue}C=D-55296<<10|C-56320|65536,D=null}else D&&(b[w++]=239,b[w++]=191,b[w++]=189,D=null);C<128?b[w++]=C:(C<2048?b[w++]=C>>6|192:(C<65536?b[w++]=C>>12|224:(b[w++]=C>>18|240,b[w++]=C>>12&63|128),b[w++]=C>>6&63|128),b[w++]=63&C|128)}return w}(this.buf,b,this.pos);var w=this.pos-L;w>=128&&r(L,w,this),this.pos=L-1,this.writeVarint(w),this.pos+=w},writeFloat:function(b){this.realloc(4),z.write(this.buf,b,this.pos,!0,23,4),this.pos+=4},writeDouble:function(b){this.realloc(8),z.write(this.buf,b,this.pos,!0,52,8),this.pos+=8},writeBytes:function(b){var L=b.length;this.writeVarint(L),this.realloc(L);for(var w=0;w<L;w++)this.buf[this.pos++]=b[w]},writeRawMessage:function(b,L){this.pos++;var w=this.pos;b(L,this);var M=this.pos-w;M>=128&&r(w,M,this),this.pos=w-1,this.writeVarint(M),this.pos+=M},writeMessage:function(b,L,w){this.writeTag(b,F.Bytes),this.writeRawMessage(L,w)},writePackedVarint:function(b,L){L.length&&this.writeMessage(b,d,L)},writePackedSVarint:function(b,L){L.length&&this.writeMessage(b,e,L)},writePackedBoolean:function(b,L){L.length&&this.writeMessage(b,s,L)},writePackedFloat:function(b,L){L.length&&this.writeMessage(b,l,L)},writePackedDouble:function(b,L){L.length&&this.writeMessage(b,m,L)},writePackedFixed32:function(b,L){L.length&&this.writeMessage(b,g,L)},writePackedSFixed32:function(b,L){L.length&&this.writeMessage(b,_,L)},writePackedFixed64:function(b,L){L.length&&this.writeMessage(b,y,L)},writePackedSFixed64:function(b,L){L.length&&this.writeMessage(b,I,L)},writeBytesField:function(b,L){this.writeTag(b,F.Bytes),this.writeBytes(L)},writeFixed32Field:function(b,L){this.writeTag(b,F.Fixed32),this.writeFixed32(L)},writeSFixed32Field:function(b,L){this.writeTag(b,F.Fixed32),this.writeSFixed32(L)},writeFixed64Field:function(b,L){this.writeTag(b,F.Fixed64),this.writeFixed64(L)},writeSFixed64Field:function(b,L){this.writeTag(b,F.Fixed64),this.writeSFixed64(L)},writeVarintField:function(b,L){this.writeTag(b,F.Varint),this.writeVarint(L)},writeSVarintField:function(b,L){this.writeTag(b,F.Varint),this.writeSVarint(L)},writeStringField:function(b,L){this.writeTag(b,F.Bytes),this.writeString(L)},writeFloatField:function(b,L){this.writeTag(b,F.Fixed32),this.writeFloat(L)},writeDoubleField:function(b,L){this.writeTag(b,F.Fixed64),this.writeDouble(L)},writeBooleanField:function(b,L){this.writeVarintField(b,!!L)}}},5661:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>we});var F=1,k=2,G=3,A=5,S=6378137,P=6356752.314,v=.0066943799901413165,f=484813681109536e-20,u=Math.PI/2,e=1e-10,l=.017453292519943295,m=57.29577951308232,s=Math.PI/4,g=2*Math.PI,_=3.14159265359,y={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const I={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var O=/[\s_\-\/\(\)]/g;function E(t,h){if(t[h])return t[h];for(var X,p=Object.keys(t),B=h.toLowerCase().replace(O,""),j=-1;++j<p.length;)if((X=p[j]).toLowerCase().replace(O,"")===B)return t[X]}function R(t){var B,j,X,h={},p=t.split("+").map(function($){return $.trim()}).filter(function($){return $}).reduce(function($,ct){var Mt=ct.split("=");return Mt.push(!0),$[Mt[0].toLowerCase()]=Mt[1],$},{}),it={proj:"projName",datum:"datumCode",rf:function($){h.rf=parseFloat($)},lat_0:function($){h.lat0=$*l},lat_1:function($){h.lat1=$*l},lat_2:function($){h.lat2=$*l},lat_ts:function($){h.lat_ts=$*l},lon_0:function($){h.long0=$*l},lon_1:function($){h.long1=$*l},lon_2:function($){h.long2=$*l},alpha:function($){h.alpha=parseFloat($)*l},gamma:function($){h.rectified_grid_angle=parseFloat($)},lonc:function($){h.longc=$*l},x_0:function($){h.x0=parseFloat($)},y_0:function($){h.y0=parseFloat($)},k_0:function($){h.k0=parseFloat($)},k:function($){h.k0=parseFloat($)},a:function($){h.a=parseFloat($)},b:function($){h.b=parseFloat($)},r_a:function(){h.R_A=!0},zone:function($){h.zone=parseInt($,10)},south:function(){h.utmSouth=!0},towgs84:function($){h.datum_params=$.split(",").map(function(ct){return parseFloat(ct)})},to_meter:function($){h.to_meter=parseFloat($)},units:function($){h.units=$;var ct=E(I,$);ct&&(h.to_meter=ct.to_meter)},from_greenwich:function($){h.from_greenwich=$*l},pm:function($){var ct=E(y,$);h.from_greenwich=(ct||parseFloat($))*l},nadgrids:function($){"@null"===$?h.datumCode="none":h.nadgrids=$},axis:function($){var ct="ewnsud";3===$.length&&-1!==ct.indexOf($.substr(0,1))&&-1!==ct.indexOf($.substr(1,1))&&-1!==ct.indexOf($.substr(2,1))&&(h.axis=$)},approx:function(){h.approx=!0}};for(B in p)j=p[B],B in it?"function"==typeof(X=it[B])?X(j):h[X]=j:h[B]=j;return"string"==typeof h.datumCode&&"WGS84"!==h.datumCode&&(h.datumCode=h.datumCode.toLowerCase()),h}const N=function ut(t){return new at(t).output()};var K=1,C=/\s/,D=/[A-Za-z]/,Y=/[A-Za-z84_]/,st=/[,\]]/,V=/[\d\.E\-\+]/;function at(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=K}function Pt(t,h,p){Array.isArray(h)&&(p.unshift(h),h=null);var j=p.reduce(function(X,it){return vt(it,X),X},h?{}:t);h&&(t[h]=j)}function vt(t,h){if(Array.isArray(t)){var p=t.shift();if("PARAMETER"===p&&(p=t.shift()),1===t.length)return Array.isArray(t[0])?(h[p]={},void vt(t[0],h[p])):void(h[p]=t[0]);if(t.length)if("TOWGS84"!==p){if("AXIS"===p)return p in h||(h[p]=[]),void h[p].push(t);var B;switch(Array.isArray(p)||(h[p]={}),p){case"UNIT":case"PRIMEM":case"VERT_DATUM":return h[p]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&vt(t[2],h[p]));case"SPHEROID":case"ELLIPSOID":return h[p]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&vt(t[3],h[p]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Pt(h,p,t);default:for(B=-1;++B<t.length;)if(!Array.isArray(t[B]))return vt(t,h[p]);return Pt(h,p,t)}}else h[p]=t;else h[p]=!0}else h[t]=!0}at.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;C.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case K:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},at.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(st.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},at.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=K)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=K,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},at.prototype.number=function(t){if(!V.test(t)){if(st.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},at.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},at.prototype.keyword=function(t){if(Y.test(t))this.word+=t;else{if("["===t){var h=[];return h.push(this.word),this.level++,null===this.root?this.root=h:this.currentObject.push(h),this.stack.push(this.currentObject),this.currentObject=h,void(this.state=K)}if(!st.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},at.prototype.neutral=function(t){if(D.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(V.test(t))return this.word=t,void(this.state=3);if(!st.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},at.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Ot=.017453292519943295;function Gt(t){return t*Ot}function qt(t){var h=N(t),p=h.shift(),B=h.shift();h.unshift(["name",B]),h.unshift(["type",p]);var j={};return vt(h,j),function zt(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):t.projName="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION,t.AXIS){for(var h="",p=0,B=t.AXIS.length;p<B;++p){var j=[t.AXIS[p][0].toLowerCase(),t.AXIS[p][1].toLowerCase()];-1!==j[0].indexOf("north")||("y"===j[0]||"lat"===j[0])&&"north"===j[1]?h+="n":-1!==j[0].indexOf("south")||("y"===j[0]||"lat"===j[0])&&"south"===j[1]?h+="s":-1!==j[0].indexOf("east")||("x"===j[0]||"lon"===j[0])&&"east"===j[1]?h+="e":(-1!==j[0].indexOf("west")||("x"===j[0]||"lon"===j[0])&&"west"===j[1])&&(h+="w")}2===h.length&&(h+="u"),3===h.length&&(t.axis=h)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var X=t.GEOGCS;function it(Mt){return Mt*(t.to_meter||1)}"GEOGCS"===t.type&&(X=t),X&&(t.datumCode=X.DATUM?X.DATUM.name.toLowerCase():X.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),("wgs_1984"===t.datumCode||"world_geodetic_system_1984"===t.datumCode)&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),X.DATUM&&X.DATUM.SPHEROID&&(t.ellps=X.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=X.DATUM.SPHEROID.a,t.rf=parseFloat(X.DATUM.SPHEROID.rf,10)),X.DATUM&&X.DATUM.TOWGS84&&(t.datum_params=X.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Gt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Gt],["x0","false_easting",it],["y0","false_northing",it],["long0","central_meridian",Gt],["lat0","latitude_of_origin",Gt],["lat0","standard_parallel_1",Gt],["lat1","standard_parallel_1",Gt],["lat2","standard_parallel_2",Gt],["azimuth","Azimuth"],["alpha","azimuth",Gt],["srsCode","name"]].forEach(function(Mt){return function At(t,h){var p=h[0],B=h[1];!(p in t)&&B in t&&(t[p]=t[B],3===h.length&&(t[p]=h[2](t[p])))}(t,Mt)}),!t.long0&&t.longc&&("Albers_Conic_Equal_Area"===t.projName||"Lambert_Azimuthal_Equal_Area"===t.projName)&&(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=Gt(t.lat0>0?90:-90)):(t.lat0=Gt(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(j),j}function Xt(t){var h=this;if(2===arguments.length){var p=arguments[1];Xt[t]="string"==typeof p?"+"===p.charAt(0)?R(arguments[1]):qt(arguments[1]):p}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(B){Array.isArray(B)?Xt.apply(h,B):Xt(B)});if("string"==typeof t){if(t in Xt)return Xt[t]}else"EPSG"in t?Xt["EPSG:"+t.EPSG]=t:"ESRI"in t?Xt["ESRI:"+t.ESRI]=t:"IAU2000"in t?Xt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function z(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Xt);const fe=Xt;var Ce=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Ct=["3857","900913","3785","102113"];function xt(t,h){var p,B;if(t=t||{},!h)return t;for(B in h)void 0!==(p=h[B])&&(t[B]=p);return t}function Ft(t,h,p){var B=t*h;return p/Math.sqrt(1-B*B)}function Wt(t){return t<0?-1:1}function Bt(t){return Math.abs(t)<=_?t:t-Wt(t)*g}function ue(t,h,p){var B=t*p;return B=Math.pow((1-B)/(1+B),.5*t),Math.tan(.5*(u-h))/B}function ge(t,h){for(var B,j,p=.5*t,X=u-2*Math.atan(h),it=0;it<=15;it++)if(B=t*Math.sin(X),X+=j=u-2*Math.atan(h*Math.pow((1-B)/(1+B),p))-X,Math.abs(j)<=1e-10)return X;return-9999}function tt(t){return t}var Et=[{init:function Le(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):Ft(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function Me(t){var B,j,h=t.x,p=t.y;if(p*m>90&&p*m<-90&&h*m>180&&h*m<-180)return null;if(Math.abs(Math.abs(p)-u)<=e)return null;if(this.sphere)B=this.x0+this.a*this.k0*Bt(h-this.long0),j=this.y0+this.a*this.k0*Math.log(Math.tan(s+.5*p));else{var X=Math.sin(p),it=ue(this.e,p,X);B=this.x0+this.a*this.k0*Bt(h-this.long0),j=this.y0-this.a*this.k0*Math.log(it)}return t.x=B,t.y=j,t},inverse:function nt(t){var B,j,h=t.x-this.x0,p=t.y-this.y0;if(this.sphere)j=u-2*Math.atan(Math.exp(-p/(this.a*this.k0)));else{var X=Math.exp(-p/(this.a*this.k0));if(-9999===(j=ge(this.e,X)))return null}return B=Bt(this.long0+h/(this.a*this.k0)),t.x=B,t.y=j,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function W(){},forward:tt,inverse:tt,names:["longlat","identity"]}],It={},wt=[];function Jt(t,h){var p=wt.length;return t.names?(wt[p]=t,t.names.forEach(function(B){It[B.toLowerCase()]=p}),this):(console.log(h),!0)}const oe={start:function ye(){Et.forEach(Jt)},add:Jt,get:function ne(t){if(!t)return!1;var h=t.toLowerCase();return typeof It[h]<"u"&&wt[It[h]]?wt[It[h]]:void 0}};var ie={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Ge=ie.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ie.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Ue={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var si={};function q(t){if(0===t.length)return null;var h="@"===t[0];return h&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!h,grid:null,isNull:!0}:{name:t,mandatory:!h,grid:si[t]||null,isNull:!1}}function J(t){return t/3600*Math.PI/180}function St(t,h,p){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(h,p)))}function te(t){return t.map(function(h){return[J(h.longitudeShift),J(h.latitudeShift)]})}function ve(t,h,p){return{name:St(t,h+8,h+16).trim(),parent:St(t,h+24,h+24+8).trim(),lowerLatitude:t.getFloat64(h+72,p),upperLatitude:t.getFloat64(h+88,p),lowerLongitude:t.getFloat64(h+104,p),upperLongitude:t.getFloat64(h+120,p),latitudeInterval:t.getFloat64(h+136,p),longitudeInterval:t.getFloat64(h+152,p),gridNodeCount:t.getInt32(h+168,p)}}function Te(t,h,p,B){for(var j=h+176,it=[],$=0;$<p.gridNodeCount;$++){var ct={latitudeShift:t.getFloat32(j+16*$,B),longitudeShift:t.getFloat32(j+16*$+4,B),latitudeAccuracy:t.getFloat32(j+16*$+8,B),longitudeAccuracy:t.getFloat32(j+16*$+12,B)};it.push(ct)}return it}function Se(t,h){if(!(this instanceof Se))return new Se(t);h=h||function(Mt){if(Mt)throw Mt};var p=function Yt(t){if(!function he(t){return"string"==typeof t}(t))return t;if(function ce(t){return t in fe}(t))return fe[t];if(function ft(t){return Ce.some(function(h){return t.indexOf(h)>-1})}(t)){var h=qt(t);if(function Zt(t){var h=E(t,"authority");if(h){var p=E(h,"epsg");return p&&Ct.indexOf(p)>-1}}(h))return fe["EPSG:3857"];var p=function Vt(t){var h=E(t,"extension");if(h)return E(h,"proj4")}(h);return p?R(p):h}return function pe(t){return"+"===t[0]}(t)?R(t):void 0}(t);if("object"==typeof p){var B=Se.projections.get(p.projName);if(B){if(p.datumCode&&"none"!==p.datumCode){var j=E(Ue,p.datumCode);j&&(p.datum_params=p.datum_params||(j.towgs84?j.towgs84.split(","):null),p.ellps=j.ellipse,p.datumName=j.datumName?j.datumName:p.datumCode)}p.k0=p.k0||1,p.axis=p.axis||"enu",p.ellps=p.ellps||"wgs84",p.lat1=p.lat1||p.lat0;var X=function Ne(t,h,p,B,j){if(!t){var X=E(ie,B);X||(X=Ge),t=X.a,h=X.b,p=X.rf}return p&&!h&&(h=(1-1/p)*t),(0===p||Math.abs(t-h)<e)&&(j=!0,h=t),{a:t,b:h,rf:p,sphere:j}}(p.a,p.b,p.rf,p.ellps,p.sphere),it=function Xe(t,h,p,B){var j=t*t,X=h*h,it=(j-X)/j,$=0;return B?(j=(t*=1-it*(.16666666666666666+it*(.04722222222222222+.022156084656084655*it)))*t,it=0):$=Math.sqrt(it),{es:it,e:$,ep2:(j-X)/X}}(X.a,X.b,0,p.R_A),$=function ei(t){return void 0===t?null:t.split(",").map(q)}(p.nadgrids),ct=p.datum||function Ve(t,h,p,B,j,X,it){var $={};return $.datum_type=void 0===t||"none"===t?A:4,h&&($.datum_params=h.map(parseFloat),(0!==$.datum_params[0]||0!==$.datum_params[1]||0!==$.datum_params[2])&&($.datum_type=F),$.datum_params.length>3&&(0!==$.datum_params[3]||0!==$.datum_params[4]||0!==$.datum_params[5]||0!==$.datum_params[6])&&($.datum_type=k,$.datum_params[3]*=f,$.datum_params[4]*=f,$.datum_params[5]*=f,$.datum_params[6]=$.datum_params[6]/1e6+1)),it&&($.datum_type=G,$.grids=it),$.a=p,$.b=B,$.es=j,$.ep2=X,$}(p.datumCode,p.datum_params,X.a,X.b,it.es,it.ep2,$);xt(this,p),xt(this,B),this.a=X.a,this.b=X.b,this.rf=X.rf,this.sphere=X.sphere,this.es=it.es,this.e=it.e,this.ep2=it.ep2,this.datum=ct,this.init(),h(null,this)}else h(t)}else h(t)}(Se.projections=oe).start();const Fe=Se;function ke(t,h,p){var it,$,Mt,B=t.x,j=t.y,X=t.z?t.z:0;if(j<-u&&j>-1.001*u)j=-u;else if(j>u&&j<1.001*u)j=u;else{if(j<-u)return{x:-1/0,y:-1/0,z:t.z};if(j>u)return{x:1/0,y:1/0,z:t.z}}return B>Math.PI&&(B-=2*Math.PI),$=Math.sin(j),Mt=Math.cos(j),{x:((it=p/Math.sqrt(1-h*($*$)))+X)*Mt*Math.cos(B),y:(it+X)*Mt*Math.sin(B),z:(it*(1-h)+X)*$}}function ni(t,h,p,B){var $,ct,Mt,Ut,Rt,kt,se,re,ae,_e,Pe,Ze,We,Oe,He,ze=t.x,me=t.y,Ke=t.z?t.z:0;if($=Math.sqrt(ze*ze+me*me),ct=Math.sqrt(ze*ze+me*me+Ke*Ke),$/p<1e-12){if(Oe=0,ct/p<1e-12)return He=-B,{x:t.x,y:t.y,z:t.z}}else Oe=Math.atan2(me,ze);Mt=Ke/ct,re=(Ut=$/ct)*(1-h)*(Rt=1/Math.sqrt(1-h*(2-h)*Ut*Ut)),ae=Mt*Rt,We=0;do{We++,kt=h*(se=p/Math.sqrt(1-h*ae*ae))/(se+(He=$*re+Ke*ae-se*(1-h*ae*ae))),Ze=(Pe=Mt*(Rt=1/Math.sqrt(1-kt*(2-kt)*Ut*Ut)))*re-(_e=Ut*(1-kt)*Rt)*ae,re=_e,ae=Pe}while(Ze*Ze>1e-24&&We<30);return{x:Oe,y:Math.atan(Pe/Math.abs(_e)),z:He}}function pi(t){return t===F||t===k}function Ii(t,h,p){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var B={x:-p.x,y:p.y},j={x:Number.NaN,y:Number.NaN},it=[];t:for(var $=0;$<t.grids.length;$++){var ct=t.grids[$];if(it.push(ct.name),ct.isNull){j=B;break}if(null!==ct.grid)for(var Mt=ct.grid.subgrids,Ut=0,Rt=Mt.length;Ut<Rt;Ut++){var kt=Mt[Ut],se=(Math.abs(kt.del[1])+Math.abs(kt.del[0]))/1e4;if(!(kt.ll[1]-se>B.y||kt.ll[0]-se>B.x||kt.ll[1]+(kt.lim[1]-1)*kt.del[1]+se<B.y||kt.ll[0]+(kt.lim[0]-1)*kt.del[0]+se<B.x||(j=vi(B,h,kt),isNaN(j.x))))break t}else if(ct.mandatory)return console.log("Unable to find mandatory grid '"+ct.name+"'"),-1}return isNaN(j.x)?(console.log("Failed to find a grid shift table for location '"+-B.x*m+" "+B.y*m+" tried: '"+it+"'"),-1):(p.x=-j.x,p.y=j.y,0)}function vi(t,h,p){var B={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return B;var j={x:t.x,y:t.y};j.x-=p.ll[0],j.y-=p.ll[1],j.x=Bt(j.x-Math.PI)+Math.PI;var X=ci(j,p);if(h){if(isNaN(X.x))return B;X.x=j.x-X.x,X.y=j.y-X.y;var ct,Mt,it=9;do{if(Mt=ci(X,p),isNaN(Mt.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}X.x+=(ct={x:j.x-(Mt.x+X.x),y:j.y-(Mt.y+X.y)}).x,X.y+=ct.y}while(it--&&Math.abs(ct.x)>1e-12&&Math.abs(ct.y)>1e-12);if(it<0)return console.log("Inverse grid shift iterator failed to converge."),B;B.x=Bt(X.x+p.ll[0]),B.y=X.y+p.ll[1]}else isNaN(X.x)||(B.x=t.x+X.x,B.y=t.y+X.y);return B}function ci(t,h){var it,p={x:t.x/h.del[0],y:t.y/h.del[1]},B_x=Math.floor(p.x),B_y=Math.floor(p.y),j_x=p.x-1*B_x,j_y=p.y-1*B_y,X={x:Number.NaN,y:Number.NaN};if(B_x<0||B_x>=h.lim[0]||B_y<0||B_y>=h.lim[1])return X;var $_x=h.cvs[it=B_y*h.lim[0]+B_x][0],$_y=h.cvs[it][1];it++;var ct_x=h.cvs[it][0],ct_y=h.cvs[it][1],Mt_x=h.cvs[it+=h.lim[0]][0],Mt_y=h.cvs[it][1];it--;var Ut_y=h.cvs[it][1],Rt=j_x*j_y,kt=j_x*(1-j_y),se=(1-j_x)*(1-j_y),re=(1-j_x)*j_y;return X.x=se*$_x+kt*ct_x+re*h.cvs[it][0]+Rt*Mt_x,X.y=se*$_y+kt*ct_y+re*Ut_y+Rt*Mt_y,X}function yi(t,h,p){var it,$,ct,B=p.x,j=p.y,X=p.z||0,Mt={};for(ct=0;ct<3;ct++)if(!h||2!==ct||void 0!==p.z)switch(0===ct?(it=B,$=-1!=="ew".indexOf(t.axis[ct])?"x":"y"):1===ct?(it=j,$=-1!=="ns".indexOf(t.axis[ct])?"y":"x"):(it=X,$="z"),t.axis[ct]){case"e":case"n":Mt[$]=it;break;case"w":case"s":Mt[$]=-it;break;case"u":void 0!==p[$]&&(Mt.z=it);break;case"d":void 0!==p[$]&&(Mt.z=-it);break;default:return null}return Mt}function _i(t){var h={x:t[0],y:t[1]};return t.length>2&&(h.z=t[2]),t.length>3&&(h.m=t[3]),h}function Gi(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function ai(t,h,p,B){var j,X=void 0!==(p=Array.isArray(p)?_i(p):{x:p.x,y:p.y,z:p.z,m:p.m}).z;if(function ri(t){Gi(t.x),Gi(t.y)}(p),t.datum&&h.datum&&function Pi(t,h){return(t.datum.datum_type===F||t.datum.datum_type===k||t.datum.datum_type===G)&&"WGS84"!==h.datumCode||(h.datum.datum_type===F||h.datum.datum_type===k||h.datum.datum_type===G)&&"WGS84"!==t.datumCode}(t,h)&&(p=ai(t,j=new Fe("WGS84"),p,B),t=j),B&&"enu"!==t.axis&&(p=yi(t,!1,p)),"longlat"===t.projName)p={x:p.x*l,y:p.y*l,z:p.z||0};else if(t.to_meter&&(p={x:p.x*t.to_meter,y:p.y*t.to_meter,z:p.z||0}),!(p=t.inverse(p)))return;if(t.from_greenwich&&(p.x+=t.from_greenwich),p=function xn(t,h,p){if(function Be(t,h){return!(t.datum_type!==h.datum_type||t.a!==h.a||Math.abs(t.es-h.es)>5e-11)&&(t.datum_type===F?t.datum_params[0]===h.datum_params[0]&&t.datum_params[1]===h.datum_params[1]&&t.datum_params[2]===h.datum_params[2]:t.datum_type!==k||t.datum_params[0]===h.datum_params[0]&&t.datum_params[1]===h.datum_params[1]&&t.datum_params[2]===h.datum_params[2]&&t.datum_params[3]===h.datum_params[3]&&t.datum_params[4]===h.datum_params[4]&&t.datum_params[5]===h.datum_params[5]&&t.datum_params[6]===h.datum_params[6])}(t,h)||t.datum_type===A||h.datum_type===A)return p;var B=t.a,j=t.es;if(t.datum_type===G){if(0!==Ii(t,!1,p))return;B=S,j=v}var it=h.a,$=h.b,ct=h.es;return h.datum_type===G&&(it=S,$=P,ct=v),j!==ct||B!==it||pi(t.datum_type)||pi(h.datum_type)?(p=ke(p,j,B),pi(t.datum_type)&&(p=function Mi(t,h,p){if(h===F)return{x:t.x+p[0],y:t.y+p[1],z:t.z+p[2]};if(h===k){var it=p[3],$=p[4],ct=p[5],Mt=p[6];return{x:Mt*(t.x-ct*t.y+$*t.z)+p[0],y:Mt*(ct*t.x+t.y-it*t.z)+p[1],z:Mt*(-$*t.x+it*t.y+t.z)+p[2]}}}(p,t.datum_type,t.datum_params)),pi(h.datum_type)&&(p=function gi(t,h,p){if(h===F)return{x:t.x-p[0],y:t.y-p[1],z:t.z-p[2]};if(h===k){var it=p[3],$=p[4],ct=p[5],Mt=p[6],Ut=(t.x-p[0])/Mt,Rt=(t.y-p[1])/Mt,kt=(t.z-p[2])/Mt;return{x:Ut+ct*Rt-$*kt,y:-ct*Ut+Rt+it*kt,z:$*Ut-it*Rt+kt}}}(p,h.datum_type,h.datum_params)),p=ni(p,ct,it,$),h.datum_type!==G||0===Ii(h,!0,p)?p:void 0):p}(t.datum,h.datum,p))return h.from_greenwich&&(p={x:p.x-h.from_greenwich,y:p.y,z:p.z||0}),"longlat"===h.projName?p={x:p.x*m,y:p.y*m,z:p.z||0}:(p=h.forward(p),h.to_meter&&(p={x:p.x/h.to_meter,y:p.y/h.to_meter,z:p.z||0})),B&&"enu"!==h.axis?yi(h,!0,p):(p&&!X&&delete p.z,p)}var Ei=Fe("WGS84");function Ci(t,h,p,B){var j,X,it;return Array.isArray(p)?(j=ai(t,h,p,B)||{x:NaN,y:NaN},p.length>2?typeof t.name<"u"&&"geocent"===t.name||typeof h.name<"u"&&"geocent"===h.name?"number"==typeof j.z?[j.x,j.y,j.z].concat(p.splice(3)):[j.x,j.y,p[2]].concat(p.splice(3)):[j.x,j.y].concat(p.splice(2)):[j.x,j.y]):(X=ai(t,h,p,B),2===(it=Object.keys(p)).length||it.forEach(function($){if(typeof t.name<"u"&&"geocent"===t.name||typeof h.name<"u"&&"geocent"===h.name){if("x"===$||"y"===$||"z"===$)return}else if("x"===$||"y"===$)return;X[$]=p[$]}),X)}function Xi(t){return t instanceof Fe?t:t.oProj?t.oProj:Fe(t)}const Ri=function Ws(t,h,p){t=Xi(t);var j,B=!1;return typeof h>"u"?(h=t,t=Ei,B=!0):(typeof h.x<"u"||Array.isArray(h))&&(p=h,h=t,t=Ei,B=!0),h=Xi(h),p?Ci(t,h,p):(j={forward:function(X,it){return Ci(t,h,X,it)},inverse:function(X,it){return Ci(h,t,X,it)}},B&&(j.oProj=h),j)};var hs=6,Vi="AJSAJS",us="AFAFAF",Zi=65,xi=73,Ai=79,hn=86,en=90;const Gs={forward:Mn,inverse:function cs(t){var h=Kn(Cn(t.toUpperCase()));return h.lat&&h.lon?[h.lon,h.lat,h.lon,h.lat]:[h.left,h.bottom,h.right,h.top]},toPoint:zn};function Mn(t,h){return h=h||5,function Ui(t,h){var p="00000"+t.easting,B="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function kn(t,h,p){var B=un(p);return function Xn(t,h,p){var B=p-1,j=Vi.charCodeAt(B),X=us.charCodeAt(B),it=j+t-1,$=X+h,ct=!1;return it>en&&(it=it-en+Zi-1,ct=!0),(it===xi||j<xi&&it>xi||(it>xi||j<xi)&&ct)&&it++,(it===Ai||j<Ai&&it>Ai||(it>Ai||j<Ai)&&ct)&&++it===xi&&it++,it>en&&(it=it-en+Zi-1),$>hn?($=$-hn+Zi-1,ct=!0):ct=!1,($===xi||X<xi&&$>xi||($>xi||X<xi)&&ct)&&$++,($===Ai||X<Ai&&$>Ai||($>Ai||X<Ai)&&ct)&&++$===xi&&$++,$>hn&&($=$-hn+Zi-1),String.fromCharCode(it)+String.fromCharCode($)}(Math.floor(t/1e5),Math.floor(h/1e5)%20,B)}(t.easting,t.northing,t.zoneNumber)+p.substr(p.length-5,h)+B.substr(B.length-5,h)}(function ds(t){var $,ct,Mt,Ut,Rt,ae,_e,h=t.lat,p=t.lon,B=6378137,j=.00669438,X=.9996,se=Tn(h),re=Tn(p);_e=Math.floor((p+180)/6)+1,180===p&&(_e=60),h>=56&&h<64&&p>=3&&p<12&&(_e=32),h>=72&&h<84&&(p>=0&&p<9?_e=31:p>=9&&p<21?_e=33:p>=21&&p<33?_e=35:p>=33&&p<42&&(_e=37)),ae=Tn(6*(_e-1)-180+3),$=j/(1-j),ct=B/Math.sqrt(1-j*Math.sin(se)*Math.sin(se)),Mt=Math.tan(se)*Math.tan(se),Ut=$*Math.cos(se)*Math.cos(se);var Pe=X*ct*((Rt=Math.cos(se)*(re-ae))+(1-Mt+Ut)*Rt*Rt*Rt/6+(5-18*Mt+Mt*Mt+72*Ut-58*$)*Rt*Rt*Rt*Rt*Rt/120)+5e5,Ze=X*(B*(.9983242984503243*se-.002514607064228144*Math.sin(2*se)+2639046602129982e-21*Math.sin(4*se)-35*j*j*j/3072*Math.sin(6*se))+ct*Math.tan(se)*(Rt*Rt/2+(5-Mt+9*Ut+4*Ut*Ut)*Rt*Rt*Rt*Rt/24+(61-58*Mt+Mt*Mt+600*Ut-330*$)*Rt*Rt*Rt*Rt*Rt*Rt/720));return h<0&&(Ze+=1e7),{northing:Math.round(Ze),easting:Math.round(Pe),zoneNumber:_e,zoneLetter:zs(h)}}({lat:t[1],lon:t[0]}),h)}function zn(t){var h=Kn(Cn(t.toUpperCase()));return h.lat&&h.lon?[h.lon,h.lat]:[(h.left+h.right)/2,(h.top+h.bottom)/2]}function Tn(t){return t*(Math.PI/180)}function Pn(t){return t/Math.PI*180}function Kn(t){var h=t.northing,p=t.easting,B=t.zoneLetter,j=t.zoneNumber;if(j<0||j>60)return null;var ct,Ut,Rt,kt,se,re,_e,Pe,Ze,X=.9996,$=.00669438,Mt=(1-Math.sqrt(1-$))/(1+Math.sqrt(1-$)),We=p-5e5,ze=h;B<"N"&&(ze-=1e7),_e=6*(j-1)-180+3,ct=$/(1-$),Ze=(Pe=ze/X/6367449.145945056)+(3*Mt/2-27*Mt*Mt*Mt/32)*Math.sin(2*Pe)+(21*Mt*Mt/16-55*Mt*Mt*Mt*Mt/32)*Math.sin(4*Pe)+151*Mt*Mt*Mt/96*Math.sin(6*Pe),Ut=6378137/Math.sqrt(1-$*Math.sin(Ze)*Math.sin(Ze)),Rt=Math.tan(Ze)*Math.tan(Ze),kt=ct*Math.cos(Ze)*Math.cos(Ze),se=6378137*(1-$)/Math.pow(1-$*Math.sin(Ze)*Math.sin(Ze),1.5),re=We/(Ut*X);var me=Ze-Ut*Math.tan(Ze)/se*(re*re/2-(5+3*Rt+10*kt-4*kt*kt-9*ct)*re*re*re*re/24+(61+90*Rt+298*kt+45*Rt*Rt-252*ct-3*kt*kt)*re*re*re*re*re*re/720);me=Pn(me);var Oe,Ke=(re-(1+2*Rt+kt)*re*re*re/6+(5-2*kt+28*Rt-3*kt*kt+8*ct+24*Rt*Rt)*re*re*re*re*re/120)/Math.cos(Ze);if(Ke=_e+Pn(Ke),t.accuracy){var Re=Kn({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});Oe={top:Re.lat,right:Re.lon,bottom:me,left:Ke}}else Oe={lat:me,lon:Ke};return Oe}function zs(t){var h="Z";return 84>=t&&t>=72?h="X":72>t&&t>=64?h="W":64>t&&t>=56?h="V":56>t&&t>=48?h="U":48>t&&t>=40?h="T":40>t&&t>=32?h="S":32>t&&t>=24?h="R":24>t&&t>=16?h="Q":16>t&&t>=8?h="P":8>t&&t>=0?h="N":0>t&&t>=-8?h="M":-8>t&&t>=-16?h="L":-16>t&&t>=-24?h="K":-24>t&&t>=-32?h="J":-32>t&&t>=-40?h="H":-40>t&&t>=-48?h="G":-48>t&&t>=-56?h="F":-56>t&&t>=-64?h="E":-64>t&&t>=-72?h="D":-72>t&&t>=-80&&(h="C"),h}function un(t){var h=t%hs;return 0===h&&(h=hs),h}function Cn(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var j,h=t.length,p=null,B="",X=0;!/[A-Z]/.test(j=t.charAt(X));){if(X>=2)throw"MGRSPoint bad conversion from: "+t;B+=j,X++}var it=parseInt(B,10);if(0===X||X+3>h)throw"MGRSPoint bad conversion from: "+t;var $=t.charAt(X++);if($<="A"||"B"===$||"Y"===$||$>="Z"||"I"===$||"O"===$)throw"MGRSPoint zone letter "+$+" not handled: "+t;p=t.substring(X,X+=2);for(var ct=un(it),Mt=function Yi(t,h){for(var p=Vi.charCodeAt(h-1),B=1e5,j=!1;p!==t.charCodeAt(0);){if(++p===xi&&p++,p===Ai&&p++,p>en){if(j)throw"Bad character: "+t;p=Zi,j=!0}B+=1e5}return B}(p.charAt(0),ct),Ut=function fs(t,h){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var p=us.charCodeAt(h-1),B=0,j=!1;p!==t.charCodeAt(0);){if(++p===xi&&p++,p===Ai&&p++,p>hn){if(j)throw"Bad character: "+t;p=Zi,j=!0}B+=1e5}return B}(p.charAt(1),ct);Ut<Hi($);)Ut+=2e6;var Rt=h-X;if(Rt%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var ae,_e,Pe,kt=Rt/2,se=0,re=0;return kt>0&&(ae=1e5/Math.pow(10,kt),_e=t.substring(X,X+kt),se=parseFloat(_e)*ae,Pe=t.substring(X+kt),re=parseFloat(Pe)*ae),{easting:se+Mt,northing:re+Ut,zoneLetter:$,zoneNumber:it,accuracy:ae}}function Hi(t){var h;switch(t){case"C":h=11e5;break;case"D":h=2e6;break;case"E":h=28e5;break;case"F":h=37e5;break;case"G":h=46e5;break;case"H":h=55e5;break;case"J":h=64e5;break;case"K":h=73e5;break;case"L":h=82e5;break;case"M":h=91e5;break;case"N":h=0;break;case"P":h=8e5;break;case"Q":h=17e5;break;case"R":h=26e5;break;case"S":h=35e5;break;case"T":h=44e5;break;case"U":h=53e5;break;case"V":h=62e5;break;case"W":h=7e6;break;case"X":h=79e5;break;default:h=-1}if(h>=0)return h;throw"Invalid zone letter: "+t}function Ji(t,h,p){if(!(this instanceof Ji))return new Ji(t,h,p);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&typeof h>"u"){var B=t.split(",");this.x=parseFloat(B[0],10),this.y=parseFloat(B[1],10),this.z=parseFloat(B[2],10)||0}else this.x=t,this.y=h,this.z=p||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ji.fromMGRS=function(t){return new Ji(zn(t))},Ji.prototype.toMGRS=function(t){return Mn([this.x,this.y],t)};const Rn=Ji;var _s=.01953125,$i=.01068115234375;function Jn(t){var h=[];h[0]=1-t*(.25+t*(.046875+t*(_s+t*$i))),h[1]=t*(.75-t*(.046875+t*(_s+t*$i)));var p=t*t;return h[2]=p*(.46875-t*(.013020833333333334+.007120768229166667*t)),h[3]=(p*=t)*(.3645833333333333-.005696614583333333*t),h[4]=p*t*.3076171875,h}function ji(t,h,p,B){return B[0]*t-(p*=h)*(B[1]+(h*=h)*(B[2]+h*(B[3]+h*B[4])))}function ys(t,h,p){for(var B=1/(1-h),j=t,X=20;X;--X){var it=Math.sin(j),$=1-h*it*it;if(j-=$=(ji(j,it,Math.cos(j),p)-t)*($*Math.sqrt($))*B,Math.abs($)<e)return j}return j}const nn={init:function Es(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Jn(this.es),this.ml0=ji(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function ks(t){var j,X,it,p=t.y,B=Bt(t.x-this.long0),$=Math.sin(p),ct=Math.cos(p);if(this.es){var Ut=ct*B,Rt=Math.pow(Ut,2),kt=this.ep2*Math.pow(ct,2),se=Math.pow(kt,2),re=Math.abs(ct)>e?Math.tan(p):0,ae=Math.pow(re,2),_e=Math.pow(ae,2);j=1-this.es*Math.pow($,2),Ut/=Math.sqrt(j);var Pe=ji(p,$,ct,this.en);X=this.a*(this.k0*Ut*(1+Rt/6*(1-ae+kt+Rt/20*(5-18*ae+_e+14*kt-58*ae*kt+Rt/42*(61+179*_e-_e*ae-479*ae)))))+this.x0,it=this.a*(this.k0*(Pe-this.ml0+$*B*Ut/2*(1+Rt/12*(5-ae+9*kt+4*se+Rt/30*(61+_e-58*ae+270*kt-330*ae*kt+Rt/56*(1385+543*_e-_e*ae-3111*ae))))))+this.y0}else{var Mt=ct*Math.sin(B);if(Math.abs(Math.abs(Mt)-1)<e)return 93;if(X=.5*this.a*this.k0*Math.log((1+Mt)/(1-Mt))+this.x0,it=ct*Math.cos(B)/Math.sqrt(1-Math.pow(Mt,2)),(Mt=Math.abs(it))>=1){if(Mt-1>e)return 93;it=0}else it=Math.acos(it);p<0&&(it=-it),it=this.a*this.k0*(it-this.lat0)+this.y0}return t.x=X,t.y=it,t},inverse:function Qn(t){var h,p,B,j,X=1/this.a*(t.x-this.x0),it=1/this.a*(t.y-this.y0);if(this.es)if(p=ys(h=this.ml0+it/this.k0,this.es,this.en),Math.abs(p)<u){var Rt=Math.sin(p),kt=Math.cos(p),se=Math.abs(kt)>e?Math.tan(p):0,re=this.ep2*Math.pow(kt,2),ae=Math.pow(re,2),_e=Math.pow(se,2),Pe=Math.pow(_e,2);h=1-this.es*Math.pow(Rt,2);var Ze=X*Math.sqrt(h)/this.k0,We=Math.pow(Ze,2);B=p-(h*=se)*We/(1-this.es)*.5*(1-We/12*(5+3*_e-9*re*_e+re-4*ae-We/30*(61+90*_e-252*re*_e+45*Pe+46*re-We/56*(1385+3633*_e+4095*Pe+1574*Pe*_e)))),j=Bt(this.long0+Ze*(1-We/6*(1+2*_e+re-We/20*(5+28*_e+24*Pe+8*re*_e+6*re-We/42*(61+662*_e+1320*Pe+720*Pe*_e))))/kt)}else B=u*Wt(it),j=0;else{var $=Math.exp(X/this.k0),ct=.5*($-1/$),Ut=Math.cos(this.lat0+it/this.k0);h=Math.sqrt((1-Math.pow(Ut,2))/(1+Math.pow(ct,2))),B=Math.asin(h),it<0&&(B=-B),j=0===ct&&0===Ut?0:Bt(Math.atan2(ct,Ut)+this.long0)}return t.x=j,t.y=B,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Sn(t){var h=Math.exp(t);return(h-1/h)/2}function Oi(t,h){t=Math.abs(t),h=Math.abs(h);var p=Math.max(t,h),B=Math.min(t,h)/(p||1);return p*Math.sqrt(1+Math.pow(B,2))}function $n(t,h){for(var it,p=2*Math.cos(2*h),B=t.length-1,j=t[B],X=0;--B>=0;)it=p*j-X+t[B],X=j,j=it;return h+it*Math.sin(2*h)}function Kt(t,h,p){for(var re,ae,B=Math.sin(h),j=Math.cos(h),X=Sn(p),it=function Ys(t){var h=Math.exp(t);return(h+1/h)/2}(p),$=2*j*it,ct=-2*B*X,Mt=t.length-1,Ut=t[Mt],Rt=0,kt=0,se=0;--Mt>=0;)re=kt,ae=Rt,Ut=$*(kt=Ut)-re-ct*(Rt=se)+t[Mt],se=ct*kt-ae+$*Rt;return[($=B*it)*Ut-(ct=j*X)*se,$*se+ct*Ut]}const Qt={init:function ot(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(nn.init.apply(this),this.forward=nn.forward,this.inverse=nn.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),h=t/(2-t),p=h;this.cgb[0]=h*(2+h*(-2/3+h*(h*(116/45+h*(26/45+h*(-2854/675)))-2))),this.cbg[0]=h*(h*(2/3+h*(4/3+h*(-82/45+h*(32/45+h*(4642/4725)))))-2),this.cgb[1]=(p*=h)*(7/3+h*(h*(-227/45+h*(2704/315+h*(2323/945)))-1.6)),this.cbg[1]=p*(5/3+h*(-16/15+h*(-13/9+h*(904/315+h*(-1522/945))))),this.cgb[2]=(p*=h)*(56/15+h*(-136/35+h*(-1262/105+h*(73814/2835)))),this.cbg[2]=p*(-26/15+h*(34/21+h*(1.6+h*(-12686/2835)))),this.cgb[3]=(p*=h)*(4279/630+h*(-332/35+h*(-399572/14175))),this.cbg[3]=p*(1237/630+h*(h*(-24832/14175)-2.4)),this.cgb[4]=(p*=h)*(4174/315+h*(-144838/6237)),this.cbg[4]=p*(-734/315+h*(109598/31185)),this.cgb[5]=(p*=h)*(601676/22275),this.cbg[5]=p*(444337/155925),p=Math.pow(h,2),this.Qn=this.k0/(1+h)*(1+p*(1/4+p*(1/64+p/256))),this.utg[0]=h*(h*(2/3+h*(-37/96+h*(1/360+h*(81/512+h*(-96199/604800)))))-.5),this.gtu[0]=h*(.5+h*(-2/3+h*(5/16+h*(41/180+h*(-127/288+h*(7891/37800)))))),this.utg[1]=p*(-1/48+h*(-1/15+h*(437/1440+h*(-46/105+h*(1118711/3870720))))),this.gtu[1]=p*(13/48+h*(h*(557/1440+h*(281/630+h*(-1983433/1935360)))-.6)),this.utg[2]=(p*=h)*(-17/480+h*(37/840+h*(209/4480+h*(-5569/90720)))),this.gtu[2]=p*(61/240+h*(-103/140+h*(15061/26880+h*(167603/181440)))),this.utg[3]=(p*=h)*(-4397/161280+h*(11/504+h*(830251/7257600))),this.gtu[3]=p*(49561/161280+h*(-179/168+h*(6601661/7257600))),this.utg[4]=(p*=h)*(-4583/161280+h*(108847/3991680)),this.gtu[4]=p*(34729/80640+h*(-3418889/1995840)),this.utg[5]=(p*=h)*(-20648693/638668800),this.gtu[5]=.6650675310896665*p;var B=$n(this.cbg,this.lat0);this.Zb=-this.Qn*(B+function Vs(t,h){for(var it,p=2*Math.cos(h),B=t.length-1,j=t[B],X=0;--B>=0;)it=p*j-X+t[B],X=j,j=it;return Math.sin(h)*it}(this.gtu,2*B))},forward:function dt(t){var h=Bt(t.x-this.long0),p=t.y;p=$n(this.cbg,p);var B=Math.sin(p),j=Math.cos(p),X=Math.sin(h),it=Math.cos(h);p=Math.atan2(B,it*j),h=Math.atan2(X*j,Oi(B,j*it)),h=function Xs(t){var h=Math.abs(t);return h=function xs(t){var h=1+t,p=h-1;return 0===p?t:t*Math.log(h)/p}(h*(1+h/(Oi(1,h)+1))),t<0?-h:h}(Math.tan(h));var ct,Mt,$=Kt(this.gtu,2*p,2*h);return p+=$[0],h+=$[1],Math.abs(h)<=2.623395162778?(ct=this.a*(this.Qn*h)+this.x0,Mt=this.a*(this.Qn*p+this.Zb)+this.y0):(ct=1/0,Mt=1/0),t.x=ct,t.y=Mt,t},inverse:function mt(t){var B,j,h=1/this.a*(t.x-this.x0),p=1/this.a*(t.y-this.y0);if(p=(p-this.Zb)/this.Qn,h/=this.Qn,Math.abs(h)<=2.623395162778){var X=Kt(this.utg,2*p,2*h);p+=X[0],h+=X[1],h=Math.atan(Sn(h));var it=Math.sin(p),$=Math.cos(p),ct=Math.sin(h),Mt=Math.cos(h);p=Math.atan2(it*Mt,Oi(ct,Mt*$)),B=Bt((h=Math.atan2(ct,Mt*$))+this.long0),j=$n(this.cgb,p)}else B=1/0,j=1/0;return t.x=B,t.y=j,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},je={init:function xe(){var t=function ee(t,h){if(void 0===t){if((t=Math.floor(30*(Bt(h)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*l,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Qt.init.apply(this),this.forward=Qt.forward,this.inverse=Qt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function $e(t,h){return Math.pow((1-t)/(1+t),h)}const mi={init:function li(){var t=Math.sin(this.lat0),h=Math.cos(this.lat0);h*=h,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*h*h/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+s)/(Math.pow(Math.tan(.5*this.lat0+s),this.C)*$e(this.e*t,this.ratexp))},forward:function ti(t){var h=t.x,p=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*p+s),this.C)*$e(this.e*Math.sin(p),this.ratexp))-u,t.x=this.C*h,t},inverse:function Bi(t){for(var p=t.x/this.C,B=t.y,j=Math.pow(Math.tan(.5*B+s)/this.K,1/this.C),X=20;X>0&&(B=2*Math.atan(j*$e(this.e*Math.sin(t.y),-.5*this.e))-u,!(Math.abs(B-t.y)<1e-14));--X)t.y=B;return X?(t.x=p,t.y=B,t):null},names:["gauss"]},zi={init:function fi(){mi.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function bi(t){var h,p,B,j;return t.x=Bt(t.x-this.long0),mi.forward.apply(this,[t]),h=Math.sin(t.y),p=Math.cos(t.y),B=Math.cos(t.x),t.x=(j=this.k0*this.R2/(1+this.sinc0*h+this.cosc0*p*B))*p*Math.sin(t.x),t.y=j*(this.cosc0*h-this.sinc0*p*B),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function hi(t){var h,p,B,j,X;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,X=Math.sqrt(t.x*t.x+t.y*t.y)){var it=2*Math.atan2(X,this.R2);h=Math.sin(it),p=Math.cos(it),j=Math.asin(p*this.sinc0+t.y*h*this.cosc0/X),B=Math.atan2(t.x*h,X*this.cosc0*p-t.y*this.sinc0*h)}else j=this.phic0,B=0;return t.x=B,t.y=j,mi.inverse.apply(this,[t]),t.x=Bt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Ps={init:function Ms(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&(this.k0=.5*(1+Wt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=e&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&Math.abs(Math.cos(this.lat_ts))>e&&(this.k0=.5*this.cons*Ft(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ue(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ft(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-u,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function qn(t){var X,it,$,ct,Mt,Ut,h=t.x,p=t.y,B=Math.sin(p),j=Math.cos(p),Rt=Bt(h-this.long0);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=e&&Math.abs(p+this.lat0)<=e?(t.x=NaN,t.y=NaN,t):this.sphere?(X=2*this.k0/(1+this.sinlat0*B+this.coslat0*j*Math.cos(Rt)),t.x=this.a*X*j*Math.sin(Rt)+this.x0,t.y=this.a*X*(this.coslat0*B-this.sinlat0*j*Math.cos(Rt))+this.y0,t):(it=2*Math.atan(this.ssfn_(p,B,this.e))-u,ct=Math.cos(it),$=Math.sin(it),Math.abs(this.coslat0)<=e?(Mt=ue(this.e,p*this.con,this.con*B),t.x=this.x0+(Ut=2*this.a*this.k0*Mt/this.cons)*Math.sin(h-this.long0),t.y=this.y0-this.con*Ut*Math.cos(h-this.long0),t):(Math.abs(this.sinlat0)<e?(X=2*this.a*this.k0/(1+ct*Math.cos(Rt)),t.y=X*$):(X=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*$+this.cosX0*ct*Math.cos(Rt))),t.y=X*(this.cosX0*$-this.sinX0*ct*Math.cos(Rt))+this.y0),t.x=X*ct*Math.sin(Rt)+this.x0,t))},inverse:function dn(t){t.x-=this.x0,t.y-=this.y0;var h,p,j,X,it=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var $=2*Math.atan(it/(2*this.a*this.k0));return h=this.long0,p=this.lat0,it<=e?(t.x=h,t.y=p,t):(p=Math.asin(Math.cos($)*this.sinlat0+t.y*Math.sin($)*this.coslat0/it),h=Math.abs(this.coslat0)<e?Bt(this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y)):Bt(this.long0+Math.atan2(t.x*Math.sin($),it*this.coslat0*Math.cos($)-t.y*this.sinlat0*Math.sin($))),t.x=h,t.y=p,t)}if(Math.abs(this.coslat0)<=e){if(it<=e)return p=this.lat0,t.x=h=this.long0,t.y=p,t;t.x*=this.con,t.y*=this.con,p=this.con*ge(this.e,it*this.cons/(2*this.a*this.k0)),h=this.con*Bt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else j=2*Math.atan(it*this.cosX0/(2*this.a*this.k0*this.ms1)),h=this.long0,it<=e?X=this.X0:(X=Math.asin(Math.cos(j)*this.sinX0+t.y*Math.sin(j)*this.cosX0/it),h=Bt(this.long0+Math.atan2(t.x*Math.sin(j),it*this.cosX0*Math.cos(j)-t.y*this.sinX0*Math.sin(j)))),p=-1*ge(this.e,Math.tan(.5*(u+X)));return t.x=h,t.y=p,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function wi(t,h,p){return h*=p,Math.tan(.5*(u+t))*Math.pow((1-h)/(1+h),.5*p)}},pa={init:function In(){var t=this.lat0;this.lambda0=this.long0;var h=Math.sin(t),p=this.a,j=1/this.rf,X=2*j-Math.pow(j,2),it=this.e=Math.sqrt(X);this.R=this.k0*p*Math.sqrt(1-X)/(1-X*Math.pow(h,2)),this.alpha=Math.sqrt(1+X/(1-X)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(h/this.alpha);var $=Math.log(Math.tan(Math.PI/4+this.b0/2)),ct=Math.log(Math.tan(Math.PI/4+t/2)),Mt=Math.log((1+it*h)/(1-it*h));this.K=$-this.alpha*ct+this.alpha*it/2*Mt},forward:function Hs(t){var h=Math.log(Math.tan(Math.PI/4-t.y/2)),p=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),j=2*(Math.atan(Math.exp(-this.alpha*(h+p)+this.K))-Math.PI/4),X=this.alpha*(t.x-this.lambda0),it=Math.atan(Math.sin(X)/(Math.sin(this.b0)*Math.tan(j)+Math.cos(this.b0)*Math.cos(X))),$=Math.asin(Math.cos(this.b0)*Math.sin(j)-Math.sin(this.b0)*Math.cos(j)*Math.cos(X));return t.y=this.R/2*Math.log((1+Math.sin($))/(1-Math.sin($)))+this.y0,t.x=this.R*it+this.x0,t},inverse:function _a(t){for(var B=(t.x-this.x0)/this.R,j=2*(Math.atan(Math.exp((t.y-this.y0)/this.R))-Math.PI/4),X=Math.asin(Math.cos(this.b0)*Math.sin(j)+Math.sin(this.b0)*Math.cos(j)*Math.cos(B)),it=Math.atan(Math.sin(B)/(Math.cos(this.b0)*Math.cos(B)-Math.sin(this.b0)*Math.tan(j))),$=this.lambda0+it/this.alpha,ct=0,Mt=X,Ut=-1e3,Rt=0;Math.abs(Mt-Ut)>1e-7;){if(++Rt>20)return;ct=1/this.alpha*(Math.log(Math.tan(Math.PI/4+X/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(Mt))/2)),Ut=Mt,Mt=2*Math.atan(Math.exp(ct))-Math.PI/2}return t.x=$,t.y=Mt,t},names:["somerc"]};var An=1e-7;const Ma={init:function va(){var t,h,p,B,j,X,it,$,ct,Mt,Rt,Ut=0,kt=0,se=0,re=0,ae=0,_e=0,Pe=0;this.no_off=function bn(t){var p="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(p)}(this),this.no_rot="no_rot"in this;var We=!1;"alpha"in this&&(We=!0);var ze=!1;if("rectified_grid_angle"in this&&(ze=!0),We&&(Pe=this.alpha),ze&&(Ut=this.rectified_grid_angle*l),We||ze)kt=this.longc;else if(se=this.long1,ae=this.lat1,re=this.long2,_e=this.lat2,Math.abs(ae-_e)<=An||(t=Math.abs(ae))<=An||Math.abs(t-u)<=An||Math.abs(Math.abs(this.lat0)-u)<=An||Math.abs(Math.abs(_e)-u)<=An)throw new Error;var me=1-this.es;h=Math.sqrt(me),Math.abs(this.lat0)>e?($=Math.sin(this.lat0),p=Math.cos(this.lat0),t=1-this.es*$*$,this.B=p*p,this.B=Math.sqrt(1+this.es*this.B*this.B/me),this.A=this.B*this.k0*h/t,(j=(B=this.B*h/(p*Math.sqrt(t)))*B-1)<=0?j=0:(j=Math.sqrt(j),this.lat0<0&&(j=-j)),this.E=j+=B,this.E*=Math.pow(ue(this.e,this.lat0,$),this.B)):(this.B=1/h,this.A=this.k0,this.E=B=j=1),We||ze?(We?(Rt=Math.asin(Math.sin(Pe)/B),ze||(Ut=Pe)):(Rt=Ut,Pe=Math.asin(B*Math.sin(Rt))),this.lam0=kt-Math.asin(.5*(j-1/j)*Math.tan(Rt))/this.B):(X=Math.pow(ue(this.e,ae,Math.sin(ae)),this.B),it=Math.pow(ue(this.e,_e,Math.sin(_e)),this.B),j=this.E/X,ct=(it-X)/(it+X),Mt=((Mt=this.E*this.E)-it*X)/(Mt+it*X),(t=se-re)<-Math.pi?re-=g:t>Math.pi&&(re+=g),this.lam0=Bt(.5*(se+re)-Math.atan(Mt*Math.tan(.5*this.B*(se-re))/ct)/this.B),Rt=Math.atan(2*Math.sin(this.B*Bt(se-this.lam0))/(j-1/j)),Ut=Pe=Math.asin(B*Math.sin(Rt))),this.singam=Math.sin(Rt),this.cosgam=Math.cos(Rt),this.sinrot=Math.sin(Ut),this.cosrot=Math.cos(Ut),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(B*B-1)/Math.cos(Pe))),this.lat0<0&&(this.u_0=-this.u_0)),j=.5*Rt,this.v_pole_n=this.ArB*Math.log(Math.tan(s-j)),this.v_pole_s=this.ArB*Math.log(Math.tan(s+j))},forward:function ya(t){var p,B,j,X,it,$,ct,Mt,h={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-u)>e){if(p=.5*((it=this.E/Math.pow(ue(this.e,t.y,Math.sin(t.y)),this.B))-($=1/it)),B=.5*(it+$),X=Math.sin(this.B*t.x),j=(p*this.singam-X*this.cosgam)/B,Math.abs(Math.abs(j)-1)<e)throw new Error;Mt=.5*this.ArB*Math.log((1-j)/(1+j)),$=Math.cos(this.B*t.x),ct=Math.abs($)<An?this.A*t.x:this.ArB*Math.atan2(p*this.cosgam+X*this.singam,$)}else Mt=t.y>0?this.v_pole_n:this.v_pole_s,ct=this.ArB*t.y;return this.no_rot?(h.x=ct,h.y=Mt):(h.x=Mt*this.cosrot+(ct-=this.u_0)*this.sinrot,h.y=ct*this.cosrot-Mt*this.sinrot),h.x=this.a*h.x+this.x0,h.y=this.a*h.y+this.y0,h},inverse:function Ea(t){var h,p,B,j,X,it,$,ct={};if(t.x=1/this.a*(t.x-this.x0),t.y=1/this.a*(t.y-this.y0),this.no_rot?(p=t.y,h=t.x):(p=t.x*this.cosrot-t.y*this.sinrot,h=t.y*this.cosrot+t.x*this.sinrot+this.u_0),j=.5*((B=Math.exp(-this.BrA*p))-1/B),X=.5*(B+1/B),$=((it=Math.sin(this.BrA*h))*this.cosgam+j*this.singam)/X,Math.abs(Math.abs($)-1)<e)ct.x=0,ct.y=$<0?-u:u;else{if(ct.y=this.E/Math.sqrt((1+$)/(1-$)),ct.y=ge(this.e,Math.pow(ct.y,1/this.B)),ct.y===1/0)throw new Error;ct.x=-this.rB*Math.atan2(j*this.cosgam-it*this.singam,Math.cos(this.BrA*h))}return ct.x+=this.lam0,ct},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Ca={init:function Ta(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<e)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var h=Math.sin(this.lat1),p=Math.cos(this.lat1),B=Ft(this.e,h,p),j=ue(this.e,this.lat1,h),X=Math.sin(this.lat2),it=Math.cos(this.lat2),$=Ft(this.e,X,it),ct=ue(this.e,this.lat2,X),Mt=ue(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>e?Math.log(B/$)/Math.log(j/ct):h,isNaN(this.ns)&&(this.ns=h),this.f0=B/(this.ns*Math.pow(j,this.ns)),this.rh=this.a*this.f0*Math.pow(Mt,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function fn(t){var h=t.x,p=t.y;Math.abs(2*Math.abs(p)-Math.PI)<=e&&(p=Wt(p)*(u-2*e));var j,X,B=Math.abs(Math.abs(p)-u);if(B>e)j=ue(this.e,p,Math.sin(p)),X=this.a*this.f0*Math.pow(j,this.ns);else{if((B=p*this.ns)<=0)return null;X=0}var it=this.ns*Bt(h-this.long0);return t.x=this.k0*(X*Math.sin(it))+this.x0,t.y=this.k0*(this.rh-X*Math.cos(it))+this.y0,t},inverse:function Pa(t){var h,p,B,j,X,it=(t.x-this.x0)/this.k0,$=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(h=Math.sqrt(it*it+$*$),p=1):(h=-Math.sqrt(it*it+$*$),p=-1);var ct=0;if(0!==h&&(ct=Math.atan2(p*it,p*$)),0!==h||this.ns>0){if(p=1/this.ns,B=Math.pow(h/(this.a*this.f0),p),-9999===(j=ge(this.e,B)))return null}else j=-u;return X=Bt(ct/this.ns+this.long0),t.x=X,t.y=j,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},Ra={init:function Rr(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function Or(t){var h,p,B,j,X,it,$,Mt=t.y,Ut=Bt(t.x-this.long0);return h=Math.pow((1+this.e*Math.sin(Mt))/(1-this.e*Math.sin(Mt)),this.alfa*this.e/2),p=2*(Math.atan(this.k*Math.pow(Math.tan(Mt/2+this.s45),this.alfa)/h)-this.s45),B=-Ut*this.alfa,j=Math.asin(Math.cos(this.ad)*Math.sin(p)+Math.sin(this.ad)*Math.cos(p)*Math.cos(B)),X=Math.asin(Math.cos(p)*Math.sin(B)/Math.cos(j)),it=this.n*X,$=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(j/2+this.s45),this.n),t.y=$*Math.cos(it)/1,t.x=$*Math.sin(it)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function Sr(t){var h,p,B,j,it,$,ct,Mt=t.x;t.x=t.y,t.y=Mt,this.czech||(t.y*=-1,t.x*=-1),it=Math.sqrt(t.x*t.x+t.y*t.y),j=Math.atan2(t.y,t.x)/Math.sin(this.s0),B=2*(Math.atan(Math.pow(this.ro0/it,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),h=Math.asin(Math.cos(this.ad)*Math.sin(B)-Math.sin(this.ad)*Math.cos(B)*Math.cos(j)),p=Math.asin(Math.cos(B)*Math.sin(j)/Math.cos(h)),t.x=this.long0-p/this.alfa,$=h,ct=0;var Ut=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(h/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin($))/(1-this.e*Math.sin($)),this.e/2))-this.s45),Math.abs($-t.y)<1e-10&&(ct=1),$=t.y,Ut+=1}while(0===ct&&Ut<15);return Ut>=15?null:t},names:["Krovak","krovak"]};function di(t,h,p,B,j){return t*j-h*Math.sin(2*j)+p*Math.sin(4*j)-B*Math.sin(6*j)}function Ln(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function _n(t){return.375*t*(1+.25*t*(1+.46875*t))}function Ki(t){return.05859375*t*t*(1+.75*t)}function ts(t){return t*t*t*(35/3072)}function wn(t,h,p){var B=h*p;return t/Math.sqrt(1-B*B)}function Dn(t){return Math.abs(t)<u?t:t-Wt(t)*Math.PI}function es(t,h,p,B,j){var X,it;X=t/h;for(var $=0;$<15;$++)if(X+=it=(t-(h*X-p*Math.sin(2*X)+B*Math.sin(4*X)-j*Math.sin(6*X)))/(h-2*p*Math.cos(2*X)+4*B*Math.cos(4*X)-6*j*Math.cos(6*X)),Math.abs(it)<=1e-10)return X;return NaN}const is={init:function Qs(){this.sphere||(this.e0=Ln(this.es),this.e1=_n(this.es),this.e2=Ki(this.es),this.e3=ts(this.es),this.ml0=this.a*di(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function Oa(t){var h,p,B=t.x,j=t.y;if(B=Bt(B-this.long0),this.sphere)h=this.a*Math.asin(Math.cos(j)*Math.sin(B)),p=this.a*(Math.atan2(Math.tan(j),Math.cos(B))-this.lat0);else{var X=Math.sin(j),it=Math.cos(j),$=wn(this.a,this.e,X),ct=Math.tan(j)*Math.tan(j),Mt=B*Math.cos(j),Ut=Mt*Mt,Rt=this.es*it*it/(1-this.es);h=$*Mt*(1-Ut*ct*(1/6-(8-ct+8*Rt)*Ut/120)),p=this.a*di(this.e0,this.e1,this.e2,this.e3,j)-this.ml0+$*X/it*Ut*(.5+(5-ct+6*Rt)*Ut/24)}return t.x=h+this.x0,t.y=p+this.y0,t},inverse:function $s(t){t.x-=this.x0,t.y-=this.y0;var B,j,h=t.x/this.a,p=t.y/this.a;if(this.sphere){var X=p+this.lat0;B=Math.asin(Math.sin(X)*Math.cos(h)),j=Math.atan2(Math.tan(h),Math.cos(X))}else{var $=es(this.ml0/this.a+p,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs($)-u)<=e)return t.x=this.long0,t.y=u,p<0&&(t.y*=-1),t;var ct=wn(this.a,this.e,Math.sin($)),Mt=ct*ct*ct/this.a/this.a*(1-this.es),Ut=Math.pow(Math.tan($),2),Rt=h*this.a/ct,kt=Rt*Rt;B=$-ct*Math.tan($)/Mt*Rt*Rt*(.5-(1+3*Ut)*Rt*Rt/24),j=Rt*(1-kt*(Ut/3+(1+3*Ut)*Ut*kt/15))/Math.cos($)}return t.x=Bt(j+this.long0),t.y=Dn(B),t},names:["Cassini","Cassini_Soldner","cass"]};function sn(t,h){var p;return t>1e-7?(1-t*t)*(h/(1-(p=t*h)*p)-.5/t*Math.log((1-p)/(1+p))):2*h}const wr={init:function qs(){var h,t=Math.abs(this.lat0);if(this.mode=Math.abs(t-u)<e?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<e?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=sn(this.e,1),this.mmf=.5/(1-this.es),this.apa=function Da(t){var h,p=[];return p[0]=.3333333333333333*t,p[0]+=.17222222222222222*(h=t*t),p[1]=.06388888888888888*h,p[0]+=.10257936507936508*(h*=t),p[1]+=.0664021164021164*h,p[2]=.016415012942191543*h,p}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),h=Math.sin(this.lat0),this.sinb1=sn(this.e,h)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*h*h)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function Ir(t){var h,p,B,j,X,it,$,ct,Mt,Ut,Rt=t.x,kt=t.y;if(Rt=Bt(Rt-this.long0),this.sphere){if(X=Math.sin(kt),Ut=Math.cos(kt),B=Math.cos(Rt),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((p=this.mode===this.EQUIT?1+Ut*B:1+this.sinph0*X+this.cosph0*Ut*B)<=e)return null;h=(p=Math.sqrt(2/p))*Ut*Math.sin(Rt),p*=this.mode===this.EQUIT?X:this.cosph0*X-this.sinph0*Ut*B}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(B=-B),Math.abs(kt+this.lat0)<e)return null;p=s-.5*kt,h=(p=2*(this.mode===this.S_POLE?Math.cos(p):Math.sin(p)))*Math.sin(Rt),p*=B}}else{switch($=0,ct=0,Mt=0,B=Math.cos(Rt),j=Math.sin(Rt),X=Math.sin(kt),it=sn(this.e,X),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&($=it/this.qp,ct=Math.sqrt(1-$*$)),this.mode){case this.OBLIQ:Mt=1+this.sinb1*$+this.cosb1*ct*B;break;case this.EQUIT:Mt=1+ct*B;break;case this.N_POLE:Mt=u+kt,it=this.qp-it;break;case this.S_POLE:Mt=kt-u,it=this.qp+it}if(Math.abs(Mt)<e)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:Mt=Math.sqrt(2/Mt),p=this.mode===this.OBLIQ?this.ymf*Mt*(this.cosb1*$-this.sinb1*ct*B):(Mt=Math.sqrt(2/(1+ct*B)))*$*this.ymf,h=this.xmf*Mt*ct*j;break;case this.N_POLE:case this.S_POLE:it>=0?(h=(Mt=Math.sqrt(it))*j,p=B*(this.mode===this.S_POLE?Mt:-Mt)):h=p=0}}return t.x=this.a*h+this.x0,t.y=this.a*p+this.y0,t},inverse:function Ar(t){t.x-=this.x0,t.y-=this.y0;var B,j,X,it,$,ct,Mt,h=t.x/this.a,p=t.y/this.a;if(this.sphere){var Rt,Ut=0,kt=0;if((j=.5*(Rt=Math.sqrt(h*h+p*p)))>1)return null;switch(j=2*Math.asin(j),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(kt=Math.sin(j),Ut=Math.cos(j)),this.mode){case this.EQUIT:j=Math.abs(Rt)<=e?0:Math.asin(p*kt/Rt),h*=kt,p=Ut*Rt;break;case this.OBLIQ:j=Math.abs(Rt)<=e?this.lat0:Math.asin(Ut*this.sinph0+p*kt*this.cosph0/Rt),h*=kt*this.cosph0,p=(Ut-Math.sin(j)*this.sinph0)*Rt;break;case this.N_POLE:p=-p,j=u-j;break;case this.S_POLE:j-=u}B=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,p):0}else{if(Mt=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,p*=this.dd,(ct=Math.sqrt(h*h+p*p))<e)return t.x=this.long0,t.y=this.lat0,t;it=2*Math.asin(.5*ct/this.rq),X=Math.cos(it),h*=it=Math.sin(it),this.mode===this.OBLIQ?($=this.qp*(Mt=X*this.sinb1+p*it*this.cosb1/ct),p=ct*this.cosb1*X-p*this.sinb1*it):($=this.qp*(Mt=p*it/ct),p=ct*X)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!($=h*h+p*p))return t.x=this.long0,t.y=this.lat0,t;Mt=1-$/this.qp,this.mode===this.S_POLE&&(Mt=-Mt)}B=Math.atan2(h,p),j=function Fa(t,h){var p=t+t;return t+h[0]*Math.sin(p)+h[1]*Math.sin(p+p)+h[2]*Math.sin(p+p+p)}(Math.asin(Mt),this.apa)}return t.x=Bt(this.long0+B),t.y=j,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Wi(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const Ua={init:function tr(){Math.abs(this.lat1+this.lat2)<e||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ft(this.e3,this.sin_po,this.cos_po),this.qs1=sn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ft(this.e3,this.sin_po,this.cos_po),this.qs2=sn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=sn(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>e?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function Za(t){var h=t.x,p=t.y;this.sin_phi=Math.sin(p),this.cos_phi=Math.cos(p);var B=sn(this.e3,this.sin_phi),j=this.a*Math.sqrt(this.c-this.ns0*B)/this.ns0,X=this.ns0*Bt(h-this.long0),it=j*Math.sin(X)+this.x0,$=this.rh-j*Math.cos(X)+this.y0;return t.x=it,t.y=$,t},inverse:function Dr(t){var h,B,j,X,it;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(h=Math.sqrt(t.x*t.x+t.y*t.y),B=1):(h=-Math.sqrt(t.x*t.x+t.y*t.y),B=-1),j=0,0!==h&&(j=Math.atan2(B*t.x,B*t.y)),B=h*this.ns0/this.a,it=this.sphere?Math.asin((this.c-B*B)/(2*this.ns0)):this.phi1z(this.e3,(this.c-B*B)/this.ns0),X=Bt(j/this.ns0+this.long0),t.x=X,t.y=it,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function Fr(t,h){var p,j,X,it,$=Wi(.5*h);if(t<e)return $;for(var ct=t*t,Mt=1;Mt<=25;Mt++)if($+=it=.5*(X=1-(j=t*(p=Math.sin($)))*j)*X/Math.cos($)*(h/(1-ct)-p/X+.5/t*Math.log((1-j)/(1+j))),Math.abs(it)<=1e-7)return $;return null}},Zr={init:function ja(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function Ba(t){var h,p,B,j,it,$,ct,Ut=t.y;return B=Bt(t.x-this.long0),h=Math.sin(Ut),p=Math.cos(Ut),j=Math.cos(B),(it=this.sin_p14*h+this.cos_p14*p*j)>0||Math.abs(it)<=e?($=this.x0+1*this.a*p*Math.sin(B)/it,ct=this.y0+1*this.a*(this.cos_p14*h-this.sin_p14*p*j)/it):($=this.x0+this.infinity_dist*p*Math.sin(B),ct=this.y0+this.infinity_dist*(this.cos_p14*h-this.sin_p14*p*j)),t.x=$,t.y=ct,t},inverse:function Nr(t){var h,p,B,j,X,it;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(h=Math.sqrt(t.x*t.x+t.y*t.y))?(j=Math.atan2(h,this.rc),p=Math.sin(j),it=Wi((B=Math.cos(j))*this.sin_p14+t.y*p*this.cos_p14/h),X=Math.atan2(t.x*p,h*this.cos_p14*B-t.y*this.sin_p14*p),X=Bt(this.long0+X)):(it=this.phic0,X=0),t.x=X,t.y=it,t},names:["gnom"]},Ss={init:function er(){this.sphere||(this.k0=Ft(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function jr(t){var B,j,p=t.y,X=Bt(t.x-this.long0);if(this.sphere)B=this.x0+this.a*X*Math.cos(this.lat_ts),j=this.y0+this.a*Math.sin(p)/Math.cos(this.lat_ts);else{var it=sn(this.e,Math.sin(p));B=this.x0+this.a*this.k0*X,j=this.y0+this.a*it*.5/this.k0}return t.x=B,t.y=j,t},inverse:function ir(t){var h,p;return t.x-=this.x0,t.y-=this.y0,this.sphere?(h=Bt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),p=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(p=function Ur(t,h){var p=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(h)-p)<1e-6)return h<0?-1*u:u;for(var j,X,it,$,B=Math.asin(.5*h),ct=0;ct<30;ct++)if(X=Math.sin(B),it=Math.cos(B),$=t*X,B+=j=Math.pow(1-$*$,2)/(2*it)*(h/(1-t*t)-X/(1-$*$)+.5/t*Math.log((1-$)/(1+$))),Math.abs(j)<=1e-10)return B;return NaN}(this.e,2*t.y*this.k0/this.a),h=Bt(this.long0+t.x/(this.a*this.k0))),t.x=h,t.y=p,t},names:["cea"]},nr={init:function Is(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function Br(t){var p=t.y,B=Bt(t.x-this.long0),j=Dn(p-this.lat0);return t.x=this.x0+this.a*B*this.rc,t.y=this.y0+this.a*j,t},inverse:function Ga(t){var p=t.y;return t.x=Bt(this.long0+(t.x-this.x0)/(this.a*this.rc)),t.y=Dn(this.lat0+(p-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Nn={init:function rr(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ln(this.es),this.e1=_n(this.es),this.e2=Ki(this.es),this.e3=ts(this.es),this.ml0=this.a*di(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function ki(t){var B,j,X,p=t.y,it=Bt(t.x-this.long0);if(X=it*Math.sin(p),this.sphere)Math.abs(p)<=e?(B=this.a*it,j=-1*this.a*this.lat0):(B=this.a*Math.sin(X)/Math.tan(p),j=this.a*(Dn(p-this.lat0)+(1-Math.cos(X))/Math.tan(p)));else if(Math.abs(p)<=e)B=this.a*it,j=-1*this.ml0;else{var $=wn(this.a,this.e,Math.sin(p))/Math.tan(p);B=$*Math.sin(X),j=this.a*di(this.e0,this.e1,this.e2,this.e3,p)-this.ml0+$*(1-Math.cos(X))}return t.x=B+this.x0,t.y=j+this.y0,t},inverse:function Wr(t){var h,p,B,j,X,it,$,ct,Mt;if(B=t.x-this.x0,j=t.y-this.y0,this.sphere)if(Math.abs(j+this.a*this.lat0)<=e)h=Bt(B/this.a+this.long0),p=0;else{var Ut;for($=B*B/this.a/this.a+(it=this.lat0+j/this.a)*it,ct=it,X=20;X;--X)if(ct+=Mt=-1*(it*(ct*(Ut=Math.tan(ct))+1)-ct-.5*(ct*ct+$)*Ut)/((ct-it)/Ut-1),Math.abs(Mt)<=e){p=ct;break}h=Bt(this.long0+Math.asin(B*Math.tan(ct)/this.a)/Math.sin(p))}else if(Math.abs(j+this.ml0)<=e)p=0,h=Bt(this.long0+B/this.a);else{var Rt,kt,se,re,ae;for($=B*B/this.a/this.a+(it=(this.ml0+j)/this.a)*it,ct=it,X=20;X;--X)if(ae=this.e*Math.sin(ct),Rt=Math.sqrt(1-ae*ae)*Math.tan(ct),kt=this.a*di(this.e0,this.e1,this.e2,this.e3,ct),se=this.e0-2*this.e1*Math.cos(2*ct)+4*this.e2*Math.cos(4*ct)-6*this.e3*Math.cos(6*ct),ct-=Mt=(it*(Rt*(re=kt/this.a)+1)-re-.5*Rt*(re*re+$))/(this.es*Math.sin(2*ct)*(re*re+$-2*it*re)/(4*Rt)+(it-re)*(Rt*se-2/Math.sin(2*ct))-se),Math.abs(Mt)<=e){p=ct;break}Rt=Math.sqrt(1-this.es*Math.pow(Math.sin(p),2))*Math.tan(p),h=Bt(this.long0+Math.asin(B*Rt/this.a)/Math.sin(p))}return t.x=h,t.y=p,t},names:["Polyconic","poly"]},Ka={init:function lr(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function Gr(t){var h,it=(t.y-this.lat0)/f*1e-5,$=t.x-this.long0,ct=1,Mt=0;for(h=1;h<=10;h++)Mt+=this.A[h]*(ct*=it);var ae,Ut=Mt,Rt=$,kt=1,se=0,_e=0,Pe=0;for(h=1;h<=6;h++)ae=se*Ut+kt*Rt,_e=_e+this.B_re[h]*(kt=kt*Ut-se*Rt)-this.B_im[h]*(se=ae),Pe=Pe+this.B_im[h]*kt+this.B_re[h]*se;return t.x=Pe*this.a+this.x0,t.y=_e*this.a+this.y0,t},inverse:function zr(t){var h,Rt,it=(t.y-this.y0)/this.a,$=(t.x-this.x0)/this.a,ct=1,Mt=0,kt=0,se=0;for(h=1;h<=6;h++)Rt=Mt*it+ct*$,kt=kt+this.C_re[h]*(ct=ct*it-Mt*$)-this.C_im[h]*(Mt=Rt),se=se+this.C_im[h]*ct+this.C_re[h]*Mt;for(var re=0;re<this.iterations;re++){var Ze,ae=kt,_e=se,We=it,ze=$;for(h=2;h<=6;h++)Ze=_e*kt+ae*se,We+=(h-1)*(this.B_re[h]*(ae=ae*kt-_e*se)-this.B_im[h]*(_e=Ze)),ze+=(h-1)*(this.B_im[h]*ae+this.B_re[h]*_e);ae=1,_e=0;var me=this.B_re[1],Ke=this.B_im[1];for(h=2;h<=6;h++)Ze=_e*kt+ae*se,me+=h*(this.B_re[h]*(ae=ae*kt-_e*se)-this.B_im[h]*(_e=Ze)),Ke+=h*(this.B_im[h]*ae+this.B_re[h]*_e);var Oe=me*me+Ke*Ke;kt=(We*me+ze*Ke)/Oe,se=(ze*me-We*Ke)/Oe}var Re=kt,He=se,Fi=1,Li=0;for(h=1;h<=9;h++)Li+=this.D[h]*(Fi*=Re);var on=this.lat0+Li*f*1e5;return t.x=this.long0+He,t.y=on,t},names:["New_Zealand_Map_Grid","nzmg"]},mn={init:function ka(){},forward:function hr(t){var p=t.y,B=Bt(t.x-this.long0),j=this.x0+this.a*B,X=this.y0+this.a*Math.log(Math.tan(Math.PI/4+p/2.5))*1.25;return t.x=j,t.y=X,t},inverse:function ur(t){t.x-=this.x0,t.y-=this.y0;var h=Bt(this.long0+t.x/this.a),p=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=h,t.y=p,t},names:["Miller_Cylindrical","mill"]},Ya={init:function cr(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Jn(this.es)},forward:function Xa(t){var h,p,B=t.x,j=t.y;if(B=Bt(B-this.long0),this.sphere){if(this.m)for(var X=this.n*Math.sin(j),it=20;it;--it){var $=(this.m*j+Math.sin(j)-X)/(this.m+Math.cos(j));if(j-=$,Math.abs($)<e)break}else j=1!==this.n?Math.asin(this.n*Math.sin(j)):j;h=this.a*this.C_x*B*(this.m+Math.cos(j)),p=this.a*this.C_y*j}else{var ct=Math.sin(j),Mt=Math.cos(j);p=this.a*ji(j,ct,Mt,this.en),h=this.a*B*Mt/Math.sqrt(1-this.es*ct*ct)}return t.x=h,t.y=p,t},inverse:function Va(t){var h,B,j;return t.x-=this.x0,B=t.x/this.a,t.y-=this.y0,h=t.y/this.a,this.sphere?(h/=this.C_y,B/=this.C_x*(this.m+Math.cos(h)),this.m?h=Wi((this.m*h+Math.sin(h))/this.n):1!==this.n&&(h=Wi(Math.sin(h)/this.n)),B=Bt(B+this.long0),h=Dn(h)):(h=ys(t.y/this.a,this.es,this.en),(j=Math.abs(h))<u?(j=Math.sin(h),B=Bt(this.long0+t.x*Math.sqrt(1-this.es*j*j)/(this.a*Math.cos(h)))):j-e<u&&(B=this.long0)),t.x=B,t.y=h,t},names:["Sinusoidal","sinu"]},$a={init:function dr(){},forward:function Ha(t){for(var p=t.y,B=Bt(t.x-this.long0),j=p,X=Math.PI*Math.sin(p);;){var it=-(j+Math.sin(j)-X)/(1+Math.cos(j));if(j+=it,Math.abs(it)<e)break}j/=2,Math.PI/2-Math.abs(p)<e&&(B=0);var $=.900316316158*this.a*B*Math.cos(j)+this.x0,ct=1.4142135623731*this.a*Math.sin(j)+this.y0;return t.x=$,t.y=ct,t},inverse:function Ja(t){var h,p;t.x-=this.x0,t.y-=this.y0,p=t.y/(1.4142135623731*this.a),Math.abs(p)>.999999999999&&(p=.999999999999),h=Math.asin(p);var B=Bt(this.long0+t.x/(.900316316158*this.a*Math.cos(h)));B<-Math.PI&&(B=-Math.PI),B>Math.PI&&(B=Math.PI),p=(2*h+Math.sin(2*h))/Math.PI,Math.abs(p)>1&&(p=1);var j=Math.asin(p);return t.x=B,t.y=j,t},names:["Mollweide","moll"]},De={init:function fr(){Math.abs(this.lat1+this.lat2)<e||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ln(this.es),this.e1=_n(this.es),this.e2=Ki(this.es),this.e3=ts(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ft(this.e,this.sinphi,this.cosphi),this.ml1=di(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<e?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ft(this.e,this.sinphi,this.cosphi),this.ml2=di(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=di(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function bs(t){var B,h=t.x,p=t.y;if(this.sphere)B=this.a*(this.g-p);else{var j=di(this.e0,this.e1,this.e2,this.e3,p);B=this.a*(this.g-j)}var X=this.ns*Bt(h-this.long0),it=this.x0+B*Math.sin(X),$=this.y0+this.rh-B*Math.cos(X);return t.x=it,t.y=$,t},inverse:function Ls(t){var h,p,B,j;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(p=Math.sqrt(t.x*t.x+t.y*t.y),h=1):(p=-Math.sqrt(t.x*t.x+t.y*t.y),h=-1);var X=0;return 0!==p&&(X=Math.atan2(h*t.x,h*t.y)),this.sphere?(j=Bt(this.long0+X/this.ns),B=Dn(this.g-p/this.a),t.x=j,t.y=B,t):(B=es(this.g-p/this.a,this.e0,this.e1,this.e2,this.e3),j=Bt(this.long0+X/this.ns),t.x=j,t.y=B,t)},names:["Equidistant_Conic","eqdc"]},rn={init:function qa(){this.R=this.a},forward:function to(t){var j,X,p=t.y,B=Bt(t.x-this.long0);Math.abs(p)<=e&&(j=this.x0+this.R*B,X=this.y0);var it=Wi(2*Math.abs(p/Math.PI));(Math.abs(B)<=e||Math.abs(Math.abs(p)-u)<=e)&&(j=this.x0,X=p>=0?this.y0+Math.PI*this.R*Math.tan(.5*it):this.y0+Math.PI*this.R*-Math.tan(.5*it));var $=.5*Math.abs(Math.PI/B-B/Math.PI),ct=$*$,Mt=Math.sin(it),Ut=Math.cos(it),Rt=Ut/(Mt+Ut-1),se=Rt*(2/Mt-1),re=se*se,ae=Math.PI*this.R*($*(Rt-re)+Math.sqrt(ct*(Rt-re)*(Rt-re)-(re+ct)*(Rt*Rt-re)))/(re+ct);B<0&&(ae=-ae),j=this.x0+ae;var _e=ct+Rt;return ae=Math.PI*this.R*(se*_e-$*Math.sqrt((re+ct)*(ct+1)-_e*_e))/(re+ct),X=p>=0?this.y0+ae:this.y0-ae,t.x=j,t.y=X,t},inverse:function Vr(t){var h,p,B,j,X,it,$,ct,Mt,Ut,Rt,kt;return t.x-=this.x0,t.y-=this.y0,Rt=Math.PI*this.R,X=(B=t.x/Rt)*B+(j=t.y/Rt)*j,Rt=3*(j*j/(ct=-2*(it=-Math.abs(j)*(1+X))+1+2*j*j+X*X)+(2*($=it-2*j*j+B*B)*$*$/ct/ct/ct-9*it*$/ct/ct)/27)/(Mt=(it-$*$/3/ct)/ct)/(Ut=2*Math.sqrt(-Mt/3)),Math.abs(Rt)>1&&(Rt=Rt>=0?1:-1),kt=Math.acos(Rt)/3,p=t.y>=0?(-Ut*Math.cos(kt+Math.PI/3)-$/3/ct)*Math.PI:-(-Ut*Math.cos(kt+Math.PI/3)-$/3/ct)*Math.PI,h=Math.abs(B)<e?this.long0:Bt(this.long0+Math.PI*(X-1+Math.sqrt(1+2*(B*B-j*j)+X*X))/2/B),t.x=h,t.y=p,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},io={init:function eo(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function _r(t){var it,$,ct,Mt,Ut,Rt,kt,se,re,ae,_e,Pe,Ze,We,ze,me,Ke,Oe,Re,He,Fi,Li,h=t.x,p=t.y,B=Math.sin(t.y),j=Math.cos(t.y),X=Bt(h-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=e?(t.x=this.x0+this.a*(u-p)*Math.sin(X),t.y=this.y0-this.a*(u-p)*Math.cos(X),t):Math.abs(this.sin_p12+1)<=e?(t.x=this.x0+this.a*(u+p)*Math.sin(X),t.y=this.y0+this.a*(u+p)*Math.cos(X),t):(Oe=this.sin_p12*B+this.cos_p12*j*Math.cos(X),Ke=(me=Math.acos(Oe))?me/Math.sin(me):1,t.x=this.x0+this.a*Ke*j*Math.sin(X),t.y=this.y0+this.a*Ke*(this.cos_p12*B-this.sin_p12*j*Math.cos(X)),t):(it=Ln(this.es),$=_n(this.es),ct=Ki(this.es),Mt=ts(this.es),Math.abs(this.sin_p12-1)<=e?(Ut=this.a*di(it,$,ct,Mt,u),Rt=this.a*di(it,$,ct,Mt,p),t.x=this.x0+(Ut-Rt)*Math.sin(X),t.y=this.y0-(Ut-Rt)*Math.cos(X),t):Math.abs(this.sin_p12+1)<=e?(Ut=this.a*di(it,$,ct,Mt,u),Rt=this.a*di(it,$,ct,Mt,p),t.x=this.x0+(Ut+Rt)*Math.sin(X),t.y=this.y0+(Ut+Rt)*Math.cos(X),t):(kt=B/j,se=wn(this.a,this.e,this.sin_p12),re=wn(this.a,this.e,B),ae=Math.atan((1-this.es)*kt+this.es*se*this.sin_p12/(re*j)),Re=0===(_e=Math.atan2(Math.sin(X),this.cos_p12*Math.tan(ae)-this.sin_p12*Math.cos(X)))?Math.asin(this.cos_p12*Math.sin(ae)-this.sin_p12*Math.cos(ae)):Math.abs(Math.abs(_e)-Math.PI)<=e?-Math.asin(this.cos_p12*Math.sin(ae)-this.sin_p12*Math.cos(ae)):Math.asin(Math.sin(X)*Math.cos(ae)/Math.sin(_e)),Pe=this.e*this.sin_p12/Math.sqrt(1-this.es),Ze=this.e*this.cos_p12*Math.cos(_e)/Math.sqrt(1-this.es),t.x=this.x0+(me=se*Re*(1-(He=Re*Re)*(ze=Ze*Ze)*(1-ze)/6+(Fi=He*Re)/8*(We=Pe*Ze)*(1-2*ze)+(Li=Fi*Re)/120*(ze*(4-7*ze)-3*Pe*Pe*(1-7*ze))-Li*Re/48*We))*Math.sin(_e),t.y=this.y0+me*Math.cos(_e),t))},inverse:function Yr(t){var h,p,B,j,X,it,$,ct,Mt,Ut,Rt,kt,re,ae,_e,Pe,Ze,We,ze,me,Ke,Oe,Re;return t.x-=this.x0,t.y-=this.y0,this.sphere?(h=Math.sqrt(t.x*t.x+t.y*t.y))>2*u*this.a?void 0:(p=h/this.a,B=Math.sin(p),j=Math.cos(p),X=this.long0,Math.abs(h)<=e?it=this.lat0:(it=Wi(j*this.sin_p12+t.y*B*this.cos_p12/h),$=Math.abs(this.lat0)-u,X=Math.abs($)<=e?Bt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)):Bt(this.long0+Math.atan2(t.x*B,h*this.cos_p12*j-t.y*this.sin_p12*B))),t.x=X,t.y=it,t):(ct=Ln(this.es),Mt=_n(this.es),Ut=Ki(this.es),Rt=ts(this.es),Math.abs(this.sin_p12-1)<=e?(it=es(((kt=this.a*di(ct,Mt,Ut,Rt,u))-(h=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,ct,Mt,Ut,Rt),X=Bt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=X,t.y=it,t):Math.abs(this.sin_p12+1)<=e?(kt=this.a*di(ct,Mt,Ut,Rt,u),it=es(((h=Math.sqrt(t.x*t.x+t.y*t.y))-kt)/this.a,ct,Mt,Ut,Rt),X=Bt(this.long0+Math.atan2(t.x,t.y)),t.x=X,t.y=it,t):(h=Math.sqrt(t.x*t.x+t.y*t.y),_e=Math.atan2(t.x,t.y),re=wn(this.a,this.e,this.sin_p12),Pe=Math.cos(_e),ze=3*this.es*(1-(We=-(Ze=this.e*this.cos_p12*Pe)*Ze/(1-this.es)))*this.sin_p12*this.cos_p12*Pe/(1-this.es),Oe=1-We*(Ke=(me=h/re)-We*(1+We)*Math.pow(me,3)/6-ze*(1+3*We)*Math.pow(me,4)/24)*Ke/2-me*Ke*Ke*Ke/6,ae=Math.asin(this.sin_p12*Math.cos(Ke)+this.cos_p12*Math.sin(Ke)*Pe),X=Bt(this.long0+Math.asin(Math.sin(_e)*Math.sin(Ke)/Math.cos(ae))),Re=Math.sin(ae),it=Math.atan2((Re-this.es*Oe*this.sin_p12)*Math.tan(ae),Re*(1-this.es)),t.x=X,t.y=it,t))},names:["Azimuthal_Equidistant","aeqd"]},an={init:function no(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function so(t){var h,p,B,j,it,$,ct,Ut=t.y;return B=Bt(t.x-this.long0),h=Math.sin(Ut),p=Math.cos(Ut),j=Math.cos(B),((it=this.sin_p14*h+this.cos_p14*p*j)>0||Math.abs(it)<=e)&&($=1*this.a*p*Math.sin(B),ct=this.y0+1*this.a*(this.cos_p14*h-this.sin_p14*p*j)),t.x=$,t.y=ct,t},inverse:function Hr(t){var h,p,B,j,X,it,$;return t.x-=this.x0,t.y-=this.y0,p=Wi((h=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),B=Math.sin(p),j=Math.cos(p),it=this.long0,Math.abs(h)<=e?($=this.lat0,t.x=it,t.y=$,t):($=Wi(j*this.sin_p14+t.y*B*this.cos_p14/h),X=Math.abs(this.lat0)-u,Math.abs(X)<=e?(it=Bt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=it,t.y=$,t):(it=Bt(this.long0+Math.atan2(t.x*B,h*this.cos_p14*j-t.y*this.sin_p14*B)),t.x=it,t.y=$,t))},names:["ortho"]};var qe_AREA_0=1,qe_AREA_1=2,qe_AREA_2=3,qe_AREA_3=4;function ss(t,h,p,B){var j;return t<e?(B.value=qe_AREA_0,j=0):(j=Math.atan2(h,p),Math.abs(j)<=s?B.value=qe_AREA_0:j>s&&j<=u+s?(B.value=qe_AREA_1,j-=u):j>u+s||j<=-(u+s)?(B.value=qe_AREA_2,j=j>=0?j-_:j+_):(B.value=qe_AREA_3,j+=u)),j}function pn(t,h){var p=t+h;return p<-_?p+=g:p>+_&&(p-=g),p}const oo={init:function ro(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=u-s/2?5:this.lat0<=-(u-s/2)?6:Math.abs(this.long0)<=s?1:Math.abs(this.long0)<=u+s?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function ao(t){var p,B,j,X,it,$,h={x:0,y:0},ct={value:0};if(t.x-=this.long0,p=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,B=t.x,5===this.face)X=u-p,B>=s&&B<=u+s?(ct.value=qe_AREA_0,j=B-u):B>u+s||B<=-(u+s)?(ct.value=qe_AREA_1,j=B>0?B-_:B+_):B>-(u+s)&&B<=-s?(ct.value=qe_AREA_2,j=B+u):(ct.value=qe_AREA_3,j=B);else if(6===this.face)X=u+p,B>=s&&B<=u+s?(ct.value=qe_AREA_0,j=-B+u):B<s&&B>=-s?(ct.value=qe_AREA_1,j=-B):B<-s&&B>=-(u+s)?(ct.value=qe_AREA_2,j=-B-u):(ct.value=qe_AREA_3,j=B>0?-B+_:-B-_);else{var Mt,Ut,Rt,kt,se,re;2===this.face?B=pn(B,+u):3===this.face?B=pn(B,+_):4===this.face&&(B=pn(B,-u)),kt=Math.sin(p),se=Math.cos(p),re=Math.sin(B),Mt=se*Math.cos(B),Ut=se*re,Rt=kt,1===this.face?j=ss(X=Math.acos(Mt),Rt,Ut,ct):2===this.face?j=ss(X=Math.acos(Ut),Rt,-Mt,ct):3===this.face?j=ss(X=Math.acos(-Mt),Rt,-Ut,ct):4===this.face?j=ss(X=Math.acos(-Ut),Rt,Mt,ct):(X=j=0,ct.value=qe_AREA_0)}return $=Math.atan(12/_*(j+Math.acos(Math.sin(j)*Math.cos(s))-u)),it=Math.sqrt((1-Math.cos(X))/(Math.cos($)*Math.cos($))/(1-Math.cos(Math.atan(1/Math.cos(j))))),ct.value===qe_AREA_1?$+=u:ct.value===qe_AREA_2?$+=_:ct.value===qe_AREA_3&&($+=1.5*_),h.x=it*Math.cos($),h.y=it*Math.sin($),h.x=h.x*this.a+this.x0,h.y=h.y*this.a+this.y0,t.x=h.x,t.y=h.y,t},inverse:function Qr(t){var p,B,j,X,it,$,ct,Mt,Ut,ae,_e,Pe,h={lam:0,phi:0},Rt={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,B=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),p=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?Rt.value=qe_AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(Rt.value=qe_AREA_1,p-=u):t.x<0&&-t.x>=Math.abs(t.y)?(Rt.value=qe_AREA_2,p=p<0?p+_:p-_):(Rt.value=qe_AREA_3,p+=u),Ut=_/12*Math.tan(p),it=Math.sin(Ut)/(Math.cos(Ut)-1/Math.sqrt(2)),$=Math.atan(it),(ct=1-(j=Math.cos(p))*j*(X=Math.tan(B))*X*(1-Math.cos(Math.atan(1/Math.cos($)))))<-1?ct=-1:ct>1&&(ct=1),5===this.face)Mt=Math.acos(ct),h.phi=u-Mt,h.lam=Rt.value===qe_AREA_0?$+u:Rt.value===qe_AREA_1?$<0?$+_:$-_:Rt.value===qe_AREA_2?$-u:$;else if(6===this.face)Mt=Math.acos(ct),h.phi=Mt-u,h.lam=Rt.value===qe_AREA_0?-$+u:Rt.value===qe_AREA_1?-$:Rt.value===qe_AREA_2?-$-u:$<0?-$-_:-$+_;else{var kt,se,re;Ut=(kt=ct)*kt,se=(Ut+=(re=Ut>=1?0:Math.sqrt(1-Ut)*Math.sin($))*re)>=1?0:Math.sqrt(1-Ut),Rt.value===qe_AREA_1?(Ut=se,se=-re,re=Ut):Rt.value===qe_AREA_2?(se=-se,re=-re):Rt.value===qe_AREA_3&&(Ut=se,se=re,re=-Ut),2===this.face?(Ut=kt,kt=-se,se=Ut):3===this.face?(kt=-kt,se=-se):4===this.face&&(Ut=kt,kt=se,se=-Ut),h.phi=Math.acos(-re)-u,h.lam=Math.atan2(se,kt),2===this.face?h.lam=pn(h.lam,-u):3===this.face?h.lam=pn(h.lam,-_):4===this.face&&(h.lam=pn(h.lam,+u))}return 0!==this.es&&(ae=h.phi<0?1:0,_e=Math.tan(h.phi),Pe=this.b/Math.sqrt(_e*_e+this.one_minus_f_squared),h.phi=Math.atan(Math.sqrt(this.a*this.a-Pe*Pe)/(this.one_minus_f*Pe)),ae&&(h.phi=-h.phi)),h.lam+=this.long0,t.x=h.lam,t.y=h.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var ws=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Zn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],mr=m/5,lo=1/mr,Ds=function(t,h){return t[0]+h*(t[1]+h*(t[2]+h*t[3]))};const Bo={init:function ea(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function ho(t){var h=Bt(t.x-this.long0),p=Math.abs(t.y),B=Math.floor(p*mr);B<0?B=0:B>=18&&(B=17);var j={x:Ds(ws[B],p=m*(p-lo*B))*h,y:Ds(Zn[B],p)};return t.y<0&&(j.y=-j.y),j.x=j.x*this.a*.8487+this.x0,j.y=j.y*this.a*1.3523+this.y0,j},inverse:function ia(t){var h={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(h.y>=1)h.x/=ws[18][0],h.y=t.y<0?-u:u;else{var p=Math.floor(18*h.y);for(p<0?p=0:p>=18&&(p=17);;)if(Zn[p][0]>h.y)--p;else{if(!(Zn[p+1][0]<=h.y))break;++p}var B=Zn[p],j=5*(h.y-B[0])/(Zn[p+1][0]-B[0]);j=function Uo(t,h,p,B){for(var j=h;B;--B){var X=t(j);if(j-=X,Math.abs(X)<p)break}return j}(function(X){return(Ds(B,X)-h.y)/function(t,h){return t[1]+h*(2*t[2]+3*h*t[3])}(B,X)},j,e,100),h.x/=Ds(ws[p],j),h.y=(5*p+j)*l,t.y<0&&(h.y=-h.y)}return h.x=Bt(h.x+this.long0),h},names:["Robinson","robin"]},n={init:function Wo(){this.name="geocent"},forward:function uo(t){return ke(t,this.es,this.a)},inverse:function Go(t){return ni(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var o={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const Tt={init:function T(){if(Object.keys(o).forEach(function(p){if(typeof this[p]>"u")this[p]=o[p].def;else{if(o[p].num&&isNaN(this[p]))throw new Error("Invalid parameter value, must be numeric "+p+" = "+this[p]);o[p].num&&(this[p]=parseFloat(this[p]))}o[p].degrees&&(this[p]=this[p]*l)}.bind(this)),Math.abs(Math.abs(this.lat0)-u)<e?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<e?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,h=this.azi;this.cg=Math.cos(h),this.sg=Math.sin(h),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function U(t){t.x-=this.long0;var j,X,it,$,h=Math.sin(t.y),p=Math.cos(t.y),B=Math.cos(t.x);switch(this.mode){case 3:X=this.sinph0*h+this.cosph0*p*B;break;case 2:X=p*B;break;case 1:X=-h;break;case 0:X=h}switch(j=(X=this.pn1/(this.p-X))*p*Math.sin(t.x),this.mode){case 3:X*=this.cosph0*h-this.sinph0*p*B;break;case 2:X*=h;break;case 0:X*=-p*B;break;case 1:X*=p*B}return j=(j*this.cg-X*this.sg)*this.cw*($=1/((it=X*this.cg+j*this.sg)*this.sw*this.h1+this.cw)),X=it*$,t.x=j*this.a,t.y=X*this.a,t},inverse:function H(t){t.x/=this.a,t.y/=this.a;var p,B,j,h={x:t.x,y:t.y};t.x=(p=this.pn1*t.x*(j=1/(this.pn1-t.y*this.sw)))*this.cg+(B=this.pn1*t.y*this.cw*j)*this.sg,t.y=B*this.cg-p*this.sg;var X=Oi(t.x,t.y);if(Math.abs(X)<e)h.x=0,h.y=t.y;else{var it,$;switch($=1-X*X*this.pfact,$=(this.p-Math.sqrt($))/(this.pn1/X+X/this.pn1),it=Math.sqrt(1-$*$),this.mode){case 3:h.y=Math.asin(it*this.sinph0+t.y*$*this.cosph0/X),t.y=(it-this.sinph0*Math.sin(h.y))*X,t.x*=$*this.cosph0;break;case 2:h.y=Math.asin(t.y*$/X),t.y=it*X,t.x*=$;break;case 0:h.y=Math.asin(it),t.y=-t.y;break;case 1:h.y=-Math.asin(it)}h.x=Math.atan2(t.x,t.y)}return t.x=h.x+this.long0,t.y=h.y,t},names:["Tilted_Perspective","tpers"]},le={init:function bt(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,h=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=h,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function Dt(t){var B,j,X,it,h=t.x,p=t.y;if(h-=this.long0,"ellipse"===this.shape){p=Math.atan(this.radius_p2*Math.tan(p));var $=this.radius_p/Oi(this.radius_p*Math.cos(p),Math.sin(p));if(j=$*Math.cos(h)*Math.cos(p),X=$*Math.sin(h)*Math.cos(p),it=$*Math.sin(p),(this.radius_g-j)*j-X*X-it*it*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;B=this.radius_g-j,this.flip_axis?(t.x=this.radius_g_1*Math.atan(X/Oi(it,B)),t.y=this.radius_g_1*Math.atan(it/B)):(t.x=this.radius_g_1*Math.atan(X/B),t.y=this.radius_g_1*Math.atan(it/Oi(X,B)))}else"sphere"===this.shape&&(B=Math.cos(p),j=Math.cos(h)*B,X=Math.sin(h)*B,it=Math.sin(p),B=this.radius_g-j,this.flip_axis?(t.x=this.radius_g_1*Math.atan(X/Oi(it,B)),t.y=this.radius_g_1*Math.atan(it/B)):(t.x=this.radius_g_1*Math.atan(X/B),t.y=this.radius_g_1*Math.atan(it/Oi(X,B))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function Nt(t){var j,X,it,$,h=-1,p=0,B=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(B=Math.tan(t.y/this.radius_g_1),p=Math.tan(t.x/this.radius_g_1)*Oi(1,B)):(p=Math.tan(t.x/this.radius_g_1),B=Math.tan(t.y/this.radius_g_1)*Oi(1,p));var ct=B/this.radius_p;if((it=(X=2*this.radius_g*h)*X-4*(j=p*p+ct*ct+h*h)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;$=(-X-Math.sqrt(it))/(2*j),h=this.radius_g+$*h,p*=$,B*=$,t.x=Math.atan2(p,h),t.y=Math.atan(B*Math.cos(t.x)/h),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(B=Math.tan(t.y/this.radius_g_1),p=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+B*B)):(p=Math.tan(t.x/this.radius_g_1),B=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+p*p)),(it=(X=2*this.radius_g*h)*X-4*(j=p*p+B*B+h*h)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;$=(-X-Math.sqrt(it))/(2*j),h=this.radius_g+$*h,p*=$,B*=$,t.x=Math.atan2(p,h),t.y=Math.atan(B*Math.cos(t.x)/h)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Ri.defaultDatum="WGS84",Ri.Proj=Fe,Ri.WGS84=new Ri.Proj("WGS84"),Ri.Point=Rn,Ri.toPoint=_i,Ri.defs=fe,Ri.nadgrid=function Qe(t,h){var p=new DataView(h),B=function _t(t){var h=t.getInt32(8,!1);return 11!==h&&(11!==(h=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(p),j=function pt(t,h){return{nFields:t.getInt32(8,h),nSubgridFields:t.getInt32(24,h),nSubgrids:t.getInt32(40,h),shiftType:St(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,h),fromSemiMinorAxis:t.getFloat64(136,h),toSemiMajorAxis:t.getFloat64(152,h),toSemiMinorAxis:t.getFloat64(168,h)}}(p,B),X=function Ht(t,h,p){for(var B=176,j=[],X=0;X<h.nSubgrids;X++){var it=ve(t,B,p),$=Te(t,B,it,p),ct=Math.round(1+(it.upperLongitude-it.lowerLongitude)/it.longitudeInterval),Mt=Math.round(1+(it.upperLatitude-it.lowerLatitude)/it.latitudeInterval);j.push({ll:[J(it.lowerLongitude),J(it.lowerLatitude)],del:[J(it.longitudeInterval),J(it.latitudeInterval)],lim:[ct,Mt],count:it.gridNodeCount,cvs:te($)}),B+=176+16*it.gridNodeCount}return j}(p,j,B),it={header:j,subgrids:X};return si[t]=it,it},Ri.transform=ai,Ri.mgrs=Gs,Ri.version="__VERSION__",function de(t){t.Proj.projections.add(nn),t.Proj.projections.add(Qt),t.Proj.projections.add(je),t.Proj.projections.add(zi),t.Proj.projections.add(Ps),t.Proj.projections.add(pa),t.Proj.projections.add(Ma),t.Proj.projections.add(Ca),t.Proj.projections.add(Ra),t.Proj.projections.add(is),t.Proj.projections.add(wr),t.Proj.projections.add(Ua),t.Proj.projections.add(Zr),t.Proj.projections.add(Ss),t.Proj.projections.add(nr),t.Proj.projections.add(Nn),t.Proj.projections.add(Ka),t.Proj.projections.add(mn),t.Proj.projections.add(Ya),t.Proj.projections.add($a),t.Proj.projections.add(De),t.Proj.projections.add(rn),t.Proj.projections.add(io),t.Proj.projections.add(an),t.Proj.projections.add(oo),t.Proj.projections.add(Bo),t.Proj.projections.add(n),t.Proj.projections.add(Tt),t.Proj.projections.add(le)}(Ri);const we=Ri},5604:function(jt){jt.exports=function(){"use strict";function ht(e,l,m,s,g){!function _(y,I,O,E,R){for(;E>O;){if(E-O>600){var N=E-O+1,K=I-O+1,rt=Math.log(N),b=.5*Math.exp(2*rt/3),L=.5*Math.sqrt(rt*b*(N-b)/N)*(K-N/2<0?-1:1);_(y,I,Math.max(O,Math.floor(I-K*b/N+L)),Math.min(E,Math.floor(I+(N-K)*b/N+L)),R)}var C=y[I],D=O,Y=E;for(a(y,O,I),R(y[E],C)>0&&a(y,O,E);D<Y;){for(a(y,D,Y),D++,Y--;R(y[D],C)<0;)D++;for(;R(y[Y],C)>0;)Y--}0===R(y[O],C)?a(y,O,Y):a(y,++Y,E),Y<=I&&(O=Y+1),I<=Y&&(E=Y-1)}}(e,l,m||0,s||e.length-1,g||z)}function a(e,l,m){var s=e[l];e[l]=e[m],e[m]=s}function z(e,l){return e<l?-1:e>l?1:0}var F=function(e){void 0===e&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function k(e,l,m){if(!m)return l.indexOf(e);for(var s=0;s<l.length;s++)if(m(e,l[s]))return s;return-1}function G(e,l){Z(e,0,e.children.length,l,e)}function Z(e,l,m,s,g){g||(g=r(null)),g.minX=1/0,g.minY=1/0,g.maxX=-1/0,g.maxY=-1/0;for(var _=l;_<m;_++){var y=e.children[_];A(g,e.leaf?s(y):y)}return g}function A(e,l){return e.minX=Math.min(e.minX,l.minX),e.minY=Math.min(e.minY,l.minY),e.maxX=Math.max(e.maxX,l.maxX),e.maxY=Math.max(e.maxY,l.maxY),e}function S(e,l){return e.minX-l.minX}function P(e,l){return e.minY-l.minY}function v(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function f(e){return e.maxX-e.minX+(e.maxY-e.minY)}function u(e,l){return e.minX<=l.minX&&e.minY<=l.minY&&l.maxX<=e.maxX&&l.maxY<=e.maxY}function c(e,l){return l.minX<=e.maxX&&l.minY<=e.maxY&&l.maxX>=e.minX&&l.maxY>=e.minY}function r(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(e,l,m,s,g){for(var _=[l,m];_.length;)if(!((m=_.pop())-(l=_.pop())<=s)){var y=l+Math.ceil((m-l)/s/2)*s;ht(e,y,l,m,g),_.push(l,y,y,m)}}return F.prototype.all=function(){return this._all(this.data,[])},F.prototype.search=function(e){var l=this.data,m=[];if(!c(e,l))return m;for(var s=this.toBBox,g=[];l;){for(var _=0;_<l.children.length;_++){var y=l.children[_],I=l.leaf?s(y):y;c(e,I)&&(l.leaf?m.push(y):u(e,I)?this._all(y,m):g.push(y))}l=g.pop()}return m},F.prototype.collides=function(e){var l=this.data;if(!c(e,l))return!1;for(var m=[];l;){for(var s=0;s<l.children.length;s++){var g=l.children[s],_=l.leaf?this.toBBox(g):g;if(c(e,_)){if(l.leaf||u(e,_))return!0;m.push(g)}}l=m.pop()}return!1},F.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var l=0;l<e.length;l++)this.insert(e[l]);return this}var m=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===m.height)this._splitRoot(this.data,m);else{if(this.data.height<m.height){var s=this.data;this.data=m,m=s}this._insert(m,this.data.height-m.height-1,!0)}else this.data=m;return this},F.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},F.prototype.clear=function(){return this.data=r([]),this},F.prototype.remove=function(e,l){if(!e)return this;for(var m,s,g,_=this.data,y=this.toBBox(e),I=[],O=[];_||I.length;){if(_||(_=I.pop(),s=I[I.length-1],m=O.pop(),g=!0),_.leaf){var E=k(e,_.children,l);if(-1!==E)return _.children.splice(E,1),I.push(_),this._condense(I),this}g||_.leaf||!u(_,y)?s?(m++,_=s.children[m],g=!1):_=null:(I.push(_),O.push(m),m=0,s=_,_=_.children[0])}return this},F.prototype.toBBox=function(e){return e},F.prototype.compareMinX=function(e,l){return e.minX-l.minX},F.prototype.compareMinY=function(e,l){return e.minY-l.minY},F.prototype.toJSON=function(){return this.data},F.prototype.fromJSON=function(e){return this.data=e,this},F.prototype._all=function(e,l){for(var m=[];e;)e.leaf?l.push.apply(l,e.children):m.push.apply(m,e.children),e=m.pop();return l},F.prototype._build=function(e,l,m,s){var g,_=m-l+1,y=this._maxEntries;if(_<=y)return G(g=r(e.slice(l,m+1)),this.toBBox),g;s||(s=Math.ceil(Math.log(_)/Math.log(y)),y=Math.ceil(_/Math.pow(y,s-1))),(g=r([])).leaf=!1,g.height=s;var I=Math.ceil(_/y),O=I*Math.ceil(Math.sqrt(y));d(e,l,m,O,this.compareMinX);for(var E=l;E<=m;E+=O){var R=Math.min(E+O-1,m);d(e,E,R,I,this.compareMinY);for(var N=E;N<=R;N+=I){var K=Math.min(N+I-1,R);g.children.push(this._build(e,N,K,s-1))}}return G(g,this.toBBox),g},F.prototype._chooseSubtree=function(e,l,m,s){for(;s.push(l),!l.leaf&&s.length-1!==m;){for(var g=1/0,_=1/0,y=void 0,I=0;I<l.children.length;I++){var O=l.children[I],E=v(O),R=(N=e,K=O,(Math.max(K.maxX,N.maxX)-Math.min(K.minX,N.minX))*(Math.max(K.maxY,N.maxY)-Math.min(K.minY,N.minY))-E);R<_?(_=R,g=E<g?E:g,y=O):R===_&&E<g&&(g=E,y=O)}l=y||l.children[0]}var N,K;return l},F.prototype._insert=function(e,l,m){var s=m?e:this.toBBox(e),g=[],_=this._chooseSubtree(s,this.data,l,g);for(_.children.push(e),A(_,s);l>=0&&g[l].children.length>this._maxEntries;)this._split(g,l),l--;this._adjustParentBBoxes(s,g,l)},F.prototype._split=function(e,l){var m=e[l],s=m.children.length,g=this._minEntries;this._chooseSplitAxis(m,g,s);var _=this._chooseSplitIndex(m,g,s),y=r(m.children.splice(_,m.children.length-_));y.height=m.height,y.leaf=m.leaf,G(m,this.toBBox),G(y,this.toBBox),l?e[l-1].children.push(y):this._splitRoot(m,y)},F.prototype._splitRoot=function(e,l){this.data=r([e,l]),this.data.height=e.height+1,this.data.leaf=!1,G(this.data,this.toBBox)},F.prototype._chooseSplitIndex=function(e,l,m){for(var s,g,_,y,I,O,E,R=1/0,N=1/0,K=l;K<=m-l;K++){var rt=Z(e,0,K,this.toBBox),b=Z(e,K,m,this.toBBox),L=(g=rt,_=b,void 0,void 0,void 0,void 0,y=Math.max(g.minX,_.minX),I=Math.max(g.minY,_.minY),O=Math.min(g.maxX,_.maxX),E=Math.min(g.maxY,_.maxY),Math.max(0,O-y)*Math.max(0,E-I)),w=v(rt)+v(b);L<R?(R=L,s=K,N=w<N?w:N):L===R&&w<N&&(N=w,s=K)}return s||m-l},F.prototype._chooseSplitAxis=function(e,l,m){var s=e.leaf?this.compareMinX:S,g=e.leaf?this.compareMinY:P;this._allDistMargin(e,l,m,s)<this._allDistMargin(e,l,m,g)&&e.children.sort(s)},F.prototype._allDistMargin=function(e,l,m,s){e.children.sort(s);for(var g=this.toBBox,_=Z(e,0,l,g),y=Z(e,m-l,m,g),I=f(_)+f(y),O=l;O<m-l;O++){var E=e.children[O];A(_,e.leaf?g(E):E),I+=f(_)}for(var R=m-l-1;R>=l;R--){var N=e.children[R];A(y,e.leaf?g(N):N),I+=f(y)}return I},F.prototype._adjustParentBBoxes=function(e,l,m){for(var s=m;s>=0;s--)A(l[s],e)},F.prototype._condense=function(e){for(var l=e.length-1,m=void 0;l>=0;l--)0===e[l].children.length?l>0?(m=e[l-1].children).splice(m.indexOf(e[l]),1):this.clear():G(e[l],this.toBBox)},F}()},8558:(jt,ht,a)=>{"use strict";a.d(ht,{j:()=>Le});var z=a(5118),F=a(5333),G=a(9265),Z=a(3089),A=a(5209),S=a(1590),P=a(9854),v=a(2421),f=a(4118),u=a(7021),c=a(9219);const r="units",d=[1,2,5],e=25.4/.28,m=class l extends v.Z{constructor(nt){nt=nt||{};const Q=document.createElement("div");Q.style.pointerEvents="none",super({element:Q,render:nt.render,target:nt.target});const x=void 0!==nt.className?nt.className:nt.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=x+"-inner",this.element.className=x+" "+f.XV,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==nt.minWidth?nt.minWidth:64,this.maxWidth_=nt.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(r,this.handleUnitsChanged_),this.setUnits(nt.units||"metric"),this.scaleBar_=nt.bar||!1,this.scaleBarSteps_=nt.steps||4,this.scaleBarText_=nt.text||!1,this.dpi_=nt.dpi||void 0}getUnits(){return this.get(r)}handleUnitsChanged_(){this.updateElement_()}setUnits(nt){this.set(r,nt)}setDpi(nt){this.dpi_=nt}updateElement_(){const nt=this.viewState_;if(!nt)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const Q=nt.center,x=nt.projection,W=this.getUnits();let et=(0,u._Q)(x,nt.resolution,Q,"degrees"==W?"degrees":"m");const yt=this.minWidth_*(this.dpi_||e)/e,Et=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||e)/e:void 0;let It=yt*et,wt="";if("degrees"==W){const Ue=u.Wm.degrees;It*=Ue,It<Ue/60?(wt="\u2033",et*=3600):It<Ue?(wt="\u2032",et*=60):wt="\xb0"}else"imperial"==W?It<.9144?(wt="in",et/=.0254):It<1609.344?(wt="ft",et/=.3048):(wt="mi",et/=1609.344):"nautical"==W?(et/=1852,wt="NM"):"metric"==W?It<.001?(wt="\u03bcm",et*=1e6):It<1?(wt="mm",et*=1e3):It<1e3?wt="m":(wt="km",et/=1e3):"us"==W?It<.9144?(wt="in",et*=39.37):It<1609.344?(wt="ft",et/=.30480061):(wt="mi",et/=1609.3472):(0,c.h)(!1,33);let ne,ye,oe,ie,Ge,Xe,Jt=3*Math.floor(Math.log(yt*et)/Math.log(10));for(;;){oe=Math.floor(Jt/3);const Ue=Math.pow(10,oe);if(ne=d[(Jt%3+3)%3]*Ue,ye=Math.round(ne/et),isNaN(ye))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==Et&&ye>=Et){ne=ie,ye=Ge,oe=Xe;break}if(ye>=yt)break;ie=ne,Ge=ye,Xe=oe,++Jt}const Ne=this.scaleBar_?this.createScaleBar(ye,ne,wt):ne.toFixed(oe<0?-oe:0)+" "+wt;this.renderedHTML_!=Ne&&(this.innerElement_.innerHTML=Ne,this.renderedHTML_=Ne),this.renderedWidth_!=ye&&(this.innerElement_.style.width=ye+"px",this.renderedWidth_=ye),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(nt,Q,x){const W=this.getScaleForResolution(),tt=W<1?Math.round(1/W).toLocaleString()+" : 1":"1 : "+Math.round(W).toLocaleString(),et=this.scaleBarSteps_,yt=nt/et,Et=[this.createMarker("absolute")];for(let wt=0;wt<et;++wt)Et.push(`<div><div class="ol-scale-singlebar ${wt%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even"}" style="width: ${yt}px;"></div>`+this.createMarker("relative")+(wt%2==0||2===et?this.createStepText(wt,nt,!1,Q,x):"")+"</div>");return Et.push(this.createStepText(et,nt,!0,Q,x)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${nt}px;">`+tt+"</div>":"")+Et.join("")}createMarker(nt){return`<div class="ol-scale-step-marker" style="position: ${nt}; top: ${"absolute"===nt?3:-10}px;"></div>`}createStepText(nt,Q,x,W,tt){const yt=(0===nt?0:Math.round(W/this.scaleBarSteps_*nt*100)/100)+(0===nt?"":" "+tt);return`<div class="ol-scale-step-text" style="margin-left: ${0===nt?-3:Q/this.scaleBarSteps_*-1}px;text-align: ${0===nt?"left":"center"};min-width: ${0===nt?0:Q/this.scaleBarSteps_*2}px;left: ${x?Q+"px":"unset"};">`+yt+"</div>"}getScaleForResolution(){return(0,u._Q)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||e)}render(nt){const Q=nt.frameState;this.viewState_=Q?Q.viewState:null,this.updateElement_()}};var s=a(8284),g=a(4256),_=a(7847),y=a(1242);const I="projection",O="coordinateFormat",R=class E extends v.Z{constructor(nt){nt=nt||{};const Q=document.createElement("div");Q.className=void 0!==nt.className?nt.className:"ol-mouse-position",super({element:Q,render:nt.render,target:nt.target}),this.addChangeListener(I,this.handleProjectionChanged_),nt.coordinateFormat&&this.setCoordinateFormat(nt.coordinateFormat),nt.projection&&this.setProjection(nt.projection),this.renderOnMouseOut_=void 0!==nt.placeholder,this.placeholder_=this.renderOnMouseOut_?nt.placeholder:"&#160;",this.renderedHTML_=Q.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==nt.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(O)}getProjection(){return this.get(I)}handleMouseMove(nt){const Q=this.getMap();this.updateHTML_(Q.getEventPixel(nt))}handleMouseOut(nt){this.updateHTML_(null)}setMap(nt){if(super.setMap(nt),nt){const Q=nt.getViewport();this.listenerKeys.push((0,_.oL)(Q,g.Z.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,_.oL)(Q,g.Z.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(nt){this.set(O,nt)}setProjection(nt){this.set(I,(0,u.U2)(nt))}updateHTML_(nt){let Q=this.placeholder_;if(nt&&this.mapProjection_){if(!this.transform_){const tt=this.getProjection();this.transform_=tt?(0,u.WO)(this.mapProjection_,tt):u.gD}const W=this.getMap().getCoordinateFromPixelInternal(nt);if(W){const tt=(0,u.Cs)();if(tt&&(this.transform_=(0,u.WO)(this.mapProjection_,tt)),this.transform_(W,W),this.wrapX_){const yt=tt||this.getProjection()||this.mapProjection_;(0,y.Cf)(W,yt)}const et=this.getCoordinateFormat();Q=et?et(W):W.toString()}}(!this.renderedHTML_||Q!==this.renderedHTML_)&&(this.element.innerHTML=Q,this.renderedHTML_=Q)}render(nt){const Q=nt.frameState;Q?this.mapProjection_!=Q.viewState.projection&&(this.mapProjection_=Q.viewState.projection,this.transform_=null):this.mapProjection_=null}};var N=a(2431),K=a(8963),rt=a(4211);const b=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function M(Me){const nt=Me.body;return!!(nt.webkitRequestFullscreen||nt.requestFullscreen&&Me.fullscreenEnabled)}function C(Me){return!(!Me.webkitIsFullScreen&&!Me.fullscreenElement)}function D(Me){Me.requestFullscreen?Me.requestFullscreen():Me.webkitRequestFullscreen&&Me.webkitRequestFullscreen()}const V=class w extends v.Z{constructor(nt){nt=nt||{},super({element:document.createElement("div"),target:nt.target}),this.keys_=void 0!==nt.keys&&nt.keys,this.source_=nt.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==nt.className?nt.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==nt.activeClassName?nt.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==nt.inactiveClassName?nt.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const Q=void 0!==nt.label?nt.label:"\u2922";this.labelNode_="string"==typeof Q?document.createTextNode(Q):Q;const x=void 0!==nt.labelActive?nt.labelActive:"\xd7";this.labelActiveNode_="string"==typeof x?document.createTextNode(x):x;const W=nt.tipLabel?nt.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=W,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(N.Z.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${f.XV} ${f.hg}`,this.element.appendChild(this.button_)}handleClick_(nt){nt.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const nt=this.getMap();if(!nt)return;const Q=nt.getOwnerDocument();if(M(Q))if(C(Q))!function st(Me){Me.exitFullscreen?Me.exitFullscreen():Me.webkitExitFullscreen&&Me.webkitExitFullscreen()}(Q);else{let x;x=this.source_?"string"==typeof this.source_?Q.getElementById(this.source_):this.source_:nt.getTargetElement(),this.keys_?function Y(Me){Me.webkitRequestFullscreen?Me.webkitRequestFullscreen():D(Me)}(x):D(x)}}handleFullScreenChange_(){const nt=this.getMap();if(!nt)return;const Q=this.isInFullscreen_;this.isInFullscreen_=C(nt.getOwnerDocument()),Q!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,rt.$H)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):((0,rt.$H)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),nt.updateSize())}setClassName_(nt,Q){Q?(nt.classList.remove(...this.inactiveClassName_),nt.classList.add(...this.activeClassName_)):(nt.classList.remove(...this.activeClassName_),nt.classList.add(...this.inactiveClassName_))}setMap(nt){const Q=this.getMap();Q&&Q.removeChangeListener(K.Z.TARGET,this.boundHandleMapTargetChange_),super.setMap(nt),this.handleMapTargetChange_(),nt&&nt.addChangeListener(K.Z.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const nt=this.documentListeners_;for(let x=0,W=nt.length;x<W;++x)(0,_.bN)(nt[x]);nt.length=0;const Q=this.getMap();if(Q){const x=Q.getOwnerDocument();M(x)?this.element.classList.remove(f.Qi):this.element.classList.add(f.Qi);for(let W=0,tt=b.length;W<tt;++W)nt.push((0,_.oL)(x,b[W],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}};var at=a(6108),ut=a(4792),Pt=a(5465),vt=a(1858),Ot=a(5681),At=a(6715),Gt=a(1409),zt=a(1316),qt=a(3435);const ce=class he extends v.Z{constructor(nt){nt=nt||{},super({element:document.createElement("div"),render:nt.render,target:nt.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===nt.collapsed||nt.collapsed,this.collapsible_=void 0===nt.collapsible||nt.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==nt.rotateWithView&&nt.rotateWithView,this.viewExtent_=void 0;const Q=void 0!==nt.className?nt.className:"ol-overviewmap",x=void 0!==nt.tipLabel?nt.tipLabel:"Overview map",W=void 0!==nt.collapseLabel?nt.collapseLabel:"\u2039";"string"==typeof W?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=W):this.collapseLabel_=W;const tt=void 0!==nt.label?nt.label:"\u203a";"string"==typeof tt?(this.label_=document.createElement("span"),this.label_.textContent=tt):this.label_=tt;const et=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,yt=document.createElement("button");yt.setAttribute("type","button"),yt.title=x,yt.appendChild(et),yt.addEventListener(N.Z.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=nt.view;const Et=new ut.Z({view:nt.view,controls:new at.Z,interactions:new at.Z});this.ovmap_=Et,nt.layers&&nt.layers.forEach(function(Ne){Et.addLayer(Ne)});const It=document.createElement("div");It.className="ol-overviewmap-box",It.style.boxSizing="border-box",this.boxOverlay_=new Ot.Z({position:[0,0],positioning:"center-center",element:It}),this.ovmap_.addOverlay(this.boxOverlay_);const Jt=this.element;Jt.className=Q+" "+f.XV+" "+f.hg+(this.collapsed_&&this.collapsible_?" "+f.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),Jt.appendChild(this.ovmapDiv_),Jt.appendChild(yt);const ne=this,ye=this.boxOverlay_,oe=this.boxOverlay_.getElement(),Ge=function(Ne){const Ue=function(Ne){return{clientX:Ne.clientX,clientY:Ne.clientY}}(Ne),Ve=Et.getEventCoordinateInternal(Ue);ye.setPosition(Ve)},Xe=function(Ne){const Ue=Et.getEventCoordinateInternal(Ne);ne.getMap().getView().setCenterInternal(Ue),window.removeEventListener("mousemove",Ge),window.removeEventListener("mouseup",Xe)};oe.addEventListener("mousedown",function(){window.addEventListener("mousemove",Ge),window.addEventListener("mouseup",Xe)})}setMap(nt){const Q=this.getMap();if(nt!==Q){if(Q){const x=Q.getView();x&&this.unbindView_(x),this.ovmap_.setTarget(null)}if(super.setMap(nt),nt){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,_.oL)(nt,vt.Z.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const x=nt.getView();x&&(this.bindView_(x),x.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(nt){if(nt.key===K.Z.VIEW){const Q=nt.oldValue;Q&&this.unbindView_(Q);const x=this.getMap().getView();this.bindView_(x)}else!this.ovmap_.isRendered()&&(nt.key===K.Z.TARGET||nt.key===K.Z.SIZE)&&this.ovmap_.updateSize()}bindView_(nt){if(!this.view_){const Q=new At.ZP({projection:nt.getProjection()});this.ovmap_.setView(Q)}nt.addChangeListener(Gt.Z.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(nt){nt.removeChangeListener(Gt.Z.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const nt=this.getMap(),Q=this.ovmap_;if(!nt.isRendered()||!Q.isRendered())return;const x=nt.getSize(),tt=nt.getView().calculateExtentInternal(x);if(this.viewExtent_&&(0,zt.fS)(tt,this.viewExtent_))return;this.viewExtent_=tt;const et=Q.getSize(),Et=Q.getView().calculateExtentInternal(et),It=Q.getPixelFromCoordinateInternal((0,zt.rL)(tt)),wt=Q.getPixelFromCoordinateInternal((0,zt.w$)(tt)),Jt=Math.abs(It[0]-wt[0]),ne=Math.abs(It[1]-wt[1]),ye=et[0],oe=et[1];Jt<.1*ye||ne<.1*oe||Jt>.75*ye||ne>.75*oe?this.resetExtent_():(0,zt.r4)(Et,tt)||this.recenter_()}resetExtent_(){const nt=this.getMap(),Q=this.ovmap_,x=nt.getSize(),tt=nt.getView().calculateExtentInternal(x),et=Q.getView(),yt=Math.log(7.5)/Math.LN2,Et=1/(.1*Math.pow(2,yt/2));(0,zt.H9)(tt,Et),et.fitInternal((0,qt.oJ)(tt))}recenter_(){const nt=this.getMap(),Q=this.ovmap_,x=nt.getView();Q.getView().setCenterInternal(x.getCenterInternal())}updateBox_(){const nt=this.getMap(),Q=this.ovmap_;if(!nt.isRendered()||!Q.isRendered())return;const x=nt.getSize(),W=nt.getView(),tt=Q.getView(),et=this.rotateWithView_?0:-W.getRotation(),yt=this.boxOverlay_,Et=this.boxOverlay_.getElement(),It=W.getCenterInternal(),wt=W.getResolution(),Jt=tt.getResolution(),ne=x[0]*wt/Jt,ye=x[1]*wt/Jt;yt.setPosition(It),Et&&(Et.style.width=ne+"px",Et.style.height=ye+"px",Et.style.transform="rotate("+et+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,_.Vx)(this.ovmap_,Pt.Z.POSTRENDER,function(nt){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(nt){nt.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(f.hN),this.collapsed_?(0,rt.$H)(this.collapseLabel_,this.label_):(0,rt.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const nt=this.ovmap_;if(!this.collapsed_){if(nt.isRendered())return this.viewExtent_=void 0,void nt.render();nt.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(nt){this.collapsible_!==nt&&(this.collapsible_=nt,this.element.classList.toggle("ol-uncollapsible"),!nt&&this.collapsed_&&this.handleToggle_())}setCollapsed(nt){!this.collapsible_||this.collapsed_===nt||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(nt){this.rotateWithView_!==nt&&(this.rotateWithView_=nt,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(nt){this.validateExtent_(),this.updateBox_()}};var Ce=a(7729),ft=a(1978),Ct=a(8861),Zt=a(8099),Vt=a(5240),pe=a(7590),Yt=a(3829),gt=a(9813),xt=a(755),Ft=a(7180),Wt=a(6733);const Bt=["mapDiv"];function ue(Me,nt){1&Me&&(xt.TgZ(0,"div",3),xt._uU(1,"+"),xt.qZA())}let Le=(()=>{class Me{constructor(Q,x){this.mapSvc=Q,this.ngZone=x,this.subs=[],this.mapSize=[0,0],this.initialMapStateSet=!1,this.removePopupsOnMouseLeave=W=>{this.mapSvc.removeAllPopups(tt=>"pointermove"===tt.get("addEvent"))}}ngOnInit(){this.subscribeToMapState(),this.initMap(),this.subscribeToLayers()}ngAfterViewInit(){this.map.setTarget(this.mapDivView.nativeElement),this.subscribeToMapEvents(),this.map.getTargetElement().addEventListener("mouseleave",this.removePopupsOnMouseLeave)}ngAfterViewChecked(){this.updateMapSize()}ngOnDestroy(){this.subs.forEach(x=>x.unsubscribe());const Q=this.mapStateSvc.getMapState().value;Q.options.notifier="user",this.mapStateSvc.setMapState(Q),this.map&&(this.map.un("moveend",this.mapOnMoveend),this.map.un("click",this.mapOnClickMove),this.map.un("dblclick",this.mapOnDclick),this.map.getTargetElement().removeEventListener("mouseleave",this.removePopupsOnMouseLeave),this.map.getInteractions().forEach(x=>{this.map.removeInteraction(x)}))}getMapDiv(){return this.mapDivView&&this.mapDivView.nativeElement?{width:this.mapDivView.nativeElement.offsetWidth,height:this.mapDivView.nativeElement.offsetHeight}:null}updateMapSize(){const Q=this.getMapDiv();if(Q)if(Q.width===this.mapSize[0]&&Q.height===this.mapSize[1]){if(!this.initialMapStateSet){const x=this.mapStateSvc.getMapState().getValue();this.setMapState(x),this.initialMapStateSet=!0}}else this.ngZone.runOutsideAngular(()=>{this.map.updateSize(),this.mapSize=this.map.getSize()})}addUpdateLayers(Q,x,W){const tt=this.mapSvc.getLayerGroups(x)[0].getLayers(),et=W.reduce((yt,Et)=>yt+this.mapSvc.getLayers(Et).length,0);Q.length!==this.mapSvc.getLayers(x).length?this.mapSvc.setUkisLayers(Q,x,et):this.updateLayers(Q,x,et,tt)}updateLayers(Q,x,W,tt){for(const et of Q){const yt=this.mapSvc.getLayerByKey({key:"id",value:et.id},x);if(yt){yt.getVisible()!==et.visible&&((0,Yt.f$)(yt,et.visible,et instanceof G.AO),this.mapSvc.hideAllPopups(!et.visible,wt=>{const ne=wt.getId().toString().split(":")[0];return!ne||(ne===et.id?ne===et.id:void 0)})),yt.getOpacity()!==et.opacity&&(0,Yt.yv)(yt,et.opacity,et instanceof G.AO),this.updateLayerSource(et,yt);const Et=Q.indexOf(et),It=W>0?Et+W:Et;yt.getZIndex()!==It&&((0,Yt.n8)(yt,Et,tt),(0,Yt.AH)(yt,Et,W)),this.updateLayerParamsWith(yt,et)}}}updateLayerSource(Q,x){if(Q instanceof G.AO&&x instanceof A.Z){const W=Q.custom_layer.getSource(),tt=x.getSource();W&&(0,Z.sq)(tt)!==(0,Z.sq)(W)&&(x.setSource(W),tt instanceof Zt.ZP&&tt.dispose())}else if(Q instanceof G.AO&&Q.custom_layer instanceof S.Z&&x instanceof S.Z){const W=Q.custom_layer.getLayers().getArray();x.getLayers().getArray().forEach((et,yt)=>{const Et=W[yt];if(et instanceof A.Z&&Et instanceof A.Z){const It=et.getSource(),wt=Et.getSource();wt&&(0,Z.sq)(It)!==(0,Z.sq)(wt)&&et.setSource(wt)}})}}updateLayerParamsWith(Q,x){switch(x.type){case G.MR:this.updateWmsLayerParamsWith(Q,x);break;case G.$6:this.updateWmtsLayerParamsWith(Q,x);break;case G.Sw:this.updateGeojsonLayerParamsWith(Q,x);break;case G.KF:this.updateWfsLayerParamsWith(Q,x);break;case G.CY:this.updateTmsLayerParamsWith(Q,x)}}updateTmsLayerParamsWith(Q,x){x instanceof G.DJ&&(0,pe.bg)(Q,x.options.style,x.options.styleSource)}updateWfsLayerParamsWith(Q,x){x.options&&x.options.style!==Q.getStyle()&&Q.setStyle(x.options.style),Q.getSource().getUrl()!==x.url&&Q.getSource().setUrl(x.url)}updateGeojsonLayerParamsWith(Q,x){const W=Q.getSource();if(W){if(x.data){const tt=this.mapSvc.geoJsonToFeatures(x.data);if(W instanceof Vt.Z){const et=W.getSource();et.clear(),et.addFeatures(tt)}else W.clear(),W.addFeatures(tt)}else x.url&&(W instanceof Vt.Z?W.getSource().setUrl(x.url):W.setUrl(x.url));"object"==typeof x?.cluster&&"distance"in x.cluster&&W instanceof Vt.Z&&W.setDistance(x.cluster.distance)}x?.options?.style&&Q.setStyle(x.options.style)}updateWmsLayerParamsWith(Q,x){if(Q instanceof A.Z){const tt=Q.getSource().getParams(),et=x.params;this.shallowEqual(tt,et)||Q.getSource().updateParams(et)}}updateWmtsLayerParamsWith(Q,x){if(Q instanceof A.Z){const W=Q.getSource(),tt=W.getStyle(),et=W.getFormat(),yt=W.getVersion(),Et=W.getMatrixSet(),It=x.params.style,wt=x.params.format,Jt=x.params.version,ne=x.params.matrixSetOptions.matrixSet;if(void 0!==It&&tt!==It||void 0!==wt&&et!==wt||void 0!==Jt&&yt!==Jt||void 0!==ne&&Et!==ne){const ye=x.filtertype.toLowerCase();this.mapSvc.updateUkisLayer(x,ye)}}}shallowEqual(Q,x){const W=Object.getOwnPropertyNames(Q),tt=Object.getOwnPropertyNames(x);if(W.length!==tt.length)return!1;for(const et of W)if(Q[et]!==x[et])return!1;return!0}addUpdateBaseLayers(Q){const x=this.mapSvc.getLayerGroups("baselayers")[0].getLayers();if(Q.length!==this.mapSvc.getLayers("baselayers").length){const W=Q.filter(tt=>!0===tt.visible);0===W.length?Q[0].visible=!0:W.length>1&&(Q.forEach(tt=>tt.visible=!1),Q[0].visible=!0),this.mapSvc.setUkisLayers(Q,"baselayers")}else for(const W of Q){const tt=this.mapSvc.getLayerByKey({key:"id",value:W.id},"baselayers");if(tt){const et=Q.indexOf(W);tt.getVisible()!==W.visible&&(0,Yt.f$)(tt,W.visible,W instanceof G.AO),tt.getZIndex()!==et&&(x.remove(tt),x.insertAt(et,tt),(0,Yt.AH)(tt,et)),tt.getOpacity()!==W.opacity&&(0,Yt.yv)(tt,W.opacity,W instanceof G.AO),this.updateLayerSource(W,tt),this.updateLayerParamsWith(tt,W)}}}subscribeToLayers(){if(this.layersSvc){const Q=this.layersSvc.getBaseLayers().subscribe(tt=>this.addUpdateBaseLayers(tt));this.subs.push(Q);const x=this.layersSvc.getLayers().subscribe(tt=>this.addUpdateLayers(tt,"layers",["baselayers"]));this.subs.push(x);const W=this.layersSvc.getOverlays().subscribe(tt=>this.addUpdateLayers(tt,"overlays",["baselayers","layers"]));this.subs.push(W)}}setMapState(Q){const x=this.mapStateSvc.getLastAction().getValue();"user"===Q.options.notifier&&("setExtent"===x?this.mapSvc.setExtent(Q.extent,!0):"setState"===x&&(this.mapSvc.setZoom(Q.zoom),this.mapSvc.setCenter([Q.center.lon,Q.center.lat],!0)))}subscribeToMapState(){if(this.mapStateSvc){const Q=this.mapStateSvc.getMapState().pipe(function k(Me){return(0,F.h)((nt,Q)=>Me<=Q)}(1)).subscribe(x=>this.setMapState(x));this.subs.push(Q)}}subscribeToMapEvents(){this.mapOnMoveend=Q=>{const x=this.mapStateSvc.getMapState().getValue(),W=this.mapSvc.getZoom(),tt=this.mapSvc.getCenter(!0),et=this.mapSvc.getCurrentExtent(!0),yt={lat:parseFloat(tt[1]),lon:parseFloat(tt[0])},Et=new z.U5(W,yt,{notifier:"map"},et,x.time);this.mapStateSvc.setMapState(Et)},this.map.on("moveend",this.mapOnMoveend),this.mapOnClickMove=Q=>{this.mapSvc.layersOnMapEvent(Q)},this.map.on(["click","pointermove"],this.mapOnClickMove),this.mapOnDclick=Q=>{this.mapSvc.removeAllPopups()},this.map.on("dblclick",this.mapOnDclick)}initMap(){const Q=this.mapSvc.createMap();this.map=Q.map;const x=this.map.getInteractions();(0,gt.c)().forEach(tt=>{x.getArray().find(yt=>yt.constructor.name===tt.constructor.name)||this.map.addInteraction(tt)}),this.setControls(),this.layersSvc||console.log("there is no layersSvc as defined!"),this.mapStateSvc||console.log("there is no mapStateSvc as defined!")}setControls(){const Q=[],x=[];if(this.map&&(this.map.getControls().getArray().forEach(tt=>x.push(tt)),this.map.getControls().clear()),this.controls&&this.map){if(!1!==this.controls.attribution){let W={collapsible:!0,collapsed:!1};"object"==typeof this.controls.attribution&&(W=Object.assign(W,this.controls.attribution));const tt=new P.Z(W);Q.push(tt)}if(this.controls.scaleLine){let W={};"object"==typeof this.controls.scaleLine&&(W=Object.assign(W,this.controls.scaleLine));const tt=new m(W);Q.push(tt)}if(!1!==this.controls.zoom){let W={};"object"==typeof this.controls.zoom&&(W=Object.assign(W,this.controls.zoom));const tt=new s.Z(W);Q.push(tt)}if(this.controls.mousePosition){let W={coordinateFormat:et=>(0,y.yZ)(et,2),projection:"EPSG:4326"};"object"==typeof this.controls.mousePosition&&(W=Object.assign(W,this.controls.mousePosition));const tt=new R(W);Q.push(tt)}if(this.controls.fullScreen){let W={};"object"==typeof this.controls.fullScreen&&(W=Object.assign(W,this.controls.fullScreen));const tt=new V(W);Q.push(tt)}if(this.controls.overviewMap){const W=document.createElement("spawn");W.innerHTML='<clr-icon shape="world"></clr-icon>';let tt={layers:[new Ce.Z({source:new ft.Z})],label:W};"object"==typeof this.controls.overviewMap&&(tt=Object.assign(tt,this.controls.overviewMap));const et=new ce(tt);Q.push(et)}if(this.controls.rotate){let W={};"object"==typeof this.controls.rotate&&(W=Object.assign(W,this.controls.rotate));const tt=new Ct.Z(W);Q.push(tt)}Q.length&&(x.filter(tt=>!Q.includes(tt)).forEach(tt=>Q.push(tt)),this.map.getControls().extend(Q))}}static#t=this.\u0275fac=function(x){return new(x||Me)(xt.Y36(Ft.B),xt.Y36(xt.R0b))};static#e=this.\u0275cmp=xt.Xpm({type:Me,selectors:[["ukis-map-ol"]],viewQuery:function(x,W){if(1&x&&xt.Gf(Bt,5),2&x){let tt;xt.iGM(tt=xt.CRH())&&(W.mapDivView=tt.first)}},inputs:{layersSvc:"layersSvc",mapStateSvc:["mapState","mapStateSvc"],controls:"controls"},decls:3,vars:1,consts:[["ref","map",1,"map"],["mapDiv",""],["class","crosshair",4,"ngIf"],[1,"crosshair"]],template:function(x,W){1&x&&(xt.TgZ(0,"div",0,1),xt.YNc(2,ue,2,0,"div",2),xt.qZA()),2&x&&(xt.xp6(2),xt.Q6J("ngIf",W.controls&&W.controls.crosshair))},dependencies:[Wt.O5],styles:['@charset "UTF-8";:root{--ukis-crosshair-color: #ff0004;--ukis-popup-bg-color: rgb(238, 238, 238);--ukis-drop-shadow: drop-shadow(0 1px 4px rgba(0, 0, 0, .2));--ukis-ol-bbox-bg-color: rgba(255, 255, 255, .4);--ukis-ol-bbox-border-color: rgba(87, 87, 87, .4);--ukis-ol-overviewmap-left: .5em;--ukis-ol-overviewmap-bottom: 3em;--ukis-ol-control-bg-color: rgba(87, 87, 87, .6);--ukis-ol-control-border-color: rgba(87, 87, 87, .4)}.map{width:100%;height:100%;position:relative}.ol-popup{position:absolute;background-color:var(--ukis-popup-bg-color);filter:var(--ukis-drop-shadow);padding:15px;border-radius:2px;bottom:12px;left:-50px;min-width:280px;display:none;z-index:1000000}.ol-popup .ol-popup-closer{text-decoration:none;position:absolute;top:0;right:8px;cursor:pointer}.ol-popup .ol-popup-closer:after{content:"\\2716"}.ol-popup:after,.ol-popup:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup:after{border-top-color:var(--ukis-popup-bg-color);border-width:10px;left:48px;margin-left:-10px}.ol-popup:before{border-width:11px;left:48px;margin-left:-11px}.ol-popup.hidden{visibility:hidden}.crosshair{top:50%;left:50%;font-size:large;color:var(--ukis-crosshair-color);z-index:1;position:absolute;cursor:default}.ol-control{padding:1px;--ol-subtle-background-color: #fff6}.ol-control button{--ol-subtle-foreground-color: #fff;--ol-foreground-color: #fff;cursor:pointer;background-color:var(--ukis-ol-control-bg-color)}.ol-control button:focus{background-color:var(--ukis-ol-control-bg-color)}.ol-control button:hover{background-color:var(--ukis-ol-control-border-color)}.ol-scale-line{background:rgba(255,255,255,.4);line-height:1.375em;padding:1px}.ol-scale-line .ol-scale-line-inner{background:var(--ukis-ol-control-bg-color);border-color:var(--ukis-ol-control-bg-color);--ol-foreground-color: #fff}.ol-attribution:not(.ol-collapsed){padding:0 2px}.ol-attribution ul{font-size:.5rem}.ol-box{background-color:var(--ukis-ol-bbox-bg-color);border-color:var(--ukis-ol-bbox-border-color)!important}.ol-box.ol-drag-select{border-color:var(--clr-color-action-600, var(--fallback-color-no-clr))!important}.ol-overviewmap{left:var(--ukis-ol-overviewmap-left)!important;bottom:var(--ukis-ol-overviewmap-bottom)!important}\n'],encapsulation:2})}return Me})()},7180:(jt,ht,a)=>{"use strict";a.d(ht,{B:()=>Me});var z=a(755),F=a(9265),k=a(4792),G=a(6715),Z=a(4199),A=a(5209),S=a(1590),P=a(5681),v=a(2920),f=a(4203),u=a(9107),c=a(450),r=a(7729),d=a(640),e=a(8412),l=a(2889),m=a(7590),s=a(1180),g=a(3053),_=a(3640),y=a(6902),I=a(8311),O=a(3298),E=a(719),R=a(7273),N=a(8625),K=a(7835),rt=a(7021);const L=class b extends E.Z{constructor(Q){const x=void 0!==Q.requestEncoding?Q.requestEncoding:"KVP",W=Q.tileGrid;let tt=Q.urls;void 0===tt&&void 0!==Q.url&&(tt=(0,K.Gk)(Q.url)),super({attributions:Q.attributions,attributionsCollapsible:Q.attributionsCollapsible,cacheSize:Q.cacheSize,crossOrigin:Q.crossOrigin,interpolate:Q.interpolate,projection:Q.projection,reprojectionErrorThreshold:Q.reprojectionErrorThreshold,tileClass:Q.tileClass,tileGrid:W,tileLoadFunction:Q.tileLoadFunction,tilePixelRatio:Q.tilePixelRatio,urls:tt,wrapX:void 0!==Q.wrapX&&Q.wrapX,transition:Q.transition,zDirection:Q.zDirection}),this.version_=void 0!==Q.version?Q.version:"1.0.0",this.format_=void 0!==Q.format?Q.format:"image/jpeg",this.dimensions_=void 0!==Q.dimensions?Q.dimensions:{},this.layer_=Q.layer,this.matrixSet_=Q.matrixSet,this.style_=Q.style,this.requestEncoding_=x,this.setKey(this.getKeyForDimensions_()),tt&&tt.length>0&&(this.tileUrlFunction=(0,K.Un)(tt.map(this.createFromWMTSTemplate.bind(this))))}setUrls(Q){this.urls=Q;const x=Q.join("\n");this.setTileUrlFunction((0,K.Un)(Q.map(this.createFromWMTSTemplate.bind(this))),x)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const Q=this.urls?this.urls.slice(0):[];for(const x in this.dimensions_)Q.push(x+"-"+this.dimensions_[x]);return Q.join("/")}updateDimensions(Q){Object.assign(this.dimensions_,Q),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(Q){const x=this.requestEncoding_,W={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==x&&Object.assign(W,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),Q="KVP"==x?(0,N.B)(Q,W):Q.replace(/\{(\w+?)\}/g,function(yt,Et){return Et.toLowerCase()in W?W[Et.toLowerCase()]:yt});const tt=this.tileGrid,et=this.dimensions_;return function(yt,Et,It){if(!yt)return;const wt={TileMatrix:tt.getMatrixId(yt[0]),TileCol:yt[1],TileRow:yt[2]};Object.assign(wt,et);let Jt=Q;return Jt="KVP"==x?(0,N.B)(Jt,wt):Jt.replace(/\{(\w+?)\}/g,function(ne,ye){return wt[ye]}),Jt}}};var M=a(8398);const D=class C extends M.Z{constructor(Q){super({extent:Q.extent,origin:Q.origin,origins:Q.origins,resolutions:Q.resolutions,tileSize:Q.tileSize,tileSizes:Q.tileSizes,sizes:Q.sizes}),this.matrixIds_=Q.matrixIds}getMatrixId(Q){return this.matrixIds_[Q]}getMatrixIds(){return this.matrixIds_}};var st=a(5105),V=a(8099),at=a(5240),ut=a(6108),Pt=a(1539),vt=a(6377),Ot=a(8340),At=a(7498),Gt=a(5661),zt=a(1316),qt=a(8220),Xt=a(53),fe=a(1949),he=a(7202),ce=a(5505),Ce=a(3009),ft=a(4396),Ct=a(7946),Zt=a(3089),Vt=a(8748),pe=a(3829);const Yt="type",gt="filtertype",xt="id",Ft="groupID",Wt="groupName",Bt="title",ge="EPSG:4326",Le="popup";let Me=(()=>{class nt{constructor(x,W){this.app=x,this.envInjector=W,this.hitTolerance=0,this.hitLayerCurr=null,this.hitLayerPrev=null,this.projectionChange=new Vt.x,this.dynamicPopupComponents=new Map,this.popupEvents=new Vt.x,this.filterLayerNoPopup=tt=>{const et=tt.get(Le);let yt=!0;return et||(yt=!1),et&&this.isPopupObj(et)&&!0===et.filterLayer&&(yt=!1),yt},this.map=new k.Z({controls:[]}),this.view=new G.ZP,this.EPSG="EPSG:3857"}createMap(x){const et=new S.Z({layers:[]});et.set(gt,"baselayers"),et.set(Bt,"Base maps"),et.set(xt,"ID_filtertype_baselayers");const yt=new S.Z({layers:[]});yt.set(gt,"layers"),yt.set(Bt,"Layers"),yt.set(xt,"ID_filtertype_layers");const Et=new S.Z({layers:[]});Et.set(gt,"overlays"),Et.set(Bt,"Overlays"),Et.set(xt,"ID_filtertype_overlays"),this.viewOptions={center:(0,rt.vs)([0,0],ge,this.EPSG),zoom:0,projection:(0,rt.U2)(this.EPSG)},this.view.constrainRotation&&(this.viewOptions.constrainRotation=this.view.constrainRotation),this.view.enableRotation&&(this.viewOptions.enableRotation=this.view.enableRotation),this.view.extent&&(this.viewOptions.extent=this.view.extent),this.view.constrainOnlyCenter&&(this.viewOptions.constrainOnlyCenter=this.view.constrainOnlyCenter),this.view.smoothExtentConstraint&&(this.viewOptions.smoothExtentConstraint=this.view.smoothExtentConstraint),this.view.getMaxResolution()&&(this.viewOptions.maxResolution=this.view.getMaxResolution()),this.view.getMinResolution()&&(this.viewOptions.minResolution=this.view.getMinResolution()),this.view.getMaxZoom()&&(this.viewOptions.maxZoom=this.view.getMaxZoom()),this.view.getMinZoom()&&(this.viewOptions.minZoom=this.view.getMinZoom()),this.view.multiWorld&&(this.viewOptions.multiWorld=this.view.multiWorld),this.view.constrainResolution&&(this.viewOptions.constrainResolution=this.view.constrainResolution),this.view.smoothResolutionConstraint&&(this.viewOptions.smoothResolutionConstraint=this.view.smoothResolutionConstraint),this.view.getResolution()&&(this.viewOptions.resolution=this.view.getResolution()),this.view.getResolutions()&&(this.viewOptions.resolutions=this.view.getResolutions()),this.view.rotation&&(this.viewOptions.rotation=this.view.rotation),this.view.zoomFactor&&(this.viewOptions.zoomFactor=this.view.zoomFactor);const It=new G.ZP(this.viewOptions);return this.map.getLayerGroup().getLayers().clear(),[et,yt,Et].map(wt=>this.map.addLayer(wt)),this.map.setView(It),this.view=this.map.getView(),this.setProjection(this.EPSG),x&&this.map.setTarget(x),{map:this.map,view:this.view}}setHitTolerance(x){this.hitTolerance=x}getHitTolerance(){return this.hitTolerance}addBboxSelection(x,W,tt,et){Object.assign({className:"ol-drag-select",condition:x},et);const Et=new Ct.Z(et);return W&&Et.on("boxstart",It=>{W(It)}),tt&&Et.on("boxend",It=>{const wt=Et.getGeometry().getExtent();tt(wt,It)}),this.map.addInteraction(Et),Et}getLayers(x){const W=x.toLowerCase();let tt;return this.map.getLayers().getArray().forEach(et=>{et.get(gt)===W&&(tt=et.getLayers().getArray())}),tt}getLayersFromGroup(x,W,tt=!1){const et=x.getLayers().getArray();let yt=et;if(tt){let Et=[].concat(et);et.forEach(It=>{It instanceof S.Z&&(Et=Et.concat(this.getLayersFromGroup(It,W,!0)))}),yt=Et}return W?yt.filter(Et=>Et.get(gt)&&Et.get(gt).toLowerCase()===W.toLowerCase()):yt}getLayerByKey(x,W){const tt=this.getLayersFromGroup(this.map.getLayerGroup(),W),et=(0,pe.fA)(tt),yt=[];if(et.forEach(Et=>{Et.get(x.key)&&Et.get(x.key)===x.value&&-1===yt.indexOf(Et)&&yt.push(Et)}),!yt.length){const Et=this.getLayersFromGroup(this.map.getLayerGroup(),W,!0);Et.length&&Et.forEach(It=>{It.get(x.key)&&It.get(x.key)===x.value&&-1===yt.indexOf(It)&&yt.push(It)})}return 1===yt.length?yt[0]:null}setRecursiveKey(x,W,tt=gt){x.set(tt,W),x instanceof S.Z&&x.getLayers().forEach(et=>{this.setRecursiveKey(et,W,tt)})}addLayer(x,W){const tt=W.toLowerCase();let et;return this.map.getLayers().getArray().forEach(yt=>{yt.get(gt)===tt&&(this.isLayerInGroup(x,yt)||(et=yt.getLayers().getArray(),this.setRecursiveKey(x,tt,gt),et.push(x),yt.setLayers(new ut.Z(et))))}),et}isLayerInGroup(x,W){return!!W.getLayers().getArray().filter(yt=>yt.get(xt)===x.get(xt)).length}getLayerGroups(x){const W=[];return this.map.getLayers().forEach(tt=>{tt instanceof S.Z&&(x?tt.get(gt)&&tt.get(gt).toLowerCase()===x.toLowerCase()&&W.push(tt):W.push(tt))}),W}addLayers(x,W){const tt=W.toLocaleLowerCase();let et;return this.getLayerGroups(tt).forEach(Et=>{Et.getLayers().getLength()>0?(et=Et.getLayers().getArray(),x.map(wt=>{this.isLayerInGroup(wt,Et)||et.push(wt)})):et=x,et.forEach(wt=>{wt instanceof S.Z&&this.setRecursiveKey(wt,tt,gt)}),Et.setLayers(new ut.Z(et))}),et}setLayers(x,W){const tt=W.toLocaleLowerCase(),et=this.getLayerGroups(tt);return x.forEach(yt=>{yt instanceof S.Z&&this.setRecursiveKey(yt,W.toLocaleLowerCase(),gt)}),et.forEach(yt=>{this.cleanUpEventListeners(yt,x),yt.setLayers(new ut.Z(x))}),x}cleanUpEventListeners(x,W){const tt=x.getLayers().getArray().filter(et=>!W.map(yt=>yt.get(xt)).includes(et.get(xt)));this.removeListenersFromOldLayers(tt),tt.forEach(et=>x.getLayers().remove(et))}addEventsToLayer(x,W,tt){x.events&&(x.events.layer&&x.events.layer.forEach(et=>{W.getListeners(et.event)||W.on(et.event,et.listener)}),x.events.source&&x.events.source.forEach(et=>{tt.getListeners(et.event)||tt.on(et.event,et.listener)}))}removeListenersFromOldLayers(x){const W=tt=>{if("function"==typeof tt.getSource){const et=tt.getSource();et&&(et instanceof V.ZP&&et.dispose(),et.hasListener()&&et.disposeInternal())}tt.hasListener()&&tt.disposeInternal()};x.forEach(tt=>{tt instanceof S.Z?tt.getLayers().forEach(et=>{W(et)}):tt instanceof Z.Z&&W(tt)})}getLayerGroupForLayer(x){const W=this.getLayersFromGroup(this.map.getLayerGroup(),null,!0);W.push(this.map.getLayerGroup());let tt=null;return W.forEach(et=>{if(et instanceof S.Z){const Et=this.getLayersFromGroup(et).find(It=>It===x);Et&&(tt={group:et,layer:Et})}}),tt}removeLayerByKey(x,W){const tt=W.toLocaleLowerCase(),et=this.getLayerByKey(x,tt);if(et){const yt=this.getLayerGroupForLayer(et);if(yt.group){const Et=this.getLayersFromGroup(yt.group).filter(It=>It!==et);yt.group.setLayers(new ut.Z(Et))}}}updateLayerByKey(x,W,tt){const et=tt.toLocaleLowerCase();this.map.getLayers().forEach(yt=>{if(yt.get(gt)===et){const Et=yt.getLayers();Et.forEach((It,wt)=>{if(It.get(x.key)&&It.get(x.key)===x.value){const Jt=W.getProperties(),ne=W.getExtent(),ye=W.getMaxZoom(),oe=W.getMinZoom(),ie=W.getOpacity(),Ge=W.getVisible(),Xe=W.getZIndex();if(It instanceof A.Z&&W instanceof A.Z){const Ne=W.getSource();It.setSource(Ne)}Jt&&It.setProperties(Jt),ne&&It.setExtent(ne),ye&&It.setMaxZoom(ye),oe&&It.setMinZoom(oe),ie&&It.setOpacity(ie),Ge&&It.setVisible(Ge),Xe&&(0,pe.AH)(It,Xe),It.changed(),Et.setAt(wt,It)}}),yt.setLayers(Et)}})}removeAllLayers(x){const W=x.toLowerCase();let tt;this.map.getLayers().getArray().forEach(et=>{et.get(gt)===W&&(tt=et.getLayers(),tt.clear())})}setUkisLayers(x,W,tt){const et=W.toLowerCase(),yt=[];if(x.length<1&&"baselayers"!==et?this.removeAllLayers(et):x.forEach((Et,It)=>{const wt=this.create_layers(Et);wt&&((0,pe.AH)(wt,It,tt),yt.push(wt))}),yt.length>0)return this.setLayers(yt,et),{type:et,layers:yt}}setUkisLayer(x,W){W||(W=x.filtertype);const tt=W.toLowerCase(),yt=this.getLayers(tt).find(It=>It.get(xt)===x.id),Et=this.create_layers(x);yt?(this.removeLayerByKey({key:xt,value:yt.get(xt)},W),this.addLayer(Et,W)):this.addLayer(Et,W)}updateUkisLayer(x,W){W||(W=x.filtertype);const tt=W.toLowerCase(),yt=this.getLayers(tt).find(It=>It.get(xt)===x.id),Et=this.create_layers(x);Et&&this.updateLayerByKey({key:xt,value:yt.get(xt)},Et,W)}create_layers(x){let W;switch(x.type){case F.Aq:W=this.create_xyz_layer(x);break;case F.MR:W=this.create_wms_layer(x);break;case F.$6:W=this.create_wmts_layer(x);break;case F.CY:W=this.create_tms_layer(x);break;case F.Sw:W=this.create_geojson_layer(x);break;case F.R6:W=this.create_kml_layer(x);break;case F.KF:W=this.create_wfs_layer(x);break;case F.ED:W=this.create_custom_layer(x);break;case F.jn:W=this.create_stacked_layer(x)}return W}createOlLayerOptions(x,W,tt){tt&&(x.attribution&&tt.setAttributions([x.attribution]),x.continuousWorld&&(tt.wrapX_=x.continuousWorld),x.popup&&!x.crossOrigin&&null!==x.crossOrigin&&this.sourceSetCross(tt),(x.crossOrigin||null===x.crossOrigin)&&this.sourceSetCross(tt));const et={opacity:x.opacity||1,visible:x.visible,zIndex:1,id:x.id,name:x.name,filtertype:x.filtertype,type:W,legendImg:x.legendImg};return tt&&(et.source=tt),x.popup&&(et.popup=x.popup,et.className=x.id),x.maxResolution&&(et.maxResolution=x.maxResolution),x.minResolution&&(et.minResolution=x.minResolution),x.maxZoom&&(et.maxZoom=x.maxZoom),x.minZoom&&(et.minZoom=x.minZoom),x.bbox&&(et.extent=(0,rt.$A)(x.bbox.slice(0,4),ge,this.getProjection().getCode())),et}create_xyz_layer(x){const W={wrapX:!1};x.crossOrigin&&(W.crossOrigin=x.crossOrigin);const tt=new _.Z(W),et=this.createOlLayerOptions(x,"xyz",tt),Et=new r.Z(Object.assign(et,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(x,Et),this.setCrossOrigin(x,Et),this.addEventsToLayer(x,Et,tt),Et}create_tms_layer(x){let W=null;if(x instanceof F.YY)return W=this.create_xyz_layer(x),W.set("type","tms"),W;if(x instanceof F.DJ){const tt=new l.Z({format:new g.Z,tileGrid:(0,s.dl)({minZoom:x.minZoom||void 0,maxZoom:x.maxZoom||void 0}),url:x.url,wrapX:!1}),et=this.createOlLayerOptions(x,"tms",tt);W=new e.Z(Object.assign(et,{declutter:!0,renderMode:"hybrid"})),this.setCrossOrigin(x,W),this.addEventsToLayer(x,W,tt);const Et=x?.options?.style,It=x?.options?.styleSource;return Et&&It&&((0,m.h0)(W,Et),(0,m.bg)(W,Et,It).then(wt=>{this.setSubdomains(x,W)})),W}}create_wms_layer(x){let W;return"true"===x.params?.TILED||null==x.params?.TILED?W=this.create_tiled_wms_layer(x):"false"===x.params?.TILED&&(W=this.create_image_wms_layer(x)),W}create_tiled_wms_layer(x){const W={params:Object.assign({},this.keysToUppercase(x.params)),wrapX:!1};x.tileSize&&(W.tileGrid=this.getTileGrid("default",null,x.tileSize),delete W.params.tileSize),x.crossOrigin&&(W.crossOrigin=x.crossOrigin);const tt=new I.Z(W),yt=this.createOlLayerOptions(x,"wms",tt),Et=new r.Z(Object.assign(yt,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(x,Et),this.addEventsToLayer(x,Et,tt),Et}create_image_wms_layer(x){const W={params:Object.assign({},this.keysToUppercase(x.params)),url:x.url},tt=new O.Z(W),et=this.createOlLayerOptions(x,"wms",tt),Et=new c.Z(Object.assign(et,{}));return this.addEventsToLayer(x,Et,tt),Et}create_wmts_layer(x){if(x instanceof F.RC){let W=this.getTileGrid("wmts"),tt=this.EPSG;x.params.matrixSetOptions&&(tt=x.params.matrixSetOptions.matrixSet,"resolutions"in x.params.matrixSetOptions?W=this.getTileGrid("wmts",null,x.tileSize,null,x.params.matrixSetOptions.resolutions):("resolutionLevels"in x.params.matrixSetOptions||"tileMatrixPrefix"in x.params.matrixSetOptions)&&(W=this.getTileGrid("wmts",x.params.matrixSetOptions.resolutionLevels,x.tileSize,x.params.matrixSetOptions.tileMatrixPrefix,null)),"matrixIds"in x.params.matrixSetOptions&&(W=this.getTileGrid("wmts",null,x.tileSize,null,null,x.params.matrixSetOptions.matrixIds)));let et={url:x.url,tileGrid:W,matrixSet:tt,wrapX:!1,layer:x.params.layer,style:x.params.style};et=Object.assign({},et,x.params),x.crossOrigin&&(et.crossOrigin=x.crossOrigin);const yt=new L(et),Et=this.createOlLayerOptions(x,"wmts",yt),wt=new r.Z(Object.assign(Et,{}));return this.setSubdomains(x,wt),this.setCrossOrigin(x,wt),this.addEventsToLayer(x,wt,yt),wt}console.error(`layer with id: ${x.id} and type ${x.type} is no instanceof WmtsLayer!`)}create_wfs_layer(x){let W=null;W=0===x.url.indexOf("http://")||0===x.url.indexOf("https://")?new URL(x.url):new URL(x.url,window.location.origin),W.searchParams.set("srsname",this.EPSG);const tt=new st.Z({format:new Pt.Z,url:W.toString()}),et=this.createOlLayerOptions(x,"wfs",tt),yt={};x.options&&Object.assign(yt,x.options);const Et=new d.Z(Object.assign(et,yt));return x.cluster&&this.setCluster(x,Et,tt,{}),this.setSubdomains(x,Et),this.setCrossOrigin(x,Et),this.addEventsToLayer(x,Et,tt),Et}create_geojson_layer(x){let W;x.data?W=new st.Z({features:this.geoJsonToFeatures(x.data),format:new Pt.Z,wrapX:!1}):x.url&&(W=new st.Z({url:x.url,format:new Pt.Z({dataProjection:ge,featureProjection:this.EPSG}),wrapX:!1}));const tt=this.createOlLayerOptions(x,"geojson",W),et={};x.options&&Object.assign(et,x.options);const yt=new d.Z(Object.assign(tt,et));return x.cluster&&this.setCluster(x,yt,W,{}),this.setCrossOrigin(x,yt),this.addEventsToLayer(x,yt,W),yt}create_kml_layer(x){let W;x.data?W=new st.Z({features:new vt.ZP({extractStyles:!0}).readFeatures(x.data,{dataProjection:ge,featureProjection:this.EPSG}),format:new vt.ZP,wrapX:!1}):x.url&&(W=new st.Z({url:x.url,format:new vt.ZP({extractStyles:!0,crossOrigin:x.crossOrigin&&null===x.crossOrigin?x.crossOrigin:"anonymous"}),wrapX:!1}));const tt=this.createOlLayerOptions(x,"kml",W),et={};x.options&&Object.assign(et,x.options);const yt=new d.Z(Object.assign(tt,et));return x.cluster&&this.setCluster(x,yt,W,{}),this.setCrossOrigin(x,yt),this.addEventsToLayer(x,yt,tt.source),yt}setCrossOrigin(x,W){if(W instanceof A.Z){const tt=W.getSource();x.popup&&!x.crossOrigin&&null!==x.crossOrigin&&this.sourceSetCross(tt),(x.crossOrigin||null===x.crossOrigin)&&this.sourceSetCross(tt)}}setCluster(x,W,tt,et){if(x.cluster){const yt={};"object"==typeof x.cluster&&Object.assign(yt,x.cluster),yt.source=tt;const Et=new at.Z(yt);W.setSource(Et),W.setStyle(It=>{const wt=It.get("features").length;let Jt=et[wt];return Jt||(Jt=new fe.ZP({image:new Ce.Z({radius:10,stroke:new ft.Z({color:"#fff"}),fill:new ce.Z({color:"#3399CC"})}),text:new he.Z({text:wt.toString(),fill:new ce.Z({color:"#fff"})})}),et[wt]=Jt),Jt})}}setSubdomains(x,W){if(x instanceof F.DJ||x instanceof F.YY){const tt=W.getSource();if(x.subdomains){if("wfs"===x.type&&tt instanceof st.Z)x.url=x.url.replace("{s}",`${x.subdomains[0]}-${x.subdomains[x.subdomains.length-1]}`),tt.setUrl(x.url);else if(!(tt instanceof st.Z)){const et=x.subdomains.map(yt=>x.url.replace("{s}",`${yt}`));tt.setUrls(et)}}else tt.setUrl(x.url)}}sourceSetCross(x){(x instanceof R.ZP||x instanceof E.Z||x instanceof y.Z)&&(x.crossOrigin="anonymous",x.crossOrigin_="anonymous")}create_custom_layer(x){if(x.custom_layer){const W=x.custom_layer;if(W instanceof A.Z){const et=W.getSource();x.attribution&&et.setAttributions([x.attribution]),et.wrapX_=!!x.continuousWorld&&x.continuousWorld,this.setCrossOrigin(x,W),this.addEventsToLayer(x,W,et),et instanceof V.ZP&&W.on("change:source",yt=>{yt.oldValue.dispose()})}else W instanceof S.Z?W.getLayers().forEach(et=>{et.set(Ft,x.id),et.set(Wt,x.name);const yt=`${x.id}_${(0,Zt.sq)(et)}`;if(et.get(xt)||et.set(xt,yt),et instanceof A.Z&&(this.setCrossOrigin(x,et),this.addEventsToLayer(x,et,et.getSource())),x.popup&&!et.get(Le)&&(et.set(Le,x.popup),"ol-layer"===et.getClassName()&&(et.className_=yt)),x.bbox){const Et=(0,rt.$A)(x.bbox.slice(0,4),ge,this.getProjection().getCode());et.setExtent(Et)}}):console.error(`The custom_layer of ${x.id} in not a openlayers Layer`);x.maxResolution&&W.setMaxResolution(x.maxResolution),x.minResolution&&W.setMinResolution(x.minResolution),x.maxZoom&&W.setMaxZoom(x.maxZoom),x.minZoom&&W.setMinZoom(x.minZoom);const tt={type:"custom",name:x.name,id:x.id,visible:x.visible,legendImg:x.legendImg,opacity:x.opacity||1,zIndex:1};if(x.popup&&!(W instanceof S.Z)&&(tt.popup=x.popup,W.className_=x.id),x.bbox){const et=(0,rt.$A)(x.bbox.slice(0,4),ge,this.getProjection().getCode());W.setExtent(et)}return W.setProperties(tt),W}console.log("attribute custom_layer not set on layer type custom!",x)}create_stacked_layer(x){if(x instanceof F.WQ){const W=x.layers.map(Et=>(Et.visible=x.visible,Et.opacity=x.opacity,x.popup&&(Et.popup=x.popup),x.events&&(Et.events=x.events),this.create_layers(Et))),tt=this.createOlLayerOptions(x,"custom");return W.forEach(Et=>{Et.set(Ft,x.id),Et.set(Wt,x.name)}),new S.Z(Object.assign(tt,{layers:W}))}console.log("layer is not of type StackedLayer!",x)}resolutionsFromExtent(x,W,tt){const et=W,yt=(0,zt.Cr)(x),Et=(0,zt.dz)(x),It=Math.max(Et/tt,yt/tt),wt=et+1,Jt=new Array(wt);for(let ne=0;ne<wt;++ne)Jt[ne]=It/Math.pow(2,ne);return Jt}matrixIdsFromResolutions(x,W){return Array.from(Array(x).keys()).map(tt=>W?`${W}:${tt}`:tt)}getTileGrid(x="default",W,tt,et,yt,Et){const It=W||qt.e,wt=tt||qt.S,Jt=et||"",ne=this.getProjection().getExtent(),ye=this.resolutionsFromExtent(ne,It,wt),oe=this.matrixIdsFromResolutions(ye.length,Jt),ie={extent:ne,origin:(0,zt.rL)(ne),resolutions:yt||ye,tileSize:[wt,wt]};return"wmts"===x?(ie.matrixIds=Et||oe,new D(ie)):"default"===x?new M.Z(ie):void 0}isPopupObj(x){return x&&"object"==typeof x&&!Array.isArray(x)}isPopupObjMove(x){return this.isPopupObj(x)&&"move"===x.event}isPopupObjClick(x){return this.isPopupObj(x)&&"click"===x.event}isPopupObjArray(x){return Array.isArray(x)&&x.length&&this.isPopupObj(x[0])}isPopupStringArray(x){return Array.isArray(x)&&x.length&&"string"==typeof x[0]}eventIsBrowserEvent(x,W){return"move"===x&&"pointermove"===W.type||"click"===x&&"click"===W.type||void 0}layersOnMapEvent(x){let W=!1;const tt=this.map.getAllLayers();let et=tt.length;const yt=new Map;let Et=null;for(;et--;){const It=tt[et];let wt=It.getVisible(),Jt=It.getOpacity();const ne=It.get(Ft);if(ne){const oe=this.getLayerByKey({key:xt,value:ne});wt=oe.getVisible(),Jt=oe.getOpacity()}const ye=It.get(Le);if(this.checkForPopupAsObservable(It,wt,Jt,ye,yt),wt&&0!==Jt&&this.filterLayerExtent(It,x.pixel)&&!ye)break;if(this.filterLayerNoPopup(It)&&It.getData&&It.getData(x.pixel)&&this.checkIsRaster(It)){const oe=It.getData(x.pixel);let ie;if((oe instanceof Uint8ClampedArray||oe instanceof Uint8Array||oe instanceof Float32Array)&&(ie=oe[3]),ie||oe instanceof DataView){Et={layer:It,color:oe};break}}else if(this.filterLayerNoPopup(It)&&this.filterLayerExtent(It,x.pixel)&&this.checkIsVector(It)){const oe=this.map.getFeaturesAtPixel(x.pixel,{layerFilter:ie=>It.get(xt)===ie.get(xt)});if(oe.length){Et={layer:It,feature:oe[0]};break}}}if(Et){const It=Et.layer.get(Le);this.hitLayerCurr=Et.layer.get(xt),this.hitLayerPrev||(this.hitLayerPrev=this.hitLayerCurr),(Et.color||Et.feature)&&(W=!0),this.hitLayerPrev&&this.hitLayerPrev!==this.hitLayerCurr&&(W=!1,this.hitLayerPrev=this.hitLayerCurr),this.checkTopLayerEvent(x,It)&&this.layerOnEvent(x,Et.layer,Et.color,Et.feature)}W?this.map.getTargetElement().style.cursor="pointer":(this.publishNullPropertiesAsObservable(yt,x),this.removeAllPopups(It=>"pointermove"===It.get("addEvent")),this.map.getTargetElement().style.cursor="")}checkForPopupAsObservable(x,W,tt,et,yt){W&&0!==tt&&et&&(this.isPopupObj(et)&&et.asObservable?yt.set(x.get(xt),x):this.isPopupObjArray(et)&&et.forEach(Et=>{Et.asObservable&&yt.set(x.get(xt),x)}))}publishNullPropertiesAsObservable(x,W){x.size&&x.forEach(tt=>{const et=tt.get(Le),yt=[];this.isPopupObj(et)&&et.asObservable?yt.push(et):this.isPopupObjArray(et)&&et.forEach(Et=>{Et.asObservable&&yt.push(Et)}),yt.forEach(Et=>{this.eventIsBrowserEvent(Et.event||"click",W)&&this.popupEvents.next({popupObj:Et,popupParams:{layerId:tt.get(xt),layerName:tt.get("name"),mapEvent:W,layer:tt,properties:null}})})})}checkTopLayerEvent(x,W){let tt=null;const et=(yt,Et)=>{Et.event?this.eventIsBrowserEvent(Et.event,yt)&&this.isPopupObjClick(Et)?tt="click":this.eventIsBrowserEvent(Et.event,yt)&&this.isPopupObjMove(Et)&&(tt="move"):"click"===yt.type&&(tt="click")};return"boolean"==typeof W?!0===W&&"click"===x.type&&(tt="click"):this.isPopupStringArray(W)?"click"===x.type&&(tt="click"):this.isPopupObjArray(W)?W.map(yt=>{et(x,yt)}):et(x,W),tt}checkIsRaster(x){return x instanceof u.Z||x instanceof v.Z}checkIsVector(x){return x instanceof f.Z&&!this.checkIsRaster(x)}layerOnEvent(x,W,tt,et){this.checkIsRaster(W)?this.rasterOnEvent(x,W,tt):this.checkIsVector(W)&&this.vectorOnEvent(x,W,et)}filterLayerExtent(x,W){let tt=!0;const et=x.getExtent();if(et){const yt=this.map.getCoordinateFromPixel(W);(0,zt.b8)(et,yt)||(tt=!1)}return tt}vectorOnEvent(x,W,tt){if(W&&tt){const et=W.get(Le);let yt={};const It=tt.getProperties().features;if(It&&1===It.length)yt=It[0].getProperties();else{if(It&&It.length>1){if("click"===x.type){const wt=this.getFeaturesExtent(It);return this.setExtent(wt),!1}return!0}yt=tt.getProperties()}this.prepareAddPopup(W,x,et,tt,yt)}}rasterOnEvent(x,W,tt){const et=W.get(Le);et&&this.prepareAddPopup(W,x,et,null,null,tt)}prepareAddPopup(x,W,tt,et,yt,Et){const It=x.getProperties(),wt={layerId:It.id,layerName:It.name||It[Wt]||null,mapEvent:W,layer:x,properties:yt?Object.assign({},yt):{}};wt.properties?.geometry&&delete wt.properties.geometry,et&&(wt.feature=et),Et&&(wt.color=Et);const Jt=oe=>{oe&&oe.filterkeys&&(wt.properties=Object.keys(wt.properties).filter(ie=>oe.filterkeys.includes(ie)).reduce((ie,Ge)=>(ie[Ge]=wt.properties[Ge],ie),{}))};this.isPopupStringArray(tt)?wt.properties=Object.keys(wt.properties).filter(oe=>tt.includes(oe)).reduce((oe,ie)=>(oe[ie]=wt.properties[ie],oe),{}):this.isPopupObjArray(tt)?Jt(tt.find(ie=>this.eventIsBrowserEvent(ie.event,W))):this.isPopupObj(tt)&&Jt(tt);const ne=oe=>{if(oe.properties){const ie=Object.keys(oe.properties);Array.isArray(ie)&&(wt.properties=Object.keys(wt.properties).reduce((Ge,Xe)=>{const Ne=oe.properties[Xe];return Ne?Ge[Ne]=wt.properties[Xe]:Ge[Xe]=wt.properties[Xe],Ge},{}))}};this.isPopupObjArray(tt)?tt.forEach(oe=>{this.eventIsBrowserEvent(oe.event,W)&&ne(oe)}):this.isPopupObj(tt)&&ne(tt);const ye=oe=>{"asyncPopup"in oe?oe.asyncPopup(wt,ie=>{oe.asObservable?this.publishPopupEvent(oe,wt,ie):this.addPopup(wt,oe,ie,oe.event,oe.single)}):oe.asObservable?this.publishPopupEvent(oe,wt):this.addPopup(wt,oe,null,oe.event,oe.single)};"boolean"==typeof tt||this.isPopupStringArray(tt)?this.addPopup(wt):this.isPopupObjArray(tt)?tt.forEach(oe=>{this.eventIsBrowserEvent(oe.event,W)&&ye(oe)}):tt&&ye(tt)}publishPopupEvent(x,W,tt){tt&&(W.properties=Object.assign(W.properties,tt)),this.popupEvents.next({popupObj:x,popupParams:W})}addPopup(x,W,tt,et,yt){const Et=x.layer.get(Le),It=x.layer.get(xt),wt="popup_move_ID",Jt="move_ID_L_F",ne=this.getPopups().find(ie=>ie.getId()===wt),ye=x.mapEvent;let oe=null;if("move"===et&&(x.color?oe=`${It}:${x.color.toString()}`:x.feature?oe=`${It}:${(0,Zt.sq)(x.feature)}`:x.layer&&(oe=`${It}:${(0,Zt.sq)(x.layer)}`)),"move"===et&&"pointermove"===ye.type&&ne){let ie;const Ge=x.feature;if(ie=Ge&&"Point"===Ge.getGeometry()?.getType()?Ge.getGeometry().getCoordinates():ye.coordinate,oe!==ne.get(Jt)){const Xe=this.createPopupContainer(ne,x,W,tt,et);ne.setElement(Xe)}ne.setPosition(ie),ne.getElement().parentElement.style.zIndex="1"}else if("pointermove"!==ye.type||et)if("pointermove"===ye.type&&"click"===et)ne&&this.removeAllPopups(ie=>"pointermove"===ie.get("addEvent"));else{let ie=null;ie="move"===et?wt:x.feature?`${It}:${(0,Zt.sq)(x.feature)}`:x.layer?`${It}:${(0,Zt.sq)(x.layer)}`:`${It}:popup_${(new Date).getTime()}`;const Ge={id:ie,autoPan:{animation:{duration:250}},positioning:"bottom-center",stopEvent:!0,insertFirst:!1};let Xe=Ge;if(this.isPopupObjArray(Et)){const Qe=Et.find(ei=>this.eventIsBrowserEvent(ei.event,ye));Qe.options&&(Xe=Object.assign(Ge,Qe.options))}else this.isPopupObj(Et)&&Et.options&&(Xe=Object.assign(Ge,Et.options));const Ne=new P.Z(Xe);oe&&Ne.set(Jt,oe),yt&&this.removeAllPopups(Qe=>{const q=Qe.getId().toString().split(":")[0];return!q||(It===q?It===q:void 0)});const Ue=this.getPopups().find(Qe=>Qe.getId()===Ne.getId()&&Ne.getId()!==wt);Ue&&(this.map.removeOverlay(Ue),this.destroyDynamicPopupComponent(Ue.getId().toString()));const Ve=this.createPopupContainer(Ne,x,W,tt,et);let Je;Ne.getId()===wt?Ne.set("addEvent","pointermove"):Ne.set("addEvent",ye.type),Ne.set(Yt,Le),Ne.setElement(Ve);const si=x.feature;Je=si&&"Point"===si.getGeometry()?.getType()?si.getGeometry().getCoordinates():ye.coordinate,Ne.setPosition(Je),ne&&"move"===et||this.map.addOverlay(Ne)}else ne&&this.removeAllPopups(ie=>"pointermove"===ie.get("addEvent"))}createPopupContainer(x,W,tt,et,yt){const Et=document.createElement("div");Et.className="ol-popup-content";let It="";if(tt?.popupFunction){const Jt=tt.popupFunction(W);It="string"==typeof Jt?Jt:this.createPopupHtml(Jt)}else et?It="string"==typeof et?et:this.createPopupHtml(et):Object.keys(W.properties).length&&(It=this.createPopupHtml(W.properties));if(Et.innerHTML=It,tt?.dynamicPopup){const Jt=x.getId().toString();this.destroyDynamicPopupComponent(Jt),this.createDynamicPopupComponent(Jt,Et,W,tt)}const wt=document.createElement("div");if(wt.className="ol-popup",wt.id=x.getId().toString(),wt.style.display="block",!yt||"move"!==yt){const Jt=document.createElement("a");Jt.className="ol-popup-closer",wt.appendChild(Jt);const ne=()=>{Jt.removeEventListener("click",ne,!1),this.map.removeOverlay(x),this.destroyDynamicPopupComponent(x.getId().toString())};Jt.addEventListener("click",ne,!1)}return wt.appendChild(Et),wt}removeAllPopups(x){let W=this.getPopups();x&&(W=this.getPopups().filter(x)),W.forEach(tt=>{tt.get(Yt)===Le&&(this.map.removeOverlay(tt),this.destroyDynamicPopupComponent(tt.getId().toString()))})}hideAllPopups(x,W){let tt=this.getPopups();W&&(tt=this.getPopups().filter(W)),tt.forEach(et=>{if(et.get(Yt)===Le){const yt=et.getElement();x?yt.classList.add("hidden"):yt.classList.remove("hidden")}})}createPopupHtml(x){let W="<table>";for(const tt in x)x.hasOwnProperty(tt)&&(W+='<tr><td style="vertical-align: top; padding-right: 7px;"><b>'+tt+": </b></td><td>"+x[tt]+"</td></tr>");return W+="</table>",W}getPopups(){const x=[];return this.map.getOverlays().getArray().slice(0).forEach(W=>{W.get(Yt)===Le&&x.push(W)}),x}destroyDynamicPopupComponent(x){this.dynamicPopupComponents.has(x)&&(this.dynamicPopupComponents.get(x).destroy(),this.dynamicPopupComponents.delete(x))}createDynamicPopupComponent(x,W,tt,et){const yt=(0,z.LMc)(et.dynamicPopup.component,{environmentInjector:this.envInjector,hostElement:W});if(et.dynamicPopup.getAttributes){const Et=et.dynamicPopup.getAttributes(tt);for(const It in Et)"undefined"!==Et[It]&&(yt.instance[It]=Et[It])}this.app.attachView(yt.hostView),this.dynamicPopupComponents.set(x,yt)}setExtent(x,W,tt){const et=(0,rt.U2)(W?ge:this.EPSG),yt=(0,rt.$A)(x.slice(0,4),et,this.getProjection().getCode()),Et={size:this.map.getSize()};return tt&&Object.assign(Et,tt),this.map.getView().fit(yt,tt),yt}setCenter(x,W){const tt=(0,rt.U2)(W?ge:this.EPSG),et=(0,rt.vs)(x,tt,this.getProjection().getCode());return this.map.getView().setCenter(et),et}getCenter(x){const W=(0,rt.U2)(x?ge:this.EPSG),tt=(0,rt.U2)(this.getProjection().getCode());return(0,rt.vs)(this.map.getView().getCenter(),tt,W)}getFeaturesExtent(x,W){const tt=x[0].getGeometry().getExtent().slice(0);if(x.forEach(et=>{(0,zt.l7)(tt,et.getGeometry().getExtent())}),W){const et=(0,rt.U2)(ge);return(0,rt.$A)(tt,this.getProjection().getCode(),et)}return tt}getCurrentExtent(x){const W=(0,rt.U2)(x?ge:this.EPSG),tt=this.map.getView().calculateExtent();return(0,rt.$A)(tt,this.getProjection().getCode(),W)}setZoom(x){this.map.getView().setZoom(x)}getZoom(){return this.map.getView().getZoom()}zoomInOut(x,W){const tt=this.map.getView();if(!tt)return;const et=W?.zoomStep||1,yt="+"===x?et:-1*et,Et=tt.getZoom();if(void 0!==Et){const It=tt.getConstrainedZoom(Et+yt);tt.getAnimating()&&tt.cancelAnimations(),tt.animate({zoom:It,duration:W?.duration||250,easing:W?.easing||Xt.Vv},wt=>{W.callback&&W.callback(wt)})}}geoJsonToFeature(x){return new Pt.Z({dataProjection:ge,featureProjection:this.EPSG}).readFeature(x)}geoJsonToFeatures(x){return new Pt.Z({dataProjection:ge,featureProjection:this.EPSG}).readFeatures(x)}getProjection(){return this.map.getView().getProjection()}reprojectFeatures(x,W,tt){x.getFeatures().forEach(et=>{et.getGeometry().transform(W,tt)})}setProjection(x){if(x){let W={};if(this.viewOptions&&(W=this.viewOptions,W.minResolution=void 0,W.maxResolution=void 0,W.resolution=void 0,W.resolutions=void 0),x instanceof Ot.Z){W.projection=x;const yt=(0,rt.vs)(this.map.getView().getCenter(),this.map.getView().getProjection(),x);W.center=yt,W.zoom=this.map.getView().getZoom()}else"string"==typeof x&&(W.projection=x,W.center=this.map.getView().getCenter(),W.zoom=this.map.getView().getZoom());const tt=new G.ZP(W),et=this.EPSG;this.EPSG=tt.getProjection().getCode(),this.map.setView(tt),this.view=this.map.getView(),this.map.getLayers().getArray().forEach(yt=>{yt.getLayers().getArray().forEach(Et=>{if(Et instanceof A.Z){let It=Et.getSource();for(;It.source;)It=It.source;It instanceof st.Z&&this.reprojectFeatures(It,et,this.EPSG)}})}),this.projectionChange.next(this.getProjection())}}registerProjection(x){Gt.Z.defs(x.code,x.proj4js),(0,At.z2)(Gt.Z)}getOlProjection(x){return new Ot.Z({code:x.code,extent:x.extent?x.extent:void 0,worldExtent:x.worldExtent?x.worldExtent:void 0,global:!!x.global&&x.global,units:x.units?x.units:void 0})}keysToUppercase(x){return Object.keys(x).forEach(W=>{const tt=W.toUpperCase();tt!==W&&(x[tt]=x[W],delete x[W])}),x}static#t=this.\u0275fac=function(W){return new(W||nt)(z.LFG(z.z2F),z.LFG(z.lqb))};static#e=this.\u0275prov=z.Yz7({token:nt,factory:nt.\u0275fac,providedIn:"root"})}return nt})()},5829:(jt,ht,a)=>{"use strict";a.d(ht,{oC:()=>Z,BR:()=>z.B});var z=a(7180),k=(a(8558),a(6733)),G=a(755);let Z=(()=>{class A{static#t=this.\u0275fac=function(v){return new(v||A)};static#e=this.\u0275mod=G.oAB({type:A});static#i=this.\u0275inj=G.cJS({providers:[z.B],imports:[k.ez]})}return A})()},3829:(jt,ht,a)=>{"use strict";a.d(ht,{UT:()=>tt,qS:()=>Jt,n8:()=>u,fA:()=>k,yv:()=>v,f$:()=>P,AH:()=>f,vK:()=>G,f_:()=>xt});var z=a(1590),F=a(2224);function k(q){let J=[];for(const _t of q)if(_t instanceof z.Z){const St=k(_t.getLayers().getArray());J=Array.prototype.concat(J,St)}else J.push(_t);return J}function G(q,J,_t,pt=!1){const St=J.getContext("2d");if(!St)throw new Error("The target-canvas needs to use a 2d-context.");if(!J.width||!J.height)throw new Error("TargetCanvas: width or height have not been set.");St instanceof CanvasRenderingContext2D&&St.clearRect(0,0,J.width,J.height);const Ht=q.getSize();J.width=Ht[0],J.height=Ht[1];const te=k(q.getLayers().getArray()),ve=[];for(const Te of te)if(Te.getVisible()&&Te.getOpacity()>0){const Se=Te.on("postrender",Fe=>{const ke=Fe.context.canvas;St instanceof CanvasRenderingContext2D&&(St.beginPath(),St.drawImage(ke,0,0,ke.clientWidth,ke.clientHeight,0,0,J.width,J.height),St.closePath())});Array.isArray(Se)?Se.map(Fe=>ve.push(Fe)):ve.push(Se)}pt?q.on("rendercomplete",Te=>{_t(J)}):q.once("rendercomplete",Te=>{for(const Se of ve)(0,F.B)(Se);_t(J)}),q.renderSync()}function P(q,J,_t=!1){q.setVisible(J),!_t&&q instanceof z.Z&&q.getLayers().forEach(St=>{P(St,J)})}function v(q,J,_t=!1){q.setOpacity(J),!_t&&q instanceof z.Z&&q.getLayers().forEach(St=>{v(St,J)})}function f(q,J,_t){q.setZIndex(_t>0?J+_t:J),q instanceof z.Z&&q.getLayers().forEach(Ht=>{f(Ht,J,_t)})}function u(q,J,_t){_t.remove(q),_t.insertAt(J,q)}var c=a(450),r=a(7021);const d=q=>{let J=[];for(const _t of q){let pt;pt=Array.isArray(_t[0])?d(_t):_t,J=Array.prototype.concat(J,pt)}return J},l=(q,J)=>Math.log(q)/Math.log(J),m=(q,J)=>l(q,J)%1==0,y=(q,J,_t)=>{const pt=q.createShader(J);if(!pt)throw new Error("No shader was created");if(q.shaderSource(pt,_t),q.compileShader(pt),!q.getShaderParameter(pt,q.COMPILE_STATUS))throw q.deleteShader(pt),new Error(`An error occurred compiling the shader: ${q.getShaderInfoLog(pt)}.    \n\n Shader code: ${_t}`);return pt},R=(q,J)=>{q.useProgram(J)},w=(q,J,_t)=>{q.bindBuffer(q.ARRAY_BUFFER,_t.buffer),q.enableVertexAttribArray(J),q.vertexAttribPointer(J,_t.vectorSize,_t.type,_t.normalize,_t.stride,_t.offset)},at=(q,J,_t,pt)=>{if(_t>q.getParameter(q.MAX_COMBINED_TEXTURE_IMAGE_UNITS))throw new Error(`There are only ${q.getParameter(q.MAX_COMBINED_TEXTURE_IMAGE_UNITS)} texture bind points, but you tried to bind to point nr. ${_t}.`);7===_t&&console.error(`You are about to bind to the dedicated texture-construction bind point (nr. ${_t}).\n        If after this call another texture is built, your shader will now use that new texture instead of this one!\n        Consider using another bind point.`),q.activeTexture(q.TEXTURE0+_t),q.bindTexture(q.TEXTURE_2D,J),q.uniform1i(pt,_t)},Gt=(q,J,_t)=>{const pt=q.getUniformLocation(J,_t);if(null===pt)throw new Error(`Couldn't find uniform ${_t} in program.`);return pt},zt=(q,J,_t,pt)=>{switch(_t){case"bool":case"int":q.uniform1i(J,pt[0]);break;case"bvec2":case"ivec2":q.uniform2i(J,pt[0],pt[1]);break;case"bvec3":case"ivec3":q.uniform3i(J,pt[0],pt[1],pt[2]);break;case"bvec4":case"ivec4":q.uniform4i(J,pt[0],pt[1],pt[2],pt[3]);break;case"bool[]":case"int[]":q.uniform1iv(J,pt);break;case"bvec2[]":case"ivec2[]":q.uniform2iv(J,pt);break;case"bvec3[]":case"ivec3[]":q.uniform3iv(J,pt);break;case"bvec4[]":case"ivec4[]":q.uniform4iv(J,pt);break;case"float":q.uniform1f(J,pt[0]);break;case"vec2":q.uniform2f(J,pt[0],pt[1]);break;case"vec3":q.uniform3f(J,pt[0],pt[1],pt[2]);break;case"vec4":q.uniform4f(J,pt[0],pt[1],pt[2],pt[3]);break;case"float[]":q.uniform1fv(J,pt);break;case"vec2[]":q.uniform2fv(J,pt);break;case"vec3[]":q.uniform3fv(J,pt);break;case"vec4[]":q.uniform4fv(J,pt);break;case"mat2":q.uniformMatrix2fv(J,!1,pt);break;case"mat3":q.uniformMatrix3fv(J,!1,pt);break;case"mat4":q.uniformMatrix4fv(J,!1,pt);break;default:throw Error(`Type ${_t} not implemented.`)}};class he{constructor(J,_t,pt){this.vertexShaderSource=_t,this.fragmentShaderSource=pt,this.program=((q,J,_t)=>{const pt=q.createProgram();if(!pt)throw new Error("No program was created");const St=y(q,q.VERTEX_SHADER,J),Ht=y(q,q.FRAGMENT_SHADER,_t);if(q.attachShader(pt,St),q.attachShader(pt,Ht),q.linkProgram(pt),q.detachShader(pt,St),q.detachShader(pt,Ht),q.deleteShader(St),q.deleteShader(Ht),!q.getProgramParameter(pt,q.LINK_STATUS))throw q.deleteProgram(pt),new Error("Unable to initialize the shader program: "+q.getProgramInfoLog(pt));return pt})(J,_t,pt),this.id=function(q){let J=0;for(const _t of q)J+=_t.charCodeAt(0);return`${J}`}(_t+pt)}}class ce{constructor(J,_t,pt,St,Ht){this.location=Gt(J,_t.program,pt),this.type=St,this.value=Ht,this.variableName=pt}}class Ce{constructor(J,_t,pt,St,Ht){this.location=Gt(J,_t.program,pt),this.texture=St instanceof HTMLImageElement||St instanceof HTMLCanvasElement?((q,J)=>{const _t=q.createTexture();if(!_t)throw new Error("No texture was created");q.activeTexture(q.TEXTURE0+7),q.bindTexture(q.TEXTURE_2D,_t);const St=q.RGBA,Ht=q.RGBA,te=q.UNSIGNED_BYTE;let ve,Te;return q.texImage2D(q.TEXTURE_2D,0,St,Ht,te,J),q.generateMipmap(q.TEXTURE_2D),q.bindTexture(q.TEXTURE_2D,null),J instanceof HTMLImageElement?(ve=J.naturalWidth,Te=J.naturalHeight):(ve=J.width,Te=J.height),{texture:_t,level:0,internalformat:St,format:Ht,type:te,width:ve,height:Te,border:0}})(J,St):St,this.bindPoint=Ht,this.variableName=pt}}class ft{constructor(J,_t,pt,St,Ht){this.location=Gt(J,_t.program,pt),this.texture=((q,J)=>{const _t=J.length,pt=J[0].length,St=J[0][0].length;if(!m(pt,2)||!m(_t,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${pt} x ${_t}`);if(4!==St)throw new Error(`Expecting 4 channels, but ${St} provided`);const Ht=q.createTexture();if(!Ht)throw new Error("No texture was created");q.activeTexture(q.TEXTURE0+7),q.bindTexture(q.TEXTURE_2D,Ht);const Te=q.RGBA,Se=q.RGBA,Fe=q.UNSIGNED_BYTE,Be=new Uint8Array(d(J));return 4!==St&&q.pixelStorei(q.UNPACK_ALIGNMENT,1),q.texImage2D(q.TEXTURE_2D,0,Te,pt,_t,0,Se,Fe,Be),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST),q.bindTexture(q.TEXTURE_2D,null),{texture:Ht,level:0,internalformat:Te,format:Se,type:Fe,width:pt,height:_t,border:0}})(J,St),this.bindPoint=Ht,this.variableName=pt}}class Ct{constructor(J,_t,pt,St,Ht="triangles"){let te;switch(Ht){case"triangles":te=J.TRIANGLES;break;case"lines":te=J.LINES;break;case"points":te=J.POINTS;break;default:throw new Error(`Invalid drawing mode ${Ht}`)}this.location=((q,J,_t)=>{const pt=q.getAttribLocation(J,_t);if(-1===pt)throw new Error(`Couldn't find attribute ${_t} in program.`);return pt})(J,_t.program,pt),this.value=((q,J,_t=q.TRIANGLES)=>{const pt=new Float32Array(d(J)),St=q.createBuffer();if(!St)throw new Error("No buffer was created");return q.bindBuffer(q.ARRAY_BUFFER,St),q.bufferData(q.ARRAY_BUFFER,pt,q.STATIC_DRAW),q.bindBuffer(q.ARRAY_BUFFER,null),{buffer:St,vectorSize:J[0].length,vectorCount:J.length,type:q.FLOAT,normalize:!1,stride:0,offset:0,drawingMode:_t}})(J,St,te),this.variableName=pt,this.drawingMode=te}}class Zt{constructor(J,_t,pt="triangles"){let St;switch(pt){case"triangles":St=J.TRIANGLES;break;case"lines":St=J.LINES;break;case"points":St=J.POINTS;break;default:throw new Error(`Invalid drawing mode ${pt}`)}this.index=((q,J,_t=q.TRIANGLES)=>{const pt=new Uint16Array(d(J)),St=q.createBuffer();if(!St)throw new Error("No buffer was created");return q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,St),q.bufferData(q.ELEMENT_ARRAY_BUFFER,pt,q.STATIC_DRAW),q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,null),{buffer:St,count:pt.length,type:q.UNSIGNED_SHORT,offset:0,drawingMode:_t}})(J,_t,St)}}function Vt(q,J){for(const _t of q)if(J(_t))return _t;return null}class Yt{constructor(J,_t,pt,St,Ht){this.program=J,this.attributes=_t,this.uniforms=pt,this.textures=St,this.index=Ht;const[te,ve,Te,Se]=function pe(q){const J=/^\s*attribute (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*);/gm,_t=/^\s*uniform (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*)(\[\d\])*;/gm,pt=/^\s*uniform sampler2D (\w*);/gm,St=/^\s*precision (\w*) float;/gm,Ht=q.fragmentShaderSource+"\n\n\n"+q.vertexShaderSource,te=[];let ve;for(;null!==(ve=J.exec(Ht));)te.push(ve[2]);const Te=[];let Se;for(;null!==(Se=_t.exec(Ht));)Te.push(Se[2]);const Fe=[];let Be;for(;null!==(Be=pt.exec(Ht));)Fe.push(Be[1]);const ke=[];let ni;for(;null!==(ni=St.exec(Ht));)ke.push(ni[1]);return[te,Te,Fe,ke]}(J);for(const Be of te){const ke=_t.filter(ni=>ni.variableName===Be);if(1!==ke.length)throw new Error(`Provided ${ke.length} values for shader's attribute ${Be}.`)}for(const Be of ve){const ke=pt.filter(ni=>ni.variableName===Be);if(1!==ke.length)throw new Error(`Provided ${ke.length} values for shader's uniform ${Be}.`)}for(const Be of Te){const ke=St.filter(ni=>ni.variableName===Be);if(1!==ke.length)throw new Error(`Provided ${ke.length} values for shader's texture ${Be}.`)}1===Se.length&&console.warn("You have only provided one precision qualifier.\n            This can cause issues when you want to use a uniform in both the vertex- and the fragment-shader.");const Fe=this.attributes.map(Be=>Be.value.vectorCount);if(Math.min(...Fe)!==Math.max(...Fe))throw new Error("Your attributes are not of the same length!")}bind(J){R(J,this.program.program);for(const _t of this.attributes)w(J,_t.location,_t.value);for(const _t of this.uniforms)zt(J,_t.location,_t.type,_t.value);for(const _t of this.textures)at(J,_t.texture.texture,_t.bindPoint,_t.location);this.index&&((q,J)=>{q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,this.index.index.buffer)})(J)}render(J,_t,pt,St){pt?((q,J,_t)=>{q.bindFramebuffer(q.FRAMEBUFFER,J.framebuffer),_t?(J.width/J.height!=_t[2]/_t[3]&&console.warn("Your viewport-aspect is different from the framebuffer-aspect."),q.viewport(..._t)):q.viewport(0,0,J.width,J.height)})(J,pt,St):((q,J)=>{q.bindFramebuffer(q.FRAMEBUFFER,null),J?(q.canvas.width/q.canvas.height!=J[2]/J[3]&&console.warn("Your viewport-aspect is different from the canvas-aspect."),q.viewport(...J)):q.viewport(0,0,q.canvas.width,q.canvas.height)})(J,St),_t&&((q,J)=>{q.clearColor(J[0],J[1],J[2],J[3]),q.clearDepth(1),q.clear(q.COLOR_BUFFER_BIT|q.DEPTH_BUFFER_BIT)})(J,_t),this.index?((q,J)=>{q.drawElements(J.drawingMode,J.count,J.type,J.offset)})(J,this.index.index):((q,J)=>{q.drawArrays(J.drawingMode,J.offset,J.vectorCount)})(J,this.attributes[0].value)}updateAttributeData(J,_t,pt){const St=Vt(this.attributes,Ht=>Ht.variableName===_t);if(!St)throw new Error(`No such attribute ${_t} to be updated.`);((q,J,_t)=>{const pt=new Float32Array(d(_t));q.bindBuffer(q.ARRAY_BUFFER,J.buffer),q.bufferData(q.ARRAY_BUFFER,pt,q.STATIC_DRAW),q.bindBuffer(q.ARRAY_BUFFER,null)})(J,St.value,pt)}updateUniformData(J,_t,pt){const St=Vt(this.uniforms,Ht=>Ht.variableName===_t);if(!St)throw new Error(`No such uniform ${_t} to be updated.`);St.value=pt}updateTextureData(J,_t,pt){const St=Vt(this.textures,te=>te.variableName===_t);if(!St)throw new Error(`No such texture ${_t} to be updated.`);const Ht=((q,J,_t)=>{if(q.activeTexture(q.TEXTURE0+7),q.bindTexture(q.TEXTURE_2D,J.texture),_t instanceof HTMLImageElement||_t instanceof HTMLCanvasElement)q.texImage2D(q.TEXTURE_2D,0,q.RGBA,q.RGBA,q.UNSIGNED_BYTE,_t);else{const pt=_t[0].length,St=_t.length;if(!m(pt,2)||!m(St,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${St} x ${pt}`);const Ht=new Uint8Array(d(_t));q.texImage2D(q.TEXTURE_2D,J.level,J.internalformat,J.width,J.height,J.border,J.format,J.type,Ht)}return q.generateMipmap(q.TEXTURE_2D),q.bindTexture(q.TEXTURE_2D,null),_t instanceof HTMLImageElement?(J.width=_t.naturalWidth,J.height=_t.naturalHeight):_t instanceof HTMLCanvasElement?(J.width=_t.width,J.height=_t.height):(J.width=_t[0].length,J.height=_t.length),J})(J,St.texture,pt);St.texture=Ht}}class gt{constructor(J,_t,pt){const St=(q=>{const J=q.createFramebuffer();if(!J)throw new Error("Error creating framebuffer");return J})(J),Ht=((q,J,_t)=>{if(J<=0||_t<=0)throw new Error("Width and height must be positive.");const pt=q.createTexture();if(!pt)throw new Error("No texture was created");return q.activeTexture(q.TEXTURE0+7),q.bindTexture(q.TEXTURE_2D,pt),q.texImage2D(q.TEXTURE_2D,0,q.RGBA,J,_t,0,q.RGBA,q.UNSIGNED_BYTE,null),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.NEAREST),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.NEAREST),q.bindTexture(q.TEXTURE_2D,null),{texture:pt,level:0,internalformat:q.RGBA,format:q.RGBA,type:q.UNSIGNED_BYTE,width:J,height:_t,border:0}})(J,_t,pt),te=((q,J,_t)=>{if(q.bindFramebuffer(q.FRAMEBUFFER,_t),q.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,J.texture,0),q.checkFramebufferStatus(q.FRAMEBUFFER)!==q.FRAMEBUFFER_COMPLETE)throw new Error(`Error creating framebuffer: framebuffer-status: ${q.checkFramebufferStatus(q.FRAMEBUFFER)} ; error-code: ${q.getError()}`);return q.bindFramebuffer(q.FRAMEBUFFER,null),{framebuffer:_t,texture:J,width:J.width,height:J.height}})(J,Ht,St);this.fbo=te}}function xt(q,J){const _t=1e3/q;let St,Ht,te,pt=_t;const ve=()=>{St=window.performance.now(),J(pt),Ht=window.performance.now(),pt=Ht-St,te=Math.max(_t-pt,0),setTimeout(()=>{requestAnimationFrame(ve)},te)};ve()}const Q=(q,J)=>({vertices:[[-q/2,J/2,0],[-q/2,-J/2,0],[q/2,-J/2,0],[-q/2,J/2,0],[q/2,-J/2,0],[q/2,J/2,0]],texturePositions:[[0,1],[0,0],[1,0],[0,1],[1,0],[1,1]]});var W=a(4696);class tt extends c.Z{constructor(J){super(J)}createRenderer(){return this.renderer=new et(this),this.renderer}updateSunAngle(J){this.renderer&&this.renderer.updateSunAngle(J)}}class et extends W.Z{constructor(J){super(J),this.state="loading";const _t=document.createElement("canvas");_t.width=1200,_t.height=800,_t.style.position="absolute";const pt=_t.getContext("webgl"),St=J.getSource(),Ht=St.getProjection(),te=St.getImageExtent(),ve=this.bboxOntoRectangle(2,2,te),Te=((q,J=256,_t=256,pt="red")=>{const St=document.createElement("canvas").getContext("2d");if(!St)throw new Error("no context");return St.canvas.width=J,St.canvas.height=_t,St.font=`bold ${5*_t/6|0}px sans-serif`,St.textAlign="center",St.textBaseline="middle",St.fillStyle=pt,St.fillText(q,J/2,_t/2),St.canvas})("test",2048,2048,"red"),Se=new he(pt,"\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2canv;\n            varying vec2 v_texturePosition;\n            void main() {\n                vec3 pixelPosition = u_world2pix * vec3(a_position.x, a_position.y, 1.);\n                vec3 canvasPosition = u_pix2canv * pixelPosition;\n                gl_Position = vec4(canvasPosition.x, canvasPosition.y, 0., 1.);\n                v_texturePosition = a_texturePosition;\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_srtm;\n            uniform float u_imageSize;\n            uniform vec3 u_sun;\n            varying vec2 v_texturePosition;\n            void main() {\n                float delta = 4. / u_imageSize;\n                float top = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y + delta)).r;\n                float bot = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y - delta)).r;\n                float lft = texture2D(u_srtm, vec2(v_texturePosition.x + delta, 1. - v_texturePosition.y        )).r;\n                float rgt = texture2D(u_srtm, vec2(v_texturePosition.x - delta, 1. - v_texturePosition.y        )).r;\n\n                vec3 surfaceNormal = vec3(\n                    lft - rgt,\n                    bot - top,\n                    2. * delta\n                );\n                surfaceNormal = normalize(surfaceNormal);\n                vec3 sunNormal = normalize(u_sun);\n                float alignment = abs(dot(sunNormal, surfaceNormal));\n\n                gl_FragColor = vec4(0., 0., 0., 0.5 * alignment);\n            }\n        ");R(pt,Se.program);const Fe=new Yt(Se,[new Ct(pt,Se,"a_position",ve.vertices),new Ct(pt,Se,"a_texturePosition",ve.texturePositions)],[new ce(pt,Se,"u_imageSize","float",[2048]),new ce(pt,Se,"u_sun","vec3",[0,0,1]),new ce(pt,Se,"u_world2pix","mat3",d([[1,0,0],[0,1,0],[0,0,1]])),new ce(pt,Se,"u_pix2canv","mat3",d([[1/(_t.width/2),0,0],[0,-1/(_t.height/2),0],[-1,1,1]]))],[new Ce(pt,Se,"u_srtm",Te,0)]);Fe.bind(pt),this.shader=Fe,this.canvas=_t,this.gl=pt,this.projection=Ht;const Be=St.getImage(te,.02197265625,2.440000295639038,Ht);Be.addEventListener("change",ke=>{const ni=Be.getImage();this.shader.updateTextureData(this.gl,"u_srtm",ni),this.shader.bind(this.gl),this.state="ready",super.getLayer().changed()}),Be.load()}prepareFrame(J){if("ready"===this.state){const _t=J.coordinateToPixelTransform;this.shader.updateUniformData(this.gl,"u_world2pix",d([[_t[0],_t[1],0],[_t[2],_t[3],0],[_t[4],_t[5],1]])),this.shader.bind(this.gl),J.viewState.projection!==this.projection&&this.reprojectImage(J.viewState.projection)}return!0}renderFrame(J,_t){return"ready"===this.state&&(this.shader.render(this.gl),this.transformCanvas(J)),this.canvas}renderDeclutter(J){}updateSunAngle(J){this.shader.updateUniformData(this.gl,"u_sun",[J[0],J[1],1]),this.shader.bind(this.gl),this.shader.render(this.gl)}bboxOntoRectangle(J,_t,pt){const St=Q(J,_t);for(const Ht of St.vertices){const ve=Ht[1];Ht[0]=Ht[0]===J/2?pt[2]:pt[0],Ht[1]=ve===_t/2?pt[3]:pt[1]}return St}reprojectImage(J){const _t=super.getLayer().getSource(),pt=_t.getProjection(),St=_t.getImageExtent(),Ht=(0,r.$A)(St,pt,J),te=this.bboxOntoRectangle(2,2,Ht);this.shader.updateAttributeData(this.gl,"a_position",te.vertices),this.shader.bind(this.gl)}transformCanvas(J){const _t=J.layerStatesArray[J.layerIndex],pt=J.pixelRatio,St=J.size,Ht=Math.round(St[0]*pt),te=Math.round(St[1]*pt),ve=_t.opacity;this.canvas.width=Ht,this.canvas.height=te,this.canvas.style.opacity=`${ve}`,this.shader.updateUniformData(this.gl,"u_pix2canv",d([[1/(this.canvas.width/2),0,0],[0,-1/(this.canvas.height/2),0],[-1,1,1]]))}}var yt=a(5564),Et=a(640),It=a(5240),wt=a(4211);class Jt extends Et.Z{constructor(J){super(J),this.options=J}createRenderer(){return new ne(this,this.options.renderSettings)}updateParas(J,_t,pt){const St={colorRamp:this.options.renderSettings.colorRamp,maxEdgeLength:this.options.renderSettings.maxEdgeLength,storeInterpolatedPixelData:this.options.renderSettings.storeInterpolatedPixelData,valueProperty:this.options.renderSettings.valueProperty,power:J,showLabels:pt,smooth:_t};super.getRenderer().updateSettings(St),this.options.renderSettings=St}}class ne extends yt.Z{constructor(J,_t){super(J),this.settings=_t,this.container=document.createElement("div"),this.container.classList.add("ol-layer"),this.container.style.setProperty("position","absolute"),this.container.style.setProperty("width","100%"),this.container.style.setProperty("height","100%"),this.webGlCanvas=document.createElement("canvas"),this.webGlCanvas.style.setProperty("position","absolute"),this.webGlCanvas.style.setProperty("left","0px"),this.webGlCanvas.style.setProperty("top","0px"),this.webGlCanvas.style.setProperty("width","100%"),this.webGlCanvas.style.setProperty("height","100%"),this.webGlCanvas.width=1e3,this.webGlCanvas.height=1e3,this.gl=this.webGlCanvas.getContext("webgl"),this.container.appendChild(this.webGlCanvas),this.pointRenderer=new yt.Z(J);const pt=J.getSource();this.projection=pt.getProjection();const{coords:St,values:Ht,bboxDelta:te,maxVal:ve}=this.parseData(pt,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:Te,maxEdgeLengthBbox:Se}=this.parseDataBbox(te,St,Ht,ve,this.settings.maxEdgeLength);this.bbox=te;const Fe=[[1,0,0],[0,1,0],[0,0,1]];this.interpolationShader=oe(this.gl,Te,ve,this.settings.power,Se),this.valueFb=new gt(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.colorizationShader=ie(this.gl,this.settings.colorRamp,ve,this.settings.smooth,this.valueFb),this.colorFb=new gt(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.arrangementShader=Ge(this.gl,Fe,Fe,te,this.colorFb),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo)}prepareFrame(J){if(this.webGlCanvas.style.opacity=`${J.layerStatesArray[J.layerIndex].opacity}`,J.viewState.projection!==this.projection){this.projection=J.viewState.projection;const St=super.getLayer().getSource(),{coords:Ht,values:te,bboxDelta:ve,maxVal:Te}=this.parseData(St,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:Se,maxEdgeLengthBbox:Fe}=this.parseDataBbox(ve,Ht,te,Te,this.settings.maxEdgeLength);this.updateInterpolationShader(this.settings.power,Se,Fe),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo),this.bbox=ve}return this.updateArrangementShader(J.coordinateToPixelTransform,J.size[0],J.size[1],this.bbox),this.pointRenderer.prepareFrame(J),!0}renderFrame(J,_t){if(this.runArrangementShader(),this.settings.showLabels){const pt=this.pointRenderer.renderFrame(J,this.container);(0,wt.hF)(this.container,[this.webGlCanvas,pt])}else(0,wt.hF)(this.container,[this.webGlCanvas]);return this.container}renderDeclutter(J){}updateSettings(J){const _t=this.settings;this.settings=J,J.power!==_t.power?(this.updateInterpolationShader(J.power),this.runInterpolationShader(this.valueFb.fbo),this.updateColorizationShader(J.smooth),this.runColorizationShader(this.colorFb.fbo)):J.smooth!==_t.smooth&&(this.updateColorizationShader(J.smooth),this.runColorizationShader(this.colorFb.fbo)),super.getLayer().changed()}updateArrangementShader(J,_t,pt,St){const te=[[1/(_t/2),0,0],[0,-1/(pt/2),0],[-1,1,1]];this.arrangementShader.updateUniformData(this.gl,"u_world2pix",d([[J[0],J[1],0],[J[2],J[3],0],[J[4],J[5],1]])),this.arrangementShader.updateUniformData(this.gl,"u_pix2clip",d(te)),this.arrangementShader.updateUniformData(this.gl,"u_bbox",St)}runArrangementShader(J){this.arrangementShader.bind(this.gl),this.arrangementShader.render(this.gl,[0,0,0,0],J)}updateInterpolationShader(J,_t,pt){this.interpolationShader.updateUniformData(this.gl,"u_power",[J]),_t&&this.interpolationShader.updateTextureData(this.gl,"u_dataTexture",[_t]),pt&&this.interpolationShader.updateUniformData(this.gl,"u_maxDistance",[pt])}runInterpolationShader(J){this.interpolationShader.bind(this.gl),this.interpolationShader.render(this.gl,[0,0,0,0],J),this.settings.storeInterpolatedPixelData&&(this.interpolatedValues=(q=>{const J=q.getContext("webgl");if(!J)throw new Error("no context");const _t=J.getParameter(J.IMPLEMENTATION_COLOR_READ_FORMAT),pt=J.getParameter(J.IMPLEMENTATION_COLOR_READ_TYPE);let St;if(pt===J.UNSIGNED_BYTE)St=new Uint8Array(J.drawingBufferWidth*J.drawingBufferHeight*4);else if(pt===J.UNSIGNED_SHORT_5_6_5||pt===J.UNSIGNED_SHORT_4_4_4_4||pt===J.UNSIGNED_SHORT_5_5_5_1)St=new Uint16Array(J.drawingBufferWidth*J.drawingBufferHeight*4);else{if(pt!==J.FLOAT)throw new Error(`Did not understand pixel data type ${pt} for format ${_t}`);St=new Float32Array(J.drawingBufferWidth*J.drawingBufferHeight*4)}return J.readPixels(0,0,q.width,q.height,_t,pt,St),St})(this.webGlCanvas))}updateColorizationShader(J){this.colorizationShader.updateUniformData(this.gl,"u_smooth",[J?1:0])}runColorizationShader(J){this.colorizationShader.bind(this.gl),this.colorizationShader.render(this.gl,[0,0,0,0],J)}parseData(J,_t,pt){let St=J.getFeatures();St=J instanceof It.Z?J.getSource().getFeatures():J.getFeatures();const Ht=St.map(Mi=>Mi.getGeometry().getCoordinates()),te=St.map(Mi=>parseFloat(Mi.getProperties()[_t])),ve=Xe(Ht),Te=ve[2]-ve[0],Se=ve[3]-ve[1];let Fe,Be;Te>Se?(Be=Te-Se,Fe=0):(Be=0,Fe=Se-Te);const ke=[ve[0]-pt,ve[1]-pt,ve[2]+Fe+pt,ve[3]+Be+pt],ni=te.reduce((Mi,gi)=>gi>Mi?gi:Mi,0);return{coords:Ht,values:te,bboxDelta:ke,maxVal:ni}}parseDataBbox(J,_t,pt,St,Ht){const te=Ne(_t,pt).map(ke=>{const ni=ye([ke[0],ke[1]],J);return[255*(ni[0]+1)/2,255*(ni[1]+1)/2,255*ke[2]/St,255]}),ve=te.length,Te=((q,J)=>{const _t=Math.ceil(l(q,2));return Math.pow(2,_t)})(ve);for(let ke=0;ke<Te-ve;ke++)te.push([0,0,0,0]);return{observationsBbox:te,maxEdgeLengthBbox:Ht/Math.max(J[2]-J[0],J[3]-J[1])}}}const ye=(q,J)=>[(q[0]-J[0])/(J[2]-J[0])*2-1,(q[1]-J[1])/(J[3]-J[1])*2-1],oe=(q,J,_t,pt,St)=>{const te=new he(q,"\n            precision mediump float;\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n                v_position = a_position.xy;\n                v_texturePosition = a_texturePosition;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_power;\n            uniform sampler2D u_dataTexture;\n            uniform int u_nrDataPoints;\n            uniform float u_maxValue;\n            uniform float u_maxDistance;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n\n                float valSum = 0.0;\n                float wSum = 0.0;\n                float minD = 10000.0;\n                for (int i = 0; i < 10000; i++) {\n                    if (i > u_nrDataPoints) {\n                        break;\n                    }\n                    vec4 dataPoint = texture2D(u_dataTexture, vec2(float(i) / float(u_nrDataPoints), 0.5));\n                    if (dataPoint.w > 0.0) {  // texture is padded to next power of two with transparent 0-values.\n                        vec2 coords = dataPoint.xy * 2.0 - 1.0;  // transforming coords from [0, 1] to [-1, 1]\n                        float value = dataPoint.z * u_maxValue;  // transforming value from [0, 1] to [0, maxValue]\n\n                        float d = distance(v_position, coords);\n                        float w = 1.0 / pow(d, u_power);\n                        valSum += value * w;\n                        wSum += w;\n                        if (d < minD) {\n                            minD = d;\n                        }\n                    }\n                }\n                float interpolatedValue = valSum / wSum;\n                float alpha = 1.0;\n                if (minD > u_maxDistance) {\n                    alpha = 0.0;\n                }\n                vec4 color = vec4(interpolatedValue / u_maxValue, 0.0, 0.0, alpha);\n\n                gl_FragColor = color;\n            }\n        "),ve={vertices:[[-1,1,0],[-1,-1,0],[1,-1,0],[1,1,0]],texturePositions:[[0,1],[0,0],[1,0],[1,1]],vertexIndices:[[0,1,2],[0,2,3]]};return new Yt(te,[new Ct(q,te,"a_position",ve.vertices),new Ct(q,te,"a_texturePosition",ve.texturePositions)],[new ce(q,te,"u_power","float",[pt]),new ce(q,te,"u_nrDataPoints","int",[J.length]),new ce(q,te,"u_maxValue","float",[_t]),new ce(q,te,"u_maxDistance","float",[St])],[new ft(q,te,"u_dataTexture",[J],0)],new Zt(q,ve.vertexIndices))},ie=(q,J,_t,pt,St)=>{const te=new he(q,"\n            precision mediump float;\n            attribute vec2 a_position;\n            attribute vec2 a_textureCoord;\n            varying vec2 v_textureCoord;\n\n            void main() {\n                v_textureCoord = a_textureCoord;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_colorRampValues[15];\n            uniform vec3 u_colorRampColors[15];\n            uniform int u_nrColorRampValues;\n            uniform float u_maxValue;\n            uniform bool u_smooth;\n            uniform sampler2D u_valueTexture;\n            varying vec2 v_textureCoord;\n\n            vec3 valueToSmoothColor(in float value) {\n                if (value < u_colorRampValues[0]) {\n                    return u_colorRampColors[0];\n                }\n                for (int i = 1; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        float alpha = (value - u_colorRampValues[i-1]) / (u_colorRampValues[i] - u_colorRampValues[i-1]);\n                        vec3 color = alpha * (u_colorRampColors[i] - u_colorRampColors[i-1]) + u_colorRampColors[i-1];\n                        return color;\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            vec3 valueToStepColor(in float value) {\n                for (int i = 0; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        return u_colorRampColors[i];\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            void main() {\n                vec4 pixelData = texture2D(u_valueTexture, v_textureCoord);\n                float val = pixelData.r * u_maxValue;\n                float alpha = pixelData.w;\n                vec3 rgb = vec3(0.0, 0.0, 0.0);\n                if (alpha > 0.01) {\n                    if (u_smooth) {\n                        rgb = valueToSmoothColor(val);\n                    } else {\n                        rgb = valueToStepColor(val);\n                    }\n                }\n                gl_FragColor = vec4(rgb.x / 255.0, rgb.y / 255.0, rgb.z / 255.0, alpha);\n            }\n        ");return new Yt(te,[new Ct(q,te,"a_position",Q(2,2).vertices),new Ct(q,te,"a_textureCoord",Q(2,2).texturePositions)],[new ce(q,te,"u_colorRampValues","float[]",J.map(Te=>Te.val)),new ce(q,te,"u_colorRampColors","vec3[]",d(J.map(Te=>Te.rgb))),new ce(q,te,"u_nrColorRampValues","int",[J.length]),new ce(q,te,"u_maxValue","float",[_t]),new ce(q,te,"u_smooth","bool",[pt?1:0])],[new Ce(q,te,"u_valueTexture",St.fbo.texture,0)])},Ge=(q,J,_t,pt,St)=>{const Ht=new he(q,"\n            precision mediump float;\n            attribute vec3 a_pos;\n            attribute vec2 a_posTexture;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2clip;\n            uniform vec4 u_bbox;\n            varying vec2 v_posTexture;\n\n            vec2 clipBbx2worldCoords(vec2 clipCoords, vec4 bbox) {\n                float xPerct = ( clipCoords.x + 1.0 ) / 2.0;\n                float yPerct = ( clipCoords.y + 1.0 ) / 2.0;\n                float xWorld = xPerct * (bbox.z - bbox.x) + bbox.x;\n                float yWorld = yPerct * (bbox.w - bbox.y) + bbox.y;\n                return vec2(xWorld, yWorld);\n            }\n\n            void main() {\n                v_posTexture = a_posTexture;\n                vec2 worldPos = clipBbx2worldCoords(a_pos.xy, u_bbox);\n                vec3 clipPos = u_pix2clip * u_world2pix * vec3(worldPos.xy, 1.0);\n                gl_Position = vec4(clipPos.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_texture;\n            varying vec2 v_posTexture;\n\n            void main() {\n                gl_FragColor = texture2D(u_texture, v_posTexture);\n            }\n        ");return new Yt(Ht,[new Ct(q,Ht,"a_pos",Q(2,2).vertices),new Ct(q,Ht,"a_posTexture",Q(2,2).texturePositions)],[new ce(q,Ht,"u_world2pix","mat3",d(J)),new ce(q,Ht,"u_pix2clip","mat3",d(_t)),new ce(q,Ht,"u_bbox","vec4",pt)],[new Ce(q,Ht,"u_texture",St.fbo.texture,0)])},Xe=q=>{const J=q.map(ve=>ve[0]),_t=q.map(ve=>ve[1]),pt=Math.min(...J),St=Math.max(...J);return[pt,Math.min(..._t),St,Math.max(..._t)]},Ne=(q,J)=>{const _t=[];for(let pt=0;pt<q.length;pt++)_t.push(q[pt].concat(J[pt]));return _t}},1677:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>k});const z={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class F extends Error{constructor(Z){const A=z[Z];super(A),this.code=Z,this.name="AssertionError",this.message=A}}const k=F},6108:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>P});var z=a(1677),F=a(7300),k=a(1892),G=a(8802);class A extends G.ZP{constructor(f,u,c){super(f),this.element=u,this.index=c}}const P=class S extends F.Z{constructor(f,u){if(super(),this.unique_=!!(u=u||{}).unique,this.array_=f||[],this.unique_)for(let c=0,r=this.array_.length;c<r;++c)this.assertUnique_(this.array_[c],c);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(f){for(let u=0,c=f.length;u<c;++u)this.push(f[u]);return this}forEach(f){const u=this.array_;for(let c=0,r=u.length;c<r;++c)f(u[c],c,u)}getArray(){return this.array_}item(f){return this.array_[f]}getLength(){return this.get("length")}insertAt(f,u){if(f<0||f>this.getLength())throw new Error("Index out of bounds: "+f);this.unique_&&this.assertUnique_(u),this.array_.splice(f,0,u),this.updateLength_(),this.dispatchEvent(new A(k.Z.ADD,u,f))}pop(){return this.removeAt(this.getLength()-1)}push(f){this.unique_&&this.assertUnique_(f);const u=this.getLength();return this.insertAt(u,f),this.getLength()}remove(f){const u=this.array_;for(let c=0,r=u.length;c<r;++c)if(u[c]===f)return this.removeAt(c)}removeAt(f){if(f<0||f>=this.getLength())return;const u=this.array_[f];return this.array_.splice(f,1),this.updateLength_(),this.dispatchEvent(new A(k.Z.REMOVE,u,f)),u}setAt(f,u){if(f>=this.getLength())return void this.insertAt(f,u);if(f<0)throw new Error("Index out of bounds: "+f);this.unique_&&this.assertUnique_(u,f);const r=this.array_[f];this.array_[f]=u,this.dispatchEvent(new A(k.Z.REMOVE,r,f)),this.dispatchEvent(new A(k.Z.ADD,u,f))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(f,u){for(let c=0,r=this.array_.length;c<r;++c)if(this.array_[c]===f&&c!==u)throw new z.Z(58)}}},1892:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={ADD:"add",REMOVE:"remove"}},5337:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>F});const F=class z{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},6626:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var z=a(7300),F=a(2431),k=a(9219),G=a(7847);class Z extends z.Z{constructor(v){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),v&&("function"==typeof v.getSimplifiedGeometry?this.setGeometry(v):this.setProperties(v))}clone(){const v=new Z(this.hasProperties()?this.getProperties():null);v.setGeometryName(this.getGeometryName());const f=this.getGeometry();f&&v.setGeometry(f.clone());const u=this.getStyle();return u&&v.setStyle(u),v}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,G.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const v=this.getGeometry();v&&(this.geometryChangeKey_=(0,G.oL)(v,F.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(v){this.set(this.geometryName_,v)}setStyle(v){this.style_=v,this.styleFunction_=v?function A(P){if("function"==typeof P)return P;let v;return Array.isArray(P)?v=P:((0,k.h)("function"==typeof P.getZIndex,41),v=[P]),function(){return v}}(v):void 0,this.changed()}setId(v){this.id_=v,this.changed()}setGeometryName(v){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=v,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const S=Z},4499:(jt,ht,a)=>{"use strict";a.d(ht,{K:()=>P,Z:()=>v});var z=a(2431),F=a(6908),k=a(4847),G=a(3233),Z=a(1316),A=a(7847);function P(f,u,c){const r=f;let d=!0,e=!1,l=!1;const m=[(0,A.Vx)(r,z.Z.LOAD,function(){l=!0,e||u()})];return r.src&&G.Tp?(e=!0,r.decode().then(function(){d&&u()}).catch(function(s){d&&(l?u():c())})):m.push((0,A.Vx)(r,z.Z.ERROR,c)),function(){d=!1,m.forEach(A.bN)}}const v=class S extends F.Z{constructor(u,c,r,d,e,l,m){super(u,c,r,k.Z.IDLE),this.src_=d,this.image_=new Image,null!==e&&(this.image_.crossOrigin=e),this.context_=m,this.unlisten_=null,this.state=k.Z.IDLE,this.imageLoadFunction_=l}getImage(){if(this.state==k.Z.LOADED&&this.context_&&!(this.image_ instanceof HTMLCanvasElement)){const u=this.context_.canvas;u.width=this.image_.width,u.height=this.image_.height,this.context_.drawImage(this.image_,0,0),this.image_=this.context_.canvas}return this.image_}handleImageError_(){this.state=k.Z.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=(0,Z.Cr)(this.extent)/this.image_.height),this.state=k.Z.LOADED,this.unlistenImage_(),this.changed()}load(){(this.state==k.Z.IDLE||this.state==k.Z.ERROR)&&(this.state=k.Z.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=P(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(u){this.image_=u,this.resolution=(0,Z.Cr)(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},6908:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>Z});var z=a(9608),F=a(2431),k=a(3089);const Z=class G extends z.Z{constructor(S,P,v,f){super(),this.extent=S,this.pixelRatio_=v,this.resolution=P,this.state=f}changed(){this.dispatchEvent(F.Z.CHANGE)}getExtent(){return this.extent}getImage(){return(0,k.O3)()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){(0,k.O3)()}}},6696:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var z=a(6908),F=a(4847);const G=class k extends z.Z{constructor(A,S,P,v,f){super(A,S,P,void 0!==f?F.Z.IDLE:F.Z.LOADED),this.loader_=void 0!==f?f:null,this.canvas_=v,this.error_=null}getError(){return this.error_}handleLoad_(A){A?(this.error_=A,this.state=F.Z.ERROR):this.state=F.Z.LOADED,this.changed()}load(){this.state==F.Z.IDLE&&(this.state=F.Z.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}},4847:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},3968:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var z=a(6381),F=a(5399),k=a(4211),G=a(4499);const S=class Z extends z.Z{constructor(v,f,u,c,r,d){super(v,f,d),this.crossOrigin_=c,this.src_=u,this.key=u,this.image_=new Image,null!==c&&(this.image_.crossOrigin=c),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(v){this.image_=v,this.state=F.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=F.Z.ERROR,this.unlistenImage_(),this.image_=function A(){const P=(0,k.E4)(1,1);return P.fillStyle="rgba(0,0,0,0)",P.fillRect(0,0,1,1),P.canvas}(),this.changed()}handleImageLoad_(){const v=this.image_;this.state=v.naturalWidth&&v.naturalHeight?F.Z.LOADED:F.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==F.Z.ERROR&&(this.state=F.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==F.Z.IDLE&&(this.state=F.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,G.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},4792:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>pe});var z=a(7300),F=a(6108),k=a(1892),G=a(5337),Z=a(6077),A=a(3089),S=a(6412),P=a(1316),v=a(8823),f=a(5209),u=a(1242);function r(Yt,gt){v.c.expire()}const d=class c extends G.Z{constructor(gt){super(),this.map_=gt}dispatchRenderEvent(gt,xt){(0,A.O3)()}calculateMatrices2D(gt){const xt=gt.viewState,Ft=gt.coordinateToPixelTransform,Wt=gt.pixelToCoordinateTransform;(0,S.qC)(Ft,gt.size[0]/2,gt.size[1]/2,1/xt.resolution,-1/xt.resolution,-xt.rotation,-xt.center[0],-xt.center[1]),(0,S.nb)(Wt,Ft)}forEachFeatureAtCoordinate(gt,xt,Ft,Wt,Bt,ue,ge,Le){let Me;const nt=xt.viewState;function Q(Jt,ne,ye,oe){return Bt.call(ue,ne,Jt?ye:null,oe)}const x=nt.projection,W=(0,u.Cf)(gt.slice(),x),tt=[[0,0]];if(x.canWrapX()&&Wt){const Jt=x.getExtent(),ne=(0,P.dz)(Jt);tt.push([-ne,0],[ne,0])}const et=xt.layerStatesArray,yt=et.length,Et=[],It=[];for(let Jt=0;Jt<tt.length;Jt++)for(let ne=yt-1;ne>=0;--ne){const ye=et[ne],oe=ye.layer;if(oe.hasRenderer()&&(0,f.j)(ye,nt)&&ge.call(Le,oe)){const ie=oe.getRenderer(),Ge=oe.getSource();if(ie&&Ge){const Xe=Ge.getWrapX()?W:gt,Ne=Q.bind(null,ye.managed);It[0]=Xe[0]+tt[Jt][0],It[1]=Xe[1]+tt[Jt][1],Me=ie.forEachFeatureAtCoordinate(It,xt,Ft,Ne,Et)}if(Me)return Me}}if(0===Et.length)return;const wt=1/Et.length;return Et.forEach((Jt,ne)=>Jt.distanceSq+=ne*wt),Et.sort((Jt,ne)=>Jt.distanceSq-ne.distanceSq),Et.some(Jt=>Me=Jt.callback(Jt.feature,Jt.layer,Jt.geometry)),Me}hasFeatureAtCoordinate(gt,xt,Ft,Wt,Bt,ue){return void 0!==this.forEachFeatureAtCoordinate(gt,xt,Ft,Wt,Z.uX,this,Bt,ue)}getMap(){return this.map_}renderFrame(gt){(0,A.O3)()}flushDeclutterItems(gt){}scheduleExpireIconCache(gt){v.c.canExpireCache()&&gt.postRenderFunctions.push(r)}};var e=a(1858),l=a(891),m=a(8934),s=a(4118),g=a(6380),_=a(7847),y=a(4211);const O=class I extends d{constructor(gt){super(gt),this.fontChangeListenerKey_=(0,_.oL)(g.sG,e.Z.PROPERTYCHANGE,gt.redrawText.bind(gt)),this.element_=document.createElement("div");const xt=this.element_.style;xt.position="absolute",xt.width="100%",xt.height="100%",xt.zIndex="0",this.element_.className=s.XV+" ol-layers";const Ft=gt.getViewport();Ft.insertBefore(this.element_,Ft.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(gt,xt){const Ft=this.getMap();if(Ft.hasListener(gt)){const Wt=new l.Z(gt,void 0,xt);Ft.dispatchEvent(Wt)}}disposeInternal(){(0,_.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(gt){if(!gt)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(gt),this.dispatchRenderEvent(m.Z.PRECOMPOSE,gt);const xt=gt.layerStatesArray.sort(function(ue,ge){return ue.zIndex-ge.zIndex}),Ft=gt.viewState;this.children_.length=0;const Wt=this.declutterLayers_;Wt.length=0;let Bt=null;for(let ue=0,ge=xt.length;ue<ge;++ue){const Le=xt[ue];gt.layerIndex=ue;const Me=Le.layer,nt=Me.getSourceState();if(!(0,f.j)(Le,Ft)||"ready"!=nt&&"undefined"!=nt){Me.unrender();continue}const Q=Me.render(gt,Bt);Q&&(Q!==Bt&&(this.children_.push(Q),Bt=Q),"getDeclutter"in Me&&Wt.push(Me))}this.flushDeclutterItems(gt),(0,y.hF)(this.element_,this.children_),this.dispatchRenderEvent(m.Z.POSTCOMPOSE,gt),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(gt)}flushDeclutterItems(gt){const xt=this.declutterLayers_;for(let Ft=xt.length-1;Ft>=0;--Ft)xt[Ft].renderDeclutter(gt);xt.length=0}};var E=a(2431),R=a(1590),N=a(8802);const rt=class K extends N.ZP{constructor(gt,xt,Ft){super(gt),this.map=xt,this.frameState=void 0!==Ft?Ft:null}},L=class b extends rt{constructor(gt,xt,Ft,Wt,Bt,ue){super(gt,xt,Bt),this.originalEvent=Ft,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==Wt&&Wt,this.activePointers=ue}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(gt){this.pixel_=gt}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(gt){this.coordinate_=gt}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}};var w=a(6990),M=a(4256),C=a(9608),D=a(3233);const st=class Y extends C.Z{constructor(gt,xt){super(gt),this.map_=gt,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===xt?1:xt,this.down_=null;const Ft=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=Ft,this.pointerdownListenerKey_=(0,_.oL)(Ft,M.Z.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=(0,_.oL)(Ft,M.Z.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(E.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!D.bM&&{passive:!1})}emulateClick_(gt){let xt=new L(w.Z.CLICK,this.map_,gt);this.dispatchEvent(xt),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,xt=new L(w.Z.DBLCLICK,this.map_,gt),this.dispatchEvent(xt)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const Ft=new L(w.Z.SINGLECLICK,this.map_,gt);this.dispatchEvent(Ft)},250)}updateActivePointers_(gt){const xt=gt,Ft=xt.pointerId;if(xt.type==w.Z.POINTERUP||xt.type==w.Z.POINTERCANCEL){delete this.trackedTouches_[Ft];for(const Wt in this.trackedTouches_)if(this.trackedTouches_[Wt].target!==xt.target){delete this.trackedTouches_[Wt];break}}else(xt.type==w.Z.POINTERDOWN||xt.type==w.Z.POINTERMOVE)&&(this.trackedTouches_[Ft]=xt);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(gt){this.updateActivePointers_(gt);const xt=new L(w.Z.POINTERUP,this.map_,gt,void 0,void 0,this.activePointers_);this.dispatchEvent(xt),this.emulateClicks_&&!xt.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(gt)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(_.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(gt){return 0===gt.button}handlePointerDown_(gt){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(gt);const xt=new L(w.Z.POINTERDOWN,this.map_,gt,void 0,void 0,this.activePointers_);if(this.dispatchEvent(xt),this.down_=new PointerEvent(gt.type,gt),Object.defineProperty(this.down_,"target",{writable:!1,value:gt.target}),0===this.dragListenerKeys_.length){const Ft=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,_.oL)(Ft,w.Z.POINTERMOVE,this.handlePointerMove_,this),(0,_.oL)(Ft,w.Z.POINTERUP,this.handlePointerUp_,this),(0,_.oL)(this.element_,w.Z.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==Ft&&this.dragListenerKeys_.push((0,_.oL)(this.element_.getRootNode(),w.Z.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(gt){if(this.isMoving_(gt)){this.updateActivePointers_(gt),this.dragging_=!0;const xt=new L(w.Z.POINTERDRAG,this.map_,gt,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(xt)}}relayMoveEvent_(gt){this.originalPointerMoveEvent_=gt;const xt=!(!this.down_||!this.isMoving_(gt));this.dispatchEvent(new L(w.Z.POINTERMOVE,this.map_,gt,xt))}handleTouchMove_(gt){const xt=this.originalPointerMoveEvent_;(!xt||xt.defaultPrevented)&&("boolean"!=typeof gt.cancelable||!0===gt.cancelable)&&gt.preventDefault()}isMoving_(gt){return this.dragging_||Math.abs(gt.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(gt.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,_.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(E.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,_.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(_.bN),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}};var V=a(5465),at=a(8963),ut=a(857),Pt=a(6715),vt=a(3701),Ot=a(9219),At=a(9854),Gt=a(8861),zt=a(8284),Xt=a(9813),fe=a(9363),he=a(7021),ce=a(7298),Ce=a(6518);function ft(Yt){Yt instanceof f.Z?Yt.setMapInternal(null):Yt instanceof R.Z&&Yt.getLayers().forEach(ft)}function Ct(Yt,gt){if(Yt instanceof f.Z)Yt.setMapInternal(gt);else if(Yt instanceof R.Z){const xt=Yt.getLayers().getArray();for(let Ft=0,Wt=xt.length;Ft<Wt;++Ft)Ct(xt[Ft],gt)}}const pe=class Zt extends z.Z{constructor(gt){super();const xt=function Vt(Yt){let gt=null;void 0!==Yt.keyboardEventTarget&&(gt="string"==typeof Yt.keyboardEventTarget?document.getElementById(Yt.keyboardEventTarget):Yt.keyboardEventTarget);const xt={},Ft=Yt.layers&&"function"==typeof Yt.layers.getLayers?Yt.layers:new R.Z({layers:Yt.layers});let Wt,Bt,ue;return xt[at.Z.LAYERGROUP]=Ft,xt[at.Z.TARGET]=Yt.target,xt[at.Z.VIEW]=Yt.view instanceof Pt.ZP?Yt.view:new Pt.ZP,void 0!==Yt.controls&&(Array.isArray(Yt.controls)?Wt=new F.Z(Yt.controls.slice()):((0,Ot.h)("function"==typeof Yt.controls.getArray,47),Wt=Yt.controls)),void 0!==Yt.interactions&&(Array.isArray(Yt.interactions)?Bt=new F.Z(Yt.interactions.slice()):((0,Ot.h)("function"==typeof Yt.interactions.getArray,48),Bt=Yt.interactions)),void 0!==Yt.overlays?Array.isArray(Yt.overlays)?ue=new F.Z(Yt.overlays.slice()):((0,Ot.h)("function"==typeof Yt.overlays.getArray,49),ue=Yt.overlays):ue=new F.Z,{controls:Wt,interactions:Bt,keyboardEventTarget:gt,overlays:ue,values:xt}}(gt=gt||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==gt.maxTilesLoading?gt.maxTilesLoading:16,this.pixelRatio_=void 0!==gt.pixelRatio?gt.pixelRatio:D.MP,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,S.Ue)(),this.pixelToCoordinateTransform_=(0,S.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=gt.moveTolerance,this.keyboardEventTarget_=xt.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=xt.controls||function qt(Yt){Yt=Yt||{};const gt=new F.Z;return(void 0===Yt.zoom||Yt.zoom)&&gt.push(new zt.Z(Yt.zoomOptions)),(void 0===Yt.rotate||Yt.rotate)&&gt.push(new Gt.Z(Yt.rotateOptions)),(void 0===Yt.attribution||Yt.attribution)&&gt.push(new At.Z(Yt.attributionOptions)),gt}(),this.interactions=xt.interactions||(0,Xt.c)({onFocusOnly:!0}),this.overlays_=xt.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ut.Z(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(at.Z.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(at.Z.VIEW,this.handleViewChanged_),this.addChangeListener(at.Z.SIZE,this.handleSizeChanged_),this.addChangeListener(at.Z.TARGET,this.handleTargetChanged_),this.setProperties(xt.values);const Ft=this;gt.view&&!(gt.view instanceof Pt.ZP)&&gt.view.then(function(Wt){Ft.setView(new Pt.ZP(Wt))}),this.controls.addEventListener(k.Z.ADD,Wt=>{Wt.element.setMap(this)}),this.controls.addEventListener(k.Z.REMOVE,Wt=>{Wt.element.setMap(null)}),this.interactions.addEventListener(k.Z.ADD,Wt=>{Wt.element.setMap(this)}),this.interactions.addEventListener(k.Z.REMOVE,Wt=>{Wt.element.setMap(null)}),this.overlays_.addEventListener(k.Z.ADD,Wt=>{this.addOverlayInternal_(Wt.element)}),this.overlays_.addEventListener(k.Z.REMOVE,Wt=>{const Bt=Wt.element.getId();void 0!==Bt&&delete this.overlayIdIndex_[Bt.toString()],Wt.element.setMap(null)}),this.controls.forEach(Wt=>{Wt.setMap(this)}),this.interactions.forEach(Wt=>{Wt.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(gt){this.getControls().push(gt)}addInteraction(gt){this.getInteractions().push(gt)}addLayer(gt){this.getLayerGroup().getLayers().push(gt)}handleLayerAdd_(gt){Ct(gt.layer,this)}addOverlay(gt){this.getOverlays().push(gt)}addOverlayInternal_(gt){const xt=gt.getId();void 0!==xt&&(this.overlayIdIndex_[xt.toString()]=gt),gt.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(gt,xt,Ft){if(!this.frameState_||!this.renderer_)return;const Wt=this.getCoordinateFromPixelInternal(gt);return this.renderer_.forEachFeatureAtCoordinate(Wt,this.frameState_,void 0!==(Ft=void 0!==Ft?Ft:{}).hitTolerance?Ft.hitTolerance:0,!1!==Ft.checkWrapped,xt,null,void 0!==Ft.layerFilter?Ft.layerFilter:Z.uX,null)}getFeaturesAtPixel(gt,xt){const Ft=[];return this.forEachFeatureAtPixel(gt,function(Wt){Ft.push(Wt)},xt),Ft}getAllLayers(){const gt=[];return function xt(Ft){Ft.forEach(function(Wt){Wt instanceof R.Z?xt(Wt.getLayers()):gt.push(Wt)})}(this.getLayers()),gt}hasFeatureAtPixel(gt,xt){if(!this.frameState_||!this.renderer_)return!1;const Ft=this.getCoordinateFromPixelInternal(gt);return this.renderer_.hasFeatureAtCoordinate(Ft,this.frameState_,void 0!==(xt=void 0!==xt?xt:{}).hitTolerance?xt.hitTolerance:0,!1!==xt.checkWrapped,void 0!==xt.layerFilter?xt.layerFilter:Z.uX,null)}getEventCoordinate(gt){return this.getCoordinateFromPixel(this.getEventPixel(gt))}getEventCoordinateInternal(gt){return this.getCoordinateFromPixelInternal(this.getEventPixel(gt))}getEventPixel(gt){const Ft=this.viewport_.getBoundingClientRect(),Wt=this.getSize(),ge="changedTouches"in gt?gt.changedTouches[0]:gt;return[(ge.clientX-Ft.left)/(Ft.width/Wt[0]),(ge.clientY-Ft.top)/(Ft.height/Wt[1])]}getTarget(){return this.get(at.Z.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(gt){return(0,he.lO)(this.getCoordinateFromPixelInternal(gt),this.getView().getProjection())}getCoordinateFromPixelInternal(gt){const xt=this.frameState_;return xt?(0,S.nn)(xt.pixelToCoordinateTransform,gt.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(gt){const xt=this.overlayIdIndex_[gt.toString()];return void 0!==xt?xt:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(at.Z.LAYERGROUP)}setLayers(gt){const xt=this.getLayerGroup();if(gt instanceof F.Z)return void xt.setLayers(gt);const Ft=xt.getLayers();Ft.clear(),Ft.extend(gt)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const gt=this.getLayerGroup().getLayerStatesArray();for(let xt=0,Ft=gt.length;xt<Ft;++xt){const Wt=gt[xt];if(!Wt.visible)continue;const Bt=Wt.layer.getRenderer();if(Bt&&!Bt.ready)return!0;const ue=Wt.layer.getSource();if(ue&&ue.loading)return!0}return!1}getPixelFromCoordinate(gt){const xt=(0,he.Vs)(gt,this.getView().getProjection());return this.getPixelFromCoordinateInternal(xt)}getPixelFromCoordinateInternal(gt){const xt=this.frameState_;return xt?(0,S.nn)(xt.coordinateToPixelTransform,gt.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(at.Z.SIZE)}getView(){return this.get(at.Z.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const gt=this.getTargetElement();return gt?gt.ownerDocument:document}getTilePriority(gt,xt,Ft,Wt){return(0,ut.R)(this.frameState_,gt,xt,Ft,Wt)}handleBrowserEvent(gt,xt){const Ft=new L(xt=xt||gt.type,this,gt);this.handleMapBrowserEvent(Ft)}handleMapBrowserEvent(gt){if(!this.frameState_)return;const xt=gt.originalEvent,Ft=xt.type;if(Ft===M.Z.POINTERDOWN||Ft===E.Z.WHEEL||Ft===E.Z.KEYDOWN){const Wt=this.getOwnerDocument(),Bt=this.viewport_.getRootNode?this.viewport_.getRootNode():Wt,ue=xt.target;if(this.overlayContainerStopEvent_.contains(ue)||!(Bt===Wt?Wt.documentElement:Bt).contains(ue))return}if(gt.frameState=this.frameState_,!1!==this.dispatchEvent(gt)){const Wt=this.getInteractions().getArray().slice();for(let Bt=Wt.length-1;Bt>=0;Bt--){const ue=Wt[Bt];if(ue.getMap()===this&&ue.getActive()&&this.getTargetElement()&&(!ue.handleEvent(gt)||gt.propagationStopped))break}}}handlePostRender(){const gt=this.frameState_,xt=this.tileQueue_;if(!xt.isEmpty()){let Wt=this.maxTilesLoading_,Bt=Wt;if(gt){const ue=gt.viewHints;if(ue[vt.Z.ANIMATING]||ue[vt.Z.INTERACTING]){const ge=Date.now()-gt.time>8;Wt=ge?0:8,Bt=ge?0:2}}xt.getTilesLoading()<Wt&&(xt.reprioritize(),xt.loadMoreTiles(Wt,Bt))}gt&&this.renderer_&&!gt.animate&&(!0===this.renderComplete_?(this.hasListener(m.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(m.Z.RENDERCOMPLETE,gt),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new rt(V.Z.LOADEND,this,gt)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new rt(V.Z.LOADSTART,this,gt))));const Ft=this.postRenderFunctions_;for(let Wt=0,Bt=Ft.length;Wt<Bt;++Wt)Ft[Wt](this,gt);Ft.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let Ft=0,Wt=this.targetChangeHandlerKeys_.length;Ft<Wt;++Ft)(0,_.bN)(this.targetChangeHandlerKeys_[Ft]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(E.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(E.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,y.ZF)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const Ft=this.targetElement_.getRootNode();Ft instanceof ShadowRoot&&this.resizeObserver_.unobserve(Ft.host),this.setSize(void 0)}const gt=this.getTarget(),xt="string"==typeof gt?document.getElementById(gt):gt;if(this.targetElement_=xt,xt){xt.appendChild(this.viewport_),this.renderer_||(this.renderer_=new O(this)),this.mapBrowserEventHandler_=new st(this,this.moveTolerance_);for(const Bt in w.Z)this.mapBrowserEventHandler_.addEventListener(w.Z[Bt],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(E.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(E.Z.WHEEL,this.boundHandleBrowserEvent_,!!D.bM&&{passive:!1});const Ft=this.keyboardEventTarget_?this.keyboardEventTarget_:xt;this.targetChangeHandlerKeys_=[(0,_.oL)(Ft,E.Z.KEYDOWN,this.handleBrowserEvent,this),(0,_.oL)(Ft,E.Z.KEYPRESS,this.handleBrowserEvent,this)];const Wt=xt.getRootNode();Wt instanceof ShadowRoot&&this.resizeObserver_.observe(Wt.host),this.resizeObserver_.observe(xt)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,_.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,_.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const gt=this.getView();gt&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,_.oL)(gt,e.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,_.oL)(gt,E.Z.CHANGE,this.handleViewPropertyChanged_,this),gt.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(_.bN),this.layerGroupPropertyListenerKeys_=null);const gt=this.getLayerGroup();gt&&(this.handleLayerAdd_(new R.V("addlayer",gt)),this.layerGroupPropertyListenerKeys_=[(0,_.oL)(gt,e.Z.PROPERTYCHANGE,this.render,this),(0,_.oL)(gt,E.Z.CHANGE,this.render,this),(0,_.oL)(gt,"addlayer",this.handleLayerAdd_,this),(0,_.oL)(gt,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const gt=this.getLayerGroup().getLayerStatesArray();for(let xt=0,Ft=gt.length;xt<Ft;++xt){const Wt=gt[xt].layer;Wt.hasRenderer()&&Wt.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const gt=this.frameState_;gt&&this.renderer_.flushDeclutterItems(gt)}removeControl(gt){return this.getControls().remove(gt)}removeInteraction(gt){return this.getInteractions().remove(gt)}removeLayer(gt){return this.getLayerGroup().getLayers().remove(gt)}handleLayerRemove_(gt){ft(gt.layer)}removeOverlay(gt){return this.getOverlays().remove(gt)}renderFrame_(gt){const xt=this.getSize(),Ft=this.getView(),Wt=this.frameState_;let Bt=null;if(void 0!==xt&&(0,ce.py)(xt)&&Ft&&Ft.isDef()){const ue=Ft.getHints(this.frameState_?this.frameState_.viewHints:void 0),ge=Ft.getState();if(Bt={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,P.p8)(ge.center,ge.resolution,ge.rotation,xt),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:xt,tileQueue:this.tileQueue_,time:gt,usedTiles:{},viewState:ge,viewHints:ue,wantedTiles:{},mapId:(0,A.sq)(this),renderTargets:{}},ge.nextCenter&&ge.nextResolution){const Le=isNaN(ge.nextRotation)?ge.rotation:ge.nextRotation;Bt.nextExtent=(0,P.p8)(ge.nextCenter,ge.nextResolution,Le,xt)}}this.frameState_=Bt,this.renderer_.renderFrame(Bt),Bt&&(Bt.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Bt.postRenderFunctions),Wt&&(!this.previousExtent_||!(0,P.xb)(this.previousExtent_)&&!(0,P.fS)(Bt.extent,this.previousExtent_))&&(this.dispatchEvent(new rt(V.Z.MOVESTART,this,Wt)),this.previousExtent_=(0,P.YN)(this.previousExtent_)),this.previousExtent_&&!Bt.viewHints[vt.Z.ANIMATING]&&!Bt.viewHints[vt.Z.INTERACTING]&&!(0,P.fS)(Bt.extent,this.previousExtent_)&&(this.dispatchEvent(new rt(V.Z.MOVEEND,this,Bt)),(0,P.d9)(Bt.extent,this.previousExtent_))),this.dispatchEvent(new rt(V.Z.POSTRENDER,this,Bt)),this.renderComplete_=this.hasListener(V.Z.LOADSTART)||this.hasListener(V.Z.LOADEND)||this.hasListener(m.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(gt){const xt=this.getLayerGroup();xt&&this.handleLayerRemove_(new R.V("removelayer",xt)),this.set(at.Z.LAYERGROUP,gt)}setSize(gt){this.set(at.Z.SIZE,gt)}setTarget(gt){this.set(at.Z.TARGET,gt)}setView(gt){if(!gt||gt instanceof Pt.ZP)return void this.set(at.Z.VIEW,gt);this.set(at.Z.VIEW,new Pt.ZP);const xt=this;gt.then(function(Ft){xt.setView(new Pt.ZP(Ft))})}updateSize(){const gt=this.getTargetElement();let xt;if(gt){const Wt=getComputedStyle(gt),Bt=gt.offsetWidth-parseFloat(Wt.borderLeftWidth)-parseFloat(Wt.paddingLeft)-parseFloat(Wt.paddingRight)-parseFloat(Wt.borderRightWidth),ue=gt.offsetHeight-parseFloat(Wt.borderTopWidth)-parseFloat(Wt.paddingTop)-parseFloat(Wt.paddingBottom)-parseFloat(Wt.borderBottomWidth);!isNaN(Bt)&&!isNaN(ue)&&(xt=[Bt,ue],!(0,ce.py)(xt)&&(gt.offsetWidth||gt.offsetHeight||gt.getClientRects().length)&&(0,Ce.ZK)("No map visible because the map container's width or height are 0."))}const Ft=this.getSize();xt&&(!Ft||!(0,fe.fS)(xt,Ft))&&(this.setSize(xt),this.updateViewportSize_())}updateViewportSize_(){const gt=this.getView();if(gt){let xt;const Ft=getComputedStyle(this.viewport_);Ft.width&&Ft.height&&(xt=[parseInt(Ft.width,10),parseInt(Ft.height,10)]),gt.setViewportSize(xt)}}}},6990:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>F});var z=a(2431);const F={SINGLECLICK:"singleclick",CLICK:z.Z.CLICK,DBLCLICK:z.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},5465:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},8963:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},7300:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>P});var z=a(8802),F=a(1858),k=a(2224),G=a(3089),Z=a(5526);class A extends z.ZP{constructor(f,u,c){super(f),this.key=u,this.oldValue=c}}const P=class S extends k.Z{constructor(f){super(),(0,G.sq)(this),this.values_=null,void 0!==f&&this.setProperties(f)}get(f){let u;return this.values_&&this.values_.hasOwnProperty(f)&&(u=this.values_[f]),u}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(f,u){let c;c=`change:${f}`,this.hasListener(c)&&this.dispatchEvent(new A(c,f,u)),c=F.Z.PROPERTYCHANGE,this.hasListener(c)&&this.dispatchEvent(new A(c,f,u))}addChangeListener(f,u){this.addEventListener(`change:${f}`,u)}removeChangeListener(f,u){this.removeEventListener(`change:${f}`,u)}set(f,u,c){const r=this.values_||(this.values_={});if(c)r[f]=u;else{const d=r[f];r[f]=u,d!==u&&this.notify(f,d)}}setProperties(f,u){for(const c in f)this.set(c,f[c],u)}applyProperties(f){f.values_&&Object.assign(this.values_||(this.values_={}),f.values_)}unset(f,u){if(this.values_&&f in this.values_){const c=this.values_[f];delete this.values_[f],(0,Z.x)(this.values_)&&(this.values_=null),u||this.notify(f,c)}}}},1858:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={PROPERTYCHANGE:"propertychange"}},2224:(jt,ht,a)=>{"use strict";a.d(ht,{B:()=>Z,Z:()=>A});var z=a(9608),F=a(2431),k=a(7847);function Z(S){if(Array.isArray(S))for(let P=0,v=S.length;P<v;++P)(0,k.bN)(S[P]);else(0,k.bN)(S)}const A=class G extends z.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(F.Z.CHANGE)}getRevision(){return this.revision_}onInternal(P,v){if(Array.isArray(P)){const f=P.length,u=new Array(f);for(let c=0;c<f;++c)u[c]=(0,k.oL)(this,P[c],v);return u}return(0,k.oL)(this,P,v)}onceInternal(P,v){let f;if(Array.isArray(P)){const u=P.length;f=new Array(u);for(let c=0;c<u;++c)f[c]=(0,k.Vx)(this,P[c],v)}else f=(0,k.Vx)(this,P,v);return v.ol_key=f,f}unInternal(P,v){const f=v.ol_key;if(f)Z(f);else if(Array.isArray(P))for(let u=0,c=P.length;u<c;++u)this.removeEventListener(P[u],v);else this.removeEventListener(P,v)}}},5681:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>v});var z=a(7300),F=a(5465),k=a(4118),G=a(1316),Z=a(7847),A=a(4211);const v=class P extends z.Z{constructor(u){super(),this.options=u,this.id=u.id,this.insertFirst=void 0===u.insertFirst||u.insertFirst,this.stopEvent=void 0===u.stopEvent||u.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==u.className?u.className:"ol-overlay-container "+k.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===u.autoPan?{}:u.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==u.element&&this.setElement(u.element),this.setOffset(void 0!==u.offset?u.offset:[0,0]),this.setPositioning(u.positioning||"top-left"),void 0!==u.position&&this.setPosition(u.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){(0,A.ep)(this.element);const u=this.getElement();u&&this.element.appendChild(u)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,A.ZF)(this.element),(0,Z.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const u=this.getMap();if(u){this.mapPostrenderListenerKey=(0,Z.oL)(u,F.Z.POSTRENDER,this.render,this),this.updatePixelPosition();const c=this.stopEvent?u.getOverlayContainerStopEvent():u.getOverlayContainer();this.insertFirst?c.insertBefore(this.element,c.childNodes[0]||null):c.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(u){this.set("element",u)}setMap(u){this.set("map",u)}setOffset(u){this.set("offset",u)}setPosition(u){this.set("position",u)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(u){const c=this.getMap();if(!c||!c.getTargetElement()||!this.get("position"))return;const r=this.getRect(c.getTargetElement(),c.getSize()),d=this.getElement(),e=this.getRect(d,[(0,A.iO)(d),(0,A.Pb)(d)]),l=void 0===(u=u||{}).margin?20:u.margin;if(!(0,G.r4)(r,e)){const m=e[0]-r[0],s=r[2]-e[2],g=e[1]-r[1],_=r[3]-e[3],y=[0,0];if(m<0?y[0]=m-l:s<0&&(y[0]=Math.abs(s)+l),g<0?y[1]=g-l:_<0&&(y[1]=Math.abs(_)+l),0!==y[0]||0!==y[1]){const I=c.getView().getCenterInternal(),O=c.getPixelFromCoordinateInternal(I);if(!O)return;const E=[O[0]+y[0],O[1]+y[1]],R=u.animation||{};c.getView().animateInternal({center:c.getCoordinateFromPixelInternal(E),duration:R.duration,easing:R.easing})}}}getRect(u,c){const r=u.getBoundingClientRect(),d=r.left+window.pageXOffset,e=r.top+window.pageYOffset;return[d,e,d+c[0],e+c[1]]}setPositioning(u){this.set("positioning",u)}setVisible(u){this.rendered.visible!==u&&(this.element.style.display=u?"":"none",this.rendered.visible=u)}updatePixelPosition(){const u=this.getMap(),c=this.getPosition();if(!u||!u.isRendered()||!c)return void this.setVisible(!1);const r=u.getPixelFromCoordinate(c),d=u.getSize();this.updateRenderedPosition(r,d)}updateRenderedPosition(u,c){const r=this.element.style,d=this.getOffset(),e=this.getPositioning();this.setVisible(!0);let s="0%",g="0%";"bottom-right"==e||"center-right"==e||"top-right"==e?s="-100%":("bottom-center"==e||"center-center"==e||"top-center"==e)&&(s="-50%"),"bottom-left"==e||"bottom-center"==e||"bottom-right"==e?g="-100%":("center-left"==e||"center-center"==e||"center-right"==e)&&(g="-50%");const _=`translate(${s}, ${g}) translate(${Math.round(u[0]+d[0])+"px"}, ${Math.round(u[1]+d[1])+"px"})`;this.rendered.transform_!=_&&(this.rendered.transform_=_,r.transform=_)}getOptions(){return this.options}}},6381:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var z=a(9608),F=a(2431),k=a(5399),G=a(3089),Z=a(53);const S=class A extends z.Z{constructor(v,f,u){super(),u=u||{},this.tileCoord=v,this.state=f,this.interimTile=null,this.key="",this.transition_=void 0===u.transition?250:u.transition,this.transitionStarts_={},this.interpolate=!!u.interpolate}changed(){this.dispatchEvent(F.Z.CHANGE)}release(){this.state===k.Z.ERROR&&this.setState(k.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let v=this.interimTile;do{if(v.getState()==k.Z.LOADED)return this.transition_=0,v;v=v.interimTile}while(v);return this}refreshInterimChain(){if(!this.interimTile)return;let v=this.interimTile,f=this;do{if(v.getState()==k.Z.LOADED){v.interimTile=null;break}v.getState()==k.Z.LOADING?f=v:v.getState()==k.Z.IDLE?f.interimTile=v.interimTile:f=v,v=f.interimTile}while(v)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(v){if(this.state!==k.Z.ERROR&&this.state>v)throw new Error("Tile load sequence violation");this.state=v,this.changed()}load(){(0,G.O3)()}getAlpha(v,f){if(!this.transition_)return 1;let u=this.transitionStarts_[v];if(u){if(-1===u)return 1}else u=f,this.transitionStarts_[v]=u;const c=f-u+1e3/60;return c>=this.transition_?1:(0,Z.YQ)(c/this.transition_)}inTransition(v){return!!this.transition_&&-1!==this.transitionStarts_[v]}endTransition(v){this.transition_&&(this.transitionStarts_[v]=-1)}}},8525:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>A});var z=a(9219);const k=class F{constructor(P){this.highWaterMark=void 0!==P?P:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(P){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(P){return this.entries_.hasOwnProperty(P)}forEach(P){let v=this.oldest_;for(;v;)P(v.value_,v.key_,this),v=v.newer}get(P,v){const f=this.entries_[P];return(0,z.h)(void 0!==f,15),f===this.newest_||(f===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(f.newer.older=f.older,f.older.newer=f.newer),f.newer=null,f.older=this.newest_,this.newest_.newer=f,this.newest_=f),f.value_}remove(P){const v=this.entries_[P];return(0,z.h)(void 0!==v,15),v===this.newest_?(this.newest_=v.older,this.newest_&&(this.newest_.newer=null)):v===this.oldest_?(this.oldest_=v.newer,this.oldest_&&(this.oldest_.older=null)):(v.newer.older=v.older,v.older.newer=v.newer),delete this.entries_[P],--this.count_,v.value_}getCount(){return this.count_}getKeys(){const P=new Array(this.count_);let f,v=0;for(f=this.newest_;f;f=f.older)P[v++]=f.key_;return P}getValues(){const P=new Array(this.count_);let f,v=0;for(f=this.newest_;f;f=f.older)P[v++]=f.value_;return P}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(P){if(this.containsKey(P))return this.entries_[P].value_}pop(){const P=this.oldest_;return delete this.entries_[P.key_],P.newer&&(P.newer.older=null),this.oldest_=P.newer,this.oldest_||(this.newest_=null),--this.count_,P.value_}replace(P,v){this.get(P),this.entries_[P].value_=v}set(P,v){(0,z.h)(!(P in this.entries_),16);const f={key_:P,newer:null,older:this.newest_,value_:v};this.newest_?this.newest_.newer=f:this.oldest_=f,this.newest_=f,this.entries_[P]=f,++this.count_}setSize(P){this.highWaterMark=P}};var G=a(3936);const A=class Z extends k{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(P){for(;this.canExpireCache()&&!(this.peekLast().getKey()in P);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const P=this.peekFirstKey(),f=(0,G.Ul)(P)[0];this.forEach(u=>{u.tileCoord[0]!==f&&(this.remove((0,G.km)(u.tileCoord)),u.release())})}}},857:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>v,R:()=>f});var z=a(2431),F=a(9219),k=a(5526);const G=1/0,A=class Z{constructor(c,r){this.priorityFunction_=c,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,k.Z)(this.queuedElements_)}dequeue(){const c=this.elements_,r=this.priorities_,d=c[0];1==c.length?(c.length=0,r.length=0):(c[0]=c.pop(),r[0]=r.pop(),this.siftUp_(0));const e=this.keyFunction_(d);return delete this.queuedElements_[e],d}enqueue(c){(0,F.h)(!(this.keyFunction_(c)in this.queuedElements_),31);const r=this.priorityFunction_(c);return r!=G&&(this.elements_.push(c),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(c)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(c){return 2*c+1}getRightChildIndex_(c){return 2*c+2}getParentIndex_(c){return c-1>>1}heapify_(){let c;for(c=(this.elements_.length>>1)-1;c>=0;c--)this.siftUp_(c)}isEmpty(){return 0===this.elements_.length}isKeyQueued(c){return c in this.queuedElements_}isQueued(c){return this.isKeyQueued(this.keyFunction_(c))}siftUp_(c){const r=this.elements_,d=this.priorities_,e=r.length,l=r[c],m=d[c],s=c;for(;c<e>>1;){const g=this.getLeftChildIndex_(c),_=this.getRightChildIndex_(c),y=_<e&&d[_]<d[g]?_:g;r[c]=r[y],d[c]=d[y],c=y}r[c]=l,d[c]=m,this.siftDown_(s,c)}siftDown_(c,r){const d=this.elements_,e=this.priorities_,l=d[r],m=e[r];for(;r>c;){const s=this.getParentIndex_(r);if(!(e[s]>m))break;d[r]=d[s],e[r]=e[s],r=s}d[r]=l,e[r]=m}reprioritize(){const c=this.priorityFunction_,r=this.elements_,d=this.priorities_;let e=0;const l=r.length;let m,s,g;for(s=0;s<l;++s)m=r[s],g=c(m),g==G?delete this.queuedElements_[this.keyFunction_(m)]:(d[e]=g,r[e++]=m);r.length=e,d.length=e,this.heapify_()}};var S=a(5399);const v=class P extends A{constructor(c,r){super(function(d){return c.apply(null,d)},function(d){return d[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=r,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(c){const r=super.enqueue(c);return r&&c[0].addEventListener(z.Z.CHANGE,this.boundHandleTileChange_),r}getTilesLoading(){return this.tilesLoading_}handleTileChange(c){const r=c.target,d=r.getState();if(d===S.Z.LOADED||d===S.Z.ERROR||d===S.Z.EMPTY){d!==S.Z.ERROR&&r.removeEventListener(z.Z.CHANGE,this.boundHandleTileChange_);const e=r.getKey();e in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[e],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(c,r){let e,l,m,d=0;for(;this.tilesLoading_<c&&d<r&&this.getCount()>0;)l=this.dequeue()[0],m=l.getKey(),e=l.getState(),e===S.Z.IDLE&&!(m in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[m]=!0,++this.tilesLoading_,++d,l.load())}};function f(u,c,r,d,e){if(!u||!(r in u.wantedTiles)||!u.wantedTiles[r][c.getKey()])return G;const l=u.viewState.center,m=d[0]-l[0],s=d[1]-l[1];return 65536*Math.log(e)+Math.sqrt(m*m+s*s)/e}},6025:(jt,ht,a)=>{"use strict";a.d(ht,{T:()=>F,Z:()=>k});class z{constructor(Z,A,S,P){this.minX=Z,this.maxX=A,this.minY=S,this.maxY=P}contains(Z){return this.containsXY(Z[1],Z[2])}containsTileRange(Z){return this.minX<=Z.minX&&Z.maxX<=this.maxX&&this.minY<=Z.minY&&Z.maxY<=this.maxY}containsXY(Z,A){return this.minX<=Z&&Z<=this.maxX&&this.minY<=A&&A<=this.maxY}equals(Z){return this.minX==Z.minX&&this.minY==Z.minY&&this.maxX==Z.maxX&&this.maxY==Z.maxY}extend(Z){Z.minX<this.minX&&(this.minX=Z.minX),Z.maxX>this.maxX&&(this.maxX=Z.maxX),Z.minY<this.minY&&(this.minY=Z.minY),Z.maxY>this.maxY&&(this.maxY=Z.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(Z){return this.minX<=Z.maxX&&this.maxX>=Z.minX&&this.minY<=Z.maxY&&this.maxY>=Z.minY}}function F(G,Z,A,S,P){return void 0!==P?(P.minX=G,P.maxX=Z,P.minY=A,P.maxY=S,P):new z(G,Z,A,S)}const k=z},5399:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},6715:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>L});var z=a(7300),F=a(3701),k=a(1409),G=a(8220),Z=a(7021),A=a(6077),S=a(1242),P=a(9219),v=a(3026);function f(w,M,C){return function(D,Y,st,V,at){if(!D)return;if(!Y&&!M)return D;const ut=M?0:st[0]*Y,Pt=M?0:st[1]*Y,vt=at?at[0]:0,Ot=at?at[1]:0;let At=w[0]+ut/2+vt,Gt=w[2]-ut/2+vt,zt=w[1]+Pt/2+Ot,qt=w[3]-Pt/2+Ot;At>Gt&&(At=(Gt+At)/2,Gt=At),zt>qt&&(zt=(qt+zt)/2,qt=zt);let Xt=(0,v.uZ)(D[0],At,Gt),fe=(0,v.uZ)(D[1],zt,qt);if(V&&C&&Y){const he=30*Y;Xt+=-he*Math.log(1+Math.max(0,At-D[0])/he)+he*Math.log(1+Math.max(0,D[0]-Gt)/he),fe+=-he*Math.log(1+Math.max(0,zt-D[1])/he)+he*Math.log(1+Math.max(0,D[1]-qt)/he)}return[Xt,fe]}}function u(w){return w}var c=a(1316),r=a(9363);function d(w,M,C,D){const Y=(0,c.dz)(M)/C[0],st=(0,c.Cr)(M)/C[1];return D?Math.min(w,Math.max(Y,st)):Math.min(w,Math.min(Y,st))}function e(w,M,C){let D=Math.min(w,M);return D*=Math.log(1+50*Math.max(0,w/M-1))/50+1,C&&(D=Math.max(D,C),D/=Math.log(1+50*Math.max(0,C/w-1))/50+1),(0,v.uZ)(D,C/2,2*M)}function s(w,M,C,D,Y){return C=void 0===C||C,function(st,V,at,ut){if(void 0!==st){const Pt=D?d(w,D,at,Y):w;return C&&ut?e(st,Pt,M):(0,v.uZ)(st,M,Pt)}}}var g=a(3616),_=a(53),y=a(3435);function E(w,M){setTimeout(function(){w(M)},0)}function b(w,M,C,D,Y){const st=Math.cos(-Y);let V=Math.sin(-Y),at=w[0]*st-w[1]*V,ut=w[1]*st+w[0]*V;return at+=(M[0]/2-C[0])*D,ut+=(C[1]-M[1]/2)*D,V=-V,[at*st-ut*V,ut*st+at*V]}const L=class O extends z.Z{constructor(M){super(),M=Object.assign({},M),this.hints_=[0,0],this.animations_=[],this.projection_=(0,Z.UQ)(M.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,M.projection&&(0,Z.h_)(),M.center&&(M.center=(0,Z.Vs)(M.center,this.projection_)),M.extent&&(M.extent=(0,Z.dY)(M.extent,this.projection_)),this.applyOptions_(M)}applyOptions_(M){const C=Object.assign({},M);for(const at in k.Z)delete C[at];this.setProperties(C,!0);const D=function N(w){let M,C,D,V=void 0!==w.minZoom?w.minZoom:0,at=void 0!==w.maxZoom?w.maxZoom:28;const ut=void 0!==w.zoomFactor?w.zoomFactor:2,Pt=void 0!==w.multiWorld&&w.multiWorld,vt=void 0===w.smoothResolutionConstraint||w.smoothResolutionConstraint,Ot=void 0!==w.showFullExtent&&w.showFullExtent,At=(0,Z.UQ)(w.projection,"EPSG:3857"),Gt=At.getExtent();let zt=w.constrainOnlyCenter,qt=w.extent;if(!Pt&&!qt&&At.isGlobal()&&(zt=!1,qt=Gt),void 0!==w.resolutions){const Xt=w.resolutions;C=Xt[V],D=void 0!==Xt[at]?Xt[at]:Xt[Xt.length-1],M=w.constrainResolution?function l(w,M,C,D){return M=void 0===M||M,function(Y,st,V,at){if(void 0!==Y){const ut=w[0],Pt=w[w.length-1],vt=C?d(ut,C,V,D):ut;if(at)return M?e(Y,vt,Pt):(0,v.uZ)(Y,Pt,vt);const Ot=Math.min(vt,Y),At=Math.floor((0,r.h7)(w,Ot,st));return w[At]>vt&&At<w.length-1?w[At+1]:w[At]}}}(Xt,vt,!zt&&qt,Ot):s(C,D,vt,!zt&&qt,Ot)}else{const fe=(Gt?Math.max((0,c.dz)(Gt),(0,c.Cr)(Gt)):360*Z.Wm.degrees/At.getMetersPerUnit())/G.S/Math.pow(2,0),he=fe/Math.pow(2,28);C=w.maxResolution,void 0!==C?V=0:C=fe/Math.pow(ut,V),D=w.minResolution,void 0===D&&(D=void 0!==w.maxZoom?void 0!==w.maxResolution?C/Math.pow(ut,at):fe/Math.pow(ut,at):he),at=V+Math.floor(Math.log(C/D)/Math.log(ut)),D=C/Math.pow(ut,at-V),M=w.constrainResolution?function m(w,M,C,D,Y,st){return D=void 0===D||D,C=void 0!==C?C:0,function(V,at,ut,Pt){if(void 0!==V){const vt=Y?d(M,Y,ut,st):M;if(Pt)return D?e(V,vt,C):(0,v.uZ)(V,C,vt);const Ot=1e-9,At=Math.ceil(Math.log(M/vt)/Math.log(w)-Ot),Gt=-at*(.5-Ot)+.5,zt=Math.min(vt,V),qt=Math.floor(Math.log(M/zt)/Math.log(w)+Gt),Xt=Math.max(At,qt),fe=M/Math.pow(w,Xt);return(0,v.uZ)(fe,C,vt)}}}(ut,C,D,vt,!zt&&qt,Ot):s(C,D,vt,!zt&&qt,Ot)}return{constraint:M,maxResolution:C,minResolution:D,minZoom:V,zoomFactor:ut}}(M);this.maxResolution_=D.maxResolution,this.minResolution_=D.minResolution,this.zoomFactor_=D.zoomFactor,this.resolutions_=M.resolutions,this.padding_=M.padding,this.minZoom_=D.minZoom;const Y=function R(w){if(void 0!==w.extent)return f(w.extent,w.constrainOnlyCenter,void 0===w.smoothExtentConstraint||w.smoothExtentConstraint);const M=(0,Z.UQ)(w.projection,"EPSG:3857");if(!0!==w.multiWorld&&M.isGlobal()){const C=M.getExtent().slice();return C[0]=-1/0,C[2]=1/0,f(C,!1,!1)}return u}(M),st=D.constraint,V=function K(w){if(void 0===w.enableRotation||w.enableRotation){const C=w.constrainRotation;return void 0===C||!0===C?(0,g.Gw)():!1===C?g.YP:"number"==typeof C?(0,g.gE)(C):g.YP}return g.h$}(M);this.constraints_={center:Y,resolution:st,rotation:V},this.setRotation(void 0!==M.rotation?M.rotation:0),this.setCenterInternal(void 0!==M.center?M.center:null),void 0!==M.resolution?this.setResolution(M.resolution):void 0!==M.zoom&&this.setZoom(M.zoom)}get padding(){return this.padding_}set padding(M){let C=this.padding_;this.padding_=M;const D=this.getCenterInternal();if(D){const Y=M||[0,0,0,0];C=C||[0,0,0,0];const st=this.getResolution();this.setCenterInternal([D[0]+st/2*(Y[3]-C[3]+C[1]-Y[1]),D[1]-st/2*(Y[0]-C[0]+C[2]-Y[2])])}}getUpdatedOptions_(M){const C=this.getProperties();return void 0!==C.resolution?C.resolution=this.getResolution():C.zoom=this.getZoom(),C.center=this.getCenterInternal(),C.rotation=this.getRotation(),Object.assign({},C,M)}animate(M){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const C=new Array(arguments.length);for(let D=0;D<C.length;++D){let Y=arguments[D];Y.center&&(Y=Object.assign({},Y),Y.center=(0,Z.Vs)(Y.center,this.getProjection())),Y.anchor&&(Y=Object.assign({},Y),Y.anchor=(0,Z.Vs)(Y.anchor,this.getProjection())),C[D]=Y}this.animateInternal.apply(this,C)}animateInternal(M){let D,C=arguments.length;C>1&&"function"==typeof arguments[C-1]&&(D=arguments[C-1],--C);let Y=0;for(;Y<C&&!this.isDef();++Y){const vt=arguments[Y];vt.center&&this.setCenterInternal(vt.center),void 0!==vt.zoom?this.setZoom(vt.zoom):vt.resolution&&this.setResolution(vt.resolution),void 0!==vt.rotation&&this.setRotation(vt.rotation)}if(Y===C)return void(D&&E(D,!0));let st=Date.now(),V=this.targetCenter_.slice(),at=this.targetResolution_,ut=this.targetRotation_;const Pt=[];for(;Y<C;++Y){const vt=arguments[Y],Ot={start:st,complete:!1,anchor:vt.anchor,duration:void 0!==vt.duration?vt.duration:1e3,easing:vt.easing||_.rd,callback:D};if(vt.center&&(Ot.sourceCenter=V,Ot.targetCenter=vt.center.slice(),V=Ot.targetCenter),void 0!==vt.zoom?(Ot.sourceResolution=at,Ot.targetResolution=this.getResolutionForZoom(vt.zoom),at=Ot.targetResolution):vt.resolution&&(Ot.sourceResolution=at,Ot.targetResolution=vt.resolution,at=Ot.targetResolution),void 0!==vt.rotation){Ot.sourceRotation=ut;const At=(0,v.$W)(vt.rotation-ut+Math.PI,2*Math.PI)-Math.PI;Ot.targetRotation=ut+At,ut=Ot.targetRotation}(w=Ot).sourceCenter&&w.targetCenter&&!(0,S.fS)(w.sourceCenter,w.targetCenter)||w.sourceResolution!==w.targetResolution||w.sourceRotation!==w.targetRotation?st+=Ot.duration:Ot.complete=!0,Pt.push(Ot)}var w;this.animations_.push(Pt),this.setHint(F.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[F.Z.ANIMATING]>0}getInteracting(){return this.hints_[F.Z.INTERACTING]>0}cancelAnimations(){let M;this.setHint(F.Z.ANIMATING,-this.hints_[F.Z.ANIMATING]);for(let C=0,D=this.animations_.length;C<D;++C){const Y=this.animations_[C];if(Y[0].callback&&E(Y[0].callback,!1),!M)for(let st=0,V=Y.length;st<V;++st){const at=Y[st];if(!at.complete){M=at.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=M,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const M=Date.now();let C=!1;for(let D=this.animations_.length-1;D>=0;--D){const Y=this.animations_[D];let st=!0;for(let V=0,at=Y.length;V<at;++V){const ut=Y[V];if(ut.complete)continue;let vt=ut.duration>0?(M-ut.start)/ut.duration:1;vt>=1?(ut.complete=!0,vt=1):st=!1;const Ot=ut.easing(vt);if(ut.sourceCenter){const At=ut.sourceCenter[0],Gt=ut.sourceCenter[1],zt=ut.targetCenter[0],qt=ut.targetCenter[1];this.nextCenter_=ut.targetCenter,this.targetCenter_=[At+Ot*(zt-At),Gt+Ot*(qt-Gt)]}if(ut.sourceResolution&&ut.targetResolution){const At=1===Ot?ut.targetResolution:ut.sourceResolution+Ot*(ut.targetResolution-ut.sourceResolution);if(ut.anchor){const Gt=this.getViewportSize_(this.getRotation()),zt=this.constraints_.resolution(At,0,Gt,!0);this.targetCenter_=this.calculateCenterZoom(zt,ut.anchor)}this.nextResolution_=ut.targetResolution,this.targetResolution_=At,this.applyTargetState_(!0)}if(void 0!==ut.sourceRotation&&void 0!==ut.targetRotation){const At=1===Ot?(0,v.$W)(ut.targetRotation+Math.PI,2*Math.PI)-Math.PI:ut.sourceRotation+Ot*(ut.targetRotation-ut.sourceRotation);if(ut.anchor){const Gt=this.constraints_.rotation(At,!0);this.targetCenter_=this.calculateCenterRotate(Gt,ut.anchor)}this.nextRotation_=ut.targetRotation,this.targetRotation_=At}if(this.applyTargetState_(!0),C=!0,!ut.complete)break}if(st){this.animations_[D]=null,this.setHint(F.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const V=Y[0].callback;V&&E(V,!0)}}this.animations_=this.animations_.filter(Boolean),C&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(M,C){let D;const Y=this.getCenterInternal();return void 0!==Y&&(D=[Y[0]-C[0],Y[1]-C[1]],(0,S.U1)(D,M-this.getRotation()),(0,S.IH)(D,C)),D}calculateCenterZoom(M,C){let D;const Y=this.getCenterInternal(),st=this.getResolution();return void 0!==Y&&void 0!==st&&(D=[C[0]-M*(C[0]-Y[0])/st,C[1]-M*(C[1]-Y[1])/st]),D}getViewportSize_(M){const C=this.viewportSize_;if(M){const D=C[0],Y=C[1];return[Math.abs(D*Math.cos(M))+Math.abs(Y*Math.sin(M)),Math.abs(D*Math.sin(M))+Math.abs(Y*Math.cos(M))]}return C}setViewportSize(M){this.viewportSize_=Array.isArray(M)?M.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const M=this.getCenterInternal();return M&&(0,Z.lO)(M,this.getProjection())}getCenterInternal(){return this.get(k.Z.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(M){return void 0!==M?(M[0]=this.hints_[0],M[1]=this.hints_[1],M):this.hints_.slice()}calculateExtent(M){const C=this.calculateExtentInternal(M);return(0,Z.Fj)(C,this.getProjection())}calculateExtentInternal(M){M=M||this.getViewportSizeMinusPadding_();const C=this.getCenterInternal();(0,P.h)(C,1);const D=this.getResolution();(0,P.h)(void 0!==D,2);const Y=this.getRotation();return(0,P.h)(void 0!==Y,3),(0,c.p8)(C,D,Y,M)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(M){this.applyOptions_(this.getUpdatedOptions_({maxZoom:M}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(M){this.applyOptions_(this.getUpdatedOptions_({minZoom:M}))}setConstrainResolution(M){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:M}))}getProjection(){return this.projection_}getResolution(){return this.get(k.Z.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(M,C){return this.getResolutionForExtentInternal((0,Z.dY)(M,this.getProjection()),C)}getResolutionForExtentInternal(M,C){C=C||this.getViewportSizeMinusPadding_();const D=(0,c.dz)(M)/C[0],Y=(0,c.Cr)(M)/C[1];return Math.max(D,Y)}getResolutionForValueFunction(M){M=M||2;const C=this.getConstrainedResolution(this.maxResolution_),Y=Math.log(C/this.minResolution_)/Math.log(M);return function(st){return C/Math.pow(M,st*Y)}}getRotation(){return this.get(k.Z.ROTATION)}getValueForResolutionFunction(M){const C=Math.log(M||2),D=this.getConstrainedResolution(this.maxResolution_),st=Math.log(D/this.minResolution_)/C;return function(V){return Math.log(D/V)/C/st}}getViewportSizeMinusPadding_(M){let C=this.getViewportSize_(M);const D=this.padding_;return D&&(C=[C[0]-D[1]-D[3],C[1]-D[0]-D[2]]),C}getState(){const M=this.getProjection(),C=this.getResolution(),D=this.getRotation();let Y=this.getCenterInternal();const st=this.padding_;if(st){const V=this.getViewportSizeMinusPadding_();Y=b(Y,this.getViewportSize_(),[V[0]/2+st[3],V[1]/2+st[0]],C,D)}return{center:Y.slice(0),projection:void 0!==M?M:null,resolution:C,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:D,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let M;const C=this.getResolution();return void 0!==C&&(M=this.getZoomForResolution(C)),M}getZoomForResolution(M){let D,Y,C=this.minZoom_||0;if(this.resolutions_){const st=(0,r.h7)(this.resolutions_,M,1);C=st,D=this.resolutions_[st],Y=st==this.resolutions_.length-1?2:D/this.resolutions_[st+1]}else D=this.maxResolution_,Y=this.zoomFactor_;return C+Math.log(D/M)/Math.log(Y)}getResolutionForZoom(M){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const C=(0,v.uZ)(Math.floor(M),0,this.resolutions_.length-2);return this.resolutions_[C]/Math.pow(this.resolutions_[C]/this.resolutions_[C+1],(0,v.uZ)(M-C,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,M-this.minZoom_)}fit(M,C){let D;if((0,P.h)(Array.isArray(M)||"function"==typeof M.getSimplifiedGeometry,24),Array.isArray(M)){(0,P.h)(!(0,c.xb)(M),25);const Y=(0,Z.dY)(M,this.getProjection());D=(0,y.oJ)(Y)}else if("Circle"===M.getType()){const Y=(0,Z.dY)(M.getExtent(),this.getProjection());D=(0,y.oJ)(Y),D.rotate(this.getRotation(),(0,c.qg)(Y))}else{const Y=(0,Z.Cs)();D=Y?M.clone().transform(Y,this.getProjection()):M}this.fitInternal(D,C)}rotatedExtentForGeometry(M){const C=this.getRotation(),D=Math.cos(C),Y=Math.sin(-C),st=M.getFlatCoordinates(),V=M.getStride();let at=1/0,ut=1/0,Pt=-1/0,vt=-1/0;for(let Ot=0,At=st.length;Ot<At;Ot+=V){const Gt=st[Ot]*D-st[Ot+1]*Y,zt=st[Ot]*Y+st[Ot+1]*D;at=Math.min(at,Gt),ut=Math.min(ut,zt),Pt=Math.max(Pt,Gt),vt=Math.max(vt,zt)}return[at,ut,Pt,vt]}fitInternal(M,C){let D=(C=C||{}).size;D||(D=this.getViewportSizeMinusPadding_());const Y=void 0!==C.padding?C.padding:[0,0,0,0],st=void 0!==C.nearest&&C.nearest;let V;V=void 0!==C.minResolution?C.minResolution:void 0!==C.maxZoom?this.getResolutionForZoom(C.maxZoom):0;const at=this.rotatedExtentForGeometry(M);let ut=this.getResolutionForExtentInternal(at,[D[0]-Y[1]-Y[3],D[1]-Y[0]-Y[2]]);ut=isNaN(ut)?V:Math.max(ut,V),ut=this.getConstrainedResolution(ut,st?0:1);const Pt=this.getRotation(),vt=Math.sin(Pt),Ot=Math.cos(Pt),At=(0,c.qg)(at);At[0]+=(Y[1]-Y[3])/2*ut,At[1]+=(Y[0]-Y[2])/2*ut;const qt=this.getConstrainedCenter([At[0]*Ot-At[1]*vt,At[1]*Ot+At[0]*vt],ut),Xt=C.callback?C.callback:A.Zn;void 0!==C.duration?this.animateInternal({resolution:ut,center:qt,duration:C.duration,easing:C.easing},Xt):(this.targetResolution_=ut,this.targetCenter_=qt,this.applyTargetState_(!1,!0),E(Xt,!0))}centerOn(M,C,D){this.centerOnInternal((0,Z.Vs)(M,this.getProjection()),C,D)}centerOnInternal(M,C,D){this.setCenterInternal(b(M,C,D,this.getResolution(),this.getRotation()))}calculateCenterShift(M,C,D,Y){let st;const V=this.padding_;if(V&&M){const at=this.getViewportSizeMinusPadding_(-D),ut=b(M,Y,[at[0]/2+V[3],at[1]/2+V[0]],C,D);st=[M[0]-ut[0],M[1]-ut[1]]}return st}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(M){const C=(0,Z.lO)(this.targetCenter_,this.getProjection());this.setCenter([C[0]+M[0],C[1]+M[1]])}adjustCenterInternal(M){const C=this.targetCenter_;this.setCenterInternal([C[0]+M[0],C[1]+M[1]])}adjustResolution(M,C){C=C&&(0,Z.Vs)(C,this.getProjection()),this.adjustResolutionInternal(M,C)}adjustResolutionInternal(M,C){const D=this.getAnimating()||this.getInteracting(),Y=this.getViewportSize_(this.getRotation()),st=this.constraints_.resolution(this.targetResolution_*M,0,Y,D);C&&(this.targetCenter_=this.calculateCenterZoom(st,C)),this.targetResolution_*=M,this.applyTargetState_()}adjustZoom(M,C){this.adjustResolution(Math.pow(this.zoomFactor_,-M),C)}adjustRotation(M,C){C&&(C=(0,Z.Vs)(C,this.getProjection())),this.adjustRotationInternal(M,C)}adjustRotationInternal(M,C){const D=this.getAnimating()||this.getInteracting(),Y=this.constraints_.rotation(this.targetRotation_+M,D);C&&(this.targetCenter_=this.calculateCenterRotate(Y,C)),this.targetRotation_+=M,this.applyTargetState_()}setCenter(M){this.setCenterInternal(M&&(0,Z.Vs)(M,this.getProjection()))}setCenterInternal(M){this.targetCenter_=M,this.applyTargetState_()}setHint(M,C){return this.hints_[M]+=C,this.changed(),this.hints_[M]}setResolution(M){this.targetResolution_=M,this.applyTargetState_()}setRotation(M){this.targetRotation_=M,this.applyTargetState_()}setZoom(M){this.setResolution(this.getResolutionForZoom(M))}applyTargetState_(M,C){const D=this.getAnimating()||this.getInteracting()||C,Y=this.constraints_.rotation(this.targetRotation_,D),st=this.getViewportSize_(Y),V=this.constraints_.resolution(this.targetResolution_,0,st,D),at=this.constraints_.center(this.targetCenter_,V,st,D,this.calculateCenterShift(this.targetCenter_,V,Y,st));this.get(k.Z.ROTATION)!==Y&&this.set(k.Z.ROTATION,Y),this.get(k.Z.RESOLUTION)!==V&&(this.set(k.Z.RESOLUTION,V),this.set("zoom",this.getZoom(),!0)),(!at||!this.get(k.Z.CENTER)||!(0,S.fS)(this.get(k.Z.CENTER),at))&&this.set(k.Z.CENTER,at),this.getAnimating()&&!M&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(M,C,D){M=void 0!==M?M:200;const Y=C||0,st=this.constraints_.rotation(this.targetRotation_),V=this.getViewportSize_(st),at=this.constraints_.resolution(this.targetResolution_,Y,V),ut=this.constraints_.center(this.targetCenter_,at,V,!1,this.calculateCenterShift(this.targetCenter_,at,st,V));if(0===M&&!this.cancelAnchor_)return this.targetResolution_=at,this.targetRotation_=st,this.targetCenter_=ut,void this.applyTargetState_();D=D||(0===M?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==at||this.getRotation()!==st||!this.getCenterInternal()||!(0,S.fS)(this.getCenterInternal(),ut))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:st,center:ut,resolution:at,duration:M,easing:_.Vv,anchor:D}))}beginInteraction(){this.resolveConstraints(0),this.setHint(F.Z.INTERACTING,1)}endInteraction(M,C,D){D=D&&(0,Z.Vs)(D,this.getProjection()),this.endInteractionInternal(M,C,D)}endInteractionInternal(M,C,D){this.getInteracting()&&(this.setHint(F.Z.INTERACTING,-1),this.resolveConstraints(M,C,D))}getConstrainedCenter(M,C){const D=this.getViewportSize_(this.getRotation());return this.constraints_.center(M,C||this.getResolution(),D)}getConstrainedZoom(M,C){const D=this.getResolutionForZoom(M);return this.getZoomForResolution(this.getConstrainedResolution(D,C))}getConstrainedResolution(M,C){C=C||0;const D=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(M,C,D)}}},3701:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={ANIMATING:0,INTERACTING:1}},1409:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},9363:(jt,ht,a)=>{"use strict";function z(u,c,r){let d,e;r=r||F;let l=0,m=u.length,s=!1;for(;l<m;)d=l+(m-l>>1),e=+r(u[d],c),e<0?l=d+1:(m=d,s=!e);return s?l:~l}function F(u,c){return u>c?1:u<c?-1:0}function G(u,c,r){if(u[0]<=c)return 0;const d=u.length;if(c<=u[d-1])return d-1;if("function"==typeof r){for(let e=1;e<d;++e){const l=u[e];if(l===c)return e;if(l<c)return r(c,u[e-1],l)>0?e-1:e}return d-1}if(r>0){for(let e=1;e<d;++e)if(u[e]<c)return e-1;return d-1}if(r<0){for(let e=1;e<d;++e)if(u[e]<=c)return e;return d-1}for(let e=1;e<d;++e){if(u[e]==c)return e;if(u[e]<c)return u[e-1]-c<c-u[e]?e-1:e}return d-1}function Z(u,c,r){for(;c<r;){const d=u[c];u[c]=u[r],u[r]=d,++c,--r}}function A(u,c){const r=Array.isArray(c)?c:[c],d=r.length;for(let e=0;e<d;e++)u[u.length]=r[e]}function P(u,c){const r=u.length;if(r!==c.length)return!1;for(let d=0;d<r;d++)if(u[d]!==c[d])return!1;return!0}function f(u,c,r){const d=c||F;return u.every(function(e,l){if(0===l)return!0;const m=d(u[l-1],e);return!(m>0||r&&0===m)})}a.d(ht,{FZ:()=>Z,fS:()=>P,h7:()=>G,j2:()=>F,l7:()=>A,pT:()=>f,ry:()=>z})},9219:(jt,ht,a)=>{"use strict";a.d(ht,{h:()=>F});var z=a(1677);function F(k,G){if(!k)throw new z.Z(G)}},9818:(jt,ht,a)=>{"use strict";a.d(ht,{BB:()=>u,XC:()=>Z,_2:()=>P});var z=a(9219),F=a(3026);const k=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,G=/^([a-z]*)$|^hsla?\(.*\)$/i;function Z(r){return"string"==typeof r?r:u(r)}const S=function(){const d={};let e=0;return function(l){let m;if(d.hasOwnProperty(l))m=d[l];else{if(e>=1024){let s=0;for(const g in d)3&s++||(delete d[g],--e)}m=function v(r){let d,e,l,m,s;if(G.exec(r)&&(r=function A(r){const d=document.createElement("div");if(d.style.color=r,""!==d.style.color){document.body.appendChild(d);const e=getComputedStyle(d).color;return document.body.removeChild(d),e}return""}(r)),k.exec(r)){const g=r.length-1;let _;_=g<=4?1:2;const y=4===g||8===g;d=parseInt(r.substr(1+0*_,_),16),e=parseInt(r.substr(1+1*_,_),16),l=parseInt(r.substr(1+2*_,_),16),m=y?parseInt(r.substr(1+3*_,_),16):255,1==_&&(d=(d<<4)+d,e=(e<<4)+e,l=(l<<4)+l,y&&(m=(m<<4)+m)),s=[d,e,l,m/255]}else r.startsWith("rgba(")?(s=r.slice(5,-1).split(",").map(Number),f(s)):r.startsWith("rgb(")?(s=r.slice(4,-1).split(",").map(Number),s.push(1),f(s)):(0,z.h)(!1,14);return s}(l),d[l]=m,++e}return m}}();function P(r){return Array.isArray(r)?r:S(r)}function f(r){return r[0]=(0,F.uZ)(r[0]+.5|0,0,255),r[1]=(0,F.uZ)(r[1]+.5|0,0,255),r[2]=(0,F.uZ)(r[2]+.5|0,0,255),r[3]=(0,F.uZ)(r[3],0,1),r}function u(r){let d=r[0];d!=(0|d)&&(d=d+.5|0);let e=r[1];e!=(0|e)&&(e=e+.5|0);let l=r[2];return l!=(0|l)&&(l=l+.5|0),"rgba("+d+","+e+","+l+","+(void 0===r[3]?1:Math.round(100*r[3])/100)+")"}},3836:(jt,ht,a)=>{"use strict";a.d(ht,{y:()=>F});var z=a(9818);function F(k){return Array.isArray(k)?(0,z.BB)(k):k}},6518:(jt,ht,a)=>{"use strict";a.d(ht,{ZK:()=>Z});const z={info:1,warn:2,error:3,none:4};let F=z.info;function Z(...S){F>z.warn||console.warn(...S)}},9854:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var z=a(2421),F=a(2431),k=a(4118),G=a(9363),Z=a(4211);const S=class A extends z.Z{constructor(v){v=v||{},super({element:document.createElement("div"),render:v.render,target:v.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===v.collapsed||v.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==v.collapsible,this.collapsible_=void 0===v.collapsible||v.collapsible,this.collapsible_||(this.collapsed_=!1);const f=void 0!==v.className?v.className:"ol-attribution",u=void 0!==v.tipLabel?v.tipLabel:"Attributions",c=void 0!==v.expandClassName?v.expandClassName:f+"-expand",r=void 0!==v.collapseLabel?v.collapseLabel:"\u203a",d=void 0!==v.collapseClassName?v.collapseClassName:f+"-collapse";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=d):this.collapseLabel_=r;const e=void 0!==v.label?v.label:"i";"string"==typeof e?(this.label_=document.createElement("span"),this.label_.textContent=e,this.label_.className=c):this.label_=e;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=u,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(F.Z.CLICK,this.handleClick_.bind(this),!1);const s=this.element;s.className=f+" "+k.XV+" "+k.hg+(this.collapsed_&&this.collapsible_?" "+k.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),s.appendChild(this.toggleButton_),s.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(v){const f=Array.from(new Set(this.getMap().getAllLayers().flatMap(c=>c.getAttributions(v)))),u=!this.getMap().getAllLayers().some(c=>c.getSource()&&!1===c.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(u),f}updateElement_(v){if(!v)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const f=this.collectSourceAttributions_(v),u=f.length>0;if(this.renderedVisible_!=u&&(this.element.style.display=u?"":"none",this.renderedVisible_=u),!(0,G.fS)(f,this.renderedAttributions_)){(0,Z.ep)(this.ulElement_);for(let c=0,r=f.length;c<r;++c){const d=document.createElement("li");d.innerHTML=f[c],this.ulElement_.appendChild(d)}this.renderedAttributions_=f}}handleClick_(v){v.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(k.hN),this.collapsed_?(0,Z.$H)(this.collapseLabel_,this.label_):(0,Z.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(v){this.collapsible_!==v&&(this.collapsible_=v,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(v){this.userCollapsed_=v,this.collapsible_&&this.collapsed_!==v&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(v){this.updateElement_(v.frameState)}}},2421:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var z=a(7300),F=a(5465),k=a(6077),G=a(7847),Z=a(4211);const S=class A extends z.Z{constructor(v){super();const f=v.element;f&&!v.target&&!f.style.pointerEvents&&(f.style.pointerEvents="auto"),this.element=f||null,this.target_=null,this.map_=null,this.listenerKeys=[],v.render&&(this.render=v.render),v.target&&this.setTarget(v.target)}disposeInternal(){(0,Z.ZF)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(v){this.map_&&(0,Z.ZF)(this.element);for(let f=0,u=this.listenerKeys.length;f<u;++f)(0,G.bN)(this.listenerKeys[f]);this.listenerKeys.length=0,this.map_=v,v&&((this.target_?this.target_:v.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==k.Zn&&this.listenerKeys.push((0,G.oL)(v,F.Z.POSTRENDER,this.render,this)),v.render())}render(v){}setTarget(v){this.target_="string"==typeof v?document.getElementById(v):v}}},8861:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>A});var z=a(2421),F=a(2431),k=a(4118),G=a(53);const A=class Z extends z.Z{constructor(P){P=P||{},super({element:document.createElement("div"),render:P.render,target:P.target});const v=void 0!==P.className?P.className:"ol-rotate",f=void 0!==P.label?P.label:"\u21e7",u=void 0!==P.compassClassName?P.compassClassName:"ol-compass";this.label_=null,"string"==typeof f?(this.label_=document.createElement("span"),this.label_.className=u,this.label_.textContent=f):(this.label_=f,this.label_.classList.add(u));const c=P.tipLabel?P.tipLabel:"Reset rotation",r=document.createElement("button");r.className=v+"-reset",r.setAttribute("type","button"),r.title=c,r.appendChild(this.label_),r.addEventListener(F.Z.CLICK,this.handleClick_.bind(this),!1);const e=this.element;e.className=v+" "+k.XV+" "+k.hg,e.appendChild(r),this.callResetNorth_=P.resetNorth?P.resetNorth:void 0,this.duration_=void 0!==P.duration?P.duration:250,this.autoHide_=void 0===P.autoHide||P.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(k.oj)}handleClick_(P){P.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const v=this.getMap().getView();if(!v)return;const f=v.getRotation();void 0!==f&&(this.duration_>0&&f%(2*Math.PI)!=0?v.animate({rotation:0,duration:this.duration_,easing:G.Vv}):v.setRotation(0))}render(P){const v=P.frameState;if(!v)return;const f=v.viewState.rotation;if(f!=this.rotation_){const u="rotate("+f+"rad)";if(this.autoHide_){const c=this.element.classList.contains(k.oj);c||0!==f?c&&0!==f&&this.element.classList.remove(k.oj):this.element.classList.add(k.oj)}this.label_.style.transform=u}this.rotation_=f}}},8284:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>A});var z=a(2421),F=a(2431),k=a(4118),G=a(53);const A=class Z extends z.Z{constructor(P){P=P||{},super({element:document.createElement("div"),target:P.target});const v=void 0!==P.className?P.className:"ol-zoom",f=void 0!==P.delta?P.delta:1,u=void 0!==P.zoomInClassName?P.zoomInClassName:v+"-in",c=void 0!==P.zoomOutClassName?P.zoomOutClassName:v+"-out",r=void 0!==P.zoomInLabel?P.zoomInLabel:"+",d=void 0!==P.zoomOutLabel?P.zoomOutLabel:"\u2013",e=void 0!==P.zoomInTipLabel?P.zoomInTipLabel:"Zoom in",l=void 0!==P.zoomOutTipLabel?P.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=u,m.setAttribute("type","button"),m.title=e,m.appendChild("string"==typeof r?document.createTextNode(r):r),m.addEventListener(F.Z.CLICK,this.handleClick_.bind(this,f),!1);const s=document.createElement("button");s.className=c,s.setAttribute("type","button"),s.title=l,s.appendChild("string"==typeof d?document.createTextNode(d):d),s.addEventListener(F.Z.CLICK,this.handleClick_.bind(this,-f),!1);const _=this.element;_.className=v+" "+k.XV+" "+k.hg,_.appendChild(m),_.appendChild(s),this.duration_=void 0!==P.duration?P.duration:250}handleClick_(P,v){v.preventDefault(),this.zoomByDelta_(P)}zoomByDelta_(P){const f=this.getMap().getView();if(!f)return;const u=f.getZoom();if(void 0!==u){const c=f.getConstrainedZoom(u+P);this.duration_>0?(f.getAnimating()&&f.cancelAnimations(),f.animate({zoom:c,duration:this.duration_,easing:G.Vv})):f.setZoom(c)}}}},1242:(jt,ht,a)=>{"use strict";a.d(ht,{Cf:()=>s,I8:()=>P,IH:()=>G,U1:()=>u,bA:()=>c,fS:()=>f,jk:()=>g,yZ:()=>m});var z=a(1316),F=a(3026),k=a(9258);function G(_,y){return _[0]+=+y[0],_[1]+=+y[1],_}function P(_,y,I){const O=(0,F.$W)(y+180,360)-180,E=Math.abs(3600*O),R=I||0;let N=Math.floor(E/3600),K=Math.floor((E-3600*N)/60),rt=(0,F.FH)(E-3600*N-60*K,R);rt>=60&&(rt=0,K+=1),K>=60&&(K=0,N+=1);let b=N+"\xb0";return(0!==K||0!==rt)&&(b+=" "+(0,k.v)(K,2)+"\u2032"),0!==rt&&(b+=" "+(0,k.v)(rt,2,R)+"\u2033"),0!==O&&(b+=" "+_.charAt(O<0?1:0)),b}function f(_,y){let I=!0;for(let O=_.length-1;O>=0;--O)if(_[O]!=y[O]){I=!1;break}return I}function u(_,y){const I=Math.cos(y),O=Math.sin(y),R=_[1]*I+_[0]*O;return _[0]=_[0]*I-_[1]*O,_[1]=R,_}function c(_,y){return _[0]*=y,_[1]*=y,_}function m(_,y){return function v(_,y,I){return _?y.replace("{x}",_[0].toFixed(I)).replace("{y}",_[1].toFixed(I)):""}(_,"{x}, {y}",y)}function s(_,y){if(y.canWrapX()){const I=(0,z.dz)(y.getExtent()),O=g(_,y,I);O&&(_[0]-=O*I)}return _}function g(_,y,I){const O=y.getExtent();let E=0;return y.canWrapX()&&(_[0]<O[0]||_[0]>O[2])&&(I=I||(0,z.dz)(O),E=Math.floor((_[0]-O[0])/I)),E}},4118:(jt,ht,a)=>{"use strict";a.d(ht,{$A:()=>F,Qi:()=>G,XV:()=>k,hN:()=>A,hg:()=>Z,oj:()=>z,p:()=>v});const z="ol-hidden",F="ol-selectable",k="ol-unselectable",G="ol-unsupported",Z="ol-control",A="ol-collapsed",S=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),P=["style","variant","weight","size","lineHeight","family"],v=function(f){const u=f.match(S);if(!u)return null;const c={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let r=0,d=P.length;r<d;++r){const e=u[r+1];void 0!==e&&(c[P[r]]=e)}return c.families=c.family.split(/,\s?/),c}},4211:(jt,ht,a)=>{"use strict";a.d(ht,{$H:()=>A,E4:()=>F,Pb:()=>Z,ZF:()=>S,ep:()=>P,hF:()=>v,iO:()=>G,jy:()=>k});var z=a(3233);function F(f,u,c,r){let d;return d=c&&c.length?c.shift():z.Id?new OffscreenCanvas(f||300,u||300):document.createElement("canvas"),f&&(d.width=f),u&&(d.height=u),d.getContext("2d",r)}function k(f){const u=f.canvas;u.width=1,u.height=1,f.clearRect(0,0,1,1)}function G(f){let u=f.offsetWidth;const c=getComputedStyle(f);return u+=parseInt(c.marginLeft,10)+parseInt(c.marginRight,10),u}function Z(f){let u=f.offsetHeight;const c=getComputedStyle(f);return u+=parseInt(c.marginTop,10)+parseInt(c.marginBottom,10),u}function A(f,u){const c=u.parentNode;c&&c.replaceChild(f,u)}function S(f){return f&&f.parentNode?f.parentNode.removeChild(f):null}function P(f){for(;f.lastChild;)f.removeChild(f.lastChild)}function v(f,u){const c=f.childNodes;for(let r=0;;++r){const d=c[r],e=u[r];if(!d&&!e)break;if(d!==e){if(!d){f.appendChild(e);continue}if(!e){f.removeChild(d),--r;continue}f.insertBefore(e,d)}}}},53:(jt,ht,a)=>{"use strict";function z(A){return Math.pow(A,3)}function F(A){return 1-z(1-A)}function k(A){return 3*A*A-2*A*A*A}function G(A){return A}a.d(ht,{GE:()=>G,Vv:()=>F,YQ:()=>z,rd:()=>k})},7847:(jt,ht,a)=>{"use strict";a.d(ht,{Vx:()=>k,bN:()=>G,oL:()=>F});var z=a(5526);function F(Z,A,S,P,v){if(P&&P!==Z&&(S=S.bind(P)),v){const u=S;S=function(){Z.removeEventListener(A,S),u.apply(this,arguments)}}const f={target:Z,type:A,listener:S};return Z.addEventListener(A,S),f}function k(Z,A,S,P){return F(Z,A,S,P,!0)}function G(Z){Z&&Z.target&&(Z.target.removeEventListener(Z.type,Z.listener),(0,z.Z)(Z))}},8802:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>G});const G=class z{constructor(A){this.type=A,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},2431:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},9608:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>A});var z=a(5337),F=a(8802),k=a(6077),G=a(5526);const A=class Z extends z.Z{constructor(P){super(),this.eventTarget_=P,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(P,v){if(!P||!v)return;const f=this.listeners_||(this.listeners_={}),u=f[P]||(f[P]=[]);u.includes(v)||u.push(v)}dispatchEvent(P){const v="string"==typeof P,f=v?P:P.type,u=this.listeners_&&this.listeners_[f];if(!u)return;const c=v?new F.ZP(P):P;c.target||(c.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),d=this.pendingRemovals_||(this.pendingRemovals_={});let e;f in r||(r[f]=0,d[f]=0),++r[f];for(let l=0,m=u.length;l<m;++l)if(e="handleEvent"in u[l]?u[l].handleEvent(c):u[l].call(this,c),!1===e||c.propagationStopped){e=!1;break}if(0==--r[f]){let l=d[f];for(delete d[f];l--;)this.removeEventListener(f,k.Zn);delete r[f]}return e}disposeInternal(){this.listeners_&&(0,G.Z)(this.listeners_)}getListeners(P){return this.listeners_&&this.listeners_[P]||void 0}hasListener(P){return!!this.listeners_&&(P?P in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(P,v){const f=this.listeners_&&this.listeners_[P];if(f){const u=f.indexOf(v);-1!==u&&(this.pendingRemovals_&&P in this.pendingRemovals_?(f[u]=k.Zn,++this.pendingRemovals_[P]):(f.splice(u,1),0===f.length&&delete this.listeners_[P]))}}}},3990:(jt,ht,a)=>{"use strict";a.d(ht,{$6:()=>G,Bx:()=>v,QL:()=>y,TN:()=>_,Xp:()=>E,a5:()=>s,aj:()=>A,rM:()=>l,v8:()=>u,vY:()=>g,yZ:()=>P});var z=a(6077),F=a(3233),k=a(9219);function G(R){const N=arguments;return function(K){let rt=!0;for(let b=0,L=N.length;b<L&&(rt=rt&&N[b](K),rt);++b);return rt}}const A=function(R){const N=R.originalEvent;return N.altKey&&!(N.metaKey||N.ctrlKey)&&N.shiftKey},P=function(R){return!R.map.getTargetElement().hasAttribute("tabindex")||function(R){const N=R.map.getTargetElement(),K=R.map.getOwnerDocument().activeElement;return N.contains(K)}(R)},v=z.uX,u=function(R){const N=R.originalEvent;return 0==N.button&&!(F.G$&&F.tK&&N.ctrlKey)},l=function(R){const N=R.originalEvent;return!N.altKey&&!(N.metaKey||N.ctrlKey)&&!N.shiftKey},s=function(R){const N=R.originalEvent;return F.tK?N.metaKey:N.ctrlKey},g=function(R){const N=R.originalEvent;return!N.altKey&&!(N.metaKey||N.ctrlKey)&&N.shiftKey},_=function(R){const N=R.originalEvent,K=N.target.tagName;return"INPUT"!==K&&"SELECT"!==K&&"TEXTAREA"!==K&&!N.target.isContentEditable},y=function(R){const N=R.originalEvent;return(0,k.h)(void 0!==N,56),"mouse"==N.pointerType},E=function(R){const N=R.originalEvent;return(0,k.h)(void 0!==N,56),N.isPrimary&&0===N.button}},1316:(jt,ht,a)=>{"use strict";a.d(ht,{Cf:()=>ce,Cr:()=>st,EO:()=>qt,Ed:()=>at,GN:()=>m,H6:()=>K,H9:()=>Xt,HK:()=>e,I7:()=>fe,MV:()=>Ce,Ne:()=>he,T9:()=>r,Wj:()=>I,Xv:()=>Ot,YN:()=>d,b8:()=>P,bg:()=>rt,d9:()=>A,dY:()=>Y,dz:()=>At,f3:()=>Z,fS:()=>g,g0:()=>M,hC:()=>b,hI:()=>k,iW:()=>_,jE:()=>f,kK:()=>Gt,l7:()=>y,lJ:()=>c,p8:()=>D,pX:()=>u,qP:()=>E,qf:()=>S,qg:()=>w,r4:()=>v,rL:()=>vt,w$:()=>L,xb:()=>zt});var z=a(6600),F=a(9219);function k(ft){const Ct=[1/0,1/0,-1/0,-1/0];for(let Zt=0,Vt=ft.length;Zt<Vt;++Zt)I(Ct,ft[Zt]);return Ct}function Z(ft,Ct,Zt){return Zt?(Zt[0]=ft[0]-Ct,Zt[1]=ft[1]-Ct,Zt[2]=ft[2]+Ct,Zt[3]=ft[3]+Ct,Zt):[ft[0]-Ct,ft[1]-Ct,ft[2]+Ct,ft[3]+Ct]}function A(ft,Ct){return Ct?(Ct[0]=ft[0],Ct[1]=ft[1],Ct[2]=ft[2],Ct[3]=ft[3],Ct):ft.slice()}function S(ft,Ct,Zt){let Vt,pe;return Vt=Ct<ft[0]?ft[0]-Ct:ft[2]<Ct?Ct-ft[2]:0,pe=Zt<ft[1]?ft[1]-Zt:ft[3]<Zt?Zt-ft[3]:0,Vt*Vt+pe*pe}function P(ft,Ct){return f(ft,Ct[0],Ct[1])}function v(ft,Ct){return ft[0]<=Ct[0]&&Ct[2]<=ft[2]&&ft[1]<=Ct[1]&&Ct[3]<=ft[3]}function f(ft,Ct,Zt){return ft[0]<=Ct&&Ct<=ft[2]&&ft[1]<=Zt&&Zt<=ft[3]}function u(ft,Ct){const gt=Ct[0],xt=Ct[1];let Ft=z.Z.UNKNOWN;return gt<ft[0]?Ft|=z.Z.LEFT:gt>ft[2]&&(Ft|=z.Z.RIGHT),xt<ft[1]?Ft|=z.Z.BELOW:xt>ft[3]&&(Ft|=z.Z.ABOVE),Ft===z.Z.UNKNOWN&&(Ft=z.Z.INTERSECTING),Ft}function c(){return[1/0,1/0,-1/0,-1/0]}function r(ft,Ct,Zt,Vt,pe){return pe?(pe[0]=ft,pe[1]=Ct,pe[2]=Zt,pe[3]=Vt,pe):[ft,Ct,Zt,Vt]}function d(ft){return r(1/0,1/0,-1/0,-1/0,ft)}function e(ft,Ct){const Zt=ft[0],Vt=ft[1];return r(Zt,Vt,Zt,Vt,Ct)}function m(ft,Ct,Zt,Vt,pe){return E(d(pe),ft,Ct,Zt,Vt)}function g(ft,Ct){return ft[0]==Ct[0]&&ft[2]==Ct[2]&&ft[1]==Ct[1]&&ft[3]==Ct[3]}function _(ft,Ct,Zt){return Math.abs(ft[0]-Ct[0])<Zt&&Math.abs(ft[2]-Ct[2])<Zt&&Math.abs(ft[1]-Ct[1])<Zt&&Math.abs(ft[3]-Ct[3])<Zt}function y(ft,Ct){return Ct[0]<ft[0]&&(ft[0]=Ct[0]),Ct[2]>ft[2]&&(ft[2]=Ct[2]),Ct[1]<ft[1]&&(ft[1]=Ct[1]),Ct[3]>ft[3]&&(ft[3]=Ct[3]),ft}function I(ft,Ct){Ct[0]<ft[0]&&(ft[0]=Ct[0]),Ct[0]>ft[2]&&(ft[2]=Ct[0]),Ct[1]<ft[1]&&(ft[1]=Ct[1]),Ct[1]>ft[3]&&(ft[3]=Ct[1])}function E(ft,Ct,Zt,Vt,pe){for(;Zt<Vt;Zt+=pe)N(ft,Ct[Zt],Ct[Zt+1]);return ft}function N(ft,Ct,Zt){ft[0]=Math.min(ft[0],Ct),ft[1]=Math.min(ft[1],Zt),ft[2]=Math.max(ft[2],Ct),ft[3]=Math.max(ft[3],Zt)}function K(ft,Ct){let Zt;return Zt=Ct(b(ft)),!!(Zt||(Zt=Ct(L(ft)),Zt)||(Zt=Ct(Ot(ft)),Zt)||(Zt=Ct(vt(ft)),Zt))&&Zt}function rt(ft){let Ct=0;return zt(ft)||(Ct=At(ft)*st(ft)),Ct}function b(ft){return[ft[0],ft[1]]}function L(ft){return[ft[2],ft[1]]}function w(ft){return[(ft[0]+ft[2])/2,(ft[1]+ft[3])/2]}function M(ft,Ct){let Zt;return"bottom-left"===Ct?Zt=b(ft):"bottom-right"===Ct?Zt=L(ft):"top-left"===Ct?Zt=vt(ft):"top-right"===Ct?Zt=Ot(ft):(0,F.h)(!1,13),Zt}function D(ft,Ct,Zt,Vt,pe){const[Yt,gt,xt,Ft,Wt,Bt,ue,ge]=Y(ft,Ct,Zt,Vt);return r(Math.min(Yt,xt,Wt,ue),Math.min(gt,Ft,Bt,ge),Math.max(Yt,xt,Wt,ue),Math.max(gt,Ft,Bt,ge),pe)}function Y(ft,Ct,Zt,Vt){const pe=Ct*Vt[0]/2,Yt=Ct*Vt[1]/2,gt=Math.cos(Zt),xt=Math.sin(Zt),Ft=pe*gt,Wt=pe*xt,Bt=Yt*gt,ue=Yt*xt,ge=ft[0],Le=ft[1];return[ge-Ft+ue,Le-Wt-Bt,ge-Ft-ue,Le-Wt+Bt,ge+Ft-ue,Le+Wt+Bt,ge+Ft+ue,Le+Wt-Bt,ge-Ft+ue,Le-Wt-Bt]}function st(ft){return ft[3]-ft[1]}function at(ft,Ct,Zt){const Vt=Zt||[1/0,1/0,-1/0,-1/0];return Gt(ft,Ct)?(Vt[0]=ft[0]>Ct[0]?ft[0]:Ct[0],Vt[1]=ft[1]>Ct[1]?ft[1]:Ct[1],Vt[2]=ft[2]<Ct[2]?ft[2]:Ct[2],Vt[3]=ft[3]<Ct[3]?ft[3]:Ct[3]):d(Vt),Vt}function vt(ft){return[ft[0],ft[3]]}function Ot(ft){return[ft[2],ft[3]]}function At(ft){return ft[2]-ft[0]}function Gt(ft,Ct){return ft[0]<=Ct[2]&&ft[2]>=Ct[0]&&ft[1]<=Ct[3]&&ft[3]>=Ct[1]}function zt(ft){return ft[2]<ft[0]||ft[3]<ft[1]}function qt(ft,Ct){return Ct?(Ct[0]=ft[0],Ct[1]=ft[1],Ct[2]=ft[2],Ct[3]=ft[3],Ct):ft}function Xt(ft,Ct){const Zt=(ft[2]-ft[0])/2*(Ct-1),Vt=(ft[3]-ft[1])/2*(Ct-1);ft[0]-=Zt,ft[2]+=Zt,ft[1]-=Vt,ft[3]+=Vt}function fe(ft,Ct,Zt){let Vt=!1;const pe=u(ft,Ct),Yt=u(ft,Zt);if(pe===z.Z.INTERSECTING||Yt===z.Z.INTERSECTING)Vt=!0;else{const gt=ft[0],xt=ft[1],Ft=ft[2],Wt=ft[3],ge=Zt[0],Le=Zt[1],Me=(Le-Ct[1])/(ge-Ct[0]);let nt,Q;Yt&z.Z.ABOVE&&!(pe&z.Z.ABOVE)&&(nt=ge-(Le-Wt)/Me,Vt=nt>=gt&&nt<=Ft),!Vt&&Yt&z.Z.RIGHT&&!(pe&z.Z.RIGHT)&&(Q=Le-(ge-Ft)*Me,Vt=Q>=xt&&Q<=Wt),!Vt&&Yt&z.Z.BELOW&&!(pe&z.Z.BELOW)&&(nt=ge-(Le-xt)/Me,Vt=nt>=gt&&nt<=Ft),!Vt&&Yt&z.Z.LEFT&&!(pe&z.Z.LEFT)&&(Q=Le-(ge-gt)*Me,Vt=Q>=xt&&Q<=Wt)}return Vt}function he(ft,Ct,Zt,Vt){if(zt(ft))return d(Zt);let pe=[];if(Vt>1){const xt=ft[2]-ft[0],Ft=ft[3]-ft[1];for(let Wt=0;Wt<Vt;++Wt)pe.push(ft[0]+xt*Wt/Vt,ft[1],ft[2],ft[1]+Ft*Wt/Vt,ft[2]-xt*Wt/Vt,ft[3],ft[0],ft[3]-Ft*Wt/Vt)}else pe=[ft[0],ft[1],ft[2],ft[1],ft[2],ft[3],ft[0],ft[3]];Ct(pe,pe,2);const Yt=[],gt=[];for(let xt=0,Ft=pe.length;xt<Ft;xt+=2)Yt.push(pe[xt]),gt.push(pe[xt+1]);return function G(ft,Ct,Zt){return r(Math.min.apply(null,ft),Math.min.apply(null,Ct),Math.max.apply(null,ft),Math.max.apply(null,Ct),Zt)}(Yt,gt,Zt)}function ce(ft,Ct){const Zt=Ct.getExtent(),Vt=w(ft);if(Ct.canWrapX()&&(Vt[0]<Zt[0]||Vt[0]>=Zt[2])){const pe=At(Zt),gt=Math.floor((Vt[0]-Zt[0])/pe)*pe;ft[0]-=gt,ft[2]-=gt}return ft}function Ce(ft,Ct){if(Ct.canWrapX()){const Zt=Ct.getExtent();if(!isFinite(ft[0])||!isFinite(ft[2]))return[[Zt[0],ft[1],Zt[2],ft[3]]];ce(ft,Ct);const Vt=At(Zt);if(At(ft)>Vt)return[[Zt[0],ft[1],Zt[2],ft[3]]];if(ft[0]<Zt[0])return[[ft[0]+Vt,ft[1],Zt[2],ft[3]],[Zt[0],ft[1],ft[2],ft[3]]];if(ft[2]>Zt[2])return[[ft[0],ft[1],Zt[2],ft[3]],[Zt[0],ft[1],ft[2]-Vt,ft[3]]]}return[ft]}},6600:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},6634:(jt,ht,a)=>{"use strict";a.d(ht,{Be:()=>G,ov:()=>k});var z=a(6077);let F=!1;function k(A,S,P,v,f,u,c){const r=new XMLHttpRequest;r.open("GET","function"==typeof A?A(P,v,f):A,!0),"arraybuffer"==S.getType()&&(r.responseType="arraybuffer"),r.withCredentials=F,r.onload=function(d){if(!r.status||r.status>=200&&r.status<300){const e=S.getType();let l;"json"==e||"text"==e?l=r.responseText:"xml"==e?(l=r.responseXML,l||(l=(new DOMParser).parseFromString(r.responseText,"application/xml"))):"arraybuffer"==e&&(l=r.response),l?u(S.readFeatures(l,{extent:P,featureProjection:f}),S.readProjection(l)):c()}else c()},r.onerror=c,r.send()}function G(A,S){return function(P,v,f,u,c){const r=this;k(A,S,P,v,f,function(d,e){r.addFeatures(d),void 0!==u&&u(d)},c||z.Zn)}}},8387:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>G,fI:()=>Z});var z=a(3089),F=a(7021);const G=class k{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(P,v){if(v){let f=v.dataProjection?(0,F.U2)(v.dataProjection):this.readProjection(P);v.extent&&f&&"tile-pixels"===f.getUnits()&&(f=(0,F.U2)(f),f.setWorldExtent(v.extent)),v={dataProjection:f,featureProjection:v.featureProjection}}return this.adaptOptions(v)}adaptOptions(P){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},P)}getType(){return(0,z.O3)()}readFeature(P,v){return(0,z.O3)()}readFeatures(P,v){return(0,z.O3)()}readGeometry(P,v){return(0,z.O3)()}readProjection(P){return(0,z.O3)()}writeFeature(P,v){return(0,z.O3)()}writeFeatures(P,v){return(0,z.O3)()}writeGeometry(P,v){return(0,z.O3)()}};function Z(S,P,v){const f=v?(0,F.U2)(v.featureProjection):null,u=v?(0,F.U2)(v.dataProjection):null;let c;if(c=f&&u&&!(0,F.OP)(f,u)?(P?S.clone():S).transform(P?f:u,P?u:f):S,P&&v&&void 0!==v.decimals){const r=Math.pow(10,v.decimals),d=function(e){for(let l=0,m=e.length;l<m;++l)e[l]=Math.round(e[l]*r)/r;return e};c===S&&(c=S.clone()),c.applyTransform(d)}return c}},1539:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>w});var z=a(6626),F=a(3007),k=a(6415),G=a(5934),Z=a(1684),A=a(1506),S=a(2973),P=a(8382),v=a(3435),f=a(9219),u=a(7021),c=a(5526),r=a(8387);function e(M,C){if(!M)return null;let D;switch(M.type){case"Point":D=function m(M){return new P.Z(M.coordinates)}(M);break;case"LineString":D=function s(M){return new G.Z(M.coordinates)}(M);break;case"Polygon":D=function I(M){return new v.ZP(M.coordinates)}(M);break;case"MultiPoint":D=function _(M){return new A.Z(M.coordinates)}(M);break;case"MultiLineString":D=function g(M){return new Z.Z(M.coordinates)}(M);break;case"MultiPolygon":D=function y(M){return new S.Z(M.coordinates)}(M);break;case"GeometryCollection":D=function l(M,C){const D=M.geometries.map(function(Y){return e(Y,C)});return new F.Z(D)}(M);break;default:throw new Error("Unsupported GeoJSON type: "+M.type)}return(0,r.fI)(D,!1,C)}function O(M,C){const D=(M=(0,r.fI)(M,!0,C)).getType();let Y;switch(D){case"Point":Y=function b(M,C){return{type:"Point",coordinates:M.getCoordinates()}}(M);break;case"LineString":Y=function R(M,C){return{type:"LineString",coordinates:M.getCoordinates()}}(M);break;case"Polygon":Y=function L(M,C){let D;return C&&(D=C.rightHanded),{type:"Polygon",coordinates:M.getCoordinates(D)}}(M,C);break;case"MultiPoint":Y=function K(M,C){return{type:"MultiPoint",coordinates:M.getCoordinates()}}(M);break;case"MultiLineString":Y=function N(M,C){return{type:"MultiLineString",coordinates:M.getCoordinates()}}(M);break;case"MultiPolygon":Y=function rt(M,C){let D;return C&&(D=C.rightHanded),{type:"MultiPolygon",coordinates:M.getCoordinates(D)}}(M,C);break;case"GeometryCollection":Y=function E(M,C){return delete(C=Object.assign({},C)).featureProjection,{type:"GeometryCollection",geometries:M.getGeometriesArray().map(function(Y){return O(Y,C)})}}(M,C);break;case"Circle":Y={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+D)}return Y}const w=class d extends k.Z{constructor(C){C=C||{},super(),this.dataProjection=(0,u.U2)(C.dataProjection?C.dataProjection:"EPSG:4326"),C.featureProjection&&(this.defaultFeatureProjection=(0,u.U2)(C.featureProjection)),this.geometryName_=C.geometryName,this.extractGeometryName_=C.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(C,D){let Y=null;Y="Feature"===C.type?C:{type:"Feature",geometry:C,properties:null};const st=e(Y.geometry,D),V=new z.Z;return this.geometryName_?V.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in Y!==void 0&&V.setGeometryName(Y.geometry_name),V.setGeometry(st),"id"in Y&&V.setId(Y.id),Y.properties&&V.setProperties(Y.properties,!0),V}readFeaturesFromObject(C,D){let st=null;if("FeatureCollection"===C.type){st=[];const at=C.features;for(let ut=0,Pt=at.length;ut<Pt;++ut)st.push(this.readFeatureFromObject(at[ut],D))}else st=[this.readFeatureFromObject(C,D)];return st}readGeometryFromObject(C,D){return e(C,D)}readProjectionFromObject(C){const D=C.crs;let Y;return D?"name"==D.type?Y=(0,u.U2)(D.properties.name):"EPSG"===D.type?Y=(0,u.U2)("EPSG:"+D.properties.code):(0,f.h)(!1,36):Y=this.dataProjection,Y}writeFeatureObject(C,D){D=this.adaptOptions(D);const Y={type:"Feature",geometry:null,properties:null},st=C.getId();if(void 0!==st&&(Y.id=st),!C.hasProperties())return Y;const V=C.getProperties(),at=C.getGeometry();return at&&(Y.geometry=O(at,D),delete V[C.getGeometryName()]),(0,c.x)(V)||(Y.properties=V),Y}writeFeaturesObject(C,D){D=this.adaptOptions(D);const Y=[];for(let st=0,V=C.length;st<V;++st)Y.push(this.writeFeatureObject(C[st],D));return{type:"FeatureCollection",features:Y}}writeGeometryObject(C,D){return O(C,this.adaptOptions(D))}}},6415:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>Z});var z=a(8387),F=a(3089);function G(A){return"string"==typeof A?JSON.parse(A)||null:null!==A?A:null}const Z=class k extends z.ZP{constructor(){super()}getType(){return"json"}readFeature(S,P){return this.readFeatureFromObject(G(S),this.getReadOptions(S,P))}readFeatures(S,P){return this.readFeaturesFromObject(G(S),this.getReadOptions(S,P))}readFeatureFromObject(S,P){return(0,F.O3)()}readFeaturesFromObject(S,P){return(0,F.O3)()}readGeometry(S,P){return this.readGeometryFromObject(G(S),this.getReadOptions(S,P))}readGeometryFromObject(S,P){return(0,F.O3)()}readProjection(S){return this.readProjectionFromObject(G(S))}readProjectionFromObject(S){return(0,F.O3)()}writeFeature(S,P){return JSON.stringify(this.writeFeatureObject(S,P))}writeFeatureObject(S,P){return(0,F.O3)()}writeFeatures(S,P){return JSON.stringify(this.writeFeaturesObject(S,P))}writeFeaturesObject(S,P){return(0,F.O3)()}writeGeometry(S,P){return JSON.stringify(this.writeGeometryObject(S,P))}writeGeometryObject(S,P){return(0,F.O3)()}}},6377:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>Ys});var z=a(6626),F=a(5505),k=a(3007),G=a(1485),Z=a(4847),A=a(5934),S=a(1684),P=a(1506),v=a(2973),f=a(8382),u=a(3435),c=a(4396),r=a(1949),d=a(7202),e=a(8387),l=a(3089),m=a(9363),s=a(2659);const _=class g extends e.ZP{constructor(){super(),this.xmlSerializer_=(0,s.xc)()}getType(){return"xml"}readFeature(ot,dt){if(!ot)return null;if("string"==typeof ot){const mt=(0,s.Qc)(ot);return this.readFeatureFromDocument(mt,dt)}return(0,s.qk)(ot)?this.readFeatureFromDocument(ot,dt):this.readFeatureFromNode(ot,dt)}readFeatureFromDocument(ot,dt){const mt=this.readFeaturesFromDocument(ot,dt);return mt.length>0?mt[0]:null}readFeatureFromNode(ot,dt){return null}readFeatures(ot,dt){if(!ot)return[];if("string"==typeof ot){const mt=(0,s.Qc)(ot);return this.readFeaturesFromDocument(mt,dt)}return(0,s.qk)(ot)?this.readFeaturesFromDocument(ot,dt):this.readFeaturesFromNode(ot,dt)}readFeaturesFromDocument(ot,dt){const mt=[];for(let Lt=ot.firstChild;Lt;Lt=Lt.nextSibling)Lt.nodeType==Node.ELEMENT_NODE&&(0,m.l7)(mt,this.readFeaturesFromNode(Lt,dt));return mt}readFeaturesFromNode(ot,dt){return(0,l.O3)()}readGeometry(ot,dt){if(!ot)return null;if("string"==typeof ot){const mt=(0,s.Qc)(ot);return this.readGeometryFromDocument(mt,dt)}return(0,s.qk)(ot)?this.readGeometryFromDocument(ot,dt):this.readGeometryFromNode(ot,dt)}readGeometryFromDocument(ot,dt){return null}readGeometryFromNode(ot,dt){return null}readProjection(ot){if(!ot)return null;if("string"==typeof ot){const dt=(0,s.Qc)(ot);return this.readProjectionFromDocument(dt)}return(0,s.qk)(ot)?this.readProjectionFromDocument(ot):this.readProjectionFromNode(ot)}readProjectionFromDocument(ot){return this.dataProjection}readProjectionFromNode(ot){return this.dataProjection}writeFeature(ot,dt){const mt=this.writeFeatureNode(ot,dt);return this.xmlSerializer_.serializeToString(mt)}writeFeatureNode(ot,dt){return null}writeFeatures(ot,dt){const mt=this.writeFeaturesNode(ot,dt);return this.xmlSerializer_.serializeToString(mt)}writeFeaturesNode(ot,dt){return null}writeGeometry(ot,dt){const mt=this.writeGeometryNode(ot,dt);return this.xmlSerializer_.serializeToString(mt)}writeGeometryNode(ot,dt){return null}};var y=a(9818),I=a(9219),O=a(7021),E=a(1005),R=a(3026);const N=["http://www.google.com/kml/ext/2.2"],K=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],b={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},L=(0,s.C5)(K,{ExtendedData:gi,Region:pi,MultiGeometry:(0,s.Pr)(Ht,"geometry"),LineString:(0,s.Pr)(_t,"geometry"),LinearRing:(0,s.Pr)(pt,"geometry"),Point:(0,s.Pr)(te,"geometry"),Polygon:(0,s.Pr)(Te,"geometry"),Style:(0,s.Pr)(Fe),StyleMap:function vi(Kt,ot){const dt=et.call(this,Kt,ot);if(!dt)return;const mt=ot[ot.length-1];Array.isArray(dt)?mt.Style=dt:"string"==typeof dt?mt.styleUrl=dt:(0,I.h)(!1,38)},address:(0,s.Pr)(E.s2),description:(0,s.Pr)(E.s2),name:(0,s.Pr)(E.s2),open:(0,s.Pr)(E.ud),phoneNumber:(0,s.Pr)(E.s2),styleUrl:(0,s.Pr)(Q),visibility:(0,s.Pr)(E.ud)},(0,s.C5)(N,{MultiTrack:(0,s.Pr)(function Ue(Kt,ot){const dt=(0,s.O)([],Ne,Kt,ot);if(dt)return new S.Z(dt)},"geometry"),Track:(0,s.Pr)(Je,"geometry")})),w=(0,s.C5)(K,{ExtendedData:gi,Region:pi,Link:function Ri(Kt,ot){(0,s.T3)(M,Kt,ot)},address:(0,s.Pr)(E.s2),description:(0,s.Pr)(E.s2),name:(0,s.Pr)(E.s2),open:(0,s.Pr)(E.ud),phoneNumber:(0,s.Pr)(E.s2),visibility:(0,s.Pr)(E.ud)}),M=(0,s.C5)(K,{href:(0,s.Pr)(nt)}),C=(0,s.C5)(K,{Altitude:(0,s.Pr)(E.fy),Longitude:(0,s.Pr)(E.fy),Latitude:(0,s.Pr)(E.fy),Tilt:(0,s.Pr)(E.fy),AltitudeMode:(0,s.Pr)(E.s2),Heading:(0,s.Pr)(E.fy),Roll:(0,s.Pr)(E.fy)}),D=(0,s.C5)(K,{LatLonAltBox:function Gi(Kt,ot){const dt=(0,s.O)({},ri,Kt,ot);if(!dt)return;const mt=ot[ot.length-1],Lt=[parseFloat(dt.west),parseFloat(dt.south),parseFloat(dt.east),parseFloat(dt.north)];mt.extent=Lt,mt.altitudeMode=dt.altitudeMode,mt.minAltitude=parseFloat(dt.minAltitude),mt.maxAltitude=parseFloat(dt.maxAltitude)},Lod:function ai(Kt,ot){const dt=(0,s.O)({},Pi,Kt,ot);if(!dt)return;const mt=ot[ot.length-1];mt.minLodPixels=parseFloat(dt.minLodPixels),mt.maxLodPixels=parseFloat(dt.maxLodPixels),mt.minFadeExtent=parseFloat(dt.minFadeExtent),mt.maxFadeExtent=parseFloat(dt.maxFadeExtent)}}),Y=(0,s.C5)(K,["Document","Placemark"]),st=(0,s.C5)(K,{Document:(0,s.A4)(function Mn(Kt,ot,dt){(0,s.ZL)({node:Kt},en,Gs,ot,dt,void 0,this)}),Placemark:(0,s.A4)(Hn)});let V,Pt,vt,Ot,At,Gt,Xt,ce,xt,at=null,zt=null,fe=null,Ce=null,Ct=null,Vt=null;function Yt(Kt){return 32/Math.min(Kt[0],Kt[1])}function Ft(Kt){return Kt}function ge(Kt,ot,dt){return Array.isArray(Kt)?Kt:"string"==typeof Kt?ge(dt[Kt],ot,dt):ot}function Le(Kt){const ot=(0,s.Ve)(Kt,!1),dt=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(ot);if(dt){const mt=dt[1];return[parseInt(mt.substr(6,2),16),parseInt(mt.substr(4,2),16),parseInt(mt.substr(2,2),16),parseInt(mt.substr(0,2),16)/255]}}function Me(Kt){let ot=(0,s.Ve)(Kt,!1);const dt=[];ot=ot.replace(/\s*,\s*/g,",");const mt=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let Lt;for(;Lt=mt.exec(ot);){const Qt=parseFloat(Lt[1]),ee=parseFloat(Lt[2]),Ee=Lt[3]?parseFloat(Lt[3]):0;dt.push(Qt,ee,Ee),ot=ot.substr(Lt[0].length)}if(""===ot)return dt}function nt(Kt){const ot=(0,s.Ve)(Kt,!1).trim();let dt=Kt.baseURI;return(!dt||"about:blank"==dt)&&(dt=window.location.href),dt?new URL(ot,dt).href:ot}function Q(Kt){const ot=(0,s.Ve)(Kt,!1).trim().replace(/^(?!.*#)/,"#");let dt=Kt.baseURI;return(!dt||"about:blank"==dt)&&(dt=window.location.href),dt?new URL(ot,dt).href:ot}function W(Kt){return(0,E.fy)(Kt)}const tt=(0,s.C5)(K,{Pair:function Ii(Kt,ot){const dt=(0,s.O)({},xn,Kt,ot,this);if(!dt)return;const mt=dt.key;if(mt&&"normal"==mt){const Lt=dt.styleUrl;Lt&&(ot[ot.length-1]=Lt);const Qt=dt.Style;Qt&&(ot[ot.length-1]=Qt)}}});function et(Kt,ot){return(0,s.O)(void 0,tt,Kt,ot,this)}const yt=(0,s.C5)(K,{Icon:(0,s.Pr)(function Qe(Kt,ot){return(0,s.O)({},si,Kt,ot)||null}),color:(0,s.Pr)(Le),heading:(0,s.Pr)(E.fy),hotSpot:(0,s.Pr)(function x(Kt){const ot=Kt.getAttribute("xunits"),dt=Kt.getAttribute("yunits");let mt;return mt="insetPixels"!==ot?"insetPixels"!==dt?"bottom-left":"top-left":"insetPixels"!==dt?"bottom-right":"top-right",{x:parseFloat(Kt.getAttribute("x")),xunits:b[ot],y:parseFloat(Kt.getAttribute("y")),yunits:b[dt],origin:mt}}),scale:(0,s.Pr)(W)}),It=(0,s.C5)(K,{color:(0,s.Pr)(Le),scale:(0,s.Pr)(W)}),Jt=(0,s.C5)(K,{color:(0,s.Pr)(Le),width:(0,s.Pr)(E.fy)}),ye=(0,s.C5)(K,{color:(0,s.Pr)(Le),fill:(0,s.Pr)(E.ud),outline:(0,s.Pr)(E.ud)}),ie=(0,s.C5)(K,{coordinates:(0,s.z)(Me)});function Ge(Kt,ot){return(0,s.O)(null,ie,Kt,ot)}const Ne=(0,s.C5)(N,{Track:(0,s.Ei)(Je)}),Ve=(0,s.C5)(K,{when:function hs(Kt,ot){const mt=ot[ot.length-1].whens,Lt=(0,s.Ve)(Kt,!1),Qt=Date.parse(Lt);mt.push(isNaN(Qt)?0:Qt)}},(0,s.C5)(N,{coord:function Xe(Kt,ot){const mt=ot[ot.length-1].coordinates,Lt=(0,s.Ve)(Kt,!1),ee=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(Lt);if(ee){const Ee=parseFloat(ee[1]),xe=parseFloat(ee[2]),be=parseFloat(ee[3]);mt.push([Ee,xe,be])}else mt.push([])}}));function Je(Kt,ot){const dt=(0,s.O)({coordinates:[],whens:[]},Ve,Kt,ot);if(!dt)return;const mt=[],Lt=dt.coordinates,Qt=dt.whens;for(let ee=0,Ee=Math.min(Lt.length,Qt.length);ee<Ee;++ee)3==Lt[ee].length&&mt.push(Lt[ee][0],Lt[ee][1],Lt[ee][2],Qt[ee]);return new A.Z(mt,"XYZM")}const si=(0,s.C5)(K,{href:(0,s.Pr)(nt)},(0,s.C5)(N,{x:(0,s.Pr)(E.fy),y:(0,s.Pr)(E.fy),w:(0,s.Pr)(E.fy),h:(0,s.Pr)(E.fy)})),ei=(0,s.C5)(K,{coordinates:(0,s.z)(Me)});function q(Kt,ot){return(0,s.O)(null,ei,Kt,ot)}const J=(0,s.C5)(K,{extrude:(0,s.Pr)(E.ud),tessellate:(0,s.Pr)(E.ud),altitudeMode:(0,s.Pr)(E.s2)});function _t(Kt,ot){const dt=(0,s.O)({},J,Kt,ot),mt=q(Kt,ot);if(mt){const Lt=new A.Z(mt,"XYZ");return Lt.setProperties(dt,!0),Lt}}function pt(Kt,ot){const dt=(0,s.O)({},J,Kt,ot),mt=q(Kt,ot);if(mt){const Lt=new u.ZP(mt,"XYZ",[mt.length]);return Lt.setProperties(dt,!0),Lt}}const St=(0,s.C5)(K,{LineString:(0,s.Ei)(_t),LinearRing:(0,s.Ei)(pt),MultiGeometry:(0,s.Ei)(Ht),Point:(0,s.Ei)(te),Polygon:(0,s.Ei)(Te)});function Ht(Kt,ot){const dt=(0,s.O)([],St,Kt,ot);if(!dt)return null;if(0===dt.length)return new k.Z(dt);let mt,Lt=!0;const Qt=dt[0].getType();let ee;for(let Ee=1,xe=dt.length;Ee<xe;++Ee)if(ee=dt[Ee],ee.getType()!=Qt){Lt=!1;break}if(Lt){let Ee,xe;if("Point"==Qt){const be=dt[0];Ee=be.getLayout(),xe=be.getFlatCoordinates();for(let je=1,$e=dt.length;je<$e;++je)ee=dt[je],(0,m.l7)(xe,ee.getFlatCoordinates());mt=new P.Z(xe,Ee),Be(mt,dt)}else"LineString"==Qt?(mt=new S.Z(dt),Be(mt,dt)):"Polygon"==Qt?(mt=new v.Z(dt),Be(mt,dt)):"GeometryCollection"==Qt?mt=new k.Z(dt):(0,I.h)(!1,37)}else mt=new k.Z(dt);return mt}function te(Kt,ot){const dt=(0,s.O)({},J,Kt,ot),mt=q(Kt,ot);if(mt){const Lt=new f.Z(mt,"XYZ");return Lt.setProperties(dt,!0),Lt}}const ve=(0,s.C5)(K,{innerBoundaryIs:function Ci(Kt,ot){const dt=(0,s.O)([],Ei,Kt,ot);dt.length>0&&ot[ot.length-1].push(...dt)},outerBoundaryIs:function Ws(Kt,ot){const dt=(0,s.O)(void 0,Xi,Kt,ot);dt&&(ot[ot.length-1][0]=dt)}});function Te(Kt,ot){const dt=(0,s.O)({},J,Kt,ot),mt=(0,s.O)([null],ve,Kt,ot);if(mt&&mt[0]){const Lt=mt[0],Qt=[Lt.length];for(let Ee=1,xe=mt.length;Ee<xe;++Ee)(0,m.l7)(Lt,mt[Ee]),Qt.push(Lt.length);const ee=new u.ZP(Lt,"XYZ",Qt);return ee.setProperties(dt,!0),ee}}const Se=(0,s.C5)(K,{IconStyle:function Et(Kt,ot){const dt=(0,s.O)({},yt,Kt,ot);if(!dt)return;const mt=ot[ot.length-1],Lt="Icon"in dt?dt.Icon:{},Qt=!("Icon"in dt)||Object.keys(Lt).length>0;let ee;const Ee=Lt.href;Ee?ee=Ee:Qt&&(ee=Gt);let xe,be,je,$e="bottom-left";const Ye=dt.hotSpot;let li;Ye?(xe=[Ye.x,Ye.y],be=Ye.xunits,je=Ye.yunits,$e=Ye.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(ee)&&(ee.includes("pushpin")?(xe=Pt,be=vt,je=Ot):ee.includes("arrow-reverse")?(xe=[54,42],be=vt,je=Ot):ee.includes("paddle")&&(xe=[32,1],be=vt,je=Ot));const ti=Lt.x,Bi=Lt.y;let ii;void 0!==ti&&void 0!==Bi&&(li=[ti,Bi]);const mi=Lt.w,fi=Lt.h;let bi;void 0!==mi&&void 0!==fi&&(ii=[mi,fi]);const hi=dt.heading;void 0!==hi&&(bi=(0,R.Yr)(hi));const zi=dt.color;if(Qt){ee==Gt&&(ii=At);const wi=new G.Z({anchor:xe,anchorOrigin:$e,anchorXUnits:be,anchorYUnits:je,crossOrigin:this.crossOrigin_,offset:li,offsetOrigin:"bottom-left",rotation:bi,scale:dt.scale,size:ii,src:this.iconUrlFunction_(ee),color:zi}),Ms=wi.getScaleArray()[0],qn=wi.getSize();if(null===qn){const dn=wi.getImageState();if(dn===Z.Z.IDLE||dn===Z.Z.LOADING){const Ts=function(){const Ps=wi.getImageState();if(Ps!==Z.Z.IDLE&&Ps!==Z.Z.LOADING){const In=wi.getSize();if(In&&2==In.length){const Hs=Yt(In);wi.setScale(Ms*Hs)}wi.unlistenImageChange(Ts)}};wi.listenImageChange(Ts),dn===Z.Z.IDLE&&wi.load()}}else if(2==qn.length){const dn=Yt(qn);wi.setScale(Ms*dn)}mt.imageStyle=wi}else mt.imageStyle=Xt},LabelStyle:function wt(Kt,ot){const dt=(0,s.O)({},It,Kt,ot);if(!dt)return;const mt=ot[ot.length-1],Lt=new d.Z({fill:new F.Z({color:"color"in dt?dt.color:V}),scale:dt.scale});mt.textStyle=Lt},LineStyle:function ne(Kt,ot){const dt=(0,s.O)({},Jt,Kt,ot);if(!dt)return;const mt=ot[ot.length-1],Lt=new c.Z({color:"color"in dt?dt.color:V,width:"width"in dt?dt.width:1});mt.strokeStyle=Lt},PolyStyle:function oe(Kt,ot){const dt=(0,s.O)({},ye,Kt,ot);if(!dt)return;const mt=ot[ot.length-1],Lt=new F.Z({color:"color"in dt?dt.color:V});mt.fillStyle=Lt;const Qt=dt.fill;void 0!==Qt&&(mt.fill=Qt);const ee=dt.outline;void 0!==ee&&(mt.outline=ee)}});function Fe(Kt,ot){const dt=(0,s.O)({},Se,Kt,ot,this);if(!dt)return null;let mt="fillStyle"in dt?dt.fillStyle:at;const Lt=dt.fill;let Qt;void 0!==Lt&&!Lt&&(mt=null),"imageStyle"in dt?dt.imageStyle!=Xt&&(Qt=dt.imageStyle):Qt=zt;const ee="textStyle"in dt?dt.textStyle:Ce,Ee="strokeStyle"in dt?dt.strokeStyle:fe,xe=dt.outline;return void 0===xe||xe?[new r.ZP({fill:mt,image:Qt,stroke:Ee,text:ee,zIndex:void 0})]:[new r.ZP({geometry:function(be){const je=be.getGeometry(),$e=je.getType();return"GeometryCollection"===$e?new k.Z(je.getGeometriesArrayRecursive().filter(function(li){const ti=li.getType();return"Polygon"!==ti&&"MultiPolygon"!==ti})):"Polygon"!==$e&&"MultiPolygon"!==$e?je:void 0},fill:mt,image:Qt,stroke:Ee,text:ee,zIndex:void 0}),new r.ZP({geometry:function(be){const je=be.getGeometry(),$e=je.getType();return"GeometryCollection"===$e?new k.Z(je.getGeometriesArrayRecursive().filter(function(li){const ti=li.getType();return"Polygon"===ti||"MultiPolygon"===ti})):"Polygon"===$e||"MultiPolygon"===$e?je:void 0},fill:mt,stroke:null,zIndex:void 0})]}function Be(Kt,ot){const dt=ot.length,mt=new Array(ot.length),Lt=new Array(ot.length),Qt=new Array(ot.length);let ee,Ee,xe;ee=!1,Ee=!1,xe=!1;for(let be=0;be<dt;++be){const je=ot[be];mt[be]=je.get("extrude"),Lt[be]=je.get("tessellate"),Qt[be]=je.get("altitudeMode"),ee=ee||void 0!==mt[be],Ee=Ee||void 0!==Lt[be],xe=xe||Qt[be]}ee&&Kt.set("extrude",mt),Ee&&Kt.set("tessellate",Lt),xe&&Kt.set("altitudeMode",Qt)}const ke=(0,s.C5)(K,{displayName:(0,s.Pr)(E.s2),value:(0,s.Pr)(E.s2)}),Mi=(0,s.C5)(K,{Data:function ni(Kt,ot){const dt=Kt.getAttribute("name");(0,s.T3)(ke,Kt,ot);const mt=ot[ot.length-1];dt&&mt.displayName?mt[dt]={value:mt.value,displayName:mt.displayName,toString:function(){return mt.value}}:null!==dt?mt[dt]=mt.value:null!==mt.displayName&&(mt[mt.displayName]=mt.value),delete mt.value},SchemaData:function yi(Kt,ot){(0,s.T3)(ci,Kt,ot)}});function gi(Kt,ot){(0,s.T3)(Mi,Kt,ot)}function pi(Kt,ot){(0,s.T3)(D,Kt,ot)}const xn=(0,s.C5)(K,{Style:(0,s.Pr)(Fe),key:(0,s.Pr)(E.s2),styleUrl:(0,s.Pr)(Q)}),ci=(0,s.C5)(K,{SimpleData:function _i(Kt,ot){const dt=Kt.getAttribute("name");if(null!==dt){const mt=(0,E.s2)(Kt);ot[ot.length-1][dt]=mt}}}),ri=(0,s.C5)(K,{altitudeMode:(0,s.Pr)(E.s2),minAltitude:(0,s.Pr)(E.fy),maxAltitude:(0,s.Pr)(E.fy),north:(0,s.Pr)(E.fy),south:(0,s.Pr)(E.fy),east:(0,s.Pr)(E.fy),west:(0,s.Pr)(E.fy)}),Pi=(0,s.C5)(K,{minLodPixels:(0,s.Pr)(E.fy),maxLodPixels:(0,s.Pr)(E.fy),minFadeExtent:(0,s.Pr)(E.fy),maxFadeExtent:(0,s.Pr)(E.fy)}),Ei=(0,s.C5)(K,{LinearRing:(0,s.Ei)(Ge)}),Xi=(0,s.C5)(K,{LinearRing:(0,s.z)(Ge)});function Vi(Kt,ot){const dt=(0,y._2)(ot),Lt=[255*(4==dt.length?dt[3]:1),dt[2],dt[1],dt[0]];for(let Qt=0;Qt<4;++Qt){const ee=Math.floor(Lt[Qt]).toString(16);Lt[Qt]=1==ee.length?"0"+ee:ee}(0,E.bZ)(Kt,Lt.join(""))}const Zi=(0,s.C5)(K,{Data:(0,s.A4)(function xi(Kt,ot,dt){Kt.setAttribute("name",ot.name);const mt={node:Kt},Lt=ot.value;"object"==typeof Lt?(null!==Lt&&Lt.displayName&&(0,s.ZL)(mt,Zi,s.hg,[Lt.displayName],dt,["displayName"]),null!==Lt&&Lt.value&&(0,s.ZL)(mt,Zi,s.hg,[Lt.value],dt,["value"])):(0,s.ZL)(mt,Zi,s.hg,[Lt],dt,["value"])}),value:(0,s.A4)(function hn(Kt,ot){(0,E.bZ)(Kt,ot)}),displayName:(0,s.A4)(function Ai(Kt,ot){(0,E.xO)(Kt,ot)})}),en=(0,s.C5)(K,{Placemark:(0,s.A4)(Hn)}),Gs=function(Kt,ot,dt){return(0,s.c)(ot[ot.length-1].node.namespaceURI,"Placemark")},cs=(0,s.G3)("Data"),Tn=(0,s.C5)(K,["href"],(0,s.C5)(N,["x","y","w","h"])),Pn=(0,s.C5)(K,{href:(0,s.A4)(E.bZ)},(0,s.C5)(N,{x:(0,s.A4)(E.f3),y:(0,s.A4)(E.f3),w:(0,s.A4)(E.f3),h:(0,s.A4)(E.f3)})),ds=function(Kt,ot,dt){return(0,s.c)(N[0],"gx:"+dt)},zs=(0,s.C5)(K,["scale","heading","Icon","color","hotSpot"]),Ui=(0,s.C5)(K,{Icon:(0,s.A4)(function Kn(Kt,ot,dt){const mt={node:Kt};let Qt=Tn[dt[dt.length-1].node.namespaceURI],ee=(0,s.RA)(ot,Qt);(0,s.ZL)(mt,Pn,s.hg,ee,dt,Qt),Qt=Tn[N[0]],ee=(0,s.RA)(ot,Qt),(0,s.ZL)(mt,Pn,ds,ee,dt,Qt)}),color:(0,s.A4)(Vi),heading:(0,s.A4)(E.f3),hotSpot:(0,s.A4)(function Vs(Kt,ot){Kt.setAttribute("x",String(ot.x)),Kt.setAttribute("y",String(ot.y)),Kt.setAttribute("xunits",ot.xunits),Kt.setAttribute("yunits",ot.yunits)}),scale:(0,s.A4)(Oi)}),un=(0,s.C5)(K,["color","scale"]),Xn=(0,s.C5)(K,{color:(0,s.A4)(Vi),scale:(0,s.A4)(Oi)}),Yi=(0,s.C5)(K,["color","width"]),fs=(0,s.C5)(K,{color:(0,s.A4)(Vi),width:(0,s.A4)(E.f3)}),Ji={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Rn=function(Kt,ot,dt){if(Kt)return(0,s.c)(ot[ot.length-1].node.namespaceURI,Ji[Kt.getType()])},gs=(0,s.G3)("Point"),Qi=(0,s.G3)("LineString"),Vn=(0,s.G3)("LinearRing"),_s=(0,s.G3)("Polygon"),$i=(0,s.C5)(K,{LineString:(0,s.A4)(qi),Point:(0,s.A4)(qi),Polygon:(0,s.A4)(On),GeometryCollection:(0,s.A4)(Ti)});function Ti(Kt,ot,dt){const mt={node:Kt},Lt=ot.getType();let ee,Qt=[];"GeometryCollection"===Lt?(ot.getGeometriesArrayRecursive().forEach(function(Ee){const xe=Ee.getType();"MultiPoint"===xe?Qt=Qt.concat(Ee.getPoints()):"MultiLineString"===xe?Qt=Qt.concat(Ee.getLineStrings()):"MultiPolygon"===xe?Qt=Qt.concat(Ee.getPolygons()):"Point"===xe||"LineString"===xe||"Polygon"===xe?Qt.push(Ee):(0,I.h)(!1,39)}),ee=Rn):"MultiPoint"===Lt?(Qt=ot.getPoints(),ee=gs):"MultiLineString"===Lt?(Qt=ot.getLineStrings(),ee=Qi):"MultiPolygon"===Lt?(Qt=ot.getPolygons(),ee=_s):(0,I.h)(!1,39),(0,s.ZL)(mt,$i,ee,Qt,dt)}const Ks=(0,s.C5)(K,{LinearRing:(0,s.A4)(qi)});function ms(Kt,ot,dt){(0,s.ZL)({node:Kt},Ks,Vn,[ot],dt)}const Yn=(0,s.C5)(K,{ExtendedData:(0,s.A4)(function zn(Kt,ot,dt){const mt={node:Kt},Lt=ot.names,Qt=ot.values,ee=Lt.length;for(let Ee=0;Ee<ee;Ee++)(0,s.ZL)(mt,Zi,cs,[{name:Lt[Ee],value:Qt[Ee]}],dt)}),MultiGeometry:(0,s.A4)(Ti),LineString:(0,s.A4)(qi),LinearRing:(0,s.A4)(qi),Point:(0,s.A4)(qi),Polygon:(0,s.A4)(On),Style:(0,s.A4)(function $n(Kt,ot,dt){const mt={node:Kt},Lt={};if(ot.pointStyles.length){const xe=ot.pointStyles[0].getText();xe&&(Lt.LabelStyle=xe);const be=ot.pointStyles[0].getImage();be&&"function"==typeof be.getSrc&&(Lt.IconStyle=be)}if(ot.lineStyles.length){const xe=ot.lineStyles[0].getStroke();xe&&(Lt.LineStyle=xe)}if(ot.polyStyles.length){const xe=ot.polyStyles[0].getStroke();xe&&!Lt.LineStyle&&(Lt.LineStyle=xe),Lt.PolyStyle=ot.polyStyles[0]}const ee=xs[dt[dt.length-1].node.namespaceURI],Ee=(0,s.RA)(Lt,ee);(0,s.ZL)(mt,Xs,s.hg,Ee,dt,ee)}),address:(0,s.A4)(E.bZ),description:(0,s.A4)(E.bZ),name:(0,s.A4)(E.bZ),open:(0,s.A4)(E.Vi),phoneNumber:(0,s.A4)(E.bZ),styleUrl:(0,s.A4)(E.bZ),visibility:(0,s.A4)(E.Vi)}),ps=(0,s.C5)(K,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),vs=(0,s.G3)("ExtendedData");function Hn(Kt,ot,dt){const mt={node:Kt};ot.getId()&&Kt.setAttribute("id",ot.getId());const Lt=ot.getProperties(),Qt={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};Qt[ot.getGeometryName()]=1;const ee=Object.keys(Lt||{}).sort().filter(function(li){return!Qt[li]}),Ee=ot.getStyleFunction();if(Ee){const li=Ee(ot,0);if(li){const ti=Array.isArray(li)?li:[li];let Bi=ti;if(ot.getGeometry()&&(Bi=ti.filter(function(ii){const mi=ii.getGeometryFunction()(ot);if(mi){const fi=mi.getType();return"GeometryCollection"===fi?mi.getGeometriesArrayRecursive().filter(function(bi){const hi=bi.getType();return"Point"===hi||"MultiPoint"===hi}).length:"Point"===fi||"MultiPoint"===fi}})),this.writeStyles_){let ii=ti,mi=ti;ot.getGeometry()&&(ii=ti.filter(function(fi){const bi=fi.getGeometryFunction()(ot);if(bi){const hi=bi.getType();return"GeometryCollection"===hi?bi.getGeometriesArrayRecursive().filter(function(cn){const zi=cn.getType();return"LineString"===zi||"MultiLineString"===zi}).length:"LineString"===hi||"MultiLineString"===hi}}),mi=ti.filter(function(fi){const bi=fi.getGeometryFunction()(ot);if(bi){const hi=bi.getType();return"GeometryCollection"===hi?bi.getGeometriesArrayRecursive().filter(function(cn){const zi=cn.getType();return"Polygon"===zi||"MultiPolygon"===zi}).length:"Polygon"===hi||"MultiPolygon"===hi}})),Lt.Style={pointStyles:Bi,lineStyles:ii,polyStyles:mi}}if(Bi.length&&void 0===Lt.name){const ii=Bi[0].getText();ii&&(Lt.name=ii.getText())}}}const be=ps[dt[dt.length-1].node.namespaceURI],je=(0,s.RA)(Lt,be);if((0,s.ZL)(mt,Yn,s.hg,je,dt,be),ee.length>0){const li=(0,s.RA)(Lt,ee);(0,s.ZL)(mt,Yn,vs,[{names:ee,values:li}],dt)}const $e=dt[0];let Ye=ot.getGeometry();Ye&&(Ye=(0,e.fI)(Ye,!0,$e)),(0,s.ZL)(mt,Yn,Rn,[Ye],dt)}const Jn=(0,s.C5)(K,["extrude","tessellate","altitudeMode","coordinates"]),ji=(0,s.C5)(K,{extrude:(0,s.A4)(E.Vi),tessellate:(0,s.A4)(E.Vi),altitudeMode:(0,s.A4)(E.bZ),coordinates:(0,s.A4)(function us(Kt,ot,dt){const mt=dt[dt.length-1],Lt=mt.layout,Qt=mt.stride;let ee;"XY"==Lt||"XYM"==Lt?ee=2:"XYZ"==Lt||"XYZM"==Lt?ee=3:(0,I.h)(!1,34);const Ee=ot.length;let xe="";if(Ee>0){xe+=ot[0];for(let be=1;be<ee;++be)xe+=","+ot[be];for(let be=Qt;be<Ee;be+=Qt){xe+=" "+ot[be];for(let je=1;je<ee;++je)xe+=","+ot[be+je]}}(0,E.bZ)(Kt,xe)})});function qi(Kt,ot,dt){const mt=ot.getFlatCoordinates(),Lt={node:Kt};Lt.layout=ot.getLayout(),Lt.stride=ot.getStride();const Qt=ot.getProperties();Qt.coordinates=mt;const Ee=Jn[dt[dt.length-1].node.namespaceURI],xe=(0,s.RA)(Qt,Ee);(0,s.ZL)(Lt,ji,s.hg,xe,dt,Ee)}const ys=(0,s.C5)(K,["color","fill","outline"]),Es=(0,s.C5)(K,{outerBoundaryIs:(0,s.A4)(ms),innerBoundaryIs:(0,s.A4)(ms)}),ks=(0,s.G3)("innerBoundaryIs"),Qn=(0,s.G3)("outerBoundaryIs");function On(Kt,ot,dt){const mt=ot.getLinearRings(),Lt=mt.shift(),Qt={node:Kt};(0,s.ZL)(Qt,Es,ks,mt,dt),(0,s.ZL)(Qt,Es,Qn,[Lt],dt)}const nn=(0,s.C5)(K,{color:(0,s.A4)(Vi),fill:(0,s.A4)(E.Vi),outline:(0,s.A4)(E.Vi)});function Oi(Kt,ot){(0,E.f3)(Kt,Math.round(1e6*ot)/1e6)}const xs=(0,s.C5)(K,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Xs=(0,s.C5)(K,{IconStyle:(0,s.A4)(function kn(Kt,ot,dt){const mt={node:Kt},Lt={},Qt=ot.getSrc(),ee=ot.getSize(),Ee=ot.getImageSize(),xe={href:Qt};if(ee){xe.w=ee[0],xe.h=ee[1];const ii=ot.getAnchor(),mi=ot.getOrigin();mi&&Ee&&0!==mi[0]&&mi[1]!==ee[1]&&(xe.x=mi[0],xe.y=Ee[1]-(mi[1]+ee[1])),!ii||ii[0]===ee[0]/2&&ii[1]===ee[1]/2||(Lt.hotSpot={x:ii[0],xunits:"pixels",y:ee[1]-ii[1],yunits:"pixels"})}Lt.Icon=xe;let be=ot.getScaleArray()[0],je=ee;null===je&&(je=At),2==je.length&&(be/=Yt(je)),1!==be&&(Lt.scale=be);const $e=ot.getRotation();0!==$e&&(Lt.heading=$e);const Ye=ot.getColor();Ye&&(Lt.color=Ye);const ti=zs[dt[dt.length-1].node.namespaceURI],Bi=(0,s.RA)(Lt,ti);(0,s.ZL)(mt,Ui,s.hg,Bi,dt,ti)}),LabelStyle:(0,s.A4)(function Cn(Kt,ot,dt){const mt={node:Kt},Lt={},Qt=ot.getFill();Qt&&(Lt.color=Qt.getColor());const ee=ot.getScale();ee&&1!==ee&&(Lt.scale=ee);const xe=un[dt[dt.length-1].node.namespaceURI],be=(0,s.RA)(Lt,xe);(0,s.ZL)(mt,Xn,s.hg,be,dt,xe)}),LineStyle:(0,s.A4)(function Hi(Kt,ot,dt){const mt={node:Kt},Lt={color:ot.getColor(),width:Number(ot.getWidth())||1},ee=Yi[dt[dt.length-1].node.namespaceURI],Ee=(0,s.RA)(Lt,ee);(0,s.ZL)(mt,fs,s.hg,Ee,dt,ee)}),PolyStyle:(0,s.A4)(function Sn(Kt,ot,dt){const mt={node:Kt},Lt=ot.getFill(),Qt=ot.getStroke(),ee={color:Lt?Lt.getColor():void 0,fill:!!Lt&&void 0,outline:!!Qt&&void 0},xe=ys[dt[dt.length-1].node.namespaceURI],be=(0,s.RA)(ee,xe);(0,s.ZL)(mt,nn,s.hg,be,dt,xe)})}),Ys=class Wt extends _{constructor(ot){super(),ot=ot||{},Vt||function gt(){V=[255,255,255,1],at=new F.Z({color:V}),Pt=[20,2],vt="pixels",Ot="pixels",At=[64,64],Gt="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",zt=new G.Z({anchor:Pt,anchorOrigin:"bottom-left",anchorXUnits:vt,anchorYUnits:Ot,crossOrigin:"anonymous",rotation:0,scale:Yt(At),size:At,src:Gt}),Xt="NO_IMAGE",fe=new c.Z({color:V,width:1}),ce=new c.Z({color:[51,51,51,1],width:2}),Ce=new d.Z({font:"bold 16px Helvetica",fill:at,stroke:ce,scale:.8}),Ct=new r.ZP({fill:at,image:zt,text:Ce,stroke:fe,zIndex:0}),Vt=[Ct]}(),this.dataProjection=(0,O.U2)("EPSG:4326"),this.defaultStyle_=ot.defaultStyle?ot.defaultStyle:Vt,this.extractStyles_=void 0===ot.extractStyles||ot.extractStyles,this.writeStyles_=void 0===ot.writeStyles||ot.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===ot.showPointNames||ot.showPointNames,this.crossOrigin_=void 0!==ot.crossOrigin?ot.crossOrigin:"anonymous",this.iconUrlFunction_=ot.iconUrlFunction?ot.iconUrlFunction:Ft,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(ot,dt){const mt=(0,s.C5)(K,{Document:(0,s.pc)(this.readDocumentOrFolder_,this),Folder:(0,s.pc)(this.readDocumentOrFolder_,this),Placemark:(0,s.Ei)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),Lt=(0,s.O)([],mt,ot,dt,this);if(Lt)return Lt}readPlacemark_(ot,dt){const mt=(0,s.O)({geometry:null},L,ot,dt,this);if(!mt)return;const Lt=new z.Z,Qt=ot.getAttribute("id");null!==Qt&&Lt.setId(Qt);const Ee=mt.geometry;if(Ee&&(0,e.fI)(Ee,!1,dt[0]),Lt.setGeometry(Ee),delete mt.geometry,this.extractStyles_){const je=function ue(Kt,ot,dt,mt,Lt){return function(Qt,ee){let Ee=Lt,xe="",be=[];if(Ee){const $e=Qt.getGeometry();if($e)if($e instanceof k.Z)be=$e.getGeometriesArrayRecursive().filter(function(Ye){const li=Ye.getType();return"Point"===li||"MultiPoint"===li}),Ee=be.length>0;else{const Ye=$e.getType();Ee="Point"===Ye||"MultiPoint"===Ye}}Ee&&(xe=Qt.get("name"),Ee=Ee&&!!xe,Ee&&/&[^&]+;/.test(xe)&&(xt||(xt=document.createElement("textarea")),xt.innerHTML=xe,xe=xt.value));let je=dt;if(Kt?je=Kt:ot&&(je=ge(ot,dt,mt)),Ee){const $e=function Bt(Kt,ot){const dt=[0,0];let mt="start";const Lt=Kt.getImage();if(Lt){const Ee=Lt.getSize();if(Ee&&2==Ee.length){const xe=Lt.getScaleArray(),be=Lt.getAnchor();dt[0]=xe[0]*(Ee[0]-be[0]),dt[1]=xe[1]*(Ee[1]/2-be[1]),mt="left"}}let Qt=Kt.getText();return Qt?(Qt=Qt.clone(),Qt.setFont(Qt.getFont()||Ce.getFont()),Qt.setScale(Qt.getScale()||Ce.getScale()),Qt.setFill(Qt.getFill()||Ce.getFill()),Qt.setStroke(Qt.getStroke()||ce)):Qt=Ce.clone(),Qt.setText(ot),Qt.setOffsetX(dt[0]),Qt.setOffsetY(dt[1]),Qt.setTextAlign(mt),new r.ZP({image:Lt,text:Qt})}(je[0],xe);return be.length>0?($e.setGeometry(new k.Z(be)),[$e,new r.ZP({geometry:je[0].getGeometry(),image:null,fill:je[0].getFill(),stroke:je[0].getStroke(),text:null})].concat(je.slice(1))):$e}return je}}(mt.Style,mt.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);Lt.setStyle(je)}return delete mt.Style,Lt.setProperties(mt,!0),Lt}readSharedStyle_(ot,dt){const mt=ot.getAttribute("id");if(null!==mt){const Lt=Fe.call(this,ot,dt);if(Lt){let Qt,ee=ot.baseURI;(!ee||"about:blank"==ee)&&(ee=window.location.href),Qt=ee?new URL("#"+mt,ee).href:"#"+mt,this.sharedStyles_[Qt]=Lt}}}readSharedStyleMap_(ot,dt){const mt=ot.getAttribute("id");if(null===mt)return;const Lt=et.call(this,ot,dt);if(!Lt)return;let Qt,ee=ot.baseURI;(!ee||"about:blank"==ee)&&(ee=window.location.href),Qt=ee?new URL("#"+mt,ee).href:"#"+mt,this.sharedStyles_[Qt]=Lt}readFeatureFromNode(ot,dt){return K.includes(ot.namespaceURI)&&this.readPlacemark_(ot,[this.getReadOptions(ot,dt)])||null}readFeaturesFromNode(ot,dt){if(!K.includes(ot.namespaceURI))return[];let mt;const Lt=ot.localName;if("Document"==Lt||"Folder"==Lt)return mt=this.readDocumentOrFolder_(ot,[this.getReadOptions(ot,dt)]),mt||[];if("Placemark"==Lt){const Qt=this.readPlacemark_(ot,[this.getReadOptions(ot,dt)]);return Qt?[Qt]:[]}if("kml"==Lt){mt=[];for(let Qt=ot.firstElementChild;Qt;Qt=Qt.nextElementSibling){const ee=this.readFeaturesFromNode(Qt,dt);ee&&(0,m.l7)(mt,ee)}return mt}return[]}readName(ot){if(ot){if("string"==typeof ot){const dt=(0,s.Qc)(ot);return this.readNameFromDocument(dt)}return(0,s.qk)(ot)?this.readNameFromDocument(ot):this.readNameFromNode(ot)}}readNameFromDocument(ot){for(let dt=ot.firstChild;dt;dt=dt.nextSibling)if(dt.nodeType==Node.ELEMENT_NODE){const mt=this.readNameFromNode(dt);if(mt)return mt}}readNameFromNode(ot){for(let dt=ot.firstElementChild;dt;dt=dt.nextElementSibling)if(K.includes(dt.namespaceURI)&&"name"==dt.localName)return(0,E.s2)(dt);for(let dt=ot.firstElementChild;dt;dt=dt.nextElementSibling){const mt=dt.localName;if(K.includes(dt.namespaceURI)&&("Document"==mt||"Folder"==mt||"Placemark"==mt||"kml"==mt)){const Lt=this.readNameFromNode(dt);if(Lt)return Lt}}}readNetworkLinks(ot){const dt=[];if("string"==typeof ot){const mt=(0,s.Qc)(ot);(0,m.l7)(dt,this.readNetworkLinksFromDocument(mt))}else(0,s.qk)(ot)?(0,m.l7)(dt,this.readNetworkLinksFromDocument(ot)):(0,m.l7)(dt,this.readNetworkLinksFromNode(ot));return dt}readNetworkLinksFromDocument(ot){const dt=[];for(let mt=ot.firstChild;mt;mt=mt.nextSibling)mt.nodeType==Node.ELEMENT_NODE&&(0,m.l7)(dt,this.readNetworkLinksFromNode(mt));return dt}readNetworkLinksFromNode(ot){const dt=[];for(let mt=ot.firstElementChild;mt;mt=mt.nextElementSibling)if(K.includes(mt.namespaceURI)&&"NetworkLink"==mt.localName){const Lt=(0,s.O)({},w,mt,[]);dt.push(Lt)}for(let mt=ot.firstElementChild;mt;mt=mt.nextElementSibling){const Lt=mt.localName;K.includes(mt.namespaceURI)&&("Document"==Lt||"Folder"==Lt||"kml"==Lt)&&(0,m.l7)(dt,this.readNetworkLinksFromNode(mt))}return dt}readRegion(ot){const dt=[];if("string"==typeof ot){const mt=(0,s.Qc)(ot);(0,m.l7)(dt,this.readRegionFromDocument(mt))}else(0,s.qk)(ot)?(0,m.l7)(dt,this.readRegionFromDocument(ot)):(0,m.l7)(dt,this.readRegionFromNode(ot));return dt}readRegionFromDocument(ot){const dt=[];for(let mt=ot.firstChild;mt;mt=mt.nextSibling)mt.nodeType==Node.ELEMENT_NODE&&(0,m.l7)(dt,this.readRegionFromNode(mt));return dt}readRegionFromNode(ot){const dt=[];for(let mt=ot.firstElementChild;mt;mt=mt.nextElementSibling)if(K.includes(mt.namespaceURI)&&"Region"==mt.localName){const Lt=(0,s.O)({},D,mt,[]);dt.push(Lt)}for(let mt=ot.firstElementChild;mt;mt=mt.nextElementSibling){const Lt=mt.localName;K.includes(mt.namespaceURI)&&("Document"==Lt||"Folder"==Lt||"kml"==Lt)&&(0,m.l7)(dt,this.readRegionFromNode(mt))}return dt}readCamera(ot){const dt=[];if("string"==typeof ot){const mt=(0,s.Qc)(ot);(0,m.l7)(dt,this.readCameraFromDocument(mt))}else(0,s.qk)(ot)?(0,m.l7)(dt,this.readCameraFromDocument(ot)):(0,m.l7)(dt,this.readCameraFromNode(ot));return dt}readCameraFromDocument(ot){const dt=[];for(let mt=ot.firstChild;mt;mt=mt.nextSibling)mt.nodeType===Node.ELEMENT_NODE&&(0,m.l7)(dt,this.readCameraFromNode(mt));return dt}readCameraFromNode(ot){const dt=[];for(let mt=ot.firstElementChild;mt;mt=mt.nextElementSibling)if(K.includes(mt.namespaceURI)&&"Camera"===mt.localName){const Lt=(0,s.O)({},C,mt,[]);dt.push(Lt)}for(let mt=ot.firstElementChild;mt;mt=mt.nextElementSibling){const Lt=mt.localName;K.includes(mt.namespaceURI)&&("Document"===Lt||"Folder"===Lt||"Placemark"===Lt||"kml"===Lt)&&(0,m.l7)(dt,this.readCameraFromNode(mt))}return dt}writeFeaturesNode(ot,dt){dt=this.adaptOptions(dt);const mt=(0,s.c)(K[4],"kml"),Lt="http://www.w3.org/2000/xmlns/";mt.setAttributeNS(Lt,"xmlns:gx",N[0]),mt.setAttributeNS(Lt,"xmlns:xsi",s.fJ),mt.setAttributeNS(s.fJ,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");const Qt={node:mt},ee={};ot.length>1?ee.Document=ot:1==ot.length&&(ee.Placemark=ot[0]);const Ee=Y[mt.namespaceURI],xe=(0,s.RA)(ee,Ee);return(0,s.ZL)(Qt,st,s.hg,xe,[dt],Ee,this),mt}}},3053:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>_});var z=a(8387),F=a(5934),k=a(1684),G=a(1506),Z=a(2973),A=a(1492),S=a(8382),P=a(3435),v=a(8340),f=a(6198),u=a(9219),c=a(7021),r=a(3093);function e(y,I,O){if(3===y){const E={keys:[],values:[],features:[]},R=O.readVarint()+O.pos;O.readFields(l,E,R),E.length=E.features.length,E.length&&(I[E.name]=E)}}function l(y,I,O){if(15===y)I.version=O.readVarint();else if(1===y)I.name=O.readString();else if(5===y)I.extent=O.readVarint();else if(2===y)I.features.push(O.pos);else if(3===y)I.keys.push(O.readString());else if(4===y){let E=null;const R=O.readVarint()+O.pos;for(;O.pos<R;)E=1==(y=O.readVarint()>>3)?O.readString():2===y?O.readFloat():3===y?O.readDouble():4===y?O.readVarint64():5===y?O.readVarint():6===y?O.readSVarint():7===y?O.readBoolean():null;I.values.push(E)}}function m(y,I,O){if(1==y)I.id=O.readVarint();else if(2==y){const E=O.readVarint()+O.pos;for(;O.pos<E;){const R=I.layer.keys[O.readVarint()],N=I.layer.values[O.readVarint()];I.properties[R]=N}}else 3==y?I.type=O.readVarint():4==y&&(I.geometry=O.pos)}function s(y,I,O){y.pos=I.features[O];const E=y.readVarint()+y.pos,R={layer:I,type:0,properties:{}};return y.readFields(m,R,E),R}const _=class d extends z.ZP{constructor(I){super(),I=I||{},this.dataProjection=new v.Z({code:"",units:"tile-pixels"}),this.featureClass_=I.featureClass?I.featureClass:f.ZP,this.geometryName_=I.geometryName,this.layerName_=I.layerName?I.layerName:"layer",this.layers_=I.layers?I.layers:null,this.idProperty_=I.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(I,O,E,R){I.pos=O.geometry;const N=I.readVarint()+I.pos;let K=1,rt=0,b=0,L=0,w=0,M=0;for(;I.pos<N;){if(!rt){const C=I.readVarint();K=7&C,rt=C>>3}rt--,1===K||2===K?(b+=I.readSVarint(),L+=I.readSVarint(),1===K&&w>M&&(R.push(w),M=w),E.push(b,L),w+=2):7===K?w>M&&(E.push(E[M],E[M+1]),w+=2):(0,u.h)(!1,59)}w>M&&(R.push(w),M=w)}createFeature_(I,O,E){const R=O.type;if(0===R)return null;let N;const K=O.properties;let rt;this.idProperty_?(rt=K[this.idProperty_],delete K[this.idProperty_]):rt=O.id,K[this.layerName_]=O.layer.name;const b=[],L=[];this.readRawGeometry_(I,O,b,L);const w=function g(y,I){let O;return 1===y?O=1===I?"Point":"MultiPoint":2===y?O=1===I?"LineString":"MultiLineString":3===y&&(O="Polygon"),O}(R,L.length);if(this.featureClass_===f.ZP)N=new this.featureClass_(w,b,L,K,rt),N.transform(E.dataProjection);else{let M;if("Polygon"==w){const Y=(0,r.Q3)(b,L);M=Y.length>1?new Z.Z(b,"XY",Y):new P.ZP(b,"XY",L)}else M="Point"===w?new S.Z(b,"XY"):"LineString"===w?new F.Z(b,"XY"):"MultiPoint"===w?new G.Z(b,"XY"):"MultiLineString"===w?new k.Z(b,"XY",L):null;N=new(0,this.featureClass_),this.geometryName_&&N.setGeometryName(this.geometryName_);const D=(0,z.fI)(M,!1,E);N.setGeometry(D),void 0!==rt&&N.setId(rt),N.setProperties(K,!0)}return N}getType(){return"arraybuffer"}readFeatures(I,O){const E=this.layers_;O=this.adaptOptions(O);const R=(0,c.U2)(O.dataProjection);R.setWorldExtent(O.extent),O.dataProjection=R;const N=new A(I),K=N.readFields(e,{}),rt=[];for(const b in K){if(E&&!E.includes(b))continue;const L=K[b];R.setExtent(L?[0,0,L.extent,L.extent]:null);for(let M=0,C=L.length;M<C;++M){const D=s(N,L,M),Y=this.createFeature_(N,D,O);null!==Y&&rt.push(Y)}}return rt}readProjection(I){return this.dataProjection}setLayers(I){this.layers_=I}}},1005:(jt,ht,a)=>{"use strict";a.d(ht,{$L:()=>S,Vi:()=>f,_E:()=>P,bZ:()=>e,ej:()=>A,f3:()=>r,fy:()=>Z,s2:()=>v,ud:()=>F,v$:()=>k,xO:()=>u});var z=a(2659);function F(l){return k((0,z.Ve)(l,!1))}function k(l){const m=/^\s*(true|1)|(false|0)\s*$/.exec(l);if(m)return void 0!==m[1]||!1}function Z(l){return A((0,z.Ve)(l,!1))}function A(l){const m=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(l);if(m)return parseFloat(m[1])}function S(l){return P((0,z.Ve)(l,!1))}function P(l){const m=/^\s*(\d+)\s*$/.exec(l);if(m)return parseInt(m[1],10)}function v(l){return(0,z.Ve)(l,!1).trim()}function f(l,m){e(l,m?"1":"0")}function u(l,m){l.appendChild((0,z.Me)().createCDATASection(m))}function r(l,m){const s=m.toPrecision();l.appendChild((0,z.Me)().createTextNode(s))}function e(l,m){l.appendChild((0,z.Me)().createTextNode(m))}},6077:(jt,ht,a)=>{"use strict";a.d(ht,{Dv:()=>k,Zn:()=>G,qe:()=>Z,uX:()=>F});var z=a(9363);function F(){return!0}function k(){return!1}function G(){}function Z(S){let v,f,u,P=!1;return function(){const c=Array.prototype.slice.call(arguments);return(!P||this!==u||!(0,z.fS)(c,f))&&(P=!0,u=this,f=c,v=S.apply(this,arguments)),v}}},6788:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>f});var z=a(7300),F=a(3089),k=a(6412),G=a(1316),Z=a(7021),A=a(6077),S=a(342);const P=(0,k.Ue)(),f=class v extends z.Z{constructor(){super(),this.extent_=(0,G.lJ)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,A.qe)(function(c,r,d){if(!d)return this.getSimplifiedGeometry(r);const e=this.clone();return e.applyTransform(d),e.getSimplifiedGeometry(r)})}simplifyTransformed(c,r){return this.simplifyTransformedInternal(this.getRevision(),c,r)}clone(){return(0,F.O3)()}closestPointXY(c,r,d,e){return(0,F.O3)()}containsXY(c,r){const d=this.getClosestPoint([c,r]);return d[0]===c&&d[1]===r}getClosestPoint(c,r){return this.closestPointXY(c[0],c[1],r=r||[NaN,NaN],1/0),r}intersectsCoordinate(c){return this.containsXY(c[0],c[1])}computeExtent(c){return(0,F.O3)()}getExtent(c){if(this.extentRevision_!=this.getRevision()){const r=this.computeExtent(this.extent_);(isNaN(r[0])||isNaN(r[1]))&&(0,G.YN)(r),this.extentRevision_=this.getRevision()}return(0,G.EO)(this.extent_,c)}rotate(c,r){(0,F.O3)()}scale(c,r,d){(0,F.O3)()}simplify(c){return this.getSimplifiedGeometry(c*c)}getSimplifiedGeometry(c){return(0,F.O3)()}getType(){return(0,F.O3)()}applyTransform(c){(0,F.O3)()}intersectsExtent(c){return(0,F.O3)()}translate(c,r){(0,F.O3)()}transform(c,r){const d=(0,Z.U2)(c),e="tile-pixels"==d.getUnits()?function(l,m,s){const g=d.getExtent(),_=d.getWorldExtent(),y=(0,G.Cr)(_)/(0,G.Cr)(g);return(0,k.qC)(P,_[0],_[3],y,-y,0,0,0),(0,S.vT)(l,0,l.length,s,P,m),(0,Z.Ck)(d,r)(l,m,s)}:(0,Z.Ck)(d,r);return this.applyTransform(e),this}}},3007:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var z=a(2431),F=a(6788),k=a(1316),G=a(7847);class Z extends F.Z{constructor(v){super(),this.geometries_=v||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(G.bN),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let v=0,f=this.geometries_.length;v<f;++v)this.changeEventsKeys_.push((0,G.oL)(this.geometries_[v],z.Z.CHANGE,this.changed,this))}clone(){const v=new Z(null);return v.setGeometries(this.geometries_),v.applyProperties(this),v}closestPointXY(v,f,u,c){if(c<(0,k.qf)(this.getExtent(),v,f))return c;const r=this.geometries_;for(let d=0,e=r.length;d<e;++d)c=r[d].closestPointXY(v,f,u,c);return c}containsXY(v,f){const u=this.geometries_;for(let c=0,r=u.length;c<r;++c)if(u[c].containsXY(v,f))return!0;return!1}computeExtent(v){(0,k.YN)(v);const f=this.geometries_;for(let u=0,c=f.length;u<c;++u)(0,k.l7)(v,f[u].getExtent());return v}getGeometries(){return A(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let v=[];const f=this.geometries_;for(let u=0,c=f.length;u<c;++u)f[u].getType()===this.getType()?v=v.concat(f[u].getGeometriesArrayRecursive()):v.push(f[u]);return v}getSimplifiedGeometry(v){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),v<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&v<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const f=[],u=this.geometries_;let c=!1;for(let r=0,d=u.length;r<d;++r){const e=u[r],l=e.getSimplifiedGeometry(v);f.push(l),l!==e&&(c=!0)}if(c){const r=new Z(null);return r.setGeometriesArray(f),r}return this.simplifiedGeometryMaxMinSquaredTolerance=v,this}getType(){return"GeometryCollection"}intersectsExtent(v){const f=this.geometries_;for(let u=0,c=f.length;u<c;++u)if(f[u].intersectsExtent(v))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(v,f){const u=this.geometries_;for(let c=0,r=u.length;c<r;++c)u[c].rotate(v,f);this.changed()}scale(v,f,u){u||(u=(0,k.qg)(this.getExtent()));const c=this.geometries_;for(let r=0,d=c.length;r<d;++r)c[r].scale(v,f,u);this.changed()}setGeometries(v){this.setGeometriesArray(A(v))}setGeometriesArray(v){this.unlistenGeometriesChange_(),this.geometries_=v,this.listenGeometriesChange_(),this.changed()}applyTransform(v){const f=this.geometries_;for(let u=0,c=f.length;u<c;++u)f[u].applyTransform(v);this.changed()}translate(v,f){const u=this.geometries_;for(let c=0,r=u.length;c<r;++c)u[c].translate(v,f);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function A(P){const v=[];for(let f=0,u=P.length;f<u;++f)v.push(P[f].clone());return v}const S=Z},5934:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r});var z=a(1245),F=a(7631),k=a(1316),G=a(4212),Z=a(7904),A=a(9363),S=a(2302),P=a(2754),v=a(6735),f=a(4505),u=a(2460);class c extends z.ZP{constructor(e,l){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===l||Array.isArray(e[0])?this.setCoordinates(e,l):this.setFlatCoordinates(l,e)}appendCoordinate(e){this.flatCoordinates?(0,A.l7)(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}clone(){const e=new c(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,l,m,s){return s<(0,k.qf)(this.getExtent(),e,l)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,F.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,F.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,l,m,s))}forEachSegment(e){return(0,S.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,l){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(0,v.iJ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,l=void 0!==l&&l)}getCoordinates(){return(0,P.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,l){return(0,v.WW)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,l,this.stride)}getLength(){return(0,u.W)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const l=[];return l.length=(0,Z.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,l,0),new c(l,"XY")}getType(){return"LineString"}intersectsExtent(e){return(0,f.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,l){this.setLayout(l,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,G.Sg)(this.flatCoordinates,0,e,this.stride),this.changed()}}const r=c},1684:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>c});var z=a(5934),F=a(1245),k=a(7631),G=a(1316),Z=a(4212),A=a(7904),S=a(9363),P=a(2754),v=a(6735),f=a(4505);class u extends F.ZP{constructor(d,e,l){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(d[0]))this.setCoordinates(d,e);else if(void 0!==e&&l)this.setFlatCoordinates(e,d),this.ends_=l;else{let m=this.getLayout();const s=d,g=[],_=[];for(let y=0,I=s.length;y<I;++y){const O=s[y];0===y&&(m=O.getLayout()),(0,S.l7)(g,O.getFlatCoordinates()),_.push(g.length)}this.setFlatCoordinates(m,g),this.ends_=_}}appendLineString(d){this.flatCoordinates?(0,S.l7)(this.flatCoordinates,d.getFlatCoordinates().slice()):this.flatCoordinates=d.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const d=new u(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return d.applyProperties(this),d}closestPointXY(d,e,l,m){return m<(0,G.qf)(this.getExtent(),d,e)?m:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,k.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,k.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,d,e,l,m))}getCoordinateAtM(d,e,l){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(0,v.dG)(this.flatCoordinates,0,this.ends_,this.stride,d,e=void 0!==e&&e,l=void 0!==l&&l)}getCoordinates(){return(0,P.o1)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(d){return d<0||this.ends_.length<=d?null:new z.Z(this.flatCoordinates.slice(0===d?0:this.ends_[d-1],this.ends_[d]),this.layout)}getLineStrings(){const d=this.flatCoordinates,e=this.ends_,l=this.layout,m=[];let s=0;for(let g=0,_=e.length;g<_;++g){const y=e[g],I=new z.Z(d.slice(s,y),l);m.push(I),s=y}return m}getFlatMidpoints(){const d=[],e=this.flatCoordinates;let l=0;const m=this.ends_,s=this.stride;for(let g=0,_=m.length;g<_;++g){const y=m[g],I=(0,v.WW)(e,l,y,s,.5);(0,S.l7)(d,I),l=y}return d}getSimplifiedGeometryInternal(d){const e=[],l=[];return e.length=(0,A.UJ)(this.flatCoordinates,0,this.ends_,this.stride,d,e,0,l),new u(e,"XY",l)}getType(){return"MultiLineString"}intersectsExtent(d){return(0,f.AW)(this.flatCoordinates,0,this.ends_,this.stride,d)}setCoordinates(d,e){this.setLayout(e,d,2),this.flatCoordinates||(this.flatCoordinates=[]);const l=(0,Z._5)(this.flatCoordinates,0,d,this.stride,this.ends_);this.flatCoordinates.length=0===l.length?0:l[l.length-1],this.changed()}}const c=u},1506:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>v});var z=a(8382),F=a(1245),k=a(1316),G=a(4212),Z=a(9363),A=a(2754),S=a(3026);class P extends F.ZP{constructor(u,c){super(),c&&!Array.isArray(u[0])?this.setFlatCoordinates(c,u):this.setCoordinates(u,c)}appendPoint(u){this.flatCoordinates?(0,Z.l7)(this.flatCoordinates,u.getFlatCoordinates()):this.flatCoordinates=u.getFlatCoordinates().slice(),this.changed()}clone(){const u=new P(this.flatCoordinates.slice(),this.layout);return u.applyProperties(this),u}closestPointXY(u,c,r,d){if(d<(0,k.qf)(this.getExtent(),u,c))return d;const e=this.flatCoordinates,l=this.stride;for(let m=0,s=e.length;m<s;m+=l){const g=(0,S.bI)(u,c,e[m],e[m+1]);if(g<d){d=g;for(let _=0;_<l;++_)r[_]=e[m+_];r.length=l}}return d}getCoordinates(){return(0,A.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(u){return u<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=u?null:new z.Z(this.flatCoordinates.slice(u*this.stride,(u+1)*this.stride),this.layout)}getPoints(){const u=this.flatCoordinates,c=this.layout,r=this.stride,d=[];for(let e=0,l=u.length;e<l;e+=r){const m=new z.Z(u.slice(e,e+r),c);d.push(m)}return d}getType(){return"MultiPoint"}intersectsExtent(u){const c=this.flatCoordinates,r=this.stride;for(let d=0,e=c.length;d<e;d+=r)if((0,k.jE)(u,c[d],c[d+1]))return!0;return!1}setCoordinates(u,c){this.setLayout(c,u,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,G.Sg)(this.flatCoordinates,0,u,this.stride),this.changed()}}const v=P},2973:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>m});var z=a(1506),F=a(3435),k=a(1245),G=a(7631),Z=a(1316),A=a(4212),S=a(9363),P=a(6937),v=a(2754),f=a(4505),u=a(3093),c=a(2645),r=a(1758),d=a(712),e=a(7904);class l extends k.ZP{constructor(g,_,y){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!y&&!Array.isArray(g[0])){let I=this.getLayout();const O=g,E=[],R=[];for(let N=0,K=O.length;N<K;++N){const rt=O[N];0===N&&(I=rt.getLayout());const b=E.length,L=rt.getEnds();for(let w=0,M=L.length;w<M;++w)L[w]+=b;(0,S.l7)(E,rt.getFlatCoordinates()),R.push(L)}_=I,g=E,y=R}void 0!==_&&y?(this.setFlatCoordinates(_,g),this.endss_=y):this.setCoordinates(g,_)}appendPolygon(g){let _;if(this.flatCoordinates){const y=this.flatCoordinates.length;(0,S.l7)(this.flatCoordinates,g.getFlatCoordinates()),_=g.getEnds().slice();for(let I=0,O=_.length;I<O;++I)_[I]+=y}else this.flatCoordinates=g.getFlatCoordinates().slice(),_=g.getEnds().slice(),this.endss_.push();this.endss_.push(_),this.changed()}clone(){const g=this.endss_.length,_=new Array(g);for(let I=0;I<g;++I)_[I]=this.endss_[I].slice();const y=new l(this.flatCoordinates.slice(),this.layout,_);return y.applyProperties(this),y}closestPointXY(g,_,y,I){return I<(0,Z.qf)(this.getExtent(),g,_)?I:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,G.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,G.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,g,_,y,I))}containsXY(g,_){return(0,d.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,g,_)}getArea(){return(0,c.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(g){let _;return void 0!==g?(_=this.getOrientedFlatCoordinates().slice(),(0,u.dL)(_,0,this.endss_,this.stride,g)):_=this.flatCoordinates,(0,v.ug)(_,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const g=(0,r.E)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,P.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,g),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new z.Z(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const g=this.flatCoordinates;(0,u.Oj)(g,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=g:(this.orientedFlatCoordinates_=g.slice(),this.orientedFlatCoordinates_.length=(0,u.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(g){const _=[],y=[];return _.length=(0,e.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(g),_,0,y),new l(_,"XY",y)}getPolygon(g){if(g<0||this.endss_.length<=g)return null;let _;if(0===g)_=0;else{const O=this.endss_[g-1];_=O[O.length-1]}const y=this.endss_[g].slice(),I=y[y.length-1];if(0!==_)for(let O=0,E=y.length;O<E;++O)y[O]-=_;return new F.ZP(this.flatCoordinates.slice(_,I),this.layout,y)}getPolygons(){const g=this.layout,_=this.flatCoordinates,y=this.endss_,I=[];let O=0;for(let E=0,R=y.length;E<R;++E){const N=y[E].slice(),K=N[N.length-1];if(0!==O)for(let b=0,L=N.length;b<L;++b)N[b]-=O;const rt=new F.ZP(_.slice(O,K),g,N);I.push(rt),O=K}return I}getType(){return"MultiPolygon"}intersectsExtent(g){return(0,f.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,g)}setCoordinates(g,_){this.setLayout(_,g,3),this.flatCoordinates||(this.flatCoordinates=[]);const y=(0,A.QT)(this.flatCoordinates,0,g,this.stride,this.endss_);if(0===y.length)this.flatCoordinates.length=0;else{const I=y[y.length-1];this.flatCoordinates.length=0===I.length?0:I[I.length-1]}this.changed()}}const m=l},8382:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>A});var z=a(1245),F=a(1316),k=a(4212),G=a(3026);class Z extends z.ZP{constructor(P,v){super(),this.setCoordinates(P,v)}clone(){const P=new Z(this.flatCoordinates.slice(),this.layout);return P.applyProperties(this),P}closestPointXY(P,v,f,u){const c=this.flatCoordinates,r=(0,G.bI)(P,v,c[0],c[1]);if(r<u){const d=this.stride;for(let e=0;e<d;++e)f[e]=c[e];return f.length=d,r}return u}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(P){return(0,F.HK)(this.flatCoordinates,P)}getType(){return"Point"}intersectsExtent(P){return(0,F.jE)(P,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(P,v){this.setLayout(v,P,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,k.IG)(this.flatCoordinates,0,P,this.stride),this.changed()}}const A=Z},3435:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>m,oJ:()=>g});var z=a(1245),F=a(7631),k=a(1316),G=a(4212),Z=a(7904),A=a(2754),S=a(2645);class P extends z.ZP{constructor(O,E){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===E||Array.isArray(O[0])?this.setCoordinates(O,E):this.setFlatCoordinates(E,O)}clone(){return new P(this.flatCoordinates.slice(),this.layout)}closestPointXY(O,E,R,N){return N<(0,k.qf)(this.getExtent(),O,E)?N:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,F.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,F.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,O,E,R,N))}getArea(){return(0,S.QQ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,A.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(O){const E=[];return E.length=(0,Z.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,O,E,0),new P(E,"XY")}getType(){return"LinearRing"}intersectsExtent(O){return!1}setCoordinates(O,E){this.setLayout(E,O,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,G.Sg)(this.flatCoordinates,0,O,this.stride),this.changed()}}const v=P;var f=a(8382),u=a(9363),c=a(6937),r=a(4505),d=a(3093),e=a(712);class l extends z.ZP{constructor(O,E,R){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==E&&R?(this.setFlatCoordinates(E,O),this.ends_=R):this.setCoordinates(O,E)}appendLinearRing(O){this.flatCoordinates?(0,u.l7)(this.flatCoordinates,O.getFlatCoordinates()):this.flatCoordinates=O.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const O=new l(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return O.applyProperties(this),O}closestPointXY(O,E,R,N){return N<(0,k.qf)(this.getExtent(),O,E)?N:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,F.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,F.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,O,E,R,N))}containsXY(O,E){return(0,e.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,O,E)}getArea(){return(0,S.KP)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(O){let E;return void 0!==O?(E=this.getOrientedFlatCoordinates().slice(),(0,d.zX)(E,0,this.ends_,this.stride,O)):E=this.flatCoordinates,(0,A.o1)(E,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const O=(0,k.qg)(this.getExtent());this.flatInteriorPoint_=(0,c.X)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,O,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new f.Z(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(O){return O<0||this.ends_.length<=O?null:new v(this.flatCoordinates.slice(0===O?0:this.ends_[O-1],this.ends_[O]),this.layout)}getLinearRings(){const O=this.layout,E=this.flatCoordinates,R=this.ends_,N=[];let K=0;for(let rt=0,b=R.length;rt<b;++rt){const L=R[rt],w=new v(E.slice(K,L),O);N.push(w),K=L}return N}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const O=this.flatCoordinates;(0,d.$v)(O,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=O:(this.orientedFlatCoordinates_=O.slice(),this.orientedFlatCoordinates_.length=(0,d.zX)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(O){const E=[],R=[];return E.length=(0,Z.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(O),E,0,R),new l(E,"XY",R)}getType(){return"Polygon"}intersectsExtent(O){return(0,r.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,O)}setCoordinates(O,E){this.setLayout(E,O,2),this.flatCoordinates||(this.flatCoordinates=[]);const R=(0,G._5)(this.flatCoordinates,0,O,this.stride,this.ends_);this.flatCoordinates.length=0===R.length?0:R[R.length-1],this.changed()}}const m=l;function g(I){if((0,k.xb)(I))throw new Error("Cannot create polygon from empty extent");const O=I[0],E=I[1],R=I[2],N=I[3],K=[O,E,O,N,R,N,R,E,O,E];return new l(K,"XY",[K.length])}},1245:(jt,ht,a)=>{"use strict";a.d(ht,{Kr:()=>P,ZP:()=>v});var z=a(6788),F=a(3089),k=a(1316),G=a(342);function S(f){let u;return"XY"==f?u=2:"XYZ"==f||"XYM"==f?u=3:"XYZM"==f&&(u=4),u}function P(f,u,c){const r=f.getFlatCoordinates();if(!r)return null;const d=f.getStride();return(0,G.vT)(r,0,r.length,d,u,c)}const v=class Z extends z.Z{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(u){return(0,k.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,u)}getCoordinates(){return(0,F.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(u){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),u<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&u<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const c=this.getSimplifiedGeometryInternal(u);return c.getFlatCoordinates().length<this.flatCoordinates.length?c:(this.simplifiedGeometryMaxMinSquaredTolerance=u,this)}getSimplifiedGeometryInternal(u){return this}getStride(){return this.stride}setFlatCoordinates(u,c){this.stride=S(u),this.layout=u,this.flatCoordinates=c}setCoordinates(u,c){(0,F.O3)()}setLayout(u,c,r){let d;if(u)d=S(u);else{for(let e=0;e<r;++e){if(0===c.length)return this.layout="XY",void(this.stride=2);c=c[0]}d=c.length,u=function A(f){let u;return 2==f?u="XY":3==f?u="XYZ":4==f&&(u="XYZM"),u}(d)}this.layout=u,this.stride=d}applyTransform(u){this.flatCoordinates&&(u(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(u,c){const r=this.getFlatCoordinates();if(r){const d=this.getStride();(0,G.U1)(r,0,r.length,d,u,c,r),this.changed()}}scale(u,c,r){void 0===c&&(c=u),r||(r=(0,k.qg)(this.getExtent()));const d=this.getFlatCoordinates();if(d){const e=this.getStride();(0,G.bA)(d,0,d.length,e,u,c,r,d),this.changed()}}translate(u,c){const r=this.getFlatCoordinates();if(r){const d=this.getStride();(0,G.Iu)(r,0,r.length,d,u,c,r),this.changed()}}}},2645:(jt,ht,a)=>{"use strict";function z(G,Z,A,S){let P=0,v=G[A-S],f=G[A-S+1];for(;Z<A;Z+=S){const u=G[Z],c=G[Z+1];P+=f*u-v*c,v=u,f=c}return P/2}function F(G,Z,A,S){let P=0;for(let v=0,f=A.length;v<f;++v){const u=A[v];P+=z(G,Z,u,S),Z=u}return P}function k(G,Z,A,S){let P=0;for(let v=0,f=A.length;v<f;++v){const u=A[v];P+=F(G,Z,u,S),Z=u[u.length-1]}return P}a.d(ht,{Eu:()=>k,KP:()=>F,QQ:()=>z})},1758:(jt,ht,a)=>{"use strict";a.d(ht,{E:()=>F});var z=a(1316);function F(k,G,Z,A){const S=[];let P=(0,z.lJ)();for(let v=0,f=Z.length;v<f;++v){const u=Z[v];P=(0,z.GN)(k,G,u[0],A),S.push((P[0]+P[2])/2,(P[1]+P[3])/2),G=u[u.length-1]}return S}},7631:(jt,ht,a)=>{"use strict";a.d(ht,{Af:()=>G,Bv:()=>k,H$:()=>A,Xl:()=>S,gI:()=>P,sD:()=>Z});var z=a(3026);function F(v,f,u,c,r,d,e){const l=v[f],m=v[f+1],s=v[u]-l,g=v[u+1]-m;let _;if(0===s&&0===g)_=f;else{const y=((r-l)*s+(d-m)*g)/(s*s+g*g);if(y>1)_=u;else{if(y>0){for(let I=0;I<c;++I)e[I]=(0,z.t7)(v[f+I],v[u+I],y);return void(e.length=c)}_=f}}for(let y=0;y<c;++y)e[y]=v[_+y];e.length=c}function k(v,f,u,c,r){let d=v[f],e=v[f+1];for(f+=c;f<u;f+=c){const l=v[f],m=v[f+1],s=(0,z.bI)(d,e,l,m);s>r&&(r=s),d=l,e=m}return r}function G(v,f,u,c,r){for(let d=0,e=u.length;d<e;++d){const l=u[d];r=k(v,f,l,c,r),f=l}return r}function Z(v,f,u,c,r){for(let d=0,e=u.length;d<e;++d){const l=u[d];r=G(v,f,l,c,r),f=l[l.length-1]}return r}function A(v,f,u,c,r,d,e,l,m,s,g){if(f==u)return s;let _,y;if(0===r){if(y=(0,z.bI)(e,l,v[f],v[f+1]),y<s){for(_=0;_<c;++_)m[_]=v[f+_];return m.length=c,y}return s}g=g||[NaN,NaN];let I=f+c;for(;I<u;)if(F(v,I-c,I,c,e,l,g),y=(0,z.bI)(e,l,g[0],g[1]),y<s){for(s=y,_=0;_<c;++_)m[_]=g[_];m.length=c,I+=c}else I+=c*Math.max((Math.sqrt(y)-Math.sqrt(s))/r|0,1);if(d&&(F(v,u-c,f,c,e,l,g),y=(0,z.bI)(e,l,g[0],g[1]),y<s)){for(s=y,_=0;_<c;++_)m[_]=g[_];m.length=c}return s}function S(v,f,u,c,r,d,e,l,m,s,g){g=g||[NaN,NaN];for(let _=0,y=u.length;_<y;++_){const I=u[_];s=A(v,f,I,c,r,d,e,l,m,s,g),f=I}return s}function P(v,f,u,c,r,d,e,l,m,s,g){g=g||[NaN,NaN];for(let _=0,y=u.length;_<y;++_){const I=u[_];s=S(v,f,I,c,r,d,e,l,m,s,g),f=I[I.length-1]}return s}},712:(jt,ht,a)=>{"use strict";a.d(ht,{TG:()=>k,Zl:()=>Z,uG:()=>F,wY:()=>G});var z=a(1316);function F(A,S,P,v,f){return!(0,z.H6)(f,function(c){return!k(A,S,P,v,c[0],c[1])})}function k(A,S,P,v,f,u){let c=0,r=A[P-v],d=A[P-v+1];for(;S<P;S+=v){const e=A[S],l=A[S+1];d<=u?l>u&&(e-r)*(u-d)-(f-r)*(l-d)>0&&c++:l<=u&&(e-r)*(u-d)-(f-r)*(l-d)<0&&c--,r=e,d=l}return 0!==c}function G(A,S,P,v,f,u){if(0===P.length||!k(A,S,P[0],v,f,u))return!1;for(let c=1,r=P.length;c<r;++c)if(k(A,P[c-1],P[c],v,f,u))return!1;return!0}function Z(A,S,P,v,f,u){if(0===P.length)return!1;for(let c=0,r=P.length;c<r;++c){const d=P[c];if(G(A,S,d,v,f,u))return!0;S=d[d.length-1]}return!1}},4212:(jt,ht,a)=>{"use strict";function z(Z,A,S,P){for(let v=0,f=S.length;v<f;++v)Z[A++]=S[v];return A}function F(Z,A,S,P){for(let v=0,f=S.length;v<f;++v){const u=S[v];for(let c=0;c<P;++c)Z[A++]=u[c]}return A}function k(Z,A,S,P,v){v=v||[];let f=0;for(let u=0,c=S.length;u<c;++u){const r=F(Z,A,S[u],P);v[f++]=r,A=r}return v.length=f,v}function G(Z,A,S,P,v){v=v||[];let f=0;for(let u=0,c=S.length;u<c;++u){const r=k(Z,A,S[u],P,v[f]);0===r.length&&(r[0]=A),v[f++]=r,A=r[r.length-1]}return v.length=f,v}a.d(ht,{IG:()=>z,QT:()=>G,Sg:()=>F,_5:()=>k})},2754:(jt,ht,a)=>{"use strict";function z(G,Z,A,S,P){P=void 0!==P?P:[];let v=0;for(let f=Z;f<A;f+=S)P[v++]=G.slice(f,f+S);return P.length=v,P}function F(G,Z,A,S,P){P=void 0!==P?P:[];let v=0;for(let f=0,u=A.length;f<u;++f){const c=A[f];P[v++]=z(G,Z,c,S,P[v]),Z=c}return P.length=v,P}function k(G,Z,A,S,P){P=void 0!==P?P:[];let v=0;for(let f=0,u=A.length;f<u;++f){const c=A[f];P[v++]=1===c.length&&c[0]===Z?[]:F(G,Z,c,S,P[v]),Z=c[c.length-1]}return P.length=v,P}a.d(ht,{Ml:()=>z,o1:()=>F,ug:()=>k})},6937:(jt,ht,a)=>{"use strict";a.d(ht,{U:()=>G,X:()=>k});var z=a(9363),F=a(712);function k(Z,A,S,P,v,f,u){let c,r,d,e,l,m,s;const g=v[f+1],_=[];for(let O=0,E=S.length;O<E;++O){const R=S[O];for(e=Z[R-P],m=Z[R-P+1],c=A;c<R;c+=P)l=Z[c],s=Z[c+1],(g<=m&&s<=g||m<=g&&g<=s)&&(d=(g-m)/(s-m)*(l-e)+e,_.push(d)),e=l,m=s}let y=NaN,I=-1/0;for(_.sort(z.j2),e=_[0],c=1,r=_.length;c<r;++c){l=_[c];const O=Math.abs(l-e);O>I&&(d=(e+l)/2,(0,F.wY)(Z,A,S,P,d,g)&&(y=d,I=O)),e=l}return isNaN(y)&&(y=v[f]),u?(u.push(y,g,I),u):[y,g,I]}function G(Z,A,S,P,v){let f=[];for(let u=0,c=S.length;u<c;++u){const r=S[u];f=k(Z,A,r,P,v,2*u,f),A=r[r.length-1]}return f}},6735:(jt,ht,a)=>{"use strict";a.d(ht,{WW:()=>k,dG:()=>Z,iJ:()=>G});var z=a(9363),F=a(3026);function k(A,S,P,v,f,u,c){let r,d;const e=(P-S)/v;if(1===e)r=S;else if(2===e)r=S,d=f;else if(0!==e){let l=A[S],m=A[S+1],s=0;const g=[0];for(let I=S+v;I<P;I+=v){const O=A[I],E=A[I+1];s+=Math.sqrt((O-l)*(O-l)+(E-m)*(E-m)),g.push(s),l=O,m=E}const _=f*s,y=(0,z.ry)(g,_);y<0?(d=(_-g[-y-2])/(g[-y-1]-g[-y-2]),r=S+(-y-2)*v):r=S+y*v}c=c>1?c:2,u=u||new Array(c);for(let l=0;l<c;++l)u[l]=void 0===r?NaN:void 0===d?A[r+l]:(0,F.t7)(A[r+l],A[r+v+l],d);return u}function G(A,S,P,v,f,u){if(P==S)return null;let c;if(f<A[S+v-1])return u?(c=A.slice(S,S+v),c[v-1]=f,c):null;if(A[P-1]<f)return u?(c=A.slice(P-v,P),c[v-1]=f,c):null;if(f==A[S+v-1])return A.slice(S,S+v);let r=S/v,d=P/v;for(;r<d;){const s=r+d>>1;f<A[(s+1)*v-1]?d=s:r=s+1}const e=A[r*v-1];if(f==e)return A.slice((r-1)*v,(r-1)*v+v);const m=(f-e)/(A[(r+1)*v-1]-e);c=[];for(let s=0;s<v-1;++s)c.push((0,F.t7)(A[(r-1)*v+s],A[r*v+s],m));return c.push(f),c}function Z(A,S,P,v,f,u,c){if(c)return G(A,S,P[P.length-1],v,f,u);let r;if(f<A[v-1])return u?(r=A.slice(0,v),r[v-1]=f,r):null;if(A[A.length-1]<f)return u?(r=A.slice(A.length-v),r[v-1]=f,r):null;for(let d=0,e=P.length;d<e;++d){const l=P[d];if(S!=l){if(f<A[S+v-1])return null;if(f<=A[l-1])return G(A,S,l,v,f,!1);S=l}}return null}},4505:(jt,ht,a)=>{"use strict";a.d(ht,{AW:()=>Z,Kz:()=>G,ac:()=>S,mV:()=>A,oW:()=>P});var z=a(1316),F=a(2302),k=a(712);function G(v,f,u,c,r){const d=(0,z.qP)((0,z.lJ)(),v,f,u,c);return!!(0,z.kK)(r,d)&&(!!((0,z.r4)(r,d)||d[0]>=r[0]&&d[2]<=r[2]||d[1]>=r[1]&&d[3]<=r[3])||(0,F.E)(v,f,u,c,function(e,l){return(0,z.I7)(r,e,l)}))}function Z(v,f,u,c,r){for(let d=0,e=u.length;d<e;++d){if(G(v,f,u[d],c,r))return!0;f=u[d]}return!1}function A(v,f,u,c,r){return!!(G(v,f,u,c,r)||(0,k.TG)(v,f,u,c,r[0],r[1])||(0,k.TG)(v,f,u,c,r[0],r[3])||(0,k.TG)(v,f,u,c,r[2],r[1])||(0,k.TG)(v,f,u,c,r[2],r[3]))}function S(v,f,u,c,r){if(!A(v,f,u[0],c,r))return!1;if(1===u.length)return!0;for(let d=1,e=u.length;d<e;++d)if((0,k.uG)(v,u[d-1],u[d],c,r)&&!G(v,u[d-1],u[d],c,r))return!1;return!0}function P(v,f,u,c,r){for(let d=0,e=u.length;d<e;++d){const l=u[d];if(S(v,f,l,c,r))return!0;f=l[l.length-1]}return!1}},2460:(jt,ht,a)=>{"use strict";function z(k,G,Z,A){let S=k[G],P=k[G+1],v=0;for(let f=G+A;f<Z;f+=A){const u=k[f],c=k[f+1];v+=Math.sqrt((u-S)*(u-S)+(c-P)*(c-P)),S=u,P=c}return v}a.d(ht,{W:()=>z})},3093:(jt,ht,a)=>{"use strict";function z(P,v,f,u){for(;v<f-u;){for(let c=0;c<u;++c){const r=P[v+c];P[v+c]=P[f-u+c],P[f-u+c]=r}v+=u,f-=u}}function F(P,v,f,u){let c=0,r=P[f-u],d=P[f-u+1];for(;v<f;v+=u){const e=P[v],l=P[v+1];c+=(e-r)*(l+d),r=e,d=l}return 0===c?void 0:c>0}function k(P,v,f,u,c){c=void 0!==c&&c;for(let r=0,d=f.length;r<d;++r){const e=f[r],l=F(P,v,e,u);if(0===r){if(c&&l||!c&&!l)return!1}else if(c&&!l||!c&&l)return!1;v=e}return!0}function G(P,v,f,u,c){for(let r=0,d=f.length;r<d;++r){const e=f[r];if(!k(P,v,e,u,c))return!1;e.length&&(v=e[e.length-1])}return!0}function Z(P,v,f,u,c){c=void 0!==c&&c;for(let r=0,d=f.length;r<d;++r){const e=f[r],l=F(P,v,e,u);(0===r?c&&l||!c&&!l:c&&!l||!c&&l)&&z(P,v,e,u),v=e}return v}function A(P,v,f,u,c){for(let r=0,d=f.length;r<d;++r)v=Z(P,v,f[r],u,c);return v}function S(P,v){const f=[];let u=0,c=0;for(let r=0,d=v.length;r<d;++r){const e=v[r];if(F(P,u,e,2)){if(0===f.length)continue;f[f.length-1].push(v[c])}else f.push(v.slice(c,r+1));c=r+1,u=e}return f}a.d(ht,{Q3:()=>S,$v:()=>k,Oj:()=>G,zX:()=>Z,dL:()=>A})},2302:(jt,ht,a)=>{"use strict";function z(F,k,G,Z,A){let S;for(k+=Z;k<G;k+=Z)if(S=A(F.slice(k-Z,k),F.slice(k,k+Z)),S)return S;return!1}a.d(ht,{E:()=>z})},7904:(jt,ht,a)=>{"use strict";a.d(ht,{Pp:()=>f,UJ:()=>G,Zh:()=>v,dt:()=>k,uZ:()=>S});var z=a(3026);function k(u,c,r,d,e,l,m){const s=(r-c)/d;if(s<3){for(;c<r;c+=d)l[m++]=u[c],l[m++]=u[c+1];return m}const g=new Array(s);g[0]=1,g[s-1]=1;const _=[c,r-d];let y=0;for(;_.length>0;){const I=_.pop(),O=_.pop();let E=0;const R=u[O],N=u[O+1],K=u[I],rt=u[I+1];for(let b=O+d;b<I;b+=d){const M=(0,z.rU)(u[b],u[b+1],R,N,K,rt);M>E&&(y=b,E=M)}E>e&&(g[(y-c)/d]=1,O+d<y&&_.push(O,y),y+d<I&&_.push(y,I))}for(let I=0;I<s;++I)g[I]&&(l[m++]=u[c+I*d],l[m++]=u[c+I*d+1]);return m}function G(u,c,r,d,e,l,m,s){for(let g=0,_=r.length;g<_;++g){const y=r[g];m=k(u,c,y,d,e,l,m),s.push(m),c=y}return m}function S(u,c){return c*Math.round(u/c)}function P(u,c,r,d,e,l,m){if(c==r)return m;let _,y,s=S(u[c],e),g=S(u[c+1],e);c+=d,l[m++]=s,l[m++]=g;do{if(_=S(u[c],e),y=S(u[c+1],e),(c+=d)==r)return l[m++]=_,l[m++]=y,m}while(_==s&&y==g);for(;c<r;){const I=S(u[c],e),O=S(u[c+1],e);if(c+=d,I==_&&O==y)continue;const E=_-s,R=y-g,N=I-s,K=O-g;E*K==R*N&&(E<0&&N<E||E==N||E>0&&N>E)&&(R<0&&K<R||R==K||R>0&&K>R)?(_=I,y=O):(l[m++]=_,l[m++]=y,s=_,g=y,_=I,y=O)}return l[m++]=_,l[m++]=y,m}function v(u,c,r,d,e,l,m,s){for(let g=0,_=r.length;g<_;++g){const y=r[g];m=P(u,c,y,d,e,l,m),s.push(m),c=y}return m}function f(u,c,r,d,e,l,m,s){for(let g=0,_=r.length;g<_;++g){const y=r[g],I=[];m=v(u,c,y,d,e,l,m,I),s.push(I),c=y[y.length-1]}return m}},342:(jt,ht,a)=>{"use strict";function z(Z,A,S,P,v,f){f=f||[];let u=0;for(let c=A;c<S;c+=P){const r=Z[c],d=Z[c+1];f[u++]=v[0]*r+v[2]*d+v[4],f[u++]=v[1]*r+v[3]*d+v[5]}return f&&f.length!=u&&(f.length=u),f}function F(Z,A,S,P,v,f,u){u=u||[];const c=Math.cos(v),r=Math.sin(v),d=f[0],e=f[1];let l=0;for(let m=A;m<S;m+=P){const s=Z[m]-d,g=Z[m+1]-e;u[l++]=d+s*c-g*r,u[l++]=e+s*r+g*c;for(let _=m+2;_<m+P;++_)u[l++]=Z[_]}return u&&u.length!=l&&(u.length=l),u}function k(Z,A,S,P,v,f,u,c){c=c||[];const r=u[0],d=u[1];let e=0;for(let l=A;l<S;l+=P){const s=Z[l+1]-d;c[e++]=r+v*(Z[l]-r),c[e++]=d+f*s;for(let g=l+2;g<l+P;++g)c[e++]=Z[g]}return c&&c.length!=e&&(c.length=e),c}function G(Z,A,S,P,v,f,u){u=u||[];let c=0;for(let r=A;r<S;r+=P){u[c++]=Z[r]+v,u[c++]=Z[r+1]+f;for(let d=r+2;d<r+P;++d)u[c++]=Z[d]}return u&&u.length!=c&&(u.length=c),u}a.d(ht,{Iu:()=>G,U1:()=>F,bA:()=>k,vT:()=>z})},3233:(jt,ht,a)=>{"use strict";a.d(ht,{G$:()=>Z,Id:()=>P,ME:()=>G,MP:()=>S,Tp:()=>v,V:()=>F,bM:()=>f,tK:()=>A});const z=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",F=z.includes("firefox"),G=z.includes("safari")&&!z.includes("chrom")&&(z.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(z)),Z=z.includes("webkit")&&!z.includes("edge"),A=z.includes("macintosh"),S=typeof devicePixelRatio<"u"?devicePixelRatio:1,P=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,v=typeof Image<"u"&&Image.prototype.decode,f=function(){let u=!1;try{const c=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("_",null,c),window.removeEventListener("_",null,c)}catch{}return u}()},7946:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>u});var z=a(8802),F=a(6613),k=a(5337),G=a(3435);const A=class Z extends k.Z{constructor(r){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+r,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const r=this.startPixel_,d=this.endPixel_,e="px",l=this.element_.style;l.left=Math.min(r[0],d[0])+e,l.top=Math.min(r[1],d[1])+e,l.width=Math.abs(d[0]-r[0])+e,l.height=Math.abs(d[1]-r[1])+e}setMap(r){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const d=this.element_.style;d.left="inherit",d.top="inherit",d.width="inherit",d.height="inherit"}this.map_=r,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(r,d){this.startPixel_=r,this.endPixel_=d,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const r=this.startPixel_,d=this.endPixel_,l=[r,[r[0],d[1]],d,[d[0],r[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);l[4]=l[0].slice(),this.geometry_?this.geometry_.setCoordinates([l]):this.geometry_=new G.ZP([l])}getGeometry(){return this.geometry_}};var S=a(3990);class v extends z.ZP{constructor(r,d,e){super(r),this.coordinate=d,this.mapBrowserEvent=e}}const u=class f extends F.Z{constructor(r){super(),this.box_=new A((r=r||{}).className||"ol-dragbox"),this.minArea_=void 0!==r.minArea?r.minArea:64,r.onBoxEnd&&(this.onBoxEnd=r.onBoxEnd),this.startPixel_=null,this.condition_=r.condition?r.condition:S.v8,this.boxEndCondition_=r.boxEndCondition?r.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(r,d,e){const l=e[0]-d[0],m=e[1]-d[1];return l*l+m*m>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(r){this.box_.setPixels(this.startPixel_,r.pixel),this.dispatchEvent(new v("boxdrag",r.coordinate,r))}handleUpEvent(r){this.box_.setMap(null);const d=this.boxEndCondition_(r,this.startPixel_,r.pixel);return d&&this.onBoxEnd(r),this.dispatchEvent(new v(d?"boxend":"boxcancel",r.coordinate,r)),!1}handleDownEvent(r){return!!this.condition_(r)&&(this.startPixel_=r.pixel,this.box_.setMap(r.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new v("boxstart",r.coordinate,r)),!0)}onBoxEnd(r){}}},9715:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>S,Cv:()=>Z,FW:()=>A});var z=a(7300);var k=a(53);function Z(P,v,f){const u=P.getCenterInternal();u&&P.animateInternal({duration:void 0!==f?f:250,easing:k.GE,center:P.getConstrainedCenter([u[0]+v[0],u[1]+v[1]])})}function A(P,v,f,u){const c=P.getZoom();if(void 0===c)return;const r=P.getConstrainedZoom(c+v),d=P.getResolutionForZoom(r);P.getAnimating()&&P.cancelAnimations(),P.animate({resolution:d,anchor:f,duration:void 0!==u?u:250,easing:k.Vv})}const S=class G extends z.Z{constructor(v){super(),v&&v.handleEvent&&(this.handleEvent=v.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(v){return!0}setActive(v){this.set("active",v)}setMap(v){this.map_=v}}},6613:(jt,ht,a)=>{"use strict";a.d(ht,{S:()=>G,Z:()=>Z});var z=a(9715),F=a(6990);function G(A){const S=A.length;let P=0,v=0;for(let f=0;f<S;f++)P+=A[f].clientX,v+=A[f].clientY;return{clientX:P/S,clientY:v/S}}const Z=class k extends z.ZP{constructor(S){super(S=S||{}),S.handleDownEvent&&(this.handleDownEvent=S.handleDownEvent),S.handleDragEvent&&(this.handleDragEvent=S.handleDragEvent),S.handleMoveEvent&&(this.handleMoveEvent=S.handleMoveEvent),S.handleUpEvent&&(this.handleUpEvent=S.handleUpEvent),S.stopDown&&(this.stopDown=S.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(S){return!1}handleDragEvent(S){}handleEvent(S){if(!S.originalEvent)return!0;let P=!1;if(this.updateTrackedPointers_(S),this.handlingDownUpSequence){if(S.type==F.Z.POINTERDRAG)this.handleDragEvent(S),S.originalEvent.preventDefault();else if(S.type==F.Z.POINTERUP){const v=this.handleUpEvent(S);this.handlingDownUpSequence=v&&this.targetPointers.length>0}}else if(S.type==F.Z.POINTERDOWN){const v=this.handleDownEvent(S);this.handlingDownUpSequence=v,P=this.stopDown(v)}else S.type==F.Z.POINTERMOVE&&this.handleMoveEvent(S);return!P}handleMoveEvent(S){}handleUpEvent(S){return!1}stopDown(S){return S}updateTrackedPointers_(S){S.activePointers&&(this.targetPointers=S.activePointers)}}},9813:(jt,ht,a)=>{"use strict";a.d(ht,{c:()=>Y});var z=a(6108),F=a(9715),k=a(6990);const Z=class G extends F.ZP{constructor(V){super(),this.delta_=(V=V||{}).delta?V.delta:1,this.duration_=void 0!==V.duration?V.duration:250}handleEvent(V){let at=!1;if(V.type==k.Z.DBLCLICK){const ut=V.originalEvent,vt=V.coordinate,Ot=ut.shiftKey?-this.delta_:this.delta_,At=V.map.getView();(0,F.FW)(At,Ot,vt,this.duration_),ut.preventDefault(),at=!0}return!at}};var A=a(6613),S=a(6077),P=a(3990),v=a(53),f=a(1242);const c=class u extends A.Z{constructor(V){super({stopDown:S.Dv}),this.kinetic_=(V=V||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const at=V.condition?V.condition:(0,P.$6)(P.rM,P.Xp);this.condition_=V.onFocusOnly?(0,P.$6)(P.yZ,at):at,this.noKinetic_=!1}handleDragEvent(V){const at=V.map;this.panning_||(this.panning_=!0,at.getView().beginInteraction());const ut=this.targetPointers,Pt=at.getEventPixel((0,A.S)(ut));if(ut.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(Pt[0],Pt[1]),this.lastCentroid){const vt=[this.lastCentroid[0]-Pt[0],Pt[1]-this.lastCentroid[1]],At=V.map.getView();(0,f.bA)(vt,At.getResolution()),(0,f.U1)(vt,At.getRotation()),At.adjustCenterInternal(vt)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=Pt,this.lastPointersCount_=ut.length,V.originalEvent.preventDefault()}handleUpEvent(V){const at=V.map,ut=at.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const Pt=this.kinetic_.getDistance(),vt=this.kinetic_.getAngle(),Ot=ut.getCenterInternal(),At=at.getPixelFromCoordinateInternal(Ot),Gt=at.getCoordinateFromPixelInternal([At[0]-Pt*Math.cos(vt),At[1]-Pt*Math.sin(vt)]);ut.animateInternal({center:ut.getConstrainedCenter(Gt),duration:500,easing:v.Vv})}return this.panning_&&(this.panning_=!1,ut.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(V){if(this.targetPointers.length>0&&this.condition_(V)){const ut=V.map.getView();return this.lastCentroid=null,ut.getAnimating()&&ut.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};var r=a(3616);const e=class d extends A.Z{constructor(V){V=V||{},super({stopDown:S.Dv}),this.condition_=V.condition?V.condition:P.aj,this.lastAngle_=void 0,this.duration_=void 0!==V.duration?V.duration:250}handleDragEvent(V){if(!(0,P.QL)(V))return;const at=V.map,ut=at.getView();if(ut.getConstraints().rotation===r.h$)return;const Pt=at.getSize(),vt=V.pixel,Ot=Math.atan2(Pt[1]/2-vt[1],vt[0]-Pt[0]/2);void 0!==this.lastAngle_&&ut.adjustRotationInternal(-(Ot-this.lastAngle_)),this.lastAngle_=Ot}handleUpEvent(V){return!(0,P.QL)(V)||(V.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(V){return!!((0,P.QL)(V)&&(0,P.v8)(V)&&this.condition_(V))&&(V.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}};var l=a(7946);const s=class m extends l.Z{constructor(V){super({condition:(V=V||{}).condition?V.condition:P.vY,className:V.className||"ol-dragzoom",minArea:V.minArea}),this.duration_=void 0!==V.duration?V.duration:200,this.out_=void 0!==V.out&&V.out}onBoxEnd(V){const ut=this.getMap().getView();let Pt=this.getGeometry();if(this.out_){const vt=ut.rotatedExtentForGeometry(Pt),Ot=ut.getResolutionForExtentInternal(vt),At=ut.getResolution()/Ot;Pt=Pt.clone(),Pt.scale(At*At)}ut.fitInternal(Pt,{duration:this.duration_,easing:v.Vv})}};var g=a(2431);const I=class y extends F.ZP{constructor(V){super(),V=V||{},this.defaultCondition_=function(at){return(0,P.rM)(at)&&(0,P.TN)(at)},this.condition_=void 0!==V.condition?V.condition:this.defaultCondition_,this.duration_=void 0!==V.duration?V.duration:100,this.pixelDelta_=void 0!==V.pixelDelta?V.pixelDelta:128}handleEvent(V){let at=!1;if(V.type==g.Z.KEYDOWN){const ut=V.originalEvent,Pt=ut.key;if(this.condition_(V)&&("ArrowDown"==Pt||"ArrowLeft"==Pt||"ArrowRight"==Pt||"ArrowUp"==Pt)){const Ot=V.map.getView(),At=Ot.getResolution()*this.pixelDelta_;let Gt=0,zt=0;"ArrowDown"==Pt?zt=-At:"ArrowLeft"==Pt?Gt=-At:"ArrowRight"==Pt?Gt=At:zt=At;const qt=[Gt,zt];(0,f.U1)(qt,Ot.getRotation()),(0,F.Cv)(Ot,qt,this.duration_),ut.preventDefault(),at=!0}}return!at}},E=class O extends F.ZP{constructor(V){super(),this.condition_=(V=V||{}).condition?V.condition:function(at){return!(0,P.a5)(at)&&(0,P.TN)(at)},this.delta_=V.delta?V.delta:1,this.duration_=void 0!==V.duration?V.duration:100}handleEvent(V){let at=!1;if(V.type==g.Z.KEYDOWN||V.type==g.Z.KEYPRESS){const ut=V.originalEvent,Pt=ut.key;if(this.condition_(V)&&("+"===Pt||"-"===Pt)){const Ot="+"===Pt?this.delta_:-this.delta_,At=V.map.getView();(0,F.FW)(At,Ot,void 0,this.duration_),ut.preventDefault(),at=!0}}return!at}},N=class R{constructor(V,at,ut){this.decay_=V,this.minVelocity_=at,this.delay_=ut,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(V,at){this.points_.push(V,at,Date.now())}end(){if(this.points_.length<6)return!1;const V=Date.now()-this.delay_,at=this.points_.length-3;if(this.points_[at+2]<V)return!1;let ut=at-3;for(;ut>0&&this.points_[ut+2]>V;)ut-=3;const Pt=this.points_[at+2]-this.points_[ut+2];if(Pt<1e3/60)return!1;const vt=this.points_[at]-this.points_[ut],Ot=this.points_[at+1]-this.points_[ut+1];return this.angle_=Math.atan2(Ot,vt),this.initialVelocity_=Math.sqrt(vt*vt+Ot*Ot)/Pt,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};var K=a(3233),rt=a(3026);const L=class b extends F.ZP{constructor(V){super(V=V||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==V.maxDelta?V.maxDelta:1,this.duration_=void 0!==V.duration?V.duration:250,this.timeout_=void 0!==V.timeout?V.timeout:80,this.useAnchor_=void 0===V.useAnchor||V.useAnchor,this.constrainResolution_=void 0!==V.constrainResolution&&V.constrainResolution;const at=V.condition?V.condition:P.Bx;this.condition_=V.onFocusOnly?(0,P.$6)(P.yZ,at):at,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const V=this.getMap();V&&V.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(V){if(!this.condition_(V)||V.type!==g.Z.WHEEL)return!0;const ut=V.map,Pt=V.originalEvent;let vt;if(Pt.preventDefault(),this.useAnchor_&&(this.lastAnchor_=V.coordinate),V.type==g.Z.WHEEL&&(vt=Pt.deltaY,K.V&&Pt.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(vt/=K.MP),Pt.deltaMode===WheelEvent.DOM_DELTA_LINE&&(vt*=40)),0===vt)return!1;this.lastDelta_=vt;const Ot=Date.now();void 0===this.startTime_&&(this.startTime_=Ot),(!this.mode_||Ot-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(vt)<4?"trackpad":"wheel");const At=ut.getView();if("trackpad"===this.mode_&&!At.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(At.getAnimating()&&At.cancelAnimations(),At.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),At.adjustZoom(-vt/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=Ot,!1;this.totalDelta_+=vt;const Gt=Math.max(this.timeout_-(Ot-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,ut),Gt),!1}handleWheelZoom_(V){const at=V.getView();at.getAnimating()&&at.cancelAnimations();let ut=-(0,rt.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(at.getConstrainResolution()||this.constrainResolution_)&&(ut=ut?ut>0?1:-1:0),(0,F.FW)(at,ut,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(V){this.useAnchor_=V,V||(this.lastAnchor_=null)}},M=class w extends A.Z{constructor(V){const at=V=V||{};at.stopDown||(at.stopDown=S.Dv),super(at),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==V.threshold?V.threshold:.3,this.duration_=void 0!==V.duration?V.duration:250}handleDragEvent(V){let at=0;const ut=this.targetPointers[0],Pt=this.targetPointers[1],vt=Math.atan2(Pt.clientY-ut.clientY,Pt.clientX-ut.clientX);if(void 0!==this.lastAngle_){const Gt=vt-this.lastAngle_;this.rotationDelta_+=Gt,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),at=Gt}this.lastAngle_=vt;const Ot=V.map,At=Ot.getView();At.getConstraints().rotation!==r.h$&&(this.anchor_=Ot.getCoordinateFromPixelInternal(Ot.getEventPixel((0,A.S)(this.targetPointers))),this.rotating_&&(Ot.render(),At.adjustRotationInternal(at,this.anchor_)))}handleUpEvent(V){return!(this.targetPointers.length<2&&(V.map.getView().endInteraction(this.duration_),1))}handleDownEvent(V){if(this.targetPointers.length>=2){const at=V.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||at.getView().beginInteraction(),!0}return!1}},D=class C extends A.Z{constructor(V){const at=V=V||{};at.stopDown||(at.stopDown=S.Dv),super(at),this.anchor_=null,this.duration_=void 0!==V.duration?V.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(V){let at=1;const ut=this.targetPointers[0],Pt=this.targetPointers[1],vt=ut.clientX-Pt.clientX,Ot=ut.clientY-Pt.clientY,At=Math.sqrt(vt*vt+Ot*Ot);void 0!==this.lastDistance_&&(at=this.lastDistance_/At),this.lastDistance_=At;const Gt=V.map,zt=Gt.getView();1!=at&&(this.lastScaleDelta_=at),this.anchor_=Gt.getCoordinateFromPixelInternal(Gt.getEventPixel((0,A.S)(this.targetPointers))),Gt.render(),zt.adjustResolutionInternal(at,this.anchor_)}handleUpEvent(V){return!(this.targetPointers.length<2)||(V.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(V){if(this.targetPointers.length>=2){const at=V.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||at.getView().beginInteraction(),!0}return!1}};function Y(st){st=st||{};const V=new z.Z,at=new N(-.005,.05,100);return(void 0===st.altShiftDragRotate||st.altShiftDragRotate)&&V.push(new e),(void 0===st.doubleClickZoom||st.doubleClickZoom)&&V.push(new Z({delta:st.zoomDelta,duration:st.zoomDuration})),(void 0===st.dragPan||st.dragPan)&&V.push(new c({onFocusOnly:st.onFocusOnly,kinetic:at})),(void 0===st.pinchRotate||st.pinchRotate)&&V.push(new M),(void 0===st.pinchZoom||st.pinchZoom)&&V.push(new D({duration:st.zoomDuration})),(void 0===st.keyboard||st.keyboard)&&(V.push(new I),V.push(new E({delta:st.zoomDelta,duration:st.zoomDuration}))),(void 0===st.mouseWheelZoom||st.mouseWheelZoom)&&V.push(new L({onFocusOnly:st.onFocusOnly,duration:st.zoomDuration})),(void 0===st.shiftDragZoom||st.shiftDragZoom)&&V.push(new s({duration:st.zoomDuration})),V}},4199:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var z=a(7300),F=a(916),k=a(3089),G=a(9219),Z=a(3026);const S=class A extends z.Z{constructor(v){super(),this.background_=v.background;const f=Object.assign({},v);"object"==typeof v.properties&&(delete f.properties,Object.assign(f,v.properties)),f[F.Z.OPACITY]=void 0!==v.opacity?v.opacity:1,(0,G.h)("number"==typeof f[F.Z.OPACITY],64),f[F.Z.VISIBLE]=void 0===v.visible||v.visible,f[F.Z.Z_INDEX]=v.zIndex,f[F.Z.MAX_RESOLUTION]=void 0!==v.maxResolution?v.maxResolution:1/0,f[F.Z.MIN_RESOLUTION]=void 0!==v.minResolution?v.minResolution:0,f[F.Z.MIN_ZOOM]=void 0!==v.minZoom?v.minZoom:-1/0,f[F.Z.MAX_ZOOM]=void 0!==v.maxZoom?v.maxZoom:1/0,this.className_=void 0!==f.className?f.className:"ol-layer",delete f.className,this.setProperties(f),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(v){const f=this.state_||{layer:this,managed:void 0===v||v},u=this.getZIndex();return f.opacity=(0,Z.uZ)(Math.round(100*this.getOpacity())/100,0,1),f.visible=this.getVisible(),f.extent=this.getExtent(),f.zIndex=void 0!==u||f.managed?u:1/0,f.maxResolution=this.getMaxResolution(),f.minResolution=Math.max(this.getMinResolution(),0),f.minZoom=this.getMinZoom(),f.maxZoom=this.getMaxZoom(),this.state_=f,f}getLayersArray(v){return(0,k.O3)()}getLayerStatesArray(v){return(0,k.O3)()}getExtent(){return this.get(F.Z.EXTENT)}getMaxResolution(){return this.get(F.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(F.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(F.Z.MIN_ZOOM)}getMaxZoom(){return this.get(F.Z.MAX_ZOOM)}getOpacity(){return this.get(F.Z.OPACITY)}getSourceState(){return(0,k.O3)()}getVisible(){return this.get(F.Z.VISIBLE)}getZIndex(){return this.get(F.Z.Z_INDEX)}setBackground(v){this.background_=v,this.changed()}setExtent(v){this.set(F.Z.EXTENT,v)}setMaxResolution(v){this.set(F.Z.MAX_RESOLUTION,v)}setMinResolution(v){this.set(F.Z.MIN_RESOLUTION,v)}setMaxZoom(v){this.set(F.Z.MAX_ZOOM,v)}setMinZoom(v){this.set(F.Z.MIN_ZOOM,v)}setOpacity(v){(0,G.h)("number"==typeof v,64),this.set(F.Z.OPACITY,v)}setVisible(v){this.set(F.Z.VISIBLE,v)}setZIndex(v){this.set(F.Z.Z_INDEX,v)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}},9107:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>k});var z=a(5209);const k=class F extends z.Z{constructor(Z){super(Z=Z||{})}}},2920:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var z=a(5209),F=a(5962);const G=class k extends z.Z{constructor(A){A=A||{};const S=Object.assign({},A);delete S.preload,delete S.useInterimTilesOnError,super(S),this.setPreload(void 0!==A.preload?A.preload:0),this.setUseInterimTilesOnError(void 0===A.useInterimTilesOnError||A.useInterimTilesOnError)}getPreload(){return this.get(F.Z.PRELOAD)}setPreload(A){this.set(F.Z.PRELOAD,A)}getUseInterimTilesOnError(){return this.get(F.Z.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(A){this.set(F.Z.USE_INTERIM_TILES_ON_ERROR,A)}getData(A){return super.getData(A)}}},4203:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>s});var z=a(5209),F=a(5604),k=a(1949),G=a(3009),Z=a(5505),A=a(1485),S=a(8929),P=a(4396),v=a(7202);function f(g){return new k.ZP({fill:u(g,""),stroke:c(g,""),text:r(g),image:d(g)})}function u(g,_){const y=g[_+"fill-color"];if(y)return"none"===y?null:new Z.Z({color:y})}function c(g,_){const y=g[_+"stroke-width"],I=g[_+"stroke-color"];if(y||I)return new P.Z({width:y,color:I,lineCap:g[_+"stroke-line-cap"],lineJoin:g[_+"stroke-line-join"],lineDash:g[_+"stroke-line-dash"],lineDashOffset:g[_+"stroke-line-dash-offset"],miterLimit:g[_+"stroke-miter-limit"]})}function r(g){const _=g["text-value"];return _?new v.Z({text:_,font:g["text-font"],maxAngle:g["text-max-angle"],offsetX:g["text-offset-x"],offsetY:g["text-offset-y"],overflow:g["text-overflow"],placement:g["text-placement"],repeat:g["text-repeat"],scale:g["text-scale"],rotateWithView:g["text-rotate-with-view"],rotation:g["text-rotation"],textAlign:g["text-align"],justify:g["text-justify"],textBaseline:g["text-baseline"],padding:g["text-padding"],fill:u(g,"text-"),backgroundFill:u(g,"text-background-"),stroke:c(g,"text-"),backgroundStroke:c(g,"text-background-")}):void 0}function d(g){const _=g["icon-src"],y=g["icon-img"];if(_||y)return new A.Z({src:_,img:y,imgSize:g["icon-img-size"],anchor:g["icon-anchor"],anchorOrigin:g["icon-anchor-origin"],anchorXUnits:g["icon-anchor-x-units"],anchorYUnits:g["icon-anchor-y-units"],color:g["icon-color"],crossOrigin:g["icon-cross-origin"],offset:g["icon-offset"],displacement:g["icon-displacement"],opacity:g["icon-opacity"],scale:g["icon-scale"],width:g["icon-width"],height:g["icon-height"],rotation:g["icon-rotation"],rotateWithView:g["icon-rotate-with-view"],size:g["icon-size"],declutterMode:g["icon-declutter-mode"]});const I=g["shape-points"];if(I){const E="shape-";return new S.Z({points:I,fill:u(g,E),stroke:c(g,E),radius:g["shape-radius"],radius1:g["shape-radius1"],radius2:g["shape-radius2"],angle:g["shape-angle"],displacement:g["shape-displacement"],rotation:g["shape-rotation"],rotateWithView:g["shape-rotate-with-view"],scale:g["shape-scale"],declutterMode:g["shape-declutter-mode"]})}const O=g["circle-radius"];if(O){const E="circle-";return new G.Z({radius:O,fill:u(g,E),stroke:c(g,E),displacement:g["circle-displacement"],scale:g["circle-scale"],rotation:g["circle-rotation"],rotateWithView:g["circle-rotate-with-view"],declutterMode:g["circle-declutter-mode"]})}}const s=class m extends z.Z{constructor(_){_=_||{};const y=Object.assign({},_);delete y.style,delete y.renderBuffer,delete y.updateWhileAnimating,delete y.updateWhileInteracting,super(y),this.declutter_=void 0!==_.declutter&&_.declutter,this.renderBuffer_=void 0!==_.renderBuffer?_.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(_.style),this.updateWhileAnimating_=void 0!==_.updateWhileAnimating&&_.updateWhileAnimating,this.updateWhileInteracting_=void 0!==_.updateWhileInteracting&&_.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(_){return super.getFeatures(_)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(_){_.declutterTree||(_.declutterTree=new F(9)),this.getRenderer().renderDeclutter(_)}setRenderOrder(_){this.set("renderOrder",_)}setStyle(_){let y;if(void 0===_)y=k.yF;else if(null===_)y=null;else if("function"==typeof _)y=_;else if(_ instanceof k.ZP)y=_;else if(Array.isArray(_)){const I=_.length,O=new Array(I);for(let E=0;E<I;++E){const R=_[E];O[E]=R instanceof k.ZP?R:f(R)}y=O}else y=f(_);this.style_=y,this.styleFunction_=null===_?void 0:(0,k.J$)(this.style_),this.changed()}}},1590:(jt,ht,a)=>{"use strict";a.d(ht,{V:()=>c,Z:()=>e});var z=a(4199),F=a(6108),k=a(1892),G=a(8802),Z=a(2431),A=a(1858),S=a(9219),P=a(5526),v=a(1316),f=a(3089),u=a(7847);class c extends G.ZP{constructor(m,s){super(m),this.layer=s}}class d extends z.Z{constructor(m){m=m||{};const s=Object.assign({},m);delete s.layers;let g=m.layers;super(s),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),g?Array.isArray(g)?g=new F.Z(g.slice(),{unique:!0}):(0,S.h)("function"==typeof g.getArray,43):g=new F.Z(void 0,{unique:!0}),this.setLayers(g)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(u.bN),this.layersListenerKeys_.length=0;const m=this.getLayers();this.layersListenerKeys_.push((0,u.oL)(m,k.Z.ADD,this.handleLayersAdd_,this),(0,u.oL)(m,k.Z.REMOVE,this.handleLayersRemove_,this));for(const g in this.listenerKeys_)this.listenerKeys_[g].forEach(u.bN);(0,P.Z)(this.listenerKeys_);const s=m.getArray();for(let g=0,_=s.length;g<_;g++){const y=s[g];this.registerLayerListeners_(y),this.dispatchEvent(new c("addlayer",y))}this.changed()}registerLayerListeners_(m){const s=[(0,u.oL)(m,A.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,u.oL)(m,Z.Z.CHANGE,this.handleLayerChange_,this)];m instanceof d&&s.push((0,u.oL)(m,"addlayer",this.handleLayerGroupAdd_,this),(0,u.oL)(m,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,f.sq)(m)]=s}handleLayerGroupAdd_(m){this.dispatchEvent(new c("addlayer",m.layer))}handleLayerGroupRemove_(m){this.dispatchEvent(new c("removelayer",m.layer))}handleLayersAdd_(m){const s=m.element;this.registerLayerListeners_(s),this.dispatchEvent(new c("addlayer",s)),this.changed()}handleLayersRemove_(m){const s=m.element,g=(0,f.sq)(s);this.listenerKeys_[g].forEach(u.bN),delete this.listenerKeys_[g],this.dispatchEvent(new c("removelayer",s)),this.changed()}getLayers(){return this.get("layers")}setLayers(m){const s=this.getLayers();if(s){const g=s.getArray();for(let _=0,y=g.length;_<y;++_)this.dispatchEvent(new c("removelayer",g[_]))}this.set("layers",m)}getLayersArray(m){return m=void 0!==m?m:[],this.getLayers().forEach(function(s){s.getLayersArray(m)}),m}getLayerStatesArray(m){const s=void 0!==m?m:[],g=s.length;this.getLayers().forEach(function(I){I.getLayerStatesArray(s)});const _=this.getLayerState();let y=_.zIndex;!m&&void 0===_.zIndex&&(y=0);for(let I=g,O=s.length;I<O;I++){const E=s[I];E.opacity*=_.opacity,E.visible=E.visible&&_.visible,E.maxResolution=Math.min(E.maxResolution,_.maxResolution),E.minResolution=Math.max(E.minResolution,_.minResolution),E.minZoom=Math.max(E.minZoom,_.minZoom),E.maxZoom=Math.min(E.maxZoom,_.maxZoom),void 0!==_.extent&&(E.extent=void 0!==E.extent?(0,v.Ed)(E.extent,_.extent):_.extent),void 0===E.zIndex&&(E.zIndex=y)}return s}getSourceState(){return"ready"}}const e=d},450:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var z=a(9107),F=a(4696);const G=class k extends z.Z{constructor(A){super(A)}createRenderer(){return new F.Z(this)}getData(A){return super.getData(A)}}},5209:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>u,j:()=>f});var z=a(4199),F=a(2431),k=a(916),G=a(8934),Z=a(6715),A=a(9219),S=a(1316),P=a(7847);function f(c,r){if(!c.visible)return!1;const d=r.resolution;if(d<c.minResolution||d>=c.maxResolution)return!1;const e=r.zoom;return e>c.minZoom&&e<=c.maxZoom}const u=class v extends z.Z{constructor(r){const d=Object.assign({},r);delete d.source,super(d),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,r.render&&(this.render=r.render),r.map&&this.setMap(r.map),this.addChangeListener(k.Z.SOURCE,this.handleSourcePropertyChange_),this.setSource(r.source?r.source:null)}getLayersArray(r){return(r=r||[]).push(this),r}getLayerStatesArray(r){return(r=r||[]).push(this.getLayerState()),r}getSource(){return this.get(k.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const r=this.getSource();return r?r.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,P.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const r=this.getSource();r&&(this.sourceChangeKey_=(0,P.oL)(r,F.Z.CHANGE,this.handleSourceChange_,this),"ready"===r.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(r){return this.renderer_?this.renderer_.getFeatures(r):Promise.resolve([])}getData(r){return this.renderer_&&this.rendered?this.renderer_.getData(r):null}isVisible(r){let d;const e=this.getMapInternal();let l;!r&&e&&(r=e.getView()),d=r instanceof Z.ZP?{viewState:r.getState(),extent:r.calculateExtent()}:r,!d.layerStatesArray&&e&&(d.layerStatesArray=e.getLayerGroup().getLayerStatesArray()),l=d.layerStatesArray?d.layerStatesArray.find(s=>s.layer===this):this.getLayerState();const m=this.getExtent();return f(l,d.viewState)&&(!m||(0,S.kK)(m,d.extent))}getAttributions(r){if(!this.isVisible(r))return[];let d;const e=this.getSource();if(e&&(d=e.getAttributions()),!d)return[];let m=d(r instanceof Z.ZP?r.getViewStateAndExtent():r);return Array.isArray(m)||(m=[m]),m}render(r,d){const e=this.getRenderer();return e.prepareFrame(r)?(this.rendered=!0,e.renderFrame(r,d)):null}unrender(){this.rendered=!1}setMapInternal(r){r||this.unrender(),this.set(k.Z.MAP,r)}getMapInternal(){return this.get(k.Z.MAP)}setMap(r){this.mapPrecomposeKey_&&((0,P.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&((0,P.bN)(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=(0,P.oL)(r,G.Z.PRECOMPOSE,function(d){const l=d.frameState.layerStatesArray,m=this.getLayerState(!1);(0,A.h)(!l.some(function(s){return s.layer===m.layer}),67),l.push(m)},this),this.mapRenderKey_=(0,P.oL)(this,F.Z.CHANGE,r.render,r),this.changed())}setSource(r){this.set(k.Z.SOURCE,r)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}},916:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},7729:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var z=a(2920),F=a(3083);const G=class k extends z.Z{constructor(A){super(A)}createRenderer(){return new F.Z(this)}}},5962:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},640:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var z=a(4203),F=a(5564);const G=class k extends z.Z{constructor(A){super(A)}createRenderer(){return new F.Z(this)}}},8412:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>y});var z=a(4203),F=a(223),k=a(341),G=a(3083),Z=a(5399),A=a(3701),S=a(1693),P=a(6412),v=a(1316),f=a(6259),u=a(3089),c=a(7298),r=a(1242);const d={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},e={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},m=class l extends G.Z{constructor(O){super(O),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedPixelToCoordinateTransform_=null,this.tmpTransform_=(0,P.Ue)()}prepareTile(O,E,R){let N;const K=O.getState();return(K===Z.Z.LOADED||K===Z.Z.ERROR)&&(this.updateExecutorGroup_(O,E,R),this.tileImageNeedsRender_(O)&&(N=!0)),N}getTile(O,E,R,N){const K=N.pixelRatio,rt=N.viewState,b=rt.resolution,L=rt.projection,w=this.getLayer(),M=w.getSource().getTile(O,E,R,K,L),C=N.viewHints,D=!(C[A.Z.ANIMATING]||C[A.Z.INTERACTING]);return(D||!M.wantedResolution)&&(M.wantedResolution=b),this.prepareTile(M,K,L)&&(D||Date.now()-N.time<8)&&"vector"!==w.getRenderMode()&&this.renderTileImage_(M,N),super.getTile(O,E,R,N)}isDrawableTile(O){const E=this.getLayer();return super.isDrawableTile(O)&&("vector"===E.getRenderMode()?(0,u.sq)(E)in O.executorGroups:O.hasContext(E))}getTileImage(O){return O.getImage(this.getLayer())}prepareFrame(O){const E=this.getLayer().getRevision();return this.renderedLayerRevision_!==E&&(this.renderedLayerRevision_=E,this.renderedTiles.length=0),super.prepareFrame(O)}updateExecutorGroup_(O,E,R){const N=this.getLayer(),K=N.getRevision(),rt=N.getRenderOrder()||null,b=O.wantedResolution,L=O.getReplayState(N);if(!L.dirty&&L.renderedResolution===b&&L.renderedRevision==K&&L.renderedRenderOrder==rt)return;const w=N.getSource(),M=N.getDeclutter(),C=w.getTileGrid(),Y=w.getTileGridForProjection(R).getTileCoordExtent(O.wrappedTileCoord),st=w.getSourceTiles(E,R,O),V=(0,u.sq)(N);delete O.hitDetectionImageData[V],O.executorGroups[V]=[],M&&(O.declutterExecutorGroups[V]=[]),L.dirty=!1;for(let at=0,ut=st.length;at<ut;++at){const Pt=st[at];if(Pt.getState()!=Z.Z.LOADED)continue;const Ot=C.getTileCoordExtent(Pt.tileCoord),At=(0,v.Ed)(Y,Ot),Gt=(0,v.f3)(At,N.getRenderBuffer()*b,this.tmpExtent),zt=(0,v.fS)(Ot,At)?null:Gt,qt=new F.Z(0,Gt,b,E),Xt=M?new F.Z(0,At,b,E):void 0,fe=(0,f.se)(b,E),he=function(Zt){let Vt;const pe=Zt.getStyleFunction()||N.getStyleFunction();if(pe&&(Vt=pe(Zt,b)),Vt){const Yt=this.renderFeature(Zt,fe,Vt,qt,Xt);L.dirty=L.dirty||Yt}},ce=Pt.getFeatures();rt&&rt!==L.renderedRenderOrder&&ce.sort(rt);for(let Zt=0,Vt=ce.length;Zt<Vt;++Zt){const pe=ce[Zt];(!zt||(0,v.kK)(zt,pe.getGeometry().getExtent()))&&he.call(this,pe)}const Ce=qt.finish(),ft="vector"!==N.getRenderMode()&&M&&1===st.length?null:At,Ct=new k.Z(ft,b,E,w.getOverlaps(),Ce,N.getRenderBuffer());if(O.executorGroups[V].push(Ct),Xt){const Zt=new k.Z(null,b,E,w.getOverlaps(),Xt.finish(),N.getRenderBuffer());O.declutterExecutorGroups[V].push(Zt)}}L.renderedRevision=K,L.renderedRenderOrder=rt,L.renderedResolution=b}forEachFeatureAtCoordinate(O,E,R,N,K){const rt=E.viewState.resolution,b=E.viewState.rotation;R=R??0;const L=this.getLayer(),M=L.getSource().getTileGridForProjection(E.viewState.projection),C=(0,v.hI)([O]);(0,v.f3)(C,rt*R,C);const D={},Y=function(at,ut,Pt){let vt=at.getId();void 0===vt&&(vt=(0,u.sq)(at));const Ot=D[vt];if(Ot){if(!0!==Ot&&Pt<Ot.distanceSq){if(0===Pt)return D[vt]=!0,K.splice(K.lastIndexOf(Ot),1),N(at,L,ut);Ot.geometry=ut,Ot.distanceSq=Pt}}else{if(0===Pt)return D[vt]=!0,N(at,L,ut);K.push(D[vt]={feature:at,layer:L,geometry:ut,distanceSq:Pt,callback:N})}},st=this.renderedTiles;let V;for(let at=0,ut=st.length;!V&&at<ut;++at){const Pt=st[at],vt=M.getTileCoordExtent(Pt.wrappedTileCoord);if(!(0,v.kK)(vt,C))continue;const Ot=(0,u.sq)(L),At=[Pt.executorGroups[Ot]],Gt=Pt.declutterExecutorGroups[Ot];Gt&&At.push(Gt),At.some(zt=>{const qt=zt===Gt?E.declutterTree.all().map(Xt=>Xt.value):null;for(let Xt=0,fe=zt.length;Xt<fe;++Xt)if(V=zt[Xt].forEachFeatureAtCoordinate(O,rt,b,R,Y,qt),V)return!0})}return V}getFeatures(O){return new Promise((E,R)=>{const N=this.getLayer(),K=(0,u.sq)(N),rt=N.getSource(),b=this.renderedProjection,L=b.getExtent(),w=this.renderedResolution,M=rt.getTileGridForProjection(b),C=(0,P.nn)(this.renderedPixelToCoordinateTransform_,O.slice()),D=M.getTileCoordForCoordAndResolution(C,w);let Y;for(let vt=0,Ot=this.renderedTiles.length;vt<Ot;++vt)if(D.toString()===this.renderedTiles[vt].tileCoord.toString()){if(Y=this.renderedTiles[vt],Y.getState()===Z.Z.LOADED){const At=M.getTileCoordExtent(Y.tileCoord);rt.getWrapX()&&b.canWrapX()&&!(0,v.r4)(L,At)&&(0,r.Cf)(C,b);break}Y=void 0}if(!Y||Y.loadingSourceTiles>0)return void E([]);const st=M.getTileCoordExtent(Y.wrappedTileCoord),V=(0,v.rL)(st),at=[(C[0]-V[0])/w,(V[1]-C[1])/w],ut=Y.getSourceTiles().reduce(function(vt,Ot){return vt.concat(Ot.getFeatures())},[]);let Pt=Y.hitDetectionImageData[K];if(!Pt){const vt=(0,c.Pq)(M.getTileSize(M.getZForResolution(w,rt.zDirection))),Ot=this.renderedRotation_,At=[this.getRenderTransform(M.getTileCoordCenter(Y.wrappedTileCoord),w,0,S.UN,vt[0]*S.UN,vt[1]*S.UN,0)];Pt=(0,S.TU)(vt,At,ut,N.getStyleFunction(),M.getTileCoordExtent(Y.wrappedTileCoord),Y.getReplayState(N).renderedResolution,Ot),Y.hitDetectionImageData[K]=Pt}E((0,S.ix)(at,ut,Pt))})}handleFontsChanged(){const O=this.getLayer();O.getVisible()&&void 0!==this.renderedLayerRevision_&&O.changed()}handleStyleImageChange_(O){this.renderIfReadyAndVisible()}renderDeclutter(O){const E=this.context,R=E.globalAlpha;E.globalAlpha=this.getLayer().getOpacity();const N=O.viewHints,K=!(N[A.Z.ANIMATING]||N[A.Z.INTERACTING]),rt=this.renderedTiles;for(let b=0,L=rt.length;b<L;++b){const w=rt[b],M=w.declutterExecutorGroups[(0,u.sq)(this.getLayer())];if(M)for(let C=M.length-1;C>=0;--C)M[C].execute(this.context,1,this.getTileRenderTransform(w,O),O.viewState.rotation,K,void 0,O.declutterTree)}E.globalAlpha=R}getTileRenderTransform(O,E){const R=E.pixelRatio,N=E.viewState,K=N.center,rt=N.resolution,b=N.rotation,L=E.size,w=Math.round(L[0]*R),M=Math.round(L[1]*R),D=this.getLayer().getSource().getTileGridForProjection(E.viewState.projection),Y=O.tileCoord,st=D.getTileCoordExtent(O.wrappedTileCoord),V=D.getTileCoordExtent(Y,this.tmpExtent)[0]-st[0];return(0,P.Jp)((0,P.bA)(this.inversePixelTransform.slice(),1/R,1/R),this.getRenderTransform(K,rt,b,R,w,M,V))}postRender(O,E){const R=E.viewHints,N=!(R[A.Z.ANIMATING]||R[A.Z.INTERACTING]);this.renderedPixelToCoordinateTransform_=E.pixelToCoordinateTransform.slice(),this.renderedRotation_=E.viewState.rotation;const K=this.getLayer(),rt=K.getRenderMode(),b=O.globalAlpha;O.globalAlpha=K.getOpacity();const L=e[rt],w=E.viewState,M=w.rotation,C=K.getSource(),Y=C.getTileGridForProjection(w.projection).getZForResolution(w.resolution,C.zDirection),st=this.renderedTiles,V=[],at=[];let ut=!0;for(let Pt=st.length-1;Pt>=0;--Pt){const vt=st[Pt];ut=ut&&!vt.getReplayState(K).dirty;const Ot=vt.executorGroups[(0,u.sq)(K)].filter(Xt=>Xt.hasExecutors(L));if(0===Ot.length)continue;const At=this.getTileRenderTransform(vt,E),Gt=vt.tileCoord[0];let zt=!1;const qt=Ot[0].getClipCoords(At);if(qt){for(let Xt=0,fe=V.length;Xt<fe;++Xt)if(Y!==Gt&&Gt<at[Xt]){const he=V[Xt];(0,v.kK)([qt[0],qt[3],qt[4],qt[7]],[he[0],he[3],he[4],he[7]])&&(zt||(O.save(),zt=!0),O.beginPath(),O.moveTo(qt[0],qt[1]),O.lineTo(qt[2],qt[3]),O.lineTo(qt[4],qt[5]),O.lineTo(qt[6],qt[7]),O.moveTo(he[6],he[7]),O.lineTo(he[4],he[5]),O.lineTo(he[2],he[3]),O.lineTo(he[0],he[1]),O.clip())}V.push(qt),at.push(Gt)}for(let Xt=0,fe=Ot.length;Xt<fe;++Xt)Ot[Xt].execute(O,1,At,M,N,L);zt&&O.restore()}O.globalAlpha=b,this.ready=ut,super.postRender(O,E)}renderFeature(O,E,R,N,K){if(!R)return!1;let rt=!1;if(Array.isArray(R))for(let b=0,L=R.length;b<L;++b)rt=(0,f.Pn)(N,O,R[b],E,this.boundHandleStyleImageChange_,void 0,K)||rt;else rt=(0,f.Pn)(N,O,R,E,this.boundHandleStyleImageChange_,void 0,K);return rt}tileImageNeedsRender_(O){const E=this.getLayer();if("vector"===E.getRenderMode())return!1;const R=O.getReplayState(E),N=E.getRevision();return R.renderedTileResolution!==O.wantedResolution||R.renderedTileRevision!==N}renderTileImage_(O,E){const R=this.getLayer(),N=O.getReplayState(R),K=R.getRevision(),rt=O.executorGroups[(0,u.sq)(R)];N.renderedTileRevision=K;const b=O.wrappedTileCoord,L=b[0],w=R.getSource();let M=E.pixelRatio;const D=E.viewState.projection,Y=w.getTileGridForProjection(D),st=Y.getResolution(O.tileCoord[0]),V=E.pixelRatio/O.wantedResolution*st,at=Y.getResolution(L),ut=O.getContext(R);M=Math.round(Math.max(M,V/M));const Pt=w.getTilePixelSize(L,M,D);ut.canvas.width=Pt[0],ut.canvas.height=Pt[1];const vt=M/V;if(1!==vt){const zt=(0,P.mc)(this.tmpTransform_);(0,P.bA)(zt,vt,vt),ut.setTransform.apply(ut,zt)}const Ot=Y.getTileCoordExtent(b,this.tmpExtent),At=V/at,Gt=(0,P.mc)(this.tmpTransform_);(0,P.bA)(Gt,At,-At),(0,P.Iu)(Gt,-Ot[0],-Ot[3]);for(let zt=0,qt=rt.length;zt<qt;++zt)rt[zt].execute(ut,vt,Gt,0,!0,d[R.getRenderMode()]);N.renderedTileResolution=O.wantedResolution}};var s=a(5962),g=a(9219);const y=class _ extends z.Z{constructor(O){O=O||{};const E=Object.assign({},O);delete E.preload,delete E.useInterimTilesOnError,super(E);const R=O.renderMode||"hybrid";(0,g.h)("hybrid"==R||"vector"==R,28),this.renderMode_=R,this.setPreload(O.preload?O.preload:0),this.setUseInterimTilesOnError(void 0===O.useInterimTilesOnError||O.useInterimTilesOnError)}createRenderer(){return new m(this)}getFeatures(O){return super.getFeatures(O)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(s.Z.PRELOAD)}getUseInterimTilesOnError(){return this.get(s.Z.USE_INTERIM_TILES_ON_ERROR)}setPreload(O){this.set(s.Z.PRELOAD,O)}setUseInterimTilesOnError(O){this.set(s.Z.USE_INTERIM_TILES_ON_ERROR,O)}}},1318:(jt,ht,a)=>{"use strict";function F(Z,A){return[[-1/0,-1/0,1/0,1/0]]}function k(Z,A){return[Z]}a.d(ht,{$6:()=>F,VW:()=>k}),a(7021)},3026:(jt,ht,a)=>{"use strict";function z(r,d,e){return Math.min(Math.max(r,d),e)}function F(r,d,e,l,m,s){const g=m-e,_=s-l;if(0!==g||0!==_){const y=((r-e)*g+(d-l)*_)/(g*g+_*_);y>1?(e=m,l=s):y>0&&(e+=g*y,l+=_*y)}return k(r,d,e,l)}function k(r,d,e,l){const m=e-r,s=l-d;return m*m+s*s}function G(r){const d=r.length;for(let l=0;l<d;l++){let m=l,s=Math.abs(r[l][l]);for(let _=l+1;_<d;_++){const y=Math.abs(r[_][l]);y>s&&(s=y,m=_)}if(0===s)return null;const g=r[m];r[m]=r[l],r[l]=g;for(let _=l+1;_<d;_++){const y=-r[_][l]/r[l][l];for(let I=l;I<d+1;I++)l==I?r[_][I]=0:r[_][I]+=y*r[l][I]}}const e=new Array(d);for(let l=d-1;l>=0;l--){e[l]=r[l][d]/r[l][l];for(let m=l-1;m>=0;m--)r[m][d]-=r[m][l]*e[l]}return e}function A(r){return r*Math.PI/180}function S(r,d){const e=r%d;return e*d<0?e+d:e}function P(r,d,e){return r+e*(d-r)}function v(r,d){const e=Math.pow(10,d);return Math.round(r*e)/e}function f(r,d){return Math.round(v(r,d))}function u(r,d){return Math.floor(v(r,d))}function c(r,d){return Math.ceil(v(r,d))}a.d(ht,{$W:()=>S,FH:()=>v,GW:()=>u,NM:()=>f,SV:()=>G,Yr:()=>A,bI:()=>k,mD:()=>c,rU:()=>F,t7:()=>P,uZ:()=>z})},5526:(jt,ht,a)=>{"use strict";function z(k){for(const G in k)delete k[G]}function F(k){let G;for(G in k)return!1;return!G}a.d(ht,{Z:()=>z,x:()=>F})},4256:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},7021:(jt,ht,a)=>{"use strict";a.d(ht,{Wm:()=>l.W,kv:()=>z.Z,zY:()=>qt,rM:()=>vt,Sx:()=>V,UQ:()=>Gt,uA:()=>Me,h_:()=>D,OP:()=>he,mi:()=>Xt,Vs:()=>Wt,dY:()=>ue,U2:()=>ut,_Q:()=>Pt,Ck:()=>Ce,WO:()=>ce,Cs:()=>gt,gD:()=>st,lO:()=>Ft,Fj:()=>Bt,on:()=>ge,vs:()=>ft,$A:()=>Ct});var z=a(8340);const F=6378137,k=Math.PI*F,G=[-k,-k,k,k],Z=[-180,-85,180,85],A=F*Math.log(Math.tan(Math.PI/2));class S extends z.Z{constructor(x){super({code:x,units:"m",extent:G,global:!0,worldExtent:Z,getPointResolution:function(W,tt){return W/Math.cosh(tt[1]/F)}})}}const P=[new S("EPSG:3857"),new S("EPSG:102100"),new S("EPSG:102113"),new S("EPSG:900913"),new S("http://www.opengis.net/def/crs/EPSG/0/3857"),new S("http://www.opengis.net/gml/srs/epsg.xml#3857")];function v(Q,x,W){const tt=Q.length;W=W>1?W:2,void 0===x&&(x=W>2?Q.slice():new Array(tt));for(let et=0;et<tt;et+=W){x[et]=k*Q[et]/180;let yt=F*Math.log(Math.tan(Math.PI*(+Q[et+1]+90)/360));yt>A?yt=A:yt<-A&&(yt=-A),x[et+1]=yt}return x}function f(Q,x,W){const tt=Q.length;W=W>1?W:2,void 0===x&&(x=W>2?Q.slice():new Array(tt));for(let et=0;et<tt;et+=W)x[et]=180*Q[et]/k,x[et+1]=360*Math.atan(Math.exp(Q[et+1]/F))/Math.PI-90;return x}const c=[-180,-90,180,90],r=6378137*Math.PI/180;class d extends z.Z{constructor(x,W){super({code:x,units:"degrees",extent:c,axisOrientation:W,global:!0,metersPerUnit:r,worldExtent:c})}}const e=[new d("CRS:84"),new d("EPSG:4326","neu"),new d("urn:ogc:def:crs:OGC:1.3:CRS84"),new d("urn:ogc:def:crs:OGC:2:84"),new d("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new d("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new d("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var l=a(932);let m={};var y=a(808),I=a(1316),O=a(3026),E=a(1242);const R=6371008.8;function N(Q,x,W){W=W||R;const tt=(0,O.Yr)(Q[1]),et=(0,O.Yr)(x[1]),yt=(et-tt)/2,Et=(0,O.Yr)(x[0]-Q[0])/2,It=Math.sin(yt)*Math.sin(yt)+Math.sin(Et)*Math.sin(Et)*Math.cos(tt)*Math.cos(et);return 2*W*Math.atan2(Math.sqrt(It),Math.sqrt(1-It))}var M=a(6518);let C=!0;function D(Q){C=!(void 0===Q||Q)}function Y(Q,x){if(void 0!==x)for(let W=0,tt=Q.length;W<tt;++W)x[W]=Q[W];else x=Q.slice();return x}function st(Q,x){if(void 0!==x&&Q!==x){for(let W=0,tt=Q.length;W<tt;++W)x[W]=Q[W];Q=x}return Q}function V(Q){(function _(Q,x){m[Q]=x})(Q.getCode(),Q),(0,y.IH)(Q,Q,Y)}function ut(Q){return"string"==typeof Q?function g(Q){return m[Q]||m[Q.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(Q):Q||null}function Pt(Q,x,W,tt){let et;const yt=(Q=ut(Q)).getPointResolutionFunc();if(yt){if(et=yt(x,W),tt&&tt!==Q.getUnits()){const Et=Q.getMetersPerUnit();Et&&(et=et*Et/l.W[tt])}}else{const Et=Q.getUnits();if("degrees"==Et&&!tt||"degrees"==tt)et=x;else{const It=ce(Q,ut("EPSG:4326"));if(It===st&&"degrees"!==Et)et=x*Q.getMetersPerUnit();else{let Jt=[W[0]-x/2,W[1],W[0]+x/2,W[1],W[0],W[1]-x/2,W[0],W[1]+x/2];Jt=It(Jt,Jt,2),et=(N(Jt.slice(0,2),Jt.slice(2,4))+N(Jt.slice(4,6),Jt.slice(6,8)))/2}const wt=tt?l.W[tt]:Q.getMetersPerUnit();void 0!==wt&&(et/=wt)}}return et}function vt(Q){(function at(Q){Q.forEach(V)})(Q),Q.forEach(function(x){Q.forEach(function(W){x!==W&&(0,y.IH)(x,W,Y)})})}function Gt(Q,x){return Q?"string"==typeof Q?ut(Q):Q:ut(x)}function zt(Q){return function(x,W,tt){const et=x.length;tt=void 0!==tt?tt:2,W=void 0!==W?W:new Array(et);for(let yt=0;yt<et;yt+=tt){const Et=Q(x.slice(yt,yt+tt)),It=Et.length;for(let wt=0,Jt=tt;wt<Jt;++wt)W[yt+wt]=wt>=It?x[yt+wt]:Et[wt]}return W}}function qt(Q,x,W,tt){const et=ut(Q),yt=ut(x);(0,y.IH)(et,yt,zt(W)),(0,y.IH)(yt,et,zt(tt))}function Xt(Q,x){return D(),ft(Q,"EPSG:4326",void 0!==x?x:"EPSG:3857")}function he(Q,x){if(Q===x)return!0;const W=Q.getUnits()===x.getUnits();return(Q.getCode()===x.getCode()||ce(Q,x)===Y)&&W}function ce(Q,x){const W=Q.getCode(),tt=x.getCode();let et=(0,y.U2)(W,tt);return et||(et=st),et}function Ce(Q,x){return ce(ut(Q),ut(x))}function ft(Q,x,W){return Ce(x,W)(Q,void 0,Q.length)}function Ct(Q,x,W,tt){const et=Ce(x,W);return(0,I.Ne)(Q,et,void 0,tt)}let Vt=null;function gt(){return Vt}function Ft(Q,x){return Vt?ft(Q,x,Vt):Q}function Wt(Q,x){return Vt?ft(Q,Vt,x):(C&&!(0,E.fS)(Q,[0,0])&&Q[0]>=-180&&Q[0]<=180&&Q[1]>=-90&&Q[1]<=90&&(C=!1,(0,M.ZK)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),Q)}function Bt(Q,x){return Vt?Ct(Q,x,Vt):Q}function ue(Q,x){return Vt?Ct(Q,Vt,x):Q}function ge(Q,x){if(!Vt)return Q;const W=ut(x).getUnits(),tt=Vt.getUnits();return W&&tt?Q*l.W[W]/l.W[tt]:Q}function Me(Q,x,W){return function(tt){let et,yt;if(Q.canWrapX()){const Et=Q.getExtent(),It=(0,I.dz)(Et);tt=tt.slice(0),yt=(0,E.jk)(tt,Q,It),yt&&(tt[0]=tt[0]-yt*It),tt[0]=(0,O.uZ)(tt[0],Et[0],Et[2]),tt[1]=(0,O.uZ)(tt[1],Et[1],Et[3]),et=W(tt)}else et=W(tt);return yt&&x.canWrapX()&&(et[0]+=yt*(0,I.dz)(x.getExtent())),et}}!function nt(){vt(P),vt(e),function Ot(Q,x,W,tt){Q.forEach(function(et){x.forEach(function(yt){(0,y.IH)(et,yt,W),(0,y.IH)(yt,et,tt)})})}(e,P,v,f)}()},8340:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>k});var z=a(932);const k=class F{constructor(Z){this.code_=Z.code,this.units_=Z.units,this.extent_=void 0!==Z.extent?Z.extent:null,this.worldExtent_=void 0!==Z.worldExtent?Z.worldExtent:null,this.axisOrientation_=void 0!==Z.axisOrientation?Z.axisOrientation:"enu",this.global_=void 0!==Z.global&&Z.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=Z.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=Z.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||z.W[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(Z){this.global_=Z,this.canWrapX_=!(!Z||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(Z){this.defaultTileGrid_=Z}setExtent(Z){this.extent_=Z,this.canWrapX_=!(!this.global_||!Z)}setWorldExtent(Z){this.worldExtent_=Z}setGetPointResolution(Z){this.getPointResolutionFunc_=Z}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},932:(jt,ht,a)=>{"use strict";a.d(ht,{W:()=>k});const k={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},7498:(jt,ht,a)=>{"use strict";a.d(ht,{z2:()=>S});var z=a(8340),F=a(7021),k=a(808);let G=null;function S(d){G=d;const e=Object.keys(d.defs),l=e.length;let m,s;for(m=0;m<l;++m){const g=e[m];if(!(0,F.U2)(g)){const _=d.defs(g);let y=_.units;!y&&"longlat"===_.projName&&(y="degrees"),(0,F.Sx)(new z.Z({code:g,axisOrientation:_.axis,metersPerUnit:_.to_meter,units:y}))}}for(m=0;m<l;++m){const g=e[m],_=(0,F.U2)(g);for(s=0;s<l;++s){const y=e[s],I=(0,F.U2)(y);if(!(0,k.U2)(g,y))if(d.defs[g]===d.defs[y])(0,F.rM)([_,I]);else{const O=d(g,y);(0,F.zY)(_,I,(0,F.uA)(_,I,O.forward),(0,F.uA)(I,_,O.inverse))}}}}},808:(jt,ht,a)=>{"use strict";a.d(ht,{IH:()=>k,U2:()=>Z});let z={};function k(A,S,P){const v=A.getCode(),f=S.getCode();v in z||(z[v]={}),z[v][f]=P}function Z(A,S){let P;return A in z&&S in z[A]&&(P=z[A][S]),P}},891:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>k});var z=a(8802);const k=class F extends z.ZP{constructor(Z,A,S,P){super(Z),this.inversePixelTransform=A,this.frameState=S,this.context=P}}},8934:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},6198:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>r});var z=a(6412),F=a(1316),k=a(9363),G=a(6937),Z=a(7021),A=a(6735),S=a(1758),P=a(342);const v=(0,z.Ue)();class f{constructor(e,l,m,s,g){this.id_=g,this.type_=e,this.flatCoordinates_=l,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=m,this.properties_=s}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,F.HK)(this.flatCoordinates_):(0,F.GN)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=(0,F.qg)(this.getExtent());this.flatInteriorPoints_=(0,G.X)(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=(0,S.E)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,G.U)(this.flatCoordinates_,0,this.ends_,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,A.WW)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let l=0;const m=this.ends_;for(let s=0,g=m.length;s<g;++s){const _=m[s],y=(0,A.WW)(e,l,_,2,.5);(0,k.l7)(this.flatMidpoints_,y),l=_}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,l){return this}getProperties(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){const l=(e=(0,Z.U2)(e)).getExtent(),m=e.getWorldExtent();if(l&&m){const s=(0,F.Cr)(m)/(0,F.Cr)(l);(0,z.qC)(v,m[0],m[3],s,-s,0,0,0),(0,P.vT)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,v,this.flatCoordinates_)}}getEnds(){return this.ends_}}f.prototype.getEndss=f.prototype.getEnds,f.prototype.getFlatCoordinates=f.prototype.getOrientedFlatCoordinates;const r=f},3903:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>F});const F=class z{drawCustom(G,Z,A,S){}drawGeometry(G){}setStyle(G){}drawCircle(G,Z){}drawFeature(G,Z){}drawGeometryCollection(G,Z){}drawLineString(G,Z){}drawMultiLineString(G,Z){}drawMultiPoint(G,Z){}drawMultiPolygon(G,Z){}drawPoint(G,Z){}drawPolygon(G,Z){}drawText(G,Z){}setFillStrokeStyle(G,Z){}setImageStyle(G,Z){}setTextStyle(G,Z){}}},6380:(jt,ht,a)=>{"use strict";a.d(ht,{Df:()=>A,He:()=>f,Kd:()=>N,PH:()=>d,Qx:()=>I,Tx:()=>r,V4:()=>c,X9:()=>v,Zw:()=>K,_f:()=>b,bL:()=>S,mb:()=>P,oB:()=>l,rc:()=>u,ru:()=>e,sG:()=>s,yC:()=>m});var z=a(7300),F=a(3233),k=a(5526),G=a(4211),Z=a(4118);const A="10px sans-serif",S="#000",P="round",v=[],f=0,u="round",c=10,r="#000",d="center",e="middle",l=[0,0,0,0],m=1,s=new z.Z;let _,g=null;const y={},I=function(){const M="32px ",C=["monospace","serif"],D=C.length,Y="wmytzilWMYTZIL@#/&?$%10\uf013";let st,V;function at(Pt,vt,Ot){let At=!0;for(let Gt=0;Gt<D;++Gt){const zt=C[Gt];if(V=R(Pt+" "+vt+" "+M+zt,Y),Ot!=zt){const qt=R(Pt+" "+vt+" "+M+Ot+","+zt,Y);At=At&&qt!=V}}return!!At}function ut(){let Pt=!0;const vt=s.getKeys();for(let Ot=0,At=vt.length;Ot<At;++Ot){const Gt=vt[Ot];s.get(Gt)<100&&(at.apply(this,Gt.split("\n"))?((0,k.Z)(y),g=null,_=void 0,s.set(Gt,100)):(s.set(Gt,s.get(Gt)+1,!0),Pt=!1))}Pt&&(clearInterval(st),st=void 0)}return function(Pt){const vt=(0,Z.p)(Pt);if(!vt)return;const Ot=vt.families;for(let At=0,Gt=Ot.length;At<Gt;++At){const zt=Ot[At],qt=vt.style+"\n"+vt.weight+"\n"+zt;void 0===s.get(qt)&&(s.set(qt,100,!0),at(vt.style,vt.weight,zt)||(s.set(qt,0,!0),void 0===st&&(st=setInterval(ut,32))))}}}(),O=function(){let w;return function(M){let C=y[M];if(null==C){if(F.Id){const D=(0,Z.p)(M),Y=E(M,"\u017dg");C=(isNaN(Number(D.lineHeight))?1.2:Number(D.lineHeight))*(Y.actualBoundingBoxAscent+Y.actualBoundingBoxDescent)}else w||(w=document.createElement("div"),w.innerHTML="M",w.style.minHeight="0",w.style.maxHeight="none",w.style.height="auto",w.style.padding="0",w.style.border="none",w.style.position="absolute",w.style.display="block",w.style.left="-99999px"),w.style.font=M,document.body.appendChild(w),C=w.offsetHeight,document.body.removeChild(w);y[M]=C}return C}}();function E(w,M){return g||(g=(0,G.E4)(1,1)),w!=_&&(g.font=w,_=g.font),g.measureText(M)}function R(w,M){return E(w,M).width}function N(w,M,C){if(M in C)return C[M];const D=M.split("\n").reduce((Y,st)=>Math.max(Y,R(w,st)),0);return C[M]=D,D}function K(w,M){const C=[],D=[],Y=[];let st=0,V=0,at=0,ut=0;for(let Pt=0,vt=M.length;Pt<=vt;Pt+=2){const Ot=M[Pt];if("\n"===Ot||Pt===vt){st=Math.max(st,V),Y.push(V),V=0,at+=ut;continue}const At=M[Pt+1]||w.font,Gt=R(At,Ot);C.push(Gt),V+=Gt;const zt=O(At);D.push(zt),ut=Math.max(ut,zt)}return{width:st,height:at,widths:C,heights:D,lineWidths:Y}}function b(w,M,C,D,Y,st,V,at,ut,Pt,vt){w.save(),1!==C&&(w.globalAlpha*=C),M&&w.setTransform.apply(w,M),D.contextInstructions?(w.translate(ut,Pt),w.scale(vt[0],vt[1]),function L(w,M){const C=w.contextInstructions;for(let D=0,Y=C.length;D<Y;D+=2)Array.isArray(C[D+1])?M[C[D]].apply(M,C[D+1]):M[C[D]]=C[D+1]}(D,w)):vt[0]<0||vt[1]<0?(w.translate(ut,Pt),w.scale(vt[0],vt[1]),w.drawImage(D,Y,st,V,at,0,0,V,at)):w.drawImage(D,Y,st,V,at,ut,Pt,V*vt[0],at*vt[1]),w.restore()}},7231:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>f});var z=a(8626),F=a(6600),k=a(3903),G=a(3836),Z=a(1316),A=a(6380),S=a(9363),P=a(2754);const f=class v extends k.Z{constructor(c,r,d,e){super(),this.tolerance=c,this.maxExtent=r,this.pixelRatio=e,this.maxLineWidth=0,this.resolution=d,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(c){const r=this.pixelRatio;return 1==r?c:c.map(function(d){return d*r})}appendFlatPointCoordinates(c,r){const d=this.getBufferedMaxExtent(),e=this.tmpCoordinate_,l=this.coordinates;let m=l.length;for(let s=0,g=c.length;s<g;s+=r)e[0]=c[s],e[1]=c[s+1],(0,Z.b8)(d,e)&&(l[m++]=e[0],l[m++]=e[1]);return m}appendFlatLineCoordinates(c,r,d,e,l,m){const s=this.coordinates;let g=s.length;const _=this.getBufferedMaxExtent();m&&(r+=e);let y=c[r],I=c[r+1];const O=this.tmpCoordinate_;let R,N,K,E=!0;for(R=r+e;R<d;R+=e)O[0]=c[R],O[1]=c[R+1],K=(0,Z.pX)(_,O),K!==N?(E&&(s[g++]=y,s[g++]=I,E=!1),s[g++]=O[0],s[g++]=O[1]):K===F.Z.INTERSECTING?(s[g++]=O[0],s[g++]=O[1],E=!1):E=!0,y=O[0],I=O[1],N=K;return(l&&E||R===r+e)&&(s[g++]=y,s[g++]=I),g}drawCustomCoordinates_(c,r,d,e,l){for(let m=0,s=d.length;m<s;++m){const g=d[m],_=this.appendFlatLineCoordinates(c,r,g,e,!1,!1);l.push(_),r=g}return r}drawCustom(c,r,d,e){this.beginGeometry(c,r);const l=c.getType(),m=c.getStride(),s=this.coordinates.length;let g,_,y,I,O;switch(l){case"MultiPolygon":g=c.getOrientedFlatCoordinates(),I=[];const E=c.getEndss();O=0;for(let R=0,N=E.length;R<N;++R){const K=[];O=this.drawCustomCoordinates_(g,O,E[R],m,K),I.push(K)}this.instructions.push([z.ZP.CUSTOM,s,I,c,d,P.ug]),this.hitDetectionInstructions.push([z.ZP.CUSTOM,s,I,c,e||d,P.ug]);break;case"Polygon":case"MultiLineString":y=[],g="Polygon"==l?c.getOrientedFlatCoordinates():c.getFlatCoordinates(),O=this.drawCustomCoordinates_(g,0,c.getEnds(),m,y),this.instructions.push([z.ZP.CUSTOM,s,y,c,d,P.o1]),this.hitDetectionInstructions.push([z.ZP.CUSTOM,s,y,c,e||d,P.o1]);break;case"LineString":case"Circle":g=c.getFlatCoordinates(),_=this.appendFlatLineCoordinates(g,0,g.length,m,!1,!1),this.instructions.push([z.ZP.CUSTOM,s,_,c,d,P.Ml]),this.hitDetectionInstructions.push([z.ZP.CUSTOM,s,_,c,e||d,P.Ml]);break;case"MultiPoint":g=c.getFlatCoordinates(),_=this.appendFlatPointCoordinates(g,m),_>s&&(this.instructions.push([z.ZP.CUSTOM,s,_,c,d,P.Ml]),this.hitDetectionInstructions.push([z.ZP.CUSTOM,s,_,c,e||d,P.Ml]));break;case"Point":g=c.getFlatCoordinates(),this.coordinates.push(g[0],g[1]),_=this.coordinates.length,this.instructions.push([z.ZP.CUSTOM,s,_,c,d]),this.hitDetectionInstructions.push([z.ZP.CUSTOM,s,_,c,e||d])}this.endGeometry(r)}beginGeometry(c,r){this.beginGeometryInstruction1_=[z.ZP.BEGIN_GEOMETRY,r,0,c],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[z.ZP.BEGIN_GEOMETRY,r,0,c],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const c=this.hitDetectionInstructions;let r;c.reverse();const d=c.length;let e,l,m=-1;for(r=0;r<d;++r)e=c[r],l=e[0],l==z.ZP.END_GEOMETRY?m=r:l==z.ZP.BEGIN_GEOMETRY&&(e[2]=r,(0,S.FZ)(this.hitDetectionInstructions,m,r),m=-1)}setFillStrokeStyle(c,r){const d=this.state;if(c){const e=c.getColor();d.fillStyle=(0,G.y)(e||A.bL)}else d.fillStyle=void 0;if(r){const e=r.getColor();d.strokeStyle=(0,G.y)(e||A.Tx);const l=r.getLineCap();d.lineCap=void 0!==l?l:A.mb;const m=r.getLineDash();d.lineDash=m?m.slice():A.X9;const s=r.getLineDashOffset();d.lineDashOffset=s||A.He;const g=r.getLineJoin();d.lineJoin=void 0!==g?g:A.rc;const _=r.getWidth();d.lineWidth=void 0!==_?_:A.yC;const y=r.getMiterLimit();d.miterLimit=void 0!==y?y:A.V4,d.lineWidth>this.maxLineWidth&&(this.maxLineWidth=d.lineWidth,this.bufferedMaxExtent_=null)}else d.strokeStyle=void 0,d.lineCap=void 0,d.lineDash=null,d.lineDashOffset=void 0,d.lineJoin=void 0,d.lineWidth=void 0,d.miterLimit=void 0}createFill(c){const r=c.fillStyle,d=[z.ZP.SET_FILL_STYLE,r];return"string"!=typeof r&&d.push(!0),d}applyStroke(c){this.instructions.push(this.createStroke(c))}createStroke(c){return[z.ZP.SET_STROKE_STYLE,c.strokeStyle,c.lineWidth*this.pixelRatio,c.lineCap,c.lineJoin,c.miterLimit,this.applyPixelRatio(c.lineDash),c.lineDashOffset*this.pixelRatio]}updateFillStyle(c,r){const d=c.fillStyle;("string"!=typeof d||c.currentFillStyle!=d)&&(void 0!==d&&this.instructions.push(r.call(this,c)),c.currentFillStyle=d)}updateStrokeStyle(c,r){const d=c.strokeStyle,e=c.lineCap,l=c.lineDash,m=c.lineDashOffset,s=c.lineJoin,g=c.lineWidth,_=c.miterLimit;(c.currentStrokeStyle!=d||c.currentLineCap!=e||l!=c.currentLineDash&&!(0,S.fS)(c.currentLineDash,l)||c.currentLineDashOffset!=m||c.currentLineJoin!=s||c.currentLineWidth!=g||c.currentMiterLimit!=_)&&(void 0!==d&&r.call(this,c),c.currentStrokeStyle=d,c.currentLineCap=e,c.currentLineDash=l,c.currentLineDashOffset=m,c.currentLineJoin=s,c.currentLineWidth=g,c.currentMiterLimit=_)}endGeometry(c){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const r=[z.ZP.END_GEOMETRY,c];this.instructions.push(r),this.hitDetectionInstructions.push(r)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,Z.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,Z.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}}},223:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>d});var z=a(7231),F=a(8626);var Z=a(6380);var P=a(7904);const f=class v extends z.Z{constructor(l,m,s,g){super(l,m,s,g)}drawFlatCoordinatess_(l,m,s,g){const _=this.state,y=void 0!==_.fillStyle,I=void 0!==_.strokeStyle,O=s.length;this.instructions.push(F.$O),this.hitDetectionInstructions.push(F.$O);for(let E=0;E<O;++E){const R=s[E],N=this.coordinates.length,K=this.appendFlatLineCoordinates(l,m,R,g,!0,!I),rt=[F.ZP.MOVE_TO_LINE_TO,N,K];this.instructions.push(rt),this.hitDetectionInstructions.push(rt),I&&(this.instructions.push(F.s3),this.hitDetectionInstructions.push(F.s3)),m=R}return y&&(this.instructions.push(F.gO),this.hitDetectionInstructions.push(F.gO)),I&&(this.instructions.push(F.Yc),this.hitDetectionInstructions.push(F.Yc)),m}drawCircle(l,m){const s=this.state;if(void 0===s.fillStyle&&void 0===s.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(l,m),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([F.ZP.SET_FILL_STYLE,Z.bL]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([F.ZP.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Z.X9,Z.He]);const y=l.getFlatCoordinates(),I=l.getStride(),O=this.coordinates.length;this.appendFlatLineCoordinates(y,0,y.length,I,!1,!1);const E=[F.ZP.CIRCLE,O];this.instructions.push(F.$O,E),this.hitDetectionInstructions.push(F.$O,E),void 0!==s.fillStyle&&(this.instructions.push(F.gO),this.hitDetectionInstructions.push(F.gO)),void 0!==s.strokeStyle&&(this.instructions.push(F.Yc),this.hitDetectionInstructions.push(F.Yc)),this.endGeometry(m)}drawPolygon(l,m){const s=this.state;if(void 0===s.fillStyle&&void 0===s.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(l,m),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([F.ZP.SET_FILL_STYLE,Z.bL]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([F.ZP.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Z.X9,Z.He]);const y=l.getEnds(),I=l.getOrientedFlatCoordinates(),O=l.getStride();this.drawFlatCoordinatess_(I,0,y,O),this.endGeometry(m)}drawMultiPolygon(l,m){const s=this.state;if(void 0===s.fillStyle&&void 0===s.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(l,m),void 0!==s.fillStyle&&this.hitDetectionInstructions.push([F.ZP.SET_FILL_STYLE,Z.bL]),void 0!==s.strokeStyle&&this.hitDetectionInstructions.push([F.ZP.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Z.X9,Z.He]);const y=l.getEndss(),I=l.getOrientedFlatCoordinates(),O=l.getStride();let E=0;for(let R=0,N=y.length;R<N;++R)E=this.drawFlatCoordinatess_(I,E,y[R],O);this.endGeometry(m)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const l=this.tolerance;if(0!==l){const m=this.coordinates;for(let s=0,g=m.length;s<g;++s)m[s]=(0,P.uZ)(m[s],l)}return super.finish()}setFillStrokeStyles_(){const l=this.state;void 0!==l.fillStyle&&this.updateFillStyle(l,this.createFill),void 0!==l.strokeStyle&&this.updateStrokeStyle(l,this.applyStroke)}};var u=a(7407);const c={Circle:f,Default:z.Z,Image:class k extends z.Z{constructor(l,m,s,g){super(l,m,s,g),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(l,m){if(!this.image_)return;this.beginGeometry(l,m);const s=l.getFlatCoordinates(),g=l.getStride(),_=this.coordinates.length,y=this.appendFlatPointCoordinates(s,g);this.instructions.push([F.ZP.DRAW_IMAGE,_,y,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([F.ZP.DRAW_IMAGE,_,y,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(m)}drawMultiPoint(l,m){if(!this.image_)return;this.beginGeometry(l,m);const s=l.getFlatCoordinates(),g=l.getStride(),_=this.coordinates.length,y=this.appendFlatPointCoordinates(s,g);this.instructions.push([F.ZP.DRAW_IMAGE,_,y,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([F.ZP.DRAW_IMAGE,_,y,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(m)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(l,m){const s=l.getAnchor(),g=l.getSize(),_=l.getOrigin();this.imagePixelRatio_=l.getPixelRatio(this.pixelRatio),this.anchorX_=s[0],this.anchorY_=s[1],this.hitDetectionImage_=l.getHitDetectionImage(),this.image_=l.getImage(this.pixelRatio),this.height_=g[1],this.opacity_=l.getOpacity(),this.originX_=_[0],this.originY_=_[1],this.rotateWithView_=l.getRotateWithView(),this.rotation_=l.getRotation(),this.scale_=l.getScaleArray(),this.width_=g[0],this.declutterMode_=l.getDeclutterMode(),this.declutterImageWithText_=m}},LineString:class A extends z.Z{constructor(l,m,s,g){super(l,m,s,g)}drawFlatCoordinates_(l,m,s,g){const _=this.coordinates.length,y=this.appendFlatLineCoordinates(l,m,s,g,!1,!1),I=[F.ZP.MOVE_TO_LINE_TO,_,y];return this.instructions.push(I),this.hitDetectionInstructions.push(I),s}drawLineString(l,m){const s=this.state;if(void 0===s.strokeStyle||void 0===s.lineWidth)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(l,m),this.hitDetectionInstructions.push([F.ZP.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Z.X9,Z.He],F.$O);const y=l.getFlatCoordinates(),I=l.getStride();this.drawFlatCoordinates_(y,0,y.length,I),this.hitDetectionInstructions.push(F.Yc),this.endGeometry(m)}drawMultiLineString(l,m){const s=this.state;if(void 0===s.strokeStyle||void 0===s.lineWidth)return;this.updateStrokeStyle(s,this.applyStroke),this.beginGeometry(l,m),this.hitDetectionInstructions.push([F.ZP.SET_STROKE_STYLE,s.strokeStyle,s.lineWidth,s.lineCap,s.lineJoin,s.miterLimit,Z.X9,Z.He],F.$O);const y=l.getEnds(),I=l.getFlatCoordinates(),O=l.getStride();let E=0;for(let R=0,N=y.length;R<N;++R)E=this.drawFlatCoordinates_(I,E,y[R],O);this.hitDetectionInstructions.push(F.Yc),this.endGeometry(m)}finish(){const l=this.state;return null!=l.lastStroke&&l.lastStroke!=this.coordinates.length&&this.instructions.push(F.Yc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(l){null!=l.lastStroke&&l.lastStroke!=this.coordinates.length&&(this.instructions.push(F.Yc),l.lastStroke=this.coordinates.length),l.lastStroke=0,super.applyStroke(l),this.instructions.push(F.$O)}},Polygon:f,Text:u.Z},d=class r{constructor(l,m,s,g){this.tolerance_=l,this.maxExtent_=m,this.pixelRatio_=g,this.resolution_=s,this.buildersByZIndex_={}}finish(){const l={};for(const m in this.buildersByZIndex_){l[m]=l[m]||{};const s=this.buildersByZIndex_[m];for(const g in s){const _=s[g].finish();l[m][g]=_}}return l}getBuilder(l,m){const s=void 0!==l?l.toString():"0";let g=this.buildersByZIndex_[s];void 0===g&&(g={},this.buildersByZIndex_[s]=g);let _=g[m];return void 0===_&&(_=new(0,c[m])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),g[m]=_),_}}},341:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>rt});var z=a(8626),F=a(7407),k=a(6412),G=a(1316),Z=a(6380),A=a(3026),S=a(342);function P(b,L,w,M,C,D,Y,st,V,at,ut,Pt){let vt=b[L],Ot=b[L+1],At=0,Gt=0,zt=0,qt=0;function Xt(){At=vt,Gt=Ot,vt=b[L+=M],Ot=b[L+1],qt+=zt,zt=Math.sqrt((vt-At)*(vt-At)+(Ot-Gt)*(Ot-Gt))}do{Xt()}while(L<w-M&&qt+zt<D);let fe=0===zt?0:(D-qt)/zt;const he=(0,A.t7)(At,vt,fe),ce=(0,A.t7)(Gt,Ot,fe),Ce=L-M,ft=qt,Ct=D+st*V(at,C,ut);for(;L<w-M&&qt+zt<Ct;)Xt();fe=0===zt?0:(Ct-qt)/zt;const Zt=(0,A.t7)(At,vt,fe),Vt=(0,A.t7)(Gt,Ot,fe);let pe;if(Pt){const Wt=[he,ce,Zt,Vt];(0,S.U1)(Wt,0,4,2,Pt,Wt,Wt),pe=Wt[0]>Wt[2]}else pe=he>Zt;const Yt=Math.PI,gt=[],xt=Ce+M===L;let Ft;if(zt=0,qt=ft,vt=b[L=Ce],Ot=b[L+1],xt)return Xt(),Ft=Math.atan2(Ot-Gt,vt-At),pe&&(Ft+=Ft>0?-Yt:Yt),gt[0]=[(Zt+he)/2,(Vt+ce)/2,(Ct-D)/2,Ft,C],gt;for(let Wt=0,Bt=(C=C.replace(/\n/g," ")).length;Wt<Bt;){Xt();let ue=Math.atan2(Ot-Gt,vt-At);if(pe&&(ue+=ue>0?-Yt:Yt),void 0!==Ft){let x=ue-Ft;if(x+=x>Yt?-2*Yt:x<-Yt?2*Yt:0,Math.abs(x)>Y)return null}Ft=ue;const ge=Wt;let Le=0;for(;Wt<Bt;++Wt){const W=st*V(at,C[pe?Bt-Wt-1:Wt],ut);if(L+M<w&&qt+zt<D+Le+W/2)break;Le+=W}if(Wt===ge)continue;const Me=pe?C.substring(Bt-ge,Bt-Wt):C.substring(ge,Wt);fe=0===zt?0:(D+Le/2-qt)/zt;const nt=(0,A.t7)(At,vt,fe),Q=(0,A.t7)(Gt,Ot,fe);gt.push([nt,Q,Le/2,ue,Me]),D+=Le}return gt}var v=a(9363),f=a(2460);const u=(0,G.lJ)(),c=[],r=[],d=[],e=[];function l(b){return b[3].declutterBox}const m=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function s(b,L){return"start"===L?L=m.test(b)?"right":"left":"end"===L&&(L=m.test(b)?"left":"right"),F.I[L]}function g(b,L,w){return w>0&&b.push("\n",""),b.push(L,""),b}const y=class _{constructor(L,w,M,C){this.overlaps=M,this.pixelRatio=w,this.resolution=L,this.instructions=C.instructions,this.coordinates=C.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,k.Ue)(),this.hitDetectionInstructions=C.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=C.fillStates||{},this.strokeStates=C.strokeStates||{},this.textStates=C.textStates||{},this.widths_={},this.labels_={}}createLabel(L,w,M,C){const D=L+w+M+C;if(this.labels_[D])return this.labels_[D];const Y=C?this.strokeStates[C]:null,st=M?this.fillStates[M]:null,V=this.textStates[w],at=this.pixelRatio,ut=[V.scale[0]*at,V.scale[1]*at],Pt=Array.isArray(L),vt=V.justify?F.I[V.justify]:s(Array.isArray(L)?L[0]:L,V.textAlign||Z.PH),Ot=C&&Y.lineWidth?Y.lineWidth:0,At=Pt?L:L.split("\n").reduce(g,[]),{width:Gt,height:zt,widths:qt,heights:Xt,lineWidths:fe}=(0,Z.Zw)(V,At),he=Gt+Ot,ce=[],Ce=(he+2)*ut[0],ft=(zt+Ot)*ut[1],Ct={width:Ce<0?Math.floor(Ce):Math.ceil(Ce),height:ft<0?Math.floor(ft):Math.ceil(ft),contextInstructions:ce};(1!=ut[0]||1!=ut[1])&&ce.push("scale",ut),C&&(ce.push("strokeStyle",Y.strokeStyle),ce.push("lineWidth",Ot),ce.push("lineCap",Y.lineCap),ce.push("lineJoin",Y.lineJoin),ce.push("miterLimit",Y.miterLimit),ce.push("setLineDash",[Y.lineDash]),ce.push("lineDashOffset",Y.lineDashOffset)),M&&ce.push("fillStyle",st.fillStyle),ce.push("textBaseline","middle"),ce.push("textAlign","center");const Zt=.5-vt;let Vt=vt*he+Zt*Ot;const pe=[],Yt=[];let Bt,gt=0,xt=0,Ft=0,Wt=0;for(let ue=0,ge=At.length;ue<ge;ue+=2){const Le=At[ue];if("\n"===Le){xt+=gt,gt=0,Vt=vt*he+Zt*Ot,++Wt;continue}const Me=At[ue+1]||V.font;Me!==Bt&&(C&&pe.push("font",Me),M&&Yt.push("font",Me),Bt=Me),gt=Math.max(gt,Xt[Ft]);const nt=[Le,Vt+Zt*qt[Ft]+vt*(qt[Ft]-fe[Wt]),.5*(Ot+gt)+xt];Vt+=qt[Ft],C&&pe.push("strokeText",nt),M&&Yt.push("fillText",nt),++Ft}return Array.prototype.push.apply(ce,pe),Array.prototype.push.apply(ce,Yt),this.labels_[D]=Ct,Ct}replayTextBackground_(L,w,M,C,D,Y,st){L.beginPath(),L.moveTo.apply(L,w),L.lineTo.apply(L,M),L.lineTo.apply(L,C),L.lineTo.apply(L,D),L.lineTo.apply(L,w),Y&&(this.alignFill_=Y[2],this.fill_(L)),st&&(this.setStrokeStyle_(L,st),L.stroke())}calculateImageOrLabelDimensions_(L,w,M,C,D,Y,st,V,at,ut,Pt,vt,Ot,At,Gt,zt){let qt=M-(st*=vt[0]),Xt=C-(V*=vt[1]);const fe=D+at>L?L-at:D,he=Y+ut>w?w-ut:Y,ce=At[3]+fe*vt[0]+At[1],Ce=At[0]+he*vt[1]+At[2],ft=qt-At[3],Ct=Xt-At[0];let Zt;return(Gt||0!==Pt)&&(c[0]=ft,e[0]=ft,c[1]=Ct,r[1]=Ct,r[0]=ft+ce,d[0]=r[0],d[1]=Ct+Ce,e[1]=d[1]),0!==Pt?(Zt=(0,k.qC)((0,k.Ue)(),M,C,1,1,Pt,-M,-C),(0,k.nn)(Zt,c),(0,k.nn)(Zt,r),(0,k.nn)(Zt,d),(0,k.nn)(Zt,e),(0,G.T9)(Math.min(c[0],r[0],d[0],e[0]),Math.min(c[1],r[1],d[1],e[1]),Math.max(c[0],r[0],d[0],e[0]),Math.max(c[1],r[1],d[1],e[1]),u)):(0,G.T9)(Math.min(ft,ft+ce),Math.min(Ct,Ct+Ce),Math.max(ft,ft+ce),Math.max(Ct,Ct+Ce),u),Ot&&(qt=Math.round(qt),Xt=Math.round(Xt)),{drawImageX:qt,drawImageY:Xt,drawImageW:fe,drawImageH:he,originX:at,originY:ut,declutterBox:{minX:u[0],minY:u[1],maxX:u[2],maxY:u[3],value:zt},canvasTransform:Zt,scale:vt}}replayImageOrLabel_(L,w,M,C,D,Y,st){const at=C.declutterBox,ut=L.canvas,Pt=st?st[2]*C.scale[0]/2:0;return at.minX-Pt<=ut.width/w&&at.maxX+Pt>=0&&at.minY-Pt<=ut.height/w&&at.maxY+Pt>=0&&(!(!Y&&!st)&&this.replayTextBackground_(L,c,r,d,e,Y,st),(0,Z._f)(L,C.canvasTransform,D,M,C.originX,C.originY,C.drawImageW,C.drawImageH,C.drawImageX,C.drawImageY,C.scale)),!0}fill_(L){if(this.alignFill_){const w=(0,k.nn)(this.renderedTransform_,[0,0]),M=512*this.pixelRatio;L.save(),L.translate(w[0]%M,w[1]%M),L.rotate(this.viewRotation_)}L.fill(),this.alignFill_&&L.restore()}setStrokeStyle_(L,w){L.strokeStyle=w[1],L.lineWidth=w[2],L.lineCap=w[3],L.lineJoin=w[4],L.miterLimit=w[5],L.lineDashOffset=w[7],L.setLineDash(w[6])}drawLabelWithPointPlacement_(L,w,M,C){const D=this.textStates[w],Y=this.createLabel(L,w,C,M),st=this.strokeStates[M],V=this.pixelRatio,at=s(Array.isArray(L)?L[0]:L,D.textAlign||Z.PH),ut=F.I[D.textBaseline||Z.ru],Pt=st&&st.lineWidth?st.lineWidth:0;return{label:Y,anchorX:at*(Y.width/V-2*D.scale[0])+2*(.5-at)*Pt,anchorY:ut*Y.height/V+2*(.5-ut)*Pt}}execute_(L,w,M,C,D,Y,st,V){let at;this.pixelCoordinates_&&(0,v.fS)(M,this.renderedTransform_)?at=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),at=(0,S.vT)(this.coordinates,0,this.coordinates.length,2,M,this.pixelCoordinates_),(0,k.lk)(this.renderedTransform_,M));let ut=0;const Pt=C.length;let Ot,At,Gt,zt,qt,Xt,fe,he,ce,Ce,ft,Ct,vt=0,Zt=0,Vt=0,pe=null,Yt=null;const gt=this.coordinateCache_,xt=this.viewRotation_,Ft=Math.round(1e12*Math.atan2(-M[1],M[0]))/1e12,Wt={context:L,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:xt},Bt=this.instructions!=C||this.overlaps?0:200;let ue,ge,Le,Me;for(;ut<Pt;){const nt=C[ut];switch(nt[0]){case z.ZP.BEGIN_GEOMETRY:ue=nt[1],Me=nt[3],ue.getGeometry()?void 0===st||(0,G.kK)(st,Me.getExtent())?++ut:ut=nt[2]+1:ut=nt[2];break;case z.ZP.BEGIN_PATH:Zt>Bt&&(this.fill_(L),Zt=0),Vt>Bt&&(L.stroke(),Vt=0),!Zt&&!Vt&&(L.beginPath(),zt=NaN,qt=NaN),++ut;break;case z.ZP.CIRCLE:vt=nt[1];const x=at[vt],W=at[vt+1],yt=at[vt+2]-x,Et=at[vt+3]-W,It=Math.sqrt(yt*yt+Et*Et);L.moveTo(x+It,W),L.arc(x,W,It,0,2*Math.PI,!0),++ut;break;case z.ZP.CLOSE_PATH:L.closePath(),++ut;break;case z.ZP.CUSTOM:vt=nt[1],Ot=nt[2];const Jt=nt[4],ne=6==nt.length?nt[5]:void 0;Wt.geometry=nt[3],Wt.feature=ue,ut in gt||(gt[ut]=[]);const ye=gt[ut];ne?ne(at,vt,Ot,2,ye):(ye[0]=at[vt],ye[1]=at[vt+1],ye.length=2),Jt(ye,Wt),++ut;break;case z.ZP.DRAW_IMAGE:vt=nt[1],Ot=nt[2],he=nt[3],At=nt[4],Gt=nt[5];let oe=nt[6];const ie=nt[7],Ge=nt[8],Xe=nt[9],Ne=nt[10];let Ue=nt[11];const Ve=nt[12];let Je=nt[13];const si=nt[14],Qe=nt[15];if(!he&&nt.length>=20){ce=nt[19],Ce=nt[20],ft=nt[21],Ct=nt[22];const vi=this.drawLabelWithPointPlacement_(ce,Ce,ft,Ct);he=vi.label,nt[3]=he,At=(vi.anchorX-nt[23])*this.pixelRatio,nt[4]=At,Gt=(vi.anchorY-nt[24])*this.pixelRatio,nt[5]=Gt,oe=he.height,nt[6]=oe,Je=he.width,nt[13]=Je}let ei,q,J,_t;nt.length>25&&(ei=nt[25]),nt.length>17?(q=nt[16],J=nt[17],_t=nt[18]):(q=Z.oB,J=!1,_t=!1),Ne&&Ft?Ue+=xt:!Ne&&!Ft&&(Ue-=xt);let pt=0;for(;vt<Ot;vt+=2){if(ei&&ei[pt++]<Je/this.pixelRatio)continue;const vi=this.calculateImageOrLabelDimensions_(he.width,he.height,at[vt],at[vt+1],Je,oe,At,Gt,Ge,Xe,Ue,Ve,D,q,J||_t,ue),ci=[L,w,he,vi,ie,J?pe:null,_t?Yt:null];if(V){if("none"===si)continue;if("obstacle"===si){V.insert(vi.declutterBox);continue}{let yi,_i;if(Qe){const ri=Ot-vt;if(!Qe[ri]){Qe[ri]=ci;continue}if(yi=Qe[ri],delete Qe[ri],_i=l(yi),V.collides(_i))continue}if(V.collides(vi.declutterBox))continue;yi&&(V.insert(_i),this.replayImageOrLabel_.apply(this,yi)),V.insert(vi.declutterBox)}}this.replayImageOrLabel_.apply(this,ci)}++ut;break;case z.ZP.DRAW_CHARS:const St=nt[1],Ht=nt[2],te=nt[3],ve=nt[4];Ct=nt[5];const Te=nt[6],Se=nt[7],Fe=nt[8];ft=nt[9];const Be=nt[10];ce=nt[11],Ce=nt[12];const ke=[nt[13],nt[13]],ni=this.textStates[Ce],Mi=ni.font,gi=[ni.scale[0]*Se,ni.scale[1]*Se];let pi;Mi in this.widths_?pi=this.widths_[Mi]:(pi={},this.widths_[Mi]=pi);const xn=(0,f.W)(at,St,Ht,2),Ii=Math.abs(gi[0])*(0,Z.Kd)(Mi,ce,pi);if(ve||Ii<=xn){const yi=P(at,St,Ht,2,ce,(xn-Ii)*s(ce,this.textStates[Ce].textAlign),Te,Math.abs(gi[0]),Z.Kd,Mi,pi,Ft?0:this.viewRotation_);t:if(yi){const _i=[];let ri,Gi,Pi,ai,Ei;if(ft)for(ri=0,Gi=yi.length;ri<Gi;++ri){Ei=yi[ri],Pi=Ei[4],ai=this.createLabel(Pi,Ce,"",ft),At=Ei[2]+(gi[0]<0?-Be:Be),Gt=te*ai.height+2*(.5-te)*Be*gi[1]/gi[0]-Fe;const Ci=this.calculateImageOrLabelDimensions_(ai.width,ai.height,Ei[0],Ei[1],ai.width,ai.height,At,Gt,0,0,Ei[3],ke,!1,Z.oB,!1,ue);if(V&&V.collides(Ci.declutterBox))break t;_i.push([L,w,ai,Ci,1,null,null])}if(Ct)for(ri=0,Gi=yi.length;ri<Gi;++ri){Ei=yi[ri],Pi=Ei[4],ai=this.createLabel(Pi,Ce,Ct,""),At=Ei[2],Gt=te*ai.height-Fe;const Ci=this.calculateImageOrLabelDimensions_(ai.width,ai.height,Ei[0],Ei[1],ai.width,ai.height,At,Gt,0,0,Ei[3],ke,!1,Z.oB,!1,ue);if(V&&V.collides(Ci.declutterBox))break t;_i.push([L,w,ai,Ci,1,null,null])}V&&V.load(_i.map(l));for(let Ci=0,Xi=_i.length;Ci<Xi;++Ci)this.replayImageOrLabel_.apply(this,_i[Ci])}}++ut;break;case z.ZP.END_GEOMETRY:if(void 0!==Y){ue=nt[1];const vi=Y(ue,Me);if(vi)return vi}++ut;break;case z.ZP.FILL:Bt?Zt++:this.fill_(L),++ut;break;case z.ZP.MOVE_TO_LINE_TO:for(vt=nt[1],Ot=nt[2],ge=at[vt],Le=at[vt+1],Xt=ge+.5|0,fe=Le+.5|0,(Xt!==zt||fe!==qt)&&(L.moveTo(ge,Le),zt=Xt,qt=fe),vt+=2;vt<Ot;vt+=2)ge=at[vt],Le=at[vt+1],Xt=ge+.5|0,fe=Le+.5|0,(vt==Ot-2||Xt!==zt||fe!==qt)&&(L.lineTo(ge,Le),zt=Xt,qt=fe);++ut;break;case z.ZP.SET_FILL_STYLE:pe=nt,this.alignFill_=nt[2],Zt&&(this.fill_(L),Zt=0,Vt&&(L.stroke(),Vt=0)),L.fillStyle=nt[1],++ut;break;case z.ZP.SET_STROKE_STYLE:Yt=nt,Vt&&(L.stroke(),Vt=0),this.setStrokeStyle_(L,nt),++ut;break;case z.ZP.STROKE:Bt?Vt++:L.stroke(),++ut;break;default:++ut}}Zt&&this.fill_(L),Vt&&L.stroke()}execute(L,w,M,C,D,Y){this.viewRotation_=C,this.execute_(L,w,M,this.instructions,D,void 0,void 0,Y)}executeHitDetection(L,w,M,C,D){return this.viewRotation_=M,this.execute_(L,1,w,this.hitDetectionInstructions,!0,C,D)}};var I=a(4211),O=a(5526);const E=["Polygon","Circle","LineString","Image","Text","Default"],N={},rt=class R{constructor(L,w,M,C,D,Y){this.maxExtent_=L,this.overlaps_=C,this.pixelRatio_=M,this.resolution_=w,this.renderBuffer_=Y,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,k.Ue)(),this.createExecutors_(D)}clip(L,w){const M=this.getClipCoords(w);L.beginPath(),L.moveTo(M[0],M[1]),L.lineTo(M[2],M[3]),L.lineTo(M[4],M[5]),L.lineTo(M[6],M[7]),L.clip()}createExecutors_(L){for(const w in L){let M=this.executorsByZIndex_[w];void 0===M&&(M={},this.executorsByZIndex_[w]=M);const C=L[w];for(const D in C)M[D]=new y(this.resolution_,this.pixelRatio_,this.overlaps_,C[D])}}hasExecutors(L){for(const w in this.executorsByZIndex_){const M=this.executorsByZIndex_[w];for(let C=0,D=L.length;C<D;++C)if(L[C]in M)return!0}return!1}forEachFeatureAtCoordinate(L,w,M,C,D,Y){const st=2*(C=Math.round(C))+1,V=(0,k.qC)(this.hitDetectionTransform_,C+.5,C+.5,1/w,-1/w,-M,-L[0],-L[1]),at=!this.hitDetectionContext_;at&&(this.hitDetectionContext_=(0,I.E4)(st,st,void 0,{willReadFrequently:!0}));const ut=this.hitDetectionContext_;let Pt;ut.canvas.width!==st||ut.canvas.height!==st?(ut.canvas.width=st,ut.canvas.height=st):at||ut.clearRect(0,0,st,st),void 0!==this.renderBuffer_&&(Pt=(0,G.lJ)(),(0,G.Wj)(Pt,L),(0,G.f3)(Pt,w*(this.renderBuffer_+C),Pt));const vt=function K(b){if(void 0!==N[b])return N[b];const L=2*b+1,w=b*b,M=new Array(w+1);for(let D=0;D<=b;++D)for(let Y=0;Y<=b;++Y){const st=D*D+Y*Y;if(st>w)break;let V=M[st];V||(V=[],M[st]=V),V.push(4*((b+D)*L+(b+Y))+3),D>0&&V.push(4*((b-D)*L+(b+Y))+3),Y>0&&(V.push(4*((b+D)*L+(b-Y))+3),D>0&&V.push(4*((b-D)*L+(b-Y))+3))}const C=[];for(let D=0,Y=M.length;D<Y;++D)M[D]&&C.push(...M[D]);return N[b]=C,C}(C);let Ot;function At(ce,Ce){const ft=ut.getImageData(0,0,st,st).data;for(let Ct=0,Zt=vt.length;Ct<Zt;Ct++)if(ft[vt[Ct]]>0){if(!Y||"Image"!==Ot&&"Text"!==Ot||Y.includes(ce)){const Vt=(vt[Ct]-3)/4,pe=C-Vt%st,Yt=C-(Vt/st|0),gt=D(ce,Ce,pe*pe+Yt*Yt);if(gt)return gt}ut.clearRect(0,0,st,st);break}}const Gt=Object.keys(this.executorsByZIndex_).map(Number);let zt,qt,Xt,fe,he;for(Gt.sort(v.j2),zt=Gt.length-1;zt>=0;--zt){const ce=Gt[zt].toString();for(Xt=this.executorsByZIndex_[ce],qt=E.length-1;qt>=0;--qt)if(Ot=E[qt],fe=Xt[Ot],void 0!==fe&&(he=fe.executeHitDetection(ut,V,M,At,Pt),he))return he}}getClipCoords(L){const w=this.maxExtent_;if(!w)return null;const M=w[0],C=w[1],D=w[2],Y=w[3],st=[M,C,M,Y,D,Y,D,C];return(0,S.vT)(st,0,8,2,L,st),st}isEmpty(){return(0,O.x)(this.executorsByZIndex_)}execute(L,w,M,C,D,Y,st){const V=Object.keys(this.executorsByZIndex_).map(Number);let at,ut,Pt,vt,Ot,At;for(V.sort(v.j2),this.maxExtent_&&(L.save(),this.clip(L,M)),Y=Y||E,st&&V.reverse(),at=0,ut=V.length;at<ut;++at){const Gt=V[at].toString();for(Ot=this.executorsByZIndex_[Gt],Pt=0,vt=Y.length;Pt<vt;++Pt)At=Ot[Y[Pt]],void 0!==At&&At.execute(L,w,M,C,D,st)}this.maxExtent_&&L.restore()}}},6861:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>u});var z=a(3903),F=a(3836),k=a(6412),G=a(6380),Z=a(9363),A=a(1316),S=a(3026),P=a(342),v=a(1245);const u=class f extends z.Z{constructor(r,d,e,l,m,s,g){super(),this.context_=r,this.pixelRatio_=d,this.extent_=e,this.transform_=l,this.transformRotation_=l?(0,S.FH)(Math.atan2(l[1],l[0]),10):0,this.viewRotation_=m,this.squaredTolerance_=s,this.userTransform_=g,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,k.Ue)()}drawImages_(r,d,e,l){if(!this.image_)return;const m=(0,P.vT)(r,d,e,l,this.transform_,this.pixelCoordinates_),s=this.context_,g=this.tmpLocalTransform_,_=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=_*this.imageOpacity_);let y=this.imageRotation_;0===this.transformRotation_&&(y-=this.viewRotation_),this.imageRotateWithView_&&(y+=this.viewRotation_);for(let I=0,O=m.length;I<O;I+=2){const E=m[I]-this.imageAnchorX_,R=m[I+1]-this.imageAnchorY_;if(0!==y||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const N=E+this.imageAnchorX_,K=R+this.imageAnchorY_;(0,k.qC)(g,N,K,1,1,y,-N,-K),s.setTransform.apply(s,g),s.translate(N,K),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.setTransform(1,0,0,1,0,0)}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,E,R,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=_)}drawText_(r,d,e,l){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const m=(0,P.vT)(r,d,e,l,this.transform_,this.pixelCoordinates_),s=this.context_;let g=this.textRotation_;for(0===this.transformRotation_&&(g-=this.viewRotation_),this.textRotateWithView_&&(g+=this.viewRotation_);d<e;d+=l){const _=m[d]+this.textOffsetX_,y=m[d+1]+this.textOffsetY_;0!==g||1!=this.textScale_[0]||1!=this.textScale_[1]?(s.translate(_-this.textOffsetX_,y-this.textOffsetY_),s.rotate(g),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&s.strokeText(this.text_,_,y),this.textFillState_&&s.fillText(this.text_,_,y))}}moveToLineTo_(r,d,e,l,m){const s=this.context_,g=(0,P.vT)(r,d,e,l,this.transform_,this.pixelCoordinates_);s.moveTo(g[0],g[1]);let _=g.length;m&&(_-=2);for(let y=2;y<_;y+=2)s.lineTo(g[y],g[y+1]);return m&&s.closePath(),e}drawRings_(r,d,e,l){for(let m=0,s=e.length;m<s;++m)d=this.moveToLineTo_(r,d,e[m],l,!0);return d}drawCircle(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,A.kK)(this.extent_,r.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const d=(0,v.Kr)(r,this.transform_,this.pixelCoordinates_),e=d[2]-d[0],l=d[3]-d[1],m=Math.sqrt(e*e+l*l),s=this.context_;s.beginPath(),s.arc(d[0],d[1],m,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(r.getCenter(),0,2,2)}}setStyle(r){this.setFillStrokeStyle(r.getFill(),r.getStroke()),this.setImageStyle(r.getImage()),this.setTextStyle(r.getText())}setTransform(r){this.transform_=r}drawGeometry(r){switch(r.getType()){case"Point":this.drawPoint(r);break;case"LineString":this.drawLineString(r);break;case"Polygon":this.drawPolygon(r);break;case"MultiPoint":this.drawMultiPoint(r);break;case"MultiLineString":this.drawMultiLineString(r);break;case"MultiPolygon":this.drawMultiPolygon(r);break;case"GeometryCollection":this.drawGeometryCollection(r);break;case"Circle":this.drawCircle(r)}}drawFeature(r,d){const e=d.getGeometryFunction()(r);e&&(this.setStyle(d),this.drawGeometry(e))}drawGeometryCollection(r){const d=r.getGeometriesArray();for(let e=0,l=d.length;e<l;++e)this.drawGeometry(d[e])}drawPoint(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const d=r.getFlatCoordinates(),e=r.getStride();this.image_&&this.drawImages_(d,0,d.length,e),""!==this.text_&&this.drawText_(d,0,d.length,e)}drawMultiPoint(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const d=r.getFlatCoordinates(),e=r.getStride();this.image_&&this.drawImages_(d,0,d.length,e),""!==this.text_&&this.drawText_(d,0,d.length,e)}drawLineString(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,A.kK)(this.extent_,r.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const d=this.context_,e=r.getFlatCoordinates();d.beginPath(),this.moveToLineTo_(e,0,e.length,r.getStride(),!1),d.stroke()}if(""!==this.text_){const d=r.getFlatMidpoint();this.drawText_(d,0,2,2)}}}drawMultiLineString(r){this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const d=r.getExtent();if((0,A.kK)(this.extent_,d)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,l=r.getFlatCoordinates();let m=0;const s=r.getEnds(),g=r.getStride();e.beginPath();for(let _=0,y=s.length;_<y;++_)m=this.moveToLineTo_(l,m,s[_],g,!1);e.stroke()}if(""!==this.text_){const e=r.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,A.kK)(this.extent_,r.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const d=this.context_;d.beginPath(),this.drawRings_(r.getOrientedFlatCoordinates(),0,r.getEnds(),r.getStride()),this.fillState_&&d.fill(),this.strokeState_&&d.stroke()}if(""!==this.text_){const d=r.getFlatInteriorPoint();this.drawText_(d,0,2,2)}}}drawMultiPolygon(r){if(this.squaredTolerance_&&(r=r.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,A.kK)(this.extent_,r.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const d=this.context_,e=r.getOrientedFlatCoordinates();let l=0;const m=r.getEndss(),s=r.getStride();d.beginPath();for(let g=0,_=m.length;g<_;++g)l=this.drawRings_(e,l,m[g],s);this.fillState_&&d.fill(),this.strokeState_&&d.stroke()}if(""!==this.text_){const d=r.getFlatInteriorPoints();this.drawText_(d,0,d.length,2)}}}setContextFillState_(r){const d=this.context_,e=this.contextFillState_;e?e.fillStyle!=r.fillStyle&&(e.fillStyle=r.fillStyle,d.fillStyle=r.fillStyle):(d.fillStyle=r.fillStyle,this.contextFillState_={fillStyle:r.fillStyle})}setContextStrokeState_(r){const d=this.context_,e=this.contextStrokeState_;e?(e.lineCap!=r.lineCap&&(e.lineCap=r.lineCap,d.lineCap=r.lineCap),(0,Z.fS)(e.lineDash,r.lineDash)||d.setLineDash(e.lineDash=r.lineDash),e.lineDashOffset!=r.lineDashOffset&&(e.lineDashOffset=r.lineDashOffset,d.lineDashOffset=r.lineDashOffset),e.lineJoin!=r.lineJoin&&(e.lineJoin=r.lineJoin,d.lineJoin=r.lineJoin),e.lineWidth!=r.lineWidth&&(e.lineWidth=r.lineWidth,d.lineWidth=r.lineWidth),e.miterLimit!=r.miterLimit&&(e.miterLimit=r.miterLimit,d.miterLimit=r.miterLimit),e.strokeStyle!=r.strokeStyle&&(e.strokeStyle=r.strokeStyle,d.strokeStyle=r.strokeStyle)):(d.lineCap=r.lineCap,d.setLineDash(r.lineDash),d.lineDashOffset=r.lineDashOffset,d.lineJoin=r.lineJoin,d.lineWidth=r.lineWidth,d.miterLimit=r.miterLimit,d.strokeStyle=r.strokeStyle,this.contextStrokeState_={lineCap:r.lineCap,lineDash:r.lineDash,lineDashOffset:r.lineDashOffset,lineJoin:r.lineJoin,lineWidth:r.lineWidth,miterLimit:r.miterLimit,strokeStyle:r.strokeStyle})}setContextTextState_(r){const d=this.context_,e=this.contextTextState_,l=r.textAlign?r.textAlign:G.PH;e?(e.font!=r.font&&(e.font=r.font,d.font=r.font),e.textAlign!=l&&(e.textAlign=l,d.textAlign=l),e.textBaseline!=r.textBaseline&&(e.textBaseline=r.textBaseline,d.textBaseline=r.textBaseline)):(d.font=r.font,d.textAlign=l,d.textBaseline=r.textBaseline,this.contextTextState_={font:r.font,textAlign:l,textBaseline:r.textBaseline})}setFillStrokeStyle(r,d){if(r){const e=r.getColor();this.fillState_={fillStyle:(0,F.y)(e||G.bL)}}else this.fillState_=null;if(d){const e=d.getColor(),l=d.getLineCap(),m=d.getLineDash(),s=d.getLineDashOffset(),g=d.getLineJoin(),_=d.getWidth(),y=d.getMiterLimit(),I=m||G.X9;this.strokeState_={lineCap:void 0!==l?l:G.mb,lineDash:1===this.pixelRatio_?I:I.map(O=>O*this.pixelRatio_),lineDashOffset:(s||G.He)*this.pixelRatio_,lineJoin:void 0!==g?g:G.rc,lineWidth:(void 0!==_?_:G.yC)*this.pixelRatio_,miterLimit:void 0!==y?y:G.V4,strokeStyle:(0,F.y)(e||G.Tx)}}else this.strokeState_=null}setImageStyle(r){let d;if(!r||!(d=r.getSize()))return void(this.image_=null);const e=r.getPixelRatio(this.pixelRatio_),l=r.getAnchor(),m=r.getOrigin();this.image_=r.getImage(this.pixelRatio_),this.imageAnchorX_=l[0]*e,this.imageAnchorY_=l[1]*e,this.imageHeight_=d[1]*e,this.imageOpacity_=r.getOpacity(),this.imageOriginX_=m[0],this.imageOriginY_=m[1],this.imageRotateWithView_=r.getRotateWithView(),this.imageRotation_=r.getRotation();const s=r.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/e,s[1]*this.pixelRatio_/e],this.imageWidth_=d[0]*e}setTextStyle(r){if(r){const d=r.getFill();if(d){const R=d.getColor();this.textFillState_={fillStyle:(0,F.y)(R||G.bL)}}else this.textFillState_=null;const e=r.getStroke();if(e){const R=e.getColor(),N=e.getLineCap(),K=e.getLineDash(),rt=e.getLineDashOffset(),b=e.getLineJoin(),L=e.getWidth(),w=e.getMiterLimit();this.textStrokeState_={lineCap:void 0!==N?N:G.mb,lineDash:K||G.X9,lineDashOffset:rt||G.He,lineJoin:void 0!==b?b:G.rc,lineWidth:void 0!==L?L:G.yC,miterLimit:void 0!==w?w:G.V4,strokeStyle:(0,F.y)(R||G.Tx)}}else this.textStrokeState_=null;const l=r.getFont(),m=r.getOffsetX(),s=r.getOffsetY(),g=r.getRotateWithView(),_=r.getRotation(),y=r.getScaleArray(),I=r.getText(),O=r.getTextAlign(),E=r.getTextBaseline();this.textState_={font:void 0!==l?l:G.Df,textAlign:void 0!==O?O:G.PH,textBaseline:void 0!==E?E:G.ru},this.text_=void 0!==I?Array.isArray(I)?I.reduce((R,N,K)=>R+(K%2?" ":N),""):I:"",this.textOffsetX_=void 0!==m?this.pixelRatio_*m:0,this.textOffsetY_=void 0!==s?this.pixelRatio_*s:0,this.textRotateWithView_=void 0!==g&&g,this.textRotation_=void 0!==_?_:0,this.textScale_=[this.pixelRatio_*y[0],this.pixelRatio_*y[1]]}else this.text_=""}}},8626:(jt,ht,a)=>{"use strict";a.d(ht,{$O:()=>G,Yc:()=>k,ZP:()=>A,gO:()=>F,s3:()=>Z});const z={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},F=[z.FILL],k=[z.STROKE],G=[z.BEGIN_PATH],Z=[z.CLOSE_PATH],A=z},7407:(jt,ht,a)=>{"use strict";a.d(ht,{I:()=>f,Z:()=>c});var z=a(7231),F=a(8626),k=a(3836),G=a(6380),Z=a(3089),A=a(1316),S=a(3026);function P(r,d,e,l,m){const s=[];let g=e,_=0,y=d.slice(e,2);for(;_<r&&g+m<l;){const[I,O]=y.slice(-2),E=d[g+m],R=d[g+m+1],N=Math.sqrt((E-I)*(E-I)+(R-O)*(R-O));if(_+=N,_>=r){const K=(r-_+N)/N,rt=(0,S.t7)(I,E,K),b=(0,S.t7)(O,R,K);y.push(rt,b),s.push(y),y=[rt,b],_==r&&(g+=m),_=0}else if(_<r)y.push(d[g+m],d[g+m+1]),g+=m;else{const K=N-_,rt=(0,S.t7)(I,E,K/N),b=(0,S.t7)(O,R,K/N);y.push(rt,b),s.push(y),y=[rt,b],_=0,g+=m}}return _>0&&s.push(y),s}function v(r,d,e,l,m){let O,E,R,N,K,rt,b,L,w,M,s=e,g=e,_=0,y=0,I=e;for(E=e;E<l;E+=m){const C=d[E],D=d[E+1];void 0!==K&&(w=C-K,M=D-rt,N=Math.sqrt(w*w+M*M),void 0!==b&&(y+=R,O=Math.acos((b*w+L*M)/(R*N)),O>r&&(y>_&&(_=y,s=I,g=E),y=0,I=E-m)),R=N,b=w,L=M),K=C,rt=D}return y+=N,y>_?[I,E]:[s,g]}const f={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},c=class u extends z.Z{constructor(d,e,l,m){super(d,e,l,m),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[G.bL]={fillStyle:G.bL},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const d=super.finish();return d.textStates=this.textStates,d.fillStates=this.fillStates,d.strokeStates=this.strokeStates,d}drawText(d,e){const s=this.textState_;if(""===this.text_||!s||!this.textFillState_&&!this.textStrokeState_)return;const g=this.coordinates;let _=g.length;const y=d.getType();let I=null,O=d.getStride();if("line"!==s.placement||"LineString"!=y&&"MultiLineString"!=y&&"Polygon"!=y&&"MultiPolygon"!=y){let E=s.overflow?null:[];switch(y){case"Point":case"MultiPoint":I=d.getFlatCoordinates();break;case"LineString":I=d.getFlatMidpoint();break;case"Circle":I=d.getCenter();break;case"MultiLineString":I=d.getFlatMidpoints(),O=2;break;case"Polygon":I=d.getFlatInteriorPoint(),s.overflow||E.push(I[2]/this.resolution),O=3;break;case"MultiPolygon":const L=d.getFlatInteriorPoints();I=[];for(let w=0,M=L.length;w<M;w+=3)s.overflow||E.push(L[w+2]/this.resolution),I.push(L[w],L[w+1]);if(0===I.length)return;O=2}const R=this.appendFlatPointCoordinates(I,O);if(R===_)return;if(E&&(R-_)/2!=I.length/O){let L=_/2;E=E.filter((w,M)=>{const C=g[2*(L+M)]===I[M*O]&&g[2*(L+M)+1]===I[M*O+1];return C||--L,C})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(d,e);let N=s.padding;if(N!=G.oB&&(s.scale[0]<0||s.scale[1]<0)){let L=s.padding[0],w=s.padding[1],M=s.padding[2],C=s.padding[3];s.scale[0]<0&&(w=-w,C=-C),s.scale[1]<0&&(L=-L,M=-M),N=[L,w,M,C]}const K=this.pixelRatio;this.instructions.push([F.ZP.DRAW_IMAGE,_,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,N==G.oB?G.oB:N.map(function(L){return L*K}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]);const rt=1/K,b=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=G.bL,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([F.ZP.DRAW_IMAGE,_,R,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[rt,rt],NaN,void 0,this.declutterImageWithText_,N,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?G.bL:this.fillKey_,this.textOffsetX_,this.textOffsetY_,E]),s.backgroundFill&&(this.state.fillStyle=b,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!(0,A.kK)(this.getBufferedMaxExtent(),d.getExtent()))return;let E;if(I=d.getFlatCoordinates(),"LineString"==y)E=[I.length];else if("MultiLineString"==y)E=d.getEnds();else if("Polygon"==y)E=d.getEnds().slice(0,1);else if("MultiPolygon"==y){const rt=d.getEndss();E=[];for(let b=0,L=rt.length;b<L;++b)E.push(rt[b][0])}this.beginGeometry(d,e);const R=s.repeat,N=R?void 0:s.textAlign;let K=0;for(let rt=0,b=E.length;rt<b;++rt){let L;L=R?P(R*this.resolution,I,K,E[rt],O):[I.slice(K,E[rt])];for(let w=0,M=L.length;w<M;++w){const C=L[w];let D=0,Y=C.length;if(null==N){const V=v(s.maxAngle,C,0,C.length,2);D=V[0],Y=V[1]}for(let V=D;V<Y;V+=O)g.push(C[V],C[V+1]);const st=g.length;K=E[rt],this.drawChars_(_,st),_=st}}this.endGeometry(e)}}saveTextStates_(){const d=this.textStrokeState_,e=this.textState_,l=this.textFillState_,m=this.strokeKey_;d&&(m in this.strokeStates||(this.strokeStates[m]={strokeStyle:d.strokeStyle,lineCap:d.lineCap,lineDashOffset:d.lineDashOffset,lineWidth:d.lineWidth,lineJoin:d.lineJoin,miterLimit:d.miterLimit,lineDash:d.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||G.PH,justify:e.justify,textBaseline:e.textBaseline||G.ru,scale:e.scale});const g=this.fillKey_;l&&(g in this.fillStates||(this.fillStates[g]={fillStyle:l.fillStyle}))}drawChars_(d,e){const l=this.textStrokeState_,m=this.textState_,s=this.strokeKey_,g=this.textKey_,_=this.fillKey_;this.saveTextStates_();const y=this.pixelRatio,I=f[m.textBaseline],O=this.textOffsetY_*y,E=this.text_,R=l?l.lineWidth*Math.abs(m.scale[0])/2:0;this.instructions.push([F.ZP.DRAW_CHARS,d,e,I,m.overflow,_,m.maxAngle,y,O,s,R*y,E,g,1]),this.hitDetectionInstructions.push([F.ZP.DRAW_CHARS,d,e,I,m.overflow,_&&G.bL,m.maxAngle,1,O,s,R,E,g,1/y])}setTextStyle(d,e){let l,m,s;if(d){const g=d.getFill();g?(m=this.textFillState_,m||(m={},this.textFillState_=m),m.fillStyle=(0,k.y)(g.getColor()||G.bL)):(m=null,this.textFillState_=m);const _=d.getStroke();if(_){s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const K=_.getLineDash(),rt=_.getLineDashOffset(),b=_.getWidth(),L=_.getMiterLimit();s.lineCap=_.getLineCap()||G.mb,s.lineDash=K?K.slice():G.X9,s.lineDashOffset=void 0===rt?G.He:rt,s.lineJoin=_.getLineJoin()||G.rc,s.lineWidth=void 0===b?G.yC:b,s.miterLimit=void 0===L?G.V4:L,s.strokeStyle=(0,k.y)(_.getColor()||G.Tx)}else s=null,this.textStrokeState_=s;l=this.textState_;const y=d.getFont()||G.Df;(0,G.Qx)(y);const I=d.getScaleArray();l.overflow=d.getOverflow(),l.font=y,l.maxAngle=d.getMaxAngle(),l.placement=d.getPlacement(),l.textAlign=d.getTextAlign(),l.repeat=d.getRepeat(),l.justify=d.getJustify(),l.textBaseline=d.getTextBaseline()||G.ru,l.backgroundFill=d.getBackgroundFill(),l.backgroundStroke=d.getBackgroundStroke(),l.padding=d.getPadding()||G.oB,l.scale=void 0===I?[1,1]:I;const O=d.getOffsetX(),E=d.getOffsetY(),R=d.getRotateWithView(),N=d.getRotation();this.text_=d.getText()||"",this.textOffsetX_=void 0===O?0:O,this.textOffsetY_=void 0===E?0:E,this.textRotateWithView_=void 0!==R&&R,this.textRotation_=void 0===N?0:N,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:(0,Z.sq)(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=l.font+l.scale+(l.textAlign||"?")+(l.repeat||"?")+(l.justify||"?")+(l.textBaseline||"?"),this.fillKey_=m?"string"==typeof m.fillStyle?m.fillStyle:"|"+(0,Z.sq)(m.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}},1693:(jt,ht,a)=>{"use strict";a.d(ht,{TU:()=>P,UN:()=>S,ix:()=>v});var z=a(6861),F=a(1485),k=a(9363),G=a(3026),Z=a(4211),A=a(1316);const S=.5;function P(f,u,c,r,d,e,l){const g=(0,Z.E4)(f[0]*S,f[1]*S);g.imageSmoothingEnabled=!1;const _=g.canvas,y=new z.Z(g,S,d,null,l),I=c.length,O=Math.floor(16777215/I),E={};for(let N=1;N<=I;++N){const K=c[N-1],rt=K.getStyleFunction()||r;if(!rt)continue;let b=rt(K,e);if(!b)continue;Array.isArray(b)||(b=[b]);const w=(N*O).toString(16).padStart(7,"#00000");for(let M=0,C=b.length;M<C;++M){const D=b[M],Y=D.getGeometryFunction()(K);if(!Y||!(0,A.kK)(d,Y.getExtent()))continue;const st=D.clone(),V=st.getFill();V&&V.setColor(w);const at=st.getStroke();at&&(at.setColor(w),at.setLineDash(null)),st.setText(void 0);const ut=D.getImage();if(ut){const At=ut.getImageSize();if(!At)continue;const Gt=(0,Z.E4)(At[0],At[1],void 0,{alpha:!1}),zt=Gt.canvas;Gt.fillStyle=w,Gt.fillRect(0,0,zt.width,zt.height),st.setImage(new F.Z({img:zt,imgSize:At,anchor:ut.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ut.getOrigin(),opacity:1,size:ut.getSize(),scale:ut.getScale(),rotation:ut.getRotation(),rotateWithView:ut.getRotateWithView()}))}const Pt=st.getZIndex()||0;let vt=E[Pt];vt||(vt={},E[Pt]=vt,vt.Polygon=[],vt.Circle=[],vt.LineString=[],vt.Point=[]);const Ot=Y.getType();if("GeometryCollection"===Ot){const At=Y.getGeometriesArrayRecursive();for(let Gt=0,zt=At.length;Gt<zt;++Gt){const qt=At[Gt];vt[qt.getType().replace("Multi","")].push(qt,st)}}else vt[Ot.replace("Multi","")].push(Y,st)}}const R=Object.keys(E).map(Number).sort(k.j2);for(let N=0,K=R.length;N<K;++N){const rt=E[R[N]];for(const b in rt){const L=rt[b];for(let w=0,M=L.length;w<M;w+=2){y.setStyle(L[w+1]);for(let C=0,D=u.length;C<D;++C)y.setTransform(u[C]),y.drawGeometry(L[w])}}}return g.getImageData(0,0,_.width,_.height)}function v(f,u,c){const r=[];if(c){const d=Math.floor(Math.round(f[0])*S),e=Math.floor(Math.round(f[1])*S),l=4*((0,G.uZ)(d,0,c.width-1)+(0,G.uZ)(e,0,c.height-1)*c.width),_=c.data[l+2]+256*(c.data[l+1]+256*c.data[l]),y=Math.floor(16777215/u.length);_&&_%y==0&&r.push(u[_/y-1])}return r}},1576:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>A});var z=a(2431),F=a(4847),k=a(2224),G=a(3089);const A=class Z extends k.Z{constructor(P){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=P,this.declutterExecutorGroup=null}getFeatures(P){return(0,G.O3)()}getData(P){return null}prepareFrame(P){return(0,G.O3)()}renderFrame(P,v){return(0,G.O3)()}loadedTileCallback(P,v,f){P[v]||(P[v]={}),P[v][f.tileCoord.toString()]=f}createLoadedTileFinder(P,v,f){return(u,c)=>{const r=this.loadedTileCallback.bind(this,f,u);return P.forEachLoadedTile(v,u,c,r)}}forEachFeatureAtCoordinate(P,v,f,u,c){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(P){const v=P.target;(v.getState()===F.Z.LOADED||v.getState()===F.Z.ERROR)&&this.renderIfReadyAndVisible()}loadImage(P){let v=P.getState();return v!=F.Z.LOADED&&v!=F.Z.ERROR&&P.addEventListener(z.Z.CHANGE,this.boundHandleImageChange_),v==F.Z.IDLE&&(P.load(),v=P.getState()),v==F.Z.LOADED}renderIfReadyAndVisible(){const P=this.getLayer();P&&P.getVisible()&&"ready"===P.getSourceState()&&P.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}},4696:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>P});var z=a(7864),F=a(4847),k=a(3701),G=a(6412),Z=a(1316),A=a(7021);const P=class S extends z.Z{constructor(f){super(f),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(f){const u=f.layerStatesArray[f.layerIndex],c=f.pixelRatio,r=f.viewState,d=r.resolution,e=this.getLayer().getSource(),l=f.viewHints;let m=f.extent;if(void 0!==u.extent&&(m=(0,Z.Ed)(m,(0,A.dY)(u.extent,r.projection))),!l[k.Z.ANIMATING]&&!l[k.Z.INTERACTING]&&!(0,Z.xb)(m))if(e){const g=e.getImage(m,d,c,r.projection);g&&(this.loadImage(g)?this.image_=g:g.getState()===F.Z.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(f){const u=this.frameState;if(!u)return null;const c=this.getLayer(),r=(0,G.nn)(u.pixelToCoordinateTransform,f.slice()),d=c.getExtent();if(d&&!(0,Z.b8)(d,r))return null;const e=this.image_.getExtent(),l=this.getImage(),m=(0,Z.dz)(e),s=Math.floor(l.width*((r[0]-e[0])/m));if(s<0||s>=l.width)return null;const g=(0,Z.Cr)(e),_=Math.floor(l.height*((e[3]-r[1])/g));return _<0||_>=l.height?null:this.getImageData(l,s,_)}renderFrame(f,u){const c=this.image_,r=c.getExtent(),d=c.getResolution(),e=c.getPixelRatio(),l=f.layerStatesArray[f.layerIndex],m=f.pixelRatio,s=f.viewState,g=s.center,y=m*d/(s.resolution*e),I=f.extent,O=s.resolution,E=s.rotation,R=Math.round((0,Z.dz)(I)/O*m),N=Math.round((0,Z.Cr)(I)/O*m);(0,G.qC)(this.pixelTransform,f.size[0]/2,f.size[1]/2,1/m,1/m,E,-R/2,-N/2),(0,G.nb)(this.inversePixelTransform,this.pixelTransform);const K=(0,G.BB)(this.pixelTransform);this.useContainer(u,K,this.getBackground(f));const rt=this.context,b=rt.canvas;b.width!=R||b.height!=N?(b.width=R,b.height=N):this.containerReused||rt.clearRect(0,0,R,N);let L=!1,w=!0;if(l.extent){const st=(0,A.dY)(l.extent,s.projection);w=(0,Z.kK)(st,f.extent),L=w&&!(0,Z.r4)(st,f.extent),L&&this.clipUnrotated(rt,f,st)}const M=this.getImage(),C=(0,G.qC)(this.tempTransform,R/2,N/2,y,y,0,e*(r[0]-g[0])/d,e*(g[1]-r[3])/d);this.renderedResolution=d*m/e;const D=M.width*C[0],Y=M.height*C[3];if(this.getLayer().getSource().getInterpolate()||(rt.imageSmoothingEnabled=!1),this.preRender(rt,f),w&&D>=.5&&Y>=.5){const st=C[4],V=C[5],at=l.opacity;let ut;1!==at&&(ut=rt.globalAlpha,rt.globalAlpha=at),rt.drawImage(M,0,0,+M.width,+M.height,st,V,D,Y),1!==at&&(rt.globalAlpha=ut)}return this.postRender(rt,f),L&&rt.restore(),rt.imageSmoothingEnabled=!0,K!==b.style.transform&&(b.style.transform=K),this.container}}},7864:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r,r:()=>v});var z=a(1576),F=a(891),k=a(8934),G=a(6412),Z=a(9818),A=a(4211),S=a(9363),P=a(1316);const v=[];let f=null;const r=class c extends z.Z{constructor(e){super(e),this.container=null,this.tempTransform=(0,G.Ue)(),this.pixelTransform=(0,G.Ue)(),this.inversePixelTransform=(0,G.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,l,m){let s;f||function u(){f=(0,A.E4)(1,1,void 0,{willReadFrequently:!0})}(),f.clearRect(0,0,1,1);try{f.drawImage(e,l,m,1,1,0,0,1,1),s=f.getImageData(0,0,1,1).data}catch{return f=null,null}return s}getBackground(e){let m=this.getLayer().getBackground();return"function"==typeof m&&(m=m(e.viewState.resolution)),m||void 0}useContainer(e,l,m){const s=this.getLayer().getClassName();let g,_;if(e&&e.className===s&&(!m||e&&e.style.backgroundColor&&(0,S.fS)((0,Z._2)(e.style.backgroundColor),(0,Z._2)(m)))){const y=e.firstElementChild;y instanceof HTMLCanvasElement&&(_=y.getContext("2d"))}if(_&&_.canvas.style.transform===l?(this.container=e,this.context=_,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){g=document.createElement("div"),g.className=s;let y=g.style;y.position="absolute",y.width="100%",y.height="100%",_=(0,A.E4)();const I=_.canvas;g.appendChild(I),y=I.style,y.position="absolute",y.left="0",y.transformOrigin="top left",this.container=g,this.context=_}!this.containerReused&&m&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=m)}clipUnrotated(e,l,m){const s=(0,P.rL)(m),g=(0,P.Xv)(m),_=(0,P.w$)(m),y=(0,P.hC)(m);(0,G.nn)(l.coordinateToPixelTransform,s),(0,G.nn)(l.coordinateToPixelTransform,g),(0,G.nn)(l.coordinateToPixelTransform,_),(0,G.nn)(l.coordinateToPixelTransform,y);const I=this.inversePixelTransform;(0,G.nn)(I,s),(0,G.nn)(I,g),(0,G.nn)(I,_),(0,G.nn)(I,y),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(g[0]),Math.round(g[1])),e.lineTo(Math.round(_[0]),Math.round(_[1])),e.lineTo(Math.round(y[0]),Math.round(y[1])),e.clip()}dispatchRenderEvent_(e,l,m){const s=this.getLayer();if(s.hasListener(e)){const g=new F.Z(e,this.inversePixelTransform,m,l);s.dispatchEvent(g)}}preRender(e,l){this.frameState=l,this.dispatchRenderEvent_(k.Z.PRERENDER,e,l)}postRender(e,l){this.dispatchRenderEvent_(k.Z.POSTRENDER,e,l)}getRenderTransform(e,l,m,s,g,_,y){const E=s/l;return(0,G.qC)(this.tempTransform,g/2,_/2,E,-E,-m,-e[0]+y,-e[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}}},3083:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r});var z=a(7864),F=a(3968),k=a(8857),G=a(6025),Z=a(5399),A=a(6412),S=a(9363),P=a(1316),v=a(7021),f=a(3089),u=a(7298);const r=class c extends z.Z{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,P.lJ)(),this.tmpTileRange_=new G.Z(0,0,0,0)}isDrawableTile(e){const l=this.getLayer(),m=e.getState(),s=l.getUseInterimTilesOnError();return m==Z.Z.LOADED||m==Z.Z.EMPTY||m==Z.Z.ERROR&&!s}getTile(e,l,m,s){const g=s.pixelRatio,_=s.viewState.projection,y=this.getLayer();let O=y.getSource().getTile(e,l,m,g,_);return O.getState()==Z.Z.ERROR&&y.getUseInterimTilesOnError()&&y.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(O)||(O=O.getInterimTile()),O}getData(e){const l=this.frameState;if(!l)return null;const m=this.getLayer(),s=(0,A.nn)(l.pixelToCoordinateTransform,e.slice()),g=m.getExtent();if(g&&!(0,P.b8)(g,s))return null;const _=l.pixelRatio,y=l.viewState.projection,I=l.viewState,O=m.getRenderSource(),E=O.getTileGridForProjection(I.projection),R=O.getTilePixelRatio(l.pixelRatio);for(let N=E.getZForResolution(I.resolution);N>=E.getMinZoom();--N){const K=E.getTileCoordForCoordAndZ(s,N),rt=O.getTile(N,K[1],K[2],_,y);if(!(rt instanceof F.Z||rt instanceof k.Z)||rt instanceof k.Z&&rt.getState()===Z.Z.EMPTY)return null;if(rt.getState()!==Z.Z.LOADED)continue;const b=E.getOrigin(N),L=(0,u.Pq)(E.getTileSize(N)),w=E.getResolution(N),M=Math.floor(R*((s[0]-b[0])/w-K[1]*L[0])),C=Math.floor(R*((b[1]-s[1])/w-K[2]*L[1])),D=Math.round(R*O.getGutterForProjection(I.projection));return this.getImageData(rt.getImage(),M+D,C+D)}return null}loadedTileCallback(e,l,m){return!!this.isDrawableTile(m)&&super.loadedTileCallback(e,l,m)}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,l){const m=e.layerStatesArray[e.layerIndex],s=e.viewState,g=s.projection,_=s.resolution,y=s.center,I=s.rotation,O=e.pixelRatio,E=this.getLayer(),R=E.getSource(),N=R.getRevision(),K=R.getTileGridForProjection(g),rt=K.getZForResolution(_,R.zDirection),b=K.getResolution(rt);let L=e.extent;const w=e.viewState.resolution,M=R.getTilePixelRatio(O),C=Math.round((0,P.dz)(L)/w*O),D=Math.round((0,P.Cr)(L)/w*O),Y=m.extent&&(0,v.dY)(m.extent,g);Y&&(L=(0,P.Ed)(L,(0,v.dY)(m.extent,g)));const st=b*C/2/M,V=b*D/2/M,at=[y[0]-st,y[1]-V,y[0]+st,y[1]+V],ut=K.getTileRangeForExtentAndZ(L,rt),Pt={};Pt[rt]={};const vt=this.createLoadedTileFinder(R,g,Pt),Ot=this.tmpExtent,At=this.tmpTileRange_;this.newTiles_=!1;const Gt=I?(0,P.dY)(s.center,w,I,e.size):void 0;for(let Ct=ut.minX;Ct<=ut.maxX;++Ct)for(let Zt=ut.minY;Zt<=ut.maxY;++Zt){if(I&&!K.tileCoordIntersectsViewport([rt,Ct,Zt],Gt))continue;const Vt=this.getTile(rt,Ct,Zt,e);if(this.isDrawableTile(Vt)){const gt=(0,f.sq)(this);if(Vt.getState()==Z.Z.LOADED){Pt[rt][Vt.tileCoord.toString()]=Vt;let xt=Vt.inTransition(gt);xt&&1!==m.opacity&&(Vt.endTransition(gt),xt=!1),!this.newTiles_&&(xt||!this.renderedTiles.includes(Vt))&&(this.newTiles_=!0)}if(1===Vt.getAlpha(gt,e.time))continue}const pe=K.getTileCoordChildTileRange(Vt.tileCoord,At,Ot);let Yt=!1;pe&&(Yt=vt(rt+1,pe)),Yt||K.forEachTileCoordParentTileRange(Vt.tileCoord,vt,At,Ot)}const zt=b/_*O/M;(0,A.qC)(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/O,1/O,I,-C/2,-D/2);const qt=(0,A.BB)(this.pixelTransform);this.useContainer(l,qt,this.getBackground(e));const Xt=this.context,fe=Xt.canvas;(0,A.nb)(this.inversePixelTransform,this.pixelTransform),(0,A.qC)(this.tempTransform,C/2,D/2,zt,zt,0,-C/2,-D/2),fe.width!=C||fe.height!=D?(fe.width=C,fe.height=D):this.containerReused||Xt.clearRect(0,0,C,D),Y&&this.clipUnrotated(Xt,e,Y),R.getInterpolate()||(Xt.imageSmoothingEnabled=!1),this.preRender(Xt,e),this.renderedTiles.length=0;let ce,Ce,ft,he=Object.keys(Pt).map(Number);he.sort(S.j2),1!==m.opacity||this.containerReused&&!R.getOpaque(e.viewState.projection)?(ce=[],Ce=[]):he=he.reverse();for(let Ct=he.length-1;Ct>=0;--Ct){const Zt=he[Ct],Vt=R.getTilePixelSize(Zt,O,g),Yt=K.getResolution(Zt)/b,gt=Vt[0]*Yt*zt,xt=Vt[1]*Yt*zt,Ft=K.getTileCoordForCoordAndZ((0,P.rL)(at),Zt),Wt=K.getTileCoordExtent(Ft),Bt=(0,A.nn)(this.tempTransform,[M*(Wt[0]-at[0])/b,M*(at[3]-Wt[3])/b]),ue=M*R.getGutterForProjection(g),ge=Pt[Zt];for(const Le in ge){const Me=ge[Le],nt=Me.tileCoord,Q=Ft[1]-nt[1],x=Math.round(Bt[0]-(Q-1)*gt),W=Ft[2]-nt[2],tt=Math.round(Bt[1]-(W-1)*xt),et=Math.round(Bt[0]-Q*gt),yt=Math.round(Bt[1]-W*xt),Et=x-et,It=tt-yt,wt=rt===Zt,Jt=wt&&1!==Me.getAlpha((0,f.sq)(this),e.time);let ne=!1;if(!Jt)if(ce){ft=[et,yt,et+Et,yt,et+Et,yt+It,et,yt+It];for(let ye=0,oe=ce.length;ye<oe;++ye)if(rt!==Zt&&Zt<Ce[ye]){const ie=ce[ye];(0,P.kK)([et,yt,et+Et,yt+It],[ie[0],ie[3],ie[4],ie[7]])&&(ne||(Xt.save(),ne=!0),Xt.beginPath(),Xt.moveTo(ft[0],ft[1]),Xt.lineTo(ft[2],ft[3]),Xt.lineTo(ft[4],ft[5]),Xt.lineTo(ft[6],ft[7]),Xt.moveTo(ie[6],ie[7]),Xt.lineTo(ie[4],ie[5]),Xt.lineTo(ie[2],ie[3]),Xt.lineTo(ie[0],ie[1]),Xt.clip())}ce.push(ft),Ce.push(Zt)}else Xt.clearRect(et,yt,Et,It);this.drawTileImage(Me,e,et,yt,Et,It,ue,wt),ce&&!Jt?(ne&&Xt.restore(),this.renderedTiles.unshift(Me)):this.renderedTiles.push(Me),this.updateUsedTiles(e.usedTiles,R,Me)}}return this.renderedRevision=N,this.renderedResolution=b,this.extentChanged=!this.renderedExtent_||!(0,P.fS)(this.renderedExtent_,at),this.renderedExtent_=at,this.renderedPixelRatio=O,this.renderedProjection=g,this.manageTilePyramid(e,R,K,O,g,L,rt,E.getPreload()),this.scheduleExpireCache(e,R),this.postRender(Xt,e),m.extent&&Xt.restore(),Xt.imageSmoothingEnabled=!0,qt!==fe.style.transform&&(fe.style.transform=qt),this.container}drawTileImage(e,l,m,s,g,_,y,I){const O=this.getTileImage(e);if(!O)return;const E=(0,f.sq)(this),R=l.layerStatesArray[l.layerIndex],N=R.opacity*(I?e.getAlpha(E,l.time):1),K=N!==this.context.globalAlpha;K&&(this.context.save(),this.context.globalAlpha=N),this.context.drawImage(O,y,y,O.width-2*y,O.height-2*y,m,s,g,_),K&&this.context.restore(),N!==R.opacity?l.animate=!0:I&&e.endTransition(E)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,l){if(l.canExpireCache()){const m=function(s,g,_){const y=(0,f.sq)(s);y in _.usedTiles&&s.expireCache(_.viewState.projection,_.usedTiles[y])}.bind(null,l);e.postRenderFunctions.push(m)}}updateUsedTiles(e,l,m){const s=(0,f.sq)(l);s in e||(e[s]={}),e[s][m.getKey()]=!0}manageTilePyramid(e,l,m,s,g,_,y,I,O){const E=(0,f.sq)(l);E in e.wantedTiles||(e.wantedTiles[E]={});const R=e.wantedTiles[E],N=e.tileQueue,K=m.getMinZoom(),rt=e.viewState.rotation,b=rt?(0,P.dY)(e.viewState.center,e.viewState.resolution,rt,e.size):void 0;let w,M,C,D,Y,st,L=0;for(st=K;st<=y;++st)for(M=m.getTileRangeForExtentAndZ(_,st,M),C=m.getResolution(st),D=M.minX;D<=M.maxX;++D)for(Y=M.minY;Y<=M.maxY;++Y)rt&&!m.tileCoordIntersectsViewport([st,D,Y],b)||(y-st<=I?(++L,w=l.getTile(st,D,Y,s,g),w.getState()==Z.Z.IDLE&&(R[w.getKey()]=!0,N.isKeyQueued(w.getKey())||N.enqueue([w,E,m.getTileCoordCenter(w.tileCoord),C])),void 0!==O&&O(w)):l.useTile(st,D,Y,g));l.updateCacheSize(L,g)}}},5564:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>l});var z=a(223),F=a(7864),k=a(341),G=a(8934),Z=a(3701),A=a(1693),S=a(6412),P=a(1316),v=a(4211),f=a(6259),u=a(9363),c=a(7021),r=a(3089),d=a(1242);const l=class e extends F.Z{constructor(s){super(s),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,P.lJ)(),this.wrappedRenderedExtent_=(0,P.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(s,g,_){const y=g.extent,I=g.viewState,O=I.center,E=I.resolution,R=I.projection,N=I.rotation,K=R.getExtent(),rt=this.getLayer().getSource(),b=g.pixelRatio,L=g.viewHints,w=!(L[Z.Z.ANIMATING]||L[Z.Z.INTERACTING]),M=this.compositionContext_,C=Math.round(g.size[0]*b),D=Math.round(g.size[1]*b),Y=rt.getWrapX()&&R.canWrapX(),st=Y?(0,P.dz)(K):null,V=Y?Math.ceil((y[2]-K[2])/st)+1:1;let at=Y?Math.floor((y[0]-K[0])/st):0;do{const ut=this.getRenderTransform(O,E,N,b,C,D,at*st);s.execute(M,1,ut,N,w,void 0,_)}while(++at<V)}setupCompositionContext_(){if(1!==this.opacity_){const s=(0,v.E4)(this.context.canvas.width,this.context.canvas.height,F.r);this.compositionContext_=s}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const s=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=s,(0,v.jy)(this.compositionContext_),F.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(s){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,s,s.declutterTree),this.releaseCompositionContext_())}renderFrame(s,g){const _=s.pixelRatio,y=s.layerStatesArray[s.layerIndex];(0,S.n3)(this.pixelTransform,1/_,1/_),(0,S.nb)(this.inversePixelTransform,this.pixelTransform);const I=(0,S.BB)(this.pixelTransform);this.useContainer(g,I,this.getBackground(s));const O=this.context,E=O.canvas,R=this.replayGroup_,N=this.declutterExecutorGroup;let K=R&&!R.isEmpty()||N&&!N.isEmpty();if(!K&&!this.getLayer().hasListener(G.Z.PRERENDER)&&!this.getLayer().hasListener(G.Z.POSTRENDER))return null;const rt=Math.round(s.size[0]*_),b=Math.round(s.size[1]*_);E.width!=rt||E.height!=b?(E.width=rt,E.height=b,E.style.transform!==I&&(E.style.transform=I)):this.containerReused||O.clearRect(0,0,rt,b),this.preRender(O,s);const L=s.viewState,w=L.projection;this.opacity_=y.opacity,this.setupCompositionContext_();let M=!1;if(K&&y.extent&&this.clipping){const C=(0,c.dY)(y.extent,w);K=(0,P.kK)(C,s.extent),M=K&&!(0,P.r4)(C,s.extent),M&&this.clipUnrotated(this.compositionContext_,s,C)}return K&&this.renderWorlds(R,s),M&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(O,s),this.renderedRotation_!==L.rotation&&(this.renderedRotation_=L.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(s){return new Promise(g=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const _=[this.context.canvas.width,this.context.canvas.height];(0,S.nn)(this.pixelTransform,_);const y=this.renderedCenter_,I=this.renderedResolution_,O=this.renderedRotation_,E=this.renderedProjection_,R=this.wrappedRenderedExtent_,N=this.getLayer(),K=[],rt=_[0]*A.UN,b=_[1]*A.UN;K.push(this.getRenderTransform(y,I,O,A.UN,rt,b,0).slice());const L=N.getSource(),w=E.getExtent();if(L.getWrapX()&&E.canWrapX()&&!(0,P.r4)(w,R)){let M=R[0];const C=(0,P.dz)(w);let Y,D=0;for(;M<w[0];)--D,Y=C*D,K.push(this.getRenderTransform(y,I,O,A.UN,rt,b,Y).slice()),M+=C;for(D=0,M=R[2];M>w[2];)++D,Y=C*D,K.push(this.getRenderTransform(y,I,O,A.UN,rt,b,Y).slice()),M-=C}this.hitDetectionImageData_=(0,A.TU)(_,K,this.renderedFeatures_,N.getStyleFunction(),R,I,O)}g((0,A.ix)(s,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(s,g,_,y,I){if(!this.replayGroup_)return;const O=g.viewState.resolution,E=g.viewState.rotation,R=this.getLayer(),N={},K=function(L,w,M){const C=(0,r.sq)(L),D=N[C];if(D){if(!0!==D&&M<D.distanceSq){if(0===M)return N[C]=!0,I.splice(I.lastIndexOf(D),1),y(L,R,w);D.geometry=w,D.distanceSq=M}}else{if(0===M)return N[C]=!0,y(L,R,w);I.push(N[C]={feature:L,layer:R,geometry:w,distanceSq:M,callback:y})}};let rt;const b=[this.replayGroup_];return this.declutterExecutorGroup&&b.push(this.declutterExecutorGroup),b.some(L=>rt=L.forEachFeatureAtCoordinate(s,O,E,_,K,L===this.declutterExecutorGroup&&g.declutterTree?g.declutterTree.all().map(w=>w.value):null)),rt}handleFontsChanged(){const s=this.getLayer();s.getVisible()&&this.replayGroup_&&s.changed()}handleStyleImageChange_(s){this.renderIfReadyAndVisible()}prepareFrame(s){const g=this.getLayer(),_=g.getSource();if(!_)return!1;const y=s.viewHints[Z.Z.ANIMATING],I=s.viewHints[Z.Z.INTERACTING],O=g.getUpdateWhileAnimating(),E=g.getUpdateWhileInteracting();if(this.ready&&!O&&y||!E&&I)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const R=s.extent,N=s.viewState,K=N.projection,rt=N.resolution,b=s.pixelRatio,L=g.getRevision(),w=g.getRenderBuffer();let M=g.getRenderOrder();void 0===M&&(M=f.eR);const C=N.center.slice(),D=(0,P.f3)(R,w*rt),Y=D.slice(),st=[D.slice()],V=K.getExtent();if(_.getWrapX()&&K.canWrapX()&&!(0,P.r4)(V,s.extent)){const he=(0,P.dz)(V),ce=Math.max((0,P.dz)(D)/2,he);D[0]=V[0]-ce,D[2]=V[2]+ce,(0,d.Cf)(C,K);const Ce=(0,P.Cf)(st[0],K);Ce[0]<V[0]&&Ce[2]<V[2]?st.push([Ce[0]+he,Ce[1],Ce[2]+he,Ce[3]]):Ce[0]>V[0]&&Ce[2]>V[2]&&st.push([Ce[0]-he,Ce[1],Ce[2]-he,Ce[3]])}if(this.ready&&this.renderedResolution_==rt&&this.renderedRevision_==L&&this.renderedRenderOrder_==M&&(0,P.r4)(this.wrappedRenderedExtent_,D))return(0,u.fS)(this.renderedExtent_,Y)||(this.hitDetectionImageData_=null,this.renderedExtent_=Y),this.renderedCenter_=C,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const at=new z.Z((0,f.Qz)(rt,b),D,rt,b);let ut;this.getLayer().getDeclutter()&&(ut=new z.Z((0,f.Qz)(rt,b),D,rt,b));const Pt=(0,c.Cs)();let vt;if(Pt){for(let he=0,ce=st.length;he<ce;++he){const ft=(0,c.Fj)(st[he],K);_.loadFeatures(ft,(0,c.on)(rt,K),Pt)}vt=(0,c.WO)(Pt,K)}else for(let he=0,ce=st.length;he<ce;++he)_.loadFeatures(st[he],rt,K);const Ot=(0,f.se)(rt,b);let At=!0;const Gt=he=>{let ce;const Ce=he.getStyleFunction()||g.getStyleFunction();if(Ce&&(ce=Ce(he,rt)),ce){const ft=this.renderFeature(he,Ot,ce,at,vt,ut);At=At&&!ft}},zt=(0,c.Fj)(D,K),qt=_.getFeaturesInExtent(zt);M&&qt.sort(M);for(let he=0,ce=qt.length;he<ce;++he)Gt(qt[he]);this.renderedFeatures_=qt,this.ready=At;const Xt=at.finish(),fe=new k.Z(D,rt,b,_.getOverlaps(),Xt,g.getRenderBuffer());return ut&&(this.declutterExecutorGroup=new k.Z(D,rt,b,_.getOverlaps(),ut.finish(),g.getRenderBuffer())),this.renderedResolution_=rt,this.renderedRevision_=L,this.renderedRenderOrder_=M,this.renderedExtent_=Y,this.wrappedRenderedExtent_=D,this.renderedCenter_=C,this.renderedProjection_=K,this.replayGroup_=fe,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(s,g,_,y,I,O){if(!_)return!1;let E=!1;if(Array.isArray(_))for(let R=0,N=_.length;R<N;++R)E=(0,f.Pn)(y,s,_[R],g,this.boundHandleStyleImageChange_,I,O)||E;else E=(0,f.Pn)(y,s,_,g,this.boundHandleStyleImageChange_,I,O);return E}}},6259:(jt,ht,a)=>{"use strict";a.d(ht,{Pn:()=>v,Qz:()=>S,eR:()=>Z,se:()=>A});var z=a(4847),F=a(3089);const k=.5,G={Point:function l(g,_,y,I,O){const E=y.getImage(),R=y.getText();let N;if(E){if(E.getImageState()!=z.Z.LOADED)return;let K=g;if(O){const b=E.getDeclutterMode();if("none"!==b)if(K=O,"obstacle"===b){const L=g.getBuilder(y.getZIndex(),"Image");L.setImageStyle(E,N),L.drawPoint(_,I)}else R&&R.getText()&&(N={})}const rt=K.getBuilder(y.getZIndex(),"Image");rt.setImageStyle(E,N),rt.drawPoint(_,I)}if(R&&R.getText()){let K=g;O&&(K=O);const rt=K.getBuilder(y.getZIndex(),"Text");rt.setTextStyle(R,N),rt.drawText(_,I)}},LineString:function r(g,_,y,I,O){const E=y.getStroke();if(E){const N=g.getBuilder(y.getZIndex(),"LineString");N.setFillStrokeStyle(null,E),N.drawLineString(_,I)}const R=y.getText();if(R&&R.getText()){const N=(O||g).getBuilder(y.getZIndex(),"Text");N.setTextStyle(R),N.drawText(_,I)}},Polygon:function s(g,_,y,I,O){const E=y.getFill(),R=y.getStroke();if(E||R){const K=g.getBuilder(y.getZIndex(),"Polygon");K.setFillStrokeStyle(E,R),K.drawPolygon(_,I)}const N=y.getText();if(N&&N.getText()){const K=(O||g).getBuilder(y.getZIndex(),"Text");K.setTextStyle(N),K.drawText(_,I)}},MultiPoint:function m(g,_,y,I,O){const E=y.getImage(),R=y.getText();let N;if(E){if(E.getImageState()!=z.Z.LOADED)return;let K=g;if(O){const b=E.getDeclutterMode();if("none"!==b)if(K=O,"obstacle"===b){const L=g.getBuilder(y.getZIndex(),"Image");L.setImageStyle(E,N),L.drawMultiPoint(_,I)}else R&&R.getText()&&(N={})}const rt=K.getBuilder(y.getZIndex(),"Image");rt.setImageStyle(E,N),rt.drawMultiPoint(_,I)}if(R&&R.getText()){let K=g;O&&(K=O);const rt=K.getBuilder(y.getZIndex(),"Text");rt.setTextStyle(R,N),rt.drawText(_,I)}},MultiLineString:function d(g,_,y,I,O){const E=y.getStroke();if(E){const N=g.getBuilder(y.getZIndex(),"LineString");N.setFillStrokeStyle(null,E),N.drawMultiLineString(_,I)}const R=y.getText();if(R&&R.getText()){const N=(O||g).getBuilder(y.getZIndex(),"Text");N.setTextStyle(R),N.drawText(_,I)}},MultiPolygon:function e(g,_,y,I,O){const E=y.getFill(),R=y.getStroke();if(R||E){const K=g.getBuilder(y.getZIndex(),"Polygon");K.setFillStrokeStyle(E,R),K.drawMultiPolygon(_,I)}const N=y.getText();if(N&&N.getText()){const K=(O||g).getBuilder(y.getZIndex(),"Text");K.setTextStyle(N),K.drawText(_,I)}},GeometryCollection:function c(g,_,y,I,O){const E=_.getGeometriesArray();let R,N;for(R=0,N=E.length;R<N;++R)(0,G[E[R].getType()])(g,E[R],y,I,O)},Circle:function P(g,_,y,I,O){const E=y.getFill(),R=y.getStroke();if(E||R){const K=g.getBuilder(y.getZIndex(),"Circle");K.setFillStrokeStyle(E,R),K.drawCircle(_,I)}const N=y.getText();if(N&&N.getText()){const K=(O||g).getBuilder(y.getZIndex(),"Text");K.setTextStyle(N),K.drawText(_,I)}}};function Z(g,_){return parseInt((0,F.sq)(g),10)-parseInt((0,F.sq)(_),10)}function A(g,_){const y=S(g,_);return y*y}function S(g,_){return k*g/_}function v(g,_,y,I,O,E,R){let N=!1;const K=y.getImage();if(K){const rt=K.getImageState();rt==z.Z.LOADED||rt==z.Z.ERROR?K.unlistenImageChange(O):(rt==z.Z.IDLE&&K.load(),K.listenImageChange(O),N=!0)}return function f(g,_,y,I,O,E){const R=y.getGeometryFunction()(_);if(!R)return;const N=R.simplifyTransformed(I,O);y.getRenderer()?u(g,N,y,_):(0,G[N.getType()])(g,N,y,_,E)}(g,_,y,I,E,R),N}function u(g,_,y,I){if("GeometryCollection"!=_.getType())g.getBuilder(y.getZIndex(),"Default").drawCustom(_,I,y.getRenderer(),y.getHitDetectionRenderer());else{const E=_.getGeometries();for(let R=0,N=E.length;R<N;++R)u(g,E[R],y,I)}}},6230:(jt,ht,a)=>{"use strict";a.d(ht,{Co:()=>u,aA:()=>f,rX:()=>A,sY:()=>c});var z=a(1316),F=a(4211),k=a(7021),G=a(3026);let Z;const A=[];function S(r,d,e,l,m){r.beginPath(),r.moveTo(0,0),r.lineTo(d,e),r.lineTo(l,m),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(d,l)+1,Math.max(e,m)),r.restore()}function P(r,d){return Math.abs(r[4*d]-210)>2||Math.abs(r[4*d+3]-191.25)>2}function f(r,d,e,l){const m=(0,k.vs)(e,d,r);let s=(0,k._Q)(d,l,e);const g=d.getMetersPerUnit();void 0!==g&&(s*=g);const _=r.getMetersPerUnit();void 0!==_&&(s/=_);const y=r.getExtent();if(!y||(0,z.b8)(y,m)){const I=(0,k._Q)(r,s,m)/s;isFinite(I)&&I>0&&(s/=I)}return s}function u(r,d,e,l){const m=(0,z.qg)(e);let s=f(r,d,m,l);return(!isFinite(s)||s<=0)&&(0,z.H6)(e,function(g){return s=f(r,d,g,l),isFinite(s)&&s>0}),s}function c(r,d,e,l,m,s,g,_,y,I,O,E){const R=(0,F.E4)(Math.round(e*r),Math.round(e*d),A);if(E||(R.imageSmoothingEnabled=!1),0===y.length)return R.canvas;function N(C){return Math.round(C*e)/e}R.scale(e,e),R.globalCompositeOperation="lighter";const K=(0,z.lJ)();y.forEach(function(C,D,Y){(0,z.l7)(K,C.extent)});const rt=(0,z.dz)(K),b=(0,z.Cr)(K),L=(0,F.E4)(Math.round(e*rt/l),Math.round(e*b/l),A);E||(L.imageSmoothingEnabled=!1);const w=e/l;y.forEach(function(C,D,Y){const st=C.extent[0]-K[0],V=-(C.extent[3]-K[3]),at=(0,z.dz)(C.extent),ut=(0,z.Cr)(C.extent);C.image.width>0&&C.image.height>0&&L.drawImage(C.image,I,I,C.image.width-2*I,C.image.height-2*I,st*w,V*w,at*w,ut*w)});const M=(0,z.rL)(g);return _.getTriangles().forEach(function(C,D,Y){const st=C.source,V=C.target;let at=st[0][0],ut=st[0][1],Pt=st[1][0],vt=st[1][1],Ot=st[2][0],At=st[2][1];const Gt=N((V[0][0]-M[0])/s),zt=N(-(V[0][1]-M[1])/s),qt=N((V[1][0]-M[0])/s),Xt=N(-(V[1][1]-M[1])/s),fe=N((V[2][0]-M[0])/s),he=N(-(V[2][1]-M[1])/s),ce=at,Ce=ut;at=0,ut=0,Pt-=ce,vt-=Ce,Ot-=ce,At-=Ce;const Ct=(0,G.SV)([[Pt,vt,0,0,qt-Gt],[Ot,At,0,0,fe-Gt],[0,0,Pt,vt,Xt-zt],[0,0,Ot,At,he-zt]]);if(Ct){if(R.save(),R.beginPath(),function v(){if(void 0===Z){const r=(0,F.E4)(6,6,A);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",S(r,4,5,4,0),S(r,4,5,0,5);const d=r.getImageData(0,0,3,3).data;Z=P(d,0)||P(d,4)||P(d,8),(0,F.jy)(r),A.push(r.canvas)}return Z}()||!E){R.moveTo(qt,Xt);const Zt=4,Vt=Gt-qt,pe=zt-Xt;for(let Yt=0;Yt<Zt;Yt++)R.lineTo(qt+N((Yt+1)*Vt/Zt),Xt+N(Yt*pe/(Zt-1))),Yt!=Zt-1&&R.lineTo(qt+N((Yt+1)*Vt/Zt),Xt+N((Yt+1)*pe/(Zt-1)));R.lineTo(fe,he)}else R.moveTo(qt,Xt),R.lineTo(Gt,zt),R.lineTo(fe,he);R.clip(),R.transform(Ct[0],Ct[2],Ct[1],Ct[3],Gt,zt),R.translate(K[0]-ce,K[3]-Ce),R.scale(l/e,-l/e),R.drawImage(L.canvas,0,0),R.restore()}}),(0,F.jy)(L),A.push(L.canvas),O&&(R.save(),R.globalCompositeOperation="source-over",R.strokeStyle="black",R.lineWidth=1,_.getTriangles().forEach(function(C,D,Y){const st=C.target,V=(st[0][0]-M[0])/s,at=-(st[0][1]-M[1])/s,ut=(st[1][0]-M[0])/s,Pt=-(st[1][1]-M[1])/s,vt=(st[2][0]-M[0])/s,Ot=-(st[2][1]-M[1])/s;R.beginPath(),R.moveTo(ut,Pt),R.lineTo(V,at),R.lineTo(vt,Ot),R.closePath(),R.stroke()}),R.restore()),R.canvas}},8857:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>c});var z=a(6149),F=a(2431),k=a(6381),G=a(5399),Z=a(1909),A=a(6230),S=a(3026),P=a(1316),v=a(7847),f=a(4211);const c=class u extends k.Z{constructor(d,e,l,m,s,g,_,y,I,O,E,R){super(s,G.Z.IDLE,{interpolate:!!R}),this.renderEdges_=void 0!==E&&E,this.pixelRatio_=_,this.gutter_=y,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=m,this.wrappedTileCoord_=g||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const N=m.getTileCoordExtent(this.wrappedTileCoord_),K=this.targetTileGrid_.getExtent();let rt=this.sourceTileGrid_.getExtent();const b=K?(0,P.Ed)(N,K):N;if(0===(0,P.bg)(b))return void(this.state=G.Z.EMPTY);const L=d.getExtent();L&&(rt=rt?(0,P.Ed)(rt,L):L);const w=m.getResolution(this.wrappedTileCoord_[0]),M=(0,A.Co)(d,l,b,w);if(!isFinite(M)||M<=0)return void(this.state=G.Z.EMPTY);if(this.triangulation_=new Z.Z(d,l,b,rt,M*(void 0!==O?O:z.m),w),0===this.triangulation_.getTriangles().length)return void(this.state=G.Z.EMPTY);this.sourceZ_=e.getZForResolution(M);let D=this.triangulation_.calculateSourceExtent();if(rt&&(d.canWrapX()?(D[1]=(0,S.uZ)(D[1],rt[1],rt[3]),D[3]=(0,S.uZ)(D[3],rt[1],rt[3])):D=(0,P.Ed)(D,rt)),(0,P.bg)(D)){const Y=e.getTileRangeForExtentAndZ(D,this.sourceZ_);for(let st=Y.minX;st<=Y.maxX;st++)for(let V=Y.minY;V<=Y.maxY;V++){const at=I(this.sourceZ_,st,V,_);at&&this.sourceTiles_.push(at)}0===this.sourceTiles_.length&&(this.state=G.Z.EMPTY)}else this.state=G.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const d=[];if(this.sourceTiles_.forEach(e=>{e&&e.getState()==G.Z.LOADED&&d.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}),this.sourceTiles_.length=0,0===d.length)this.state=G.Z.ERROR;else{const e=this.wrappedTileCoord_[0],l=this.targetTileGrid_.getTileSize(e),m="number"==typeof l?l:l[0],s="number"==typeof l?l:l[1],g=this.targetTileGrid_.getResolution(e),_=this.sourceTileGrid_.getResolution(this.sourceZ_),y=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,A.sY)(m,s,this.pixelRatio_,_,this.sourceTileGrid_.getExtent(),g,y,this.triangulation_,d,this.gutter_,this.renderEdges_,this.interpolate),this.state=G.Z.LOADED}this.changed()}load(){if(this.state==G.Z.IDLE){this.state=G.Z.LOADING,this.changed();let d=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{const l=e.getState();if(l==G.Z.IDLE||l==G.Z.LOADING){d++;const m=(0,v.oL)(e,F.Z.CHANGE,function(s){const g=e.getState();(g==G.Z.LOADED||g==G.Z.ERROR||g==G.Z.EMPTY)&&((0,v.bN)(m),d--,0===d&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(m)}}),0===d?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,l,m){e.getState()==G.Z.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(v.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,f.jy)(this.canvas_.getContext("2d")),A.rX.push(this.canvas_),this.canvas_=null),super.release()}}},1909:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>S});var z=a(1316),F=a(7021),k=a(3026);const S=class A{constructor(v,f,u,c,r,d){this.sourceProj_=v,this.targetProj_=f;let e={};const l=(0,F.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(N){const K=N[0]+"/"+N[1];return e[K]||(e[K]=l(N)),e[K]},this.maxSourceExtent_=c,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!c&&!!this.sourceProj_.getExtent()&&(0,z.dz)(c)>=(0,z.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,z.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,z.dz)(this.targetProj_.getExtent()):null;const m=(0,z.rL)(u),s=(0,z.Xv)(u),g=(0,z.w$)(u),_=(0,z.hC)(u),y=this.transformInv_(m),I=this.transformInv_(s),O=this.transformInv_(g),E=this.transformInv_(_),R=10+(d?Math.max(0,Math.ceil(Math.log2((0,z.bg)(u)/(d*d*256*256)))):0);if(this.addQuad_(m,s,g,_,y,I,O,E,R),this.wrapsXInSource_){let N=1/0;this.triangles_.forEach(function(K,rt,b){N=Math.min(N,K.source[0][0],K.source[1][0],K.source[2][0])}),this.triangles_.forEach(K=>{if(Math.max(K.source[0][0],K.source[1][0],K.source[2][0])-N>this.sourceWorldWidth_/2){const rt=[[K.source[0][0],K.source[0][1]],[K.source[1][0],K.source[1][1]],[K.source[2][0],K.source[2][1]]];rt[0][0]-N>this.sourceWorldWidth_/2&&(rt[0][0]-=this.sourceWorldWidth_),rt[1][0]-N>this.sourceWorldWidth_/2&&(rt[1][0]-=this.sourceWorldWidth_),rt[2][0]-N>this.sourceWorldWidth_/2&&(rt[2][0]-=this.sourceWorldWidth_);const b=Math.min(rt[0][0],rt[1][0],rt[2][0]);Math.max(rt[0][0],rt[1][0],rt[2][0])-b<this.sourceWorldWidth_/2&&(K.source=rt)}})}e={}}addTriangle_(v,f,u,c,r,d){this.triangles_.push({source:[c,r,d],target:[v,f,u]})}addQuad_(v,f,u,c,r,d,e,l,m){const s=(0,z.hI)([r,d,e,l]),g=this.sourceWorldWidth_?(0,z.dz)(s)/this.sourceWorldWidth_:null,_=this.sourceWorldWidth_,y=this.sourceProj_.canWrapX()&&g>.5&&g<1;let I=!1;if(m>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const E=(0,z.hI)([v,f,u,c]);I=(0,z.dz)(E)/this.targetWorldWidth_>.25||I}!y&&this.sourceProj_.isGlobal()&&g&&(I=g>.25||I)}if(!I&&this.maxSourceExtent_&&isFinite(s[0])&&isFinite(s[1])&&isFinite(s[2])&&isFinite(s[3])&&!(0,z.kK)(s,this.maxSourceExtent_))return;let O=0;if(!(I||isFinite(r[0])&&isFinite(r[1])&&isFinite(d[0])&&isFinite(d[1])&&isFinite(e[0])&&isFinite(e[1])&&isFinite(l[0])&&isFinite(l[1])))if(m>0)I=!0;else if(O=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(d[0])&&isFinite(d[1])?0:4)+(isFinite(e[0])&&isFinite(e[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1),1!=O&&2!=O&&4!=O&&8!=O)return;if(m>0){if(!I){const R=this.transformInv_([(v[0]+u[0])/2,(v[1]+u[1])/2]);let N;N=y?((0,k.$W)(r[0],_)+(0,k.$W)(e[0],_))/2-(0,k.$W)(R[0],_):(r[0]+e[0])/2-R[0];const K=(r[1]+e[1])/2-R[1];I=N*N+K*K>this.errorThresholdSquared_}if(I){if(Math.abs(v[0]-u[0])<=Math.abs(v[1]-u[1])){const E=[(f[0]+u[0])/2,(f[1]+u[1])/2],R=this.transformInv_(E),N=[(c[0]+v[0])/2,(c[1]+v[1])/2],K=this.transformInv_(N);this.addQuad_(v,f,E,N,r,d,R,K,m-1),this.addQuad_(N,E,u,c,K,R,e,l,m-1)}else{const E=[(v[0]+f[0])/2,(v[1]+f[1])/2],R=this.transformInv_(E),N=[(u[0]+c[0])/2,(u[1]+c[1])/2],K=this.transformInv_(N);this.addQuad_(v,E,N,c,r,R,K,l,m-1),this.addQuad_(E,f,u,N,R,d,e,K,m-1)}return}}if(y){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&O||this.addTriangle_(v,u,c,r,e,l),14&O||this.addTriangle_(v,u,f,r,e,d),O&&(13&O||this.addTriangle_(f,c,v,d,l,r),7&O||this.addTriangle_(f,c,u,d,l,e))}calculateSourceExtent(){const v=(0,z.lJ)();return this.triangles_.forEach(function(f,u,c){const r=f.source;(0,z.Wj)(v,r[0]),(0,z.Wj)(v,r[1]),(0,z.Wj)(v,r[2])}),v}getTriangles(){return this.triangles_}}},6149:(jt,ht,a)=>{"use strict";a.d(ht,{m:()=>z});const z=.5},3616:(jt,ht,a)=>{"use strict";a.d(ht,{Gw:()=>Z,YP:()=>k,gE:()=>G,h$:()=>F});var z=a(3026);function F(A){if(void 0!==A)return 0}function k(A){if(void 0!==A)return A}function G(A){const S=2*Math.PI/A;return function(P,v){return v?P:void 0!==P?P=Math.floor(P/S+.5)*S:void 0}}function Z(A){return A=A||(0,z.Yr)(5),function(S,P){return P?S:void 0!==S?Math.abs(S)<=A?0:S:void 0}}},7298:(jt,ht,a)=>{"use strict";function z(Z,A,S){return void 0===S&&(S=[0,0]),S[0]=Z[0]+2*A,S[1]=Z[1]+2*A,S}function F(Z){return Z[0]>0&&Z[1]>0}function k(Z,A,S){return void 0===S&&(S=[0,0]),S[0]=Z[0]*A+.5|0,S[1]=Z[1]*A+.5|0,S}function G(Z,A){return Array.isArray(Z)?Z:(void 0===A?A=[Z,Z]:(A[0]=Z,A[1]=Z),A)}a.d(ht,{Pq:()=>G,bA:()=>k,f3:()=>z,py:()=>F})},5240:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>f});var z=a(2431),F=a(6626),k=a(8382),G=a(5105),Z=a(1242),A=a(9219),S=a(1316),P=a(3089);const f=class v extends G.Z{constructor(c){super({attributions:c.attributions,wrapX:c.wrapX}),this.resolution=void 0,this.distance=void 0!==c.distance?c.distance:20,this.minDistance=c.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=c.geometryFunction||function(r){const d=r.getGeometry();return(0,A.h)(!d||"Point"===d.getType(),10),d},this.createCustomCluster_=c.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(c.source||null)}clear(c){this.features.length=0,super.clear(c)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(c,r,d){this.source.loadFeatures(c,r,d),r!==this.resolution&&(this.resolution=r,this.refresh())}setDistance(c){this.updateDistance(c,this.minDistance)}setMinDistance(c){this.updateDistance(this.distance,c)}getMinDistance(){return this.minDistance}setSource(c){this.source&&this.source.removeEventListener(z.Z.CHANGE,this.boundRefresh_),this.source=c,c&&c.addEventListener(z.Z.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(c,r){const d=0===c?0:Math.min(r,c)/c,e=c!==this.distance||this.interpolationRatio!==d;this.distance=c,this.minDistance=r,this.interpolationRatio=d,e&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return;const c=(0,S.lJ)(),r=this.distance*this.resolution,d=this.source.getFeatures(),e={};for(let l=0,m=d.length;l<m;l++){const s=d[l];if(!((0,P.sq)(s)in e)){const g=this.geometryFunction(s);if(g){const _=g.getCoordinates();(0,S.HK)(_,c),(0,S.f3)(c,r,c);const y=this.source.getFeaturesInExtent(c).filter(function(I){const O=(0,P.sq)(I);return!(O in e)&&(e[O]=!0,!0)});this.features.push(this.createCluster(y,c))}}}}createCluster(c,r){const d=[0,0];for(let s=c.length-1;s>=0;--s){const g=this.geometryFunction(c[s]);g?(0,Z.IH)(d,g.getCoordinates()):c.splice(s,1)}(0,Z.bA)(d,1/c.length);const e=(0,S.qg)(r),l=this.interpolationRatio,m=new k.Z([d[0]*(1-l)+e[0]*l,d[1]*(1-l)+e[1]*l]);return this.createCustomCluster_?this.createCustomCluster_(m,c):new F.Z({geometry:m,features:c})}}},7273:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>_,r6:()=>g});var z=a(8802),F=a(4847),k=a(6149),G=a(2431),Z=a(6908),A=a(1909),S=a(6230),P=a(1316),v=a(7847);const u=class f extends Z.Z{constructor(I,O,E,R,N,K,rt){let b=I.getExtent();b&&I.canWrapX()&&(b=b.slice(),b[0]=-1/0,b[2]=1/0);let L=O.getExtent();L&&O.canWrapX()&&(L=L.slice(),L[0]=-1/0,L[2]=1/0);const w=L?(0,P.Ed)(E,L):E,M=(0,P.qg)(w),C=(0,S.aA)(I,O,M,R),Y=new A.Z(I,O,w,b,C*k.m,R),st=Y.calculateSourceExtent(),V=(0,P.xb)(st)?null:K(st,C,N),at=V?F.Z.IDLE:F.Z.EMPTY,ut=V?V.getPixelRatio():1;super(E,R,ut,at),this.targetProj_=O,this.maxSourceExtent_=b,this.triangulation_=Y,this.targetResolution_=R,this.targetExtent_=E,this.sourceImage_=V,this.sourcePixelRatio_=ut,this.interpolate_=rt,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==F.Z.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const I=this.sourceImage_.getState();if(I==F.Z.LOADED){const O=(0,P.dz)(this.targetExtent_)/this.targetResolution_,E=(0,P.Cr)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,S.sY)(O,E,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=I,this.changed()}load(){if(this.state==F.Z.IDLE){this.state=F.Z.LOADING,this.changed();const I=this.sourceImage_.getState();I==F.Z.LOADED||I==F.Z.ERROR?this.reproject_():(this.sourceListenerKey_=(0,v.oL)(this.sourceImage_,G.Z.CHANGE,function(O){const E=this.sourceImage_.getState();(E==F.Z.LOADED||E==F.Z.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){(0,v.bN)(this.sourceListenerKey_),this.sourceListenerKey_=null}};var c=a(4074),r=a(3089),d=a(7021),e=a(9363);class m extends z.ZP{constructor(I,O){super(I),this.image=O}}function g(y,I){y.getImage().src=I}const _=class s extends c.Z{constructor(I){super({attributions:I.attributions,projection:I.projection,state:I.state,interpolate:void 0===I.interpolate||I.interpolate}),this.resolutions_=void 0!==I.resolutions?I.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(I){this.resolutions_=I}findNearestResolution(I){const O=this.getResolutions();return O&&(I=O[(0,e.h7)(O,I,0)]),I}getImage(I,O,E,R){const N=this.getProjection();if(!N||!R||(0,d.OP)(N,R))return N&&(R=N),this.getImageInternal(I,O,E,R);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,d.OP)(this.reprojectedImage_.getProjection(),R)&&this.reprojectedImage_.getResolution()==O&&(0,P.fS)(this.reprojectedImage_.getExtent(),I))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new u(N,R,I,O,E,(K,rt,b)=>this.getImageInternal(K,rt,b,N),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(I,O,E,R){return(0,r.O3)()}handleImageChange(I){const O=I.target;let E;switch(O.getState()){case F.Z.LOADING:this.loading=!0,E="imageloadstart";break;case F.Z.LOADED:this.loading=!1,E="imageloadend";break;case F.Z.ERROR:this.loading=!1,E="imageloaderror";break;default:return}this.hasListener(E)&&this.dispatchEvent(new m(E,O))}}},3298:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>l});var z=a(2431),F=a(7273),k=a(4499),G=a(3271),Z=a(8625),A=a(9219),S=a(6230),P=a(3026),v=a(9258),f=a(1316),u=a(4211),c=a(7021);const d=[101,101],l=class e extends F.ZP{constructor(s){super({attributions:(s=s||{}).attributions,interpolate:s.interpolate,projection:s.projection,resolutions:s.resolutions}),this.context_=(0,u.E4)(1,1),this.crossOrigin_=void 0!==s.crossOrigin?s.crossOrigin:null,this.url_=s.url,this.imageLoadFunction_=void 0!==s.imageLoadFunction?s.imageLoadFunction:F.r6,this.params_=Object.assign({},s.params),this.v13_=!0,this.updateV13_(),this.serverType_=s.serverType,this.hidpi_=void 0===s.hidpi||s.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==s.ratio?s.ratio:1.5}getFeatureInfoUrl(s,g,_,y){if(void 0===this.url_)return;const I=(0,c.U2)(_),O=this.getProjection();O&&O!==I&&(g=(0,S.aA)(O,I,s,g),s=(0,c.vs)(s,I,O));const E=(0,f.p8)(s,g,0,d),R={SERVICE:"WMS",VERSION:G.e,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(R,this.params_,y);const N=(0,P.GW)((s[0]-E[0])/g,4),K=(0,P.GW)((E[3]-s[1])/g,4);return R[this.v13_?"I":"X"]=N,R[this.v13_?"J":"Y"]=K,this.getRequestUrl_(E,d,1,O||I,R)}getLegendUrl(s,g){if(void 0===this.url_)return;const _={SERVICE:"WMS",VERSION:G.e,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===g||void 0===g.LAYER){const y=this.params_.LAYERS;if(Array.isArray(y)&&1!==y.length)return;_.LAYER=y}if(void 0!==s){const y=this.getProjection()?this.getProjection().getMetersPerUnit():1;_.SCALE=s*y/28e-5}return Object.assign(_,g),(0,Z.B)(this.url_,_)}getParams(){return this.params_}getImageInternal(s,g,_,y){if(void 0===this.url_)return null;g=this.findNearestResolution(g),1!=_&&(!this.hidpi_||void 0===this.serverType_)&&(_=1);const I=g/_,O=(0,f.qg)(s),E=(0,P.mD)((0,f.dz)(s)/I,4),R=(0,P.mD)((0,f.Cr)(s)/I,4),N=(0,f.p8)(O,I,0,[E,R]),rt=E+2*(0,P.mD)((this.ratio_-1)*E/2,4),b=(0,P.mD)((this.ratio_-1)*R/2,4),w=(0,f.p8)(O,I,0,[rt,R+2*b]),M=this.image_;if(M&&this.renderedRevision_==this.getRevision()&&M.getResolution()==g&&M.getPixelRatio()==_&&(0,f.r4)(M.getExtent(),N))return M;const C={SERVICE:"WMS",VERSION:G.e,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(C,this.params_),this.imageSize_[0]=(0,P.NM)((0,f.dz)(w)/I,4),this.imageSize_[1]=(0,P.NM)((0,f.Cr)(w)/I,4);const D=this.getRequestUrl_(w,this.imageSize_,_,y,C);return this.image_=new k.Z(w,g,_,D,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(z.Z.CHANGE,this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(s,g,_,y,I){if((0,A.h)(void 0!==this.url_,9),I[this.v13_?"CRS":"SRS"]=y.getCode(),"STYLES"in this.params_||(I.STYLES=""),1!=_)switch(this.serverType_){case"geoserver":const R=90*_+.5|0;"FORMAT_OPTIONS"in I?I.FORMAT_OPTIONS+=";dpi:"+R:I.FORMAT_OPTIONS="dpi:"+R;break;case"mapserver":I.MAP_RESOLUTION=90*_;break;case"carmentaserver":case"qgis":I.DPI=90*_;break;default:(0,A.h)(!1,8)}I.WIDTH=g[0],I.HEIGHT=g[1];const O=y.getAxisOrientation();let E;return E=this.v13_&&"ne"==O.substr(0,2)?[s[1],s[0],s[3],s[2]]:s,I.BBOX=E.join(","),(0,Z.B)(this.url_,I)}getUrl(){return this.url_}setImageLoadFunction(s){this.image_=null,this.imageLoadFunction_=s,this.changed()}setUrl(s){s!=this.url_&&(this.url_=s,this.image_=null,this.changed())}updateParams(s){Object.assign(this.params_,s),this.updateV13_(),this.image_=null,this.changed()}updateV13_(){this.v13_=(0,v.n)(this.params_.VERSION||G.e,"1.3")>=0}}},1978:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var z=a(3640);const G=class k extends z.Z{constructor(A){let S;S=void 0!==(A=A||{}).attributions?A.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:S,attributionsCollapsible:!1,cacheSize:A.cacheSize,crossOrigin:void 0!==A.crossOrigin?A.crossOrigin:"anonymous",interpolate:A.interpolate,maxZoom:void 0!==A.maxZoom?A.maxZoom:19,opaque:void 0===A.opaque||A.opaque,reprojectionErrorThreshold:A.reprojectionErrorThreshold,tileLoadFunction:A.tileLoadFunction,transition:A.transition,url:void 0!==A.url?A.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:A.wrapX,zDirection:A.zDirection})}}},8099:(jt,ht,a)=>{"use strict";a.d(ht,{ZP:()=>L});var z=a(5337),F=a(8802),k=a(2431),G=a(6696),Z=a(450),A=a(7273),S=a(4074),P=a(7729),v=a(857),f=a(6902),u=a(4211),c=a(6412),r=a(1316),d=a(3089);let l,e=!0;try{new ImageData(10,10)}catch{e=!1}function s(w){let M=!0;try{new ImageData(10,10)}catch{M=!1}function C(D,Y,st){return M?new ImageData(D,Y,st):{data:D,width:Y,height:st}}return function(D){const Y=D.buffers,st=D.meta,at=D.width,ut=D.height,Pt=Y.length,vt=Y[0].byteLength;if(D.imageOps){const zt=new Array(Pt);for(let Xt=0;Xt<Pt;++Xt)zt[Xt]=C(new Uint8ClampedArray(Y[Xt]),at,ut);return w(zt,st).data.buffer}const Ot=new Uint8ClampedArray(vt),At=new Array(Pt),Gt=new Array(Pt);for(let zt=0;zt<Pt;++zt)At[zt]=new Uint8ClampedArray(Y[zt]),Gt[zt]=[0,0,0,0];for(let zt=0;zt<vt;zt+=4){for(let Xt=0;Xt<Pt;++Xt){const fe=At[Xt];Gt[Xt][0]=fe[zt],Gt[Xt][1]=fe[zt+1],Gt[Xt][2]=fe[zt+2],Gt[Xt][3]=fe[zt+3]}const qt=w(Gt,st);Ot[zt]=qt[0],Ot[zt+1]=qt[1],Ot[zt+2]=qt[2],Ot[zt+3]=qt[3]}return Ot.buffer}}function g(w,M){const D=Object.keys(w.lib||{}).map(function(st){return"const "+st+" = "+w.lib[st].toString()+";"}).concat(["const __minion__ = ("+s.toString()+")(",w.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),Y=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(D.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(D,{type:"text/javascript"})));return Y.addEventListener("message",M),Y}class y extends z.Z{constructor(M){let C;super(),this._imageOps=!!M.imageOps,C=0===M.threads?0:this._imageOps?1:M.threads||1;const D=new Array(C);if(C)for(let Y=0;Y<C;++Y)D[Y]=g(M,this._onWorkerMessage.bind(this,Y));else D[0]=function _(w,M){const C=s(w.operation);let D=!1;return{postMessage:function(Y){setTimeout(function(){D||M({data:{buffer:C(Y),meta:Y.meta}})},0)},terminate:function(){D=!0}}}(M,this._onWorkerMessage.bind(this,0));this._workers=D,this._queue=[],this._maxQueueLength=M.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(M,C,D){this._enqueue({inputs:M,meta:C,callback:D}),this._dispatch()}_enqueue(M){for(this._queue.push(M);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return;const M=this._queue.shift();this._job=M;const C=M.inputs[0].width,D=M.inputs[0].height,Y=M.inputs.map(function(ut){return ut.data.buffer}),st=this._workers.length;if(this._running=st,1===st)return void this._workers[0].postMessage({buffers:Y,meta:M.meta,imageOps:this._imageOps,width:C,height:D},Y);const at=4*Math.ceil(M.inputs[0].data.length/4/st);for(let ut=0;ut<st;++ut){const Pt=ut*at,vt=[];for(let Ot=0,At=Y.length;Ot<At;++Ot)vt.push(Y[Ot].slice(Pt,Pt+at));this._workers[ut].postMessage({buffers:vt,meta:M.meta,imageOps:this._imageOps,width:C,height:D},vt)}}_onWorkerMessage(M,C){this.disposed||(this._dataLookup[M]=C.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const M=this._job,C=this._workers.length;let D,Y;if(1===C)D=new Uint8ClampedArray(this._dataLookup[0].buffer),Y=this._dataLookup[0].meta;else{const st=M.inputs[0].data.length;D=new Uint8ClampedArray(st),Y=new Array(C);const V=4*Math.ceil(st/4/C);for(let at=0;at<C;++at){const Pt=at*V;D.set(new Uint8ClampedArray(this._dataLookup[at].buffer),Pt),Y[at]=this._dataLookup[at].meta}}this._job=null,this._dataLookup={},M.callback(null,function m(w,M,C){if(e)return new ImageData(w,M,C);l||(l=document.createElement("canvas").getContext("2d"));const D=l.createImageData(M,C);return D.data.set(w),D}(D,M.inputs[0].width,M.inputs[0].height),Y),this._dispatch()}disposeInternal(){for(let M=0;M<this._workers.length;++M)this._workers[M].terminate();this._workers.length=0}}class O extends F.ZP{constructor(M,C,D){super(M),this.extent=C.extent,this.resolution=C.viewState.resolution/C.pixelRatio,this.data=D}}let R=null;function N(w,M){const C=w.getRenderer();if(!C)throw new Error("Unsupported layer type: "+w);if(!C.prepareFrame(M))return null;const D=M.size[0],Y=M.size[1];if(0===D||0===Y)return null;const st=C.renderFrame(M,null);let V;if(st instanceof HTMLCanvasElement)V=st;else{if(st&&(V=st.firstElementChild),!(V instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+V);if(V.width===D&&V.height===Y)return V.getContext("2d").getImageData(0,0,D,Y)}if(R){const at=R.canvas;at.width!==D||at.height!==Y?R=(0,u.E4)(D,Y,void 0,{willReadFrequently:!0}):R.clearRect(0,0,D,Y)}else R=(0,u.E4)(D,Y,void 0,{willReadFrequently:!0});return R.drawImage(V,0,0,D,Y),R.getImageData(0,0,D,Y)}function b(w){let M;return w instanceof S.Z?w instanceof f.Z?M=new P.Z({source:w}):w instanceof A.ZP&&(M=new Z.Z({source:w})):M=w,M}const L=class E extends A.ZP{constructor(M){super({projection:null}),this.processor_=null,this.operationType_=void 0!==M.operationType?M.operationType:"pixel",this.threads_=void 0!==M.threads?M.threads:1,this.layers_=function rt(w){const M=w.length,C=new Array(M);for(let D=0;D<M;++D)C[D]=b(w[D]);return C}(M.sources);const C=this.changed.bind(this);for(let D=0,Y=this.layers_.length;D<Y;++D)this.layers_[D].addEventListener(k.Z.CHANGE,C);var w;this.useResolutions_=null!==M.resolutions,this.tileQueue_=new v.Z(function(){return 1},this.processSources_.bind(this)),this.renderedImageCanvas_=null,this.frameState_={animate:!1,coordinateToPixelTransform:(0,c.Ue)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(w=this.layers_,w.map(function(M){return M.getLayerState()})),pixelRatio:1,pixelToCoordinateTransform:(0,c.Ue)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,d.sq)(this),renderTargets:{}},this.setAttributions(function(D){const Y=[];for(let st=0,V=M.sources.length;st<V;++st){const at=M.sources[st],ut=at instanceof S.Z?at:at.getSource();if(!ut)continue;const Pt=ut.getAttributions();if("function"==typeof Pt){const vt=Pt(D);Y.push.apply(Y,vt)}}return 0!==Y.length?Y:null}),void 0!==M.operation&&this.setOperation(M.operation,M.lib)}setOperation(M,C){this.processor_&&this.processor_.dispose(),this.processor_=new y({operation:M,imageOps:"image"===this.operationType_,queue:1,lib:C,threads:this.threads_}),this.changed()}updateFrameState_(M,C,D){const Y=Object.assign({},this.frameState_);Y.viewState=Object.assign({},Y.viewState);const st=(0,r.qg)(M);Y.size[0]=Math.ceil((0,r.dz)(M)/C),Y.size[1]=Math.ceil((0,r.Cr)(M)/C),Y.extent=[st[0]-Y.size[0]*C/2,st[1]-Y.size[1]*C/2,st[0]+Y.size[0]*C/2,st[1]+Y.size[1]*C/2],Y.time=Date.now();const V=Y.viewState;return V.center=st,V.projection=D,V.resolution=C,Y}allSourcesReady_(){let C,M=!0;for(let D=0,Y=this.layers_.length;D<Y;++D)if(C=this.layers_[D].getSource(),!C||"ready"!==C.getState()){M=!1;break}return M}getImage(M,C,D,Y){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),C=this.findNearestResolution(C);const st=this.updateFrameState_(M,C,Y);if(this.requestedFrameState_=st,this.renderedImageCanvas_){const V=this.renderedImageCanvas_.getResolution(),at=this.renderedImageCanvas_.getExtent();(C!==V||!(0,r.fS)(st.extent,at))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),st.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const M=this.requestedFrameState_,C=this.layers_.length,D=new Array(C);for(let st=0;st<C;++st){M.layerIndex=st,M.renderTargets={};const V=N(this.layers_[st],M);if(!V)return;D[st]=V}const Y={};this.dispatchEvent(new O("beforeoperations",M,Y)),this.processor_.process(D,Y,this.onWorkerComplete_.bind(this,M))}onWorkerComplete_(M,C,D,Y){if(C||!D)return;const st=M.extent,V=M.viewState.resolution;if(V!==this.requestedFrameState_.viewState.resolution||!(0,r.fS)(st,this.requestedFrameState_.extent))return;let at;if(this.renderedImageCanvas_)at=this.renderedImageCanvas_.getImage().getContext("2d");else{const ut=Math.round((0,r.dz)(st)/V),Pt=Math.round((0,r.Cr)(st)/V);at=(0,u.E4)(ut,Pt),this.renderedImageCanvas_=new G.Z(st,V,1,at.canvas)}at.putImageData(D,0,0),M.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new O("afteroperations",M,Y))}getResolutions(M){if(!this.useResolutions_)return null;let C=super.getResolutions();if(!C)for(let D=0,Y=this.layers_.length;D<Y&&(C=this.layers_[D].getSource().getResolutions(M),!C);++D);return C}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}},4074:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>Z});var z=a(7300),F=a(7021);function G(A){return A?Array.isArray(A)?function(S){return A}:"function"==typeof A?A:function(S){return[A]}:null}const Z=class k extends z.Z{constructor(S){super(),this.projection=(0,F.U2)(S.projection),this.attributions_=G(S.attributions),this.attributionsCollapsible_=void 0===S.attributionsCollapsible||S.attributionsCollapsible,this.loading=!1,this.state_=void 0!==S.state?S.state:"ready",this.wrapX_=void 0!==S.wrapX&&S.wrapX,this.interpolate_=!!S.interpolate,this.viewResolver=null,this.viewRejector=null;const P=this;this.viewPromise_=new Promise(function(v,f){P.viewResolver=v,P.viewRejector=f})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(S){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(S){this.attributions_=G(S),this.changed()}setState(S){this.state_=S,this.changed()}}},6902:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r,s:()=>c});var z=a(8802),F=a(4074),k=a(8525),G=a(5399),Z=a(3089),A=a(9219),S=a(7021),P=a(3936),v=a(1180),f=a(7298);class c extends z.ZP{constructor(e,l){super(e),this.tile=l}}const r=class u extends F.Z{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileGrid&&(0,f.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new k.Z(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,l){const m=this.getTileCacheForProjection(e);m&&m.expireCache(l)}forEachLoadedTile(e,l,m,s){const g=this.getTileCacheForProjection(e);if(!g)return!1;let y,I,O,_=!0;for(let E=m.minX;E<=m.maxX;++E)for(let R=m.minY;R<=m.maxY;++R)I=(0,P.lg)(l,E,R),O=!1,g.containsKey(I)&&(y=g.get(I),O=y.getState()===G.Z.LOADED,O&&(O=!1!==s(y))),O||(_=!1);return _}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const l=e?this.getTileGridForProjection(e):this.tileGrid;return l?l.getResolutions():null}getTile(e,l,m,s,g){return(0,Z.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:(0,v.X$)(e)}getTileCacheForProjection(e){const l=this.getProjection();return(0,A.h)(null===l||(0,S.OP)(l,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,l,m){const s=this.getTileGridForProjection(m),g=this.getTilePixelRatio(l),_=(0,f.Pq)(s.getTileSize(e),this.tmpSize);return 1==g?_:(0,f.bA)(_,g,this.tmpSize)}getTileCoordForTileUrlFunction(e,l){l=void 0!==l?l:this.getProjection();const m=this.getTileGridForProjection(l);return this.getWrapX()&&l.isGlobal()&&(e=(0,v.Cf)(m,e,l)),(0,P.tE)(e,m)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,l){const m=this.getTileCacheForProjection(l);e>m.highWaterMark&&(m.highWaterMark=e)}useTile(e,l,m,s){}}},719:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r});var z=a(2431),F=a(3968),k=a(8857),G=a(8525),Z=a(5399),A=a(6946),S=a(7021),P=a(3936),v=a(1180),f=a(3089);function c(d,e){d.getImage().src=e}const r=class u extends A.Z{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:c,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:void 0===e.interpolate||e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:F.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,l){const m=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==m?l:{});for(const s in this.tileCacheForProjection){const g=this.tileCacheForProjection[s];g.expireCache(g==m?l:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!(0,S.OP)(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return!(this.getProjection()&&e&&!(0,S.OP)(this.getProjection(),e))&&super.getOpaque(e)}getTileGridForProjection(e){const l=this.getProjection();if(this.tileGrid&&(!l||(0,S.OP)(l,e)))return this.tileGrid;const m=(0,f.sq)(e);return m in this.tileGridForProjection||(this.tileGridForProjection[m]=(0,v.X$)(e)),this.tileGridForProjection[m]}getTileCacheForProjection(e){const l=this.getProjection();if(!l||(0,S.OP)(l,e))return this.tileCache;const m=(0,f.sq)(e);return m in this.tileCacheForProjection||(this.tileCacheForProjection[m]=new G.Z(this.tileCache.highWaterMark)),this.tileCacheForProjection[m]}createTile_(e,l,m,s,g,_){const y=[e,l,m],I=this.getTileCoordForTileUrlFunction(y,g),O=I?this.tileUrlFunction(I,s,g):void 0,E=new this.tileClass(y,void 0!==O?Z.Z.IDLE:Z.Z.EMPTY,void 0!==O?O:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return E.key=_,E.addEventListener(z.Z.CHANGE,this.handleTileChange.bind(this)),E}getTile(e,l,m,s,g){const _=this.getProjection();if(!_||!g||(0,S.OP)(_,g))return this.getTileInternal(e,l,m,s,_||g);const y=this.getTileCacheForProjection(g),I=[e,l,m];let O;const E=(0,P.km)(I);y.containsKey(E)&&(O=y.get(E));const R=this.getKey();if(O&&O.key==R)return O;const N=this.getTileGridForProjection(_),K=this.getTileGridForProjection(g),rt=this.getTileCoordForTileUrlFunction(I,g),b=new k.Z(_,N,g,K,I,rt,this.getTilePixelRatio(s),this.getGutter(),(L,w,M,C)=>this.getTileInternal(L,w,M,C,_),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return b.key=R,O?(b.interimTile=O,b.refreshInterimChain(),y.replace(E,b)):y.set(E,b),b}getTileInternal(e,l,m,s,g){let _=null;const y=(0,P.lg)(e,l,m),I=this.getKey();if(this.tileCache.containsKey(y)){if(_=this.tileCache.get(y),_.key!=I){const O=_;_=this.createTile_(e,l,m,s,g,I),_.interimTile=O.getState()==Z.Z.IDLE?O.interimTile:O,_.refreshInterimChain(),this.tileCache.replace(y,_)}}else _=this.createTile_(e,l,m,s,g,I),this.tileCache.set(y,_);return _}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const l in this.tileCacheForProjection)this.tileCacheForProjection[l].clear();this.changed()}}setTileGridForProjection(e,l){const m=(0,S.U2)(e);if(m){const s=(0,f.sq)(m);s in this.tileGridForProjection||(this.tileGridForProjection[s]=l)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}},8311:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r});var z=a(719),F=a(3271),k=a(8625),G=a(9219),Z=a(1316),A=a(7298),S=a(6230),P=a(9258),v=a(7021),f=a(3026),u=a(3936);const r=class c extends z.Z{constructor(e){e=e||{};const l=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!(!("TRANSPARENT"in l)||l.TRANSPARENT),projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.gutter_=void 0!==e.gutter?e.gutter:0,this.params_=l,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.tmpExtent_=(0,Z.lJ)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,l,m,s){const g=(0,v.U2)(m),_=this.getProjection();let y=this.getTileGrid();y||(y=this.getTileGridForProjection(g));const I=y.getZForResolution(l,this.zDirection),O=y.getTileCoordForCoordAndZ(e,I);if(y.getResolutions().length<=O[0])return;let E=y.getResolution(O[0]),R=y.getTileCoordExtent(O,this.tmpExtent_),N=(0,A.Pq)(y.getTileSize(O[0]),this.tmpSize);const K=this.gutter_;0!==K&&(N=(0,A.f3)(N,K,this.tmpSize),R=(0,Z.f3)(R,E*K,R)),_&&_!==g&&(E=(0,S.aA)(_,g,e,E),R=(0,v.$A)(R,g,_),e=(0,v.vs)(e,g,_));const rt={SERVICE:"WMS",VERSION:F.e,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(rt,this.params_,s);const b=Math.floor((e[0]-R[0])/E),L=Math.floor((R[3]-e[1])/E);return rt[this.v13_?"I":"X"]=b,rt[this.v13_?"J":"Y"]=L,this.getRequestUrl_(O,N,R,1,_||g,rt)}getLegendUrl(e,l){if(void 0===this.urls[0])return;const m={SERVICE:"WMS",VERSION:F.e,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===l||void 0===l.LAYER){const s=this.params_.LAYERS;if(Array.isArray(s)&&1!==s.length)return;m.LAYER=s}if(void 0!==e){const s=this.getProjection()?this.getProjection().getMetersPerUnit():1;m.SCALE=e*s/28e-5}return Object.assign(m,l),(0,k.B)(this.urls[0],m)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,l,m,s,g,_){const y=this.urls;if(!y)return;if(_.WIDTH=l[0],_.HEIGHT=l[1],_[this.v13_?"CRS":"SRS"]=g.getCode(),"STYLES"in this.params_||(_.STYLES=""),1!=s)switch(this.serverType_){case"geoserver":const R=90*s+.5|0;"FORMAT_OPTIONS"in _?_.FORMAT_OPTIONS+=";dpi:"+R:_.FORMAT_OPTIONS="dpi:"+R;break;case"mapserver":_.MAP_RESOLUTION=90*s;break;case"carmentaserver":case"qgis":_.DPI=90*s;break;default:(0,G.h)(!1,52)}const I=g.getAxisOrientation(),O=m;if(this.v13_&&"ne"==I.substr(0,2)){let R;R=m[0],O[0]=m[1],O[1]=R,R=m[2],O[2]=m[3],O[3]=R}let E;return _.BBOX=O.join(","),E=1==y.length?y[0]:y[(0,f.$W)((0,u.vp)(e),y.length)],(0,k.B)(E,_)}getTilePixelRatio(e){return this.hidpi_&&void 0!==this.serverType_?e:1}getKeyForParams_(){let e=0;const l=[];for(const m in this.params_)l[e++]=m+"-"+this.params_[m];return l.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){this.v13_=(0,P.n)(this.params_.VERSION||F.e,"1.3")>=0}tileUrlFunction(e,l,m){let s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(m)),s.getResolutions().length<=e[0])return;1!=l&&(!this.hidpi_||void 0===this.serverType_)&&(l=1);const g=s.getResolution(e[0]);let _=s.getTileCoordExtent(e,this.tmpExtent_),y=(0,A.Pq)(s.getTileSize(e[0]),this.tmpSize);const I=this.gutter_;0!==I&&(y=(0,A.f3)(y,I,this.tmpSize),_=(0,Z.f3)(_,g*I,_)),1!=l&&(y=(0,A.bA)(y,l,this.tmpSize));const O={SERVICE:"WMS",VERSION:F.e,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(O,this.params_),this.getRequestUrl_(e,y,_,l,m,O)}}},6946:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>P});var F=a(6902),k=a(5399),G=a(7835),Z=a(3936),A=a(3089);class S extends F.Z{constructor(f){super({attributions:f.attributions,cacheSize:f.cacheSize,opaque:f.opaque,projection:f.projection,state:f.state,tileGrid:f.tileGrid,tilePixelRatio:f.tilePixelRatio,wrapX:f.wrapX,transition:f.transition,interpolate:f.interpolate,key:f.key,attributionsCollapsible:f.attributionsCollapsible,zDirection:f.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===S.prototype.tileUrlFunction,this.tileLoadFunction=f.tileLoadFunction,f.tileUrlFunction&&(this.tileUrlFunction=f.tileUrlFunction),this.urls=null,f.urls?this.setUrls(f.urls):f.url&&this.setUrl(f.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(f){const u=f.target,c=(0,A.sq)(u),r=u.getState();let d;r==k.Z.LOADING?(this.tileLoadingKeys_[c]=!0,d="tileloadstart"):c in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[c],d=r==k.Z.ERROR?"tileloaderror":r==k.Z.LOADED?"tileloadend":void 0),null!=d&&this.dispatchEvent(new F.s(d,u))}setTileLoadFunction(f){this.tileCache.clear(),this.tileLoadFunction=f,this.changed()}setTileUrlFunction(f,u){this.tileUrlFunction=f,this.tileCache.pruneExceptNewestZ(),typeof u<"u"?this.setKey(u):this.changed()}setUrl(f){const u=(0,G.Gk)(f);this.urls=u,this.setUrls(u)}setUrls(f){this.urls=f;const u=f.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,G.uR)(f,this.tileGrid),u):this.setKey(u)}tileUrlFunction(f,u,c){}useTile(f,u,c){const r=(0,Z.lg)(f,u,c);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const P=S},5105:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>I});var z=a(6108),F=a(1892),k=a(8802),G=a(2431),Z=a(1858),A=a(5604),S=a(1316),P=a(3089),v=a(5526);const u=class f{constructor(E){this.rbush_=new A(E),this.items_={}}insert(E,R){const N={minX:E[0],minY:E[1],maxX:E[2],maxY:E[3],value:R};this.rbush_.insert(N),this.items_[(0,P.sq)(R)]=N}load(E,R){const N=new Array(R.length);for(let K=0,rt=R.length;K<rt;K++){const b=E[K],L=R[K],w={minX:b[0],minY:b[1],maxX:b[2],maxY:b[3],value:L};N[K]=w,this.items_[(0,P.sq)(L)]=w}this.rbush_.load(N)}remove(E){const R=(0,P.sq)(E),N=this.items_[R];return delete this.items_[R],null!==this.rbush_.remove(N)}update(E,R){const N=this.items_[(0,P.sq)(R)];(0,S.fS)([N.minX,N.minY,N.maxX,N.maxY],E)||(this.remove(R),this.insert(E,R))}getAll(){return this.rbush_.all().map(function(R){return R.value})}getInExtent(E){return this.rbush_.search({minX:E[0],minY:E[1],maxX:E[2],maxY:E[3]}).map(function(K){return K.value})}forEach(E){return this.forEach_(this.getAll(),E)}forEachInExtent(E,R){return this.forEach_(this.getInExtent(E),R)}forEach_(E,R){let N;for(let K=0,rt=E.length;K<rt;K++)if(N=R(E[K]),N)return N;return N}isEmpty(){return(0,v.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(E){const R=this.rbush_.toJSON();return(0,S.T9)(R.minX,R.minY,R.maxX,R.maxY,E)}concat(E){this.rbush_.load(E.rbush_.all());for(const R in E.items_)this.items_[R]=E.items_[R]}};var c=a(4074),r=a(7698),d=a(6077),e=a(1318),l=a(9219),m=a(9363),s=a(7847),g=a(6634);class _ extends k.ZP{constructor(E,R,N){super(E),this.feature=R,this.features=N}}const I=class y extends c.Z{constructor(E){super({attributions:(E=E||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===E.wrapX||E.wrapX}),this.loader_=d.Zn,this.format_=E.format,this.overlaps_=void 0===E.overlaps||E.overlaps,this.url_=E.url,void 0!==E.loader?this.loader_=E.loader:void 0!==this.url_&&((0,l.h)(this.format_,7),this.loader_=(0,g.Be)(this.url_,this.format_)),this.strategy_=void 0!==E.strategy?E.strategy:e.$6;const R=void 0===E.useSpatialIndex||E.useSpatialIndex;let N,K;this.featuresRtree_=R?new u:null,this.loadedExtentsRtree_=new u,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(E.features)?K=E.features:E.features&&(N=E.features,K=N.getArray()),!R&&void 0===N&&(N=new z.Z(K)),void 0!==K&&this.addFeaturesInternal(K),void 0!==N&&this.bindFeaturesCollection_(N)}addFeature(E){this.addFeatureInternal(E),this.changed()}addFeatureInternal(E){const R=(0,P.sq)(E);if(!this.addToIndex_(R,E))return void(this.featuresCollection_&&this.featuresCollection_.remove(E));this.setupChangeEvents_(R,E);const N=E.getGeometry();if(N){const K=N.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(K,E)}else this.nullGeometryFeatures_[R]=E;this.dispatchEvent(new _(r.Z.ADDFEATURE,E))}setupChangeEvents_(E,R){this.featureChangeKeys_[E]=[(0,s.oL)(R,G.Z.CHANGE,this.handleFeatureChange_,this),(0,s.oL)(R,Z.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(E,R){let N=!0;const K=R.getId();return void 0!==K&&(K.toString()in this.idIndex_?N=!1:this.idIndex_[K.toString()]=R),N&&((0,l.h)(!(E in this.uidIndex_),30),this.uidIndex_[E]=R),N}addFeatures(E){this.addFeaturesInternal(E),this.changed()}addFeaturesInternal(E){const R=[],N=[],K=[];for(let rt=0,b=E.length;rt<b;rt++){const L=E[rt],w=(0,P.sq)(L);this.addToIndex_(w,L)&&N.push(L)}for(let rt=0,b=N.length;rt<b;rt++){const L=N[rt],w=(0,P.sq)(L);this.setupChangeEvents_(w,L);const M=L.getGeometry();if(M){const C=M.getExtent();R.push(C),K.push(L)}else this.nullGeometryFeatures_[w]=L}if(this.featuresRtree_&&this.featuresRtree_.load(R,K),this.hasListener(r.Z.ADDFEATURE))for(let rt=0,b=N.length;rt<b;rt++)this.dispatchEvent(new _(r.Z.ADDFEATURE,N[rt]))}bindFeaturesCollection_(E){let R=!1;this.addEventListener(r.Z.ADDFEATURE,function(N){R||(R=!0,E.push(N.feature),R=!1)}),this.addEventListener(r.Z.REMOVEFEATURE,function(N){R||(R=!0,E.remove(N.feature),R=!1)}),E.addEventListener(F.Z.ADD,N=>{R||(R=!0,this.addFeature(N.element),R=!1)}),E.addEventListener(F.Z.REMOVE,N=>{R||(R=!0,this.removeFeature(N.element),R=!1)}),this.featuresCollection_=E}clear(E){if(E){for(const N in this.featureChangeKeys_)this.featureChangeKeys_[N].forEach(s.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(K=>{this.removeFeatureInternal(K)});for(const K in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[K])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const R=new _(r.Z.CLEAR);this.dispatchEvent(R),this.changed()}forEachFeature(E){if(this.featuresRtree_)return this.featuresRtree_.forEach(E);this.featuresCollection_&&this.featuresCollection_.forEach(E)}forEachFeatureAtCoordinateDirect(E,R){return this.forEachFeatureInExtent([E[0],E[1],E[0],E[1]],function(K){if(K.getGeometry().intersectsCoordinate(E))return R(K)})}forEachFeatureInExtent(E,R){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(E,R);this.featuresCollection_&&this.featuresCollection_.forEach(R)}forEachFeatureIntersectingExtent(E,R){return this.forEachFeatureInExtent(E,function(N){if(N.getGeometry().intersectsExtent(E)){const rt=R(N);if(rt)return rt}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let E;return this.featuresCollection_?E=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(E=this.featuresRtree_.getAll(),(0,v.x)(this.nullGeometryFeatures_)||(0,m.l7)(E,Object.values(this.nullGeometryFeatures_))),E}getFeaturesAtCoordinate(E){const R=[];return this.forEachFeatureAtCoordinateDirect(E,function(N){R.push(N)}),R}getFeaturesInExtent(E,R){if(this.featuresRtree_){if(!(R&&R.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(E);const K=(0,S.MV)(E,R);return[].concat(...K.map(rt=>this.featuresRtree_.getInExtent(rt)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(E,R){const N=E[0],K=E[1];let rt=null;const b=[NaN,NaN];let L=1/0;const w=[-1/0,-1/0,1/0,1/0];return R=R||d.uX,this.featuresRtree_.forEachInExtent(w,function(M){if(R(M)){const C=M.getGeometry(),D=L;if(L=C.closestPointXY(N,K,b,L),L<D){rt=M;const Y=Math.sqrt(L);w[0]=N-Y,w[1]=K-Y,w[2]=N+Y,w[3]=K+Y}}}),rt}getExtent(E){return this.featuresRtree_.getExtent(E)}getFeatureById(E){const R=this.idIndex_[E.toString()];return void 0!==R?R:null}getFeatureByUid(E){const R=this.uidIndex_[E];return void 0!==R?R:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(E){const R=E.target,N=(0,P.sq)(R),K=R.getGeometry();if(K){const b=K.getExtent();N in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[N],this.featuresRtree_&&this.featuresRtree_.insert(b,R)):this.featuresRtree_&&this.featuresRtree_.update(b,R)}else N in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(R),this.nullGeometryFeatures_[N]=R);const rt=R.getId();if(void 0!==rt){const b=rt.toString();this.idIndex_[b]!==R&&(this.removeFromIdIndex_(R),this.idIndex_[b]=R)}else this.removeFromIdIndex_(R),this.uidIndex_[N]=R;this.changed(),this.dispatchEvent(new _(r.Z.CHANGEFEATURE,R))}hasFeature(E){const R=E.getId();return void 0!==R?R in this.idIndex_:(0,P.sq)(E)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,v.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(E,R,N){const K=this.loadedExtentsRtree_,rt=this.strategy_(E,R,N);for(let b=0,L=rt.length;b<L;++b){const w=rt[b];K.forEachInExtent(w,function(C){return(0,S.r4)(C.extent,w)})||(++this.loadingExtentsCount_,this.dispatchEvent(new _(r.Z.FEATURESLOADSTART)),this.loader_.call(this,w,R,N,C=>{--this.loadingExtentsCount_,this.dispatchEvent(new _(r.Z.FEATURESLOADEND,void 0,C))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new _(r.Z.FEATURESLOADERROR))}),K.insert(w,{extent:w.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(E){const R=this.loadedExtentsRtree_;let N;R.forEachInExtent(E,function(K){if((0,S.fS)(K.extent,E))return N=K,!0}),N&&R.remove(N)}removeFeature(E){if(!E)return;const R=(0,P.sq)(E);R in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[R]:this.featuresRtree_&&this.featuresRtree_.remove(E),this.removeFeatureInternal(E)&&this.changed()}removeFeatureInternal(E){const R=(0,P.sq)(E),N=this.featureChangeKeys_[R];if(!N)return;N.forEach(s.bN),delete this.featureChangeKeys_[R];const K=E.getId();return void 0!==K&&delete this.idIndex_[K.toString()],delete this.uidIndex_[R],this.dispatchEvent(new _(r.Z.REMOVEFEATURE,E)),E}removeFromIdIndex_(E){let R=!1;for(const N in this.idIndex_)if(this.idIndex_[N]===E){delete this.idIndex_[N],R=!0;break}return R}setLoader(E){this.loader_=E}setUrl(E){(0,l.h)(this.format_,7),this.url_=E,this.setLoader((0,g.Be)(E,this.format_))}}},7698:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>z});const z={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},2889:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>I,I:()=>O});var z=a(2431),F=a(6381),k=a(5399);const Z=class G extends F.Z{constructor(R,N,K,rt,b,L){super(R,N,L),this.extent=null,this.format_=rt,this.features_=null,this.projection=null,this.tileLoadFunction_=b,this.url_=K,this.key=K}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==k.Z.IDLE&&(this.setState(k.Z.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(R,N){this.setFeatures(R)}onError(){this.setState(k.Z.ERROR)}setFeatures(R){this.features_=R,this.setState(k.Z.LOADED)}setLoader(R){this.loader_=R}};var A=a(8525),S=a(8398),P=a(6946),v=a(4211),f=a(3089);const u=[],r=class c extends F.Z{constructor(R,N,K,rt){super(R,N,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.getSourceTiles=rt.bind(void 0,this),this.wrappedTileCoord=K}getContext(R){const N=(0,f.sq)(R);return N in this.context_||(this.context_[N]=(0,v.E4)(1,1,u)),this.context_[N]}hasContext(R){return(0,f.sq)(R)in this.context_}getImage(R){return this.hasContext(R)?this.getContext(R).canvas:null}getReplayState(R){const N=(0,f.sq)(R);return N in this.replayState_||(this.replayState_[N]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[N]}load(){this.getSourceTiles()}release(){for(const R in this.context_){const N=this.context_[R];(0,v.jy)(N),u.push(N.canvas),delete this.context_[R]}super.release()}};var d=a(8220),e=a(1316),l=a(1180),m=a(3936),s=a(5526),g=a(6634),_=a(7298);const I=class y extends P.Z{constructor(R){const N=R.projection||"EPSG:3857",K=R.extent||(0,l.Tl)(N),rt=R.tileGrid||(0,l.dl)({extent:K,maxResolution:R.maxResolution,maxZoom:void 0!==R.maxZoom?R.maxZoom:22,minZoom:R.minZoom,tileSize:R.tileSize||512});super({attributions:R.attributions,attributionsCollapsible:R.attributionsCollapsible,cacheSize:R.cacheSize,interpolate:!0,opaque:!1,projection:N,state:R.state,tileGrid:rt,tileLoadFunction:R.tileLoadFunction?R.tileLoadFunction:O,tileUrlFunction:R.tileUrlFunction,url:R.url,urls:R.urls,wrapX:void 0===R.wrapX||R.wrapX,transition:R.transition,zDirection:void 0===R.zDirection?1:R.zDirection}),this.format_=R.format?R.format:null,this.sourceTileCache=new A.Z(this.tileCache.highWaterMark),this.overlaps_=null==R.overlaps||R.overlaps,this.tileClass=R.tileClass?R.tileClass:Z,this.tileGrids_={}}getFeaturesInExtent(R){const N=[],K=this.tileCache;if(0===K.getCount())return N;const rt=(0,m.Ul)(K.peekFirstKey())[0],b=this.tileGrid;return K.forEach(function(L){if(L.tileCoord[0]!==rt||L.getState()!==k.Z.LOADED)return;const w=L.getSourceTiles();for(let M=0,C=w.length;M<C;++M){const D=w[M];if((0,e.kK)(R,b.getTileCoordExtent(D.tileCoord))){const st=D.getFeatures();if(st)for(let V=0,at=st.length;V<at;++V){const ut=st[V],Pt=ut.getGeometry();(0,e.kK)(R,Pt.getExtent())&&N.push(ut)}}}}),N}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(R,N){const K=this.getTileCacheForProjection(R),rt=Object.keys(N).reduce((b,L)=>{const w=(0,m.MY)(L),M=K.peek(w);if(M){const C=M.sourceTiles;for(let D=0,Y=C.length;D<Y;++D)b[C[D].getKey()]=!0}return b},{});super.expireCache(R,N),this.sourceTileCache.expireCache(rt)}getSourceTiles(R,N,K){if(K.getState()===k.Z.IDLE){K.setState(k.Z.LOADING);const rt=K.wrappedTileCoord,b=this.getTileGridForProjection(N),L=b.getTileCoordExtent(rt),M=b.getResolution(rt[0]);(0,e.f3)(L,-M,L);const C=this.tileGrid,D=C.getExtent();D&&(0,e.Ed)(L,D,L);const Y=C.getZForResolution(M,this.zDirection);C.forEachTileCoord(L,Y,st=>{const V=this.tileUrlFunction(st,R,N),at=this.sourceTileCache.containsKey(V)?this.sourceTileCache.get(V):new this.tileClass(st,V?k.Z.IDLE:k.Z.EMPTY,V,this.format_,this.tileLoadFunction);K.sourceTiles.push(at);const ut=at.getState();if(ut<k.Z.LOADED){const Pt=vt=>{this.handleTileChange(vt);const Ot=at.getState();if(Ot===k.Z.LOADED||Ot===k.Z.ERROR){const At=at.getKey();At in K.errorTileKeys?at.getState()===k.Z.LOADED&&delete K.errorTileKeys[At]:K.loadingSourceTiles--,Ot===k.Z.ERROR?K.errorTileKeys[At]=!0:at.removeEventListener(z.Z.CHANGE,Pt),0===K.loadingSourceTiles&&K.setState((0,s.x)(K.errorTileKeys)?k.Z.LOADED:k.Z.ERROR)}};at.addEventListener(z.Z.CHANGE,Pt),K.loadingSourceTiles++}ut===k.Z.IDLE&&(at.extent=C.getTileCoordExtent(st),at.projection=N,at.resolution=C.getResolution(st[0]),this.sourceTileCache.set(V,at),at.load())}),K.loadingSourceTiles||K.setState(K.sourceTiles.some(st=>st.getState()===k.Z.ERROR)?k.Z.ERROR:k.Z.LOADED)}return K.sourceTiles}getTile(R,N,K,rt,b){const L=(0,m.lg)(R,N,K),w=this.getKey();let M;if(this.tileCache.containsKey(L)&&(M=this.tileCache.get(L),M.key===w))return M;const C=[R,N,K];let D=this.getTileCoordForTileUrlFunction(C,b);const Y=this.getTileGrid().getExtent(),st=this.getTileGridForProjection(b);if(D&&Y){const ut=st.getTileCoordExtent(D);(0,e.f3)(ut,-st.getResolution(R),ut),(0,e.kK)(Y,ut)||(D=null)}let V=!0;if(null!==D){const ut=this.tileGrid,Pt=st.getResolution(R),vt=ut.getZForResolution(Pt,1),Ot=st.getTileCoordExtent(D);(0,e.f3)(Ot,-Pt,Ot),ut.forEachTileCoord(Ot,vt,At=>{V=V&&!this.tileUrlFunction(At,rt,b)})}const at=new r(C,V?k.Z.EMPTY:k.Z.IDLE,D,this.getSourceTiles.bind(this,rt,b));return at.key=w,M?(at.interimTile=M,at.refreshInterimChain(),this.tileCache.replace(L,at)):this.tileCache.set(L,at),at}getTileGridForProjection(R){const N=R.getCode();let K=this.tileGrids_[N];if(!K){const rt=this.tileGrid,b=rt.getResolutions().slice(),L=b.map(function(C,D){return rt.getOrigin(D)}),w=b.map(function(C,D){return rt.getTileSize(D)}),M=d.e+1;for(let C=b.length;C<M;++C)b.push(b[C-1]/2),L.push(L[C-1]),w.push(w[C-1]);K=new S.Z({extent:rt.getExtent(),origins:L,resolutions:b,tileSizes:w}),this.tileGrids_[N]=K}return K}getTilePixelRatio(R){return R}getTilePixelSize(R,N,K){const rt=this.getTileGridForProjection(K),b=(0,_.Pq)(rt.getTileSize(R),this.tmpSize);return[Math.round(b[0]*N),Math.round(b[1]*N)]}updateCacheSize(R,N){super.updateCacheSize(2*R,N),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(N).highWaterMark}};function O(E,R){E.setLoader(function(N,K,rt){(0,g.ov)(R,E.getFormat(),N,K,rt,E.onLoad.bind(E),E.onError.bind(E))})}},3640:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var z=a(719),F=a(1180);const G=class k extends z.Z{constructor(A){const S=void 0!==(A=A||{}).projection?A.projection:"EPSG:3857",P=void 0!==A.tileGrid?A.tileGrid:(0,F.dl)({extent:(0,F.Tl)(S),maxResolution:A.maxResolution,maxZoom:A.maxZoom,minZoom:A.minZoom,tileSize:A.tileSize});super({attributions:A.attributions,cacheSize:A.cacheSize,crossOrigin:A.crossOrigin,interpolate:A.interpolate,opaque:A.opaque,projection:S,reprojectionErrorThreshold:A.reprojectionErrorThreshold,tileGrid:P,tileLoadFunction:A.tileLoadFunction,tilePixelRatio:A.tilePixelRatio,tileUrlFunction:A.tileUrlFunction,url:A.url,urls:A.urls,wrapX:void 0===A.wrapX||A.wrapX,transition:A.transition,attributionsCollapsible:A.attributionsCollapsible,zDirection:A.zDirection}),this.gutter_=void 0!==A.gutter?A.gutter:0}getGutter(){return this.gutter_}}},3271:(jt,ht,a)=>{"use strict";a.d(ht,{e:()=>z});const z="1.3.0"},9258:(jt,ht,a)=>{"use strict";function z(k,G,Z){const A=void 0!==Z?k.toFixed(Z):""+k;let S=A.indexOf(".");return S=-1===S?A.length:S,S>G?A:new Array(1+G-S).join("0")+A}function F(k,G){const Z=(""+k).split("."),A=(""+G).split(".");for(let S=0;S<Math.max(Z.length,A.length);S++){const P=parseInt(Z[S]||"0",10),v=parseInt(A[S]||"0",10);if(P>v)return 1;if(v>P)return-1}return 0}a.d(ht,{n:()=>F,v:()=>z})},3009:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>k});var z=a(8929);class F extends z.Z{constructor(Z){super({points:1/0,fill:(Z=Z||{radius:5}).fill,radius:Z.radius,stroke:Z.stroke,scale:void 0!==Z.scale?Z.scale:1,rotation:void 0!==Z.rotation?Z.rotation:0,rotateWithView:void 0!==Z.rotateWithView&&Z.rotateWithView,displacement:void 0!==Z.displacement?Z.displacement:[0,0],declutterMode:Z.declutterMode})}clone(){const Z=this.getScale(),A=new F({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(Z)?Z.slice():Z,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return A.setOpacity(this.getOpacity()),A}setRadius(Z){this.radius_=Z,this.render()}}const k=F},5505:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>F});class z{constructor(G){this.color_=void 0!==(G=G||{}).color?G.color:null}clone(){const G=this.getColor();return new z({color:Array.isArray(G)?G.slice():G||void 0})}getColor(){return this.color_}setColor(G){this.color_=G}}const F=z},1485:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>m});var z=a(2431),F=a(4847),k=a(3837),G=a(9818),Z=a(9219),A=a(9608),S=a(4211),P=a(8823),v=a(4499);let f=null;class u extends A.Z{constructor(g,_,y,I,O,E){super(),this.hitDetectionImage_=null,this.image_=g,this.crossOrigin_=I,this.canvas_={},this.color_=E,this.unlisten_=null,this.imageState_=O,this.size_=y,this.src_=_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===F.Z.LOADED){f||(f=(0,S.E4)(1,1,void 0,{willReadFrequently:!0})),f.drawImage(this.image_,0,0);try{f.getImageData(0,0,1,1),this.tainted_=!1}catch{f=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(z.Z.CHANGE)}handleImageError_(){this.imageState_=F.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=F.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(g){return this.image_||this.initializeImage_(),this.replaceColor_(g),this.canvas_[g]?this.canvas_[g]:this.image_}getPixelRatio(g){return this.replaceColor_(g),this.canvas_[g]?g:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const g=this.size_[0],_=this.size_[1],y=(0,S.E4)(g,_);y.fillRect(0,0,g,_),this.hitDetectionImage_=y.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===F.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=F.Z.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=(0,v.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(g){if(!this.color_||this.canvas_[g]||this.imageState_!==F.Z.LOADED)return;const _=this.image_,y=document.createElement("canvas");y.width=Math.ceil(_.width*g),y.height=Math.ceil(_.height*g);const I=y.getContext("2d");I.scale(g,g),I.drawImage(_,0,0),I.globalCompositeOperation="multiply",I.fillStyle=(0,G.XC)(this.color_),I.fillRect(0,0,y.width/g,y.height/g),I.globalCompositeOperation="destination-in",I.drawImage(_,0,0),this.canvas_[g]=y}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var d=a(3089);function e(s,g,_,y){return void 0!==_&&void 0!==y?[_/s,y/g]:void 0!==_?_/s:void 0!==y?y/g:1}class l extends k.Z{constructor(g){super({opacity:void 0!==(g=g||{}).opacity?g.opacity:1,rotation:void 0!==g.rotation?g.rotation:0,scale:void 0!==g.scale?g.scale:1,displacement:void 0!==g.displacement?g.displacement:[0,0],rotateWithView:void 0!==g.rotateWithView&&g.rotateWithView,declutterMode:g.declutterMode}),this.anchor_=void 0!==g.anchor?g.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==g.anchorOrigin?g.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==g.anchorXUnits?g.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==g.anchorYUnits?g.anchorYUnits:"fraction",this.crossOrigin_=void 0!==g.crossOrigin?g.crossOrigin:null;const E=void 0!==g.img?g.img:null;this.imgSize_=g.imgSize;let R=g.src;(0,Z.h)(!(void 0!==R&&E),4),(0,Z.h)(!E||E&&this.imgSize_,5),(void 0===R||0===R.length)&&E&&(R=E.src||(0,d.sq)(E)),(0,Z.h)(void 0!==R&&R.length>0,6),(0,Z.h)(!((void 0!==g.width||void 0!==g.height)&&void 0!==g.scale),69);const N=void 0!==g.src?F.Z.IDLE:F.Z.LOADED;if(this.color_=void 0!==g.color?(0,G._2)(g.color):null,this.iconImage_=function c(s,g,_,y,I,O){let E=P.c.get(g,y,O);return E||(E=new u(s,g,_,y,I,O),P.c.set(g,y,O,E)),E}(E,R,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,N,this.color_),this.offset_=void 0!==g.offset?g.offset:[0,0],this.offsetOrigin_=void 0!==g.offsetOrigin?g.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==g.size?g.size:null,void 0!==g.width||void 0!==g.height){let K,rt;if(g.size)[K,rt]=g.size;else{const b=this.getImage(1);if(!(b instanceof HTMLCanvasElement||b.src&&b.complete)){this.initialOptions_=g;const L=()=>{if(this.unlistenImageChange(L),!this.initialOptions_)return;const w=this.iconImage_.getSize();this.setScale(e(w[0],w[1],g.width,g.height))};return void this.listenImageChange(L)}K=b.width,rt=b.height}void 0!==K&&this.setScale(e(K,rt,g.width,g.height))}}clone(){let g,_,y;return this.initialOptions_?(_=this.initialOptions_.width,y=this.initialOptions_.height):(g=this.getScale(),g=Array.isArray(g)?g.slice():g),new l({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:g,width:_,height:y,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let g=this.normalizedAnchor_;if(!g){g=this.anchor_;const I=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!I)return null;g=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(g[0]*=I[0]),"fraction"==this.anchorYUnits_&&(g[1]*=I[1])}if("top-left"!=this.anchorOrigin_){if(!I)return null;g===this.anchor_&&(g=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(g[0]=-g[0]+I[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(g[1]=-g[1]+I[1])}this.normalizedAnchor_=g}const _=this.getDisplacement(),y=this.getScaleArray();return[g[0]-_[0]/y[0],g[1]+_[1]/y[1]]}setAnchor(g){this.anchor_=g,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(g){return this.iconImage_.getImage(g)}getPixelRatio(g){return this.iconImage_.getPixelRatio(g)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let g=this.offset_;if("top-left"!=this.offsetOrigin_){const _=this.getSize(),y=this.iconImage_.getSize();if(!_||!y)return null;g=g.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(g[0]=y[0]-_[0]-g[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(g[1]=y[1]-_[1]-g[1])}return this.origin_=g,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const g=this.getScaleArray();return this.size_?this.size_[0]*g[0]:this.iconImage_.getImageState()==F.Z.LOADED?this.iconImage_.getSize()[0]*g[0]:void 0}getHeight(){const g=this.getScaleArray();return this.size_?this.size_[1]*g[1]:this.iconImage_.getImageState()==F.Z.LOADED?this.iconImage_.getSize()[1]*g[1]:void 0}setScale(g){delete this.initialOptions_,super.setScale(g)}listenImageChange(g){this.iconImage_.addEventListener(z.Z.CHANGE,g)}load(){this.iconImage_.load()}unlistenImageChange(g){this.iconImage_.removeEventListener(z.Z.CHANGE,g)}}const m=l},8823:(jt,ht,a)=>{"use strict";a.d(ht,{c:()=>Z});var z=a(9818);function k(A,S,P){return S+":"+A+":"+(P?(0,z.XC)(P):"null")}const Z=new class F{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let S=0;for(const P in this.cache_)!(3&S++)&&!this.cache_[P].hasListener()&&(delete this.cache_[P],--this.cacheSize_)}}get(S,P,v){const f=k(S,P,v);return f in this.cache_?this.cache_[f]:null}set(S,P,v,f){const u=k(S,P,v);this.cache_[u]=f,++this.cacheSize_}setSize(S){this.maxCacheSize_=S,this.expire()}}},3837:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>G});var z=a(3089),F=a(7298);class k{constructor(A){this.opacity_=A.opacity,this.rotateWithView_=A.rotateWithView,this.rotation_=A.rotation,this.scale_=A.scale,this.scaleArray_=(0,F.Pq)(A.scale),this.displacement_=A.displacement,this.declutterMode_=A.declutterMode}clone(){const A=this.getScale();return new k({opacity:this.getOpacity(),scale:Array.isArray(A)?A.slice():A,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,z.O3)()}getImage(A){return(0,z.O3)()}getHitDetectionImage(){return(0,z.O3)()}getPixelRatio(A){return 1}getImageState(){return(0,z.O3)()}getImageSize(){return(0,z.O3)()}getOrigin(){return(0,z.O3)()}getSize(){return(0,z.O3)()}setDisplacement(A){this.displacement_=A}setOpacity(A){this.opacity_=A}setRotateWithView(A){this.rotateWithView_=A}setRotation(A){this.rotation_=A}setScale(A){this.scale_=A,this.scaleArray_=(0,F.Pq)(A)}listenImageChange(A){(0,z.O3)()}load(){(0,z.O3)()}unlistenImageChange(A){(0,z.O3)()}}const G=k},8929:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>P});var z=a(4847),F=a(3837),k=a(9818),G=a(3836),Z=a(4211),A=a(6380);class S extends F.Z{constructor(f){super({opacity:1,rotateWithView:void 0!==f.rotateWithView&&f.rotateWithView,rotation:void 0!==f.rotation?f.rotation:0,scale:void 0!==f.scale?f.scale:1,displacement:void 0!==f.displacement?f.displacement:[0,0],declutterMode:f.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==f.fill?f.fill:null,this.origin_=[0,0],this.points_=f.points,this.radius_=void 0!==f.radius?f.radius:f.radius1,this.radius2_=f.radius2,this.angle_=void 0!==f.angle?f.angle:0,this.stroke_=void 0!==f.stroke?f.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const f=this.getScale(),u=new S({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(f)?f.slice():f,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return u.setOpacity(this.getOpacity()),u}getAnchor(){const f=this.size_;if(!f)return null;const u=this.getDisplacement(),c=this.getScaleArray();return[f[0]/2-u[0]/c[0],f[1]/2+u[1]/c[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(f){this.fill_=f,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(f){let u=this.canvas_[f];if(!u){const c=this.renderOptions_,r=(0,Z.E4)(c.size*f,c.size*f);this.draw_(c,r,f),u=r.canvas,this.canvas_[f]=u}return u}getPixelRatio(f){return f}getImageSize(){return this.size_}getImageState(){return z.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(f){this.stroke_=f,this.render()}listenImageChange(f){}load(){}unlistenImageChange(f){}calculateLineJoinSize_(f,u,c){if(0===u||this.points_===1/0||"bevel"!==f&&"miter"!==f)return u;let r=this.radius_,d=void 0===this.radius2_?r:this.radius2_;if(r<d){const w=r;r=d,d=w}const l=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),m=d*Math.sin(l),g=r-Math.sqrt(d*d-m*m),_=Math.sqrt(m*m+g*g),y=_/m;if("miter"===f&&y<=c)return y*u;const I=u/2/y,O=u/2*(g/_),R=Math.sqrt((r+I)*(r+I)+O*O)-r;if(void 0===this.radius2_||"bevel"===f)return 2*R;const N=r*Math.sin(l),rt=d-Math.sqrt(r*r-N*N),L=Math.sqrt(N*N+rt*rt)/N;return L<=c?2*Math.max(R,L*u/2-d-r):2*R}createRenderOptions(){let d,f=A.rc,u=0,c=null,r=0,e=0;this.stroke_&&(d=this.stroke_.getColor(),null===d&&(d=A.Tx),d=(0,G.y)(d),e=this.stroke_.getWidth(),void 0===e&&(e=A.yC),c=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),f=this.stroke_.getLineJoin(),void 0===f&&(f=A.rc),u=this.stroke_.getMiterLimit(),void 0===u&&(u=A.V4));const l=this.calculateLineJoinSize_(f,e,u),m=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:d,strokeWidth:e,size:Math.ceil(2*m+l),lineDash:c,lineDashOffset:r,lineJoin:f,miterLimit:u}}render(){this.renderOptions_=this.createRenderOptions();const f=this.renderOptions_.size;this.canvas_={},this.size_=[f,f]}draw_(f,u,c){if(u.scale(c,c),u.translate(f.size/2,f.size/2),this.createPath_(u),this.fill_){let r=this.fill_.getColor();null===r&&(r=A.bL),u.fillStyle=(0,G.y)(r),u.fill()}this.stroke_&&(u.strokeStyle=f.strokeStyle,u.lineWidth=f.strokeWidth,f.lineDash&&(u.setLineDash(f.lineDash),u.lineDashOffset=f.lineDashOffset),u.lineJoin=f.lineJoin,u.miterLimit=f.miterLimit,u.stroke())}createHitDetectionCanvas_(f){if(this.fill_){let u=this.fill_.getColor(),c=0;if("string"==typeof u&&(u=(0,k._2)(u)),null===u?c=1:Array.isArray(u)&&(c=4===u.length?u[3]:1),0===c){const r=(0,Z.E4)(f.size,f.size);this.hitDetectionCanvas_=r.canvas,this.drawHitDetectionCanvas_(f,r)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(f){let u=this.points_;const c=this.radius_;if(u===1/0)f.arc(0,0,c,0,2*Math.PI);else{const r=void 0===this.radius2_?c:this.radius2_;void 0!==this.radius2_&&(u*=2);const d=this.angle_-Math.PI/2,e=2*Math.PI/u;for(let l=0;l<u;l++){const m=d+l*e,s=l%2==0?c:r;f.lineTo(s*Math.cos(m),s*Math.sin(m))}f.closePath()}}drawHitDetectionCanvas_(f,u){u.translate(f.size/2,f.size/2),this.createPath_(u),u.fillStyle=A.bL,u.fill(),this.stroke_&&(u.strokeStyle=f.strokeStyle,u.lineWidth=f.strokeWidth,f.lineDash&&(u.setLineDash(f.lineDash),u.lineDashOffset=f.lineDashOffset),u.lineJoin=f.lineJoin,u.miterLimit=f.miterLimit,u.stroke())}}const P=S},4396:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>F});class z{constructor(G){this.color_=void 0!==(G=G||{}).color?G.color:null,this.lineCap_=G.lineCap,this.lineDash_=void 0!==G.lineDash?G.lineDash:null,this.lineDashOffset_=G.lineDashOffset,this.lineJoin_=G.lineJoin,this.miterLimit_=G.miterLimit,this.width_=G.width}clone(){const G=this.getColor();return new z({color:Array.isArray(G)?G.slice():G||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(G){this.color_=G}setLineCap(G){this.lineCap_=G}setLineDash(G){this.lineDash_=G}setLineDashOffset(G){this.lineDashOffset_=G}setLineJoin(G){this.lineJoin_=G}setMiterLimit(G){this.miterLimit_=G}setWidth(G){this.width_=G}}const F=z},1949:(jt,ht,a)=>{"use strict";a.d(ht,{J$:()=>A,ZP:()=>u,yF:()=>P});var z=a(3009),F=a(5505),k=a(4396),G=a(9219);class Z{constructor(r){r=r||{},this.geometry_=null,this.geometryFunction_=f,void 0!==r.geometry&&this.setGeometry(r.geometry),this.fill_=void 0!==r.fill?r.fill:null,this.image_=void 0!==r.image?r.image:null,this.renderer_=void 0!==r.renderer?r.renderer:null,this.hitDetectionRenderer_=void 0!==r.hitDetectionRenderer?r.hitDetectionRenderer:null,this.stroke_=void 0!==r.stroke?r.stroke:null,this.text_=void 0!==r.text?r.text:null,this.zIndex_=r.zIndex}clone(){let r=this.getGeometry();return r&&"object"==typeof r&&(r=r.clone()),new Z({geometry:r,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(r){this.renderer_=r}setHitDetectionRenderer(r){this.hitDetectionRenderer_=r}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(r){this.fill_=r}getImage(){return this.image_}setImage(r){this.image_=r}getStroke(){return this.stroke_}setStroke(r){this.stroke_=r}getText(){return this.text_}setText(r){this.text_=r}getZIndex(){return this.zIndex_}setGeometry(r){"function"==typeof r?this.geometryFunction_=r:"string"==typeof r?this.geometryFunction_=function(d){return d.get(r)}:r?void 0!==r&&(this.geometryFunction_=function(){return r}):this.geometryFunction_=f,this.geometry_=r}setZIndex(r){this.zIndex_=r}}function A(c){let r;if("function"==typeof c)r=c;else{let d;Array.isArray(c)?d=c:((0,G.h)("function"==typeof c.getZIndex,41),d=[c]),r=function(){return d}}return r}let S=null;function P(c,r){if(!S){const d=new F.Z({color:"rgba(255,255,255,0.4)"}),e=new k.Z({color:"#3399CC",width:1.25});S=[new Z({image:new z.Z({fill:d,stroke:e,radius:5}),fill:d,stroke:e})]}return S}function f(c){return c.getGeometry()}const u=Z},7202:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>Z});var z=a(5505),F=a(7298);class G{constructor(S){this.font_=(S=S||{}).font,this.rotation_=S.rotation,this.rotateWithView_=S.rotateWithView,this.scale_=S.scale,this.scaleArray_=(0,F.Pq)(void 0!==S.scale?S.scale:1),this.text_=S.text,this.textAlign_=S.textAlign,this.justify_=S.justify,this.repeat_=S.repeat,this.textBaseline_=S.textBaseline,this.fill_=void 0!==S.fill?S.fill:new z.Z({color:"#333"}),this.maxAngle_=void 0!==S.maxAngle?S.maxAngle:Math.PI/4,this.placement_=void 0!==S.placement?S.placement:"point",this.overflow_=!!S.overflow,this.stroke_=void 0!==S.stroke?S.stroke:null,this.offsetX_=void 0!==S.offsetX?S.offsetX:0,this.offsetY_=void 0!==S.offsetY?S.offsetY:0,this.backgroundFill_=S.backgroundFill?S.backgroundFill:null,this.backgroundStroke_=S.backgroundStroke?S.backgroundStroke:null,this.padding_=void 0===S.padding?null:S.padding}clone(){const S=this.getScale();return new G({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(S)?S.slice():S,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(S){this.overflow_=S}setFont(S){this.font_=S}setMaxAngle(S){this.maxAngle_=S}setOffsetX(S){this.offsetX_=S}setOffsetY(S){this.offsetY_=S}setPlacement(S){this.placement_=S}setRepeat(S){this.repeat_=S}setRotateWithView(S){this.rotateWithView_=S}setFill(S){this.fill_=S}setRotation(S){this.rotation_=S}setScale(S){this.scale_=S,this.scaleArray_=(0,F.Pq)(void 0!==S?S:1)}setStroke(S){this.stroke_=S}setText(S){this.text_=S}setTextAlign(S){this.textAlign_=S}setJustify(S){this.justify_=S}setTextBaseline(S){this.textBaseline_=S}setBackgroundFill(S){this.backgroundFill_=S}setBackgroundStroke(S){this.backgroundStroke_=S}setPadding(S){this.padding_=S}}const Z=G},3936:(jt,ht,a)=>{"use strict";function z(P,v,f,u){return void 0!==u?(u[0]=P,u[1]=v,u[2]=f,u):[P,v,f]}function F(P,v,f){return P+"/"+v+"/"+f}function k(P){return F(P[0],P[1],P[2])}function G(P){const[v,f,u]=P.substring(P.lastIndexOf("/")+1,P.length).split(",").map(Number);return F(v,f,u)}function Z(P){return P.split("/").map(Number)}function A(P){return(P[1]<<P[0])+P[2]}function S(P,v){const f=P[0],u=P[1],c=P[2];if(v.getMinZoom()>f||f>v.getMaxZoom())return!1;const r=v.getFullTileRange(f);return!r||r.containsXY(u,c)}a.d(ht,{MY:()=>G,T9:()=>z,Ul:()=>Z,km:()=>k,lg:()=>F,tE:()=>S,vp:()=>A})},1180:(jt,ht,a)=>{"use strict";a.d(ht,{Cf:()=>S,Tl:()=>c,X$:()=>A,dl:()=>v});var z=a(8398),F=a(8220),k=a(7021),G=a(1316),Z=a(7298);function A(r){let d=r.getDefaultTileGrid();return d||(d=function u(r,d,e,l){return function P(r,d,e,l){l=void 0!==l?l:"top-left";const m=f(r,d,e);return new z.Z({extent:r,origin:(0,G.g0)(r,l),resolutions:m,tileSize:e})}(c(r),d,e,l)}(r),r.setDefaultTileGrid(d)),d}function S(r,d,e){const l=d[0],m=r.getTileCoordCenter(d),s=c(e);if(!(0,G.b8)(s,m)){const g=(0,G.dz)(s),_=Math.ceil((s[0]-m[0])/g);return m[0]+=g*_,r.getTileCoordForCoordAndZ(m,l)}return d}function v(r){const d=r||{},e=d.extent||(0,k.U2)("EPSG:3857").getExtent(),l={extent:e,minZoom:d.minZoom,tileSize:d.tileSize,resolutions:f(e,d.maxZoom,d.tileSize,d.maxResolution)};return new z.Z(l)}function f(r,d,e,l){d=void 0!==d?d:F.e,e=(0,Z.Pq)(void 0!==e?e:F.S);const m=(0,G.Cr)(r),s=(0,G.dz)(r);l=l>0?l:Math.max(s/e[0],m/e[1]);const g=d+1,_=new Array(g);for(let y=0;y<g;++y)_[y]=l/Math.pow(2,y);return _}function c(r){let d=(r=(0,k.U2)(r)).getExtent();if(!d){const e=180*k.Wm.degrees/r.getMetersPerUnit();d=(0,G.T9)(-e,-e,e,e)}return d}},8398:(jt,ht,a)=>{"use strict";a.d(ht,{Z:()=>r});var z=a(6025),F=a(8220),k=a(9219),G=a(3026),Z=a(1316),A=a(3936),S=a(4505),P=a(9363),v=a(7298);const f=[0,0,0],r=class c{constructor(e){let l;if(this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,(0,k.h)((0,P.pT)(this.resolutions_,function(s,g){return g-s},!0),17),!e.origins)for(let s=0,g=this.resolutions_.length-1;s<g;++s)if(l){if(this.resolutions_[s]/this.resolutions_[s+1]!==l){l=void 0;break}}else l=this.resolutions_[s]/this.resolutions_[s+1];this.zoomFactor_=l,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,(0,k.h)(this.origins_.length==this.resolutions_.length,20));const m=e.extent;void 0!==m&&!this.origin_&&!this.origins_&&(this.origin_=(0,Z.rL)(m)),(0,k.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,(0,k.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:F.S,(0,k.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==m?m:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(function(s,g){const _=new z.Z(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(m){const y=this.getTileRangeForExtentAndZ(m,g);_.minX=Math.max(y.minX,_.minX),_.maxX=Math.min(y.maxX,_.maxX),_.minY=Math.max(y.minY,_.minY),_.maxY=Math.min(y.maxY,_.maxY)}return _},this):m&&this.calculateTileRanges_(m)}forEachTileCoord(e,l,m){const s=this.getTileRangeForExtentAndZ(e,l);for(let g=s.minX,_=s.maxX;g<=_;++g)for(let y=s.minY,I=s.maxY;y<=I;++y)m([l,g,y])}forEachTileCoordParentTileRange(e,l,m,s){let g,_,y,I=null,O=e[0]-1;for(2===this.zoomFactor_?(_=e[1],y=e[2]):I=this.getTileCoordExtent(e,s);O>=this.minZoom;){if(2===this.zoomFactor_?(_=Math.floor(_/2),y=Math.floor(y/2),g=(0,z.T)(_,_,y,y,m)):g=this.getTileRangeForExtentAndZ(I,O,m),l(O,g))return!0;--O}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,l,m){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){const g=2*e[1],_=2*e[2];return(0,z.T)(g,g+1,_,_+1,l)}const s=this.getTileCoordExtent(e,m||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,l)}return null}getTileRangeForTileCoordAndZ(e,l,m){if(l>this.maxZoom||l<this.minZoom)return null;const s=e[0],g=e[1],_=e[2];if(l===s)return(0,z.T)(g,_,g,_,m);if(this.zoomFactor_){const I=Math.pow(this.zoomFactor_,l-s),O=Math.floor(g*I),E=Math.floor(_*I);if(l<s)return(0,z.T)(O,O,E,E,m);const R=Math.floor(I*(g+1))-1,N=Math.floor(I*(_+1))-1;return(0,z.T)(O,R,E,N,m)}const y=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(y,l,m)}getTileRangeForExtentAndZ(e,l,m){this.getTileCoordForXYAndZ_(e[0],e[3],l,!1,f);const s=f[1],g=f[2];return this.getTileCoordForXYAndZ_(e[2],e[1],l,!0,f),(0,z.T)(s,f[1],g,f[2],m)}getTileCoordCenter(e){const l=this.getOrigin(e[0]),m=this.getResolution(e[0]),s=(0,v.Pq)(this.getTileSize(e[0]),this.tmpSize_);return[l[0]+(e[1]+.5)*s[0]*m,l[1]-(e[2]+.5)*s[1]*m]}getTileCoordExtent(e,l){const m=this.getOrigin(e[0]),s=this.getResolution(e[0]),g=(0,v.Pq)(this.getTileSize(e[0]),this.tmpSize_),_=m[0]+e[1]*g[0]*s,y=m[1]-(e[2]+1)*g[1]*s;return(0,Z.T9)(_,y,_+g[0]*s,y+g[1]*s,l)}getTileCoordForCoordAndResolution(e,l,m){return this.getTileCoordForXYAndResolution_(e[0],e[1],l,!1,m)}getTileCoordForXYAndResolution_(e,l,m,s,g){const _=this.getZForResolution(m),y=m/this.getResolution(_),I=this.getOrigin(_),O=(0,v.Pq)(this.getTileSize(_),this.tmpSize_);let E=y*(e-I[0])/m/O[0],R=y*(I[1]-l)/m/O[1];return s?(E=(0,G.mD)(E,5)-1,R=(0,G.mD)(R,5)-1):(E=(0,G.GW)(E,5),R=(0,G.GW)(R,5)),(0,A.T9)(_,E,R,g)}getTileCoordForXYAndZ_(e,l,m,s,g){const _=this.getOrigin(m),y=this.getResolution(m),I=(0,v.Pq)(this.getTileSize(m),this.tmpSize_);let O=(e-_[0])/y/I[0],E=(_[1]-l)/y/I[1];return s?(O=(0,G.mD)(O,5)-1,E=(0,G.mD)(E,5)-1):(O=(0,G.GW)(O,5),E=(0,G.GW)(E,5)),(0,A.T9)(m,O,E,g)}getTileCoordForCoordAndZ(e,l,m){return this.getTileCoordForXYAndZ_(e[0],e[1],l,!1,m)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,l){const m=(0,P.h7)(this.resolutions_,e,l||0);return(0,G.uZ)(m,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,l){return(0,S.mV)(l,0,l.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const l=this.resolutions_.length,m=new Array(l);for(let s=this.minZoom;s<l;++s)m[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=m}}},8220:(jt,ht,a)=>{"use strict";a.d(ht,{S:()=>F,e:()=>z});const z=42,F=256},7835:(jt,ht,a)=>{"use strict";a.d(ht,{Gk:()=>P,Un:()=>A,uR:()=>Z});var z=a(9219),F=a(3026),k=a(3936);function G(v,f){const u=/\{z\}/g,c=/\{x\}/g,r=/\{y\}/g,d=/\{-y\}/g;return function(e,l,m){if(e)return v.replace(u,e[0].toString()).replace(c,e[1].toString()).replace(r,e[2].toString()).replace(d,function(){const g=f.getFullTileRange(e[0]);return(0,z.h)(g,55),(g.getHeight()-e[2]-1).toString()})}}function Z(v,f){const u=v.length,c=new Array(u);for(let r=0;r<u;++r)c[r]=G(v[r],f);return A(c)}function A(v){return 1===v.length?v[0]:function(f,u,c){if(!f)return;const r=(0,k.vp)(f),d=(0,F.$W)(r,v.length);return v[d](f,u,c)}}function P(v){const f=[];let u=/\{([a-z])-([a-z])\}/.exec(v);if(u){const c=u[1].charCodeAt(0),r=u[2].charCodeAt(0);let d;for(d=c;d<=r;++d)f.push(v.replace(u[0],String.fromCharCode(d)));return f}if(u=/\{(\d+)-(\d+)\}/.exec(v),u){const c=parseInt(u[2],10);for(let r=parseInt(u[1],10);r<=c;r++)f.push(v.replace(u[0],r.toString()));return f}return f.push(v),f}},6412:(jt,ht,a)=>{"use strict";a.d(ht,{BB:()=>_,Iu:()=>r,Jp:()=>A,U1:()=>f,Ue:()=>G,bA:()=>u,lk:()=>P,mc:()=>Z,n3:()=>c,nb:()=>m,nn:()=>v,qC:()=>d});var z=a(3233),F=a(9219);const k=new Array(6);function G(){return[1,0,0,1,0,0]}function Z(y){return S(y,1,0,0,1,0,0)}function A(y,I){const O=y[0],E=y[1],R=y[2],N=y[3],K=y[4],rt=y[5],b=I[0],L=I[1],w=I[2],M=I[3],C=I[4],D=I[5];return y[0]=O*b+R*L,y[1]=E*b+N*L,y[2]=O*w+R*M,y[3]=E*w+N*M,y[4]=O*C+R*D+K,y[5]=E*C+N*D+rt,y}function S(y,I,O,E,R,N,K){return y[0]=I,y[1]=O,y[2]=E,y[3]=R,y[4]=N,y[5]=K,y}function P(y,I){return y[0]=I[0],y[1]=I[1],y[2]=I[2],y[3]=I[3],y[4]=I[4],y[5]=I[5],y}function v(y,I){const O=I[0],E=I[1];return I[0]=y[0]*O+y[2]*E+y[4],I[1]=y[1]*O+y[3]*E+y[5],I}function f(y,I){const O=Math.cos(I),E=Math.sin(I);return A(y,S(k,O,E,-E,O,0,0))}function u(y,I,O){return A(y,S(k,I,0,0,O,0,0))}function c(y,I,O){return S(y,I,0,0,O,0,0)}function r(y,I,O){return A(y,S(k,1,0,0,1,I,O))}function d(y,I,O,E,R,N,K,rt){const b=Math.sin(N),L=Math.cos(N);return y[0]=E*L,y[1]=R*b,y[2]=-E*b,y[3]=R*L,y[4]=K*E*L-rt*E*b+I,y[5]=K*R*b+rt*R*L+O,y}function m(y,I){const O=function s(y){return y[0]*y[3]-y[1]*y[2]}(I);(0,F.h)(0!==O,32);const E=I[0],R=I[1],N=I[2],K=I[3],rt=I[4],b=I[5];return y[0]=K/O,y[1]=-R/O,y[2]=-N/O,y[3]=E/O,y[4]=(N*b-K*rt)/O,y[5]=-(E*b-R*rt)/O,y}let g;function _(y){const I="matrix("+y.join(", ")+")";if(z.Id)return I;const O=g||(g=document.createElement("div"));return O.style.transform=I,O.style.transform}},8625:(jt,ht,a)=>{"use strict";function z(F,k){const G=[];Object.keys(k).forEach(function(A){null!=k[A]&&G.push(A+"="+encodeURIComponent(k[A]))});const Z=G.join("&");return F=F.replace(/[?&]$/,""),(F+=F.includes("?")?"&":"?")+Z}a.d(ht,{B:()=>z})},3089:(jt,ht,a)=>{"use strict";function z(){throw new Error("Unimplemented abstract method.")}a.d(ht,{O3:()=>z,sq:()=>k});let F=0;function k(Z){return Z.ol_uid||(Z.ol_uid=String(++F))}},2659:(jt,ht,a)=>{"use strict";a.d(ht,{A4:()=>d,C5:()=>g,Ei:()=>f,G3:()=>l,Me:()=>b,O:()=>y,Pr:()=>r,Qc:()=>P,RA:()=>s,T3:()=>_,Ve:()=>G,ZL:()=>O,c:()=>k,fJ:()=>F,hg:()=>m,ke:()=>c,pc:()=>v,qk:()=>A,xc:()=>N,z:()=>u});var z=a(9363);const F="http://www.w3.org/2001/XMLSchema-instance";function k(L,w){return b().createElementNS(L,w)}function G(L,w){return Z(L,w,[]).join("")}function Z(L,w,M){if(L.nodeType==Node.CDATA_SECTION_NODE||L.nodeType==Node.TEXT_NODE)M.push(w?String(L.nodeValue).replace(/(\r\n|\r|\n)/g,""):L.nodeValue);else{let C;for(C=L.firstChild;C;C=C.nextSibling)Z(C,w,M)}return M}function A(L){return"documentElement"in L}function P(L){return(new DOMParser).parseFromString(L,"application/xml")}function v(L,w){return function(M,C){const D=L.call(void 0!==w?w:this,M,C);void 0!==D&&(0,z.l7)(C[C.length-1],D)}}function f(L,w){return function(M,C){const D=L.call(void 0!==w?w:this,M,C);void 0!==D&&C[C.length-1].push(D)}}function u(L,w){return function(M,C){const D=L.call(void 0!==w?w:this,M,C);void 0!==D&&(C[C.length-1]=D)}}function c(L,w,M){return function(C,D){const Y=L.call(void 0!==M?M:this,C,D);if(void 0!==Y){const st=D[D.length-1],V=void 0!==w?w:C.localName;let at;V in st?at=st[V]:(at=[],st[V]=at),at.push(Y)}}}function r(L,w,M){return function(C,D){const Y=L.call(void 0!==M?M:this,C,D);void 0!==Y&&(D[D.length-1][void 0!==w?w:C.localName]=Y)}}function d(L,w){return function(M,C,D){L.call(void 0!==w?w:this,M,C,D),D[D.length-1].node.appendChild(M)}}function l(L,w){return function(M,C,D){let V=L;return void 0===V&&(V=D),k(void 0!==w?w:C[C.length-1].node.namespaceURI,V)}}const m=l();function s(L,w){const M=w.length,C=new Array(M);for(let D=0;D<M;++D)C[D]=L[w[D]];return C}function g(L,w,M){let C,D;for(M=void 0!==M?M:{},C=0,D=L.length;C<D;++C)M[L[C]]=w;return M}function _(L,w,M,C){let D;for(D=w.firstElementChild;D;D=D.nextElementSibling){const Y=L[D.namespaceURI];if(void 0!==Y){const st=Y[D.localName];void 0!==st&&st.call(C,D,M)}}}function y(L,w,M,C,D){return C.push(L),_(w,M,C,D),C.pop()}function O(L,w,M,C,D,Y,st){return D.push(L),function I(L,w,M,C,D,Y){const st=(void 0!==D?D:M).length;let V,at;for(let ut=0;ut<st;++ut)V=M[ut],void 0!==V&&(at=w.call(void 0!==Y?Y:this,V,C,void 0!==D?D[ut]:void 0),void 0!==at&&L[at.namespaceURI][at.localName].call(Y,at,V,C))}(w,M,C,D,Y,st),D.pop()}let E,K;function N(){return void 0===E&&typeof XMLSerializer<"u"&&(E=new XMLSerializer),E}function b(){return void 0===K&&typeof document<"u"&&(K=document.implementation.createDocument("","",null)),K}},7590:(jt,ht,a)=>{"use strict";a.d(ht,{h0:()=>qe,bg:()=>Jr});var z=a(3009),F=a(5505),k=a(1485),G=a(6198),Z=a(4396),A=a(1949),S=a(7202),P=a(6380),v=a(7835),f=a(1539),u=a(5209),c=a(1590),r=a(3053),d=a(4792),e=a(4074),l=a(8398),m=a(719),s=a(1316),g=a(9219),_=a(1180),y=a(7021),I=a(3089);const M=class w extends m.Z{constructor(i){if(super({attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:i.interpolate,projection:(0,y.U2)("EPSG:3857"),reprojectionErrorThreshold:i.reprojectionErrorThreshold,state:"loading",tileLoadFunction:i.tileLoadFunction,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,zDirection:i.zDirection}),this.tileJSON_=null,this.tileSize_=i.tileSize,i.url)if(i.jsonp)!function O(n,i,o,T){const U=document.createElement("script"),H="olc_"+(0,I.sq)(i);function lt(){delete window[H],U.parentNode.removeChild(U)}U.async=!0,U.src=n+(n.includes("?")?"&":"?")+(T||"callback")+"="+H;const Tt=setTimeout(function(){lt(),o&&o()},1e4);window[H]=function(bt){clearTimeout(Tt),lt(),i(bt)},document.head.appendChild(U)}(i.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const o=new XMLHttpRequest;o.addEventListener("load",this.onXHRLoad_.bind(this)),o.addEventListener("error",this.onXHRError_.bind(this)),o.open("GET",i.url),o.send()}else i.tileJSON?this.handleTileJSONResponse(i.tileJSON):(0,g.h)(!1,51)}onXHRLoad_(i){const o=i.target;if(!o.status||o.status>=200&&o.status<300){let T;try{T=JSON.parse(o.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(T)}else this.handleTileJSONError()}onXHRError_(i){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(i){const o=(0,y.U2)("EPSG:4326"),T=this.getProjection();let U;if(void 0!==i.bounds){const Dt=(0,y.WO)(o,T);U=(0,s.Ne)(i.bounds,Dt)}const H=(0,_.Tl)(T),bt=(0,_.dl)({extent:H,maxZoom:i.maxzoom||22,minZoom:i.minzoom||0,tileSize:this.tileSize_});if(this.tileGrid=bt,this.tileUrlFunction=(0,v.uR)(i.tiles,bt),i.attribution&&!this.getAttributions()){const Dt=void 0!==U?U:H;this.setAttributions(function(Nt){return(0,s.kK)(Dt,Nt.extent)?[i.attribution]:null})}this.tileJSON_=i,this.setState("ready")}handleTileJSONError(){this.setState("error")}};var ut,C=a(640),D=a(5105),Y=a(8412),st=a(2889),V=a(1318),Pt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function vt(n){return(n=Math.round(n))<0?0:n>255?255:n}function At(n){return vt("%"===n[n.length-1]?parseFloat(n)/100*255:parseInt(n))}function Gt(n){return function Ot(n){return n<0?0:n>1?1:n}("%"===n[n.length-1]?parseFloat(n)/100:parseFloat(n))}function zt(n,i,o){return o<0?o+=1:o>1&&(o-=1),6*o<1?n+(i-n)*o*6:2*o<1?i:3*o<2?n+(i-n)*(2/3-o)*6:n}try{ut={}.parseCSSColor=function qt(n){var o,i=n.replace(/ /g,"").toLowerCase();if(i in Pt)return Pt[i].slice();if("#"===i[0])return 4===i.length?(o=parseInt(i.substr(1),16))>=0&&o<=4095?[(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1]:null:7===i.length&&(o=parseInt(i.substr(1),16))>=0&&o<=16777215?[(16711680&o)>>16,(65280&o)>>8,255&o,1]:null;var T=i.indexOf("("),U=i.indexOf(")");if(-1!==T&&U+1===i.length){var H=i.substr(0,T),lt=i.substr(T+1,U-(T+1)).split(","),Tt=1;switch(H){case"rgba":if(4!==lt.length)return null;Tt=Gt(lt.pop());case"rgb":return 3!==lt.length?null:[At(lt[0]),At(lt[1]),At(lt[2]),Tt];case"hsla":if(4!==lt.length)return null;Tt=Gt(lt.pop());case"hsl":if(3!==lt.length)return null;var bt=(parseFloat(lt[0])%360+360)%360/360,Dt=Gt(lt[1]),Nt=Gt(lt[2]),$t=Nt<=.5?Nt*(Dt+1):Nt+Dt-Nt*Dt,le=2*Nt-$t;return[vt(255*zt(le,$t,bt+1/3)),vt(255*zt(le,$t,bt)),vt(255*zt(le,$t,bt-1/3)),Tt];default:return null}}return null}}catch{}var Xt=function(i,o,T,U){void 0===U&&(U=1),this.r=i,this.g=o,this.b=T,this.a=U};Xt.parse=function(i){if(i){if(i instanceof Xt)return i;if("string"==typeof i){var o=ut(i);if(o)return new Xt(o[0]/255*o[3],o[1]/255*o[3],o[2]/255*o[3],o[3])}}},Xt.prototype.toString=function(){var i=this.toArray(),T=i[1],U=i[2],H=i[3];return"rgba("+Math.round(i[0])+","+Math.round(T)+","+Math.round(U)+","+H+")"},Xt.prototype.toArray=function(){var i=this,H=i.a;return 0===H?[0,0,0,0]:[255*i.r/H,255*i.g/H,255*i.b/H,H]},Xt.prototype.toArray01=function(){var i=this,H=i.a;return 0===H?[0,0,0,0]:[i.r/H,i.g/H,i.b/H,H]},Xt.prototype.toArray01PremultipliedAlpha=function(){var i=this;return[i.r,i.g,i.b,i.a]},Xt.black=new Xt(0,0,0,1),Xt.white=new Xt(1,1,1,1),Xt.transparent=new Xt(0,0,0,0),Xt.red=new Xt(1,0,0,1),Xt.blue=new Xt(0,0,1,1);var fe=Xt;function he(n){return"object"==typeof n?["literal",n]:n}function ft(n){switch(n.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Vt(n,i){var o=he(function Zt(n,i){return void 0!==n?n:void 0!==i?i:void 0}(n.default,i.default));return void 0===o&&"resolvedImage"===i.type?"":o}function pe(n,i,o){var T=Ft(n,i),U=["get",n.property];if("categorical"===T&&"boolean"==typeof o[0][0]){for(var H=["case"],lt=0,Tt=o;lt<Tt.length;lt+=1){var bt=Tt[lt];H.push(["==",U,bt[0]],bt[1])}return H.push(Vt(n,i)),H}if("categorical"===T){for(var Dt=["match",U],Nt=0,$t=o;Nt<$t.length;Nt+=1){var le=$t[Nt];xt(Dt,le[0],le[1],!1)}return Dt.push(Vt(n,i)),Dt}if("interval"===T){for(var de=["step",["number",U]],we=0,t=o;we<t.length;we+=1){var h=t[we];xt(de,h[0],h[1],!0)}return gt(de),void 0===n.default?de:["case",["==",["typeof",U],"number"],de,he(n.default)]}if("exponential"===T){for(var p=void 0!==n.base?n.base:1,B=[ft(n),1===p?["linear"]:["exponential",p],["number",U]],j=0,X=o;j<X.length;j+=1){var it=X[j];xt(B,it[0],it[1],!1)}return void 0===n.default?B:["case",["==",["typeof",U],"number"],B,he(n.default)]}throw new Error("Unknown property function type "+T)}function gt(n){"step"===n[0]&&3===n.length&&(n.push(0),n.push(n[3]))}function xt(n,i,o,T){n.length>3&&i===n[n.length-2]||(T&&2===n.length||n.push(i),n.push(o))}function Ft(n,i){return n.type?n.type:i.expression.interpolated?"exponential":"interval"}function Wt(n){for(var i=["concat"],o=/{([^{}]+)}/g,T=0,U=o.exec(n);null!==U;U=o.exec(n)){var H=n.slice(T,o.lastIndex-U[0].length);T=o.lastIndex,H.length>0&&i.push(H),i.push(["get",U[1]])}if(1===i.length)return n;if(T<n.length)i.push(n.slice(T));else if(2===i.length)return["to-string",i[1]];return i}var ue=function(n){function i(o,T){n.call(this,T),this.message=T,this.key=o}return n&&(i.__proto__=n),(i.prototype=Object.create(n&&n.prototype)).constructor=i,i}(Error),ge=function(i,o){void 0===o&&(o=[]),this.parent=i,this.bindings={};for(var T=0,U=o;T<U.length;T+=1){var H=U[T];this.bindings[H[0]]=H[1]}};ge.prototype.concat=function(i){return new ge(this,i)},ge.prototype.get=function(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(i+" not found in scope.")},ge.prototype.has=function(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)};var Le=ge,Me={kind:"null"},nt={kind:"number"},Q={kind:"string"},x={kind:"boolean"},W={kind:"color"},tt={kind:"object"},et={kind:"value"},Et={kind:"collator"},It={kind:"formatted"},wt={kind:"resolvedImage"};function Jt(n,i){return{kind:"array",itemType:n,N:i}}function ne(n){if("array"===n.kind){var i=ne(n.itemType);return"number"==typeof n.N?"array<"+i+", "+n.N+">":"value"===n.itemType.kind?"array":"array<"+i+">"}return n.kind}var ye=[Me,nt,Q,x,W,It,tt,Jt(et),wt];function oe(n,i){if("error"===i.kind)return null;if("array"===n.kind){if("array"===i.kind&&(0===i.N&&"value"===i.itemType.kind||!oe(n.itemType,i.itemType))&&("number"!=typeof n.N||n.N===i.N))return null}else{if(n.kind===i.kind)return null;if("value"===n.kind)for(var o=0,T=ye;o<T.length;o+=1)if(!oe(T[o],i))return null}return"Expected "+ne(n)+" but found "+ne(i)+" instead."}function ie(n,i){return i.some(function(o){return o.kind===n.kind})}function Ge(n,i){return i.some(function(o){return"null"===o?null===n:"array"===o?Array.isArray(n):"object"===o?n&&!Array.isArray(n)&&"object"==typeof n:o===typeof n})}var Xe=function(i,o,T){this.sensitivity=i?o?"variant":"case":o?"accent":"base",this.locale=T,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Xe.prototype.compare=function(i,o){return this.collator.compare(i,o)},Xe.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ne=Xe,Ue=function(i,o,T,U,H){this.text=i.normalize?i.normalize():i,this.image=o,this.scale=T,this.fontStack=U,this.textColor=H},Ve=function(i){this.sections=i};Ve.fromString=function(i){return new Ve([new Ue(i,null,null,null,null)])},Ve.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(i){return 0!==i.text.length||i.image&&0!==i.image.name.length})},Ve.factory=function(i){return i instanceof Ve?i:Ve.fromString(i)},Ve.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(i){return i.text}).join("")},Ve.prototype.serialize=function(){for(var i=["format"],o=0,T=this.sections;o<T.length;o+=1){var U=T[o];if(U.image)i.push(["image",U.image.name]);else{i.push(U.text);var H={};U.fontStack&&(H["text-font"]=["literal",U.fontStack.split(",")]),U.scale&&(H["font-scale"]=U.scale),U.textColor&&(H["text-color"]=["rgba"].concat(U.textColor.toArray())),i.push(H)}}return i};var Je=Ve,si=function(i){this.name=i.name,this.available=i.available};si.prototype.toString=function(){return this.name},si.fromString=function(i){return i?new si({name:i,available:!1}):null},si.prototype.serialize=function(){return["image",this.name]};var Qe=si;function ei(n,i,o,T){return"number"==typeof n&&n>=0&&n<=255&&"number"==typeof i&&i>=0&&i<=255&&"number"==typeof o&&o>=0&&o<=255?typeof T>"u"||"number"==typeof T&&T>=0&&T<=1?null:"Invalid rgba value ["+[n,i,o,T].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof T?[n,i,o,T]:[n,i,o]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function q(n){if(null===n)return!0;if("string"==typeof n)return!0;if("boolean"==typeof n)return!0;if("number"==typeof n)return!0;if(n instanceof fe)return!0;if(n instanceof Ne)return!0;if(n instanceof Je)return!0;if(n instanceof Qe)return!0;if(Array.isArray(n)){for(var i=0,o=n;i<o.length;i+=1)if(!q(o[i]))return!1;return!0}if("object"==typeof n){for(var U in n)if(!q(n[U]))return!1;return!0}return!1}function J(n){if(null===n)return Me;if("string"==typeof n)return Q;if("boolean"==typeof n)return x;if("number"==typeof n)return nt;if(n instanceof fe)return W;if(n instanceof Ne)return Et;if(n instanceof Je)return It;if(n instanceof Qe)return wt;if(Array.isArray(n)){for(var o,i=n.length,T=0,U=n;T<U.length;T+=1){var lt=J(U[T]);if(o){if(o===lt)continue;o=et;break}o=lt}return Jt(o||et,i)}return tt}function _t(n){var i=typeof n;return null===n?"":"string"===i||"number"===i||"boolean"===i?String(n):n instanceof fe||n instanceof Je||n instanceof Qe?n.toString():JSON.stringify(n)}var pt=function(i,o){this.type=i,this.value=o};pt.parse=function(i,o){if(2!==i.length)return o.error("'literal' expression requires exactly one argument, but found "+(i.length-1)+" instead.");if(!q(i[1]))return o.error("invalid value");var T=i[1],U=J(T),H=o.expectedType;return"array"===U.kind&&0===U.N&&H&&"array"===H.kind&&("number"!=typeof H.N||0===H.N)&&(U=H),new pt(U,T)},pt.prototype.evaluate=function(){return this.value},pt.prototype.eachChild=function(){},pt.prototype.outputDefined=function(){return!0},pt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof fe?["rgba"].concat(this.value.toArray()):this.value instanceof Je?this.value.serialize():this.value};var St=pt,Ht=function(i){this.name="ExpressionEvaluationError",this.message=i};Ht.prototype.toJSON=function(){return this.message};var te=Ht,ve={string:Q,number:nt,boolean:x,object:tt},Te=function(i,o){this.type=i,this.args=o};Te.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var U,T=1,H=i[0];if("array"===H){var lt,bt;if(i.length>2){var Tt=i[1];if("string"!=typeof Tt||!(Tt in ve)||"object"===Tt)return o.error('The item type argument of "array" must be one of string, number, boolean',1);lt=ve[Tt],T++}else lt=et;if(i.length>3){if(null!==i[2]&&("number"!=typeof i[2]||i[2]<0||i[2]!==Math.floor(i[2])))return o.error('The length argument to "array" must be a positive integer literal',2);bt=i[2],T++}U=Jt(lt,bt)}else U=ve[H];for(var Dt=[];T<i.length;T++){var Nt=o.parse(i[T],T,et);if(!Nt)return null;Dt.push(Nt)}return new Te(U,Dt)},Te.prototype.evaluate=function(i){for(var o=0;o<this.args.length;o++){var T=this.args[o].evaluate(i);if(!oe(this.type,J(T)))return T;if(o===this.args.length-1)throw new te("Expected value to be of type "+ne(this.type)+", but found "+ne(J(T))+" instead.")}return null},Te.prototype.eachChild=function(i){this.args.forEach(i)},Te.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},Te.prototype.serialize=function(){var i=this.type,o=[i.kind];if("array"===i.kind){var T=i.itemType;if("string"===T.kind||"number"===T.kind||"boolean"===T.kind){o.push(T.kind);var U=i.N;("number"==typeof U||this.args.length>1)&&o.push(U)}}return o.concat(this.args.map(function(H){return H.serialize()}))};var Se=Te,Fe=function(i){this.type=It,this.sections=i};Fe.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var T=i[1];if(!Array.isArray(T)&&"object"==typeof T)return o.error("First argument must be an image or text section.");for(var U=[],H=!1,lt=1;lt<=i.length-1;++lt){var Tt=i[lt];if(H&&"object"==typeof Tt&&!Array.isArray(Tt)){H=!1;var bt=null;if(Tt["font-scale"]&&!(bt=o.parse(Tt["font-scale"],1,nt)))return null;var Dt=null;if(Tt["text-font"]&&!(Dt=o.parse(Tt["text-font"],1,Jt(Q))))return null;var Nt=null;if(Tt["text-color"]&&!(Nt=o.parse(Tt["text-color"],1,W)))return null;var $t=U[U.length-1];$t.scale=bt,$t.font=Dt,$t.textColor=Nt}else{var le=o.parse(i[lt],1,et);if(!le)return null;var de=le.type.kind;if("string"!==de&&"value"!==de&&"null"!==de&&"resolvedImage"!==de)return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");H=!0,U.push({content:le,scale:null,font:null,textColor:null})}}return new Fe(U)},Fe.prototype.evaluate=function(i){return new Je(this.sections.map(function(T){var U=T.content.evaluate(i);return J(U)===wt?new Ue("",U,null,null,null):new Ue(_t(U),null,T.scale?T.scale.evaluate(i):null,T.font?T.font.evaluate(i).join(","):null,T.textColor?T.textColor.evaluate(i):null)}))},Fe.prototype.eachChild=function(i){for(var o=0,T=this.sections;o<T.length;o+=1){var U=T[o];i(U.content),U.scale&&i(U.scale),U.font&&i(U.font),U.textColor&&i(U.textColor)}},Fe.prototype.outputDefined=function(){return!1},Fe.prototype.serialize=function(){for(var i=["format"],o=0,T=this.sections;o<T.length;o+=1){var U=T[o];i.push(U.content.serialize());var H={};U.scale&&(H["font-scale"]=U.scale.serialize()),U.font&&(H["text-font"]=U.font.serialize()),U.textColor&&(H["text-color"]=U.textColor.serialize()),i.push(H)}return i};var Be=Fe,ke=function(i){this.type=wt,this.input=i};ke.parse=function(i,o){if(2!==i.length)return o.error("Expected two arguments.");var T=o.parse(i[1],1,Q);return T?new ke(T):o.error("No image name provided.")},ke.prototype.evaluate=function(i){var o=this.input.evaluate(i),T=Qe.fromString(o);return T&&i.availableImages&&(T.available=i.availableImages.indexOf(o)>-1),T},ke.prototype.eachChild=function(i){i(this.input)},ke.prototype.outputDefined=function(){return!1},ke.prototype.serialize=function(){return["image",this.input.serialize()]};var ni=ke,Mi={"to-boolean":x,"to-color":W,"to-number":nt,"to-string":Q},gi=function(i,o){this.type=i,this.args=o};gi.parse=function(i,o){if(i.length<2)return o.error("Expected at least one argument.");var T=i[0];if(("to-boolean"===T||"to-string"===T)&&2!==i.length)return o.error("Expected one argument.");for(var U=Mi[T],H=[],lt=1;lt<i.length;lt++){var Tt=o.parse(i[lt],lt,et);if(!Tt)return null;H.push(Tt)}return new gi(U,H)},gi.prototype.evaluate=function(i){if("boolean"===this.type.kind)return!!this.args[0].evaluate(i);if("color"===this.type.kind){for(var o,T,U=0,H=this.args;U<H.length;U+=1){if(T=null,(o=H[U].evaluate(i))instanceof fe)return o;if("string"==typeof o){var Tt=i.parseColor(o);if(Tt)return Tt}else if(Array.isArray(o)&&!(T=o.length<3||o.length>4?"Invalid rbga value "+JSON.stringify(o)+": expected an array containing either three or four numeric values.":ei(o[0],o[1],o[2],o[3])))return new fe(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new te(T||"Could not parse color from value '"+("string"==typeof o?o:String(JSON.stringify(o)))+"'")}if("number"===this.type.kind){for(var bt=null,Dt=0,Nt=this.args;Dt<Nt.length;Dt+=1){if(null===(bt=Nt[Dt].evaluate(i)))return 0;var le=Number(bt);if(!isNaN(le))return le}throw new te("Could not convert "+JSON.stringify(bt)+" to number.")}return"formatted"===this.type.kind?Je.fromString(_t(this.args[0].evaluate(i))):"resolvedImage"===this.type.kind?Qe.fromString(_t(this.args[0].evaluate(i))):_t(this.args[0].evaluate(i))},gi.prototype.eachChild=function(i){this.args.forEach(i)},gi.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},gi.prototype.serialize=function(){if("formatted"===this.type.kind)return new Be([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ni(this.args[0]).serialize();var i=["to-"+this.type.kind];return this.eachChild(function(o){i.push(o.serialize())}),i};var pi=gi,xn=["Unknown","Point","LineString","Polygon"],Ii=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};Ii.prototype.id=function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null},Ii.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?xn[this.feature.type]:this.feature.type:null},Ii.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ii.prototype.canonicalID=function(){return this.canonical},Ii.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ii.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var i=this.featureDistanceData.center,o=this.featureDistanceData.scale,T=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(T.x*o-i[0])+this.featureDistanceData.bearing[1]*(T.y*o-i[1])}return 0},Ii.prototype.parseColor=function(i){var o=this._parseColorCache[i];return o||(o=this._parseColorCache[i]=fe.parse(i)),o};var vi=Ii,ci=function(i,o,T,U){this.name=i,this.type=o,this._evaluate=T,this.args=U};ci.prototype.evaluate=function(i){return this._evaluate(i,this.args)},ci.prototype.eachChild=function(i){this.args.forEach(i)},ci.prototype.outputDefined=function(){return!1},ci.prototype.serialize=function(){return[this.name].concat(this.args.map(function(i){return i.serialize()}))},ci.parse=function(i,o){var T,U=i[0],H=ci.definitions[U];if(!H)return o.error('Unknown expression "'+U+'". If you wanted a literal array, use ["literal", [...]].',0);for(var lt=Array.isArray(H)?H[0]:H.type,Tt=Array.isArray(H)?[[H[1],H[2]]]:H.overloads,bt=Tt.filter(function(re){var ae=re[0];return!Array.isArray(ae)||ae.length===i.length-1}),Dt=null,Nt=0,$t=bt;Nt<$t.length;Nt+=1){var le=$t[Nt],de=le[0],we=le[1];Dt=new Ji(o.registry,o.path,null,o.scope);for(var t=[],h=!1,p=1;p<i.length;p++){var B=i[p],j=Array.isArray(de)?de[p-1]:de.type,X=Dt.parse(B,1+t.length,j);if(!X){h=!0;break}t.push(X)}if(!h){if(Array.isArray(de)&&de.length!==t.length){Dt.error("Expected "+de.length+" arguments, but found "+t.length+" instead.");continue}for(var it=0;it<t.length;it++){var $=Array.isArray(de)?de[it]:de.type,ct=t[it];Dt.concat(it+1).checkSubtype($,ct.type)}if(0===Dt.errors.length)return new ci(U,lt,we,t)}}if(1===bt.length)(T=o.errors).push.apply(T,Dt.errors);else{for(var Ut=(bt.length?bt:Tt).map(function(re){return function yi(n){return Array.isArray(n)?"("+n.map(ne).join(", ")+")":"("+ne(n.type)+"...)"}(re[0])}).join(" | "),Rt=[],kt=1;kt<i.length;kt++){var se=o.parse(i[kt],1+Rt.length);if(!se)return null;Rt.push(ne(se.type))}o.error("Expected arguments of type "+Ut+", but found ("+Rt.join(", ")+") instead.")}return null},ci.register=function(i,o){for(var T in ci.definitions=o,o)i[T]=ci};var _i=ci,ri=function(i,o,T){this.type=Et,this.locale=T,this.caseSensitive=i,this.diacriticSensitive=o};ri.parse=function(i,o){if(2!==i.length)return o.error("Expected one argument.");var T=i[1];if("object"!=typeof T||Array.isArray(T))return o.error("Collator options argument must be an object.");var U=o.parse(void 0!==T["case-sensitive"]&&T["case-sensitive"],1,x);if(!U)return null;var H=o.parse(void 0!==T["diacritic-sensitive"]&&T["diacritic-sensitive"],1,x);if(!H)return null;var lt=null;return T.locale&&!(lt=o.parse(T.locale,1,Q))?null:new ri(U,H,lt)},ri.prototype.evaluate=function(i){return new Ne(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)},ri.prototype.eachChild=function(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)},ri.prototype.outputDefined=function(){return!1},ri.prototype.serialize=function(){var i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]};var Gi=ri,Pi=8192;function ai(n,i){n[0]=Math.min(n[0],i[0]),n[1]=Math.min(n[1],i[1]),n[2]=Math.max(n[2],i[0]),n[3]=Math.max(n[3],i[1])}function Xi(n,i){return!(n[0]<=i[0]||n[2]>=i[2]||n[1]<=i[1]||n[3]>=i[3])}function Ws(n,i){var o=function Ei(n){return(180+n)/360}(n[0]),T=function Ci(n){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360}(n[1]),U=Math.pow(2,i.z);return[Math.round(o*U*Pi),Math.round(T*U*Pi)]}function Ri(n,i,o){var T=n[0]-i[0],U=n[1]-i[1],H=n[0]-o[0],lt=n[1]-o[1];return T*lt-H*U==0&&T*H<=0&&U*lt<=0}function hs(n,i,o){return i[1]>n[1]!=o[1]>n[1]&&n[0]<(o[0]-i[0])*(n[1]-i[1])/(o[1]-i[1])+i[0]}function Vi(n,i){for(var o=!1,T=0,U=i.length;T<U;T++)for(var H=i[T],lt=0,Tt=H.length;lt<Tt-1;lt++){if(Ri(n,H[lt],H[lt+1]))return!1;hs(n,H[lt],H[lt+1])&&(o=!o)}return o}function us(n,i){for(var o=0;o<i.length;o++)if(Vi(n,i[o]))return!0;return!1}function xi(n,i,o,T){var bt=T[0]-o[0],Dt=T[1]-o[1],Nt=(n[0]-o[0])*Dt-bt*(n[1]-o[1]),$t=(i[0]-o[0])*Dt-bt*(i[1]-o[1]);return Nt>0&&$t<0||Nt<0&&$t>0}function Ai(n,i,o,T){return 0!==function Zi(n,i){return n[0]*i[1]-n[1]*i[0]}([T[0]-o[0],T[1]-o[1]],[i[0]-n[0],i[1]-n[1]])&&!(!xi(n,i,o,T)||!xi(o,T,n,i))}function hn(n,i,o){for(var T=0,U=o;T<U.length;T+=1)for(var H=U[T],lt=0;lt<H.length-1;++lt)if(Ai(n,i,H[lt],H[lt+1]))return!0;return!1}function en(n,i){for(var o=0;o<n.length;++o)if(!Vi(n[o],i))return!1;for(var T=0;T<n.length-1;++T)if(hn(n[T],n[T+1],i))return!1;return!0}function Gs(n,i){for(var o=0;o<i.length;o++)if(en(n,i[o]))return!0;return!1}function Mn(n,i,o){for(var T=[],U=0;U<n.length;U++){for(var H=[],lt=0;lt<n[U].length;lt++){var Tt=Ws(n[U][lt],o);ai(i,Tt),H.push(Tt)}T.push(H)}return T}function cs(n,i,o){for(var T=[],U=0;U<n.length;U++){var H=Mn(n[U],i,o);T.push(H)}return T}function zn(n,i,o,T){if(n[0]<o[0]||n[0]>o[2]){var U=.5*T,H=n[0]-o[0]>U?-T:o[0]-n[0]>U?T:0;0===H&&(H=n[0]-o[2]>U?-T:o[2]-n[0]>U?T:0),n[0]+=H}ai(i,n)}function Pn(n,i,o,T){var U=Math.pow(2,T.z)*Pi,H=[T.x*Pi,T.y*Pi],lt=[];if(!n)return lt;for(var Tt=0,bt=n;Tt<bt.length;Tt+=1)for(var Nt=0,$t=bt[Tt];Nt<$t.length;Nt+=1){var le=$t[Nt],de=[le.x+H[0],le.y+H[1]];zn(de,i,o,U),lt.push(de)}return lt}function ds(n,i,o,T){var U=Math.pow(2,T.z)*Pi,H=[T.x*Pi,T.y*Pi],lt=[];if(!n)return lt;for(var Tt=0,bt=n;Tt<bt.length;Tt+=1){for(var Nt=[],$t=0,le=bt[Tt];$t<le.length;$t+=1){var de=le[$t],we=[de.x+H[0],de.y+H[1]];ai(i,we),Nt.push(we)}lt.push(Nt)}if(i[2]-i[0]<=U/2){!function Tn(n){n[0]=n[1]=1/0,n[2]=n[3]=-1/0}(i);for(var t=0,h=lt;t<h.length;t+=1)for(var B=0,j=h[t];B<j.length;B+=1)zn(j[B],i,o,U)}return lt}var Ui=function(i,o){this.type=x,this.geojson=i,this.geometries=o};Ui.parse=function(i,o){if(2!==i.length)return o.error("'within' expression requires exactly one argument, but found "+(i.length-1)+" instead.");if(q(i[1])){var T=i[1];if("FeatureCollection"===T.type)for(var U=0;U<T.features.length;++U){var H=T.features[U].geometry.type;if("Polygon"===H||"MultiPolygon"===H)return new Ui(T,T.features[U].geometry)}else if("Feature"===T.type){var lt=T.geometry.type;if("Polygon"===lt||"MultiPolygon"===lt)return new Ui(T,T.geometry)}else if("Polygon"===T.type||"MultiPolygon"===T.type)return new Ui(T,T)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ui.prototype.evaluate=function(i){if(null!=i.geometry()&&null!=i.canonicalID()){if("Point"===i.geometryType())return function Kn(n,i){var o=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],U=n.canonicalID();if(!U)return!1;if("Polygon"===i.type){var H=Mn(i.coordinates,T,U),lt=Pn(n.geometry(),o,T,U);if(!Xi(o,T))return!1;for(var Tt=0,bt=lt;Tt<bt.length;Tt+=1)if(!Vi(bt[Tt],H))return!1}if("MultiPolygon"===i.type){var Nt=cs(i.coordinates,T,U),$t=Pn(n.geometry(),o,T,U);if(!Xi(o,T))return!1;for(var le=0,de=$t;le<de.length;le+=1)if(!us(de[le],Nt))return!1}return!0}(i,this.geometries);if("LineString"===i.geometryType())return function zs(n,i){var o=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],U=n.canonicalID();if(!U)return!1;if("Polygon"===i.type){var H=Mn(i.coordinates,T,U),lt=ds(n.geometry(),o,T,U);if(!Xi(o,T))return!1;for(var Tt=0,bt=lt;Tt<bt.length;Tt+=1)if(!en(bt[Tt],H))return!1}if("MultiPolygon"===i.type){var Nt=cs(i.coordinates,T,U),$t=ds(n.geometry(),o,T,U);if(!Xi(o,T))return!1;for(var le=0,de=$t;le<de.length;le+=1)if(!Gs(de[le],Nt))return!1}return!0}(i,this.geometries)}return!1},Ui.prototype.eachChild=function(){},Ui.prototype.outputDefined=function(){return!0},Ui.prototype.serialize=function(){return["within",this.geojson]};var kn=Ui;function un(n){if(n instanceof _i){if("get"===n.name&&1===n.args.length)return!1;if("feature-state"===n.name)return!1;if("has"===n.name&&1===n.args.length)return!1;if("properties"===n.name||"geometry-type"===n.name||"id"===n.name)return!1;if(/^filter-/.test(n.name))return!1}if(n instanceof kn)return!1;var i=!0;return n.eachChild(function(o){i&&!un(o)&&(i=!1)}),i}function Xn(n){if(n instanceof _i&&"feature-state"===n.name)return!1;var i=!0;return n.eachChild(function(o){i&&!Xn(o)&&(i=!1)}),i}function Cn(n,i){if(n instanceof _i&&i.indexOf(n.name)>=0)return!1;var o=!0;return n.eachChild(function(T){o&&!Cn(T,i)&&(o=!1)}),o}var Yi=function(i,o){this.type=o.type,this.name=i,this.boundExpression=o};Yi.parse=function(i,o){if(2!==i.length||"string"!=typeof i[1])return o.error("'var' expression requires exactly one string literal argument.");var T=i[1];return o.scope.has(T)?new Yi(T,o.scope.get(T)):o.error('Unknown variable "'+T+'". Make sure "'+T+'" has been bound in an enclosing "let" expression before using it.',1)},Yi.prototype.evaluate=function(i){return this.boundExpression.evaluate(i)},Yi.prototype.eachChild=function(){},Yi.prototype.outputDefined=function(){return!1},Yi.prototype.serialize=function(){return["var",this.name]};var fs=Yi,Hi=function(i,o,T,U,H){void 0===o&&(o=[]),void 0===U&&(U=new Le),void 0===H&&(H=[]),this.registry=i,this.path=o,this.key=o.map(function(lt){return"["+lt+"]"}).join(""),this.scope=U,this.errors=H,this.expectedType=T};Hi.prototype.parse=function(i,o,T,U,H){return void 0===H&&(H={}),o?this.concat(o,T,U)._parse(i,H):this._parse(i,H)},Hi.prototype._parse=function(i,o){function T(Nt,$t,le){return"assert"===le?new Se($t,[Nt]):"coerce"===le?new pi($t,[Nt]):Nt}if((null===i||"string"==typeof i||"boolean"==typeof i||"number"==typeof i)&&(i=["literal",i]),Array.isArray(i)){if(0===i.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var U=i[0];if("string"!=typeof U)return this.error("Expression name must be a string, but found "+typeof U+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var H=this.registry[U];if(H){var lt=H.parse(i,this);if(!lt)return null;if(this.expectedType){var Tt=this.expectedType,bt=lt.type;if("string"!==Tt.kind&&"number"!==Tt.kind&&"boolean"!==Tt.kind&&"object"!==Tt.kind&&"array"!==Tt.kind||"value"!==bt.kind)if("color"!==Tt.kind&&"formatted"!==Tt.kind&&"resolvedImage"!==Tt.kind||"value"!==bt.kind&&"string"!==bt.kind){if(this.checkSubtype(Tt,bt))return null}else lt=T(lt,Tt,o.typeAnnotation||"coerce");else lt=T(lt,Tt,o.typeAnnotation||"assert")}if(!(lt instanceof St)&&"resolvedImage"!==lt.type.kind&&Rn(lt)){var Dt=new vi;try{lt=new St(lt.type,lt.evaluate(Dt))}catch(Nt){return this.error(Nt.message),null}}return lt}return this.error('Unknown expression "'+U+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(typeof i>"u"?"'undefined' value invalid. Use null instead.":"object"==typeof i?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof i+" instead.")},Hi.prototype.concat=function(i,o,T){var U="number"==typeof i?this.path.concat(i):this.path,H=T?this.scope.concat(T):this.scope;return new Hi(this.registry,U,o||null,H,this.errors)},Hi.prototype.error=function(i){for(var o=[],T=arguments.length-1;T-- >0;)o[T]=arguments[T+1];var U=""+this.key+o.map(function(H){return"["+H+"]"}).join("");this.errors.push(new ue(U,i))},Hi.prototype.checkSubtype=function(i,o){var T=oe(i,o);return T&&this.error(T),T};var Ji=Hi;function Rn(n){if(n instanceof fs)return Rn(n.boundExpression);if(n instanceof _i&&"error"===n.name)return!1;if(n instanceof Gi)return!1;if(n instanceof kn)return!1;var i=n instanceof pi||n instanceof Se,o=!0;return n.eachChild(function(T){o=i?o&&Rn(T):o&&T instanceof St}),!!o&&un(n)&&Cn(n,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function gs(n,i){for(var lt,o=n.length-1,T=0,U=o,H=0;T<=U;)if((lt=n[H=Math.floor((T+U)/2)])<=i){if(H===o||i<n[H+1])return H;T=H+1}else{if(!(lt>i))throw new te("Input is not a number.");U=H-1}return 0}var Qi=function(i,o,T){this.type=i,this.input=o,this.labels=[],this.outputs=[];for(var U=0,H=T;U<H.length;U+=1){var lt=H[U],bt=lt[1];this.labels.push(lt[0]),this.outputs.push(bt)}};Qi.parse=function(i,o){if(i.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");var T=o.parse(i[1],1,nt);if(!T)return null;var U=[],H=null;o.expectedType&&"value"!==o.expectedType.kind&&(H=o.expectedType);for(var lt=1;lt<i.length;lt+=2){var Tt=1===lt?-1/0:i[lt],bt=i[lt+1],Dt=lt,Nt=lt+1;if("number"!=typeof Tt)return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Dt);if(U.length&&U[U.length-1][0]>=Tt)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Dt);var $t=o.parse(bt,Nt,H);if(!$t)return null;H=H||$t.type,U.push([Tt,$t])}return new Qi(H,T,U)},Qi.prototype.evaluate=function(i){var o=this.labels,T=this.outputs;if(1===o.length)return T[0].evaluate(i);var U=this.input.evaluate(i);if(U<=o[0])return T[0].evaluate(i);var H=o.length;return U>=o[H-1]?T[H-1].evaluate(i):T[gs(o,U)].evaluate(i)},Qi.prototype.eachChild=function(i){i(this.input);for(var o=0,T=this.outputs;o<T.length;o+=1)i(T[o])},Qi.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})},Qi.prototype.serialize=function(){for(var i=["step",this.input.serialize()],o=0;o<this.labels.length;o++)o>0&&i.push(this.labels[o]),i.push(this.outputs[o].serialize());return i};var Vn=Qi,_s=$i;function $i(n,i,o,T){this.cx=3*n,this.bx=3*(o-n)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(T-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=n,this.p1y=T,this.p2x=o,this.p2y=T}function Ti(n,i,o){return n*(1-o)+i*o}$i.prototype.sampleCurveX=function(n){return((this.ax*n+this.bx)*n+this.cx)*n},$i.prototype.sampleCurveY=function(n){return((this.ay*n+this.by)*n+this.cy)*n},$i.prototype.sampleCurveDerivativeX=function(n){return(3*this.ax*n+2*this.bx)*n+this.cx},$i.prototype.solveCurveX=function(n,i){var o,T,U,H,lt;for(typeof i>"u"&&(i=1e-6),U=n,lt=0;lt<8;lt++){if(H=this.sampleCurveX(U)-n,Math.abs(H)<i)return U;var Tt=this.sampleCurveDerivativeX(U);if(Math.abs(Tt)<1e-6)break;U-=H/Tt}if((U=n)<(o=0))return o;if(U>(T=1))return T;for(;o<T;){if(H=this.sampleCurveX(U),Math.abs(H-n)<i)return U;n>H?o=U:T=U,U=.5*(T-o)+o}return U},$i.prototype.solve=function(n,i){return this.sampleCurveY(this.solveCurveX(n,i))};var Yn=Object.freeze({__proto__:null,number:Ti,color:function Ks(n,i,o){return new fe(Ti(n.r,i.r,o),Ti(n.g,i.g,o),Ti(n.b,i.b,o),Ti(n.a,i.a,o))},array:function ms(n,i,o){return n.map(function(T,U){return Ti(T,i[U],o)})}}),Jn=4/29,ji=6/29,qi=3*ji*ji,ys=ji*ji*ji,Es=Math.PI/180,ks=180/Math.PI;function Qn(n){return n>ys?Math.pow(n,1/3):n/qi+Jn}function On(n){return n>ji?n*n*n:qi*(n-Jn)}function nn(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Sn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Oi(n){var i=Sn(n.r),o=Sn(n.g),T=Sn(n.b),U=Qn((.4124564*i+.3575761*o+.1804375*T)/.95047),H=Qn((.2126729*i+.7151522*o+.072175*T)/1);return{l:116*H-16,a:500*(U-H),b:200*(H-Qn((.0193339*i+.119192*o+.9503041*T)/1.08883)),alpha:n.a}}function xs(n){var i=(n.l+16)/116,o=isNaN(n.a)?i:i+n.a/500,T=isNaN(n.b)?i:i-n.b/200;return i=1*On(i),o=.95047*On(o),T=1.08883*On(T),new fe(nn(3.2404542*o-1.5371385*i-.4985314*T),nn(-.969266*o+1.8760108*i+.041556*T),nn(.0556434*o-.2040259*i+1.0572252*T),n.alpha)}function Ys(n,i,o){var T=i-n;return n+o*(T>180||T<-180?T-360*Math.round(T/360):T)}var ot={forward:Oi,reverse:xs,interpolate:function Xs(n,i,o){return{l:Ti(n.l,i.l,o),a:Ti(n.a,i.a,o),b:Ti(n.b,i.b,o),alpha:Ti(n.alpha,i.alpha,o)}}},dt_forward=function $n(n){var i=Oi(n),o=i.l,T=i.a,U=i.b,H=Math.atan2(U,T)*ks;return{h:H<0?H+360:H,c:Math.sqrt(T*T+U*U),l:o,alpha:n.a}},dt_reverse=function Vs(n){var i=n.h*Es,o=n.c;return xs({l:n.l,a:Math.cos(i)*o,b:Math.sin(i)*o,alpha:n.alpha})},dt_interpolate=function Kt(n,i,o){return{h:Ys(n.h,i.h,o),c:Ti(n.c,i.c,o),l:Ti(n.l,i.l,o),alpha:Ti(n.alpha,i.alpha,o)}},mt=function(i,o,T,U,H){this.type=i,this.operator=o,this.interpolation=T,this.input=U,this.labels=[],this.outputs=[];for(var lt=0,Tt=H;lt<Tt.length;lt+=1){var bt=Tt[lt],Nt=bt[1];this.labels.push(bt[0]),this.outputs.push(Nt)}};function Lt(n,i,o,T){var U=T-o,H=n-o;return 0===U?0:1===i?H/U:(Math.pow(i,H)-1)/(Math.pow(i,U)-1)}mt.interpolationFactor=function(i,o,T,U){var H=0;if("exponential"===i.name)H=Lt(o,i.base,T,U);else if("linear"===i.name)H=Lt(o,1,T,U);else if("cubic-bezier"===i.name){var lt=i.controlPoints;H=new _s(lt[0],lt[1],lt[2],lt[3]).solve(Lt(o,1,T,U))}return H},mt.parse=function(i,o){var T=i[0],U=i[1],H=i[2],lt=i.slice(3);if(!Array.isArray(U)||0===U.length)return o.error("Expected an interpolation type expression.",1);if("linear"===U[0])U={name:"linear"};else if("exponential"===U[0]){var Tt=U[1];if("number"!=typeof Tt)return o.error("Exponential interpolation requires a numeric base.",1,1);U={name:"exponential",base:Tt}}else{if("cubic-bezier"!==U[0])return o.error("Unknown interpolation type "+String(U[0]),1,0);var bt=U.slice(1);if(4!==bt.length||bt.some(function(p){return"number"!=typeof p||p<0||p>1}))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);U={name:"cubic-bezier",controlPoints:bt}}if(i.length-1<4)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(!(H=o.parse(H,2,nt)))return null;var Dt=[],Nt=null;"interpolate-hcl"===T||"interpolate-lab"===T?Nt=W:o.expectedType&&"value"!==o.expectedType.kind&&(Nt=o.expectedType);for(var $t=0;$t<lt.length;$t+=2){var le=lt[$t],de=lt[$t+1],we=$t+3,t=$t+4;if("number"!=typeof le)return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',we);if(Dt.length&&Dt[Dt.length-1][0]>=le)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',we);var h=o.parse(de,t,Nt);if(!h)return null;Nt=Nt||h.type,Dt.push([le,h])}return"number"===Nt.kind||"color"===Nt.kind||"array"===Nt.kind&&"number"===Nt.itemType.kind&&"number"==typeof Nt.N?new mt(Nt,T,U,H,Dt):o.error("Type "+ne(Nt)+" is not interpolatable.")},mt.prototype.evaluate=function(i){var o=this.labels,T=this.outputs;if(1===o.length)return T[0].evaluate(i);var U=this.input.evaluate(i);if(U<=o[0])return T[0].evaluate(i);var H=o.length;if(U>=o[H-1])return T[H-1].evaluate(i);var lt=gs(o,U),Dt=mt.interpolationFactor(this.interpolation,U,o[lt],o[lt+1]),Nt=T[lt].evaluate(i),$t=T[lt+1].evaluate(i);return"interpolate"===this.operator?Yn[this.type.kind.toLowerCase()](Nt,$t,Dt):"interpolate-hcl"===this.operator?dt_reverse(dt_interpolate(dt_forward(Nt),dt_forward($t),Dt)):ot.reverse(ot.interpolate(ot.forward(Nt),ot.forward($t),Dt))},mt.prototype.eachChild=function(i){i(this.input);for(var o=0,T=this.outputs;o<T.length;o+=1)i(T[o])},mt.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})},mt.prototype.serialize=function(){var i;i="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var o=[this.operator,i,this.input.serialize()],T=0;T<this.labels.length;T++)o.push(this.labels[T],this.outputs[T].serialize());return o};var Qt=mt,ee=function(i,o){this.type=i,this.args=o};ee.parse=function(i,o){if(i.length<2)return o.error("Expectected at least one argument.");var T=null,U=o.expectedType;U&&"value"!==U.kind&&(T=U);for(var H=[],lt=0,Tt=i.slice(1);lt<Tt.length;lt+=1){var Dt=o.parse(Tt[lt],1+H.length,T,void 0,{typeAnnotation:"omit"});if(!Dt)return null;T=T||Dt.type,H.push(Dt)}var Nt=U&&H.some(function($t){return oe(U,$t.type)});return new ee(Nt?et:T,H)},ee.prototype.evaluate=function(i){for(var U,o=null,T=0,H=0,lt=this.args;H<lt.length;H+=1){if(T++,(o=lt[H].evaluate(i))&&o instanceof Qe&&!o.available&&(U||(U=o),o=null,T===this.args.length))return U;if(null!==o)break}return o},ee.prototype.eachChild=function(i){this.args.forEach(i)},ee.prototype.outputDefined=function(){return this.args.every(function(i){return i.outputDefined()})},ee.prototype.serialize=function(){var i=["coalesce"];return this.eachChild(function(o){i.push(o.serialize())}),i};var Ee=ee,xe=function(i,o){this.type=o.type,this.bindings=[].concat(i),this.result=o};xe.prototype.evaluate=function(i){return this.result.evaluate(i)},xe.prototype.eachChild=function(i){for(var o=0,T=this.bindings;o<T.length;o+=1)i(T[o][1]);i(this.result)},xe.parse=function(i,o){if(i.length<4)return o.error("Expected at least 3 arguments, but found "+(i.length-1)+" instead.");for(var T=[],U=1;U<i.length-1;U+=2){var H=i[U];if("string"!=typeof H)return o.error("Expected string, but found "+typeof H+" instead.",U);if(/[^a-zA-Z0-9_]/.test(H))return o.error("Variable names must contain only alphanumeric characters or '_'.",U);var lt=o.parse(i[U+1],U+1);if(!lt)return null;T.push([H,lt])}var Tt=o.parse(i[i.length-1],i.length-1,o.expectedType,T);return Tt?new xe(T,Tt):null},xe.prototype.outputDefined=function(){return this.result.outputDefined()},xe.prototype.serialize=function(){for(var i=["let"],o=0,T=this.bindings;o<T.length;o+=1){var U=T[o];i.push(U[0],U[1].serialize())}return i.push(this.result.serialize()),i};var be=xe,je=function(i,o,T){this.type=i,this.index=o,this.input=T};je.parse=function(i,o){if(3!==i.length)return o.error("Expected 2 arguments, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1,nt),U=o.parse(i[2],2,Jt(o.expectedType||et));return T&&U?new je(U.type.itemType,T,U):null},je.prototype.evaluate=function(i){var o=this.index.evaluate(i),T=this.input.evaluate(i);if(o<0)throw new te("Array index out of bounds: "+o+" < 0.");if(o>=T.length)throw new te("Array index out of bounds: "+o+" > "+(T.length-1)+".");if(o!==Math.floor(o))throw new te("Array index must be an integer, but found "+o+" instead.");return T[o]},je.prototype.eachChild=function(i){i(this.index),i(this.input)},je.prototype.outputDefined=function(){return!1},je.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var $e=je,Ye=function(i,o){this.type=x,this.needle=i,this.haystack=o};Ye.parse=function(i,o){if(3!==i.length)return o.error("Expected 2 arguments, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1,et),U=o.parse(i[2],2,et);return T&&U?ie(T.type,[x,Q,nt,Me,et])?new Ye(T,U):o.error("Expected first argument to be of type boolean, string, number or null, but found "+ne(T.type)+" instead"):null},Ye.prototype.evaluate=function(i){var o=this.needle.evaluate(i),T=this.haystack.evaluate(i);if(null==T)return!1;if(!Ge(o,["boolean","string","number","null"]))throw new te("Expected first argument to be of type boolean, string, number or null, but found "+ne(J(o))+" instead.");if(!Ge(T,["string","array"]))throw new te("Expected second argument to be of type array or string, but found "+ne(J(T))+" instead.");return T.indexOf(o)>=0},Ye.prototype.eachChild=function(i){i(this.needle),i(this.haystack)},Ye.prototype.outputDefined=function(){return!0},Ye.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var li=Ye,ti=function(i,o,T){this.type=nt,this.needle=i,this.haystack=o,this.fromIndex=T};ti.parse=function(i,o){if(i.length<=2||i.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1,et),U=o.parse(i[2],2,et);if(!T||!U)return null;if(!ie(T.type,[x,Q,nt,Me,et]))return o.error("Expected first argument to be of type boolean, string, number or null, but found "+ne(T.type)+" instead");if(4===i.length){var H=o.parse(i[3],3,nt);return H?new ti(T,U,H):null}return new ti(T,U)},ti.prototype.evaluate=function(i){var o=this.needle.evaluate(i),T=this.haystack.evaluate(i);if(!Ge(o,["boolean","string","number","null"]))throw new te("Expected first argument to be of type boolean, string, number or null, but found "+ne(J(o))+" instead.");if(!Ge(T,["string","array"]))throw new te("Expected second argument to be of type array or string, but found "+ne(J(T))+" instead.");if(this.fromIndex){var U=this.fromIndex.evaluate(i);return T.indexOf(o,U)}return T.indexOf(o)},ti.prototype.eachChild=function(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)},ti.prototype.outputDefined=function(){return!1},ti.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Bi=ti,ii=function(i,o,T,U,H,lt){this.inputType=i,this.type=o,this.input=T,this.cases=U,this.outputs=H,this.otherwise=lt};ii.parse=function(i,o){if(i.length<5)return o.error("Expected at least 4 arguments, but found only "+(i.length-1)+".");if(i.length%2!=1)return o.error("Expected an even number of arguments.");var T,U;o.expectedType&&"value"!==o.expectedType.kind&&(U=o.expectedType);for(var H={},lt=[],Tt=2;Tt<i.length-1;Tt+=2){var bt=i[Tt],Dt=i[Tt+1];Array.isArray(bt)||(bt=[bt]);var Nt=o.concat(Tt);if(0===bt.length)return Nt.error("Expected at least one branch label.");for(var $t=0,le=bt;$t<le.length;$t+=1){var de=le[$t];if("number"!=typeof de&&"string"!=typeof de)return Nt.error("Branch labels must be numbers or strings.");if("number"==typeof de&&Math.abs(de)>Number.MAX_SAFE_INTEGER)return Nt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof de&&Math.floor(de)!==de)return Nt.error("Numeric branch labels must be integer values.");if(T){if(Nt.checkSubtype(T,J(de)))return null}else T=J(de);if(typeof H[String(de)]<"u")return Nt.error("Branch labels must be unique.");H[String(de)]=lt.length}var we=o.parse(Dt,Tt,U);if(!we)return null;U=U||we.type,lt.push(we)}var t=o.parse(i[1],1,et);if(!t)return null;var h=o.parse(i[i.length-1],i.length-1,U);return!h||"value"!==t.type.kind&&o.concat(1).checkSubtype(T,t.type)?null:new ii(T,U,t,H,lt,h)},ii.prototype.evaluate=function(i){var o=this.input.evaluate(i);return(J(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(i)},ii.prototype.eachChild=function(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)},ii.prototype.outputDefined=function(){return this.outputs.every(function(i){return i.outputDefined()})&&this.otherwise.outputDefined()},ii.prototype.serialize=function(){for(var i=this,o=["match",this.input.serialize()],U=[],H={},lt=0,Tt=Object.keys(this.cases).sort();lt<Tt.length;lt+=1){var bt=Tt[lt];void 0===(Dt=H[this.cases[bt]])?(H[this.cases[bt]]=U.length,U.push([this.cases[bt],[bt]])):U[Dt][1].push(bt)}for(var Nt=function(t){return"number"===i.inputType.kind?Number(t):t},$t=0,le=U;$t<le.length;$t+=1){var de=le[$t],Dt=de[0],we=de[1];o.push(1===we.length?Nt(we[0]):we.map(Nt)),o.push(this.outputs[outputIndex$1].serialize())}return o.push(this.otherwise.serialize()),o};var mi=ii,fi=function(i,o,T){this.type=i,this.branches=o,this.otherwise=T};fi.parse=function(i,o){if(i.length<4)return o.error("Expected at least 3 arguments, but found only "+(i.length-1)+".");if(i.length%2!=0)return o.error("Expected an odd number of arguments.");var T;o.expectedType&&"value"!==o.expectedType.kind&&(T=o.expectedType);for(var U=[],H=1;H<i.length-1;H+=2){var lt=o.parse(i[H],H,x);if(!lt)return null;var Tt=o.parse(i[H+1],H+1,T);if(!Tt)return null;U.push([lt,Tt]),T=T||Tt.type}var bt=o.parse(i[i.length-1],i.length-1,T);return bt?new fi(T,U,bt):null},fi.prototype.evaluate=function(i){for(var o=0,T=this.branches;o<T.length;o+=1){var U=T[o],lt=U[1];if(U[0].evaluate(i))return lt.evaluate(i)}return this.otherwise.evaluate(i)},fi.prototype.eachChild=function(i){for(var o=0,T=this.branches;o<T.length;o+=1){var U=T[o],lt=U[1];i(U[0]),i(lt)}i(this.otherwise)},fi.prototype.outputDefined=function(){return this.branches.every(function(i){return i[1].outputDefined()})&&this.otherwise.outputDefined()},fi.prototype.serialize=function(){var i=["case"];return this.eachChild(function(o){i.push(o.serialize())}),i};var bi=fi,hi=function(i,o,T,U){this.type=i,this.input=o,this.beginIndex=T,this.endIndex=U};hi.parse=function(i,o){if(i.length<=2||i.length>=5)return o.error("Expected 3 or 4 arguments, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1,et),U=o.parse(i[2],2,nt);if(!T||!U)return null;if(!ie(T.type,[Jt(et),Q,et]))return o.error("Expected first argument to be of type array or string, but found "+ne(T.type)+" instead");if(4===i.length){var H=o.parse(i[3],3,nt);return H?new hi(T.type,T,U,H):null}return new hi(T.type,T,U)},hi.prototype.evaluate=function(i){var o=this.input.evaluate(i),T=this.beginIndex.evaluate(i);if(!Ge(o,["string","array"]))throw new te("Expected first argument to be of type array or string, but found "+ne(J(o))+" instead.");if(this.endIndex){var U=this.endIndex.evaluate(i);return o.slice(T,U)}return o.slice(T)},hi.prototype.eachChild=function(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)},hi.prototype.outputDefined=function(){return!1},hi.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var cn=hi;function zi(n,i){return"=="===n||"!="===n?"boolean"===i.kind||"string"===i.kind||"number"===i.kind||"null"===i.kind||"value"===i.kind:"string"===i.kind||"number"===i.kind||"value"===i.kind}function In(n,i,o,T){return 0===T.compare(i,o)}function bn(n,i,o){var T="=="!==n&&"!="!==n;return function(){function U(H,lt,Tt){this.type=x,this.lhs=H,this.rhs=lt,this.collator=Tt,this.hasUntypedArgument="value"===H.type.kind||"value"===lt.type.kind}return U.parse=function(lt,Tt){if(3!==lt.length&&4!==lt.length)return Tt.error("Expected two or three arguments.");var bt=lt[0],Dt=Tt.parse(lt[1],1,et);if(!Dt)return null;if(!zi(bt,Dt.type))return Tt.concat(1).error('"'+bt+"\" comparisons are not supported for type '"+ne(Dt.type)+"'.");var Nt=Tt.parse(lt[2],2,et);if(!Nt)return null;if(!zi(bt,Nt.type))return Tt.concat(2).error('"'+bt+"\" comparisons are not supported for type '"+ne(Nt.type)+"'.");if(Dt.type.kind!==Nt.type.kind&&"value"!==Dt.type.kind&&"value"!==Nt.type.kind)return Tt.error("Cannot compare types '"+ne(Dt.type)+"' and '"+ne(Nt.type)+"'.");T&&("value"===Dt.type.kind&&"value"!==Nt.type.kind?Dt=new Se(Nt.type,[Dt]):"value"!==Dt.type.kind&&"value"===Nt.type.kind&&(Nt=new Se(Dt.type,[Nt])));var $t=null;if(4===lt.length){if("string"!==Dt.type.kind&&"string"!==Nt.type.kind&&"value"!==Dt.type.kind&&"value"!==Nt.type.kind)return Tt.error("Cannot use collator to compare non-string types.");if(!($t=Tt.parse(lt[3],3,Et)))return null}return new U(Dt,Nt,$t)},U.prototype.evaluate=function(lt){var Tt=this.lhs.evaluate(lt),bt=this.rhs.evaluate(lt);if(T&&this.hasUntypedArgument){var Dt=J(Tt),Nt=J(bt);if(Dt.kind!==Nt.kind||"string"!==Dt.kind&&"number"!==Dt.kind)throw new te('Expected arguments for "'+n+'" to be (string, string) or (number, number), but found ('+Dt.kind+", "+Nt.kind+") instead.")}if(this.collator&&!T&&this.hasUntypedArgument){var $t=J(Tt),le=J(bt);if("string"!==$t.kind||"string"!==le.kind)return i(lt,Tt,bt)}return this.collator?o(lt,Tt,bt,this.collator.evaluate(lt)):i(lt,Tt,bt)},U.prototype.eachChild=function(lt){lt(this.lhs),lt(this.rhs),this.collator&&lt(this.collator)},U.prototype.outputDefined=function(){return!0},U.prototype.serialize=function(){var lt=[n];return this.eachChild(function(Tt){lt.push(Tt.serialize())}),lt},U}()}var va=bn("==",function wi(n,i,o){return i===o},In),ya=bn("!=",function Ms(n,i,o){return i!==o},function Hs(n,i,o,T){return!In(0,i,o,T)}),Ea=bn("<",function qn(n,i,o){return i<o},function _a(n,i,o,T){return T.compare(i,o)<0}),xa=bn(">",function dn(n,i,o){return i>o},function ma(n,i,o,T){return T.compare(i,o)>0}),Ma=bn("<=",function Ts(n,i,o){return i<=o},function pa(n,i,o,T){return T.compare(i,o)<=0}),Ta=bn(">=",function Ps(n,i,o){return i>=o},function An(n,i,o,T){return T.compare(i,o)>=0}),fn=function(i,o,T,U,H,lt){this.type=Q,this.number=i,this.locale=o,this.currency=T,this.unit=U,this.minFractionDigits=H,this.maxFractionDigits=lt};fn.parse=function(i,o){if(3!==i.length)return o.error("Expected two arguments.");var T=o.parse(i[1],1,nt);if(!T)return null;var U=i[2];if("object"!=typeof U||Array.isArray(U))return o.error("NumberFormat options argument must be an object.");var H=null;if(U.locale&&!(H=o.parse(U.locale,1,Q)))return null;var lt=null;if(U.currency&&!(lt=o.parse(U.currency,1,Q)))return null;var Tt=null;if(U.unit&&!(Tt=o.parse(U.unit,1,Q)))return null;var bt=null;if(U["min-fraction-digits"]&&!(bt=o.parse(U["min-fraction-digits"],1,nt)))return null;var Dt=null;return U["max-fraction-digits"]&&!(Dt=o.parse(U["max-fraction-digits"],1,nt))?null:new fn(T,H,lt,Tt,bt,Dt)},fn.prototype.evaluate=function(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))},fn.prototype.eachChild=function(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)},fn.prototype.outputDefined=function(){return!1},fn.prototype.serialize=function(){var i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]};var Pa=fn,gn=function(i){this.type=nt,this.input=i};gn.parse=function(i,o){if(2!==i.length)return o.error("Expected 1 argument, but found "+(i.length-1)+" instead.");var T=o.parse(i[1],1);return T?"array"!==T.type.kind&&"string"!==T.type.kind&&"value"!==T.type.kind?o.error("Expected argument of type string or array, but found "+ne(T.type)+" instead."):new gn(T):null},gn.prototype.evaluate=function(i){var o=this.input.evaluate(i);if("string"==typeof o)return o.length;if(Array.isArray(o))return o.length;throw new te("Expected value to be of type string or array, but found "+ne(J(o))+" instead.")},gn.prototype.eachChild=function(i){i(this.input)},gn.prototype.outputDefined=function(){return!1},gn.prototype.serialize=function(){var i=["length"];return this.eachChild(function(o){i.push(o.serialize())}),i};var Rr={"==":va,"!=":ya,">":xa,"<":Ea,">=":Ta,"<=":Ma,array:Se,at:$e,boolean:Se,case:bi,coalesce:Ee,collator:Gi,format:Be,image:ni,in:li,"index-of":Bi,interpolate:Qt,"interpolate-hcl":Qt,"interpolate-lab":Qt,length:gn,let:be,literal:St,match:mi,number:Se,"number-format":Pa,object:Se,slice:cn,step:Vn,string:Se,"to-boolean":pi,"to-color":pi,"to-number":pi,"to-string":pi,var:fs,within:kn};function Or(n,i){var o=i[0],T=i[1],U=i[2],H=i[3];o=o.evaluate(n),T=T.evaluate(n),U=U.evaluate(n);var lt=H?H.evaluate(n):1,Tt=ei(o,T,U,lt);if(Tt)throw new te(Tt);return new fe(o/255*lt,T/255*lt,U/255*lt,lt)}function Sr(n,i){return n in i}function Js(n,i){var o=i[n];return typeof o>"u"?null:o}function di(n){return{type:n}}_i.register(Rr,{error:[{kind:"error"},[Q],function(n,i){throw new te(i[0].evaluate(n))}],typeof:[Q,[et],function(n,i){return ne(J(i[0].evaluate(n)))}],"to-rgba":[Jt(nt,4),[W],function(n,i){return i[0].evaluate(n).toArray()}],rgb:[W,[nt,nt,nt],Or],rgba:[W,[nt,nt,nt,nt],Or],has:{type:x,overloads:[[[Q],function(n,i){return Sr(i[0].evaluate(n),n.properties())}],[[Q,tt],function(n,i){var T=i[1];return Sr(i[0].evaluate(n),T.evaluate(n))}]]},get:{type:et,overloads:[[[Q],function(n,i){return Js(i[0].evaluate(n),n.properties())}],[[Q,tt],function(n,i){var T=i[1];return Js(i[0].evaluate(n),T.evaluate(n))}]]},"feature-state":[et,[Q],function(n,i){return Js(i[0].evaluate(n),n.featureState||{})}],properties:[tt,[],function(n){return n.properties()}],"geometry-type":[Q,[],function(n){return n.geometryType()}],id:[et,[],function(n){return n.id()}],zoom:[nt,[],function(n){return n.globals.zoom}],pitch:[nt,[],function(n){return n.globals.pitch||0}],"distance-from-center":[nt,[],function(n){return n.distanceFromCenter()}],"heatmap-density":[nt,[],function(n){return n.globals.heatmapDensity||0}],"line-progress":[nt,[],function(n){return n.globals.lineProgress||0}],"sky-radial-progress":[nt,[],function(n){return n.globals.skyRadialProgress||0}],accumulated:[et,[],function(n){return void 0===n.globals.accumulated?null:n.globals.accumulated}],"+":[nt,di(nt),function(n,i){for(var o=0,T=0,U=i;T<U.length;T+=1)o+=U[T].evaluate(n);return o}],"*":[nt,di(nt),function(n,i){for(var o=1,T=0,U=i;T<U.length;T+=1)o*=U[T].evaluate(n);return o}],"-":{type:nt,overloads:[[[nt,nt],function(n,i){var T=i[1];return i[0].evaluate(n)-T.evaluate(n)}],[[nt],function(n,i){return-i[0].evaluate(n)}]]},"/":[nt,[nt,nt],function(n,i){var T=i[1];return i[0].evaluate(n)/T.evaluate(n)}],"%":[nt,[nt,nt],function(n,i){var T=i[1];return i[0].evaluate(n)%T.evaluate(n)}],ln2:[nt,[],function(){return Math.LN2}],pi:[nt,[],function(){return Math.PI}],e:[nt,[],function(){return Math.E}],"^":[nt,[nt,nt],function(n,i){var T=i[1];return Math.pow(i[0].evaluate(n),T.evaluate(n))}],sqrt:[nt,[nt],function(n,i){return Math.sqrt(i[0].evaluate(n))}],log10:[nt,[nt],function(n,i){return Math.log(i[0].evaluate(n))/Math.LN10}],ln:[nt,[nt],function(n,i){return Math.log(i[0].evaluate(n))}],log2:[nt,[nt],function(n,i){return Math.log(i[0].evaluate(n))/Math.LN2}],sin:[nt,[nt],function(n,i){return Math.sin(i[0].evaluate(n))}],cos:[nt,[nt],function(n,i){return Math.cos(i[0].evaluate(n))}],tan:[nt,[nt],function(n,i){return Math.tan(i[0].evaluate(n))}],asin:[nt,[nt],function(n,i){return Math.asin(i[0].evaluate(n))}],acos:[nt,[nt],function(n,i){return Math.acos(i[0].evaluate(n))}],atan:[nt,[nt],function(n,i){return Math.atan(i[0].evaluate(n))}],min:[nt,di(nt),function(n,i){return Math.min.apply(Math,i.map(function(o){return o.evaluate(n)}))}],max:[nt,di(nt),function(n,i){return Math.max.apply(Math,i.map(function(o){return o.evaluate(n)}))}],abs:[nt,[nt],function(n,i){return Math.abs(i[0].evaluate(n))}],round:[nt,[nt],function(n,i){var T=i[0].evaluate(n);return T<0?-Math.round(-T):Math.round(T)}],floor:[nt,[nt],function(n,i){return Math.floor(i[0].evaluate(n))}],ceil:[nt,[nt],function(n,i){return Math.ceil(i[0].evaluate(n))}],"filter-==":[x,[Q,et],function(n,i){var o=i[0],T=i[1];return n.properties()[o.value]===T.value}],"filter-id-==":[x,[et],function(n,i){var o=i[0];return n.id()===o.value}],"filter-type-==":[x,[Q],function(n,i){var o=i[0];return n.geometryType()===o.value}],"filter-<":[x,[Q,et],function(n,i){var o=i[0],T=i[1],U=n.properties()[o.value],H=T.value;return typeof U==typeof H&&U<H}],"filter-id-<":[x,[et],function(n,i){var o=i[0],T=n.id(),U=o.value;return typeof T==typeof U&&T<U}],"filter->":[x,[Q,et],function(n,i){var o=i[0],T=i[1],U=n.properties()[o.value],H=T.value;return typeof U==typeof H&&U>H}],"filter-id->":[x,[et],function(n,i){var o=i[0],T=n.id(),U=o.value;return typeof T==typeof U&&T>U}],"filter-<=":[x,[Q,et],function(n,i){var o=i[0],T=i[1],U=n.properties()[o.value],H=T.value;return typeof U==typeof H&&U<=H}],"filter-id-<=":[x,[et],function(n,i){var o=i[0],T=n.id(),U=o.value;return typeof T==typeof U&&T<=U}],"filter->=":[x,[Q,et],function(n,i){var o=i[0],T=i[1],U=n.properties()[o.value],H=T.value;return typeof U==typeof H&&U>=H}],"filter-id->=":[x,[et],function(n,i){var o=i[0],T=n.id(),U=o.value;return typeof T==typeof U&&T>=U}],"filter-has":[x,[et],function(n,i){return i[0].value in n.properties()}],"filter-has-id":[x,[],function(n){return null!==n.id()&&void 0!==n.id()}],"filter-type-in":[x,[Jt(Q)],function(n,i){return i[0].value.indexOf(n.geometryType())>=0}],"filter-id-in":[x,[Jt(et)],function(n,i){return i[0].value.indexOf(n.id())>=0}],"filter-in-small":[x,[Q,Jt(et)],function(n,i){var o=i[0];return i[1].value.indexOf(n.properties()[o.value])>=0}],"filter-in-large":[x,[Q,Jt(et)],function(n,i){var o=i[0],T=i[1];return function Ra(n,i,o,T){for(;o<=T;){var U=o+T>>1;if(i[U]===n)return!0;i[U]>n?T=U-1:o=U+1}return!1}(n.properties()[o.value],T.value,0,T.value.length-1)}],all:{type:x,overloads:[[[x,x],function(n,i){var T=i[1];return i[0].evaluate(n)&&T.evaluate(n)}],[di(x),function(n,i){for(var o=0,T=i;o<T.length;o+=1)if(!T[o].evaluate(n))return!1;return!0}]]},any:{type:x,overloads:[[[x,x],function(n,i){var T=i[1];return i[0].evaluate(n)||T.evaluate(n)}],[di(x),function(n,i){for(var o=0,T=i;o<T.length;o+=1)if(T[o].evaluate(n))return!0;return!1}]]},"!":[x,[x],function(n,i){return!i[0].evaluate(n)}],"is-supported-script":[x,[Q],function(n,i){var T=n.globals&&n.globals.isSupportedScript;return!T||T(i[0].evaluate(n))}],upcase:[Q,[Q],function(n,i){return i[0].evaluate(n).toUpperCase()}],downcase:[Q,[Q],function(n,i){return i[0].evaluate(n).toLowerCase()}],concat:[Q,di(et),function(n,i){return i.map(function(o){return _t(o.evaluate(n))}).join("")}],"resolved-locale":[Q,[Et],function(n,i){return i[0].evaluate(n).resolvedLocale()}]});var Ln=Rr;function _n(n){return{result:"success",value:n}}function Ki(n){return{result:"error",value:n}}function es(n){return"object"==typeof n&&null!==n&&!Array.isArray(n)}var Qs=function(i,o){this.expression=i,this._warningHistory={},this._evaluator=new vi,this._defaultValue=o?function Ia(n){return"color"===n.type&&(es(n.default)||Array.isArray(n.default))?new fe(0,0,0,0):"color"===n.type?fe.parse(n.default)||null:void 0===n.default?null:n.default}(o):null,this._enumValues=o&&"enum"===o.type?o.values:null};function $s(n,i){var o=new Ji(Ln,[],i?function Sa(n){var i={color:W,string:Q,number:nt,enum:Q,boolean:x,formatted:It,resolvedImage:wt};return"array"===n.type?Jt(i[n.value]||et,n.length):i[n.type]}(i):void 0),T=o.parse(n,void 0,void 0,void 0,i&&"string"===i.type?{typeAnnotation:"coerce"}:void 0);return T?_n(new Qs(T,i)):Ki(o.errors)}Qs.prototype.evaluateWithoutErrorHandling=function(i,o,T,U,H,lt,Tt,bt){return this._evaluator.globals=i,this._evaluator.feature=o,this._evaluator.featureState=T,this._evaluator.canonical=U||null,this._evaluator.availableImages=H||null,this._evaluator.formattedSection=lt,this._evaluator.featureTileCoord=Tt||null,this._evaluator.featureDistanceData=bt||null,this.expression.evaluate(this._evaluator)},Qs.prototype.evaluate=function(i,o,T,U,H,lt,Tt,bt){this._evaluator.globals=i,this._evaluator.feature=o||null,this._evaluator.featureState=T||null,this._evaluator.canonical=U||null,this._evaluator.availableImages=H||null,this._evaluator.formattedSection=lt||null,this._evaluator.featureTileCoord=Tt||null,this._evaluator.featureDistanceData=bt||null;try{var Dt=this.expression.evaluate(this._evaluator);if(null==Dt||"number"==typeof Dt&&Dt!=Dt)return this._defaultValue;if(this._enumValues&&!(Dt in this._enumValues))throw new te("Expected value to be one of "+Object.keys(this._enumValues).map(function(Nt){return JSON.stringify(Nt)}).join(", ")+", but found "+JSON.stringify(Dt)+" instead.");return Dt}catch(Nt){return this._warningHistory[Nt.message]||(this._warningHistory[Nt.message]=!0,typeof console<"u"&&console.warn(Nt.message)),this._defaultValue}};var Cs=function(i,o){this.kind=i,this._styleExpression=o,this.isStateDependent="constant"!==i&&!Xn(o.expression)};Cs.prototype.evaluateWithoutErrorHandling=function(i,o,T,U,H,lt){return this._styleExpression.evaluateWithoutErrorHandling(i,o,T,U,H,lt)},Cs.prototype.evaluate=function(i,o,T,U,H,lt){return this._styleExpression.evaluate(i,o,T,U,H,lt)};var is=function(i,o,T,U){this.kind=i,this.zoomStops=T,this._styleExpression=o,this.isStateDependent="camera"!==i&&!Xn(o.expression),this.interpolationType=U};function sn(n,i){if("error"===(n=$s(n,i)).result)return n;var o=n.value.expression,T=un(o);if(!T&&!function ts(n){return"data-driven"===n["property-type"]}(i))return Ki([new ue("","data expressions not supported")]);var U=Cn(o,["zoom","pitch","distance-from-center"]);if(!U&&!function wn(n){return!!n.expression&&n.expression.parameters.indexOf("zoom")>-1}(i))return Ki([new ue("","zoom expressions not supported")]);var H=Rs(o);return H||U?H instanceof ue?Ki([H]):H instanceof Qt&&!function Dn(n){return!!n.expression&&n.expression.interpolated}(i)?Ki([new ue("",'"interpolate" expressions cannot be used with this property')]):_n(H?new is(T?"camera":"composite",n.value,H.labels,H instanceof Qt?H.interpolation:void 0):new Cs(T?"constant":"source",n.value)):Ki([new ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function Rs(n){var i=null;if(n instanceof be)i=Rs(n.result);else if(n instanceof Ee)for(var o=0,T=n.args;o<T.length&&!(i=Rs(T[o]));o+=1);else(n instanceof Vn||n instanceof Qt)&&n.input instanceof _i&&"zoom"===n.input.name&&(i=n);return i instanceof ue||n.eachChild(function(H){var lt=Rs(H);lt instanceof ue?i=lt:!i&&lt?i=new ue("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&lt&&i!==lt&&(i=new ue("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function qs(n){if(Array.isArray(n))return n.map(qs);if(n instanceof Object&&!(n instanceof Number||n instanceof String||n instanceof Boolean)){var i={};for(var o in n)i[o]=qs(n[o]);return i}return function Aa(n){return n instanceof Number||n instanceof String||n instanceof Boolean?n.valueOf():n}(n)}is.prototype.evaluateWithoutErrorHandling=function(i,o,T,U,H,lt){return this._styleExpression.evaluateWithoutErrorHandling(i,o,T,U,H,lt)},is.prototype.evaluate=function(i,o,T,U,H,lt){return this._styleExpression.evaluate(i,o,T,U,H,lt)},is.prototype.interpolationFactor=function(i,o,T){return this.interpolationType?Qt.interpolationFactor(this.interpolationType,i,o,T):0};var Ir={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function Ar(n){if(!0===n||!1===n)return!0;if(!Array.isArray(n)||0===n.length)return!1;switch(n[0]){case"has":return n.length>=2&&"$id"!==n[1]&&"$type"!==n[1];case"in":return n.length>=3&&("string"!=typeof n[1]||Array.isArray(n[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==n.length||Array.isArray(n[1])||Array.isArray(n[2]);case"any":case"all":for(var i=0,o=n.slice(1);i<o.length;i+=1){var T=o[i];if(!Ar(T)&&"boolean"!=typeof T)return!1}return!0;default:return!0}}function ba(n,i){if(void 0===i&&(i="fill"),null==n)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};Ar(n)||(n=Wi(n));var o=n,T=!0;try{T=function La(n){if(!Fn(n))return n;var i=qs(n);return Lr(i),i=br(i)}(o)}catch{console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(o,null,2)+"\n        ")}var lt,U=Ir["filter_"+i],H=$s(T,U);if("error"===H.result)throw new Error(H.value.map(function($t){return $t.key+": "+$t.message}).join(", "));lt=function($t,le,de){return H.value.evaluate($t,le,{},de)};var Tt=null,bt=null;if(T!==o){var Dt=$s(o,U);if("error"===Dt.result)throw new Error(Dt.value.map(function($t){return $t.key+": "+$t.message}).join(", "));Tt=function($t,le,de,we,t){return Dt.value.evaluate($t,le,{},de,void 0,void 0,we,t)},bt=!un(Dt.value.expression)}return{filter:lt,dynamicFilter:Tt||void 0,needGeometry:wr(T),needFeature:!!bt}}function br(n){if(!Array.isArray(n))return n;var i=function Fa(n){if(Da.has(n[0]))for(var i=1;i<n.length;i++)if(Fn(n[i]))return!0;return n}(n);return!0===i?i:i.map(function(o){return br(o)})}function Lr(n){var i=!1,o=[];if("case"===n[0]){for(var T=1;T<n.length-1;T+=2)i=i||Fn(n[T]),o.push(n[T+1]);o.push(n[n.length-1])}else if("match"===n[0]){i=i||Fn(n[1]);for(var U=2;U<n.length-1;U+=2)o.push(n[U+1]);o.push(n[n.length-1])}else if("step"===n[0]){i=i||Fn(n[1]);for(var H=1;H<n.length-1;H+=2)o.push(n[H+1])}i&&(n.length=0,n.push.apply(n,["any"].concat(o)));for(var lt=1;lt<n.length;lt++)Lr(n[lt])}function Fn(n){if(!Array.isArray(n))return!1;if(function wa(n){return"pitch"===n||"distance-from-center"===n}(n[0]))return!0;for(var i=1;i<n.length;i++)if(Fn(n[i]))return!0;return!1}var Da=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Na(n,i){return n<i?-1:n>i?1:0}function wr(n){if(!Array.isArray(n))return!1;if("within"===n[0])return!0;for(var i=1;i<n.length;i++)if(wr(n[i]))return!0;return!1}function Wi(n){if(!n)return!0;var i=n[0];return n.length<=1?"any"!==i:"=="===i?tr(n[1],n[2],"=="):"!="===i?Os(tr(n[1],n[2],"==")):"<"===i||">"===i||"<="===i||">="===i?tr(n[1],n[2],i):"any"===i?function Za(n){return["any"].concat(n.map(Wi))}(n.slice(1)):"all"===i?["all"].concat(n.slice(1).map(Wi)):"none"===i?["all"].concat(n.slice(1).map(Wi).map(Os)):"in"===i?Dr(n[1],n.slice(2)):"!in"===i?Os(Dr(n[1],n.slice(2))):"has"===i?Fr(n[1]):"!has"===i?Os(Fr(n[1])):"within"!==i||n}function tr(n,i,o){switch(n){case"$type":return["filter-type-"+o,i];case"$id":return["filter-id-"+o,i];default:return["filter-"+o,n,i]}}function Dr(n,i){if(0===i.length)return!1;switch(n){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(function(o){return typeof o!=typeof i[0]})?["filter-in-large",n,["literal",i.sort(Na)]]:["filter-in-small",n,["literal",i]]}}function Fr(n){switch(n){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",n]}}function Os(n){return["!",n]}var Ua=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ja(n,i){var o={};for(var T in n)"ref"!==T&&(o[T]=n[T]);return Ua.forEach(function(U){U in i&&(o[U]=i[U])}),o}var Nr={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},Zr=/(italic|oblique)$/i,Ur={},er=function(n,i,o){var T=Ur[n];if(!T){Array.isArray(n)||(n=[n]);for(var U=400,H="normal",lt=[],Dt=0,Nt=n.length;Dt<Nt;++Dt){var le=n[Dt].split(" "),de=le[le.length-1].toLowerCase();for(var we in"normal"==de||"italic"==de||"oblique"==de?(H=de,le.pop(),de=le[le.length-1].toLowerCase()):Zr.test(de)&&(de=de.replace(Zr,""),H=le[le.length-1].replace(de,"")),Nr){var t=le.length>1?le[le.length-2].toLowerCase():"";if(de==we||de==we.replace("-","")||t+"-"+de==we){U=Nr[we],le.pop(),t&&we.startsWith(t)&&le.pop();break}}"number"==typeof de&&(U=de);var h=le.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==h.indexOf(" ")&&(h='"'+h+'"'),lt.push(h)}T=Ur[n]=[H,U,lt]}return T[0]+" "+T[1]+" "+i+"px"+(o?"/"+o:"")+" "+T[2]},jr="https://api.mapbox.com";function ir(n){return 0!==n.indexOf("mapbox://")?"":n.slice(9)}function Ss(n,i){var o=ir(n);if(!o)return decodeURI(new URL(n,location.href).href);if(0!==o.indexOf("styles/"))throw new Error("unexpected style url: "+n);var U=o.slice(7);return jr+"/styles/v1/"+U+"?&access_token="+i}function Is(n,i,o,T){var U=new URL(n,T),H=ir(n);return H?"mapbox.satellite"===H?"https://api.mapbox.com/v4/"+H+"/{z}/{x}/{y}"+(window.devicePixelRatio>=1.5?"@2x":"")+".webp?access_token="+i:"https://{a-d}.tiles.mapbox.com/v4/"+H+"/{z}/{x}/{y}.vector.pbf?access_token="+i:(i&&U.searchParams.set(o,i),decodeURI(U.href))}var Br=0,Ga={},za={};function rr(n){return n*Math.PI/180}var ki=function(){for(var n=[],i=78271.51696402048;n.length<=24;i/=2)n.push(i);return n}();function Wr(n,i){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(n,i);var o=document.createElement("canvas");return o.width=n,o.height=i,o}function ar(n,i){for(var o=0,T=i.length;o<T;++o)if(i[o]<n&&o+1<T){var H=i[o]/i[o+1];return o+Math.log(i[o]/n)/Math.log(H)}return T-1}var Nn={};function or(n,i,o,T){if(void 0===o&&(o={}),i in Nn)return T&&(T.request=Nn[i][0]),Nn[i][1];var U=o.transformRequest&&o.transformRequest(i,n)||new Request(i);U.headers.get("Accept")||U.headers.set("Accept","application/json"),T&&(T.request=U);var H=fetch(U).then(function(lt){return delete Nn[i],lt.ok?lt.json():Promise.reject(new Error("Error fetching source "+i))}).catch(function(lt){return delete Nn[i],Promise.reject(new Error("Error fetching source "+i))});return Nn[i]=[U,H],H}function lr(n,i){if("string"!=typeof n)return Promise.resolve(n);if(!n.trim().startsWith("{"))return or("Style",n=Ss(n,i.accessToken),i);try{var o=JSON.parse(n);return Promise.resolve(o)}catch(T){return Promise.reject(T)}}function Gr(n,i){if(i.transformRequest){var o=i.transformRequest(n,"Tiles");if(o instanceof Request)return decodeURI(o.url)}return n}var zr={};function Ka(n,i,o,T){var U=document.createElement("canvas"),H=[2*o*i.pixelRatio+i.width,2*o*i.pixelRatio+i.height];U.width=H[0],U.height=H[1];var lt=U.getContext("2d");lt.drawImage(n,i.x,i.y,i.width,i.height,o*i.pixelRatio,o*i.pixelRatio,i.width,i.height);var Tt=lt.getImageData(0,0,H[0],H[1]);lt.globalCompositeOperation="destination-over",lt.fillStyle="rgba("+255*T.r+","+255*T.g+","+255*T.b+","+T.a+")";for(var bt=Tt.data,Dt=0,Nt=Tt.width;Dt<Nt;++Dt)for(var $t=0,le=Tt.height;$t<le;++$t)bt[4*($t*Nt+Dt)+3]>0&&lt.arc(Dt,$t,o*i.pixelRatio,0,2*Math.PI);return lt.fill(),U}var ur,ka=Array(256).join("\u200a");function hr(n,i){if(i>=.05){for(var o="",T=n.split("\n"),U=ka.slice(0,Math.round(i/.1)),H=0,lt=T.length;H<lt;++H)H>0&&(o+="\n"),o+=T[H].split("").join(U);return o}return n}function kr(){return ur||(ur=Wr(1,1).getContext("2d")),ur}function mn(n,i){return kr().measureText(n).width+(n.length-1)*i}var Xr={};function cr(n,i,o,T){if(-1!==n.indexOf("\n")){for(var U=n.split("\n"),H=[],lt=0,Tt=U.length;lt<Tt;++lt)H.push(cr(U[lt],i,o,T));return H.join("\n")}var bt=o+","+i+","+n+","+T,Dt=Xr[bt];if(!Dt){var Nt=n.split(" ");if(Nt.length>1){var $t=kr();$t.font=i;for(var de=$t.measureText("M").width*o,we="",t=[],h=0,p=Nt.length;h<p;++h){var B=Nt[h],j=we+(we?" ":"")+B;mn(j,T)<=de?we=j:(we&&t.push(we),we=B)}we&&t.push(we);for(var X=0,it=t.length;X<it&&it>1;++X){var $=t[X];if(mn($,T)<.35*de){var ct=X>0?mn(t[X-1],T):1/0,Mt=X<it-1?mn(t[X+1],T):1/0;t.splice(X,1),it-=1,ct<Mt?(t[X-1]+=" "+$,X-=1):t[X]=$+" "+t[X]}}for(var Ut=0,Rt=t.length-1;Ut<Rt;++Ut){var kt=t[Ut],se=t[Ut+1];if(mn(kt,T)>.7*de&&mn(se,T)<.6*de){var re=kt.split(" "),ae=re.pop();mn(ae,T)<.2*de&&(t[Ut]=re.join(" "),t[Ut+1]=ae+" "+se),Rt-=1}}Dt=t.join("\n")}else Dt=n;Dt=hr(Dt,T),Xr[bt]=Dt}return Dt}var As,Xa=/font-family: ?([^;]*);/,Va=/("|')/g;function Ya(n){if(!As){As={};for(var i=document.styleSheets,o=0,T=i.length;o<T;++o){var U=i[o];try{var H=U.rules||U.cssRules;if(H)for(var lt=0,Tt=H.length;lt<Tt;++lt){var bt=H[lt];if(5==bt.type){var Dt=bt.cssText.match(Xa);As[Dt[1].replace(Va,"")]=!0}}}catch{}}}return n in As}var dr={};function Ha(n){var i=n.toString();if(i in dr)return dr[i];for(var o=[],T=0,U=n.length;T<U;++T){n[T]=n[T].replace("Arial Unicode MS","Arial");var lt=er(n[T],1);(0,P.Qx)(lt);var Tt=lt.split(" ");o.push([Tt.slice(3).join(" ").replace(/"/g,""),Tt[1],Tt[0]])}for(var bt=0,Dt=o.length;bt<Dt;++bt){var Nt=o[bt],$t=Nt[0];if(!Ya($t)&&100!==P.sG.get(Nt[2]+"\n"+Nt[1]+" \n"+$t)){var le="https://fonts.googleapis.com/css?family="+$t.replace(/ /g,"+")+":"+Nt[1]+Nt[2];if(!document.querySelector('link[href="'+le+'"]')){var de=document.createElement("link");de.href=le,de.rel="stylesheet",document.head.appendChild(de)}}}return dr[i]=n,n}var Ls,gr,Ja={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Qa={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},$a=function(n,i){var o=sn(n,i);if("error"===o.result)throw new Error(o.value.map(function(T){return T.key+": "+T.message}).join(", "));return o.value},fr={},bs={zoom:0};function De(n,i,o,T,U,H,lt){var Tt=n.id;H||(H={},console.warn("No functionCache provided to getValue()")),H[Tt]||(H[Tt]={});var bt=H[Tt];if(!bt[o]){var Dt=(n[i]||fr)[o],Nt=Ir[i+"_"+n.type][o];void 0===Dt&&(Dt=Nt.default);var $t=function Oa(n){return Array.isArray(n)&&n.length>0&&"string"==typeof n[0]&&n[0]in Ln}(Dt);if(!$t&&es(Dt)&&(Dt=function ce(n,i){var o=n.stops;if(!o)return function Ce(n,i){var o=["get",n.property];if(void 0===n.default)return"string"===i.type?["string",o]:o;if("enum"===i.type)return["match",o,Object.keys(i.values),o,n.default];var T=["color"===i.type?"to-color":i.type,o,he(n.default)];return"array"===i.type&&T.splice(1,0,i.value,i.length||null),T}(n,i);var T=o&&"object"==typeof o[0][0],U=T||void 0!==n.property,H=T||!U;return o=o.map(function(lt){return!U&&i.tokens&&"string"==typeof lt[1]?[lt[0],Wt(lt[1])]:[lt[0],he(lt[1])]}),T?function Ct(n,i,o){for(var T={},U={},H=[],lt=0;lt<o.length;lt++){var Tt=o[lt],bt=Tt[0].zoom;void 0===T[bt]&&(T[bt]={zoom:bt,type:n.type,property:n.property,default:n.default},U[bt]=[],H.push(bt)),U[bt].push([Tt[0].value,Tt[1]])}if("exponential"===Ft({},i)){for(var Nt=[ft(n),["linear"],["zoom"]],$t=0,le=H;$t<le.length;$t+=1){var de=le[$t];xt(Nt,de,pe(T[de],i,U[de]),!1)}return Nt}for(var t=["step",["zoom"]],h=0,p=H;h<p.length;h+=1){var B=p[h];xt(t,B,pe(T[B],i,U[B]),!0)}return gt(t),t}(n,i,o):H?function Yt(n,i,o,T){void 0===T&&(T=["zoom"]);var H,U=Ft(n,i),lt=!1;if("interval"===U)H=["step",T],lt=!0;else{if("exponential"!==U)throw new Error('Unknown zoom function type "'+U+'"');var Tt=void 0!==n.base?n.base:1;H=[ft(n),1===Tt?["linear"]:["exponential",Tt],T]}for(var bt=0,Dt=o;bt<Dt.length;bt+=1){var Nt=Dt[bt];xt(H,Nt[0],Nt[1],lt)}return gt(H),H}(n,i,o):pe(n,i,o)}(Dt,Nt),$t=!0),$t){var le=$a(Dt,Nt);bt[o]=le.evaluate.bind(le)}else"color"==Nt.type&&(Dt=fe.parse(Dt)),bt[o]=function(){return Dt}}return bs.zoom=T,bt[o](bs,U,lt)}function qa(n,i,o,T){return De(n,"layout","icon-allow-overlap",i,o,T)?De(n,"layout","icon-ignore-placement",i,o,T)?"none":"obstacle":"declutter"}function to(n,i,o,T,U){return U||console.warn("No filterCache provided to evaluateFilter()"),n in U||(U[n]=ba(i).filter),bs.zoom=T,U[n](bs,o)}var Vr=!1;function rn(n,i){if(n){if(!Vr&&(0===n.a||0===i))return;var o=n.a;return i=void 0===i?1:i,0===o?"transparent":"rgba("+Math.round(255*n.r/o)+","+Math.round(255*n.g/o)+","+Math.round(255*n.b/o)+","+o*i+")"}return n}var eo=/\{[^{}}]*\}/g;function _r(n,i){return n.replace(eo,function(o){return i[o.slice(1,-1)]||""})}var Yr=!1;function io(n,i,o,T,U,H,lt,Tt){if(void 0===T&&(T=ki),void 0===U&&(U=void 0),void 0===H&&(H=void 0),void 0===lt&&(lt=void 0),void 0===Tt&&(Tt=void 0),"string"==typeof i&&(i=JSON.parse(i)),8!=i.version)throw new Error("glStyle version 8 required.");var bt,Dt;if(H)if(typeof Image<"u"){var Nt=new Image;Nt.crossOrigin="anonymous",Nt.onload=function(){bt=Nt,Dt=[Nt.width,Nt.height],n.changed(),Nt.onload=null},Nt.src=H}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){var $t=self;$t.postMessage({action:"loadImage",src:H}),$t.addEventListener("message",function(Ze){"imageLoaded"===Ze.data.action&&Ze.data.src===H&&(Dt=[(bt=Ze.data.image).width,bt.height])})}for(var j,le=function Ba(n){n=n.slice();for(var i=Object.create(null),o=0;o<n.length;o++)i[n[o].id]=n[o];for(var T=0;T<n.length;T++)"ref"in n[T]&&(n[T]=ja(n[T],i[n[T].ref]));return n}(i.layers),de={},we=[],t={},h={},p=function nr(n){n.id||(n.id=Br++);var i={};return Ga[n.id]=i,i}(i),B=function sr(n){n.id||(n.id=Br++);var i={};return za[n.id]=i,i}(i),X=0,it=le.length;X<it;++X){var $=le[X],ct=$.id;if("string"==typeof o&&$.source==o||-1!==o.indexOf(ct)){var Mt=$["source-layer"];if(j){if($.source!==j)throw new Error('Layer "'+ct+'" does not use source "'+j)}else{var Ut=i.sources[j=$.source];if(!Ut)throw new Error('Source "'+j+'" is not defined');var Rt=Ut.type;if("vector"!==Rt&&"geojson"!==Rt)throw new Error('Source "'+j+'" is not of type "vector" or "geojson", but "'+Rt+'"')}var kt=de[Mt];kt||(de[Mt]=kt=[]),kt.push({layer:$,index:X}),we.push(ct)}}var se=new Z.Z,re=new F.Z,ae=[],_e=function(Pe,Ze){var We=Pe.getProperties(),ze=de[We.layer];if(ze){var me=T.indexOf(Ze);-1==me&&(me=ar(Ze,T));for(var Fi,Ke=Ja[Pe.getGeometry().getType()],Oe={properties:We,type:Ke},Re=n.get("mapbox-featurestate")[Pe.getId()],He=-1,Li=0,on=ze.length;Li<on;++Li){var na=ze[Li],Ie=na.layer,pr=Ie.layout||fr,as=Ie.paint||fr;if(!("none"===pr.visibility||"minzoom"in Ie&&me<Ie.minzoom||"maxzoom"in Ie&&me>=Ie.maxzoom)){var Ko=Ie.filter;if(!Ko||to(Ie.id,Ko,Oe,me,B)){Fi=Ie;var tn=void 0,vn=void 0,sa=void 0,ln=void 0,yn=void 0,Ae=void 0,Fs=na.index;if(3==Ke&&("fill"==Ie.type||"fill-extrusion"==Ie.type))if(vn=De(Ie,"paint",Ie.type+"-opacity",me,Oe,p,Re),Ie.type+"-pattern"in as){var ra=De(Ie,"paint",Ie.type+"-pattern",me,Oe,p,Re);if(ra){var co="string"==typeof ra?_r(ra,We):ra.toString();if(bt&&U&&U[co]){++He,(!(Ae=ae[He])||!Ae.getFill()||Ae.getStroke()||Ae.getText())&&(Ae=new A.ZP({fill:new F.Z}),ae[He]=Ae),sa=Ae.getFill(),Ae.setZIndex(Fs);var ko=co+"."+vn,aa=h[ko];if(!aa){var jn=U[co],Xo=Wr(jn.width,jn.height),fo=Xo.getContext("2d");fo.globalAlpha=vn,fo.drawImage(bt,jn.x,jn.y,jn.width,jn.height,0,0,jn.width,jn.height),aa=fo.createPattern(Xo,"repeat"),h[ko]=aa}sa.setColor(aa)}}}else tn=rn(De(Ie,"paint",Ie.type+"-color",me,Oe,p,Re),vn),Ie.type+"-outline-color"in as&&(yn=rn(De(Ie,"paint",Ie.type+"-outline-color",me,Oe,p,Re),vn)),yn||(yn=tn),(tn||yn)&&(++He,(!(Ae=ae[He])||tn&&!Ae.getFill()||!tn&&Ae.getFill()||yn&&!Ae.getStroke()||!yn&&Ae.getStroke()||Ae.getText())&&(Ae=new A.ZP({fill:tn?new F.Z:void 0,stroke:yn?new Z.Z:void 0}),ae[He]=Ae),tn&&(sa=Ae.getFill()).setColor(tn),yn&&((ln=Ae.getStroke()).setColor(yn),ln.setWidth(.5)),Ae.setZIndex(Fs));if(1!=Ke&&"line"==Ie.type){tn=!("line-pattern"in as)&&"line-color"in as?rn(De(Ie,"paint","line-color",me,Oe,p,Re),De(Ie,"paint","line-opacity",me,Oe,p,Re)):void 0;var go=De(Ie,"paint","line-width",me,Oe,p,Re);tn&&go>0&&(++He,(!(Ae=ae[He])||!Ae.getStroke()||Ae.getFill()||Ae.getText())&&(Ae=new A.ZP({stroke:new Z.Z}),ae[He]=Ae),(ln=Ae.getStroke()).setLineCap(De(Ie,"layout","line-cap",me,Oe,p,Re)),ln.setLineJoin(De(Ie,"layout","line-join",me,Oe,p,Re)),ln.setMiterLimit(De(Ie,"layout","line-miter-limit",me,Oe,p,Re)),ln.setColor(tn),ln.setWidth(go),ln.setLineDash(as["line-dasharray"]?De(Ie,"paint","line-dasharray",me,Oe,p,Re).map(function(Ni){return Ni*go}):null),Ae.setZIndex(Fs))}var oa=!1,ui=null,Vo=0,vr=void 0,Di=void 0,_o=void 0;if((1==Ke||2==Ke)&&"icon-image"in pr){var la=De(Ie,"layout","icon-image",me,Oe,p,Re);if(la){vr="string"==typeof la?_r(la,We):la.toString();var mo=void 0,os=Tt?Tt(n,vr):void 0;if(bt&&U&&U[vr]||os){var po=De(Ie,"layout","icon-rotation-alignment",me,Oe,p,Re);if(2==Ke){var Bn=Pe.getGeometry();if(Bn.getFlatMidpoint||Bn.getFlatMidpoints){var ha=Bn.getExtent();if(Math.sqrt(Math.max(Math.pow((ha[2]-ha[0])/Ze,2),Math.pow((ha[3]-ha[1])/Ze,2)))>150){var Ns="MultiLineString"===Bn.getType()?Bn.getFlatMidpoints():Bn.getFlatMidpoint();if(gr||(gr=new G.ZP("Point",Ls=[NaN,NaN],[],{},null)),mo=gr,Ls[0]=Ns[0],Ls[1]=Ns[1],"line"===De(Ie,"layout","symbol-placement",me,Oe,p,Re)&&"map"===po)for(var ua=Bn.getStride(),yr=Bn.getFlatCoordinates(),Zs=0,fl=yr.length-ua;Zs<fl;Zs+=ua){var vo=yr[Zs],yo=yr[Zs+1],Eo=yr[Zs+ua],xo=yr[Zs+ua+1],gl=Math.min(vo,Eo),_l=Math.min(yo,xo),ml=Math.max(vo,Eo),pl=Math.max(yo,xo);if(Ns[0]>=gl&&Ns[0]<=ml&&Ns[1]>=_l&&Ns[1]<=pl){Vo=Math.atan2(yo-xo,Eo-vo);break}}}}}if(2!==Ke||mo){var Yo=De(Ie,"layout","icon-size",me,Oe,p,Re),En=void 0!==as["icon-color"]?De(Ie,"paint","icon-color",me,Oe,p,Re):null;if(!En||0!==En.a){var Ho=De(Ie,"paint","icon-halo-color",me,Oe,p,Re),Mo=De(Ie,"paint","icon-halo-width",me,Oe,p,Re),To=vr+"."+Yo+"."+Mo+"."+Ho;if(null!==En&&(To+="."+En),!(Di=t[To])){var Jo=qa(Ie,me,Oe,p),ca=void 0;"icon-offset"in pr&&((ca=De(Ie,"layout","icon-offset",me,Oe,p,Re))[1]*=-1);var Qo=En?[255*En.r,255*En.g,255*En.b,En.a]:void 0;if(os){var da={color:Qo,rotateWithView:"map"===po,displacement:ca,declutterMode:Jo};"string"==typeof os?da.src=os:(da.img=os,da.imgSize=[os.width,os.height]),Di=new k.Z(da)}else{var Us=U[vr],Er=void 0,Po=void 0,$o=void 0,qo=void 0;Mo?Po=[(Er=Ka(bt,Us,Mo,Ho)).width,Er.height]:(Er=bt,Po=Dt,$o=[Us.width,Us.height],qo=[Us.x,Us.y]),Di=new k.Z({color:Qo,img:Er,imgSize:Po,size:$o,offset:qo,rotateWithView:"map"===po,scale:Yo/Us.pixelRatio,displacement:ca,declutterMode:Jo})}t[To]=Di}}Di&&(++He,(!(Ae=ae[He])||!Ae.getImage()||Ae.getFill()||Ae.getStroke())&&(Ae=new A.ZP,ae[He]=Ae),Ae.setGeometry(mo),Di.setRotation(Vo+rr(De(Ie,"layout","icon-rotate",me,Oe,p,Re))),Di.setOpacity(De(Ie,"paint","icon-opacity",me,Oe,p,Re)),Di.setAnchor(Qa[De(Ie,"layout","icon-anchor",me,Oe,p,Re)]),Ae.setImage(Di),ui=Ae.getText(),Ae.setText(void 0),Ae.setZIndex(Fs),oa=!0,_o=!1)}else _o=!0}}}if(1==Ke&&"circle"===Ie.type){++He,(!(Ae=ae[He])||!Ae.getImage()||Ae.getFill()||Ae.getStroke())&&(Ae=new A.ZP,ae[He]=Ae);var tl="circle-radius"in as?De(Ie,"paint","circle-radius",me,Oe,p,Re):5,Co=rn(De(Ie,"paint","circle-stroke-color",me,Oe,p,Re),De(Ie,"paint","circle-stroke-opacity",me,Oe,p,Re)),Ro=rn(De(Ie,"paint","circle-color",me,Oe,p,Re),De(Ie,"paint","circle-opacity",me,Oe,p,Re)),Oo=De(Ie,"paint","circle-stroke-width",me,Oe,p,Re),el=tl+"."+Co+"."+Ro+"."+Oo;(Di=t[el])||(Di=new z.Z({radius:tl,stroke:Co&&Oo>0?new Z.Z({width:Oo,color:Co}):void 0,fill:Ro?new F.Z({color:Ro}):void 0,declutterMode:"none"}),t[el]=Di),Ae.setImage(Di),ui=Ae.getText(),Ae.setText(void 0),Ae.setGeometry(void 0),Ae.setZIndex(Fs),oa=!0}var Si=void 0,xr=void 0,Mr=void 0,Wn=void 0,Tr=void 0,So=void 0;if("text-field"in pr){Wn=Math.round(De(Ie,"layout","text-size",me,Oe,p,Re));var Io=De(Ie,"layout","text-font",me,Oe,p,Re);Mr=De(Ie,"layout","text-line-height",me,Oe,p,Re),(xr=er(lt?lt(Io):Io,Wn,Mr)).includes("sans-serif")||(xr+=",sans-serif"),Tr=De(Ie,"layout","text-letter-spacing",me,Oe,p,Re),So=De(Ie,"layout","text-max-width",me,Oe,p,Re);var js=De(Ie,"layout","text-field",me,Oe,p,Re);Si="object"==typeof js&&js.sections?1===js.sections.length?js.toString():js.sections.reduce(function(Ni,Gn,xl){var hl=Gn.fontStack?Gn.fontStack.split(","):Io,Fo=er(lt?lt(hl):hl,Wn*(Gn.scale||1),Mr),Bs=Gn.text;if("\n"===Bs)return Ni.push("\n",""),Ni;if(2!=Ke){for(var ga=0,El=(Bs=cr(Bs,Fo,So,Tr).split("\n")).length;ga<El;++ga)ga>0&&Ni.push("\n",""),Ni.push(Bs[ga],Fo);return Ni}Ni.push(hr(Bs,Tr),Fo)},[]):_r(js,We).trim(),vn=De(Ie,"paint","text-opacity",me,Oe,p,Re)}if(Si&&vn&&!_o){oa||(++He,(!(Ae=ae[He])||!Ae.getText()||Ae.getFill()||Ae.getStroke())&&(Ae=new A.ZP,ae[He]=Ae),Ae.setImage(void 0),Ae.setGeometry(void 0)),Ae.getText()||Ae.setText(ui||new S.Z({padding:[2,2,2,2]})),ui=Ae.getText();var il=pr["text-transform"];"uppercase"==il?Si=Array.isArray(Si)?Si.map(function(Ni,Gn){return Gn%2?Ni:Ni.toUpperCase()}):Si.toUpperCase():"lowercase"==il&&(Si=Array.isArray(Si)?Si.map(function(Ni,Gn){return Gn%2?Ni:Ni.toLowerCase()}):Si.toLowerCase());var nl=Array.isArray(Si)?Si:2==Ke?hr(Si,Tr):cr(Si,xr,So,Tr);ui.setText(nl),ui.setFont(xr),ui.setRotation(rr(De(Ie,"layout","text-rotate",me,Oe,p,Re)));var fa=De(Ie,"layout","text-anchor",me,Oe,p,Re),Ao=oa||1==Ke?"point":De(Ie,"layout","symbol-placement",me,Oe,p,Re);if(ui.setPlacement(Ao),"function"==typeof ui.setRepeat){var vl=De(Ie,"layout","symbol-spacing",me,Oe,p,Re);ui.setRepeat(2*vl)}ui.setOverflow("point"===Ao);var ls=De(Ie,"paint","text-halo-width",me,Oe,p,Re),sl=De(Ie,"layout","text-offset",me,Oe,p,Re),rl=De(Ie,"paint","text-translate",me,Oe,p,Re),bo=0,Lo=0;if("point"==Ao){var wo="center";-1!==fa.indexOf("left")?(wo="left",Lo=ls):-1!==fa.indexOf("right")&&(wo="right",Lo=-ls),ui.setTextAlign(wo);var yl=De(Ie,"layout","text-rotation-alignment",me,Oe,p,Re);ui.setRotateWithView("map"==yl)}else ui.setMaxAngle(rr(De(Ie,"layout","text-max-angle",me,Oe,p,Re))*Si.length/nl.length),ui.setTextAlign(),ui.setRotateWithView(!1);var Do="middle";0==fa.indexOf("bottom")?(Do="bottom",bo=-ls-.5*(Mr-1)*Wn):0==fa.indexOf("top")&&(Do="top",bo=ls+.5*(Mr-1)*Wn),ui.setTextBaseline(Do);var al=De(Ie,"layout","text-justify",me,Oe,p,Re);ui.setJustify("auto"===al?void 0:al),ui.setOffsetX(sl[0]*Wn+Lo+rl[0]),ui.setOffsetY(sl[1]*Wn+bo+rl[1]),re.setColor(rn(De(Ie,"paint","text-color",me,Oe,p,Re),vn)),ui.setFill(re);var ol=rn(De(Ie,"paint","text-halo-color",me,Oe,p,Re),vn);if(ol){se.setColor(ol);var ll=.5*Wn;se.setWidth((ls*=2)<=ll?ls:ll),ui.setStroke(se)}else ui.setStroke(void 0);var Pr=De(Ie,"layout","text-padding",me,Oe,p,Re),Cr=ui.getPadding();Pr!==Cr[0]&&(Cr[0]=Pr,Cr[1]=Pr,Cr[2]=Pr,Cr[3]=Pr),Ae.setZIndex(Fs)}}}}if(He>-1)return ae.length=He+1,Yr&&("function"==typeof Pe.set?Pe.set("mapbox-layer",Fi):Pe.getProperties()["mapbox-layer"]=Fi),ae}};return n.setStyle(_e),n.set("mapbox-source",j),n.set("mapbox-layers",we),n.set("mapbox-featurestate",{}),_e}function so(n,i){return void 0===i&&(i=512),n.getExtent()?(0,_.dl)({extent:n.getExtent(),tileSize:i,maxZoom:22}).getResolutions():ki}function Jr(n,i,o,T,U){void 0===o&&(o=""),void 0===T&&(T={}),void 0===U&&(U=void 0);var H,lt,Tt,bt,Dt=!0;return"string"==typeof o||Array.isArray(o)?bt=o:(bt=(Tt=o).source||Tt.layers,T=Tt),"string"==typeof T?(H=T,Tt={}):(H=T.styleUrl,Tt=T),!1===Tt.updateSource&&(Dt=!1),U||(U=Tt.resolutions),!H&&"string"==typeof i&&!i.trim().startsWith("{")&&(H=i),H&&(H=H.startsWith("data:")?location.href:Ss(H,Tt.accessToken),Tt=function Hr(n,i){return i.accessToken||(i=Object.assign({},i),new URL(n).searchParams.forEach(function(T,U){i.accessToken=T,i.accessTokenParam=U})),i}(H,Tt)),new Promise(function(Nt,$t){lr(i,Tt).then(function(le){if(8!=le.version)return $t(new Error("glStyle version 8 required."));if(!(n instanceof C.Z||n instanceof Y.Z))return $t(new Error("Can only apply to VectorLayer or VectorTileLayer"));var h,p,B,de=n instanceof Y.Z?"vector":"geojson";if(bt?lt=Array.isArray(bt)?le.layers.find(function(ct){return ct.id===bt[0]}).source:bt:(lt=Object.keys(le.sources).find(function(ct){return le.sources[ct].type===de}),bt=lt),!lt)return $t(new Error("No "+de+" source found in the glStyle."));function we(){if(!Dt)return Promise.resolve();if(n instanceof Y.Z)return function $r(n,i,o){return new Promise(function(T,U){(function Kr(n,i,o){void 0===o&&(o={});var T=[i,JSON.stringify(n)].toString(),U=zr[T];if(!U||o.transformRequest){var H=n.url;if(H&&!n.tiles){var lt=Is(H,o.accessToken,o.accessTokenParam||"access_token",i||location.href);if(H.startsWith("mapbox://"))U=Promise.resolve(Object.assign({},n,{url:void 0,tiles:(0,v.Gk)(lt)}));else{var Tt={};U=or("Source",lt,o,Tt).then(function(bt){return bt.tiles=bt.tiles.map(function(Dt){return Gr(Is(Dt,o.accessToken,o.accessTokenParam||"access_token",Tt.request.url),o)}),Promise.resolve(bt)})}}else n=Object.assign({},n,{tiles:n.tiles.map(function(bt){return Gr(Is(bt,o.accessToken,o.accessTokenParam||"access_token",i||location.href),o)})}),U=Promise.resolve(Object.assign({},n));zr[T]=U}return U})(n,i,o).then(function(H){var lt=function Qr(n,i,o){var T=new M({tileJSON:i,tileSize:n.tileSize||i.tileSize||512}),U=T.getTileJSON(),H=T.getTileGrid(),lt=(0,y.U2)(o.projection||"EPSG:3857"),Tt=function ao(n,i){var o=n.bounds;if(o){var T=(0,y.mi)([o[0],o[1]],i),U=(0,y.mi)([o[2],o[3]],i);return[T[0],T[1],U[0],U[1]]}return(0,y.U2)(i).getExtent()}(U,lt),bt=lt.getExtent(),Dt=U.minzoom||0,Nt=U.maxzoom||22,$t={attributions:T.getAttributions(),projection:lt,tileGrid:new l.Z({origin:bt?(0,s.rL)(bt):H.getOrigin(0),extent:Tt||H.getExtent(),minZoom:Dt,resolutions:so(lt,i.tileSize).slice(0,Nt+1),tileSize:H.getTileSize(0)})};return Array.isArray(U.tiles)?$t.urls=U.tiles:$t.url=U.tiles,$t}(n,H,o);lt.format=new r.Z,Array.isArray(H.tiles)?lt.urls=H.tiles:lt.url=H.tiles,T(new st.Z(lt))}).catch(U)})}(le.sources[lt],H,Tt).then(function(Rt){var kt=n.getSource();if(kt?Rt!==kt&&(kt.setTileUrlFunction(Rt.getTileUrlFunction()),kt.format_||(kt.format_=Rt.format_),kt.getAttributions()||kt.setAttributions(Rt.getAttributions()),kt.getTileLoadFunction()===st.I&&kt.setTileLoadFunction(Rt.getTileLoadFunction()),(0,y.OP)(kt.getProjection(),Rt.getProjection())&&(kt.tileGrid=Rt.getTileGrid())):n.setSource(Rt),!isFinite(n.getMaxResolution())&&!isFinite(n.getMinZoom())){var se=n.getSource().getTileGrid();n.setMaxResolution(se.getResolution(se.getMinZoom()))}});var ct=le.sources[lt],Mt=n.getSource();(!Mt||Mt.get("mapbox-source")!==ct)&&(Mt=function mr(n,i,o){var T=n.data,U={};if("string"==typeof T){var H=Is(T,o.accessToken,o.accessTokenParam||"access_token",i||location.href);if(o.transformRequest){var lt=o.transformRequest(H,"GeoJSON");lt instanceof Request&&(H=decodeURI(lt.url))}if(/\{bbox-[0-9a-z-]+\}/.test(H)){var bt=new D.Z({attributions:n.attribution,format:rs,url:function(Nt,$t,le){var de=function ws(n){return"{bbox-"+(n?n.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")+"}"}(le);return H.replace(de,Nt.join(",")+","+le.getCode())},strategy:V.VW});return bt.set("mapbox-source",n),bt}return new D.Z({attributions:n.attribution,format:rs,url:H})}U.features=rs.readFeatures(T,{featureProjection:(0,y.Cs)()||"EPSG:3857"});var Dt=new D.Z(Object.assign({attributions:n.attribution,format:rs},U));return Dt.set("mapbox-source",n),Dt}(ct,H,Tt));var Ut=n.getSource();return Ut?Mt!==Ut&&(Ut.getAttributions()||Ut.setAttributions(Mt.getAttributions()),Ut.format_||(Ut.format_=Mt.getFormat()),Ut.url_=Mt.getUrl()):n.setSource(Mt),Promise.resolve()}function j(){if(B||le.sprite&&!h)B?(n.setStyle(B),we().then(Nt).catch($t)):$t(new Error("Something went wrong trying to apply style."));else{if(Tt.projection&&!U){var Mt=(0,y.U2)(Tt.projection).getUnits();"m"!==Mt&&(U=ki.map(function(Ut){return Ut/y.Wm[Mt]}))}B=io(n,le,bt,U,h,p,Ha,Tt.getImage),n.getStyle()?we().then(Nt).catch($t):$t(new Error("Nothing to show for source ["+lt+"]"))}}if(le.sprite){var X=new URL(function Wa(n,i,o){var T=ir(n);if(!T)return decodeURI(new URL(n,o).href);if(0!==T.indexOf("sprites/"))throw new Error("unexpected sprites url: "+n);var H=T.slice(8);return jr+"/styles/v1/"+H+"/sprite?access_token="+i}(le.sprite,Tt.accessToken,H||location.href)),it=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",$=X.origin+X.pathname+it+".json"+X.search;new Promise(function(ct,Mt){or("Sprite",$,Tt).then(ct).catch(function(Ut){or("Sprite",$=X.origin+X.pathname+".json"+X.search,Tt).then(ct).catch(Mt)})}).then(function(ct){if(void 0===ct&&$t(new Error("No sprites found.")),h=ct,p=X.origin+X.pathname+it+".png"+X.search,Tt.transformRequest){var Mt=Tt.transformRequest(p,"SpriteImage");Mt instanceof Request&&(p=encodeURI(Mt.url))}j()}).catch(function(ct){$t(new Error("Sprites cannot be loaded: "+$+": "+ct.message))})}else j()}).catch($t)})}var an={};function qe(n,i,o){return void 0===o&&(o={}),lr(i,o).then(function(T){!function oi(n,i,o){i.layers.some(function(T){if("background"===T.type){if(n instanceof u.Z)return n.setBackground(function(U){return ss(T,U,o,{})}),!0;if(n instanceof d.Z||n instanceof c.Z)return n.getLayers().push(function pn(n,i,o){var T=document.createElement("div");return T.className="ol-mapbox-style-background",T.style.position="absolute",T.style.width="100%",T.style.height="100%",new u.Z({source:new e.Z({}),render:function(H){var lt=ss(n,H.viewState.resolution,i,o);return T.style.backgroundColor=lt,T}})}(T,o,{})),!0}})}(n,T,o)})}function ss(n,i,o,T){var U={id:n.id,type:n.type},H=n.layout||{},lt=n.paint||{};U.paint=lt;var bt,Dt,Tt=ar(i,o.resolutions||ki);return void 0!==lt["background-color"]&&(bt=De(U,"paint","background-color",Tt,an,T)),void 0!==lt["background-opacity"]&&(Dt=De(U,"paint","background-opacity",Tt,an,T)),"none"==H.visibility?void 0:rn(bt,Dt)}var rs=new f.Z}}]);