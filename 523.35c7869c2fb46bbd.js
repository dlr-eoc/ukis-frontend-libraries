"use strict";(self.webpackChunkdemo_maps=self.webpackChunkdemo_maps||[]).push([[523],{4074:(z,P,a)=>{a.d(P,{um:()=>Z,RP:()=>C,HF:()=>I,Kl:()=>S,aZ:()=>G,fc:()=>M,HX:()=>F,zc:()=>E,gY:()=>B,Bz:()=>N});var u=a(5548);class B extends u.YY{constructor(i){const r={name:"OpenStreetMap",displayName:"OpenStreetMap",id:"osm",visible:!1,type:"xyz",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",subdomains:["a","b","c"],attribution:'&copy, <a href="https://www.openstreetmap.org">OpenStreetMap</a> contributors',continuousWorld:!1,legendImg:"https://a.tile.openstreetmap.org/3/4/3.png",description:"OpenStreetMap z-x-y Tiles",opacity:1};i&&Object.assign(r,i),super(r)}}class E extends u.YY{constructor(i){const r={name:"OpenSeaMap",displayName:"OpenSeaMap",id:"OpenSeaMap",visible:!1,type:"xyz",removable:!1,url:"https://{s}.openseamap.org/seamark/{z}/{x}/{y}.png",subdomains:["t1"],attribution:'&copy, <a href="https://map.openseamap.org/legend.php?lang=de&page=license">OpenSeaMap</a>',continuousWorld:!1,legendImg:"https://t1.openseamap.org/seamark/10/554/321.png",description:"http://map.openseamap.org/",opacity:1};i&&Object.assign(r,i),super(r)}}class S extends u.TI{constructor(i){const r={name:"EOC Litemap",displayName:"EOC Litemap",id:"eoc_litemap",visible:!1,type:"wms",removable:!1,params:{LAYERS:"litemap",FORMAT:"image/png",TRANSPARENT:!0},url:"https://geoservice.dlr.de/eoc/basemap/wms",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://geoservice.dlr.de/eoc/basemap/wms?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image%2Fpng&TRANSPARENT=true&LAYERS=litemap&ATTRIBUTION=&WIDTH=256&HEIGHT=256&CRS=EPSG%3A3857&STYLES=&BBOX=0%2C0%2C10018754.171394622%2C10018754.171394622",description:"http://www.naturalearthdata.com/about/",opacity:1};i&&Object.assign(r,i),super(r)}}class G extends u.RC{constructor(i){const r={name:"EOC Litemap Tile",displayName:"EOC Litemap Tile",id:"eoc_litemap_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:litemap",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Alitemap&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"EOC Litemap as web map tile service",opacity:1};i&&Object.assign(r,i),super(r)}}class M extends u.RC{constructor(i){const r={name:"EOC Liteoverlay Tile",displayName:"EOC LiteoverlayTile",id:"eoc_Liteoverlay_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:liteoverlay",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aliteoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the liteoverlay provided for EOC Service Portals",opacity:1};i&&Object.assign(r,i),super(r)}}class C extends u.RC{constructor(i){const r={name:"EOC Basemap Tile",displayName:"EOC Basemap Tile",id:"eoc_basemap_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:basemap",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Abasemap&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the basemap for DLR Service Portals",opacity:1};i&&Object.assign(r,i),super(r)}}class I extends u.RC{constructor(i){const r={name:"EOC Baseoverlay Tile",displayName:"EOC Baseoverlay Tile",id:"eoc_Baseoverlay_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:baseoverlay",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Abaseoverlay&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"This is the basemap for DLR Service Portals",opacity:1};i&&Object.assign(r,i),super(r)}}class Z extends u.RC{constructor(i){const r={name:"BlueMarble Tile",displayName:"BlueMarble Tile",id:"blueMarble_tile",visible:!1,type:"wmts",removable:!1,params:{layer:"bmng_topo_bathy",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=bmng_topo_bathy&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"Blue Marble NG dataset with topography and bathymetry",opacity:1};i&&Object.assign(r,i),super(r)}}class N extends u.RC{constructor(i){const r={name:"World Relief B/W Tile",displayName:"World Relief B/W Tile",id:"eoc:world_relief_bw",visible:!1,type:"wmts",removable:!1,params:{layer:"eoc:world_relief_bw",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=eoc%3Aworld_relief_bw&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"World Relief Black / White",opacity:1};i&&Object.assign(r,i),super(r)}}class F extends u.RC{constructor(i){const r={name:"Hillshade Tile",displayName:"Hillshade Tile",id:"eoc_hillshade",visible:!1,type:"wmts",removable:!1,params:{layer:"hillshade",format:"image/png",style:"_empty",matrixSetOptions:{matrixSet:"EPSG:3857",tileMatrixPrefix:"EPSG:3857"}},url:"https://tiles.geoservice.dlr.de/service/wmts",attribution:'&copy, <a href="//geoservice.dlr.de/eoc/basemap/">DLR</a>',continuousWorld:!1,legendImg:"https://tiles.geoservice.dlr.de/service/wmts?layer=hillshade&style=_empty&tilematrixset=EPSG%3A3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix=EPSG%3A3857%3A5&TileCol=18&TileRow=11",description:"Global Hillshade based on GMTED2010",opacity:1};i&&Object.assign(r,i),super(r)}}},523:(z,P,a)=>{a.r(P),a.d(P,{RouteMap3Module:()=>ne,RouteMap3RoutingModule:()=>D});var u=a(8692),B=a(8808),E=a(7223),S=a(5548),G=a(790),M=a(1899),C=a(4074),I=a(6906),Z=a(6819),N=a(4203),F=a(3149),v=a(3413),i=a(7464),r=a(9543),Q=a(4395),X=a(8049),U=a(9765),$=a(400),K=a(993),q=a(3298),A=a(3056),k=a(1591),e=a(4537),_=a(6302),ee=a(6895),T=a(6799),te=a(408),ae=a(3307),se=a(7461);let re=(()=>{class p{constructor(t,o,l,n,c,d){this.layersSvc=t,this.mapStateSvc=o,this.mapSvc=l,this.alertSvc=n,this.progressService=c,this.route=d,this.class="content-container floating",this.subs=[],this.startBbox=null,this.updateLayerOnZoom=s=>{const m=this.mapStateSvc.getMapState().getValue(),f="gridLayer",L=((p,y,t,o,l)=>{const n=[];let c=80;t>1&&(c=40),t>2&&(c=20),t>3&&(c=10),t>4&&(c=6),t>5&&(c=4),t>6&&(c=3),t>7&&(c=2),t>8&&(c=1);const d=.5*c;let s=10;s>10&&(s=10),l=(0,r.f3)(l,d);const m=p[0]+s,g=p[1]+s,O=p[3]-s-g,L=Math.floor((p[2]-s-m)/d),W=Math.floor(O/d);let h=m;for(let b=L;b>0;b--){let x=g;for(let V=W;V>0;V--){const Y=h+d,j=x+d,H=[h,x],ce=[[H,[h,j],[Y,j],[Y,x],H]];if(console.log(),(0,r.jE)(l,h,x)&&(0,r.jE)(l,Y,j)){const pe=new i.ZP(ce).transform("EPSG:4326",o),me=new v.Z({geometry:pe,column:b,row:V,id:n.length+1});n.push(me)}x+=d}h+=d}return n})([-180,-90,180,90],0,m.zoom,this.mapSvc.EPSG,m.extent),W=new F.Z({features:L,wrapX:!1}),h=new N.Z({source:W});h.set("id",f);const b=this.layersSvc.getLayerById(f);if(b)b.custom_layer=h,this.layersSvc.updateLayer(b,b.filtertype);else{const x=new S.AO({id:f,name:"gridLayer",type:"custom",opacity:.3,custom_layer:h});this.layersSvc.addLayer(x,"Layers")}},this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.addLayers(),this.subscribeToLayers(),this.subscribeToMapState(),this.subscribeToRoute(),this.startBbox&&this.mapStateSvc.setExtent(this.startBbox)}ngAfterViewInit(){this.mapSvc.map.on("moveend",this.updateLayerOnZoom)}ngOnDestroy(){this.subs.map(t=>t.unsubscribe()),this.mapSvc.map.un("moveend",this.updateLayerOnZoom)}addLayers(){const t=new C.gY({visible:!1}),o=new C.Kl({visible:!0,tileSize:512}),l=new Z.Z({url:"https://ahocevar.com/geoserver/wms",params:{LAYERS:"topp:states"},serverType:"geoserver"});l.on("imageloadstart",()=>{this.progressService.progress({indeterminate:!0})}),l.on("imageloadend",()=>{this.progressService.progress(null)}),l.on("imageloaderror",()=>{this.progressService.progress(null)});const n=new S.AO({id:"event_layer",name:"Image load Layer",type:"custom",custom_layer:new I.Z({source:l}),visible:!1,bbox:[-133.9453125,18.979025953255267,-60.46875,52.908902047770255]}),c=new S.DJ({id:"updatable_feature_layer",name:"Updatable feature layer",type:"geojson",visible:!1,data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[-192.48046875,-24.686952411999144],[-88.06640625,-24.686952411999144],[-88.06640625,50.28933925329178],[-192.48046875,50.28933925329178],[-192.48046875,-24.686952411999144]]]}}]},actions:[{action:s=>{c.data=$,this.layersSvc.updateLayer(c)},icon:"download",title:"Load data"}]});[o,t,n,c].forEach(s=>this.layersSvc.addLayer(s,"Layers"))}removeLayer(){this.layersSvc.removeLayerOrGroupById("event_layer2")}addLayer(){const t=new U.xQ,o=new U.xQ,l=new K.Z({source:new q.Z({url:"https://geoservice.dlr.de/eoc/land/wms",params:{LAYERS:"GUF28_DLR_v1_Mosaic"}})}),n=s=>{var m=s.context,g=this.mapSvc.map.getSize(),R=.5*g[0],f=(0,A.CR)(s,[R,0]),w=(0,A.CR)(s,[g[0],0]),O=(0,A.CR)(s,[R,g[1]]),L=(0,A.CR)(s,g);m.save(),m.beginPath(),m.moveTo(f[0],f[1]),m.lineTo(O[0],O[1]),m.lineTo(L[0],L[1]),m.lineTo(w[0],w[1]),m.closePath(),m.clip()};l.on("prerender",s=>{n(s)}),l.on("postrender",s=>{(s=>{s.context.restore()})(s)});const d=new S.AO({id:"event_layer2",name:"Image load Layer 2",type:"custom",custom_layer:new k.Z({layers:[l]}),visible:!0,removable:!0,events:{source:[{event:"tileloadstart",listener:s=>{t.next(s)}},{event:"tileloadend",listener:s=>{o.next(s)}}],layer:[{event:"prerender",listener:s=>{n(s)}},{event:"postrender",listener:s=>{n(s)}}]}});t.subscribe(s=>this.progressService.progress({indeterminate:!0})),o.pipe((0,Q.b)(200)).subscribe(s=>this.progressService.progress(null)),this.layersSvc.addLayer(d,"Layers")}getSearchParamsHashRouting(t=window.location.href){-1===t.indexOf("http")&&(t=new URL(t,`${window.location.origin}${window.location.pathname}`).toString());const o=new URL(window.location.href,window.location.origin),[l,n]=o.hash.split("?");let c=new URLSearchParams;return n&&(c=new URLSearchParams(n)),{query:c,urlHashRouting:o,hash:l}}updateSearchParamsHashRouting(t){const{query:o,urlHashRouting:l,hash:n}=this.getSearchParamsHashRouting();Object.keys(t).map(s=>{o.set(s,t[s])});const c=decodeURIComponent(`${o}`);return`${l.protocol}//${l.host}${l.pathname||"/"}${n||"#/"}?${c}`}subscribeToMapState(){const t=this.mapStateSvc.getMapState().subscribe(o=>{if(history.pushState){const l=o.extent.map(c=>c.toFixed(3)),n=this.updateSearchParamsHashRouting({bbox:l.join(","),zoom:o.zoom.toString()});window.history.pushState({path:n},"",n)}});this.subs.push(t)}subscribeToRoute(){const t=this.route.queryParams.pipe((0,X.P)()).subscribe(o=>{if(Object.keys(o).length>0&&o.bbox){const l=o.bbox.split(",").map(n=>parseFloat(n));4===l.length&&(this.startBbox=l)}});this.subs.push(t)}subscribeToLayers(){if(this.layersSvc){const t=this.layersSvc.getLayers().subscribe(o=>{o.filter(n=>!0===n.visible).forEach(n=>{"updatable_feature_layer"===n.id&&n.data.features.length<=1&&this.alertSvc.alert({type:"info",text:"Click the layer setting down arrow icon to load new features.",closeable:!0})})});this.subs.push(t)}}}return p.\u0275fac=function(t){return new(t||p)(e.Y36(S.KD),e.Y36(G.I3),e.Y36(M.BR),e.Y36(_.c),e.Y36(ee.N),e.Y36(E.gz))},p.\u0275cmp=e.Xpm({type:p,selectors:[["app-route-map3"]],hostVars:2,hostBindings:function(t,o){2&t&&e.Tol(o.class)},features:[e._Bn([S.KD,G.I3,M.BR])],decls:21,vars:10,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","layers","clrVerticalNavIcon","","title","layers"],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc"],["title","Coordinates",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","compass","clrVerticalNavIcon",""],["title","Test",1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","cog","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"main",0),e._UZ(1,"ukis-map-ol",1),e.qZA(),e.TgZ(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),e._UZ(4,"clr-icon",4),e._uU(5," Layers "),e.TgZ(6,"clr-vertical-nav-group-children",5),e._UZ(7,"ukis-layer-control",6),e.qZA()(),e.TgZ(8,"clr-vertical-nav-group",7),e._UZ(9,"clr-icon",8),e._uU(10," Coordinates "),e.TgZ(11,"clr-vertical-nav-group-children",5),e._UZ(12,"ukis-mouse-position"),e.qZA()(),e.TgZ(13,"clr-vertical-nav-group",9),e._UZ(14,"clr-icon",10),e._uU(15," Test "),e.TgZ(16,"clr-vertical-nav-group-children",5)(17,"button",11),e.NdJ("click",function(){return o.removeLayer()}),e._uU(18,"remove Layer"),e.qZA(),e.TgZ(19,"button",11),e.NdJ("click",function(){return o.addLayer()}),e._uU(20,"add Layer"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("layersSvc",o.layersSvc)("mapState",o.mapStateSvc)("controls",o.controls),e.xp6(1),e.Q6J("clrVerticalNavCollapsible",!0)("clr-nav-level",2),e.xp6(1),e.Q6J("clrVerticalNavGroupExpanded",!0),e.xp6(4),e.Q6J("layersSvc",o.layersSvc)("mapStateSvc",o.mapStateSvc),e.xp6(1),e.Q6J("clrVerticalNavGroupExpanded",!1),e.xp6(5),e.Q6J("clrVerticalNavGroupExpanded",!0))},dependencies:[T.qvL,T.saT,T.fzC,T.A0B,T.d6G,T.ogR,te.E,ae.j,se.C]}),p})();var oe=a(5508),ie=a(1671);const le=[{path:"",component:re}];let D=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[E.Bz.forChild(le),E.Bz]}),p})(),ne=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[u.ez,B.q,D,T.K6A,oe.cE,M.oC,ie.X8]}),p})()}}]);