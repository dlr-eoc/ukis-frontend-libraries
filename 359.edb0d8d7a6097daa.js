"use strict";(self.webpackChunkdemo_maps=self.webpackChunkdemo_maps||[]).push([[359],{6359:(B,m,o)=>{o.r(m),o.d(m,{RouteExampleOwcLayersModule:()=>T,RouteExampleOwcLayersRoutingModule:()=>h});var g=o(8692),f=o(8808),y=o(7223),x=o(8239),p=o(1899),i=o(5548),d=o(790),v=o(8049),L=o(3590),e=o(4537),S=o(3534),O=o(5732),c=o(6799),E=o(408),C=o(580),R=o(3307);let Z=(()=>{class r{constructor(t,a,l,n,u){this.layersSvc=t,this.mapStateSvc=a,this.mapSvc=l,this.owcSvc=n,this.http=u,this.class="content-container",this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.mapSvc.map.addControl(new L.S),this.getOwcContext("assets/owc/ows-json-context.json")}getOwcContext(t){return this.http.get(t).subscribe(a=>{this.addLayersFromContext(a)})}addLayersFromContext(t){this.owcSvc.getLayers(t,this.mapSvc.EPSG).pipe((0,v.P)()).subscribe(a=>{for(const l of a)l instanceof i.ex?("VectorLayers_baseWFSLayer_eocGeojsonLayer_baseKMLLayer"===l.id&&l.layers.forEach(n=>n.popup=!0),this.layersSvc.addLayerGroup(l,l.filtertype)):this.layersSvc.addLayer(l,l.filtertype)}),t.bbox&&this.mapStateSvc.setExtent(t.bbox)}downloadOwc(){var t=this;return(0,x.Z)(function*(){const a=yield t.layersSvc.getLayerGroups().pipe((0,v.P)()).toPromise(),l=yield t.mapStateSvc.getExtent().pipe((0,v.P)()).toPromise(),n=t.owcSvc.generateOwsContextFrom("Test_OWC",a,l),u=new Blob([JSON.stringify(n)],{type:"application/json"}),b=URL.createObjectURL(u);window.open(b)})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(i.KD),e.Y36(d.I3),e.Y36(p.BR),e.Y36(S.$J),e.Y36(O.eN))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-route-example-owc-layers"]],hostVars:2,hostBindings:function(t,a){2&t&&e.Tol(a.class)},features:[e._Bn([i.KD,d.I3,p.BR])],decls:24,vars:15,consts:[[1,"content-area"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","world","title","Overlays","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc","layerfilter"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""],["shape","export","title","Export","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"main",0),e._UZ(1,"ukis-map-ol",1),e.qZA(),e.TgZ(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),e._UZ(4,"clr-icon",4),e._uU(5," Overlays "),e.TgZ(6,"clr-vertical-nav-group-children",5),e._UZ(7,"ukis-layer-control",6),e.qZA()(),e.TgZ(8,"clr-vertical-nav-group",3),e._UZ(9,"clr-icon",7),e._uU(10," Layers "),e.TgZ(11,"clr-vertical-nav-group-children",5),e._UZ(12,"ukis-layer-control",8),e.qZA()(),e.TgZ(13,"clr-vertical-nav-group",3),e._UZ(14,"clr-icon",9),e._uU(15," Baselayers "),e.TgZ(16,"clr-vertical-nav-group-children",5),e._UZ(17,"ukis-base-layer-control",8),e.qZA()(),e.TgZ(18,"clr-vertical-nav-group"),e._UZ(19,"clr-icon",10),e._uU(20," OWC Control "),e.TgZ(21,"clr-vertical-nav-group-children",5)(22,"button",11),e.NdJ("click",function(){return a.downloadOwc()}),e._uU(23,"Download OWC"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("layersSvc",a.layersSvc)("mapState",a.mapStateSvc)("controls",a.controls),e.xp6(1),e.Q6J("clrVerticalNavCollapsible",!0)("clr-nav-level",2),e.xp6(1),e.Q6J("clrVerticalNavGroupExpanded",!0),e.xp6(4),e.Q6J("layersSvc",a.layersSvc)("mapStateSvc",a.mapStateSvc)("layerfilter","Overlays"),e.xp6(1),e.Q6J("clrVerticalNavGroupExpanded",!0),e.xp6(4),e.Q6J("layersSvc",a.layersSvc)("mapStateSvc",a.mapStateSvc),e.xp6(1),e.Q6J("clrVerticalNavGroupExpanded",!0),e.xp6(4),e.Q6J("layersSvc",a.layersSvc)("mapStateSvc",a.mapStateSvc))},dependencies:[c.qvL,c.saT,c.fzC,c.A0B,c.d6G,c.ogR,E.E,C.l,R.j],styles:["[_nghost-%COMP%]     .zoom-number{bottom:2.5em;left:8px}"]}),r})();var w=o(5508);const U=[{path:"",component:Z}];let h=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[y.Bz.forChild(U),y.Bz]}),r})(),T=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.ez,f.q,h,c.K6A,w.cE,p.oC,S.yU]}),r})()}}]);