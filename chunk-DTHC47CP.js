import{a as U,b as z}from"./chunk-EYOOU7H2.js";import"./chunk-RFBDSNT2.js";import{pb as y,qb as J}from"./chunk-WHEH4KMJ.js";import{p as H,s as d,u,v as K,w as Z}from"./chunk-RM6VSO6X.js";import{Dc as F,E as o,Ec as _,Fc as k,G as s,Ga as M,Gc as B,Hc as P,I as L,Ic as T,J as h,Kc as W,La as N,Oa as E,P as n,S as O,X as i,Y as p,Ya as C,Z as l,ba as b,dc as G,ec as R,hd as D,la as m,m as v,q as f,sa as x,sb as I,wb as V,xb as j}from"./chunk-G5LJQFAD.js";import{h as g}from"./chunk-FJYW2LMB.js";E.addIcons(j,I,V);var w=(()=>{class r{constructor(a,t,e,c,S){this.layersSvc=a,this.mapStateSvc=t,this.mapSvc=e,this.owcSvc=c,this.http=S,this.class="content-container",this.controls={attribution:!0,scaleLine:!0}}ngOnInit(){this.mapSvc.map.addControl(new U),this.getOwcContext("assets/owc/ows-json-context.json")}getOwcContext(a){return this.http.get(a).subscribe(t=>{this.addLayersFromContext(t)})}addLayersFromContext(a){this.owcSvc.getLayers(a,this.mapSvc.EPSG).pipe(v()).subscribe(t=>{for(let e of t)e instanceof H?(e.id==="VectorLayers_baseWFSLayer_eocGeojsonLayer_baseKMLLayer"&&e.layers.forEach(c=>c.popup=!0),this.layersSvc.addLayerGroup(e,e.filtertype)):this.layersSvc.addLayer(e,e.filtertype)}),a.bbox&&this.mapStateSvc.setExtent(a.bbox)}downloadOwc(){return g(this,null,function*(){let a=yield this.layersSvc.getLayerGroups().pipe(v()).toPromise(),t=yield this.mapStateSvc.getExtent().pipe(v()).toPromise(),e=this.owcSvc.generateOwsContextFrom("Test_OWC",a,t),c=new Blob([JSON.stringify(e)],{type:"application/json"}),S=URL.createObjectURL(c);window.open(S)})}static{this.\u0275fac=function(t){return new(t||r)(s(d),s(u),s(y),s(z),s(N))}}static{this.\u0275cmp=L({type:r,selectors:[["app-route-example-owc-layers"]],hostVars:2,hostBindings:function(t,e){t&2&&O(e.class)},features:[x([d,u,y])],decls:24,vars:15,consts:[[1,"content-area","map-view"],["id","olMap",3,"layersSvc","mapState","controls"],[1,"right",3,"clrVerticalNavCollapsible","clr-nav-level"],[1,"layers",3,"clrVerticalNavGroupExpanded"],["shape","world","title","Overlays","clrVerticalNavIcon",""],[1,"padding","title-ellipsis"],[3,"layersSvc","mapStateSvc","layerfilter"],["shape","layers","clrVerticalNavIcon","","title","layers"],[3,"layersSvc","mapStateSvc"],["shape","world","title","Baselayers","clrVerticalNavIcon",""],["shape","export","title","Export","clrVerticalNavIcon",""],[1,"btn","btn-primary",3,"click"]],template:function(t,e){t&1&&(i(0,"main",0),l(1,"ukis-map-ol",1),p(),i(2,"clr-vertical-nav",2)(3,"clr-vertical-nav-group",3),l(4,"cds-icon",4),m(5," Overlays "),i(6,"clr-vertical-nav-group-children",5),l(7,"ukis-layer-control",6),p()(),i(8,"clr-vertical-nav-group",3),l(9,"cds-icon",7),m(10," Layers "),i(11,"clr-vertical-nav-group-children",5),l(12,"ukis-layer-control",8),p()(),i(13,"clr-vertical-nav-group",3),l(14,"cds-icon",9),m(15," Baselayers "),i(16,"clr-vertical-nav-group-children",5),l(17,"ukis-base-layer-control",8),p()(),i(18,"clr-vertical-nav-group"),l(19,"cds-icon",10),m(20," OWC Control "),i(21,"clr-vertical-nav-group-children",5)(22,"button",11),b("click",function(){return e.downloadOwc()}),m(23,"Download OWC"),p()()()()),t&2&&(o(),n("layersSvc",e.layersSvc)("mapState",e.mapStateSvc)("controls",e.controls),o(),n("clrVerticalNavCollapsible",!0)("clr-nav-level",2),o(),n("clrVerticalNavGroupExpanded",!0),o(4),n("layersSvc",e.layersSvc)("mapStateSvc",e.mapStateSvc)("layerfilter","Overlays"),o(),n("clrVerticalNavGroupExpanded",!0),o(4),n("layersSvc",e.layersSvc)("mapStateSvc",e.mapStateSvc),o(),n("clrVerticalNavGroupExpanded",!0),o(4),n("layersSvc",e.layersSvc)("mapStateSvc",e.mapStateSvc))},dependencies:[J,W,k,B,P,T,G,_,F,R,K,Z],styles:["[_nghost-%COMP%]     .zoom-number{bottom:2.5em;left:8px}"]})}}return r})();var A=[{path:"",component:w}],Q=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=h({type:r})}static{this.\u0275inj=f({imports:[C.forChild(A),C]})}}return r})(),ge=(()=>{class r{static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=h({type:r})}static{this.\u0275inj=f({imports:[M,Q,D,w]})}}return r})();export{ge as RouteExampleOwcLayersModule,Q as RouteExampleOwcLayersRoutingModule};
