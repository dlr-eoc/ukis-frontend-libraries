(self.webpackChunkdemo_maps=self.webpackChunkdemo_maps||[]).push([[218],{351:(le,pt)=>{pt.read=function(s,Y,z,Q,$){var L,M,w=8*$-Q-1,I=(1<<w)-1,y=I>>1,m=-7,u=z?$-1:0,o=z?-1:1,i=s[Y+u];for(u+=o,L=i&(1<<-m)-1,i>>=-m,m+=w;m>0;L=256*L+s[Y+u],u+=o,m-=8);for(M=L&(1<<-m)-1,L>>=-m,m+=Q;m>0;M=256*M+s[Y+u],u+=o,m-=8);if(0===L)L=1-y;else{if(L===I)return M?NaN:1/0*(i?-1:1);M+=Math.pow(2,Q),L-=y}return(i?-1:1)*M*Math.pow(2,L-Q)},pt.write=function(s,Y,z,Q,$,L){var M,w,I,y=8*L-$-1,m=(1<<y)-1,u=m>>1,o=23===$?Math.pow(2,-24)-Math.pow(2,-77):0,i=Q?0:L-1,l=Q?1:-1,n=Y<0||0===Y&&1/Y<0?1:0;for(Y=Math.abs(Y),isNaN(Y)||Y===1/0?(w=isNaN(Y)?1:0,M=m):(M=Math.floor(Math.log(Y)/Math.LN2),Y*(I=Math.pow(2,-M))<1&&(M--,I*=2),(Y+=M+u>=1?o/I:o*Math.pow(2,1-u))*I>=2&&(M++,I/=2),M+u>=m?(w=0,M=m):M+u>=1?(w=(Y*I-1)*Math.pow(2,$),M+=u):(w=Y*Math.pow(2,u-1)*Math.pow(2,$),M=0));$>=8;s[z+i]=255&w,i+=l,w/=256,$-=8);for(M=M<<$|w,y+=$;y>0;s[z+i]=255&M,i+=l,M/=256,y-=8);s[z+i-l]|=128*n}},1763:(le,pt,s)=>{"use strict";le.exports=z;var Y=s(351);function z(A){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(A)?A:new Uint8Array(A||0),this.pos=0,this.type=0,this.length=this.buf.length}z.Varint=0,z.Fixed64=1,z.Bytes=2,z.Fixed32=5;var Q=4294967296,$=1/Q,M=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function I(A){return A.type===z.Bytes?A.readVarint()+A.pos:A.pos+1}function i(A,D,R){var x=D<=16383?1:D<=2097151?2:D<=268435455?3:Math.floor(Math.log(D)/(7*Math.LN2));R.realloc(x);for(var T=R.pos-1;T>=A;T--)R.buf[T+x]=R.buf[T]}function l(A,D){for(var R=0;R<A.length;R++)D.writeVarint(A[R])}function n(A,D){for(var R=0;R<A.length;R++)D.writeSVarint(A[R])}function d(A,D){for(var R=0;R<A.length;R++)D.writeFloat(A[R])}function f(A,D){for(var R=0;R<A.length;R++)D.writeDouble(A[R])}function r(A,D){for(var R=0;R<A.length;R++)D.writeBoolean(A[R])}function C(A,D){for(var R=0;R<A.length;R++)D.writeFixed32(A[R])}function _(A,D){for(var R=0;R<A.length;R++)D.writeSFixed32(A[R])}function v(A,D){for(var R=0;R<A.length;R++)D.writeFixed64(A[R])}function F(A,D){for(var R=0;R<A.length;R++)D.writeSFixed64(A[R])}function O(A,D){return(A[D]|A[D+1]<<8|A[D+2]<<16)+16777216*A[D+3]}function X(A,D,R){A[R]=D,A[R+1]=D>>>8,A[R+2]=D>>>16,A[R+3]=D>>>24}function P(A,D){return(A[D]|A[D+1]<<8|A[D+2]<<16)+(A[D+3]<<24)}z.prototype={destroy:function(){this.buf=null},readFields:function(A,D,R){for(R=R||this.length;this.pos<R;){var x=this.readVarint(),T=x>>3,U=this.pos;this.type=7&x,A(T,D,this),this.pos===U&&this.skip(x)}return D},readMessage:function(A,D){return this.readFields(A,D,this.readVarint()+this.pos)},readFixed32:function(){var A=O(this.buf,this.pos);return this.pos+=4,A},readSFixed32:function(){var A=P(this.buf,this.pos);return this.pos+=4,A},readFixed64:function(){var A=O(this.buf,this.pos)+O(this.buf,this.pos+4)*Q;return this.pos+=8,A},readSFixed64:function(){var A=O(this.buf,this.pos)+P(this.buf,this.pos+4)*Q;return this.pos+=8,A},readFloat:function(){var A=Y.read(this.buf,this.pos,!0,23,4);return this.pos+=4,A},readDouble:function(){var A=Y.read(this.buf,this.pos,!0,52,8);return this.pos+=8,A},readVarint:function(A){var R,x,D=this.buf;return R=127&(x=D[this.pos++]),x<128||(R|=(127&(x=D[this.pos++]))<<7,x<128)||(R|=(127&(x=D[this.pos++]))<<14,x<128)||(R|=(127&(x=D[this.pos++]))<<21,x<128)?R:function w(A,D,R){var T,U,x=R.buf;if(T=(112&(U=x[R.pos++]))>>4,U<128||(T|=(127&(U=x[R.pos++]))<<3,U<128)||(T|=(127&(U=x[R.pos++]))<<10,U<128)||(T|=(127&(U=x[R.pos++]))<<17,U<128)||(T|=(127&(U=x[R.pos++]))<<24,U<128)||(T|=(1&(U=x[R.pos++]))<<31,U<128))return function y(A,D,R){return R?4294967296*D+(A>>>0):4294967296*(D>>>0)+(A>>>0)}(A,T,D);throw new Error("Expected varint not more than 10 bytes")}(R|=(15&(x=D[this.pos]))<<28,A,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var A=this.readVarint();return A%2==1?(A+1)/-2:A/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var A=this.readVarint()+this.pos,D=this.pos;return this.pos=A,A-D>=12&&M?function W(A,D,R){return M.decode(A.subarray(D,R))}(this.buf,D,A):function E(A,D,R){for(var x="",T=D;T<R;){var J,ht,mt,U=A[T],tt=null,it=U>239?4:U>223?3:U>191?2:1;if(T+it>R)break;1===it?U<128&&(tt=U):2===it?128==(192&(J=A[T+1]))&&(tt=(31&U)<<6|63&J)<=127&&(tt=null):3===it?(ht=A[T+2],128==(192&(J=A[T+1]))&&128==(192&ht)&&((tt=(15&U)<<12|(63&J)<<6|63&ht)<=2047||tt>=55296&&tt<=57343)&&(tt=null)):4===it&&(ht=A[T+2],mt=A[T+3],128==(192&(J=A[T+1]))&&128==(192&ht)&&128==(192&mt)&&((tt=(15&U)<<18|(63&J)<<12|(63&ht)<<6|63&mt)<=65535||tt>=1114112)&&(tt=null)),null===tt?(tt=65533,it=1):tt>65535&&(tt-=65536,x+=String.fromCharCode(tt>>>10&1023|55296),tt=56320|1023&tt),x+=String.fromCharCode(tt),T+=it}return x}(this.buf,D,A)},readBytes:function(){var A=this.readVarint()+this.pos,D=this.buf.subarray(this.pos,A);return this.pos=A,D},readPackedVarint:function(A,D){if(this.type!==z.Bytes)return A.push(this.readVarint(D));var R=I(this);for(A=A||[];this.pos<R;)A.push(this.readVarint(D));return A},readPackedSVarint:function(A){if(this.type!==z.Bytes)return A.push(this.readSVarint());var D=I(this);for(A=A||[];this.pos<D;)A.push(this.readSVarint());return A},readPackedBoolean:function(A){if(this.type!==z.Bytes)return A.push(this.readBoolean());var D=I(this);for(A=A||[];this.pos<D;)A.push(this.readBoolean());return A},readPackedFloat:function(A){if(this.type!==z.Bytes)return A.push(this.readFloat());var D=I(this);for(A=A||[];this.pos<D;)A.push(this.readFloat());return A},readPackedDouble:function(A){if(this.type!==z.Bytes)return A.push(this.readDouble());var D=I(this);for(A=A||[];this.pos<D;)A.push(this.readDouble());return A},readPackedFixed32:function(A){if(this.type!==z.Bytes)return A.push(this.readFixed32());var D=I(this);for(A=A||[];this.pos<D;)A.push(this.readFixed32());return A},readPackedSFixed32:function(A){if(this.type!==z.Bytes)return A.push(this.readSFixed32());var D=I(this);for(A=A||[];this.pos<D;)A.push(this.readSFixed32());return A},readPackedFixed64:function(A){if(this.type!==z.Bytes)return A.push(this.readFixed64());var D=I(this);for(A=A||[];this.pos<D;)A.push(this.readFixed64());return A},readPackedSFixed64:function(A){if(this.type!==z.Bytes)return A.push(this.readSFixed64());var D=I(this);for(A=A||[];this.pos<D;)A.push(this.readSFixed64());return A},skip:function(A){var D=7&A;if(D===z.Varint)for(;this.buf[this.pos++]>127;);else if(D===z.Bytes)this.pos=this.readVarint()+this.pos;else if(D===z.Fixed32)this.pos+=4;else{if(D!==z.Fixed64)throw new Error("Unimplemented type: "+D);this.pos+=8}},writeTag:function(A,D){this.writeVarint(A<<3|D)},realloc:function(A){for(var D=this.length||16;D<this.pos+A;)D*=2;if(D!==this.length){var R=new Uint8Array(D);R.set(this.buf),this.buf=R,this.length=D}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(A){this.realloc(4),X(this.buf,A,this.pos),this.pos+=4},writeSFixed32:function(A){this.realloc(4),X(this.buf,A,this.pos),this.pos+=4},writeFixed64:function(A){this.realloc(8),X(this.buf,-1&A,this.pos),X(this.buf,Math.floor(A*$),this.pos+4),this.pos+=8},writeSFixed64:function(A){this.realloc(8),X(this.buf,-1&A,this.pos),X(this.buf,Math.floor(A*$),this.pos+4),this.pos+=8},writeVarint:function(A){(A=+A||0)>268435455||A<0?function m(A,D){var R,x;if(A>=0?(R=A%4294967296|0,x=A/4294967296|0):(x=~(-A/4294967296),4294967295^(R=~(-A%4294967296))?R=R+1|0:(R=0,x=x+1|0)),A>=0x10000000000000000||A<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");D.realloc(10),function u(A,D,R){R.buf[R.pos++]=127&A|128,A>>>=7,R.buf[R.pos++]=127&A|128,A>>>=7,R.buf[R.pos++]=127&A|128,A>>>=7,R.buf[R.pos++]=127&A|128,R.buf[R.pos]=127&(A>>>=7)}(R,0,D),function o(A,D){var R=(7&A)<<4;D.buf[D.pos++]|=R|((A>>>=3)?128:0),A&&(D.buf[D.pos++]=127&A|((A>>>=7)?128:0),A&&(D.buf[D.pos++]=127&A|((A>>>=7)?128:0),A&&(D.buf[D.pos++]=127&A|((A>>>=7)?128:0),A&&(D.buf[D.pos++]=127&A|((A>>>=7)?128:0),A&&(D.buf[D.pos++]=127&A)))))}(x,D)}(A,this):(this.realloc(4),this.buf[this.pos++]=127&A|(A>127?128:0),!(A<=127)&&(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),!(A<=127)&&(this.buf[this.pos++]=127&(A>>>=7)|(A>127?128:0),!(A<=127)&&(this.buf[this.pos++]=A>>>7&127))))},writeSVarint:function(A){this.writeVarint(A<0?2*-A-1:2*A)},writeBoolean:function(A){this.writeVarint(!!A)},writeString:function(A){A=String(A),this.realloc(4*A.length),this.pos++;var D=this.pos;this.pos=function Z(A,D,R){for(var T,U,x=0;x<D.length;x++){if((T=D.charCodeAt(x))>55295&&T<57344){if(!U){T>56319||x+1===D.length?(A[R++]=239,A[R++]=191,A[R++]=189):U=T;continue}if(T<56320){A[R++]=239,A[R++]=191,A[R++]=189,U=T;continue}T=U-55296<<10|T-56320|65536,U=null}else U&&(A[R++]=239,A[R++]=191,A[R++]=189,U=null);T<128?A[R++]=T:(T<2048?A[R++]=T>>6|192:(T<65536?A[R++]=T>>12|224:(A[R++]=T>>18|240,A[R++]=T>>12&63|128),A[R++]=T>>6&63|128),A[R++]=63&T|128)}return R}(this.buf,A,this.pos);var R=this.pos-D;R>=128&&i(D,R,this),this.pos=D-1,this.writeVarint(R),this.pos+=R},writeFloat:function(A){this.realloc(4),Y.write(this.buf,A,this.pos,!0,23,4),this.pos+=4},writeDouble:function(A){this.realloc(8),Y.write(this.buf,A,this.pos,!0,52,8),this.pos+=8},writeBytes:function(A){var D=A.length;this.writeVarint(D),this.realloc(D);for(var R=0;R<D;R++)this.buf[this.pos++]=A[R]},writeRawMessage:function(A,D){this.pos++;var R=this.pos;A(D,this);var x=this.pos-R;x>=128&&i(R,x,this),this.pos=R-1,this.writeVarint(x),this.pos+=x},writeMessage:function(A,D,R){this.writeTag(A,z.Bytes),this.writeRawMessage(D,R)},writePackedVarint:function(A,D){D.length&&this.writeMessage(A,l,D)},writePackedSVarint:function(A,D){D.length&&this.writeMessage(A,n,D)},writePackedBoolean:function(A,D){D.length&&this.writeMessage(A,r,D)},writePackedFloat:function(A,D){D.length&&this.writeMessage(A,d,D)},writePackedDouble:function(A,D){D.length&&this.writeMessage(A,f,D)},writePackedFixed32:function(A,D){D.length&&this.writeMessage(A,C,D)},writePackedSFixed32:function(A,D){D.length&&this.writeMessage(A,_,D)},writePackedFixed64:function(A,D){D.length&&this.writeMessage(A,v,D)},writePackedSFixed64:function(A,D){D.length&&this.writeMessage(A,F,D)},writeBytesField:function(A,D){this.writeTag(A,z.Bytes),this.writeBytes(D)},writeFixed32Field:function(A,D){this.writeTag(A,z.Fixed32),this.writeFixed32(D)},writeSFixed32Field:function(A,D){this.writeTag(A,z.Fixed32),this.writeSFixed32(D)},writeFixed64Field:function(A,D){this.writeTag(A,z.Fixed64),this.writeFixed64(D)},writeSFixed64Field:function(A,D){this.writeTag(A,z.Fixed64),this.writeSFixed64(D)},writeVarintField:function(A,D){this.writeTag(A,z.Varint),this.writeVarint(D)},writeSVarintField:function(A,D){this.writeTag(A,z.Varint),this.writeSVarint(D)},writeStringField:function(A,D){this.writeTag(A,z.Bytes),this.writeString(D)},writeFloatField:function(A,D){this.writeTag(A,z.Fixed32),this.writeFloat(D)},writeDoubleField:function(A,D){this.writeTag(A,z.Fixed64),this.writeDouble(D)},writeBooleanField:function(A,D){this.writeVarintField(A,!!D)}}},3544:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Me});var z=1,Q=2,$=3,M=5,w=6378137,I=6356752.314,y=.0066943799901413165,m=484813681109536e-20,u=Math.PI/2,n=1e-10,d=.017453292519943295,f=57.29577951308232,r=Math.PI/4,C=2*Math.PI,_=3.14159265359,v={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const F={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var O=/[\s_\-\/\(\)]/g;function X(t,a){if(t[a])return t[a];for(var q,p=Object.keys(t),G=a.toLowerCase().replace(O,""),k=-1;++k<p.length;)if((q=p[k]).toLowerCase().replace(O,"")===G)return t[q]}function P(t){var G,k,q,a={},p=t.split("+").map(function(nt){return nt.trim()}).filter(function(nt){return nt}).reduce(function(nt,At){var Bt=At.split("=");return Bt.push(!0),nt[Bt[0].toLowerCase()]=Bt[1],nt},{}),lt={proj:"projName",datum:"datumCode",rf:function(nt){a.rf=parseFloat(nt)},lat_0:function(nt){a.lat0=nt*d},lat_1:function(nt){a.lat1=nt*d},lat_2:function(nt){a.lat2=nt*d},lat_ts:function(nt){a.lat_ts=nt*d},lon_0:function(nt){a.long0=nt*d},lon_1:function(nt){a.long1=nt*d},lon_2:function(nt){a.long2=nt*d},alpha:function(nt){a.alpha=parseFloat(nt)*d},gamma:function(nt){a.rectified_grid_angle=parseFloat(nt)},lonc:function(nt){a.longc=nt*d},x_0:function(nt){a.x0=parseFloat(nt)},y_0:function(nt){a.y0=parseFloat(nt)},k_0:function(nt){a.k0=parseFloat(nt)},k:function(nt){a.k0=parseFloat(nt)},a:function(nt){a.a=parseFloat(nt)},b:function(nt){a.b=parseFloat(nt)},r:function(nt){a.a=a.b=parseFloat(nt)},r_a:function(){a.R_A=!0},zone:function(nt){a.zone=parseInt(nt,10)},south:function(){a.utmSouth=!0},towgs84:function(nt){a.datum_params=nt.split(",").map(function(At){return parseFloat(At)})},to_meter:function(nt){a.to_meter=parseFloat(nt)},units:function(nt){a.units=nt;var At=X(F,nt);At&&(a.to_meter=At.to_meter)},from_greenwich:function(nt){a.from_greenwich=nt*d},pm:function(nt){var At=X(v,nt);a.from_greenwich=(At||parseFloat(nt))*d},nadgrids:function(nt){"@null"===nt?a.datumCode="none":a.nadgrids=nt},axis:function(nt){var At="ewnsud";3===nt.length&&-1!==At.indexOf(nt.substr(0,1))&&-1!==At.indexOf(nt.substr(1,1))&&-1!==At.indexOf(nt.substr(2,1))&&(a.axis=nt)},approx:function(){a.approx=!0}};for(G in p)k=p[G],G in lt?"function"==typeof(q=lt[G])?q(k):a[q]=k:a[G]=k;return"string"==typeof a.datumCode&&"WGS84"!==a.datumCode&&(a.datumCode=a.datumCode.toLowerCase()),a}const E=function mt(t){return new ht(t).output()};var W=1,T=/\s/,U=/[A-Za-z]/,tt=/[A-Za-z84_]/,it=/[,\]]/,J=/[\d\.E\-\+]/;function ht(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=W}function Et(t,a,p){Array.isArray(a)&&(p.unshift(a),a=null);var k=p.reduce(function(q,lt){return Ot(lt,q),q},a?{}:t);a&&(t[a]=k)}function Ot(t,a){if(Array.isArray(t)){var p=t.shift();if("PARAMETER"===p&&(p=t.shift()),1===t.length)return Array.isArray(t[0])?(a[p]={},void Ot(t[0],a[p])):void(a[p]=t[0]);if(t.length)if("TOWGS84"!==p){if("AXIS"===p)return p in a||(a[p]=[]),void a[p].push(t);var G;switch(Array.isArray(p)||(a[p]={}),p){case"UNIT":case"PRIMEM":case"VERT_DATUM":return a[p]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&Ot(t[2],a[p]));case"SPHEROID":case"ELLIPSOID":return a[p]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&Ot(t[3],a[p]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Et(a,p,t);default:for(G=-1;++G<t.length;)if(!Array.isArray(t[G]))return Ot(t,a[p]);return Et(a,p,t)}}else a[p]=t;else a[p]=!0}else a[t]=!0}ht.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;T.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case W:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},ht.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(it.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},ht.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=W)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=W,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},ht.prototype.number=function(t){if(!J.test(t)){if(it.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},ht.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},ht.prototype.keyword=function(t){if(tt.test(t))this.word+=t;else{if("["===t){var a=[];return a.push(this.word),this.level++,null===this.root?this.root=a:this.currentObject.push(a),this.stack.push(this.currentObject),this.currentObject=a,void(this.state=W)}if(!it.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},ht.prototype.neutral=function(t){if(U.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(J.test(t))return this.word=t,void(this.state=3);if(!it.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},ht.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Nt=.017453292519943295;function Ct(t){return t*Nt}function re(t){var a=E(t),p=a.shift(),G=a.shift();a.unshift(["name",G]),a.unshift(["type",p]);var k={};return Ot(a,k),function Dt(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):t.projName="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION,t.AXIS){for(var a="",p=0,G=t.AXIS.length;p<G;++p){var k=[t.AXIS[p][0].toLowerCase(),t.AXIS[p][1].toLowerCase()];-1!==k[0].indexOf("north")||("y"===k[0]||"lat"===k[0])&&"north"===k[1]?a+="n":-1!==k[0].indexOf("south")||("y"===k[0]||"lat"===k[0])&&"south"===k[1]?a+="s":-1!==k[0].indexOf("east")||("x"===k[0]||"lon"===k[0])&&"east"===k[1]?a+="e":(-1!==k[0].indexOf("west")||("x"===k[0]||"lon"===k[0])&&"west"===k[1])&&(a+="w")}2===a.length&&(a+="u"),3===a.length&&(t.axis=a)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var q=t.GEOGCS;function lt(Bt){return Bt*(t.to_meter||1)}"GEOGCS"===t.type&&(q=t),q&&(t.datumCode=q.DATUM?q.DATUM.name.toLowerCase():q.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),("wgs_1984"===t.datumCode||"world_geodetic_system_1984"===t.datumCode)&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),q.DATUM&&q.DATUM.SPHEROID&&(t.ellps=q.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=q.DATUM.SPHEROID.a,t.rf=parseFloat(q.DATUM.SPHEROID.rf,10)),q.DATUM&&q.DATUM.TOWGS84&&(t.datum_params=q.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ct],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ct],["x0","false_easting",lt],["y0","false_northing",lt],["long0","central_meridian",Ct],["lat0","latitude_of_origin",Ct],["lat0","standard_parallel_1",Ct],["lat1","standard_parallel_1",Ct],["lat2","standard_parallel_2",Ct],["azimuth","Azimuth"],["alpha","azimuth",Ct],["srsCode","name"]].forEach(function(Bt){return function ft(t,a){var p=a[0],G=a[1];!(p in t)&&G in t&&(t[p]=t[G],3===a.length&&(t[p]=a[2](t[p])))}(t,Bt)}),!t.long0&&t.longc&&("Albers_Conic_Equal_Area"===t.projName||"Lambert_Azimuthal_Equal_Area"===t.projName)&&(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=Ct(t.lat0>0?90:-90)):(t.lat0=Ct(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(k),k}function Jt(t){var a=this;if(2===arguments.length){var p=arguments[1];Jt[t]="string"==typeof p?"+"===p.charAt(0)?P(arguments[1]):re(arguments[1]):p}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(G){Array.isArray(G)?Jt.apply(a,G):Jt(G)});if("string"==typeof t){if(t in Jt)return Jt[t]}else"EPSG"in t?Jt["EPSG:"+t.EPSG]=t:"ESRI"in t?Jt["ESRI:"+t.ESRI]=t:"IAU2000"in t?Jt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function Y(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Jt);const ye=Jt;var ct=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Vt=["3857","900913","3785","102113"];function _t(t,a){var p,G;if(t=t||{},!a)return t;for(G in a)void 0!==(p=a[G])&&(t[G]=p);return t}function zt(t,a,p){var G=t*a;return p/Math.sqrt(1-G*G)}function xe(t){return t<0?-1:1}function $t(t){return Math.abs(t)<=_?t:t-xe(t)*C}function ze(t,a,p){var G=t*p;return G=Math.pow((1-G)/(1+G),.5*t),Math.tan(.5*(u-a))/G}function Xe(t,a){for(var G,k,p=.5*t,q=u-2*Math.atan(a),lt=0;lt<=15;lt++)if(G=t*Math.sin(q),q+=k=u-2*Math.atan(a*Math.pow((1-G)/(1+G),p))-q,Math.abs(k)<=1e-10)return q;return-9999}function K(t){return t}var dt=[{init:function si(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):zt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function hi(t){var G,k,a=t.x,p=t.y;if(p*f>90&&p*f<-90&&a*f>180&&a*f<-180)return null;if(Math.abs(Math.abs(p)-u)<=n)return null;if(this.sphere)G=this.x0+this.a*this.k0*$t(a-this.long0),k=this.y0+this.a*this.k0*Math.log(Math.tan(r+.5*p));else{var q=Math.sin(p),lt=ze(this.e,p,q);G=this.x0+this.a*this.k0*$t(a-this.long0),k=this.y0-this.a*this.k0*Math.log(lt)}return t.x=G,t.y=k,t},inverse:function et(t){var G,k,a=t.x-this.x0,p=t.y-this.y0;if(this.sphere)k=u-2*Math.atan(Math.exp(-p/(this.a*this.k0)));else{var q=Math.exp(-p/(this.a*this.k0));if(-9999===(k=Xe(this.e,q)))return null}return G=$t(this.long0+a/(this.a*this.k0)),t.x=G,t.y=k,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function S(){},forward:K,inverse:K,names:["longlat","identity"]}],It={},Wt=[];function pe(t,a){var p=Wt.length;return t.names?(Wt[p]=t,t.names.forEach(function(G){It[G.toLowerCase()]=p}),this):(console.log(a),!0)}const He={start:function Ne(){dt.forEach(pe)},add:pe,get:function ce(t){if(!t)return!1;var a=t.toLowerCase();return typeof It[a]<"u"&&Wt[It[a]]?Wt[It[a]]:void 0}};var We={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},bi=We.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};We.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Ii={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},militargeographische_institut:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var Ji={};function ui(t){if(0===t.length)return null;var a="@"===t[0];return a&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!a,grid:null,isNull:!0}:{name:t,mandatory:!a,grid:Ji[t]||null,isNull:!1}}function vi(t){return t/3600*Math.PI/180}function Ei(t,a,p){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(a,p)))}function Sn(t){return t.map(function(a){return[vi(a.longitudeShift),vi(a.latitudeShift)]})}function Zn(t,a,p){return{name:Ei(t,a+8,a+16).trim(),parent:Ei(t,a+24,a+24+8).trim(),lowerLatitude:t.getFloat64(a+72,p),upperLatitude:t.getFloat64(a+88,p),lowerLongitude:t.getFloat64(a+104,p),upperLongitude:t.getFloat64(a+120,p),latitudeInterval:t.getFloat64(a+136,p),longitudeInterval:t.getFloat64(a+152,p),gridNodeCount:t.getInt32(a+168,p)}}function Ye(t,a,p,G){for(var k=a+176,lt=[],nt=0;nt<p.gridNodeCount;nt++){var At={latitudeShift:t.getFloat32(k+16*nt,G),longitudeShift:t.getFloat32(k+16*nt+4,G),latitudeAccuracy:t.getFloat32(k+16*nt+8,G),longitudeAccuracy:t.getFloat32(k+16*nt+12,G)};lt.push(At)}return lt}function Gi(t,a){if(!(this instanceof Gi))return new Gi(t);a=a||function(Bt){if(Bt)throw Bt};var p=function ti(t){if(!function oe(t){return"string"==typeof t}(t))return t;if(function _e(t){return t in ye}(t))return ye[t];if(function Gt(t){return ct.some(function(a){return t.indexOf(a)>-1})}(t)){var a=re(t);if(function ge(t){var a=X(t,"authority");if(a){var p=X(a,"epsg");return p&&Vt.indexOf(p)>-1}}(a))return ye["EPSG:3857"];var p=function Ae(t){var a=X(t,"extension");if(a)return X(a,"proj4")}(a);return p?P(p):a}return function qe(t){return"+"===t[0]}(t)?P(t):void 0}(t);if("object"==typeof p){var G=Gi.projections.get(p.projName);if(G){if(p.datumCode&&"none"!==p.datumCode){var k=X(Ii,p.datumCode);k&&(p.datum_params=p.datum_params||(k.towgs84?k.towgs84.split(","):null),p.ellps=k.ellipse,p.datumName=k.datumName?k.datumName:p.datumCode)}p.k0=p.k0||1,p.axis=p.axis||"enu",p.ellps=p.ellps||"wgs84",p.lat1=p.lat1||p.lat0;var q=function ni(t,a,p,G,k){if(!t){var q=X(We,G);q||(q=bi),t=q.a,a=q.b,p=q.rf}return p&&!a&&(a=(1-1/p)*t),(0===p||Math.abs(t-a)<n)&&(k=!0,a=t),{a:t,b:a,rf:p,sphere:k}}(p.a,p.b,p.rf,p.ellps,p.sphere),lt=function Mi(t,a,p,G){var k=t*t,q=a*a,lt=(k-q)/k,nt=0;return G?(k=(t*=1-lt*(.16666666666666666+lt*(.04722222222222222+.022156084656084655*lt)))*t,lt=0):nt=Math.sqrt(lt),{es:lt,e:nt,ep2:(k-q)/q}}(q.a,q.b,0,p.R_A),nt=function Ri(t){return void 0===t?null:t.split(",").map(ui)}(p.nadgrids),At=p.datum||function Ni(t,a,p,G,k,q,lt){var nt={};return nt.datum_type=void 0===t||"none"===t?M:4,a&&(nt.datum_params=a.map(parseFloat),(0!==nt.datum_params[0]||0!==nt.datum_params[1]||0!==nt.datum_params[2])&&(nt.datum_type=z),nt.datum_params.length>3&&(0!==nt.datum_params[3]||0!==nt.datum_params[4]||0!==nt.datum_params[5]||0!==nt.datum_params[6])&&(nt.datum_type=Q,nt.datum_params[3]*=m,nt.datum_params[4]*=m,nt.datum_params[5]*=m,nt.datum_params[6]=nt.datum_params[6]/1e6+1)),lt&&(nt.datum_type=$,nt.grids=lt),nt.a=p,nt.b=G,nt.es=k,nt.ep2=q,nt}(p.datumCode,p.datum_params,q.a,q.b,lt.es,lt.ep2,nt);_t(this,p),_t(this,G),this.a=q.a,this.b=q.b,this.rf=q.rf,this.sphere=q.sphere,this.es=lt.es,this.e=lt.e,this.ep2=lt.ep2,this.datum=At,this.init(),a(null,this)}else a(t)}else a(t)}(Gi.projections=He).start();const Hn=Gi;function An(t,a,p){var lt,nt,Bt,G=t.x,k=t.y,q=t.z?t.z:0;if(k<-u&&k>-1.001*u)k=-u;else if(k>u&&k<1.001*u)k=u;else{if(k<-u)return{x:-1/0,y:-1/0,z:t.z};if(k>u)return{x:1/0,y:1/0,z:t.z}}return G>Math.PI&&(G-=2*Math.PI),nt=Math.sin(k),Bt=Math.cos(k),{x:((lt=p/Math.sqrt(1-a*(nt*nt)))+q)*Bt*Math.cos(G),y:(lt+q)*Bt*Math.sin(G),z:(lt*(1-a)+q)*nt}}function _s(t,a,p,G){var nt,At,Bt,ne,Qt,he,De,je,$e,Ze,Be,Pi,Qe,dn,fn,oi=t.x,Ci=t.y,Si=t.z?t.z:0;if(nt=Math.sqrt(oi*oi+Ci*Ci),At=Math.sqrt(oi*oi+Ci*Ci+Si*Si),nt/p<1e-12){if(dn=0,At/p<1e-12)return fn=-G,{x:t.x,y:t.y,z:t.z}}else dn=Math.atan2(Ci,oi);Bt=Si/At,je=(ne=nt/At)*(1-a)*(Qt=1/Math.sqrt(1-a*(2-a)*ne*ne)),$e=Bt*Qt,Qe=0;do{Qe++,he=a*(De=p/Math.sqrt(1-a*$e*$e))/(De+(fn=nt*je+Si*$e-De*(1-a*$e*$e))),Pi=(Be=Bt*(Qt=1/Math.sqrt(1-he*(2-he)*ne*ne)))*je-(Ze=ne*(1-he)*Qt)*$e,je=Ze,$e=Be}while(Pi*Pi>1e-24&&Qe<30);return{x:dn,y:Math.atan(Be/Math.abs(Ze)),z:fn}}function on(t){return t===z||t===Q}function es(t,a,p){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var G={x:-p.x,y:p.y},k={x:Number.NaN,y:Number.NaN},lt=[];t:for(var nt=0;nt<t.grids.length;nt++){var At=t.grids[nt];if(lt.push(At.name),At.isNull){k=G;break}if(null!==At.grid)for(var Bt=At.grid.subgrids,ne=0,Qt=Bt.length;ne<Qt;ne++){var he=Bt[ne],De=(Math.abs(he.del[1])+Math.abs(he.del[0]))/1e4;if(!(he.ll[1]-De>G.y||he.ll[0]-De>G.x||he.ll[1]+(he.lim[1]-1)*he.del[1]+De<G.y||he.ll[0]+(he.lim[0]-1)*he.del[0]+De<G.x||(k=ks(G,a,he),isNaN(k.x))))break t}else if(At.mandatory)return console.log("Unable to find mandatory grid '"+At.name+"'"),-1}return isNaN(k.x)?(console.log("Failed to find a grid shift table for location '"+-G.x*f+" "+G.y*f+" tried: '"+lt+"'"),-1):(p.x=-k.x,p.y=k.y,0)}function ks(t,a,p){var G={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return G;var k={x:t.x,y:t.y};k.x-=p.ll[0],k.y-=p.ll[1],k.x=$t(k.x-Math.PI)+Math.PI;var q=ys(k,p);if(a){if(isNaN(q.x))return G;q.x=k.x-q.x,q.y=k.y-q.y;var At,Bt,lt=9;do{if(Bt=ys(q,p),isNaN(Bt.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}q.x+=(At={x:k.x-(Bt.x+q.x),y:k.y-(Bt.y+q.y)}).x,q.y+=At.y}while(lt--&&Math.abs(At.x)>1e-12&&Math.abs(At.y)>1e-12);if(lt<0)return console.log("Inverse grid shift iterator failed to converge."),G;G.x=$t(q.x+p.ll[0]),G.y=q.y+p.ll[1]}else isNaN(q.x)||(G.x=t.x+q.x,G.y=t.y+q.y);return G}function ys(t,a){var lt,p={x:t.x/a.del[0],y:t.y/a.del[1]},G_x=Math.floor(p.x),G_y=Math.floor(p.y),k_x=p.x-1*G_x,k_y=p.y-1*G_y,q={x:Number.NaN,y:Number.NaN};if(G_x<0||G_x>=a.lim[0]||G_y<0||G_y>=a.lim[1])return q;var nt_x=a.cvs[lt=G_y*a.lim[0]+G_x][0],nt_y=a.cvs[lt][1];lt++;var At_x=a.cvs[lt][0],At_y=a.cvs[lt][1],Bt_x=a.cvs[lt+=a.lim[0]][0],Bt_y=a.cvs[lt][1];lt--;var ne_y=a.cvs[lt][1],Qt=k_x*k_y,he=k_x*(1-k_y),De=(1-k_x)*(1-k_y),je=(1-k_x)*k_y;return q.x=De*nt_x+he*At_x+je*a.cvs[lt][0]+Qt*Bt_x,q.y=De*nt_y+he*At_y+je*ne_y+Qt*Bt_y,q}function us(t,a,p){var lt,nt,At,G=p.x,k=p.y,q=p.z||0,Bt={};for(At=0;At<3;At++)if(!a||2!==At||void 0!==p.z)switch(0===At?(lt=G,nt=-1!=="ew".indexOf(t.axis[At])?"x":"y"):1===At?(lt=k,nt=-1!=="ns".indexOf(t.axis[At])?"y":"x"):(lt=q,nt="z"),t.axis[At]){case"e":case"n":Bt[nt]=lt;break;case"w":case"s":Bt[nt]=-lt;break;case"u":void 0!==p[nt]&&(Bt.z=lt);break;case"d":void 0!==p[nt]&&(Bt.z=-lt);break;default:return null}return Bt}function or(t){var a={x:t[0],y:t[1]};return t.length>2&&(a.z=t[2]),t.length>3&&(a.m=t[3]),a}function _n(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function pn(t,a,p,G){var k,q=void 0!==(p=Array.isArray(p)?or(p):{x:p.x,y:p.y,z:p.z,m:p.m}).z;if(function tn(t){_n(t.x),_n(t.y)}(p),t.datum&&a.datum&&function Zi(t,a){return(t.datum.datum_type===z||t.datum.datum_type===Q||t.datum.datum_type===$)&&"WGS84"!==a.datumCode||(a.datum.datum_type===z||a.datum.datum_type===Q||a.datum.datum_type===$)&&"WGS84"!==t.datumCode}(t,a)&&(p=pn(t,k=new Hn("WGS84"),p,G),t=k),G&&"enu"!==t.axis&&(p=us(t,!1,p)),"longlat"===t.projName)p={x:p.x*d,y:p.y*d,z:p.z||0};else if(t.to_meter&&(p={x:p.x*t.to_meter,y:p.y*t.to_meter,z:p.z||0}),!(p=t.inverse(p)))return;if(t.from_greenwich&&(p.x+=t.from_greenwich),p=function cs(t,a,p){if(function rr(t,a){return!(t.datum_type!==a.datum_type||t.a!==a.a||Math.abs(t.es-a.es)>5e-11)&&(t.datum_type===z?t.datum_params[0]===a.datum_params[0]&&t.datum_params[1]===a.datum_params[1]&&t.datum_params[2]===a.datum_params[2]:t.datum_type!==Q||t.datum_params[0]===a.datum_params[0]&&t.datum_params[1]===a.datum_params[1]&&t.datum_params[2]===a.datum_params[2]&&t.datum_params[3]===a.datum_params[3]&&t.datum_params[4]===a.datum_params[4]&&t.datum_params[5]===a.datum_params[5]&&t.datum_params[6]===a.datum_params[6])}(t,a)||t.datum_type===M||a.datum_type===M)return p;var G=t.a,k=t.es;if(t.datum_type===$){if(0!==es(t,!1,p))return;G=w,k=y}var lt=a.a,nt=a.b,At=a.es;return a.datum_type===$&&(lt=w,nt=I,At=y),k!==At||G!==lt||on(t.datum_type)||on(a.datum_type)?(p=An(p,k,G),on(t.datum_type)&&(p=function ps(t,a,p){if(a===z)return{x:t.x+p[0],y:t.y+p[1],z:t.z+p[2]};if(a===Q){var lt=p[3],nt=p[4],At=p[5],Bt=p[6];return{x:Bt*(t.x-At*t.y+nt*t.z)+p[0],y:Bt*(At*t.x+t.y-lt*t.z)+p[1],z:Bt*(-nt*t.x+lt*t.y+t.z)+p[2]}}}(p,t.datum_type,t.datum_params)),on(a.datum_type)&&(p=function Ds(t,a,p){if(a===z)return{x:t.x-p[0],y:t.y-p[1],z:t.z-p[2]};if(a===Q){var lt=p[3],nt=p[4],At=p[5],Bt=p[6],ne=(t.x-p[0])/Bt,Qt=(t.y-p[1])/Bt,he=(t.z-p[2])/Bt;return{x:ne+At*Qt-nt*he,y:-At*ne+Qt+lt*he,z:nt*ne-lt*Qt+he}}}(p,a.datum_type,a.datum_params)),p=_s(p,At,lt,nt),a.datum_type!==$||0===es(a,!0,p)?p:void 0):p}(t.datum,a.datum,p))return a.from_greenwich&&(p={x:p.x-a.from_greenwich,y:p.y,z:p.z||0}),"longlat"===a.projName?p={x:p.x*f,y:p.y*f,z:p.z||0}:(p=a.forward(p),a.to_meter&&(p={x:p.x/a.to_meter,y:p.y/a.to_meter,z:p.z||0})),G&&"enu"!==a.axis?us(a,!0,p):(p&&!q&&delete p.z,p)}var Dn=Hn("WGS84");function zn(t,a,p,G){var k,q,lt;return Array.isArray(p)?(k=pn(t,a,p,G)||{x:NaN,y:NaN},p.length>2?typeof t.name<"u"&&"geocent"===t.name||typeof a.name<"u"&&"geocent"===a.name?"number"==typeof k.z?[k.x,k.y,k.z].concat(p.splice(3)):[k.x,k.y,p[2]].concat(p.splice(3)):[k.x,k.y].concat(p.splice(2)):[k.x,k.y]):(q=pn(t,a,p,G),2===(lt=Object.keys(p)).length||lt.forEach(function(nt){if(typeof t.name<"u"&&"geocent"===t.name||typeof a.name<"u"&&"geocent"===a.name){if("x"===nt||"y"===nt||"z"===nt)return}else if("x"===nt||"y"===nt)return;q[nt]=p[nt]}),q)}function Ln(t){return t instanceof Hn?t:t.oProj?t.oProj:Hn(t)}const Ki=function Qi(t,a,p){t=Ln(t);var k,G=!1;return typeof a>"u"?(a=t,t=Dn,G=!0):(typeof a.x<"u"||Array.isArray(a))&&(p=a,a=t,t=Dn,G=!0),a=Ln(a),p?zn(t,a,p):(k={forward:function(q,lt){return zn(t,a,q,lt)},inverse:function(q,lt){return zn(a,t,q,lt)}},G&&(k.oProj=a),k)};var Tn=6,Ps="AJSAJS",Ls="AFAFAF",Wn=65,yn=73,$n=79,vn=86,is=90;const zs={forward:Ks,inverse:function Jn(t){var a=Fr(ns(t.toUpperCase()));return a.lat&&a.lon?[a.lon,a.lat,a.lon,a.lat]:[a.left,a.bottom,a.right,a.top]},toPoint:Xs};function Ks(t,a){return a=a||5,function ar(t,a){var p="00000"+t.easting,G="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function br(t,a,p){var G=Qn(p);return function ds(t,a,p){var G=p-1,k=Ps.charCodeAt(G),q=Ls.charCodeAt(G),lt=k+t-1,nt=q+a,At=!1;return lt>is&&(lt=lt-is+Wn-1,At=!0),(lt===yn||k<yn&&lt>yn||(lt>yn||k<yn)&&At)&&lt++,(lt===$n||k<$n&&lt>$n||(lt>$n||k<$n)&&At)&&++lt===yn&&lt++,lt>is&&(lt=lt-is+Wn-1),nt>vn?(nt=nt-vn+Wn-1,At=!0):At=!1,(nt===yn||q<yn&&nt>yn||(nt>yn||q<yn)&&At)&&nt++,(nt===$n||q<$n&&nt>$n||(nt>$n||q<$n)&&At)&&++nt===yn&&nt++,nt>vn&&(nt=nt-vn+Wn-1),String.fromCharCode(lt)+String.fromCharCode(nt)}(Math.floor(t/1e5),Math.floor(a/1e5)%20,G)}(t.easting,t.northing,t.zoneNumber)+p.substr(p.length-5,a)+G.substr(G.length-5,a)}(function Vr(t){var nt,At,Bt,ne,Qt,$e,Ze,a=t.lat,p=t.lon,G=6378137,k=.00669438,q=.9996,De=vs(a),je=vs(p);Ze=Math.floor((p+180)/6)+1,180===p&&(Ze=60),a>=56&&a<64&&p>=3&&p<12&&(Ze=32),a>=72&&a<84&&(p>=0&&p<9?Ze=31:p>=9&&p<21?Ze=33:p>=21&&p<33?Ze=35:p>=33&&p<42&&(Ze=37)),$e=vs(6*(Ze-1)-180+3),nt=k/(1-k),At=G/Math.sqrt(1-k*Math.sin(De)*Math.sin(De)),Bt=Math.tan(De)*Math.tan(De),ne=nt*Math.cos(De)*Math.cos(De);var Be=q*At*((Qt=Math.cos(De)*(je-$e))+(1-Bt+ne)*Qt*Qt*Qt/6+(5-18*Bt+Bt*Bt+72*ne-58*nt)*Qt*Qt*Qt*Qt*Qt/120)+5e5,Pi=q*(G*(.9983242984503243*De-.002514607064228144*Math.sin(2*De)+2639046602129982e-21*Math.sin(4*De)-35*k*k*k/3072*Math.sin(6*De))+At*Math.tan(De)*(Qt*Qt/2+(5-Bt+9*ne+4*ne*ne)*Qt*Qt*Qt*Qt/24+(61-58*Bt+Bt*Bt+600*ne-330*nt)*Qt*Qt*Qt*Qt*Qt*Qt/720));return a<0&&(Pi+=1e7),{northing:Math.round(Pi),easting:Math.round(Be),zoneNumber:Ze,zoneLetter:Yr(a)}}({lat:t[1],lon:t[0]}),a)}function Xs(t){var a=Fr(ns(t.toUpperCase()));return a.lat&&a.lon?[a.lon,a.lat]:[(a.left+a.right)/2,(a.top+a.bottom)/2]}function vs(t){return t*(Math.PI/180)}function Ir(t){return t/Math.PI*180}function Fr(t){var a=t.northing,p=t.easting,G=t.zoneLetter,k=t.zoneNumber;if(k<0||k>60)return null;var At,ne,Qt,he,De,je,Ze,Be,Pi,q=.9996,nt=.00669438,Bt=(1-Math.sqrt(1-nt))/(1+Math.sqrt(1-nt)),Qe=p-5e5,oi=a;G<"N"&&(oi-=1e7),Ze=6*(k-1)-180+3,At=nt/(1-nt),Pi=(Be=oi/q/6367449.145945056)+(3*Bt/2-27*Bt*Bt*Bt/32)*Math.sin(2*Be)+(21*Bt*Bt/16-55*Bt*Bt*Bt*Bt/32)*Math.sin(4*Be)+151*Bt*Bt*Bt/96*Math.sin(6*Be),ne=6378137/Math.sqrt(1-nt*Math.sin(Pi)*Math.sin(Pi)),Qt=Math.tan(Pi)*Math.tan(Pi),he=At*Math.cos(Pi)*Math.cos(Pi),De=6378137*(1-nt)/Math.pow(1-nt*Math.sin(Pi)*Math.sin(Pi),1.5),je=Qe/(ne*q);var Ci=Pi-ne*Math.tan(Pi)/De*(je*je/2-(5+3*Qt+10*he-4*he*he-9*At)*je*je*je*je/24+(61+90*Qt+298*he+45*Qt*Qt-252*At-3*he*he)*je*je*je*je*je*je/720);Ci=Ir(Ci);var dn,Si=(je-(1+2*Qt+he)*je*je*je/6+(5-2*he+28*Qt-3*he*he+8*At+24*Qt*Qt)*je*je*je*je*je/120)/Math.cos(Pi);if(Si=Ze+Ir(Si),t.accuracy){var sn=Fr({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});dn={top:sn.lat,right:sn.lon,bottom:Ci,left:Si}}else dn={lat:Ci,lon:Si};return dn}function Yr(t){var a="Z";return 84>=t&&t>=72?a="X":72>t&&t>=64?a="W":64>t&&t>=56?a="V":56>t&&t>=48?a="U":48>t&&t>=40?a="T":40>t&&t>=32?a="S":32>t&&t>=24?a="R":24>t&&t>=16?a="Q":16>t&&t>=8?a="P":8>t&&t>=0?a="N":0>t&&t>=-8?a="M":-8>t&&t>=-16?a="L":-16>t&&t>=-24?a="K":-24>t&&t>=-32?a="J":-32>t&&t>=-40?a="H":-40>t&&t>=-48?a="G":-48>t&&t>=-56?a="F":-56>t&&t>=-64?a="E":-64>t&&t>=-72?a="D":-72>t&&t>=-80&&(a="C"),a}function Qn(t){var a=t%Tn;return 0===a&&(a=Tn),a}function ns(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var k,a=t.length,p=null,G="",q=0;!/[A-Z]/.test(k=t.charAt(q));){if(q>=2)throw"MGRSPoint bad conversion from: "+t;G+=k,q++}var lt=parseInt(G,10);if(0===q||q+3>a)throw"MGRSPoint bad conversion from: "+t;var nt=t.charAt(q++);if(nt<="A"||"B"===nt||"Y"===nt||nt>="Z"||"I"===nt||"O"===nt)throw"MGRSPoint zone letter "+nt+" not handled: "+t;p=t.substring(q,q+=2);for(var At=Qn(lt),Bt=function qn(t,a){for(var p=Ps.charCodeAt(a-1),G=1e5,k=!1;p!==t.charCodeAt(0);){if(++p===yn&&p++,p===$n&&p++,p>is){if(k)throw"Bad character: "+t;p=Wn,k=!0}G+=1e5}return G}(p.charAt(0),At),ne=function ss(t,a){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var p=Ls.charCodeAt(a-1),G=0,k=!1;p!==t.charCodeAt(0);){if(++p===yn&&p++,p===$n&&p++,p>vn){if(k)throw"Bad character: "+t;p=Wn,k=!0}G+=1e5}return G}(p.charAt(1),At);ne<ts(nt);)ne+=2e6;var Qt=a-q;if(Qt%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var $e,Ze,Be,he=Qt/2,De=0,je=0;return he>0&&($e=1e5/Math.pow(10,he),Ze=t.substring(q,q+he),De=parseFloat(Ze)*$e,Be=t.substring(q+he),je=parseFloat(Be)*$e),{easting:De+Bt,northing:je+ne,zoneLetter:nt,zoneNumber:lt,accuracy:$e}}function ts(t){var a;switch(t){case"C":a=11e5;break;case"D":a=2e6;break;case"E":a=28e5;break;case"F":a=37e5;break;case"G":a=46e5;break;case"H":a=55e5;break;case"J":a=64e5;break;case"K":a=73e5;break;case"L":a=82e5;break;case"M":a=91e5;break;case"N":a=0;break;case"P":a=8e5;break;case"Q":a=17e5;break;case"R":a=26e5;break;case"S":a=35e5;break;case"T":a=44e5;break;case"U":a=53e5;break;case"V":a=62e5;break;case"W":a=7e6;break;case"X":a=79e5;break;default:a=-1}if(a>=0)return a;throw"Invalid zone letter: "+t}function hn(t,a,p){if(!(this instanceof hn))return new hn(t,a,p);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&typeof a>"u"){var G=t.split(",");this.x=parseFloat(G[0],10),this.y=parseFloat(G[1],10),this.z=parseFloat(G[2],10)||0}else this.x=t,this.y=a,this.z=p||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}hn.fromMGRS=function(t){return new hn(Xs(t))},hn.prototype.toMGRS=function(t){return Ks([this.x,this.y],t)};const Cn=hn;var _r=.01953125,fs=.01068115234375;function mi(t){var a=[];a[0]=1-t*(.25+t*(.046875+t*(_r+t*fs))),a[1]=t*(.75-t*(.046875+t*(_r+t*fs)));var p=t*t;return a[2]=p*(.46875-t*(.013020833333333334+.007120768229166667*t)),a[3]=(p*=t)*(.3645833333333333-.005696614583333333*t),a[4]=p*t*.3076171875,a}function pi(t,a,p,G){return G[0]*t-(p*=a)*(G[1]+(a*=a)*(G[2]+a*(G[3]+a*G[4])))}function ji(t,a,p){for(var G=1/(1-a),k=t,q=20;q;--q){var lt=Math.sin(k),nt=1-a*lt*lt;if(k-=nt=(pi(k,lt,Math.cos(k),p)-t)*(nt*Math.sqrt(nt))*G,Math.abs(nt)<n)return k}return k}const rs={init:function Ui(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=mi(this.es),this.ml0=pi(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function Is(t){var k,q,lt,p=t.y,G=$t(t.x-this.long0),nt=Math.sin(p),At=Math.cos(p);if(this.es){var ne=At*G,Qt=Math.pow(ne,2),he=this.ep2*Math.pow(At,2),De=Math.pow(he,2),je=Math.abs(At)>n?Math.tan(p):0,$e=Math.pow(je,2),Ze=Math.pow($e,2);k=1-this.es*Math.pow(nt,2),ne/=Math.sqrt(k);var Be=pi(p,nt,At,this.en);q=this.a*(this.k0*ne*(1+Qt/6*(1-$e+he+Qt/20*(5-18*$e+Ze+14*he-58*$e*he+Qt/42*(61+179*Ze-Ze*$e-479*$e)))))+this.x0,lt=this.a*(this.k0*(Be-this.ml0+nt*G*ne/2*(1+Qt/12*(5-$e+9*he+4*De+Qt/30*(61+Ze-58*$e+270*he-330*$e*he+Qt/56*(1385+543*Ze-Ze*$e-3111*$e))))))+this.y0}else{var Bt=At*Math.sin(G);if(Math.abs(Math.abs(Bt)-1)<n)return 93;if(q=.5*this.a*this.k0*Math.log((1+Bt)/(1-Bt))+this.x0,lt=At*Math.cos(G)/Math.sqrt(1-Math.pow(Bt,2)),(Bt=Math.abs(lt))>=1){if(Bt-1>n)return 93;lt=0}else lt=Math.acos(lt);p<0&&(lt=-lt),lt=this.a*this.k0*(lt-this.lat0)+this.y0}return t.x=q,t.y=lt,t},inverse:function qi(t){var a,p,G,k,q=1/this.a*(t.x-this.x0),lt=1/this.a*(t.y-this.y0);if(this.es)if(p=ji(a=this.ml0+lt/this.k0,this.es,this.en),Math.abs(p)<u){var Qt=Math.sin(p),he=Math.cos(p),De=Math.abs(he)>n?Math.tan(p):0,je=this.ep2*Math.pow(he,2),$e=Math.pow(je,2),Ze=Math.pow(De,2),Be=Math.pow(Ze,2);a=1-this.es*Math.pow(Qt,2);var Pi=q*Math.sqrt(a)/this.k0,Qe=Math.pow(Pi,2);G=p-(a*=De)*Qe/(1-this.es)*.5*(1-Qe/12*(5+3*Ze-9*je*Ze+je-4*$e-Qe/30*(61+90*Ze-252*je*Ze+45*Be+46*je-Qe/56*(1385+3633*Ze+4095*Be+1574*Be*Ze)))),k=$t(this.long0+Pi*(1-Qe/6*(1+2*Ze+je-Qe/20*(5+28*Ze+24*Be+8*je*Ze+6*je-Qe/42*(61+662*Ze+1320*Be+720*Be*Ze))))/he)}else G=u*xe(lt),k=0;else{var nt=Math.exp(q/this.k0),At=.5*(nt-1/nt),ne=Math.cos(this.lat0+lt/this.k0);a=Math.sqrt((1-Math.pow(ne,2))/(1+Math.pow(At,2))),G=Math.asin(a),lt<0&&(G=-G),k=0===At&&0===ne?0:$t(Math.atan2(At,ne)+this.long0)}return t.x=k,t.y=G,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Ns(t){var a=Math.exp(t);return(a-1/a)/2}function Di(t,a){t=Math.abs(t),a=Math.abs(a);var p=Math.max(t,a),G=Math.min(t,a)/(p||1);return p*Math.sqrt(1+Math.pow(G,2))}function Ur(t,a){for(var lt,p=2*Math.cos(2*a),G=t.length-1,k=t[G],q=0;--G>=0;)lt=p*k-q+t[G],q=k,k=lt;return a+lt*Math.sin(2*a)}function gt(t,a,p){for(var je,$e,G=Math.sin(a),k=Math.cos(a),q=Ns(p),lt=function Ee(t){var a=Math.exp(t);return(a+1/a)/2}(p),nt=2*k*lt,At=-2*G*q,Bt=t.length-1,ne=t[Bt],Qt=0,he=0,De=0;--Bt>=0;)je=he,$e=Qt,ne=nt*(he=ne)-je-At*(Qt=De)+t[Bt],De=At*he-$e+nt*Qt;return[(nt=G*lt)*ne-(At=k*q)*De,nt*De+At*ne]}const Fe={init:function yt(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(rs.init.apply(this),this.forward=rs.forward,this.inverse=rs.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),a=t/(2-t),p=a;this.cgb[0]=a*(2+a*(-2/3+a*(a*(116/45+a*(26/45+a*(-2854/675)))-2))),this.cbg[0]=a*(a*(2/3+a*(4/3+a*(-82/45+a*(32/45+a*(4642/4725)))))-2),this.cgb[1]=(p*=a)*(7/3+a*(a*(-227/45+a*(2704/315+a*(2323/945)))-1.6)),this.cbg[1]=p*(5/3+a*(-16/15+a*(-13/9+a*(904/315+a*(-1522/945))))),this.cgb[2]=(p*=a)*(56/15+a*(-136/35+a*(-1262/105+a*(73814/2835)))),this.cbg[2]=p*(-26/15+a*(34/21+a*(1.6+a*(-12686/2835)))),this.cgb[3]=(p*=a)*(4279/630+a*(-332/35+a*(-399572/14175))),this.cbg[3]=p*(1237/630+a*(a*(-24832/14175)-2.4)),this.cgb[4]=(p*=a)*(4174/315+a*(-144838/6237)),this.cbg[4]=p*(-734/315+a*(109598/31185)),this.cgb[5]=(p*=a)*(601676/22275),this.cbg[5]=p*(444337/155925),p=Math.pow(a,2),this.Qn=this.k0/(1+a)*(1+p*(1/4+p*(1/64+p/256))),this.utg[0]=a*(a*(2/3+a*(-37/96+a*(1/360+a*(81/512+a*(-96199/604800)))))-.5),this.gtu[0]=a*(.5+a*(-2/3+a*(5/16+a*(41/180+a*(-127/288+a*(7891/37800)))))),this.utg[1]=p*(-1/48+a*(-1/15+a*(437/1440+a*(-46/105+a*(1118711/3870720))))),this.gtu[1]=p*(13/48+a*(a*(557/1440+a*(281/630+a*(-1983433/1935360)))-.6)),this.utg[2]=(p*=a)*(-17/480+a*(37/840+a*(209/4480+a*(-5569/90720)))),this.gtu[2]=p*(61/240+a*(-103/140+a*(15061/26880+a*(167603/181440)))),this.utg[3]=(p*=a)*(-4397/161280+a*(11/504+a*(830251/7257600))),this.gtu[3]=p*(49561/161280+a*(-179/168+a*(6601661/7257600))),this.utg[4]=(p*=a)*(-4583/161280+a*(108847/3991680)),this.gtu[4]=p*(34729/80640+a*(-3418889/1995840)),this.utg[5]=(p*=a)*(-20648693/638668800),this.gtu[5]=.6650675310896665*p;var G=Ur(this.cbg,this.lat0);this.Zb=-this.Qn*(G+function Hr(t,a){for(var lt,p=2*Math.cos(a),G=t.length-1,k=t[G],q=0;--G>=0;)lt=p*k-q+t[G],q=k,k=lt;return Math.sin(a)*lt}(this.gtu,2*G))},forward:function Tt(t){var a=$t(t.x-this.long0),p=t.y;p=Ur(this.cbg,p);var G=Math.sin(p),k=Math.cos(p),q=Math.sin(a),lt=Math.cos(a);p=Math.atan2(G,lt*k),a=Math.atan2(q*k,Di(G,k*lt)),a=function Zr(t){var a=Math.abs(t);return a=function Nr(t){var a=1+t,p=a-1;return 0===p?t:t*Math.log(a)/p}(a*(1+a/(Di(1,a)+1))),t<0?-a:a}(Math.tan(a));var At,Bt,nt=gt(this.gtu,2*p,2*a);return p+=nt[0],a+=nt[1],Math.abs(a)<=2.623395162778?(At=this.a*(this.Qn*a)+this.x0,Bt=this.a*(this.Qn*p+this.Zb)+this.y0):(At=1/0,Bt=1/0),t.x=At,t.y=Bt,t},inverse:function qt(t){var G,k,a=1/this.a*(t.x-this.x0),p=1/this.a*(t.y-this.y0);if(p=(p-this.Zb)/this.Qn,a/=this.Qn,Math.abs(a)<=2.623395162778){var q=gt(this.utg,2*p,2*a);p+=q[0],a+=q[1],a=Math.atan(Ns(a));var lt=Math.sin(p),nt=Math.cos(p),At=Math.sin(a),Bt=Math.cos(a);p=Math.atan2(lt*Bt,Di(At,Bt*nt)),G=$t((a=Math.atan2(At,Bt*nt))+this.long0),k=Ur(this.cgb,p)}else G=1/0,k=1/0;return t.x=G,t.y=k,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]},Bi={init:function _i(){var t=function Je(t,a){if(void 0===t){if((t=Math.floor(30*($t(a)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*d,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Fe.init.apply(this),this.forward=Fe.forward,this.inverse=Fe.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function ki(t,a){return Math.pow((1-t)/(1+t),a)}const En={init:function en(){var t=Math.sin(this.lat0),a=Math.cos(this.lat0);a*=a,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*a*a/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+r)/(Math.pow(Math.tan(.5*this.lat0+r),this.C)*ki(this.e*t,this.ratexp))},forward:function os(t){var a=t.x,p=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*p+r),this.C)*ki(this.e*Math.sin(p),this.ratexp))-u,t.x=this.C*a,t},inverse:function nn(t){for(var p=t.x/this.C,G=t.y,k=Math.pow(Math.tan(.5*G+r)/this.K,1/this.C),q=20;q>0&&(G=2*Math.atan(k*ki(this.e*Math.sin(t.y),-.5*this.e))-u,!(Math.abs(G-t.y)<1e-14));--q)t.y=G;return q?(t.x=p,t.y=G,t):null},names:["gauss"]},Vn={init:function Kn(){En.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function In(t){var a,p,G,k;return t.x=$t(t.x-this.long0),En.forward.apply(this,[t]),a=Math.sin(t.y),p=Math.cos(t.y),G=Math.cos(t.x),t.x=(k=this.k0*this.R2/(1+this.sinc0*a+this.cosc0*p*G))*p*Math.sin(t.x),t.y=k*(this.cosc0*a-this.sinc0*p*G),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function Us(t){var a,p,G,k,q;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,q=Di(t.x,t.y)){var lt=2*Math.atan2(q,this.R2);a=Math.sin(lt),p=Math.cos(lt),k=Math.asin(p*this.sinc0+t.y*a*this.cosc0/q),G=Math.atan2(t.x*a,q*this.cosc0*p-t.y*this.sinc0*a)}else k=this.phic0,G=0;return t.x=G,t.y=k,En.inverse.apply(this,[t]),t.x=$t(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},Er={init:function Ys(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=n&&(this.k0=.5*(1+xe(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=n&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=n&&Math.abs(Math.cos(this.lat_ts))>n&&(this.k0=.5*this.cons*zt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ze(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=zt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-u,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function Zs(t){var q,lt,nt,At,Bt,ne,a=t.x,p=t.y,G=Math.sin(p),k=Math.cos(p),Qt=$t(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=n&&Math.abs(p+this.lat0)<=n?(t.x=NaN,t.y=NaN,t):this.sphere?(q=2*this.k0/(1+this.sinlat0*G+this.coslat0*k*Math.cos(Qt)),t.x=this.a*q*k*Math.sin(Qt)+this.x0,t.y=this.a*q*(this.coslat0*G-this.sinlat0*k*Math.cos(Qt))+this.y0,t):(lt=2*Math.atan(this.ssfn_(p,G,this.e))-u,At=Math.cos(lt),nt=Math.sin(lt),Math.abs(this.coslat0)<=n?(Bt=ze(this.e,p*this.con,this.con*G),t.x=this.x0+(ne=2*this.a*this.k0*Bt/this.cons)*Math.sin(a-this.long0),t.y=this.y0-this.con*ne*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<n?(q=2*this.a*this.k0/(1+At*Math.cos(Qt)),t.y=q*nt):(q=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*nt+this.cosX0*At*Math.cos(Qt))),t.y=q*(this.cosX0*nt-this.sinX0*At*Math.cos(Qt))+this.y0),t.x=q*At*Math.sin(Qt)+this.x0,t))},inverse:function yr(t){t.x-=this.x0,t.y-=this.y0;var a,p,k,q,lt=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var nt=2*Math.atan(lt/(2*this.a*this.k0));return a=this.long0,p=this.lat0,lt<=n?(t.x=a,t.y=p,t):(p=Math.asin(Math.cos(nt)*this.sinlat0+t.y*Math.sin(nt)*this.coslat0/lt),a=Math.abs(this.coslat0)<n?$t(this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y)):$t(this.long0+Math.atan2(t.x*Math.sin(nt),lt*this.coslat0*Math.cos(nt)-t.y*this.sinlat0*Math.sin(nt))),t.x=a,t.y=p,t)}if(Math.abs(this.coslat0)<=n){if(lt<=n)return p=this.lat0,t.x=a=this.long0,t.y=p,t;t.x*=this.con,t.y*=this.con,p=this.con*Xe(this.e,lt*this.cons/(2*this.a*this.k0)),a=this.con*$t(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else k=2*Math.atan(lt*this.cosX0/(2*this.a*this.k0*this.ms1)),a=this.long0,lt<=n?q=this.X0:(q=Math.asin(Math.cos(k)*this.sinX0+t.y*Math.sin(k)*this.cosX0/lt),a=$t(this.long0+Math.atan2(t.x*Math.sin(k),lt*this.cosX0*Math.cos(k)-t.y*this.sinX0*Math.sin(k)))),p=-1*Xe(this.e,Math.tan(.5*(u+q)));return t.x=a,t.y=p,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function js(t,a,p){return a*=p,Math.tan(.5*(u+t))*Math.pow((1-a)/(1+a),.5*p)}},vo={init:function jr(){var t=this.lat0;this.lambda0=this.long0;var a=Math.sin(t),p=this.a,k=1/this.rf,q=2*k-Math.pow(k,2),lt=this.e=Math.sqrt(q);this.R=this.k0*p*Math.sqrt(1-q)/(1-q*Math.pow(a,2)),this.alpha=Math.sqrt(1+q/(1-q)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(a/this.alpha);var nt=Math.log(Math.tan(Math.PI/4+this.b0/2)),At=Math.log(Math.tan(Math.PI/4+t/2)),Bt=Math.log((1+lt*a)/(1-lt*a));this.K=nt-this.alpha*At+this.alpha*lt/2*Bt},forward:function $r(t){var a=Math.log(Math.tan(Math.PI/4-t.y/2)),p=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),k=2*(Math.atan(Math.exp(-this.alpha*(a+p)+this.K))-Math.PI/4),q=this.alpha*(t.x-this.lambda0),lt=Math.atan(Math.sin(q)/(Math.sin(this.b0)*Math.tan(k)+Math.cos(this.b0)*Math.cos(q))),nt=Math.asin(Math.cos(this.b0)*Math.sin(k)-Math.sin(this.b0)*Math.cos(k)*Math.cos(q));return t.y=this.R/2*Math.log((1+Math.sin(nt))/(1-Math.sin(nt)))+this.y0,t.x=this.R*lt+this.x0,t},inverse:function no(t){for(var G=(t.x-this.x0)/this.R,k=2*(Math.atan(Math.exp((t.y-this.y0)/this.R))-Math.PI/4),q=Math.asin(Math.cos(this.b0)*Math.sin(k)+Math.sin(this.b0)*Math.cos(k)*Math.cos(G)),lt=Math.atan(Math.sin(G)/(Math.cos(this.b0)*Math.cos(G)-Math.sin(this.b0)*Math.tan(k))),nt=this.lambda0+lt/this.alpha,At=0,Bt=q,ne=-1e3,Qt=0;Math.abs(Bt-ne)>1e-7;){if(++Qt>20)return;At=1/this.alpha*(Math.log(Math.tan(Math.PI/4+q/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(Bt))/2)),ne=Bt,Bt=2*Math.atan(Math.exp(At))-Math.PI/2}return t.x=nt,t.y=Bt,t},names:["somerc"]};var Bs=1e-7;const oo={init:function $s(){var t,a,p,G,k,q,lt,nt,At,Bt,Qt,ne=0,he=0,De=0,je=0,$e=0,Ze=0,Be=0;this.no_off=function Hs(t){var p="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(p)}(this),this.no_rot="no_rot"in this;var Qe=!1;"alpha"in this&&(Qe=!0);var oi=!1;if("rectified_grid_angle"in this&&(oi=!0),Qe&&(Be=this.alpha),oi&&(ne=this.rectified_grid_angle*d),Qe||oi)he=this.longc;else if(De=this.long1,$e=this.lat1,je=this.long2,Ze=this.lat2,Math.abs($e-Ze)<=Bs||(t=Math.abs($e))<=Bs||Math.abs(t-u)<=Bs||Math.abs(Math.abs(this.lat0)-u)<=Bs||Math.abs(Math.abs(Ze)-u)<=Bs)throw new Error;var Ci=1-this.es;a=Math.sqrt(Ci),Math.abs(this.lat0)>n?(nt=Math.sin(this.lat0),p=Math.cos(this.lat0),t=1-this.es*nt*nt,this.B=p*p,this.B=Math.sqrt(1+this.es*this.B*this.B/Ci),this.A=this.B*this.k0*a/t,(k=(G=this.B*a/(p*Math.sqrt(t)))*G-1)<=0?k=0:(k=Math.sqrt(k),this.lat0<0&&(k=-k)),this.E=k+=G,this.E*=Math.pow(ze(this.e,this.lat0,nt),this.B)):(this.B=1/a,this.A=this.k0,this.E=G=k=1),Qe||oi?(Qe?(Qt=Math.asin(Math.sin(Be)/G),oi||(ne=Be)):(Qt=ne,Be=Math.asin(G*Math.sin(Qt))),this.lam0=he-Math.asin(.5*(k-1/k)*Math.tan(Qt))/this.B):(q=Math.pow(ze(this.e,$e,Math.sin($e)),this.B),lt=Math.pow(ze(this.e,Ze,Math.sin(Ze)),this.B),k=this.E/q,At=(lt-q)/(lt+q),Bt=((Bt=this.E*this.E)-lt*q)/(Bt+lt*q),(t=De-je)<-Math.pi?je-=C:t>Math.pi&&(je+=C),this.lam0=$t(.5*(De+je)-Math.atan(Bt*Math.tan(.5*this.B*(De-je))/At)/this.B),Qt=Math.atan(2*Math.sin(this.B*$t(De-this.lam0))/(k-1/k)),ne=Be=Math.asin(G*Math.sin(Qt))),this.singam=Math.sin(Qt),this.cosgam=Math.cos(Qt),this.sinrot=Math.sin(ne),this.cosrot=Math.cos(ne),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(G*G-1)/Math.cos(Be))),this.lat0<0&&(this.u_0=-this.u_0)),k=.5*Qt,this.v_pole_n=this.ArB*Math.log(Math.tan(r-k)),this.v_pole_s=this.ArB*Math.log(Math.tan(r+k))},forward:function Br(t){var p,G,k,q,lt,nt,At,Bt,a={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-u)>n){if(p=.5*((lt=this.E/Math.pow(ze(this.e,t.y,Math.sin(t.y)),this.B))-(nt=1/lt)),G=.5*(lt+nt),q=Math.sin(this.B*t.x),k=(p*this.singam-q*this.cosgam)/G,Math.abs(Math.abs(k)-1)<n)throw new Error;Bt=.5*this.ArB*Math.log((1-k)/(1+k)),nt=Math.cos(this.B*t.x),At=Math.abs(nt)<Bs?this.A*t.x:this.ArB*Math.atan2(p*this.cosgam+q*this.singam,nt)}else Bt=t.y>0?this.v_pole_n:this.v_pole_s,At=this.ArB*t.y;return this.no_rot?(a.x=At,a.y=Bt):(a.x=Bt*this.cosrot+(At-=this.u_0)*this.sinrot,a.y=At*this.cosrot-Bt*this.sinrot),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a},inverse:function cr(t){var a,p,G,k,q,lt,nt,At={};if(t.x=1/this.a*(t.x-this.x0),t.y=1/this.a*(t.y-this.y0),this.no_rot?(p=t.y,a=t.x):(p=t.x*this.cosrot-t.y*this.sinrot,a=t.y*this.cosrot+t.x*this.sinrot+this.u_0),k=.5*((G=Math.exp(-this.BrA*p))-1/G),q=.5*(G+1/G),nt=((lt=Math.sin(this.BrA*a))*this.cosgam+k*this.singam)/q,Math.abs(Math.abs(nt)-1)<n)At.x=0,At.y=nt<0?-u:u;else{if(At.y=this.E/Math.sqrt((1+nt)/(1-nt)),At.y=Xe(this.e,Math.pow(At.y,1/this.B)),At.y===1/0)throw new Error;At.x=-this.rB*Math.atan2(k*this.cosgam-lt*this.singam,Math.cos(this.BrA*a))}return At.x+=this.lam0,At},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},xo={init:function ao(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<n)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var a=Math.sin(this.lat1),p=Math.cos(this.lat1),G=zt(this.e,a,p),k=ze(this.e,this.lat1,a),q=Math.sin(this.lat2),lt=Math.cos(this.lat2),nt=zt(this.e,q,lt),At=ze(this.e,this.lat2,q),Bt=ze(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>n?Math.log(G/nt)/Math.log(k/At):a,isNaN(this.ns)&&(this.ns=a),this.f0=G/(this.ns*Math.pow(k,this.ns)),this.rh=this.a*this.f0*Math.pow(Bt,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function Eo(t){var a=t.x,p=t.y;Math.abs(2*Math.abs(p)-Math.PI)<=n&&(p=xe(p)*(u-2*n));var k,q,G=Math.abs(Math.abs(p)-u);if(G>n)k=ze(this.e,p,Math.sin(p)),q=this.a*this.f0*Math.pow(k,this.ns);else{if((G=p*this.ns)<=0)return null;q=0}var lt=this.ns*$t(a-this.long0);return t.x=this.k0*(q*Math.sin(lt))+this.x0,t.y=this.k0*(this.rh-q*Math.cos(lt))+this.y0,t},inverse:function as(t){var a,p,G,k,q,lt=(t.x-this.x0)/this.k0,nt=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(a=Math.sqrt(lt*lt+nt*nt),p=1):(a=-Math.sqrt(lt*lt+nt*nt),p=-1);var At=0;if(0!==a&&(At=Math.atan2(p*lt,p*nt)),0!==a||this.ns>0){if(p=1/this.ns,G=Math.pow(a/(this.a*this.f0),p),-9999===(k=Xe(this.e,G)))return null}else k=-u;return q=$t(At/this.ns+this.long0),t.x=q,t.y=k,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},Gr={init:function Jr(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function Qr(t){var a,p,G,k,q,lt,nt,Bt=t.y,ne=$t(t.x-this.long0);return a=Math.pow((1+this.e*Math.sin(Bt))/(1-this.e*Math.sin(Bt)),this.alfa*this.e/2),p=2*(Math.atan(this.k*Math.pow(Math.tan(Bt/2+this.s45),this.alfa)/a)-this.s45),G=-ne*this.alfa,k=Math.asin(Math.cos(this.ad)*Math.sin(p)+Math.sin(this.ad)*Math.cos(p)*Math.cos(G)),q=Math.asin(Math.cos(p)*Math.sin(G)/Math.cos(k)),lt=this.n*q,nt=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(k/2+this.s45),this.n),t.y=nt*Math.cos(lt)/1,t.x=nt*Math.sin(lt)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function qr(t){var a,p,G,k,lt,nt,At,Bt=t.x;t.x=t.y,t.y=Bt,this.czech||(t.y*=-1,t.x*=-1),lt=Math.sqrt(t.x*t.x+t.y*t.y),k=Math.atan2(t.y,t.x)/Math.sin(this.s0),G=2*(Math.atan(Math.pow(this.ro0/lt,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),a=Math.asin(Math.cos(this.ad)*Math.sin(G)-Math.sin(this.ad)*Math.cos(G)*Math.cos(k)),p=Math.asin(Math.cos(G)*Math.sin(k)/Math.cos(a)),t.x=this.long0-p/this.alfa,nt=a,At=0;var ne=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(a/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(nt))/(1-this.e*Math.sin(nt)),this.e/2))-this.s45),Math.abs(nt-t.y)<1e-10&&(At=1),nt=t.y,ne+=1}while(0===At&&ne<15);return ne>=15?null:t},names:["Krovak","krovak"]};function gn(t,a,p,G,k){return t*k-a*Math.sin(2*k)+p*Math.sin(4*k)-G*Math.sin(6*k)}function Or(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function xr(t){return.375*t*(1+.25*t*(1+.46875*t))}function xs(t){return.05859375*t*t*(1+.75*t)}function Js(t){return t*t*t*(35/3072)}function Qs(t,a,p){var G=a*p;return t/Math.sqrt(1-G*G)}function Mr(t){return Math.abs(t)<u?t:t-xe(t)*Math.PI}function dr(t,a,p,G,k){var q,lt;q=t/a;for(var nt=0;nt<15;nt++)if(q+=lt=(t-(a*q-p*Math.sin(2*q)+G*Math.sin(4*q)-k*Math.sin(6*q)))/(a-2*p*Math.cos(2*q)+4*G*Math.cos(4*q)-6*k*Math.cos(6*q)),Math.abs(lt)<=1e-10)return q;return NaN}const Ar={init:function Mo(){this.sphere||(this.e0=Or(this.es),this.e1=xr(this.es),this.e2=xs(this.es),this.e3=Js(this.es),this.ml0=this.a*gn(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function Ao(t){var a,p,G=t.x,k=t.y;if(G=$t(G-this.long0),this.sphere)a=this.a*Math.asin(Math.cos(k)*Math.sin(G)),p=this.a*(Math.atan2(Math.tan(k),Math.cos(G))-this.lat0);else{var q=Math.sin(k),lt=Math.cos(k),nt=Qs(this.a,this.e,q),At=Math.tan(k)*Math.tan(k),Bt=G*Math.cos(k),ne=Bt*Bt,Qt=this.es*lt*lt/(1-this.es);a=nt*Bt*(1-ne*At*(1/6-(8-At+8*Qt)*ne/120)),p=this.a*gn(this.e0,this.e1,this.e2,this.e3,k)-this.ml0+nt*q/lt*ne*(.5+(5-At+6*Qt)*ne/24)}return t.x=a+this.x0,t.y=p+this.y0,t},inverse:function to(t){t.x-=this.x0,t.y-=this.y0;var G,k,a=t.x/this.a,p=t.y/this.a;if(this.sphere){var q=p+this.lat0;G=Math.asin(Math.sin(q)*Math.cos(a)),k=Math.atan2(Math.tan(a),Math.cos(q))}else{var nt=dr(this.ml0/this.a+p,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(nt)-u)<=n)return t.x=this.long0,t.y=u,p<0&&(t.y*=-1),t;var At=Qs(this.a,this.e,Math.sin(nt)),Bt=At*At*At/this.a/this.a*(1-this.es),ne=Math.pow(Math.tan(nt),2),Qt=a*this.a/At,he=Qt*Qt;G=nt-At*Math.tan(nt)/Bt*Qt*Qt*(.5-(1+3*ne)*Qt*Qt/24),k=Qt*(1-he*(ne/3+(1+3*ne)*ne*he/15))/Math.cos(nt)}return t.x=$t(k+this.long0),t.y=Mr(G),t},names:["Cassini","Cassini_Soldner","cass"]};function qs(t,a){var p;return t>1e-7?(1-t*t)*(a/(1-(p=t*a)*p)-.5/t*Math.log((1-p)/(1+p))):2*a}const St={init:function j(){var a,t=Math.abs(this.lat0);if(this.mode=Math.abs(t-u)<n?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<n?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=qs(this.e,1),this.mmf=.5/(1-this.es),this.apa=function jt(t){var a,p=[];return p[0]=.3333333333333333*t,p[0]+=.17222222222222222*(a=t*t),p[1]=.06388888888888888*a,p[0]+=.10257936507936508*(a*=t),p[1]+=.0664021164021164*a,p[2]=.016415012942191543*a,p}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),a=Math.sin(this.lat0),this.sinb1=qs(this.e,a)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*a*a)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function rt(t){var a,p,G,k,q,lt,nt,At,Bt,ne,Qt=t.x,he=t.y;if(Qt=$t(Qt-this.long0),this.sphere){if(q=Math.sin(he),ne=Math.cos(he),G=Math.cos(Qt),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((p=this.mode===this.EQUIT?1+ne*G:1+this.sinph0*q+this.cosph0*ne*G)<=n)return null;a=(p=Math.sqrt(2/p))*ne*Math.sin(Qt),p*=this.mode===this.EQUIT?q:this.cosph0*q-this.sinph0*ne*G}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(G=-G),Math.abs(he+this.lat0)<n)return null;p=r-.5*he,a=(p=2*(this.mode===this.S_POLE?Math.cos(p):Math.sin(p)))*Math.sin(Qt),p*=G}}else{switch(nt=0,At=0,Bt=0,G=Math.cos(Qt),k=Math.sin(Qt),q=Math.sin(he),lt=qs(this.e,q),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(nt=lt/this.qp,At=Math.sqrt(1-nt*nt)),this.mode){case this.OBLIQ:Bt=1+this.sinb1*nt+this.cosb1*At*G;break;case this.EQUIT:Bt=1+At*G;break;case this.N_POLE:Bt=u+he,lt=this.qp-lt;break;case this.S_POLE:Bt=he-u,lt=this.qp+lt}if(Math.abs(Bt)<n)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:Bt=Math.sqrt(2/Bt),p=this.mode===this.OBLIQ?this.ymf*Bt*(this.cosb1*nt-this.sinb1*At*G):(Bt=Math.sqrt(2/(1+At*G)))*nt*this.ymf,a=this.xmf*Bt*At*k;break;case this.N_POLE:case this.S_POLE:lt>=0?(a=(Bt=Math.sqrt(lt))*k,p=G*(this.mode===this.S_POLE?Bt:-Bt)):a=p=0}}return t.x=this.a*a+this.x0,t.y=this.a*p+this.y0,t},inverse:function at(t){t.x-=this.x0,t.y-=this.y0;var G,k,q,lt,nt,At,Bt,a=t.x/this.a,p=t.y/this.a;if(this.sphere){var Qt,ne=0,he=0;if((k=.5*(Qt=Math.sqrt(a*a+p*p)))>1)return null;switch(k=2*Math.asin(k),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(he=Math.sin(k),ne=Math.cos(k)),this.mode){case this.EQUIT:k=Math.abs(Qt)<=n?0:Math.asin(p*he/Qt),a*=he,p=ne*Qt;break;case this.OBLIQ:k=Math.abs(Qt)<=n?this.lat0:Math.asin(ne*this.sinph0+p*he*this.cosph0/Qt),a*=he*this.cosph0,p=(ne-Math.sin(k)*this.sinph0)*Qt;break;case this.N_POLE:p=-p,k=u-k;break;case this.S_POLE:k-=u}G=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(a,p):0}else{if(Bt=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(a/=this.dd,p*=this.dd,(At=Math.sqrt(a*a+p*p))<n)return t.x=this.long0,t.y=this.lat0,t;lt=2*Math.asin(.5*At/this.rq),q=Math.cos(lt),a*=lt=Math.sin(lt),this.mode===this.OBLIQ?(nt=this.qp*(Bt=q*this.sinb1+p*lt*this.cosb1/At),p=At*this.cosb1*q-p*this.sinb1*lt):(nt=this.qp*(Bt=p*lt/At),p=At*q)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(nt=a*a+p*p))return t.x=this.long0,t.y=this.lat0,t;Bt=1-nt/this.qp,this.mode===this.S_POLE&&(Bt=-Bt)}G=Math.atan2(a,p),k=function Lt(t,a){var p=t+t;return t+a[0]*Math.sin(p)+a[1]*Math.sin(p+p)+a[2]*Math.sin(p+p+p)}(Math.asin(Bt),this.apa)}return t.x=$t(this.long0+G),t.y=k,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function ee(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const we={init:function Pt(){Math.abs(this.lat1+this.lat2)<n||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=zt(this.e3,this.sin_po,this.cos_po),this.qs1=qs(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=zt(this.e3,this.sin_po,this.cos_po),this.qs2=qs(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qs(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>n?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function Yt(t){var a=t.x,p=t.y;this.sin_phi=Math.sin(p),this.cos_phi=Math.cos(p);var G=qs(this.e3,this.sin_phi),k=this.a*Math.sqrt(this.c-this.ns0*G)/this.ns0,q=this.ns0*$t(a-this.long0),lt=k*Math.sin(q)+this.x0,nt=this.rh-k*Math.cos(q)+this.y0;return t.x=lt,t.y=nt,t},inverse:function te(t){var a,G,k,q,lt;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(a=Math.sqrt(t.x*t.x+t.y*t.y),G=1):(a=-Math.sqrt(t.x*t.x+t.y*t.y),G=-1),k=0,0!==a&&(k=Math.atan2(G*t.x,G*t.y)),G=a*this.ns0/this.a,lt=this.sphere?Math.asin((this.c-G*G)/(2*this.ns0)):this.phi1z(this.e3,(this.c-G*G)/this.ns0),q=$t(k/this.ns0+this.long0),t.x=q,t.y=lt,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function me(t,a){var p,k,q,lt,nt=ee(.5*a);if(t<n)return nt;for(var At=t*t,Bt=1;Bt<=25;Bt++)if(nt+=lt=.5*(q=1-(k=t*(p=Math.sin(nt)))*k)*q/Math.cos(nt)*(a/(1-At)-p/q+.5/t*Math.log((1-k)/(1+k))),Math.abs(lt)<=1e-7)return nt;return null}},ve={init:function ue(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function Le(t){var a,p,G,k,lt,nt,At,ne=t.y;return G=$t(t.x-this.long0),a=Math.sin(ne),p=Math.cos(ne),k=Math.cos(G),(lt=this.sin_p14*a+this.cos_p14*p*k)>0||Math.abs(lt)<=n?(nt=this.x0+1*this.a*p*Math.sin(G)/lt,At=this.y0+1*this.a*(this.cos_p14*a-this.sin_p14*p*k)/lt):(nt=this.x0+this.infinity_dist*p*Math.sin(G),At=this.y0+this.infinity_dist*(this.cos_p14*a-this.sin_p14*p*k)),t.x=nt,t.y=At,t},inverse:function fe(t){var a,p,G,k,q,lt;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(a=Math.sqrt(t.x*t.x+t.y*t.y))?(k=Math.atan2(a,this.rc),p=Math.sin(k),lt=ee((G=Math.cos(k))*this.sin_p14+t.y*p*this.cos_p14/a),q=Math.atan2(t.x*p,a*this.cos_p14*G-t.y*this.sin_p14*p),q=$t(this.long0+q)):(lt=this.phic0,q=0),t.x=q,t.y=lt,t},names:["gnom"]},se={init:function Ve(){this.sphere||(this.k0=zt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function Ge(t){var G,k,p=t.y,q=$t(t.x-this.long0);if(this.sphere)G=this.x0+this.a*q*Math.cos(this.lat_ts),k=this.y0+this.a*Math.sin(p)/Math.cos(this.lat_ts);else{var lt=qs(this.e,Math.sin(p));G=this.x0+this.a*this.k0*q,k=this.y0+this.a*lt*.5/this.k0}return t.x=G,t.y=k,t},inverse:function ri(t){var a,p;return t.x-=this.x0,t.y-=this.y0,this.sphere?(a=$t(this.long0+t.x/this.a/Math.cos(this.lat_ts)),p=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(p=function Ue(t,a){var p=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(a)-p)<1e-6)return a<0?-1*u:u;for(var k,q,lt,nt,G=Math.asin(.5*a),At=0;At<30;At++)if(q=Math.sin(G),lt=Math.cos(G),nt=t*q,G+=k=Math.pow(1-nt*nt,2)/(2*lt)*(a/(1-t*t)-q/(1-nt*nt)+.5/t*Math.log((1-nt)/(1+nt))),Math.abs(k)<=1e-10)return G;return NaN}(this.e,2*t.y*this.k0/this.a),a=$t(this.long0+t.x/(this.a*this.k0))),t.x=a,t.y=p,t},names:["cea"]},Zt={init:function ie(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function Ce(t){var p=t.y,G=$t(t.x-this.long0),k=Mr(p-this.lat0);return t.x=this.x0+this.a*G*this.rc,t.y=this.y0+this.a*k,t},inverse:function kt(t){var p=t.y;return t.x=$t(this.long0+(t.x-this.x0)/(this.a*this.rc)),t.y=Mr(this.lat0+(p-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},ii={init:function Oe(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Or(this.es),this.e1=xr(this.es),this.e2=xs(this.es),this.e3=Js(this.es),this.ml0=this.a*gn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function be(t){var G,k,q,p=t.y,lt=$t(t.x-this.long0);if(q=lt*Math.sin(p),this.sphere)Math.abs(p)<=n?(G=this.a*lt,k=-1*this.a*this.lat0):(G=this.a*Math.sin(q)/Math.tan(p),k=this.a*(Mr(p-this.lat0)+(1-Math.cos(q))/Math.tan(p)));else if(Math.abs(p)<=n)G=this.a*lt,k=-1*this.ml0;else{var nt=Qs(this.a,this.e,Math.sin(p))/Math.tan(p);G=nt*Math.sin(q),k=this.a*gn(this.e0,this.e1,this.e2,this.e3,p)-this.ml0+nt*(1-Math.cos(q))}return t.x=G+this.x0,t.y=k+this.y0,t},inverse:function Re(t){var a,p,G,k,q,lt,nt,At,Bt;if(G=t.x-this.x0,k=t.y-this.y0,this.sphere)if(Math.abs(k+this.a*this.lat0)<=n)a=$t(G/this.a+this.long0),p=0;else{var ne;for(nt=G*G/this.a/this.a+(lt=this.lat0+k/this.a)*lt,At=lt,q=20;q;--q)if(At+=Bt=-1*(lt*(At*(ne=Math.tan(At))+1)-At-.5*(At*At+nt)*ne)/((At-lt)/ne-1),Math.abs(Bt)<=n){p=At;break}a=$t(this.long0+Math.asin(G*Math.tan(At)/this.a)/Math.sin(p))}else if(Math.abs(k+this.ml0)<=n)p=0,a=$t(this.long0+G/this.a);else{var Qt,he,De,je,$e;for(nt=G*G/this.a/this.a+(lt=(this.ml0+k)/this.a)*lt,At=lt,q=20;q;--q)if($e=this.e*Math.sin(At),Qt=Math.sqrt(1-$e*$e)*Math.tan(At),he=this.a*gn(this.e0,this.e1,this.e2,this.e3,At),De=this.e0-2*this.e1*Math.cos(2*At)+4*this.e2*Math.cos(4*At)-6*this.e3*Math.cos(6*At),At-=Bt=(lt*(Qt*(je=he/this.a)+1)-je-.5*Qt*(je*je+nt))/(this.es*Math.sin(2*At)*(je*je+nt-2*lt*je)/(4*Qt)+(lt-je)*(Qt*De-2/Math.sin(2*At))-De),Math.abs(Bt)<=n){p=At;break}Qt=Math.sqrt(1-this.es*Math.pow(Math.sin(p),2))*Math.tan(p),a=$t(this.long0+Math.asin(G*Qt/this.a)/Math.sin(p))}return t.x=a,t.y=p,t},names:["Polyconic","poly"]},fi={init:function li(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function ci(t){var a,lt=(t.y-this.lat0)/m*1e-5,nt=t.x-this.long0,At=1,Bt=0;for(a=1;a<=10;a++)Bt+=this.A[a]*(At*=lt);var $e,ne=Bt,Qt=nt,he=1,De=0,Ze=0,Be=0;for(a=1;a<=6;a++)$e=De*ne+he*Qt,Ze=Ze+this.B_re[a]*(he=he*ne-De*Qt)-this.B_im[a]*(De=$e),Be=Be+this.B_im[a]*he+this.B_re[a]*De;return t.x=Be*this.a+this.x0,t.y=Ze*this.a+this.y0,t},inverse:function gi(t){var a,Qt,lt=(t.y-this.y0)/this.a,nt=(t.x-this.x0)/this.a,At=1,Bt=0,he=0,De=0;for(a=1;a<=6;a++)Qt=Bt*lt+At*nt,he=he+this.C_re[a]*(At=At*lt-Bt*nt)-this.C_im[a]*(Bt=Qt),De=De+this.C_im[a]*At+this.C_re[a]*Bt;for(var je=0;je<this.iterations;je++){var Pi,$e=he,Ze=De,Qe=lt,oi=nt;for(a=2;a<=6;a++)Pi=Ze*he+$e*De,Qe+=(a-1)*(this.B_re[a]*($e=$e*he-Ze*De)-this.B_im[a]*(Ze=Pi)),oi+=(a-1)*(this.B_im[a]*$e+this.B_re[a]*Ze);$e=1,Ze=0;var Ci=this.B_re[1],Si=this.B_im[1];for(a=2;a<=6;a++)Pi=Ze*he+$e*De,Ci+=a*(this.B_re[a]*($e=$e*he-Ze*De)-this.B_im[a]*(Ze=Pi)),Si+=a*(this.B_im[a]*$e+this.B_re[a]*Ze);var dn=Ci*Ci+Si*Si;he=(Qe*Ci+oi*Si)/dn,De=(oi*Ci-Qe*Si)/dn}var sn=he,fn=De,ai=1,Ms=0;for(a=1;a<=9;a++)Ms+=this.D[a]*(ai*=sn);var gs=this.lat0+Ms*m*1e5;return t.x=this.long0+fn,t.y=gs,t},names:["New_Zealand_Map_Grid","nzmg"]},Oi={init:function yi(){},forward:function Li(t){var p=t.y,G=$t(t.x-this.long0),k=this.x0+this.a*G,q=this.y0+this.a*Math.log(Math.tan(Math.PI/4+p/2.5))*1.25;return t.x=k,t.y=q,t},inverse:function Wi(t){t.x-=this.x0,t.y-=this.y0;var a=$t(this.long0+t.x/this.a),p=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=a,t.y=p,t},names:["Miller_Cylindrical","mill"]},bs={init:function Nn(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=mi(this.es)},forward:function xn(t){var a,p,G=t.x,k=t.y;if(G=$t(G-this.long0),this.sphere){if(this.m)for(var q=this.n*Math.sin(k),lt=20;lt;--lt){var nt=(this.m*k+Math.sin(k)-q)/(this.m+Math.cos(k));if(k-=nt,Math.abs(nt)<n)break}else k=1!==this.n?Math.asin(this.n*Math.sin(k)):k;a=this.a*this.C_x*G*(this.m+Math.cos(k)),p=this.a*this.C_y*k}else{var At=Math.sin(k),Bt=Math.cos(k);p=this.a*pi(k,At,Bt,this.en),a=this.a*G*Bt/Math.sqrt(1-this.es*At*At)}return t.x=a,t.y=p,t},inverse:function Mn(t){var a,G,k;return t.x-=this.x0,G=t.x/this.a,t.y-=this.y0,a=t.y/this.a,this.sphere?(a/=this.C_y,G/=this.C_x*(this.m+Math.cos(a)),this.m?a=ee((this.m*a+Math.sin(a))/this.n):1!==this.n&&(a=ee(Math.sin(a)/this.n)),G=$t(G+this.long0),a=Mr(a)):(a=ji(t.y/this.a,this.es,this.en),(k=Math.abs(a))<u?(k=Math.sin(a),G=$t(this.long0+t.x*Math.sqrt(1-this.es*k*k)/(this.a*Math.cos(a)))):k-n<u&&(G=this.long0)),t.x=G,t.y=a,t},names:["Sinusoidal","sinu"]},Sr={init:function ls(){},forward:function ws(t){for(var p=t.y,G=$t(t.x-this.long0),k=p,q=Math.PI*Math.sin(p);;){var lt=-(k+Math.sin(k)-q)/(1+Math.cos(k));if(k+=lt,Math.abs(lt)<n)break}k/=2,Math.PI/2-Math.abs(p)<n&&(G=0);var nt=.900316316158*this.a*G*Math.cos(k)+this.x0,At=1.4142135623731*this.a*Math.sin(k)+this.y0;return t.x=nt,t.y=At,t},inverse:function lo(t){var a,p;t.x-=this.x0,t.y-=this.y0,p=t.y/(1.4142135623731*this.a),Math.abs(p)>.999999999999&&(p=.999999999999),a=Math.asin(p);var G=$t(this.long0+t.x/(.900316316158*this.a*Math.cos(a)));G<-Math.PI&&(G=-Math.PI),G>Math.PI&&(G=Math.PI),p=(2*a+Math.sin(2*a))/Math.PI,Math.abs(p)>1&&(p=1);var k=Math.asin(p);return t.x=G,t.y=k,t},names:["Mollweide","moll"]},Jo={init:function co(){Math.abs(this.lat1+this.lat2)<n||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Or(this.es),this.e1=xr(this.es),this.e2=xs(this.es),this.e3=Js(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=zt(this.e,this.sinphi,this.cosphi),this.ml1=gn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<n?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=zt(this.e,this.sinphi,this.cosphi),this.ml2=gn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=gn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function zr(t){var G,a=t.x,p=t.y;if(this.sphere)G=this.a*(this.g-p);else{var k=gn(this.e0,this.e1,this.e2,this.e3,p);G=this.a*(this.g-k)}var q=this.ns*$t(a-this.long0),lt=this.x0+G*Math.sin(q),nt=this.y0+this.rh-G*Math.cos(q);return t.x=lt,t.y=nt,t},inverse:function uo(t){var a,p,G,k;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(p=Math.sqrt(t.x*t.x+t.y*t.y),a=1):(p=-Math.sqrt(t.x*t.x+t.y*t.y),a=-1);var q=0;return 0!==p&&(q=Math.atan2(a*t.x,a*t.y)),this.sphere?(k=$t(this.long0+q/this.ns),G=Mr(this.g-p/this.a),t.x=k,t.y=G,t):(G=dr(this.g-p/this.a,this.e0,this.e1,this.e2,this.e3),k=$t(this.long0+q/this.ns),t.x=k,t.y=G,t)},names:["Equidistant_Conic","eqdc"]},Po={init:function Qo(){this.R=this.a},forward:function Co(t){var k,q,p=t.y,G=$t(t.x-this.long0);Math.abs(p)<=n&&(k=this.x0+this.R*G,q=this.y0);var lt=ee(2*Math.abs(p/Math.PI));(Math.abs(G)<=n||Math.abs(Math.abs(p)-u)<=n)&&(k=this.x0,q=p>=0?this.y0+Math.PI*this.R*Math.tan(.5*lt):this.y0+Math.PI*this.R*-Math.tan(.5*lt));var nt=.5*Math.abs(Math.PI/G-G/Math.PI),At=nt*nt,Bt=Math.sin(lt),ne=Math.cos(lt),Qt=ne/(Bt+ne-1),De=Qt*(2/Bt-1),je=De*De,$e=Math.PI*this.R*(nt*(Qt-je)+Math.sqrt(At*(Qt-je)*(Qt-je)-(je+At)*(Qt*Qt-je)))/(je+At);G<0&&($e=-$e),k=this.x0+$e;var Ze=At+Qt;return $e=Math.PI*this.R*(De*Ze-nt*Math.sqrt((je+At)*(At+1)-Ze*Ze))/(je+At),q=p>=0?this.y0+$e:this.y0-$e,t.x=k,t.y=q,t},inverse:function fo(t){var a,p,G,k,q,lt,nt,At,Bt,ne,Qt,he;return t.x-=this.x0,t.y-=this.y0,Qt=Math.PI*this.R,q=(G=t.x/Qt)*G+(k=t.y/Qt)*k,Qt=3*(k*k/(At=-2*(lt=-Math.abs(k)*(1+q))+1+2*k*k+q*q)+(2*(nt=lt-2*k*k+G*G)*nt*nt/At/At/At-9*lt*nt/At/At)/27)/(Bt=(lt-nt*nt/3/At)/At)/(ne=2*Math.sqrt(-Bt/3)),Math.abs(Qt)>1&&(Qt=Qt>=0?1:-1),he=Math.acos(Qt)/3,p=t.y>=0?(-ne*Math.cos(he+Math.PI/3)-nt/3/At)*Math.PI:-(-ne*Math.cos(he+Math.PI/3)-nt/3/At)*Math.PI,a=Math.abs(G)<n?this.long0:$t(this.long0+Math.PI*(q-1+Math.sqrt(1+2*(G*G-k*k)+q*q))/2/G),t.x=a,t.y=p,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},fa={init:function Ti(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function Bo(t){var lt,nt,At,Bt,ne,Qt,he,De,je,$e,Ze,Be,Pi,Qe,oi,Ci,Si,dn,sn,fn,ai,Ms,a=t.x,p=t.y,G=Math.sin(t.y),k=Math.cos(t.y),q=$t(a-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=n?(t.x=this.x0+this.a*(u-p)*Math.sin(q),t.y=this.y0-this.a*(u-p)*Math.cos(q),t):Math.abs(this.sin_p12+1)<=n?(t.x=this.x0+this.a*(u+p)*Math.sin(q),t.y=this.y0+this.a*(u+p)*Math.cos(q),t):(dn=this.sin_p12*G+this.cos_p12*k*Math.cos(q),Si=(Ci=Math.acos(dn))?Ci/Math.sin(Ci):1,t.x=this.x0+this.a*Si*k*Math.sin(q),t.y=this.y0+this.a*Si*(this.cos_p12*G-this.sin_p12*k*Math.cos(q)),t):(lt=Or(this.es),nt=xr(this.es),At=xs(this.es),Bt=Js(this.es),Math.abs(this.sin_p12-1)<=n?(ne=this.a*gn(lt,nt,At,Bt,u),Qt=this.a*gn(lt,nt,At,Bt,p),t.x=this.x0+(ne-Qt)*Math.sin(q),t.y=this.y0-(ne-Qt)*Math.cos(q),t):Math.abs(this.sin_p12+1)<=n?(ne=this.a*gn(lt,nt,At,Bt,u),Qt=this.a*gn(lt,nt,At,Bt,p),t.x=this.x0+(ne+Qt)*Math.sin(q),t.y=this.y0+(ne+Qt)*Math.cos(q),t):(he=G/k,De=Qs(this.a,this.e,this.sin_p12),je=Qs(this.a,this.e,G),$e=Math.atan((1-this.es)*he+this.es*De*this.sin_p12/(je*k)),sn=0===(Ze=Math.atan2(Math.sin(q),this.cos_p12*Math.tan($e)-this.sin_p12*Math.cos(q)))?Math.asin(this.cos_p12*Math.sin($e)-this.sin_p12*Math.cos($e)):Math.abs(Math.abs(Ze)-Math.PI)<=n?-Math.asin(this.cos_p12*Math.sin($e)-this.sin_p12*Math.cos($e)):Math.asin(Math.sin(q)*Math.cos($e)/Math.sin(Ze)),Be=this.e*this.sin_p12/Math.sqrt(1-this.es),Pi=this.e*this.cos_p12*Math.cos(Ze)/Math.sqrt(1-this.es),t.x=this.x0+(Ci=De*sn*(1-(fn=sn*sn)*(oi=Pi*Pi)*(1-oi)/6+(ai=fn*sn)/8*(Qe=Be*Pi)*(1-2*oi)+(Ms=ai*sn)/120*(oi*(4-7*oi)-3*Be*Be*(1-7*oi))-Ms*sn/48*Qe))*Math.sin(Ze),t.y=this.y0+Ci*Math.cos(Ze),t))},inverse:function qo(t){var a,p,G,k,q,lt,nt,At,Bt,ne,Qt,he,je,$e,Ze,Be,Pi,Qe,oi,Ci,Si,dn,sn;return t.x-=this.x0,t.y-=this.y0,this.sphere?(a=Math.sqrt(t.x*t.x+t.y*t.y))>2*u*this.a?void 0:(p=a/this.a,G=Math.sin(p),k=Math.cos(p),q=this.long0,Math.abs(a)<=n?lt=this.lat0:(lt=ee(k*this.sin_p12+t.y*G*this.cos_p12/a),nt=Math.abs(this.lat0)-u,q=Math.abs(nt)<=n?$t(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)):$t(this.long0+Math.atan2(t.x*G,a*this.cos_p12*k-t.y*this.sin_p12*G))),t.x=q,t.y=lt,t):(At=Or(this.es),Bt=xr(this.es),ne=xs(this.es),Qt=Js(this.es),Math.abs(this.sin_p12-1)<=n?(lt=dr(((he=this.a*gn(At,Bt,ne,Qt,u))-(a=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,At,Bt,ne,Qt),q=$t(this.long0+Math.atan2(t.x,-1*t.y)),t.x=q,t.y=lt,t):Math.abs(this.sin_p12+1)<=n?(he=this.a*gn(At,Bt,ne,Qt,u),lt=dr(((a=Math.sqrt(t.x*t.x+t.y*t.y))-he)/this.a,At,Bt,ne,Qt),q=$t(this.long0+Math.atan2(t.x,t.y)),t.x=q,t.y=lt,t):(a=Math.sqrt(t.x*t.x+t.y*t.y),Ze=Math.atan2(t.x,t.y),je=Qs(this.a,this.e,this.sin_p12),Be=Math.cos(Ze),oi=3*this.es*(1-(Qe=-(Pi=this.e*this.cos_p12*Be)*Pi/(1-this.es)))*this.sin_p12*this.cos_p12*Be/(1-this.es),dn=1-Qe*(Si=(Ci=a/je)-Qe*(1+Qe)*Math.pow(Ci,3)/6-oi*(1+3*Qe)*Math.pow(Ci,4)/24)*Si/2-Ci*Si*Si*Si/6,$e=Math.asin(this.sin_p12*Math.cos(Si)+this.cos_p12*Math.sin(Si)*Be),q=$t(this.long0+Math.asin(Math.sin(Ze)*Math.sin(Si)/Math.cos($e))),sn=Math.sin($e),lt=Math.atan2((sn-this.es*dn*this.sin_p12)*Math.tan($e),sn*(1-this.es)),t.x=q,t.y=lt,t))},names:["Azimuthal_Equidistant","aeqd"]},ga={init:function Tr(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function ta(t){var a,p,G,k,lt,nt,At,ne=t.y;return G=$t(t.x-this.long0),a=Math.sin(ne),p=Math.cos(ne),k=Math.cos(G),((lt=this.sin_p14*a+this.cos_p14*p*k)>0||Math.abs(lt)<=n)&&(nt=1*this.a*p*Math.sin(G),At=this.y0+1*this.a*(this.cos_p14*a-this.sin_p14*p*k)),t.x=nt,t.y=At,t},inverse:function Io(t){var a,p,G,k,q,lt,nt;return t.x-=this.x0,t.y-=this.y0,p=ee((a=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),G=Math.sin(p),k=Math.cos(p),lt=this.long0,Math.abs(a)<=n?(nt=this.lat0,t.x=lt,t.y=nt,t):(nt=ee(k*this.sin_p14+t.y*G*this.cos_p14/a),q=Math.abs(this.lat0)-u,Math.abs(q)<=n?(lt=$t(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=lt,t.y=nt,t):(lt=$t(this.long0+Math.atan2(t.x*G,a*this.cos_p14*k-t.y*this.sin_p14*G)),t.x=lt,t.y=nt,t))},names:["ortho"]};var Xi_AREA_0=1,Xi_AREA_1=2,Xi_AREA_2=3,Xi_AREA_3=4;function eo(t,a,p,G){var k;return t<n?(G.value=Xi_AREA_0,k=0):(k=Math.atan2(a,p),Math.abs(k)<=r?G.value=Xi_AREA_0:k>r&&k<=u+r?(G.value=Xi_AREA_1,k-=u):k>u+r||k<=-(u+r)?(G.value=Xi_AREA_2,k=k>=0?k-_:k+_):(G.value=Xi_AREA_3,k+=u)),k}function Cr(t,a){var p=t+a;return p<-_?p+=C:p>+_&&(p-=C),p}const na={init:function ma(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=u-r/2?5:this.lat0<=-(u-r/2)?6:Math.abs(this.long0)<=r?1:Math.abs(this.long0)<=u+r?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function ea(t){var p,G,k,q,lt,nt,a={x:0,y:0},At={value:0};if(t.x-=this.long0,p=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,G=t.x,5===this.face)q=u-p,G>=r&&G<=u+r?(At.value=Xi_AREA_0,k=G-u):G>u+r||G<=-(u+r)?(At.value=Xi_AREA_1,k=G>0?G-_:G+_):G>-(u+r)&&G<=-r?(At.value=Xi_AREA_2,k=G+u):(At.value=Xi_AREA_3,k=G);else if(6===this.face)q=u+p,G>=r&&G<=u+r?(At.value=Xi_AREA_0,k=-G+u):G<r&&G>=-r?(At.value=Xi_AREA_1,k=-G):G<-r&&G>=-(u+r)?(At.value=Xi_AREA_2,k=-G-u):(At.value=Xi_AREA_3,k=G>0?-G+_:-G-_);else{var Bt,ne,Qt,he,De,je;2===this.face?G=Cr(G,+u):3===this.face?G=Cr(G,+_):4===this.face&&(G=Cr(G,-u)),he=Math.sin(p),De=Math.cos(p),je=Math.sin(G),Bt=De*Math.cos(G),ne=De*je,Qt=he,1===this.face?k=eo(q=Math.acos(Bt),Qt,ne,At):2===this.face?k=eo(q=Math.acos(ne),Qt,-Bt,At):3===this.face?k=eo(q=Math.acos(-Bt),Qt,-ne,At):4===this.face?k=eo(q=Math.acos(-ne),Qt,Bt,At):(q=k=0,At.value=Xi_AREA_0)}return nt=Math.atan(12/_*(k+Math.acos(Math.sin(k)*Math.cos(r))-u)),lt=Math.sqrt((1-Math.cos(q))/(Math.cos(nt)*Math.cos(nt))/(1-Math.cos(Math.atan(1/Math.cos(k))))),At.value===Xi_AREA_1?nt+=u:At.value===Xi_AREA_2?nt+=_:At.value===Xi_AREA_3&&(nt+=1.5*_),a.x=lt*Math.cos(nt),a.y=lt*Math.sin(nt),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t},inverse:function ia(t){var p,G,k,q,lt,nt,At,Bt,ne,$e,Ze,Be,a={lam:0,phi:0},Qt={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,G=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),p=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?Qt.value=Xi_AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(Qt.value=Xi_AREA_1,p-=u):t.x<0&&-t.x>=Math.abs(t.y)?(Qt.value=Xi_AREA_2,p=p<0?p+_:p-_):(Qt.value=Xi_AREA_3,p+=u),ne=_/12*Math.tan(p),lt=Math.sin(ne)/(Math.cos(ne)-1/Math.sqrt(2)),nt=Math.atan(lt),(At=1-(k=Math.cos(p))*k*(q=Math.tan(G))*q*(1-Math.cos(Math.atan(1/Math.cos(nt)))))<-1?At=-1:At>1&&(At=1),5===this.face)Bt=Math.acos(At),a.phi=u-Bt,a.lam=Qt.value===Xi_AREA_0?nt+u:Qt.value===Xi_AREA_1?nt<0?nt+_:nt-_:Qt.value===Xi_AREA_2?nt-u:nt;else if(6===this.face)Bt=Math.acos(At),a.phi=Bt-u,a.lam=Qt.value===Xi_AREA_0?-nt+u:Qt.value===Xi_AREA_1?-nt:Qt.value===Xi_AREA_2?-nt-u:nt<0?-nt-_:-nt+_;else{var he,De,je;ne=(he=At)*he,De=(ne+=(je=ne>=1?0:Math.sqrt(1-ne)*Math.sin(nt))*je)>=1?0:Math.sqrt(1-ne),Qt.value===Xi_AREA_1?(ne=De,De=-je,je=ne):Qt.value===Xi_AREA_2?(De=-De,je=-je):Qt.value===Xi_AREA_3&&(ne=De,De=je,je=-ne),2===this.face?(ne=he,he=-De,De=ne):3===this.face?(he=-he,De=-De):4===this.face&&(ne=he,he=De,De=-ne),a.phi=Math.acos(-je)-u,a.lam=Math.atan2(De,he),2===this.face?a.lam=Cr(a.lam,-u):3===this.face?a.lam=Cr(a.lam,-_):4===this.face&&(a.lam=Cr(a.lam,+u))}return 0!==this.es&&($e=a.phi<0?1:0,Ze=Math.tan(a.phi),Be=this.b/Math.sqrt(Ze*Ze+this.one_minus_f_squared),a.phi=Math.atan(Math.sqrt(this.a*this.a-Be*Be)/(this.one_minus_f*Be)),$e&&(a.phi=-a.phi)),a.lam+=this.long0,t.x=a.lam,t.y=a.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var mo=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Kr=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],wo=f/5,ko=1/wo,_o=function(t,a){return t[0]+a*(t[1]+a*(t[2]+a*t[3]))};const oa={init:function Xo(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function sa(t){var a=$t(t.x-this.long0),p=Math.abs(t.y),G=Math.floor(p*wo);G<0?G=0:G>=18&&(G=17);var k={x:_o(mo[G],p=f*(p-ko*G))*a,y:_o(Kr[G],p)};return t.y<0&&(k.y=-k.y),k.x=k.x*this.a*.8487+this.x0,k.y=k.y*this.a*1.3523+this.y0,k},inverse:function Oo(t){var a={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(a.y>=1)a.x/=mo[18][0],a.y=t.y<0?-u:u;else{var p=Math.floor(18*a.y);for(p<0?p=0:p>=18&&(p=17);;)if(Kr[p][0]>a.y)--p;else{if(!(Kr[p+1][0]<=a.y))break;++p}var G=Kr[p],k=5*(a.y-G[0])/(Kr[p+1][0]-G[0]);k=function Ko(t,a,p,G){for(var k=a;G;--G){var q=t(k);if(k-=q,Math.abs(q)<p)break}return k}(function(q){return(_o(G,q)-a.y)/function(t,a){return t[1]+a*(2*t[2]+3*a*t[3])}(G,q)},k,n,100),a.x/=_o(mo[p],k),a.y=(5*p+k)*d,t.y<0&&(a.y=-a.y)}return a.x=$t(a.x+this.long0),a},names:["Robinson","robin"]},_a={init:function aa(){this.name="geocent"},forward:function la(t){return An(t,this.es,this.a)},inverse:function Vo(t){return _s(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var io={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const Dr={init:function pa(){if(Object.keys(io).forEach(function(p){if(typeof this[p]>"u")this[p]=io[p].def;else{if(io[p].num&&isNaN(this[p]))throw new Error("Invalid parameter value, must be numeric "+p+" = "+this[p]);io[p].num&&(this[p]=parseFloat(this[p]))}io[p].degrees&&(this[p]=this[p]*d)}.bind(this)),Math.abs(Math.abs(this.lat0)-u)<n?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<n?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,a=this.azi;this.cg=Math.cos(a),this.sg=Math.sin(a),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function ya(t){t.x-=this.long0;var k,q,lt,nt,a=Math.sin(t.y),p=Math.cos(t.y),G=Math.cos(t.x);switch(this.mode){case 3:q=this.sinph0*a+this.cosph0*p*G;break;case 2:q=p*G;break;case 1:q=-a;break;case 0:q=a}switch(k=(q=this.pn1/(this.p-q))*p*Math.sin(t.x),this.mode){case 3:q*=this.cosph0*a-this.sinph0*p*G;break;case 2:q*=a;break;case 0:q*=-p*G;break;case 1:q*=p*G}return k=(k*this.cg-q*this.sg)*this.cw*(nt=1/((lt=q*this.cg+k*this.sg)*this.sw*this.h1+this.cw)),q=lt*nt,t.x=k*this.a,t.y=q*this.a,t},inverse:function va(t){t.x/=this.a,t.y/=this.a;var p,G,k,a={x:t.x,y:t.y};t.x=(p=this.pn1*t.x*(k=1/(this.pn1-t.y*this.sw)))*this.cg+(G=this.pn1*t.y*this.cw*k)*this.sg,t.y=G*this.cg-p*this.sg;var q=Di(t.x,t.y);if(Math.abs(q)<n)a.x=0,a.y=t.y;else{var lt,nt;switch(nt=1-q*q*this.pfact,nt=(this.p-Math.sqrt(nt))/(this.pn1/q+q/this.pn1),lt=Math.sqrt(1-nt*nt),this.mode){case 3:a.y=Math.asin(lt*this.sinph0+t.y*nt*this.cosph0/q),t.y=(lt-this.sinph0*Math.sin(a.y))*q,t.x*=nt*this.cosph0;break;case 2:a.y=Math.asin(t.y*nt/q),t.y=lt*q,t.x*=nt;break;case 0:a.y=Math.asin(lt),t.y=-t.y;break;case 1:a.y=-Math.asin(lt)}a.x=Math.atan2(t.x,t.y)}return t.x=a.x+this.long0,t.y=a.y,t},names:["Tilted_Perspective","tpers"]},ca={init:function Zo(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,a=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=a,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function ha(t){var G,k,q,lt,a=t.x,p=t.y;if(a-=this.long0,"ellipse"===this.shape){p=Math.atan(this.radius_p2*Math.tan(p));var nt=this.radius_p/Di(this.radius_p*Math.cos(p),Math.sin(p));if(k=nt*Math.cos(a)*Math.cos(p),q=nt*Math.sin(a)*Math.cos(p),lt=nt*Math.sin(p),(this.radius_g-k)*k-q*q-lt*lt*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;G=this.radius_g-k,this.flip_axis?(t.x=this.radius_g_1*Math.atan(q/Di(lt,G)),t.y=this.radius_g_1*Math.atan(lt/G)):(t.x=this.radius_g_1*Math.atan(q/G),t.y=this.radius_g_1*Math.atan(lt/Di(q,G)))}else"sphere"===this.shape&&(G=Math.cos(p),k=Math.cos(a)*G,q=Math.sin(a)*G,lt=Math.sin(p),G=this.radius_g-k,this.flip_axis?(t.x=this.radius_g_1*Math.atan(q/Di(lt,G)),t.y=this.radius_g_1*Math.atan(lt/G)):(t.x=this.radius_g_1*Math.atan(q/G),t.y=this.radius_g_1*Math.atan(lt/Di(q,G))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function xa(t){var k,q,lt,nt,a=-1,p=0,G=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(G=Math.tan(t.y/this.radius_g_1),p=Math.tan(t.x/this.radius_g_1)*Di(1,G)):(p=Math.tan(t.x/this.radius_g_1),G=Math.tan(t.y/this.radius_g_1)*Di(1,p));var At=G/this.radius_p;if((lt=(q=2*this.radius_g*a)*q-4*(k=p*p+At*At+a*a)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;nt=(-q-Math.sqrt(lt))/(2*k),a=this.radius_g+nt*a,p*=nt,G*=nt,t.x=Math.atan2(p,a),t.y=Math.atan(G*Math.cos(t.x)/a),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(G=Math.tan(t.y/this.radius_g_1),p=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+G*G)):(p=Math.tan(t.x/this.radius_g_1),G=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+p*p)),(lt=(q=2*this.radius_g*a)*q-4*(k=p*p+G*G+a*a)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;nt=(-q-Math.sqrt(lt))/(2*k),a=this.radius_g+nt*a,p*=nt,G*=nt,t.x=Math.atan2(p,a),t.y=Math.atan(G*Math.cos(t.x)/a)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var po=1.340264,h=-.081106,e=893e-6,c=.003796,b=Math.sqrt(3)/2;const Kt={init:function H(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function st(t){var a=$t(t.x-this.long0),G=Math.asin(b*Math.sin(t.y)),k=G*G,q=k*k*k;return t.x=a*Math.cos(G)/(b*(po+3*h*k+q*(7*e+9*c*k))),t.y=G*(po+h*k+q*(e+c*k)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function ut(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var k,q,At,Bt,G=t.y;for(Bt=0;Bt<12&&(G-=At=(G*(po+h*(k=G*G)+(q=k*k*k)*(e+c*k))-t.y)/(po+3*h*k+q*(7*e+9*c*k)),!(Math.abs(At)<1e-9));++Bt);return t.x=b*t.x*(po+3*h*(k=G*G)+(q=k*k*k)*(7*e+9*c*k))/Math.cos(G),t.y=Math.asin(Math.sin(G)/b),t.x=$t(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]};Ki.defaultDatum="WGS84",Ki.Proj=Hn,Ki.WGS84=new Ki.Proj("WGS84"),Ki.Point=Cn,Ki.toPoint=or,Ki.defs=ye,Ki.nadgrid=function zi(t,a){var p=new DataView(a),G=function Bn(t){var a=t.getInt32(8,!1);return 11!==a&&(11!==(a=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(p),k=function ln(t,a){return{nFields:t.getInt32(8,a),nSubgridFields:t.getInt32(24,a),nSubgrids:t.getInt32(40,a),shiftType:Ei(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,a),fromSemiMinorAxis:t.getFloat64(136,a),toSemiMajorAxis:t.getFloat64(152,a),toSemiMinorAxis:t.getFloat64(168,a)}}(p,G),q=function Vi(t,a,p){for(var G=176,k=[],q=0;q<a.nSubgrids;q++){var lt=Zn(t,G,p),nt=Ye(t,G,lt,p),At=Math.round(1+(lt.upperLongitude-lt.lowerLongitude)/lt.longitudeInterval),Bt=Math.round(1+(lt.upperLatitude-lt.lowerLatitude)/lt.latitudeInterval);k.push({ll:[vi(lt.lowerLongitude),vi(lt.lowerLatitude)],del:[vi(lt.longitudeInterval),vi(lt.latitudeInterval)],lim:[At,Bt],count:lt.gridNodeCount,cvs:Sn(nt)}),G+=176+16*lt.gridNodeCount}return k}(p,k,G),lt={header:k,subgrids:q};return Ji[t]=lt,lt},Ki.transform=pn,Ki.mgrs=zs,Ki.version="__VERSION__",function Xt(t){t.Proj.projections.add(rs),t.Proj.projections.add(Fe),t.Proj.projections.add(Bi),t.Proj.projections.add(Vn),t.Proj.projections.add(Er),t.Proj.projections.add(vo),t.Proj.projections.add(oo),t.Proj.projections.add(xo),t.Proj.projections.add(Gr),t.Proj.projections.add(Ar),t.Proj.projections.add(St),t.Proj.projections.add(we),t.Proj.projections.add(ve),t.Proj.projections.add(se),t.Proj.projections.add(Zt),t.Proj.projections.add(ii),t.Proj.projections.add(fi),t.Proj.projections.add(Oi),t.Proj.projections.add(bs),t.Proj.projections.add(Sr),t.Proj.projections.add(Jo),t.Proj.projections.add(Po),t.Proj.projections.add(fa),t.Proj.projections.add(ga),t.Proj.projections.add(na),t.Proj.projections.add(oa),t.Proj.projections.add(_a),t.Proj.projections.add(Dr),t.Proj.projections.add(ca),t.Proj.projections.add(Kt)}(Ki);const Me=Ki},2593:function(le){le.exports=function(){"use strict";function pt(n,d,f,r,C){!function _(v,F,O,X,P){for(;X>O;){if(X-O>600){var E=X-O+1,W=F-O+1,Z=Math.log(E),A=.5*Math.exp(2*Z/3),D=.5*Math.sqrt(Z*A*(E-A)/E)*(W-E/2<0?-1:1);_(v,F,Math.max(O,Math.floor(F-W*A/E+D)),Math.min(X,Math.floor(F+(E-W)*A/E+D)),P)}var T=v[F],U=O,tt=X;for(s(v,O,F),P(v[X],T)>0&&s(v,O,X);U<tt;){for(s(v,U,tt),U++,tt--;P(v[U],T)<0;)U++;for(;P(v[tt],T)>0;)tt--}0===P(v[O],T)?s(v,O,tt):s(v,++tt,X),tt<=F&&(O=tt+1),F<=tt&&(X=tt-1)}}(n,d,f||0,r||n.length-1,C||Y)}function s(n,d,f){var r=n[d];n[d]=n[f],n[f]=r}function Y(n,d){return n<d?-1:n>d?1:0}var z=function(n){void 0===n&&(n=9),this._maxEntries=Math.max(4,n),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Q(n,d,f){if(!f)return d.indexOf(n);for(var r=0;r<d.length;r++)if(f(n,d[r]))return r;return-1}function $(n,d){L(n,0,n.children.length,d,n)}function L(n,d,f,r,C){C||(C=i(null)),C.minX=1/0,C.minY=1/0,C.maxX=-1/0,C.maxY=-1/0;for(var _=d;_<f;_++){var v=n.children[_];M(C,n.leaf?r(v):v)}return C}function M(n,d){return n.minX=Math.min(n.minX,d.minX),n.minY=Math.min(n.minY,d.minY),n.maxX=Math.max(n.maxX,d.maxX),n.maxY=Math.max(n.maxY,d.maxY),n}function w(n,d){return n.minX-d.minX}function I(n,d){return n.minY-d.minY}function y(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function m(n){return n.maxX-n.minX+(n.maxY-n.minY)}function u(n,d){return n.minX<=d.minX&&n.minY<=d.minY&&d.maxX<=n.maxX&&d.maxY<=n.maxY}function o(n,d){return d.minX<=n.maxX&&d.minY<=n.maxY&&d.maxX>=n.minX&&d.maxY>=n.minY}function i(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function l(n,d,f,r,C){for(var _=[d,f];_.length;)if(!((f=_.pop())-(d=_.pop())<=r)){var v=d+Math.ceil((f-d)/r/2)*r;pt(n,v,d,f,C),_.push(d,v,v,f)}}return z.prototype.all=function(){return this._all(this.data,[])},z.prototype.search=function(n){var d=this.data,f=[];if(!o(n,d))return f;for(var r=this.toBBox,C=[];d;){for(var _=0;_<d.children.length;_++){var v=d.children[_],F=d.leaf?r(v):v;o(n,F)&&(d.leaf?f.push(v):u(n,F)?this._all(v,f):C.push(v))}d=C.pop()}return f},z.prototype.collides=function(n){var d=this.data;if(!o(n,d))return!1;for(var f=[];d;){for(var r=0;r<d.children.length;r++){var C=d.children[r],_=d.leaf?this.toBBox(C):C;if(o(n,_)){if(d.leaf||u(n,_))return!0;f.push(C)}}d=f.pop()}return!1},z.prototype.load=function(n){if(!n||!n.length)return this;if(n.length<this._minEntries){for(var d=0;d<n.length;d++)this.insert(n[d]);return this}var f=this._build(n.slice(),0,n.length-1,0);if(this.data.children.length)if(this.data.height===f.height)this._splitRoot(this.data,f);else{if(this.data.height<f.height){var r=this.data;this.data=f,f=r}this._insert(f,this.data.height-f.height-1,!0)}else this.data=f;return this},z.prototype.insert=function(n){return n&&this._insert(n,this.data.height-1),this},z.prototype.clear=function(){return this.data=i([]),this},z.prototype.remove=function(n,d){if(!n)return this;for(var f,r,C,_=this.data,v=this.toBBox(n),F=[],O=[];_||F.length;){if(_||(_=F.pop(),r=F[F.length-1],f=O.pop(),C=!0),_.leaf){var X=Q(n,_.children,d);if(-1!==X)return _.children.splice(X,1),F.push(_),this._condense(F),this}C||_.leaf||!u(_,v)?r?(f++,_=r.children[f],C=!1):_=null:(F.push(_),O.push(f),f=0,r=_,_=_.children[0])}return this},z.prototype.toBBox=function(n){return n},z.prototype.compareMinX=function(n,d){return n.minX-d.minX},z.prototype.compareMinY=function(n,d){return n.minY-d.minY},z.prototype.toJSON=function(){return this.data},z.prototype.fromJSON=function(n){return this.data=n,this},z.prototype._all=function(n,d){for(var f=[];n;)n.leaf?d.push.apply(d,n.children):f.push.apply(f,n.children),n=f.pop();return d},z.prototype._build=function(n,d,f,r){var C,_=f-d+1,v=this._maxEntries;if(_<=v)return $(C=i(n.slice(d,f+1)),this.toBBox),C;r||(r=Math.ceil(Math.log(_)/Math.log(v)),v=Math.ceil(_/Math.pow(v,r-1))),(C=i([])).leaf=!1,C.height=r;var F=Math.ceil(_/v),O=F*Math.ceil(Math.sqrt(v));l(n,d,f,O,this.compareMinX);for(var X=d;X<=f;X+=O){var P=Math.min(X+O-1,f);l(n,X,P,F,this.compareMinY);for(var E=X;E<=P;E+=F){var W=Math.min(E+F-1,P);C.children.push(this._build(n,E,W,r-1))}}return $(C,this.toBBox),C},z.prototype._chooseSubtree=function(n,d,f,r){for(;r.push(d),!d.leaf&&r.length-1!==f;){for(var C=1/0,_=1/0,v=void 0,F=0;F<d.children.length;F++){var O=d.children[F],X=y(O),P=(E=n,W=O,(Math.max(W.maxX,E.maxX)-Math.min(W.minX,E.minX))*(Math.max(W.maxY,E.maxY)-Math.min(W.minY,E.minY))-X);P<_?(_=P,C=X<C?X:C,v=O):P===_&&X<C&&(C=X,v=O)}d=v||d.children[0]}var E,W;return d},z.prototype._insert=function(n,d,f){var r=f?n:this.toBBox(n),C=[],_=this._chooseSubtree(r,this.data,d,C);for(_.children.push(n),M(_,r);d>=0&&C[d].children.length>this._maxEntries;)this._split(C,d),d--;this._adjustParentBBoxes(r,C,d)},z.prototype._split=function(n,d){var f=n[d],r=f.children.length,C=this._minEntries;this._chooseSplitAxis(f,C,r);var _=this._chooseSplitIndex(f,C,r),v=i(f.children.splice(_,f.children.length-_));v.height=f.height,v.leaf=f.leaf,$(f,this.toBBox),$(v,this.toBBox),d?n[d-1].children.push(v):this._splitRoot(f,v)},z.prototype._splitRoot=function(n,d){this.data=i([n,d]),this.data.height=n.height+1,this.data.leaf=!1,$(this.data,this.toBBox)},z.prototype._chooseSplitIndex=function(n,d,f){for(var r,C,_,v,F,O,X,P=1/0,E=1/0,W=d;W<=f-d;W++){var Z=L(n,0,W,this.toBBox),A=L(n,W,f,this.toBBox),D=(C=Z,_=A,void 0,void 0,void 0,void 0,v=Math.max(C.minX,_.minX),F=Math.max(C.minY,_.minY),O=Math.min(C.maxX,_.maxX),X=Math.min(C.maxY,_.maxY),Math.max(0,O-v)*Math.max(0,X-F)),R=y(Z)+y(A);D<P?(P=D,r=W,E=R<E?R:E):D===P&&R<E&&(E=R,r=W)}return r||f-d},z.prototype._chooseSplitAxis=function(n,d,f){var r=n.leaf?this.compareMinX:w,C=n.leaf?this.compareMinY:I;this._allDistMargin(n,d,f,r)<this._allDistMargin(n,d,f,C)&&n.children.sort(r)},z.prototype._allDistMargin=function(n,d,f,r){n.children.sort(r);for(var C=this.toBBox,_=L(n,0,d,C),v=L(n,f-d,f,C),F=m(_)+m(v),O=d;O<f-d;O++){var X=n.children[O];M(_,n.leaf?C(X):X),F+=m(_)}for(var P=f-d-1;P>=d;P--){var E=n.children[P];M(v,n.leaf?C(E):E),F+=m(v)}return F},z.prototype._adjustParentBBoxes=function(n,d,f){for(var r=f;r>=0;r--)M(d[r],n)},z.prototype._condense=function(n){for(var d=n.length-1,f=void 0;d>=0;d--)0===n[d].children.length?d>0?(f=n[d-1].children).splice(f.indexOf(n[d]),1):this.clear():$(n[d],this.toBBox)},z}()},9990:(le,pt,s)=>{"use strict";s.d(pt,{i:()=>z});var Y=s(8503);function z(Q){return(0,Y.p)(($,L)=>Q<=L)}},733:(le,pt,s)=>{"use strict";s.d(pt,{L:()=>si});var Y=s(6138),z=s(9990),Q=s(8356),$=s(2383),L=s(8052),M=s(3942),w=s(2744),I=s(7412),y=s(1776),m=s(9325);const u="units",o=[1,2,5],i=25.4/.28,n=class l extends I.A{constructor(et){et=et||{};const N=document.createElement("div");N.style.pointerEvents="none",super({element:N,render:et.render,target:et.target});const g=void 0!==et.className?et.className:et.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=g+"-inner",this.element.className=g+" "+y.XI,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==et.minWidth?et.minWidth:64,this.maxWidth_=et.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(u,this.handleUnitsChanged_),this.setUnits(et.units||"metric"),this.scaleBar_=et.bar||!1,this.scaleBarSteps_=et.steps||4,this.scaleBarText_=et.text||!1,this.dpi_=et.dpi||void 0}getUnits(){return this.get(u)}handleUnitsChanged_(){this.updateElement_()}setUnits(et){this.set(u,et)}setDpi(et){this.dpi_=et}updateElement_(){const et=this.viewState_;if(!et)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const N=et.center,g=et.projection,S=this.getUnits();let B=(0,m.hO)(g,et.resolution,N,"degrees"==S?"degrees":"m");const ot=this.minWidth_*(this.dpi_||i)/i,dt=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||i)/i:void 0;let It=ot*B,Wt="";if("degrees"==S){const Ii=m.Ig.degrees;It*=Ii,It<Ii/60?(Wt="\u2033",B*=3600):It<Ii?(Wt="\u2032",B*=60):Wt="\xb0"}else if("imperial"==S)It<.9144?(Wt="in",B/=.0254):It<1609.344?(Wt="ft",B/=.3048):(Wt="mi",B/=1609.344);else if("nautical"==S)B/=1852,Wt="NM";else if("metric"==S)It<1e-6?(Wt="nm",B*=1e9):It<.001?(Wt="\u03bcm",B*=1e6):It<1?(Wt="mm",B*=1e3):It<1e3?Wt="m":(Wt="km",B/=1e3);else{if("us"!=S)throw new Error("Invalid units");It<.9144?(Wt="in",B*=39.37):It<1609.344?(Wt="ft",B/=.30480061):(Wt="mi",B/=1609.3472)}let ce,Ne,He,We,bi,Mi,pe=3*Math.floor(Math.log(ot*B)/Math.log(10));for(;;){He=Math.floor(pe/3);const Ii=Math.pow(10,He);if(ce=o[(pe%3+3)%3]*Ii,Ne=Math.round(ce/B),isNaN(Ne))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==dt&&Ne>=dt){ce=We,Ne=bi,He=Mi;break}if(Ne>=ot)break;We=ce,bi=Ne,Mi=He,++pe}const ni=this.scaleBar_?this.createScaleBar(Ne,ce,Wt):ce.toFixed(He<0?-He:0)+" "+Wt;this.renderedHTML_!=ni&&(this.innerElement_.innerHTML=ni,this.renderedHTML_=ni),this.renderedWidth_!=Ne&&(this.innerElement_.style.width=Ne+"px",this.renderedWidth_=Ne),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(et,N,g){const S=this.getScaleForResolution(),K=S<1?Math.round(1/S).toLocaleString()+" : 1":"1 : "+Math.round(S).toLocaleString(),B=this.scaleBarSteps_,ot=et/B,dt=[this.createMarker("absolute")];for(let Wt=0;Wt<B;++Wt)dt.push(`<div><div class="ol-scale-singlebar ${Wt%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even"}" style="width: ${ot}px;"></div>`+this.createMarker("relative")+(Wt%2==0||2===B?this.createStepText(Wt,et,!1,N,g):"")+"</div>");return dt.push(this.createStepText(B,et,!0,N,g)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${et}px;">`+K+"</div>":"")+dt.join("")}createMarker(et){return`<div class="ol-scale-step-marker" style="position: ${et}; top: ${"absolute"===et?3:-10}px;"></div>`}createStepText(et,N,g,S,K){const ot=(0===et?0:Math.round(S/this.scaleBarSteps_*et*100)/100)+(0===et?"":" "+K);return`<div class="ol-scale-step-text" style="margin-left: ${0===et?-3:N/this.scaleBarSteps_*-1}px;text-align: ${0===et?"left":"center"};min-width: ${0===et?0:N/this.scaleBarSteps_*2}px;left: ${g?N+"px":"unset"};">`+ot+"</div>"}getScaleForResolution(){return(0,m.hO)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||i)}render(et){const N=et.frameState;this.viewState_=N?N.viewState:null,this.updateElement_()}};var d=s(5130),f=s(8669),r=s(2614),C=s(5085);const _="projection",v="coordinateFormat",O=class F extends I.A{constructor(et){et=et||{};const N=document.createElement("div");N.className=void 0!==et.className?et.className:"ol-mouse-position",super({element:N,render:et.render,target:et.target}),this.addChangeListener(_,this.handleProjectionChanged_),et.coordinateFormat&&this.setCoordinateFormat(et.coordinateFormat),et.projection&&this.setProjection(et.projection),this.renderOnMouseOut_=void 0!==et.placeholder,this.placeholder_=this.renderOnMouseOut_?et.placeholder:"&#160;",this.renderedHTML_=N.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==et.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(v)}getProjection(){return this.get(_)}handleMouseMove(et){const N=this.getMap();this.updateHTML_(N.getEventPixel(et))}handleMouseOut(et){this.updateHTML_(null)}setMap(et){if(super.setMap(et),et){const N=et.getViewport();this.listenerKeys.push((0,r.KT)(N,f.A.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,r.KT)(N,f.A.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(et){this.set(v,et)}setProjection(et){this.set(_,(0,m.Jt)(et))}updateHTML_(et){let N=this.placeholder_;if(et&&this.mapProjection_){if(!this.transform_){const K=this.getProjection();this.transform_=K?(0,m.FO)(this.mapProjection_,K):m.R6}const S=this.getMap().getCoordinateFromPixelInternal(et);if(S){const K=(0,m.Tf)();if(K&&(this.transform_=(0,m.FO)(this.mapProjection_,K)),this.transform_(S,S),this.wrapX_){const ot=K||this.getProjection()||this.mapProjection_;(0,C.Li)(S,ot)}const B=this.getCoordinateFormat();N=B?B(S):S.toString()}}(!this.renderedHTML_||N!==this.renderedHTML_)&&(this.element.innerHTML=N,this.renderedHTML_=N)}render(et){const N=et.frameState;N?this.mapProjection_!=N.viewState.projection&&(this.mapProjection_=N.viewState.projection,this.transform_=null):this.mapProjection_=null}};var X=s(6621),P=s(388),E=s(5551);const W=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function D(hi){const et=hi.body;return!!(et.webkitRequestFullscreen||et.requestFullscreen&&hi.fullscreenEnabled)}function R(hi){return!(!hi.webkitIsFullScreen&&!hi.fullscreenElement)}function x(hi){hi.requestFullscreen?hi.requestFullscreen():hi.webkitRequestFullscreen&&hi.webkitRequestFullscreen()}const tt=class A extends I.A{constructor(et){et=et||{},super({element:document.createElement("div"),target:et.target}),this.keys_=void 0!==et.keys&&et.keys,this.source_=et.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==et.className?et.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==et.activeClassName?et.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==et.inactiveClassName?et.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const N=void 0!==et.label?et.label:"\u2922";this.labelNode_="string"==typeof N?document.createTextNode(N):N;const g=void 0!==et.labelActive?et.labelActive:"\xd7";this.labelActiveNode_="string"==typeof g?document.createTextNode(g):g;const S=et.tipLabel?et.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=S,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(X.A.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${y.XI} ${y.$N}`,this.element.appendChild(this.button_)}handleClick_(et){et.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const et=this.getMap();if(!et)return;const N=et.getOwnerDocument();if(D(N))if(R(N))!function U(hi){hi.exitFullscreen?hi.exitFullscreen():hi.webkitExitFullscreen&&hi.webkitExitFullscreen()}(N);else{let g;g=this.source_?"string"==typeof this.source_?N.getElementById(this.source_):this.source_:et.getTargetElement(),this.keys_?function T(hi){hi.webkitRequestFullscreen?hi.webkitRequestFullscreen():x(hi)}(g):x(g)}}handleFullScreenChange_(){const et=this.getMap();if(!et)return;const N=this.isInFullscreen_;this.isInFullscreen_=R(et.getOwnerDocument()),N!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,E.fo)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):((0,E.fo)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),et.updateSize())}setClassName_(et,N){N?(et.classList.remove(...this.inactiveClassName_),et.classList.add(...this.activeClassName_)):(et.classList.remove(...this.activeClassName_),et.classList.add(...this.inactiveClassName_))}setMap(et){const N=this.getMap();N&&N.removeChangeListener(P.A.TARGET,this.boundHandleMapTargetChange_),super.setMap(et),this.handleMapTargetChange_(),et&&et.addChangeListener(P.A.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const et=this.documentListeners_;for(let g=0,S=et.length;g<S;++g)(0,r.JH)(et[g]);et.length=0;const N=this.getMap();if(N){const g=N.getOwnerDocument();D(g)?this.element.classList.remove(y.Vv):this.element.classList.add(y.Vv);for(let S=0,K=W.length;S<K;++S)et.push((0,r.KT)(g,W[S],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}};var it=s(6591),J=s(1155),ht=s(5281),mt=s(6058),Et=s(5227),Ot=s(3980),Nt=s(7903),ft=s(8507),Ct=s(4157);const ye=class Jt extends I.A{constructor(et){et=et||{},super({element:document.createElement("div"),render:et.render,target:et.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===et.collapsed||et.collapsed,this.collapsible_=void 0===et.collapsible||et.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==et.rotateWithView&&et.rotateWithView,this.viewExtent_=void 0;const N=void 0!==et.className?et.className:"ol-overviewmap",g=void 0!==et.tipLabel?et.tipLabel:"Overview map",S=void 0!==et.collapseLabel?et.collapseLabel:"\u2039";"string"==typeof S?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=S):this.collapseLabel_=S;const K=void 0!==et.label?et.label:"\u203a";"string"==typeof K?(this.label_=document.createElement("span"),this.label_.textContent=K):this.label_=K;const B=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,ot=document.createElement("button");ot.setAttribute("type","button"),ot.title=g,ot.appendChild(B),ot.addEventListener(X.A.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=et.view;const dt=new J.A({view:et.view,controls:new it.A,interactions:new it.A});this.ovmap_=dt,et.layers&&et.layers.forEach(function(ni){dt.addLayer(ni)});const It=document.createElement("div");It.className="ol-overviewmap-box",It.style.boxSizing="border-box",this.boxOverlay_=new Et.A({position:[0,0],positioning:"center-center",element:It}),this.ovmap_.addOverlay(this.boxOverlay_);const pe=this.element;pe.className=N+" "+y.XI+" "+y.$N+(this.collapsed_&&this.collapsible_?" "+y.nT:"")+(this.collapsible_?"":" ol-uncollapsible"),pe.appendChild(this.ovmapDiv_),pe.appendChild(ot);const ce=this,Ne=this.boxOverlay_,He=this.boxOverlay_.getElement(),bi=function(ni){const Ii=function(ni){return{clientX:ni.clientX,clientY:ni.clientY}}(ni),Ni=dt.getEventCoordinateInternal(Ii);Ne.setPosition(Ni)},Mi=function(ni){const Ii=dt.getEventCoordinateInternal(ni);ce.getMap().getView().setCenterInternal(Ii),window.removeEventListener("mousemove",bi),window.removeEventListener("mouseup",Mi)};He.addEventListener("mousedown",function(){window.addEventListener("mousemove",bi),window.addEventListener("mouseup",Mi)})}setMap(et){const N=this.getMap();if(et!==N){if(N){const g=N.getView();g&&this.unbindView_(g),this.ovmap_.setTarget(null)}if(super.setMap(et),et){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,r.KT)(et,mt.A.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const g=et.getView();g&&(this.bindView_(g),g.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(et){if(et.key===P.A.VIEW){const N=et.oldValue;N&&this.unbindView_(N);const g=this.getMap().getView();this.bindView_(g)}else!this.ovmap_.isRendered()&&(et.key===P.A.TARGET||et.key===P.A.SIZE)&&this.ovmap_.updateSize()}bindView_(et){if(!this.view_){const N=new Ot.Ay({projection:et.getProjection()});this.ovmap_.setView(N)}et.addChangeListener(Nt.A.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(et){et.removeChangeListener(Nt.A.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const et=this.getMap(),N=this.ovmap_;if(!et.isRendered()||!N.isRendered())return;const g=et.getSize(),K=et.getView().calculateExtentInternal(g);if(this.viewExtent_&&(0,ft.aI)(K,this.viewExtent_))return;this.viewExtent_=K;const B=N.getSize(),dt=N.getView().calculateExtentInternal(B),It=N.getPixelFromCoordinateInternal((0,ft.Py)(K)),Wt=N.getPixelFromCoordinateInternal((0,ft.k_)(K)),pe=Math.abs(It[0]-Wt[0]),ce=Math.abs(It[1]-Wt[1]),Ne=B[0],He=B[1];pe<.1*Ne||ce<.1*He||pe>.75*Ne||ce>.75*He?this.resetExtent_():(0,ft.ms)(dt,K)||this.recenter_()}resetExtent_(){const et=this.getMap(),N=this.ovmap_,g=et.getSize(),K=et.getView().calculateExtentInternal(g),B=N.getView(),ot=Math.log(7.5)/Math.LN2,dt=1/(.1*Math.pow(2,ot/2));(0,ft.Af)(K,dt),B.fitInternal((0,Ct.VY)(K))}recenter_(){const et=this.getMap(),N=this.ovmap_,g=et.getView();N.getView().setCenterInternal(g.getCenterInternal())}updateBox_(){const et=this.getMap(),N=this.ovmap_;if(!et.isRendered()||!N.isRendered())return;const g=et.getSize(),S=et.getView(),K=N.getView(),B=this.rotateWithView_?0:-S.getRotation(),ot=this.boxOverlay_,dt=this.boxOverlay_.getElement(),It=S.getCenterInternal(),Wt=S.getResolution(),pe=K.getResolution(),ce=g[0]*Wt/pe,Ne=g[1]*Wt/pe;ot.setPosition(It),dt&&(dt.style.width=ce+"px",dt.style.height=Ne+"px",dt.style.transform="rotate("+B+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,r.Jz)(this.ovmap_,ht.A.POSTRENDER,function(et){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(et){et.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(y.nT),this.collapsed_?(0,E.fo)(this.collapseLabel_,this.label_):(0,E.fo)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const et=this.ovmap_;if(!this.collapsed_){if(et.isRendered())return this.viewExtent_=void 0,void et.render();et.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(et){this.collapsible_!==et&&(this.collapsible_=et,this.element.classList.toggle("ol-uncollapsible"),!et&&this.collapsed_&&this.handleToggle_())}setCollapsed(et){!this.collapsible_||this.collapsed_===et||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(et){this.rotateWithView_!==et&&(this.rotateWithView_=et,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(et){this.validateExtent_(),this.updateBox_()}};var oe=s(8201),_e=s(6160),ct=s(7290),Gt=s(7712),Vt=s(1395),ge=s(897),Ae=s(1363),qe=s(8733),ti=s(3982),Ie=s(7421),_t=s(3279),zt=s(1409),xe=s(6610);const $t=["mapDiv"];function ze(hi,et){1&hi&&(_t.j41(0,"div",3),_t.EFF(1,"+"),_t.k0s())}ti.h.addIcons(Ie.A);let si=(()=>{class hi{constructor(N,g){this.mapSvc=N,this.ngZone=g,this.subs=[],this.mapSize=[0,0],this.initialMapStateSet=!1,this.removePopupsOnMouseLeave=S=>{this.mapSvc.removeAllPopups(K=>"pointermove"===K.get("addEvent"))}}ngOnInit(){this.subscribeToMapState(),this.initMap(),this.subscribeToLayers()}ngAfterViewInit(){this.map.setTarget(this.mapDivView.nativeElement),this.subscribeToMapEvents(),this.map.getTargetElement().addEventListener("mouseleave",this.removePopupsOnMouseLeave)}ngAfterViewChecked(){this.updateMapSize()}ngOnDestroy(){this.subs.forEach(g=>g.unsubscribe());const N=this.mapStateSvc.getMapState().value;N.options.notifier="user",this.mapStateSvc.setMapState(N),this.map&&(this.map.un("moveend",this.mapOnMoveend),this.map.un("click",this.mapOnClickMove),this.map.un("dblclick",this.mapOnDclick),this.map.getTargetElement().removeEventListener("mouseleave",this.removePopupsOnMouseLeave),this.map.getInteractions().forEach(g=>{this.map.removeInteraction(g)}))}getMapDiv(){return this.mapDivView&&this.mapDivView.nativeElement?{width:this.mapDivView.nativeElement.offsetWidth,height:this.mapDivView.nativeElement.offsetHeight}:null}updateMapSize(){const N=this.getMapDiv();if(N)if(N.width===this.mapSize[0]&&N.height===this.mapSize[1]){if(!this.initialMapStateSet){const g=this.mapStateSvc.getMapState().getValue();this.setMapState(g),this.initialMapStateSet=!0}}else this.ngZone.runOutsideAngular(()=>{this.map.updateSize(),this.mapSize=this.map.getSize()})}addUpdateLayers(N,g,S){const K=this.mapSvc.getLayerGroups(g)[0].getLayers(),B=S.reduce((ot,dt)=>ot+this.mapSvc.getLayers(dt).length,0);N.length!==this.mapSvc.getLayers(g).length?this.mapSvc.setUkisLayers(N,g,B):this.updateLayers(N,g,B,K)}updateLayers(N,g,S,K){for(const B of N){const ot=this.mapSvc.getLayerByKey({key:"id",value:B.id},g);if(ot){ot.getVisible()!==B.visible&&((0,Ae.CO)(ot,B.visible,B instanceof Q.tr),this.mapSvc.hideAllPopups(!B.visible,Wt=>{const ce=Wt.getId().toString().split(":")[0];return!ce||(ce===B.id?ce===B.id:void 0)})),ot.getOpacity()!==B.opacity&&(0,Ae.f2)(ot,B.opacity,B instanceof Q.tr),this.updateLayerSource(B,ot);const dt=N.indexOf(B),It=S>0?dt+S:dt;ot.getZIndex()!==It&&((0,Ae.m9)(ot,dt,K),(0,Ae.Sq)(ot,dt,S)),this.updateLayerParamsWith(ot,B)}}}updateLayerSource(N,g){if(N instanceof Q.tr&&g instanceof L.A){const S=N.custom_layer.getSource(),K=g.getSource();S&&(0,$.v6)(K)!==(0,$.v6)(S)&&(g.setSource(S),K instanceof Gt.Ay&&K.dispose())}else if(N instanceof Q.tr&&N.custom_layer instanceof M.A&&g instanceof M.A){const S=N.custom_layer.getLayers().getArray();g.getLayers().getArray().forEach((B,ot)=>{const dt=S[ot];if(B instanceof L.A&&dt instanceof L.A){const It=B.getSource(),Wt=dt.getSource();Wt&&(0,$.v6)(It)!==(0,$.v6)(Wt)&&B.setSource(Wt)}})}}updateLayerParamsWith(N,g){switch(g.type){case Q.dz:this.updateWmsLayerParamsWith(N,g);break;case Q.Tv:this.updateWmtsLayerParamsWith(N,g);break;case Q.jV:this.updateGeojsonLayerParamsWith(N,g);break;case Q.M:this.updateWfsLayerParamsWith(N,g);break;case Q.ag:this.updateTmsLayerParamsWith(N,g)}}updateTmsLayerParamsWith(N,g){g instanceof Q.vK&&(0,ge.AV)(N,g.options.style,g.options.styleSource)}updateWfsLayerParamsWith(N,g){g.options&&g.options.style!==N.getStyle()&&N.setStyle(g.options.style),N.getSource().getUrl()!==g.url&&N.getSource().setUrl(g.url)}updateGeojsonLayerParamsWith(N,g){const S=N.getSource();if(S){if(g.data){const K=this.mapSvc.geoJsonToFeatures(g.data);if(S instanceof Vt.A){const B=S.getSource();B.clear(),B.addFeatures(K)}else S.clear(),S.addFeatures(K)}else g.url&&(S instanceof Vt.A?S.getSource().setUrl(g.url):S.setUrl(g.url));"object"==typeof g?.cluster&&"distance"in g.cluster&&S instanceof Vt.A&&S.setDistance(g.cluster.distance)}g?.options?.style&&N.setStyle(g.options.style)}updateWmsLayerParamsWith(N,g){if(N instanceof L.A){const K=N.getSource().getParams(),B=g.params;this.shallowEqual(K,B)||N.getSource().updateParams(B)}}updateWmtsLayerParamsWith(N,g){if(N instanceof L.A){const S=N.getSource(),K=S.getStyle(),B=S.getFormat(),ot=S.getVersion(),dt=S.getMatrixSet(),It=g.params.style,Wt=g.params.format,pe=g.params.version,ce=g.params.matrixSetOptions.matrixSet;if(void 0!==It&&K!==It||void 0!==Wt&&B!==Wt||void 0!==pe&&ot!==pe||void 0!==ce&&dt!==ce){const Ne=g.filtertype.toLowerCase();this.mapSvc.updateUkisLayer(g,Ne)}}}shallowEqual(N,g){const S=Object.getOwnPropertyNames(N),K=Object.getOwnPropertyNames(g);if(S.length!==K.length)return!1;for(const B of S)if(N[B]!==g[B])return!1;return!0}addUpdateBaseLayers(N){const g=this.mapSvc.getLayerGroups("baselayers")[0].getLayers();if(N.length!==this.mapSvc.getLayers("baselayers").length){const S=N.filter(K=>!0===K.visible);0===S.length?N[0].visible=!0:S.length>1&&(N.forEach(K=>K.visible=!1),N[0].visible=!0),this.mapSvc.setUkisLayers(N,"baselayers")}else for(const S of N){const K=this.mapSvc.getLayerByKey({key:"id",value:S.id},"baselayers");if(K){const B=N.indexOf(S);K.getVisible()!==S.visible&&(0,Ae.CO)(K,S.visible,S instanceof Q.tr),K.getZIndex()!==B&&(g.remove(K),g.insertAt(B,K),(0,Ae.Sq)(K,B)),K.getOpacity()!==S.opacity&&(0,Ae.f2)(K,S.opacity,S instanceof Q.tr),this.updateLayerSource(S,K),this.updateLayerParamsWith(K,S)}}}subscribeToLayers(){if(this.layersSvc){const N=this.layersSvc.getBaseLayers().subscribe(K=>this.addUpdateBaseLayers(K));this.subs.push(N);const g=this.layersSvc.getLayers().subscribe(K=>this.addUpdateLayers(K,"layers",["baselayers"]));this.subs.push(g);const S=this.layersSvc.getOverlays().subscribe(K=>this.addUpdateLayers(K,"overlays",["baselayers","layers"]));this.subs.push(S)}}setMapState(N){const g=this.mapStateSvc.getLastAction().getValue();"user"===N.options.notifier&&("setExtent"===g?this.mapSvc.setExtent(N.extent,!0):"setState"===g?(this.mapSvc.setZoom(N.zoom),this.mapSvc.setCenter([N.center.lon,N.center.lat],!0),this.mapSvc.setRotation(N.rotation)):"setRotation"===g&&this.mapSvc.setRotation(N.rotation))}subscribeToMapState(){if(this.mapStateSvc){const N=this.mapStateSvc.getMapState().pipe((0,z.i)(1)).subscribe(g=>this.setMapState(g));this.subs.push(N)}}subscribeToMapEvents(){this.mapOnMoveend=N=>{const g=this.mapStateSvc.getMapState().getValue(),S=this.mapSvc.getZoom(),K=this.mapSvc.getCenter(!0),B=this.mapSvc.getCurrentExtent(!0),ot=this.mapSvc.getRotation(),dt={lat:parseFloat(K[1]),lon:parseFloat(K[0])},It=new Y.yn(S,dt,{notifier:"map"},B,g.time,g.viewAngle,ot);this.mapStateSvc.setMapState(It)},this.map.on("moveend",this.mapOnMoveend),this.mapOnClickMove=N=>{this.mapSvc.layersOnMapEvent(N)},this.map.on(["click","pointermove"],this.mapOnClickMove),this.mapOnDclick=N=>{this.mapSvc.removeAllPopups()},this.map.on("dblclick",this.mapOnDclick)}initMap(){const N=this.mapSvc.createMap();this.map=N.map;const g=this.map.getInteractions();(0,qe.N)().forEach(K=>{g.getArray().find(ot=>ot.constructor.name===K.constructor.name)||this.map.addInteraction(K)}),this.setControls(),this.layersSvc||console.log("there is no layersSvc as defined!"),this.mapStateSvc||console.log("there is no mapStateSvc as defined!")}setControls(){const N=[],g=[];if(this.map&&(this.map.getControls().getArray().forEach(K=>g.push(K)),this.map.getControls().clear()),this.controls&&this.map){if(!1!==this.controls.attribution){let S={collapsible:!0,collapsed:!1};"object"==typeof this.controls.attribution&&(S=Object.assign(S,this.controls.attribution));const K=new w.A(S);N.push(K)}if(this.controls.scaleLine){let S={};"object"==typeof this.controls.scaleLine&&(S=Object.assign(S,this.controls.scaleLine));const K=new n(S);N.push(K)}if(!1!==this.controls.zoom){let S={};"object"==typeof this.controls.zoom&&(S=Object.assign(S,this.controls.zoom));const K=new d.A(S);N.push(K)}if(this.controls.mousePosition){let S={coordinateFormat:B=>(0,C.KN)(B,2),projection:"EPSG:4326"};"object"==typeof this.controls.mousePosition&&(S=Object.assign(S,this.controls.mousePosition));const K=new O(S);N.push(K)}if(this.controls.fullScreen){let S={};"object"==typeof this.controls.fullScreen&&(S=Object.assign(S,this.controls.fullScreen));const K=new tt(S);N.push(K)}if(this.controls.overviewMap){const S=document.createElement("spawn");S.innerHTML='<cds-icon shape="world"></cds-icon>';let K={layers:[new oe.A({source:new _e.A})],label:S};"object"==typeof this.controls.overviewMap&&(K=Object.assign(K,this.controls.overviewMap));const B=new ye(K);N.push(B)}if(this.controls.rotate){let S={};"object"==typeof this.controls.rotate&&(S=Object.assign(S,this.controls.rotate));const K=new ct.A(S);N.push(K)}N.length&&(g.filter(K=>!N.includes(K)).forEach(K=>N.push(K)),this.map.getControls().extend(N))}}static#t=this.\u0275fac=function(g){return new(g||hi)(_t.rXU(zt.t),_t.rXU(_t.SKi))};static#e=this.\u0275cmp=_t.VBU({type:hi,selectors:[["ukis-map-ol"]],viewQuery:function(g,S){if(1&g&&_t.GBs($t,5),2&g){let K;_t.mGM(K=_t.lsd())&&(S.mapDivView=K.first)}},inputs:{layersSvc:"layersSvc",mapStateSvc:[_t.Mj6.None,"mapState","mapStateSvc"],controls:"controls"},decls:3,vars:1,consts:[["mapDiv",""],["ref","map",1,"map"],["class","crosshair",4,"ngIf"],[1,"crosshair"]],template:function(g,S){1&g&&(_t.j41(0,"div",1,0),_t.DNE(2,ze,2,0,"div",2),_t.k0s()),2&g&&(_t.R7$(2),_t.Y8G("ngIf",S.controls&&S.controls.crosshair))},dependencies:[xe.bT],styles:['@charset "UTF-8";:root{--ukis-crosshair-color: #ff0004;--ukis-popup-bg-color: rgb(238, 238, 238);--ukis-drop-shadow: drop-shadow(0 1px 4px rgba(0, 0, 0, .2));--ukis-ol-bbox-bg-color: rgba(255, 255, 255, .4);--ukis-ol-bbox-border-color: rgba(87, 87, 87, .4);--ukis-ol-overviewmap-left: .5em;--ukis-ol-overviewmap-bottom: 3em;--ukis-ol-control-bg-color: rgba(87, 87, 87, .6);--ukis-ol-control-border-color: rgba(87, 87, 87, .4)}.map{width:100%;height:100%;position:relative}.ol-popup{position:absolute;background-color:var(--ukis-popup-bg-color);filter:var(--ukis-drop-shadow);padding:15px;border-radius:2px;bottom:12px;left:-50px;min-width:280px;display:none;z-index:1000000}.ol-popup .ol-popup-closer{text-decoration:none;position:absolute;top:0;right:8px;cursor:pointer}.ol-popup .ol-popup-closer:after{content:"\\2716"}.ol-popup:after,.ol-popup:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup:after{border-top-color:var(--ukis-popup-bg-color);border-width:10px;left:48px;margin-left:-10px}.ol-popup:before{border-width:11px;left:48px;margin-left:-11px}.ol-popup.hidden{visibility:hidden}.crosshair{top:50%;left:50%;font-size:large;color:var(--ukis-crosshair-color);z-index:1;position:absolute;cursor:default}.ol-control{padding:1px;--ol-subtle-background-color: #fff6}.ol-control button{--ol-subtle-foreground-color: #fff;--ol-foreground-color: #fff;cursor:pointer;background-color:var(--ukis-ol-control-bg-color)}.ol-control button:focus{background-color:var(--ukis-ol-control-bg-color)}.ol-control button:hover{background-color:var(--ukis-ol-control-border-color)}.ol-scale-line{background:#fff6;line-height:1.375em;padding:1px}.ol-scale-line .ol-scale-line-inner{background:var(--ukis-ol-control-bg-color);border-color:var(--ukis-ol-control-bg-color);--ol-foreground-color: #fff}.ol-attribution:not(.ol-collapsed){padding:0 2px}.ol-attribution ul{font-size:.5rem}.ol-box{background-color:var(--ukis-ol-bbox-bg-color);border-color:var(--ukis-ol-bbox-border-color)!important}.ol-box.ol-drag-select{border-color:var(--clr-color-action-600, var(--fallback-color-no-clr))!important}.ol-overviewmap{left:var(--ukis-ol-overviewmap-left)!important;bottom:var(--ukis-ol-overviewmap-bottom)!important}\n'],encapsulation:2})}return hi})()},1409:(le,pt,s)=>{"use strict";s.d(pt,{t:()=>hi});var Y=s(3279),z=s(8356),Q=s(1155),$=s(3980),L=s(8324),M=s(8052),w=s(3942),I=s(5227),y=s(1744),m=s(7477),u=s(5715),o=s(7908),i=s(8201),l=s(9346),n=s(5927),d=s(3757),f=s(897),r=s(6151),C=s(9422),_=s(8518),v=s(7849),F=s(1888),O=s(7659),X=s(1992),P=s(4579),E=s(4873),W=s(454),Z=s(9325);const D=class A extends X.A{constructor(N){const g=void 0!==N.requestEncoding?N.requestEncoding:"KVP",S=N.tileGrid;let K=N.urls;void 0===K&&void 0!==N.url&&(K=(0,W.Uu)(N.url)),super({attributions:N.attributions,attributionsCollapsible:N.attributionsCollapsible,cacheSize:N.cacheSize,crossOrigin:N.crossOrigin,interpolate:N.interpolate,projection:N.projection,reprojectionErrorThreshold:N.reprojectionErrorThreshold,tileClass:N.tileClass,tileGrid:S,tileLoadFunction:N.tileLoadFunction,tilePixelRatio:N.tilePixelRatio,urls:K,wrapX:void 0!==N.wrapX&&N.wrapX,transition:N.transition,zDirection:N.zDirection}),this.version_=void 0!==N.version?N.version:"1.0.0",this.format_=void 0!==N.format?N.format:"image/jpeg",this.dimensions_=void 0!==N.dimensions?N.dimensions:{},this.layer_=N.layer,this.matrixSet_=N.matrixSet,this.style_=N.style,this.requestEncoding_=g,this.setKey(this.getKeyForDimensions_()),K&&K.length>0&&(this.tileUrlFunction=(0,W.FD)(K.map(this.createFromWMTSTemplate.bind(this))))}setUrls(N){this.urls=N;const g=N.join("\n");this.setTileUrlFunction((0,W.FD)(N.map(this.createFromWMTSTemplate.bind(this))),g)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const N=this.urls?this.urls.slice(0):[];for(const g in this.dimensions_)N.push(g+"-"+this.dimensions_[g]);return N.join("/")}updateDimensions(N){Object.assign(this.dimensions_,N),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(N){const g=this.requestEncoding_,S={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==g&&Object.assign(S,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),N="KVP"==g?(0,E.L)(N,S):N.replace(/\{(\w+?)\}/g,function(ot,dt){return dt.toLowerCase()in S?S[dt.toLowerCase()]:ot});const K=this.tileGrid,B=this.dimensions_;return function(ot,dt,It){if(!ot)return;const Wt={TileMatrix:K.getMatrixId(ot[0]),TileCol:ot[1],TileRow:ot[2]};Object.assign(Wt,B);let pe=N;return pe="KVP"==g?(0,E.L)(pe,Wt):pe.replace(/\{(\w+?)\}/g,function(ce,Ne){return Wt[Ne]}),pe}}};var x=s(5534);const U=class T extends x.A{constructor(N){super({extent:N.extent,origin:N.origin,origins:N.origins,resolutions:N.resolutions,tileSize:N.tileSize,tileSizes:N.tileSizes,sizes:N.sizes}),this.matrixIds_=N.matrixIds}getMatrixId(N){return this.matrixIds_[N]}getMatrixIds(){return this.matrixIds_}};var it=s(6370),J=s(7712),ht=s(1395),mt=s(6591),Et=s(3672),Ot=s(1780),Nt=s(206),ft=s(9190),Ct=s(3544),Dt=s(8507),re=s(3139),Jt=s(6378),ye=s(9380),oe=s(730),_e=s(1540),ct=s(221),Gt=s(5409),Vt=s(8782),ge=s(2383),Ae=s(6104),qe=s(1363);const ti="type",Ie="filtertype",_t="id",zt="groupID",xe="groupName",$t="title",Xe="EPSG:4326",si="popup";let hi=(()=>{class et{constructor(g,S){this.app=g,this.envInjector=S,this.hitTolerance=0,this.hitLayerCurr=null,this.hitLayerPrev=null,this.projectionChange=new Ae.B,this.dynamicPopupComponents=new Map,this.popupEvents=new Ae.B,this.filterLayerNoPopup=K=>{const B=K.get(si);let ot=!0;return B||(ot=!1),B&&this.isPopupObj(B)&&!0===B.filterLayer&&(ot=!1),ot},this.map=new Q.A({controls:[]}),this.view=new $.Ay,this.EPSG="EPSG:3857"}createMap(g){const B=new w.A({layers:[]});B.set(Ie,"baselayers"),B.set($t,"Base maps"),B.set(_t,"ID_filtertype_baselayers");const ot=new w.A({layers:[]});ot.set(Ie,"layers"),ot.set($t,"Layers"),ot.set(_t,"ID_filtertype_layers");const dt=new w.A({layers:[]});dt.set(Ie,"overlays"),dt.set($t,"Overlays"),dt.set(_t,"ID_filtertype_overlays"),this.viewOptions={center:(0,Z.pd)([0,0],Xe,this.EPSG),zoom:0,projection:(0,Z.Jt)(this.EPSG)},this.view.constrainRotation&&(this.viewOptions.constrainRotation=this.view.constrainRotation),this.view.enableRotation&&(this.viewOptions.enableRotation=this.view.enableRotation),this.view.extent&&(this.viewOptions.extent=this.view.extent),this.view.constrainOnlyCenter&&(this.viewOptions.constrainOnlyCenter=this.view.constrainOnlyCenter),this.view.smoothExtentConstraint&&(this.viewOptions.smoothExtentConstraint=this.view.smoothExtentConstraint),this.view.getMaxResolution()&&(this.viewOptions.maxResolution=this.view.getMaxResolution()),this.view.getMinResolution()&&(this.viewOptions.minResolution=this.view.getMinResolution()),this.view.getMaxZoom()&&(this.viewOptions.maxZoom=this.view.getMaxZoom()),this.view.getMinZoom()&&(this.viewOptions.minZoom=this.view.getMinZoom()),this.view.multiWorld&&(this.viewOptions.multiWorld=this.view.multiWorld),this.view.constrainResolution&&(this.viewOptions.constrainResolution=this.view.constrainResolution),this.view.smoothResolutionConstraint&&(this.viewOptions.smoothResolutionConstraint=this.view.smoothResolutionConstraint),this.view.getResolution()&&(this.viewOptions.resolution=this.view.getResolution()),this.view.getResolutions()&&(this.viewOptions.resolutions=this.view.getResolutions()),this.view.rotation&&(this.viewOptions.rotation=this.view.rotation),this.view.zoomFactor&&(this.viewOptions.zoomFactor=this.view.zoomFactor);const It=new $.Ay(this.viewOptions);return this.map.getLayerGroup().getLayers().clear(),[B,ot,dt].map(Wt=>this.map.addLayer(Wt)),this.map.setView(It),this.view=this.map.getView(),this.setProjection(this.EPSG),g&&this.map.setTarget(g),{map:this.map,view:this.view}}setHitTolerance(g){this.hitTolerance=g}getHitTolerance(){return this.hitTolerance}addBboxSelection(g,S,K,B){Object.assign({className:"ol-drag-select",condition:g},B);const dt=new Vt.A(B);return S&&dt.on("boxstart",It=>{S(It)}),K&&dt.on("boxend",It=>{const Wt=dt.getGeometry().getExtent();K(Wt,It)}),this.map.addInteraction(dt),dt}getLayers(g){const S=g.toLowerCase();let K;return this.map.getLayers().getArray().forEach(B=>{B.get(Ie)===S&&(K=B.getLayers().getArray())}),K}getLayersFromGroup(g,S,K=!1){const B=g.getLayers().getArray();let ot=B;if(K){let dt=[].concat(B);B.forEach(It=>{It instanceof w.A&&(dt=dt.concat(this.getLayersFromGroup(It,S,!0)))}),ot=dt}return S?ot.filter(dt=>dt.get(Ie)&&dt.get(Ie).toLowerCase()===S.toLowerCase()):ot}getLayerByKey(g,S){const K=this.getLayersFromGroup(this.map.getLayerGroup(),S),B=(0,qe.nY)(K),ot=[];if(B.forEach(dt=>{dt.get(g.key)&&dt.get(g.key)===g.value&&-1===ot.indexOf(dt)&&ot.push(dt)}),!ot.length){const dt=this.getLayersFromGroup(this.map.getLayerGroup(),S,!0);dt.length&&dt.forEach(It=>{It.get(g.key)&&It.get(g.key)===g.value&&-1===ot.indexOf(It)&&ot.push(It)})}return 1===ot.length?ot[0]:null}setRecursiveKey(g,S,K=Ie){g.set(K,S),g instanceof w.A&&g.getLayers().forEach(B=>{this.setRecursiveKey(B,S,K)})}addLayer(g,S){const K=S.toLowerCase();let B;return this.map.getLayers().getArray().forEach(ot=>{ot.get(Ie)===K&&(this.isLayerInGroup(g,ot)||(B=ot.getLayers().getArray(),this.setRecursiveKey(g,K,Ie),B.push(g),ot.setLayers(new mt.A(B))))}),B}isLayerInGroup(g,S){return!!S.getLayers().getArray().filter(ot=>ot.get(_t)===g.get(_t)).length}getLayerGroups(g){const S=[];return this.map.getLayers().forEach(K=>{K instanceof w.A&&(g?K.get(Ie)&&K.get(Ie).toLowerCase()===g.toLowerCase()&&S.push(K):S.push(K))}),S}addLayers(g,S){const K=S.toLocaleLowerCase();let B;return this.getLayerGroups(K).forEach(dt=>{dt.getLayers().getLength()>0?(B=dt.getLayers().getArray(),g.map(Wt=>{this.isLayerInGroup(Wt,dt)||B.push(Wt)})):B=g,B.forEach(Wt=>{Wt instanceof w.A&&this.setRecursiveKey(Wt,K,Ie)}),dt.setLayers(new mt.A(B))}),B}setLayers(g,S){const K=S.toLocaleLowerCase(),B=this.getLayerGroups(K);return g.forEach(ot=>{ot instanceof w.A&&this.setRecursiveKey(ot,S.toLocaleLowerCase(),Ie)}),B.forEach(ot=>{this.cleanUpEventListeners(ot,g),ot.setLayers(new mt.A(g))}),g}cleanUpEventListeners(g,S){const K=g.getLayers().getArray().filter(B=>!S.map(ot=>ot.get(_t)).includes(B.get(_t)));this.removeListenersFromOldLayers(K),K.forEach(B=>g.getLayers().remove(B))}addEventsToLayer(g,S,K){g.events&&(g.events.layer&&g.events.layer.forEach(B=>{S.getListeners(B.event)||S.on(B.event,B.listener)}),g.events.source&&g.events.source.forEach(B=>{K.getListeners(B.event)||K.on(B.event,B.listener)}))}removeListenersFromOldLayers(g){const S=K=>{if("function"==typeof K.getSource){const B=K.getSource();B&&(B instanceof J.Ay&&B.dispose(),B.hasListener()&&B.disposeInternal())}K.hasListener()&&K.disposeInternal()};g.forEach(K=>{K instanceof w.A?K.getLayers().forEach(B=>{S(B)}):K instanceof L.A&&S(K)})}getLayerGroupForLayer(g){const S=this.getLayersFromGroup(this.map.getLayerGroup(),null,!0);S.push(this.map.getLayerGroup());let K=null;return S.forEach(B=>{if(B instanceof w.A){const dt=this.getLayersFromGroup(B).find(It=>It===g);dt&&(K={group:B,layer:dt})}}),K}removeLayerByKey(g,S){const K=S.toLocaleLowerCase(),B=this.getLayerByKey(g,K);if(B){const ot=this.getLayerGroupForLayer(B);if(ot.group){const dt=this.getLayersFromGroup(ot.group).filter(It=>It!==B);ot.group.setLayers(new mt.A(dt))}}}updateLayerByKey(g,S,K){const B=K.toLocaleLowerCase();this.map.getLayers().forEach(ot=>{if(ot.get(Ie)===B){const dt=ot.getLayers();dt.forEach((It,Wt)=>{if(It.get(g.key)&&It.get(g.key)===g.value){const pe=S.getProperties(),ce=S.getExtent(),Ne=S.getMaxZoom(),He=S.getMinZoom(),We=S.getOpacity(),bi=S.getVisible(),Mi=S.getZIndex();if(It instanceof M.A&&S instanceof M.A){const ni=S.getSource();It.setSource(ni)}pe&&It.setProperties(pe),ce&&It.setExtent(ce),Ne&&It.setMaxZoom(Ne),He&&It.setMinZoom(He),We&&It.setOpacity(We),bi&&It.setVisible(bi),Mi&&(0,qe.Sq)(It,Mi),It.changed(),dt.setAt(Wt,It)}}),ot.setLayers(dt)}})}removeAllLayers(g){const S=g.toLowerCase();let K;this.map.getLayers().getArray().forEach(B=>{B.get(Ie)===S&&(K=B.getLayers(),K.clear())})}setUkisLayers(g,S,K){const B=S.toLowerCase(),ot=[];if(g.length<1&&"baselayers"!==B?this.removeAllLayers(B):g.forEach((dt,It)=>{const Wt=this.create_layers(dt);Wt&&((0,qe.Sq)(Wt,It,K),ot.push(Wt))}),ot.length>0)return this.setLayers(ot,B),{type:B,layers:ot}}setUkisLayer(g,S){S||(S=g.filtertype);const K=S.toLowerCase(),ot=this.getLayers(K).find(It=>It.get(_t)===g.id),dt=this.create_layers(g);ot?(this.removeLayerByKey({key:_t,value:ot.get(_t)},S),this.addLayer(dt,S)):this.addLayer(dt,S)}updateUkisLayer(g,S){S||(S=g.filtertype);const K=S.toLowerCase(),ot=this.getLayers(K).find(It=>It.get(_t)===g.id),dt=this.create_layers(g);dt&&this.updateLayerByKey({key:_t,value:ot.get(_t)},dt,S)}create_layers(g){let S;switch(g.type){case z.hq:S=this.create_xyz_layer(g);break;case z.dz:S=this.create_wms_layer(g);break;case z.Tv:S=this.create_wmts_layer(g);break;case z.ag:S=this.create_tms_layer(g);break;case z.jV:S=this.create_geojson_layer(g);break;case z.yA:S=this.create_kml_layer(g);break;case z.M:S=this.create_wfs_layer(g);break;case z.Pm:S=this.create_custom_layer(g);break;case z.fA:S=this.create_stacked_layer(g)}return S}createOlLayerOptions(g,S,K){K&&(g.attribution&&K.setAttributions([g.attribution]),g.continuousWorld&&(K.wrapX_=g.continuousWorld),g.popup&&!g.crossOrigin&&null!==g.crossOrigin&&this.sourceSetCross(K),(g.crossOrigin||null===g.crossOrigin)&&this.sourceSetCross(K));const B={opacity:g.opacity||1,visible:g.visible,zIndex:1,id:g.id,name:g.name,filtertype:g.filtertype,type:S,legendImg:g.legendImg};return K&&(B.source=K),g.popup&&(B.popup=g.popup,B.className=g.id),g.maxResolution&&(B.maxResolution=g.maxResolution),g.minResolution&&(B.minResolution=g.minResolution),g.maxZoom&&(B.maxZoom=g.maxZoom),g.minZoom&&(B.minZoom=g.minZoom),g.bbox&&(B.extent=(0,Z.DI)(g.bbox.slice(0,4),Xe,this.getProjection().getCode())),B}create_xyz_layer(g){const S={wrapX:!1};g.crossOrigin&&(S.crossOrigin=g.crossOrigin);const K=new _.A(S),B=this.createOlLayerOptions(g,"xyz",K),dt=new i.A(Object.assign(B,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(g,dt),this.setCrossOrigin(g,dt),this.addEventsToLayer(g,dt,K),dt}create_tms_layer(g){let S=null;if(g instanceof z.Bk)return S=this.create_xyz_layer(g),S.set("type","tms"),S;if(g instanceof z.vK){const K=new d.A({format:new C.A,tileGrid:(0,r.EN)({minZoom:g.minZoom||void 0,maxZoom:g.maxZoom||void 0}),url:g.url,wrapX:!1}),B=this.createOlLayerOptions(g,"tms",K);S=new n.A(Object.assign(B,{declutter:!0,renderMode:"hybrid"})),this.setCrossOrigin(g,S),this.addEventsToLayer(g,S,K);const dt=g?.options?.style,It=g?.options?.styleSource;return dt&&It&&((0,f.V5)(S,dt),(0,f.AV)(S,dt,It).then(Wt=>{this.setSubdomains(g,S)})),S}}create_wms_layer(g){let S;return"true"===g.params?.TILED||null==g.params?.TILED?S=this.create_tiled_wms_layer(g):"false"===g.params?.TILED&&(S=this.create_image_wms_layer(g)),S}create_tiled_wms_layer(g){const S={params:Object.assign({},this.keysToUppercase(g.params)),wrapX:!1};g.tileSize&&(S.tileGrid=this.getTileGrid("default",null,g.tileSize),delete S.params.tileSize),g.crossOrigin&&(S.crossOrigin=g.crossOrigin);const K=new F.A(S),ot=this.createOlLayerOptions(g,"wms",K),dt=new i.A(Object.assign(ot,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(g,dt),this.addEventsToLayer(g,dt,K),dt}create_image_wms_layer(g){const S={params:Object.assign({},this.keysToUppercase(g.params)),url:g.url},K=new O.A(S),B=this.createOlLayerOptions(g,"wms",K),dt=new o.A(Object.assign(B,{}));return this.addEventsToLayer(g,dt,K),dt}create_wmts_layer(g){if(g instanceof z.fn){let S=this.getTileGrid("wmts"),K=this.EPSG;g.params.matrixSetOptions&&(K=g.params.matrixSetOptions.matrixSet,"resolutions"in g.params.matrixSetOptions?S=this.getTileGrid("wmts",null,g.tileSize,null,g.params.matrixSetOptions.resolutions):("resolutionLevels"in g.params.matrixSetOptions||"tileMatrixPrefix"in g.params.matrixSetOptions)&&(S=this.getTileGrid("wmts",g.params.matrixSetOptions.resolutionLevels,g.tileSize,g.params.matrixSetOptions.tileMatrixPrefix,null)),"matrixIds"in g.params.matrixSetOptions&&(S=this.getTileGrid("wmts",null,g.tileSize,null,null,g.params.matrixSetOptions.matrixIds)));let B={url:g.url,tileGrid:S,matrixSet:K,wrapX:!1,layer:g.params.layer,style:g.params.style};B=Object.assign({},B,g.params),g.crossOrigin&&(B.crossOrigin=g.crossOrigin);const ot=new D(B),dt=this.createOlLayerOptions(g,"wmts",ot),Wt=new i.A(Object.assign(dt,{}));return this.setSubdomains(g,Wt),this.setCrossOrigin(g,Wt),this.addEventsToLayer(g,Wt,ot),Wt}console.error(`layer with id: ${g.id} and type ${g.type} is no instanceof WmtsLayer!`)}create_wfs_layer(g){let S=null;S=0===g.url.indexOf("http://")||0===g.url.indexOf("https://")?new URL(g.url):new URL(g.url,window.location.origin),S.searchParams.set("srsname",this.EPSG);const K=new it.A({format:new Et.A,url:S.toString()}),B=this.createOlLayerOptions(g,"wfs",K),ot={};g.options&&Object.assign(ot,g.options);const dt=new l.A(Object.assign(B,ot));return g.cluster&&this.setCluster(g,dt,K,{}),this.setSubdomains(g,dt),this.setCrossOrigin(g,dt),this.addEventsToLayer(g,dt,K),dt}create_geojson_layer(g){let S;g.data?S=new it.A({features:this.geoJsonToFeatures(g.data),format:new Et.A,wrapX:!1}):g.url&&(S=new it.A({url:g.url,format:new Et.A({dataProjection:Xe,featureProjection:this.EPSG}),wrapX:!1}));const K=this.createOlLayerOptions(g,"geojson",S),B={};g.options&&Object.assign(B,g.options);const ot=new l.A(Object.assign(K,B));return g.cluster&&this.setCluster(g,ot,S,{}),this.setCrossOrigin(g,ot),this.addEventsToLayer(g,ot,S),ot}create_kml_layer(g){let S;g.data?S=new it.A({features:new Ot.Ay({extractStyles:!0}).readFeatures(g.data,{dataProjection:Xe,featureProjection:this.EPSG}),format:new Ot.Ay,wrapX:!1}):g.url&&(S=new it.A({url:g.url,format:new Ot.Ay({extractStyles:!0,crossOrigin:g.crossOrigin&&null===g.crossOrigin?g.crossOrigin:"anonymous"}),wrapX:!1}));const K=this.createOlLayerOptions(g,"kml",S),B={};g.options&&Object.assign(B,g.options);const ot=new l.A(Object.assign(K,B));return g.cluster&&this.setCluster(g,ot,S,{}),this.setCrossOrigin(g,ot),this.addEventsToLayer(g,ot,K.source),ot}setCrossOrigin(g,S){if(S instanceof M.A){const K=S.getSource();g.popup&&!g.crossOrigin&&null!==g.crossOrigin&&this.sourceSetCross(K),(g.crossOrigin||null===g.crossOrigin)&&this.sourceSetCross(K)}}setCluster(g,S,K,B){if(g.cluster){const ot={};"object"==typeof g.cluster&&Object.assign(ot,g.cluster),ot.source=K;const dt=new ht.A(ot);S.setSource(dt),S.setStyle(It=>{const Wt=It.get("features").length;let pe=B[Wt];return pe||(pe=new ye.Ay({image:new ct.A({radius:10,stroke:new Gt.A({color:"#fff"}),fill:new _e.A({color:"#3399CC"})}),text:new oe.A({text:Wt.toString(),fill:new _e.A({color:"#fff"})})}),B[Wt]=pe),pe})}}setSubdomains(g,S){if(g instanceof z.vK||g instanceof z.Bk){const K=S.getSource();if(g.subdomains){if("wfs"===g.type&&K instanceof it.A)g.url=g.url.replace("{s}",`${g.subdomains[0]}-${g.subdomains[g.subdomains.length-1]}`),K.setUrl(g.url);else if(!(K instanceof it.A)){const B=g.subdomains.map(ot=>g.url.replace("{s}",`${ot}`));K.setUrls(B)}}else K.setUrl(g.url)}}sourceSetCross(g){(g instanceof P.Ay||g instanceof X.A||g instanceof v.A)&&(g.crossOrigin="anonymous",g.crossOrigin_="anonymous")}create_custom_layer(g){if(g.custom_layer){const S=g.custom_layer;if(S instanceof M.A){const B=S.getSource();g.attribution&&B.setAttributions([g.attribution]),B.wrapX_=!!g.continuousWorld&&g.continuousWorld,this.setCrossOrigin(g,S),this.addEventsToLayer(g,S,B),B instanceof J.Ay&&S.on("change:source",ot=>{ot.oldValue.dispose()})}else S instanceof w.A?S.getLayers().forEach(B=>{B.set(zt,g.id),B.set(xe,g.name);const ot=`${g.id}_${(0,ge.v6)(B)}`;if(B.get(_t)||B.set(_t,ot),B instanceof M.A&&(this.setCrossOrigin(g,B),this.addEventsToLayer(g,B,B.getSource())),g.popup&&!B.get(si)&&(B.set(si,g.popup),"ol-layer"===B.getClassName()&&(B.className_=ot)),g.bbox){const dt=(0,Z.DI)(g.bbox.slice(0,4),Xe,this.getProjection().getCode());B.setExtent(dt)}}):console.error(`The custom_layer of ${g.id} in not a openlayers Layer`);g.maxResolution&&S.setMaxResolution(g.maxResolution),g.minResolution&&S.setMinResolution(g.minResolution),g.maxZoom&&S.setMaxZoom(g.maxZoom),g.minZoom&&S.setMinZoom(g.minZoom);const K={type:"custom",name:g.name,id:g.id,visible:g.visible,legendImg:g.legendImg,opacity:g.opacity||1,zIndex:1};if(g.popup&&!(S instanceof w.A)&&(K.popup=g.popup,S.className_=g.id),g.bbox){const B=(0,Z.DI)(g.bbox.slice(0,4),Xe,this.getProjection().getCode());S.setExtent(B)}return S.setProperties(K),S}console.log("attribute custom_layer not set on layer type custom!",g)}create_stacked_layer(g){if(g instanceof z.FN){const S=g.layers.map(dt=>(dt.visible=g.visible,dt.opacity=g.opacity,g.popup&&(dt.popup=g.popup),g.events&&(dt.events=g.events),this.create_layers(dt))),K=this.createOlLayerOptions(g,"custom");return S.forEach(dt=>{dt.set(zt,g.id),dt.set(xe,g.name)}),new w.A(Object.assign(K,{layers:S}))}console.log("layer is not of type StackedLayer!",g)}resolutionsFromExtent(g,S,K){const B=S,ot=(0,Dt.Oq)(g),dt=(0,Dt.RG)(g),It=Math.max(dt/K,ot/K),Wt=B+1,pe=new Array(Wt);for(let ce=0;ce<Wt;++ce)pe[ce]=It/Math.pow(2,ce);return pe}matrixIdsFromResolutions(g,S){return Array.from(Array(g).keys()).map(K=>S?`${S}:${K}`:K)}getTileGrid(g="default",S,K,B,ot,dt){const It=S||re.L,Wt=K||re.R,pe=B||"",ce=this.getProjection().getExtent(),Ne=this.resolutionsFromExtent(ce,It,Wt),He=this.matrixIdsFromResolutions(Ne.length,pe),We={extent:ce,origin:(0,Dt.Py)(ce),resolutions:ot||Ne,tileSize:[Wt,Wt]};return"wmts"===g?(We.matrixIds=dt||He,new U(We)):"default"===g?new x.A(We):void 0}isPopupObj(g){return g&&"object"==typeof g&&!Array.isArray(g)}isPopupObjMove(g){return this.isPopupObj(g)&&"move"===g.event}isPopupObjClick(g){return this.isPopupObj(g)&&"click"===g.event}isPopupObjArray(g){return Array.isArray(g)&&g.length&&this.isPopupObj(g[0])}isPopupStringArray(g){return Array.isArray(g)&&g.length&&"string"==typeof g[0]}eventIsBrowserEvent(g,S){return"move"===g&&"pointermove"===S.type||"click"===g&&"click"===S.type||void 0}layersOnMapEvent(g){let S=!1;const K=this.map.getAllLayers();let B=K.length;const ot=new Map;let dt=null;for(;B--;){const It=K[B];let Wt=It.getVisible(),pe=It.getOpacity();const ce=It.get(zt);if(ce){const He=this.getLayerByKey({key:_t,value:ce});Wt=He.getVisible(),pe=He.getOpacity()}const Ne=It.get(si);if(this.checkForPopupAsObservable(It,Wt,pe,Ne,ot),Wt&&0!==pe&&this.filterLayerExtent(It,g.pixel)&&!Ne)break;if(this.filterLayerNoPopup(It)&&It.getData&&It.getData(g.pixel)&&this.checkIsRaster(It)){const He=It.getData(g.pixel);let We;if((He instanceof Uint8ClampedArray||He instanceof Uint8Array||He instanceof Float32Array)&&(We=He[3]),We||He instanceof DataView){dt={layer:It,color:He};break}}else if(this.filterLayerNoPopup(It)&&this.filterLayerExtent(It,g.pixel)&&this.checkIsVector(It)){const He=this.map.getFeaturesAtPixel(g.pixel,{layerFilter:We=>It.get(_t)===We.get(_t)});if(He.length){dt={layer:It,feature:He[0]};break}}}if(dt){const It=dt.layer.get(si);this.hitLayerCurr=dt.layer.get(_t),this.hitLayerPrev||(this.hitLayerPrev=this.hitLayerCurr),(dt.color||dt.feature)&&(S=!0),this.hitLayerPrev&&this.hitLayerPrev!==this.hitLayerCurr&&(S=!1,this.hitLayerPrev=this.hitLayerCurr),this.checkTopLayerEvent(g,It)&&this.layerOnEvent(g,dt.layer,dt.color,dt.feature)}S?this.map.getTargetElement().style.cursor="pointer":(this.publishNullPropertiesAsObservable(ot,g),this.removeAllPopups(It=>"pointermove"===It.get("addEvent")),this.map.getTargetElement().style.cursor="")}checkForPopupAsObservable(g,S,K,B,ot){S&&0!==K&&B&&(this.isPopupObj(B)&&B.asObservable?ot.set(g.get(_t),g):this.isPopupObjArray(B)&&B.forEach(dt=>{dt.asObservable&&ot.set(g.get(_t),g)}))}publishNullPropertiesAsObservable(g,S){g.size&&g.forEach(K=>{const B=K.get(si),ot=[];this.isPopupObj(B)&&B.asObservable?ot.push(B):this.isPopupObjArray(B)&&B.forEach(dt=>{dt.asObservable&&ot.push(dt)}),ot.forEach(dt=>{this.eventIsBrowserEvent(dt.event||"click",S)&&this.popupEvents.next({popupObj:dt,popupParams:{layerId:K.get(_t),layerName:K.get("name"),mapEvent:S,layer:K,properties:null}})})})}checkTopLayerEvent(g,S){let K=null;const B=(ot,dt)=>{dt.event?this.eventIsBrowserEvent(dt.event,ot)&&this.isPopupObjClick(dt)?K="click":this.eventIsBrowserEvent(dt.event,ot)&&this.isPopupObjMove(dt)&&(K="move"):"click"===ot.type&&(K="click")};return"boolean"==typeof S?!0===S&&"click"===g.type&&(K="click"):this.isPopupStringArray(S)?"click"===g.type&&(K="click"):this.isPopupObjArray(S)?S.map(ot=>{B(g,ot)}):B(g,S),K}checkIsRaster(g){return g instanceof u.A||g instanceof y.A}checkIsVector(g){return g instanceof m.A&&!this.checkIsRaster(g)}layerOnEvent(g,S,K,B){this.checkIsRaster(S)?this.rasterOnEvent(g,S,K):this.checkIsVector(S)&&this.vectorOnEvent(g,S,B)}filterLayerExtent(g,S){let K=!0;const B=g.getExtent();if(B){const ot=this.map.getCoordinateFromPixel(S);(0,Dt.Ym)(B,ot)||(K=!1)}return K}vectorOnEvent(g,S,K){if(S&&K){const B=S.get(si);let ot={};const It=K.getProperties().features;if(It&&1===It.length)ot=It[0].getProperties();else{if(It&&It.length>1){if("click"===g.type){const Wt=this.getFeaturesExtent(It);return this.setExtent(Wt),!1}return!0}ot=K.getProperties()}this.prepareAddPopup(S,g,B,K,ot)}}rasterOnEvent(g,S,K){const B=S.get(si);B&&this.prepareAddPopup(S,g,B,null,null,K)}prepareAddPopup(g,S,K,B,ot,dt){const It=g.getProperties(),Wt={layerId:It.id,layerName:It.name||It[xe]||null,mapEvent:S,layer:g,properties:ot?Object.assign({},ot):{}};Wt.properties?.geometry&&delete Wt.properties.geometry,B&&(Wt.feature=B),dt&&(Wt.color=dt);const pe=He=>{He&&He.filterkeys&&(Wt.properties=Object.keys(Wt.properties).filter(We=>He.filterkeys.includes(We)).reduce((We,bi)=>(We[bi]=Wt.properties[bi],We),{}))};this.isPopupStringArray(K)?Wt.properties=Object.keys(Wt.properties).filter(He=>K.includes(He)).reduce((He,We)=>(He[We]=Wt.properties[We],He),{}):this.isPopupObjArray(K)?pe(K.find(We=>this.eventIsBrowserEvent(We.event,S))):this.isPopupObj(K)&&pe(K);const ce=He=>{if(He.properties){const We=Object.keys(He.properties);Array.isArray(We)&&(Wt.properties=Object.keys(Wt.properties).reduce((bi,Mi)=>{const ni=He.properties[Mi];return ni?bi[ni]=Wt.properties[Mi]:bi[Mi]=Wt.properties[Mi],bi},{}))}};this.isPopupObjArray(K)?K.forEach(He=>{this.eventIsBrowserEvent(He.event,S)&&ce(He)}):this.isPopupObj(K)&&ce(K);const Ne=He=>{"asyncPopup"in He?He.asyncPopup(Wt,We=>{He.asObservable?this.publishPopupEvent(He,Wt,We):this.addPopup(Wt,He,We,He.event,He.single)}):He.asObservable?this.publishPopupEvent(He,Wt):this.addPopup(Wt,He,null,He.event,He.single)};"boolean"==typeof K||this.isPopupStringArray(K)?this.addPopup(Wt):this.isPopupObjArray(K)?K.forEach(He=>{this.eventIsBrowserEvent(He.event,S)&&Ne(He)}):K&&Ne(K)}publishPopupEvent(g,S,K){K&&(S.properties=Object.assign(S.properties,K)),this.popupEvents.next({popupObj:g,popupParams:S})}addPopup(g,S,K,B,ot){const dt=g.layer.get(si),It=g.layer.get(_t),Wt="popup_move_ID",pe="move_ID_L_F",ce=this.getPopups().find(We=>We.getId()===Wt),Ne=g.mapEvent;let He=null;if("move"===B&&(g.color?He=`${It}:${g.color.toString()}`:g.feature?He=`${It}:${(0,ge.v6)(g.feature)}`:g.layer&&(He=`${It}:${(0,ge.v6)(g.layer)}`)),"move"===B&&"pointermove"===Ne.type&&ce){let We;const bi=g.feature;if(We=bi&&"Point"===bi.getGeometry()?.getType()?bi.getGeometry().getCoordinates():Ne.coordinate,He!==ce.get(pe)){const Mi=this.createPopupContainer(ce,g,S,K,B);ce.setElement(Mi)}ce.setPosition(We),ce.getElement().parentElement.style.zIndex="1"}else if("pointermove"!==Ne.type||B)if("pointermove"===Ne.type&&"click"===B)ce&&this.removeAllPopups(We=>"pointermove"===We.get("addEvent"));else{let We=null;We="move"===B?Wt:g.feature?`${It}:${(0,ge.v6)(g.feature)}`:g.layer?`${It}:${(0,ge.v6)(g.layer)}`:`${It}:popup_${(new Date).getTime()}`;const bi={id:We,autoPan:{animation:{duration:250}},positioning:"bottom-center",stopEvent:!0,insertFirst:!1};let Mi=bi;if(this.isPopupObjArray(dt)){const zi=dt.find(Ri=>this.eventIsBrowserEvent(Ri.event,Ne));zi.options&&(Mi=Object.assign(bi,zi.options))}else this.isPopupObj(dt)&&dt.options&&(Mi=Object.assign(bi,dt.options));const ni=new I.A(Mi);He&&ni.set(pe,He),ot&&this.removeAllPopups(zi=>{const ui=zi.getId().toString().split(":")[0];return!ui||(It===ui?It===ui:void 0)});const Ii=this.getPopups().find(zi=>zi.getId()===ni.getId()&&ni.getId()!==Wt);Ii&&(this.map.removeOverlay(Ii),this.destroyDynamicPopupComponent(Ii.getId().toString()));const Ni=this.createPopupContainer(ni,g,S,K,B);let $i;ni.getId()===Wt?ni.set("addEvent","pointermove"):ni.set("addEvent",Ne.type),ni.set(ti,si),ni.setElement(Ni);const Ji=g.feature;$i=Ji&&"Point"===Ji.getGeometry()?.getType()?Ji.getGeometry().getCoordinates():Ne.coordinate,ni.setPosition($i),ce&&"move"===B||this.map.addOverlay(ni)}else ce&&this.removeAllPopups(We=>"pointermove"===We.get("addEvent"))}createPopupContainer(g,S,K,B,ot){const dt=document.createElement("div");dt.className="ol-popup-content";let It="";if(K?.popupFunction){const pe=K.popupFunction(S);It="string"==typeof pe?pe:this.createPopupHtml(pe)}else B?It="string"==typeof B?B:this.createPopupHtml(B):Object.keys(S.properties).length&&(It=this.createPopupHtml(S.properties));if(dt.innerHTML=It,K?.dynamicPopup){const pe=g.getId().toString();this.destroyDynamicPopupComponent(pe),this.createDynamicPopupComponent(pe,dt,S,K)}const Wt=document.createElement("div");if(Wt.className="ol-popup",Wt.id=g.getId().toString(),Wt.style.display="block",!ot||"move"!==ot){const pe=document.createElement("a");pe.className="ol-popup-closer",Wt.appendChild(pe);const ce=()=>{pe.removeEventListener("click",ce,!1),this.map.removeOverlay(g),this.destroyDynamicPopupComponent(g.getId().toString())};pe.addEventListener("click",ce,!1)}return Wt.appendChild(dt),Wt}removeAllPopups(g){let S=this.getPopups();g&&(S=this.getPopups().filter(g)),S.forEach(K=>{K.get(ti)===si&&(this.map.removeOverlay(K),this.destroyDynamicPopupComponent(K.getId().toString()))})}hideAllPopups(g,S){let K=this.getPopups();S&&(K=this.getPopups().filter(S)),K.forEach(B=>{if(B.get(ti)===si){const ot=B.getElement();g?ot.classList.add("hidden"):ot.classList.remove("hidden")}})}createPopupHtml(g){let S="<table>";for(const K in g)g.hasOwnProperty(K)&&(S+='<tr><td style="vertical-align: top; padding-right: 7px;"><b>'+K+": </b></td><td>"+g[K]+"</td></tr>");return S+="</table>",S}getPopups(){const g=[];return this.map.getOverlays().getArray().slice(0).forEach(S=>{S.get(ti)===si&&g.push(S)}),g}destroyDynamicPopupComponent(g){this.dynamicPopupComponents.has(g)&&(this.dynamicPopupComponents.get(g).destroy(),this.dynamicPopupComponents.delete(g))}createDynamicPopupComponent(g,S,K,B){const ot=(0,Y.a0P)(B.dynamicPopup.component,{environmentInjector:this.envInjector,hostElement:S});if(B.dynamicPopup.getAttributes){const dt=B.dynamicPopup.getAttributes(K);for(const It in dt)"undefined"!==dt[It]&&(ot.instance[It]=dt[It])}this.app.attachView(ot.hostView),this.dynamicPopupComponents.set(g,ot)}setExtent(g,S,K){const B=(0,Z.Jt)(S?Xe:this.EPSG),ot=(0,Z.DI)(g.slice(0,4),B,this.getProjection().getCode()),dt={size:this.map.getSize()};return K&&Object.assign(dt,K),this.map.getView().fit(ot,K),ot}setCenter(g,S){const K=(0,Z.Jt)(S?Xe:this.EPSG),B=(0,Z.pd)(g,K,this.getProjection().getCode());return this.map.getView().setCenter(B),B}getCenter(g){const S=(0,Z.Jt)(g?Xe:this.EPSG),K=(0,Z.Jt)(this.getProjection().getCode());return(0,Z.pd)(this.map.getView().getCenter(),K,S)}getFeaturesExtent(g,S){const K=g[0].getGeometry().getExtent().slice(0);if(g.forEach(B=>{(0,Dt.X$)(K,B.getGeometry().getExtent())}),S){const B=(0,Z.Jt)(Xe);return(0,Z.DI)(K,this.getProjection().getCode(),B)}return K}getCurrentExtent(g){const S=(0,Z.Jt)(g?Xe:this.EPSG),K=this.map.getView().calculateExtent();return(0,Z.DI)(K,this.getProjection().getCode(),S)}setRotation(g){const S=this.map.getView();g*=Math.PI/180,S.setRotation(g)}getRotation(){return this.map.getView().getRotation()*(180/Math.PI)}setZoom(g){this.map.getView().setZoom(g)}getZoom(){return this.map.getView().getZoom()}zoomInOut(g,S){const K=this.map.getView();if(!K)return;const B=S?.zoomStep||1,ot="+"===g?B:-1*B,dt=K.getZoom();if(void 0!==dt){const It=K.getConstrainedZoom(dt+ot);K.getAnimating()&&K.cancelAnimations(),K.animate({zoom:It,duration:S?.duration||250,easing:S?.easing||Jt.vT},Wt=>{S.callback&&S.callback(Wt)})}}geoJsonToFeature(g){return new Et.A({dataProjection:Xe,featureProjection:this.EPSG}).readFeature(g)}geoJsonToFeatures(g){return new Et.A({dataProjection:Xe,featureProjection:this.EPSG}).readFeatures(g)}getProjection(){return this.map.getView().getProjection()}reprojectFeatures(g,S,K){g.getFeatures().forEach(B=>{B.getGeometry().transform(S,K)})}setProjection(g){if(g){let S={};if(this.viewOptions&&(S=this.viewOptions,S.minResolution=void 0,S.maxResolution=void 0,S.resolution=void 0,S.resolutions=void 0),g instanceof Nt.A){S.projection=g;const ot=(0,Z.pd)(this.map.getView().getCenter(),this.map.getView().getProjection(),g);S.center=ot,S.zoom=this.map.getView().getZoom()}else"string"==typeof g&&(S.projection=g,S.center=this.map.getView().getCenter(),S.zoom=this.map.getView().getZoom());const K=new $.Ay(S),B=this.EPSG;this.EPSG=K.getProjection().getCode(),this.map.setView(K),this.view=this.map.getView(),this.map.getLayers().getArray().forEach(ot=>{ot.getLayers().getArray().forEach(dt=>{if(dt instanceof M.A){let It=dt.getSource();for(;It.source;)It=It.source;It instanceof it.A&&this.reprojectFeatures(It,B,this.EPSG)}})}),this.projectionChange.next(this.getProjection())}}registerProjection(g){Ct.A.defs(g.code,g.proj4js),(0,ft.kz)(Ct.A)}getOlProjection(g){return new Nt.A({code:g.code,extent:g.extent?g.extent:void 0,worldExtent:g.worldExtent?g.worldExtent:void 0,global:!!g.global&&g.global,units:g.units?g.units:void 0})}keysToUppercase(g){return Object.keys(g).forEach(S=>{const K=S.toUpperCase();K!==S&&(g[K]=g[S],delete g[S])}),g}static#t=this.\u0275fac=function(S){return new(S||et)(Y.KVO(Y.o8S),Y.KVO(Y.uvJ))};static#e=this.\u0275prov=Y.jDH({token:et,factory:et.\u0275fac,providedIn:"root"})}return et})()},2218:(le,pt,s)=>{"use strict";s.d(pt,{Cf:()=>L,tC:()=>Y.t});var Y=s(1409),Q=(s(733),s(6610)),$=s(3279);let L=(()=>{class M{static#t=this.\u0275fac=function(y){return new(y||M)};static#e=this.\u0275mod=$.$C({type:M});static#i=this.\u0275inj=$.G2t({providers:[Y.t],imports:[Q.MD]})}return M})()},1363:(le,pt,s)=>{"use strict";s.d(pt,{n3:()=>K,cS:()=>pe,m9:()=>u,nY:()=>Q,f2:()=>y,CO:()=>I,Sq:()=>m,Yz:()=>$,zy:()=>_t});var Y=s(3942),z=s(6166);function Q(V){let j=[];for(const rt of V)if(rt instanceof Y.A){const vt=Q(rt.getLayers().getArray());j=Array.prototype.concat(j,vt)}else j.push(rt);return j}function $(V,j,rt,at=!1){const vt=j.getContext("2d");if(!vt)throw new Error("The target-canvas needs to use a 2d-context.");if(!j.width||!j.height)throw new Error("TargetCanvas: width or height have not been set.");vt instanceof CanvasRenderingContext2D&&vt.clearRect(0,0,j.width,j.height);const bt=V.getSize();j.width=bt[0],j.height=bt[1];const xt=Q(V.getLayers().getArray()),wt=[];for(const Ht of xt)if(Ht.getVisible()&&Ht.getOpacity()>0){const Rt=Ht.on("postrender",jt=>{const Ft=jt.context.canvas;vt instanceof CanvasRenderingContext2D&&(vt.beginPath(),vt.drawImage(Ft,0,0,Ft.clientWidth,Ft.clientHeight,0,0,j.width,j.height),vt.closePath())});Array.isArray(Rt)?Rt.map(jt=>wt.push(jt)):wt.push(Rt)}at?V.on("rendercomplete",Ht=>{rt(j)}):V.once("rendercomplete",Ht=>{for(const Rt of wt)(0,z.e)(Rt);rt(j)}),V.renderSync()}function I(V,j,rt=!1){V.setVisible(j),!rt&&V instanceof Y.A&&V.getLayers().forEach(vt=>{I(vt,j)})}function y(V,j,rt=!1){V.setOpacity(j),!rt&&V instanceof Y.A&&V.getLayers().forEach(vt=>{y(vt,j)})}function m(V,j,rt){V.setZIndex(rt>0?j+rt:j),V instanceof Y.A&&V.getLayers().forEach(bt=>{m(bt,j,rt)})}function u(V,j,rt){rt.remove(V),rt.insertAt(j,V)}var o=s(7908),i=s(9325);const l=V=>{let j=[];for(const rt of V){let at;at=Array.isArray(rt[0])?l(rt):rt,j=Array.prototype.concat(j,at)}return j},d=(V,j)=>Math.log(V)/Math.log(j),f=(V,j)=>d(V,j)%1==0,v=(V,j,rt)=>{const at=V.createShader(j);if(!at)throw new Error("No shader was created");if(V.shaderSource(at,rt),V.compileShader(at),!V.getShaderParameter(at,V.COMPILE_STATUS))throw V.deleteShader(at),new Error(`An error occurred compiling the shader: ${V.getShaderInfoLog(at)}.    \n\n Shader code: ${rt}`);return at},P=(V,j)=>{V.useProgram(j)},R=(V,j,rt)=>{V.bindBuffer(V.ARRAY_BUFFER,rt.buffer),V.enableVertexAttribArray(j),V.vertexAttribPointer(j,rt.vectorSize,rt.type,rt.normalize,rt.stride,rt.offset)},ht=(V,j,rt,at)=>{if(rt>V.getParameter(V.MAX_COMBINED_TEXTURE_IMAGE_UNITS))throw new Error(`There are only ${V.getParameter(V.MAX_COMBINED_TEXTURE_IMAGE_UNITS)} texture bind points, but you tried to bind to point nr. ${rt}.`);7===rt&&console.error(`You are about to bind to the dedicated texture-construction bind point (nr. ${rt}).\n        If after this call another texture is built, your shader will now use that new texture instead of this one!\n        Consider using another bind point.`),V.activeTexture(V.TEXTURE0+rt),V.bindTexture(V.TEXTURE_2D,j),V.uniform1i(at,rt)},Ct=(V,j,rt)=>{const at=V.getUniformLocation(j,rt);if(null===at)throw new Error(`Couldn't find uniform ${rt} in program.`);return at},Dt=(V,j,rt,at)=>{switch(rt){case"bool":case"int":V.uniform1i(j,at[0]);break;case"bvec2":case"ivec2":V.uniform2i(j,at[0],at[1]);break;case"bvec3":case"ivec3":V.uniform3i(j,at[0],at[1],at[2]);break;case"bvec4":case"ivec4":V.uniform4i(j,at[0],at[1],at[2],at[3]);break;case"bool[]":case"int[]":V.uniform1iv(j,at);break;case"bvec2[]":case"ivec2[]":V.uniform2iv(j,at);break;case"bvec3[]":case"ivec3[]":V.uniform3iv(j,at);break;case"bvec4[]":case"ivec4[]":V.uniform4iv(j,at);break;case"float":V.uniform1f(j,at[0]);break;case"vec2":V.uniform2f(j,at[0],at[1]);break;case"vec3":V.uniform3f(j,at[0],at[1],at[2]);break;case"vec4":V.uniform4f(j,at[0],at[1],at[2],at[3]);break;case"float[]":V.uniform1fv(j,at);break;case"vec2[]":V.uniform2fv(j,at);break;case"vec3[]":V.uniform3fv(j,at);break;case"vec4[]":V.uniform4fv(j,at);break;case"mat2":V.uniformMatrix2fv(j,!1,at);break;case"mat3":V.uniformMatrix3fv(j,!1,at);break;case"mat4":V.uniformMatrix4fv(j,!1,at);break;default:throw Error(`Type ${rt} not implemented.`)}};class oe{constructor(j,rt,at){this.vertexShaderSource=rt,this.fragmentShaderSource=at,this.program=((V,j,rt)=>{const at=V.createProgram();if(!at)throw new Error("No program was created");const vt=v(V,V.VERTEX_SHADER,j),bt=v(V,V.FRAGMENT_SHADER,rt);if(V.attachShader(at,vt),V.attachShader(at,bt),V.linkProgram(at),V.detachShader(at,vt),V.detachShader(at,bt),V.deleteShader(vt),V.deleteShader(bt),!V.getProgramParameter(at,V.LINK_STATUS))throw V.deleteProgram(at),new Error("Unable to initialize the shader program: "+V.getProgramInfoLog(at));return at})(j,rt,at),this.id=function(V){let j=0;for(const rt of V)j+=rt.charCodeAt(0);return`${j}`}(rt+at)}}class _e{constructor(j,rt,at,vt,bt){this.location=Ct(j,rt.program,at),this.type=vt,this.value=bt,this.variableName=at}}class ct{constructor(j,rt,at,vt,bt){this.location=Ct(j,rt.program,at),this.texture=vt instanceof HTMLImageElement||vt instanceof HTMLCanvasElement?((V,j)=>{const rt=V.createTexture();if(!rt)throw new Error("No texture was created");V.activeTexture(V.TEXTURE0+7),V.bindTexture(V.TEXTURE_2D,rt);const vt=V.RGBA,bt=V.RGBA,xt=V.UNSIGNED_BYTE;let wt,Ht;return V.texImage2D(V.TEXTURE_2D,0,vt,bt,xt,j),V.generateMipmap(V.TEXTURE_2D),V.bindTexture(V.TEXTURE_2D,null),j instanceof HTMLImageElement?(wt=j.naturalWidth,Ht=j.naturalHeight):(wt=j.width,Ht=j.height),{texture:rt,level:0,internalformat:vt,format:bt,type:xt,width:wt,height:Ht,border:0}})(j,vt):vt,this.bindPoint=bt,this.variableName=at}}class Gt{constructor(j,rt,at,vt,bt){this.location=Ct(j,rt.program,at),this.texture=((V,j)=>{const rt=j.length,at=j[0].length,vt=j[0][0].length;if(!f(at,2)||!f(rt,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${at} x ${rt}`);if(4!==vt)throw new Error(`Expecting 4 channels, but ${vt} provided`);const bt=V.createTexture();if(!bt)throw new Error("No texture was created");V.activeTexture(V.TEXTURE0+7),V.bindTexture(V.TEXTURE_2D,bt);const Ht=V.RGBA,Rt=V.RGBA,jt=V.UNSIGNED_BYTE,Lt=new Uint8Array(l(j));return 4!==vt&&V.pixelStorei(V.UNPACK_ALIGNMENT,1),V.texImage2D(V.TEXTURE_2D,0,Ht,at,rt,0,Rt,jt,Lt),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_S,V.CLAMP_TO_EDGE),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_T,V.CLAMP_TO_EDGE),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,V.NEAREST),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,V.NEAREST),V.bindTexture(V.TEXTURE_2D,null),{texture:bt,level:0,internalformat:Ht,format:Rt,type:jt,width:at,height:rt,border:0}})(j,vt),this.bindPoint=bt,this.variableName=at}}class Vt{constructor(j,rt,at,vt,bt="triangles"){let xt;switch(bt){case"triangles":xt=j.TRIANGLES;break;case"lines":xt=j.LINES;break;case"points":xt=j.POINTS;break;default:throw new Error(`Invalid drawing mode ${bt}`)}this.location=((V,j,rt)=>{const at=V.getAttribLocation(j,rt);if(-1===at)throw new Error(`Couldn't find attribute ${rt} in program.`);return at})(j,rt.program,at),this.value=((V,j,rt=V.TRIANGLES)=>{const at=new Float32Array(l(j)),vt=V.createBuffer();if(!vt)throw new Error("No buffer was created");return V.bindBuffer(V.ARRAY_BUFFER,vt),V.bufferData(V.ARRAY_BUFFER,at,V.STATIC_DRAW),V.bindBuffer(V.ARRAY_BUFFER,null),{buffer:vt,vectorSize:j[0].length,vectorCount:j.length,type:V.FLOAT,normalize:!1,stride:0,offset:0,drawingMode:rt}})(j,vt,xt),this.variableName=at,this.drawingMode=xt}}class ge{constructor(j,rt,at="triangles"){let vt;switch(at){case"triangles":vt=j.TRIANGLES;break;case"lines":vt=j.LINES;break;case"points":vt=j.POINTS;break;default:throw new Error(`Invalid drawing mode ${at}`)}this.index=((V,j,rt=V.TRIANGLES)=>{const at=new Uint16Array(l(j)),vt=V.createBuffer();if(!vt)throw new Error("No buffer was created");return V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,vt),V.bufferData(V.ELEMENT_ARRAY_BUFFER,at,V.STATIC_DRAW),V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,null),{buffer:vt,count:at.length,type:V.UNSIGNED_SHORT,offset:0,drawingMode:rt}})(j,rt,vt)}}function Ae(V,j){for(const rt of V)if(j(rt))return rt;return null}class ti{constructor(j,rt,at,vt,bt){this.program=j,this.attributes=rt,this.uniforms=at,this.textures=vt,this.index=bt;const[xt,wt,Ht,Rt]=function qe(V){const j=/^\s*attribute (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*);/gm,rt=/^\s*uniform (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*)(\[\d\])*;/gm,at=/^\s*uniform sampler2D (\w*);/gm,vt=/^\s*precision (\w*) float;/gm,bt=V.fragmentShaderSource+"\n\n\n"+V.vertexShaderSource,xt=[];let wt;for(;null!==(wt=j.exec(bt));)xt.push(wt[2]);const Ht=[];let Rt;for(;null!==(Rt=rt.exec(bt));)Ht.push(Rt[2]);const jt=[];let Lt;for(;null!==(Lt=at.exec(bt));)jt.push(Lt[1]);const Ft=[];let St;for(;null!==(St=vt.exec(bt));)Ft.push(St[1]);return[xt,Ht,jt,Ft]}(j);for(const Lt of xt){const Ft=rt.filter(St=>St.variableName===Lt);if(1!==Ft.length)throw new Error(`Provided ${Ft.length} values for shader's attribute ${Lt}.`)}for(const Lt of wt){const Ft=at.filter(St=>St.variableName===Lt);if(1!==Ft.length)throw new Error(`Provided ${Ft.length} values for shader's uniform ${Lt}.`)}for(const Lt of Ht){const Ft=vt.filter(St=>St.variableName===Lt);if(1!==Ft.length)throw new Error(`Provided ${Ft.length} values for shader's texture ${Lt}.`)}1===Rt.length&&console.warn("You have only provided one precision qualifier.\n            This can cause issues when you want to use a uniform in both the vertex- and the fragment-shader.");const jt=this.attributes.map(Lt=>Lt.value.vectorCount);if(Math.min(...jt)!==Math.max(...jt))throw new Error("Your attributes are not of the same length!")}bind(j){P(j,this.program.program);for(const rt of this.attributes)R(j,rt.location,rt.value);for(const rt of this.uniforms)Dt(j,rt.location,rt.type,rt.value);for(const rt of this.textures)ht(j,rt.texture.texture,rt.bindPoint,rt.location);this.index&&((V,j)=>{V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,this.index.index.buffer)})(j)}render(j,rt,at,vt){at?((V,j,rt)=>{V.bindFramebuffer(V.FRAMEBUFFER,j.framebuffer),rt?(j.width/j.height!=rt[2]/rt[3]&&console.warn("Your viewport-aspect is different from the framebuffer-aspect."),V.viewport(...rt)):V.viewport(0,0,j.width,j.height)})(j,at,vt):((V,j)=>{V.bindFramebuffer(V.FRAMEBUFFER,null),j?(V.canvas.width/V.canvas.height!=j[2]/j[3]&&console.warn("Your viewport-aspect is different from the canvas-aspect."),V.viewport(...j)):V.viewport(0,0,V.canvas.width,V.canvas.height)})(j,vt),rt&&((V,j)=>{V.clearColor(j[0],j[1],j[2],j[3]),V.clearDepth(1),V.clear(V.COLOR_BUFFER_BIT|V.DEPTH_BUFFER_BIT)})(j,rt),this.index?((V,j)=>{V.drawElements(j.drawingMode,j.count,j.type,j.offset)})(j,this.index.index):((V,j)=>{V.drawArrays(j.drawingMode,j.offset,j.vectorCount)})(j,this.attributes[0].value)}updateAttributeData(j,rt,at){const vt=Ae(this.attributes,bt=>bt.variableName===rt);if(!vt)throw new Error(`No such attribute ${rt} to be updated.`);((V,j,rt)=>{const at=new Float32Array(l(rt));V.bindBuffer(V.ARRAY_BUFFER,j.buffer),V.bufferData(V.ARRAY_BUFFER,at,V.STATIC_DRAW),V.bindBuffer(V.ARRAY_BUFFER,null)})(j,vt.value,at)}updateUniformData(j,rt,at){const vt=Ae(this.uniforms,bt=>bt.variableName===rt);if(!vt)throw new Error(`No such uniform ${rt} to be updated.`);vt.value=at}updateTextureData(j,rt,at){const vt=Ae(this.textures,xt=>xt.variableName===rt);if(!vt)throw new Error(`No such texture ${rt} to be updated.`);const bt=((V,j,rt)=>{if(V.activeTexture(V.TEXTURE0+7),V.bindTexture(V.TEXTURE_2D,j.texture),rt instanceof HTMLImageElement||rt instanceof HTMLCanvasElement||rt instanceof ImageBitmap)V.texImage2D(V.TEXTURE_2D,0,V.RGBA,V.RGBA,V.UNSIGNED_BYTE,rt);else{const at=rt[0].length,vt=rt.length;if(!f(at,2)||!f(vt,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${vt} x ${at}`);const bt=new Uint8Array(l(rt));V.texImage2D(V.TEXTURE_2D,j.level,j.internalformat,j.width,j.height,j.border,j.format,j.type,bt)}return V.generateMipmap(V.TEXTURE_2D),V.bindTexture(V.TEXTURE_2D,null),rt instanceof HTMLImageElement?(j.width=rt.naturalWidth,j.height=rt.naturalHeight):rt instanceof HTMLCanvasElement||rt instanceof ImageBitmap?(j.width=rt.width,j.height=rt.height):(j.width=rt[0].length,j.height=rt.length),j})(j,vt.texture,at);vt.texture=bt}}class Ie{constructor(j,rt,at){const vt=(V=>{const j=V.createFramebuffer();if(!j)throw new Error("Error creating framebuffer");return j})(j),bt=((V,j,rt)=>{if(j<=0||rt<=0)throw new Error("Width and height must be positive.");const at=V.createTexture();if(!at)throw new Error("No texture was created");return V.activeTexture(V.TEXTURE0+7),V.bindTexture(V.TEXTURE_2D,at),V.texImage2D(V.TEXTURE_2D,0,V.RGBA,j,rt,0,V.RGBA,V.UNSIGNED_BYTE,null),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_S,V.CLAMP_TO_EDGE),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_T,V.CLAMP_TO_EDGE),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,V.NEAREST),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,V.NEAREST),V.bindTexture(V.TEXTURE_2D,null),{texture:at,level:0,internalformat:V.RGBA,format:V.RGBA,type:V.UNSIGNED_BYTE,width:j,height:rt,border:0}})(j,rt,at),xt=((V,j,rt)=>{if(V.bindFramebuffer(V.FRAMEBUFFER,rt),V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,j.texture,0),V.checkFramebufferStatus(V.FRAMEBUFFER)!==V.FRAMEBUFFER_COMPLETE)throw new Error(`Error creating framebuffer: framebuffer-status: ${V.checkFramebufferStatus(V.FRAMEBUFFER)} ; error-code: ${V.getError()}`);return V.bindFramebuffer(V.FRAMEBUFFER,null),{framebuffer:rt,texture:j,width:j.width,height:j.height}})(j,bt,vt);this.fbo=xt}}function _t(V,j){const rt=1e3/V;let vt,bt,xt,at=rt;const wt=()=>{vt=window.performance.now(),j(at),bt=window.performance.now(),at=bt-vt,xt=Math.max(rt-at,0),setTimeout(()=>{requestAnimationFrame(wt)},xt)};wt()}const N=(V,j)=>({vertices:[[-V/2,j/2,0],[-V/2,-j/2,0],[V/2,-j/2,0],[-V/2,j/2,0],[V/2,-j/2,0],[V/2,j/2,0]],texturePositions:[[0,1],[0,0],[1,0],[0,1],[1,0],[1,1]]});var S=s(4380);class K extends o.A{constructor(j){super(j)}createRenderer(){return this.renderer=new B(this),this.renderer}updateSunAngle(j){this.renderer&&this.renderer.updateSunAngle(j)}}class B extends S.A{constructor(j){super(j),this.state="loading";const rt=document.createElement("canvas");rt.width=1200,rt.height=800,rt.style.position="absolute";const at=rt.getContext("webgl"),vt=j.getSource(),bt=vt.getProjection(),xt=vt.getImageExtent(),wt=this.bboxOntoRectangle(2,2,xt),Ht=((V,j=256,rt=256,at="red")=>{const vt=document.createElement("canvas").getContext("2d");if(!vt)throw new Error("no context");return vt.canvas.width=j,vt.canvas.height=rt,vt.font=`bold ${5*rt/6|0}px sans-serif`,vt.textAlign="center",vt.textBaseline="middle",vt.fillStyle=at,vt.fillText(V,j/2,rt/2),vt.canvas})("test",2048,2048,"red"),Rt=new oe(at,"\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2canv;\n            varying vec2 v_texturePosition;\n            void main() {\n                vec3 pixelPosition = u_world2pix * vec3(a_position.x, a_position.y, 1.);\n                vec3 canvasPosition = u_pix2canv * pixelPosition;\n                gl_Position = vec4(canvasPosition.x, canvasPosition.y, 0., 1.);\n                v_texturePosition = a_texturePosition;\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_srtm;\n            uniform float u_imageSize;\n            uniform vec3 u_sun;\n            varying vec2 v_texturePosition;\n            void main() {\n                float delta = 4. / u_imageSize;\n                float top = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y + delta)).r;\n                float bot = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y - delta)).r;\n                float lft = texture2D(u_srtm, vec2(v_texturePosition.x + delta, 1. - v_texturePosition.y        )).r;\n                float rgt = texture2D(u_srtm, vec2(v_texturePosition.x - delta, 1. - v_texturePosition.y        )).r;\n\n                vec3 surfaceNormal = vec3(\n                    lft - rgt,\n                    bot - top,\n                    2. * delta\n                );\n                surfaceNormal = normalize(surfaceNormal);\n                vec3 sunNormal = normalize(u_sun);\n                float alignment = abs(dot(sunNormal, surfaceNormal));\n\n                gl_FragColor = vec4(0., 0., 0., 0.5 * alignment);\n            }\n        ");P(at,Rt.program);const jt=new ti(Rt,[new Vt(at,Rt,"a_position",wt.vertices),new Vt(at,Rt,"a_texturePosition",wt.texturePositions)],[new _e(at,Rt,"u_imageSize","float",[2048]),new _e(at,Rt,"u_sun","vec3",[0,0,1]),new _e(at,Rt,"u_world2pix","mat3",l([[1,0,0],[0,1,0],[0,0,1]])),new _e(at,Rt,"u_pix2canv","mat3",l([[1/(rt.width/2),0,0],[0,-1/(rt.height/2),0],[-1,1,1]]))],[new ct(at,Rt,"u_srtm",Ht,0)]);jt.bind(at),this.shader=jt,this.canvas=rt,this.gl=at,this.projection=bt;const Lt=vt.getImage(xt,.02197265625,2.440000295639038,bt);Lt.load(),Lt.addEventListener("change",Ft=>{const St=Lt.getImage();this.shader.updateTextureData(this.gl,"u_srtm",St),this.shader.bind(this.gl),this.state="ready",j.changed();const ee=j.get("map");requestAnimationFrame(()=>{ee.render()})})}prepareFrame(j){if("ready"===this.state){const rt=j.coordinateToPixelTransform;this.shader.updateUniformData(this.gl,"u_world2pix",l([[rt[0],rt[1],0],[rt[2],rt[3],0],[rt[4],rt[5],1]])),this.shader.bind(this.gl),j.viewState.projection!==this.projection&&this.reprojectImage(j.viewState.projection)}return!0}renderFrame(j,rt){return"ready"===this.state&&(this.shader.render(this.gl),this.transformCanvas(j)),this.canvas}renderDeclutter(j){}updateSunAngle(j){this.shader.updateUniformData(this.gl,"u_sun",[j[0],j[1],1]),this.shader.bind(this.gl),this.shader.render(this.gl)}bboxOntoRectangle(j,rt,at){const vt=N(j,rt);for(const bt of vt.vertices){const wt=bt[1];bt[0]=bt[0]===j/2?at[2]:at[0],bt[1]=wt===rt/2?at[3]:at[1]}return vt}reprojectImage(j){const rt=super.getLayer().getSource(),at=rt.getProjection(),vt=rt.getImageExtent(),bt=(0,i.DI)(vt,at,j),xt=this.bboxOntoRectangle(2,2,bt);this.shader.updateAttributeData(this.gl,"a_position",xt.vertices),this.shader.bind(this.gl)}transformCanvas(j){const rt=j.layerStatesArray[j.layerIndex],at=j.pixelRatio,vt=j.size,bt=Math.round(vt[0]*at),xt=Math.round(vt[1]*at),wt=rt.opacity;this.canvas.width=bt,this.canvas.height=xt,this.canvas.style.opacity=`${wt}`,this.shader.updateUniformData(this.gl,"u_pix2canv",l([[1/(this.canvas.width/2),0,0],[0,-1/(this.canvas.height/2),0],[-1,1,1]]))}}var ot=s(3812),dt=s(9346),It=s(1395),Wt=s(5551);class pe extends dt.A{constructor(j){super(j),this.options=j}createRenderer(){return new ce(this,this.options.renderSettings)}updateParas(j,rt,at){const vt={colorRamp:this.options.renderSettings.colorRamp,maxEdgeLength:this.options.renderSettings.maxEdgeLength,storeInterpolatedPixelData:this.options.renderSettings.storeInterpolatedPixelData,valueProperty:this.options.renderSettings.valueProperty,power:j,showLabels:at,smooth:rt};super.getRenderer().updateSettings(vt),this.options.renderSettings=vt}}class ce extends ot.A{constructor(j,rt){super(j),this.settings=rt,this.container=document.createElement("div"),this.container.classList.add("ol-layer"),this.container.style.setProperty("position","absolute"),this.container.style.setProperty("width","100%"),this.container.style.setProperty("height","100%"),this.webGlCanvas=document.createElement("canvas"),this.webGlCanvas.style.setProperty("position","absolute"),this.webGlCanvas.style.setProperty("left","0px"),this.webGlCanvas.style.setProperty("top","0px"),this.webGlCanvas.style.setProperty("width","100%"),this.webGlCanvas.style.setProperty("height","100%"),this.webGlCanvas.width=1e3,this.webGlCanvas.height=1e3,this.gl=this.webGlCanvas.getContext("webgl"),this.container.appendChild(this.webGlCanvas),this.pointRenderer=new ot.A(j);const at=j.getSource();this.projection=at.getProjection();const{coords:vt,values:bt,bboxDelta:xt,maxVal:wt}=this.parseData(at,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:Ht,maxEdgeLengthBbox:Rt}=this.parseDataBbox(xt,vt,bt,wt,this.settings.maxEdgeLength);this.bbox=xt;const jt=[[1,0,0],[0,1,0],[0,0,1]];this.interpolationShader=He(this.gl,Ht,wt,this.settings.power,Rt),this.valueFb=new Ie(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.colorizationShader=We(this.gl,this.settings.colorRamp,wt,this.settings.smooth,this.valueFb),this.colorFb=new Ie(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.arrangementShader=bi(this.gl,jt,jt,xt,this.colorFb),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo)}prepareFrame(j){if(this.webGlCanvas.style.opacity=`${j.layerStatesArray[j.layerIndex].opacity}`,j.viewState.projection!==this.projection){this.projection=j.viewState.projection;const vt=super.getLayer().getSource(),{coords:bt,values:xt,bboxDelta:wt,maxVal:Ht}=this.parseData(vt,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:Rt,maxEdgeLengthBbox:jt}=this.parseDataBbox(wt,bt,xt,Ht,this.settings.maxEdgeLength);this.updateInterpolationShader(this.settings.power,Rt,jt),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo),this.bbox=wt}return this.updateArrangementShader(j.coordinateToPixelTransform,j.size[0],j.size[1],this.bbox),this.pointRenderer.prepareFrame(j),!0}renderFrame(j,rt){if(this.runArrangementShader(),this.settings.showLabels){const at=this.pointRenderer.renderFrame(j,this.container);(0,Wt.WM)(this.container,[this.webGlCanvas,at])}else(0,Wt.WM)(this.container,[this.webGlCanvas]);return this.container}renderDeclutter(j){}updateSettings(j){const rt=this.settings;this.settings=j,j.power!==rt.power?(this.updateInterpolationShader(j.power),this.runInterpolationShader(this.valueFb.fbo),this.updateColorizationShader(j.smooth),this.runColorizationShader(this.colorFb.fbo)):j.smooth!==rt.smooth&&(this.updateColorizationShader(j.smooth),this.runColorizationShader(this.colorFb.fbo)),super.getLayer().changed()}updateArrangementShader(j,rt,at,vt){const xt=[[1/(rt/2),0,0],[0,-1/(at/2),0],[-1,1,1]];this.arrangementShader.updateUniformData(this.gl,"u_world2pix",l([[j[0],j[1],0],[j[2],j[3],0],[j[4],j[5],1]])),this.arrangementShader.updateUniformData(this.gl,"u_pix2clip",l(xt)),this.arrangementShader.updateUniformData(this.gl,"u_bbox",vt)}runArrangementShader(j){this.arrangementShader.bind(this.gl),this.arrangementShader.render(this.gl,[0,0,0,0],j)}updateInterpolationShader(j,rt,at){this.interpolationShader.updateUniformData(this.gl,"u_power",[j]),rt&&this.interpolationShader.updateTextureData(this.gl,"u_dataTexture",[rt]),at&&this.interpolationShader.updateUniformData(this.gl,"u_maxDistance",[at])}runInterpolationShader(j){this.interpolationShader.bind(this.gl),this.interpolationShader.render(this.gl,[0,0,0,0],j),this.settings.storeInterpolatedPixelData&&(this.interpolatedValues=(V=>{const j=V.getContext("webgl");if(!j)throw new Error("no context");const rt=j.getParameter(j.IMPLEMENTATION_COLOR_READ_FORMAT),at=j.getParameter(j.IMPLEMENTATION_COLOR_READ_TYPE);let vt;if(at===j.UNSIGNED_BYTE)vt=new Uint8Array(j.drawingBufferWidth*j.drawingBufferHeight*4);else if(at===j.UNSIGNED_SHORT_5_6_5||at===j.UNSIGNED_SHORT_4_4_4_4||at===j.UNSIGNED_SHORT_5_5_5_1)vt=new Uint16Array(j.drawingBufferWidth*j.drawingBufferHeight*4);else{if(at!==j.FLOAT)throw new Error(`Did not understand pixel data type ${at} for format ${rt}`);vt=new Float32Array(j.drawingBufferWidth*j.drawingBufferHeight*4)}return j.readPixels(0,0,V.width,V.height,rt,at,vt),vt})(this.webGlCanvas))}updateColorizationShader(j){this.colorizationShader.updateUniformData(this.gl,"u_smooth",[j?1:0])}runColorizationShader(j){this.colorizationShader.bind(this.gl),this.colorizationShader.render(this.gl,[0,0,0,0],j)}parseData(j,rt,at){let vt=j.getFeatures();vt=j instanceof It.A?j.getSource().getFeatures():j.getFeatures();const bt=vt.map(ee=>ee.getGeometry().getCoordinates()),xt=vt.map(ee=>parseFloat(ee.getProperties()[rt])),wt=Mi(bt),Ht=wt[2]-wt[0],Rt=wt[3]-wt[1];let jt,Lt;Ht>Rt?(Lt=Ht-Rt,jt=0):(Lt=0,jt=Rt-Ht);const Ft=[wt[0]-at,wt[1]-at,wt[2]+jt+at,wt[3]+Lt+at],St=xt.reduce((ee,Pt)=>Pt>ee?Pt:ee,0);return{coords:bt,values:xt,bboxDelta:Ft,maxVal:St}}parseDataBbox(j,rt,at,vt,bt){const xt=ni(rt,at).map(Ft=>{const St=Ne([Ft[0],Ft[1]],j);return[255*(St[0]+1)/2,255*(St[1]+1)/2,255*Ft[2]/vt,255]}),wt=xt.length,Ht=((V,j)=>{const rt=Math.ceil(d(V,2));return Math.pow(2,rt)})(wt);for(let Ft=0;Ft<Ht-wt;Ft++)xt.push([0,0,0,0]);return{observationsBbox:xt,maxEdgeLengthBbox:bt/Math.max(j[2]-j[0],j[3]-j[1])}}}const Ne=(V,j)=>[(V[0]-j[0])/(j[2]-j[0])*2-1,(V[1]-j[1])/(j[3]-j[1])*2-1],He=(V,j,rt,at,vt)=>{const xt=new oe(V,"\n            precision mediump float;\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n                v_position = a_position.xy;\n                v_texturePosition = a_texturePosition;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_power;\n            uniform sampler2D u_dataTexture;\n            uniform int u_nrDataPoints;\n            uniform float u_maxValue;\n            uniform float u_maxDistance;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n\n                float valSum = 0.0;\n                float wSum = 0.0;\n                float minD = 10000.0;\n                for (int i = 0; i < 10000; i++) {\n                    if (i > u_nrDataPoints) {\n                        break;\n                    }\n                    vec4 dataPoint = texture2D(u_dataTexture, vec2(float(i) / float(u_nrDataPoints), 0.5));\n                    if (dataPoint.w > 0.0) {  // texture is padded to next power of two with transparent 0-values.\n                        vec2 coords = dataPoint.xy * 2.0 - 1.0;  // transforming coords from [0, 1] to [-1, 1]\n                        float value = dataPoint.z * u_maxValue;  // transforming value from [0, 1] to [0, maxValue]\n\n                        float d = distance(v_position, coords);\n                        float w = 1.0 / pow(d, u_power);\n                        valSum += value * w;\n                        wSum += w;\n                        if (d < minD) {\n                            minD = d;\n                        }\n                    }\n                }\n                float interpolatedValue = valSum / wSum;\n                float alpha = 1.0;\n                if (minD > u_maxDistance) {\n                    alpha = 0.0;\n                }\n                vec4 color = vec4(interpolatedValue / u_maxValue, 0.0, 0.0, alpha);\n\n                gl_FragColor = color;\n            }\n        "),wt={vertices:[[-1,1,0],[-1,-1,0],[1,-1,0],[1,1,0]],texturePositions:[[0,1],[0,0],[1,0],[1,1]],vertexIndices:[[0,1,2],[0,2,3]]};return new ti(xt,[new Vt(V,xt,"a_position",wt.vertices),new Vt(V,xt,"a_texturePosition",wt.texturePositions)],[new _e(V,xt,"u_power","float",[at]),new _e(V,xt,"u_nrDataPoints","int",[j.length]),new _e(V,xt,"u_maxValue","float",[rt]),new _e(V,xt,"u_maxDistance","float",[vt])],[new Gt(V,xt,"u_dataTexture",[j],0)],new ge(V,wt.vertexIndices))},We=(V,j,rt,at,vt)=>{const xt=new oe(V,"\n            precision mediump float;\n            attribute vec2 a_position;\n            attribute vec2 a_textureCoord;\n            varying vec2 v_textureCoord;\n\n            void main() {\n                v_textureCoord = a_textureCoord;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_colorRampValues[15];\n            uniform vec3 u_colorRampColors[15];\n            uniform int u_nrColorRampValues;\n            uniform float u_maxValue;\n            uniform bool u_smooth;\n            uniform sampler2D u_valueTexture;\n            varying vec2 v_textureCoord;\n\n            vec3 valueToSmoothColor(in float value) {\n                if (value < u_colorRampValues[0]) {\n                    return u_colorRampColors[0];\n                }\n                for (int i = 1; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        float alpha = (value - u_colorRampValues[i-1]) / (u_colorRampValues[i] - u_colorRampValues[i-1]);\n                        vec3 color = alpha * (u_colorRampColors[i] - u_colorRampColors[i-1]) + u_colorRampColors[i-1];\n                        return color;\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            vec3 valueToStepColor(in float value) {\n                for (int i = 0; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        return u_colorRampColors[i];\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            void main() {\n                vec4 pixelData = texture2D(u_valueTexture, v_textureCoord);\n                float val = pixelData.r * u_maxValue;\n                float alpha = pixelData.w;\n                vec3 rgb = vec3(0.0, 0.0, 0.0);\n                if (alpha > 0.01) {\n                    if (u_smooth) {\n                        rgb = valueToSmoothColor(val);\n                    } else {\n                        rgb = valueToStepColor(val);\n                    }\n                }\n                gl_FragColor = vec4(rgb.x / 255.0, rgb.y / 255.0, rgb.z / 255.0, alpha);\n            }\n        ");return new ti(xt,[new Vt(V,xt,"a_position",N(2,2).vertices),new Vt(V,xt,"a_textureCoord",N(2,2).texturePositions)],[new _e(V,xt,"u_colorRampValues","float[]",j.map(Ht=>Ht.val)),new _e(V,xt,"u_colorRampColors","vec3[]",l(j.map(Ht=>Ht.rgb))),new _e(V,xt,"u_nrColorRampValues","int",[j.length]),new _e(V,xt,"u_maxValue","float",[rt]),new _e(V,xt,"u_smooth","bool",[at?1:0])],[new ct(V,xt,"u_valueTexture",vt.fbo.texture,0)])},bi=(V,j,rt,at,vt)=>{const bt=new oe(V,"\n            precision mediump float;\n            attribute vec3 a_pos;\n            attribute vec2 a_posTexture;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2clip;\n            uniform vec4 u_bbox;\n            varying vec2 v_posTexture;\n\n            vec2 clipBbx2worldCoords(vec2 clipCoords, vec4 bbox) {\n                float xPerct = ( clipCoords.x + 1.0 ) / 2.0;\n                float yPerct = ( clipCoords.y + 1.0 ) / 2.0;\n                float xWorld = xPerct * (bbox.z - bbox.x) + bbox.x;\n                float yWorld = yPerct * (bbox.w - bbox.y) + bbox.y;\n                return vec2(xWorld, yWorld);\n            }\n\n            void main() {\n                v_posTexture = a_posTexture;\n                vec2 worldPos = clipBbx2worldCoords(a_pos.xy, u_bbox);\n                vec3 clipPos = u_pix2clip * u_world2pix * vec3(worldPos.xy, 1.0);\n                gl_Position = vec4(clipPos.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_texture;\n            varying vec2 v_posTexture;\n\n            void main() {\n                gl_FragColor = texture2D(u_texture, v_posTexture);\n            }\n        ");return new ti(bt,[new Vt(V,bt,"a_pos",N(2,2).vertices),new Vt(V,bt,"a_posTexture",N(2,2).texturePositions)],[new _e(V,bt,"u_world2pix","mat3",l(j)),new _e(V,bt,"u_pix2clip","mat3",l(rt)),new _e(V,bt,"u_bbox","vec4",at)],[new ct(V,bt,"u_texture",vt.fbo.texture,0)])},Mi=V=>{const j=V.map(wt=>wt[0]),rt=V.map(wt=>wt[1]),at=Math.min(...j),vt=Math.max(...j);return[at,Math.min(...rt),vt,Math.max(...rt)]},ni=(V,j)=>{const rt=[];for(let at=0;at<V.length;at++)rt.push(V[at].concat(j[at]));return rt};function Ye(V){return new Float64Array(V)}Ye(4),Ye(8),Ye(12),Ye(16),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(8),Ye(8),Ye(8),Ye(4),Ye(8),Ye(8),Ye(8),Ye(12),Ye(192),Ye(192),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(8),Ye(8),Ye(8),Ye(8),Ye(8),Ye(8),Ye(8),Ye(8),Ye(8),Ye(4),Ye(4),Ye(4),Ye(8),Ye(16),Ye(16),Ye(16),Ye(32),Ye(32),Ye(48),Ye(64),Ye(1152),Ye(1152),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(4),Ye(24),Ye(24),Ye(24),Ye(24),Ye(24),Ye(24),Ye(24),Ye(24),Ye(24),Ye(24),Ye(1152),Ye(1152),Ye(1152),Ye(1152),Ye(1152),Ye(2304),Ye(2304),Ye(3456),Ye(5760),Ye(8),Ye(8),Ye(8),Ye(16),Ye(24),Ye(48),Ye(48),Ye(96),Ye(192),Ye(384),Ye(384),Ye(384),Ye(768),Ye(96),Ye(96),Ye(96),Ye(1152),Math.pow(2,-52),new Uint32Array(512)},897:(le,pt,s)=>{"use strict";s.d(pt,{V5:()=>mo,AV:()=>Cr});var Y=s(221),z=s(1540),Q=s(5804),$=s(2386),L=s(5409),M=s(9380),w=s(730),I=s(1766),y=s(2462),m=s(9806),u=s(9100),o=s(454),i=s(2383),l=s(3672),n=s(8052),d=s(3942),f=s(9422),r=s(1155),C=s(9159),_=s(5534),v=s(1992),F=s(8507),O=s(6151),X=s(9325);Error,Error;const U=class T extends v.A{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:(0,X.Jt)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)!function P(h,e,c,b){const H=document.createElement("script"),st="olc_"+(0,i.v6)(e);function ut(){delete window[st],H.parentNode.removeChild(H)}H.async=!0,H.src=h+(h.includes("?")?"&":"?")+(b||"callback")+"="+st;const Mt=setTimeout(function(){ut(),c&&c()},1e4);window[st]=function(Kt){clearTimeout(Mt),ut(),e(Kt)},document.head.appendChild(H)}(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const c=new XMLHttpRequest;c.addEventListener("load",this.onXHRLoad_.bind(this)),c.addEventListener("error",this.onXHRError_.bind(this)),c.open("GET",e.url),c.send()}else{if(!e.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(e.tileJSON)}}onXHRLoad_(e){const c=e.target;if(!c.status||c.status>=200&&c.status<300){let b;try{b=JSON.parse(c.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(b)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const c=(0,X.Jt)("EPSG:4326"),b=this.getProjection();let H;if(void 0!==e.bounds){const Xt=(0,X.FO)(c,b);H=(0,F.NW)(e.bounds,Xt)}const st=(0,O.kZ)(b),Kt=(0,O.EN)({extent:st,maxZoom:e.maxzoom||22,minZoom:e.minzoom||0,tileSize:this.tileSize_});if(this.tileGrid=Kt,this.tileUrlFunction=(0,o.Qz)(e.tiles,Kt),e.attribution&&!this.getAttributions()){const Xt=void 0!==H?H:st;this.setAttributions(function(Me){return(0,F.HY)(Xt,Me.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}};var tt=s(9346),it=s(6370),J=s(5927),ht=s(3757),mt=s(6508),Et=s(7206);function ft(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}s(3805),s(6621);var Dt,re={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Jt(h){return(h=Math.round(h))<0?0:h>255?255:h}function oe(h){return Jt("%"===h[h.length-1]?parseFloat(h)/100*255:parseInt(h))}function _e(h){return function ye(h){return h<0?0:h>1?1:h}("%"===h[h.length-1]?parseFloat(h)/100:parseFloat(h))}function ct(h,e,c){return c<0?c+=1:c>1&&(c-=1),6*c<1?h+(e-h)*c*6:2*c<1?e:3*c<2?h+(e-h)*(2/3-c)*6:h}try{Dt={}.parseCSSColor=function Gt(h){var c,e=h.replace(/ /g,"").toLowerCase();if(e in re)return re[e].slice();if("#"===e[0])return 4===e.length?(c=parseInt(e.substr(1),16))>=0&&c<=4095?[(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1]:null:7===e.length&&(c=parseInt(e.substr(1),16))>=0&&c<=16777215?[(16711680&c)>>16,(65280&c)>>8,255&c,1]:null;var b=e.indexOf("("),H=e.indexOf(")");if(-1!==b&&H+1===e.length){var st=e.substr(0,b),ut=e.substr(b+1,H-(b+1)).split(","),Mt=1;switch(st){case"rgba":if(4!==ut.length)return null;Mt=_e(ut.pop());case"rgb":return 3!==ut.length?null:[oe(ut[0]),oe(ut[1]),oe(ut[2]),Mt];case"hsla":if(4!==ut.length)return null;Mt=_e(ut.pop());case"hsl":if(3!==ut.length)return null;var Kt=(parseFloat(ut[0])%360+360)%360/360,Xt=_e(ut[1]),Me=_e(ut[2]),t=Me<=.5?Me*(Xt+1):Me+Xt-Me*Xt,a=2*Me-t;return[Jt(255*ct(a,t,Kt+1/3)),Jt(255*ct(a,t,Kt)),Jt(255*ct(a,t,Kt-1/3)),Mt];default:return null}}return null}}catch{}class Vt{constructor(e,c,b,H=1){this.r=e,this.g=c,this.b=b,this.a=H}static parse(e){if(!e)return;if(e instanceof Vt)return e;if("string"!=typeof e)return;const c=Dt(e);return c?new Vt(c[0]/255*c[3],c[1]/255*c[3],c[2]/255*c[3],c[3]):void 0}toString(){const[e,c,b,H]=this.toArray();return`rgba(${Math.round(e)},${Math.round(c)},${Math.round(b)},${H})`}toArray(){const{r:e,g:c,b,a:H}=this;return 0===H?[0,0,0,0]:[255*e/H,255*c/H,255*b/H,H]}toArray01(){const{r:e,g:c,b,a:H}=this;return 0===H?[0,0,0,0]:[e/H,c/H,b/H,H]}toArray01PremultipliedAlpha(){const{r:e,g:c,b,a:H}=this;return[e,c,b,H]}}Vt.black=new Vt(0,0,0,1),Vt.white=new Vt(1,1,1,1),Vt.transparent=new Vt(0,0,0,0),Vt.red=new Vt(1,0,0,1),Vt.blue=new Vt(0,0,1,1);var ge=Vt;function Ae(h){return"object"==typeof h?["literal",h]:h}function Ie(h){switch(h.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function xe(h,e){const c=Ae(function zt(h,e){return void 0!==h?h:void 0!==e?e:void 0}(h.default,e.default));return void 0===c&&"resolvedImage"===e.type?"":c}function $t(h,e,c){const b=hi(h,e),H=["get",h.property];if("categorical"===b&&"boolean"==typeof c[0][0]){const st=["case"];for(const ut of c)st.push(["==",H,ut[0]],ut[1]);return st.push(xe(h,e)),st}if("categorical"===b){const st=["match",H];for(const ut of c)si(st,ut[0],ut[1],!1);return st.push(xe(h,e)),st}if("interval"===b){const st=["step",["number",H]];for(const ut of c)si(st,ut[0],ut[1],!0);return Xe(st),void 0===h.default?st:["case",["==",["typeof",H],"number"],st,Ae(h.default)]}if("exponential"===b){const st=void 0!==h.base?h.base:1,ut=[Ie(h),1===st?["linear"]:["exponential",st],["number",H]];for(const Mt of c)si(ut,Mt[0],Mt[1],!1);return void 0===h.default?ut:["case",["==",["typeof",H],"number"],ut,Ae(h.default)]}throw new Error(`Unknown property function type ${b}`)}function Xe(h){"step"===h[0]&&3===h.length&&(h.push(0),h.push(h[3]))}function si(h,e,c,b){h.length>3&&e===h[h.length-2]||(b&&2===h.length||h.push(e),h.push(c))}function hi(h,e){return h.type?h.type:e.expression.interpolated?"exponential":"interval"}function et(h){const e=["concat"],c=/{([^{}]+)}/g;let b=0;for(let H=c.exec(h);null!==H;H=c.exec(h)){const st=h.slice(b,c.lastIndex-H[0].length);b=c.lastIndex,st.length>0&&e.push(st),e.push(["get",H[1]])}if(1===e.length)return h;if(b<h.length)e.push(h.slice(b));else if(2===e.length)return["to-string",e[1]];return e}class N extends Error{constructor(e,c){super(c),this.message=c,this.key=e}}var g=N;class S{constructor(e,c=[]){this.parent=e,this.bindings={};for(const[b,H]of c)this.bindings[b]=H}concat(e){return new S(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var K=S;const B={kind:"null"},ot={kind:"number"},dt={kind:"string"},It={kind:"boolean"},Wt={kind:"color"},pe={kind:"object"},ce={kind:"value"},He={kind:"collator"},We={kind:"formatted"},bi={kind:"resolvedImage"};function Mi(h,e){return{kind:"array",itemType:h,N:e}}function ni(h){if("array"===h.kind){const e=ni(h.itemType);return"number"==typeof h.N?`array<${e}, ${h.N}>`:"value"===h.itemType.kind?"array":`array<${e}>`}return h.kind}const Ii=[B,ot,dt,It,Wt,We,pe,Mi(ce),bi];function Ni(h,e){if("error"===e.kind)return null;if("array"===h.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Ni(h.itemType,e.itemType))&&("number"!=typeof h.N||h.N===e.N))return null}else{if(h.kind===e.kind)return null;if("value"===h.kind)for(const c of Ii)if(!Ni(c,e))return null}return`Expected ${ni(h)} but found ${ni(e)} instead.`}function $i(h,e){return e.some(c=>c.kind===h.kind)}function Ji(h,e){return e.some(c=>"null"===c?null===h:"array"===c?Array.isArray(h):"object"===c?h&&!Array.isArray(h)&&"object"==typeof h:c===typeof h)}class zi{constructor(e,c,b){this.sensitivity=e?c?"variant":"case":c?"accent":"base",this.locale=b,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,c){return this.collator.compare(e,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ri{constructor(e,c,b,H,st){this.text=e.normalize?e.normalize():e,this.image=c,this.scale=b,this.fontStack=H,this.textColor=st}}class ui{constructor(e){this.sections=e}static fromString(e){return new ui([new Ri(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof ui?e:ui.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const c of this.sections){if(c.image){e.push(["image",c.image.name]);continue}e.push(c.text);const b={};c.fontStack&&(b["text-font"]=["literal",c.fontStack.split(",")]),c.scale&&(b["font-scale"]=c.scale),c.textColor&&(b["text-color"]=["rgba"].concat(c.textColor.toArray())),e.push(b)}return e}}class vi{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new vi({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Bn(h,e,c,b){return"number"==typeof h&&h>=0&&h<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof c&&c>=0&&c<=255?typeof b>"u"||"number"==typeof b&&b>=0&&b<=1?null:`Invalid rgba value [${[h,e,c,b].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof b?[h,e,c,b]:[h,e,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ln(h){if(null===h)return!0;if("string"==typeof h)return!0;if("boolean"==typeof h)return!0;if("number"==typeof h)return!0;if(h instanceof ge)return!0;if(h instanceof zi)return!0;if(h instanceof ui)return!0;if(h instanceof vi)return!0;if(Array.isArray(h)){for(const e of h)if(!ln(e))return!1;return!0}if("object"==typeof h){for(const e in h)if(!ln(h[e]))return!1;return!0}return!1}function Ei(h){if(null===h)return B;if("string"==typeof h)return dt;if("boolean"==typeof h)return It;if("number"==typeof h)return ot;if(h instanceof ge)return Wt;if(h instanceof zi)return He;if(h instanceof ui)return We;if(h instanceof vi)return bi;if(Array.isArray(h)){const e=h.length;let c;for(const b of h){const H=Ei(b);if(c){if(c===H)continue;c=ce;break}c=H}return Mi(c||ce,e)}return pe}function Vi(h){const e=typeof h;return null===h?"":"string"===e||"number"===e||"boolean"===e?String(h):h instanceof ge||h instanceof ui||h instanceof vi?h.toString():JSON.stringify(h)}class Sn{constructor(e,c){this.type=e,this.value=c}static parse(e,c){if(2!==e.length)return c.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!ln(e[1]))return c.error("invalid value");const b=e[1];let H=Ei(b);const st=c.expectedType;return"array"===H.kind&&0===H.N&&st&&"array"===st.kind&&("number"!=typeof st.N||0===st.N)&&(H=st),new Sn(H,b)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ge?["rgba"].concat(this.value.toArray()):this.value instanceof ui?this.value.serialize():this.value}}var Zn=Sn,Gi=class Ye{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const Hn={string:dt,number:ot,boolean:It,object:pe};class rr{constructor(e,c){this.type=e,this.args=c}static parse(e,c){if(e.length<2)return c.error("Expected at least one argument.");let H,b=1;const st=e[0];if("array"===st){let Mt,Kt;if(e.length>2){const Xt=e[1];if("string"!=typeof Xt||!(Xt in Hn)||"object"===Xt)return c.error('The item type argument of "array" must be one of string, number, boolean',1);Mt=Hn[Xt],b++}else Mt=ce;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return c.error('The length argument to "array" must be a positive integer literal',2);Kt=e[2],b++}H=Mi(Mt,Kt)}else H=Hn[st];const ut=[];for(;b<e.length;b++){const Mt=c.parse(e[b],b,ce);if(!Mt)return null;ut.push(Mt)}return new rr(H,ut)}evaluate(e){for(let c=0;c<this.args.length;c++){const b=this.args[c].evaluate(e);if(!Ni(this.type,Ei(b)))return b;if(c===this.args.length-1)throw new Gi(`Expected value to be of type ${ni(this.type)}, but found ${ni(Ei(b))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,c=[e.kind];if("array"===e.kind){const b=e.itemType;if("string"===b.kind||"number"===b.kind||"boolean"===b.kind){c.push(b.kind);const H=e.N;("number"==typeof H||this.args.length>1)&&c.push(H)}}return c.concat(this.args.map(b=>b.serialize()))}}var An=rr;class _s{constructor(e){this.type=We,this.sections=e}static parse(e,c){if(e.length<2)return c.error("Expected at least one argument.");const b=e[1];if(!Array.isArray(b)&&"object"==typeof b)return c.error("First argument must be an image or text section.");const H=[];let st=!1;for(let ut=1;ut<=e.length-1;++ut){const Mt=e[ut];if(st&&"object"==typeof Mt&&!Array.isArray(Mt)){st=!1;let Kt=null;if(Mt["font-scale"]&&(Kt=c.parse(Mt["font-scale"],1,ot),!Kt))return null;let Xt=null;if(Mt["text-font"]&&(Xt=c.parse(Mt["text-font"],1,Mi(dt)),!Xt))return null;let Me=null;if(Mt["text-color"]&&(Me=c.parse(Mt["text-color"],1,Wt),!Me))return null;const t=H[H.length-1];t.scale=Kt,t.font=Xt,t.textColor=Me}else{const Kt=c.parse(e[ut],1,ce);if(!Kt)return null;const Xt=Kt.type.kind;if("string"!==Xt&&"value"!==Xt&&"null"!==Xt&&"resolvedImage"!==Xt)return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");st=!0,H.push({content:Kt,scale:null,font:null,textColor:null})}}return new _s(H)}evaluate(e){return new ui(this.sections.map(b=>{const H=b.content.evaluate(e);return Ei(H)===bi?new Ri("",H,null,null,null):new Ri(Vi(H),null,b.scale?b.scale.evaluate(e):null,b.font?b.font.evaluate(e).join(","):null,b.textColor?b.textColor.evaluate(e):null)}))}eachChild(e){for(const c of this.sections)e(c.content),c.scale&&e(c.scale),c.font&&e(c.font),c.textColor&&e(c.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const c of this.sections){e.push(c.content.serialize());const b={};c.scale&&(b["font-scale"]=c.scale.serialize()),c.font&&(b["text-font"]=c.font.serialize()),c.textColor&&(b["text-color"]=c.textColor.serialize()),e.push(b)}return e}}class ps{constructor(e){this.type=bi,this.input=e}static parse(e,c){if(2!==e.length)return c.error("Expected two arguments.");const b=c.parse(e[1],1,dt);return b?new ps(b):c.error("No image name provided.")}evaluate(e){const c=this.input.evaluate(e),b=vi.fromString(c);return b&&e.availableImages&&(b.available=e.availableImages.indexOf(c)>-1),b}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Ds={"to-boolean":It,"to-color":Wt,"to-number":ot,"to-string":dt};class on{constructor(e,c){this.type=e,this.args=c}static parse(e,c){if(e.length<2)return c.error("Expected at least one argument.");const b=e[0];if(("to-boolean"===b||"to-string"===b)&&2!==e.length)return c.error("Expected one argument.");const H=Ds[b],st=[];for(let ut=1;ut<e.length;ut++){const Mt=c.parse(e[ut],ut,ce);if(!Mt)return null;st.push(Mt)}return new on(H,st)}evaluate(e){if("boolean"===this.type.kind)return!!this.args[0].evaluate(e);if("color"===this.type.kind){let c,b;for(const H of this.args){if(c=H.evaluate(e),b=null,c instanceof ge)return c;if("string"==typeof c){const st=e.parseColor(c);if(st)return st}else if(Array.isArray(c)&&(b=c.length<3||c.length>4?`Invalid rbga value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:Bn(c[0],c[1],c[2],c[3]),!b))return new ge(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new Gi(b||`Could not parse color from value '${"string"==typeof c?c:String(JSON.stringify(c))}'`)}if("number"===this.type.kind){let c=null;for(const b of this.args){if(c=b.evaluate(e),null===c)return 0;const H=Number(c);if(!isNaN(H))return H}throw new Gi(`Could not convert ${JSON.stringify(c)} to number.`)}return"formatted"===this.type.kind?ui.fromString(Vi(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?vi.fromString(Vi(this.args[0].evaluate(e))):Vi(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new _s([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ps(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(c=>{e.push(c.serialize())}),e}}var cs=on;const es=["Unknown","Point","LineString","Polygon"];var ys=class ks{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?es[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,c=this.featureDistanceData.scale,{x:b,y:H}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(b*c-e[0])+this.featureDistanceData.bearing[1]*(H*c-e[1])}return 0}parseColor(e){let c=this._parseColorCache[e];return c||(c=this._parseColorCache[e]=ge.parse(e)),c}};class us{constructor(e,c,b,H){this.name=e,this.type=c,this._evaluate=b,this.args=H}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,c){const b=e[0],H=us.definitions[b];if(!H)return c.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0);const st=Array.isArray(H)?H[0]:H.type,ut=Array.isArray(H)?[[H[1],H[2]]]:H.overloads,Mt=ut.filter(([Xt])=>!Array.isArray(Xt)||Xt.length===e.length-1);let Kt=null;for(const[Xt,Me]of Mt){Kt=new hn(c.registry,c.path,null,c.scope);const t=[];let a=!1;for(let p=1;p<e.length;p++){const G=e[p],k=Array.isArray(Xt)?Xt[p-1]:Xt.type,q=Kt.parse(G,1+t.length,k);if(!q){a=!0;break}t.push(q)}if(!a){if(Array.isArray(Xt)&&Xt.length!==t.length){Kt.error(`Expected ${Xt.length} arguments, but found ${t.length} instead.`);continue}for(let p=0;p<t.length;p++){const G=Array.isArray(Xt)?Xt[p]:Xt.type,k=t[p];Kt.concat(p+1).checkSubtype(G,k.type)}if(0===Kt.errors.length)return new us(b,st,Me,t)}}if(1===Mt.length)c.errors.push(...Kt.errors);else{const Me=(Mt.length?Mt:ut).map(([a])=>function or(h){return Array.isArray(h)?`(${h.map(ni).join(", ")})`:`(${ni(h.type)}...)`}(a)).join(" | "),t=[];for(let a=1;a<e.length;a++){const p=c.parse(e[a],1+t.length);if(!p)return null;t.push(ni(p.type))}c.error(`Expected arguments of type ${Me}, but found (${t.join(", ")}) instead.`)}return null}static register(e,c){us.definitions=c;for(const b in c)e[b]=us}}var tn=us;class _n{constructor(e,c,b){this.type=He,this.locale=b,this.caseSensitive=e,this.diacriticSensitive=c}static parse(e,c){if(2!==e.length)return c.error("Expected one argument.");const b=e[1];if("object"!=typeof b||Array.isArray(b))return c.error("Collator options argument must be an object.");const H=c.parse(void 0!==b["case-sensitive"]&&b["case-sensitive"],1,It);if(!H)return null;const st=c.parse(void 0!==b["diacritic-sensitive"]&&b["diacritic-sensitive"],1,It);if(!st)return null;let ut=null;return b.locale&&(ut=c.parse(b.locale,1,dt),!ut)?null:new _n(H,st,ut)}evaluate(e){return new zi(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Zi=8192;function pn(h,e){h[0]=Math.min(h[0],e[0]),h[1]=Math.min(h[1],e[1]),h[2]=Math.max(h[2],e[0]),h[3]=Math.max(h[3],e[1])}function Ln(h,e){return!(h[0]<=e[0]||h[2]>=e[2]||h[1]<=e[1]||h[3]>=e[3])}function Qi(h,e){const c=function Dn(h){return(180+h)/360}(h[0]),b=function zn(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}(h[1]),H=Math.pow(2,e.z);return[Math.round(c*H*Zi),Math.round(b*H*Zi)]}function Ki(h,e,c){const b=h[0]-e[0],H=h[1]-e[1],st=h[0]-c[0],ut=h[1]-c[1];return b*ut-st*H==0&&b*st<=0&&H*ut<=0}function Tn(h,e,c){return e[1]>h[1]!=c[1]>h[1]&&h[0]<(c[0]-e[0])*(h[1]-e[1])/(c[1]-e[1])+e[0]}function Ps(h,e){let c=!1;for(let b=0,H=e.length;b<H;b++){const st=e[b];for(let ut=0,Mt=st.length;ut<Mt-1;ut++){if(Ki(h,st[ut],st[ut+1]))return!1;Tn(h,st[ut],st[ut+1])&&(c=!c)}}return c}function Ls(h,e){for(let c=0;c<e.length;c++)if(Ps(h,e[c]))return!0;return!1}function yn(h,e,c,b){const Kt=b[0]-c[0],Xt=b[1]-c[1],Me=(h[0]-c[0])*Xt-Kt*(h[1]-c[1]),t=(e[0]-c[0])*Xt-Kt*(e[1]-c[1]);return Me>0&&t<0||Me<0&&t>0}function $n(h,e,c,b){return 0!==function Wn(h,e){return h[0]*e[1]-h[1]*e[0]}([b[0]-c[0],b[1]-c[1]],[e[0]-h[0],e[1]-h[1]])&&!(!yn(h,e,c,b)||!yn(c,b,h,e))}function vn(h,e,c){for(const b of c)for(let H=0;H<b.length-1;++H)if($n(h,e,b[H],b[H+1]))return!0;return!1}function is(h,e){for(let c=0;c<h.length;++c)if(!Ps(h[c],e))return!1;for(let c=0;c<h.length-1;++c)if(vn(h[c],h[c+1],e))return!1;return!0}function zs(h,e){for(let c=0;c<e.length;c++)if(is(h,e[c]))return!0;return!1}function Ks(h,e,c){const b=[];for(let H=0;H<h.length;H++){const st=[];for(let ut=0;ut<h[H].length;ut++){const Mt=Qi(h[H][ut],c);pn(e,Mt),st.push(Mt)}b.push(st)}return b}function Jn(h,e,c){const b=[];for(let H=0;H<h.length;H++){const st=Ks(h[H],e,c);b.push(st)}return b}function Xs(h,e,c,b){if(h[0]<c[0]||h[0]>c[2]){const H=.5*b;let st=h[0]-c[0]>H?-b:c[0]-h[0]>H?b:0;0===st&&(st=h[0]-c[2]>H?-b:c[2]-h[0]>H?b:0),h[0]+=st}pn(e,h)}function Ir(h,e,c,b){const H=Math.pow(2,b.z)*Zi,st=[b.x*Zi,b.y*Zi],ut=[];if(!h)return ut;for(const Mt of h)for(const Kt of Mt){const Xt=[Kt.x+st[0],Kt.y+st[1]];Xs(Xt,e,c,H),ut.push(Xt)}return ut}function Vr(h,e,c,b){const H=Math.pow(2,b.z)*Zi,st=[b.x*Zi,b.y*Zi],ut=[];if(!h)return ut;for(const Mt of h){const Kt=[];for(const Xt of Mt){const Me=[Xt.x+st[0],Xt.y+st[1]];pn(e,Me),Kt.push(Me)}ut.push(Kt)}if(e[2]-e[0]<=H/2){!function vs(h){h[0]=h[1]=1/0,h[2]=h[3]=-1/0}(e);for(const Mt of ut)for(const Kt of Mt)Xs(Kt,e,c,H)}return ut}class ar{constructor(e,c){this.type=It,this.geojson=e,this.geometries=c}static parse(e,c){if(2!==e.length)return c.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(ln(e[1])){const b=e[1];if("FeatureCollection"===b.type)for(let H=0;H<b.features.length;++H){const st=b.features[H].geometry.type;if("Polygon"===st||"MultiPolygon"===st)return new ar(b,b.features[H].geometry)}else if("Feature"===b.type){const H=b.geometry.type;if("Polygon"===H||"MultiPolygon"===H)return new ar(b,b.geometry)}else if("Polygon"===b.type||"MultiPolygon"===b.type)return new ar(b,b)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function Fr(h,e){const c=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],H=h.canonicalID();if(!H)return!1;if("Polygon"===e.type){const st=Ks(e.coordinates,b,H),ut=Ir(h.geometry(),c,b,H);if(!Ln(c,b))return!1;for(const Mt of ut)if(!Ps(Mt,st))return!1}if("MultiPolygon"===e.type){const st=Jn(e.coordinates,b,H),ut=Ir(h.geometry(),c,b,H);if(!Ln(c,b))return!1;for(const Mt of ut)if(!Ls(Mt,st))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function Yr(h,e){const c=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],H=h.canonicalID();if(!H)return!1;if("Polygon"===e.type){const st=Ks(e.coordinates,b,H),ut=Vr(h.geometry(),c,b,H);if(!Ln(c,b))return!1;for(const Mt of ut)if(!is(Mt,st))return!1}if("MultiPolygon"===e.type){const st=Jn(e.coordinates,b,H),ut=Vr(h.geometry(),c,b,H);if(!Ln(c,b))return!1;for(const Mt of ut)if(!zs(Mt,st))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var br=ar;function Qn(h){if(h instanceof tn){if("get"===h.name&&1===h.args.length)return!1;if("feature-state"===h.name)return!1;if("has"===h.name&&1===h.args.length)return!1;if("properties"===h.name||"geometry-type"===h.name||"id"===h.name)return!1;if(/^filter-/.test(h.name))return!1}if(h instanceof br)return!1;let e=!0;return h.eachChild(c=>{e&&!Qn(c)&&(e=!1)}),e}function ds(h){if(h instanceof tn&&"feature-state"===h.name)return!1;let e=!0;return h.eachChild(c=>{e&&!ds(c)&&(e=!1)}),e}function ns(h,e){if(h instanceof tn&&e.indexOf(h.name)>=0)return!1;let c=!0;return h.eachChild(b=>{c&&!ns(b,e)&&(c=!1)}),c}class qn{constructor(e,c){this.type=c.type,this.name=e,this.boundExpression=c}static parse(e,c){if(2!==e.length||"string"!=typeof e[1])return c.error("'var' expression requires exactly one string literal argument.");const b=e[1];return c.scope.has(b)?new qn(b,c.scope.get(b)):c.error(`Unknown variable "${b}". Make sure "${b}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var ss=qn;class ts{constructor(e,c=[],b,H=new K,st=[]){this.registry=e,this.path=c,this.key=c.map(ut=>`[${ut}]`).join(""),this.scope=H,this.errors=st,this.expectedType=b}parse(e,c,b,H,st={}){return c?this.concat(c,b,H)._parse(e,st):this._parse(e,st)}_parse(e,c){function b(H,st,ut){return"assert"===ut?new An(st,[H]):"coerce"===ut?new cs(st,[H]):H}if((null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e)&&(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const H=e[0];if("string"!=typeof H)return this.error(`Expression name must be a string, but found ${typeof H} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const st=this.registry[H];if(st){let ut=st.parse(e,this);if(!ut)return null;if(this.expectedType){const Mt=this.expectedType,Kt=ut.type;if("string"!==Mt.kind&&"number"!==Mt.kind&&"boolean"!==Mt.kind&&"object"!==Mt.kind&&"array"!==Mt.kind||"value"!==Kt.kind)if("color"!==Mt.kind&&"formatted"!==Mt.kind&&"resolvedImage"!==Mt.kind||"value"!==Kt.kind&&"string"!==Kt.kind){if(this.checkSubtype(Mt,Kt))return null}else ut=b(ut,Mt,c.typeAnnotation||"coerce");else ut=b(ut,Mt,c.typeAnnotation||"assert")}if(!(ut instanceof Zn)&&"resolvedImage"!==ut.type.kind&&Cn(ut)){const Mt=new ys;try{ut=new Zn(ut.type,ut.evaluate(Mt))}catch(Kt){return this.error(Kt.message),null}}return ut}return this.error(`Unknown expression "${H}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(typeof e>"u"?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,c,b){const H="number"==typeof e?this.path.concat(e):this.path,st=b?this.scope.concat(b):this.scope;return new ts(this.registry,H,c||null,st,this.errors)}error(e,...c){const b=`${this.key}${c.map(H=>`[${H}]`).join("")}`;this.errors.push(new g(b,e))}checkSubtype(e,c){const b=Ni(e,c);return b&&this.error(b),b}}var hn=ts;function Cn(h){if(h instanceof ss)return Cn(h.boundExpression);if(h instanceof tn&&"error"===h.name)return!1;if(h instanceof _n)return!1;if(h instanceof br)return!1;const e=h instanceof cs||h instanceof An;let c=!0;return h.eachChild(b=>{c=e?c&&Cn(b):c&&b instanceof Zn}),!!c&&Qn(h)&&ns(h,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function mr(h,e){const c=h.length-1;let ut,Mt,b=0,H=c,st=0;for(;b<=H;)if(st=Math.floor((b+H)/2),ut=h[st],Mt=h[st+1],ut<=e){if(st===c||e<Mt)return st;b=st+1}else{if(!(ut>e))throw new Gi("Input is not a number.");H=st-1}return 0}class lr{constructor(e,c,b){this.type=e,this.input=c,this.labels=[],this.outputs=[];for(const[H,st]of b)this.labels.push(H),this.outputs.push(st)}static parse(e,c){if(e.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return c.error("Expected an even number of arguments.");const b=c.parse(e[1],1,ot);if(!b)return null;const H=[];let st=null;c.expectedType&&"value"!==c.expectedType.kind&&(st=c.expectedType);for(let ut=1;ut<e.length;ut+=2){const Mt=1===ut?-1/0:e[ut],Kt=e[ut+1],Xt=ut,Me=ut+1;if("number"!=typeof Mt)return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Xt);if(H.length&&H[H.length-1][0]>=Mt)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Xt);const t=c.parse(Kt,Me,st);if(!t)return null;st=st||t.type,H.push([Mt,t])}return new lr(st,b,H)}evaluate(e){const c=this.labels,b=this.outputs;if(1===c.length)return b[0].evaluate(e);const H=this.input.evaluate(e);if(H<=c[0])return b[0].evaluate(e);const st=c.length;return H>=c[st-1]?b[st-1].evaluate(e):b[mr(c,H)].evaluate(e)}eachChild(e){e(this.input);for(const c of this.outputs)e(c)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let c=0;c<this.labels.length;c++)c>0&&e.push(this.labels[c]),e.push(this.outputs[c].serialize());return e}}var hr=lr,_r=fs;function fs(h,e,c,b){this.cx=3*h,this.bx=3*(c-h)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(b-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=h,this.p1y=b,this.p2x=c,this.p2y=b}fs.prototype.sampleCurveX=function(h){return((this.ax*h+this.bx)*h+this.cx)*h},fs.prototype.sampleCurveY=function(h){return((this.ay*h+this.by)*h+this.cy)*h},fs.prototype.sampleCurveDerivativeX=function(h){return(3*this.ax*h+2*this.bx)*h+this.cx},fs.prototype.solveCurveX=function(h,e){var c,b,H,st,ut;for(typeof e>"u"&&(e=1e-6),H=h,ut=0;ut<8;ut++){if(st=this.sampleCurveX(H)-h,Math.abs(st)<e)return H;var Mt=this.sampleCurveDerivativeX(H);if(Math.abs(Mt)<1e-6)break;H-=st/Mt}if((H=h)<(c=0))return c;if(H>(b=1))return b;for(;c<b;){if(st=this.sampleCurveX(H),Math.abs(st-h)<e)return H;h>st?c=H:b=H,H=.5*(b-c)+c}return H},fs.prototype.solve=function(h,e){return this.sampleCurveY(this.solveCurveX(h,e))};var wr=ft(_r);function Pn(h,e,c){return h*(1-c)+e*c}var Fs=Object.freeze({__proto__:null,number:Pn,color:function Vs(h,e,c){return new ge(Pn(h.r,e.r,c),Pn(h.g,e.g,c),Pn(h.b,e.b,c),Pn(h.a,e.a,c))},array:function pr(h,e,c){return h.map((b,H)=>Pn(b,e[H],c))}});const pi=4/29,Fi=6/29,ji=3*Fi*Fi,Ui=Fi*Fi*Fi,Is=Math.PI/180,qi=180/Math.PI;function Fn(h){return h>Ui?Math.pow(h,1/3):h/ji+pi}function rs(h){return h>Fi?h*h*h:ji*(h-pi)}function Ns(h){return 255*(h<=.0031308?12.92*h:1.055*Math.pow(h,1/2.4)-.055)}function Di(h){return(h/=255)<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Nr(h){const e=Di(h.r),c=Di(h.g),b=Di(h.b),H=Fn((.4124564*e+.3575761*c+.1804375*b)/.95047),st=Fn((.2126729*e+.7151522*c+.072175*b)/1);return{l:116*st-16,a:500*(H-st),b:200*(st-Fn((.0193339*e+.119192*c+.9503041*b)/1.08883)),alpha:h.a}}function Zr(h){let e=(h.l+16)/116,c=isNaN(h.a)?e:e+h.a/500,b=isNaN(h.b)?e:e-h.b/200;return e=1*rs(e),c=.95047*rs(c),b=1.08883*rs(b),new ge(Ns(3.2404542*c-1.5371385*e-.4985314*b),Ns(-.969266*c+1.8760108*e+.041556*b),Ns(.0556434*c-.2040259*e+1.0572252*b),h.alpha)}function gt(h,e,c){const b=e-h;return h+c*(b>180||b<-180?b-360*Math.round(b/360):b)}const Tt={forward:Nr,reverse:Zr,interpolate:function Ur(h,e,c){return{l:Pn(h.l,e.l,c),a:Pn(h.a,e.a,c),b:Pn(h.b,e.b,c),alpha:Pn(h.alpha,e.alpha,c)}}},qt_forward=function Hr(h){const{l:e,a:c,b}=Nr(h),H=Math.atan2(b,c)*qi;return{h:H<0?H+360:H,c:Math.sqrt(c*c+b*b),l:e,alpha:h.a}},qt_reverse=function Ee(h){const e=h.h*Is,c=h.c;return Zr({l:h.l,a:Math.cos(e)*c,b:Math.sin(e)*c,alpha:h.alpha})},qt_interpolate=function yt(h,e,c){return{h:gt(h.h,e.h,c),c:Pn(h.c,e.c,c),l:Pn(h.l,e.l,c),alpha:Pn(h.alpha,e.alpha,c)}};class Se{constructor(e,c,b,H,st){this.type=e,this.operator=c,this.interpolation=b,this.input=H,this.labels=[],this.outputs=[];for(const[ut,Mt]of st)this.labels.push(ut),this.outputs.push(Mt)}static interpolationFactor(e,c,b,H){let st=0;if("exponential"===e.name)st=Fe(c,e.base,b,H);else if("linear"===e.name)st=Fe(c,1,b,H);else if("cubic-bezier"===e.name){const ut=e.controlPoints;st=new wr(ut[0],ut[1],ut[2],ut[3]).solve(Fe(c,1,b,H))}return st}static parse(e,c){let[b,H,st,...ut]=e;if(!Array.isArray(H)||0===H.length)return c.error("Expected an interpolation type expression.",1);if("linear"===H[0])H={name:"linear"};else if("exponential"===H[0]){const Xt=H[1];if("number"!=typeof Xt)return c.error("Exponential interpolation requires a numeric base.",1,1);H={name:"exponential",base:Xt}}else{if("cubic-bezier"!==H[0])return c.error(`Unknown interpolation type ${String(H[0])}`,1,0);{const Xt=H.slice(1);if(4!==Xt.length||Xt.some(Me=>"number"!=typeof Me||Me<0||Me>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);H={name:"cubic-bezier",controlPoints:Xt}}}if(e.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(st=c.parse(st,2,ot),!st)return null;const Mt=[];let Kt=null;"interpolate-hcl"===b||"interpolate-lab"===b?Kt=Wt:c.expectedType&&"value"!==c.expectedType.kind&&(Kt=c.expectedType);for(let Xt=0;Xt<ut.length;Xt+=2){const Me=ut[Xt],t=ut[Xt+1],a=Xt+3,p=Xt+4;if("number"!=typeof Me)return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(Mt.length&&Mt[Mt.length-1][0]>=Me)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',a);const G=c.parse(t,p,Kt);if(!G)return null;Kt=Kt||G.type,Mt.push([Me,G])}return"number"===Kt.kind||"color"===Kt.kind||"array"===Kt.kind&&"number"===Kt.itemType.kind&&"number"==typeof Kt.N?new Se(Kt,b,H,st,Mt):c.error(`Type ${ni(Kt)} is not interpolatable.`)}evaluate(e){const c=this.labels,b=this.outputs;if(1===c.length)return b[0].evaluate(e);const H=this.input.evaluate(e);if(H<=c[0])return b[0].evaluate(e);const st=c.length;if(H>=c[st-1])return b[st-1].evaluate(e);const ut=mr(c,H),Xt=Se.interpolationFactor(this.interpolation,H,c[ut],c[ut+1]),Me=b[ut].evaluate(e),t=b[ut+1].evaluate(e);return"interpolate"===this.operator?Fs[this.type.kind.toLowerCase()](Me,t,Xt):"interpolate-hcl"===this.operator?qt_reverse(qt_interpolate(qt_forward(Me),qt_forward(t),Xt)):Tt.reverse(Tt.interpolate(Tt.forward(Me),Tt.forward(t),Xt))}eachChild(e){e(this.input);for(const c of this.outputs)e(c)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const c=[this.operator,e,this.input.serialize()];for(let b=0;b<this.labels.length;b++)c.push(this.labels[b],this.outputs[b].serialize());return c}}function Fe(h,e,c,b){const H=b-c,st=h-c;return 0===H?0:1===e?st/H:(Math.pow(e,st)-1)/(Math.pow(e,H)-1)}var Je=Se;class ei{constructor(e,c){this.type=e,this.args=c}static parse(e,c){if(e.length<2)return c.error("Expectected at least one argument.");let b=null;const H=c.expectedType;H&&"value"!==H.kind&&(b=H);const st=[];for(const Mt of e.slice(1)){const Kt=c.parse(Mt,1+st.length,b,void 0,{typeAnnotation:"omit"});if(!Kt)return null;b=b||Kt.type,st.push(Kt)}return H&&st.some(Mt=>Ni(H,Mt.type))?new ei(ce,st):new ei(b,st)}evaluate(e){let H,c=null,b=0;for(const st of this.args){if(b++,c=st.evaluate(e),c&&c instanceof vi&&!c.available&&(H||(H=c),c=null,b===this.args.length))return H;if(null!==c)break}return c}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(c=>{e.push(c.serialize())}),e}}var _i=ei;class Ai{constructor(e,c){this.type=c.type,this.bindings=[].concat(e),this.result=c}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const c of this.bindings)e(c[1]);e(this.result)}static parse(e,c){if(e.length<4)return c.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const b=[];for(let st=1;st<e.length-1;st+=2){const ut=e[st];if("string"!=typeof ut)return c.error(`Expected string, but found ${typeof ut} instead.`,st);if(/[^a-zA-Z0-9_]/.test(ut))return c.error("Variable names must contain only alphanumeric characters or '_'.",st);const Mt=c.parse(e[st+1],st+1);if(!Mt)return null;b.push([ut,Mt])}const H=c.parse(e[e.length-1],e.length-1,c.expectedType,b);return H?new Ai(b,H):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[c,b]of this.bindings)e.push(c,b.serialize());return e.push(this.result.serialize()),e}}var Bi=Ai;class ki{constructor(e,c,b){this.type=e,this.index=c,this.input=b}static parse(e,c){if(3!==e.length)return c.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const b=c.parse(e[1],1,ot),H=c.parse(e[2],2,Mi(c.expectedType||ce));return b&&H?new ki(H.type.itemType,b,H):null}evaluate(e){const c=this.index.evaluate(e),b=this.input.evaluate(e);if(c<0)throw new Gi(`Array index out of bounds: ${c} < 0.`);if(c>=b.length)throw new Gi(`Array index out of bounds: ${c} > ${b.length-1}.`);if(c!==Math.floor(c))throw new Gi(`Array index must be an integer, but found ${c} instead.`);return b[c]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var cn=ki;class en{constructor(e,c){this.type=It,this.needle=e,this.haystack=c}static parse(e,c){if(3!==e.length)return c.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const b=c.parse(e[1],1,ce),H=c.parse(e[2],2,ce);return b&&H?$i(b.type,[It,dt,ot,B,ce])?new en(b,H):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${ni(b.type)} instead`):null}evaluate(e){const c=this.needle.evaluate(e),b=this.haystack.evaluate(e);if(null==b)return!1;if(!Ji(c,["boolean","string","number","null"]))throw new Gi(`Expected first argument to be of type boolean, string, number or null, but found ${ni(Ei(c))} instead.`);if(!Ji(b,["string","array"]))throw new Gi(`Expected second argument to be of type array or string, but found ${ni(Ei(b))} instead.`);return b.indexOf(c)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var os=en;class nn{constructor(e,c,b){this.type=ot,this.needle=e,this.haystack=c,this.fromIndex=b}static parse(e,c){if(e.length<=2||e.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const b=c.parse(e[1],1,ce),H=c.parse(e[2],2,ce);if(!b||!H)return null;if(!$i(b.type,[It,dt,ot,B,ce]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${ni(b.type)} instead`);if(4===e.length){const st=c.parse(e[3],3,ot);return st?new nn(b,H,st):null}return new nn(b,H)}evaluate(e){const c=this.needle.evaluate(e),b=this.haystack.evaluate(e);if(!Ji(c,["boolean","string","number","null"]))throw new Gi(`Expected first argument to be of type boolean, string, number or null, but found ${ni(Ei(c))} instead.`);if(!Ji(b,["string","array"]))throw new Gi(`Expected second argument to be of type array or string, but found ${ni(Ei(b))} instead.`);if(this.fromIndex){const H=this.fromIndex.evaluate(e);return b.indexOf(c,H)}return b.indexOf(c)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Rn=nn;class En{constructor(e,c,b,H,st,ut){this.inputType=e,this.type=c,this.input=b,this.cases=H,this.outputs=st,this.otherwise=ut}static parse(e,c){if(e.length<5)return c.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return c.error("Expected an even number of arguments.");let b,H;c.expectedType&&"value"!==c.expectedType.kind&&(H=c.expectedType);const st={},ut=[];for(let Xt=2;Xt<e.length-1;Xt+=2){let Me=e[Xt];const t=e[Xt+1];Array.isArray(Me)||(Me=[Me]);const a=c.concat(Xt);if(0===Me.length)return a.error("Expected at least one branch label.");for(const G of Me){if("number"!=typeof G&&"string"!=typeof G)return a.error("Branch labels must be numbers or strings.");if("number"==typeof G&&Math.abs(G)>Number.MAX_SAFE_INTEGER)return a.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof G&&Math.floor(G)!==G)return a.error("Numeric branch labels must be integer values.");if(b){if(a.checkSubtype(b,Ei(G)))return null}else b=Ei(G);if(typeof st[String(G)]<"u")return a.error("Branch labels must be unique.");st[String(G)]=ut.length}const p=c.parse(t,Xt,H);if(!p)return null;H=H||p.type,ut.push(p)}const Mt=c.parse(e[1],1,ce);if(!Mt)return null;const Kt=c.parse(e[e.length-1],e.length-1,H);return!Kt||"value"!==Mt.type.kind&&c.concat(1).checkSubtype(b,Mt.type)?null:new En(b,H,Mt,st,ut,Kt)}evaluate(e){const c=this.input.evaluate(e);return(Ei(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],c=Object.keys(this.cases).sort(),b=[],H={};for(const ut of c){const Mt=H[this.cases[ut]];void 0===Mt?(H[this.cases[ut]]=b.length,b.push([this.cases[ut],[ut]])):b[Mt][1].push(ut)}const st=ut=>"number"===this.inputType.kind?Number(ut):ut;for(const[ut,Mt]of b)e.push(1===Mt.length?st(Mt[0]):Mt.map(st)),e.push(this.outputs[ut].serialize());return e.push(this.otherwise.serialize()),e}}var Kn=En;class In{constructor(e,c,b){this.type=e,this.branches=c,this.otherwise=b}static parse(e,c){if(e.length<4)return c.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return c.error("Expected an odd number of arguments.");let b;c.expectedType&&"value"!==c.expectedType.kind&&(b=c.expectedType);const H=[];for(let ut=1;ut<e.length-1;ut+=2){const Mt=c.parse(e[ut],ut,It);if(!Mt)return null;const Kt=c.parse(e[ut+1],ut+1,b);if(!Kt)return null;H.push([Mt,Kt]),b=b||Kt.type}const st=c.parse(e[e.length-1],e.length-1,b);return st?new In(b,H,st):null}evaluate(e){for(const[c,b]of this.branches)if(c.evaluate(e))return b.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[c,b]of this.branches)e(c),e(b);e(this.otherwise)}outputDefined(){return this.branches.every(([e,c])=>c.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(c=>{e.push(c.serialize())}),e}}var Us=In;class Xn{constructor(e,c,b,H){this.type=e,this.input=c,this.beginIndex=b,this.endIndex=H}static parse(e,c){if(e.length<=2||e.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const b=c.parse(e[1],1,ce),H=c.parse(e[2],2,ot);if(!b||!H)return null;if(!$i(b.type,[Mi(ce),dt,ce]))return c.error(`Expected first argument to be of type array or string, but found ${ni(b.type)} instead`);if(4===e.length){const st=c.parse(e[3],3,ot);return st?new Xn(b.type,b,H,st):null}return new Xn(b.type,b,H)}evaluate(e){const c=this.input.evaluate(e),b=this.beginIndex.evaluate(e);if(!Ji(c,["string","array"]))throw new Gi(`Expected first argument to be of type array or string, but found ${ni(Ei(c))} instead.`);if(this.endIndex){const H=this.endIndex.evaluate(e);return c.slice(b,H)}return c.slice(b)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Vn=Xn;function js(h,e){return"=="===h||"!="===h?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function $r(h,e,c,b){return 0===b.compare(e,c)}function $s(h,e,c){const b="=="!==h&&"!="!==h;return class Ta{constructor(st,ut,Mt){this.type=It,this.lhs=st,this.rhs=ut,this.collator=Mt,this.hasUntypedArgument="value"===st.type.kind||"value"===ut.type.kind}static parse(st,ut){if(3!==st.length&&4!==st.length)return ut.error("Expected two or three arguments.");const Mt=st[0];let Kt=ut.parse(st[1],1,ce);if(!Kt)return null;if(!js(Mt,Kt.type))return ut.concat(1).error(`"${Mt}" comparisons are not supported for type '${ni(Kt.type)}'.`);let Xt=ut.parse(st[2],2,ce);if(!Xt)return null;if(!js(Mt,Xt.type))return ut.concat(2).error(`"${Mt}" comparisons are not supported for type '${ni(Xt.type)}'.`);if(Kt.type.kind!==Xt.type.kind&&"value"!==Kt.type.kind&&"value"!==Xt.type.kind)return ut.error(`Cannot compare types '${ni(Kt.type)}' and '${ni(Xt.type)}'.`);b&&("value"===Kt.type.kind&&"value"!==Xt.type.kind?Kt=new An(Xt.type,[Kt]):"value"!==Kt.type.kind&&"value"===Xt.type.kind&&(Xt=new An(Kt.type,[Xt])));let Me=null;if(4===st.length){if("string"!==Kt.type.kind&&"string"!==Xt.type.kind&&"value"!==Kt.type.kind&&"value"!==Xt.type.kind)return ut.error("Cannot use collator to compare non-string types.");if(Me=ut.parse(st[3],3,He),!Me)return null}return new Ta(Kt,Xt,Me)}evaluate(st){const ut=this.lhs.evaluate(st),Mt=this.rhs.evaluate(st);if(b&&this.hasUntypedArgument){const Kt=Ei(ut),Xt=Ei(Mt);if(Kt.kind!==Xt.kind||"string"!==Kt.kind&&"number"!==Kt.kind)throw new Gi(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${Kt.kind}, ${Xt.kind}) instead.`)}if(this.collator&&!b&&this.hasUntypedArgument){const Kt=Ei(ut),Xt=Ei(Mt);if("string"!==Kt.kind||"string"!==Xt.kind)return e(st,ut,Mt)}return this.collator?c(st,ut,Mt,this.collator.evaluate(st)):e(st,ut,Mt)}eachChild(st){st(this.lhs),st(this.rhs),this.collator&&st(this.collator)}outputDefined(){return!0}serialize(){const st=[h];return this.eachChild(ut=>{st.push(ut.serialize())}),st}}}const Br=$s("==",function Ys(h,e,c){return e===c},$r),cr=$s("!=",function Zs(h,e,c){return e!==c},function no(h,e,c,b){return!$r(0,e,c,b)}),ro=$s("<",function yr(h,e,c){return e<c},function so(h,e,c,b){return b.compare(e,c)<0}),oo=$s(">",function vr(h,e,c){return e>c},function vo(h,e,c,b){return b.compare(e,c)>0}),ao=$s("<=",function Er(h,e,c){return e<=c},function Bs(h,e,c,b){return b.compare(e,c)<=0}),Eo=$s(">=",function jr(h,e,c){return e>=c},function Hs(h,e,c,b){return b.compare(e,c)>=0});class as{constructor(e,c,b,H,st,ut){this.type=dt,this.number=e,this.locale=c,this.currency=b,this.unit=H,this.minFractionDigits=st,this.maxFractionDigits=ut}static parse(e,c){if(3!==e.length)return c.error("Expected two arguments.");const b=c.parse(e[1],1,ot);if(!b)return null;const H=e[2];if("object"!=typeof H||Array.isArray(H))return c.error("NumberFormat options argument must be an object.");let st=null;if(H.locale&&(st=c.parse(H.locale,1,dt),!st))return null;let ut=null;if(H.currency&&(ut=c.parse(H.currency,1,dt),!ut))return null;let Mt=null;if(H.unit&&(Mt=c.parse(H.unit,1,dt),!Mt))return null;let Kt=null;if(H["min-fraction-digits"]&&(Kt=c.parse(H["min-fraction-digits"],1,ot),!Kt))return null;let Xt=null;return H["max-fraction-digits"]&&(Xt=c.parse(H["max-fraction-digits"],1,ot),!Xt)?null:new as(b,st,ut,Mt,Kt,Xt)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class ur{constructor(e){this.type=ot,this.input=e}static parse(e,c){if(2!==e.length)return c.error(`Expected 1 argument, but found ${e.length-1} instead.`);const b=c.parse(e[1],1);return b?"array"!==b.type.kind&&"string"!==b.type.kind&&"value"!==b.type.kind?c.error(`Expected argument of type string or array, but found ${ni(b.type)} instead.`):new ur(b):null}evaluate(e){const c=this.input.evaluate(e);if("string"==typeof c)return c.length;if(Array.isArray(c))return c.length;throw new Gi(`Expected value to be of type string or array, but found ${ni(Ei(c))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(c=>{e.push(c.serialize())}),e}}const Jr={"==":Br,"!=":cr,">":oo,"<":ro,">=":Eo,"<=":ao,array:An,at:cn,boolean:An,case:Us,coalesce:_i,collator:_n,format:_s,image:ps,in:os,"index-of":Rn,interpolate:Je,"interpolate-hcl":Je,"interpolate-lab":Je,length:ur,let:Bi,literal:Zn,match:Kn,number:An,"number-format":as,object:An,slice:Vn,step:hr,string:An,"to-boolean":cs,"to-color":cs,"to-number":cs,"to-string":cs,var:ss,within:br};function Qr(h,[e,c,b,H]){e=e.evaluate(h),c=c.evaluate(h),b=b.evaluate(h);const st=H?H.evaluate(h):1,ut=Bn(e,c,b,st);if(ut)throw new Gi(ut);return new ge(e/255*st,c/255*st,b/255*st,st)}function qr(h,e){return h in e}function Wr(h,e){const c=e[h];return typeof c>"u"?null:c}function gn(h){return{type:h}}tn.register(Jr,{error:[{kind:"error"},[dt],(h,[e])=>{throw new Gi(e.evaluate(h))}],typeof:[dt,[ce],(h,[e])=>ni(Ei(e.evaluate(h)))],"to-rgba":[Mi(ot,4),[Wt],(h,[e])=>e.evaluate(h).toArray()],rgb:[Wt,[ot,ot,ot],Qr],rgba:[Wt,[ot,ot,ot,ot],Qr],has:{type:It,overloads:[[[dt],(h,[e])=>qr(e.evaluate(h),h.properties())],[[dt,pe],(h,[e,c])=>qr(e.evaluate(h),c.evaluate(h))]]},get:{type:ce,overloads:[[[dt],(h,[e])=>Wr(e.evaluate(h),h.properties())],[[dt,pe],(h,[e,c])=>Wr(e.evaluate(h),c.evaluate(h))]]},"feature-state":[ce,[dt],(h,[e])=>Wr(e.evaluate(h),h.featureState||{})],properties:[pe,[],h=>h.properties()],"geometry-type":[dt,[],h=>h.geometryType()],id:[ce,[],h=>h.id()],zoom:[ot,[],h=>h.globals.zoom],pitch:[ot,[],h=>h.globals.pitch||0],"distance-from-center":[ot,[],h=>h.distanceFromCenter()],"heatmap-density":[ot,[],h=>h.globals.heatmapDensity||0],"line-progress":[ot,[],h=>h.globals.lineProgress||0],"sky-radial-progress":[ot,[],h=>h.globals.skyRadialProgress||0],accumulated:[ce,[],h=>void 0===h.globals.accumulated?null:h.globals.accumulated],"+":[ot,gn(ot),(h,e)=>{let c=0;for(const b of e)c+=b.evaluate(h);return c}],"*":[ot,gn(ot),(h,e)=>{let c=1;for(const b of e)c*=b.evaluate(h);return c}],"-":{type:ot,overloads:[[[ot,ot],(h,[e,c])=>e.evaluate(h)-c.evaluate(h)],[[ot],(h,[e])=>-e.evaluate(h)]]},"/":[ot,[ot,ot],(h,[e,c])=>e.evaluate(h)/c.evaluate(h)],"%":[ot,[ot,ot],(h,[e,c])=>e.evaluate(h)%c.evaluate(h)],ln2:[ot,[],()=>Math.LN2],pi:[ot,[],()=>Math.PI],e:[ot,[],()=>Math.E],"^":[ot,[ot,ot],(h,[e,c])=>Math.pow(e.evaluate(h),c.evaluate(h))],sqrt:[ot,[ot],(h,[e])=>Math.sqrt(e.evaluate(h))],log10:[ot,[ot],(h,[e])=>Math.log(e.evaluate(h))/Math.LN10],ln:[ot,[ot],(h,[e])=>Math.log(e.evaluate(h))],log2:[ot,[ot],(h,[e])=>Math.log(e.evaluate(h))/Math.LN2],sin:[ot,[ot],(h,[e])=>Math.sin(e.evaluate(h))],cos:[ot,[ot],(h,[e])=>Math.cos(e.evaluate(h))],tan:[ot,[ot],(h,[e])=>Math.tan(e.evaluate(h))],asin:[ot,[ot],(h,[e])=>Math.asin(e.evaluate(h))],acos:[ot,[ot],(h,[e])=>Math.acos(e.evaluate(h))],atan:[ot,[ot],(h,[e])=>Math.atan(e.evaluate(h))],min:[ot,gn(ot),(h,e)=>Math.min(...e.map(c=>c.evaluate(h)))],max:[ot,gn(ot),(h,e)=>Math.max(...e.map(c=>c.evaluate(h)))],abs:[ot,[ot],(h,[e])=>Math.abs(e.evaluate(h))],round:[ot,[ot],(h,[e])=>{const c=e.evaluate(h);return c<0?-Math.round(-c):Math.round(c)}],floor:[ot,[ot],(h,[e])=>Math.floor(e.evaluate(h))],ceil:[ot,[ot],(h,[e])=>Math.ceil(e.evaluate(h))],"filter-==":[It,[dt,ce],(h,[e,c])=>h.properties()[e.value]===c.value],"filter-id-==":[It,[ce],(h,[e])=>h.id()===e.value],"filter-type-==":[It,[dt],(h,[e])=>h.geometryType()===e.value],"filter-<":[It,[dt,ce],(h,[e,c])=>{const b=h.properties()[e.value],H=c.value;return typeof b==typeof H&&b<H}],"filter-id-<":[It,[ce],(h,[e])=>{const c=h.id(),b=e.value;return typeof c==typeof b&&c<b}],"filter->":[It,[dt,ce],(h,[e,c])=>{const b=h.properties()[e.value],H=c.value;return typeof b==typeof H&&b>H}],"filter-id->":[It,[ce],(h,[e])=>{const c=h.id(),b=e.value;return typeof c==typeof b&&c>b}],"filter-<=":[It,[dt,ce],(h,[e,c])=>{const b=h.properties()[e.value],H=c.value;return typeof b==typeof H&&b<=H}],"filter-id-<=":[It,[ce],(h,[e])=>{const c=h.id(),b=e.value;return typeof c==typeof b&&c<=b}],"filter->=":[It,[dt,ce],(h,[e,c])=>{const b=h.properties()[e.value],H=c.value;return typeof b==typeof H&&b>=H}],"filter-id->=":[It,[ce],(h,[e])=>{const c=h.id(),b=e.value;return typeof c==typeof b&&c>=b}],"filter-has":[It,[ce],(h,[e])=>e.value in h.properties()],"filter-has-id":[It,[],h=>null!==h.id()&&void 0!==h.id()],"filter-type-in":[It,[Mi(dt)],(h,[e])=>e.value.indexOf(h.geometryType())>=0],"filter-id-in":[It,[Mi(ce)],(h,[e])=>e.value.indexOf(h.id())>=0],"filter-in-small":[It,[dt,Mi(ce)],(h,[e,c])=>c.value.indexOf(h.properties()[e.value])>=0],"filter-in-large":[It,[dt,Mi(ce)],(h,[e,c])=>function Gr(h,e,c,b){for(;c<=b;){const H=c+b>>1;if(e[H]===h)return!0;e[H]>h?b=H-1:c=H+1}return!1}(h.properties()[e.value],c.value,0,c.value.length-1)],all:{type:It,overloads:[[[It,It],(h,[e,c])=>e.evaluate(h)&&c.evaluate(h)],[gn(It),(h,e)=>{for(const c of e)if(!c.evaluate(h))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],(h,[e,c])=>e.evaluate(h)||c.evaluate(h)],[gn(It),(h,e)=>{for(const c of e)if(c.evaluate(h))return!0;return!1}]]},"!":[It,[It],(h,[e])=>!e.evaluate(h)],"is-supported-script":[It,[dt],(h,[e])=>{const c=h.globals&&h.globals.isSupportedScript;return!c||c(e.evaluate(h))}],upcase:[dt,[dt],(h,[e])=>e.evaluate(h).toUpperCase()],downcase:[dt,[dt],(h,[e])=>e.evaluate(h).toLowerCase()],concat:[dt,gn(ce),(h,e)=>e.map(c=>Vi(c.evaluate(h))).join("")],"resolved-locale":[dt,[He],(h,[e])=>e.evaluate(h).resolvedLocale()]});var Or=Jr;function xr(h){return{result:"success",value:h}}function xs(h){return{result:"error",value:h}}function dr(h){return"object"==typeof h&&null!==h&&!Array.isArray(h)}class Mo{constructor(e,c){this.expression=e,this._warningHistory={},this._evaluator=new ys,this._defaultValue=c?function To(h){return"color"===h.type&&(dr(h.default)||Array.isArray(h.default))?new ge(0,0,0,0):"color"===h.type?ge.parse(h.default)||null:void 0===h.default?null:h.default}(c):null,this._enumValues=c&&"enum"===c.type?c.values:null}evaluateWithoutErrorHandling(e,c,b,H,st,ut,Mt,Kt){return this._evaluator.globals=e,this._evaluator.feature=c,this._evaluator.featureState=b,this._evaluator.canonical=H||null,this._evaluator.availableImages=st||null,this._evaluator.formattedSection=ut,this._evaluator.featureTileCoord=Mt||null,this._evaluator.featureDistanceData=Kt||null,this.expression.evaluate(this._evaluator)}evaluate(e,c,b,H,st,ut,Mt,Kt){this._evaluator.globals=e,this._evaluator.feature=c||null,this._evaluator.featureState=b||null,this._evaluator.canonical=H||null,this._evaluator.availableImages=st||null,this._evaluator.formattedSection=ut||null,this._evaluator.featureTileCoord=Mt||null,this._evaluator.featureDistanceData=Kt||null;try{const Xt=this.expression.evaluate(this._evaluator);if(null==Xt||"number"==typeof Xt&&Xt!=Xt)return this._defaultValue;if(this._enumValues&&!(Xt in this._enumValues))throw new Gi(`Expected value to be one of ${Object.keys(this._enumValues).map(Me=>JSON.stringify(Me)).join(", ")}, but found ${JSON.stringify(Xt)} instead.`);return Xt}catch(Xt){return this._warningHistory[Xt.message]||(this._warningHistory[Xt.message]=!0,typeof console<"u"&&console.warn(Xt.message)),this._defaultValue}}}function to(h,e){const c=new hn(Or,[],e?function jo(h){const e={color:Wt,string:dt,number:ot,enum:dt,boolean:It,formatted:We,resolvedImage:bi};return"array"===h.type?Mi(e[h.value]||ce,h.length):e[h.type]}(e):void 0),b=c.parse(h,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return b?xr(new Mo(b,e)):xs(c.errors)}class fr{constructor(e,c){this.kind=e,this._styleExpression=c,this.isStateDependent="constant"!==e&&!ds(c.expression)}evaluateWithoutErrorHandling(e,c,b,H,st,ut){return this._styleExpression.evaluateWithoutErrorHandling(e,c,b,H,st,ut)}evaluate(e,c,b,H,st,ut){return this._styleExpression.evaluate(e,c,b,H,st,ut)}}class Ar{constructor(e,c,b,H){this.kind=e,this.zoomStops=b,this._styleExpression=c,this.isStateDependent="camera"!==e&&!ds(c.expression),this.interpolationType=H}evaluateWithoutErrorHandling(e,c,b,H,st,ut){return this._styleExpression.evaluateWithoutErrorHandling(e,c,b,H,st,ut)}evaluate(e,c,b,H,st,ut){return this._styleExpression.evaluate(e,c,b,H,st,ut)}interpolationFactor(e,c,b){return this.interpolationType?Je.interpolationFactor(this.interpolationType,e,c,b):0}}function qs(h,e){if("error"===(h=to(h,e)).result)return h;const c=h.value.expression,b=Qn(c);if(!b&&!function Js(h){return"data-driven"===h["property-type"]}(e))return xs([new g("","data expressions not supported")]);const H=ns(c,["zoom","pitch","distance-from-center"]);if(!H&&!function Qs(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}(e))return xs([new g("","zoom expressions not supported")]);const st=kr(c);if(!st&&!H)return xs([new g("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(st instanceof g)return xs([st]);if(st instanceof Je&&!function Mr(h){return!!h.expression&&h.expression.interpolated}(e))return xs([new g("",'"interpolate" expressions cannot be used with this property')]);if(!st)return xr(new fr(b?"constant":"source",h.value));return xr(new Ar(b?"camera":"composite",h.value,st.labels,st instanceof Je?st.interpolation:void 0))}function kr(h){let e=null;if(h instanceof Bi)e=kr(h.result);else if(h instanceof _i){for(const c of h.args)if(e=kr(c),e)break}else(h instanceof hr||h instanceof Je)&&h.input instanceof tn&&"zoom"===h.input.name&&(e=h);return e instanceof g||h.eachChild(c=>{const b=kr(c);b instanceof g?e=b:!e&&b?e=new g("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&b&&e!==b&&(e=new g("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function j(h){if(Array.isArray(h))return h.map(j);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const e={};for(const c in h)e[c]=j(h[c]);return e}return function V(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}(h)}var rt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function at(h){if(!0===h||!1===h)return!0;if(!Array.isArray(h)||0===h.length)return!1;switch(h[0]){case"has":return h.length>=2&&"$id"!==h[1]&&"$type"!==h[1];case"in":return h.length>=3&&("string"!=typeof h[1]||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==h.length||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const e of h.slice(1))if(!at(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}function vt(h,e="fill"){if(null==h)return{filter:()=>!0,needGeometry:!1,needFeature:!1};at(h)||(h=ee(h));const c=h;let b=!0;try{b=function bt(h){if(!Ht(h))return h;let e=j(h);return wt(e),e=xt(e),e}(c)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(c,null,2)}\n        `)}const H=rt[`filter_${e}`],st=to(b,H);let ut=null;if("error"===st.result)throw new Error(st.value.map(Me=>`${Me.key}: ${Me.message}`).join(", "));ut=(Me,t,a)=>st.value.evaluate(Me,t,{},a);let Mt=null,Kt=null;if(b!==c){const Me=to(c,H);if("error"===Me.result)throw new Error(Me.value.map(t=>`${t.key}: ${t.message}`).join(", "));Mt=(t,a,p,G,k)=>Me.value.evaluate(t,a,{},p,void 0,void 0,G,k),Kt=!Qn(Me.value.expression)}return{filter:ut,dynamicFilter:Mt||void 0,needGeometry:St(b),needFeature:!!Kt}}function xt(h){if(!Array.isArray(h))return h;const e=function Lt(h){if(jt.has(h[0]))for(let e=1;e<h.length;e++)if(Ht(h[e]))return!0;return h}(h);return!0===e?e:e.map(c=>xt(c))}function wt(h){let e=!1;const c=[];if("case"===h[0]){for(let b=1;b<h.length-1;b+=2)e=e||Ht(h[b]),c.push(h[b+1]);c.push(h[h.length-1])}else if("match"===h[0]){e=e||Ht(h[1]);for(let b=2;b<h.length-1;b+=2)c.push(h[b+1]);c.push(h[h.length-1])}else if("step"===h[0]){e=e||Ht(h[1]);for(let b=1;b<h.length-1;b+=2)c.push(h[b+1])}e&&(h.length=0,h.push("any",...c));for(let b=1;b<h.length;b++)wt(h[b])}function Ht(h){if(!Array.isArray(h))return!1;if(function Rt(h){return"pitch"===h||"distance-from-center"===h}(h[0]))return!0;for(let e=1;e<h.length;e++)if(Ht(h[e]))return!0;return!1}const jt=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Ft(h,e){return h<e?-1:h>e?1:0}function St(h){if(!Array.isArray(h))return!1;if("within"===h[0])return!0;for(let e=1;e<h.length;e++)if(St(h[e]))return!0;return!1}function ee(h){if(!h)return!0;const e=h[0];return h.length<=1?"any"!==e:"=="===e?Pt(h[1],h[2],"=="):"!="===e?de(Pt(h[1],h[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Pt(h[1],h[2],e):"any"===e?function Yt(h){return["any"].concat(h.map(ee))}(h.slice(1)):"all"===e?["all"].concat(h.slice(1).map(ee)):"none"===e?["all"].concat(h.slice(1).map(ee).map(de)):"in"===e?te(h[1],h.slice(2)):"!in"===e?de(te(h[1],h.slice(2))):"has"===e?me(h[1]):"!has"===e?de(me(h[1])):"within"!==e||h}function Pt(h,e,c){switch(h){case"$type":return[`filter-type-${c}`,e];case"$id":return[`filter-id-${c}`,e];default:return[`filter-${c}`,h,e]}}function te(h,e){if(0===e.length)return!1;switch(h){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(c=>typeof c!=typeof e[0])?["filter-in-large",h,["literal",e.sort(Ft)]]:["filter-in-small",h,["literal",e]]}}function me(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function de(h){return["!",h]}var we=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ue(h,e){const c={};for(const b in h)"ref"!==b&&(c[b]=h[b]);return we.forEach(b=>{b in e&&(c[b]=e[b])}),c}var fe={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},ve=/(italic|oblique)$/i,Ue={},Ge=ft(function(h,e,c){var b=Ue[h];if(!b){Array.isArray(h)||(h=[h]);for(var Mt,Kt,H=400,st="normal",ut=[],Xt=0,Me=h.length;Xt<Me;++Xt){var a=h[Xt].split(" "),p=a[a.length-1].toLowerCase();for(var G in"normal"==p||"italic"==p||"oblique"==p?(st=Kt?st:p,Kt=!0,a.pop(),p=a[a.length-1].toLowerCase()):ve.test(p)&&(p=p.replace(ve,""),st=Kt?st:a[a.length-1].replace(p,""),Kt=!0),fe){var k=a.length>1?a[a.length-2].toLowerCase():"";if(p==G||p==G.replace("-","")||k+"-"+p==G){H=Mt?H:fe[G],a.pop(),k&&G.startsWith(k)&&a.pop();break}}!Mt&&"number"==typeof p&&(H=p,Mt=!0);var q=a.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==q.indexOf(" ")&&(q='"'+q+'"'),ut.push(q)}b=Ue[h]=[st,H,ut]}return b[0]+" "+b[1]+" "+e+"px"+(c?"/"+c:"")+" "+b[2]});const ri="https://api.mapbox.com";function Ut(h){return 0!==h.indexOf("mapbox://")?"":h.slice(9)}function ie(h,e){const c=Ut(h);if(!c)return decodeURI(new URL(h,location.href).href);if(0!==c.indexOf("styles/"))throw new Error(`unexpected style url: ${h}`);const H=c.slice(7);return`${ri}/styles/v1/${H}?&access_token=${e}`}function Ce(h,e,c,b){const H=new URL(h,b),st=Ut(h);return st?"mapbox.satellite"===st?`https://api.mapbox.com/v4/${st}/{z}/{x}/{y}${window.devicePixelRatio>=1.5?"@2x":""}.webp?access_token=${e}`:`https://{a-d}.tiles.mapbox.com/v4/${st}/{z}/{x}/{y}.vector.pbf?access_token=${e}`:(e&&(H.searchParams.has(c)||H.searchParams.set(c,e)),decodeURI(H.href))}const kt={},ae={};let Zt=0;function Te(h){return h.id||(h.id=Zt++),h.id}function ii(h){return h*Math.PI/180}const ke=function(){const h=[];for(let e=78271.51696402048;h.length<=24;e/=2)h.push(e);return h}();function li(h,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(h,e);const c=document.createElement("canvas");return c.width=h,c.height=e,c}function ci(h,e){let c=0;const b=e.length;for(;c<b;++c)if(e[c]<h&&c+1<b){const st=e[c]/e[c+1];return c+Math.log(e[c]/h)/Math.log(st)}return b-1}const di={};function fi(h,e,c={},b){if(e in di)return b&&(b.request=di[e][0]),di[e][1];const H=c.transformRequest&&c.transformRequest(e,h)||e,st=(0,I.hq)(()=>H).then(ut=>(ut instanceof Request||(ut=new Request(ut)),ut.headers.get("Accept")||ut.headers.set("Accept","application/json"),b&&(b.request=ut),fetch(ut).then(function(Mt){return delete di[e],Mt.ok?Mt.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(Mt){return delete di[e],Promise.reject(new Error("Error fetching source "+e))})));return di[e]=[H,st],st}function yi(h,e){if("string"!=typeof h)return Promise.resolve(h);if(!h.trim().startsWith("{"))return fi("Style",h=ie(h,e.accessToken),e);try{const c=JSON.parse(h);return Promise.resolve(c)}catch(c){return Promise.reject(c)}}const Li={};function wi(h,e,c,b){const H=[2*c*e.pixelRatio+e.width,2*c*e.pixelRatio+e.height],st=li(H[0],H[1]),ut=st.getContext("2d");ut.drawImage(h,e.x,e.y,e.width,e.height,c*e.pixelRatio,c*e.pixelRatio,e.width,e.height);const Mt=ut.getImageData(0,0,H[0],H[1]);ut.globalCompositeOperation="destination-over",ut.fillStyle=`rgba(${255*b.r},${255*b.g},${255*b.b},${b.a})`;const Kt=Mt.data;for(let Xt=0,Me=Mt.width;Xt<Me;++Xt)for(let t=0,a=Mt.height;t<a;++t)Kt[4*(t*Me+Xt)+3]>0&&ut.arc(Xt,t,c*e.pixelRatio,0,2*Math.PI);return ut.fill(),st}function Oi(h,e,c){const b=Math.max(0,Math.min(1,(c-h)/(e-h)));return b*b*(3-2*b)}function Hi(h,e,c){const b=li(e.width,e.height),H=b.getContext("2d");H.drawImage(h,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const st=H.getImageData(0,0,e.width,e.height),ut=st.data;for(let Mt=0,Kt=st.width;Mt<Kt;++Mt)for(let Xt=0,Me=st.height;Xt<Me;++Xt){const t=4*(Xt*Kt+Mt),p=.75,G=.1,k=Oi(p-G,p+G,ut[t+3]/255);k>0?(ut[t+0]=Math.round(255*c.r*k),ut[t+1]=Math.round(255*c.g*k),ut[t+2]=Math.round(255*c.b*k),ut[t+3]=Math.round(255*k)):ut[t+3]=0}return H.putImageData(st,0,0),b}const Nn=Array(256).join("\u200a");function xn(h,e){if(e>=.05){let c="";const b=h.split("\n"),H=Nn.slice(0,Math.round(e/.1));for(let st=0,ut=b.length;st<ut;++st)st>0&&(c+="\n"),c+=b[st].split("").join(H);return c}return h}let Mn;function bn(){return Mn||(Mn=li(1,1).getContext("2d")),Mn}function bs(h,e){return bn().measureText(h).width+(h.length-1)*e}const ls={};function ws(h,e,c,b){if(-1!==h.indexOf("\n")){const ut=h.split("\n"),Mt=[];for(let Kt=0,Xt=ut.length;Kt<Xt;++Kt)Mt.push(ws(ut[Kt],e,c,b));return Mt.join("\n")}const H=c+","+e+","+h+","+b;let st=ls[H];if(!st){const ut=h.split(" ");if(ut.length>1){const Mt=bn();Mt.font=e;const Xt=Mt.measureText("M").width*c;let Me="";const t=[];for(let a=0,p=ut.length;a<p;++a){const G=ut[a],k=Me+(Me?" ":"")+G;bs(k,b)<=Xt?Me=k:(Me&&t.push(Me),Me=G)}Me&&t.push(Me);for(let a=0,p=t.length;a<p&&p>1;++a){const G=t[a];if(bs(G,b)<.35*Xt){const k=a>0?bs(t[a-1],b):1/0,q=a<p-1?bs(t[a+1],b):1/0;t.splice(a,1),p-=1,k<q?(t[a-1]+=" "+G,a-=1):t[a]=G+" "+t[a]}}for(let a=0,p=t.length-1;a<p;++a){const G=t[a],k=t[a+1];if(bs(G,b)>.7*Xt&&bs(k,b)<.6*Xt){const q=G.split(" "),lt=q.pop();bs(lt,b)<.2*Xt&&(t[a]=q.join(" "),t[a+1]=lt+" "+k),p-=1}}st=t.join("\n")}else st=h;st=xn(st,b),ls[H]=st}return st}const lo=/font-family: ?([^;]*);/,ho=/("|')/g;let Sr;function co(h){if(!Sr){Sr={};const e=document.styleSheets;for(let c=0,b=e.length;c<b;++c){const H=e[c];try{const st=H.rules||H.cssRules;if(st)for(let ut=0,Mt=st.length;ut<Mt;++ut){const Kt=st[ut];if(5==Kt.type){const Xt=Kt.cssText.match(lo);Sr[Xt[1].replace(ho,"")]=!0}}}catch{}}}return h in Sr}const zr={},$o={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Jo={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Qo=function(h,e){const c=qs(h,e);if("error"===c.result)throw new Error(c.value.map(b=>`${b.key}: ${b.message}`).join(", "));return c.value},Co={},fo={zoom:0};let go,Po;function Ti(h,e,c,b,H,st,ut){const Mt=h.id;st||(st={},console.warn("No functionCache provided to getValue()")),st[Mt]||(st[Mt]={});const Kt=st[Mt];if(!Kt[c]){let Xt=(h[e]||Co)[c];const Me=rt[`${e}_${h.type}`][c];void 0===Xt&&(Xt=Me.default);let t=function Ao(h){return Array.isArray(h)&&h.length>0&&"string"==typeof h[0]&&h[0]in Or}(Xt);if(!t&&dr(Xt)&&(Xt=function qe(h,e){let c=h.stops;if(!c)return function ti(h,e){const c=["get",h.property];if(void 0===h.default)return"string"===e.type?["string",c]:c;if("enum"===e.type)return["match",c,Object.keys(e.values),c,h.default];{const b=["color"===e.type?"to-color":e.type,c,Ae(h.default)];return"array"===e.type&&b.splice(1,0,e.value,e.length||null),b}}(h,e);const b=c&&"object"==typeof c[0][0],H=b||void 0!==h.property,st=b||!H;return c=c.map(ut=>!H&&e.tokens&&"string"==typeof ut[1]?[ut[0],et(ut[1])]:[ut[0],Ae(ut[1])]),b?function _t(h,e,c){const b={},H={},st=[];for(let Mt=0;Mt<c.length;Mt++){const Kt=c[Mt],Xt=Kt[0].zoom;void 0===b[Xt]&&(b[Xt]={zoom:Xt,type:h.type,property:h.property,default:h.default},H[Xt]=[],st.push(Xt)),H[Xt].push([Kt[0].value,Kt[1]])}if("exponential"===hi({},e)){const Mt=[Ie(h),["linear"],["zoom"]];for(const Kt of st)si(Mt,Kt,$t(b[Kt],e,H[Kt]),!1);return Mt}{const Mt=["step",["zoom"]];for(const Kt of st)si(Mt,Kt,$t(b[Kt],e,H[Kt]),!0);return Xe(Mt),Mt}}(h,e,c):st?function ze(h,e,c,b=["zoom"]){const H=hi(h,e);let st,ut=!1;if("interval"===H)st=["step",b],ut=!0;else{if("exponential"!==H)throw new Error(`Unknown zoom function type "${H}"`);{const Mt=void 0!==h.base?h.base:1;st=[Ie(h),1===Mt?["linear"]:["exponential",Mt],b]}}for(const Mt of c)si(st,Mt[0],Mt[1],ut);return Xe(st),st}(h,e,c):$t(h,e,c)}(Xt,Me),t=!0),t){const a=Qo(Xt,Me);Kt[c]=a.evaluate.bind(a)}else"color"==Me.type&&(Xt=ge.parse(Xt)),Kt[c]=function(){return Xt}}return fo.zoom=b,Kt[c](fo,H,ut)}function Bo(h,e,c,b,H){return Ti(h,"layout",`${b}-allow-overlap`,e,c,H)?Ti(h,"layout",`${b}-ignore-placement`,e,c,H)?"none":"obstacle":"declutter"}function qo(h,e,c,b,H){return H||console.warn("No filterCache provided to evaluateFilter()"),h in H||(H[h]=vt(e).filter),fo.zoom=b,H[h](fo,c)}let Ro=!1;function Tr(h,e){if(h){if(!Ro&&(0===h.a||0===e))return;const c=h.a;return e=void 0===e?1:e,0===c?"transparent":"rgba("+Math.round(255*h.r/c)+","+Math.round(255*h.g/c)+","+Math.round(255*h.b/c)+","+c*e+")"}return h}const ta=/\{[^{}}]*\}/g;function Io(h,e){return h.replace(ta,function(c){return e[c.slice(1,-1)]||""})}let Wo=!1;const un={};function Xi(h,e,c,b=ke,H=void 0,st=void 0,ut=void 0,Mt=void 0){if("string"==typeof e&&(e=JSON.parse(e)),8!=e.version)throw new Error("glStyle version 8 required.");let Kt,Xt,Me;if(un[function Oe(h,e){return Te(h)+"."+(0,i.v6)(e)}(e,h)]=Array.from(arguments),st)if(typeof Image<"u"){const he=new Image;let De;(0,I.hq)(()=>st).then(je=>{je instanceof Request?fetch(je).then($e=>$e.blob()).then($e=>{De=URL.createObjectURL($e),he.src=De}).catch(()=>{}):(he.crossOrigin="anonymous",he.src=je,De&&URL.revokeObjectURL(De))}),he.onload=function(){Kt=he,Xt=[he.width,he.height],h.changed(),he.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const he=self;he.postMessage({action:"loadImage",src:st}),he.addEventListener("message",function(je){"imageLoaded"===je.data.action&&je.data.src===st&&(Kt=je.data.image,Xt=[Kt.width,Kt.height])})}const t=function Le(h){h=h.slice();const e=Object.create(null);for(let c=0;c<h.length;c++)e[h[c].id]=h[c];for(let c=0;c<h.length;c++)"ref"in h[c]&&(h[c]=ue(h[c],e[h[c].ref]));return h}(e.layers),a={},p=[],G={},k={},q=function be(h){let e=kt[h.id];return e||(e={},kt[Te(h)]=e),e}(e),lt=function Ke(h){let e=ae[h.id];return e||(e={},ae[Te(h)]=e),e}(e);let nt;for(let he=0,De=t.length;he<De;++he){const je=t[he],$e=je.id;if("string"==typeof c&&je.source==c||Array.isArray(c)&&-1!==c.indexOf($e)){const Ze=je["source-layer"];if(nt){if(je.source!==nt)throw new Error(`Layer "${$e}" does not use source "${nt}`)}else{nt=je.source;const Pi=e.sources[nt];if(!Pi)throw new Error(`Source "${nt}" is not defined`);const Qe=Pi.type;if("vector"!==Qe&&"geojson"!==Qe)throw new Error(`Source "${nt}" is not of type "vector" or "geojson", but "${Qe}"`)}let Be=a[Ze];Be||(Be=[],a[Ze]=Be),Be.push({layer:je,index:he}),p.push($e)}}const At=new L.A,Bt=new z.A,ne=[],Qt=function(he,De,je){const $e=he.getProperties(),Ze=a[$e.layer];if(!Ze)return;let Be=b.indexOf(De);-1==Be&&(Be=ci(De,b));const Pi=$o[he.getGeometry().getType()],Qe={id:he.getId(),properties:$e,type:Pi},oi=h.get("mapbox-featurestate")[he.getId()];let Si,Ci=-1;for(let dn=0,sn=Ze.length;dn<sn;++dn){const fn=Ze[dn],ai=fn.layer,Ms=ai.id;if(void 0!==je&&je!==Ms)continue;const gs=ai.layout||Co,tr=ai.paint||Co;if("none"===gs.visibility||"minzoom"in ai&&Be<ai.minzoom||"maxzoom"in ai&&Be>=ai.maxzoom)continue;const So=ai.filter;if(!So||qo(Ms,So,Qe,Be,lt)){let As,Os,gr,Ws,Lr,xi;Si=ai;const yo=fn.index;if(3==Pi&&("fill"==ai.type||"fill-extrusion"==ai.type))if(Os=Ti(ai,"paint",ai.type+"-opacity",Be,Qe,q,oi),ai.type+"-pattern"in tr){const wn=Ti(ai,"paint",ai.type+"-pattern",Be,Qe,q,oi);if(wn){const On="string"==typeof wn?Io(wn,$e):wn.toString();if(Kt&&H&&H[On]){++Ci,xi=ne[Ci],(!xi||!xi.getFill()||xi.getStroke()||xi.getText())&&(xi=new M.Ay({fill:new z.A}),ne[Ci]=xi),gr=xi.getFill(),xi.setZIndex(yo);const mn=On+"."+Os;let Un=k[mn];if(!Un){const Yi=H[On],rn=li(Yi.width,Yi.height),Gn=rn.getContext("2d");Gn.globalAlpha=Os,Gn.drawImage(Kt,Yi.x,Yi.y,Yi.width,Yi.height,0,0,Yi.width,Yi.height),Un=Gn.createPattern(rn,"repeat"),k[mn]=Un}gr.setColor(Un)}}}else As=Tr(Ti(ai,"paint",ai.type+"-color",Be,Qe,q,oi),Os),ai.type+"-outline-color"in tr&&(Lr=Tr(Ti(ai,"paint",ai.type+"-outline-color",Be,Qe,q,oi),Os)),Lr||(Lr=As),(As||Lr)&&(++Ci,xi=ne[Ci],(!xi||As&&!xi.getFill()||!As&&xi.getFill()||Lr&&!xi.getStroke()||!Lr&&xi.getStroke()||xi.getText())&&(xi=new M.Ay({fill:As?new z.A:void 0,stroke:Lr?new L.A:void 0}),ne[Ci]=xi),As&&(gr=xi.getFill(),gr.setColor(As)),Lr&&(Ws=xi.getStroke(),Ws.setColor(Lr),Ws.setWidth(.5)),xi.setZIndex(yo));if(1!=Pi&&"line"==ai.type){As="line-pattern"in tr?void 0:Tr(Ti(ai,"paint","line-color",Be,Qe,q,oi),Ti(ai,"paint","line-opacity",Be,Qe,q,oi));const wn=Ti(ai,"paint","line-width",Be,Qe,q,oi);As&&wn>0&&(++Ci,xi=ne[Ci],(!xi||!xi.getStroke()||xi.getFill()||xi.getText())&&(xi=new M.Ay({stroke:new L.A}),ne[Ci]=xi),Ws=xi.getStroke(),Ws.setLineCap(Ti(ai,"layout","line-cap",Be,Qe,q,oi)),Ws.setLineJoin(Ti(ai,"layout","line-join",Be,Qe,q,oi)),Ws.setMiterLimit(Ti(ai,"layout","line-miter-limit",Be,Qe,q,oi)),Ws.setColor(As),Ws.setWidth(wn),Ws.setLineDash(tr["line-dasharray"]?Ti(ai,"paint","line-dasharray",Be,Qe,q,oi).map(function(On){return On*wn}):null),xi.setZIndex(yo))}let Do,Ts,ua,hs,Lo,Fo,Xr,No,da,Ho=!1,an=null,Aa=0;if((1==Pi||2==Pi)&&"icon-image"in gs){const wn=Ti(ai,"layout","icon-image",Be,Qe,q,oi);if(wn){let On;Do="string"==typeof wn?Io(wn,$e):wn.toString();const mn=Mt?Mt(h,Do):void 0;if(Kt&&H&&H[Do]||mn){const Un=Ti(ai,"layout","icon-rotation-alignment",Be,Qe,q,oi);if(2==Pi){const Yi=he.getGeometry();if(Yi.getFlatMidpoint||Yi.getFlatMidpoints){const rn=Yi.getExtent();if(Math.sqrt(Math.max(Math.pow((rn[2]-rn[0])/De,2),Math.pow((rn[3]-rn[1])/De,2)))>150){const kn="MultiLineString"===Yi.getType()?Yi.getFlatMidpoints():Yi.getFlatMidpoint();if(Po||(go=[NaN,NaN],Po=new $.Ay("Point",go,[],2,{},void 0)),On=Po,go[0]=kn[0],go[1]=kn[1],"line"===Ti(ai,"layout","symbol-placement",Be,Qe,q,oi)&&"map"===Un){const Gs=Yi.getStride(),Cs=Yi.getFlatCoordinates();for(let Ss=0,jn=Cs.length-Gs;Ss<jn;Ss+=Gs){const ir=Cs[Ss],nr=Cs[Ss+1],sr=Cs[Ss+Gs],ms=Cs[Ss+Gs+1],Uo=Math.min(ir,sr),Ca=Math.min(nr,ms),Pa=Math.max(ir,sr),Ra=Math.max(nr,ms);if(kn[0]>=Uo&&kn[0]<=Pa&&kn[1]>=Ca&&kn[1]<=Ra){Aa=Math.atan2(nr-ms,sr-ir);break}}}}}}if(2!==Pi||On){const Yi=Ti(ai,"layout","icon-size",Be,Qe,q,oi),rn=void 0!==tr["icon-color"]?Ti(ai,"paint","icon-color",Be,Qe,q,oi):null;if(!rn||0!==rn.a){const Gn=Ti(ai,"paint","icon-halo-color",Be,Qe,q,oi),kn=Ti(ai,"paint","icon-halo-width",Be,Qe,q,oi);let er=`${Do}.${Yi}.${kn}.${Gn}`;if(null!==rn&&(er+=`.${rn}`),Ts=G[er],!Ts){const Gs=Bo(ai,Be,Qe,"icon",q);let Cs;"icon-offset"in gs&&(Cs=Ti(ai,"layout","icon-offset",Be,Qe,q,oi).slice(0),Cs[0]*=Yi,Cs[1]*=-Yi);let Ss=rn?[255*rn.r,255*rn.g,255*rn.b,rn.a]:void 0;if(mn){const jn={color:Ss,rotateWithView:"map"===Un,displacement:Cs,declutterMode:Gs,scale:Yi};"string"==typeof mn?jn.src=mn:(jn.img=mn,jn.imgSize=[mn.width,mn.height]),Ts=new Q.A(jn)}else{const jn=H[Do];let ir,nr,sr;kn?jn.sdf?(ir=wi(Hi(Kt,jn,rn||[0,0,0,1]),{x:0,y:0,width:jn.width,height:jn.height,pixelRatio:jn.pixelRatio},kn,Gn),Ss=void 0):ir=wi(Kt,jn,kn,Gn):(jn.sdf?(Me||(Me=Hi(Kt,{x:0,y:0,width:Xt[0],height:Xt[1]},{r:1,g:1,b:1,a:1})),ir=Me):ir=Kt,nr=[jn.width,jn.height],sr=[jn.x,jn.y]),Ts=new Q.A({color:Ss,img:ir,imgSize:Xt,size:nr,offset:sr,rotateWithView:"map"===Un,scale:Yi/jn.pixelRatio,displacement:Cs,declutterMode:Gs})}G[er]=Ts}}Ts&&(++Ci,xi=ne[Ci],(!xi||!xi.getImage()||xi.getFill()||xi.getStroke())&&(xi=new M.Ay,ne[Ci]=xi),xi.setGeometry(On),Ts.setRotation(Aa+ii(Ti(ai,"layout","icon-rotate",Be,Qe,q,oi))),Ts.setOpacity(Ti(ai,"paint","icon-opacity",Be,Qe,q,oi)),Ts.setAnchor(Jo[Ti(ai,"layout","icon-anchor",Be,Qe,q,oi)]),xi.setImage(Ts),an=xi.getText(),xi.setText(void 0),xi.setZIndex(yo),Ho=!0,ua=!1)}else ua=!0}}}if(1==Pi&&"circle"===ai.type){++Ci,xi=ne[Ci],(!xi||!xi.getImage()||xi.getFill()||xi.getStroke())&&(xi=new M.Ay,ne[Ci]=xi);const wn="circle-radius"in tr?Ti(ai,"paint","circle-radius",Be,Qe,q,oi):5,On=Tr(Ti(ai,"paint","circle-stroke-color",Be,Qe,q,oi),Ti(ai,"paint","circle-stroke-opacity",Be,Qe,q,oi)),mn=Ti(ai,"paint","circle-translate",Be,Qe,q,oi),Un=Tr(Ti(ai,"paint","circle-color",Be,Qe,q,oi),Ti(ai,"paint","circle-opacity",Be,Qe,q,oi)),Yi=Ti(ai,"paint","circle-stroke-width",Be,Qe,q,oi),rn=wn+"."+On+"."+Un+"."+Yi+"."+mn[0]+"."+mn[1];Ts=G[rn],Ts||(Ts=new Y.A({radius:wn,displacement:[mn[0],-mn[1]],stroke:On&&Yi>0?new L.A({width:Yi,color:On}):void 0,fill:Un?new z.A({color:Un}):void 0,declutterMode:"none"}),G[rn]=Ts),xi.setImage(Ts),an=xi.getText(),xi.setText(void 0),xi.setGeometry(void 0),xi.setZIndex(yo),Ho=!0}if("text-field"in gs){Xr=Math.round(Ti(ai,"layout","text-size",Be,Qe,q,oi));const wn=Ti(ai,"layout","text-font",Be,Qe,q,oi);Fo=Ti(ai,"layout","text-line-height",Be,Qe,q,oi),Lo=Ge(ut?ut(wn,e.metadata?e.metadata["ol:webfonts"]:void 0):wn,Xr,Fo),Lo.includes("sans-serif")||(Lo+=",sans-serif"),No=Ti(ai,"layout","text-letter-spacing",Be,Qe,q,oi),da=Ti(ai,"layout","text-max-width",Be,Qe,q,oi);const On=Ti(ai,"layout","text-field",Be,Qe,q,oi);hs="object"==typeof On&&On.sections?1===On.sections.length?On.toString():On.sections.reduce((mn,Un,Yi)=>{const rn=Un.fontStack?Un.fontStack.split(","):wn,Gn=Ge(ut?ut(rn):rn,Xr*(Un.scale||1),Fo);let kn=Un.text;if("\n"===kn)return mn.push("\n",""),mn;if(2!=Pi){kn=ws(kn,Gn,da,No).split("\n");for(let er=0,Gs=kn.length;er<Gs;++er)er>0&&mn.push("\n",""),mn.push(kn[er],Gn);return mn}mn.push(xn(kn,No),Gn)},[]):Io(On,$e).trim(),Os=Ti(ai,"paint","text-opacity",Be,Qe,q,oi)}if(hs&&Os&&!ua){Ho||(++Ci,xi=ne[Ci],(!xi||!xi.getText()||xi.getFill()||xi.getStroke())&&(xi=new M.Ay,ne[Ci]=xi),xi.setImage(void 0),xi.setGeometry(void 0));const wn=Bo(ai,Be,Qe,"text",q);xi.getText()||xi.setText(an),an=xi.getText(),(!an||"getDeclutterMode"in an&&an.getDeclutterMode()!==wn)&&(an=new w.A({padding:[2,2,2,2],declutterMode:wn}),xi.setText(an));const On=Ti(ai,"layout","text-transform",Be,Qe,q,oi);"uppercase"==On?hs=Array.isArray(hs)?hs.map((ms,Uo)=>Uo%2?ms:ms.toUpperCase()):hs.toUpperCase():"lowercase"==On&&(hs=Array.isArray(hs)?hs.map((ms,Uo)=>Uo%2?ms:ms.toLowerCase()):hs.toLowerCase());const mn=Array.isArray(hs)?hs:2==Pi?xn(hs,No):ws(hs,Lo,da,No);an.setText(mn),an.setFont(Lo),an.setRotation(ii(Ti(ai,"layout","text-rotate",Be,Qe,q,oi)));const Un=Ti(ai,"layout","text-anchor",Be,Qe,q,oi),Yi=Ho||1==Pi?"point":Ti(ai,"layout","symbol-placement",Be,Qe,q,oi);let rn;if("line-center"===Yi?(an.setPlacement("line"),rn="center"):an.setPlacement(Yi),"line"===Yi&&"function"==typeof an.setRepeat){const ms=Ti(ai,"layout","symbol-spacing",Be,Qe,q,oi);an.setRepeat(2*ms)}an.setOverflow("point"===Yi);let Gn=Ti(ai,"paint","text-halo-width",Be,Qe,q,oi);const kn=Ti(ai,"layout","text-offset",Be,Qe,q,oi),er=Ti(ai,"paint","text-translate",Be,Qe,q,oi);let Gs=0,Cs=0;if("point"==Yi){rn="center",-1!==Un.indexOf("left")?(rn="left",Cs=Gn):-1!==Un.indexOf("right")&&(rn="right",Cs=-Gn);const ms=Ti(ai,"layout","text-rotation-alignment",Be,Qe,q,oi);an.setRotateWithView("map"==ms)}else an.setMaxAngle(ii(Ti(ai,"layout","text-max-angle",Be,Qe,q,oi))*hs.length/mn.length),an.setRotateWithView(!1);an.setTextAlign(rn);let Ss="middle";0==Un.indexOf("bottom")?(Ss="bottom",Gs=-Gn-.5*(Fo-1)*Xr):0==Un.indexOf("top")&&(Ss="top",Gs=Gn+.5*(Fo-1)*Xr),an.setTextBaseline(Ss);const jn=Ti(ai,"layout","text-justify",Be,Qe,q,oi);an.setJustify("auto"===jn?void 0:jn),an.setOffsetX(kn[0]*Xr+Cs+er[0]),an.setOffsetY(kn[1]*Xr+Gs+er[1]),Bt.setColor(Tr(Ti(ai,"paint","text-color",Be,Qe,q,oi),Os)),an.setFill(Bt);const ir=Tr(Ti(ai,"paint","text-halo-color",Be,Qe,q,oi),Os);if(ir&&Gn>0){At.setColor(ir),Gn*=2;const ms=.5*Xr;At.setWidth(Gn<=ms?Gn:ms),an.setStroke(At)}else an.setStroke(void 0);const nr=Ti(ai,"layout","text-padding",Be,Qe,q,oi),sr=an.getPadding();nr!==sr[0]&&(sr[0]=nr,sr[1]=nr,sr[2]=nr,sr[3]=nr),xi.setZIndex(yo)}}}return Ci>-1?(ne.length=Ci+1,Wo&&("set"in he?he.set("mapbox-layer",Si):he.getProperties()["mapbox-layer"]=Si),ne):void 0};return h.setStyle(Qt),h.set("mapbox-source",nt),h.set("mapbox-layers",p),h.set("mapbox-featurestate",h.get("mapbox-featurestate")||{}),Qt}function ia(h,e=512){return h.getExtent()?(0,O.EN)({extent:h.getExtent(),tileSize:e,maxZoom:22}).getResolutions():ke}function Cr(h,e,c="",b={},H=void 0){let st,ut,Mt,Kt,Xt=!0;return"string"==typeof c||Array.isArray(c)?Kt=c:(Mt=c,Kt=Mt.source||Mt.layers,b=Mt),"string"==typeof b?(st=b,Mt={}):(st=b.styleUrl,Mt=b),!1===Mt.updateSource&&(Xt=!1),H||(H=Mt.resolutions),!st&&"string"==typeof e&&!e.trim().startsWith("{")&&(st=e),st&&(st=st.startsWith("data:")?location.href:ie(st,Mt.accessToken),Mt=function eo(h,e){return e.accessToken||(e=Object.assign({},e),new URL(h).searchParams.forEach((b,H)=>{e.accessToken=b,e.accessTokenParam=H})),e}(st,Mt)),new Promise(function(Me,t){yi(e,Mt).then(function(a){if(8!=a.version)return t(new Error("glStyle version 8 required."));if(!(h instanceof tt.A||h instanceof J.A))return t(new Error("Can only apply to VectorLayer or VectorTileLayer"));const p=h instanceof J.A?"vector":"geojson";if(Kt?ut=Array.isArray(Kt)?a.layers.find(function(Bt){return Bt.id===Kt[0]}).source:Kt:(ut=Object.keys(a.sources).find(function(Bt){return a.sources[Bt].type===p}),Kt=ut),!ut)return t(new Error(`No ${p} source found in the glStyle.`));function G(){if(!Xt)return Promise.resolve();if(h instanceof J.A)return function Rr(h,e,c){return new Promise(function(b,H){(function Wi(h,e,c={}){const b=[e,JSON.stringify(h)].toString();let H=Li[b];if(!H||c.transformRequest){let st;c.transformRequest&&(st=(Mt,Kt)=>{const Xt=c.transformRequest&&c.transformRequest(Kt,"Tiles")||Kt;if(Mt instanceof u.A)Mt.setLoader((Me,t,a)=>{(0,I.hq)(()=>Xt).then(p=>{fetch(p).then(G=>G.arrayBuffer()).then(G=>{const q=Mt.getFormat().readFeatures(G,{extent:Me,featureProjection:a});Mt.setFeatures(q)}).catch(G=>Mt.setState(m.A.ERROR))})});else{const Me=Mt.getImage();(0,I.hq)(()=>Xt).then(t=>{t instanceof Request?fetch(t).then(a=>a.blob()).then(a=>{const p=URL.createObjectURL(a);Me.addEventListener("load",()=>URL.revokeObjectURL(p)),Me.addEventListener("error",()=>URL.revokeObjectURL(p)),Me.src=p}).catch(a=>Mt.setState(m.A.ERROR)):Me.src=t})}});const ut=h.url;if(ut&&!h.tiles){const Mt=Ce(ut,c.accessToken,c.accessTokenParam||"access_token",e||location.href);if(ut.startsWith("mapbox://"))H=Promise.resolve({tileJson:Object.assign({},h,{url:void 0,tiles:(0,o.Uu)(Mt)}),tileLoadFunction:st});else{const Kt={};H=fi("Source",Mt,c,Kt).then(function(Xt){return Xt.tiles=Xt.tiles.map(function(Me){return"tms"===Xt.scheme&&(Me=Me.replace("{y}","{-y}")),Ce(Me,c.accessToken,c.accessTokenParam||"access_token",Kt.request.url)}),Promise.resolve({tileJson:Xt,tileLoadFunction:st})})}}else h=Object.assign({},h,{tiles:h.tiles.map(function(Mt){return"tms"===h.scheme&&(Mt=Mt.replace("{y}","{-y}")),Ce(Mt,c.accessToken,c.accessTokenParam||"access_token",e||location.href)})}),H=Promise.resolve({tileJson:Object.assign({},h),tileLoadFunction:st});Li[b]=H}return H})(h,e,c).then(function({tileJson:st,tileLoadFunction:ut}){const Mt=function bo(h,e,c){const b=new U({tileJSON:e,tileSize:h.tileSize||e.tileSize||512}),H=b.getTileJSON(),st=b.getTileGrid(),ut=(0,X.Jt)(c.projection||"EPSG:3857"),Mt=function Go(h,e){const c=h.bounds;if(c){const b=(0,X.Rb)([c[0],c[1]],e),H=(0,X.Rb)([c[2],c[3]],e);return[b[0],b[1],H[0],H[1]]}return(0,X.Jt)(e).getExtent()}(H,ut),Kt=ut.getExtent(),Xt=H.minzoom||0,Me=H.maxzoom||22,t={attributions:b.getAttributions(),projection:ut,tileGrid:new _.A({origin:Kt?(0,F.Py)(Kt):st.getOrigin(0),extent:Mt||st.getExtent(),minZoom:Xt,resolutions:ia(ut,e.tileSize).slice(0,Me+1),tileSize:st.getTileSize(0)})};return Array.isArray(H.tiles)?t.urls=H.tiles:t.url=H.tiles,t}(h,st,c);Mt.tileLoadFunction=ut,Mt.format=new f.A,b(new ht.A(Mt))}).catch(H)})}(a.sources[ut],st,Mt).then(function(he){const De=h.getSource();De?he!==De&&(De.setTileUrlFunction(he.getTileUrlFunction()),"function"==typeof De.setUrls&&"function"==typeof he.getUrls&&De.setUrls(he.getUrls()),De.format_||(De.format_=he.format_),De.getAttributions()||De.setAttributions(he.getAttributions()),De.getTileLoadFunction()===ht.Y&&De.setTileLoadFunction(he.getTileLoadFunction()),(0,X.tI)(De.getProjection(),he.getProjection())&&(De.tileGrid=he.getTileGrid())):h.setSource(he);const je=h.getSource().getTileGrid();!isFinite(h.getMaxResolution())&&!isFinite(h.getMinZoom())&&je.getMinZoom()>0&&h.setMaxResolution(function gi(h,e){const c=Math.floor(h),b=Math.pow(2,h-c);return e[c]/b}(Math.max(0,je.getMinZoom()-1e-12),je.getResolutions()))});const Bt=a.sources[ut];let ne=h.getSource();(!ne||ne.get("mapbox-source")!==Bt)&&(ne=function Oo(h,e,c){const b=c.projection?new l.A({dataProjection:c.projection}):new l.A,H=h.data,st={};if("string"==typeof H){const Mt=Ce(H,c.accessToken,c.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(Mt)){const Xt=(t,a,p)=>{const G=function zo(h){return`{bbox-${(h?h.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}(p);return Mt.replace(G,`${t.join(",")}`)},Me=new it.A({attributions:h.attribution,format:b,loader:(t,a,p,G,k)=>{fi("GeoJSON","function"==typeof Xt?Xt(t,a,p):Xt,c).then(lt=>{const nt=Me.getFormat().readFeatures(lt,{featureProjection:p});Me.addFeatures(nt),G(nt)}).catch(lt=>{Me.removeLoadedExtent(t),k()})},strategy:Et.Qk});return Me.set("mapbox-source",h),Me}const Kt=new it.A({attributions:h.attribution,format:b,url:Mt,loader:(Xt,Me,t,a,p)=>{fi("GeoJSON",Mt,c).then(G=>{const k=Kt.getFormat().readFeatures(G,{featureProjection:t});Kt.addFeatures(k),a(k)}).catch(G=>{Kt.removeLoadedExtent(Xt),p()})}});return Kt}st.features=b.readFeatures(H,{featureProjection:(0,X.Tf)()||"EPSG:3857"});const ut=new it.A(Object.assign({attributions:h.attribution,format:b},st));return ut.set("mapbox-source",h),ut}(Bt,st,Mt));const Qt=h.getSource();return Qt?ne!==Qt&&(Qt.getAttributions()||Qt.setAttributions(ne.getAttributions()),Qt.format_||(Qt.format_=ne.getFormat()),Qt.url_=ne.getUrl()):h.setSource(ne),Promise.resolve()}let k,q,lt,nt;function At(){if(nt||a.sprite&&!q)nt?(h.setStyle(nt),G().then(Me).catch(t)):t(new Error("Something went wrong trying to apply style."));else{if(Mt.projection&&!H){const ne=(0,X.Jt)(Mt.projection).getUnits();"m"!==ne&&(H=ke.map(Qt=>Qt/mt.I[ne]))}nt=Xi(h,a,Kt,H,q,lt,(Bt,ne=Mt.webfonts)=>function uo(h,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const c=h.toString();if(c in zr)return zr[c];const b=[];for(let H=0,st=h.length;H<st;++H){h[H]=h[H].replace("Arial Unicode MS","Arial");const Mt=Ge(h[H],1);(0,y.fZ)(Mt);const Kt=Mt.split(" ");b.push([Kt.slice(3).join(" ").replace(/"/g,""),Kt[1],Kt[0]])}for(let H=0,st=b.length;H<st;++H){const ut=b[H],Mt=ut[0];if(!co(Mt)&&100!==y.yY.get(`${ut[2]}\n${ut[1]} \n${Mt}`)){const Kt=e.replace("{font-family}",Mt.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",Mt.replace(/ /g,"+")).replace("{fontweight}",ut[1]).replace("{-fontstyle}",ut[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",ut[2]);if(!document.querySelector('link[href="'+Kt+'"]')){const Xt=document.createElement("link");Xt.href=Kt,Xt.rel="stylesheet",document.head.appendChild(Xt)}}}return zr[c]=h,h}(Bt,ne),Mt.getImage),h.getStyle()?G().then(Me).catch(t):t(new Error(`Nothing to show for source [${ut}]`))}}if(a.sprite){const Bt=new URL(function se(h,e,c){const b=Ut(h);if(!b)return decodeURI(new URL(h,c).href);if(0!==b.indexOf("sprites/"))throw new Error(`unexpected sprites url: ${h}`);const st=b.slice(8);return`${ri}/styles/v1/${st}/sprite?access_token=${e}`}(a.sprite,Mt.accessToken,st||location.href));k=window.devicePixelRatio>=1.5?.5:1;const ne=.5==k?"@2x":"";let Qt=Bt.origin+Bt.pathname+ne+".json"+Bt.search;new Promise(function(he,De){fi("Sprite",Qt,Mt).then(he).catch(function(je){Qt=Bt.origin+Bt.pathname+".json"+Bt.search,fi("Sprite",Qt,Mt).then(he).catch(De)})}).then(function(he){if(void 0===he&&t(new Error("No sprites found.")),q=he,lt=Bt.origin+Bt.pathname+ne+".png"+Bt.search,Mt.transformRequest){const De=Mt.transformRequest(lt,"SpriteImage")||lt;(De instanceof Request||De instanceof Promise)&&(lt=De)}At()}).catch(function(he){t(new Error(`Sprites cannot be loaded: ${Qt}: ${he.message}`))})}else At()}).catch(t)})}const Pr={};function mo(h,e,c={}){return yi(e,c).then(function(b){!function na(h,e,c){e.layers.some(function(b){if("background"===b.type){if(h instanceof n.A)return h.setBackground(function(H){return wo(b,H,c,{})}),!0;if(h instanceof r.A||h instanceof d.A)return h.getLayers().insertAt(0,function ko(h,e,c){const b=document.createElement("div");return b.className="ol-mapbox-style-background",b.style.position="absolute",b.style.width="100%",b.style.height="100%",new n.A({source:new C.A({}),render(H){const st=wo(h,H.viewState.resolution,e,c);return b.style.backgroundColor=st,b}})}(b,c,{})),!0}})}(h,b,c)})}function wo(h,e,c,b){const H={id:h.id,type:h.type},st=h.layout||{},ut=h.paint||{};H.paint=ut;const Mt=ci(e,c.resolutions||ke);let Kt;const Xt=Ti(H,"paint","background-color",Mt,Pr,b);return void 0!==ut["background-opacity"]&&(Kt=Ti(H,"paint","background-opacity",Mt,Pr,b)),"none"==st.visibility?void 0:Tr(Xt,Kt)}},6591:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>w});var Y=s(9568),z=s(2927),Q=s(3805);class L extends Q.Ay{constructor(y,m,u){super(y),this.element=m,this.index=u}}const w=class M extends Y.A{constructor(y,m){if(super(),this.unique_=!!(m=m||{}).unique,this.array_=y||[],this.unique_)for(let u=0,o=this.array_.length;u<o;++u)this.assertUnique_(this.array_[u],u);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(y){for(let m=0,u=y.length;m<u;++m)this.push(y[m]);return this}forEach(y){const m=this.array_;for(let u=0,o=m.length;u<o;++u)y(m[u],u,m)}getArray(){return this.array_}item(y){return this.array_[y]}getLength(){return this.get("length")}insertAt(y,m){if(y<0||y>this.getLength())throw new Error("Index out of bounds: "+y);this.unique_&&this.assertUnique_(m),this.array_.splice(y,0,m),this.updateLength_(),this.dispatchEvent(new L(z.A.ADD,m,y))}pop(){return this.removeAt(this.getLength()-1)}push(y){this.unique_&&this.assertUnique_(y);const m=this.getLength();return this.insertAt(m,y),this.getLength()}remove(y){const m=this.array_;for(let u=0,o=m.length;u<o;++u)if(m[u]===y)return this.removeAt(u)}removeAt(y){if(y<0||y>=this.getLength())return;const m=this.array_[y];return this.array_.splice(y,1),this.updateLength_(),this.dispatchEvent(new L(z.A.REMOVE,m,y)),m}setAt(y,m){if(y>=this.getLength())return void this.insertAt(y,m);if(y<0)throw new Error("Index out of bounds: "+y);this.unique_&&this.assertUnique_(m,y);const o=this.array_[y];this.array_[y]=m,this.dispatchEvent(new L(z.A.REMOVE,o,y)),this.dispatchEvent(new L(z.A.ADD,m,y))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(y,m){for(let u=0,o=this.array_.length;u<o;++u)if(this.array_[u]===y&&u!==m)throw new Error("Duplicate item added to a unique collection")}}},2927:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={ADD:"add",REMOVE:"remove"}},9153:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>z});const z=class Y{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},9557:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>w});var Y=s(9568),z=s(6621),Q=s(5940),$=s(2614);class L extends Y.A{constructor(y){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),y&&("function"==typeof y.getSimplifiedGeometry?this.setGeometry(y):this.setProperties(y))}clone(){const y=new L(this.hasProperties()?this.getProperties():null);y.setGeometryName(this.getGeometryName());const m=this.getGeometry();m&&y.setGeometry(m.clone());const u=this.getStyle();return u&&y.setStyle(u),y}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,$.JH)(this.geometryChangeKey_),this.geometryChangeKey_=null);const y=this.getGeometry();y&&(this.geometryChangeKey_=(0,$.KT)(y,z.A.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(y){this.set(this.geometryName_,y)}setStyle(y){this.style_=y,this.styleFunction_=y?function M(I){if("function"==typeof I)return I;let y;return Array.isArray(I)?y=I:((0,Q.v)("function"==typeof I.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),y=[I]),function(){return y}}(y):void 0,this.changed()}setId(y){this.id_=y,this.changed()}setGeometryName(y){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=y,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const w=L},6490:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>o,D4:()=>u,RA:()=>m,f6:()=>I});var Y=s(1884),z=s(6621),Q=s(2661),$=s(2531),L=s(2614),M=s(1766);function I(i,l,n){const d=i;let f=!0,r=!1,C=!1;const _=[(0,L.Jz)(d,z.A.LOAD,function(){C=!0,r||l()})];return d.src&&$.DT?(r=!0,d.decode().then(function(){f&&l()}).catch(function(v){f&&(C?l():n())})):_.push((0,L.Jz)(d,z.A.ERROR,n)),function(){f=!1,_.forEach(L.JH)}}function m(i,l){return l&&(i.src=l),i.src&&$.DT?new Promise((n,d)=>i.decode().then(()=>n(i)).catch(f=>i.complete&&i.width?n(i):d(f))):function y(i,l){return new Promise((n,d)=>{function f(){C(),n(i)}function r(){C(),d(new Error("Image load error"))}function C(){i.removeEventListener("load",f),i.removeEventListener("error",r)}i.addEventListener("load",f),i.addEventListener("error",r),l&&(i.src=l)})}(i)}function u(i,l){return l&&(i.src=l),i.src&&$.DT&&$.XM?i.decode().then(()=>createImageBitmap(i)).catch(n=>{if(i.complete&&i.width)return i;throw n}):m(i)}const o=class w extends Y.A{constructor(l,n,d,f){super(),this.extent=l,this.pixelRatio_=d,this.resolution=n,this.state="function"==typeof f?Q.A.IDLE:f,this.image_=null,this.loader="function"==typeof f?f:null}changed(){this.dispatchEvent(z.A.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Q.A.IDLE&&this.loader){this.state=Q.A.LOADING,this.changed();const l=this.getResolution(),n=Array.isArray(l)?l[0]:l;(0,M.hq)(()=>this.loader(this.getExtent(),n,this.getPixelRatio())).then(d=>{"image"in d&&(this.image_=d.image),"extent"in d&&(this.extent=d.extent),"resolution"in d&&(this.resolution=d.resolution),"pixelRatio"in d&&(this.pixelRatio_=d.pixelRatio),(d instanceof HTMLImageElement||d instanceof ImageBitmap||d instanceof HTMLCanvasElement||d instanceof HTMLVideoElement)&&(this.image_=d),this.state=Q.A.LOADED}).catch(d=>{this.state=Q.A.ERROR,console.error(d)}).finally(()=>this.changed())}}setImage(l){this.image_=l}setResolution(l){this.resolution=l}}},1950:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>$});var Y=s(2661),z=s(6490);const $=class Q extends z.Ay{constructor(M,w,I,y,m){super(M,w,I,void 0!==m?Y.A.IDLE:Y.A.LOADED),this.loader_=void 0!==m?m:null,this.canvas_=y,this.error_=null}getError(){return this.error_}handleLoad_(M){M?(this.error_=M,this.state=Y.A.ERROR):this.state=Y.A.LOADED,this.changed()}load(){this.state==Y.A.IDLE&&(this.state=Y.A.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}},2661:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},8118:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>w});var Y=s(7783),z=s(9806),Q=s(5551),$=s(6490);const w=class L extends Y.A{constructor(y,m,u,o,i,l){super(y,m,l),this.crossOrigin_=o,this.src_=u,this.key=u,this.image_=new Image,null!==o&&(this.image_.crossOrigin=o),this.unlisten_=null,this.tileLoadFunction_=i}getImage(){return this.image_}setImage(y){this.image_=y,this.state=z.A.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=z.A.ERROR,this.unlistenImage_(),this.image_=function M(){const I=(0,Q.Y)(1,1);return I.fillStyle="rgba(0,0,0,0)",I.fillRect(0,0,1,1),I.canvas}(),this.changed()}handleImageLoad_(){const y=this.image_;this.state=y.naturalWidth&&y.naturalHeight?z.A.LOADED:z.A.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==z.A.ERROR&&(this.state=z.A.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==z.A.IDLE&&(this.state=z.A.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,$.f6)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},1155:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>ti});var Y=s(9568),z=s(6591),Q=s(2927),$=s(7477),L=s(9153),M=s(1766),w=s(2383),I=s(1983),y=s(8507),m=s(1705),u=s(8052),o=s(5085);function l(Ie,_t){m.ue.expire()}const n=class i extends L.A{constructor(_t){super(),this.map_=_t}dispatchRenderEvent(_t,zt){(0,w.b0)()}calculateMatrices2D(_t){const zt=_t.viewState,xe=_t.coordinateToPixelTransform,$t=_t.pixelToCoordinateTransform;(0,I.Zz)(xe,_t.size[0]/2,_t.size[1]/2,1/zt.resolution,-1/zt.resolution,-zt.rotation,-zt.center[0],-zt.center[1]),(0,I.T9)($t,xe)}forEachFeatureAtCoordinate(_t,zt,xe,$t,ze,Xe,si,hi){let et;const N=zt.viewState;function g(ce,Ne,He,We){return ze.call(Xe,Ne,ce?He:null,We)}const S=N.projection,K=(0,o.Li)(_t.slice(),S),B=[[0,0]];if(S.canWrapX()&&$t){const ce=S.getExtent(),Ne=(0,y.RG)(ce);B.push([-Ne,0],[Ne,0])}const ot=zt.layerStatesArray,dt=ot.length,It=[],Wt=[];for(let ce=0;ce<B.length;ce++)for(let Ne=dt-1;Ne>=0;--Ne){const He=ot[Ne],We=He.layer;if(We.hasRenderer()&&(0,u.l)(He,N)&&si.call(hi,We)){const bi=We.getRenderer(),Mi=We.getSource();if(bi&&Mi){const ni=Mi.getWrapX()?K:_t,Ii=g.bind(null,He.managed);Wt[0]=ni[0]+B[ce][0],Wt[1]=ni[1]+B[ce][1],et=bi.forEachFeatureAtCoordinate(Wt,zt,xe,Ii,It)}if(et)return et}}if(0===It.length)return;const pe=1/It.length;return It.forEach((ce,Ne)=>ce.distanceSq+=Ne*pe),It.sort((ce,Ne)=>ce.distanceSq-Ne.distanceSq),It.some(ce=>et=ce.callback(ce.feature,ce.layer,ce.geometry)),et}hasFeatureAtCoordinate(_t,zt,xe,$t,ze,Xe){return void 0!==this.forEachFeatureAtCoordinate(_t,zt,xe,$t,M.rT,this,ze,Xe)}getMap(){return this.map_}renderFrame(_t){(0,w.b0)()}scheduleExpireIconCache(_t){m.ue.canExpireCache()&&_t.postRenderFunctions.push(l)}};var d=s(6058),f=s(2800),r=s(1688),C=s(1776),_=s(2462),v=s(2614),F=s(5551);const X=class O extends n{constructor(_t){super(_t),this.fontChangeListenerKey_=(0,v.KT)(_.yY,d.A.PROPERTYCHANGE,_t.redrawText.bind(_t)),this.element_=document.createElement("div");const zt=this.element_.style;zt.position="absolute",zt.width="100%",zt.height="100%",zt.zIndex="0",this.element_.className=C.XI+" ol-layers";const xe=_t.getViewport();xe.insertBefore(this.element_,xe.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(_t,zt){const xe=this.getMap();if(xe.hasListener(_t)){const $t=new f.A(_t,void 0,zt);xe.dispatchEvent($t)}}disposeInternal(){(0,v.JH)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(_t){if(!_t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(_t),this.dispatchRenderEvent(r.A.PRECOMPOSE,_t);const zt=_t.layerStatesArray.sort(function(si,hi){return si.zIndex-hi.zIndex});zt.some(si=>si.layer instanceof $.A&&si.layer.getDeclutter())&&(_t.declutter={});const $t=_t.viewState;this.children_.length=0;const ze=[];let Xe=null;for(let si=0,hi=zt.length;si<hi;++si){const et=zt[si];_t.layerIndex=si;const N=et.layer,g=N.getSourceState();if(!(0,u.l)(et,$t)||"ready"!=g&&"undefined"!=g){N.unrender();continue}const S=N.render(_t,Xe);S&&(S!==Xe&&(this.children_.push(S),Xe=S),ze.push(et))}this.declutter(_t,ze),(0,F.WM)(this.element_,this.children_),this.dispatchRenderEvent(r.A.POSTCOMPOSE,_t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(_t)}declutter(_t,zt){if(_t.declutter){for(let xe=zt.length-1;xe>=0;--xe){const $t=zt[xe],ze=$t.layer;ze.getDeclutter()&&ze.renderDeclutter(_t,$t)}zt.forEach(xe=>xe.layer.renderDeferred(_t))}}};var P=s(6621),E=s(3942),W=s(3805);const A=class Z extends W.Ay{constructor(_t,zt,xe){super(_t),this.map=zt,this.frameState=void 0!==xe?xe:null}},R=class D extends A{constructor(_t,zt,xe,$t,ze,Xe){super(_t,zt,ze),this.originalEvent=xe,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==$t&&$t,this.activePointers=Xe}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(_t){this.pixel_=_t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(_t){this.coordinate_=_t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}};var x=s(1469),T=s(8669),U=s(1884),tt=s(2531);const J=class it extends U.A{constructor(_t,zt){super(_t),this.map_=_t,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===zt?1:zt,this.down_=null;const xe=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=xe,this.pointerdownListenerKey_=(0,v.KT)(xe,T.A.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=(0,v.KT)(xe,T.A.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(P.A.TOUCHMOVE,this.boundHandleTouchMove_,!!tt.FT&&{passive:!1})}emulateClick_(_t){let zt=new R(x.A.CLICK,this.map_,_t);this.dispatchEvent(zt),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,zt=new R(x.A.DBLCLICK,this.map_,_t),this.dispatchEvent(zt)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const xe=new R(x.A.SINGLECLICK,this.map_,_t);this.dispatchEvent(xe)},250)}updateActivePointers_(_t){const zt=_t,xe=zt.pointerId;if(zt.type==x.A.POINTERUP||zt.type==x.A.POINTERCANCEL){delete this.trackedTouches_[xe];for(const $t in this.trackedTouches_)if(this.trackedTouches_[$t].target!==zt.target){delete this.trackedTouches_[$t];break}}else(zt.type==x.A.POINTERDOWN||zt.type==x.A.POINTERMOVE)&&(this.trackedTouches_[xe]=zt);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(_t){this.updateActivePointers_(_t);const zt=new R(x.A.POINTERUP,this.map_,_t,void 0,void 0,this.activePointers_);this.dispatchEvent(zt),this.emulateClicks_&&!zt.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(_t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(v.JH),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(_t){return 0===_t.button}handlePointerDown_(_t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(_t);const zt=new R(x.A.POINTERDOWN,this.map_,_t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(zt),this.down_=new PointerEvent(_t.type,_t),Object.defineProperty(this.down_,"target",{writable:!1,value:_t.target}),0===this.dragListenerKeys_.length){const xe=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,v.KT)(xe,x.A.POINTERMOVE,this.handlePointerMove_,this),(0,v.KT)(xe,x.A.POINTERUP,this.handlePointerUp_,this),(0,v.KT)(this.element_,x.A.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==xe&&this.dragListenerKeys_.push((0,v.KT)(this.element_.getRootNode(),x.A.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(_t){if(this.isMoving_(_t)){this.updateActivePointers_(_t),this.dragging_=!0;const zt=new R(x.A.POINTERDRAG,this.map_,_t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(zt)}}relayMoveEvent_(_t){this.originalPointerMoveEvent_=_t;const zt=!(!this.down_||!this.isMoving_(_t));this.dispatchEvent(new R(x.A.POINTERMOVE,this.map_,_t,zt))}handleTouchMove_(_t){const zt=this.originalPointerMoveEvent_;(!zt||zt.defaultPrevented)&&("boolean"!=typeof _t.cancelable||!0===_t.cancelable)&&_t.preventDefault()}isMoving_(_t){return this.dragging_||Math.abs(_t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(_t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,v.JH)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(P.A.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,v.JH)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(v.JH),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}};var ht=s(5281),mt=s(388),Et=s(1334),Ot=s(3980),Nt=s(6631),ft=s(5940),Ct=s(2744),Dt=s(7290),re=s(5130),ye=s(8733),oe=s(2058),_e=s(9325),ct=s(9270),Gt=s(5278);function Vt(Ie){Ie instanceof u.A?Ie.setMapInternal(null):Ie instanceof E.A&&Ie.getLayers().forEach(Vt)}function ge(Ie,_t){if(Ie instanceof u.A)Ie.setMapInternal(_t);else if(Ie instanceof E.A){const zt=Ie.getLayers().getArray();for(let xe=0,$t=zt.length;xe<$t;++xe)ge(zt[xe],_t)}}const ti=class Ae extends Y.A{constructor(_t){super();const zt=function qe(Ie){let _t=null;void 0!==Ie.keyboardEventTarget&&(_t="string"==typeof Ie.keyboardEventTarget?document.getElementById(Ie.keyboardEventTarget):Ie.keyboardEventTarget);const zt={},xe=Ie.layers&&"function"==typeof Ie.layers.getLayers?Ie.layers:new E.A({layers:Ie.layers});let $t,ze,Xe;return zt[mt.A.LAYERGROUP]=xe,zt[mt.A.TARGET]=Ie.target,zt[mt.A.VIEW]=Ie.view instanceof Ot.Ay?Ie.view:new Ot.Ay,void 0!==Ie.controls&&(Array.isArray(Ie.controls)?$t=new z.A(Ie.controls.slice()):((0,ft.v)("function"==typeof Ie.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),$t=Ie.controls)),void 0!==Ie.interactions&&(Array.isArray(Ie.interactions)?ze=new z.A(Ie.interactions.slice()):((0,ft.v)("function"==typeof Ie.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),ze=Ie.interactions)),void 0!==Ie.overlays?Array.isArray(Ie.overlays)?Xe=new z.A(Ie.overlays.slice()):((0,ft.v)("function"==typeof Ie.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),Xe=Ie.overlays):Xe=new z.A,{controls:$t,interactions:ze,keyboardEventTarget:_t,overlays:Xe,values:zt}}(_t=_t||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==_t.maxTilesLoading?_t.maxTilesLoading:16,this.pixelRatio_=void 0!==_t.pixelRatio?_t.pixelRatio:tt.cr,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,I.vt)(),this.pixelToCoordinateTransform_=(0,I.vt)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=_t.moveTolerance,this.keyboardEventTarget_=zt.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=zt.controls||function Jt(Ie){Ie=Ie||{};const _t=new z.A;return(void 0===Ie.zoom||Ie.zoom)&&_t.push(new re.A(Ie.zoomOptions)),(void 0===Ie.rotate||Ie.rotate)&&_t.push(new Dt.A(Ie.rotateOptions)),(void 0===Ie.attribution||Ie.attribution)&&_t.push(new Ct.A(Ie.attributionOptions)),_t}(),this.interactions=zt.interactions||(0,ye.N)({onFocusOnly:!0}),this.overlays_=zt.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Et.A(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(mt.A.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(mt.A.VIEW,this.handleViewChanged_),this.addChangeListener(mt.A.SIZE,this.handleSizeChanged_),this.addChangeListener(mt.A.TARGET,this.handleTargetChanged_),this.setProperties(zt.values);const xe=this;_t.view&&!(_t.view instanceof Ot.Ay)&&_t.view.then(function($t){xe.setView(new Ot.Ay($t))}),this.controls.addEventListener(Q.A.ADD,$t=>{$t.element.setMap(this)}),this.controls.addEventListener(Q.A.REMOVE,$t=>{$t.element.setMap(null)}),this.interactions.addEventListener(Q.A.ADD,$t=>{$t.element.setMap(this)}),this.interactions.addEventListener(Q.A.REMOVE,$t=>{$t.element.setMap(null)}),this.overlays_.addEventListener(Q.A.ADD,$t=>{this.addOverlayInternal_($t.element)}),this.overlays_.addEventListener(Q.A.REMOVE,$t=>{const ze=$t.element.getId();void 0!==ze&&delete this.overlayIdIndex_[ze.toString()],$t.element.setMap(null)}),this.controls.forEach($t=>{$t.setMap(this)}),this.interactions.forEach($t=>{$t.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(_t){this.getControls().push(_t)}addInteraction(_t){this.getInteractions().push(_t)}addLayer(_t){this.getLayerGroup().getLayers().push(_t)}handleLayerAdd_(_t){ge(_t.layer,this)}addOverlay(_t){this.getOverlays().push(_t)}addOverlayInternal_(_t){const zt=_t.getId();void 0!==zt&&(this.overlayIdIndex_[zt.toString()]=_t),_t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(_t,zt,xe){if(!this.frameState_||!this.renderer_)return;const $t=this.getCoordinateFromPixelInternal(_t);return this.renderer_.forEachFeatureAtCoordinate($t,this.frameState_,void 0!==(xe=void 0!==xe?xe:{}).hitTolerance?xe.hitTolerance:0,!1!==xe.checkWrapped,zt,null,void 0!==xe.layerFilter?xe.layerFilter:M.rT,null)}getFeaturesAtPixel(_t,zt){const xe=[];return this.forEachFeatureAtPixel(_t,function($t){xe.push($t)},zt),xe}getAllLayers(){const _t=[];return function zt(xe){xe.forEach(function($t){$t instanceof E.A?zt($t.getLayers()):_t.push($t)})}(this.getLayers()),_t}hasFeatureAtPixel(_t,zt){if(!this.frameState_||!this.renderer_)return!1;const xe=this.getCoordinateFromPixelInternal(_t);return this.renderer_.hasFeatureAtCoordinate(xe,this.frameState_,void 0!==(zt=void 0!==zt?zt:{}).hitTolerance?zt.hitTolerance:0,!1!==zt.checkWrapped,void 0!==zt.layerFilter?zt.layerFilter:M.rT,null)}getEventCoordinate(_t){return this.getCoordinateFromPixel(this.getEventPixel(_t))}getEventCoordinateInternal(_t){return this.getCoordinateFromPixelInternal(this.getEventPixel(_t))}getEventPixel(_t){const xe=this.viewport_.getBoundingClientRect(),$t=this.getSize(),si="changedTouches"in _t?_t.changedTouches[0]:_t;return[(si.clientX-xe.left)/(xe.width/$t[0]),(si.clientY-xe.top)/(xe.height/$t[1])]}getTarget(){return this.get(mt.A.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(_t){return(0,_e.te)(this.getCoordinateFromPixelInternal(_t),this.getView().getProjection())}getCoordinateFromPixelInternal(_t){const zt=this.frameState_;return zt?(0,I.Bb)(zt.pixelToCoordinateTransform,_t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(_t){const zt=this.overlayIdIndex_[_t.toString()];return void 0!==zt?zt:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(mt.A.LAYERGROUP)}setLayers(_t){const zt=this.getLayerGroup();if(_t instanceof z.A)return void zt.setLayers(_t);const xe=zt.getLayers();xe.clear(),xe.extend(_t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const _t=this.getLayerGroup().getLayerStatesArray();for(let zt=0,xe=_t.length;zt<xe;++zt){const $t=_t[zt];if(!$t.visible)continue;const ze=$t.layer.getRenderer();if(ze&&!ze.ready)return!0;const Xe=$t.layer.getSource();if(Xe&&Xe.loading)return!0}return!1}getPixelFromCoordinate(_t){const zt=(0,_e.Ad)(_t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(zt)}getPixelFromCoordinateInternal(_t){const zt=this.frameState_;return zt?(0,I.Bb)(zt.coordinateToPixelTransform,_t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(mt.A.SIZE)}getView(){return this.get(mt.A.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const _t=this.getTargetElement();return _t?_t.ownerDocument:document}getTilePriority(_t,zt,xe,$t){return(0,Et.z)(this.frameState_,_t,zt,xe,$t)}handleBrowserEvent(_t,zt){const xe=new R(zt=zt||_t.type,this,_t);this.handleMapBrowserEvent(xe)}handleMapBrowserEvent(_t){if(!this.frameState_)return;const zt=_t.originalEvent,xe=zt.type;if(xe===T.A.POINTERDOWN||xe===P.A.WHEEL||xe===P.A.KEYDOWN){const $t=this.getOwnerDocument(),ze=this.viewport_.getRootNode?this.viewport_.getRootNode():$t,Xe=zt.target;if(this.overlayContainerStopEvent_.contains(Xe)||!(ze===$t?$t.documentElement:ze).contains(Xe))return}if(_t.frameState=this.frameState_,!1!==this.dispatchEvent(_t)){const $t=this.getInteractions().getArray().slice();for(let ze=$t.length-1;ze>=0;ze--){const Xe=$t[ze];if(Xe.getMap()===this&&Xe.getActive()&&this.getTargetElement()&&(!Xe.handleEvent(_t)||_t.propagationStopped))break}}}handlePostRender(){const _t=this.frameState_,zt=this.tileQueue_;if(!zt.isEmpty()){let $t=this.maxTilesLoading_,ze=$t;if(_t){const Xe=_t.viewHints;if(Xe[Nt.A.ANIMATING]||Xe[Nt.A.INTERACTING]){const si=Date.now()-_t.time>8;$t=si?0:8,ze=si?0:2}}zt.getTilesLoading()<$t&&(zt.reprioritize(),zt.loadMoreTiles($t,ze))}_t&&this.renderer_&&!_t.animate&&(!0===this.renderComplete_?(this.hasListener(r.A.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(r.A.RENDERCOMPLETE,_t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new A(ht.A.LOADEND,this,_t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new A(ht.A.LOADSTART,this,_t))));const xe=this.postRenderFunctions_;for(let $t=0,ze=xe.length;$t<ze;++$t)xe[$t](this,_t);xe.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let xe=0,$t=this.targetChangeHandlerKeys_.length;xe<$t;++xe)(0,v.JH)(this.targetChangeHandlerKeys_[xe]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(P.A.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(P.A.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,F.bf)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const xe=this.targetElement_.getRootNode();xe instanceof ShadowRoot&&this.resizeObserver_.unobserve(xe.host),this.setSize(void 0)}const _t=this.getTarget(),zt="string"==typeof _t?document.getElementById(_t):_t;if(this.targetElement_=zt,zt){zt.appendChild(this.viewport_),this.renderer_||(this.renderer_=new X(this)),this.mapBrowserEventHandler_=new J(this,this.moveTolerance_);for(const ze in x.A)this.mapBrowserEventHandler_.addEventListener(x.A[ze],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(P.A.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(P.A.WHEEL,this.boundHandleBrowserEvent_,!!tt.FT&&{passive:!1});const xe=this.keyboardEventTarget_?this.keyboardEventTarget_:zt;this.targetChangeHandlerKeys_=[(0,v.KT)(xe,P.A.KEYDOWN,this.handleBrowserEvent,this),(0,v.KT)(xe,P.A.KEYPRESS,this.handleBrowserEvent,this)];const $t=zt.getRootNode();$t instanceof ShadowRoot&&this.resizeObserver_.observe($t.host),this.resizeObserver_.observe(zt)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,v.JH)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,v.JH)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const _t=this.getView();_t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=(0,v.KT)(_t,d.A.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,v.KT)(_t,P.A.CHANGE,this.handleViewPropertyChanged_,this),_t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(v.JH),this.layerGroupPropertyListenerKeys_=null);const _t=this.getLayerGroup();_t&&(this.handleLayerAdd_(new E.i("addlayer",_t)),this.layerGroupPropertyListenerKeys_=[(0,v.KT)(_t,d.A.PROPERTYCHANGE,this.render,this),(0,v.KT)(_t,P.A.CHANGE,this.render,this),(0,v.KT)(_t,"addlayer",this.handleLayerAdd_,this),(0,v.KT)(_t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const _t=this.getLayerGroup().getLayerStatesArray();for(let zt=0,xe=_t.length;zt<xe;++zt){const $t=_t[zt].layer;$t.hasRenderer()&&$t.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(_t){return this.getControls().remove(_t)}removeInteraction(_t){return this.getInteractions().remove(_t)}removeLayer(_t){return this.getLayerGroup().getLayers().remove(_t)}handleLayerRemove_(_t){Vt(_t.layer)}removeOverlay(_t){return this.getOverlays().remove(_t)}renderFrame_(_t){const zt=this.getSize(),xe=this.getView(),$t=this.frameState_;let ze=null;if(void 0!==zt&&(0,ct.Ie)(zt)&&xe&&xe.isDef()){const Xe=xe.getHints(this.frameState_?this.frameState_.viewHints:void 0),si=xe.getState();if(ze={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:(0,y.Bg)(si.center,si.resolution,si.rotation,zt),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:zt,tileQueue:this.tileQueue_,time:_t,usedTiles:{},viewState:si,viewHints:Xe,wantedTiles:{},mapId:(0,w.v6)(this),renderTargets:{}},si.nextCenter&&si.nextResolution){const hi=isNaN(si.nextRotation)?si.rotation:si.nextRotation;ze.nextExtent=(0,y.Bg)(si.nextCenter,si.nextResolution,hi,zt)}}this.frameState_=ze,this.renderer_.renderFrame(ze),ze&&(ze.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,ze.postRenderFunctions),$t&&(!this.previousExtent_||!(0,y.Im)(this.previousExtent_)&&!(0,y.aI)(ze.extent,this.previousExtent_))&&(this.dispatchEvent(new A(ht.A.MOVESTART,this,$t)),this.previousExtent_=(0,y.aZ)(this.previousExtent_)),this.previousExtent_&&!ze.viewHints[Nt.A.ANIMATING]&&!ze.viewHints[Nt.A.INTERACTING]&&!(0,y.aI)(ze.extent,this.previousExtent_)&&(this.dispatchEvent(new A(ht.A.MOVEEND,this,ze)),(0,y.o8)(ze.extent,this.previousExtent_))),this.dispatchEvent(new A(ht.A.POSTRENDER,this,ze)),this.renderComplete_=this.hasListener(ht.A.LOADSTART)||this.hasListener(ht.A.LOADEND)||this.hasListener(r.A.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(_t){const zt=this.getLayerGroup();zt&&this.handleLayerRemove_(new E.i("removelayer",zt)),this.set(mt.A.LAYERGROUP,_t)}setSize(_t){this.set(mt.A.SIZE,_t)}setTarget(_t){this.set(mt.A.TARGET,_t)}setView(_t){if(!_t||_t instanceof Ot.Ay)return void this.set(mt.A.VIEW,_t);this.set(mt.A.VIEW,new Ot.Ay);const zt=this;_t.then(function(xe){zt.setView(new Ot.Ay(xe))})}updateSize(){const _t=this.getTargetElement();let zt;if(_t){const $t=getComputedStyle(_t),ze=_t.offsetWidth-parseFloat($t.borderLeftWidth)-parseFloat($t.paddingLeft)-parseFloat($t.paddingRight)-parseFloat($t.borderRightWidth),Xe=_t.offsetHeight-parseFloat($t.borderTopWidth)-parseFloat($t.paddingTop)-parseFloat($t.paddingBottom)-parseFloat($t.borderBottomWidth);!isNaN(ze)&&!isNaN(Xe)&&(zt=[ze,Xe],!(0,ct.Ie)(zt)&&(_t.offsetWidth||_t.offsetHeight||_t.getClientRects().length)&&(0,Gt.R8)("No map visible because the map container's width or height are 0."))}const xe=this.getSize();zt&&(!xe||!(0,oe.aI)(zt,xe))&&(this.setSize(zt),this.updateViewportSize_(zt))}updateViewportSize_(_t){const zt=this.getView();zt&&zt.setViewportSize(_t)}}},1469:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>z});var Y=s(6621);const z={SINGLECLICK:"singleclick",CLICK:Y.A.CLICK,DBLCLICK:Y.A.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},5281:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},388:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},9568:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>I});var Y=s(3805),z=s(6058),Q=s(6166),$=s(2383),L=s(9330);class M extends Y.Ay{constructor(m,u,o){super(m),this.key=u,this.oldValue=o}}const I=class w extends Q.A{constructor(m){super(),(0,$.v6)(this),this.values_=null,void 0!==m&&this.setProperties(m)}get(m){let u;return this.values_&&this.values_.hasOwnProperty(m)&&(u=this.values_[m]),u}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(m,u){let o;o=`change:${m}`,this.hasListener(o)&&this.dispatchEvent(new M(o,m,u)),o=z.A.PROPERTYCHANGE,this.hasListener(o)&&this.dispatchEvent(new M(o,m,u))}addChangeListener(m,u){this.addEventListener(`change:${m}`,u)}removeChangeListener(m,u){this.removeEventListener(`change:${m}`,u)}set(m,u,o){const i=this.values_||(this.values_={});if(o)i[m]=u;else{const l=i[m];i[m]=u,l!==u&&this.notify(m,l)}}setProperties(m,u){for(const o in m)this.set(o,m[o],u)}applyProperties(m){m.values_&&Object.assign(this.values_||(this.values_={}),m.values_)}unset(m,u){if(this.values_&&m in this.values_){const o=this.values_[m];delete this.values_[m],(0,L.p)(this.values_)&&(this.values_=null),u||this.notify(m,o)}}}},6058:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={PROPERTYCHANGE:"propertychange"}},6166:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>M,e:()=>L});var Y=s(1884),z=s(6621),Q=s(2614);function L(w){if(Array.isArray(w))for(let I=0,y=w.length;I<y;++I)(0,Q.JH)(w[I]);else(0,Q.JH)(w)}const M=class $ extends Y.A{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(z.A.CHANGE)}getRevision(){return this.revision_}onInternal(I,y){if(Array.isArray(I)){const m=I.length,u=new Array(m);for(let o=0;o<m;++o)u[o]=(0,Q.KT)(this,I[o],y);return u}return(0,Q.KT)(this,I,y)}onceInternal(I,y){let m;if(Array.isArray(I)){const u=I.length;m=new Array(u);for(let o=0;o<u;++o)m[o]=(0,Q.Jz)(this,I[o],y)}else m=(0,Q.Jz)(this,I,y);return y.ol_key=m,m}unInternal(I,y){const m=y.ol_key;if(m)L(m);else if(Array.isArray(I))for(let u=0,o=I.length;u<o;++u)this.removeEventListener(I[u],y);else this.removeEventListener(I,y)}}},5227:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>y});var Y=s(9568),z=s(5281),Q=s(1776),$=s(8507),L=s(2614),M=s(5551);const y=class I extends Y.A{constructor(u){super(),this.options=u,this.id=u.id,this.insertFirst=void 0===u.insertFirst||u.insertFirst,this.stopEvent=void 0===u.stopEvent||u.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==u.className?u.className:"ol-overlay-container "+Q.Q5,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===u.autoPan?{}:u.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==u.element&&this.setElement(u.element),this.setOffset(void 0!==u.offset?u.offset:[0,0]),this.setPositioning(u.positioning||"top-left"),void 0!==u.position&&this.setPosition(u.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){(0,M.gS)(this.element);const u=this.getElement();u&&this.element.appendChild(u)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,M.bf)(this.element),(0,L.JH)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const u=this.getMap();if(u){this.mapPostrenderListenerKey=(0,L.KT)(u,z.A.POSTRENDER,this.render,this),this.updatePixelPosition();const o=this.stopEvent?u.getOverlayContainerStopEvent():u.getOverlayContainer();this.insertFirst?o.insertBefore(this.element,o.childNodes[0]||null):o.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(u){this.set("element",u)}setMap(u){this.set("map",u)}setOffset(u){this.set("offset",u)}setPosition(u){this.set("position",u)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(u){const o=this.getMap();if(!o||!o.getTargetElement()||!this.get("position"))return;const i=this.getRect(o.getTargetElement(),o.getSize()),l=this.getElement(),n=this.getRect(l,[(0,M.Gq)(l),(0,M.DK)(l)]),d=void 0===(u=u||{}).margin?20:u.margin;if(!(0,$.ms)(i,n)){const f=n[0]-i[0],r=i[2]-n[2],C=n[1]-i[1],_=i[3]-n[3],v=[0,0];if(f<0?v[0]=f-d:r<0&&(v[0]=Math.abs(r)+d),C<0?v[1]=C-d:_<0&&(v[1]=Math.abs(_)+d),0!==v[0]||0!==v[1]){const F=o.getView().getCenterInternal(),O=o.getPixelFromCoordinateInternal(F);if(!O)return;const X=[O[0]+v[0],O[1]+v[1]],P=u.animation||{};o.getView().animateInternal({center:o.getCoordinateFromPixelInternal(X),duration:P.duration,easing:P.easing})}}}getRect(u,o){const i=u.getBoundingClientRect(),l=i.left+window.pageXOffset,n=i.top+window.pageYOffset;return[l,n,l+o[0],n+o[1]]}setPositioning(u){this.set("positioning",u)}setVisible(u){this.rendered.visible!==u&&(this.element.style.display=u?"":"none",this.rendered.visible=u)}updatePixelPosition(){const u=this.getMap(),o=this.getPosition();if(!u||!u.isRendered()||!o)return void this.setVisible(!1);const i=u.getPixelFromCoordinate(o),l=u.getSize();this.updateRenderedPosition(i,l)}updateRenderedPosition(u,o){const i=this.element.style,l=this.getOffset(),n=this.getPositioning();this.setVisible(!0);let r="0%",C="0%";"bottom-right"==n||"center-right"==n||"top-right"==n?r="-100%":("bottom-center"==n||"center-center"==n||"top-center"==n)&&(r="-50%"),"bottom-left"==n||"bottom-center"==n||"bottom-right"==n?C="-100%":("center-left"==n||"center-center"==n||"center-right"==n)&&(C="-50%");const _=`translate(${r}, ${C}) translate(${Math.round(u[0]+l[0])+"px"}, ${Math.round(u[1]+l[1])+"px"})`;this.rendered.transform_!=_&&(this.rendered.transform_=_,i.transform=_)}getOptions(){return this.options}}},7783:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>w});var Y=s(1884),z=s(6621),Q=s(9806),$=s(2383),L=s(6378);const w=class M extends Y.A{constructor(y,m,u){super(),u=u||{},this.tileCoord=y,this.state=m,this.interimTile=null,this.key="",this.transition_=void 0===u.transition?250:u.transition,this.transitionStarts_={},this.interpolate=!!u.interpolate}changed(){this.dispatchEvent(z.A.CHANGE)}release(){this.state===Q.A.ERROR&&this.setState(Q.A.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let y=this.interimTile;if(!y)return this;do{if(y.getState()==Q.A.LOADED)return this.transition_=0,y;y=y.interimTile}while(y);return this}refreshInterimChain(){let y=this.interimTile;if(!y)return;let m=this;do{if(y.getState()==Q.A.LOADED){y.interimTile=null;break}y.getState()==Q.A.LOADING?m=y:y.getState()==Q.A.IDLE?m.interimTile=y.interimTile:m=y,y=m.interimTile}while(y)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(y){if(this.state!==Q.A.ERROR&&this.state>y)throw new Error("Tile load sequence violation");this.state=y,this.changed()}load(){(0,$.b0)()}getAlpha(y,m){if(!this.transition_)return 1;let u=this.transitionStarts_[y];if(u){if(-1===u)return 1}else u=m,this.transitionStarts_[y]=u;const o=m-u+1e3/60;return o>=this.transition_?1:(0,L.a6)(o/this.transition_)}inTransition(y){return!!this.transition_&&-1!==this.transitionStarts_[y]}endTransition(y){this.transition_&&(this.transitionStarts_[y]=-1)}}},9189:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>$});var Y=s(2529),z=s(6690);const $=class Q extends Y.A{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(M){for(;this.canExpireCache()&&!(this.peekLast().getKey()in M);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const M=this.peekFirstKey(),I=(0,z.K)(M)[0];this.forEach(y=>{y.tileCoord[0]!==I&&(this.remove((0,z.i7)(y.tileCoord)),y.release())})}}},1334:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>y,z:()=>m});var Y=s(6621),z=s(5940),Q=s(9330);const $=1/0,M=class L{constructor(o,i){this.priorityFunction_=o,this.keyFunction_=i,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,Q.I)(this.queuedElements_)}dequeue(){const o=this.elements_,i=this.priorities_,l=o[0];1==o.length?(o.length=0,i.length=0):(o[0]=o.pop(),i[0]=i.pop(),this.siftUp_(0));const n=this.keyFunction_(l);return delete this.queuedElements_[n],l}enqueue(o){(0,z.v)(!(this.keyFunction_(o)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const i=this.priorityFunction_(o);return i!=$&&(this.elements_.push(o),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(o)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(o){return 2*o+1}getRightChildIndex_(o){return 2*o+2}getParentIndex_(o){return o-1>>1}heapify_(){let o;for(o=(this.elements_.length>>1)-1;o>=0;o--)this.siftUp_(o)}isEmpty(){return 0===this.elements_.length}isKeyQueued(o){return o in this.queuedElements_}isQueued(o){return this.isKeyQueued(this.keyFunction_(o))}siftUp_(o){const i=this.elements_,l=this.priorities_,n=i.length,d=i[o],f=l[o],r=o;for(;o<n>>1;){const C=this.getLeftChildIndex_(o),_=this.getRightChildIndex_(o),v=_<n&&l[_]<l[C]?_:C;i[o]=i[v],l[o]=l[v],o=v}i[o]=d,l[o]=f,this.siftDown_(r,o)}siftDown_(o,i){const l=this.elements_,n=this.priorities_,d=l[i],f=n[i];for(;i>o;){const r=this.getParentIndex_(i);if(!(n[r]>f))break;l[i]=l[r],n[i]=n[r],i=r}l[i]=d,n[i]=f}reprioritize(){const o=this.priorityFunction_,i=this.elements_,l=this.priorities_;let n=0;const d=i.length;let f,r,C;for(r=0;r<d;++r)f=i[r],C=o(f),C==$?delete this.queuedElements_[this.keyFunction_(f)]:(l[n]=C,i[n++]=f);i.length=n,l.length=n,this.heapify_()}};var w=s(9806);const y=class I extends M{constructor(o,i){super(function(l){return o.apply(null,l)},function(l){return l[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(o){const i=super.enqueue(o);return i&&o[0].addEventListener(Y.A.CHANGE,this.boundHandleTileChange_),i}getTilesLoading(){return this.tilesLoading_}handleTileChange(o){const i=o.target,l=i.getState();if(l===w.A.LOADED||l===w.A.ERROR||l===w.A.EMPTY){l!==w.A.ERROR&&i.removeEventListener(Y.A.CHANGE,this.boundHandleTileChange_);const n=i.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(o,i){let n,d,f,l=0;for(;this.tilesLoading_<o&&l<i&&this.getCount()>0;)d=this.dequeue()[0],f=d.getKey(),n=d.getState(),n===w.A.IDLE&&!(f in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[f]=!0,++this.tilesLoading_,++l,d.load())}};function m(u,o,i,l,n){if(!u||!(i in u.wantedTiles)||!u.wantedTiles[i][o.getKey()])return $;const d=u.viewState.center,f=l[0]-d[0],r=l[1]-d[1];return 65536*Math.log(n)+Math.sqrt(f*f+r*r)/n}},6990:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Q,N:()=>z});class Y{constructor(L,M,w,I){this.minX=L,this.maxX=M,this.minY=w,this.maxY=I}contains(L){return this.containsXY(L[1],L[2])}containsTileRange(L){return this.minX<=L.minX&&L.maxX<=this.maxX&&this.minY<=L.minY&&L.maxY<=this.maxY}containsXY(L,M){return this.minX<=L&&L<=this.maxX&&this.minY<=M&&M<=this.maxY}equals(L){return this.minX==L.minX&&this.minY==L.minY&&this.maxX==L.maxX&&this.maxY==L.maxY}extend(L){L.minX<this.minX&&(this.minX=L.minX),L.maxX>this.maxX&&(this.maxX=L.maxX),L.minY<this.minY&&(this.minY=L.minY),L.maxY>this.maxY&&(this.maxY=L.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(L){return this.minX<=L.maxX&&this.maxX>=L.minX&&this.minY<=L.maxY&&this.maxY>=L.minY}}function z($,L,M,w,I){return void 0!==I?(I.minX=$,I.maxX=L,I.minY=M,I.maxY=w,I):new Y($,L,M,w)}const Q=Y},9806:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},9100:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>$});var Y=s(7783),z=s(9806);const $=class Q extends Y.A{constructor(M,w,I,y,m,u){super(M,w,u),this.extent=null,this.format_=y,this.features_=null,this.projection=null,this.tileLoadFunction_=m,this.url_=I,this.key=I}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==z.A.IDLE&&(this.setState(z.A.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(M,w){this.setFeatures(M)}onError(){this.setState(z.A.ERROR)}setFeatures(M){this.features_=M,this.setState(z.A.LOADED)}setLoader(M){this.loader_=M}}},3980:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>D});var Y=s(9568),z=s(6631),Q=s(7903),$=s(3139),L=s(9325),M=s(1766),w=s(5085),I=s(5940),y=s(9973);function m(R,x,T){return function(U,tt,it,J,ht){if(!U)return;if(!tt&&!x)return U;const mt=x?0:it[0]*tt,Et=x?0:it[1]*tt,Ot=ht?ht[0]:0,Nt=ht?ht[1]:0;let ft=R[0]+mt/2+Ot,Ct=R[2]-mt/2+Ot,Dt=R[1]+Et/2+Nt,re=R[3]-Et/2+Nt;ft>Ct&&(ft=(Ct+ft)/2,Ct=ft),Dt>re&&(Dt=(re+Dt)/2,re=Dt);let Jt=(0,y.qE)(U[0],ft,Ct),ye=(0,y.qE)(U[1],Dt,re);if(J&&T&&tt){const oe=30*tt;Jt+=-oe*Math.log(1+Math.max(0,ft-U[0])/oe)+oe*Math.log(1+Math.max(0,U[0]-Ct)/oe),ye+=-oe*Math.log(1+Math.max(0,Dt-U[1])/oe)+oe*Math.log(1+Math.max(0,U[1]-re)/oe)}return[Jt,ye]}}function u(R){return R}var o=s(8507),i=s(2058);function l(R,x,T,U){const tt=(0,o.RG)(x)/T[0],it=(0,o.Oq)(x)/T[1];return U?Math.min(R,Math.max(tt,it)):Math.min(R,Math.min(tt,it))}function n(R,x,T){let U=Math.min(R,x);return U*=Math.log(1+50*Math.max(0,R/x-1))/50+1,T&&(U=Math.max(U,T),U/=Math.log(1+50*Math.max(0,T/R-1))/50+1),(0,y.qE)(U,T/2,2*x)}function r(R,x,T,U,tt){return T=void 0===T||T,function(it,J,ht,mt){if(void 0!==it){const Et=U?l(R,U,ht,tt):R;return T&&mt?n(it,Et,x):(0,y.qE)(it,x,Et)}}}var C=s(3066),_=s(6378),v=s(4157);function X(R,x){setTimeout(function(){R(x)},0)}function A(R,x,T,U,tt){const it=Math.cos(-tt);let J=Math.sin(-tt),ht=R[0]*it-R[1]*J,mt=R[1]*it+R[0]*J;return ht+=(x[0]/2-T[0])*U,mt+=(T[1]-x[1]/2)*U,J=-J,[ht*it-mt*J,mt*it+ht*J]}const D=class O extends Y.A{constructor(x){super(),x=Object.assign({},x),this.hints_=[0,0],this.animations_=[],this.projection_=(0,L.Av)(x.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,x.projection&&(0,L.RJ)(),x.center&&(x.center=(0,L.Ad)(x.center,this.projection_)),x.extent&&(x.extent=(0,L.SD)(x.extent,this.projection_)),this.applyOptions_(x)}applyOptions_(x){const T=Object.assign({},x);for(const ht in Q.A)delete T[ht];this.setProperties(T,!0);const U=function E(R){let x,T,U,J=void 0!==R.minZoom?R.minZoom:0,ht=void 0!==R.maxZoom?R.maxZoom:28;const mt=void 0!==R.zoomFactor?R.zoomFactor:2,Et=void 0!==R.multiWorld&&R.multiWorld,Ot=void 0===R.smoothResolutionConstraint||R.smoothResolutionConstraint,Nt=void 0!==R.showFullExtent&&R.showFullExtent,ft=(0,L.Av)(R.projection,"EPSG:3857"),Ct=ft.getExtent();let Dt=R.constrainOnlyCenter,re=R.extent;if(!Et&&!re&&ft.isGlobal()&&(Dt=!1,re=Ct),void 0!==R.resolutions){const Jt=R.resolutions;T=Jt[J],U=void 0!==Jt[ht]?Jt[ht]:Jt[Jt.length-1],x=R.constrainResolution?function d(R,x,T,U){return x=void 0===x||x,function(tt,it,J,ht){if(void 0!==tt){const mt=R[0],Et=R[R.length-1],Ot=T?l(mt,T,J,U):mt;if(ht)return x?n(tt,Ot,Et):(0,y.qE)(tt,Et,Ot);const Nt=Math.min(Ot,tt),ft=Math.floor((0,i.FT)(R,Nt,it));return R[ft]>Ot&&ft<R.length-1?R[ft+1]:R[ft]}}}(Jt,Ot,!Dt&&re,Nt):r(T,U,Ot,!Dt&&re,Nt)}else{const ye=(Ct?Math.max((0,o.RG)(Ct),(0,o.Oq)(Ct)):360*L.Ig.degrees/ft.getMetersPerUnit())/$.R/Math.pow(2,0),oe=ye/Math.pow(2,28);T=R.maxResolution,void 0!==T?J=0:T=ye/Math.pow(mt,J),U=R.minResolution,void 0===U&&(U=void 0!==R.maxZoom?void 0!==R.maxResolution?T/Math.pow(mt,ht):ye/Math.pow(mt,ht):oe),ht=J+Math.floor(Math.log(T/U)/Math.log(mt)),U=T/Math.pow(mt,ht-J),x=R.constrainResolution?function f(R,x,T,U,tt,it){return U=void 0===U||U,T=void 0!==T?T:0,function(J,ht,mt,Et){if(void 0!==J){const Ot=tt?l(x,tt,mt,it):x;if(Et)return U?n(J,Ot,T):(0,y.qE)(J,T,Ot);const Nt=1e-9,ft=Math.ceil(Math.log(x/Ot)/Math.log(R)-Nt),Ct=-ht*(.5-Nt)+.5,Dt=Math.min(Ot,J),re=Math.floor(Math.log(x/Dt)/Math.log(R)+Ct),Jt=Math.max(ft,re),ye=x/Math.pow(R,Jt);return(0,y.qE)(ye,T,Ot)}}}(mt,T,U,Ot,!Dt&&re,Nt):r(T,U,Ot,!Dt&&re,Nt)}return{constraint:x,maxResolution:T,minResolution:U,minZoom:J,zoomFactor:mt}}(x);this.maxResolution_=U.maxResolution,this.minResolution_=U.minResolution,this.zoomFactor_=U.zoomFactor,this.resolutions_=x.resolutions,this.padding_=x.padding,this.minZoom_=U.minZoom;const tt=function P(R){if(void 0!==R.extent)return m(R.extent,R.constrainOnlyCenter,void 0===R.smoothExtentConstraint||R.smoothExtentConstraint);const x=(0,L.Av)(R.projection,"EPSG:3857");if(!0!==R.multiWorld&&x.isGlobal()){const T=x.getExtent().slice();return T[0]=-1/0,T[2]=1/0,m(T,!1,!1)}return u}(x),it=U.constraint,J=function W(R){if(void 0===R.enableRotation||R.enableRotation){const T=R.constrainRotation;return void 0===T||!0===T?(0,C.cq)():!1===T?C.dv:"number"==typeof T?(0,C.a$)(T):C.dv}return C.b8}(x);this.constraints_={center:tt,resolution:it,rotation:J},this.setRotation(void 0!==x.rotation?x.rotation:0),this.setCenterInternal(void 0!==x.center?x.center:null),void 0!==x.resolution?this.setResolution(x.resolution):void 0!==x.zoom&&this.setZoom(x.zoom)}get padding(){return this.padding_}set padding(x){let T=this.padding_;this.padding_=x;const U=this.getCenterInternal();if(U){const tt=x||[0,0,0,0];T=T||[0,0,0,0];const it=this.getResolution();this.setCenterInternal([U[0]+it/2*(tt[3]-T[3]+T[1]-tt[1]),U[1]-it/2*(tt[0]-T[0]+T[2]-tt[2])])}}getUpdatedOptions_(x){const T=this.getProperties();return void 0!==T.resolution?T.resolution=this.getResolution():T.zoom=this.getZoom(),T.center=this.getCenterInternal(),T.rotation=this.getRotation(),Object.assign({},T,x)}animate(x){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const T=new Array(arguments.length);for(let U=0;U<T.length;++U){let tt=arguments[U];tt.center&&(tt=Object.assign({},tt),tt.center=(0,L.Ad)(tt.center,this.getProjection())),tt.anchor&&(tt=Object.assign({},tt),tt.anchor=(0,L.Ad)(tt.anchor,this.getProjection())),T[U]=tt}this.animateInternal.apply(this,T)}animateInternal(x){let U,T=arguments.length;T>1&&"function"==typeof arguments[T-1]&&(U=arguments[T-1],--T);let tt=0;for(;tt<T&&!this.isDef();++tt){const Ot=arguments[tt];Ot.center&&this.setCenterInternal(Ot.center),void 0!==Ot.zoom?this.setZoom(Ot.zoom):Ot.resolution&&this.setResolution(Ot.resolution),void 0!==Ot.rotation&&this.setRotation(Ot.rotation)}if(tt===T)return void(U&&X(U,!0));let it=Date.now(),J=this.targetCenter_.slice(),ht=this.targetResolution_,mt=this.targetRotation_;const Et=[];for(;tt<T;++tt){const Ot=arguments[tt],Nt={start:it,complete:!1,anchor:Ot.anchor,duration:void 0!==Ot.duration?Ot.duration:1e3,easing:Ot.easing||_.T9,callback:U};if(Ot.center&&(Nt.sourceCenter=J,Nt.targetCenter=Ot.center.slice(),J=Nt.targetCenter),void 0!==Ot.zoom?(Nt.sourceResolution=ht,Nt.targetResolution=this.getResolutionForZoom(Ot.zoom),ht=Nt.targetResolution):Ot.resolution&&(Nt.sourceResolution=ht,Nt.targetResolution=Ot.resolution,ht=Nt.targetResolution),void 0!==Ot.rotation){Nt.sourceRotation=mt;const ft=(0,y.xP)(Ot.rotation-mt+Math.PI,2*Math.PI)-Math.PI;Nt.targetRotation=mt+ft,mt=Nt.targetRotation}(R=Nt).sourceCenter&&R.targetCenter&&!(0,w.aI)(R.sourceCenter,R.targetCenter)||R.sourceResolution!==R.targetResolution||R.sourceRotation!==R.targetRotation?it+=Nt.duration:Nt.complete=!0,Et.push(Nt)}var R;this.animations_.push(Et),this.setHint(z.A.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[z.A.ANIMATING]>0}getInteracting(){return this.hints_[z.A.INTERACTING]>0}cancelAnimations(){let x;this.setHint(z.A.ANIMATING,-this.hints_[z.A.ANIMATING]);for(let T=0,U=this.animations_.length;T<U;++T){const tt=this.animations_[T];if(tt[0].callback&&X(tt[0].callback,!1),!x)for(let it=0,J=tt.length;it<J;++it){const ht=tt[it];if(!ht.complete){x=ht.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=x,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const x=Date.now();let T=!1;for(let U=this.animations_.length-1;U>=0;--U){const tt=this.animations_[U];let it=!0;for(let J=0,ht=tt.length;J<ht;++J){const mt=tt[J];if(mt.complete)continue;let Ot=mt.duration>0?(x-mt.start)/mt.duration:1;Ot>=1?(mt.complete=!0,Ot=1):it=!1;const Nt=mt.easing(Ot);if(mt.sourceCenter){const ft=mt.sourceCenter[0],Ct=mt.sourceCenter[1],Dt=mt.targetCenter[0],re=mt.targetCenter[1];this.nextCenter_=mt.targetCenter,this.targetCenter_=[ft+Nt*(Dt-ft),Ct+Nt*(re-Ct)]}if(mt.sourceResolution&&mt.targetResolution){const ft=1===Nt?mt.targetResolution:mt.sourceResolution+Nt*(mt.targetResolution-mt.sourceResolution);if(mt.anchor){const Ct=this.getViewportSize_(this.getRotation()),Dt=this.constraints_.resolution(ft,0,Ct,!0);this.targetCenter_=this.calculateCenterZoom(Dt,mt.anchor)}this.nextResolution_=mt.targetResolution,this.targetResolution_=ft,this.applyTargetState_(!0)}if(void 0!==mt.sourceRotation&&void 0!==mt.targetRotation){const ft=1===Nt?(0,y.xP)(mt.targetRotation+Math.PI,2*Math.PI)-Math.PI:mt.sourceRotation+Nt*(mt.targetRotation-mt.sourceRotation);if(mt.anchor){const Ct=this.constraints_.rotation(ft,!0);this.targetCenter_=this.calculateCenterRotate(Ct,mt.anchor)}this.nextRotation_=mt.targetRotation,this.targetRotation_=ft}if(this.applyTargetState_(!0),T=!0,!mt.complete)break}if(it){this.animations_[U]=null,this.setHint(z.A.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const J=tt[0].callback;J&&X(J,!0)}}this.animations_=this.animations_.filter(Boolean),T&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(x,T){let U;const tt=this.getCenterInternal();return void 0!==tt&&(U=[tt[0]-T[0],tt[1]-T[1]],(0,w.e$)(U,x-this.getRotation()),(0,w.WQ)(U,T)),U}calculateCenterZoom(x,T){let U;const tt=this.getCenterInternal(),it=this.getResolution();return void 0!==tt&&void 0!==it&&(U=[T[0]-x*(T[0]-tt[0])/it,T[1]-x*(T[1]-tt[1])/it]),U}getViewportSize_(x){const T=this.viewportSize_;if(x){const U=T[0],tt=T[1];return[Math.abs(U*Math.cos(x))+Math.abs(tt*Math.sin(x)),Math.abs(U*Math.sin(x))+Math.abs(tt*Math.cos(x))]}return T}setViewportSize(x){this.viewportSize_=Array.isArray(x)?x.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const x=this.getCenterInternal();return x&&(0,L.te)(x,this.getProjection())}getCenterInternal(){return this.get(Q.A.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(x){return void 0!==x?(x[0]=this.hints_[0],x[1]=this.hints_[1],x):this.hints_.slice()}calculateExtent(x){const T=this.calculateExtentInternal(x);return(0,L.JR)(T,this.getProjection())}calculateExtentInternal(x){x=x||this.getViewportSizeMinusPadding_();const T=this.getCenterInternal();(0,I.v)(T,"The view center is not defined");const U=this.getResolution();(0,I.v)(void 0!==U,"The view resolution is not defined");const tt=this.getRotation();return(0,I.v)(void 0!==tt,"The view rotation is not defined"),(0,o.Bg)(T,U,tt,x)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(x){this.applyOptions_(this.getUpdatedOptions_({maxZoom:x}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(x){this.applyOptions_(this.getUpdatedOptions_({minZoom:x}))}setConstrainResolution(x){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:x}))}getProjection(){return this.projection_}getResolution(){return this.get(Q.A.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(x,T){return this.getResolutionForExtentInternal((0,L.SD)(x,this.getProjection()),T)}getResolutionForExtentInternal(x,T){T=T||this.getViewportSizeMinusPadding_();const U=(0,o.RG)(x)/T[0],tt=(0,o.Oq)(x)/T[1];return Math.max(U,tt)}getResolutionForValueFunction(x){x=x||2;const T=this.getConstrainedResolution(this.maxResolution_),tt=Math.log(T/this.minResolution_)/Math.log(x);return function(it){return T/Math.pow(x,it*tt)}}getRotation(){return this.get(Q.A.ROTATION)}getValueForResolutionFunction(x){const T=Math.log(x||2),U=this.getConstrainedResolution(this.maxResolution_),it=Math.log(U/this.minResolution_)/T;return function(J){return Math.log(U/J)/T/it}}getViewportSizeMinusPadding_(x){let T=this.getViewportSize_(x);const U=this.padding_;return U&&(T=[T[0]-U[1]-U[3],T[1]-U[0]-U[2]]),T}getState(){const x=this.getProjection(),T=this.getResolution(),U=this.getRotation();let tt=this.getCenterInternal();const it=this.padding_;if(it){const J=this.getViewportSizeMinusPadding_();tt=A(tt,this.getViewportSize_(),[J[0]/2+it[3],J[1]/2+it[0]],T,U)}return{center:tt.slice(0),projection:void 0!==x?x:null,resolution:T,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:U,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let x;const T=this.getResolution();return void 0!==T&&(x=this.getZoomForResolution(T)),x}getZoomForResolution(x){let U,tt,T=this.minZoom_||0;if(this.resolutions_){const it=(0,i.FT)(this.resolutions_,x,1);T=it,U=this.resolutions_[it],tt=it==this.resolutions_.length-1?2:U/this.resolutions_[it+1]}else U=this.maxResolution_,tt=this.zoomFactor_;return T+Math.log(U/x)/Math.log(tt)}getResolutionForZoom(x){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const T=(0,y.qE)(Math.floor(x),0,this.resolutions_.length-2);return this.resolutions_[T]/Math.pow(this.resolutions_[T]/this.resolutions_[T+1],(0,y.qE)(x-T,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,x-this.minZoom_)}fit(x,T){let U;if((0,I.v)(Array.isArray(x)||"function"==typeof x.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(x)){(0,I.v)(!(0,o.Im)(x),"Cannot fit empty extent provided as `geometry`");const tt=(0,L.SD)(x,this.getProjection());U=(0,v.VY)(tt)}else if("Circle"===x.getType()){const tt=(0,L.SD)(x.getExtent(),this.getProjection());U=(0,v.VY)(tt),U.rotate(this.getRotation(),(0,o.q1)(tt))}else{const tt=(0,L.Tf)();U=tt?x.clone().transform(tt,this.getProjection()):x}this.fitInternal(U,T)}rotatedExtentForGeometry(x){const T=this.getRotation(),U=Math.cos(T),tt=Math.sin(-T),it=x.getFlatCoordinates(),J=x.getStride();let ht=1/0,mt=1/0,Et=-1/0,Ot=-1/0;for(let Nt=0,ft=it.length;Nt<ft;Nt+=J){const Ct=it[Nt]*U-it[Nt+1]*tt,Dt=it[Nt]*tt+it[Nt+1]*U;ht=Math.min(ht,Ct),mt=Math.min(mt,Dt),Et=Math.max(Et,Ct),Ot=Math.max(Ot,Dt)}return[ht,mt,Et,Ot]}fitInternal(x,T){let U=(T=T||{}).size;U||(U=this.getViewportSizeMinusPadding_());const tt=void 0!==T.padding?T.padding:[0,0,0,0],it=void 0!==T.nearest&&T.nearest;let J;J=void 0!==T.minResolution?T.minResolution:void 0!==T.maxZoom?this.getResolutionForZoom(T.maxZoom):0;const ht=this.rotatedExtentForGeometry(x);let mt=this.getResolutionForExtentInternal(ht,[U[0]-tt[1]-tt[3],U[1]-tt[0]-tt[2]]);mt=isNaN(mt)?J:Math.max(mt,J),mt=this.getConstrainedResolution(mt,it?0:1);const Et=this.getRotation(),Ot=Math.sin(Et),Nt=Math.cos(Et),ft=(0,o.q1)(ht);ft[0]+=(tt[1]-tt[3])/2*mt,ft[1]+=(tt[0]-tt[2])/2*mt;const re=this.getConstrainedCenter([ft[0]*Nt-ft[1]*Ot,ft[1]*Nt+ft[0]*Ot],mt),Jt=T.callback?T.callback:M.tV;void 0!==T.duration?this.animateInternal({resolution:mt,center:re,duration:T.duration,easing:T.easing},Jt):(this.targetResolution_=mt,this.targetCenter_=re,this.applyTargetState_(!1,!0),X(Jt,!0))}centerOn(x,T,U){this.centerOnInternal((0,L.Ad)(x,this.getProjection()),T,U)}centerOnInternal(x,T,U){this.setCenterInternal(A(x,T,U,this.getResolution(),this.getRotation()))}calculateCenterShift(x,T,U,tt){let it;const J=this.padding_;if(J&&x){const ht=this.getViewportSizeMinusPadding_(-U),mt=A(x,tt,[ht[0]/2+J[3],ht[1]/2+J[0]],T,U);it=[x[0]-mt[0],x[1]-mt[1]]}return it}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(x){const T=(0,L.te)(this.targetCenter_,this.getProjection());this.setCenter([T[0]+x[0],T[1]+x[1]])}adjustCenterInternal(x){const T=this.targetCenter_;this.setCenterInternal([T[0]+x[0],T[1]+x[1]])}adjustResolution(x,T){T=T&&(0,L.Ad)(T,this.getProjection()),this.adjustResolutionInternal(x,T)}adjustResolutionInternal(x,T){const U=this.getAnimating()||this.getInteracting(),tt=this.getViewportSize_(this.getRotation()),it=this.constraints_.resolution(this.targetResolution_*x,0,tt,U);T&&(this.targetCenter_=this.calculateCenterZoom(it,T)),this.targetResolution_*=x,this.applyTargetState_()}adjustZoom(x,T){this.adjustResolution(Math.pow(this.zoomFactor_,-x),T)}adjustRotation(x,T){T&&(T=(0,L.Ad)(T,this.getProjection())),this.adjustRotationInternal(x,T)}adjustRotationInternal(x,T){const U=this.getAnimating()||this.getInteracting(),tt=this.constraints_.rotation(this.targetRotation_+x,U);T&&(this.targetCenter_=this.calculateCenterRotate(tt,T)),this.targetRotation_+=x,this.applyTargetState_()}setCenter(x){this.setCenterInternal(x&&(0,L.Ad)(x,this.getProjection()))}setCenterInternal(x){this.targetCenter_=x,this.applyTargetState_()}setHint(x,T){return this.hints_[x]+=T,this.changed(),this.hints_[x]}setResolution(x){this.targetResolution_=x,this.applyTargetState_()}setRotation(x){this.targetRotation_=x,this.applyTargetState_()}setZoom(x){this.setResolution(this.getResolutionForZoom(x))}applyTargetState_(x,T){const U=this.getAnimating()||this.getInteracting()||T,tt=this.constraints_.rotation(this.targetRotation_,U),it=this.getViewportSize_(tt),J=this.constraints_.resolution(this.targetResolution_,0,it,U),ht=this.constraints_.center(this.targetCenter_,J,it,U,this.calculateCenterShift(this.targetCenter_,J,tt,it));this.get(Q.A.ROTATION)!==tt&&this.set(Q.A.ROTATION,tt),this.get(Q.A.RESOLUTION)!==J&&(this.set(Q.A.RESOLUTION,J),this.set("zoom",this.getZoom(),!0)),(!ht||!this.get(Q.A.CENTER)||!(0,w.aI)(this.get(Q.A.CENTER),ht))&&this.set(Q.A.CENTER,ht),this.getAnimating()&&!x&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(x,T,U){x=void 0!==x?x:200;const tt=T||0,it=this.constraints_.rotation(this.targetRotation_),J=this.getViewportSize_(it),ht=this.constraints_.resolution(this.targetResolution_,tt,J),mt=this.constraints_.center(this.targetCenter_,ht,J,!1,this.calculateCenterShift(this.targetCenter_,ht,it,J));if(0===x&&!this.cancelAnchor_)return this.targetResolution_=ht,this.targetRotation_=it,this.targetCenter_=mt,void this.applyTargetState_();U=U||(0===x?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==ht||this.getRotation()!==it||!this.getCenterInternal()||!(0,w.aI)(this.getCenterInternal(),mt))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:it,center:mt,resolution:ht,duration:x,easing:_.vT,anchor:U}))}beginInteraction(){this.resolveConstraints(0),this.setHint(z.A.INTERACTING,1)}endInteraction(x,T,U){U=U&&(0,L.Ad)(U,this.getProjection()),this.endInteractionInternal(x,T,U)}endInteractionInternal(x,T,U){this.getInteracting()&&(this.setHint(z.A.INTERACTING,-1),this.resolveConstraints(x,T,U))}getConstrainedCenter(x,T){const U=this.getViewportSize_(this.getRotation());return this.constraints_.center(x,T||this.getResolution(),U)}getConstrainedZoom(x,T){const U=this.getResolutionForZoom(x);return this.getZoomForResolution(this.getConstrainedResolution(U,T))}getConstrainedResolution(x,T){T=T||0;const U=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(x,T,U)}}},6631:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={ANIMATING:0,INTERACTING:1}},7903:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},2058:(le,pt,s)=>{"use strict";function Y(u,o,i){let l,n;i=i||z;let d=0,f=u.length,r=!1;for(;d<f;)l=d+(f-d>>1),n=+i(u[l],o),n<0?d=l+1:(f=l,r=!n);return r?d:~d}function z(u,o){return u>o?1:u<o?-1:0}function Q(u,o){return u<o?1:u>o?-1:0}function $(u,o,i){if(u[0]<=o)return 0;const l=u.length;if(o<=u[l-1])return l-1;if("function"==typeof i){for(let n=1;n<l;++n){const d=u[n];if(d===o)return n;if(d<o)return i(o,u[n-1],d)>0?n-1:n}return l-1}if(i>0){for(let n=1;n<l;++n)if(u[n]<o)return n-1;return l-1}if(i<0){for(let n=1;n<l;++n)if(u[n]<=o)return n;return l-1}for(let n=1;n<l;++n){if(u[n]==o)return n;if(u[n]<o)return u[n-1]-o<o-u[n]?n-1:n}return l-1}function L(u,o,i){for(;o<i;){const l=u[o];u[o]=u[i],u[i]=l,++o,--i}}function M(u,o){const i=Array.isArray(o)?o:[o],l=i.length;for(let n=0;n<l;n++)u[u.length]=i[n]}function I(u,o){const i=u.length;if(i!==o.length)return!1;for(let l=0;l<i;l++)if(u[l]!==o[l])return!1;return!0}function m(u,o,i){const l=o||z;return u.every(function(n,d){if(0===d)return!0;const f=l(u[d-1],n);return!(f>0||i&&0===f)})}s.d(pt,{El:()=>Y,FT:()=>$,V_:()=>z,WC:()=>m,X$:()=>M,aI:()=>I,gI:()=>L,rG:()=>Q})},5940:(le,pt,s)=>{"use strict";function Y(z,Q){if(!z)throw new Error(Q)}s.d(pt,{v:()=>Y})},1962:(le,pt,s)=>{"use strict";s.d(pt,{_j:()=>F,oJ:()=>l,sH:()=>v,$C:()=>P,cD:()=>_,S8:()=>O,eE:()=>C,dI:()=>X,fu:()=>r});const Y={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var z={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};z.max=z.whitepoint[2].D65,z.rgb=function(E,W){var R,x,T,Z=E[0]/(W=W||z.whitepoint[2].E)[0],A=E[1]/W[1],D=E[2]/W[2];return x=-.96924363628087*Z+1.87596750150772*A+.041555057407175*D,T=.055630079696993*Z+-.20397695888897*A+1.056971514242878*D,R=(R=3.240969941904521*Z+-1.537383177570093*A+-.498610760293*D)>.0031308?1.055*Math.pow(R,1/2.4)-.055:R*=12.92,x=x>.0031308?1.055*Math.pow(x,1/2.4)-.055:x*=12.92,T=T>.0031308?1.055*Math.pow(T,1/2.4)-.055:T*=12.92,[255*(R=Math.min(Math.max(0,R),1)),255*(x=Math.min(Math.max(0,x),1)),255*(T=Math.min(Math.max(0,T),1))]},Y.xyz=function(E,W){var Z=E[0]/255,A=E[1]/255,D=E[2]/255;return[(.41239079926595*(Z=Z>.04045?Math.pow((Z+.055)/1.055,2.4):Z/12.92)+.35758433938387*(A=A>.04045?Math.pow((A+.055)/1.055,2.4):A/12.92)+.18048078840183*(D=D>.04045?Math.pow((D+.055)/1.055,2.4):D/12.92))*(W=W||z.whitepoint[2].E)[0],(.21263900587151*Z+.71516867876775*A+.072192315360733*D)*W[1],(.019330818715591*Z+.11919477979462*A+.95053215224966*D)*W[2]]};const Q=z,$={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(E,W,Z){var A,D,R,tt,J,ht,mt;return 0===(R=E[0])?[0,0,0]:(A=E[1]/(13*R)+4*(J=Q.whitepoint[Z=Z||2][W=W||"D65"][0])/(J+15*(ht=Q.whitepoint[Z][W][1])+3*(mt=Q.whitepoint[Z][W][2]))||0,D=E[2]/(13*R)+9*ht/(J+15*ht+3*mt)||0,[9*(tt=R>8?ht*Math.pow((R+16)/116,3):ht*R*.0011070564598794539)*A/(4*D)||0,tt,tt*(12-3*A-20*D)/(4*D)||0])}};Q.luv=function(E,W,Z){var A,D,R,U,tt,it,J,ht,mt,Et,Ot;Et=4*(J=Q.whitepoint[Z=Z||2][W=W||"D65"][0])/(J+15*(ht=Q.whitepoint[Z][W][1])+3*(mt=Q.whitepoint[Z][W][2])),Ot=9*ht/(J+15*ht+3*mt),A=4*(U=E[0])/(U+15*(tt=E[1])+3*(it=E[2]))||0,D=9*tt/(U+15*tt+3*it)||0;var Ct=tt/ht;return[R=Ct<=.008856451679035631?903.2962962962961*Ct:116*Math.pow(Ct,1/3)-16,13*R*(A-Et),13*R*(D-Ot)]};var L={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(E){var x,Z=E[1];return x=E[2]/360*2*Math.PI,[E[0],Z*Math.cos(x),Z*Math.sin(x)]},xyz:function(E){return $.xyz(L.luv(E))}};const M=L;$.lchuv=function(E){var W=E[0],Z=E[1],A=E[2],D=Math.sqrt(Z*Z+A*A),x=360*Math.atan2(A,Z)/2/Math.PI;return x<0&&(x+=360),[W,D,x]},Q.lchuv=function(E){return $.lchuv(Q.luv(E))};const w={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},I=function m(E){var W,D,Z=[],A=1;if("number"==typeof E)return{space:"rgb",values:[E>>>16,(65280&E)>>>8,255&E],alpha:1};if("number"==typeof E)return{space:"rgb",values:[E>>>16,(65280&E)>>>8,255&E],alpha:1};if(E=String(E).toLowerCase(),w[E])Z=w[E].slice(),D="rgb";else if("transparent"===E)A=0,D="rgb",Z=[0,0,0];else if("#"===E[0]){var R=E.slice(1),x=R.length;A=1,x<=4?(Z=[parseInt(R[0]+R[0],16),parseInt(R[1]+R[1],16),parseInt(R[2]+R[2],16)],4===x&&(A=parseInt(R[3]+R[3],16)/255)):(Z=[parseInt(R[0]+R[1],16),parseInt(R[2]+R[3],16),parseInt(R[4]+R[5],16)],8===x&&(A=parseInt(R[6]+R[7],16)/255)),Z[0]||(Z[0]=0),Z[1]||(Z[1]=0),Z[2]||(Z[2]=0),D="rgb"}else if(W=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(E)){var tt="cmyk"===(D=W[1].replace(/a$/,""))?4:"gray"===D?1:3;Z=W[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===D&&(D=Z.shift()),A=(Z=Z.map(function(it,J){if("%"===it[it.length-1])return it=parseFloat(it)/100,3===J?it:"rgb"===D?255*it:"h"===D[0]||"l"===D[0]&&!J?100*it:"lab"===D?125*it:"lch"===D?J<2?150*it:360*it:"o"!==D[0]||J?"oklab"===D?.4*it:"oklch"===D?J<2?.4*it:360*it:it:it;if("h"===D[J]||2===J&&"h"===D[D.length-1]){if(void 0!==y[it])return y[it];if(it.endsWith("deg"))return parseFloat(it);if(it.endsWith("turn"))return 360*parseFloat(it);if(it.endsWith("grad"))return 360*parseFloat(it)/400;if(it.endsWith("rad"))return 180*parseFloat(it)/Math.PI}return"none"===it?0:parseFloat(it)})).length>tt?Z.pop():1}else/[0-9](?:\s|\/|,)/.test(E)&&(Z=E.match(/([0-9]+)/g).map(function(it){return parseFloat(it)}),D=E.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:D,values:Z,alpha:A}};var y={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};const u={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(E){var D,R,x,T,U,W=E[0]/360,Z=E[1]/100,A=E[2]/100,tt=0;if(0===Z)return[U=255*A,U,U];for(D=2*A-(R=A<.5?A*(1+Z):A+Z-A*Z),T=[0,0,0];tt<3;)(x=W+1/3*-(tt-1))<0?x++:x>1&&x--,T[tt++]=255*(U=6*x<1?D+6*(R-D)*x:2*x<1?R:3*x<2?D+(R-D)*(2/3-x)*6:D);return T}};Y.hsl=function(E){var T,tt,W=E[0]/255,Z=E[1]/255,A=E[2]/255,D=Math.min(W,Z,A),R=Math.max(W,Z,A),x=R-D;return R===D?T=0:W===R?T=(Z-A)/x:Z===R?T=2+(A-W)/x:A===R&&(T=4+(W-Z)/x),(T=Math.min(60*T,360))<0&&(T+=360),tt=(D+R)/2,[T,100*(R===D?0:tt<=.5?x/(R+D):x/(2-R-D)),100*tt]};var i=s(9973);function l(E){return"string"==typeof E?E:X(E)}const n=1024,d={};let f=0;function r(E){if(4===E.length)return E;const W=E.slice();return W[3]=1,W}function C(E){const W=Q.lchuv(Y.xyz(E));return W[3]=E[3],W}function _(E){const W=Q.rgb(M.xyz(E));return W[3]=E[3],W}function v(E){if(d.hasOwnProperty(E))return d[E];if(f>=n){let Z=0;for(const A in d)3&Z++||(delete d[A],--f)}const W=function o(E){Array.isArray(E)&&E.raw&&(E=String.raw(...arguments)),E instanceof Number&&(E=+E);var W,D=I(E);if(!D.space)return[];const R="h"===D.space[0]?u.min:Y.min,x="h"===D.space[0]?u.max:Y.max;return(W=Array(3))[0]=Math.min(Math.max(D.values[0],R[0]),x[0]),W[1]=Math.min(Math.max(D.values[1],R[1]),x[1]),W[2]=Math.min(Math.max(D.values[2],R[2]),x[2]),"h"===D.space[0]&&(W=u.rgb(W)),W.push(Math.min(Math.max(D.alpha,0),1)),W}(E);if(4!==W.length)throw new Error('Failed to parse "'+E+'" as color');for(const Z of W)if(isNaN(Z))throw new Error('Failed to parse "'+E+'" as color');return O(W),d[E]=W,++f,W}function F(E){return Array.isArray(E)?E:v(E)}function O(E){return E[0]=(0,i.qE)(E[0]+.5|0,0,255),E[1]=(0,i.qE)(E[1]+.5|0,0,255),E[2]=(0,i.qE)(E[2]+.5|0,0,255),E[3]=(0,i.qE)(E[3],0,1),E}function X(E){let W=E[0];W!=(0|W)&&(W=W+.5|0);let Z=E[1];Z!=(0|Z)&&(Z=Z+.5|0);let A=E[2];return A!=(0|A)&&(A=A+.5|0),"rgba("+W+","+Z+","+A+","+(void 0===E[3]?1:Math.round(1e3*E[3])/1e3)+")"}function P(E){try{return v(E),!0}catch{return!1}}},2775:(le,pt,s)=>{"use strict";s.d(pt,{F:()=>M});var Y=s(2661),z=s(5551),Q=s(4155),$=s(1705),L=s(1962);function M(I){return I?Array.isArray(I)?(0,L.dI)(I):"object"==typeof I&&"src"in I?function w(I){if(!I.offset||!I.size)return $.ue.getPattern(I.src,"anonymous",I.color);const y=I.src+":"+I.offset,m=$.ue.getPattern(y,void 0,I.color);if(m)return m;const u=$.ue.get(I.src,"anonymous",null);if(u.getImageState()!==Y.A.LOADED)return null;const o=(0,z.Y)(I.size[0],I.size[1]);return o.drawImage(u.getImage(1),I.offset[0],I.offset[1],I.size[0],I.size[1],0,0,I.size[0],I.size[1]),(0,Q.J)(o.canvas,y,void 0,Y.A.LOADED,I.color,!0),$.ue.getPattern(y,void 0,I.color)}(I):I:null}},5278:(le,pt,s)=>{"use strict";s.d(pt,{R8:()=>L});const Y={info:1,warn:2,error:3,none:4};let z=Y.info;function L(...w){z>Y.warn||console.warn(...w)}},2744:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>y});var Y=s(3308),z=s(7412),Q=s(6621),$=s(1776),L=s(2058),M=s(5551),w=s(1766);const y=class I extends z.A{constructor(u){u=u||{},super({element:document.createElement("div"),render:u.render,target:u.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===u.collapsed||u.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==u.collapsible,this.collapsible_=void 0===u.collapsible||u.collapsible,this.collapsible_||(this.collapsed_=!1);const o=void 0!==u.className?u.className:"ol-attribution",i=void 0!==u.tipLabel?u.tipLabel:"Attributions",l=void 0!==u.expandClassName?u.expandClassName:o+"-expand",n=void 0!==u.collapseLabel?u.collapseLabel:"\u203a",d=void 0!==u.collapseClassName?u.collapseClassName:o+"-collapse";"string"==typeof n?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n,this.collapseLabel_.className=d):this.collapseLabel_=n;const f=void 0!==u.label?u.label:"i";"string"==typeof f?(this.label_=document.createElement("span"),this.label_.textContent=f,this.label_.className=l):this.label_=f;const r=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(r),this.toggleButton_.addEventListener(Q.A.CLICK,this.handleClick_.bind(this),!1);const _=this.element;_.className=o+" "+$.XI+" "+$.$N+(this.collapsed_&&this.collapsible_?" "+$.nT:"")+(this.collapsible_?"":" ol-uncollapsible"),_.appendChild(this.toggleButton_),_.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(u){const o=Array.from(new Set(this.getMap().getAllLayers().flatMap(l=>l.getAttributions(u)))),i=!this.getMap().getAllLayers().some(l=>l.getSource()&&!1===l.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(i),o}updateElement_(u){var o=this;return(0,Y.A)(function*(){if(!u)return void(o.renderedVisible_&&(o.element.style.display="none",o.renderedVisible_=!1));const i=yield Promise.all(o.collectSourceAttributions_(u).map(n=>(0,w.hq)(()=>n))),l=i.length>0;if(o.renderedVisible_!=l&&(o.element.style.display=l?"":"none",o.renderedVisible_=l),!(0,L.aI)(i,o.renderedAttributions_)){(0,M.gS)(o.ulElement_);for(let n=0,d=i.length;n<d;++n){const f=document.createElement("li");f.innerHTML=i[n],o.ulElement_.appendChild(f)}o.renderedAttributions_=i}})()}handleClick_(u){u.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle($.nT),this.collapsed_?(0,M.fo)(this.collapseLabel_,this.label_):(0,M.fo)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(u){this.collapsible_!==u&&(this.collapsible_=u,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(u){this.userCollapsed_=u,this.collapsible_&&this.collapsed_!==u&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(u){this.updateElement_(u.frameState)}}},7412:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>w});var Y=s(9568),z=s(5281),Q=s(1766),$=s(2614),L=s(5551);const w=class M extends Y.A{constructor(y){super();const m=y.element;m&&!y.target&&!m.style.pointerEvents&&(m.style.pointerEvents="auto"),this.element=m||null,this.target_=null,this.map_=null,this.listenerKeys=[],y.render&&(this.render=y.render),y.target&&this.setTarget(y.target)}disposeInternal(){(0,L.bf)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(y){this.map_&&(0,L.bf)(this.element);for(let m=0,u=this.listenerKeys.length;m<u;++m)(0,$.JH)(this.listenerKeys[m]);this.listenerKeys.length=0,this.map_=y,y&&((this.target_?this.target_:y.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Q.tV&&this.listenerKeys.push((0,$.KT)(y,z.A.POSTRENDER,this.render,this)),y.render())}render(y){}setTarget(y){this.target_="string"==typeof y?document.getElementById(y):y}}},7290:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>M});var Y=s(7412),z=s(6621),Q=s(1776),$=s(6378);const M=class L extends Y.A{constructor(I){I=I||{},super({element:document.createElement("div"),render:I.render,target:I.target});const y=void 0!==I.className?I.className:"ol-rotate",m=void 0!==I.label?I.label:"\u21e7",u=void 0!==I.compassClassName?I.compassClassName:"ol-compass";this.label_=null,"string"==typeof m?(this.label_=document.createElement("span"),this.label_.className=u,this.label_.textContent=m):(this.label_=m,this.label_.classList.add(u));const o=I.tipLabel?I.tipLabel:"Reset rotation",i=document.createElement("button");i.className=y+"-reset",i.setAttribute("type","button"),i.title=o,i.appendChild(this.label_),i.addEventListener(z.A.CLICK,this.handleClick_.bind(this),!1);const n=this.element;n.className=y+" "+Q.XI+" "+Q.$N,n.appendChild(i),this.callResetNorth_=I.resetNorth?I.resetNorth:void 0,this.duration_=void 0!==I.duration?I.duration:250,this.autoHide_=void 0===I.autoHide||I.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Q.Si)}handleClick_(I){I.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const y=this.getMap().getView();if(!y)return;const m=y.getRotation();void 0!==m&&(this.duration_>0&&m%(2*Math.PI)!=0?y.animate({rotation:0,duration:this.duration_,easing:$.vT}):y.setRotation(0))}render(I){const y=I.frameState;if(!y)return;const m=y.viewState.rotation;if(m!=this.rotation_){const u="rotate("+m+"rad)";if(this.autoHide_){const o=this.element.classList.contains(Q.Si);o||0!==m?o&&0!==m&&this.element.classList.remove(Q.Si):this.element.classList.add(Q.Si)}this.label_.style.transform=u}this.rotation_=m}}},5130:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>M});var Y=s(7412),z=s(6621),Q=s(1776),$=s(6378);const M=class L extends Y.A{constructor(I){I=I||{},super({element:document.createElement("div"),target:I.target});const y=void 0!==I.className?I.className:"ol-zoom",m=void 0!==I.delta?I.delta:1,u=void 0!==I.zoomInClassName?I.zoomInClassName:y+"-in",o=void 0!==I.zoomOutClassName?I.zoomOutClassName:y+"-out",i=void 0!==I.zoomInLabel?I.zoomInLabel:"+",l=void 0!==I.zoomOutLabel?I.zoomOutLabel:"\u2013",n=void 0!==I.zoomInTipLabel?I.zoomInTipLabel:"Zoom in",d=void 0!==I.zoomOutTipLabel?I.zoomOutTipLabel:"Zoom out",f=document.createElement("button");f.className=u,f.setAttribute("type","button"),f.title=n,f.appendChild("string"==typeof i?document.createTextNode(i):i),f.addEventListener(z.A.CLICK,this.handleClick_.bind(this,m),!1);const r=document.createElement("button");r.className=o,r.setAttribute("type","button"),r.title=d,r.appendChild("string"==typeof l?document.createTextNode(l):l),r.addEventListener(z.A.CLICK,this.handleClick_.bind(this,-m),!1);const _=this.element;_.className=y+" "+Q.XI+" "+Q.$N,_.appendChild(f),_.appendChild(r),this.duration_=void 0!==I.duration?I.duration:250}handleClick_(I,y){y.preventDefault(),this.zoomByDelta_(I)}zoomByDelta_(I){const m=this.getMap().getView();if(!m)return;const u=m.getZoom();if(void 0!==u){const o=m.getConstrainedZoom(u+I);this.duration_>0?(m.getAnimating()&&m.cancelAnimations(),m.animate({zoom:o,duration:this.duration_,easing:$.vT})):m.setZoom(o)}}}},5085:(le,pt,s)=>{"use strict";s.d(pt,{KN:()=>f,Li:()=>r,U$:()=>C,WQ:()=>$,aI:()=>m,aP:()=>I,e$:()=>u,hs:()=>o});var Y=s(8507),z=s(9973),Q=s(5454);function $(_,v){return _[0]+=+v[0],_[1]+=+v[1],_}function I(_,v,F){const O=(0,z.xP)(v+180,360)-180,X=Math.abs(3600*O),P=F||0;let E=Math.floor(X/3600),W=Math.floor((X-3600*E)/60),Z=(0,z.Mg)(X-3600*E-60*W,P);Z>=60&&(Z=0,W+=1),W>=60&&(W=0,E+=1);let A=E+"\xb0";return(0!==W||0!==Z)&&(A+=" "+(0,Q.H)(W,2)+"\u2032"),0!==Z&&(A+=" "+(0,Q.H)(Z,2,P)+"\u2033"),0!==O&&(A+=" "+_.charAt(O<0?1:0)),A}function m(_,v){let F=!0;for(let O=_.length-1;O>=0;--O)if(_[O]!=v[O]){F=!1;break}return F}function u(_,v){const F=Math.cos(v),O=Math.sin(v),P=_[1]*F+_[0]*O;return _[0]=_[0]*F-_[1]*O,_[1]=P,_}function o(_,v){return _[0]*=v,_[1]*=v,_}function f(_,v){return function y(_,v,F){return _?v.replace("{x}",_[0].toFixed(F)).replace("{y}",_[1].toFixed(F)):""}(_,"{x}, {y}",v)}function r(_,v){if(v.canWrapX()){const F=(0,Y.RG)(v.getExtent()),O=C(_,v,F);O&&(_[0]-=O*F)}return _}function C(_,v,F){const O=v.getExtent();let X=0;return v.canWrapX()&&(_[0]<O[0]||_[0]>O[2])&&(F=F||(0,Y.RG)(O),X=Math.floor((_[0]-O[0])/F)),X}},1776:(le,pt,s)=>{"use strict";s.d(pt,{$N:()=>L,K5:()=>y,Q5:()=>z,Si:()=>Y,Vv:()=>$,XI:()=>Q,nT:()=>M});const Y="ol-hidden",z="ol-selectable",Q="ol-unselectable",$="ol-unsupported",L="ol-control",M="ol-collapsed",w=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),I=["style","variant","weight","size","lineHeight","family"],y=function(m){const u=m.match(w);if(!u)return null;const o={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,l=I.length;i<l;++i){const n=u[i+1];void 0!==n&&(o[I[i]]=n)}return o.families=o.family.split(/,\s?/),o}},5551:(le,pt,s)=>{"use strict";s.d(pt,{DK:()=>w,Gq:()=>M,WM:()=>u,Y:()=>z,Yg:()=>L,bf:()=>y,fo:()=>I,gS:()=>m,lr:()=>$});var Y=s(2531);function z(o,i,l,n){let d;return d=l&&l.length?l.shift():Y.Wl?new OffscreenCanvas(o||300,i||300):document.createElement("canvas"),o&&(d.width=o),i&&(d.height=i),d.getContext("2d",n)}let Q;function $(){return Q||(Q=z(1,1)),Q}function L(o){const i=o.canvas;i.width=1,i.height=1,o.clearRect(0,0,1,1)}function M(o){let i=o.offsetWidth;const l=getComputedStyle(o);return i+=parseInt(l.marginLeft,10)+parseInt(l.marginRight,10),i}function w(o){let i=o.offsetHeight;const l=getComputedStyle(o);return i+=parseInt(l.marginTop,10)+parseInt(l.marginBottom,10),i}function I(o,i){const l=i.parentNode;l&&l.replaceChild(o,i)}function y(o){return o&&o.parentNode?o.parentNode.removeChild(o):null}function m(o){for(;o.lastChild;)o.removeChild(o.lastChild)}function u(o,i){const l=o.childNodes;for(let n=0;;++n){const d=l[n],f=i[n];if(!d&&!f)break;if(d!==f){if(!d){o.appendChild(f);continue}if(!f){o.removeChild(d),--n;continue}o.insertBefore(f,d)}}}},6378:(le,pt,s)=>{"use strict";function Y(M){return Math.pow(M,3)}function z(M){return 1-Y(1-M)}function Q(M){return 3*M*M-2*M*M*M}function $(M){return M}s.d(pt,{T9:()=>Q,a6:()=>Y,sn:()=>$,vT:()=>z})},2614:(le,pt,s)=>{"use strict";s.d(pt,{JH:()=>$,Jz:()=>Q,KT:()=>z});var Y=s(9330);function z(L,M,w,I,y){if(I&&I!==L&&(w=w.bind(I)),y){const u=w;w=function(){L.removeEventListener(M,w),u.apply(this,arguments)}}const m={target:L,type:M,listener:w};return L.addEventListener(M,w),m}function Q(L,M,w,I){return z(L,M,w,I,!0)}function $(L){L&&L.target&&(L.target.removeEventListener(L.type,L.listener),(0,Y.I)(L))}},3805:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>$});const $=class Y{constructor(M){this.type=M,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},6621:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},1884:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>M});var Y=s(9153),z=s(3805),Q=s(1766),$=s(9330);const M=class L extends Y.A{constructor(I){super(),this.eventTarget_=I,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(I,y){if(!I||!y)return;const m=this.listeners_||(this.listeners_={}),u=m[I]||(m[I]=[]);u.includes(y)||u.push(y)}dispatchEvent(I){const y="string"==typeof I,m=y?I:I.type,u=this.listeners_&&this.listeners_[m];if(!u)return;const o=y?new z.Ay(I):I;o.target||(o.target=this.eventTarget_||this);const i=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});let n;m in i||(i[m]=0,l[m]=0),++i[m];for(let d=0,f=u.length;d<f;++d)if(n="handleEvent"in u[d]?u[d].handleEvent(o):u[d].call(this,o),!1===n||o.propagationStopped){n=!1;break}if(0==--i[m]){let d=l[m];for(delete l[m];d--;)this.removeEventListener(m,Q.tV);delete i[m]}return n}disposeInternal(){this.listeners_&&(0,$.I)(this.listeners_)}getListeners(I){return this.listeners_&&this.listeners_[I]||void 0}hasListener(I){return!!this.listeners_&&(I?I in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(I,y){if(!this.listeners_)return;const m=this.listeners_[I];if(!m)return;const u=m.indexOf(y);-1!==u&&(this.pendingRemovals_&&I in this.pendingRemovals_?(m[u]=Q.tV,++this.pendingRemovals_[I]):(m.splice(u,1),0===m.length&&delete this.listeners_[I]))}}},6568:(le,pt,s)=>{"use strict";s.d(pt,{A4:()=>v,GB:()=>r,Gk:()=>y,IO:()=>M,Kg:()=>C,Q7:()=>$,TS:()=>d,at:()=>u,eL:()=>I,fs:()=>X,tE:()=>_});var Y=s(1766),z=s(2531),Q=s(5940);function $(P){const E=arguments;return function(W){let Z=!0;for(let A=0,D=E.length;A<D&&(Z=Z&&E[A](W),Z);++A);return Z}}const M=function(P){const E=P.originalEvent;return E.altKey&&!(E.metaKey||E.ctrlKey)&&E.shiftKey},I=function(P){return!P.map.getTargetElement().hasAttribute("tabindex")||function(P){const E=P.map.getTargetElement(),W=P.map.getOwnerDocument().activeElement;return E.contains(W)}(P)},y=Y.rT,u=function(P){const E=P.originalEvent;return 0==E.button&&!(z.j&&z.ew&&E.ctrlKey)},d=function(P){const E=P.originalEvent;return!E.altKey&&!(E.metaKey||E.ctrlKey)&&!E.shiftKey},r=function(P){const E=P.originalEvent;return z.ew?E.metaKey:E.ctrlKey},C=function(P){const E=P.originalEvent;return!E.altKey&&!(E.metaKey||E.ctrlKey)&&E.shiftKey},_=function(P){const E=P.originalEvent,W=E.target.tagName;return"INPUT"!==W&&"SELECT"!==W&&"TEXTAREA"!==W&&!E.target.isContentEditable},v=function(P){const E=P.originalEvent;return(0,Q.v)(void 0!==E,"mapBrowserEvent must originate from a pointer event"),"mouse"==E.pointerType},X=function(P){const E=P.originalEvent;return(0,Q.v)(void 0!==E,"mapBrowserEvent must originate from a pointer event"),E.isPrimary&&0===E.button}},9625:(le,pt,s)=>{"use strict";s.d(pt,{DG:()=>C,Fq:()=>y,SR:()=>_,T8:()=>L,Ye:()=>Nt,ZD:()=>O,_D:()=>r,cT:()=>w,go:()=>l,ho:()=>d,mE:()=>I,qA:()=>m,qg:()=>F,wl:()=>M});var Y=s(2058),z=s(1962);let Q=0;const $=0,L=1<<Q++,M=1<<Q++,w=1<<Q++,I=1<<Q++,y=1<<Q++,m=1<<Q++,u=Math.pow(2,6)-1,o={[L]:"boolean",[M]:"number",[w]:"string",[I]:"color",[y]:"number[]",[m]:"size"},i=Object.keys(o).map(Number).sort(Y.V_);function l(ft){const Ct=[];for(const Dt of i)n(ft,Dt)&&Ct.push(o[Dt]);return 0===Ct.length?"untyped":Ct.length<3?Ct.join(" or "):Ct.slice(0,-1).join(", ")+", or "+Ct[Ct.length-1]}function n(ft,Ct){return(ft&Ct)===Ct}function d(ft,Ct){return!!(ft&Ct)}function f(ft,Ct){return ft===Ct}class r{constructor(Ct,Dt){this.type=Ct,this.value=Dt}}class C{constructor(Ct,Dt,...re){this.type=Ct,this.operator=Dt,this.args=re}}function _(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function F(ft,Ct,Dt){switch(typeof ft){case"boolean":return new r(L,ft);case"number":return new r(Dt===m?m:M,ft);case"string":{let Jt=w;return(0,z.$C)(ft)&&(Jt|=I),f(Jt&Dt,$)||(Jt&=Dt),new r(Jt,ft)}}if(!Array.isArray(ft))throw new Error("Expression must be an array or a primitive value");if(0===ft.length)throw new Error("Empty expression");if("string"==typeof ft[0])return function Ot(ft,Ct,Dt){const re=ft[0],Jt=X[re];if(!Jt)throw new Error(`Unknown operator: ${re}`);return Jt(ft,Ct,Dt)}(ft,Ct,Dt);for(const Jt of ft)if("number"!=typeof Jt)throw new Error("Expected an array of numbers");let re=y;return 2===ft.length?re|=m:(3===ft.length||4===ft.length)&&(re|=I),Dt&&(re&=Dt),new r(re,ft)}const O={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},X={[O.Get]:Et(([ft,Ct])=>void 0!==Ct?function v(ft){switch(ft){case"string":return w;case"color":return I;case"number":return M;case"boolean":return L;case"number[]":return y;default:throw new Error(`Unrecognized type hint: ${ft}`)}}(Ct.value):u,D(1,2),function P(ft,Ct){const Dt=F(ft[1],Ct);if(!(Dt instanceof r))throw new Error("Expected a literal argument for get operation");if("string"!=typeof Dt.value)throw new Error("Expected a string argument for get operation");return Ct.properties.add(Dt.value),3===ft.length?[Dt,F(ft[2],Ct)]:[Dt]}),[O.Var]:Et(([ft])=>ft.type,D(1,1),function E(ft,Ct,Dt,re){const Jt=ft[1];if("string"!=typeof Jt)throw new Error("Expected a string argument for var operation");if(Ct.variables.add(Jt),!("variables"in Ct.style)||void 0===Ct.style.variables[Jt])return[new r(u,Jt)];const oe=F(Ct.style.variables[Jt],Ct);if(oe.value=Jt,re&&!d(re,oe.type))throw new Error(`The variable ${Jt} has type ${l(oe.type)} but the following type was expected: ${l(re)}`);return[oe]}),[O.Id]:Et(M|w,A,function W(ft,Ct){Ct.featureId=!0}),[O.Concat]:Et(w,D(2,1/0),R(u)),[O.GeometryType]:Et(w,A,function Z(ft,Ct){Ct.geometryType=!0}),[O.Resolution]:Et(M,A),[O.Zoom]:Et(M,A),[O.Time]:Et(M,A),[O.Any]:Et(L,D(2,1/0),R(L)),[O.All]:Et(L,D(2,1/0),R(L)),[O.Not]:Et(L,D(1,1),R(L)),[O.Equal]:Et(L,D(2,2),R(u),x),[O.NotEqual]:Et(L,D(2,2),R(u),x),[O.GreaterThan]:Et(L,D(2,2),R(u),x),[O.GreaterThanOrEqualTo]:Et(L,D(2,2),R(u),x),[O.LessThan]:Et(L,D(2,2),R(u),x),[O.LessThanOrEqualTo]:Et(L,D(2,2),R(u),x),[O.Multiply]:Et(ft=>{let Ct=M|I;for(let Dt=0;Dt<ft.length;Dt++)Ct&=ft[Dt].type;return Ct},D(2,1/0),R(M|I),x),[O.Coalesce]:Et(ft=>{let Ct=u;for(let Dt=1;Dt<ft.length;Dt+=2)Ct&=ft[Dt].type;return Ct&=ft[ft.length-1].type,Ct},D(2,1/0),R(u),x),[O.Divide]:Et(M,D(2,2),R(M)),[O.Add]:Et(M,D(2,1/0),R(M)),[O.Subtract]:Et(M,D(2,2),R(M)),[O.Clamp]:Et(M,D(3,3),R(M)),[O.Mod]:Et(M,D(2,2),R(M)),[O.Pow]:Et(M,D(2,2),R(M)),[O.Abs]:Et(M,D(1,1),R(M)),[O.Floor]:Et(M,D(1,1),R(M)),[O.Ceil]:Et(M,D(1,1),R(M)),[O.Round]:Et(M,D(1,1),R(M)),[O.Sin]:Et(M,D(1,1),R(M)),[O.Cos]:Et(M,D(1,1),R(M)),[O.Atan]:Et(M,D(1,2),R(M)),[O.Sqrt]:Et(M,D(1,1),R(M)),[O.Match]:Et(ft=>{let Ct=u;for(let Dt=2;Dt<ft.length;Dt+=2)Ct&=ft[Dt].type;return Ct&=ft[ft.length-1].type,Ct},D(4,1/0),U,function tt(ft,Ct,Dt,re){const Jt=ft.length-1;let oe=F(ft[1],Ct).type;const _e=F(ft[ft.length-1],Ct);let ct=void 0!==re?re&_e.type:_e.type;const Gt=new Array(Jt-2);for(let ge=0;ge<Jt-2;ge+=2){const Ae=F(ft[ge+2],Ct),qe=F(ft[ge+3],Ct);oe&=Ae.type,ct&=qe.type,Gt[ge]=Ae,Gt[ge+1]=qe}const Vt=w|M|L;if(!d(Vt,oe))throw new Error(`Expected an input of type ${l(Vt)} for the interpolate operation, got ${l(oe)} instead`);if(oe&=Vt,f(ct,$))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(ft));for(let ge=0;ge<Jt-2;ge+=2){const Ae=F(ft[ge+2],Ct,oe),qe=F(ft[ge+3],Ct,ct);Gt[ge]=Ae,Gt[ge+1]=qe}return[F(ft[1],Ct,oe),...Gt,F(ft[ft.length-1],Ct,ct)]}),[O.Between]:Et(L,D(3,3),R(M)),[O.Interpolate]:Et(ft=>{let Ct=I|M;for(let Dt=3;Dt<ft.length;Dt+=2)Ct&=ft[Dt].type;return Ct},D(6,1/0),U,function it(ft,Ct,Dt,re){const Jt=ft[1];let ye;switch(Jt[0]){case"linear":ye=1;break;case"exponential":if(ye=Jt[1],"number"!=typeof ye)throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(ye)} instead`);break;default:ye=null}if(!ye)throw new Error(`Invalid interpolation type: ${JSON.stringify(Jt)}`);ye=F(ye,Ct);let oe=F(ft[2],Ct);if(!d(M,oe.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${l(oe.type)} instead`);oe=F(ft[2],Ct,M);const _e=new Array(ft.length-3);for(let ct=0;ct<_e.length;ct+=2){let Gt=F(ft[ct+3],Ct);if(!d(M,Gt.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${l(Gt.type)} at position ${ct+2} instead`);let Vt=F(ft[ct+4],Ct);if(!d(M|I,Vt.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${l(Vt.type)} at position ${ct+3} instead`);Gt=F(ft[ct+3],Ct,M),Vt=F(ft[ct+4],Ct,M|I),_e[ct]=Gt,_e[ct+1]=Vt}return[ye,oe,..._e]}),[O.Case]:Et(ft=>{let Ct=u;for(let Dt=1;Dt<ft.length;Dt+=2)Ct&=ft[Dt].type;return Ct&=ft[ft.length-1].type,Ct},D(3,1/0),function T(ft,Ct){const re=ft.length-1;if(re%2==0)throw new Error(`An odd amount of arguments was expected for operation ${ft[0]}, got ${JSON.stringify(re)} instead`)},function J(ft,Ct,Dt,re){const Jt=F(ft[ft.length-1],Ct,re);let ye=void 0!==re?re&Jt.type:Jt.type;const oe=new Array(ft.length-1);for(let _e=0;_e<oe.length-1;_e+=2){const ct=F(ft[_e+1],Ct),Gt=F(ft[_e+2],Ct,re);if(!d(L,ct.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${l(ct.type)} at position ${_e} instead`);ye&=Gt.type,oe[_e]=ct,oe[_e+1]=Gt}if(f(ye,$))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(ft));for(let _e=0;_e<oe.length-1;_e+=2)oe[_e+1]=F(ft[_e+2],Ct,ye);return oe[oe.length-1]=F(ft[ft.length-1],Ct,ye),oe}),[O.In]:Et(L,D(2,2),function ht(ft,Ct){let Dt=ft[2];if(!Array.isArray(Dt))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof Dt[0]){if("literal"!==Dt[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(Dt[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');Dt=Dt[1]}let re=w|M;const Jt=new Array(Dt.length);for(let oe=0;oe<Jt.length;oe++){const _e=F(Dt[oe],Ct);re&=_e.type,Jt[oe]=_e}if(f(re,$))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(ft));return[F(ft[1],Ct,re),...Jt]}),[O.Number]:Et(M,D(1,1/0),R(u)),[O.String]:Et(w,D(1,1/0),R(u)),[O.Array]:Et(ft=>2===ft.length?y|m:3===ft.length||4===ft.length?y|I:y,D(1,1/0),R(M)),[O.Color]:Et(I,D(1,4),R(M)),[O.Band]:Et(M,D(1,3),R(M)),[O.Palette]:Et(I,D(2,2),function mt(ft,Ct){const Dt=F(ft[1],Ct,M);if(Dt.type!==M)throw new Error(`The first argument of palette must be an number, got ${l(Dt.type)} instead`);const re=ft[2];if(!Array.isArray(re))throw new Error("The second argument of palette must be an array");const Jt=new Array(re.length);for(let ye=0;ye<Jt.length;ye++){const oe=F(re[ye],Ct,I);if(!(oe instanceof r))throw new Error(`The palette color at index ${ye} must be a literal value`);if(!d(oe.type,I))throw new Error(`The palette color at index ${ye} should be of type color, got ${l(oe.type)} instead`);Jt[ye]=oe}return[Dt,...Jt]}),[O.ToString]:Et(w,D(1,1),R(L|M|w|I))};function A(ft,Ct){if(1!==ft.length)throw new Error(`Expected no arguments for ${ft[0]} operation`);return[]}function D(ft,Ct){return function(Dt,re){const Jt=Dt[0],ye=Dt.length-1;if(ft===Ct){if(ye!==ft)throw new Error(`Expected ${ft} argument${1===ft?"":"s"} for ${Jt}, got ${ye}`)}else if(ye<ft||ye>Ct)throw new Error(`Expected ${Ct===1/0?`${ft} or more`:`${ft} to ${Ct}`} arguments for ${Jt}, got ${ye}`)}}function R(ft){return function(Ct,Dt){const re=Ct[0],Jt=Ct.length-1,ye=new Array(Jt);for(let oe=0;oe<Jt;++oe){const _e=F(Ct[oe+1],Dt);if(!d(ft,_e.type)){const ct=l(ft),Gt=l(_e.type);throw new Error(`Unexpected type for argument ${oe} of ${re} operation, got ${ct} but expected ${Gt}`)}_e.type&=ft,ye[oe]=_e}return ye}}function x(ft,Ct,Dt){const re=ft[0],Jt=ft.length-1;let ye=u;for(let _e=0;_e<Dt.length;++_e)ye&=Dt[_e].type;if(ye===$)throw new Error(`No common type could be found for arguments of ${re} operation`);const oe=new Array(Jt);for(let _e=0;_e<Jt;++_e)oe[_e]=F(ft[_e+1],Ct,ye);return oe}function U(ft,Ct){const re=ft.length-1;if(re%2==1)throw new Error(`An even amount of arguments was expected for operation ${ft[0]}, got ${JSON.stringify(re)} instead`)}function Et(ft,...Ct){return function(Dt,re,Jt){const ye=Dt[0];let oe=[];for(let ct=0;ct<Ct.length;ct++)oe=Ct[ct](Dt,re,oe,Jt)||oe;let _e="function"==typeof ft?ft(oe):ft;if(void 0!==Jt){if(!d(_e,Jt))throw new Error(`The following expression was expected to return ${l(Jt)}, but returns ${l(_e)} instead: ${JSON.stringify(Dt)}`);_e&=Jt}if(_e===$)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(Dt)}`);return new C(_e,ye,...oe)}}function Nt(ft){if(!ft)return"";const Ct=ft.getType();switch(Ct){case"Point":case"LineString":case"Polygon":return Ct;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return Ct.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Nt(ft.getGeometries()[0]);default:return""}}},8507:(le,pt,s)=>{"use strict";s.d(pt,{$C:()=>v,$u:()=>Dt,Af:()=>re,Bg:()=>T,HY:()=>ft,Im:()=>Ct,Ld:()=>M,Li:()=>oe,Mx:()=>Jt,N:()=>o,NW:()=>ye,Oq:()=>tt,Py:()=>Et,QJ:()=>_e,R:()=>Z,R8:()=>O,RG:()=>Nt,Rj:()=>y,S5:()=>u,Tr:()=>z,UG:()=>W,Vy:()=>d,WU:()=>Ot,X$:()=>_,Ym:()=>w,Yw:()=>U,_N:()=>J,aI:()=>r,aZ:()=>i,bE:()=>C,dP:()=>l,k_:()=>A,ms:()=>I,o8:()=>L,q1:()=>D,qF:()=>R,r:()=>$,sB:()=>E,vz:()=>m});var Y=s(1524);function z(ct){const Gt=[1/0,1/0,-1/0,-1/0];for(let Vt=0,ge=ct.length;Vt<ge;++Vt)v(Gt,ct[Vt]);return Gt}function $(ct,Gt,Vt){return Vt?(Vt[0]=ct[0]-Gt,Vt[1]=ct[1]-Gt,Vt[2]=ct[2]+Gt,Vt[3]=ct[3]+Gt,Vt):[ct[0]-Gt,ct[1]-Gt,ct[2]+Gt,ct[3]+Gt]}function L(ct,Gt){return Gt?(Gt[0]=ct[0],Gt[1]=ct[1],Gt[2]=ct[2],Gt[3]=ct[3],Gt):ct.slice()}function M(ct,Gt,Vt){let ge,Ae;return ge=Gt<ct[0]?ct[0]-Gt:ct[2]<Gt?Gt-ct[2]:0,Ae=Vt<ct[1]?ct[1]-Vt:ct[3]<Vt?Vt-ct[3]:0,ge*ge+Ae*Ae}function w(ct,Gt){return y(ct,Gt[0],Gt[1])}function I(ct,Gt){return ct[0]<=Gt[0]&&Gt[2]<=ct[2]&&ct[1]<=Gt[1]&&Gt[3]<=ct[3]}function y(ct,Gt,Vt){return ct[0]<=Gt&&Gt<=ct[2]&&ct[1]<=Vt&&Vt<=ct[3]}function m(ct,Gt){const ti=Gt[0],Ie=Gt[1];let _t=Y.A.UNKNOWN;return ti<ct[0]?_t|=Y.A.LEFT:ti>ct[2]&&(_t|=Y.A.RIGHT),Ie<ct[1]?_t|=Y.A.BELOW:Ie>ct[3]&&(_t|=Y.A.ABOVE),_t===Y.A.UNKNOWN&&(_t=Y.A.INTERSECTING),_t}function u(){return[1/0,1/0,-1/0,-1/0]}function o(ct,Gt,Vt,ge,Ae){return Ae?(Ae[0]=ct,Ae[1]=Gt,Ae[2]=Vt,Ae[3]=ge,Ae):[ct,Gt,Vt,ge]}function i(ct){return o(1/0,1/0,-1/0,-1/0,ct)}function l(ct,Gt){const Vt=ct[0],ge=ct[1];return o(Vt,ge,Vt,ge,Gt)}function d(ct,Gt,Vt,ge,Ae){return O(i(Ae),ct,Gt,Vt,ge)}function r(ct,Gt){return ct[0]==Gt[0]&&ct[2]==Gt[2]&&ct[1]==Gt[1]&&ct[3]==Gt[3]}function C(ct,Gt,Vt){return Math.abs(ct[0]-Gt[0])<Vt&&Math.abs(ct[2]-Gt[2])<Vt&&Math.abs(ct[1]-Gt[1])<Vt&&Math.abs(ct[3]-Gt[3])<Vt}function _(ct,Gt){return Gt[0]<ct[0]&&(ct[0]=Gt[0]),Gt[2]>ct[2]&&(ct[2]=Gt[2]),Gt[1]<ct[1]&&(ct[1]=Gt[1]),Gt[3]>ct[3]&&(ct[3]=Gt[3]),ct}function v(ct,Gt){Gt[0]<ct[0]&&(ct[0]=Gt[0]),Gt[0]>ct[2]&&(ct[2]=Gt[0]),Gt[1]<ct[1]&&(ct[1]=Gt[1]),Gt[1]>ct[3]&&(ct[3]=Gt[1])}function O(ct,Gt,Vt,ge,Ae){for(;Vt<ge;Vt+=Ae)P(ct,Gt[Vt],Gt[Vt+1]);return ct}function P(ct,Gt,Vt){ct[0]=Math.min(ct[0],Gt),ct[1]=Math.min(ct[1],Vt),ct[2]=Math.max(ct[2],Gt),ct[3]=Math.max(ct[3],Vt)}function E(ct,Gt){let Vt;return Vt=Gt(Z(ct)),!!(Vt||(Vt=Gt(A(ct)),Vt)||(Vt=Gt(Ot(ct)),Vt)||(Vt=Gt(Et(ct)),Vt))&&Vt}function W(ct){let Gt=0;return Ct(ct)||(Gt=Nt(ct)*tt(ct)),Gt}function Z(ct){return[ct[0],ct[1]]}function A(ct){return[ct[2],ct[1]]}function D(ct){return[(ct[0]+ct[2])/2,(ct[1]+ct[3])/2]}function R(ct,Gt){let Vt;if("bottom-left"===Gt)Vt=Z(ct);else if("bottom-right"===Gt)Vt=A(ct);else if("top-left"===Gt)Vt=Et(ct);else{if("top-right"!==Gt)throw new Error("Invalid corner");Vt=Ot(ct)}return Vt}function T(ct,Gt,Vt,ge,Ae){const[qe,ti,Ie,_t,zt,xe,$t,ze]=U(ct,Gt,Vt,ge);return o(Math.min(qe,Ie,zt,$t),Math.min(ti,_t,xe,ze),Math.max(qe,Ie,zt,$t),Math.max(ti,_t,xe,ze),Ae)}function U(ct,Gt,Vt,ge){const Ae=Gt*ge[0]/2,qe=Gt*ge[1]/2,ti=Math.cos(Vt),Ie=Math.sin(Vt),_t=Ae*ti,zt=Ae*Ie,xe=qe*ti,$t=qe*Ie,ze=ct[0],Xe=ct[1];return[ze-_t+$t,Xe-zt-xe,ze-_t-$t,Xe-zt+xe,ze+_t-$t,Xe+zt+xe,ze+_t+$t,Xe+zt-xe,ze-_t+$t,Xe-zt-xe]}function tt(ct){return ct[3]-ct[1]}function J(ct,Gt,Vt){const ge=Vt||[1/0,1/0,-1/0,-1/0];return ft(ct,Gt)?(ge[0]=ct[0]>Gt[0]?ct[0]:Gt[0],ge[1]=ct[1]>Gt[1]?ct[1]:Gt[1],ge[2]=ct[2]<Gt[2]?ct[2]:Gt[2],ge[3]=ct[3]<Gt[3]?ct[3]:Gt[3]):i(ge),ge}function Et(ct){return[ct[0],ct[3]]}function Ot(ct){return[ct[2],ct[3]]}function Nt(ct){return ct[2]-ct[0]}function ft(ct,Gt){return ct[0]<=Gt[2]&&ct[2]>=Gt[0]&&ct[1]<=Gt[3]&&ct[3]>=Gt[1]}function Ct(ct){return ct[2]<ct[0]||ct[3]<ct[1]}function Dt(ct,Gt){return Gt?(Gt[0]=ct[0],Gt[1]=ct[1],Gt[2]=ct[2],Gt[3]=ct[3],Gt):ct}function re(ct,Gt){const Vt=(ct[2]-ct[0])/2*(Gt-1),ge=(ct[3]-ct[1])/2*(Gt-1);ct[0]-=Vt,ct[2]+=Vt,ct[1]-=ge,ct[3]+=ge}function Jt(ct,Gt,Vt){let ge=!1;const Ae=m(ct,Gt),qe=m(ct,Vt);if(Ae===Y.A.INTERSECTING||qe===Y.A.INTERSECTING)ge=!0;else{const ti=ct[0],Ie=ct[1],_t=ct[2],zt=ct[3],ze=Vt[0],Xe=Vt[1],si=(Xe-Gt[1])/(ze-Gt[0]);let hi,et;qe&Y.A.ABOVE&&!(Ae&Y.A.ABOVE)&&(hi=ze-(Xe-zt)/si,ge=hi>=ti&&hi<=_t),!ge&&qe&Y.A.RIGHT&&!(Ae&Y.A.RIGHT)&&(et=Xe-(ze-_t)*si,ge=et>=Ie&&et<=zt),!ge&&qe&Y.A.BELOW&&!(Ae&Y.A.BELOW)&&(hi=ze-(Xe-Ie)/si,ge=hi>=ti&&hi<=_t),!ge&&qe&Y.A.LEFT&&!(Ae&Y.A.LEFT)&&(et=Xe-(ze-ti)*si,ge=et>=Ie&&et<=zt)}return ge}function ye(ct,Gt,Vt,ge){if(Ct(ct))return i(Vt);let Ae=[];if(ge>1){const Ie=ct[2]-ct[0],_t=ct[3]-ct[1];for(let zt=0;zt<ge;++zt)Ae.push(ct[0]+Ie*zt/ge,ct[1],ct[2],ct[1]+_t*zt/ge,ct[2]-Ie*zt/ge,ct[3],ct[0],ct[3]-_t*zt/ge)}else Ae=[ct[0],ct[1],ct[2],ct[1],ct[2],ct[3],ct[0],ct[3]];Gt(Ae,Ae,2);const qe=[],ti=[];for(let Ie=0,_t=Ae.length;Ie<_t;Ie+=2)qe.push(Ae[Ie]),ti.push(Ae[Ie+1]);return function Q(ct,Gt,Vt){return o(Math.min.apply(null,ct),Math.min.apply(null,Gt),Math.max.apply(null,ct),Math.max.apply(null,Gt),Vt)}(qe,ti,Vt)}function oe(ct,Gt){const Vt=Gt.getExtent(),ge=D(ct);if(Gt.canWrapX()&&(ge[0]<Vt[0]||ge[0]>=Vt[2])){const Ae=Nt(Vt),ti=Math.floor((ge[0]-Vt[0])/Ae)*Ae;ct[0]-=ti,ct[2]-=ti}return ct}function _e(ct,Gt,Vt){if(Gt.canWrapX()){const ge=Gt.getExtent();if(!isFinite(ct[0])||!isFinite(ct[2]))return[[ge[0],ct[1],ge[2],ct[3]]];oe(ct,Gt);const Ae=Nt(ge);if(Nt(ct)>Ae&&!Vt)return[[ge[0],ct[1],ge[2],ct[3]]];if(ct[0]<ge[0])return[[ct[0]+Ae,ct[1],ge[2],ct[3]],[ge[0],ct[1],ct[2],ct[3]]];if(ct[2]>ge[2])return[[ct[0],ct[1],ge[2],ct[3]],[ge[0],ct[1],ct[2]-Ae,ct[3]]]}return[ct]}},1524:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},6750:(le,pt,s)=>{"use strict";s.d(pt,{m8:()=>Q,nF:()=>$});var Y=s(1766);let z=!1;function Q(M,w,I,y,m,u,o){const i=new XMLHttpRequest;i.open("GET","function"==typeof M?M(I,y,m):M,!0),"arraybuffer"==w.getType()&&(i.responseType="arraybuffer"),i.withCredentials=z,i.onload=function(l){if(!i.status||i.status>=200&&i.status<300){const n=w.getType();try{let d;"text"==n||"json"==n?d=i.responseText:"xml"==n?d=i.responseXML||i.responseText:"arraybuffer"==n&&(d=i.response),d?u(w.readFeatures(d,{extent:I,featureProjection:m}),w.readProjection(d)):o()}catch{o()}}else o()},i.onerror=o,i.send()}function $(M,w){return function(I,y,m,u,o){const i=this;Q(M,w,I,y,m,function(l,n){i.addFeatures(l),void 0!==u&&u(l)},o||Y.tV)}}},3777:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>l,Bs:()=>C,hX:()=>n,te:()=>_});var Y=s(9557),z=s(2386),Q=s(8654),$=s(4249),L=s(4157),M=s(2879),w=s(5078),I=s(4367),y=s(1434),m=s(2383),u=s(9325),o=s(3834);const l=class i{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Y.A,this.supportedMediaTypes=null}getReadOptions(F,O){if(O){let X=O.dataProjection?(0,u.Jt)(O.dataProjection):this.readProjection(F);O.extent&&X&&"tile-pixels"===X.getUnits()&&(X=(0,u.Jt)(X),X.setWorldExtent(O.extent)),O={dataProjection:X,featureProjection:O.featureProjection}}return this.adaptOptions(O)}adaptOptions(F){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},F)}getType(){return(0,m.b0)()}readFeature(F,O){return(0,m.b0)()}readFeatures(F,O){return(0,m.b0)()}readGeometry(F,O){return(0,m.b0)()}readProjection(F){return(0,m.b0)()}writeFeature(F,O){return(0,m.b0)()}writeFeatures(F,O){return(0,m.b0)()}writeGeometry(F,O){return(0,m.b0)()}};function n(v,F,O){const X=O?(0,u.Jt)(O.featureProjection):null,P=O?(0,u.Jt)(O.dataProjection):null;let E=v;if(X&&P&&!(0,u.tI)(X,P)){F&&(E=v.clone());const W=F?X:P,Z=F?P:X;"tile-pixels"===W.getUnits()?E.transform(W,Z):E.applyTransform((0,u.RG)(W,Z))}if(F&&O&&void 0!==O.decimals){const W=Math.pow(10,O.decimals),Z=function(A){for(let D=0,R=A.length;D<R;++D)A[D]=Math.round(A[D]*W)/W;return A};E===v&&(E=v.clone()),E.applyTransform(Z)}return E}const f={Point:Q.A,LineString:$.A,Polygon:L.Ay,MultiPoint:M.A,MultiLineString:w.A,MultiPolygon:I.A};function C(v,F){const O=v.geometry;if(!O)return[];if(Array.isArray(O))return O.map(E=>C({...v,geometry:E})).flat();const X="MultiPolygon"===O.type?"Polygon":O.type;if("GeometryCollection"===X||"Circle"===X)throw new Error("Unsupported geometry type: "+X);const P=O.layout.length;return n(new z.Ay(X,"Polygon"===X?function r(v,F,O){return Array.isArray(F[0])?((0,o.mb)(v,0,F,O)||(v=v.slice(),(0,o.NK)(v,0,F,O)),v):((0,o.PA)(v,0,F,O)||(v=v.slice(),(0,o.ug)(v,0,F,O)),v)}(O.flatCoordinates,O.ends,P):O.flatCoordinates,O.ends?.flat(),P,v.properties||{},v.id).enableSimplifyTransformed(),!1,F)}function _(v,F){if(!v)return null;if(Array.isArray(v)){const X=v.map(P=>_(P,F));return new y.A(X)}return n(new(0,f[v.type])(v.flatCoordinates,v.layout,v.ends),!1,F)}},3672:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>W});var Y=s(9557),z=s(7651),Q=s(2386),$=s(3777),L=s(5625),M=s(1416),w=s(9325),I=s(9330);function m(Z,A){if(!Z)return null;let D;switch(Z.type){case"Point":D=function i(Z){const A=Z.coordinates;return{type:"Point",flatCoordinates:A,layout:(0,M.p0)(A.length)}}(Z);break;case"LineString":D=function l(Z){const A=Z.coordinates,D=A.flat();return{type:"LineString",flatCoordinates:D,ends:[D.length],layout:(0,M.p0)(A[0]?.length||2)}}(Z);break;case"Polygon":D=function r(Z){const A=Z.coordinates,D=[],R=A[0]?.[0]?.length;return{type:"Polygon",flatCoordinates:D,ends:(0,L.KG)(D,0,A,R),layout:(0,M.p0)(R)}}(Z);break;case"MultiPoint":D=function d(Z){const A=Z.coordinates;return{type:"MultiPoint",flatCoordinates:A.flat(),layout:(0,M.p0)(A[0]?.length||2)}}(Z);break;case"MultiLineString":D=function n(Z){const A=Z.coordinates,D=A[0]?.[0]?.length||2,R=[];return{type:"MultiLineString",flatCoordinates:R,ends:(0,L.KG)(R,0,A,D),layout:(0,M.p0)(D)}}(Z);break;case"MultiPolygon":D=function f(Z){const A=Z.coordinates,D=[],R=A[0]?.[0]?.[0].length||2;return{type:"MultiPolygon",flatCoordinates:D,ends:(0,L.d6)(D,0,A,R),layout:(0,M.p0)(R)}}(Z);break;case"GeometryCollection":D=function o(Z,A){return Z.geometries.map(function(R){return m(R)})}(Z);break;default:throw new Error("Unsupported GeoJSON type: "+Z.type)}return D}function C(Z,A){const D=(Z=(0,$.hX)(Z,!0,A)).getType();let R;switch(D){case"Point":R=function P(Z,A){return{type:"Point",coordinates:Z.getCoordinates()}}(Z);break;case"LineString":R=function v(Z,A){return{type:"LineString",coordinates:Z.getCoordinates()}}(Z);break;case"Polygon":R=function E(Z,A){let D;return A&&(D=A.rightHanded),{type:"Polygon",coordinates:Z.getCoordinates(D)}}(Z,A);break;case"MultiPoint":R=function O(Z,A){return{type:"MultiPoint",coordinates:Z.getCoordinates()}}(Z);break;case"MultiLineString":R=function F(Z,A){return{type:"MultiLineString",coordinates:Z.getCoordinates()}}(Z);break;case"MultiPolygon":R=function X(Z,A){let D;return A&&(D=A.rightHanded),{type:"MultiPolygon",coordinates:Z.getCoordinates(D)}}(Z,A);break;case"GeometryCollection":R=function _(Z,A){return delete(A=Object.assign({},A)).featureProjection,{type:"GeometryCollection",geometries:Z.getGeometriesArray().map(function(R){return C(R,A)})}}(Z,A);break;case"Circle":R={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+D)}return R}const W=class y extends z.A{constructor(A){A=A||{},super(),this.dataProjection=(0,w.Jt)(A.dataProjection?A.dataProjection:"EPSG:4326"),A.featureProjection&&(this.defaultFeatureProjection=(0,w.Jt)(A.featureProjection)),A.featureClass&&(this.featureClass=A.featureClass),this.geometryName_=A.geometryName,this.extractGeometryName_=A.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(A,D){let R=null;R="Feature"===A.type?A:{type:"Feature",geometry:A,properties:null};const x=m(R.geometry);if(this.featureClass===Q.Ay)return(0,$.Bs)({geometry:x,id:R.id,properties:R.properties},D);const T=new Y.A;return this.geometryName_?T.setGeometryName(this.geometryName_):this.extractGeometryName_&&R.geometry_name&&T.setGeometryName(R.geometry_name),T.setGeometry((0,$.te)(x,D)),"id"in R&&T.setId(R.id),R.properties&&T.setProperties(R.properties,!0),T}readFeaturesFromObject(A,D){let x=null;if("FeatureCollection"===A.type){x=[];const U=A.features;for(let tt=0,it=U.length;tt<it;++tt){const J=this.readFeatureFromObject(U[tt],D);J&&x.push(J)}}else x=[this.readFeatureFromObject(A,D)];return x.flat()}readGeometryFromObject(A,D){return function u(Z,A){const D=m(Z);return(0,$.te)(D,A)}(A,D)}readProjectionFromObject(A){const D=A.crs;let R;if(D)if("name"==D.type)R=(0,w.Jt)(D.properties.name);else{if("EPSG"!==D.type)throw new Error("Unknown SRS type");R=(0,w.Jt)("EPSG:"+D.properties.code)}else R=this.dataProjection;return R}writeFeatureObject(A,D){D=this.adaptOptions(D);const R={type:"Feature",geometry:null,properties:null},x=A.getId();if(void 0!==x&&(R.id=x),!A.hasProperties())return R;const T=A.getProperties(),U=A.getGeometry();return U&&(R.geometry=C(U,D),delete T[A.getGeometryName()]),(0,I.p)(T)||(R.properties=T),R}writeFeaturesObject(A,D){D=this.adaptOptions(D);const R=[];for(let x=0,T=A.length;x<T;++x)R.push(this.writeFeatureObject(A[x],D));return{type:"FeatureCollection",features:R}}writeGeometryObject(A,D){return C(A,this.adaptOptions(D))}}},7651:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>L});var Y=s(3777),z=s(2383);function $(M){return"string"==typeof M?JSON.parse(M)||null:null!==M?M:null}const L=class Q extends Y.Ay{constructor(){super()}getType(){return"json"}readFeature(w,I){return this.readFeatureFromObject($(w),this.getReadOptions(w,I))}readFeatures(w,I){return this.readFeaturesFromObject($(w),this.getReadOptions(w,I))}readFeatureFromObject(w,I){return(0,z.b0)()}readFeaturesFromObject(w,I){return(0,z.b0)()}readGeometry(w,I){return this.readGeometryFromObject($(w),this.getReadOptions(w,I))}readGeometryFromObject(w,I){return(0,z.b0)()}readProjection(w){return this.readProjectionFromObject($(w))}readProjectionFromObject(w){return(0,z.b0)()}writeFeature(w,I){return JSON.stringify(this.writeFeatureObject(w,I))}writeFeatureObject(w,I){return(0,z.b0)()}writeFeatures(w,I){return JSON.stringify(this.writeFeaturesObject(w,I))}writeFeaturesObject(w,I){return(0,z.b0)()}writeGeometry(w,I){return JSON.stringify(this.writeGeometryObject(w,I))}writeGeometryObject(w,I){return(0,z.b0)()}}},1780:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>Hr});var Y=s(9557),z=s(1540),Q=s(1434),$=s(5804),L=s(2661),M=s(4249),w=s(5078),I=s(2879),y=s(4367),m=s(8654),u=s(4157),o=s(5409),i=s(9380),l=s(730),n=s(3777),d=s(2383),f=s(2058),r=s(3566);const _=class C extends n.Ay{constructor(){super(),this.xmlSerializer_=(0,r.mc)()}getType(){return"xml"}readFeature(gt,yt){if(!gt)return null;if("string"==typeof gt){const Tt=(0,r.qg)(gt);return this.readFeatureFromDocument(Tt,yt)}return(0,r.wz)(gt)?this.readFeatureFromDocument(gt,yt):this.readFeatureFromNode(gt,yt)}readFeatureFromDocument(gt,yt){const Tt=this.readFeaturesFromDocument(gt,yt);return Tt.length>0?Tt[0]:null}readFeatureFromNode(gt,yt){return null}readFeatures(gt,yt){if(!gt)return[];if("string"==typeof gt){const Tt=(0,r.qg)(gt);return this.readFeaturesFromDocument(Tt,yt)}return(0,r.wz)(gt)?this.readFeaturesFromDocument(gt,yt):this.readFeaturesFromNode(gt,yt)}readFeaturesFromDocument(gt,yt){const Tt=[];for(let qt=gt.firstChild;qt;qt=qt.nextSibling)qt.nodeType==Node.ELEMENT_NODE&&(0,f.X$)(Tt,this.readFeaturesFromNode(qt,yt));return Tt}readFeaturesFromNode(gt,yt){return(0,d.b0)()}readGeometry(gt,yt){if(!gt)return null;if("string"==typeof gt){const Tt=(0,r.qg)(gt);return this.readGeometryFromDocument(Tt,yt)}return(0,r.wz)(gt)?this.readGeometryFromDocument(gt,yt):this.readGeometryFromNode(gt,yt)}readGeometryFromDocument(gt,yt){return null}readGeometryFromNode(gt,yt){return null}readProjection(gt){if(!gt)return null;if("string"==typeof gt){const yt=(0,r.qg)(gt);return this.readProjectionFromDocument(yt)}return(0,r.wz)(gt)?this.readProjectionFromDocument(gt):this.readProjectionFromNode(gt)}readProjectionFromDocument(gt){return this.dataProjection}readProjectionFromNode(gt){return this.dataProjection}writeFeature(gt,yt){const Tt=this.writeFeatureNode(gt,yt);return this.xmlSerializer_.serializeToString(Tt)}writeFeatureNode(gt,yt){return null}writeFeatures(gt,yt){const Tt=this.writeFeaturesNode(gt,yt);return this.xmlSerializer_.serializeToString(Tt)}writeFeaturesNode(gt,yt){return null}writeGeometry(gt,yt){const Tt=this.writeGeometryNode(gt,yt);return this.xmlSerializer_.serializeToString(Tt)}writeGeometryNode(gt,yt){return null}};var v=s(1962),F=s(9325),O=s(4628),X=s(9973);const P=["http://www.google.com/kml/ext/2.2"],E=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Z={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},A=(0,r.Dm)(E,{ExtendedData:ps,Region:Ds,MultiGeometry:(0,r.kW)(Ei,"geometry"),LineString:(0,r.kW)(vi,"geometry"),LinearRing:(0,r.kW)(Bn,"geometry"),Point:(0,r.kW)(Vi,"geometry"),Polygon:(0,r.kW)(Zn,"geometry"),Style:(0,r.kW)(Gi),StyleMap:function es(Ee,gt){const yt=K.call(this,Ee,gt);if(!yt)return;const Tt=gt[gt.length-1];if(Array.isArray(yt))Tt.Style=yt;else{if("string"!=typeof yt)throw new Error("`styleMapValue` has an unknown type");Tt.styleUrl=yt}},address:(0,r.kW)(O.E3),description:(0,r.kW)(O.E3),name:(0,r.kW)(O.E3),open:(0,r.kW)(O.Vf),phoneNumber:(0,r.kW)(O.E3),styleUrl:(0,r.kW)(et),visibility:(0,r.kW)(O.Vf)},(0,r.Dm)(P,{MultiTrack:(0,r.kW)(function ni(Ee,gt){const yt=(0,r.eY)([],Mi,Ee,gt);if(yt)return new w.A(yt)},"geometry"),Track:(0,r.kW)(Ni,"geometry")})),D=(0,r.Dm)(E,{ExtendedData:ps,Region:Ds,Link:function Qi(Ee,gt){(0,r.UN)(R,Ee,gt)},address:(0,r.kW)(O.E3),description:(0,r.kW)(O.E3),name:(0,r.kW)(O.E3),open:(0,r.kW)(O.Vf),phoneNumber:(0,r.kW)(O.E3),visibility:(0,r.kW)(O.Vf)}),R=(0,r.Dm)(E,{href:(0,r.kW)(hi)}),x=(0,r.Dm)(E,{Altitude:(0,r.kW)(O.e4),Longitude:(0,r.kW)(O.e4),Latitude:(0,r.kW)(O.e4),Tilt:(0,r.kW)(O.e4),AltitudeMode:(0,r.kW)(O.E3),Heading:(0,r.kW)(O.e4),Roll:(0,r.kW)(O.e4)}),T=(0,r.Dm)(E,{LatLonAltBox:function tn(Ee,gt){const yt=(0,r.eY)({},or,Ee,gt);if(!yt)return;const Tt=gt[gt.length-1],qt=[parseFloat(yt.west),parseFloat(yt.south),parseFloat(yt.east),parseFloat(yt.north)];Tt.extent=qt,Tt.altitudeMode=yt.altitudeMode,Tt.minAltitude=parseFloat(yt.minAltitude),Tt.maxAltitude=parseFloat(yt.maxAltitude)},Lod:function Zi(Ee,gt){const yt=(0,r.eY)({},_n,Ee,gt);if(!yt)return;const Tt=gt[gt.length-1];Tt.minLodPixels=parseFloat(yt.minLodPixels),Tt.maxLodPixels=parseFloat(yt.maxLodPixels),Tt.minFadeExtent=parseFloat(yt.minFadeExtent),Tt.maxFadeExtent=parseFloat(yt.maxFadeExtent)}}),U=(0,r.Dm)(E,["Document","Placemark"]),tt=(0,r.Dm)(E,{Document:(0,r.mm)(function zs(Ee,gt,yt){(0,r.NQ)({node:Ee},vn,is,gt,yt,void 0,this)}),Placemark:(0,r.mm)(Es)});let it,mt,Et,Ot,Nt,ft,re,oe,Ie,J=null,Ct=null,Jt=null,_e=null,Gt=null,ge=null;function qe(Ee){return 32/Math.min(Ee[0],Ee[1])}function _t(Ee){return Ee}function ze(Ee,gt,yt){return Array.isArray(Ee)?Ee:"string"==typeof Ee?ze(yt[Ee],gt,yt):gt}function Xe(Ee){const gt=(0,r.mT)(Ee,!1),yt=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(gt);if(yt){const Tt=yt[1];return[parseInt(Tt.substr(6,2),16),parseInt(Tt.substr(4,2),16),parseInt(Tt.substr(2,2),16),parseInt(Tt.substr(0,2),16)/255]}}function si(Ee){let gt=(0,r.mT)(Ee,!1);const yt=[];gt=gt.replace(/\s*,\s*/g,",");const Tt=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let qt;for(;qt=Tt.exec(gt);){const Se=parseFloat(qt[1]),Fe=parseFloat(qt[2]),Je=qt[3]?parseFloat(qt[3]):0;yt.push(Se,Fe,Je),gt=gt.substr(qt[0].length)}if(""===gt)return yt}function hi(Ee){const gt=(0,r.mT)(Ee,!1).trim();let yt=Ee.baseURI;return(!yt||"about:blank"==yt)&&(yt=window.location.href),yt?new URL(gt,yt).href:gt}function et(Ee){const gt=(0,r.mT)(Ee,!1).trim().replace(/^(?!.*#)/,"#");let yt=Ee.baseURI;return(!yt||"about:blank"==yt)&&(yt=window.location.href),yt?new URL(gt,yt).href:gt}function g(Ee){return(0,O.e4)(Ee)}const S=(0,r.Dm)(E,{Pair:function cs(Ee,gt){const yt=(0,r.eY)({},on,Ee,gt,this);if(!yt)return;const Tt=yt.key;if(Tt&&"normal"==Tt){const qt=yt.styleUrl;qt&&(gt[gt.length-1]=qt);const Se=yt.Style;Se&&(gt[gt.length-1]=Se)}}});function K(Ee,gt){return(0,r.eY)(void 0,S,Ee,gt,this)}const B=(0,r.Dm)(E,{Icon:(0,r.kW)(function Ji(Ee,gt){return(0,r.eY)({},$i,Ee,gt)||null}),color:(0,r.kW)(Xe),heading:(0,r.kW)(O.e4),hotSpot:(0,r.kW)(function N(Ee){const gt=Ee.getAttribute("xunits"),yt=Ee.getAttribute("yunits");let Tt;return Tt="insetPixels"!==gt?"insetPixels"!==yt?"bottom-left":"top-left":"insetPixels"!==yt?"bottom-right":"top-right",{x:parseFloat(Ee.getAttribute("x")),xunits:Z[gt],y:parseFloat(Ee.getAttribute("y")),yunits:Z[yt],origin:Tt}}),scale:(0,r.kW)(g)}),dt=(0,r.Dm)(E,{color:(0,r.kW)(Xe),scale:(0,r.kW)(g)}),Wt=(0,r.Dm)(E,{color:(0,r.kW)(Xe),width:(0,r.kW)(O.e4)}),ce=(0,r.Dm)(E,{color:(0,r.kW)(Xe),fill:(0,r.kW)(O.Vf),outline:(0,r.kW)(O.Vf)}),He=(0,r.Dm)(E,{coordinates:(0,r.Tb)(si)});function We(Ee,gt){return(0,r.eY)(null,He,Ee,gt)}const Mi=(0,r.Dm)(P,{Track:(0,r.VT)(Ni)}),Ii=(0,r.Dm)(E,{when:function Ki(Ee,gt){const Tt=gt[gt.length-1].whens,qt=(0,r.mT)(Ee,!1),Se=Date.parse(qt);Tt.push(isNaN(Se)?0:Se)}},(0,r.Dm)(P,{coord:function bi(Ee,gt){const Tt=gt[gt.length-1].coordinates,qt=(0,r.mT)(Ee,!1),Fe=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(qt);if(Fe){const Je=parseFloat(Fe[1]),ei=parseFloat(Fe[2]),_i=parseFloat(Fe[3]);Tt.push([Je,ei,_i])}else Tt.push([])}}));function Ni(Ee,gt){const yt=(0,r.eY)({coordinates:[],whens:[]},Ii,Ee,gt);if(!yt)return;const Tt=[],qt=yt.coordinates,Se=yt.whens;for(let Fe=0,Je=Math.min(qt.length,Se.length);Fe<Je;++Fe)3==qt[Fe].length&&Tt.push(qt[Fe][0],qt[Fe][1],qt[Fe][2],Se[Fe]);return new M.A(Tt,"XYZM")}const $i=(0,r.Dm)(E,{href:(0,r.kW)(hi)},(0,r.Dm)(P,{x:(0,r.kW)(O.e4),y:(0,r.kW)(O.e4),w:(0,r.kW)(O.e4),h:(0,r.kW)(O.e4)})),zi=(0,r.Dm)(E,{coordinates:(0,r.Tb)(si)});function Ri(Ee,gt){return(0,r.eY)(null,zi,Ee,gt)}const ui=(0,r.Dm)(E,{extrude:(0,r.kW)(O.Vf),tessellate:(0,r.kW)(O.Vf),altitudeMode:(0,r.kW)(O.E3)});function vi(Ee,gt){const yt=(0,r.eY)({},ui,Ee,gt),Tt=Ri(Ee,gt);if(Tt){const qt=new M.A(Tt,"XYZ");return qt.setProperties(yt,!0),qt}}function Bn(Ee,gt){const yt=(0,r.eY)({},ui,Ee,gt),Tt=Ri(Ee,gt);if(Tt){const qt=new u.Ay(Tt,"XYZ",[Tt.length]);return qt.setProperties(yt,!0),qt}}const ln=(0,r.Dm)(E,{LineString:(0,r.VT)(vi),LinearRing:(0,r.VT)(Bn),MultiGeometry:(0,r.VT)(Ei),Point:(0,r.VT)(Vi),Polygon:(0,r.VT)(Zn)});function Ei(Ee,gt){const yt=(0,r.eY)([],ln,Ee,gt);if(!yt)return null;if(0===yt.length)return new Q.A(yt);let Tt,qt=!0;const Se=yt[0].getType();let Fe;for(let Je=1,ei=yt.length;Je<ei;++Je)if(Fe=yt[Je],Fe.getType()!=Se){qt=!1;break}if(qt){let Je,ei;if("Point"==Se){const _i=yt[0];Je=_i.getLayout(),ei=_i.getFlatCoordinates();for(let Ai=1,Bi=yt.length;Ai<Bi;++Ai)Fe=yt[Ai],(0,f.X$)(ei,Fe.getFlatCoordinates());Tt=new I.A(ei,Je),Hn(Tt,yt)}else if("LineString"==Se)Tt=new w.A(yt),Hn(Tt,yt);else if("Polygon"==Se)Tt=new y.A(yt),Hn(Tt,yt);else{if("GeometryCollection"!=Se)throw new Error("Unknown geometry type found");Tt=new Q.A(yt)}}else Tt=new Q.A(yt);return Tt}function Vi(Ee,gt){const yt=(0,r.eY)({},ui,Ee,gt),Tt=Ri(Ee,gt);if(Tt){const qt=new m.A(Tt,"XYZ");return qt.setProperties(yt,!0),qt}}const Sn=(0,r.Dm)(E,{innerBoundaryIs:function Dn(Ee,gt){const yt=(0,r.eY)([],pn,Ee,gt);yt.length>0&&gt[gt.length-1].push(...yt)},outerBoundaryIs:function Ln(Ee,gt){const yt=(0,r.eY)(void 0,zn,Ee,gt);yt&&(gt[gt.length-1][0]=yt)}});function Zn(Ee,gt){const yt=(0,r.eY)({},ui,Ee,gt),Tt=(0,r.eY)([null],Sn,Ee,gt);if(Tt&&Tt[0]){const qt=Tt[0],Se=[qt.length];for(let Je=1,ei=Tt.length;Je<ei;++Je)(0,f.X$)(qt,Tt[Je]),Se.push(qt.length);const Fe=new u.Ay(qt,"XYZ",Se);return Fe.setProperties(yt,!0),Fe}}const Ye=(0,r.Dm)(E,{IconStyle:function ot(Ee,gt){const yt=(0,r.eY)({},B,Ee,gt);if(!yt)return;const Tt=gt[gt.length-1],qt="Icon"in yt?yt.Icon:{},Se=!("Icon"in yt)||Object.keys(qt).length>0;let Fe;const Je=qt.href;Je?Fe=Je:Se&&(Fe=ft);let ei,_i,Ai,Bi="bottom-left";const ki=yt.hotSpot;let cn;ki?(ei=[ki.x,ki.y],_i=ki.xunits,Ai=ki.yunits,Bi=ki.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(Fe)&&(Fe.includes("pushpin")?(ei=mt,_i=Et,Ai=Ot):Fe.includes("arrow-reverse")?(ei=[54,42],_i=Et,Ai=Ot):Fe.includes("paddle")&&(ei=[32,1],_i=Et,Ai=Ot));const en=qt.x,os=qt.y;let nn;void 0!==en&&void 0!==os&&(cn=[en,os]);const Rn=qt.w,En=qt.h;let Kn;void 0!==Rn&&void 0!==En&&(nn=[Rn,En]);const In=yt.heading;void 0!==In&&(Kn=(0,X.eh)(In));const Xn=yt.color;if(Se){Fe==ft&&(nn=Nt);const Vn=new $.A({anchor:ei,anchorOrigin:Bi,anchorXUnits:_i,anchorYUnits:Ai,crossOrigin:this.crossOrigin_,offset:cn,offsetOrigin:"bottom-left",rotation:Kn,scale:yt.scale,size:nn,src:this.iconUrlFunction_(Fe),color:Xn}),js=Vn.getScaleArray()[0],Ys=Vn.getSize();if(null===Ys){const Zs=Vn.getImageState();if(Zs===L.A.IDLE||Zs===L.A.LOADING){const yr=function(){const vr=Vn.getImageState();if(vr!==L.A.IDLE&&vr!==L.A.LOADING){const Er=Vn.getSize();if(Er&&2==Er.length){const jr=qe(Er);Vn.setScale(js*jr)}Vn.unlistenImageChange(yr)}};Vn.listenImageChange(yr),Zs===L.A.IDLE&&Vn.load()}}else if(2==Ys.length){const Zs=qe(Ys);Vn.setScale(js*Zs)}Tt.imageStyle=Vn}else Tt.imageStyle=re},LabelStyle:function It(Ee,gt){const yt=(0,r.eY)({},dt,Ee,gt);if(!yt)return;const Tt=gt[gt.length-1],qt=new l.A({fill:new z.A({color:"color"in yt?yt.color:it}),scale:yt.scale});Tt.textStyle=qt},LineStyle:function pe(Ee,gt){const yt=(0,r.eY)({},Wt,Ee,gt);if(!yt)return;const Tt=gt[gt.length-1],qt=new o.A({color:"color"in yt?yt.color:it,width:"width"in yt?yt.width:1});Tt.strokeStyle=qt},PolyStyle:function Ne(Ee,gt){const yt=(0,r.eY)({},ce,Ee,gt);if(!yt)return;const Tt=gt[gt.length-1],qt=new z.A({color:"color"in yt?yt.color:it});Tt.fillStyle=qt;const Se=yt.fill;void 0!==Se&&(Tt.fill=Se);const Fe=yt.outline;void 0!==Fe&&(Tt.outline=Fe)}});function Gi(Ee,gt){const yt=(0,r.eY)({},Ye,Ee,gt,this);if(!yt)return null;let Tt="fillStyle"in yt?yt.fillStyle:J;const qt=yt.fill;let Se;void 0!==qt&&!qt&&(Tt=null),"imageStyle"in yt?yt.imageStyle!=re&&(Se=yt.imageStyle):Se=Ct;const Fe="textStyle"in yt?yt.textStyle:_e,Je="strokeStyle"in yt?yt.strokeStyle:Jt,ei=yt.outline;return void 0===ei||ei?[new i.Ay({fill:Tt,image:Se,stroke:Je,text:Fe,zIndex:void 0})]:[new i.Ay({geometry:function(_i){const Ai=_i.getGeometry(),Bi=Ai.getType();return"GeometryCollection"===Bi?new Q.A(Ai.getGeometriesArrayRecursive().filter(function(cn){const en=cn.getType();return"Polygon"!==en&&"MultiPolygon"!==en})):"Polygon"!==Bi&&"MultiPolygon"!==Bi?Ai:void 0},fill:Tt,image:Se,stroke:Je,text:Fe,zIndex:void 0}),new i.Ay({geometry:function(_i){const Ai=_i.getGeometry(),Bi=Ai.getType();return"GeometryCollection"===Bi?new Q.A(Ai.getGeometriesArrayRecursive().filter(function(cn){const en=cn.getType();return"Polygon"===en||"MultiPolygon"===en})):"Polygon"===Bi||"MultiPolygon"===Bi?Ai:void 0},fill:Tt,stroke:null,zIndex:void 0})]}function Hn(Ee,gt){const yt=gt.length,Tt=new Array(gt.length),qt=new Array(gt.length),Se=new Array(gt.length);let Fe,Je,ei;Fe=!1,Je=!1,ei=!1;for(let _i=0;_i<yt;++_i){const Ai=gt[_i];Tt[_i]=Ai.get("extrude"),qt[_i]=Ai.get("tessellate"),Se[_i]=Ai.get("altitudeMode"),Fe=Fe||void 0!==Tt[_i],Je=Je||void 0!==qt[_i],ei=ei||Se[_i]}Fe&&Ee.set("extrude",Tt),Je&&Ee.set("tessellate",qt),ei&&Ee.set("altitudeMode",Se)}const rr=(0,r.Dm)(E,{displayName:(0,r.kW)(O.E3),value:(0,r.kW)(O.E3)}),_s=(0,r.Dm)(E,{Data:function An(Ee,gt){const yt=Ee.getAttribute("name");(0,r.UN)(rr,Ee,gt);const Tt=gt[gt.length-1];yt&&Tt.displayName?Tt[yt]={value:Tt.value,displayName:Tt.displayName,toString:function(){return Tt.value}}:null!==yt?Tt[yt]=Tt.value:null!==Tt.displayName&&(Tt[Tt.displayName]=Tt.value),delete Tt.value},SchemaData:function ys(Ee,gt){(0,r.UN)(ks,Ee,gt)}});function ps(Ee,gt){(0,r.UN)(_s,Ee,gt)}function Ds(Ee,gt){(0,r.UN)(T,Ee,gt)}const on=(0,r.Dm)(E,{Style:(0,r.kW)(Gi),key:(0,r.kW)(O.E3),styleUrl:(0,r.kW)(et)}),ks=(0,r.Dm)(E,{SimpleData:function us(Ee,gt){const yt=Ee.getAttribute("name");if(null!==yt){const Tt=(0,O.E3)(Ee);gt[gt.length-1][yt]=Tt}}}),or=(0,r.Dm)(E,{altitudeMode:(0,r.kW)(O.E3),minAltitude:(0,r.kW)(O.e4),maxAltitude:(0,r.kW)(O.e4),north:(0,r.kW)(O.e4),south:(0,r.kW)(O.e4),east:(0,r.kW)(O.e4),west:(0,r.kW)(O.e4)}),_n=(0,r.Dm)(E,{minLodPixels:(0,r.kW)(O.e4),maxLodPixels:(0,r.kW)(O.e4),minFadeExtent:(0,r.kW)(O.e4),maxFadeExtent:(0,r.kW)(O.e4)}),pn=(0,r.Dm)(E,{LinearRing:(0,r.VT)(We)}),zn=(0,r.Dm)(E,{LinearRing:(0,r.Tb)(We)});function Tn(Ee,gt){const yt=(0,v._j)(gt),qt=[255*(4==yt.length?yt[3]:1),yt[2],yt[1],yt[0]];for(let Se=0;Se<4;++Se){const Fe=Math.floor(qt[Se]).toString(16);qt[Se]=1==Fe.length?"0"+Fe:Fe}(0,O.uB)(Ee,qt.join(""))}const Ls=(0,r.Dm)(E,{Data:(0,r.mm)(function Wn(Ee,gt,yt){Ee.setAttribute("name",gt.name);const Tt={node:Ee},qt=gt.value;"object"==typeof qt?(null!==qt&&qt.displayName&&(0,r.NQ)(Tt,Ls,r.OL,[qt.displayName],yt,["displayName"]),null!==qt&&qt.value&&(0,r.NQ)(Tt,Ls,r.OL,[qt.value],yt,["value"])):(0,r.NQ)(Tt,Ls,r.OL,[qt],yt,["value"])}),value:(0,r.mm)(function $n(Ee,gt){(0,O.uB)(Ee,gt)}),displayName:(0,r.mm)(function yn(Ee,gt){(0,O.Gc)(Ee,gt)})}),vn=(0,r.Dm)(E,{Placemark:(0,r.mm)(Es)}),is=function(Ee,gt,yt){return(0,r.qq)(gt[gt.length-1].node.namespaceURI,"Placemark")},Ks=(0,r.X1)("Data"),Xs=(0,r.Dm)(E,["href"],(0,r.Dm)(P,["x","y","w","h"])),vs=(0,r.Dm)(E,{href:(0,r.mm)(O.uB)},(0,r.Dm)(P,{x:(0,r.mm)(O.Ko),y:(0,r.mm)(O.Ko),w:(0,r.mm)(O.Ko),h:(0,r.mm)(O.Ko)})),Ir=function(Ee,gt,yt){return(0,r.qq)(P[0],"gx:"+yt)},Fr=(0,r.Dm)(E,["scale","heading","Icon","color","hotSpot"]),Yr=(0,r.Dm)(E,{Icon:(0,r.mm)(function Vr(Ee,gt,yt){const Tt={node:Ee};let Se=Xs[yt[yt.length-1].node.namespaceURI],Fe=(0,r.Gl)(gt,Se);(0,r.NQ)(Tt,vs,r.OL,Fe,yt,Se),Se=Xs[P[0]],Fe=(0,r.Gl)(gt,Se),(0,r.NQ)(Tt,vs,Ir,Fe,yt,Se)}),color:(0,r.mm)(Tn),heading:(0,r.mm)(O.Ko),hotSpot:(0,r.mm)(function Ur(Ee,gt){Ee.setAttribute("x",String(gt.x)),Ee.setAttribute("y",String(gt.y)),Ee.setAttribute("xunits",gt.xunits),Ee.setAttribute("yunits",gt.yunits)}),scale:(0,r.mm)(Ns)}),br=(0,r.Dm)(E,["color","scale"]),Qn=(0,r.Dm)(E,{color:(0,r.mm)(Tn),scale:(0,r.mm)(Ns)}),ns=(0,r.Dm)(E,["color","width"]),qn=(0,r.Dm)(E,{color:(0,r.mm)(Tn),width:(0,r.mm)(O.Ko)}),ts={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},hn=function(Ee,gt,yt){if(Ee)return(0,r.qq)(gt[gt.length-1].node.namespaceURI,ts[Ee.getType()])},Cn=(0,r.X1)("Point"),mr=(0,r.X1)("LineString"),lr=(0,r.X1)("LinearRing"),hr=(0,r.X1)("Polygon"),_r=(0,r.Dm)(E,{LineString:(0,r.mm)(pi),Point:(0,r.mm)(pi),Polygon:(0,r.mm)(qi),GeometryCollection:(0,r.mm)(fs)});function fs(Ee,gt,yt){const Tt={node:Ee},qt=gt.getType();let Fe,Se=[];if("GeometryCollection"===qt)gt.getGeometriesArrayRecursive().forEach(function(Je){const ei=Je.getType();if("MultiPoint"===ei)Se=Se.concat(Je.getPoints());else if("MultiLineString"===ei)Se=Se.concat(Je.getLineStrings());else if("MultiPolygon"===ei)Se=Se.concat(Je.getPolygons());else{if("Point"!==ei&&"LineString"!==ei&&"Polygon"!==ei)throw new Error("Unknown geometry type");Se.push(Je)}}),Fe=hn;else if("MultiPoint"===qt)Se=gt.getPoints(),Fe=Cn;else if("MultiLineString"===qt)Se=gt.getLineStrings(),Fe=mr;else{if("MultiPolygon"!==qt)throw new Error("Unknown geometry type");Se=gt.getPolygons(),Fe=hr}(0,r.NQ)(Tt,_r,Fe,Se,yt)}const wr=(0,r.Dm)(E,{LinearRing:(0,r.mm)(pi)});function Pn(Ee,gt,yt){(0,r.NQ)({node:Ee},wr,lr,[gt],yt)}const Vs=(0,r.Dm)(E,{ExtendedData:(0,r.mm)(function Jn(Ee,gt,yt){const Tt={node:Ee},qt=gt.names,Se=gt.values,Fe=qt.length;for(let Je=0;Je<Fe;Je++)(0,r.NQ)(Tt,Ls,Ks,[{name:qt[Je],value:Se[Je]}],yt)}),MultiGeometry:(0,r.mm)(fs),LineString:(0,r.mm)(pi),LinearRing:(0,r.mm)(pi),Point:(0,r.mm)(pi),Polygon:(0,r.mm)(qi),Style:(0,r.mm)(function Zr(Ee,gt,yt){const Tt={node:Ee},qt={};if(gt.pointStyles.length){const ei=gt.pointStyles[0].getText();ei&&(qt.LabelStyle=ei);const _i=gt.pointStyles[0].getImage();_i&&"function"==typeof _i.getSrc&&(qt.IconStyle=_i)}if(gt.lineStyles.length){const ei=gt.lineStyles[0].getStroke();ei&&(qt.LineStyle=ei)}if(gt.polyStyles.length){const ei=gt.polyStyles[0].getStroke();ei&&!qt.LineStyle&&(qt.LineStyle=ei),qt.PolyStyle=gt.polyStyles[0]}const Fe=Di[yt[yt.length-1].node.namespaceURI],Je=(0,r.Gl)(qt,Fe);(0,r.NQ)(Tt,Nr,r.OL,Je,yt,Fe)}),address:(0,r.mm)(O.uB),description:(0,r.mm)(O.uB),name:(0,r.mm)(O.uB),open:(0,r.mm)(O.Z3),phoneNumber:(0,r.mm)(O.uB),styleUrl:(0,r.mm)(O.uB),visibility:(0,r.mm)(O.Z3)}),pr=(0,r.Dm)(E,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Fs=(0,r.X1)("ExtendedData");function Es(Ee,gt,yt){const Tt={node:Ee};gt.getId()&&Ee.setAttribute("id",gt.getId());const qt=gt.getProperties(),Se={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};Se[gt.getGeometryName()]=1;const Fe=Object.keys(qt||{}).sort().filter(function(cn){return!Se[cn]}),Je=gt.getStyleFunction();if(Je){const cn=Je(gt,0);if(cn){const en=Array.isArray(cn)?cn:[cn];let os=en;if(gt.getGeometry()&&(os=en.filter(function(nn){const Rn=nn.getGeometryFunction()(gt);if(Rn){const En=Rn.getType();return"GeometryCollection"===En?Rn.getGeometriesArrayRecursive().filter(function(Kn){const In=Kn.getType();return"Point"===In||"MultiPoint"===In}).length:"Point"===En||"MultiPoint"===En}})),this.writeStyles_){let nn=en,Rn=en;gt.getGeometry()&&(nn=en.filter(function(En){const Kn=En.getGeometryFunction()(gt);if(Kn){const In=Kn.getType();return"GeometryCollection"===In?Kn.getGeometriesArrayRecursive().filter(function(Us){const Xn=Us.getType();return"LineString"===Xn||"MultiLineString"===Xn}).length:"LineString"===In||"MultiLineString"===In}}),Rn=en.filter(function(En){const Kn=En.getGeometryFunction()(gt);if(Kn){const In=Kn.getType();return"GeometryCollection"===In?Kn.getGeometriesArrayRecursive().filter(function(Us){const Xn=Us.getType();return"Polygon"===Xn||"MultiPolygon"===Xn}).length:"Polygon"===In||"MultiPolygon"===In}})),qt.Style={pointStyles:os,lineStyles:nn,polyStyles:Rn}}if(os.length&&void 0===qt.name){const nn=os[0].getText();nn&&(qt.name=nn.getText())}}}const _i=pr[yt[yt.length-1].node.namespaceURI],Ai=(0,r.Gl)(qt,_i);if((0,r.NQ)(Tt,Vs,r.OL,Ai,yt,_i),Fe.length>0){const cn=(0,r.Gl)(qt,Fe);(0,r.NQ)(Tt,Vs,Fs,[{names:Fe,values:cn}],yt)}const Bi=yt[0];let ki=gt.getGeometry();ki&&(ki=(0,n.hX)(ki,!0,Bi)),(0,r.NQ)(Tt,Vs,hn,[ki],yt)}const Rs=(0,r.Dm)(E,["extrude","tessellate","altitudeMode","coordinates"]),mi=(0,r.Dm)(E,{extrude:(0,r.mm)(O.Z3),tessellate:(0,r.mm)(O.Z3),altitudeMode:(0,r.mm)(O.uB),coordinates:(0,r.mm)(function Ps(Ee,gt,yt){const Tt=yt[yt.length-1],qt=Tt.layout,Se=Tt.stride;let Fe;if("XY"==qt||"XYM"==qt)Fe=2;else{if("XYZ"!=qt&&"XYZM"!=qt)throw new Error("Invalid geometry layout");Fe=3}const Je=gt.length;let ei="";if(Je>0){ei+=gt[0];for(let _i=1;_i<Fe;++_i)ei+=","+gt[_i];for(let _i=Se;_i<Je;_i+=Se){ei+=" "+gt[_i];for(let Ai=1;Ai<Fe;++Ai)ei+=","+gt[_i+Ai]}}(0,O.uB)(Ee,ei)})});function pi(Ee,gt,yt){const Tt=gt.getFlatCoordinates(),qt={node:Ee};qt.layout=gt.getLayout(),qt.stride=gt.getStride();const Se=gt.getProperties();Se.coordinates=Tt;const Je=Rs[yt[yt.length-1].node.namespaceURI],ei=(0,r.Gl)(Se,Je);(0,r.NQ)(qt,mi,r.OL,ei,yt,Je)}const Fi=(0,r.Dm)(E,["color","fill","outline"]),ji=(0,r.Dm)(E,{outerBoundaryIs:(0,r.mm)(Pn),innerBoundaryIs:(0,r.mm)(Pn)}),Ui=(0,r.X1)("innerBoundaryIs"),Is=(0,r.X1)("outerBoundaryIs");function qi(Ee,gt,yt){const Tt=gt.getLinearRings(),qt=Tt.shift(),Se={node:Ee};(0,r.NQ)(Se,ji,Ui,Tt,yt),(0,r.NQ)(Se,ji,Is,[qt],yt)}const Fn=(0,r.Dm)(E,{color:(0,r.mm)(Tn),fill:(0,r.mm)(O.Z3),outline:(0,r.mm)(O.Z3)});function Ns(Ee,gt){(0,O.Ko)(Ee,Math.round(1e6*gt)/1e6)}const Di=(0,r.Dm)(E,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Nr=(0,r.Dm)(E,{IconStyle:(0,r.mm)(function ar(Ee,gt,yt){const Tt={node:Ee},qt={},Se=gt.getSrc(),Fe=gt.getSize(),Je=gt.getImageSize(),ei={href:Se};if(Fe){ei.w=Fe[0],ei.h=Fe[1];const nn=gt.getAnchor(),Rn=gt.getOrigin();Rn&&Je&&0!==Rn[0]&&Rn[1]!==Fe[1]&&(ei.x=Rn[0],ei.y=Je[1]-(Rn[1]+Fe[1])),!nn||nn[0]===Fe[0]/2&&nn[1]===Fe[1]/2||(qt.hotSpot={x:nn[0],xunits:"pixels",y:Fe[1]-nn[1],yunits:"pixels"})}qt.Icon=ei;let _i=gt.getScaleArray()[0],Ai=Fe;null===Ai&&(Ai=Nt),2==Ai.length&&(_i/=qe(Ai)),1!==_i&&(qt.scale=_i);const Bi=gt.getRotation();0!==Bi&&(qt.heading=Bi);const ki=gt.getColor();ki&&(qt.color=ki);const en=Fr[yt[yt.length-1].node.namespaceURI],os=(0,r.Gl)(qt,en);(0,r.NQ)(Tt,Yr,r.OL,os,yt,en)}),LabelStyle:(0,r.mm)(function ds(Ee,gt,yt){const Tt={node:Ee},qt={},Se=gt.getFill();Se&&(qt.color=Se.getColor());const Fe=gt.getScale();Fe&&1!==Fe&&(qt.scale=Fe);const ei=br[yt[yt.length-1].node.namespaceURI],_i=(0,r.Gl)(qt,ei);(0,r.NQ)(Tt,Qn,r.OL,_i,yt,ei)}),LineStyle:(0,r.mm)(function ss(Ee,gt,yt){const Tt={node:Ee},qt={color:gt.getColor(),width:Number(gt.getWidth())||1},Fe=ns[yt[yt.length-1].node.namespaceURI],Je=(0,r.Gl)(qt,Fe);(0,r.NQ)(Tt,qn,r.OL,Je,yt,Fe)}),PolyStyle:(0,r.mm)(function rs(Ee,gt,yt){const Tt={node:Ee},qt=gt.getFill(),Se=gt.getStroke(),Fe={color:qt?qt.getColor():void 0,fill:!!qt&&void 0,outline:!!Se&&void 0},ei=Fi[yt[yt.length-1].node.namespaceURI],_i=(0,r.Gl)(Fe,ei);(0,r.NQ)(Tt,Fn,r.OL,_i,yt,ei)})}),Hr=class zt extends _{constructor(gt){super(),gt=gt||{},ge||function ti(){it=[255,255,255,1],J=new z.A({color:it}),mt=[20,2],Et="pixels",Ot="pixels",Nt=[64,64],ft="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Ct=new $.A({anchor:mt,anchorOrigin:"bottom-left",anchorXUnits:Et,anchorYUnits:Ot,crossOrigin:"anonymous",rotation:0,scale:qe(Nt),size:Nt,src:ft}),re="NO_IMAGE",Jt=new o.A({color:it,width:1}),oe=new o.A({color:[51,51,51,1],width:2}),_e=new l.A({font:"bold 16px Helvetica",fill:J,stroke:oe,scale:.8}),Gt=new i.Ay({fill:J,image:Ct,text:_e,stroke:Jt,zIndex:0}),ge=[Gt]}(),this.dataProjection=(0,F.Jt)("EPSG:4326"),this.defaultStyle_=gt.defaultStyle?gt.defaultStyle:ge,this.extractStyles_=void 0===gt.extractStyles||gt.extractStyles,this.writeStyles_=void 0===gt.writeStyles||gt.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===gt.showPointNames||gt.showPointNames,this.crossOrigin_=void 0!==gt.crossOrigin?gt.crossOrigin:"anonymous",this.iconUrlFunction_=gt.iconUrlFunction?gt.iconUrlFunction:_t,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(gt,yt){const Tt=(0,r.Dm)(E,{Document:(0,r.Vh)(this.readDocumentOrFolder_,this),Folder:(0,r.Vh)(this.readDocumentOrFolder_,this),Placemark:(0,r.VT)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),qt=(0,r.eY)([],Tt,gt,yt,this);if(qt)return qt}readPlacemark_(gt,yt){const Tt=(0,r.eY)({geometry:null},A,gt,yt,this);if(!Tt)return;const qt=new Y.A,Se=gt.getAttribute("id");null!==Se&&qt.setId(Se);const Je=Tt.geometry;if(Je&&(0,n.hX)(Je,!1,yt[0]),qt.setGeometry(Je),delete Tt.geometry,this.extractStyles_){const Ai=function $t(Ee,gt,yt,Tt,qt){return function(Se,Fe){let Je=qt,ei="",_i=[];if(Je){const Bi=Se.getGeometry();if(Bi)if(Bi instanceof Q.A)_i=Bi.getGeometriesArrayRecursive().filter(function(ki){const cn=ki.getType();return"Point"===cn||"MultiPoint"===cn}),Je=_i.length>0;else{const ki=Bi.getType();Je="Point"===ki||"MultiPoint"===ki}}Je&&(ei=Se.get("name"),Je=Je&&!!ei,Je&&/&[^&]+;/.test(ei)&&(Ie||(Ie=document.createElement("textarea")),Ie.innerHTML=ei,ei=Ie.value));let Ai=yt;if(Ee?Ai=Ee:gt&&(Ai=ze(gt,yt,Tt)),Je){const Bi=function xe(Ee,gt){const yt=[0,0];let Tt="start";const qt=Ee.getImage();if(qt){const Je=qt.getSize();if(Je&&2==Je.length){const ei=qt.getScaleArray(),_i=qt.getAnchor();yt[0]=ei[0]*(Je[0]-_i[0]),yt[1]=ei[1]*(Je[1]/2-_i[1]),Tt="left"}}let Se=Ee.getText();return Se?(Se=Se.clone(),Se.setFont(Se.getFont()||_e.getFont()),Se.setScale(Se.getScale()||_e.getScale()),Se.setFill(Se.getFill()||_e.getFill()),Se.setStroke(Se.getStroke()||oe)):Se=_e.clone(),Se.setText(gt),Se.setOffsetX(yt[0]),Se.setOffsetY(yt[1]),Se.setTextAlign(Tt),new i.Ay({image:qt,text:Se})}(Ai[0],ei);return _i.length>0?(Bi.setGeometry(new Q.A(_i)),[Bi,new i.Ay({geometry:Ai[0].getGeometry(),image:null,fill:Ai[0].getFill(),stroke:Ai[0].getStroke(),text:null})].concat(Ai.slice(1))):Bi}return Ai}}(Tt.Style,Tt.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);qt.setStyle(Ai)}return delete Tt.Style,qt.setProperties(Tt,!0),qt}readSharedStyle_(gt,yt){const Tt=gt.getAttribute("id");if(null!==Tt){const qt=Gi.call(this,gt,yt);if(qt){let Se,Fe=gt.baseURI;(!Fe||"about:blank"==Fe)&&(Fe=window.location.href),Se=Fe?new URL("#"+Tt,Fe).href:"#"+Tt,this.sharedStyles_[Se]=qt}}}readSharedStyleMap_(gt,yt){const Tt=gt.getAttribute("id");if(null===Tt)return;const qt=K.call(this,gt,yt);if(!qt)return;let Se,Fe=gt.baseURI;(!Fe||"about:blank"==Fe)&&(Fe=window.location.href),Se=Fe?new URL("#"+Tt,Fe).href:"#"+Tt,this.sharedStyles_[Se]=qt}readFeatureFromNode(gt,yt){return E.includes(gt.namespaceURI)&&this.readPlacemark_(gt,[this.getReadOptions(gt,yt)])||null}readFeaturesFromNode(gt,yt){if(!E.includes(gt.namespaceURI))return[];let Tt;const qt=gt.localName;if("Document"==qt||"Folder"==qt)return Tt=this.readDocumentOrFolder_(gt,[this.getReadOptions(gt,yt)]),Tt||[];if("Placemark"==qt){const Se=this.readPlacemark_(gt,[this.getReadOptions(gt,yt)]);return Se?[Se]:[]}if("kml"==qt){Tt=[];for(let Se=gt.firstElementChild;Se;Se=Se.nextElementSibling){const Fe=this.readFeaturesFromNode(Se,yt);Fe&&(0,f.X$)(Tt,Fe)}return Tt}return[]}readName(gt){if(gt){if("string"==typeof gt){const yt=(0,r.qg)(gt);return this.readNameFromDocument(yt)}return(0,r.wz)(gt)?this.readNameFromDocument(gt):this.readNameFromNode(gt)}}readNameFromDocument(gt){for(let yt=gt.firstChild;yt;yt=yt.nextSibling)if(yt.nodeType==Node.ELEMENT_NODE){const Tt=this.readNameFromNode(yt);if(Tt)return Tt}}readNameFromNode(gt){for(let yt=gt.firstElementChild;yt;yt=yt.nextElementSibling)if(E.includes(yt.namespaceURI)&&"name"==yt.localName)return(0,O.E3)(yt);for(let yt=gt.firstElementChild;yt;yt=yt.nextElementSibling){const Tt=yt.localName;if(E.includes(yt.namespaceURI)&&("Document"==Tt||"Folder"==Tt||"Placemark"==Tt||"kml"==Tt)){const qt=this.readNameFromNode(yt);if(qt)return qt}}}readNetworkLinks(gt){const yt=[];if("string"==typeof gt){const Tt=(0,r.qg)(gt);(0,f.X$)(yt,this.readNetworkLinksFromDocument(Tt))}else(0,r.wz)(gt)?(0,f.X$)(yt,this.readNetworkLinksFromDocument(gt)):(0,f.X$)(yt,this.readNetworkLinksFromNode(gt));return yt}readNetworkLinksFromDocument(gt){const yt=[];for(let Tt=gt.firstChild;Tt;Tt=Tt.nextSibling)Tt.nodeType==Node.ELEMENT_NODE&&(0,f.X$)(yt,this.readNetworkLinksFromNode(Tt));return yt}readNetworkLinksFromNode(gt){const yt=[];for(let Tt=gt.firstElementChild;Tt;Tt=Tt.nextElementSibling)if(E.includes(Tt.namespaceURI)&&"NetworkLink"==Tt.localName){const qt=(0,r.eY)({},D,Tt,[]);yt.push(qt)}for(let Tt=gt.firstElementChild;Tt;Tt=Tt.nextElementSibling){const qt=Tt.localName;E.includes(Tt.namespaceURI)&&("Document"==qt||"Folder"==qt||"kml"==qt)&&(0,f.X$)(yt,this.readNetworkLinksFromNode(Tt))}return yt}readRegion(gt){const yt=[];if("string"==typeof gt){const Tt=(0,r.qg)(gt);(0,f.X$)(yt,this.readRegionFromDocument(Tt))}else(0,r.wz)(gt)?(0,f.X$)(yt,this.readRegionFromDocument(gt)):(0,f.X$)(yt,this.readRegionFromNode(gt));return yt}readRegionFromDocument(gt){const yt=[];for(let Tt=gt.firstChild;Tt;Tt=Tt.nextSibling)Tt.nodeType==Node.ELEMENT_NODE&&(0,f.X$)(yt,this.readRegionFromNode(Tt));return yt}readRegionFromNode(gt){const yt=[];for(let Tt=gt.firstElementChild;Tt;Tt=Tt.nextElementSibling)if(E.includes(Tt.namespaceURI)&&"Region"==Tt.localName){const qt=(0,r.eY)({},T,Tt,[]);yt.push(qt)}for(let Tt=gt.firstElementChild;Tt;Tt=Tt.nextElementSibling){const qt=Tt.localName;E.includes(Tt.namespaceURI)&&("Document"==qt||"Folder"==qt||"kml"==qt)&&(0,f.X$)(yt,this.readRegionFromNode(Tt))}return yt}readCamera(gt){const yt=[];if("string"==typeof gt){const Tt=(0,r.qg)(gt);(0,f.X$)(yt,this.readCameraFromDocument(Tt))}else(0,r.wz)(gt)?(0,f.X$)(yt,this.readCameraFromDocument(gt)):(0,f.X$)(yt,this.readCameraFromNode(gt));return yt}readCameraFromDocument(gt){const yt=[];for(let Tt=gt.firstChild;Tt;Tt=Tt.nextSibling)Tt.nodeType===Node.ELEMENT_NODE&&(0,f.X$)(yt,this.readCameraFromNode(Tt));return yt}readCameraFromNode(gt){const yt=[];for(let Tt=gt.firstElementChild;Tt;Tt=Tt.nextElementSibling)if(E.includes(Tt.namespaceURI)&&"Camera"===Tt.localName){const qt=(0,r.eY)({},x,Tt,[]);yt.push(qt)}for(let Tt=gt.firstElementChild;Tt;Tt=Tt.nextElementSibling){const qt=Tt.localName;E.includes(Tt.namespaceURI)&&("Document"===qt||"Folder"===qt||"Placemark"===qt||"kml"===qt)&&(0,f.X$)(yt,this.readCameraFromNode(Tt))}return yt}writeFeaturesNode(gt,yt){yt=this.adaptOptions(yt);const Tt=(0,r.qq)(E[4],"kml"),qt="http://www.w3.org/2000/xmlns/";Tt.setAttributeNS(qt,"xmlns:gx",P[0]),Tt.setAttributeNS(qt,"xmlns:xsi",r.pF),Tt.setAttributeNS(r.pF,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");const Se={node:Tt},Fe={};gt.length>1?Fe.Document=gt:1==gt.length&&(Fe.Placemark=gt[0]);const Je=U[Tt.namespaceURI],ei=(0,r.Gl)(Fe,Je);return(0,r.NQ)(Se,tt,r.OL,ei,[yt],Je,this),Tt}}},9422:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>C});var Y=s(3777),z=s(4249),Q=s(5078),$=s(2879),L=s(4367),M=s(1763),w=s(8654),I=s(4157),y=s(206),m=s(2386),u=s(9325),o=s(3834);function l(_,v,F){if(3===_){const O={keys:[],values:[],features:[]},X=F.readVarint()+F.pos;F.readFields(n,O,X),O.length=O.features.length,O.length&&(v[O.name]=O)}}function n(_,v,F){if(15===_)v.version=F.readVarint();else if(1===_)v.name=F.readString();else if(5===_)v.extent=F.readVarint();else if(2===_)v.features.push(F.pos);else if(3===_)v.keys.push(F.readString());else if(4===_){let O=null;const X=F.readVarint()+F.pos;for(;F.pos<X;)O=1==(_=F.readVarint()>>3)?F.readString():2===_?F.readFloat():3===_?F.readDouble():4===_?F.readVarint64():5===_?F.readVarint():6===_?F.readSVarint():7===_?F.readBoolean():null;v.values.push(O)}}function d(_,v,F){if(1==_)v.id=F.readVarint();else if(2==_){const O=F.readVarint()+F.pos;for(;F.pos<O;){const X=v.layer.keys[F.readVarint()],P=v.layer.values[F.readVarint()];v.properties[X]=P}}else 3==_?v.type=F.readVarint():4==_&&(v.geometry=F.pos)}function f(_,v,F){_.pos=v.features[F];const O=_.readVarint()+_.pos,X={layer:v,type:0,properties:{}};return _.readFields(d,X,O),X}const C=class i extends Y.Ay{constructor(v){super(),v=v||{},this.dataProjection=new y.A({code:"",units:"tile-pixels"}),this.featureClass=v.featureClass?v.featureClass:m.Ay,this.geometryName_=v.geometryName,this.layerName_=v.layerName?v.layerName:"layer",this.layers_=v.layers?v.layers:null,this.idProperty_=v.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(v,F,O,X){v.pos=F.geometry;const P=v.readVarint()+v.pos;let E=1,W=0,Z=0,A=0,D=0,R=0;for(;v.pos<P;){if(!W){const x=v.readVarint();E=7&x,W=x>>3}if(W--,1===E||2===E)Z+=v.readSVarint(),A+=v.readSVarint(),1===E&&D>R&&(X.push(D),R=D),O.push(Z,A),D+=2;else{if(7!==E)throw new Error("Invalid command found in the PBF");D>R&&(O.push(O[R],O[R+1]),D+=2)}}D>R&&(X.push(D),R=D)}createFeature_(v,F,O){const X=F.type;if(0===X)return null;let P;const E=F.properties;let W;this.idProperty_?(W=E[this.idProperty_],delete E[this.idProperty_]):W=F.id,E[this.layerName_]=F.layer.name;const Z=[],A=[];this.readRawGeometry_(v,F,Z,A);const D=function r(_,v){let F;return 1===_?F=1===v?"Point":"MultiPoint":2===_?F=1===v?"LineString":"MultiLineString":3===_&&(F="Polygon"),F}(X,A.length);if(this.featureClass===m.Ay)P=new this.featureClass(D,Z,A,2,E,W),P.transform(O.dataProjection);else{let R;if("Polygon"==D){const U=(0,o.yJ)(Z,A);R=U.length>1?new L.A(Z,"XY",U):new I.Ay(Z,"XY",A)}else R="Point"===D?new w.A(Z,"XY"):"LineString"===D?new z.A(Z,"XY"):"MultiPoint"===D?new $.A(Z,"XY"):"MultiLineString"===D?new Q.A(Z,"XY",A):null;P=new(0,this.featureClass),this.geometryName_&&P.setGeometryName(this.geometryName_);const T=(0,Y.hX)(R,!1,O);P.setGeometry(T),void 0!==W&&P.setId(W),P.setProperties(E,!0)}return P}getType(){return"arraybuffer"}readFeatures(v,F){const O=this.layers_;F=this.adaptOptions(F);const X=(0,u.Jt)(F.dataProjection);X.setWorldExtent(F.extent),F.dataProjection=X;const P=new M(v),E=P.readFields(l,{}),W=[];for(const Z in E){if(O&&!O.includes(Z))continue;const A=E[Z];X.setExtent(A?[0,0,A.extent,A.extent]:null);for(let R=0,x=A.length;R<x;++R){const T=f(P,A,R),U=this.createFeature_(P,T,F);null!==U&&W.push(U)}}return W}readProjection(v){return this.dataProjection}setLayers(v){this.layers_=v}}},4628:(le,pt,s)=>{"use strict";s.d(pt,{E3:()=>y,Gc:()=>u,Ko:()=>i,P9:()=>M,Vf:()=>z,Z3:()=>m,_X:()=>I,e4:()=>L,gC:()=>Q,uB:()=>n,yg:()=>w});var Y=s(3566);function z(d){return Q((0,Y.mT)(d,!1))}function Q(d){const f=/^\s*(true|1)|(false|0)\s*$/.exec(d);if(f)return void 0!==f[1]||!1}function L(d){return M((0,Y.mT)(d,!1))}function M(d){const f=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(d);if(f)return parseFloat(f[1])}function w(d){return I((0,Y.mT)(d,!1))}function I(d){const f=/^\s*(\d+)\s*$/.exec(d);if(f)return parseInt(f[1],10)}function y(d){return(0,Y.mT)(d,!1).trim()}function m(d,f){n(d,f?"1":"0")}function u(d,f){d.appendChild((0,Y.YE)().createCDATASection(f))}function i(d,f){const r=f.toPrecision();d.appendChild((0,Y.YE)().createTextNode(r))}function n(d,f){d.appendChild((0,Y.YE)().createTextNode(f))}},1766:(le,pt,s)=>{"use strict";s.d(pt,{B4:()=>L,W8:()=>Q,hq:()=>M,rT:()=>z,tV:()=>$});var Y=s(2058);function z(){return!0}function Q(){return!1}function $(){}function L(w){let y,m,u,I=!1;return function(){const o=Array.prototype.slice.call(arguments);return(!I||this!==u||!(0,Y.aI)(o,m))&&(I=!0,u=this,m=o,y=w.apply(this,arguments)),y}}function M(w){return function I(){let y;try{y=w()}catch(m){return Promise.reject(m)}return y instanceof Promise?y:Promise.resolve(y)}()}},5998:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>m});var Y=s(9568),z=s(2383),Q=s(1983),$=s(8507),L=s(9325),M=s(1766),w=s(9662);const I=(0,Q.vt)(),m=class y extends Y.A{constructor(){super(),this.extent_=(0,$.S5)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,M.B4)((o,i,l)=>{if(!l)return this.getSimplifiedGeometry(i);const n=this.clone();return n.applyTransform(l),n.getSimplifiedGeometry(i)})}simplifyTransformed(o,i){return this.simplifyTransformedInternal(this.getRevision(),o,i)}clone(){return(0,z.b0)()}closestPointXY(o,i,l,n){return(0,z.b0)()}containsXY(o,i){const l=this.getClosestPoint([o,i]);return l[0]===o&&l[1]===i}getClosestPoint(o,i){return this.closestPointXY(o[0],o[1],i=i||[NaN,NaN],1/0),i}intersectsCoordinate(o){return this.containsXY(o[0],o[1])}computeExtent(o){return(0,z.b0)()}getExtent(o){if(this.extentRevision_!=this.getRevision()){const i=this.computeExtent(this.extent_);(isNaN(i[0])||isNaN(i[1]))&&(0,$.aZ)(i),this.extentRevision_=this.getRevision()}return(0,$.$u)(this.extent_,o)}rotate(o,i){(0,z.b0)()}scale(o,i,l){(0,z.b0)()}simplify(o){return this.getSimplifiedGeometry(o*o)}getSimplifiedGeometry(o){return(0,z.b0)()}getType(){return(0,z.b0)()}applyTransform(o){(0,z.b0)()}intersectsExtent(o){return(0,z.b0)()}translate(o,i){(0,z.b0)()}transform(o,i){const l=(0,L.Jt)(o),n="tile-pixels"==l.getUnits()?function(d,f,r){const C=l.getExtent(),_=l.getWorldExtent(),v=(0,$.Oq)(_)/(0,$.Oq)(C);return(0,Q.Zz)(I,_[0],_[3],v,-v,0,0,0),(0,w.Rc)(d,0,d.length,r,I,f),(0,L.RG)(l,i)(d,f,r)}:(0,L.RG)(l,i);return this.applyTransform(n),this}}},1434:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>w});var Y=s(6621),z=s(5998),Q=s(8507),$=s(2614);class L extends z.A{constructor(y){super(),this.geometries_=y,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach($.JH),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const y=this.geometries_;for(let m=0,u=y.length;m<u;++m)this.changeEventsKeys_.push((0,$.KT)(y[m],Y.A.CHANGE,this.changed,this))}clone(){const y=new L(M(this.geometries_));return y.applyProperties(this),y}closestPointXY(y,m,u,o){if(o<(0,Q.Ld)(this.getExtent(),y,m))return o;const i=this.geometries_;for(let l=0,n=i.length;l<n;++l)o=i[l].closestPointXY(y,m,u,o);return o}containsXY(y,m){const u=this.geometries_;for(let o=0,i=u.length;o<i;++o)if(u[o].containsXY(y,m))return!0;return!1}computeExtent(y){(0,Q.aZ)(y);const m=this.geometries_;for(let u=0,o=m.length;u<o;++u)(0,Q.X$)(y,m[u].getExtent());return y}getGeometries(){return M(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let y=[];const m=this.geometries_;for(let u=0,o=m.length;u<o;++u)m[u].getType()===this.getType()?y=y.concat(m[u].getGeometriesArrayRecursive()):y.push(m[u]);return y}getSimplifiedGeometry(y){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),y<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&y<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const m=[],u=this.geometries_;let o=!1;for(let i=0,l=u.length;i<l;++i){const n=u[i],d=n.getSimplifiedGeometry(y);m.push(d),d!==n&&(o=!0)}return o?new L(m):(this.simplifiedGeometryMaxMinSquaredTolerance=y,this)}getType(){return"GeometryCollection"}intersectsExtent(y){const m=this.geometries_;for(let u=0,o=m.length;u<o;++u)if(m[u].intersectsExtent(y))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(y,m){const u=this.geometries_;for(let o=0,i=u.length;o<i;++o)u[o].rotate(y,m);this.changed()}scale(y,m,u){u||(u=(0,Q.q1)(this.getExtent()));const o=this.geometries_;for(let i=0,l=o.length;i<l;++i)o[i].scale(y,m,u);this.changed()}setGeometries(y){this.setGeometriesArray(M(y))}setGeometriesArray(y){this.unlistenGeometriesChange_(),this.geometries_=y,this.listenGeometriesChange_(),this.changed()}applyTransform(y){const m=this.geometries_;for(let u=0,o=m.length;u<o;++u)m[u].applyTransform(y);this.changed()}translate(y,m){const u=this.geometries_;for(let o=0,i=u.length;o<i;++o)u[o].translate(y,m);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function M(I){return I.map(y=>y.clone())}const w=L},4249:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>i});var Y=s(1416),z=s(5721),Q=s(8507),$=s(5625),L=s(463),M=s(2058),w=s(3846),I=s(7697),y=s(9721),m=s(9542),u=s(7696);class o extends Y.Ay{constructor(n,d){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===d||Array.isArray(n[0])?this.setCoordinates(n,d):this.setFlatCoordinates(d,n)}appendCoordinate(n){(0,M.X$)(this.flatCoordinates,n),this.changed()}clone(){const n=new o(this.flatCoordinates.slice(),this.layout);return n.applyProperties(this),n}closestPointXY(n,d,f,r){return r<(0,Q.Ld)(this.getExtent(),n,d)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,z.MD)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,z.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,n,d,f,r))}forEachSegment(n){return(0,w.j)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,n)}getCoordinateAtM(n,d){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(0,y.gr)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,n,d=void 0!==d&&d)}getCoordinates(){return(0,I.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(n,d){return(0,y.SH)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,n,d,this.stride)}getLength(){return(0,u.k)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(n){const d=[];return d.length=(0,L.P4)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,n,d,0),new o(d,"XY")}getType(){return"LineString"}intersectsExtent(n){return(0,m.gp)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,n)}setCoordinates(n,d){this.setLayout(d,n,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,$.z2)(this.flatCoordinates,0,n,this.stride),this.changed()}}const i=o},5078:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>o});var Y=s(4249),z=s(1416),Q=s(5721),$=s(8507),L=s(5625),M=s(463),w=s(2058),I=s(7697),y=s(9721),m=s(9542);class u extends z.Ay{constructor(l,n,d){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(l[0]))this.setCoordinates(l,n);else if(void 0!==n&&d)this.setFlatCoordinates(n,l),this.ends_=d;else{const f=l,r=[],C=[];for(let v=0,F=f.length;v<F;++v)(0,w.X$)(r,f[v].getFlatCoordinates()),C.push(r.length);const _=0===f.length?this.getLayout():f[0].getLayout();this.setFlatCoordinates(_,r),this.ends_=C}}appendLineString(l){(0,w.X$)(this.flatCoordinates,l.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const l=new u(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return l.applyProperties(this),l}closestPointXY(l,n,d,f){return f<(0,$.Ld)(this.getExtent(),l,n)?f:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,Q.HX)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,Q.oW)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,l,n,d,f))}getCoordinateAtM(l,n,d){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(0,y.L8)(this.flatCoordinates,0,this.ends_,this.stride,l,n=void 0!==n&&n,d=void 0!==d&&d)}getCoordinates(){return(0,I.cD)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(l){return l<0||this.ends_.length<=l?null:new Y.A(this.flatCoordinates.slice(0===l?0:this.ends_[l-1],this.ends_[l]),this.layout)}getLineStrings(){const l=this.flatCoordinates,n=this.ends_,d=this.layout,f=[];let r=0;for(let C=0,_=n.length;C<_;++C){const v=n[C],F=new Y.A(l.slice(r,v),d);f.push(F),r=v}return f}getFlatMidpoints(){const l=[],n=this.flatCoordinates;let d=0;const f=this.ends_,r=this.stride;for(let C=0,_=f.length;C<_;++C){const v=f[C],F=(0,y.SH)(n,d,v,r,.5);(0,w.X$)(l,F),d=v}return l}getSimplifiedGeometryInternal(l){const n=[],d=[];return n.length=(0,M.AL)(this.flatCoordinates,0,this.ends_,this.stride,l,n,0,d),new u(n,"XY",d)}getType(){return"MultiLineString"}intersectsExtent(l){return(0,m.fB)(this.flatCoordinates,0,this.ends_,this.stride,l)}setCoordinates(l,n){this.setLayout(n,l,2),this.flatCoordinates||(this.flatCoordinates=[]);const d=(0,L.KG)(this.flatCoordinates,0,l,this.stride,this.ends_);this.flatCoordinates.length=0===d.length?0:d[d.length-1],this.changed()}}const o=u},2879:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>y});var Y=s(8654),z=s(1416),Q=s(8507),$=s(5625),L=s(2058),M=s(7697),w=s(9973);class I extends z.Ay{constructor(u,o){super(),o&&!Array.isArray(u[0])?this.setFlatCoordinates(o,u):this.setCoordinates(u,o)}appendPoint(u){(0,L.X$)(this.flatCoordinates,u.getFlatCoordinates()),this.changed()}clone(){const u=new I(this.flatCoordinates.slice(),this.layout);return u.applyProperties(this),u}closestPointXY(u,o,i,l){if(l<(0,Q.Ld)(this.getExtent(),u,o))return l;const n=this.flatCoordinates,d=this.stride;for(let f=0,r=n.length;f<r;f+=d){const C=(0,w.hG)(u,o,n[f],n[f+1]);if(C<l){l=C;for(let _=0;_<d;++_)i[_]=n[f+_];i.length=d}}return l}getCoordinates(){return(0,M.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(u){return u<0||this.flatCoordinates.length/this.stride<=u?null:new Y.A(this.flatCoordinates.slice(u*this.stride,(u+1)*this.stride),this.layout)}getPoints(){const u=this.flatCoordinates,o=this.layout,i=this.stride,l=[];for(let n=0,d=u.length;n<d;n+=i){const f=new Y.A(u.slice(n,n+i),o);l.push(f)}return l}getType(){return"MultiPoint"}intersectsExtent(u){const o=this.flatCoordinates,i=this.stride;for(let l=0,n=o.length;l<n;l+=i)if((0,Q.Rj)(u,o[l],o[l+1]))return!0;return!1}setCoordinates(u,o){this.setLayout(o,u,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,$.z2)(this.flatCoordinates,0,u,this.stride),this.changed()}}const y=I},4367:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>f});var Y=s(2879),z=s(4157),Q=s(1416),$=s(5721),L=s(8507),M=s(5625),w=s(2058),I=s(2544),y=s(7697),m=s(9542),u=s(3834),o=s(2761),i=s(6281),l=s(9749),n=s(463);class d extends Q.Ay{constructor(C,_,v){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!v&&!Array.isArray(C[0])){const F=C,O=[],X=[];for(let P=0,E=F.length;P<E;++P){const W=F[P],Z=O.length,A=W.getEnds();for(let D=0,R=A.length;D<R;++D)A[D]+=Z;(0,w.X$)(O,W.getFlatCoordinates()),X.push(A)}_=0===F.length?this.getLayout():F[0].getLayout(),C=O,v=X}void 0!==_&&v?(this.setFlatCoordinates(_,C),this.endss_=v):this.setCoordinates(C,_)}appendPolygon(C){let _;if(this.flatCoordinates){const v=this.flatCoordinates.length;(0,w.X$)(this.flatCoordinates,C.getFlatCoordinates()),_=C.getEnds().slice();for(let F=0,O=_.length;F<O;++F)_[F]+=v}else this.flatCoordinates=C.getFlatCoordinates().slice(),_=C.getEnds().slice(),this.endss_.push();this.endss_.push(_),this.changed()}clone(){const C=this.endss_.length,_=new Array(C);for(let F=0;F<C;++F)_[F]=this.endss_[F].slice();const v=new d(this.flatCoordinates.slice(),this.layout,_);return v.applyProperties(this),v}closestPointXY(C,_,v,F){return F<(0,L.Ld)(this.getExtent(),C,_)?F:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,$.c)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,$.te)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,C,_,v,F))}containsXY(C,_){return(0,l.Gd)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,C,_)}getArea(){return(0,o.Cs)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(C){let _;return void 0!==C?(_=this.getOrientedFlatCoordinates().slice(),(0,u.NK)(_,0,this.endss_,this.stride,C)):_=this.flatCoordinates,(0,y.Dz)(_,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const C=(0,i.C)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,I.p)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,C),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Y.A(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const C=this.flatCoordinates;(0,u.mb)(C,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=C:(this.orientedFlatCoordinates_=C.slice(),this.orientedFlatCoordinates_.length=(0,u.NK)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(C){const _=[],v=[];return _.length=(0,n.sx)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(C),_,0,v),new d(_,"XY",v)}getPolygon(C){if(C<0||this.endss_.length<=C)return null;let _;if(0===C)_=0;else{const O=this.endss_[C-1];_=O[O.length-1]}const v=this.endss_[C].slice(),F=v[v.length-1];if(0!==_)for(let O=0,X=v.length;O<X;++O)v[O]-=_;return new z.Ay(this.flatCoordinates.slice(_,F),this.layout,v)}getPolygons(){const C=this.layout,_=this.flatCoordinates,v=this.endss_,F=[];let O=0;for(let X=0,P=v.length;X<P;++X){const E=v[X].slice(),W=E[E.length-1];if(0!==O)for(let A=0,D=E.length;A<D;++A)E[A]-=O;const Z=new z.Ay(_.slice(O,W),C,E);F.push(Z),O=W}return F}getType(){return"MultiPolygon"}intersectsExtent(C){return(0,m.Wp)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,C)}setCoordinates(C,_){this.setLayout(_,C,3),this.flatCoordinates||(this.flatCoordinates=[]);const v=(0,M.d6)(this.flatCoordinates,0,C,this.stride,this.endss_);if(0===v.length)this.flatCoordinates.length=0;else{const F=v[v.length-1];this.flatCoordinates.length=0===F.length?0:F[F.length-1]}this.changed()}}const f=d},8654:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>M});var Y=s(1416),z=s(8507),Q=s(5625),$=s(9973);class L extends Y.Ay{constructor(I,y){super(),this.setCoordinates(I,y)}clone(){const I=new L(this.flatCoordinates.slice(),this.layout);return I.applyProperties(this),I}closestPointXY(I,y,m,u){const o=this.flatCoordinates,i=(0,$.hG)(I,y,o[0],o[1]);if(i<u){const l=this.stride;for(let n=0;n<l;++n)m[n]=o[n];return m.length=l,i}return u}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(I){return(0,z.dP)(this.flatCoordinates,I)}getType(){return"Point"}intersectsExtent(I){return(0,z.Rj)(I,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(I,y){this.setLayout(y,I,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,Q._n)(this.flatCoordinates,0,I,this.stride),this.changed()}}const M=L},4157:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>f,VY:()=>C});var Y=s(1416),z=s(5721),Q=s(8507),$=s(5625),L=s(463),M=s(7697),w=s(2761);class I extends Y.Ay{constructor(O,X){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===X||Array.isArray(O[0])?this.setCoordinates(O,X):this.setFlatCoordinates(X,O)}clone(){return new I(this.flatCoordinates.slice(),this.layout)}closestPointXY(O,X,P,E){return E<(0,Q.Ld)(this.getExtent(),O,X)?E:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,z.MD)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,z.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,O,X,P,E))}getArea(){return(0,w.eN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,M.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(O){const X=[];return X.length=(0,L.P4)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,O,X,0),new I(X,"XY")}getType(){return"LinearRing"}intersectsExtent(O){return!1}setCoordinates(O,X){this.setLayout(X,O,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,$.z2)(this.flatCoordinates,0,O,this.stride),this.changed()}}const y=I;var m=s(8654),u=s(2058),o=s(2544),i=s(9542),l=s(3834),n=s(9749);class d extends Y.Ay{constructor(O,X,P){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==X&&P?(this.setFlatCoordinates(X,O),this.ends_=P):this.setCoordinates(O,X)}appendLinearRing(O){this.flatCoordinates?(0,u.X$)(this.flatCoordinates,O.getFlatCoordinates()):this.flatCoordinates=O.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const O=new d(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return O.applyProperties(this),O}closestPointXY(O,X,P,E){return E<(0,Q.Ld)(this.getExtent(),O,X)?E:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,z.HX)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,z.oW)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,O,X,P,E))}containsXY(O,X){return(0,n.zb)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,O,X)}getArea(){return(0,w.PK)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(O){let X;return void 0!==O?(X=this.getOrientedFlatCoordinates().slice(),(0,l.ug)(X,0,this.ends_,this.stride,O)):X=this.flatCoordinates,(0,M.cD)(X,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const O=(0,Q.q1)(this.getExtent());this.flatInteriorPoint_=(0,o.J)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,O,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new m.A(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(O){return O<0||this.ends_.length<=O?null:new y(this.flatCoordinates.slice(0===O?0:this.ends_[O-1],this.ends_[O]),this.layout)}getLinearRings(){const O=this.layout,X=this.flatCoordinates,P=this.ends_,E=[];let W=0;for(let Z=0,A=P.length;Z<A;++Z){const D=P[Z],R=new y(X.slice(W,D),O);E.push(R),W=D}return E}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const O=this.flatCoordinates;(0,l.PA)(O,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=O:(this.orientedFlatCoordinates_=O.slice(),this.orientedFlatCoordinates_.length=(0,l.ug)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(O){const X=[],P=[];return X.length=(0,L.Hg)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(O),X,0,P),new d(X,"XY",P)}getType(){return"Polygon"}intersectsExtent(O){return(0,i.HT)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,O)}setCoordinates(O,X){this.setLayout(X,O,2),this.flatCoordinates||(this.flatCoordinates=[]);const P=(0,$.KG)(this.flatCoordinates,0,O,this.stride,this.ends_);this.flatCoordinates.length=0===P.length?0:P[P.length-1],this.changed()}}const f=d;function C(F){if((0,Q.Im)(F))throw new Error("Cannot create polygon from empty extent");const O=F[0],X=F[1],P=F[2],E=F[3],W=[O,X,O,E,P,E,P,X,O,X];return new d(W,"XY",[W.length])}},1416:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>y,p0:()=>M,v7:()=>I});var Y=s(5998),z=s(2383),Q=s(8507),$=s(9662);function M(m){let u;return 2==m?u="XY":3==m?u="XYZ":4==m&&(u="XYZM"),u}function w(m){let u;return"XY"==m?u=2:"XYZ"==m||"XYM"==m?u=3:"XYZM"==m&&(u=4),u}function I(m,u,o){const i=m.getFlatCoordinates();if(!i)return null;const l=m.getStride();return(0,$.Rc)(i,0,i.length,l,u,o)}const y=class L extends Y.A{constructor(){super(),this.layout="XY",this.stride=2}computeExtent(u){return(0,Q.Vy)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,u)}getCoordinates(){return(0,z.b0)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(u){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),u<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&u<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const o=this.getSimplifiedGeometryInternal(u);return o.getFlatCoordinates().length<this.flatCoordinates.length?o:(this.simplifiedGeometryMaxMinSquaredTolerance=u,this)}getSimplifiedGeometryInternal(u){return this}getStride(){return this.stride}setFlatCoordinates(u,o){this.stride=w(u),this.layout=u,this.flatCoordinates=o}setCoordinates(u,o){(0,z.b0)()}setLayout(u,o,i){let l;if(u)l=w(u);else{for(let n=0;n<i;++n){if(0===o.length)return this.layout="XY",void(this.stride=2);o=o[0]}l=o.length,u=M(l)}this.layout=u,this.stride=l}applyTransform(u){this.flatCoordinates&&(u(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(u,o){const i=this.getFlatCoordinates();if(i){const l=this.getStride();(0,$.e$)(i,0,i.length,l,u,o,i),this.changed()}}scale(u,o,i){void 0===o&&(o=u),i||(i=(0,Q.q1)(this.getExtent()));const l=this.getFlatCoordinates();if(l){const n=this.getStride();(0,$.hs)(l,0,l.length,n,u,o,i,l),this.changed()}}translate(u,o){const i=this.getFlatCoordinates();if(i){const l=this.getStride();(0,$.Tl)(i,0,i.length,l,u,o,i),this.changed()}}}},2761:(le,pt,s)=>{"use strict";function Y($,L,M,w){let I=0,y=$[M-w],m=$[M-w+1];for(;L<M;L+=w){const u=$[L],o=$[L+1];I+=m*u-y*o,y=u,m=o}return I/2}function z($,L,M,w){let I=0;for(let y=0,m=M.length;y<m;++y){const u=M[y];I+=Y($,L,u,w),L=u}return I}function Q($,L,M,w){let I=0;for(let y=0,m=M.length;y<m;++y){const u=M[y];I+=z($,L,u,w),L=u[u.length-1]}return I}s.d(pt,{Cs:()=>Q,PK:()=>z,eN:()=>Y})},6281:(le,pt,s)=>{"use strict";s.d(pt,{C:()=>z});var Y=s(8507);function z(Q,$,L,M){const w=[];let I=(0,Y.S5)();for(let y=0,m=L.length;y<m;++y){const u=L[y];I=(0,Y.Vy)(Q,$,u[0],M),w.push((I[0]+I[2])/2,(I[1]+I[3])/2),$=u[u.length-1]}return w}},5721:(le,pt,s)=>{"use strict";s.d(pt,{HX:()=>$,MD:()=>Q,c:()=>L,n:()=>M,oW:()=>w,te:()=>I});var Y=s(9973);function z(y,m,u,o,i,l,n){const d=y[m],f=y[m+1],r=y[u]-d,C=y[u+1]-f;let _;if(0===r&&0===C)_=m;else{const v=((i-d)*r+(l-f)*C)/(r*r+C*C);if(v>1)_=u;else{if(v>0){for(let F=0;F<o;++F)n[F]=(0,Y.Cc)(y[m+F],y[u+F],v);return void(n.length=o)}_=m}}for(let v=0;v<o;++v)n[v]=y[_+v];n.length=o}function Q(y,m,u,o,i){let l=y[m],n=y[m+1];for(m+=o;m<u;m+=o){const d=y[m],f=y[m+1],r=(0,Y.hG)(l,n,d,f);r>i&&(i=r),l=d,n=f}return i}function $(y,m,u,o,i){for(let l=0,n=u.length;l<n;++l){const d=u[l];i=Q(y,m,d,o,i),m=d}return i}function L(y,m,u,o,i){for(let l=0,n=u.length;l<n;++l){const d=u[l];i=$(y,m,d,o,i),m=d[d.length-1]}return i}function M(y,m,u,o,i,l,n,d,f,r,C){if(m==u)return r;let _,v;if(0===i){if(v=(0,Y.hG)(n,d,y[m],y[m+1]),v<r){for(_=0;_<o;++_)f[_]=y[m+_];return f.length=o,v}return r}C=C||[NaN,NaN];let F=m+o;for(;F<u;)if(z(y,F-o,F,o,n,d,C),v=(0,Y.hG)(n,d,C[0],C[1]),v<r){for(r=v,_=0;_<o;++_)f[_]=C[_];f.length=o,F+=o}else F+=o*Math.max((Math.sqrt(v)-Math.sqrt(r))/i|0,1);if(l&&(z(y,u-o,m,o,n,d,C),v=(0,Y.hG)(n,d,C[0],C[1]),v<r)){for(r=v,_=0;_<o;++_)f[_]=C[_];f.length=o}return r}function w(y,m,u,o,i,l,n,d,f,r,C){C=C||[NaN,NaN];for(let _=0,v=u.length;_<v;++_){const F=u[_];r=M(y,m,F,o,i,l,n,d,f,r,C),m=F}return r}function I(y,m,u,o,i,l,n,d,f,r,C){C=C||[NaN,NaN];for(let _=0,v=u.length;_<v;++_){const F=u[_];r=w(y,m,F,o,i,l,n,d,f,r,C),m=F[F.length-1]}return r}},9749:(le,pt,s)=>{"use strict";s.d(pt,{Gd:()=>L,a_:()=>Q,t7:()=>z,zb:()=>$});var Y=s(8507);function z(M,w,I,y,m){return!(0,Y.sB)(m,function(o){return!Q(M,w,I,y,o[0],o[1])})}function Q(M,w,I,y,m,u){let o=0,i=M[I-y],l=M[I-y+1];for(;w<I;w+=y){const n=M[w],d=M[w+1];l<=u?d>u&&(n-i)*(u-l)-(m-i)*(d-l)>0&&o++:d<=u&&(n-i)*(u-l)-(m-i)*(d-l)<0&&o--,i=n,l=d}return 0!==o}function $(M,w,I,y,m,u){if(0===I.length||!Q(M,w,I[0],y,m,u))return!1;for(let o=1,i=I.length;o<i;++o)if(Q(M,I[o-1],I[o],y,m,u))return!1;return!0}function L(M,w,I,y,m,u){if(0===I.length)return!1;for(let o=0,i=I.length;o<i;++o){const l=I[o];if($(M,w,l,y,m,u))return!0;w=l[l.length-1]}return!1}},5625:(le,pt,s)=>{"use strict";function Y(L,M,w,I){for(let y=0,m=w.length;y<m;++y)L[M++]=w[y];return M}function z(L,M,w,I){for(let y=0,m=w.length;y<m;++y){const u=w[y];for(let o=0;o<I;++o)L[M++]=u[o]}return M}function Q(L,M,w,I,y){y=y||[];let m=0;for(let u=0,o=w.length;u<o;++u){const i=z(L,M,w[u],I);y[m++]=i,M=i}return y.length=m,y}function $(L,M,w,I,y){y=y||[];let m=0;for(let u=0,o=w.length;u<o;++u){const i=Q(L,M,w[u],I,y[m]);0===i.length&&(i[0]=M),y[m++]=i,M=i[i.length-1]}return y.length=m,y}s.d(pt,{KG:()=>Q,_n:()=>Y,d6:()=>$,z2:()=>z})},7697:(le,pt,s)=>{"use strict";function Y($,L,M,w,I){I=void 0!==I?I:[];let y=0;for(let m=L;m<M;m+=w)I[y++]=$.slice(m,m+w);return I.length=y,I}function z($,L,M,w,I){I=void 0!==I?I:[];let y=0;for(let m=0,u=M.length;m<u;++m){const o=M[m];I[y++]=Y($,L,o,w,I[y]),L=o}return I.length=y,I}function Q($,L,M,w,I){I=void 0!==I?I:[];let y=0;for(let m=0,u=M.length;m<u;++m){const o=M[m];I[y++]=1===o.length&&o[0]===L?[]:z($,L,o,w,I[y]),L=o[o.length-1]}return I.length=y,I}s.d(pt,{Dz:()=>Q,cD:()=>z,n2:()=>Y})},2544:(le,pt,s)=>{"use strict";s.d(pt,{J:()=>Q,p:()=>$});var Y=s(2058),z=s(9749);function Q(L,M,w,I,y,m,u){let o,i,l,n,d,f,r;const C=y[m+1],_=[];for(let O=0,X=w.length;O<X;++O){const P=w[O];for(n=L[P-I],f=L[P-I+1],o=M;o<P;o+=I)d=L[o],r=L[o+1],(C<=f&&r<=C||f<=C&&C<=r)&&(l=(C-f)/(r-f)*(d-n)+n,_.push(l)),n=d,f=r}let v=NaN,F=-1/0;for(_.sort(Y.V_),n=_[0],o=1,i=_.length;o<i;++o){d=_[o];const O=Math.abs(d-n);O>F&&(l=(n+d)/2,(0,z.zb)(L,M,w,I,l,C)&&(v=l,F=O)),n=d}return isNaN(v)&&(v=y[m]),u?(u.push(v,C,F),u):[v,C,F]}function $(L,M,w,I,y){let m=[];for(let u=0,o=w.length;u<o;++u){const i=w[u];m=Q(L,M,i,I,y,2*u,m),M=i[i.length-1]}return m}},9721:(le,pt,s)=>{"use strict";s.d(pt,{L8:()=>L,SH:()=>Q,gr:()=>$});var Y=s(2058),z=s(9973);function Q(M,w,I,y,m,u,o){let i,l;const n=(I-w)/y;if(1===n)i=w;else if(2===n)i=w,l=m;else if(0!==n){let d=M[w],f=M[w+1],r=0;const C=[0];for(let F=w+y;F<I;F+=y){const O=M[F],X=M[F+1];r+=Math.sqrt((O-d)*(O-d)+(X-f)*(X-f)),C.push(r),d=O,f=X}const _=m*r,v=(0,Y.El)(C,_);v<0?(l=(_-C[-v-2])/(C[-v-1]-C[-v-2]),i=w+(-v-2)*y):i=w+v*y}o=o>1?o:2,u=u||new Array(o);for(let d=0;d<o;++d)u[d]=void 0===i?NaN:void 0===l?M[i+d]:(0,z.Cc)(M[i+d],M[i+y+d],l);return u}function $(M,w,I,y,m,u){if(I==w)return null;let o;if(m<M[w+y-1])return u?(o=M.slice(w,w+y),o[y-1]=m,o):null;if(M[I-1]<m)return u?(o=M.slice(I-y,I),o[y-1]=m,o):null;if(m==M[w+y-1])return M.slice(w,w+y);let i=w/y,l=I/y;for(;i<l;){const r=i+l>>1;m<M[(r+1)*y-1]?l=r:i=r+1}const n=M[i*y-1];if(m==n)return M.slice((i-1)*y,(i-1)*y+y);const f=(m-n)/(M[(i+1)*y-1]-n);o=[];for(let r=0;r<y-1;++r)o.push((0,z.Cc)(M[(i-1)*y+r],M[i*y+r],f));return o.push(m),o}function L(M,w,I,y,m,u,o){if(o)return $(M,w,I[I.length-1],y,m,u);let i;if(m<M[y-1])return u?(i=M.slice(0,y),i[y-1]=m,i):null;if(M[M.length-1]<m)return u?(i=M.slice(M.length-y),i[y-1]=m,i):null;for(let l=0,n=I.length;l<n;++l){const d=I[l];if(w!=d){if(m<M[w+y-1])return null;if(m<=M[d-1])return $(M,w,d,y,m,!1);w=d}}return null}},9542:(le,pt,s)=>{"use strict";s.d(pt,{HT:()=>w,Wp:()=>I,fB:()=>L,gp:()=>$,sj:()=>M});var Y=s(8507),z=s(3846),Q=s(9749);function $(y,m,u,o,i){const l=(0,Y.R8)((0,Y.S5)(),y,m,u,o);return!!(0,Y.HY)(i,l)&&(!!((0,Y.ms)(i,l)||l[0]>=i[0]&&l[2]<=i[2]||l[1]>=i[1]&&l[3]<=i[3])||(0,z.j)(y,m,u,o,function(n,d){return(0,Y.Mx)(i,n,d)}))}function L(y,m,u,o,i){for(let l=0,n=u.length;l<n;++l){if($(y,m,u[l],o,i))return!0;m=u[l]}return!1}function M(y,m,u,o,i){return!!($(y,m,u,o,i)||(0,Q.a_)(y,m,u,o,i[0],i[1])||(0,Q.a_)(y,m,u,o,i[0],i[3])||(0,Q.a_)(y,m,u,o,i[2],i[1])||(0,Q.a_)(y,m,u,o,i[2],i[3]))}function w(y,m,u,o,i){if(!M(y,m,u[0],o,i))return!1;if(1===u.length)return!0;for(let l=1,n=u.length;l<n;++l)if((0,Q.t7)(y,u[l-1],u[l],o,i)&&!$(y,u[l-1],u[l],o,i))return!1;return!0}function I(y,m,u,o,i){for(let l=0,n=u.length;l<n;++l){const d=u[l];if(w(y,m,d,o,i))return!0;m=d[d.length-1]}return!1}},7696:(le,pt,s)=>{"use strict";function Y(Q,$,L,M){let w=Q[$],I=Q[$+1],y=0;for(let m=$+M;m<L;m+=M){const u=Q[m],o=Q[m+1];y+=Math.sqrt((u-w)*(u-w)+(o-I)*(o-I)),w=u,I=o}return y}s.d(pt,{k:()=>Y})},3834:(le,pt,s)=>{"use strict";function Y(I,y,m,u){for(;y<m-u;){for(let o=0;o<u;++o){const i=I[y+o];I[y+o]=I[m-u+o],I[m-u+o]=i}y+=u,m-=u}}function z(I,y,m,u){let o=0,i=I[m-u],l=I[m-u+1];for(;y<m;y+=u){const n=I[y],d=I[y+1];o+=(n-i)*(d+l),i=n,l=d}return 0===o?void 0:o>0}function Q(I,y,m,u,o){o=void 0!==o&&o;for(let i=0,l=m.length;i<l;++i){const n=m[i],d=z(I,y,n,u);if(0===i){if(o&&d||!o&&!d)return!1}else if(o&&!d||!o&&d)return!1;y=n}return!0}function $(I,y,m,u,o){for(let i=0,l=m.length;i<l;++i){const n=m[i];if(!Q(I,y,n,u,o))return!1;n.length&&(y=n[n.length-1])}return!0}function L(I,y,m,u,o){o=void 0!==o&&o;for(let i=0,l=m.length;i<l;++i){const n=m[i],d=z(I,y,n,u);(0===i?o&&d||!o&&!d:o&&!d||!o&&d)&&Y(I,y,n,u),y=n}return y}function M(I,y,m,u,o){for(let i=0,l=m.length;i<l;++i)y=L(I,y,m[i],u,o);return y}function w(I,y){const m=[];let i,u=0,o=0;for(let l=0,n=y.length;l<n;++l){const d=y[l],f=z(I,u,d,2);if(void 0===i&&(i=f),f===i)m.push(y.slice(o,l+1));else{if(0===m.length)continue;m[m.length-1].push(y[o])}o=l+1,u=d}return m}s.d(pt,{yJ:()=>w,PA:()=>Q,mb:()=>$,ug:()=>L,NK:()=>M})},3846:(le,pt,s)=>{"use strict";function Y(z,Q,$,L,M){let w;for(Q+=L;Q<$;Q+=L)if(w=M(z.slice(Q-L,Q),z.slice(Q,Q+L)),w)return w;return!1}s.d(pt,{j:()=>Y})},463:(le,pt,s)=>{"use strict";s.d(pt,{AL:()=>$,Hg:()=>y,P4:()=>Q,n$:()=>w,sx:()=>m});var Y=s(9973);function Q(u,o,i,l,n,d,f){const r=(i-o)/l;if(r<3){for(;o<i;o+=l)d[f++]=u[o],d[f++]=u[o+1];return f}const C=new Array(r);C[0]=1,C[r-1]=1;const _=[o,i-l];let v=0;for(;_.length>0;){const F=_.pop(),O=_.pop();let X=0;const P=u[O],E=u[O+1],W=u[F],Z=u[F+1];for(let A=O+l;A<F;A+=l){const x=(0,Y.Q1)(u[A],u[A+1],P,E,W,Z);x>X&&(v=A,X=x)}X>n&&(C[(v-o)/l]=1,O+l<v&&_.push(O,v),v+l<F&&_.push(v,F))}for(let F=0;F<r;++F)C[F]&&(d[f++]=u[o+F*l],d[f++]=u[o+F*l+1]);return f}function $(u,o,i,l,n,d,f,r){for(let C=0,_=i.length;C<_;++C){const v=i[C];f=Q(u,o,v,l,n,d,f),r.push(f),o=v}return f}function w(u,o){return o*Math.round(u/o)}function I(u,o,i,l,n,d,f){if(o==i)return f;let _,v,r=w(u[o],n),C=w(u[o+1],n);o+=l,d[f++]=r,d[f++]=C;do{if(_=w(u[o],n),v=w(u[o+1],n),(o+=l)==i)return d[f++]=_,d[f++]=v,f}while(_==r&&v==C);for(;o<i;){const F=w(u[o],n),O=w(u[o+1],n);if(o+=l,F==_&&O==v)continue;const X=_-r,P=v-C,E=F-r,W=O-C;X*W==P*E&&(X<0&&E<X||X==E||X>0&&E>X)&&(P<0&&W<P||P==W||P>0&&W>P)?(_=F,v=O):(d[f++]=_,d[f++]=v,r=_,C=v,_=F,v=O)}return d[f++]=_,d[f++]=v,f}function y(u,o,i,l,n,d,f,r){for(let C=0,_=i.length;C<_;++C){const v=i[C];f=I(u,o,v,l,n,d,f),r.push(f),o=v}return f}function m(u,o,i,l,n,d,f,r){for(let C=0,_=i.length;C<_;++C){const v=i[C],F=[];f=y(u,o,v,l,n,d,f,F),r.push(F),o=v[v.length-1]}return f}},9662:(le,pt,s)=>{"use strict";function Y(L,M,w,I,y,m){m=m||[];let u=0;for(let o=M;o<w;o+=I){const i=L[o],l=L[o+1];m[u++]=y[0]*i+y[2]*l+y[4],m[u++]=y[1]*i+y[3]*l+y[5]}return m&&m.length!=u&&(m.length=u),m}function z(L,M,w,I,y,m,u){u=u||[];const o=Math.cos(y),i=Math.sin(y),l=m[0],n=m[1];let d=0;for(let f=M;f<w;f+=I){const r=L[f]-l,C=L[f+1]-n;u[d++]=l+r*o-C*i,u[d++]=n+r*i+C*o;for(let _=f+2;_<f+I;++_)u[d++]=L[_]}return u&&u.length!=d&&(u.length=d),u}function Q(L,M,w,I,y,m,u,o){o=o||[];const i=u[0],l=u[1];let n=0;for(let d=M;d<w;d+=I){const r=L[d+1]-l;o[n++]=i+y*(L[d]-i),o[n++]=l+m*r;for(let C=d+2;C<d+I;++C)o[n++]=L[C]}return o&&o.length!=n&&(o.length=n),o}function $(L,M,w,I,y,m,u){u=u||[];let o=0;for(let i=M;i<w;i+=I){u[o++]=L[i]+y,u[o++]=L[i+1]+m;for(let l=i+2;l<i+I;++l)u[o++]=L[l]}return u&&u.length!=o&&(u.length=o),u}s.d(pt,{Rc:()=>Y,Tl:()=>$,e$:()=>z,hs:()=>Q})},2531:(le,pt,s)=>{"use strict";s.d(pt,{DT:()=>y,FT:()=>u,Wl:()=>I,XM:()=>m,_p:()=>z,cr:()=>w,ew:()=>M,j:()=>L,oF:()=>$});const Y=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",z=Y.includes("firefox"),$=Y.includes("safari")&&!Y.includes("chrom")&&(Y.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Y)),L=Y.includes("webkit")&&!Y.includes("edge"),M=Y.includes("macintosh"),w=typeof devicePixelRatio<"u"?devicePixelRatio:1,I=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,y=typeof Image<"u"&&Image.prototype.decode,m="function"==typeof createImageBitmap,u=function(){let o=!1;try{const i=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("_",null,i),window.removeEventListener("_",null,i)}catch{}return o}()},8782:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>u});var Y=s(3805),z=s(9769),Q=s(9153),$=s(4157);const M=class L extends Q.A{constructor(i){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+i,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const i=this.startPixel_,l=this.endPixel_,n="px",d=this.element_.style;d.left=Math.min(i[0],l[0])+n,d.top=Math.min(i[1],l[1])+n,d.width=Math.abs(l[0]-i[0])+n,d.height=Math.abs(l[1]-i[1])+n}setMap(i){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const l=this.element_.style;l.left="inherit",l.top="inherit",l.width="inherit",l.height="inherit"}this.map_=i,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(i,l){this.startPixel_=i,this.endPixel_=l,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const i=this.startPixel_,l=this.endPixel_,d=[i,[i[0],l[1]],l,[l[0],i[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);d[4]=d[0].slice(),this.geometry_?this.geometry_.setCoordinates([d]):this.geometry_=new $.Ay([d])}getGeometry(){return this.geometry_}};var w=s(6568);class y extends Y.Ay{constructor(i,l,n){super(i),this.coordinate=l,this.mapBrowserEvent=n}}const u=class m extends z.A{constructor(i){super(),this.box_=new M((i=i||{}).className||"ol-dragbox"),this.minArea_=void 0!==i.minArea?i.minArea:64,i.onBoxEnd&&(this.onBoxEnd=i.onBoxEnd),this.startPixel_=null,this.condition_=i.condition?i.condition:w.at,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(i,l,n){const d=n[0]-l[0],f=n[1]-l[1];return d*d+f*f>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(i){this.startPixel_&&(this.box_.setPixels(this.startPixel_,i.pixel),this.dispatchEvent(new y("boxdrag",i.coordinate,i)))}handleUpEvent(i){if(!this.startPixel_)return!1;this.box_.setMap(null);const l=this.boxEndCondition_(i,this.startPixel_,i.pixel);return l&&this.onBoxEnd(i),this.dispatchEvent(new y(l?"boxend":"boxcancel",i.coordinate,i)),!1}handleDownEvent(i){return!!this.condition_(i)&&(this.startPixel_=i.pixel,this.box_.setMap(i.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new y("boxstart",i.coordinate,i)),!0)}onBoxEnd(i){}setActive(i){i||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new y("boxcancel",this.startPixel_,null)),this.startPixel_=null)),super.setActive(i)}}},3626:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>w,e4:()=>L,D2:()=>M});var Y=s(9568);var Q=s(6378);function L(I,y,m){const u=I.getCenterInternal();u&&I.animateInternal({duration:void 0!==m?m:250,easing:Q.sn,center:I.getConstrainedCenter([u[0]+y[0],u[1]+y[1]])})}function M(I,y,m,u){const o=I.getZoom();if(void 0===o)return;const i=I.getConstrainedZoom(o+y),l=I.getResolutionForZoom(i);I.getAnimating()&&I.cancelAnimations(),I.animate({resolution:l,anchor:m,duration:void 0!==u?u:250,easing:Q.vT})}const w=class $ extends Y.A{constructor(y){super(),y&&y.handleEvent&&(this.handleEvent=y.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(y){return!0}setActive(y){this.set("active",y)}setMap(y){this.map_=y}}},9769:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>L,v:()=>$});var Y=s(3626),z=s(1469);function $(M){const w=M.length;let I=0,y=0;for(let m=0;m<w;m++)I+=M[m].clientX,y+=M[m].clientY;return{clientX:I/w,clientY:y/w}}const L=class Q extends Y.Ay{constructor(w){super(w=w||{}),w.handleDownEvent&&(this.handleDownEvent=w.handleDownEvent),w.handleDragEvent&&(this.handleDragEvent=w.handleDragEvent),w.handleMoveEvent&&(this.handleMoveEvent=w.handleMoveEvent),w.handleUpEvent&&(this.handleUpEvent=w.handleUpEvent),w.stopDown&&(this.stopDown=w.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(w){return!1}handleDragEvent(w){}handleEvent(w){if(!w.originalEvent)return!0;let I=!1;if(this.updateTrackedPointers_(w),this.handlingDownUpSequence){if(w.type==z.A.POINTERDRAG)this.handleDragEvent(w),w.originalEvent.preventDefault();else if(w.type==z.A.POINTERUP){const y=this.handleUpEvent(w);this.handlingDownUpSequence=y&&this.targetPointers.length>0}}else if(w.type==z.A.POINTERDOWN){const y=this.handleDownEvent(w);this.handlingDownUpSequence=y,I=this.stopDown(y)}else w.type==z.A.POINTERMOVE&&this.handleMoveEvent(w);return!I}handleMoveEvent(w){}handleUpEvent(w){return!1}stopDown(w){return w}updateTrackedPointers_(w){w.activePointers&&(this.targetPointers=w.activePointers)}}},8733:(le,pt,s)=>{"use strict";s.d(pt,{N:()=>tt});var Y=s(6591),z=s(3626),Q=s(1469);const L=class $ extends z.Ay{constructor(J){super(),this.delta_=(J=J||{}).delta?J.delta:1,this.duration_=void 0!==J.duration?J.duration:250}handleEvent(J){let ht=!1;if(J.type==Q.A.DBLCLICK){const mt=J.originalEvent,Ot=J.coordinate,Nt=mt.shiftKey?-this.delta_:this.delta_,ft=J.map.getView();(0,z.D2)(ft,Nt,Ot,this.duration_),mt.preventDefault(),ht=!0}return!ht}};var M=s(9769),w=s(1766),I=s(6568),y=s(6378),m=s(5085);const o=class u extends M.A{constructor(J){super({stopDown:w.W8}),this.kinetic_=(J=J||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const ht=J.condition?J.condition:(0,I.Q7)(I.TS,I.fs);this.condition_=J.onFocusOnly?(0,I.Q7)(I.eL,ht):ht,this.noKinetic_=!1}handleDragEvent(J){const ht=J.map;this.panning_||(this.panning_=!0,ht.getView().beginInteraction());const mt=this.targetPointers,Et=ht.getEventPixel((0,M.v)(mt));if(mt.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(Et[0],Et[1]),this.lastCentroid){const Ot=[this.lastCentroid[0]-Et[0],Et[1]-this.lastCentroid[1]],ft=J.map.getView();(0,m.hs)(Ot,ft.getResolution()),(0,m.e$)(Ot,ft.getRotation()),ft.adjustCenterInternal(Ot)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=Et,this.lastPointersCount_=mt.length,J.originalEvent.preventDefault()}handleUpEvent(J){const ht=J.map,mt=ht.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const Et=this.kinetic_.getDistance(),Ot=this.kinetic_.getAngle(),Nt=mt.getCenterInternal(),ft=ht.getPixelFromCoordinateInternal(Nt),Ct=ht.getCoordinateFromPixelInternal([ft[0]-Et*Math.cos(Ot),ft[1]-Et*Math.sin(Ot)]);mt.animateInternal({center:mt.getConstrainedCenter(Ct),duration:500,easing:y.vT})}return this.panning_&&(this.panning_=!1,mt.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(J){if(this.targetPointers.length>0&&this.condition_(J)){const mt=J.map.getView();return this.lastCentroid=null,mt.getAnimating()&&mt.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};var i=s(3066);const n=class l extends M.A{constructor(J){J=J||{},super({stopDown:w.W8}),this.condition_=J.condition?J.condition:I.IO,this.lastAngle_=void 0,this.duration_=void 0!==J.duration?J.duration:250}handleDragEvent(J){if(!(0,I.A4)(J))return;const ht=J.map,mt=ht.getView();if(mt.getConstraints().rotation===i.b8)return;const Et=ht.getSize(),Ot=J.pixel,Nt=Math.atan2(Et[1]/2-Ot[1],Ot[0]-Et[0]/2);void 0!==this.lastAngle_&&mt.adjustRotationInternal(-(Nt-this.lastAngle_)),this.lastAngle_=Nt}handleUpEvent(J){return!(0,I.A4)(J)||(J.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(J){return!!((0,I.A4)(J)&&(0,I.at)(J)&&this.condition_(J))&&(J.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}};var d=s(8782);const r=class f extends d.A{constructor(J){super({condition:(J=J||{}).condition?J.condition:I.Kg,className:J.className||"ol-dragzoom",minArea:J.minArea}),this.duration_=void 0!==J.duration?J.duration:200,this.out_=void 0!==J.out&&J.out}onBoxEnd(J){const mt=this.getMap().getView();let Et=this.getGeometry();if(this.out_){const Ot=mt.rotatedExtentForGeometry(Et),Nt=mt.getResolutionForExtentInternal(Ot),ft=mt.getResolution()/Nt;Et=Et.clone(),Et.scale(ft*ft)}mt.fitInternal(Et,{duration:this.duration_,easing:y.vT})}};var C=s(6621);const F=class v extends z.Ay{constructor(J){super(),J=J||{},this.defaultCondition_=function(ht){return(0,I.TS)(ht)&&(0,I.tE)(ht)},this.condition_=void 0!==J.condition?J.condition:this.defaultCondition_,this.duration_=void 0!==J.duration?J.duration:100,this.pixelDelta_=void 0!==J.pixelDelta?J.pixelDelta:128}handleEvent(J){let ht=!1;if(J.type==C.A.KEYDOWN){const mt=J.originalEvent,Et=mt.key;if(this.condition_(J)&&("ArrowDown"==Et||"ArrowLeft"==Et||"ArrowRight"==Et||"ArrowUp"==Et)){const Nt=J.map.getView(),ft=Nt.getResolution()*this.pixelDelta_;let Ct=0,Dt=0;"ArrowDown"==Et?Dt=-ft:"ArrowLeft"==Et?Ct=-ft:"ArrowRight"==Et?Ct=ft:Dt=ft;const re=[Ct,Dt];(0,m.e$)(re,Nt.getRotation()),(0,z.e4)(Nt,re,this.duration_),mt.preventDefault(),ht=!0}}return!ht}},X=class O extends z.Ay{constructor(J){super(),this.condition_=(J=J||{}).condition?J.condition:function(ht){return!(0,I.GB)(ht)&&(0,I.tE)(ht)},this.delta_=J.delta?J.delta:1,this.duration_=void 0!==J.duration?J.duration:100}handleEvent(J){let ht=!1;if(J.type==C.A.KEYDOWN||J.type==C.A.KEYPRESS){const mt=J.originalEvent,Et=mt.key;if(this.condition_(J)&&("+"===Et||"-"===Et)){const Nt="+"===Et?this.delta_:-this.delta_,ft=J.map.getView();(0,z.D2)(ft,Nt,void 0,this.duration_),mt.preventDefault(),ht=!0}}return!ht}},E=class P{constructor(J,ht,mt){this.decay_=J,this.minVelocity_=ht,this.delay_=mt,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(J,ht){this.points_.push(J,ht,Date.now())}end(){if(this.points_.length<6)return!1;const J=Date.now()-this.delay_,ht=this.points_.length-3;if(this.points_[ht+2]<J)return!1;let mt=ht-3;for(;mt>0&&this.points_[mt+2]>J;)mt-=3;const Et=this.points_[ht+2]-this.points_[mt+2];if(Et<1e3/60)return!1;const Ot=this.points_[ht]-this.points_[mt],Nt=this.points_[ht+1]-this.points_[mt+1];return this.angle_=Math.atan2(Nt,Ot),this.initialVelocity_=Math.sqrt(Ot*Ot+Nt*Nt)/Et,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};var W=s(2531),Z=s(9973);const D=class A extends z.Ay{constructor(J){super(J=J||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==J.maxDelta?J.maxDelta:1,this.duration_=void 0!==J.duration?J.duration:250,this.timeout_=void 0!==J.timeout?J.timeout:80,this.useAnchor_=void 0===J.useAnchor||J.useAnchor,this.constrainResolution_=void 0!==J.constrainResolution&&J.constrainResolution;const ht=J.condition?J.condition:I.Gk;this.condition_=J.onFocusOnly?(0,I.Q7)(I.eL,ht):ht,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const J=this.getMap();J&&J.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(J){if(!this.condition_(J)||J.type!==C.A.WHEEL)return!0;const mt=J.map,Et=J.originalEvent;let Ot;if(Et.preventDefault(),this.useAnchor_&&(this.lastAnchor_=J.coordinate),J.type==C.A.WHEEL&&(Ot=Et.deltaY,W._p&&Et.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(Ot/=W.cr),Et.deltaMode===WheelEvent.DOM_DELTA_LINE&&(Ot*=40)),0===Ot)return!1;this.lastDelta_=Ot;const Nt=Date.now();void 0===this.startTime_&&(this.startTime_=Nt),(!this.mode_||Nt-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(Ot)<4?"trackpad":"wheel");const ft=mt.getView();if("trackpad"===this.mode_&&!ft.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(ft.getAnimating()&&ft.cancelAnimations(),ft.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),ft.adjustZoom(-Ot/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=Nt,!1;this.totalDelta_+=Ot;const Ct=Math.max(this.timeout_-(Nt-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,mt),Ct),!1}handleWheelZoom_(J){const ht=J.getView();ht.getAnimating()&&ht.cancelAnimations();let mt=-(0,Z.qE)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(ht.getConstrainResolution()||this.constrainResolution_)&&(mt=mt?mt>0?1:-1:0),(0,z.D2)(ht,mt,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(J){this.useAnchor_=J,J||(this.lastAnchor_=null)}},x=class R extends M.A{constructor(J){const ht=J=J||{};ht.stopDown||(ht.stopDown=w.W8),super(ht),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==J.threshold?J.threshold:.3,this.duration_=void 0!==J.duration?J.duration:250}handleDragEvent(J){let ht=0;const mt=this.targetPointers[0],Et=this.targetPointers[1],Ot=Math.atan2(Et.clientY-mt.clientY,Et.clientX-mt.clientX);if(void 0!==this.lastAngle_){const Ct=Ot-this.lastAngle_;this.rotationDelta_+=Ct,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),ht=Ct}this.lastAngle_=Ot;const Nt=J.map,ft=Nt.getView();ft.getConstraints().rotation!==i.b8&&(this.anchor_=Nt.getCoordinateFromPixelInternal(Nt.getEventPixel((0,M.v)(this.targetPointers))),this.rotating_&&(Nt.render(),ft.adjustRotationInternal(ht,this.anchor_)))}handleUpEvent(J){return!(this.targetPointers.length<2&&(J.map.getView().endInteraction(this.duration_),1))}handleDownEvent(J){if(this.targetPointers.length>=2){const ht=J.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||ht.getView().beginInteraction(),!0}return!1}},U=class T extends M.A{constructor(J){const ht=J=J||{};ht.stopDown||(ht.stopDown=w.W8),super(ht),this.anchor_=null,this.duration_=void 0!==J.duration?J.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(J){let ht=1;const mt=this.targetPointers[0],Et=this.targetPointers[1],Ot=mt.clientX-Et.clientX,Nt=mt.clientY-Et.clientY,ft=Math.sqrt(Ot*Ot+Nt*Nt);void 0!==this.lastDistance_&&(ht=this.lastDistance_/ft),this.lastDistance_=ft;const Ct=J.map,Dt=Ct.getView();1!=ht&&(this.lastScaleDelta_=ht),this.anchor_=Ct.getCoordinateFromPixelInternal(Ct.getEventPixel((0,M.v)(this.targetPointers))),Ct.render(),Dt.adjustResolutionInternal(ht,this.anchor_)}handleUpEvent(J){return!(this.targetPointers.length<2)||(J.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(J){if(this.targetPointers.length>=2){const ht=J.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||ht.getView().beginInteraction(),!0}return!1}};function tt(it){it=it||{};const J=new Y.A,ht=new E(-.005,.05,100);return(void 0===it.altShiftDragRotate||it.altShiftDragRotate)&&J.push(new n),(void 0===it.doubleClickZoom||it.doubleClickZoom)&&J.push(new L({delta:it.zoomDelta,duration:it.zoomDuration})),(void 0===it.dragPan||it.dragPan)&&J.push(new o({onFocusOnly:it.onFocusOnly,kinetic:ht})),(void 0===it.pinchRotate||it.pinchRotate)&&J.push(new x),(void 0===it.pinchZoom||it.pinchZoom)&&J.push(new U({duration:it.zoomDuration})),(void 0===it.keyboard||it.keyboard)&&(J.push(new F),J.push(new X({delta:it.zoomDelta,duration:it.zoomDuration}))),(void 0===it.mouseWheelZoom||it.mouseWheelZoom)&&J.push(new D({onFocusOnly:it.onFocusOnly,duration:it.zoomDuration})),(void 0===it.shiftDragZoom||it.shiftDragZoom)&&J.push(new r({duration:it.zoomDuration})),J}},8324:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>w});var Y=s(9568),z=s(4860),Q=s(2383),$=s(5940),L=s(9973);const w=class M extends Y.A{constructor(y){super(),this.background_=y.background;const m=Object.assign({},y);"object"==typeof y.properties&&(delete m.properties,Object.assign(m,y.properties)),m[z.A.OPACITY]=void 0!==y.opacity?y.opacity:1,(0,$.v)("number"==typeof m[z.A.OPACITY],"Layer opacity must be a number"),m[z.A.VISIBLE]=void 0===y.visible||y.visible,m[z.A.Z_INDEX]=y.zIndex,m[z.A.MAX_RESOLUTION]=void 0!==y.maxResolution?y.maxResolution:1/0,m[z.A.MIN_RESOLUTION]=void 0!==y.minResolution?y.minResolution:0,m[z.A.MIN_ZOOM]=void 0!==y.minZoom?y.minZoom:-1/0,m[z.A.MAX_ZOOM]=void 0!==y.maxZoom?y.maxZoom:1/0,this.className_=void 0!==m.className?m.className:"ol-layer",delete m.className,this.setProperties(m),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(y){const m=this.state_||{layer:this,managed:void 0===y||y},u=this.getZIndex();return m.opacity=(0,L.qE)(Math.round(100*this.getOpacity())/100,0,1),m.visible=this.getVisible(),m.extent=this.getExtent(),m.zIndex=void 0!==u||m.managed?u:1/0,m.maxResolution=this.getMaxResolution(),m.minResolution=Math.max(this.getMinResolution(),0),m.minZoom=this.getMinZoom(),m.maxZoom=this.getMaxZoom(),this.state_=m,m}getLayersArray(y){return(0,Q.b0)()}getLayerStatesArray(y){return(0,Q.b0)()}getExtent(){return this.get(z.A.EXTENT)}getMaxResolution(){return this.get(z.A.MAX_RESOLUTION)}getMinResolution(){return this.get(z.A.MIN_RESOLUTION)}getMinZoom(){return this.get(z.A.MIN_ZOOM)}getMaxZoom(){return this.get(z.A.MAX_ZOOM)}getOpacity(){return this.get(z.A.OPACITY)}getSourceState(){return(0,Q.b0)()}getVisible(){return this.get(z.A.VISIBLE)}getZIndex(){return this.get(z.A.Z_INDEX)}setBackground(y){this.background_=y,this.changed()}setExtent(y){this.set(z.A.EXTENT,y)}setMaxResolution(y){this.set(z.A.MAX_RESOLUTION,y)}setMinResolution(y){this.set(z.A.MIN_RESOLUTION,y)}setMaxZoom(y){this.set(z.A.MAX_ZOOM,y)}setMinZoom(y){this.set(z.A.MIN_ZOOM,y)}setOpacity(y){(0,$.v)("number"==typeof y,"Layer opacity must be a number"),this.set(z.A.OPACITY,y)}setVisible(y){this.set(z.A.VISIBLE,y)}setZIndex(y){this.set(z.A.Z_INDEX,y)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}},5715:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Q});var Y=s(8052);const Q=class z extends Y.A{constructor(L){super(L=L||{})}}},1744:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>$});var Y=s(8052),z=s(6952);const $=class Q extends Y.A{constructor(M){M=M||{};const w=Object.assign({},M);delete w.preload,delete w.useInterimTilesOnError,super(w),this.setPreload(void 0!==M.preload?M.preload:0),this.setUseInterimTilesOnError(void 0===M.useInterimTilesOnError||M.useInterimTilesOnError)}getPreload(){return this.get(z.A.PRELOAD)}setPreload(M){this.set(z.A.PRELOAD,M)}getUseInterimTilesOnError(){return this.get(z.A.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(M){this.set(z.A.USE_INTERIM_TILES_ON_ERROR,M)}getData(M){return super.getData(M)}}},7477:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>hi});var Y=s(8052),z=s(2593),Q=s(9380),$=s(221),L=s(1540),M=s(5804),w=s(4960),I=s(5409),y=s(730),m=s(9625),u=s(1962);function i(et,N,g){const S=(0,m.qg)(et,g);if(!(0,m.ho)(N,S.type)){const K=(0,m.go)(N),B=(0,m.go)(S.type);throw new Error(`Expected expression to be of type ${K}, got ${B}`)}return l(S,g)}function l(et,N){if(et instanceof m._D){if(et.type===m.mE&&"string"==typeof et.value){const S=(0,u.sH)(et.value);return function(){return S}}return function(){return et.value}}const g=et.operator;switch(g){case m.ZD.Number:case m.ZD.String:case m.ZD.Coalesce:return function n(et,N){const g=et.operator,S=et.args.length,K=new Array(S);for(let B=0;B<S;++B)K[B]=l(et.args[B],N);switch(g){case m.ZD.Coalesce:return B=>{for(let ot=0;ot<S;++ot){const dt=K[ot](B);if(typeof dt<"u"&&null!==dt)return dt}throw new Error("Expected one of the values to be non-null")};case m.ZD.Number:case m.ZD.String:return B=>{for(let ot=0;ot<S;++ot){const dt=K[ot](B);if(typeof dt===g)return dt}throw new Error(`Expected one of the values to be a ${g}`)};default:throw new Error(`Unsupported assertion operator ${g}`)}}(et,N);case m.ZD.Get:case m.ZD.Var:return function d(et,N){const S=et.args[0].value;switch(et.operator){case m.ZD.Get:return K=>K.properties[S];case m.ZD.Var:return K=>K.variables[S];default:throw new Error(`Unsupported accessor operator ${et.operator}`)}}(et);case m.ZD.Id:return S=>S.featureId;case m.ZD.GeometryType:return S=>S.geometryType;case m.ZD.Concat:{const S=et.args.map(K=>l(K,N));return K=>"".concat(...S.map(B=>B(K).toString()))}case m.ZD.Resolution:return S=>S.resolution;case m.ZD.Any:case m.ZD.All:case m.ZD.Between:case m.ZD.In:case m.ZD.Not:return function r(et,N){const g=et.operator,S=et.args.length,K=new Array(S);for(let B=0;B<S;++B)K[B]=l(et.args[B],N);switch(g){case m.ZD.Any:return B=>{for(let ot=0;ot<S;++ot)if(K[ot](B))return!0;return!1};case m.ZD.All:return B=>{for(let ot=0;ot<S;++ot)if(!K[ot](B))return!1;return!0};case m.ZD.Between:return B=>{const ot=K[0](B),dt=K[1](B),It=K[2](B);return ot>=dt&&ot<=It};case m.ZD.In:return B=>{const ot=K[0](B);for(let dt=1;dt<S;++dt)if(ot===K[dt](B))return!0;return!1};case m.ZD.Not:return B=>!K[0](B);default:throw new Error(`Unsupported logical operator ${g}`)}}(et,N);case m.ZD.Equal:case m.ZD.NotEqual:case m.ZD.LessThan:case m.ZD.LessThanOrEqualTo:case m.ZD.GreaterThan:case m.ZD.GreaterThanOrEqualTo:return function f(et,N){const g=et.operator,S=l(et.args[0],N),K=l(et.args[1],N);switch(g){case m.ZD.Equal:return B=>S(B)===K(B);case m.ZD.NotEqual:return B=>S(B)!==K(B);case m.ZD.LessThan:return B=>S(B)<K(B);case m.ZD.LessThanOrEqualTo:return B=>S(B)<=K(B);case m.ZD.GreaterThan:return B=>S(B)>K(B);case m.ZD.GreaterThanOrEqualTo:return B=>S(B)>=K(B);default:throw new Error(`Unsupported comparison operator ${g}`)}}(et,N);case m.ZD.Multiply:case m.ZD.Divide:case m.ZD.Add:case m.ZD.Subtract:case m.ZD.Clamp:case m.ZD.Mod:case m.ZD.Pow:case m.ZD.Abs:case m.ZD.Floor:case m.ZD.Ceil:case m.ZD.Round:case m.ZD.Sin:case m.ZD.Cos:case m.ZD.Atan:case m.ZD.Sqrt:return function C(et,N){const g=et.operator,S=et.args.length,K=new Array(S);for(let B=0;B<S;++B)K[B]=l(et.args[B],N);switch(g){case m.ZD.Multiply:return B=>{let ot=1;for(let dt=0;dt<S;++dt)ot*=K[dt](B);return ot};case m.ZD.Divide:return B=>K[0](B)/K[1](B);case m.ZD.Add:return B=>{let ot=0;for(let dt=0;dt<S;++dt)ot+=K[dt](B);return ot};case m.ZD.Subtract:return B=>K[0](B)-K[1](B);case m.ZD.Clamp:return B=>{const ot=K[0](B),dt=K[1](B);if(ot<dt)return dt;const It=K[2](B);return ot>It?It:ot};case m.ZD.Mod:return B=>K[0](B)%K[1](B);case m.ZD.Pow:return B=>Math.pow(K[0](B),K[1](B));case m.ZD.Abs:return B=>Math.abs(K[0](B));case m.ZD.Floor:return B=>Math.floor(K[0](B));case m.ZD.Ceil:return B=>Math.ceil(K[0](B));case m.ZD.Round:return B=>Math.round(K[0](B));case m.ZD.Sin:return B=>Math.sin(K[0](B));case m.ZD.Cos:return B=>Math.cos(K[0](B));case m.ZD.Atan:return 2===S?B=>Math.atan2(K[0](B),K[1](B)):B=>Math.atan(K[0](B));case m.ZD.Sqrt:return B=>Math.sqrt(K[0](B));default:throw new Error(`Unsupported numeric operator ${g}`)}}(et,N);case m.ZD.Case:return function _(et,N){const g=et.args.length,S=new Array(g);for(let K=0;K<g;++K)S[K]=l(et.args[K],N);return K=>{for(let B=0;B<g-1;B+=2)if(S[B](K))return S[B+1](K);return S[g-1](K)}}(et,N);case m.ZD.Match:return function v(et,N){const g=et.args.length,S=new Array(g);for(let K=0;K<g;++K)S[K]=l(et.args[K],N);return K=>{const B=S[0](K);for(let ot=1;ot<g;ot+=2)if(B===S[ot](K))return S[ot+1](K);return S[g-1](K)}}(et,N);case m.ZD.Interpolate:return function F(et,N){const g=et.args.length,S=new Array(g);for(let K=0;K<g;++K)S[K]=l(et.args[K],N);return K=>{const B=S[0](K),ot=S[1](K);let dt,It;for(let Wt=2;Wt<g;Wt+=2){const pe=S[Wt](K);let ce=S[Wt+1](K);const Ne=Array.isArray(ce);if(Ne&&(ce=(0,u.fu)(ce)),pe>=ot)return 2===Wt?ce:Ne?P(B,ot,dt,It,pe,ce):X(B,ot,dt,It,pe,ce);dt=pe,It=ce}return It}}(et,N);case m.ZD.ToString:return function O(et,N){const g=et.operator,S=et.args.length,K=new Array(S);for(let B=0;B<S;++B)K[B]=l(et.args[B],N);if(g===m.ZD.ToString)return B=>{const ot=K[0](B);return et.args[0].type===m.mE?(0,u.dI)(ot):ot.toString()};throw new Error(`Unsupported convert operator ${g}`)}(et,N);default:throw new Error(`Unsupported operator ${g}`)}}function X(et,N,g,S,K,B){const ot=K-g;if(0===ot)return S;const dt=N-g;return S+(1===et?dt/ot:(Math.pow(et,dt)-1)/(Math.pow(et,ot)-1))*(B-S)}function P(et,N,g,S,K,B){if(K-g==0)return S;const dt=(0,u.eE)(S),It=(0,u.eE)(B);let Wt=It[2]-dt[2];Wt>180?Wt-=360:Wt<-180&&(Wt+=360);const pe=[X(et,N,g,dt[0],K,It[0]),X(et,N,g,dt[1],K,It[1]),dt[2]+X(et,N,g,0,K,Wt),X(et,N,g,S[3],K,B[3])];return(0,u.S8)((0,u.cD)(pe))}var E=s(9330),W=s(9270);function Z(et){return!0}function D(et){const N=(0,m.SR)(),g=et.length,S=new Array(g);for(let ot=0;ot<g;++ot)S[ot]=x(et[ot],N);const K={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""},B=new Array(g);return function(ot,dt){if(K.properties=ot.getPropertiesInternal(),K.resolution=dt,N.featureId){const Wt=ot.getId();K.featureId=void 0!==Wt?Wt:null}let It=0;for(let Wt=0;Wt<g;++Wt){const pe=S[Wt](K);pe&&(B[It]=pe,It+=1)}return B.length=It,B}}function x(et,N){const g=T(et,"",N),S=U(et,"",N),K=function tt(et,N){const g="text-",S=Ot(et,g+"value",N);if(!S)return null;const K=T(et,g,N),B=T(et,g+"background-",N),ot=U(et,g,N),dt=U(et,g+"background-",N),It=Ot(et,g+"font",N),Wt=Et(et,g+"max-angle",N),pe=Et(et,g+"offset-x",N),ce=Et(et,g+"offset-y",N),Ne=ft(et,g+"overflow",N),He=Ot(et,g+"placement",N),We=Et(et,g+"repeat",N),bi=ye(et,g+"scale",N),Mi=ft(et,g+"rotate-with-view",N),ni=Et(et,g+"rotation",N),Ii=Ot(et,g+"align",N),Ni=Ot(et,g+"justify",N),$i=Ot(et,g+"baseline",N),Ji=Dt(et,g+"padding",N),zi=Ae(et,g+"declutter-mode"),Ri=new y.A({declutterMode:zi});return function(ui){if(Ri.setText(S(ui)),K&&Ri.setFill(K(ui)),B&&Ri.setBackgroundFill(B(ui)),ot&&Ri.setStroke(ot(ui)),dt&&Ri.setBackgroundStroke(dt(ui)),It&&Ri.setFont(It(ui)),Wt&&Ri.setMaxAngle(Wt(ui)),pe&&Ri.setOffsetX(pe(ui)),ce&&Ri.setOffsetY(ce(ui)),Ne&&Ri.setOverflow(Ne(ui)),He){const vi=He(ui);if("point"!==vi&&"line"!==vi)throw new Error("Expected point or line for text-placement");Ri.setPlacement(vi)}if(We&&Ri.setRepeat(We(ui)),bi&&Ri.setScale(bi(ui)),Mi&&Ri.setRotateWithView(Mi(ui)),ni&&Ri.setRotation(ni(ui)),Ii){const vi=Ii(ui);if("left"!==vi&&"center"!==vi&&"right"!==vi&&"end"!==vi&&"start"!==vi)throw new Error("Expected left, right, center, start, or end for text-align");Ri.setTextAlign(vi)}if(Ni){const vi=Ni(ui);if("left"!==vi&&"right"!==vi&&"center"!==vi)throw new Error("Expected left, right, or center for text-justify");Ri.setJustify(vi)}if($i){const vi=$i(ui);if("bottom"!==vi&&"top"!==vi&&"middle"!==vi&&"alphabetic"!==vi&&"hanging"!==vi)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");Ri.setTextBaseline(vi)}return Ji&&Ri.setPadding(Ji(ui)),Ri}}(et,N),B=function it(et,N){return"icon-src"in et?function J(et,N){const g="icon-",S=g+"src",K=Ie(et[S],S),B=re(et,g+"anchor",N),ot=ye(et,g+"scale",N),dt=Et(et,g+"opacity",N),It=re(et,g+"displacement",N),Wt=Et(et,g+"rotation",N),pe=ft(et,g+"rotate-with-view",N),ce=Gt(et,g+"anchor-origin"),Ne=Vt(et,g+"anchor-x-units"),He=Vt(et,g+"anchor-y-units"),We=function qe(et,N){const g=et[N];if(void 0!==g)return zt(g,N)}(et,g+"color"),bi=function ct(et,N){const g=et[N];if(void 0!==g){if("string"!=typeof g)throw new Error(`Expected a string for ${N}`);return g}}(et,g+"cross-origin"),Mi=function ge(et,N){const g=et[N];if(void 0!==g)return ti(g,N)}(et,g+"offset"),ni=Gt(et,g+"offset-origin"),Ii=oe(et,g+"width"),Ni=oe(et,g+"height"),$i=function _e(et,N){const g=et[N];if(void 0!==g){if("number"==typeof g)return(0,W.xq)(g);if(!Array.isArray(g))throw new Error(`Expected a number or size array for ${N}`);if(2!==g.length||"number"!=typeof g[0]||"number"!=typeof g[1])throw new Error(`Expected a number or size array for ${N}`);return g}}(et,g+"size"),Ji=Ae(et,g+"declutter-mode"),zi=new M.A({src:K,anchorOrigin:ce,anchorXUnits:Ne,anchorYUnits:He,color:We,crossOrigin:bi,offset:Mi,offsetOrigin:ni,height:Ni,width:Ii,size:$i,declutterMode:Ji});return function(Ri){return dt&&zi.setOpacity(dt(Ri)),It&&zi.setDisplacement(It(Ri)),Wt&&zi.setRotation(Wt(Ri)),pe&&zi.setRotateWithView(pe(Ri)),ot&&zi.setScale(ot(Ri)),B&&zi.setAnchor(B(Ri)),zi}}(et,N):"shape-points"in et?function ht(et,N){const g="shape-",S=g+"points",K=g+"radius",B=_t(et[S],S),ot=_t(et[K],K),dt=T(et,g,N),It=U(et,g,N),Wt=ye(et,g+"scale",N),pe=re(et,g+"displacement",N),ce=Et(et,g+"rotation",N),Ne=ft(et,g+"rotate-with-view",N),He=oe(et,g+"radius2"),We=oe(et,g+"angle"),bi=Ae(et,g+"declutter-mode"),Mi=new w.A({points:B,radius:ot,radius2:He,angle:We,declutterMode:bi});return function(ni){return dt&&Mi.setFill(dt(ni)),It&&Mi.setStroke(It(ni)),pe&&Mi.setDisplacement(pe(ni)),ce&&Mi.setRotation(ce(ni)),Ne&&Mi.setRotateWithView(Ne(ni)),Wt&&Mi.setScale(Wt(ni)),Mi}}(et,N):"circle-radius"in et?function mt(et,N){const g="circle-",S=T(et,g,N),K=U(et,g,N),B=Et(et,g+"radius",N),ot=ye(et,g+"scale",N),dt=re(et,g+"displacement",N),It=Et(et,g+"rotation",N),Wt=ft(et,g+"rotate-with-view",N),pe=Ae(et,g+"declutter-mode"),ce=new $.A({radius:5,declutterMode:pe});return function(Ne){return B&&ce.setRadius(B(Ne)),S&&ce.setFill(S(Ne)),K&&ce.setStroke(K(Ne)),dt&&ce.setDisplacement(dt(Ne)),It&&ce.setRotation(It(Ne)),Wt&&ce.setRotateWithView(Wt(Ne)),ot&&ce.setScale(ot(Ne)),ce}}(et,N):null}(et,N),ot=Et(et,"z-index",N);if(!(g||S||K||B||(0,E.p)(et)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(et));const dt=new Q.Ay;return function(It){let Wt=!0;if(g){const pe=g(It);pe&&(Wt=!1),dt.setFill(pe)}if(S){const pe=S(It);pe&&(Wt=!1),dt.setStroke(pe)}if(K){const pe=K(It);pe&&(Wt=!1),dt.setText(pe)}if(B){const pe=B(It);pe&&(Wt=!1),dt.setImage(pe)}return ot&&dt.setZIndex(ot(It)),Wt?null:dt}}function T(et,N,g){let S;if(S=N+"fill-pattern-src"in et?function Nt(et,N,g){const S=Ot(et,N+"pattern-src",g),K=Jt(et,N+"pattern-offset",g),B=Jt(et,N+"pattern-size",g),ot=Ct(et,N+"color",g);return function(dt){return{src:S(dt),offset:K&&K(dt),size:B&&B(dt),color:ot&&ot(dt)}}}(et,N+"fill-",g):Ct(et,N+"fill-color",g),!S)return null;const K=new L.A;return function(B){const ot=S(B);return"none"===ot?null:(K.setColor(ot),K)}}function U(et,N,g){const S=Et(et,N+"stroke-width",g),K=Ct(et,N+"stroke-color",g);if(!S&&!K)return null;const B=Ot(et,N+"stroke-line-cap",g),ot=Ot(et,N+"stroke-line-join",g),dt=Dt(et,N+"stroke-line-dash",g),It=Et(et,N+"stroke-line-dash-offset",g),Wt=Et(et,N+"stroke-miter-limit",g),pe=new I.A;return function(ce){if(K){const Ne=K(ce);if("none"===Ne)return null;pe.setColor(Ne)}if(S&&pe.setWidth(S(ce)),B){const Ne=B(ce);if("butt"!==Ne&&"round"!==Ne&&"square"!==Ne)throw new Error("Expected butt, round, or square line cap");pe.setLineCap(Ne)}if(ot){const Ne=ot(ce);if("bevel"!==Ne&&"round"!==Ne&&"miter"!==Ne)throw new Error("Expected bevel, round, or miter line join");pe.setLineJoin(Ne)}return dt&&pe.setLineDash(dt(ce)),It&&pe.setLineDashOffset(It(ce)),Wt&&pe.setMiterLimit(Wt(ce)),pe}}function Et(et,N,g){if(!(N in et))return;const S=i(et[N],m.wl,g);return function(K){return _t(S(K),N)}}function Ot(et,N,g){if(!(N in et))return null;const S=i(et[N],m.cT,g);return function(K){return Ie(S(K),N)}}function ft(et,N,g){if(!(N in et))return null;const S=i(et[N],m.T8,g);return function(K){const B=S(K);if("boolean"!=typeof B)throw new Error(`Expected a boolean for ${N}`);return B}}function Ct(et,N,g){if(!(N in et))return null;const S=i(et[N],m.mE|m.cT,g);return function(K){return zt(S(K),N)}}function Dt(et,N,g){if(!(N in et))return null;const S=i(et[N],m.Fq,g);return function(K){return ti(S(K),N)}}function re(et,N,g){if(!(N in et))return null;const S=i(et[N],m.Fq,g);return function(K){const B=ti(S(K),N);if(2!==B.length)throw new Error(`Expected two numbers for ${N}`);return B}}function Jt(et,N,g){if(!(N in et))return null;const S=i(et[N],m.Fq,g);return function(K){return xe(S(K),N)}}function ye(et,N,g){if(!(N in et))return null;const S=i(et[N],m.Fq|m.wl,g);return function(K){return function $t(et,N){return"number"==typeof et?et:xe(et,N)}(S(K),N)}}function oe(et,N){const g=et[N];if(void 0!==g){if("number"!=typeof g)throw new Error(`Expected a number for ${N}`);return g}}function Gt(et,N){const g=et[N];if(void 0!==g){if("bottom-left"!==g&&"bottom-right"!==g&&"top-left"!==g&&"top-right"!==g)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${N}`);return g}}function Vt(et,N){const g=et[N];if(void 0!==g){if("pixels"!==g&&"fraction"!==g)throw new Error(`Expected pixels or fraction for ${N}`);return g}}function Ae(et,N){const g=et[N];if(void 0!==g){if("string"!=typeof g)throw new Error(`Expected a string for ${N}`);if("declutter"!==g&&"obstacle"!==g&&"none"!==g)throw new Error(`Expected declutter, obstacle, or none for ${N}`);return g}}function ti(et,N){if(!Array.isArray(et))throw new Error(`Expected an array for ${N}`);const g=et.length;for(let S=0;S<g;++S)if("number"!=typeof et[S])throw new Error(`Expected an array of numbers for ${N}`);return et}function Ie(et,N){if("string"!=typeof et)throw new Error(`Expected a string for ${N}`);return et}function _t(et,N){if("number"!=typeof et)throw new Error(`Expected a number for ${N}`);return et}function zt(et,N){if("string"==typeof et)return et;const g=ti(et,N),S=g.length;if(S<3||S>4)throw new Error(`Expected a color with 3 or 4 values for ${N}`);return g}function xe(et,N){const g=ti(et,N);if(2!==g.length)throw new Error(`Expected an array of two numbers for ${N}`);return g}const hi=class Xe extends Y.A{constructor(N){N=N||{};const g=Object.assign({},N);delete g.style,delete g.renderBuffer,delete g.updateWhileAnimating,delete g.updateWhileInteracting,super(g),this.declutter_=N.declutter?String(N.declutter):void 0,this.renderBuffer_=void 0!==N.renderBuffer?N.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(N.style),this.updateWhileAnimating_=void 0!==N.updateWhileAnimating&&N.updateWhileAnimating,this.updateWhileInteracting_=void 0!==N.updateWhileInteracting&&N.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(N){return super.getFeatures(N)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(N,g){const S=this.getDeclutter();S in N.declutter||(N.declutter[S]=new z(9)),this.getRenderer().renderDeclutter(N,g)}setRenderOrder(N){this.set("renderOrder",N)}setStyle(N){this.style_=void 0===N?Q.d1:N;const g=function si(et){if(void 0===et)return Q.d1;if(!et)return null;if("function"==typeof et||et instanceof Q.Ay)return et;if(!Array.isArray(et))return D([et]);if(0===et.length)return[];const N=et.length,g=et[0];if(g instanceof Q.Ay){const K=new Array(N);for(let B=0;B<N;++B){const ot=et[B];if(!(ot instanceof Q.Ay))throw new Error("Expected a list of style instances");K[B]=ot}return K}if("style"in g){const K=new Array(N);for(let B=0;B<N;++B){const ot=et[B];if(!("style"in ot))throw new Error("Expected a list of rules with a style property");K[B]=ot}return function A(et){const N=(0,m.SR)(),g=function R(et,N){const g=et.length,S=new Array(g);for(let K=0;K<g;++K){const B=et[K],ot="filter"in B?i(B.filter,m.T8,N):Z;let dt;if(Array.isArray(B.style)){const It=B.style.length;dt=new Array(It);for(let Wt=0;Wt<It;++Wt)dt[Wt]=x(B.style[Wt],N)}else dt=[x(B.style,N)];S[K]={filter:ot,styles:dt}}return function(K){const B=[];let ot=!1;for(let dt=0;dt<g;++dt)if((0,S[dt].filter)(K)&&(!et[dt].else||!ot)){ot=!0;for(const Wt of S[dt].styles){const pe=Wt(K);pe&&B.push(pe)}}return B}}(et,N),S={variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""};return function(K,B){if(S.properties=K.getPropertiesInternal(),S.resolution=B,N.featureId){const ot=K.getId();S.featureId=void 0!==ot?ot:null}return N.geometryType&&(S.geometryType=(0,m.Ye)(K.getGeometry())),g(S)}}(K)}return D(et)}(N);this.styleFunction_=null===N?void 0:(0,Q.mC)(g),this.changed()}}},3942:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>n,i:()=>o});var Y=s(8324),z=s(6591),Q=s(2927),$=s(3805),L=s(6621),M=s(6058),w=s(5940),I=s(9330),y=s(8507),m=s(2383),u=s(2614);class o extends $.Ay{constructor(f,r){super(f),this.layer=r}}class l extends Y.A{constructor(f){f=f||{};const r=Object.assign({},f);delete r.layers;let C=f.layers;super(r),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),C?Array.isArray(C)?C=new z.A(C.slice(),{unique:!0}):(0,w.v)("function"==typeof C.getArray,"Expected `layers` to be an array or a `Collection`"):C=new z.A(void 0,{unique:!0}),this.setLayers(C)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(u.JH),this.layersListenerKeys_.length=0;const f=this.getLayers();this.layersListenerKeys_.push((0,u.KT)(f,Q.A.ADD,this.handleLayersAdd_,this),(0,u.KT)(f,Q.A.REMOVE,this.handleLayersRemove_,this));for(const C in this.listenerKeys_)this.listenerKeys_[C].forEach(u.JH);(0,I.I)(this.listenerKeys_);const r=f.getArray();for(let C=0,_=r.length;C<_;C++){const v=r[C];this.registerLayerListeners_(v),this.dispatchEvent(new o("addlayer",v))}this.changed()}registerLayerListeners_(f){const r=[(0,u.KT)(f,M.A.PROPERTYCHANGE,this.handleLayerChange_,this),(0,u.KT)(f,L.A.CHANGE,this.handleLayerChange_,this)];f instanceof l&&r.push((0,u.KT)(f,"addlayer",this.handleLayerGroupAdd_,this),(0,u.KT)(f,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,m.v6)(f)]=r}handleLayerGroupAdd_(f){this.dispatchEvent(new o("addlayer",f.layer))}handleLayerGroupRemove_(f){this.dispatchEvent(new o("removelayer",f.layer))}handleLayersAdd_(f){const r=f.element;this.registerLayerListeners_(r),this.dispatchEvent(new o("addlayer",r)),this.changed()}handleLayersRemove_(f){const r=f.element,C=(0,m.v6)(r);this.listenerKeys_[C].forEach(u.JH),delete this.listenerKeys_[C],this.dispatchEvent(new o("removelayer",r)),this.changed()}getLayers(){return this.get("layers")}setLayers(f){const r=this.getLayers();if(r){const C=r.getArray();for(let _=0,v=C.length;_<v;++_)this.dispatchEvent(new o("removelayer",C[_]))}this.set("layers",f)}getLayersArray(f){return f=void 0!==f?f:[],this.getLayers().forEach(function(r){r.getLayersArray(f)}),f}getLayerStatesArray(f){const r=void 0!==f?f:[],C=r.length;this.getLayers().forEach(function(F){F.getLayerStatesArray(r)});const _=this.getLayerState();let v=_.zIndex;!f&&void 0===_.zIndex&&(v=0);for(let F=C,O=r.length;F<O;F++){const X=r[F];X.opacity*=_.opacity,X.visible=X.visible&&_.visible,X.maxResolution=Math.min(X.maxResolution,_.maxResolution),X.minResolution=Math.max(X.minResolution,_.minResolution),X.minZoom=Math.max(X.minZoom,_.minZoom),X.maxZoom=Math.min(X.maxZoom,_.maxZoom),void 0!==_.extent&&(X.extent=void 0!==X.extent?(0,y._N)(X.extent,_.extent):_.extent),void 0===X.zIndex&&(X.zIndex=v)}return r}getSourceState(){return"ready"}}const n=l},7908:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>$});var Y=s(5715),z=s(4380);const $=class Q extends Y.A{constructor(M){super(M)}createRenderer(){return new z.A(this)}getData(M){return super.getData(M)}}},8052:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>u,l:()=>m});var Y=s(8324),z=s(6621),Q=s(4860),$=s(1688),L=s(3980),M=s(5940),w=s(8507),I=s(2614);function m(o,i){if(!o.visible)return!1;const l=i.resolution;if(l<o.minResolution||l>=o.maxResolution)return!1;const n=i.zoom;return n>o.minZoom&&n<=o.maxZoom}const u=class y extends Y.A{constructor(i){const l=Object.assign({},i);delete l.source,super(l),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,i.render&&(this.render=i.render),i.map&&this.setMap(i.map),this.addChangeListener(Q.A.SOURCE,this.handleSourcePropertyChange_),this.setSource(i.source?i.source:null)}getLayersArray(i){return(i=i||[]).push(this),i}getLayerStatesArray(i){return(i=i||[]).push(this.getLayerState()),i}getSource(){return this.get(Q.A.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const i=this.getSource();return i?i.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,I.JH)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const i=this.getSource();i&&(this.sourceChangeKey_=(0,I.KT)(i,z.A.CHANGE,this.handleSourceChange_,this),"ready"===i.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(i){return this.renderer_?this.renderer_.getFeatures(i):Promise.resolve([])}getData(i){return this.renderer_&&this.rendered?this.renderer_.getData(i):null}isVisible(i){let l;const n=this.getMapInternal();let d;!i&&n&&(i=n.getView()),l=i instanceof L.Ay?{viewState:i.getState(),extent:i.calculateExtent()}:i,!l.layerStatesArray&&n&&(l.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),d=l.layerStatesArray?l.layerStatesArray.find(r=>r.layer===this):this.getLayerState();const f=this.getExtent();return m(d,l.viewState)&&(!f||(0,w.HY)(f,l.extent))}getAttributions(i){if(!this.isVisible(i))return[];let l;const n=this.getSource();if(n&&(l=n.getAttributions()),!l)return[];let f=l(i instanceof L.Ay?i.getViewStateAndExtent():i);return Array.isArray(f)||(f=[f]),f}render(i,l){const n=this.getRenderer();return n.prepareFrame(i)?(this.rendered=!0,n.renderFrame(i,l)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(i,l){}renderDeferred(i){const l=this.getRenderer();l&&l.renderDeferred(i)}setMapInternal(i){i||this.unrender(),this.set(Q.A.MAP,i)}getMapInternal(){return this.get(Q.A.MAP)}setMap(i){this.mapPrecomposeKey_&&((0,I.JH)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),i||this.changed(),this.mapRenderKey_&&((0,I.JH)(this.mapRenderKey_),this.mapRenderKey_=null),i&&(this.mapPrecomposeKey_=(0,I.KT)(i,$.A.PRECOMPOSE,function(l){const d=l.frameState.layerStatesArray,f=this.getLayerState(!1);(0,M.v)(!d.some(function(r){return r.layer===f.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),d.push(f)},this),this.mapRenderKey_=(0,I.KT)(this,z.A.CHANGE,i.render,i),this.changed())}setSource(i){this.set(Q.A.SOURCE,i)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}},4860:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},8201:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>$});var Y=s(1744),z=s(2565);const $=class Q extends Y.A{constructor(M){super(M)}createRenderer(){return new z.A(this)}}},6952:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},9346:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>$});var Y=s(7477),z=s(3812);const $=class Q extends Y.A{constructor(M){super(M)}createRenderer(){return new z.A(this)}}},5927:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>O});var Y=s(7477),z=s(99),Q=s(3826),$=s(2565),L=s(9806),M=s(6631),w=s(1120),I=s(3031),y=s(1983),m=s(2058),u=s(8507),o=s(4944),i=s(2383),l=s(9270),n=s(5085);const d={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},f={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},C=class r extends $.A{constructor(P){super(P),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedPixelToCoordinateTransform_=null,this.renderedOpacity_=1,this.tmpTransform_=(0,y.vt)(),this.tileClipContexts_=null}prepareTile(P,E,W){let Z;const A=P.getState();return(A===L.A.LOADED||A===L.A.ERROR)&&(this.updateExecutorGroup_(P,E,W),this.tileImageNeedsRender_(P)&&(Z=!0)),Z}getTile(P,E,W,Z){const A=Z.pixelRatio,D=Z.viewState,R=D.resolution,x=D.projection,T=this.getLayer(),U=T.getSource().getTile(P,E,W,A,x),tt=Z.viewHints,it=!(tt[M.A.ANIMATING]||tt[M.A.INTERACTING]);return(it||!U.wantedResolution)&&(U.wantedResolution=R),this.prepareTile(U,A,x)&&(it||Date.now()-Z.time<8)&&"vector"!==T.getRenderMode()&&this.renderTileImage_(U,Z),super.getTile(P,E,W,Z)}isDrawableTile(P){const E=this.getLayer();return super.isDrawableTile(P)&&("vector"===E.getRenderMode()?(0,i.v6)(E)in P.executorGroups:P.hasContext(E))}getTileImage(P){return P.getImage(this.getLayer())}prepareFrame(P){const E=this.getLayer().getRevision();return this.renderedLayerRevision_!==E&&(this.renderedLayerRevision_=E,this.renderedTiles.length=0),super.prepareFrame(P)}updateExecutorGroup_(P,E,W){const Z=this.getLayer(),A=Z.getRevision(),D=Z.getRenderOrder()||null,R=P.wantedResolution,x=P.getReplayState(Z);if(!x.dirty&&x.renderedResolution===R&&x.renderedRevision==A&&x.renderedRenderOrder==D)return;const T=Z.getSource(),U=!!Z.getDeclutter(),tt=T.getTileGrid(),J=T.getTileGridForProjection(W).getTileCoordExtent(P.wrappedTileCoord),ht=T.getSourceTiles(E,W,P),mt=(0,i.v6)(Z);delete P.hitDetectionImageData[mt],P.executorGroups[mt]=[],x.dirty=!1;for(let Et=0,Ot=ht.length;Et<Ot;++Et){const Nt=ht[Et];if(Nt.getState()!=L.A.LOADED)continue;const Ct=tt.getTileCoordExtent(Nt.tileCoord),Dt=(0,u._N)(J,Ct),re=(0,u.r)(Dt,Z.getRenderBuffer()*R,this.tmpExtent),Jt=(0,u.aI)(Ct,Dt)?null:re,ye=new z.A(0,Dt,R,E),oe=(0,o.j)(R,E),_e=function(Ae,qe){let ti;const Ie=Ae.getStyleFunction()||Z.getStyleFunction();if(Ie&&(ti=Ie(Ae,R)),ti){const _t=this.renderFeature(Ae,oe,ti,ye,U,qe);x.dirty=x.dirty||_t}},ct=Nt.getFeatures();D&&D!==x.renderedRenderOrder&&ct.sort(D);for(let Ae=0,qe=ct.length;Ae<qe;++Ae){const ti=ct[Ae];(!Jt||(0,u.HY)(Jt,ti.getGeometry().getExtent()))&&_e.call(this,ti,Ae)}const Gt=ye.finish(),Vt="vector"!==Z.getRenderMode()&&U&&1===ht.length?null:Dt,ge=new Q.Ay(Vt,R,E,T.getOverlaps(),Gt,Z.getRenderBuffer(),!0);P.executorGroups[mt].push(ge)}x.renderedRevision=A,x.renderedRenderOrder=D,x.renderedResolution=R}forEachFeatureAtCoordinate(P,E,W,Z,A){const D=E.viewState.resolution,R=E.viewState.rotation;W=W??0;const x=this.getLayer(),U=x.getSource().getTileGridForProjection(E.viewState.projection),tt=(0,u.Tr)([P]);(0,u.r)(tt,D*W,tt);const it={},J=function(Et,Ot,Nt){let ft=Et.getId();void 0===ft&&(ft=(0,i.v6)(Et));const Ct=it[ft];if(Ct){if(!0!==Ct&&Nt<Ct.distanceSq){if(0===Nt)return it[ft]=!0,A.splice(A.lastIndexOf(Ct),1),Z(Et,x,Ot);Ct.geometry=Ot,Ct.distanceSq=Nt}}else{if(0===Nt)return it[ft]=!0,Z(Et,x,Ot);A.push(it[ft]={feature:Et,layer:x,geometry:Ot,distanceSq:Nt,callback:Z})}},ht=this.renderedTiles;let mt;for(let Et=0,Ot=ht.length;!mt&&Et<Ot;++Et){const Nt=ht[Et],ft=U.getTileCoordExtent(Nt.wrappedTileCoord);if(!(0,u.HY)(ft,tt))continue;const Ct=(0,i.v6)(x),Dt=[Nt.executorGroups[Ct]],re=x.getDeclutter();Dt.some(Jt=>{const ye=re?E.declutter[re].all().map(oe=>oe.value):null;for(let oe=0,_e=Jt.length;oe<_e;++oe)if(mt=Jt[oe].forEachFeatureAtCoordinate(P,D,R,W,J,ye),mt)return!0})}return mt}getFeatures(P){return new Promise((E,W)=>{const Z=this.getLayer(),A=(0,i.v6)(Z),D=Z.getSource(),R=this.renderedProjection,x=R.getExtent(),T=this.renderedResolution,U=D.getTileGridForProjection(R),tt=(0,y.Bb)(this.renderedPixelToCoordinateTransform_,P.slice()),it=U.getTileCoordForCoordAndResolution(tt,T);let J;for(let ft=0,Ct=this.renderedTiles.length;ft<Ct;++ft)if(it.toString()===this.renderedTiles[ft].tileCoord.toString()){if(J=this.renderedTiles[ft],J.getState()===L.A.LOADED){const Dt=U.getTileCoordExtent(J.tileCoord);D.getWrapX()&&R.canWrapX()&&!(0,u.ms)(x,Dt)&&(0,n.Li)(tt,R);break}J=void 0}if(!J||J.loadingSourceTiles>0)return void E([]);const ht=U.getTileCoordExtent(J.wrappedTileCoord),mt=(0,u.Py)(ht),Et=[(tt[0]-mt[0])/T,(mt[1]-tt[1])/T],Ot=J.getSourceTiles().reduce(function(ft,Ct){return ft.concat(Ct.getFeatures())},[]);let Nt=J.hitDetectionImageData[A];if(!Nt){const ft=(0,l.xq)(U.getTileSize(U.getZForResolution(T,D.zDirection))),Ct=this.renderedRotation_,Dt=[this.getRenderTransform(U.getTileCoordCenter(J.wrappedTileCoord),T,0,I.tF,ft[0]*I.tF,ft[1]*I.tF,0)];Nt=(0,I._7)(ft,Dt,Ot,Z.getStyleFunction(),U.getTileCoordExtent(J.wrappedTileCoord),J.getReplayState(Z).renderedResolution,Ct),J.hitDetectionImageData[A]=Nt}E((0,I.F8)(Et,Ot,Nt))})}handleFontsChanged(){const P=this.getLayer();P.getVisible()&&void 0!==this.renderedLayerRevision_&&P.changed()}handleStyleImageChange_(P){this.renderIfReadyAndVisible()}renderDeclutter(P,E){const W=this.context,Z=W.globalAlpha;W.globalAlpha=E.opacity;const A=P.viewHints,D=!(A[M.A.ANIMATING]||A[M.A.INTERACTING]),R=this.renderedTiles;for(let x=0,T=R.length;x<T;++x){const U=R[x],tt=U.executorGroups[(0,i.v6)(this.getLayer())],it=this.getLayer().getDeclutter();if(tt)for(let J=tt.length-1;J>=0;--J)tt[J].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(U,P),P.viewState.rotation,D,Q.$i,it?P.declutter[it]:void 0)}W.globalAlpha=Z}renderDeferredInternal(P){const W=this.renderedTiles.reduce((R,x,T)=>(x.executorGroups[(0,i.v6)(this.getLayer())].forEach(U=>R.push({executorGroup:U,index:T})),R),[]),Z=W.map(({executorGroup:R})=>R.getDeferredZIndexContexts()),A={};for(let R=0,x=W.length;R<x;++R){const T=W[R].executorGroup.getDeferredZIndexContexts();for(const U in T)A[U]=!0}Object.keys(A).sort(m.V_).map(Number).forEach(R=>{Z.forEach((x,T)=>{x[R]&&(x[R].forEach(U=>{const{executorGroup:tt,index:it}=W[T],J=tt.getRenderedContext(),ht=J.globalAlpha;J.globalAlpha=this.renderedOpacity_;const mt=this.tileClipContexts_[it];mt&&mt.draw(J),U.draw(J),mt&&J.restore(),J.globalAlpha=ht,U.clear()}),x[R].length=0)})})}getTileRenderTransform(P,E){const W=E.pixelRatio,Z=E.viewState,A=Z.center,D=Z.resolution,R=Z.rotation,x=E.size,T=Math.round(x[0]*W),U=Math.round(x[1]*W),it=this.getLayer().getSource().getTileGridForProjection(E.viewState.projection),J=P.tileCoord,ht=it.getTileCoordExtent(P.wrappedTileCoord),mt=it.getTileCoordExtent(J,this.tmpExtent)[0]-ht[0];return(0,y.lw)((0,y.hs)(this.inversePixelTransform.slice(),1/W,1/W),this.getRenderTransform(A,D,R,W,T,U,mt))}postRender(P,E){const W=E.viewHints,Z=!(W[M.A.ANIMATING]||W[M.A.INTERACTING]);this.renderedPixelToCoordinateTransform_=E.pixelToCoordinateTransform.slice(),this.renderedRotation_=E.viewState.rotation,this.renderedOpacity_=E.layerStatesArray[E.layerIndex].opacity;const A=this.getLayer(),D=A.getRenderMode(),R=P.globalAlpha;P.globalAlpha=this.renderedOpacity_;const x=A.getDeclutter(),T=x?f[D].filter(Ct=>!Q.$i.includes(Ct)):f[D],U=E.viewState,tt=U.rotation,it=A.getSource(),ht=it.getTileGridForProjection(U.projection).getZForResolution(U.resolution,it.zDirection),mt=this.renderedTiles,Et=[],Ot=[],Nt=[];let ft=!0;for(let Ct=mt.length-1;Ct>=0;--Ct){const Dt=mt[Ct];ft=ft&&!Dt.getReplayState(A).dirty;const re=Dt.executorGroups[(0,i.v6)(A)].filter(Vt=>Vt.hasExecutors(T));if(0===re.length)continue;const Jt=this.getTileRenderTransform(Dt,E),ye=Dt.tileCoord[0];let oe=!1;const _e=re[0].getClipCoords(Jt);let Gt,ct=P;if(_e){Gt=new w.A,ct=Gt.getContext();for(let Vt=0,ge=Et.length;Vt<ge;++Vt)if(ht!==ye&&ye<Ot[Vt]){const Ae=Et[Vt];(0,u.HY)([_e[0],_e[3],_e[4],_e[7]],[Ae[0],Ae[3],Ae[4],Ae[7]])&&(oe||(ct.save(),oe=!0),ct.beginPath(),ct.moveTo(_e[0],_e[1]),ct.lineTo(_e[2],_e[3]),ct.lineTo(_e[4],_e[5]),ct.lineTo(_e[6],_e[7]),ct.moveTo(Ae[6],Ae[7]),ct.lineTo(Ae[4],Ae[5]),ct.lineTo(Ae[2],Ae[3]),ct.lineTo(Ae[0],Ae[1]),ct.clip())}Et.push(_e),Ot.push(ye)}for(let Vt=0,ge=re.length;Vt<ge;++Vt)re[Vt].execute(P,[P.canvas.width,P.canvas.height],Jt,tt,Z,T,E.declutter?.[x]);oe&&(ct===P?ct.restore():Nt[Ct]=Gt)}P.globalAlpha=R,this.ready=ft,this.tileClipContexts_=Nt,E.declutter||this.renderDeferredInternal(E),super.postRender(P,E)}renderFeature(P,E,W,Z,A,D){if(!W)return!1;let R=!1;if(Array.isArray(W))for(let x=0,T=W.length;x<T;++x)R=(0,o.nl)(Z,P,W[x],E,this.boundHandleStyleImageChange_,void 0,A,D)||R;else R=(0,o.nl)(Z,P,W,E,this.boundHandleStyleImageChange_,void 0,A,D);return R}tileImageNeedsRender_(P){const E=this.getLayer();if("vector"===E.getRenderMode())return!1;const W=P.getReplayState(E),Z=E.getRevision();return W.renderedTileResolution!==P.wantedResolution||W.renderedTileRevision!==Z}renderTileImage_(P,E){const W=this.getLayer(),Z=P.getReplayState(W),A=W.getRevision(),D=P.executorGroups[(0,i.v6)(W)];Z.renderedTileRevision=A;const R=P.wrappedTileCoord,x=R[0],T=W.getSource();let U=E.pixelRatio;const it=E.viewState.projection,J=T.getTileGridForProjection(it),ht=J.getResolution(P.tileCoord[0]),mt=E.pixelRatio/P.wantedResolution*ht,Et=J.getResolution(x),Ot=P.getContext(W);U=Math.round(Math.max(U,mt/U));const Nt=T.getTilePixelSize(x,U,it);Ot.canvas.width=Nt[0],Ot.canvas.height=Nt[1];const ft=U/mt;if(1!==ft){const Jt=(0,y.cL)(this.tmpTransform_);(0,y.hs)(Jt,ft,ft),Ot.setTransform.apply(Ot,Jt)}const Ct=J.getTileCoordExtent(R,this.tmpExtent),Dt=mt/Et,re=(0,y.cL)(this.tmpTransform_);(0,y.hs)(re,Dt,-Dt),(0,y.Tl)(re,-Ct[0],-Ct[3]);for(let Jt=0,ye=D.length;Jt<ye;++Jt)D[Jt].execute(Ot,[Ot.canvas.width*ft,Ot.canvas.height*ft],re,0,!0,d[W.getRenderMode()],null);Z.renderedTileResolution=P.wantedResolution}};var _=s(6952),v=s(5940);const O=class F extends Y.A{constructor(P){P=P||{};const E=Object.assign({},P);delete E.preload,delete E.useInterimTilesOnError,super(E);const W=P.renderMode||"hybrid";(0,v.v)("hybrid"==W||"vector"==W,"`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=W,this.setPreload(P.preload?P.preload:0),this.setUseInterimTilesOnError(void 0===P.useInterimTilesOnError||P.useInterimTilesOnError)}createRenderer(){return new C(this)}getFeatures(P){return super.getFeatures(P)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(_.A.PRELOAD)}getUseInterimTilesOnError(){return this.get(_.A.USE_INTERIM_TILES_ON_ERROR)}setPreload(P){this.set(_.A.PRELOAD,P)}setUseInterimTilesOnError(P){this.set(_.A.USE_INTERIM_TILES_ON_ERROR,P)}}},7206:(le,pt,s)=>{"use strict";function z(L,M){return[[-1/0,-1/0,1/0,1/0]]}function Q(L,M){return[L]}s.d(pt,{Q7:()=>z,Qk:()=>Q}),s(9325)},9973:(le,pt,s)=>{"use strict";function Y(i,l,n){return Math.min(Math.max(i,l),n)}function z(i,l,n,d,f,r){const C=f-n,_=r-d;if(0!==C||0!==_){const v=((i-n)*C+(l-d)*_)/(C*C+_*_);v>1?(n=f,d=r):v>0&&(n+=C*v,d+=_*v)}return Q(i,l,n,d)}function Q(i,l,n,d){const f=n-i,r=d-l;return f*f+r*r}function $(i){const l=i.length;for(let d=0;d<l;d++){let f=d,r=Math.abs(i[d][d]);for(let _=d+1;_<l;_++){const v=Math.abs(i[_][d]);v>r&&(r=v,f=_)}if(0===r)return null;const C=i[f];i[f]=i[d],i[d]=C;for(let _=d+1;_<l;_++){const v=-i[_][d]/i[d][d];for(let F=d;F<l+1;F++)d==F?i[_][F]=0:i[_][F]+=v*i[d][F]}}const n=new Array(l);for(let d=l-1;d>=0;d--){n[d]=i[d][l]/i[d][d];for(let f=d-1;f>=0;f--)i[f][l]-=i[f][d]*n[d]}return n}function M(i){return i*Math.PI/180}function w(i,l){const n=i%l;return n*l<0?n+l:n}function I(i,l,n){return i+n*(l-i)}function y(i,l){const n=Math.pow(10,l);return Math.round(i*n)/n}function m(i,l){return Math.round(y(i,l))}function u(i,l){return Math.floor(y(i,l))}function o(i,l){return Math.ceil(y(i,l))}s.d(pt,{Cc:()=>I,KU:()=>$,LI:()=>m,Mg:()=>y,Q1:()=>z,RI:()=>u,eh:()=>M,hG:()=>Q,mk:()=>o,qE:()=>Y,xP:()=>w})},9330:(le,pt,s)=>{"use strict";function Y(Q){for(const $ in Q)delete Q[$]}function z(Q){let $;for($ in Q)return!1;return!$}s.d(pt,{I:()=>Y,p:()=>z})},8669:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},9325:(le,pt,s)=>{"use strict";s.d(pt,{Ig:()=>d.I,MF:()=>Y.A,hB:()=>re,O3:()=>Ot,bF:()=>J,Av:()=>Ct,wU:()=>hi,RJ:()=>U,tI:()=>oe,Rb:()=>Jt,Ad:()=>xe,SD:()=>ze,Jt:()=>mt,hO:()=>Et,RG:()=>ct,FO:()=>_e,Tf:()=>Ie,R6:()=>it,te:()=>zt,JR:()=>$t,vN:()=>Xe,pd:()=>Gt,DI:()=>Vt});var Y=s(206);const z=6378137,Q=Math.PI*z,$=[-Q,-Q,Q,Q],L=[-180,-85,180,85],M=z*Math.log(Math.tan(Math.PI/2));class w extends Y.A{constructor(g){super({code:g,units:"m",extent:$,global:!0,worldExtent:L,getPointResolution:function(S,K){return S/Math.cosh(K[1]/z)}})}}const I=[new w("EPSG:3857"),new w("EPSG:102100"),new w("EPSG:102113"),new w("EPSG:900913"),new w("http://www.opengis.net/def/crs/EPSG/0/3857"),new w("http://www.opengis.net/gml/srs/epsg.xml#3857")];function y(N,g,S){const K=N.length;S=S>1?S:2,void 0===g&&(g=S>2?N.slice():new Array(K));for(let B=0;B<K;B+=S){g[B]=Q*N[B]/180;let ot=z*Math.log(Math.tan(Math.PI*(+N[B+1]+90)/360));ot>M?ot=M:ot<-M&&(ot=-M),g[B+1]=ot}return g}function m(N,g,S){const K=N.length;S=S>1?S:2,void 0===g&&(g=S>2?N.slice():new Array(K));for(let B=0;B<K;B+=S)g[B]=180*N[B]/Q,g[B+1]=360*Math.atan(Math.exp(N[B+1]/z))/Math.PI-90;return g}const o=[-180,-90,180,90],i=6378137*Math.PI/180;class l extends Y.A{constructor(g,S){super({code:g,units:"degrees",extent:o,axisOrientation:S,global:!0,metersPerUnit:i,worldExtent:o})}}const n=[new l("CRS:84"),new l("EPSG:4326","neu"),new l("urn:ogc:def:crs:OGC:1.3:CRS84"),new l("urn:ogc:def:crs:OGC:2:84"),new l("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new l("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new l("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var d=s(6508);let f={};var v=s(4238),F=s(8507),O=s(9973),X=s(5085);const P=6371008.8;function E(N,g,S){S=S||P;const K=(0,O.eh)(N[1]),B=(0,O.eh)(g[1]),ot=(B-K)/2,dt=(0,O.eh)(g[0]-N[0])/2,It=Math.sin(ot)*Math.sin(ot)+Math.sin(dt)*Math.sin(dt)*Math.cos(K)*Math.cos(B);return 2*S*Math.atan2(Math.sqrt(It),Math.sqrt(1-It))}var x=s(5278);let T=!0;function U(N){T=!(void 0===N||N)}function tt(N,g){if(void 0!==g)for(let S=0,K=N.length;S<K;++S)g[S]=N[S];else g=N.slice();return g}function it(N,g){if(void 0!==g&&N!==g){for(let S=0,K=N.length;S<K;++S)g[S]=N[S];N=g}return N}function J(N){(function _(N,g){f[N]=g})(N.getCode(),N),(0,v.WQ)(N,N,tt)}function mt(N){return"string"==typeof N?function C(N){return f[N]||f[N.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(N):N||null}function Et(N,g,S,K){let B;const ot=(N=mt(N)).getPointResolutionFunc();if(ot){if(B=ot(g,S),K&&K!==N.getUnits()){const dt=N.getMetersPerUnit();dt&&(B=B*dt/d.I[K])}}else{const dt=N.getUnits();if("degrees"==dt&&!K||"degrees"==K)B=g;else{const It=_e(N,mt("EPSG:4326"));if(It===it&&"degrees"!==dt)B=g*N.getMetersPerUnit();else{let pe=[S[0]-g/2,S[1],S[0]+g/2,S[1],S[0],S[1]-g/2,S[0],S[1]+g/2];pe=It(pe,pe,2),B=(E(pe.slice(0,2),pe.slice(2,4))+E(pe.slice(4,6),pe.slice(6,8)))/2}const Wt=K?d.I[K]:N.getMetersPerUnit();void 0!==Wt&&(B/=Wt)}}return B}function Ot(N){(function ht(N){N.forEach(J)})(N),N.forEach(function(g){N.forEach(function(S){g!==S&&(0,v.WQ)(g,S,tt)})})}function Ct(N,g){return N?"string"==typeof N?mt(N):N:mt(g)}function Dt(N){return function(g,S,K){const B=g.length;K=void 0!==K?K:2,S=void 0!==S?S:new Array(B);for(let ot=0;ot<B;ot+=K){const dt=N(g.slice(ot,ot+K)),It=dt.length;for(let Wt=0,pe=K;Wt<pe;++Wt)S[ot+Wt]=Wt>=It?g[ot+Wt]:dt[Wt]}return S}}function re(N,g,S,K){const B=mt(N),ot=mt(g);(0,v.WQ)(B,ot,Dt(S)),(0,v.WQ)(ot,B,Dt(K))}function Jt(N,g){return U(),Gt(N,"EPSG:4326",void 0!==g?g:"EPSG:3857")}function oe(N,g){if(N===g)return!0;const S=N.getUnits()===g.getUnits();return(N.getCode()===g.getCode()||_e(N,g)===tt)&&S}function _e(N,g){const S=N.getCode(),K=g.getCode();let B=(0,v.Jt)(S,K);return B||(B=it),B}function ct(N,g){return _e(mt(N),mt(g))}function Gt(N,g,S){return ct(g,S)(N,void 0,N.length)}function Vt(N,g,S,K){const B=ct(g,S);return(0,F.NW)(N,B,void 0,K)}let Ae=null;function Ie(){return Ae}function zt(N,g){return Ae?Gt(N,g,Ae):N}function xe(N,g){return Ae?Gt(N,Ae,g):(T&&!(0,X.aI)(N,[0,0])&&N[0]>=-180&&N[0]<=180&&N[1]>=-90&&N[1]<=90&&(T=!1,(0,x.R8)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),N)}function $t(N,g){return Ae?Vt(N,g,Ae):N}function ze(N,g){return Ae?Vt(N,Ae,g):N}function Xe(N,g){if(!Ae)return N;const S=mt(g).getMetersPerUnit(),K=Ae.getMetersPerUnit();return S&&K?N*S/K:N}function hi(N,g,S){return function(K){let B,ot;if(N.canWrapX()){const dt=N.getExtent(),It=(0,F.RG)(dt);K=K.slice(0),ot=(0,X.U$)(K,N,It),ot&&(K[0]=K[0]-ot*It),K[0]=(0,O.qE)(K[0],dt[0],dt[2]),K[1]=(0,O.qE)(K[1],dt[1],dt[3]),B=S(K)}else B=S(K);return ot&&g.canWrapX()&&(B[0]+=ot*(0,F.RG)(g.getExtent())),B}}!function et(){Ot(I),Ot(n),function Nt(N,g,S,K){N.forEach(function(B){g.forEach(function(ot){(0,v.WQ)(B,ot,S),(0,v.WQ)(ot,B,K)})})}(n,I,y,m)}()},206:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Q});var Y=s(6508);const Q=class z{constructor(L){this.code_=L.code,this.units_=L.units,this.extent_=void 0!==L.extent?L.extent:null,this.worldExtent_=void 0!==L.worldExtent?L.worldExtent:null,this.axisOrientation_=void 0!==L.axisOrientation?L.axisOrientation:"enu",this.global_=void 0!==L.global&&L.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=L.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=L.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Y.I[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(L){this.global_=L,this.canWrapX_=!(!L||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(L){this.defaultTileGrid_=L}setExtent(L){this.extent_=L,this.canWrapX_=!(!this.global_||!L)}setWorldExtent(L){this.worldExtent_=L}setGetPointResolution(L){this.getPointResolutionFunc_=L}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},6508:(le,pt,s)=>{"use strict";s.d(pt,{I:()=>Q});const Q={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},9190:(le,pt,s)=>{"use strict";s.d(pt,{kz:()=>w});var Y=s(206),z=s(9325),Q=s(4238);let $=null;function w(l){$=l;const n=Object.keys(l.defs),d=n.length;let f,r;for(f=0;f<d;++f){const C=n[f];if(!(0,z.Jt)(C)){const _=l.defs(C);let v=_.units;!v&&"longlat"===_.projName&&(v="degrees"),(0,z.bF)(new Y.A({code:C,axisOrientation:_.axis,metersPerUnit:_.to_meter,units:v}))}}for(f=0;f<d;++f){const C=n[f],_=(0,z.Jt)(C);for(r=0;r<d;++r){const v=n[r],F=(0,z.Jt)(v);if(!(0,Q.Jt)(C,v))if(l.defs[C]===l.defs[v])(0,z.O3)([_,F]);else{const O=l(C,v);(0,z.hB)(_,F,(0,z.wU)(_,F,O.forward),(0,z.wU)(F,_,O.inverse))}}}}},4238:(le,pt,s)=>{"use strict";s.d(pt,{Jt:()=>L,WQ:()=>Q});let Y={};function Q(M,w,I){const y=M.getCode(),m=w.getCode();y in Y||(Y[y]={}),Y[y][m]=I}function L(M,w){let I;return M in Y&&w in Y[M]&&(I=Y[M][w]),I}},2800:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Q});var Y=s(3805);const Q=class z extends Y.Ay{constructor(L,M,w,I){super(L),this.inversePixelTransform=M,this.frameState=w,this.context=I}}},1688:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},2386:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>d});var Y=s(1983),z=s(8507),Q=s(463),$=s(2058),L=s(2544),M=s(9325),w=s(3834),I=s(9721),y=s(6281),m=s(1766),u=s(9662);const o=(0,Y.vt)();class i{constructor(r,C,_,v,F,O){this.id_=O,this.type_=r,this.flatCoordinates_=C,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=_||null,this.properties_=F,this.stride_=v}get(r){return this.properties_[r]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,z.dP)(this.flatCoordinates_):(0,z.Vy)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const r=(0,z.q1)(this.getExtent());this.flatInteriorPoints_=(0,L.J)(this.flatCoordinates_,0,this.ends_,2,r,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const r=(0,w.yJ)(this.flatCoordinates_,this.ends_),C=(0,y.C)(this.flatCoordinates_,0,r,2);this.flatInteriorPoints_=(0,L.p)(this.flatCoordinates_,0,r,2,C)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,I.SH)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const r=this.flatCoordinates_;let C=0;const _=this.ends_;for(let v=0,F=_.length;v<F;++v){const O=_[v],X=(0,I.SH)(r,C,O,2,.5);(0,$.X$)(this.flatMidpoints_,X),C=O}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(r){return this}simplifyTransformed(r,C){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(r){const C=(r=(0,M.Jt)(r)).getExtent(),_=r.getWorldExtent();if(C&&_){const v=(0,z.Oq)(_)/(0,z.Oq)(C);(0,Y.Zz)(o,_[0],_[3],v,-v,0,0,0),(0,u.Rc)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,o,this.flatCoordinates_)}}applyTransform(r){r(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new i(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=(0,m.B4)((r,C)=>{if(r===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),C&&this.simplifiedGeometry_.applyTransform(C);const _=this.simplifiedGeometry_.getFlatCoordinates();let v;switch(this.type_){case"LineString":_.length=(0,Q.P4)(_,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,r,_,0),v=[_.length];break;case"MultiLineString":v=[],_.length=(0,Q.AL)(_,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,r,_,0,v);break;case"Polygon":v=[],_.length=(0,Q.Hg)(_,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(r),_,0,v)}return v&&(this.simplifiedGeometry_=new i(this.type_,_,v,2,this.properties_,this.id_)),this.squaredTolerance_=r,this.simplifiedGeometry_}),this}}i.prototype.getFlatCoordinates=i.prototype.getOrientedFlatCoordinates;const d=i},3762:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>z});const z=class Y{drawCustom($,L,M,w,I){}drawGeometry($){}setStyle($){}drawCircle($,L,M){}drawFeature($,L,M){}drawGeometryCollection($,L,M){}drawLineString($,L,M){}drawMultiLineString($,L,M){}drawMultiPoint($,L,M){}drawMultiPolygon($,L,M){}drawPoint($,L,M){}drawPolygon($,L,M){}drawText($,L,M){}setFillStrokeStyle($,L){}setImageStyle($,L){}setTextStyle($,L){}}},2462:(le,pt,s)=>{"use strict";s.d(pt,{Jw:()=>A,M8:()=>n,MY:()=>l,NT:()=>i,Oq:()=>y,TA:()=>E,Tq:()=>d,ZV:()=>M,_K:()=>u,_m:()=>I,aq:()=>f,eL:()=>o,fZ:()=>F,jT:()=>W,qY:()=>w,vk:()=>m,yY:()=>r});var Y=s(9568),z=s(2531),Q=s(9330),$=s(5551),L=s(1776);const M="10px sans-serif",w="#000",I="round",y=[],m=0,u="round",o=10,i="#000",l="center",n="middle",d=[0,0,0,0],f=1,r=new Y.A;let _,C=null;const v={},F=function(){const x="32px ",T=["monospace","serif"],U=T.length,tt="wmytzilWMYTZIL@#/&?$%10\uf013";let it,J;function ht(Et,Ot,Nt){let ft=!0;for(let Ct=0;Ct<U;++Ct){const Dt=T[Ct];if(J=P(Et+" "+Ot+" "+x+Dt,tt),Nt!=Dt){const re=P(Et+" "+Ot+" "+x+Nt+","+Dt,tt);ft=ft&&re!=J}}return!!ft}function mt(){let Et=!0;const Ot=r.getKeys();for(let Nt=0,ft=Ot.length;Nt<ft;++Nt){const Ct=Ot[Nt];r.get(Ct)<100&&(ht.apply(this,Ct.split("\n"))?((0,Q.I)(v),C=null,_=void 0,r.set(Ct,100)):(r.set(Ct,r.get(Ct)+1,!0),Et=!1))}Et&&(clearInterval(it),it=void 0)}return function(Et){const Ot=(0,L.K5)(Et);if(!Ot)return;const Nt=Ot.families;for(let ft=0,Ct=Nt.length;ft<Ct;++ft){const Dt=Nt[ft],re=Ot.style+"\n"+Ot.weight+"\n"+Dt;void 0===r.get(re)&&(r.set(re,100,!0),ht(Ot.style,Ot.weight,Dt)||(r.set(re,0,!0),void 0===it&&(it=setInterval(mt,32))))}}}(),O=function(){let R;return function(x){let T=v[x];if(null==T){if(z.Wl){const U=(0,L.K5)(x),tt=X(x,"\u017dg");T=(isNaN(Number(U.lineHeight))?1.2:Number(U.lineHeight))*(tt.actualBoundingBoxAscent+tt.actualBoundingBoxDescent)}else R||(R=document.createElement("div"),R.innerHTML="M",R.style.minHeight="0",R.style.maxHeight="none",R.style.height="auto",R.style.padding="0",R.style.border="none",R.style.position="absolute",R.style.display="block",R.style.left="-99999px"),R.style.font=x,document.body.appendChild(R),T=R.offsetHeight,document.body.removeChild(R);v[x]=T}return T}}();function X(R,x){return C||(C=(0,$.Y)(1,1)),R!=_&&(C.font=R,_=C.font),C.measureText(x)}function P(R,x){return X(R,x).width}function E(R,x,T){if(x in T)return T[x];const U=x.split("\n").reduce((tt,it)=>Math.max(tt,P(R,it)),0);return T[x]=U,U}function W(R,x){const T=[],U=[],tt=[];let it=0,J=0,ht=0,mt=0;for(let Et=0,Ot=x.length;Et<=Ot;Et+=2){const Nt=x[Et];if("\n"===Nt||Et===Ot){it=Math.max(it,J),tt.push(J),J=0,ht+=mt,mt=0;continue}const ft=x[Et+1]||R.font,Ct=P(ft,Nt);T.push(Ct),J+=Ct;const Dt=O(ft);U.push(Dt),mt=Math.max(mt,Dt)}return{width:it,height:ht,widths:T,heights:U,lineWidths:tt}}function A(R,x,T,U,tt,it,J,ht,mt,Et,Ot){R.save(),1!==T&&(void 0===R.globalAlpha?R.globalAlpha=Nt=>Nt.globalAlpha*=T:R.globalAlpha*=T),x&&R.transform.apply(R,x),U.contextInstructions?(R.translate(mt,Et),R.scale(Ot[0],Ot[1]),function D(R,x){const T=R.contextInstructions;for(let U=0,tt=T.length;U<tt;U+=2)Array.isArray(T[U+1])?x[T[U]].apply(x,T[U+1]):x[T[U]]=T[U+1]}(U,R)):Ot[0]<0||Ot[1]<0?(R.translate(mt,Et),R.scale(Ot[0],Ot[1]),R.drawImage(U,tt,it,J,ht,0,0,J,ht)):R.drawImage(U,tt,it,J,ht,mt,Et,J*Ot[0],ht*Ot[1]),R.restore()}},570:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>m});var Y=s(7205),z=s(1524),Q=s(3762),$=s(2775),L=s(8507),M=s(2462),w=s(2058),I=s(7697);const m=class y extends Q.A{constructor(o,i,l,n){super(),this.tolerance=o,this.maxExtent=i,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=l,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(o){const i=this.pixelRatio;return 1==i?o:o.map(function(l){return l*i})}appendFlatPointCoordinates(o,i){const l=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,d=this.coordinates;let f=d.length;for(let r=0,C=o.length;r<C;r+=i)n[0]=o[r],n[1]=o[r+1],(0,L.Ym)(l,n)&&(d[f++]=n[0],d[f++]=n[1]);return f}appendFlatLineCoordinates(o,i,l,n,d,f){const r=this.coordinates;let C=r.length;const _=this.getBufferedMaxExtent();f&&(i+=n);let v=o[i],F=o[i+1];const O=this.tmpCoordinate_;let P,E,W,X=!0;for(P=i+n;P<l;P+=n)O[0]=o[P],O[1]=o[P+1],W=(0,L.vz)(_,O),W!==E?(X&&(r[C++]=v,r[C++]=F,X=!1),r[C++]=O[0],r[C++]=O[1]):W===z.A.INTERSECTING?(r[C++]=O[0],r[C++]=O[1],X=!1):X=!0,v=O[0],F=O[1],E=W;return(d&&X||P===i+n)&&(r[C++]=v,r[C++]=F),C}drawCustomCoordinates_(o,i,l,n,d){for(let f=0,r=l.length;f<r;++f){const C=l[f],_=this.appendFlatLineCoordinates(o,i,C,n,!1,!1);d.push(_),i=C}return i}drawCustom(o,i,l,n,d){this.beginGeometry(o,i,d);const f=o.getType(),r=o.getStride(),C=this.coordinates.length;let _,v,F,O,X;switch(f){case"MultiPolygon":_=o.getOrientedFlatCoordinates(),O=[];const P=o.getEndss();X=0;for(let E=0,W=P.length;E<W;++E){const Z=[];X=this.drawCustomCoordinates_(_,X,P[E],r,Z),O.push(Z)}this.instructions.push([Y.Ay.CUSTOM,C,O,o,l,I.Dz,d]),this.hitDetectionInstructions.push([Y.Ay.CUSTOM,C,O,o,n||l,I.Dz,d]);break;case"Polygon":case"MultiLineString":F=[],_="Polygon"==f?o.getOrientedFlatCoordinates():o.getFlatCoordinates(),X=this.drawCustomCoordinates_(_,0,o.getEnds(),r,F),this.instructions.push([Y.Ay.CUSTOM,C,F,o,l,I.cD,d]),this.hitDetectionInstructions.push([Y.Ay.CUSTOM,C,F,o,n||l,I.cD,d]);break;case"LineString":case"Circle":_=o.getFlatCoordinates(),v=this.appendFlatLineCoordinates(_,0,_.length,r,!1,!1),this.instructions.push([Y.Ay.CUSTOM,C,v,o,l,I.n2,d]),this.hitDetectionInstructions.push([Y.Ay.CUSTOM,C,v,o,n||l,I.n2,d]);break;case"MultiPoint":_=o.getFlatCoordinates(),v=this.appendFlatPointCoordinates(_,r),v>C&&(this.instructions.push([Y.Ay.CUSTOM,C,v,o,l,I.n2,d]),this.hitDetectionInstructions.push([Y.Ay.CUSTOM,C,v,o,n||l,I.n2,d]));break;case"Point":_=o.getFlatCoordinates(),this.coordinates.push(_[0],_[1]),v=this.coordinates.length,this.instructions.push([Y.Ay.CUSTOM,C,v,o,l,void 0,d]),this.hitDetectionInstructions.push([Y.Ay.CUSTOM,C,v,o,n||l,void 0,d])}this.endGeometry(i)}beginGeometry(o,i,l){this.beginGeometryInstruction1_=[Y.Ay.BEGIN_GEOMETRY,i,0,o,l],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Y.Ay.BEGIN_GEOMETRY,i,0,o,l],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const o=this.hitDetectionInstructions;let i;o.reverse();const l=o.length;let n,d,f=-1;for(i=0;i<l;++i)n=o[i],d=n[0],d==Y.Ay.END_GEOMETRY?f=i:d==Y.Ay.BEGIN_GEOMETRY&&(n[2]=i,(0,w.gI)(this.hitDetectionInstructions,f,i),f=-1)}setFillStrokeStyle(o,i){const l=this.state;if(o){const n=o.getColor();l.fillPatternScale=n&&"object"==typeof n&&"src"in n?this.pixelRatio:1,l.fillStyle=(0,$.F)(n||M.qY)}else l.fillStyle=void 0;if(i){const n=i.getColor();l.strokeStyle=(0,$.F)(n||M.NT);const d=i.getLineCap();l.lineCap=void 0!==d?d:M._m;const f=i.getLineDash();l.lineDash=f?f.slice():M.Oq;const r=i.getLineDashOffset();l.lineDashOffset=r||M.vk;const C=i.getLineJoin();l.lineJoin=void 0!==C?C:M._K;const _=i.getWidth();l.lineWidth=void 0!==_?_:M.aq;const v=i.getMiterLimit();l.miterLimit=void 0!==v?v:M.eL,l.lineWidth>this.maxLineWidth&&(this.maxLineWidth=l.lineWidth,this.bufferedMaxExtent_=null)}else l.strokeStyle=void 0,l.lineCap=void 0,l.lineDash=null,l.lineDashOffset=void 0,l.lineJoin=void 0,l.lineWidth=void 0,l.miterLimit=void 0}createFill(o){const i=o.fillStyle,l=[Y.Ay.SET_FILL_STYLE,i];return"string"!=typeof i&&l.push(o.fillPatternScale),l}applyStroke(o){this.instructions.push(this.createStroke(o))}createStroke(o){return[Y.Ay.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth*this.pixelRatio,o.lineCap,o.lineJoin,o.miterLimit,this.applyPixelRatio(o.lineDash),o.lineDashOffset*this.pixelRatio]}updateFillStyle(o,i){const l=o.fillStyle;("string"!=typeof l||o.currentFillStyle!=l)&&(void 0!==l&&this.instructions.push(i.call(this,o)),o.currentFillStyle=l)}updateStrokeStyle(o,i){const l=o.strokeStyle,n=o.lineCap,d=o.lineDash,f=o.lineDashOffset,r=o.lineJoin,C=o.lineWidth,_=o.miterLimit;(o.currentStrokeStyle!=l||o.currentLineCap!=n||d!=o.currentLineDash&&!(0,w.aI)(o.currentLineDash,d)||o.currentLineDashOffset!=f||o.currentLineJoin!=r||o.currentLineWidth!=C||o.currentMiterLimit!=_)&&(void 0!==l&&i.call(this,o),o.currentStrokeStyle=l,o.currentLineCap=n,o.currentLineDash=d,o.currentLineDashOffset=f,o.currentLineJoin=r,o.currentLineWidth=C,o.currentMiterLimit=_)}endGeometry(o){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const i=[Y.Ay.END_GEOMETRY,o];this.instructions.push(i),this.hitDetectionInstructions.push(i)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,L.o8)(this.maxExtent),this.maxLineWidth>0)&&(0,L.r)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}}},99:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>n});var Y=s(570),z=s(7205),Q=s(8507);var M=s(2462);var y=s(463);const u=class m extends Y.A{constructor(f,r,C,_){super(f,r,C,_)}drawFlatCoordinatess_(f,r,C,_){const v=this.state,F=void 0!==v.fillStyle,O=void 0!==v.strokeStyle,X=C.length;this.instructions.push(z.th),this.hitDetectionInstructions.push(z.th);for(let P=0;P<X;++P){const E=C[P],W=this.coordinates.length,Z=this.appendFlatLineCoordinates(f,r,E,_,!0,!O),A=[z.Ay.MOVE_TO_LINE_TO,W,Z];this.instructions.push(A),this.hitDetectionInstructions.push(A),O&&(this.instructions.push(z.kx),this.hitDetectionInstructions.push(z.kx)),r=E}return F&&(this.instructions.push(z.I5),this.hitDetectionInstructions.push(z.I5)),O&&(this.instructions.push(z.VD),this.hitDetectionInstructions.push(z.VD)),r}drawCircle(f,r,C){const _=this.state;if(void 0===_.fillStyle&&void 0===_.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(f,r,C),void 0!==_.fillStyle&&this.hitDetectionInstructions.push([z.Ay.SET_FILL_STYLE,M.qY]),void 0!==_.strokeStyle&&this.hitDetectionInstructions.push([z.Ay.SET_STROKE_STYLE,_.strokeStyle,_.lineWidth,_.lineCap,_.lineJoin,_.miterLimit,M.Oq,M.vk]);const O=f.getFlatCoordinates(),X=f.getStride(),P=this.coordinates.length;this.appendFlatLineCoordinates(O,0,O.length,X,!1,!1);const E=[z.Ay.CIRCLE,P];this.instructions.push(z.th,E),this.hitDetectionInstructions.push(z.th,E),void 0!==_.fillStyle&&(this.instructions.push(z.I5),this.hitDetectionInstructions.push(z.I5)),void 0!==_.strokeStyle&&(this.instructions.push(z.VD),this.hitDetectionInstructions.push(z.VD)),this.endGeometry(r)}drawPolygon(f,r,C){const _=this.state;if(void 0===_.fillStyle&&void 0===_.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(f,r,C),void 0!==_.fillStyle&&this.hitDetectionInstructions.push([z.Ay.SET_FILL_STYLE,M.qY]),void 0!==_.strokeStyle&&this.hitDetectionInstructions.push([z.Ay.SET_STROKE_STYLE,_.strokeStyle,_.lineWidth,_.lineCap,_.lineJoin,_.miterLimit,M.Oq,M.vk]);const O=f.getEnds(),X=f.getOrientedFlatCoordinates(),P=f.getStride();this.drawFlatCoordinatess_(X,0,O,P),this.endGeometry(r)}drawMultiPolygon(f,r,C){const _=this.state;if(void 0===_.fillStyle&&void 0===_.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(f,r,C),void 0!==_.fillStyle&&this.hitDetectionInstructions.push([z.Ay.SET_FILL_STYLE,M.qY]),void 0!==_.strokeStyle&&this.hitDetectionInstructions.push([z.Ay.SET_STROKE_STYLE,_.strokeStyle,_.lineWidth,_.lineCap,_.lineJoin,_.miterLimit,M.Oq,M.vk]);const O=f.getEndss(),X=f.getOrientedFlatCoordinates(),P=f.getStride();let E=0;for(let W=0,Z=O.length;W<Z;++W)E=this.drawFlatCoordinatess_(X,E,O[W],P);this.endGeometry(r)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const f=this.tolerance;if(0!==f){const r=this.coordinates;for(let C=0,_=r.length;C<_;++C)r[C]=(0,y.n$)(r[C],f)}return super.finish()}setFillStrokeStyles_(){const f=this.state;void 0!==f.fillStyle&&this.updateFillStyle(f,this.createFill),void 0!==f.strokeStyle&&this.updateStrokeStyle(f,this.applyStroke)}};var o=s(4848);const i={Circle:u,Default:Y.A,Image:class $ extends Y.A{constructor(f,r,C,_){super(f,r,C,_),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(f,r,C){if(!this.image_||this.maxExtent&&!(0,Q.Ym)(this.maxExtent,f.getFlatCoordinates()))return;this.beginGeometry(f,r,C);const _=f.getFlatCoordinates(),v=f.getStride(),F=this.coordinates.length,O=this.appendFlatPointCoordinates(_,v);this.instructions.push([z.Ay.DRAW_IMAGE,F,O,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([z.Ay.DRAW_IMAGE,F,O,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(r)}drawMultiPoint(f,r,C){if(!this.image_)return;this.beginGeometry(f,r,C);const _=f.getFlatCoordinates(),v=[];for(let X=0,P=_.length;X<P;X+=f.getStride())(!this.maxExtent||(0,Q.Ym)(this.maxExtent,_.slice(X,X+2)))&&v.push(_[X],_[X+1]);const F=this.coordinates.length,O=this.appendFlatPointCoordinates(v,2);this.instructions.push([z.Ay.DRAW_IMAGE,F,O,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([z.Ay.DRAW_IMAGE,F,O,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(r)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(f,r){const C=f.getAnchor(),_=f.getSize(),v=f.getOrigin();this.imagePixelRatio_=f.getPixelRatio(this.pixelRatio),this.anchorX_=C[0],this.anchorY_=C[1],this.hitDetectionImage_=f.getHitDetectionImage(),this.image_=f.getImage(this.pixelRatio),this.height_=_[1],this.opacity_=f.getOpacity(),this.originX_=v[0],this.originY_=v[1],this.rotateWithView_=f.getRotateWithView(),this.rotation_=f.getRotation(),this.scale_=f.getScaleArray(),this.width_=_[0],this.declutterMode_=f.getDeclutterMode(),this.declutterImageWithText_=r}},LineString:class w extends Y.A{constructor(f,r,C,_){super(f,r,C,_)}drawFlatCoordinates_(f,r,C,_){const v=this.coordinates.length,F=this.appendFlatLineCoordinates(f,r,C,_,!1,!1),O=[z.Ay.MOVE_TO_LINE_TO,v,F];return this.instructions.push(O),this.hitDetectionInstructions.push(O),C}drawLineString(f,r,C){const _=this.state;if(void 0===_.strokeStyle||void 0===_.lineWidth)return;this.updateStrokeStyle(_,this.applyStroke),this.beginGeometry(f,r,C),this.hitDetectionInstructions.push([z.Ay.SET_STROKE_STYLE,_.strokeStyle,_.lineWidth,_.lineCap,_.lineJoin,_.miterLimit,M.Oq,M.vk],z.th);const O=f.getFlatCoordinates(),X=f.getStride();this.drawFlatCoordinates_(O,0,O.length,X),this.hitDetectionInstructions.push(z.VD),this.endGeometry(r)}drawMultiLineString(f,r,C){const _=this.state;if(void 0===_.strokeStyle||void 0===_.lineWidth)return;this.updateStrokeStyle(_,this.applyStroke),this.beginGeometry(f,r,C),this.hitDetectionInstructions.push([z.Ay.SET_STROKE_STYLE,_.strokeStyle,_.lineWidth,_.lineCap,_.lineJoin,_.miterLimit,M.Oq,M.vk],z.th);const O=f.getEnds(),X=f.getFlatCoordinates(),P=f.getStride();let E=0;for(let W=0,Z=O.length;W<Z;++W)E=this.drawFlatCoordinates_(X,E,O[W],P);this.hitDetectionInstructions.push(z.VD),this.endGeometry(r)}finish(){const f=this.state;return null!=f.lastStroke&&f.lastStroke!=this.coordinates.length&&this.instructions.push(z.VD),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(f){null!=f.lastStroke&&f.lastStroke!=this.coordinates.length&&(this.instructions.push(z.VD),f.lastStroke=this.coordinates.length),f.lastStroke=0,super.applyStroke(f),this.instructions.push(z.th)}},Polygon:u,Text:o.A},n=class l{constructor(f,r,C,_){this.tolerance_=f,this.maxExtent_=r,this.pixelRatio_=_,this.resolution_=C,this.buildersByZIndex_={}}finish(){const f={};for(const r in this.buildersByZIndex_){f[r]=f[r]||{};const C=this.buildersByZIndex_[r];for(const _ in C){const v=C[_].finish();f[r][_]=v}}return f}getBuilder(f,r){const C=void 0!==f?f.toString():"0";let _=this.buildersByZIndex_[C];void 0===_&&(_={},this.buildersByZIndex_[C]=_);let v=_[r];return void 0===v&&(v=new(0,i[r])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),_[r]=v),v}}},3826:(le,pt,s)=>{"use strict";s.d(pt,{y2:()=>P,$i:()=>E,x$:()=>W,Ay:()=>R});var Y=s(7205),z=s(1120),Q=s(4848),$=s(1983),L=s(8507),M=s(2462),w=s(9973),I=s(9662);function y(x,T,U,tt,it,J,ht,mt,Et,Ot,Nt,ft){let Ct=x[T],Dt=x[T+1],re=0,Jt=0,ye=0,oe=0;function _e(){re=Ct,Jt=Dt,Ct=x[T+=tt],Dt=x[T+1],oe+=ye,ye=Math.sqrt((Ct-re)*(Ct-re)+(Dt-Jt)*(Dt-Jt))}do{_e()}while(T<U-tt&&oe+ye<J);let ct=0===ye?0:(J-oe)/ye;const Gt=(0,w.Cc)(re,Ct,ct),Vt=(0,w.Cc)(Jt,Dt,ct),ge=T-tt,Ae=oe,qe=J+mt*Et(Ot,it,Nt);for(;T<U-tt&&oe+ye<qe;)_e();ct=0===ye?0:(qe-oe)/ye;const ti=(0,w.Cc)(re,Ct,ct),Ie=(0,w.Cc)(Jt,Dt,ct);let _t;if(ft){const Xe=[Gt,Vt,ti,Ie];(0,I.e$)(Xe,0,4,2,ft,Xe,Xe),_t=Xe[0]>Xe[2]}else _t=Gt>ti;const zt=Math.PI,xe=[],$t=ge+tt===T;let ze;if(ye=0,oe=Ae,Ct=x[T=ge],Dt=x[T+1],$t)return _e(),ze=Math.atan2(Dt-Jt,Ct-re),_t&&(ze+=ze>0?-zt:zt),xe[0]=[(ti+Gt)/2,(Ie+Vt)/2,(qe-J)/2,ze,it],xe;for(let Xe=0,si=(it=it.replace(/\n/g," ")).length;Xe<si;){_e();let hi=Math.atan2(Dt-Jt,Ct-re);if(_t&&(hi+=hi>0?-zt:zt),void 0!==ze){let B=hi-ze;if(B+=B>zt?-2*zt:B<-zt?2*zt:0,Math.abs(B)>ht)return null}ze=hi;const et=Xe;let N=0;for(;Xe<si;++Xe){const ot=mt*Et(Ot,it[_t?si-Xe-1:Xe],Nt);if(T+tt<U&&oe+ye<J+N+ot/2)break;N+=ot}if(Xe===et)continue;const g=_t?it.substring(si-et,si-Xe):it.substring(et,Xe);ct=0===ye?0:(J+N/2-oe)/ye;const S=(0,w.Cc)(re,Ct,ct),K=(0,w.Cc)(Jt,Dt,ct);xe.push([S,K,N/2,hi,g]),J+=N}return xe}var m=s(2058),u=s(7696);const o=(0,L.S5)(),i=[],l=[],n=[],d=[];function f(x){return x[3].declutterBox}const r=new RegExp("[\u0591-\u08ff\ufb1d-\ufdff\ufe70-\ufefc\u0800-\u0fff\ue800-\uefff]");function C(x,T){return"start"===T?T=r.test(x)?"right":"left":"end"===T&&(T=r.test(x)?"left":"right"),Q.E[T]}function _(x,T,U){return U>0&&x.push("\n",""),x.push(T,""),x}const F=class v{constructor(T,U,tt,it,J){this.overlaps=tt,this.pixelRatio=U,this.resolution=T,this.instructions=it.instructions,this.coordinates=it.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,$.vt)(),this.hitDetectionInstructions=it.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=it.fillStates||{},this.strokeStates=it.strokeStates||{},this.textStates=it.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=J?new z.A:null}getZIndexContext(){return this.zIndexContext_}createLabel(T,U,tt,it){const J=T+U+tt+it;if(this.labels_[J])return this.labels_[J];const ht=it?this.strokeStates[it]:null,mt=tt?this.fillStates[tt]:null,Et=this.textStates[U],Ot=this.pixelRatio,Nt=[Et.scale[0]*Ot,Et.scale[1]*Ot],ft=Array.isArray(T),Ct=Et.justify?Q.E[Et.justify]:C(Array.isArray(T)?T[0]:T,Et.textAlign||M.MY),Dt=it&&ht.lineWidth?ht.lineWidth:0,re=ft?T:T.split("\n").reduce(_,[]),{width:Jt,height:ye,widths:oe,heights:_e,lineWidths:ct}=(0,M.jT)(Et,re),Gt=Jt+Dt,Vt=[],ge=(Gt+2)*Nt[0],Ae=(ye+Dt)*Nt[1],qe={width:ge<0?Math.floor(ge):Math.ceil(ge),height:Ae<0?Math.floor(Ae):Math.ceil(Ae),contextInstructions:Vt};(1!=Nt[0]||1!=Nt[1])&&Vt.push("scale",Nt),it&&(Vt.push("strokeStyle",ht.strokeStyle),Vt.push("lineWidth",Dt),Vt.push("lineCap",ht.lineCap),Vt.push("lineJoin",ht.lineJoin),Vt.push("miterLimit",ht.miterLimit),Vt.push("setLineDash",[ht.lineDash]),Vt.push("lineDashOffset",ht.lineDashOffset)),tt&&Vt.push("fillStyle",mt.fillStyle),Vt.push("textBaseline","middle"),Vt.push("textAlign","center");const ti=.5-Ct;let Ie=Ct*Gt+ti*Dt;const _t=[],zt=[];let si,xe=0,$t=0,ze=0,Xe=0;for(let hi=0,et=re.length;hi<et;hi+=2){const N=re[hi];if("\n"===N){$t+=xe,xe=0,Ie=Ct*Gt+ti*Dt,++Xe;continue}const g=re[hi+1]||Et.font;g!==si&&(it&&_t.push("font",g),tt&&zt.push("font",g),si=g),xe=Math.max(xe,_e[ze]);const S=[N,Ie+ti*oe[ze]+Ct*(oe[ze]-ct[Xe]),.5*(Dt+xe)+$t];Ie+=oe[ze],it&&_t.push("strokeText",S),tt&&zt.push("fillText",S),++ze}return Array.prototype.push.apply(Vt,_t),Array.prototype.push.apply(Vt,zt),this.labels_[J]=qe,qe}replayTextBackground_(T,U,tt,it,J,ht,mt){T.beginPath(),T.moveTo.apply(T,U),T.lineTo.apply(T,tt),T.lineTo.apply(T,it),T.lineTo.apply(T,J),T.lineTo.apply(T,U),ht&&(this.alignAndScaleFill_=ht[2],this.fill_(T)),mt&&(this.setStrokeStyle_(T,mt),T.stroke())}calculateImageOrLabelDimensions_(T,U,tt,it,J,ht,mt,Et,Ot,Nt,ft,Ct,Dt,re,Jt,ye){let oe=tt-(mt*=Ct[0]),_e=it-(Et*=Ct[1]);const ct=J+Ot>T?T-Ot:J,Gt=ht+Nt>U?U-Nt:ht,Vt=re[3]+ct*Ct[0]+re[1],ge=re[0]+Gt*Ct[1]+re[2],Ae=oe-re[3],qe=_e-re[0];let ti;return(Jt||0!==ft)&&(i[0]=Ae,d[0]=Ae,i[1]=qe,l[1]=qe,l[0]=Ae+Vt,n[0]=l[0],n[1]=qe+ge,d[1]=n[1]),0!==ft?(ti=(0,$.Zz)((0,$.vt)(),tt,it,1,1,ft,-tt,-it),(0,$.Bb)(ti,i),(0,$.Bb)(ti,l),(0,$.Bb)(ti,n),(0,$.Bb)(ti,d),(0,L.N)(Math.min(i[0],l[0],n[0],d[0]),Math.min(i[1],l[1],n[1],d[1]),Math.max(i[0],l[0],n[0],d[0]),Math.max(i[1],l[1],n[1],d[1]),o)):(0,L.N)(Math.min(Ae,Ae+Vt),Math.min(qe,qe+ge),Math.max(Ae,Ae+Vt),Math.max(qe,qe+ge),o),Dt&&(oe=Math.round(oe),_e=Math.round(_e)),{drawImageX:oe,drawImageY:_e,drawImageW:ct,drawImageH:Gt,originX:Ot,originY:Nt,declutterBox:{minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:ye},canvasTransform:ti,scale:Ct}}replayImageOrLabel_(T,U,tt,it,J,ht,mt){const Ot=it.declutterBox,Nt=mt?mt[2]*it.scale[0]/2:0;return Ot.minX-Nt<=U[0]&&Ot.maxX+Nt>=0&&Ot.minY-Nt<=U[1]&&Ot.maxY+Nt>=0&&(!(!ht&&!mt)&&this.replayTextBackground_(T,i,l,n,d,ht,mt),(0,M.Jw)(T,it.canvasTransform,J,tt,it.originX,it.originY,it.drawImageW,it.drawImageH,it.drawImageX,it.drawImageY,it.scale)),!0}fill_(T){const U=this.alignAndScaleFill_;if(U){const tt=(0,$.Bb)(this.renderedTransform_,[0,0]),it=512*this.pixelRatio;T.save(),T.translate(tt[0]%it,tt[1]%it),1!==U&&T.scale(U,U),T.rotate(this.viewRotation_)}T.fill(),U&&T.restore()}setStrokeStyle_(T,U){T.strokeStyle=U[1],T.lineWidth=U[2],T.lineCap=U[3],T.lineJoin=U[4],T.miterLimit=U[5],T.lineDashOffset=U[7],T.setLineDash(U[6])}drawLabelWithPointPlacement_(T,U,tt,it){const J=this.textStates[U],ht=this.createLabel(T,U,it,tt),mt=this.strokeStates[tt],Et=this.pixelRatio,Ot=C(Array.isArray(T)?T[0]:T,J.textAlign||M.MY),Nt=Q.E[J.textBaseline||M.M8],ft=mt&&mt.lineWidth?mt.lineWidth:0;return{label:ht,anchorX:Ot*(ht.width/Et-2*J.scale[0])+2*(.5-Ot)*ft,anchorY:Nt*ht.height/Et+2*(.5-Nt)*ft}}execute_(T,U,tt,it,J,ht,mt,Et){const Ot=this.zIndexContext_;let Nt;this.pixelCoordinates_&&(0,m.aI)(tt,this.renderedTransform_)?Nt=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),Nt=(0,I.Rc)(this.coordinates,0,this.coordinates.length,2,tt,this.pixelCoordinates_),(0,$.k3)(this.renderedTransform_,tt));let ft=0;const Ct=it.length;let re,Jt,ye,oe,_e,ct,Gt,Vt,ge,Ae,qe,ti,Ie,Dt=0,_t=0,zt=0,xe=null,$t=null;const ze=this.coordinateCache_,Xe=this.viewRotation_,si=Math.round(1e12*Math.atan2(-tt[1],tt[0]))/1e12,hi={context:T,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Xe},et=this.instructions!=it||this.overlaps?0:200;let N,g,S,K;for(;ft<Ct;){const B=it[ft];switch(B[0]){case Y.Ay.BEGIN_GEOMETRY:N=B[1],K=B[3],N.getGeometry()?void 0===mt||(0,L.HY)(mt,K.getExtent())?++ft:ft=B[2]+1:ft=B[2],Ot&&(Ot.zIndex=B[4]);break;case Y.Ay.BEGIN_PATH:_t>et&&(this.fill_(T),_t=0),zt>et&&(T.stroke(),zt=0),!_t&&!zt&&(T.beginPath(),_e=NaN,ct=NaN),++ft;break;case Y.Ay.CIRCLE:Dt=B[1];const dt=Nt[Dt],It=Nt[Dt+1],ce=Nt[Dt+2]-dt,Ne=Nt[Dt+3]-It,He=Math.sqrt(ce*ce+Ne*Ne);T.moveTo(dt+He,It),T.arc(dt,It,He,0,2*Math.PI,!0),++ft;break;case Y.Ay.CLOSE_PATH:T.closePath(),++ft;break;case Y.Ay.CUSTOM:Dt=B[1],re=B[2];const bi=B[4],Mi=B[5];hi.geometry=B[3],hi.feature=N,ft in ze||(ze[ft]=[]);const ni=ze[ft];Mi?Mi(Nt,Dt,re,2,ni):(ni[0]=Nt[Dt],ni[1]=Nt[Dt+1],ni.length=2),Ot&&(Ot.zIndex=B[6]),bi(ni,hi),++ft;break;case Y.Ay.DRAW_IMAGE:Dt=B[1],re=B[2],ge=B[3],Jt=B[4],ye=B[5];let Ii=B[6];const Ni=B[7],$i=B[8],Ji=B[9],zi=B[10];let Ri=B[11];const ui=B[12];let vi=B[13];oe=B[14]||"declutter";const Bn=B[15];if(!ge&&B.length>=20){Ae=B[19],qe=B[20],ti=B[21],Ie=B[22];const tn=this.drawLabelWithPointPlacement_(Ae,qe,ti,Ie);ge=tn.label,B[3]=ge,Jt=(tn.anchorX-B[23])*this.pixelRatio,B[4]=Jt,ye=(tn.anchorY-B[24])*this.pixelRatio,B[5]=ye,Ii=ge.height,B[6]=Ii,vi=ge.width,B[13]=vi}let ln,Ei,Vi,Sn;B.length>25&&(ln=B[25]),B.length>17?(Ei=B[16],Vi=B[17],Sn=B[18]):(Ei=M.Tq,Vi=!1,Sn=!1),zi&&si?Ri+=Xe:!zi&&!si&&(Ri-=Xe);let Zn=0;for(;Dt<re;Dt+=2){if(ln&&ln[Zn++]<vi/this.pixelRatio)continue;const tn=this.calculateImageOrLabelDimensions_(ge.width,ge.height,Nt[Dt],Nt[Dt+1],vi,Ii,Jt,ye,$i,Ji,Ri,ui,J,Ei,Vi||Sn,N),_n=[T,U,ge,tn,Ni,Vi?xe:null,Sn?$t:null];if(Et){let Zi,pn,Dn,zn,Ln;if(Bn){const Qi=re-Dt;if(!Bn[Qi]){Bn[Qi]={args:_n,declutterMode:oe};continue}const Ki=Bn[Qi];Zi=Ki.args,pn=Ki.declutterMode,delete Bn[Qi],Dn=f(Zi)}if(Zi&&("declutter"!==pn||!Et.collides(Dn))&&(zn=!0),("declutter"!==oe||!Et.collides(tn.declutterBox))&&(Ln=!0),"declutter"===pn&&"declutter"===oe){const Qi=zn&&Ln;zn=Qi,Ln=Qi}zn&&("none"!==pn&&Et.insert(Dn),this.replayImageOrLabel_.apply(this,Zi)),Ln&&("none"!==oe&&Et.insert(tn.declutterBox),this.replayImageOrLabel_.apply(this,_n))}else this.replayImageOrLabel_.apply(this,_n)}++ft;break;case Y.Ay.DRAW_CHARS:const Ye=B[1],Gi=B[2],Hn=B[3],rr=B[4];Ie=B[5];const An=B[6],_s=B[7],ps=B[8];ti=B[9];const Ds=B[10];Ae=B[11],qe=B[12];const on=[B[13],B[13]];oe=B[14]||"declutter";const cs=this.textStates[qe],es=cs.font,ks=[cs.scale[0]*_s,cs.scale[1]*_s];let ys;es in this.widths_?ys=this.widths_[es]:(ys={},this.widths_[es]=ys);const us=(0,u.k)(Nt,Ye,Gi,2),or=Math.abs(ks[0])*(0,M.TA)(es,Ae,ys);if(rr||or<=us){const Zi=y(Nt,Ye,Gi,2,Ae,(us-or)*C(Ae,this.textStates[qe].textAlign),An,Math.abs(ks[0]),M.TA,es,ys,si?0:this.viewRotation_);t:if(Zi){const pn=[];let Dn,zn,Ln,Qi,Ki;if(ti)for(Dn=0,zn=Zi.length;Dn<zn;++Dn){Ki=Zi[Dn],Ln=Ki[4],Qi=this.createLabel(Ln,qe,"",ti),Jt=Ki[2]+(ks[0]<0?-Ds:Ds),ye=Hn*Qi.height+2*(.5-Hn)*Ds*ks[1]/ks[0]-ps;const Tn=this.calculateImageOrLabelDimensions_(Qi.width,Qi.height,Ki[0],Ki[1],Qi.width,Qi.height,Jt,ye,0,0,Ki[3],on,!1,M.Tq,!1,N);if(Et&&"declutter"===oe&&Et.collides(Tn.declutterBox))break t;pn.push([T,U,Qi,Tn,1,null,null])}if(Ie)for(Dn=0,zn=Zi.length;Dn<zn;++Dn){Ki=Zi[Dn],Ln=Ki[4],Qi=this.createLabel(Ln,qe,Ie,""),Jt=Ki[2],ye=Hn*Qi.height-ps;const Tn=this.calculateImageOrLabelDimensions_(Qi.width,Qi.height,Ki[0],Ki[1],Qi.width,Qi.height,Jt,ye,0,0,Ki[3],on,!1,M.Tq,!1,N);if(Et&&"declutter"===oe&&Et.collides(Tn.declutterBox))break t;pn.push([T,U,Qi,Tn,1,null,null])}Et&&"none"!==oe&&Et.load(pn.map(f));for(let Tn=0,Ps=pn.length;Tn<Ps;++Tn)this.replayImageOrLabel_.apply(this,pn[Tn])}}++ft;break;case Y.Ay.END_GEOMETRY:if(void 0!==ht){N=B[1];const tn=ht(N,K,oe);if(tn)return tn}++ft;break;case Y.Ay.FILL:et?_t++:this.fill_(T),++ft;break;case Y.Ay.MOVE_TO_LINE_TO:for(Dt=B[1],re=B[2],g=Nt[Dt],S=Nt[Dt+1],T.moveTo(g,S),_e=g+.5|0,ct=S+.5|0,Dt+=2;Dt<re;Dt+=2)g=Nt[Dt],S=Nt[Dt+1],Gt=g+.5|0,Vt=S+.5|0,(Dt==re-2||Gt!==_e||Vt!==ct)&&(T.lineTo(g,S),_e=Gt,ct=Vt);++ft;break;case Y.Ay.SET_FILL_STYLE:xe=B,this.alignAndScaleFill_=B[2],_t&&(this.fill_(T),_t=0,zt&&(T.stroke(),zt=0)),T.fillStyle=B[1],++ft;break;case Y.Ay.SET_STROKE_STYLE:$t=B,zt&&(T.stroke(),zt=0),this.setStrokeStyle_(T,B),++ft;break;case Y.Ay.STROKE:et?zt++:T.stroke(),++ft;break;default:++ft}}_t&&this.fill_(T),zt&&T.stroke()}execute(T,U,tt,it,J,ht){this.viewRotation_=it,this.execute_(T,U,tt,this.instructions,J,void 0,void 0,ht)}executeHitDetection(T,U,tt,it,J){return this.viewRotation_=tt,this.execute_(T,[T.canvas.width,T.canvas.height],U,this.hitDetectionInstructions,!0,it,J)}};var O=s(5551),X=s(9330);const P=["Polygon","Circle","LineString","Image","Text","Default"],E=["Image","Text"],W=P.filter(x=>!E.includes(x)),A={},R=class Z{constructor(T,U,tt,it,J,ht,mt){this.maxExtent_=T,this.overlaps_=it,this.pixelRatio_=tt,this.resolution_=U,this.renderBuffer_=ht,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,$.vt)(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(J,mt)}clip(T,U){const tt=this.getClipCoords(U);T.beginPath(),T.moveTo(tt[0],tt[1]),T.lineTo(tt[2],tt[3]),T.lineTo(tt[4],tt[5]),T.lineTo(tt[6],tt[7]),T.clip()}createExecutors_(T,U){for(const tt in T){let it=this.executorsByZIndex_[tt];void 0===it&&(it={},this.executorsByZIndex_[tt]=it);const J=T[tt];for(const ht in J)it[ht]=new F(this.resolution_,this.pixelRatio_,this.overlaps_,J[ht],U)}}hasExecutors(T){for(const U in this.executorsByZIndex_){const tt=this.executorsByZIndex_[U];for(let it=0,J=T.length;it<J;++it)if(T[it]in tt)return!0}return!1}forEachFeatureAtCoordinate(T,U,tt,it,J,ht){const mt=2*(it=Math.round(it))+1,Et=(0,$.Zz)(this.hitDetectionTransform_,it+.5,it+.5,1/U,-1/U,-tt,-T[0],-T[1]),Ot=!this.hitDetectionContext_;Ot&&(this.hitDetectionContext_=(0,O.Y)(mt,mt,void 0,{willReadFrequently:!0}));const Nt=this.hitDetectionContext_;let ft;Nt.canvas.width!==mt||Nt.canvas.height!==mt?(Nt.canvas.width=mt,Nt.canvas.height=mt):Ot||Nt.clearRect(0,0,mt,mt),void 0!==this.renderBuffer_&&(ft=(0,L.S5)(),(0,L.$C)(ft,T),(0,L.r)(ft,U*(this.renderBuffer_+it),ft));const Ct=function D(x){if(void 0!==A[x])return A[x];const T=2*x+1,U=x*x,tt=new Array(U+1);for(let J=0;J<=x;++J)for(let ht=0;ht<=x;++ht){const mt=J*J+ht*ht;if(mt>U)break;let Et=tt[mt];Et||(Et=[],tt[mt]=Et),Et.push(4*((x+J)*T+(x+ht))+3),J>0&&Et.push(4*((x-J)*T+(x+ht))+3),ht>0&&(Et.push(4*((x+J)*T+(x-ht))+3),J>0&&Et.push(4*((x-J)*T+(x-ht))+3))}const it=[];for(let J=0,ht=tt.length;J<ht;++J)tt[J]&&it.push(...tt[J]);return A[x]=it,it}(it);let Dt;function re(Vt,ge,Ae){const qe=Nt.getImageData(0,0,mt,mt).data;for(let ti=0,Ie=Ct.length;ti<Ie;ti++)if(qe[Ct[ti]]>0){if(!ht||"none"===Ae||"Image"!==Dt&&"Text"!==Dt||ht.includes(Vt)){const _t=(Ct[ti]-3)/4,zt=it-_t%mt,xe=it-(_t/mt|0),$t=J(Vt,ge,zt*zt+xe*xe);if($t)return $t}Nt.clearRect(0,0,mt,mt);break}}const Jt=Object.keys(this.executorsByZIndex_).map(Number);let ye,oe,_e,ct,Gt;for(Jt.sort(m.V_),ye=Jt.length-1;ye>=0;--ye){const Vt=Jt[ye].toString();for(_e=this.executorsByZIndex_[Vt],oe=P.length-1;oe>=0;--oe)if(Dt=P[oe],ct=_e[Dt],void 0!==ct&&(Gt=ct.executeHitDetection(Nt,Et,tt,re,ft),Gt))return Gt}}getClipCoords(T){const U=this.maxExtent_;if(!U)return null;const tt=U[0],it=U[1],J=U[2],ht=U[3],mt=[tt,it,tt,ht,J,ht,J,it];return(0,I.Rc)(mt,0,8,2,T,mt),mt}isEmpty(){return(0,X.p)(this.executorsByZIndex_)}execute(T,U,tt,it,J,ht,mt){const Et=Object.keys(this.executorsByZIndex_).map(Number);Et.sort(m.V_),ht=ht||P;const Ot=P.length;let Nt,ft,Ct,Dt,re;for(mt&&Et.reverse(),Nt=0,ft=Et.length;Nt<ft;++Nt){const Jt=Et[Nt].toString();for(re=this.executorsByZIndex_[Jt],Ct=0,Dt=ht.length;Ct<Dt;++Ct){const ye=ht[Ct],oe=re[ye];if(void 0!==oe){const _e=null===mt?void 0:oe.getZIndexContext(),ct=_e?_e.getContext():T,Gt=this.maxExtent_&&"Image"!==ye&&"Text"!==ye;if(Gt&&(ct.save(),this.clip(ct,tt)),_e&&"Text"!==ye&&"Image"!==ye?_e.pushFunction(Vt=>oe.execute(Vt,U,tt,it,J,mt)):oe.execute(ct,U,tt,it,J,mt),Gt&&ct.restore(),_e){_e.offset();const Vt=Et[Nt]*Ot+Ct;this.deferredZIndexContexts_[Vt]||(this.deferredZIndexContexts_[Vt]=[]),this.deferredZIndexContexts_[Vt].push(_e)}}}}this.renderedContext_=T}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const T=this.deferredZIndexContexts_,U=Object.keys(T).map(Number).sort(m.V_);for(let tt=0,it=U.length;tt<it;++tt)T[U[tt]].forEach(J=>{J.draw(this.renderedContext_),J.clear()}),T[U[tt]].length=0}}},4548:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>u});var Y=s(3762),z=s(2775),Q=s(1983),$=s(2462),L=s(2058),M=s(8507),w=s(9973),I=s(9662),y=s(1416);const u=class m extends Y.A{constructor(i,l,n,d,f,r,C){super(),this.context_=i,this.pixelRatio_=l,this.extent_=n,this.transform_=d,this.transformRotation_=d?(0,w.Mg)(Math.atan2(d[1],d[0]),10):0,this.viewRotation_=f,this.squaredTolerance_=r,this.userTransform_=C,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,Q.vt)()}drawImages_(i,l,n,d){if(!this.image_)return;const f=(0,I.Rc)(i,l,n,d,this.transform_,this.pixelCoordinates_),r=this.context_,C=this.tmpLocalTransform_,_=r.globalAlpha;1!=this.imageOpacity_&&(r.globalAlpha=_*this.imageOpacity_);let v=this.imageRotation_;0===this.transformRotation_&&(v-=this.viewRotation_),this.imageRotateWithView_&&(v+=this.viewRotation_);for(let F=0,O=f.length;F<O;F+=2){const X=f[F]-this.imageAnchorX_,P=f[F+1]-this.imageAnchorY_;if(0!==v||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const E=X+this.imageAnchorX_,W=P+this.imageAnchorY_;(0,Q.Zz)(C,E,W,1,1,v,-E,-W),r.save(),r.transform.apply(r,C),r.translate(E,W),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,X,P,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(r.globalAlpha=_)}drawText_(i,l,n,d){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const f=(0,I.Rc)(i,l,n,d,this.transform_,this.pixelCoordinates_),r=this.context_;let C=this.textRotation_;for(0===this.transformRotation_&&(C-=this.viewRotation_),this.textRotateWithView_&&(C+=this.viewRotation_);l<n;l+=d){const _=f[l]+this.textOffsetX_,v=f[l+1]+this.textOffsetY_;0!==C||1!=this.textScale_[0]||1!=this.textScale_[1]?(r.save(),r.translate(_-this.textOffsetX_,v-this.textOffsetY_),r.rotate(C),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.restore()):(this.textStrokeState_&&r.strokeText(this.text_,_,v),this.textFillState_&&r.fillText(this.text_,_,v))}}moveToLineTo_(i,l,n,d,f){const r=this.context_,C=(0,I.Rc)(i,l,n,d,this.transform_,this.pixelCoordinates_);r.moveTo(C[0],C[1]);let _=C.length;f&&(_-=2);for(let v=2;v<_;v+=2)r.lineTo(C[v],C[v+1]);return f&&r.closePath(),n}drawRings_(i,l,n,d){for(let f=0,r=n.length;f<r;++f)l=this.moveToLineTo_(i,l,n[f],d,!0);return l}drawCircle(i){if(this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,M.HY)(this.extent_,i.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const l=(0,y.v7)(i,this.transform_,this.pixelCoordinates_),n=l[2]-l[0],d=l[3]-l[1],f=Math.sqrt(n*n+d*d),r=this.context_;r.beginPath(),r.arc(l[0],l[1],f,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}""!==this.text_&&this.drawText_(i.getCenter(),0,2,2)}}setStyle(i){this.setFillStrokeStyle(i.getFill(),i.getStroke()),this.setImageStyle(i.getImage()),this.setTextStyle(i.getText())}setTransform(i){this.transform_=i}drawGeometry(i){switch(i.getType()){case"Point":this.drawPoint(i);break;case"LineString":this.drawLineString(i);break;case"Polygon":this.drawPolygon(i);break;case"MultiPoint":this.drawMultiPoint(i);break;case"MultiLineString":this.drawMultiLineString(i);break;case"MultiPolygon":this.drawMultiPolygon(i);break;case"GeometryCollection":this.drawGeometryCollection(i);break;case"Circle":this.drawCircle(i)}}drawFeature(i,l){const n=l.getGeometryFunction()(i);n&&(this.setStyle(l),this.drawGeometry(n))}drawGeometryCollection(i){const l=i.getGeometriesArray();for(let n=0,d=l.length;n<d;++n)this.drawGeometry(l[n])}drawPoint(i){this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const l=i.getFlatCoordinates(),n=i.getStride();this.image_&&this.drawImages_(l,0,l.length,n),""!==this.text_&&this.drawText_(l,0,l.length,n)}drawMultiPoint(i){this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const l=i.getFlatCoordinates(),n=i.getStride();this.image_&&this.drawImages_(l,0,l.length,n),""!==this.text_&&this.drawText_(l,0,l.length,n)}drawLineString(i){if(this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,M.HY)(this.extent_,i.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const l=this.context_,n=i.getFlatCoordinates();l.beginPath(),this.moveToLineTo_(n,0,n.length,i.getStride(),!1),l.stroke()}if(""!==this.text_){const l=i.getFlatMidpoint();this.drawText_(l,0,2,2)}}}drawMultiLineString(i){this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const l=i.getExtent();if((0,M.HY)(this.extent_,l)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,d=i.getFlatCoordinates();let f=0;const r=i.getEnds(),C=i.getStride();n.beginPath();for(let _=0,v=r.length;_<v;++_)f=this.moveToLineTo_(d,f,r[_],C,!1);n.stroke()}if(""!==this.text_){const n=i.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(i){if(this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,M.HY)(this.extent_,i.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const l=this.context_;l.beginPath(),this.drawRings_(i.getOrientedFlatCoordinates(),0,i.getEnds(),i.getStride()),this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}if(""!==this.text_){const l=i.getFlatInteriorPoint();this.drawText_(l,0,2,2)}}}drawMultiPolygon(i){if(this.squaredTolerance_&&(i=i.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,M.HY)(this.extent_,i.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const l=this.context_,n=i.getOrientedFlatCoordinates();let d=0;const f=i.getEndss(),r=i.getStride();l.beginPath();for(let C=0,_=f.length;C<_;++C)d=this.drawRings_(n,d,f[C],r);this.fillState_&&l.fill(),this.strokeState_&&l.stroke()}if(""!==this.text_){const l=i.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}}setContextFillState_(i){const l=this.context_,n=this.contextFillState_;n?n.fillStyle!=i.fillStyle&&(n.fillStyle=i.fillStyle,l.fillStyle=i.fillStyle):(l.fillStyle=i.fillStyle,this.contextFillState_={fillStyle:i.fillStyle})}setContextStrokeState_(i){const l=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=i.lineCap&&(n.lineCap=i.lineCap,l.lineCap=i.lineCap),(0,L.aI)(n.lineDash,i.lineDash)||l.setLineDash(n.lineDash=i.lineDash),n.lineDashOffset!=i.lineDashOffset&&(n.lineDashOffset=i.lineDashOffset,l.lineDashOffset=i.lineDashOffset),n.lineJoin!=i.lineJoin&&(n.lineJoin=i.lineJoin,l.lineJoin=i.lineJoin),n.lineWidth!=i.lineWidth&&(n.lineWidth=i.lineWidth,l.lineWidth=i.lineWidth),n.miterLimit!=i.miterLimit&&(n.miterLimit=i.miterLimit,l.miterLimit=i.miterLimit),n.strokeStyle!=i.strokeStyle&&(n.strokeStyle=i.strokeStyle,l.strokeStyle=i.strokeStyle)):(l.lineCap=i.lineCap,l.setLineDash(i.lineDash),l.lineDashOffset=i.lineDashOffset,l.lineJoin=i.lineJoin,l.lineWidth=i.lineWidth,l.miterLimit=i.miterLimit,l.strokeStyle=i.strokeStyle,this.contextStrokeState_={lineCap:i.lineCap,lineDash:i.lineDash,lineDashOffset:i.lineDashOffset,lineJoin:i.lineJoin,lineWidth:i.lineWidth,miterLimit:i.miterLimit,strokeStyle:i.strokeStyle})}setContextTextState_(i){const l=this.context_,n=this.contextTextState_,d=i.textAlign?i.textAlign:$.MY;n?(n.font!=i.font&&(n.font=i.font,l.font=i.font),n.textAlign!=d&&(n.textAlign=d,l.textAlign=d),n.textBaseline!=i.textBaseline&&(n.textBaseline=i.textBaseline,l.textBaseline=i.textBaseline)):(l.font=i.font,l.textAlign=d,l.textBaseline=i.textBaseline,this.contextTextState_={font:i.font,textAlign:d,textBaseline:i.textBaseline})}setFillStrokeStyle(i,l){if(i){const n=i.getColor();this.fillState_={fillStyle:(0,z.F)(n||$.qY)}}else this.fillState_=null;if(l){const n=l.getColor(),d=l.getLineCap(),f=l.getLineDash(),r=l.getLineDashOffset(),C=l.getLineJoin(),_=l.getWidth(),v=l.getMiterLimit(),F=f||$.Oq;this.strokeState_={lineCap:void 0!==d?d:$._m,lineDash:1===this.pixelRatio_?F:F.map(O=>O*this.pixelRatio_),lineDashOffset:(r||$.vk)*this.pixelRatio_,lineJoin:void 0!==C?C:$._K,lineWidth:(void 0!==_?_:$.aq)*this.pixelRatio_,miterLimit:void 0!==v?v:$.eL,strokeStyle:(0,z.F)(n||$.NT)}}else this.strokeState_=null}setImageStyle(i){let l;if(!i||!(l=i.getSize()))return void(this.image_=null);const n=i.getPixelRatio(this.pixelRatio_),d=i.getAnchor(),f=i.getOrigin();this.image_=i.getImage(this.pixelRatio_),this.imageAnchorX_=d[0]*n,this.imageAnchorY_=d[1]*n,this.imageHeight_=l[1]*n,this.imageOpacity_=i.getOpacity(),this.imageOriginX_=f[0],this.imageOriginY_=f[1],this.imageRotateWithView_=i.getRotateWithView(),this.imageRotation_=i.getRotation();const r=i.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/n,r[1]*this.pixelRatio_/n],this.imageWidth_=l[0]*n}setTextStyle(i){if(i){const l=i.getFill();if(l){const P=l.getColor();this.textFillState_={fillStyle:(0,z.F)(P||$.qY)}}else this.textFillState_=null;const n=i.getStroke();if(n){const P=n.getColor(),E=n.getLineCap(),W=n.getLineDash(),Z=n.getLineDashOffset(),A=n.getLineJoin(),D=n.getWidth(),R=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==E?E:$._m,lineDash:W||$.Oq,lineDashOffset:Z||$.vk,lineJoin:void 0!==A?A:$._K,lineWidth:void 0!==D?D:$.aq,miterLimit:void 0!==R?R:$.eL,strokeStyle:(0,z.F)(P||$.NT)}}else this.textStrokeState_=null;const d=i.getFont(),f=i.getOffsetX(),r=i.getOffsetY(),C=i.getRotateWithView(),_=i.getRotation(),v=i.getScaleArray(),F=i.getText(),O=i.getTextAlign(),X=i.getTextBaseline();this.textState_={font:void 0!==d?d:$.ZV,textAlign:void 0!==O?O:$.MY,textBaseline:void 0!==X?X:$.M8},this.text_=void 0!==F?Array.isArray(F)?F.reduce((P,E,W)=>P+(W%2?" ":E),""):F:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==r?this.pixelRatio_*r:0,this.textRotateWithView_=void 0!==C&&C,this.textRotation_=void 0!==_?_:0,this.textScale_=[this.pixelRatio_*v[0],this.pixelRatio_*v[1]]}else this.text_=""}}},7205:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>M,I5:()=>z,VD:()=>Q,kx:()=>L,th:()=>$});const Y={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},z=[Y.FILL],Q=[Y.STROKE],$=[Y.BEGIN_PATH],L=[Y.CLOSE_PATH],M=Y},4848:(le,pt,s)=>{"use strict";s.d(pt,{E:()=>m,A:()=>o});var Y=s(570),z=s(7205),Q=s(2775),$=s(2462),L=s(2383),M=s(8507),w=s(9973);function I(i,l,n,d,f){const r=[];let C=n,_=0,v=l.slice(n,2);for(;_<i&&C+f<d;){const[F,O]=v.slice(-2),X=l[C+f],P=l[C+f+1],E=Math.sqrt((X-F)*(X-F)+(P-O)*(P-O));if(_+=E,_>=i){const W=(i-_+E)/E,Z=(0,w.Cc)(F,X,W),A=(0,w.Cc)(O,P,W);v.push(Z,A),r.push(v),v=[Z,A],_==i&&(C+=f),_=0}else if(_<i)v.push(l[C+f],l[C+f+1]),C+=f;else{const W=E-_,Z=(0,w.Cc)(F,X,W/E),A=(0,w.Cc)(O,P,W/E);v.push(Z,A),r.push(v),v=[Z,A],_=0,C+=f}}return _>0&&r.push(v),r}function y(i,l,n,d,f){let O,X,P,E,W,Z,A,D,R,x,r=n,C=n,_=0,v=0,F=n;for(X=n;X<d;X+=f){const T=l[X],U=l[X+1];void 0!==W&&(R=T-W,x=U-Z,E=Math.sqrt(R*R+x*x),void 0!==A&&(v+=P,O=Math.acos((A*R+D*x)/(P*E)),O>i&&(v>_&&(_=v,r=F,C=X),v=0,F=X-f)),P=E,A=R,D=x),W=T,Z=U}return v+=E,v>_?[F,X]:[r,C]}const m={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},o=class u extends Y.A{constructor(l,n,d,f){super(l,n,d,f),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[$.qY]={fillStyle:$.qY},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const l=super.finish();return l.textStates=this.textStates,l.fillStates=this.fillStates,l.strokeStates=this.strokeStates,l}drawText(l,n,d){const C=this.textState_;if(""===this.text_||!C||!this.textFillState_&&!this.textStrokeState_)return;const _=this.coordinates;let v=_.length;const F=l.getType();let O=null,X=l.getStride();if("line"!==C.placement||"LineString"!=F&&"MultiLineString"!=F&&"Polygon"!=F&&"MultiPolygon"!=F){let P=C.overflow?null:[];switch(F){case"Point":case"MultiPoint":O=l.getFlatCoordinates();break;case"LineString":O=l.getFlatMidpoint();break;case"Circle":O=l.getCenter();break;case"MultiLineString":O=l.getFlatMidpoints(),X=2;break;case"Polygon":O=l.getFlatInteriorPoint(),C.overflow||P.push(O[2]/this.resolution),X=3;break;case"MultiPolygon":const R=l.getFlatInteriorPoints();O=[];for(let x=0,T=R.length;x<T;x+=3)C.overflow||P.push(R[x+2]/this.resolution),O.push(R[x],R[x+1]);if(0===O.length)return;X=2}const E=this.appendFlatPointCoordinates(O,X);if(E===v)return;if(P&&(E-v)/2!=O.length/X){let R=v/2;P=P.filter((x,T)=>{const U=_[2*(R+T)]===O[T*X]&&_[2*(R+T)+1]===O[T*X+1];return U||--R,U})}this.saveTextStates_(),(C.backgroundFill||C.backgroundStroke)&&(this.setFillStrokeStyle(C.backgroundFill,C.backgroundStroke),C.backgroundFill&&this.updateFillStyle(this.state,this.createFill),C.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(l,n,d);let W=C.padding;if(W!=$.Tq&&(C.scale[0]<0||C.scale[1]<0)){let R=C.padding[0],x=C.padding[1],T=C.padding[2],U=C.padding[3];C.scale[0]<0&&(x=-x,U=-U),C.scale[1]<0&&(R=-R,T=-T),W=[R,x,T,U]}const Z=this.pixelRatio;this.instructions.push([z.Ay.DRAW_IMAGE,v,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,W==$.Tq?$.Tq:W.map(function(R){return R*Z}),!!C.backgroundFill,!!C.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,P]);const A=1/Z,D=this.state.fillStyle;C.backgroundFill&&(this.state.fillStyle=$.qY,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([z.Ay.DRAW_IMAGE,v,E,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[A,A],NaN,this.declutterMode_,this.declutterImageWithText_,W,!!C.backgroundFill,!!C.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?$.qY:this.fillKey_,this.textOffsetX_,this.textOffsetY_,P]),C.backgroundFill&&(this.state.fillStyle=D,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}else{if(!(0,M.HY)(this.maxExtent,l.getExtent()))return;let P;if(O=l.getFlatCoordinates(),"LineString"==F)P=[O.length];else if("MultiLineString"==F)P=l.getEnds();else if("Polygon"==F)P=l.getEnds().slice(0,1);else if("MultiPolygon"==F){const A=l.getEndss();P=[];for(let D=0,R=A.length;D<R;++D)P.push(A[D][0])}this.beginGeometry(l,n,d);const E=C.repeat,W=E?void 0:C.textAlign;let Z=0;for(let A=0,D=P.length;A<D;++A){let R;R=E?I(E*this.resolution,O,Z,P[A],X):[O.slice(Z,P[A])];for(let x=0,T=R.length;x<T;++x){const U=R[x];let tt=0,it=U.length;if(null==W){const ht=y(C.maxAngle,U,0,U.length,2);tt=ht[0],it=ht[1]}for(let ht=tt;ht<it;ht+=X)_.push(U[ht],U[ht+1]);const J=_.length;Z=P[A],this.drawChars_(v,J),v=J}}this.endGeometry(n)}}saveTextStates_(){const l=this.textStrokeState_,n=this.textState_,d=this.textFillState_,f=this.strokeKey_;l&&(f in this.strokeStates||(this.strokeStates[f]={strokeStyle:l.strokeStyle,lineCap:l.lineCap,lineDashOffset:l.lineDashOffset,lineWidth:l.lineWidth,lineJoin:l.lineJoin,miterLimit:l.miterLimit,lineDash:l.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:n.font,textAlign:n.textAlign||$.MY,justify:n.justify,textBaseline:n.textBaseline||$.M8,scale:n.scale});const C=this.fillKey_;d&&(C in this.fillStates||(this.fillStates[C]={fillStyle:d.fillStyle}))}drawChars_(l,n){const d=this.textStrokeState_,f=this.textState_,r=this.strokeKey_,C=this.textKey_,_=this.fillKey_;this.saveTextStates_();const v=this.pixelRatio,F=m[f.textBaseline],O=this.textOffsetY_*v,X=this.text_,P=d?d.lineWidth*Math.abs(f.scale[0])/2:0;this.instructions.push([z.Ay.DRAW_CHARS,l,n,F,f.overflow,_,f.maxAngle,v,O,r,P*v,X,C,1,this.declutterMode_]),this.hitDetectionInstructions.push([z.Ay.DRAW_CHARS,l,n,F,f.overflow,_&&$.qY,f.maxAngle,v,O,r,P*v,X,C,1/v,this.declutterMode_])}setTextStyle(l,n){let d,f,r;if(l){const C=l.getFill();C?(f=this.textFillState_,f||(f={},this.textFillState_=f),f.fillStyle=(0,Q.F)(C.getColor()||$.qY)):(f=null,this.textFillState_=f);const _=l.getStroke();if(_){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const W=_.getLineDash(),Z=_.getLineDashOffset(),A=_.getWidth(),D=_.getMiterLimit();r.lineCap=_.getLineCap()||$._m,r.lineDash=W?W.slice():$.Oq,r.lineDashOffset=void 0===Z?$.vk:Z,r.lineJoin=_.getLineJoin()||$._K,r.lineWidth=void 0===A?$.aq:A,r.miterLimit=void 0===D?$.eL:D,r.strokeStyle=(0,Q.F)(_.getColor()||$.NT)}else r=null,this.textStrokeState_=r;d=this.textState_;const v=l.getFont()||$.ZV;(0,$.fZ)(v);const F=l.getScaleArray();d.overflow=l.getOverflow(),d.font=v,d.maxAngle=l.getMaxAngle(),d.placement=l.getPlacement(),d.textAlign=l.getTextAlign(),d.repeat=l.getRepeat(),d.justify=l.getJustify(),d.textBaseline=l.getTextBaseline()||$.M8,d.backgroundFill=l.getBackgroundFill(),d.backgroundStroke=l.getBackgroundStroke(),d.padding=l.getPadding()||$.Tq,d.scale=void 0===F?[1,1]:F;const O=l.getOffsetX(),X=l.getOffsetY(),P=l.getRotateWithView(),E=l.getRotation();this.text_=l.getText()||"",this.textOffsetX_=void 0===O?0:O,this.textOffsetY_=void 0===X?0:X,this.textRotateWithView_=void 0!==P&&P,this.textRotation_=void 0===E?0:E,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:(0,L.v6)(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=d.font+d.scale+(d.textAlign||"?")+(d.repeat||"?")+(d.justify||"?")+(d.textBaseline||"?"),this.fillKey_=f&&f.fillStyle?"string"==typeof f.fillStyle?f.fillStyle:"|"+(0,L.v6)(f.fillStyle):""}else this.text_="";this.declutterMode_=l.getDeclutterMode(),this.declutterImageWithText_=n}}},1120:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Q});var Y=s(5551);const Q=class z{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy((0,Y.lr)(),{get:(L,M)=>{if("function"==typeof(0,Y.lr)()[M])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(M),this.pushMethodArgs_},set:(L,M,w)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(M,w),!0)})}pushMethodArgs_=(...L)=>(this.instructions_[this.zIndex+this.offset_].push(L),this);pushFunction(L){this.instructions_[this.zIndex+this.offset_].push(L)}getContext(){return this.context_}draw(L){this.instructions_.forEach(M=>{for(let w=0,I=M.length;w<I;++w){const y=M[w];if("function"==typeof y){y(L);continue}const m=M[++w];if("function"==typeof L[y])L[y](...m);else{if("function"==typeof m){L[y]=m(L);continue}L[y]=m}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}},3031:(le,pt,s)=>{"use strict";s.d(pt,{F8:()=>m,_7:()=>y,tF:()=>I});var Y=s(4548),z=s(5804),Q=s(2058),$=s(9973),L=s(5551),M=s(9325),w=s(8507);const I=.5;function y(u,o,i,l,n,d,f,r,C){const _=C?(0,M.JR)(n,C):n,O=(0,L.Y)(u[0]*I,u[1]*I);O.imageSmoothingEnabled=!1;const X=O.canvas,P=new Y.A(O,I,n,null,f,r,C?(0,M.FO)((0,M.Tf)(),C):null),E=i.length,W=Math.floor(16777215/E),Z={};for(let D=1;D<=E;++D){const R=i[D-1],x=R.getStyleFunction()||l;if(!x)continue;let T=x(R,d);if(!T)continue;Array.isArray(T)||(T=[T]);const tt=(D*W).toString(16).padStart(7,"#00000");for(let it=0,J=T.length;it<J;++it){const ht=T[it],mt=ht.getGeometryFunction()(R);if(!mt||!(0,w.HY)(_,mt.getExtent()))continue;const Et=ht.clone(),Ot=Et.getFill();Ot&&Ot.setColor(tt);const Nt=Et.getStroke();Nt&&(Nt.setColor(tt),Nt.setLineDash(null)),Et.setText(void 0);const ft=ht.getImage();if(ft){const Jt=ft.getImageSize();if(!Jt)continue;const ye=(0,L.Y)(Jt[0],Jt[1],void 0,{alpha:!1}),oe=ye.canvas;ye.fillStyle=tt,ye.fillRect(0,0,oe.width,oe.height),Et.setImage(new z.A({img:oe,anchor:ft.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ft.getOrigin(),opacity:1,size:ft.getSize(),scale:ft.getScale(),rotation:ft.getRotation(),rotateWithView:ft.getRotateWithView()}))}const Ct=Et.getZIndex()||0;let Dt=Z[Ct];Dt||(Dt={},Z[Ct]=Dt,Dt.Polygon=[],Dt.Circle=[],Dt.LineString=[],Dt.Point=[]);const re=mt.getType();if("GeometryCollection"===re){const Jt=mt.getGeometriesArrayRecursive();for(let ye=0,oe=Jt.length;ye<oe;++ye){const _e=Jt[ye];Dt[_e.getType().replace("Multi","")].push(_e,Et)}}else Dt[re.replace("Multi","")].push(mt,Et)}}const A=Object.keys(Z).map(Number).sort(Q.V_);for(let D=0,R=A.length;D<R;++D){const x=Z[A[D]];for(const T in x){const U=x[T];for(let tt=0,it=U.length;tt<it;tt+=2){P.setStyle(U[tt+1]);for(let J=0,ht=o.length;J<ht;++J)P.setTransform(o[J]),P.drawGeometry(U[tt])}}}return O.getImageData(0,0,X.width,X.height)}function m(u,o,i){const l=[];if(i){const n=Math.floor(Math.round(u[0])*I),d=Math.floor(Math.round(u[1])*I),f=4*((0,$.qE)(n,0,i.width-1)+(0,$.qE)(d,0,i.height-1)*i.width),v=i.data[f+2]+256*(i.data[f+1]+256*i.data[f]),F=Math.floor(16777215/o.length);v&&v%F==0&&l.push(o[v/F-1])}return l}},970:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>M});var Y=s(6621),z=s(2661),Q=s(6166),$=s(2383);const M=class L extends Q.A{constructor(I){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=I}getFeatures(I){return(0,$.b0)()}getData(I){return null}prepareFrame(I){return(0,$.b0)()}renderFrame(I,y){return(0,$.b0)()}loadedTileCallback(I,y,m){I[y]||(I[y]={}),I[y][m.tileCoord.toString()]=m}createLoadedTileFinder(I,y,m){return(u,o)=>{const i=this.loadedTileCallback.bind(this,m,u);return I.forEachLoadedTile(y,u,o,i)}}forEachFeatureAtCoordinate(I,y,m,u,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(I){const y=I.target;(y.getState()===z.A.LOADED||y.getState()===z.A.ERROR)&&this.renderIfReadyAndVisible()}loadImage(I){let y=I.getState();return y!=z.A.LOADED&&y!=z.A.ERROR&&I.addEventListener(Y.A.CHANGE,this.boundHandleImageChange_),y==z.A.IDLE&&(I.load(),y=I.getState()),y==z.A.LOADED}renderIfReadyAndVisible(){const I=this.getLayer();I&&I.getVisible()&&"ready"===I.getSourceState()&&I.changed()}renderDeferred(I){}disposeInternal(){delete this.layer_,super.disposeInternal()}}},4380:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>I});var Y=s(2041),z=s(2661),Q=s(6631),$=s(1983),L=s(8507),M=s(9325);const I=class w extends Y.A{constructor(m){super(m),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(m){const u=m.layerStatesArray[m.layerIndex],o=m.pixelRatio,i=m.viewState,l=i.resolution,n=this.getLayer().getSource(),d=m.viewHints;let f=m.extent;if(void 0!==u.extent&&(f=(0,L._N)(f,(0,M.SD)(u.extent,i.projection))),!d[Q.A.ANIMATING]&&!d[Q.A.INTERACTING]&&!(0,L.Im)(f))if(n){const C=n.getImage(f,l,o,i.projection);C&&(this.loadImage(C)?this.image_=C:C.getState()===z.A.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(m){const u=this.frameState;if(!u)return null;const o=this.getLayer(),i=(0,$.Bb)(u.pixelToCoordinateTransform,m.slice()),l=o.getExtent();if(l&&!(0,L.Ym)(l,i))return null;const n=this.image_.getExtent(),d=this.image_.getImage(),f=(0,L.RG)(n),r=Math.floor(d.width*((i[0]-n[0])/f));if(r<0||r>=d.width)return null;const C=(0,L.Oq)(n),_=Math.floor(d.height*((n[3]-i[1])/C));return _<0||_>=d.height?null:this.getImageData(d,r,_)}renderFrame(m,u){const o=this.image_,i=o.getExtent(),l=o.getResolution(),[n,d]=Array.isArray(l)?l:[l,l],f=o.getPixelRatio(),r=m.layerStatesArray[m.layerIndex],C=m.pixelRatio,_=m.viewState,v=_.center,F=_.resolution,O=C*n/(F*f),X=C*d/(F*f);this.prepareContainer(m,u);const P=this.context.canvas.width,E=this.context.canvas.height,W=this.getRenderContext(m);let Z=!1,A=!0;if(r.extent){const U=(0,M.SD)(r.extent,_.projection);A=(0,L.HY)(U,m.extent),Z=A&&!(0,L.ms)(U,m.extent),Z&&this.clipUnrotated(W,m,U)}const D=o.getImage(),R=(0,$.Zz)(this.tempTransform,P/2,E/2,O,X,0,f*(i[0]-v[0])/n,f*(v[1]-i[3])/d);this.renderedResolution=d*C/f;const x=D.width*R[0],T=D.height*R[3];if(this.getLayer().getSource().getInterpolate()||(W.imageSmoothingEnabled=!1),this.preRender(W,m),A&&x>=.5&&T>=.5){const U=R[4],tt=R[5],it=r.opacity;1!==it&&(W.save(),W.globalAlpha=it),W.drawImage(D,0,0,+D.width,+D.height,U,tt,x,T),1!==it&&W.restore()}return this.postRender(this.context,m),Z&&W.restore(),W.imageSmoothingEnabled=!0,this.container}}},2041:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>l,B:()=>m});var Y=s(970),z=s(2800),Q=s(1688),$=s(1120),L=s(1983),M=s(1962),w=s(5551),I=s(2058),y=s(8507);const m=[];let u=null;const l=class i extends Y.A{constructor(d){super(d),this.container=null,this.tempTransform=(0,L.vt)(),this.pixelTransform=(0,L.vt)(),this.inversePixelTransform=(0,L.vt)(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(d,f,r){let C;u||function o(){u=(0,w.Y)(1,1,void 0,{willReadFrequently:!0})}(),u.clearRect(0,0,1,1);try{u.drawImage(d,f,r,1,1,0,0,1,1),C=u.getImageData(0,0,1,1).data}catch{return u=null,null}return C}getBackground(d){let r=this.getLayer().getBackground();return"function"==typeof r&&(r=r(d.viewState.resolution)),r||void 0}useContainer(d,f,r){const C=this.getLayer().getClassName();let _,v;if(d&&d.className===C&&(!r||d&&d.style.backgroundColor&&(0,I.aI)((0,M._j)(d.style.backgroundColor),(0,M._j)(r)))){const F=d.firstElementChild;F instanceof HTMLCanvasElement&&(v=F.getContext("2d"))}if(v&&v.canvas.style.transform===f?(this.container=d,this.context=v,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){_=document.createElement("div"),_.className=C;let F=_.style;F.position="absolute",F.width="100%",F.height="100%",v=(0,w.Y)();const O=v.canvas;_.appendChild(O),F=O.style,F.position="absolute",F.left="0",F.transformOrigin="top left",this.container=_,this.context=v}!this.containerReused&&r&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=r)}clipUnrotated(d,f,r){const C=(0,y.Py)(r),_=(0,y.WU)(r),v=(0,y.k_)(r),F=(0,y.R)(r);(0,L.Bb)(f.coordinateToPixelTransform,C),(0,L.Bb)(f.coordinateToPixelTransform,_),(0,L.Bb)(f.coordinateToPixelTransform,v),(0,L.Bb)(f.coordinateToPixelTransform,F);const O=this.inversePixelTransform;(0,L.Bb)(O,C),(0,L.Bb)(O,_),(0,L.Bb)(O,v),(0,L.Bb)(O,F),d.save(),d.beginPath(),d.moveTo(Math.round(C[0]),Math.round(C[1])),d.lineTo(Math.round(_[0]),Math.round(_[1])),d.lineTo(Math.round(v[0]),Math.round(v[1])),d.lineTo(Math.round(F[0]),Math.round(F[1])),d.clip()}prepareContainer(d,f){const r=d.extent,C=d.viewState.resolution,_=d.viewState.rotation,v=d.pixelRatio,F=Math.round((0,y.RG)(r)/C*v),O=Math.round((0,y.Oq)(r)/C*v);(0,L.Zz)(this.pixelTransform,d.size[0]/2,d.size[1]/2,1/v,1/v,_,-F/2,-O/2),(0,L.T9)(this.inversePixelTransform,this.pixelTransform);const X=(0,L.dI)(this.pixelTransform);if(this.useContainer(f,X,this.getBackground(d)),!this.containerReused){const P=this.context.canvas;P.width!=F||P.height!=O?(P.width=F,P.height=O):this.context.clearRect(0,0,F,O),X!==P.style.transform&&(P.style.transform=X)}}dispatchRenderEvent_(d,f,r){const C=this.getLayer();if(C.hasListener(d)){const _=new z.A(d,this.inversePixelTransform,r,f);C.dispatchEvent(_)}}preRender(d,f){this.frameState=f,!f.declutter&&this.dispatchRenderEvent_(Q.A.PRERENDER,d,f)}postRender(d,f){f.declutter||this.dispatchRenderEvent_(Q.A.POSTRENDER,d,f)}renderDeferredInternal(d){}getRenderContext(d){return d.declutter&&!this.deferredContext_&&(this.deferredContext_=new $.A),d.declutter?this.deferredContext_.getContext():this.context}renderDeferred(d){d.declutter&&(this.dispatchRenderEvent_(Q.A.PRERENDER,this.context,d),d.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(d),this.dispatchRenderEvent_(Q.A.POSTRENDER,this.context,d))}getRenderTransform(d,f,r,C,_,v,F){const P=C/f;return(0,L.Zz)(this.tempTransform,_/2,v/2,P,-P,-r,-d[0]+F,-d[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}}},2565:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>i});var Y=s(2041),z=s(8118),Q=s(8836),$=s(6990),L=s(9806),M=s(1983),w=s(2058),I=s(8507),y=s(9325),m=s(2383),u=s(9270);const i=class o extends Y.A{constructor(n){super(n),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,I.S5)(),this.tmpTileRange_=new $.A(0,0,0,0)}isDrawableTile(n){const d=this.getLayer(),f=n.getState(),r=d.getUseInterimTilesOnError();return f==L.A.LOADED||f==L.A.EMPTY||f==L.A.ERROR&&!r}getTile(n,d,f,r){const C=r.pixelRatio,_=r.viewState.projection,v=this.getLayer();let O=v.getSource().getTile(n,d,f,C,_);return O.getState()==L.A.ERROR&&v.getUseInterimTilesOnError()&&v.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(O)||(O=O.getInterimTile()),O}getData(n){const d=this.frameState;if(!d)return null;const f=this.getLayer(),r=(0,M.Bb)(d.pixelToCoordinateTransform,n.slice()),C=f.getExtent();if(C&&!(0,I.Ym)(C,r))return null;const _=d.pixelRatio,v=d.viewState.projection,F=d.viewState,O=f.getRenderSource(),X=O.getTileGridForProjection(F.projection),P=O.getTilePixelRatio(d.pixelRatio);for(let E=X.getZForResolution(F.resolution);E>=X.getMinZoom();--E){const W=X.getTileCoordForCoordAndZ(r,E),Z=O.getTile(E,W[1],W[2],_,v);if(!(Z instanceof z.A||Z instanceof Q.A)||Z instanceof Q.A&&Z.getState()===L.A.EMPTY)return null;if(Z.getState()!==L.A.LOADED)continue;const A=X.getOrigin(E),D=(0,u.xq)(X.getTileSize(E)),R=X.getResolution(E),x=Math.floor(P*((r[0]-A[0])/R-W[1]*D[0])),T=Math.floor(P*((A[1]-r[1])/R-W[2]*D[1])),U=Math.round(P*O.getGutterForProjection(F.projection));return this.getImageData(Z.getImage(),x+U,T+U)}return null}loadedTileCallback(n,d,f){return!!this.isDrawableTile(f)&&super.loadedTileCallback(n,d,f)}prepareFrame(n){return!!this.getLayer().getSource()}renderFrame(n,d){const f=n.layerStatesArray[n.layerIndex],r=n.viewState,C=r.projection,_=r.resolution,v=r.center,F=r.rotation,O=n.pixelRatio,X=this.getLayer(),P=X.getSource(),E=P.getRevision(),W=P.getTileGridForProjection(C),Z=W.getZForResolution(_,P.zDirection),A=W.getResolution(Z);let D=n.extent;const R=n.viewState.resolution,x=P.getTilePixelRatio(O);this.prepareContainer(n,d);const T=this.context.canvas.width,U=this.context.canvas.height,tt=f.extent&&(0,y.SD)(f.extent,C);tt&&(D=(0,I._N)(D,(0,y.SD)(f.extent,C)));const it=A*T/2/x,J=A*U/2/x,ht=[v[0]-it,v[1]-J,v[0]+it,v[1]+J],mt=W.getTileRangeForExtentAndZ(D,Z),Et={};Et[Z]={};const Ot=this.createLoadedTileFinder(P,C,Et),Nt=this.tmpExtent,ft=this.tmpTileRange_;this.newTiles_=!1;const Ct=F?(0,I.Yw)(r.center,R,F,n.size):void 0;for(let ct=mt.minX;ct<=mt.maxX;++ct)for(let Gt=mt.minY;Gt<=mt.maxY;++Gt){if(F&&!W.tileCoordIntersectsViewport([Z,ct,Gt],Ct))continue;const Vt=this.getTile(Z,ct,Gt,n);if(this.isDrawableTile(Vt)){const qe=(0,m.v6)(this);if(Vt.getState()==L.A.LOADED){Et[Z][Vt.tileCoord.toString()]=Vt;let ti=Vt.inTransition(qe);ti&&1!==f.opacity&&(Vt.endTransition(qe),ti=!1),!this.newTiles_&&(ti||!this.renderedTiles.includes(Vt))&&(this.newTiles_=!0)}if(1===Vt.getAlpha(qe,n.time))continue}const ge=W.getTileCoordChildTileRange(Vt.tileCoord,ft,Nt);let Ae=!1;ge&&(Ae=Ot(Z+1,ge)),Ae||W.forEachTileCoordParentTileRange(Vt.tileCoord,Ot,ft,Nt)}const Dt=A/_*O/x,re=this.getRenderContext(n);(0,M.Zz)(this.tempTransform,T/2,U/2,Dt,Dt,0,-T/2,-U/2),tt&&this.clipUnrotated(re,n,tt),P.getInterpolate()||(re.imageSmoothingEnabled=!1),this.preRender(re,n),this.renderedTiles.length=0;let ye,oe,_e,Jt=Object.keys(Et).map(Number);Jt.sort(w.V_),1!==f.opacity||this.containerReused&&!P.getOpaque(n.viewState.projection)?(ye=[],oe=[]):Jt=Jt.reverse();for(let ct=Jt.length-1;ct>=0;--ct){const Gt=Jt[ct],Vt=P.getTilePixelSize(Gt,O,C),Ae=W.getResolution(Gt)/A,qe=Vt[0]*Ae*Dt,ti=Vt[1]*Ae*Dt,Ie=W.getTileCoordForCoordAndZ((0,I.Py)(ht),Gt),_t=W.getTileCoordExtent(Ie),zt=(0,M.Bb)(this.tempTransform,[x*(_t[0]-ht[0])/A,x*(ht[3]-_t[3])/A]),xe=x*P.getGutterForProjection(C),$t=Et[Gt];for(const ze in $t){const Xe=$t[ze],si=Xe.tileCoord,hi=Ie[1]-si[1],et=Math.round(zt[0]-(hi-1)*qe),N=Ie[2]-si[2],g=Math.round(zt[1]-(N-1)*ti),S=Math.round(zt[0]-hi*qe),K=Math.round(zt[1]-N*ti),B=et-S,ot=g-K,dt=Z===Gt,It=dt&&1!==Xe.getAlpha((0,m.v6)(this),n.time);let Wt=!1;if(!It)if(ye){_e=[S,K,S+B,K,S+B,K+ot,S,K+ot];for(let pe=0,ce=ye.length;pe<ce;++pe)if(Z!==Gt&&Gt<oe[pe]){const Ne=ye[pe];(0,I.HY)([S,K,S+B,K+ot],[Ne[0],Ne[3],Ne[4],Ne[7]])&&(Wt||(re.save(),Wt=!0),re.beginPath(),re.moveTo(_e[0],_e[1]),re.lineTo(_e[2],_e[3]),re.lineTo(_e[4],_e[5]),re.lineTo(_e[6],_e[7]),re.moveTo(Ne[6],Ne[7]),re.lineTo(Ne[4],Ne[5]),re.lineTo(Ne[2],Ne[3]),re.lineTo(Ne[0],Ne[1]),re.clip())}ye.push(_e),oe.push(Gt)}else re.clearRect(S,K,B,ot);this.drawTileImage(Xe,n,S,K,B,ot,xe,dt),ye&&!It?(Wt&&re.restore(),this.renderedTiles.unshift(Xe)):this.renderedTiles.push(Xe),this.updateUsedTiles(n.usedTiles,P,Xe)}}return this.renderedRevision=E,this.renderedResolution=A,this.extentChanged=!this.renderedExtent_||!(0,I.aI)(this.renderedExtent_,ht),this.renderedExtent_=ht,this.renderedPixelRatio=O,this.renderedProjection=C,this.manageTilePyramid(n,P,W,O,C,D,Z,X.getPreload()),this.scheduleExpireCache(n,P),this.postRender(this.context,n),f.extent&&re.restore(),re.imageSmoothingEnabled=!0,this.container}drawTileImage(n,d,f,r,C,_,v,F){const O=this.getTileImage(n);if(!O)return;const X=this.getRenderContext(d),P=(0,m.v6)(this),E=d.layerStatesArray[d.layerIndex],W=E.opacity*(F?n.getAlpha(P,d.time):1),Z=W!==X.globalAlpha;Z&&(X.save(),X.globalAlpha=W),X.drawImage(O,v,v,O.width-2*v,O.height-2*v,f,r,C,_),Z&&X.restore(),W!==E.opacity?d.animate=!0:F&&n.endTransition(P)}getImage(){const n=this.context;return n?n.canvas:null}getTileImage(n){return n.getImage()}scheduleExpireCache(n,d){if(d.canExpireCache()){const f=function(r,C,_){const v=(0,m.v6)(r);v in _.usedTiles&&r.expireCache(_.viewState.projection,_.usedTiles[v])}.bind(null,d);n.postRenderFunctions.push(f)}}updateUsedTiles(n,d,f){const r=(0,m.v6)(d);r in n||(n[r]={}),n[r][f.getKey()]=!0}manageTilePyramid(n,d,f,r,C,_,v,F,O){const X=(0,m.v6)(d);X in n.wantedTiles||(n.wantedTiles[X]={});const P=n.wantedTiles[X],E=n.tileQueue,W=f.getMinZoom(),Z=n.viewState.rotation,A=Z?(0,I.Yw)(n.viewState.center,n.viewState.resolution,Z,n.size):void 0;let R,x,T,U,tt,it,D=0;for(it=W;it<=v;++it)for(x=f.getTileRangeForExtentAndZ(_,it,x),T=f.getResolution(it),U=x.minX;U<=x.maxX;++U)for(tt=x.minY;tt<=x.maxY;++tt)Z&&!f.tileCoordIntersectsViewport([it,U,tt],A)||(v-it<=F?(++D,R=d.getTile(it,U,tt,r,C),R.getState()==L.A.IDLE&&(P[R.getKey()]=!0,E.isKeyQueued(R.getKey())||E.enqueue([R,X,f.getTileCoordCenter(R.tileCoord),T])),void 0!==O&&O(R)):d.useTile(it,U,tt,C));d.updateCacheSize(D,C)}}},3812:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>n});var Y=s(99),z=s(2041),Q=s(3826),$=s(1688),L=s(6631),M=s(3031),w=s(8507),I=s(5551),y=s(4944),m=s(2058),u=s(9325),o=s(2383),i=s(5085);const n=class l extends z.A{constructor(f){super(f),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,w.S5)(),this.wrappedRenderedExtent_=(0,w.S5)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(f,r,C){const _=r.extent,v=r.viewState,F=v.center,O=v.resolution,X=v.projection,P=v.rotation,E=X.getExtent(),W=this.getLayer().getSource(),Z=this.getLayer().getDeclutter(),A=r.pixelRatio,D=r.viewHints,R=!(D[L.A.ANIMATING]||D[L.A.INTERACTING]),x=this.context,T=Math.round((0,w.RG)(_)/O*A),U=Math.round((0,w.Oq)(_)/O*A),tt=W.getWrapX()&&X.canWrapX(),it=tt?(0,w.RG)(E):null,J=tt?Math.ceil((_[2]-E[2])/it)+1:1;let ht=tt?Math.floor((_[0]-E[0])/it):0;do{let mt=this.getRenderTransform(F,O,0,A,T,U,ht*it);r.declutter&&(mt=mt.slice(0)),f.execute(x,[x.canvas.width,x.canvas.height],mt,P,R,void 0===C?Q.y2:C?Q.$i:Q.x$,C?Z&&r.declutter[Z]:void 0)}while(++ht<J)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=(0,I.Y)(this.context.canvas.width,this.context.canvas.height,z.B))}resetDrawContext_(){if(1!==this.opacity_){const f=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=f,(0,I.Yg)(this.context),z.B.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(f){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,f,!0)}renderDeferredInternal(f){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(f,r){const C=f.layerStatesArray[f.layerIndex];this.opacity_=C.opacity;const _=f.viewState;this.prepareContainer(f,r);const v=this.context,F=this.replayGroup_;let O=F&&!F.isEmpty();if(!O&&!this.getLayer().hasListener($.A.PRERENDER)&&!this.getLayer().hasListener($.A.POSTRENDER))return null;this.setDrawContext_(),this.preRender(v,f);const X=_.projection;if(this.clipped_=!1,O&&C.extent&&this.clipping){const P=(0,u.SD)(C.extent,X);O=(0,w.HY)(P,f.extent),this.clipped_=O&&!(0,w.ms)(P,f.extent),this.clipped_&&this.clipUnrotated(v,f,P)}return O&&this.renderWorlds(F,f,!this.getLayer().getDeclutter()&&void 0),!f.declutter&&this.clipped_&&v.restore(),this.postRender(v,f),this.renderedRotation_!==_.rotation&&(this.renderedRotation_=_.rotation,this.hitDetectionImageData_=null),f.declutter||this.resetDrawContext_(),this.container}getFeatures(f){return new Promise(r=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const C=this.frameState.size.slice(),_=this.renderedCenter_,v=this.renderedResolution_,F=this.renderedRotation_,O=this.renderedProjection_,X=this.wrappedRenderedExtent_,P=this.getLayer(),E=[],W=C[0]*M.tF,Z=C[1]*M.tF;E.push(this.getRenderTransform(_,v,F,M.tF,W,Z,0).slice());const A=P.getSource(),D=O.getExtent();if(A.getWrapX()&&O.canWrapX()&&!(0,w.ms)(D,X)){let x=X[0];const T=(0,w.RG)(D);let tt,U=0;for(;x<D[0];)--U,tt=T*U,E.push(this.getRenderTransform(_,v,F,M.tF,W,Z,tt).slice()),x+=T;for(U=0,x=X[2];x>D[2];)++U,tt=T*U,E.push(this.getRenderTransform(_,v,F,M.tF,W,Z,tt).slice()),x-=T}const R=(0,u.Tf)();this.hitDetectionImageData_=(0,M._7)(C,E,this.renderedFeatures_,P.getStyleFunction(),X,v,F,(0,y.j)(v,this.renderedPixelRatio_),R?O:null)}r((0,M.F8)(f,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(f,r,C,_,v){if(!this.replayGroup_)return;const F=r.viewState.resolution,O=r.viewState.rotation,X=this.getLayer(),P={},E=function(D,R,x){const T=(0,o.v6)(D),U=P[T];if(U){if(!0!==U&&x<U.distanceSq){if(0===x)return P[T]=!0,v.splice(v.lastIndexOf(U),1),_(D,X,R);U.geometry=R,U.distanceSq=x}}else{if(0===x)return P[T]=!0,_(D,X,R);v.push(P[T]={feature:D,layer:X,geometry:R,distanceSq:x,callback:_})}};let W;const Z=[this.replayGroup_],A=this.getLayer().getDeclutter();return Z.some(D=>W=D.forEachFeatureAtCoordinate(f,F,O,C,E,A&&r.declutter[A]?r.declutter[A].all().map(R=>R.value):null)),W}handleFontsChanged(){const f=this.getLayer();f.getVisible()&&this.replayGroup_&&f.changed()}handleStyleImageChange_(f){this.renderIfReadyAndVisible()}prepareFrame(f){const r=this.getLayer(),C=r.getSource();if(!C)return!1;const _=f.viewHints[L.A.ANIMATING],v=f.viewHints[L.A.INTERACTING],F=r.getUpdateWhileAnimating(),O=r.getUpdateWhileInteracting();if(this.ready&&!F&&_||!O&&v)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const X=f.extent,P=f.viewState,E=P.projection,W=P.resolution,Z=f.pixelRatio,A=r.getRevision(),D=r.getRenderBuffer();let R=r.getRenderOrder();void 0===R&&(R=y.Eo);const x=P.center.slice(),T=(0,w.r)(X,D*W),U=T.slice(),tt=[T.slice()],it=E.getExtent();if(C.getWrapX()&&E.canWrapX()&&!(0,w.ms)(it,f.extent)){const Jt=(0,w.RG)(it),ye=Math.max((0,w.RG)(T)/2,Jt);T[0]=it[0]-ye,T[2]=it[2]+ye,(0,i.Li)(x,E);const oe=(0,w.Li)(tt[0],E);oe[0]<it[0]&&oe[2]<it[2]?tt.push([oe[0]+Jt,oe[1],oe[2]+Jt,oe[3]]):oe[0]>it[0]&&oe[2]>it[2]&&tt.push([oe[0]-Jt,oe[1],oe[2]-Jt,oe[3]])}if(this.ready&&this.renderedResolution_==W&&this.renderedRevision_==A&&this.renderedRenderOrder_==R&&this.renderedFrameDeclutter_===!!f.declutter&&(0,w.ms)(this.wrappedRenderedExtent_,T))return(0,m.aI)(this.renderedExtent_,U)||(this.hitDetectionImageData_=null,this.renderedExtent_=U),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const J=new Y.A((0,y.gY)(W,Z),T,W,Z),ht=(0,u.Tf)();let mt;if(ht){for(let Jt=0,ye=tt.length;Jt<ye;++Jt){const _e=(0,u.JR)(tt[Jt],E);C.loadFeatures(_e,(0,u.vN)(W,E),ht)}mt=(0,u.FO)(ht,E)}else for(let Jt=0,ye=tt.length;Jt<ye;++Jt)C.loadFeatures(tt[Jt],W,E);const Et=(0,y.j)(W,Z);let Ot=!0;const Nt=(Jt,ye)=>{let oe;const _e=Jt.getStyleFunction()||r.getStyleFunction();if(_e&&(oe=_e(Jt,W)),oe){const ct=this.renderFeature(Jt,Et,oe,J,mt,this.getLayer().getDeclutter(),ye);Ot=Ot&&!ct}},ft=(0,u.JR)(T,E),Ct=C.getFeaturesInExtent(ft);R&&Ct.sort(R);for(let Jt=0,ye=Ct.length;Jt<ye;++Jt)Nt(Ct[Jt],Jt);this.renderedFeatures_=Ct,this.ready=Ot;const Dt=J.finish(),re=new Q.Ay(T,W,Z,C.getOverlaps(),Dt,r.getRenderBuffer(),!!f.declutter);return this.renderedResolution_=W,this.renderedRevision_=A,this.renderedRenderOrder_=R,this.renderedFrameDeclutter_=!!f.declutter,this.renderedExtent_=U,this.wrappedRenderedExtent_=T,this.renderedCenter_=x,this.renderedProjection_=E,this.renderedPixelRatio_=Z,this.replayGroup_=re,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(f,r,C,_,v,F,O){if(!C)return!1;let X=!1;if(Array.isArray(C))for(let P=0,E=C.length;P<E;++P)X=(0,y.nl)(_,f,C[P],r,this.boundHandleStyleImageChange_,v,F,O)||X;else X=(0,y.nl)(_,f,C,r,this.boundHandleStyleImageChange_,v,F,O);return X}}},4944:(le,pt,s)=>{"use strict";s.d(pt,{Eo:()=>L,gY:()=>w,j:()=>M,nl:()=>y});var Y=s(2661),z=s(2383);const Q=.5,$={Point:function d(C,_,v,F,O,X){const P=v.getImage(),E=v.getText(),W=E&&E.getText(),Z=X&&P&&W?{}:void 0;if(P){if(P.getImageState()!=Y.A.LOADED)return;const A=C.getBuilder(v.getZIndex(),"Image");A.setImageStyle(P,Z),A.drawPoint(_,F,O)}if(W){const A=C.getBuilder(v.getZIndex(),"Text");A.setTextStyle(E,Z),A.drawText(_,F,O)}},LineString:function i(C,_,v,F,O){const X=v.getStroke();if(X){const E=C.getBuilder(v.getZIndex(),"LineString");E.setFillStrokeStyle(null,X),E.drawLineString(_,F,O)}const P=v.getText();if(P&&P.getText()){const E=C.getBuilder(v.getZIndex(),"Text");E.setTextStyle(P),E.drawText(_,F,O)}},Polygon:function r(C,_,v,F,O){const X=v.getFill(),P=v.getStroke();if(X||P){const W=C.getBuilder(v.getZIndex(),"Polygon");W.setFillStrokeStyle(X,P),W.drawPolygon(_,F,O)}const E=v.getText();if(E&&E.getText()){const W=C.getBuilder(v.getZIndex(),"Text");W.setTextStyle(E),W.drawText(_,F,O)}},MultiPoint:function f(C,_,v,F,O,X){const P=v.getImage(),E=P&&0!==P.getOpacity(),W=v.getText(),Z=W&&W.getText(),A=X&&E&&Z?{}:void 0;if(E){if(P.getImageState()!=Y.A.LOADED)return;const D=C.getBuilder(v.getZIndex(),"Image");D.setImageStyle(P,A),D.drawMultiPoint(_,F,O)}if(Z){const D=C.getBuilder(v.getZIndex(),"Text");D.setTextStyle(W,A),D.drawText(_,F,O)}},MultiLineString:function l(C,_,v,F,O){const X=v.getStroke();if(X){const E=C.getBuilder(v.getZIndex(),"LineString");E.setFillStrokeStyle(null,X),E.drawMultiLineString(_,F,O)}const P=v.getText();if(P&&P.getText()){const E=C.getBuilder(v.getZIndex(),"Text");E.setTextStyle(P),E.drawText(_,F,O)}},MultiPolygon:function n(C,_,v,F,O){const X=v.getFill(),P=v.getStroke();if(P||X){const W=C.getBuilder(v.getZIndex(),"Polygon");W.setFillStrokeStyle(X,P),W.drawMultiPolygon(_,F,O)}const E=v.getText();if(E&&E.getText()){const W=C.getBuilder(v.getZIndex(),"Text");W.setTextStyle(E),W.drawText(_,F,O)}},GeometryCollection:function o(C,_,v,F,O,X){const P=_.getGeometriesArray();let E,W;for(E=0,W=P.length;E<W;++E)(0,$[P[E].getType()])(C,P[E],v,F,O,X)},Circle:function I(C,_,v,F,O){const X=v.getFill(),P=v.getStroke();if(X||P){const W=C.getBuilder(v.getZIndex(),"Circle");W.setFillStrokeStyle(X,P),W.drawCircle(_,F,O)}const E=v.getText();if(E&&E.getText()){const W=C.getBuilder(v.getZIndex(),"Text");W.setTextStyle(E),W.drawText(_,F)}}};function L(C,_){return parseInt((0,z.v6)(C),10)-parseInt((0,z.v6)(_),10)}function M(C,_){const v=w(C,_);return v*v}function w(C,_){return Q*C/_}function y(C,_,v,F,O,X,P,E){const W=[],Z=v.getImage();if(Z){let R=!0;const x=Z.getImageState();x==Y.A.LOADED||x==Y.A.ERROR?R=!1:x==Y.A.IDLE&&Z.load(),R&&W.push(Z.ready())}const A=v.getFill();A&&A.loading()&&W.push(A.ready());const D=W.length>0;return D&&Promise.all(W).then(()=>O(null)),function m(C,_,v,F,O,X,P){const E=v.getGeometryFunction()(_);if(!E)return;const W=E.simplifyTransformed(F,O);v.getRenderer()?u(C,W,v,_,P):(0,$[W.getType()])(C,W,v,_,P,X)}(C,_,v,F,X,P,E),D}function u(C,_,v,F,O){if("GeometryCollection"!=_.getType())C.getBuilder(v.getZIndex(),"Default").drawCustom(_,F,v.getRenderer(),v.getHitDetectionRenderer(),O);else{const P=_.getGeometries();for(let E=0,W=P.length;E<W;++E)u(C,P[E],v,F,O)}}},2321:(le,pt,s)=>{"use strict";s.d(pt,{BV:()=>M,KQ:()=>m,XX:()=>o,aY:()=>u});var Y=s(8507),z=s(5551),Q=s(9325),$=s(9973);let L;const M=[];function w(i,l,n,d,f){i.beginPath(),i.moveTo(0,0),i.lineTo(l,n),i.lineTo(d,f),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(l,d)+1,Math.max(n,f)),i.restore()}function I(i,l){return Math.abs(i[4*l]-210)>2||Math.abs(i[4*l+3]-191.25)>2}function m(i,l,n,d){const f=(0,Q.pd)(n,l,i);let r=(0,Q.hO)(l,d,n);const C=l.getMetersPerUnit();void 0!==C&&(r*=C);const _=i.getMetersPerUnit();void 0!==_&&(r/=_);const v=i.getExtent();if(!v||(0,Y.Ym)(v,f)){const F=(0,Q.hO)(i,r,f)/r;isFinite(F)&&F>0&&(r/=F)}return r}function u(i,l,n,d){const f=(0,Y.q1)(n);let r=m(i,l,f,d);return(!isFinite(r)||r<=0)&&(0,Y.sB)(n,function(C){return r=m(i,l,C,d),isFinite(r)&&r>0}),r}function o(i,l,n,d,f,r,C,_,v,F,O,X,P,E){const W=(0,z.Y)(Math.round(n*i),Math.round(n*l),M);if(X||(W.imageSmoothingEnabled=!1),0===v.length)return W.canvas;function Z(U){return Math.round(U*n)/n}W.scale(n,n),W.globalCompositeOperation="lighter";const A=(0,Y.S5)();let D;v.forEach(function(U,tt,it){(0,Y.X$)(A,U.extent)});const R=n/d,x=(X?1:1+Math.pow(2,-24))/R;if(!P||1!==v.length||0!==F){if(D=(0,z.Y)(Math.round((0,Y.RG)(A)*R),Math.round((0,Y.Oq)(A)*R),M),X||(D.imageSmoothingEnabled=!1),f&&E){const U=(f[0]-A[0])*R,tt=-(f[3]-A[3])*R,it=(0,Y.RG)(f)*R,J=(0,Y.Oq)(f)*R;D.rect(U,tt,it,J),D.clip()}v.forEach(function(U,tt,it){if(U.image.width>0&&U.image.height>0){if(U.clipExtent){D.save();const Ot=(U.clipExtent[0]-A[0])*R,Nt=-(U.clipExtent[3]-A[3])*R,ft=(0,Y.RG)(U.clipExtent)*R,Ct=(0,Y.Oq)(U.clipExtent)*R;D.rect(X?Ot:Math.round(Ot),X?Nt:Math.round(Nt),X?ft:Math.round(Ot+ft)-Math.round(Ot),X?Ct:Math.round(Nt+Ct)-Math.round(Nt)),D.clip()}const J=(U.extent[0]-A[0])*R,ht=-(U.extent[3]-A[3])*R,mt=(0,Y.RG)(U.extent)*R,Et=(0,Y.Oq)(U.extent)*R;D.drawImage(U.image,F,F,U.image.width-2*F,U.image.height-2*F,X?J:Math.round(J),X?ht:Math.round(ht),X?mt:Math.round(J+mt)-Math.round(J),X?Et:Math.round(ht+Et)-Math.round(ht)),U.clipExtent&&D.restore()}})}const T=(0,Y.Py)(C);return _.getTriangles().forEach(function(U,tt,it){const J=U.source,ht=U.target;let mt=J[0][0],Et=J[0][1],Ot=J[1][0],Nt=J[1][1],ft=J[2][0],Ct=J[2][1];const Dt=Z((ht[0][0]-T[0])/r),re=Z(-(ht[0][1]-T[1])/r),Jt=Z((ht[1][0]-T[0])/r),ye=Z(-(ht[1][1]-T[1])/r),oe=Z((ht[2][0]-T[0])/r),_e=Z(-(ht[2][1]-T[1])/r),ct=mt,Gt=Et;mt=0,Et=0,Ot-=ct,Nt-=Gt,ft-=ct,Ct-=Gt;const ge=(0,$.KU)([[Ot,Nt,0,0,Jt-Dt],[ft,Ct,0,0,oe-Dt],[0,0,Ot,Nt,ye-re],[0,0,ft,Ct,_e-re]]);if(!ge)return;if(W.save(),W.beginPath(),function y(){if(void 0===L){const i=(0,z.Y)(6,6,M);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",w(i,4,5,4,0),w(i,4,5,0,5);const l=i.getImageData(0,0,3,3).data;L=I(l,0)||I(l,4)||I(l,8),(0,z.Yg)(i),M.push(i.canvas)}return L}()||!X){W.moveTo(Jt,ye);const qe=4,ti=Dt-Jt,Ie=re-ye;for(let _t=0;_t<qe;_t++)W.lineTo(Jt+Z((_t+1)*ti/qe),ye+Z(_t*Ie/(qe-1))),_t!=qe-1&&W.lineTo(Jt+Z((_t+1)*ti/qe),ye+Z((_t+1)*Ie/(qe-1)));W.lineTo(oe,_e)}else W.moveTo(Jt,ye),W.lineTo(Dt,re),W.lineTo(oe,_e);let Ae;if(W.clip(),W.transform(ge[0],ge[2],ge[1],ge[3],Dt,re),W.translate(A[0]-ct,A[3]-Gt),D)Ae=D.canvas,W.scale(x,-x);else{const qe=v[0],ti=qe.extent;Ae=qe.image,W.scale((0,Y.RG)(ti)/Ae.width,-(0,Y.Oq)(ti)/Ae.height)}W.drawImage(Ae,0,0),W.restore()}),D&&((0,z.Yg)(D),M.push(D.canvas)),O&&(W.save(),W.globalCompositeOperation="source-over",W.strokeStyle="black",W.lineWidth=1,_.getTriangles().forEach(function(U,tt,it){const J=U.target,ht=(J[0][0]-T[0])/r,mt=-(J[0][1]-T[1])/r,Et=(J[1][0]-T[0])/r,Ot=-(J[1][1]-T[1])/r,Nt=(J[2][0]-T[0])/r,ft=-(J[2][1]-T[1])/r;W.beginPath(),W.moveTo(Et,Ot),W.lineTo(ht,mt),W.lineTo(Nt,ft),W.closePath(),W.stroke()}),W.restore()),W.canvas}},8836:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>o});var Y=s(8437),z=s(6621),Q=s(7783),$=s(9806),L=s(7257),M=s(2321),w=s(9973),I=s(8507),y=s(2614),m=s(5551);const o=class u extends Q.A{constructor(l,n,d,f,r,C,_,v,F,O,X,P){super(r,$.A.IDLE,P),this.renderEdges_=void 0!==X&&X,this.pixelRatio_=_,this.gutter_=v,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=f,this.wrappedTileCoord_=C||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=l.canWrapX()?l.getExtent():void 0;const E=f.getTileCoordExtent(this.wrappedTileCoord_),W=this.targetTileGrid_.getExtent();let Z=this.sourceTileGrid_.getExtent();const A=W?(0,I._N)(E,W):E;if(0===(0,I.UG)(A))return void(this.state=$.A.EMPTY);const D=l.getExtent();D&&(Z=Z?(0,I._N)(Z,D):D);const R=f.getResolution(this.wrappedTileCoord_[0]),x=(0,M.aY)(l,d,A,R);if(!isFinite(x)||x<=0)return void(this.state=$.A.EMPTY);if(this.triangulation_=new L.A(l,d,A,Z,x*(void 0!==O?O:Y.l),R),0===this.triangulation_.getTriangles().length)return void(this.state=$.A.EMPTY);this.sourceZ_=n.getZForResolution(x);let U=this.triangulation_.calculateSourceExtent();if(Z&&(l.canWrapX()?(U[1]=(0,w.qE)(U[1],Z[1],Z[3]),U[3]=(0,w.qE)(U[3],Z[1],Z[3])):U=(0,I._N)(U,Z)),(0,I.UG)(U)){let tt=0,it=0;l.canWrapX()&&(tt=(0,I.RG)(D),it=Math.floor((U[0]-D[0])/tt)),(0,I.QJ)(U.slice(),l,!0).forEach(ht=>{const mt=n.getTileRangeForExtentAndZ(ht,this.sourceZ_);for(let Et=mt.minX;Et<=mt.maxX;Et++)for(let Ot=mt.minY;Ot<=mt.maxY;Ot++){const Nt=F(this.sourceZ_,Et,Ot,_);Nt&&this.sourceTiles_.push({tile:Nt,offset:it*tt})}++it}),0===this.sourceTiles_.length&&(this.state=$.A.EMPTY)}else this.state=$.A.EMPTY}getImage(){return this.canvas_}reproject_(){const l=[];if(this.sourceTiles_.forEach(n=>{const d=n.tile;if(d&&d.getState()==$.A.LOADED){const f=this.sourceTileGrid_.getTileCoordExtent(d.tileCoord);f[0]+=n.offset,f[2]+=n.offset;const r=this.clipExtent_?.slice();r&&(r[0]+=n.offset,r[2]+=n.offset),l.push({extent:f,clipExtent:r,image:d.getImage()})}}),this.sourceTiles_.length=0,0===l.length)this.state=$.A.ERROR;else{const n=this.wrappedTileCoord_[0],d=this.targetTileGrid_.getTileSize(n),f="number"==typeof d?d:d[0],r="number"==typeof d?d:d[1],C=this.targetTileGrid_.getResolution(n),_=this.sourceTileGrid_.getResolution(this.sourceZ_),v=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,M.XX)(f,r,this.pixelRatio_,_,this.sourceTileGrid_.getExtent(),C,v,this.triangulation_,l,this.gutter_,this.renderEdges_,this.interpolate),this.state=$.A.LOADED}this.changed()}load(){if(this.state==$.A.IDLE){this.state=$.A.LOADING,this.changed();let l=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{const d=n.getState();if(d==$.A.IDLE||d==$.A.LOADING){l++;const f=(0,y.KT)(n,z.A.CHANGE,function(r){const C=n.getState();(C==$.A.LOADED||C==$.A.ERROR||C==$.A.EMPTY)&&((0,y.JH)(f),l--,0===l&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(f)}}),0===l?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},d,f){n.getState()==$.A.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(y.JH),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,m.Yg)(this.canvas_.getContext("2d")),M.BV.push(this.canvas_),this.canvas_=null),super.release()}}},7257:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>w});var Y=s(8507),z=s(9325),Q=s(9973);const w=class M{constructor(y,m,u,o,i,l){this.sourceProj_=y,this.targetProj_=m;let n={};const d=(0,z.RG)(this.targetProj_,this.sourceProj_);this.transformInv_=function(E){const W=E[0]+"/"+E[1];return n[W]||(n[W]=d(E)),n[W]},this.maxSourceExtent_=o,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&(0,Y.RG)(o)>=(0,Y.RG)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,Y.RG)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,Y.RG)(this.targetProj_.getExtent()):null;const f=(0,Y.Py)(u),r=(0,Y.WU)(u),C=(0,Y.k_)(u),_=(0,Y.R)(u),v=this.transformInv_(f),F=this.transformInv_(r),O=this.transformInv_(C),X=this.transformInv_(_),P=10+(l?Math.max(0,Math.ceil(Math.log2((0,Y.UG)(u)/(l*l*256*256)))):0);if(this.addQuad_(f,r,C,_,v,F,O,X,P),this.wrapsXInSource_){let E=1/0;this.triangles_.forEach(function(W,Z,A){E=Math.min(E,W.source[0][0],W.source[1][0],W.source[2][0])}),this.triangles_.forEach(W=>{if(Math.max(W.source[0][0],W.source[1][0],W.source[2][0])-E>this.sourceWorldWidth_/2){const Z=[[W.source[0][0],W.source[0][1]],[W.source[1][0],W.source[1][1]],[W.source[2][0],W.source[2][1]]];Z[0][0]-E>this.sourceWorldWidth_/2&&(Z[0][0]-=this.sourceWorldWidth_),Z[1][0]-E>this.sourceWorldWidth_/2&&(Z[1][0]-=this.sourceWorldWidth_),Z[2][0]-E>this.sourceWorldWidth_/2&&(Z[2][0]-=this.sourceWorldWidth_);const A=Math.min(Z[0][0],Z[1][0],Z[2][0]);Math.max(Z[0][0],Z[1][0],Z[2][0])-A<this.sourceWorldWidth_/2&&(W.source=Z)}})}n={}}addTriangle_(y,m,u,o,i,l){this.triangles_.push({source:[o,i,l],target:[y,m,u]})}addQuad_(y,m,u,o,i,l,n,d,f){const r=(0,Y.Tr)([i,l,n,d]),C=this.sourceWorldWidth_?(0,Y.RG)(r)/this.sourceWorldWidth_:null,_=this.sourceWorldWidth_,v=this.sourceProj_.canWrapX()&&C>.5&&C<1;let F=!1;if(f>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const X=(0,Y.Tr)([y,m,u,o]);F=(0,Y.RG)(X)/this.targetWorldWidth_>.25||F}!v&&this.sourceProj_.isGlobal()&&C&&(F=C>.25||F)}if(!F&&this.maxSourceExtent_&&isFinite(r[0])&&isFinite(r[1])&&isFinite(r[2])&&isFinite(r[3])&&!(0,Y.HY)(r,this.maxSourceExtent_))return;let O=0;if(!(F||isFinite(i[0])&&isFinite(i[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(n[0])&&isFinite(n[1])&&isFinite(d[0])&&isFinite(d[1])))if(f>0)F=!0;else if(O=(isFinite(i[0])&&isFinite(i[1])?0:8)+(isFinite(l[0])&&isFinite(l[1])?0:4)+(isFinite(n[0])&&isFinite(n[1])?0:2)+(isFinite(d[0])&&isFinite(d[1])?0:1),1!=O&&2!=O&&4!=O&&8!=O)return;if(f>0){if(!F){const P=this.transformInv_([(y[0]+u[0])/2,(y[1]+u[1])/2]);let E;E=v?((0,Q.xP)(i[0],_)+(0,Q.xP)(n[0],_))/2-(0,Q.xP)(P[0],_):(i[0]+n[0])/2-P[0];const W=(i[1]+n[1])/2-P[1];F=E*E+W*W>this.errorThresholdSquared_}if(F){if(Math.abs(y[0]-u[0])<=Math.abs(y[1]-u[1])){const X=[(m[0]+u[0])/2,(m[1]+u[1])/2],P=this.transformInv_(X),E=[(o[0]+y[0])/2,(o[1]+y[1])/2],W=this.transformInv_(E);this.addQuad_(y,m,X,E,i,l,P,W,f-1),this.addQuad_(E,X,u,o,W,P,n,d,f-1)}else{const X=[(y[0]+m[0])/2,(y[1]+m[1])/2],P=this.transformInv_(X),E=[(u[0]+o[0])/2,(u[1]+o[1])/2],W=this.transformInv_(E);this.addQuad_(y,X,E,o,i,P,W,d,f-1),this.addQuad_(X,m,u,E,P,l,n,W,f-1)}return}}if(v){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&O||this.addTriangle_(y,u,o,i,n,d),14&O||this.addTriangle_(y,u,m,i,n,l),O&&(13&O||this.addTriangle_(m,o,y,l,d,i),7&O||this.addTriangle_(m,o,u,l,d,n))}calculateSourceExtent(){const y=(0,Y.S5)();return this.triangles_.forEach(function(m,u,o){const i=m.source;(0,Y.$C)(y,i[0]),(0,Y.$C)(y,i[1]),(0,Y.$C)(y,i[2])}),y}getTriangles(){return this.triangles_}}},8437:(le,pt,s)=>{"use strict";s.d(pt,{l:()=>Y});const Y=.5},7841:(le,pt,s)=>{"use strict";function Y(z){return Array.isArray(z)?Math.min(...z):z}s.d(pt,{m:()=>Y})},3066:(le,pt,s)=>{"use strict";s.d(pt,{a$:()=>$,b8:()=>z,cq:()=>L,dv:()=>Q});var Y=s(9973);function z(M){if(void 0!==M)return 0}function Q(M){if(void 0!==M)return M}function $(M){const w=2*Math.PI/M;return function(I,y){return y?I:void 0!==I?I=Math.floor(I/w+.5)*w:void 0}}function L(M){const w=void 0===M?(0,Y.eh)(5):M;return function(I,y){return y||void 0===I?I:Math.abs(I)<=w?0:I}}},9270:(le,pt,s)=>{"use strict";function z(L){return L[0]>0&&L[1]>0}function Q(L,M,w){return void 0===w&&(w=[0,0]),w[0]=L[0]*M+.5|0,w[1]=L[1]*M+.5|0,w}function $(L,M){return Array.isArray(L)?L:(void 0===M?M=[L,L]:(M[0]=L,M[1]=L),M)}s.d(pt,{Ie:()=>z,hs:()=>Q,xq:()=>$})},1395:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>m});var Y=s(6621),z=s(9557),Q=s(8654),$=s(6370),L=s(5085),M=s(5940),w=s(8507),I=s(2383);const m=class y extends $.A{constructor(o){super({attributions:(o=o||{}).attributions,wrapX:o.wrapX}),this.resolution=void 0,this.distance=void 0!==o.distance?o.distance:20,this.minDistance=o.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=o.geometryFunction||function(i){const l=i.getGeometry();return(0,M.v)(!l||"Point"===l.getType(),"The default `geometryFunction` can only handle `Point` or null geometries"),l},this.createCustomCluster_=o.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(o.source||null)}clear(o){this.features.length=0,super.clear(o)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(o,i,l){this.source?.loadFeatures(o,i,l),i!==this.resolution&&(this.resolution=i,this.refresh())}setDistance(o){this.updateDistance(o,this.minDistance)}setMinDistance(o){this.updateDistance(this.distance,o)}getMinDistance(){return this.minDistance}setSource(o){this.source&&this.source.removeEventListener(Y.A.CHANGE,this.boundRefresh_),this.source=o,o&&o.addEventListener(Y.A.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(o,i){const l=0===o?0:Math.min(i,o)/o,n=o!==this.distance||this.interpolationRatio!==l;this.distance=o,this.minDistance=i,this.interpolationRatio=l,n&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return;const o=(0,w.S5)(),i=this.distance*this.resolution,l=this.source.getFeatures(),n={};for(let d=0,f=l.length;d<f;d++){const r=l[d];if(!((0,I.v6)(r)in n)){const C=this.geometryFunction(r);if(C){const _=C.getCoordinates();(0,w.dP)(_,o),(0,w.r)(o,i,o);const v=this.source.getFeaturesInExtent(o).filter(function(F){const O=(0,I.v6)(F);return!(O in n)&&(n[O]=!0,!0)});this.features.push(this.createCluster(v,o))}}}}createCluster(o,i){const l=[0,0];for(let r=o.length-1;r>=0;--r){const C=this.geometryFunction(o[r]);C?(0,L.WQ)(l,C.getCoordinates()):o.splice(r,1)}(0,L.hs)(l,1/o.length);const n=(0,w.q1)(i),d=this.interpolationRatio,f=new Q.A([l[0]*(1-d)+n[0]*d,l[1]*(1-d)+n[1]*d]);return this.createCustomCluster_?this.createCustomCluster_(f,o):new z.A({geometry:f,features:o})}}},4579:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>O,VV:()=>v,QD:()=>F});var Y=s(3805),z=s(6621),Q=s(2661),$=s(6490),L=s(8437),M=s(7257),w=s(2321),I=s(7841),y=s(8507),m=s(2614);const o=class u extends $.Ay{constructor(P,E,W,Z,A,D,R){let x=P.getExtent();x&&P.canWrapX()&&(x=x.slice(),x[0]=-1/0,x[2]=1/0);let T=E.getExtent();T&&E.canWrapX()&&(T=T.slice(),T[0]=-1/0,T[2]=1/0);const U=T?(0,y._N)(W,T):W,tt=(0,y.q1)(U),it=(0,w.KQ)(P,E,tt,Z),ht=new M.A(P,E,U,x,it*L.l,Z),mt=ht.calculateSourceExtent(),Et=(0,y.Im)(mt)?null:D(mt,it,A),Ot=Et?Q.A.IDLE:Q.A.EMPTY,Nt=Et?Et.getPixelRatio():1;super(W,Z,Nt,Ot),this.targetProj_=E,this.maxSourceExtent_=x,this.triangulation_=ht,this.targetResolution_=Z,this.targetExtent_=W,this.sourceImage_=Et,this.sourcePixelRatio_=Nt,this.interpolate_=R,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Q.A.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const P=this.sourceImage_.getState();if(P==Q.A.LOADED){const E=(0,y.RG)(this.targetExtent_)/this.targetResolution_,W=(0,y.Oq)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,w.XX)(E,W,this.sourcePixelRatio_,(0,I.m)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=P,this.changed()}load(){if(this.state==Q.A.IDLE){this.state=Q.A.LOADING,this.changed();const P=this.sourceImage_.getState();P==Q.A.LOADED||P==Q.A.ERROR?this.reproject_():(this.sourceListenerKey_=(0,m.KT)(this.sourceImage_,z.A.CHANGE,function(E){const W=this.sourceImage_.getState();(W==Q.A.LOADED||W==Q.A.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){(0,m.JH)(this.sourceListenerKey_),this.sourceListenerKey_=null}};var i=s(9159),l=s(2344),n=s(9973),d=s(9325),f=s(2058);class C extends Y.Ay{constructor(P,E){super(P),this.image=E}}function v(X,P){X.getImage().src=P}function F(X,P,E,W){const Z=P/E,A=(0,y.q1)(X),D=(0,n.mk)((0,y.RG)(X)/Z,l.B),R=(0,n.mk)((0,y.Oq)(X)/Z,l.B),T=D+2*(0,n.mk)((W-1)*D/2,l.B),U=(0,n.mk)((W-1)*R/2,l.B);return(0,y.Bg)(A,Z,0,[T,R+2*U])}const O=class _ extends i.A{constructor(P){super({attributions:P.attributions,projection:P.projection,state:P.state,interpolate:void 0===P.interpolate||P.interpolate}),this.loader=P.loader||null,this.resolutions_=void 0!==P.resolutions?P.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.static_=!!P.loader&&0===P.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(P){this.resolutions_=P}findNearestResolution(P){const E=this.getResolutions();return E&&(P=E[(0,f.FT)(E,P,0)]),P}getImage(P,E,W,Z){const A=this.getProjection();if(!A||!Z||(0,d.tI)(A,Z))return A&&(Z=A),this.getImageInternal(P,E,W,Z);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,d.tI)(this.reprojectedImage_.getProjection(),Z)&&this.reprojectedImage_.getResolution()==E&&(0,y.aI)(this.reprojectedImage_.getExtent(),P))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new o(A,Z,P,E,W,(D,R,x)=>this.getImageInternal(D,R,x,A),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(P,E,W,Z){if(this.loader){const A=F(P,E,W,1),D=this.findNearestResolution(E);if(this.image&&(this.static_||this.wantedProjection_===Z&&(this.wantedExtent_&&(0,y.ms)(this.wantedExtent_,A)||(0,y.ms)(this.image.getExtent(),A))&&(this.wantedResolution_&&(0,I.m)(this.wantedResolution_)===D||(0,I.m)(this.image.getResolution())===D)))return this.image;this.wantedProjection_=Z,this.wantedExtent_=A,this.wantedResolution_=D,this.image=new $.Ay(A,D,W,this.loader),this.image.addEventListener(z.A.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(P){const E=P.target;let W;switch(E.getState()){case Q.A.LOADING:this.loading=!0,W="imageloadstart";break;case Q.A.LOADED:this.loading=!1,W="imageloadend";break;case Q.A.ERROR:this.loading=!1,W="imageloaderror";break;default:return}this.hasListener(W)&&this.dispatchEvent(new C(W,E))}}},7659:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>w});var Y=s(4579),z=s(2321),Q=s(2212),$=s(6490),L=s(9325);const w=class M extends Y.Ay{constructor(y){super({attributions:(y=y||{}).attributions,interpolate:y.interpolate,projection:y.projection,resolutions:y.resolutions}),this.crossOrigin_=void 0!==y.crossOrigin?y.crossOrigin:null,this.url_=y.url,this.imageLoadFunction_=void 0!==y.imageLoadFunction?y.imageLoadFunction:Y.VV,this.params_=Object.assign({},y.params),this.serverType_=y.serverType,this.hidpi_=void 0===y.hidpi||y.hidpi,this.renderedRevision_=0,this.ratio_=void 0!==y.ratio?y.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(y,m,u,o){const i=(0,L.Jt)(u),l=this.getProjection();l&&l!==i&&(m=(0,z.KQ)(l,i,y,m),y=(0,L.pd)(y,i,l));const n={url:this.url_,params:{...this.params_,...o},projection:l||i};return(0,Q.y4)(n,y,m)}getLegendUrl(y,m){return(0,Q.$q)({url:this.url_,params:{...this.params_,...m}},y)}getParams(){return this.params_}getImageInternal(y,m,u,o){return void 0===this.url_?null:((!this.loader||this.loaderProjection_!==o)&&(this.loaderProjection_=o,this.loader=(0,Q.Eq)({crossOrigin:this.crossOrigin_,params:this.params_,projection:o,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(i,l)=>(this.image.setImage(i),this.imageLoadFunction_(this.image,l),(0,$.D4)(i))})),super.getImageInternal(y,m,u,o))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(y){this.imageLoadFunction_=y,this.changed()}setUrl(y){y!=this.url_&&(this.url_=y,this.loader=null,this.changed())}updateParams(y){Object.assign(this.params_,y),this.changed()}changed(){this.image=null,super.changed()}}},6160:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>$});var Y=s(8518);const $=class Q extends Y.A{constructor(M){let w;w=void 0!==(M=M||{}).attributions?M.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:w,attributionsCollapsible:!1,cacheSize:M.cacheSize,crossOrigin:void 0!==M.crossOrigin?M.crossOrigin:"anonymous",interpolate:M.interpolate,maxZoom:void 0!==M.maxZoom?M.maxZoom:19,opaque:void 0===M.opaque||M.opaque,reprojectionErrorThreshold:M.reprojectionErrorThreshold,tileLoadFunction:M.tileLoadFunction,transition:M.transition,url:void 0!==M.url?M.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:M.wrapX,zDirection:M.zDirection})}}},7712:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>D});var Y=s(9153),z=s(3805),Q=s(6621),$=s(1950),L=s(7908),M=s(4579),w=s(9159),I=s(8201),y=s(1334),m=s(7849),u=s(5551),o=s(1983),i=s(8507),l=s(2383);let d,n=!0;try{new ImageData(10,10)}catch{n=!1}function r(R){let x=!0;try{new ImageData(10,10)}catch{x=!1}function T(U,tt,it){return x?new ImageData(U,tt,it):{data:U,width:tt,height:it}}return function(U){const tt=U.buffers,it=U.meta,ht=U.width,mt=U.height,Et=tt.length,Ot=tt[0].byteLength;if(U.imageOps){const Dt=new Array(Et);for(let Jt=0;Jt<Et;++Jt)Dt[Jt]=T(new Uint8ClampedArray(tt[Jt]),ht,mt);return R(Dt,it).data.buffer}const Nt=new Uint8ClampedArray(Ot),ft=new Array(Et),Ct=new Array(Et);for(let Dt=0;Dt<Et;++Dt)ft[Dt]=new Uint8ClampedArray(tt[Dt]),Ct[Dt]=[0,0,0,0];for(let Dt=0;Dt<Ot;Dt+=4){for(let Jt=0;Jt<Et;++Jt){const ye=ft[Jt];Ct[Jt][0]=ye[Dt],Ct[Jt][1]=ye[Dt+1],Ct[Jt][2]=ye[Dt+2],Ct[Jt][3]=ye[Dt+3]}const re=R(Ct,it);Nt[Dt]=re[0],Nt[Dt+1]=re[1],Nt[Dt+2]=re[2],Nt[Dt+3]=re[3]}return Nt.buffer}}function C(R,x){const U=Object.keys(R.lib||{}).map(function(it){return"const "+it+" = "+R.lib[it].toString()+";"}).concat(["const __minion__ = ("+r.toString()+")(",R.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),tt=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(U.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(U,{type:"text/javascript"})));return tt.addEventListener("message",x),tt}class v extends Y.A{constructor(x){let T;super(),this._imageOps=!!x.imageOps,T=0===x.threads?0:this._imageOps?1:x.threads||1;const U=new Array(T);if(T)for(let tt=0;tt<T;++tt)U[tt]=C(x,this._onWorkerMessage.bind(this,tt));else U[0]=function _(R,x){const T=r(R.operation);let U=!1;return{postMessage:function(tt){setTimeout(function(){U||x({data:{buffer:T(tt),meta:tt.meta}})},0)},terminate:function(){U=!0}}}(x,this._onWorkerMessage.bind(this,0));this._workers=U,this._queue=[],this._maxQueueLength=x.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(x,T,U){this._enqueue({inputs:x,meta:T,callback:U}),this._dispatch()}_enqueue(x){for(this._queue.push(x);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return;const x=this._queue.shift();this._job=x;const T=x.inputs[0].width,U=x.inputs[0].height,tt=x.inputs.map(function(mt){return mt.data.buffer}),it=this._workers.length;if(this._running=it,1===it)return void this._workers[0].postMessage({buffers:tt,meta:x.meta,imageOps:this._imageOps,width:T,height:U},tt);const ht=4*Math.ceil(x.inputs[0].data.length/4/it);for(let mt=0;mt<it;++mt){const Et=mt*ht,Ot=[];for(let Nt=0,ft=tt.length;Nt<ft;++Nt)Ot.push(tt[Nt].slice(Et,Et+ht));this._workers[mt].postMessage({buffers:Ot,meta:x.meta,imageOps:this._imageOps,width:T,height:U},Ot)}}_onWorkerMessage(x,T){this.disposed||(this._dataLookup[x]=T.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const x=this._job,T=this._workers.length;let U,tt;if(1===T)U=new Uint8ClampedArray(this._dataLookup[0].buffer),tt=this._dataLookup[0].meta;else{const it=x.inputs[0].data.length;U=new Uint8ClampedArray(it),tt=new Array(T);const J=4*Math.ceil(it/4/T);for(let ht=0;ht<T;++ht){const Et=ht*J;U.set(new Uint8ClampedArray(this._dataLookup[ht].buffer),Et),tt[ht]=this._dataLookup[ht].meta}}this._job=null,this._dataLookup={},x.callback(null,function f(R,x,T){if(n)return new ImageData(R,x,T);d||(d=document.createElement("canvas").getContext("2d"));const U=d.createImageData(x,T);return U.data.set(R),U}(U,x.inputs[0].width,x.inputs[0].height),tt),this._dispatch()}disposeInternal(){for(let x=0;x<this._workers.length;++x)this._workers[x].terminate();this._workers.length=0}}class O extends z.Ay{constructor(x,T,U){super(x),this.extent=T.extent,this.resolution=T.viewState.resolution/T.pixelRatio,this.data=U}}let P=null;function E(R,x){const T=R.getRenderer();if(!T)throw new Error("Unsupported layer type: "+R);if(!T.prepareFrame(x))return null;const U=x.size[0],tt=x.size[1];if(0===U||0===tt)return null;const it=T.renderFrame(x,null);let J;if(it instanceof HTMLCanvasElement)J=it;else{if(it&&(J=it.firstElementChild),!(J instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+J);if(J.width===U&&J.height===tt)return J.getContext("2d").getImageData(0,0,U,tt)}if(P){const ht=P.canvas;ht.width!==U||ht.height!==tt?P=(0,u.Y)(U,tt,void 0,{willReadFrequently:!0}):P.clearRect(0,0,U,tt)}else P=(0,u.Y)(U,tt,void 0,{willReadFrequently:!0});return P.drawImage(J,0,0,U,tt),P.getImageData(0,0,U,tt)}function A(R){let x;return R instanceof w.A?R instanceof m.A?x=new I.A({source:R}):R instanceof M.Ay&&(x=new L.A({source:R})):x=R,x}const D=class X extends M.Ay{constructor(x){super({projection:null}),this.processor_=null,this.operationType_=void 0!==x.operationType?x.operationType:"pixel",this.threads_=void 0!==x.threads?x.threads:1,this.layers_=function Z(R){const x=R.length,T=new Array(x);for(let U=0;U<x;++U)T[U]=A(R[U]);return T}(x.sources);const T=this.changed.bind(this);for(let U=0,tt=this.layers_.length;U<tt;++U)this.layers_[U].addEventListener(Q.A.CHANGE,T);var R;this.useResolutions_=null!==x.resolutions,this.tileQueue_=new y.A(function(){return 1},this.processSources_.bind(this)),this.renderedImageCanvas_=null,this.frameState_={animate:!1,coordinateToPixelTransform:(0,o.vt)(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:(R=this.layers_,R.map(function(x){return x.getLayerState()})),pixelRatio:1,pixelToCoordinateTransform:(0,o.vt)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,l.v6)(this),renderTargets:{}},this.setAttributions(function(U){const tt=[];for(let it=0,J=x.sources.length;it<J;++it){const ht=x.sources[it],mt=ht instanceof w.A?ht:ht.getSource();if(!mt)continue;const Et=mt.getAttributions();if("function"==typeof Et){const Ot=Et(U);tt.push.apply(tt,Ot)}}return 0!==tt.length?tt:null}),void 0!==x.operation&&this.setOperation(x.operation,x.lib)}setOperation(x,T){this.processor_&&this.processor_.dispose(),this.processor_=new v({operation:x,imageOps:"image"===this.operationType_,queue:1,lib:T,threads:this.threads_}),this.changed()}updateFrameState_(x,T,U){const tt=Object.assign({},this.frameState_);tt.viewState=Object.assign({},tt.viewState);const it=(0,i.q1)(x);tt.size[0]=Math.ceil((0,i.RG)(x)/T),tt.size[1]=Math.ceil((0,i.Oq)(x)/T),tt.extent=[it[0]-tt.size[0]*T/2,it[1]-tt.size[1]*T/2,it[0]+tt.size[0]*T/2,it[1]+tt.size[1]*T/2],tt.time=Date.now();const J=tt.viewState;return J.center=it,J.projection=U,J.resolution=T,tt}allSourcesReady_(){let T,x=!0;for(let U=0,tt=this.layers_.length;U<tt;++U)if(T=this.layers_[U].getSource(),!T||"ready"!==T.getState()){x=!1;break}return x}getImage(x,T,U,tt){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),T=this.findNearestResolution(T);const it=this.updateFrameState_(x,T,tt);if(this.requestedFrameState_=it,this.renderedImageCanvas_){const J=this.renderedImageCanvas_.getResolution(),ht=this.renderedImageCanvas_.getExtent();(T!==J||!(0,i.aI)(it.extent,ht))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),it.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const x=this.requestedFrameState_,T=this.layers_.length,U=new Array(T);for(let it=0;it<T;++it){x.layerIndex=it,x.renderTargets={};const J=E(this.layers_[it],x);if(!J)return;U[it]=J}const tt={};this.dispatchEvent(new O("beforeoperations",x,tt)),this.processor_.process(U,tt,this.onWorkerComplete_.bind(this,x))}onWorkerComplete_(x,T,U,tt){if(T||!U)return;const it=x.extent,J=x.viewState.resolution;if(J!==this.requestedFrameState_.viewState.resolution||!(0,i.aI)(it,this.requestedFrameState_.extent))return;let ht;if(this.renderedImageCanvas_)ht=this.renderedImageCanvas_.getImage().getContext("2d");else{const mt=Math.round((0,i.RG)(it)/J),Et=Math.round((0,i.Oq)(it)/J);ht=(0,u.Y)(mt,Et),this.renderedImageCanvas_=new $.A(it,J,1,ht.canvas)}ht.putImageData(U,0,0),x.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new O("afteroperations",x,tt))}getResolutions(x){if(!this.useResolutions_)return null;let T=super.getResolutions();if(!T)for(let U=0,tt=this.layers_.length;U<tt&&(T=this.layers_[U].getSource().getResolutions(x),!T);++U);return T}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}},9159:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>L});var Y=s(9568),z=s(9325);function $(M){return M?Array.isArray(M)?function(w){return M}:"function"==typeof M?M:function(w){return[M]}:null}const L=class Q extends Y.A{constructor(w){super(),this.projection=(0,z.Jt)(w.projection),this.attributions_=$(w.attributions),this.attributionsCollapsible_=void 0===w.attributionsCollapsible||w.attributionsCollapsible,this.loading=!1,this.state_=void 0!==w.state?w.state:"ready",this.wrapX_=void 0!==w.wrapX&&w.wrapX,this.interpolate_=!!w.interpolate,this.viewResolver=null,this.viewRejector=null;const I=this;this.viewPromise_=new Promise(function(y,m){I.viewResolver=y,I.viewRejector=m})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(w){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(w){this.attributions_=$(w),this.changed()}setState(w){this.state_=w,this.changed()}}},7849:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>i,c:()=>o});var Y=s(3805),z=s(9159),Q=s(9189),$=s(9806),L=s(2383),M=s(5940),w=s(9325),I=s(6690),y=s(6151),m=s(9270);class o extends Y.Ay{constructor(n,d){super(n),this.tile=d}}const i=class u extends z.A{constructor(n){super({attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,projection:n.projection,state:n.state,wrapX:n.wrapX,interpolate:n.interpolate}),this.opaque_=void 0!==n.opaque&&n.opaque,this.tilePixelRatio_=void 0!==n.tilePixelRatio?n.tilePixelRatio:1,this.tileGrid=void 0!==n.tileGrid?n.tileGrid:null,this.tileGrid&&(0,m.xq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new Q.A(n.cacheSize||0),this.tmpSize=[0,0],this.key_=n.key||"",this.tileOptions={transition:n.transition,interpolate:n.interpolate},this.zDirection=n.zDirection?n.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(n,d){const f=this.getTileCacheForProjection(n);f&&f.expireCache(d)}forEachLoadedTile(n,d,f,r){const C=this.getTileCacheForProjection(n);if(!C)return!1;let v,F,O,_=!0;for(let X=f.minX;X<=f.maxX;++X)for(let P=f.minY;P<=f.maxY;++P)F=(0,I.dp)(d,X,P),O=!1,C.containsKey(F)&&(v=C.get(F),O=v.getState()===$.A.LOADED,O&&(O=!1!==r(v))),O||(_=!1);return _}getGutterForProjection(n){return 0}getKey(){return this.key_}setKey(n){this.key_!==n&&(this.key_=n,this.changed())}getOpaque(n){return this.opaque_}getResolutions(n){const d=n?this.getTileGridForProjection(n):this.tileGrid;return d?d.getResolutions():null}getTile(n,d,f,r,C){return(0,L.b0)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(n){return this.tileGrid?this.tileGrid:(0,y.pr)(n)}getTileCacheForProjection(n){const d=this.getProjection();return(0,M.v)(null===d||(0,w.tI)(d,n),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(n){return this.tilePixelRatio_}getTilePixelSize(n,d,f){const r=this.getTileGridForProjection(f),C=this.getTilePixelRatio(d),_=(0,m.xq)(r.getTileSize(n),this.tmpSize);return 1==C?_:(0,m.hs)(_,C,this.tmpSize)}getTileCoordForTileUrlFunction(n,d){d=void 0!==d?d:this.getProjection();const f=this.getTileGridForProjection(d);return this.getWrapX()&&d.isGlobal()&&(n=(0,y.Li)(f,n,d)),(0,I.N5)(n,f)?n:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(n,d){const f=this.getTileCacheForProjection(d);n>f.highWaterMark&&(f.highWaterMark=n)}useTile(n,d,f,r){}}},1992:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>i});var Y=s(6621),z=s(8118),Q=s(8836),$=s(9189),L=s(9806),M=s(8002),w=s(9325),I=s(6690),y=s(6151),m=s(2383);function o(l,n){l.getImage().src=n}const i=class u extends M.A{constructor(n){super({attributions:n.attributions,cacheSize:n.cacheSize,opaque:n.opaque,projection:n.projection,state:n.state,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction?n.tileLoadFunction:o,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:n.wrapX,transition:n.transition,interpolate:void 0===n.interpolate||n.interpolate,key:n.key,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection}),this.crossOrigin=void 0!==n.crossOrigin?n.crossOrigin:null,this.tileClass=void 0!==n.tileClass?n.tileClass:z.A,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=n.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const n in this.tileCacheForProjection)if(this.tileCacheForProjection[n].canExpireCache())return!0;return!1}expireCache(n,d){const f=this.getTileCacheForProjection(n);this.tileCache.expireCache(this.tileCache==f?d:{});for(const r in this.tileCacheForProjection){const C=this.tileCacheForProjection[r];C.expireCache(C==f?d:{})}}getGutterForProjection(n){return this.getProjection()&&n&&!(0,w.tI)(this.getProjection(),n)?0:this.getGutter()}getGutter(){return 0}getKey(){let n=super.getKey();return this.getInterpolate()||(n+=":disable-interpolation"),n}getOpaque(n){return!(this.getProjection()&&n&&!(0,w.tI)(this.getProjection(),n))&&super.getOpaque(n)}getTileGridForProjection(n){const d=this.getProjection();if(this.tileGrid&&(!d||(0,w.tI)(d,n)))return this.tileGrid;const f=(0,m.v6)(n);return f in this.tileGridForProjection||(this.tileGridForProjection[f]=(0,y.pr)(n)),this.tileGridForProjection[f]}getTileCacheForProjection(n){const d=this.getProjection();if(!d||(0,w.tI)(d,n))return this.tileCache;const f=(0,m.v6)(n);return f in this.tileCacheForProjection||(this.tileCacheForProjection[f]=new $.A(this.tileCache.highWaterMark)),this.tileCacheForProjection[f]}createTile_(n,d,f,r,C,_){const v=[n,d,f],F=this.getTileCoordForTileUrlFunction(v,C),O=F?this.tileUrlFunction(F,r,C):void 0,X=new this.tileClass(v,void 0!==O?L.A.IDLE:L.A.EMPTY,void 0!==O?O:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return X.key=_,X.addEventListener(Y.A.CHANGE,this.handleTileChange.bind(this)),X}getTile(n,d,f,r,C){const _=this.getProjection();if(!_||!C||(0,w.tI)(_,C))return this.getTileInternal(n,d,f,r,_||C);const v=this.getTileCacheForProjection(C),F=[n,d,f];let O;const X=(0,I.i7)(F);v.containsKey(X)&&(O=v.get(X));const P=this.getKey();if(O&&O.key==P)return O;const E=this.getTileGridForProjection(_),W=this.getTileGridForProjection(C),Z=this.getTileCoordForTileUrlFunction(F,C),A=new Q.A(_,E,C,W,F,Z,this.getTilePixelRatio(r),this.getGutter(),(D,R,x,T)=>this.getTileInternal(D,R,x,T,_),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return A.key=P,O?(A.interimTile=O,A.refreshInterimChain(),v.replace(X,A)):v.set(X,A),A}getTileInternal(n,d,f,r,C){let _=null;const v=(0,I.dp)(n,d,f),F=this.getKey();if(this.tileCache.containsKey(v)){if(_=this.tileCache.get(v),_.key!=F){const O=_;_=this.createTile_(n,d,f,r,C,F),_.interimTile=O.getState()==L.A.IDLE?O.interimTile:O,_.refreshInterimChain(),this.tileCache.replace(v,_)}}else _=this.createTile_(n,d,f,r,C,F),this.tileCache.set(v,_);return _}setRenderReprojectionEdges(n){if(this.renderReprojectionEdges_!=n){this.renderReprojectionEdges_=n;for(const d in this.tileCacheForProjection)this.tileCacheForProjection[d].clear();this.changed()}}setTileGridForProjection(n,d){const f=(0,w.Jt)(n);if(f){const r=(0,m.v6)(f);r in this.tileGridForProjection||(this.tileGridForProjection[r]=d)}}clear(){super.clear();for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear()}}},1888:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>u});var Y=s(1992),z=s(2212),Q=s(4873),$=s(8507),L=s(2321),M=s(5454),w=s(9325),I=s(9973),y=s(6690);const u=class m extends Y.A{constructor(i){i=i||{};const l=Object.assign({},i.params);super({attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:i.interpolate,opaque:!(!("TRANSPARENT"in l)||l.TRANSPARENT),projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,zDirection:i.zDirection}),this.gutter_=void 0!==i.gutter?i.gutter:0,this.params_=l,this.v13_=!0,this.serverType_=i.serverType,this.hidpi_=void 0===i.hidpi||i.hidpi,this.tmpExtent_=(0,$.S5)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(i,l,n,d){const f=(0,w.Jt)(n),r=this.getProjection()||f;let C=this.getTileGrid();C||(C=this.getTileGridForProjection(r));const _=(0,w.pd)(i,f,r),v=(0,L.KQ)(r,f,i,l),F=C.getZForResolution(v,this.zDirection),O=C.getResolution(F),X=C.getTileCoordForCoordAndZ(_,F);if(C.getResolutions().length<=X[0])return;let P=C.getTileCoordExtent(X,this.tmpExtent_);const E=this.gutter_;0!==E&&(P=(0,$.r)(P,O*E,P));const W={QUERY_LAYERS:this.params_.LAYERS};Object.assign(W,(0,z.W3)(this.params_,"GetFeatureInfo"),d);const Z=Math.floor((_[0]-P[0])/O),A=Math.floor((P[3]-_[1])/O);return W[this.v13_?"I":"X"]=Z,W[this.v13_?"J":"Y"]=A,this.getRequestUrl_(X,P,1,r||f,W)}getLegendUrl(i,l){if(void 0===this.urls[0])return;const n={SERVICE:"WMS",VERSION:z.jD,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===l||void 0===l.LAYER){const d=this.params_.LAYERS;if(Array.isArray(d)&&1!==d.length)return;n.LAYER=d}if(void 0!==i){const d=this.getProjection()?this.getProjection().getMetersPerUnit():1;n.SCALE=i*d/28e-5}return Object.assign(n,l),(0,Q.L)(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(i,l,n,d,f){const r=this.urls;if(!r)return;let C;return C=1==r.length?r[0]:r[(0,I.xP)((0,y.tW)(i),r.length)],(0,z.AE)(l,(this.tileGrid||this.getTileGridForProjection(d)).getResolution(i[0]),n,d,C,f,this.serverType_)}getTilePixelRatio(i){return this.hidpi_&&void 0!==this.serverType_?i:1}getKeyForParams_(){let i=0;const l=[];for(const n in this.params_)l[i++]=n+"-"+this.params_[n];return l.join("/")}updateParams(i){Object.assign(this.params_,i),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){this.v13_=(0,M.Z)(this.params_.VERSION||z.jD,"1.3")>=0}tileUrlFunction(i,l,n){let d=this.getTileGrid();if(d||(d=this.getTileGridForProjection(n)),d.getResolutions().length<=i[0])return;1!=l&&(!this.hidpi_||void 0===this.serverType_)&&(l=1);const f=d.getResolution(i[0]);let r=d.getTileCoordExtent(i,this.tmpExtent_);const C=this.gutter_;0!==C&&(r=(0,$.r)(r,f*C,r));const _=Object.assign({},(0,z.W3)(this.params_,"GetMap"));return this.getRequestUrl_(i,r,l,n,_)}}},8002:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>I});var z=s(7849),Q=s(9806),$=s(454),L=s(6690),M=s(2383);class w extends z.A{constructor(m){super({attributions:m.attributions,cacheSize:m.cacheSize,opaque:m.opaque,projection:m.projection,state:m.state,tileGrid:m.tileGrid,tilePixelRatio:m.tilePixelRatio,wrapX:m.wrapX,transition:m.transition,interpolate:m.interpolate,key:m.key,attributionsCollapsible:m.attributionsCollapsible,zDirection:m.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===w.prototype.tileUrlFunction,this.tileLoadFunction=m.tileLoadFunction,m.tileUrlFunction&&(this.tileUrlFunction=m.tileUrlFunction),this.urls=null,m.urls?this.setUrls(m.urls):m.url&&this.setUrl(m.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(m){const u=m.target,o=(0,M.v6)(u),i=u.getState();let l;i==Q.A.LOADING?(this.tileLoadingKeys_[o]=!0,l="tileloadstart"):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],l=i==Q.A.ERROR?"tileloaderror":i==Q.A.LOADED?"tileloadend":void 0),null!=l&&this.dispatchEvent(new z.c(l,u))}setTileLoadFunction(m){this.tileCache.clear(),this.tileLoadFunction=m,this.changed()}setTileUrlFunction(m,u){this.tileUrlFunction=m,this.tileCache.pruneExceptNewestZ(),typeof u<"u"?this.setKey(u):this.changed()}setUrl(m){const u=(0,$.Uu)(m);this.urls=u,this.setUrls(u)}setUrls(m){this.urls=m;const u=m.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,$.Qz)(m,this.tileGrid),u):this.setKey(u)}tileUrlFunction(m,u,o){}useTile(m,u,o){const i=(0,L.dp)(m,u,o);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}const I=w},6370:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>O});var Y=s(6591),z=s(2927),Q=s(3805),$=s(6621),L=s(6058),M=s(2593),w=s(8507),I=s(2383),y=s(9330);const u=class m{constructor(P){this.rbush_=new M(P),this.items_={}}insert(P,E){const W={minX:P[0],minY:P[1],maxX:P[2],maxY:P[3],value:E};this.rbush_.insert(W),this.items_[(0,I.v6)(E)]=W}load(P,E){const W=new Array(E.length);for(let Z=0,A=E.length;Z<A;Z++){const D=P[Z],R=E[Z],x={minX:D[0],minY:D[1],maxX:D[2],maxY:D[3],value:R};W[Z]=x,this.items_[(0,I.v6)(R)]=x}this.rbush_.load(W)}remove(P){const E=(0,I.v6)(P),W=this.items_[E];return delete this.items_[E],null!==this.rbush_.remove(W)}update(P,E){const W=this.items_[(0,I.v6)(E)];(0,w.aI)([W.minX,W.minY,W.maxX,W.maxY],P)||(this.remove(E),this.insert(P,E))}getAll(){return this.rbush_.all().map(function(E){return E.value})}getInExtent(P){return this.rbush_.search({minX:P[0],minY:P[1],maxX:P[2],maxY:P[3]}).map(function(Z){return Z.value})}forEach(P){return this.forEach_(this.getAll(),P)}forEachInExtent(P,E){return this.forEach_(this.getInExtent(P),E)}forEach_(P,E){let W;for(let Z=0,A=P.length;Z<A;Z++)if(W=E(P[Z]),W)return W;return W}isEmpty(){return(0,y.p)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(P){const E=this.rbush_.toJSON();return(0,w.N)(E.minX,E.minY,E.maxX,E.maxY,P)}concat(P){this.rbush_.load(P.rbush_.all());for(const E in P.items_)this.items_[E]=P.items_[E]}};var o=s(2386),i=s(9159),l=s(9392),n=s(1766),d=s(7206),f=s(5940),r=s(2058),C=s(2614),_=s(6750);class v extends Q.Ay{constructor(P,E,W){super(P),this.feature=E,this.features=W}}const O=class F extends i.A{constructor(P){super({attributions:(P=P||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===P.wrapX||P.wrapX}),this.loader_=n.tV,this.format_=P.format,this.overlaps_=void 0===P.overlaps||P.overlaps,this.url_=P.url,void 0!==P.loader?this.loader_=P.loader:void 0!==this.url_&&((0,f.v)(this.format_,"`format` must be set when `url` is set"),this.loader_=(0,_.nF)(this.url_,this.format_)),this.strategy_=void 0!==P.strategy?P.strategy:d.Q7;const E=void 0===P.useSpatialIndex||P.useSpatialIndex;let W,Z;this.featuresRtree_=E?new u:null,this.loadedExtentsRtree_=new u,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(P.features)?Z=P.features:P.features&&(W=P.features,Z=W.getArray()),!E&&void 0===W&&(W=new Y.A(Z)),void 0!==Z&&this.addFeaturesInternal(Z),void 0!==W&&this.bindFeaturesCollection_(W)}addFeature(P){this.addFeatureInternal(P),this.changed()}addFeatureInternal(P){const E=(0,I.v6)(P);if(!this.addToIndex_(E,P))return void(this.featuresCollection_&&this.featuresCollection_.remove(P));this.setupChangeEvents_(E,P);const W=P.getGeometry();if(W){const Z=W.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(Z,P)}else this.nullGeometryFeatures_[E]=P;this.dispatchEvent(new v(l.A.ADDFEATURE,P))}setupChangeEvents_(P,E){E instanceof o.Ay||(this.featureChangeKeys_[P]=[(0,C.KT)(E,$.A.CHANGE,this.handleFeatureChange_,this),(0,C.KT)(E,L.A.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(P,E){let W=!0;if(void 0!==E.getId()){const Z=String(E.getId());if(Z in this.idIndex_)if(E instanceof o.Ay){const A=this.idIndex_[Z];A instanceof o.Ay?Array.isArray(A)?A.push(E):this.idIndex_[Z]=[A,E]:W=!1}else W=!1;else this.idIndex_[Z]=E}return W&&((0,f.v)(!(P in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[P]=E),W}addFeatures(P){this.addFeaturesInternal(P),this.changed()}addFeaturesInternal(P){const E=[],W=[],Z=[];for(let A=0,D=P.length;A<D;A++){const R=P[A],x=(0,I.v6)(R);this.addToIndex_(x,R)&&W.push(R)}for(let A=0,D=W.length;A<D;A++){const R=W[A],x=(0,I.v6)(R);this.setupChangeEvents_(x,R);const T=R.getGeometry();if(T){const U=T.getExtent();E.push(U),Z.push(R)}else this.nullGeometryFeatures_[x]=R}if(this.featuresRtree_&&this.featuresRtree_.load(E,Z),this.hasListener(l.A.ADDFEATURE))for(let A=0,D=W.length;A<D;A++)this.dispatchEvent(new v(l.A.ADDFEATURE,W[A]))}bindFeaturesCollection_(P){let E=!1;this.addEventListener(l.A.ADDFEATURE,function(W){E||(E=!0,P.push(W.feature),E=!1)}),this.addEventListener(l.A.REMOVEFEATURE,function(W){E||(E=!0,P.remove(W.feature),E=!1)}),P.addEventListener(z.A.ADD,W=>{E||(E=!0,this.addFeature(W.element),E=!1)}),P.addEventListener(z.A.REMOVE,W=>{E||(E=!0,this.removeFeature(W.element),E=!1)}),this.featuresCollection_=P}clear(P){if(P){for(const W in this.featureChangeKeys_)this.featureChangeKeys_[W].forEach(C.JH);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(Z=>{this.removeFeatureInternal(Z)});for(const Z in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[Z])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const E=new v(l.A.CLEAR);this.dispatchEvent(E),this.changed()}forEachFeature(P){if(this.featuresRtree_)return this.featuresRtree_.forEach(P);this.featuresCollection_&&this.featuresCollection_.forEach(P)}forEachFeatureAtCoordinateDirect(P,E){return this.forEachFeatureInExtent([P[0],P[1],P[0],P[1]],function(Z){const A=Z.getGeometry();if(A instanceof o.Ay||A.intersectsCoordinate(P))return E(Z)})}forEachFeatureInExtent(P,E){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(P,E);this.featuresCollection_&&this.featuresCollection_.forEach(E)}forEachFeatureIntersectingExtent(P,E){return this.forEachFeatureInExtent(P,function(W){const Z=W.getGeometry();if(Z instanceof o.Ay||Z.intersectsExtent(P)){const A=E(W);if(A)return A}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let P;return this.featuresCollection_?P=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(P=this.featuresRtree_.getAll(),(0,y.p)(this.nullGeometryFeatures_)||(0,r.X$)(P,Object.values(this.nullGeometryFeatures_))),P}getFeaturesAtCoordinate(P){const E=[];return this.forEachFeatureAtCoordinateDirect(P,function(W){E.push(W)}),E}getFeaturesInExtent(P,E){if(this.featuresRtree_){if(!(E&&E.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(P);const Z=(0,w.QJ)(P,E);return[].concat(...Z.map(A=>this.featuresRtree_.getInExtent(A)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(P,E){const W=P[0],Z=P[1];let A=null;const D=[NaN,NaN];let R=1/0;const x=[-1/0,-1/0,1/0,1/0];return E=E||n.rT,this.featuresRtree_.forEachInExtent(x,function(T){if(E(T)){const U=T.getGeometry(),tt=R;if(R=U instanceof o.Ay?0:U.closestPointXY(W,Z,D,R),R<tt){A=T;const it=Math.sqrt(R);x[0]=W-it,x[1]=Z-it,x[2]=W+it,x[3]=Z+it}}}),A}getExtent(P){return this.featuresRtree_.getExtent(P)}getFeatureById(P){const E=this.idIndex_[P.toString()];return void 0!==E?E:null}getFeatureByUid(P){const E=this.uidIndex_[P];return void 0!==E?E:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(P){const E=P.target,W=(0,I.v6)(E),Z=E.getGeometry();if(Z){const D=Z.getExtent();W in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[W],this.featuresRtree_&&this.featuresRtree_.insert(D,E)):this.featuresRtree_&&this.featuresRtree_.update(D,E)}else W in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(E),this.nullGeometryFeatures_[W]=E);const A=E.getId();if(void 0!==A){const D=A.toString();this.idIndex_[D]!==E&&(this.removeFromIdIndex_(E),this.idIndex_[D]=E)}else this.removeFromIdIndex_(E),this.uidIndex_[W]=E;this.changed(),this.dispatchEvent(new v(l.A.CHANGEFEATURE,E))}hasFeature(P){const E=P.getId();return void 0!==E?E in this.idIndex_:(0,I.v6)(P)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,y.p)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(P,E,W){const Z=this.loadedExtentsRtree_,A=this.strategy_(P,E,W);for(let D=0,R=A.length;D<R;++D){const x=A[D];Z.forEachInExtent(x,function(U){return(0,w.ms)(U.extent,x)})||(++this.loadingExtentsCount_,this.dispatchEvent(new v(l.A.FEATURESLOADSTART)),this.loader_.call(this,x,E,W,U=>{--this.loadingExtentsCount_,this.dispatchEvent(new v(l.A.FEATURESLOADEND,void 0,U))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new v(l.A.FEATURESLOADERROR))}),Z.insert(x,{extent:x.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(P){const E=this.loadedExtentsRtree_;let W;E.forEachInExtent(P,function(Z){if((0,w.aI)(Z.extent,P))return W=Z,!0}),W&&E.remove(W)}removeFeatures(P){const E=[];for(let W=0,Z=P.length;W<Z;++W){const D=this.removeFeatureInternal(P[W]);D&&E.push(D)}E.length>0&&this.changed()}removeFeature(P){P&&this.removeFeatureInternal(P)&&this.changed()}removeFeatureInternal(P){const E=(0,I.v6)(P);if(!(E in this.uidIndex_))return;E in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[E]:this.featuresRtree_&&this.featuresRtree_.remove(P),this.featureChangeKeys_[E]?.forEach(C.JH),delete this.featureChangeKeys_[E];const Z=P.getId();if(void 0!==Z){const A=Z.toString(),D=this.idIndex_[A];D===P?delete this.idIndex_[A]:Array.isArray(D)&&(D.splice(D.indexOf(P),1),1===D.length&&(this.idIndex_[A]=D[0]))}return delete this.uidIndex_[E],this.hasListener(l.A.REMOVEFEATURE)&&this.dispatchEvent(new v(l.A.REMOVEFEATURE,P)),P}removeFromIdIndex_(P){let E=!1;for(const W in this.idIndex_){const Z=this.idIndex_[W];if(P instanceof o.Ay&&Array.isArray(Z)&&Z.includes(P))Z.splice(Z.indexOf(P),1);else if(this.idIndex_[W]===P){delete this.idIndex_[W],E=!0;break}}return E}setLoader(P){this.loader_=P}setUrl(P){(0,f.v)(this.format_,"`format` must be set when `url` is set"),this.url_=P,this.setLoader((0,_.nF)(P,this.format_))}}},9392:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Y});const Y={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},3757:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>v,Y:()=>F});var Y=s(6621),z=s(9100),Q=s(9189),$=s(5534),L=s(9806),M=s(8002),w=s(7783),I=s(5551),y=s(2383);const m=[],o=class u extends w.A{constructor(X,P,E,W){super(X,P,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.getSourceTiles=W.bind(void 0,this),this.wrappedTileCoord=E}getContext(X){const P=(0,y.v6)(X);return P in this.context_||(this.context_[P]=(0,I.Y)(1,1,m)),this.context_[P]}hasContext(X){return(0,y.v6)(X)in this.context_}getImage(X){return this.hasContext(X)?this.getContext(X).canvas:null}getReplayState(X){const P=(0,y.v6)(X);return P in this.replayState_||(this.replayState_[P]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[P]}load(){this.getSourceTiles()}release(){for(const X in this.context_){const P=this.context_[X];(0,I.Yg)(P),m.push(P.canvas),delete this.context_[X]}super.release()}};var i=s(3139),l=s(8507),n=s(6151),d=s(6690),f=s(9330),r=s(6750),C=s(9270);const v=class _ extends M.A{constructor(X){const P=X.projection||"EPSG:3857",E=X.extent||(0,n.kZ)(P),W=X.tileGrid||(0,n.EN)({extent:E,maxResolution:X.maxResolution,maxZoom:void 0!==X.maxZoom?X.maxZoom:22,minZoom:X.minZoom,tileSize:X.tileSize||512});super({attributions:X.attributions,attributionsCollapsible:X.attributionsCollapsible,cacheSize:X.cacheSize,interpolate:!0,opaque:!1,projection:P,state:X.state,tileGrid:W,tileLoadFunction:X.tileLoadFunction?X.tileLoadFunction:F,tileUrlFunction:X.tileUrlFunction,url:X.url,urls:X.urls,wrapX:void 0===X.wrapX||X.wrapX,transition:X.transition,zDirection:void 0===X.zDirection?1:X.zDirection}),this.format_=X.format?X.format:null,this.sourceTileCache=new Q.A(this.tileCache.highWaterMark),this.overlaps_=null==X.overlaps||X.overlaps,this.tileClass=X.tileClass?X.tileClass:z.A,this.tileGrids_={}}getFeaturesInExtent(X){const P=[],E=this.tileCache;if(0===E.getCount())return P;const W=(0,d.K)(E.peekFirstKey())[0],Z=this.tileGrid;return E.forEach(function(A){if(A.tileCoord[0]!==W||A.getState()!==L.A.LOADED)return;const D=A.getSourceTiles();for(let R=0,x=D.length;R<x;++R){const T=D[R];if((0,l.HY)(X,Z.getTileCoordExtent(T.tileCoord))){const tt=T.getFeatures();if(tt)for(let it=0,J=tt.length;it<J;++it){const ht=tt[it],mt=ht.getGeometry();(0,l.HY)(X,mt.getExtent())&&P.push(ht)}}}}),P}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(X,P){const E=this.getTileCacheForProjection(X),W=Object.keys(P).reduce((Z,A)=>{const D=(0,d.gr)(A),R=E.peek(D);if(R){const x=R.sourceTiles;for(let T=0,U=x.length;T<U;++T)Z[x[T].getKey()]=!0}return Z},{});super.expireCache(X,P),this.sourceTileCache.expireCache(W)}getSourceTiles(X,P,E){if(E.getState()===L.A.IDLE){E.setState(L.A.LOADING);const W=E.wrappedTileCoord,Z=this.getTileGridForProjection(P),A=Z.getTileCoordExtent(W),R=Z.getResolution(W[0]);(0,l.r)(A,-R,A);const x=this.tileGrid,T=x.getExtent();T&&(0,l._N)(A,T,A);const U=x.getZForResolution(R,this.zDirection);x.forEachTileCoord(A,U,tt=>{const it=this.tileUrlFunction(tt,X,P),J=this.sourceTileCache.containsKey(it)?this.sourceTileCache.get(it):new this.tileClass(tt,it?L.A.IDLE:L.A.EMPTY,it,this.format_,this.tileLoadFunction);E.sourceTiles.push(J);const ht=J.getState();if(ht<L.A.LOADED){const mt=Et=>{this.handleTileChange(Et);const Ot=J.getState();if(Ot===L.A.LOADED||Ot===L.A.ERROR){const Nt=J.getKey();Nt in E.errorTileKeys?J.getState()===L.A.LOADED&&delete E.errorTileKeys[Nt]:E.loadingSourceTiles--,Ot===L.A.ERROR?E.errorTileKeys[Nt]=!0:J.removeEventListener(Y.A.CHANGE,mt),0===E.loadingSourceTiles&&E.setState((0,f.p)(E.errorTileKeys)?L.A.LOADED:L.A.ERROR)}};J.addEventListener(Y.A.CHANGE,mt),E.loadingSourceTiles++}ht===L.A.IDLE&&(J.extent=x.getTileCoordExtent(tt),J.projection=P,J.resolution=x.getResolution(tt[0]),this.sourceTileCache.set(it,J),J.load())}),E.loadingSourceTiles||E.setState(E.sourceTiles.some(tt=>tt.getState()===L.A.ERROR)?L.A.ERROR:L.A.LOADED)}return E.sourceTiles}getTile(X,P,E,W,Z){const A=(0,d.dp)(X,P,E),D=this.getKey();let R;if(this.tileCache.containsKey(A)&&(R=this.tileCache.get(A),R.key===D))return R;const x=[X,P,E];let T=this.getTileCoordForTileUrlFunction(x,Z);const U=this.getTileGrid().getExtent(),tt=this.getTileGridForProjection(Z);if(T&&U){const ht=tt.getTileCoordExtent(T);(0,l.r)(ht,-tt.getResolution(X),ht),(0,l.HY)(U,ht)||(T=null)}let it=!0;if(null!==T){const ht=this.tileGrid,mt=tt.getResolution(X),Et=ht.getZForResolution(mt,1),Ot=tt.getTileCoordExtent(T);(0,l.r)(Ot,-mt,Ot),ht.forEachTileCoord(Ot,Et,Nt=>{it=it&&!this.tileUrlFunction(Nt,W,Z)})}const J=new o(x,it?L.A.EMPTY:L.A.IDLE,T,this.getSourceTiles.bind(this,W,Z));return J.key=D,R?(J.interimTile=R,J.refreshInterimChain(),this.tileCache.replace(A,J)):this.tileCache.set(A,J),J}getTileGridForProjection(X){const P=X.getCode();let E=this.tileGrids_[P];if(!E){const W=this.tileGrid,Z=W.getResolutions().slice(),A=Z.map(function(x,T){return W.getOrigin(T)}),D=Z.map(function(x,T){return W.getTileSize(T)}),R=i.L+1;for(let x=Z.length;x<R;++x)Z.push(Z[x-1]/2),A.push(A[x-1]),D.push(D[x-1]);E=new $.A({extent:W.getExtent(),origins:A,resolutions:Z,tileSizes:D}),this.tileGrids_[P]=E}return E}getTilePixelRatio(X){return X}getTilePixelSize(X,P,E){const W=this.getTileGridForProjection(E),Z=(0,C.xq)(W.getTileSize(X),this.tmpSize);return[Math.round(Z[0]*P),Math.round(Z[1]*P)]}updateCacheSize(X,P){super.updateCacheSize(2*X,P),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(P).highWaterMark}};function F(O,X){O.setLoader(function(P,E,W){(0,r.m8)(X,O.getFormat(),P,E,W,O.onLoad.bind(O),O.onError.bind(O))})}},8518:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>$});var Y=s(1992),z=s(6151);const $=class Q extends Y.A{constructor(M){const w=void 0!==(M=M||{}).projection?M.projection:"EPSG:3857",I=void 0!==M.tileGrid?M.tileGrid:(0,z.EN)({extent:(0,z.kZ)(w),maxResolution:M.maxResolution,maxZoom:M.maxZoom,minZoom:M.minZoom,tileSize:M.tileSize});super({attributions:M.attributions,cacheSize:M.cacheSize,crossOrigin:M.crossOrigin,interpolate:M.interpolate,opaque:M.opaque,projection:w,reprojectionErrorThreshold:M.reprojectionErrorThreshold,tileGrid:I,tileLoadFunction:M.tileLoadFunction,tilePixelRatio:M.tilePixelRatio,tileUrlFunction:M.tileUrlFunction,url:M.url,urls:M.urls,wrapX:void 0===M.wrapX||M.wrapX,transition:M.transition,attributionsCollapsible:M.attributionsCollapsible,zDirection:M.zDirection}),this.gutter_=void 0!==M.gutter?M.gutter:0}getGutter(){return this.gutter_}}},2344:(le,pt,s)=>{"use strict";s.d(pt,{B:()=>z});const z=4},2212:(le,pt,s)=>{"use strict";s.d(pt,{$q:()=>d,AE:()=>o,Eq:()=>l,W3:()=>i,jD:()=>y,y4:()=>n});var Y=s(2344),z=s(4873),Q=s(5454),$=s(6490),L=s(9973),M=s(8507),w=s(9325),I=s(4579);const y="1.3.0",m=[101,101];function u(f,r,C,_,v){v.WIDTH=C[0],v.HEIGHT=C[1];const F=_.getAxisOrientation();let O;const X=(0,Q.Z)(v.VERSION,"1.3")>=0;return v[X?"CRS":"SRS"]=_.getCode(),O=X&&"ne"==F.substr(0,2)?[r[1],r[0],r[3],r[2]]:r,v.BBOX=O.join(","),(0,z.L)(f,v)}function o(f,r,C,_,v,F,O){F=Object.assign({REQUEST:"GetMap"},F);const X=r/C,P=[(0,L.LI)((0,M.RG)(f)/X,Y.B),(0,L.LI)((0,M.Oq)(f)/X,Y.B)];if(1!=C)switch(O){case"geoserver":const W=90*C+.5|0;"FORMAT_OPTIONS"in F?F.FORMAT_OPTIONS+=";dpi:"+W:F.FORMAT_OPTIONS="dpi:"+W;break;case"mapserver":F.MAP_RESOLUTION=90*C;break;case"carmentaserver":case"qgis":F.DPI=90*C;break;default:throw new Error("Unknown `serverType` configured")}return u(v,f,P,_,F)}function i(f,r){return Object.assign({REQUEST:r,SERVICE:"WMS",VERSION:y,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},f)}function l(f){const r=void 0===f.hidpi||f.hidpi,C=(0,w.Jt)(f.projection||"EPSG:3857"),_=f.ratio||1.5,v=f.load||$.D4;return(F,O,X)=>{F=(0,I.QD)(F,O,X,_),1!=X&&(!r||void 0===f.serverType)&&(X=1);const P=o(F,O,X,C,f.url,i(f.params,"GetMap"),f.serverType),E=new Image;return null!==f.crossOrigin&&(E.crossOrigin=f.crossOrigin),v(E,P).then(W=>({image:W,extent:F,pixelRatio:X}))}}function n(f,r,C){if(void 0===f.url)return;const _=(0,w.Jt)(f.projection||"EPSG:3857"),v=(0,M.Bg)(r,C,0,m),F={QUERY_LAYERS:f.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(F,i(f.params,"GetFeatureInfo"),f.params);const O=(0,L.RI)((r[0]-v[0])/C,Y.B),X=(0,L.RI)((v[3]-r[1])/C,Y.B),P=(0,Q.Z)(F.VERSION,"1.3")>=0;return F[P?"I":"X"]=O,F[P?"J":"Y"]=X,u(f.url,v,m,_,F)}function d(f,r){if(void 0===f.url)return;const C={SERVICE:"WMS",VERSION:y,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===f.params||void 0===f.params.LAYER){const _=f.params.LAYERS;if(Array.isArray(_)&&1!==_.length)return;C.LAYER=_}if(void 0!==r){const _=(0,w.Jt)(f.projection||"EPSG:3857").getMetersPerUnit()||1;C.SCALE=r*_/28e-5}return Object.assign(C,f.params),(0,z.L)(f.url,C)}},5454:(le,pt,s)=>{"use strict";function Y(Q,$,L){const M=void 0!==L?Q.toFixed(L):""+Q;let w=M.indexOf(".");return w=-1===w?M.length:w,w>$?M:new Array(1+$-w).join("0")+M}function z(Q,$){const L=(""+Q).split("."),M=(""+$).split(".");for(let w=0;w<Math.max(L.length,M.length);w++){const I=parseInt(L[w]||"0",10),y=parseInt(M[w]||"0",10);if(I>y)return 1;if(y>I)return-1}return 0}s.d(pt,{H:()=>Y,Z:()=>z})},2529:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Q});var Y=s(5940);const Q=class z{constructor(L){this.highWaterMark=void 0!==L?L:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(L){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(L){return this.entries_.hasOwnProperty(L)}forEach(L){let M=this.oldest_;for(;M;)L(M.value_,M.key_,this),M=M.newer}get(L,M){const w=this.entries_[L];return(0,Y.v)(void 0!==w,"Tried to get a value for a key that does not exist in the cache"),w===this.newest_||(w===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(w.newer.older=w.older,w.older.newer=w.newer),w.newer=null,w.older=this.newest_,this.newest_.newer=w,this.newest_=w),w.value_}remove(L){const M=this.entries_[L];return(0,Y.v)(void 0!==M,"Tried to get a value for a key that does not exist in the cache"),M===this.newest_?(this.newest_=M.older,this.newest_&&(this.newest_.newer=null)):M===this.oldest_?(this.oldest_=M.newer,this.oldest_&&(this.oldest_.older=null)):(M.newer.older=M.older,M.older.newer=M.newer),delete this.entries_[L],--this.count_,M.value_}getCount(){return this.count_}getKeys(){const L=new Array(this.count_);let w,M=0;for(w=this.newest_;w;w=w.older)L[M++]=w.key_;return L}getValues(){const L=new Array(this.count_);let w,M=0;for(w=this.newest_;w;w=w.older)L[M++]=w.value_;return L}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(L){return this.entries_[L]?.value_}pop(){const L=this.oldest_;return delete this.entries_[L.key_],L.newer&&(L.newer.older=null),this.oldest_=L.newer,this.oldest_||(this.newest_=null),--this.count_,L.value_}replace(L,M){this.get(L),this.entries_[L].value_=M}set(L,M){(0,Y.v)(!(L in this.entries_),"Tried to set a value for a key that is used already");const w={key_:L,newer:null,older:this.newest_,value_:M};this.newest_?this.newest_.newer=w:this.oldest_=w,this.newest_=w,this.entries_[L]=w,++this.count_}setSize(L){this.highWaterMark=L}}},221:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>Q});var Y=s(4960);class z extends Y.A{constructor(L){super({points:1/0,fill:(L=L||{radius:5}).fill,radius:L.radius,stroke:L.stroke,scale:void 0!==L.scale?L.scale:1,rotation:void 0!==L.rotation?L.rotation:0,rotateWithView:void 0!==L.rotateWithView&&L.rotateWithView,displacement:void 0!==L.displacement?L.displacement:[0,0],declutterMode:L.declutterMode})}clone(){const L=this.getScale(),M=new z({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(L)?L.slice():L,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return M.setOpacity(this.getOpacity()),M}setRadius(L){this.radius_=L,this.render()}}const Q=z},1540:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>$});var Y=s(2661),z=s(4155);class Q{constructor(M){M=M||{},this.patternImage_=null,this.color_=null,void 0!==M.color&&this.setColor(M.color)}clone(){const M=this.getColor();return new Q({color:Array.isArray(M)?M.slice():M||void 0})}getColor(){return this.color_}setColor(M){if(null!==M&&"object"==typeof M&&"src"in M){const w=(0,z.J)(null,M.src,"anonymous",void 0,M.offset?null:M.color?M.color:null,!(M.offset&&M.size));w.ready().then(()=>{this.patternImage_=null}),w.getImageState()===Y.A.IDLE&&w.load(),w.getImageState()===Y.A.LOADING&&(this.patternImage_=w)}this.color_=M}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const $=Q},5804:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>m});var Y=s(6621),z=s(2661),Q=s(7316),$=s(1962),L=s(5940),M=s(4155),w=s(2383);function I(u,o,i,l){return void 0!==i&&void 0!==l?[i/u,l/o]:void 0!==i?i/u:void 0!==l?l/o:1}class y extends Q.A{constructor(o){super({opacity:void 0!==(o=o||{}).opacity?o.opacity:1,rotation:void 0!==o.rotation?o.rotation:0,scale:void 0!==o.scale?o.scale:1,displacement:void 0!==o.displacement?o.displacement:[0,0],rotateWithView:void 0!==o.rotateWithView&&o.rotateWithView,declutterMode:o.declutterMode}),this.anchor_=void 0!==o.anchor?o.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==o.anchorOrigin?o.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==o.anchorXUnits?o.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==o.anchorYUnits?o.anchorYUnits:"fraction",this.crossOrigin_=void 0!==o.crossOrigin?o.crossOrigin:null;const f=void 0!==o.img?o.img:null;let C,r=o.src;if((0,L.v)(!(void 0!==r&&f),"`image` and `src` cannot be provided at the same time"),(void 0===r||0===r.length)&&f&&(r=f.src||(0,w.v6)(f)),(0,L.v)(void 0!==r&&r.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,L.v)(!((void 0!==o.width||void 0!==o.height)&&void 0!==o.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==o.src?C=z.A.IDLE:void 0!==f&&(C="complete"in f?f.complete?f.src?z.A.LOADED:z.A.IDLE:z.A.LOADING:z.A.LOADED),this.color_=void 0!==o.color?(0,$._j)(o.color):null,this.iconImage_=(0,M.J)(f,r,this.crossOrigin_,C,this.color_),this.offset_=void 0!==o.offset?o.offset:[0,0],this.offsetOrigin_=void 0!==o.offsetOrigin?o.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==o.size?o.size:null,void 0!==o.width||void 0!==o.height){let _,v;if(o.size)[_,v]=o.size;else{const F=this.getImage(1);if(F.width&&F.height)_=F.width,v=F.height;else if(F instanceof HTMLImageElement){this.initialOptions_=o;const O=()=>{if(this.unlistenImageChange(O),!this.initialOptions_)return;const X=this.iconImage_.getSize();this.setScale(I(X[0],X[1],o.width,o.height))};return void this.listenImageChange(O)}}void 0!==_&&this.setScale(I(_,v,o.width,o.height))}}clone(){let o,i,l;return this.initialOptions_?(i=this.initialOptions_.width,l=this.initialOptions_.height):(o=this.getScale(),o=Array.isArray(o)?o.slice():o),new y({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:o,width:i,height:l,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let o=this.normalizedAnchor_;if(!o){o=this.anchor_;const n=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!n)return null;o=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(o[0]*=n[0]),"fraction"==this.anchorYUnits_&&(o[1]*=n[1])}if("top-left"!=this.anchorOrigin_){if(!n)return null;o===this.anchor_&&(o=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(o[0]=-o[0]+n[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(o[1]=-o[1]+n[1])}this.normalizedAnchor_=o}const i=this.getDisplacement(),l=this.getScaleArray();return[o[0]-i[0]/l[0],o[1]+i[1]/l[1]]}setAnchor(o){this.anchor_=o,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(o){return this.iconImage_.getImage(o)}getPixelRatio(o){return this.iconImage_.getPixelRatio(o)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let o=this.offset_;if("top-left"!=this.offsetOrigin_){const i=this.getSize(),l=this.iconImage_.getSize();if(!i||!l)return null;o=o.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(o[0]=l[0]-i[0]-o[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(o[1]=l[1]-i[1]-o[1])}return this.origin_=o,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const o=this.getScaleArray();return this.size_?this.size_[0]*o[0]:this.iconImage_.getImageState()==z.A.LOADED?this.iconImage_.getSize()[0]*o[0]:void 0}getHeight(){const o=this.getScaleArray();return this.size_?this.size_[1]*o[1]:this.iconImage_.getImageState()==z.A.LOADED?this.iconImage_.getSize()[1]*o[1]:void 0}setScale(o){delete this.initialOptions_,super.setScale(o)}listenImageChange(o){this.iconImage_.addEventListener(Y.A.CHANGE,o)}load(){this.iconImage_.load()}unlistenImageChange(o){this.iconImage_.removeEventListener(Y.A.CHANGE,o)}ready(){return this.iconImage_.ready()}}const m=y},4155:(le,pt,s)=>{"use strict";s.d(pt,{J:()=>m});var Y=s(1884),z=s(6621),Q=s(2661),$=s(1962),L=s(5551),M=s(6490),w=s(1705);let I=null;class y extends Y.A{constructor(i,l,n,d,f){super(),this.hitDetectionImage_=null,this.image_=i,this.crossOrigin_=n,this.canvas_={},this.color_=f,this.imageState_=void 0===d?Q.A.IDLE:d,this.size_=i&&i.width&&i.height?[i.width,i.height]:null,this.src_=l,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===Q.A.LOADED){I||(I=(0,L.Y)(1,1,void 0,{willReadFrequently:!0})),I.drawImage(this.image_,0,0);try{I.getImageData(0,0,1,1),this.tainted_=!1}catch{I=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(z.A.CHANGE)}handleImageError_(){this.imageState_=Q.A.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Q.A.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(i){return this.image_||this.initializeImage_(),this.replaceColor_(i),this.canvas_[i]?this.canvas_[i]:this.image_}getPixelRatio(i){return this.replaceColor_(i),this.canvas_[i]?i:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const i=this.size_[0],l=this.size_[1],n=(0,L.Y)(i,l);n.fillRect(0,0,i,l),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Q.A.IDLE){this.image_||this.initializeImage_(),this.imageState_=Q.A.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,M.RA)(this.image_,this.src_).then(i=>{this.image_=i,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(i){if(!this.color_||this.canvas_[i]||this.imageState_!==Q.A.LOADED)return;const l=this.image_,n=document.createElement("canvas");n.width=Math.ceil(l.width*i),n.height=Math.ceil(l.height*i);const d=n.getContext("2d");d.scale(i,i),d.drawImage(l,0,0),d.globalCompositeOperation="multiply",d.fillStyle=(0,$.oJ)(this.color_),d.fillRect(0,0,n.width/i,n.height/i),d.globalCompositeOperation="destination-in",d.drawImage(l,0,0),this.canvas_[i]=n}ready(){return this.ready_||(this.ready_=new Promise(i=>{this.imageState_===Q.A.LOADED||this.imageState_===Q.A.ERROR?i():this.addEventListener(z.A.CHANGE,function l(){(this.imageState_===Q.A.LOADED||this.imageState_===Q.A.ERROR)&&(this.removeEventListener(z.A.CHANGE,l),i())})})),this.ready_}}function m(o,i,l,n,d,f){let r=void 0===i?void 0:w.ue.get(i,l,d);return r||(r=new y(o,o&&"src"in o?o.src||void 0:i,l,n,d),w.ue.set(i,l,d,r,f)),f&&r&&!w.ue.getPattern(i,l,d)&&w.ue.set(i,l,d,r,f),r}},1705:(le,pt,s)=>{"use strict";s.d(pt,{ue:()=>w});var Y=s(2661),z=s(1962),Q=s(5551);function L(I,y,m){return y+":"+I+":"+(m?(0,z._j)(m):"null")}const w=new class ${constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let y=0;for(const m in this.cache_)!(3&y++)&&!this.cache_[m].hasListener()&&(delete this.cache_[m],delete this.patternCache_[m],--this.cacheSize_)}}get(y,m,u){const o=L(y,m,u);return o in this.cache_?this.cache_[o]:null}getPattern(y,m,u){const o=L(y,m,u);return o in this.patternCache_?this.patternCache_[o]:null}set(y,m,u,o,i){const l=L(y,m,u),n=l in this.cache_;this.cache_[l]=o,i&&(o.getImageState()===Y.A.IDLE&&o.load(),o.getImageState()===Y.A.LOADING?o.ready().then(()=>{this.patternCache_[l]=(0,Q.lr)().createPattern(o.getImage(1),"repeat")}):this.patternCache_[l]=(0,Q.lr)().createPattern(o.getImage(1),"repeat")),n||++this.cacheSize_}setSize(y){this.maxCacheSize_=y,this.expire()}}},7316:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>$});var Y=s(2383),z=s(9270);class Q{constructor(M){this.opacity_=M.opacity,this.rotateWithView_=M.rotateWithView,this.rotation_=M.rotation,this.scale_=M.scale,this.scaleArray_=(0,z.xq)(M.scale),this.displacement_=M.displacement,this.declutterMode_=M.declutterMode}clone(){const M=this.getScale();return new Q({opacity:this.getOpacity(),scale:Array.isArray(M)?M.slice():M,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,Y.b0)()}getImage(M){return(0,Y.b0)()}getHitDetectionImage(){return(0,Y.b0)()}getPixelRatio(M){return 1}getImageState(){return(0,Y.b0)()}getImageSize(){return(0,Y.b0)()}getOrigin(){return(0,Y.b0)()}getSize(){return(0,Y.b0)()}setDisplacement(M){this.displacement_=M}setOpacity(M){this.opacity_=M}setRotateWithView(M){this.rotateWithView_=M}setRotation(M){this.rotation_=M}setScale(M){this.scale_=M,this.scaleArray_=(0,z.xq)(M)}listenImageChange(M){(0,Y.b0)()}load(){(0,Y.b0)()}unlistenImageChange(M){(0,Y.b0)()}ready(){return Promise.resolve()}}const $=Q},4960:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>I});var Y=s(2661),z=s(7316),Q=s(1962),$=s(2775),L=s(5551),M=s(2462);class w extends z.A{constructor(m){super({opacity:1,rotateWithView:void 0!==m.rotateWithView&&m.rotateWithView,rotation:void 0!==m.rotation?m.rotation:0,scale:void 0!==m.scale?m.scale:1,displacement:void 0!==m.displacement?m.displacement:[0,0],declutterMode:m.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==m.fill?m.fill:null,this.origin_=[0,0],this.points_=m.points,this.radius_=m.radius,this.radius2_=m.radius2,this.angle_=void 0!==m.angle?m.angle:0,this.stroke_=void 0!==m.stroke?m.stroke:null,this.imageState_=this.fill_&&this.fill_.loading()?Y.A.LOADING:Y.A.LOADED,this.imageState_===Y.A.LOADING&&this.ready().then(()=>this.imageState_=Y.A.LOADED),this.render()}clone(){const m=this.getScale(),u=new w({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(m)?m.slice():m,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return u.setOpacity(this.getOpacity()),u}getAnchor(){const m=this.size_,u=this.getDisplacement(),o=this.getScaleArray();return[m[0]/2-u[0]/o[0],m[1]/2+u[1]/o[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(m){this.fill_=m,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(m){let u=this.canvases_[m];if(!u){const o=this.renderOptions_,i=(0,L.Y)(o.size*m,o.size*m);this.draw_(o,i,m),u=i.canvas,this.canvases_[m]=u}return u}getPixelRatio(m){return m}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(m){this.stroke_=m,this.render()}listenImageChange(m){}load(){}unlistenImageChange(m){}calculateLineJoinSize_(m,u,o){if(0===u||this.points_===1/0||"bevel"!==m&&"miter"!==m)return u;let i=this.radius_,l=void 0===this.radius2_?i:this.radius2_;if(i<l){const R=i;i=l,l=R}const d=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),f=l*Math.sin(d),C=i-Math.sqrt(l*l-f*f),_=Math.sqrt(f*f+C*C),v=_/f;if("miter"===m&&v<=o)return v*u;const F=u/2/v,O=u/2*(C/_),P=Math.sqrt((i+F)*(i+F)+O*O)-i;if(void 0===this.radius2_||"bevel"===m)return 2*P;const E=i*Math.sin(d),Z=l-Math.sqrt(i*i-E*E),D=Math.sqrt(E*E+Z*Z)/E;return D<=o?2*Math.max(P,D*u/2-l-i):2*P}createRenderOptions(){let n,m=M._m,u=M._K,o=0,i=null,l=0,d=0;this.stroke_&&(n=(0,$.F)(this.stroke_.getColor()??M.NT),d=this.stroke_.getWidth()??M.aq,i=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset()??0,u=this.stroke_.getLineJoin()??M._K,m=this.stroke_.getLineCap()??M._m,o=this.stroke_.getMiterLimit()??M.eL);const f=this.calculateLineJoinSize_(u,d,o),r=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:n,strokeWidth:d,size:Math.ceil(2*r+f),lineCap:m,lineDash:i,lineDashOffset:l,lineJoin:u,miterLimit:o}}render(){this.renderOptions_=this.createRenderOptions();const m=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[m,m]}draw_(m,u,o){if(u.scale(o,o),u.translate(m.size/2,m.size/2),this.createPath_(u),this.fill_){let i=this.fill_.getColor();null===i&&(i=M.qY),u.fillStyle=(0,$.F)(i),u.fill()}m.strokeStyle&&(u.strokeStyle=m.strokeStyle,u.lineWidth=m.strokeWidth,m.lineDash&&(u.setLineDash(m.lineDash),u.lineDashOffset=m.lineDashOffset),u.lineCap=m.lineCap,u.lineJoin=m.lineJoin,u.miterLimit=m.miterLimit,u.stroke())}createHitDetectionCanvas_(m){let u;if(this.fill_){let o=this.fill_.getColor(),i=0;"string"==typeof o&&(o=(0,Q._j)(o)),null===o?i=1:Array.isArray(o)&&(i=4===o.length?o[3]:1),0===i&&(u=(0,L.Y)(m.size,m.size),this.drawHitDetectionCanvas_(m,u))}return u?u.canvas:this.getImage(1)}createPath_(m){let u=this.points_;const o=this.radius_;if(u===1/0)m.arc(0,0,o,0,2*Math.PI);else{const i=void 0===this.radius2_?o:this.radius2_;void 0!==this.radius2_&&(u*=2);const l=this.angle_-Math.PI/2,n=2*Math.PI/u;for(let d=0;d<u;d++){const f=l+d*n,r=d%2==0?o:i;m.lineTo(r*Math.cos(f),r*Math.sin(f))}m.closePath()}}drawHitDetectionCanvas_(m,u){u.translate(m.size/2,m.size/2),this.createPath_(u),u.fillStyle=M.qY,u.fill(),m.strokeStyle&&(u.strokeStyle=m.strokeStyle,u.lineWidth=m.strokeWidth,m.lineDash&&(u.setLineDash(m.lineDash),u.lineDashOffset=m.lineDashOffset),u.lineJoin=m.lineJoin,u.miterLimit=m.miterLimit,u.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const I=w},5409:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>z});class Y{constructor($){this.color_=void 0!==($=$||{}).color?$.color:null,this.lineCap_=$.lineCap,this.lineDash_=void 0!==$.lineDash?$.lineDash:null,this.lineDashOffset_=$.lineDashOffset,this.lineJoin_=$.lineJoin,this.miterLimit_=$.miterLimit,this.width_=$.width}clone(){const $=this.getColor();return new Y({color:Array.isArray($)?$.slice():$||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor($){this.color_=$}setLineCap($){this.lineCap_=$}setLineDash($){this.lineDash_=$}setLineDashOffset($){this.lineDashOffset_=$}setLineJoin($){this.lineJoin_=$}setMiterLimit($){this.miterLimit_=$}setWidth($){this.width_=$}}const z=Y},9380:(le,pt,s)=>{"use strict";s.d(pt,{Ay:()=>u,d1:()=>I,mC:()=>M});var Y=s(221),z=s(1540),Q=s(5409),$=s(5940);class L{constructor(i){i=i||{},this.geometry_=null,this.geometryFunction_=m,void 0!==i.geometry&&this.setGeometry(i.geometry),this.fill_=void 0!==i.fill?i.fill:null,this.image_=void 0!==i.image?i.image:null,this.renderer_=void 0!==i.renderer?i.renderer:null,this.hitDetectionRenderer_=void 0!==i.hitDetectionRenderer?i.hitDetectionRenderer:null,this.stroke_=void 0!==i.stroke?i.stroke:null,this.text_=void 0!==i.text?i.text:null,this.zIndex_=i.zIndex}clone(){let i=this.getGeometry();return i&&"object"==typeof i&&(i=i.clone()),new L({geometry:i??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(i){this.renderer_=i}setHitDetectionRenderer(i){this.hitDetectionRenderer_=i}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(i){this.fill_=i}getImage(){return this.image_}setImage(i){this.image_=i}getStroke(){return this.stroke_}setStroke(i){this.stroke_=i}getText(){return this.text_}setText(i){this.text_=i}getZIndex(){return this.zIndex_}setGeometry(i){"function"==typeof i?this.geometryFunction_=i:"string"==typeof i?this.geometryFunction_=function(l){return l.get(i)}:i?void 0!==i&&(this.geometryFunction_=function(){return i}):this.geometryFunction_=m,this.geometry_=i}setZIndex(i){this.zIndex_=i}}function M(o){let i;if("function"==typeof o)i=o;else{let l;Array.isArray(o)?l=o:((0,$.v)("function"==typeof o.getZIndex,"Expected an `Style` or an array of `Style`"),l=[o]),i=function(){return l}}return i}let w=null;function I(o,i){if(!w){const l=new z.A({color:"rgba(255,255,255,0.4)"}),n=new Q.A({color:"#3399CC",width:1.25});w=[new L({image:new Y.A({fill:l,stroke:n,radius:5}),fill:l,stroke:n})]}return w}function m(o){return o.getGeometry()}const u=L},730:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>L});var Y=s(1540),z=s(9270);class ${constructor(w){this.font_=(w=w||{}).font,this.rotation_=w.rotation,this.rotateWithView_=w.rotateWithView,this.scale_=w.scale,this.scaleArray_=(0,z.xq)(void 0!==w.scale?w.scale:1),this.text_=w.text,this.textAlign_=w.textAlign,this.justify_=w.justify,this.repeat_=w.repeat,this.textBaseline_=w.textBaseline,this.fill_=void 0!==w.fill?w.fill:new Y.A({color:"#333"}),this.maxAngle_=void 0!==w.maxAngle?w.maxAngle:Math.PI/4,this.placement_=void 0!==w.placement?w.placement:"point",this.overflow_=!!w.overflow,this.stroke_=void 0!==w.stroke?w.stroke:null,this.offsetX_=void 0!==w.offsetX?w.offsetX:0,this.offsetY_=void 0!==w.offsetY?w.offsetY:0,this.backgroundFill_=w.backgroundFill?w.backgroundFill:null,this.backgroundStroke_=w.backgroundStroke?w.backgroundStroke:null,this.padding_=void 0===w.padding?null:w.padding,this.declutterMode_=w.declutterMode}clone(){const w=this.getScale();return new $({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(w)?w.slice():w,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(w){this.overflow_=w}setFont(w){this.font_=w}setMaxAngle(w){this.maxAngle_=w}setOffsetX(w){this.offsetX_=w}setOffsetY(w){this.offsetY_=w}setPlacement(w){this.placement_=w}setRepeat(w){this.repeat_=w}setRotateWithView(w){this.rotateWithView_=w}setFill(w){this.fill_=w}setRotation(w){this.rotation_=w}setScale(w){this.scale_=w,this.scaleArray_=(0,z.xq)(void 0!==w?w:1)}setStroke(w){this.stroke_=w}setText(w){this.text_=w}setTextAlign(w){this.textAlign_=w}setJustify(w){this.justify_=w}setTextBaseline(w){this.textBaseline_=w}setBackgroundFill(w){this.backgroundFill_=w}setBackgroundStroke(w){this.backgroundStroke_=w}setPadding(w){this.padding_=w}}const L=$},6690:(le,pt,s)=>{"use strict";function Y(I,y,m,u){return void 0!==u?(u[0]=I,u[1]=y,u[2]=m,u):[I,y,m]}function z(I,y,m){return I+"/"+y+"/"+m}function Q(I){return z(I[0],I[1],I[2])}function $(I){const[y,m,u]=I.substring(I.lastIndexOf("/")+1,I.length).split(",").map(Number);return z(y,m,u)}function L(I){return I.split("/").map(Number)}function M(I){return(I[1]<<I[0])+I[2]}function w(I,y){const m=I[0],u=I[1],o=I[2];if(y.getMinZoom()>m||m>y.getMaxZoom())return!1;const i=y.getFullTileRange(m);return!i||i.containsXY(u,o)}s.d(pt,{K:()=>L,N:()=>Y,N5:()=>w,dp:()=>z,gr:()=>$,i7:()=>Q,tW:()=>M})},6151:(le,pt,s)=>{"use strict";s.d(pt,{EN:()=>y,Li:()=>w,kZ:()=>o,pr:()=>M});var Y=s(5534),z=s(3139),Q=s(9325),$=s(8507),L=s(9270);function M(i){let l=i.getDefaultTileGrid();return l||(l=function u(i,l,n,d){return function I(i,l,n,d){d=void 0!==d?d:"top-left";const f=m(i,l,n);return new Y.A({extent:i,origin:(0,$.qF)(i,d),resolutions:f,tileSize:n})}(o(i),l,n,d)}(i),i.setDefaultTileGrid(l)),l}function w(i,l,n){const d=l[0],f=i.getTileCoordCenter(l),r=o(n);if(!(0,$.Ym)(r,f)){const C=(0,$.RG)(r),_=Math.ceil((r[0]-f[0])/C);return f[0]+=C*_,i.getTileCoordForCoordAndZ(f,d)}return l}function y(i){const l=i||{},n=l.extent||(0,Q.Jt)("EPSG:3857").getExtent(),d={extent:n,minZoom:l.minZoom,tileSize:l.tileSize,resolutions:m(n,l.maxZoom,l.tileSize,l.maxResolution)};return new Y.A(d)}function m(i,l,n,d){l=void 0!==l?l:z.L,n=(0,L.xq)(void 0!==n?n:z.R);const f=(0,$.Oq)(i),r=(0,$.RG)(i);d=d>0?d:Math.max(r/n[0],f/n[1]);const C=l+1,_=new Array(C);for(let v=0;v<C;++v)_[v]=d/Math.pow(2,v);return _}function o(i){let l=(i=(0,Q.Jt)(i)).getExtent();if(!l){const n=180*Q.Ig.degrees/i.getMetersPerUnit();l=(0,$.N)(-n,-n,n,n)}return l}},5534:(le,pt,s)=>{"use strict";s.d(pt,{A:()=>i});var Y=s(6990),z=s(3139),Q=s(5940),$=s(9973),L=s(8507),M=s(6690),w=s(9542),I=s(2058),y=s(9270);const m=[0,0,0],i=class o{constructor(n){let d;if(this.minZoom=void 0!==n.minZoom?n.minZoom:0,this.resolutions_=n.resolutions,(0,Q.v)((0,I.WC)(this.resolutions_,(r,C)=>C-r,!0),"`resolutions` must be sorted in descending order"),!n.origins)for(let r=0,C=this.resolutions_.length-1;r<C;++r)if(d){if(this.resolutions_[r]/this.resolutions_[r+1]!==d){d=void 0;break}}else d=this.resolutions_[r]/this.resolutions_[r+1];this.zoomFactor_=d,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==n.origin?n.origin:null,this.origins_=null,void 0!==n.origins&&(this.origins_=n.origins,(0,Q.v)(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const f=n.extent;void 0!==f&&!this.origin_&&!this.origins_&&(this.origin_=(0,L.Py)(f)),(0,Q.v)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==n.tileSizes&&(this.tileSizes_=n.tileSizes,(0,Q.v)(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==n.tileSize?n.tileSize:this.tileSizes_?null:z.R,(0,Q.v)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==f?f:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==n.sizes?this.fullTileRanges_=n.sizes.map((r,C)=>{const _=new Y.A(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(f){const v=this.getTileRangeForExtentAndZ(f,C);_.minX=Math.max(v.minX,_.minX),_.maxX=Math.min(v.maxX,_.maxX),_.minY=Math.max(v.minY,_.minY),_.maxY=Math.min(v.maxY,_.maxY)}return _}):f&&this.calculateTileRanges_(f)}forEachTileCoord(n,d,f){const r=this.getTileRangeForExtentAndZ(n,d);for(let C=r.minX,_=r.maxX;C<=_;++C)for(let v=r.minY,F=r.maxY;v<=F;++v)f([d,C,v])}forEachTileCoordParentTileRange(n,d,f,r){let C,_,v,F=null,O=n[0]-1;for(2===this.zoomFactor_?(_=n[1],v=n[2]):F=this.getTileCoordExtent(n,r);O>=this.minZoom;){if(void 0!==_&&void 0!==v?(_=Math.floor(_/2),v=Math.floor(v/2),C=(0,Y.N)(_,_,v,v,f)):C=this.getTileRangeForExtentAndZ(F,O,f),d(O,C))return!0;--O}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(n){return this.origin_?this.origin_:this.origins_[n]}getResolution(n){return this.resolutions_[n]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(n,d,f){if(n[0]<this.maxZoom){if(2===this.zoomFactor_){const C=2*n[1],_=2*n[2];return(0,Y.N)(C,C+1,_,_+1,d)}const r=this.getTileCoordExtent(n,f||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,n[0]+1,d)}return null}getTileRangeForTileCoordAndZ(n,d,f){if(d>this.maxZoom||d<this.minZoom)return null;const r=n[0],C=n[1],_=n[2];if(d===r)return(0,Y.N)(C,_,C,_,f);if(this.zoomFactor_){const F=Math.pow(this.zoomFactor_,d-r),O=Math.floor(C*F),X=Math.floor(_*F);if(d<r)return(0,Y.N)(O,O,X,X,f);const P=Math.floor(F*(C+1))-1,E=Math.floor(F*(_+1))-1;return(0,Y.N)(O,P,X,E,f)}const v=this.getTileCoordExtent(n,this.tmpExtent_);return this.getTileRangeForExtentAndZ(v,d,f)}getTileRangeForExtentAndZ(n,d,f){this.getTileCoordForXYAndZ_(n[0],n[3],d,!1,m);const r=m[1],C=m[2];return this.getTileCoordForXYAndZ_(n[2],n[1],d,!0,m),(0,Y.N)(r,m[1],C,m[2],f)}getTileCoordCenter(n){const d=this.getOrigin(n[0]),f=this.getResolution(n[0]),r=(0,y.xq)(this.getTileSize(n[0]),this.tmpSize_);return[d[0]+(n[1]+.5)*r[0]*f,d[1]-(n[2]+.5)*r[1]*f]}getTileCoordExtent(n,d){const f=this.getOrigin(n[0]),r=this.getResolution(n[0]),C=(0,y.xq)(this.getTileSize(n[0]),this.tmpSize_),_=f[0]+n[1]*C[0]*r,v=f[1]-(n[2]+1)*C[1]*r;return(0,L.N)(_,v,_+C[0]*r,v+C[1]*r,d)}getTileCoordForCoordAndResolution(n,d,f){return this.getTileCoordForXYAndResolution_(n[0],n[1],d,!1,f)}getTileCoordForXYAndResolution_(n,d,f,r,C){const _=this.getZForResolution(f),v=f/this.getResolution(_),F=this.getOrigin(_),O=(0,y.xq)(this.getTileSize(_),this.tmpSize_);let X=v*(n-F[0])/f/O[0],P=v*(F[1]-d)/f/O[1];return r?(X=(0,$.mk)(X,5)-1,P=(0,$.mk)(P,5)-1):(X=(0,$.RI)(X,5),P=(0,$.RI)(P,5)),(0,M.N)(_,X,P,C)}getTileCoordForXYAndZ_(n,d,f,r,C){const _=this.getOrigin(f),v=this.getResolution(f),F=(0,y.xq)(this.getTileSize(f),this.tmpSize_);let O=(n-_[0])/v/F[0],X=(_[1]-d)/v/F[1];return r?(O=(0,$.mk)(O,5)-1,X=(0,$.mk)(X,5)-1):(O=(0,$.RI)(O,5),X=(0,$.RI)(X,5)),(0,M.N)(f,O,X,C)}getTileCoordForCoordAndZ(n,d,f){return this.getTileCoordForXYAndZ_(n[0],n[1],d,!1,f)}getTileCoordResolution(n){return this.resolutions_[n[0]]}getTileSize(n){return this.tileSize_?this.tileSize_:this.tileSizes_[n]}getFullTileRange(n){return this.fullTileRanges_?this.fullTileRanges_[n]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,n):null}getZForResolution(n,d){const f=(0,I.FT)(this.resolutions_,n,d||0);return(0,$.qE)(f,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(n,d){return(0,w.sj)(d,0,d.length,2,this.getTileCoordExtent(n))}calculateTileRanges_(n){const d=this.resolutions_.length,f=new Array(d);for(let r=this.minZoom;r<d;++r)f[r]=this.getTileRangeForExtentAndZ(n,r);this.fullTileRanges_=f}}},3139:(le,pt,s)=>{"use strict";s.d(pt,{L:()=>Y,R:()=>z});const Y=42,z=256},454:(le,pt,s)=>{"use strict";s.d(pt,{FD:()=>L,Qz:()=>$,Uu:()=>w});var Y=s(9973),z=s(6690);function Q(I,y){const m=/\{z\}/g,u=/\{x\}/g,o=/\{y\}/g,i=/\{-y\}/g;return function(l,n,d){if(l)return I.replace(m,l[0].toString()).replace(u,l[1].toString()).replace(o,l[2].toString()).replace(i,function(){const r=y.getFullTileRange(l[0]);if(!r)throw new Error("The {-y} placeholder requires a tile grid with extent");return(r.getHeight()-l[2]-1).toString()})}}function $(I,y){const m=I.length,u=new Array(m);for(let o=0;o<m;++o)u[o]=Q(I[o],y);return L(u)}function L(I){return 1===I.length?I[0]:function(y,m,u){if(!y)return;const o=(0,z.tW)(y),i=(0,Y.xP)(o,I.length);return I[i](y,m,u)}}function w(I){const y=[];let m=/\{([a-z])-([a-z])\}/.exec(I);if(m){const u=m[1].charCodeAt(0),o=m[2].charCodeAt(0);let i;for(i=u;i<=o;++i)y.push(I.replace(m[0],String.fromCharCode(i)));return y}if(m=/\{(\d+)-(\d+)\}/.exec(I),m){const u=parseInt(m[2],10);for(let o=parseInt(m[1],10);o<=u;o++)y.push(I.replace(m[0],o.toString()));return y}return y.push(I),y}},1983:(le,pt,s)=>{"use strict";s.d(pt,{Bb:()=>I,T9:()=>d,Tl:()=>o,Zz:()=>i,cL:()=>$,dI:()=>C,e$:()=>y,hs:()=>m,k3:()=>w,lw:()=>L,vt:()=>Q});var Y=s(5940);const z=new Array(6);function Q(){return[1,0,0,1,0,0]}function $(_){return M(_,1,0,0,1,0,0)}function L(_,v){const F=_[0],O=_[1],X=_[2],P=_[3],E=_[4],W=_[5],Z=v[0],A=v[1],D=v[2],R=v[3],x=v[4],T=v[5];return _[0]=F*Z+X*A,_[1]=O*Z+P*A,_[2]=F*D+X*R,_[3]=O*D+P*R,_[4]=F*x+X*T+E,_[5]=O*x+P*T+W,_}function M(_,v,F,O,X,P,E){return _[0]=v,_[1]=F,_[2]=O,_[3]=X,_[4]=P,_[5]=E,_}function w(_,v){return _[0]=v[0],_[1]=v[1],_[2]=v[2],_[3]=v[3],_[4]=v[4],_[5]=v[5],_}function I(_,v){const F=v[0],O=v[1];return v[0]=_[0]*F+_[2]*O+_[4],v[1]=_[1]*F+_[3]*O+_[5],v}function y(_,v){const F=Math.cos(v),O=Math.sin(v);return L(_,M(z,F,O,-O,F,0,0))}function m(_,v,F){return L(_,M(z,v,0,0,F,0,0))}function o(_,v,F){return L(_,M(z,1,0,0,1,v,F))}function i(_,v,F,O,X,P,E,W){const Z=Math.sin(P),A=Math.cos(P);return _[0]=O*A,_[1]=X*Z,_[2]=-O*Z,_[3]=X*A,_[4]=E*O*A-W*O*Z+v,_[5]=E*X*Z+W*X*A+F,_}function d(_,v){const F=function f(_){return _[0]*_[3]-_[1]*_[2]}(v);(0,Y.v)(0!==F,"Transformation matrix cannot be inverted");const O=v[0],X=v[1],P=v[2],E=v[3],W=v[4],Z=v[5];return _[0]=E/F,_[1]=-X/F,_[2]=-P/F,_[3]=O/F,_[4]=(P*Z-E*W)/F,_[5]=-(O*Z-X*W)/F,_}const r=[1e6,1e6,1e6,1e6,2,2];function C(_){return"matrix("+_.map((F,O)=>Math.round(F*r[O])/r[O]).join(", ")+")"}},4873:(le,pt,s)=>{"use strict";function Y(z,Q){const $=[];Object.keys(Q).forEach(function(M){null!=Q[M]&&$.push(M+"="+encodeURIComponent(Q[M]))});const L=$.join("&");return z=z.replace(/[?&]$/,""),(z+=z.includes("?")?"&":"?")+L}s.d(pt,{L:()=>Y})},2383:(le,pt,s)=>{"use strict";function Y(){throw new Error("Unimplemented abstract method.")}s.d(pt,{b0:()=>Y,v6:()=>Q});let z=0;function Q(L){return L.ol_uid||(L.ol_uid=String(++z))}},3566:(le,pt,s)=>{"use strict";s.d(pt,{Dm:()=>C,Gl:()=>r,NQ:()=>O,OL:()=>f,Tb:()=>u,UN:()=>_,VT:()=>m,Vh:()=>y,X1:()=>d,YE:()=>A,c4:()=>o,eY:()=>v,kW:()=>i,mT:()=>$,mc:()=>E,mm:()=>l,pF:()=>z,qg:()=>I,qq:()=>Q,wz:()=>M});var Y=s(2058);const z="http://www.w3.org/2001/XMLSchema-instance";function Q(D,R){return A().createElementNS(D,R)}function $(D,R){return L(D,R,[]).join("")}function L(D,R,x){if(D.nodeType==Node.CDATA_SECTION_NODE||D.nodeType==Node.TEXT_NODE)x.push(R?String(D.nodeValue).replace(/(\r\n|\r|\n)/g,""):D.nodeValue);else{let T;for(T=D.firstChild;T;T=T.nextSibling)L(T,R,x)}return x}function M(D){return"documentElement"in D}function I(D){return(new DOMParser).parseFromString(D,"application/xml")}function y(D,R){return function(x,T){const U=D.call(void 0!==R?R:this,x,T);void 0!==U&&(0,Y.X$)(T[T.length-1],U)}}function m(D,R){return function(x,T){const U=D.call(void 0!==R?R:this,x,T);void 0!==U&&T[T.length-1].push(U)}}function u(D,R){return function(x,T){const U=D.call(void 0!==R?R:this,x,T);void 0!==U&&(T[T.length-1]=U)}}function o(D,R,x){return function(T,U){const tt=D.call(void 0!==x?x:this,T,U);if(void 0!==tt){const it=U[U.length-1],J=void 0!==R?R:T.localName;let ht;J in it?ht=it[J]:(ht=[],it[J]=ht),ht.push(tt)}}}function i(D,R,x){return function(T,U){const tt=D.call(void 0!==x?x:this,T,U);void 0!==tt&&(U[U.length-1][void 0!==R?R:T.localName]=tt)}}function l(D,R){return function(x,T,U){D.call(void 0!==R?R:this,x,T,U),U[U.length-1].node.appendChild(x)}}function d(D,R){return function(x,T,U){let J=D;return void 0===J&&(J=U),Q(void 0!==R?R:T[T.length-1].node.namespaceURI,J)}}const f=d();function r(D,R){const x=R.length,T=new Array(x);for(let U=0;U<x;++U)T[U]=D[R[U]];return T}function C(D,R,x){let T,U;for(x=void 0!==x?x:{},T=0,U=D.length;T<U;++T)x[D[T]]=R;return x}function _(D,R,x,T){let U;for(U=R.firstElementChild;U;U=U.nextElementSibling){const tt=D[U.namespaceURI];if(void 0!==tt){const it=tt[U.localName];void 0!==it&&it.call(T,U,x)}}}function v(D,R,x,T,U){return T.push(D),_(R,x,T,U),T.pop()}function O(D,R,x,T,U,tt,it){return U.push(D),function F(D,R,x,T,U,tt){const it=(void 0!==U?U:x).length;let J,ht;for(let mt=0;mt<it;++mt)J=x[mt],void 0!==J&&(ht=R.call(void 0!==tt?tt:this,J,T,void 0!==U?U[mt]:void 0),void 0!==ht&&D[ht.namespaceURI][ht.localName].call(tt,ht,J,T))}(R,x,T,U,tt,it),U.pop()}let X,W;function E(){return void 0===X&&typeof XMLSerializer<"u"&&(X=new XMLSerializer),X}function A(){return void 0===W&&typeof document<"u"&&(W=document.implementation.createDocument("","",null)),W}}}]);