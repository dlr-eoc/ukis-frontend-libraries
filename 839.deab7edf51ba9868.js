(self.webpackChunkdemo_maps=self.webpackChunkdemo_maps||[]).push([[839],{2658:(Vt,gt)=>{gt.read=function(r,_,g,Q,H){var j,N,w=8*H-Q-1,S=(1<<w)-1,v=S>>1,h=-7,c=g?H-1:0,u=g?-1:1,s=r[_+c];for(c+=u,j=s&(1<<-h)-1,s>>=-h,h+=w;h>0;j=256*j+r[_+c],c+=u,h-=8);for(N=j&(1<<-h)-1,j>>=-h,h+=Q;h>0;N=256*N+r[_+c],c+=u,h-=8);if(0===j)j=1-v;else{if(j===S)return N?NaN:1/0*(s?-1:1);N+=Math.pow(2,Q),j-=v}return(s?-1:1)*N*Math.pow(2,j-Q)},gt.write=function(r,_,g,Q,H,j){var N,w,S,v=8*j-H-1,h=(1<<v)-1,c=h>>1,u=23===H?Math.pow(2,-24)-Math.pow(2,-77):0,s=Q?0:j-1,f=Q?1:-1,i=_<0||0===_&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(w=isNaN(_)?1:0,N=h):(N=Math.floor(Math.log(_)/Math.LN2),_*(S=Math.pow(2,-N))<1&&(N--,S*=2),(_+=N+c>=1?u/S:u*Math.pow(2,1-c))*S>=2&&(N++,S/=2),N+c>=h?(w=0,N=h):N+c>=1?(w=(_*S-1)*Math.pow(2,H),N+=c):(w=_*Math.pow(2,c-1)*Math.pow(2,H),N=0));H>=8;r[g+s]=255&w,s+=f,w/=256,H-=8);for(N=N<<H|w,v+=H;v>0;r[g+s]=255&N,s+=f,N/=256,v-=8);r[g+s-f]|=128*i}},6697:(Vt,gt,r)=>{"use strict";Vt.exports=g;var _=r(2658);function g(B){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(B)?B:new Uint8Array(B||0),this.pos=0,this.type=0,this.length=this.buf.length}g.Varint=0,g.Fixed64=1,g.Bytes=2,g.Fixed32=5;var Q=4294967296,H=1/Q,N=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function S(B){return B.type===g.Bytes?B.readVarint()+B.pos:B.pos+1}function s(B,k,L){var p=k<=16383?1:k<=2097151?2:k<=268435455?3:Math.floor(Math.log(k)/(7*Math.LN2));L.realloc(p);for(var M=L.pos-1;M>=B;M--)L.buf[M+p]=L.buf[M]}function f(B,k){for(var L=0;L<B.length;L++)k.writeVarint(B[L])}function i(B,k){for(var L=0;L<B.length;L++)k.writeSVarint(B[L])}function l(B,k){for(var L=0;L<B.length;L++)k.writeFloat(B[L])}function m(B,k){for(var L=0;L<B.length;L++)k.writeDouble(B[L])}function e(B,k){for(var L=0;L<B.length;L++)k.writeBoolean(B[L])}function P(B,k){for(var L=0;L<B.length;L++)k.writeFixed32(B[L])}function x(B,k){for(var L=0;L<B.length;L++)k.writeSFixed32(B[L])}function T(B,k){for(var L=0;L<B.length;L++)k.writeFixed64(B[L])}function U(B,k){for(var L=0;L<B.length;L++)k.writeSFixed64(B[L])}function D(B,k){return(B[k]|B[k+1]<<8|B[k+2]<<16)+16777216*B[k+3]}function C(B,k,L){B[L]=k,B[L+1]=k>>>8,B[L+2]=k>>>16,B[L+3]=k>>>24}function O(B,k){return(B[k]|B[k+1]<<8|B[k+2]<<16)+(B[k+3]<<24)}g.prototype={destroy:function(){this.buf=null},readFields:function(B,k,L){for(L=L||this.length;this.pos<L;){var p=this.readVarint(),M=p>>3,R=this.pos;this.type=7&p,B(M,k,this),this.pos===R&&this.skip(p)}return k},readMessage:function(B,k){return this.readFields(B,k,this.readVarint()+this.pos)},readFixed32:function(){var B=D(this.buf,this.pos);return this.pos+=4,B},readSFixed32:function(){var B=O(this.buf,this.pos);return this.pos+=4,B},readFixed64:function(){var B=D(this.buf,this.pos)+D(this.buf,this.pos+4)*Q;return this.pos+=8,B},readSFixed64:function(){var B=D(this.buf,this.pos)+O(this.buf,this.pos+4)*Q;return this.pos+=8,B},readFloat:function(){var B=_.read(this.buf,this.pos,!0,23,4);return this.pos+=4,B},readDouble:function(){var B=_.read(this.buf,this.pos,!0,52,8);return this.pos+=8,B},readVarint:function(B){var L,p,k=this.buf;return L=127&(p=k[this.pos++]),p<128||(L|=(127&(p=k[this.pos++]))<<7,p<128)||(L|=(127&(p=k[this.pos++]))<<14,p<128)||(L|=(127&(p=k[this.pos++]))<<21,p<128)?L:function w(B,k,L){var M,R,p=L.buf;if(M=(112&(R=p[L.pos++]))>>4,R<128||(M|=(127&(R=p[L.pos++]))<<3,R<128)||(M|=(127&(R=p[L.pos++]))<<10,R<128)||(M|=(127&(R=p[L.pos++]))<<17,R<128)||(M|=(127&(R=p[L.pos++]))<<24,R<128)||(M|=(1&(R=p[L.pos++]))<<31,R<128))return function v(B,k,L){return L?4294967296*k+(B>>>0):4294967296*(k>>>0)+(B>>>0)}(B,M,k);throw new Error("Expected varint not more than 10 bytes")}(L|=(15&(p=k[this.pos]))<<28,B,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var B=this.readVarint();return B%2==1?(B+1)/-2:B/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var B=this.readVarint()+this.pos,k=this.pos;return this.pos=B,B-k>=12&&N?function $(B,k,L){return N.decode(B.subarray(k,L))}(this.buf,k,B):function X(B,k,L){for(var p="",M=k;M<L;){var J,q,ut,R=B[M],K=null,G=R>239?4:R>223?3:R>191?2:1;if(M+G>L)break;1===G?R<128&&(K=R):2===G?128==(192&(J=B[M+1]))&&(K=(31&R)<<6|63&J)<=127&&(K=null):3===G?(q=B[M+2],128==(192&(J=B[M+1]))&&128==(192&q)&&((K=(15&R)<<12|(63&J)<<6|63&q)<=2047||K>=55296&&K<=57343)&&(K=null)):4===G&&(q=B[M+2],ut=B[M+3],128==(192&(J=B[M+1]))&&128==(192&q)&&128==(192&ut)&&((K=(15&R)<<18|(63&J)<<12|(63&q)<<6|63&ut)<=65535||K>=1114112)&&(K=null)),null===K?(K=65533,G=1):K>65535&&(K-=65536,p+=String.fromCharCode(K>>>10&1023|55296),K=56320|1023&K),p+=String.fromCharCode(K),M+=G}return p}(this.buf,k,B)},readBytes:function(){var B=this.readVarint()+this.pos,k=this.buf.subarray(this.pos,B);return this.pos=B,k},readPackedVarint:function(B,k){if(this.type!==g.Bytes)return B.push(this.readVarint(k));var L=S(this);for(B=B||[];this.pos<L;)B.push(this.readVarint(k));return B},readPackedSVarint:function(B){if(this.type!==g.Bytes)return B.push(this.readSVarint());var k=S(this);for(B=B||[];this.pos<k;)B.push(this.readSVarint());return B},readPackedBoolean:function(B){if(this.type!==g.Bytes)return B.push(this.readBoolean());var k=S(this);for(B=B||[];this.pos<k;)B.push(this.readBoolean());return B},readPackedFloat:function(B){if(this.type!==g.Bytes)return B.push(this.readFloat());var k=S(this);for(B=B||[];this.pos<k;)B.push(this.readFloat());return B},readPackedDouble:function(B){if(this.type!==g.Bytes)return B.push(this.readDouble());var k=S(this);for(B=B||[];this.pos<k;)B.push(this.readDouble());return B},readPackedFixed32:function(B){if(this.type!==g.Bytes)return B.push(this.readFixed32());var k=S(this);for(B=B||[];this.pos<k;)B.push(this.readFixed32());return B},readPackedSFixed32:function(B){if(this.type!==g.Bytes)return B.push(this.readSFixed32());var k=S(this);for(B=B||[];this.pos<k;)B.push(this.readSFixed32());return B},readPackedFixed64:function(B){if(this.type!==g.Bytes)return B.push(this.readFixed64());var k=S(this);for(B=B||[];this.pos<k;)B.push(this.readFixed64());return B},readPackedSFixed64:function(B){if(this.type!==g.Bytes)return B.push(this.readSFixed64());var k=S(this);for(B=B||[];this.pos<k;)B.push(this.readSFixed64());return B},skip:function(B){var k=7&B;if(k===g.Varint)for(;this.buf[this.pos++]>127;);else if(k===g.Bytes)this.pos=this.readVarint()+this.pos;else if(k===g.Fixed32)this.pos+=4;else{if(k!==g.Fixed64)throw new Error("Unimplemented type: "+k);this.pos+=8}},writeTag:function(B,k){this.writeVarint(B<<3|k)},realloc:function(B){for(var k=this.length||16;k<this.pos+B;)k*=2;if(k!==this.length){var L=new Uint8Array(k);L.set(this.buf),this.buf=L,this.length=k}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(B){this.realloc(4),C(this.buf,B,this.pos),this.pos+=4},writeSFixed32:function(B){this.realloc(4),C(this.buf,B,this.pos),this.pos+=4},writeFixed64:function(B){this.realloc(8),C(this.buf,-1&B,this.pos),C(this.buf,Math.floor(B*H),this.pos+4),this.pos+=8},writeSFixed64:function(B){this.realloc(8),C(this.buf,-1&B,this.pos),C(this.buf,Math.floor(B*H),this.pos+4),this.pos+=8},writeVarint:function(B){(B=+B||0)>268435455||B<0?function h(B,k){var L,p;if(B>=0?(L=B%4294967296|0,p=B/4294967296|0):(p=~(-B/4294967296),4294967295^(L=~(-B%4294967296))?L=L+1|0:(L=0,p=p+1|0)),B>=0x10000000000000000||B<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");k.realloc(10),function c(B,k,L){L.buf[L.pos++]=127&B|128,B>>>=7,L.buf[L.pos++]=127&B|128,B>>>=7,L.buf[L.pos++]=127&B|128,B>>>=7,L.buf[L.pos++]=127&B|128,L.buf[L.pos]=127&(B>>>=7)}(L,0,k),function u(B,k){var L=(7&B)<<4;k.buf[k.pos++]|=L|((B>>>=3)?128:0),B&&(k.buf[k.pos++]=127&B|((B>>>=7)?128:0),B&&(k.buf[k.pos++]=127&B|((B>>>=7)?128:0),B&&(k.buf[k.pos++]=127&B|((B>>>=7)?128:0),B&&(k.buf[k.pos++]=127&B|((B>>>=7)?128:0),B&&(k.buf[k.pos++]=127&B)))))}(p,k)}(B,this):(this.realloc(4),this.buf[this.pos++]=127&B|(B>127?128:0),!(B<=127)&&(this.buf[this.pos++]=127&(B>>>=7)|(B>127?128:0),!(B<=127)&&(this.buf[this.pos++]=127&(B>>>=7)|(B>127?128:0),!(B<=127)&&(this.buf[this.pos++]=B>>>7&127))))},writeSVarint:function(B){this.writeVarint(B<0?2*-B-1:2*B)},writeBoolean:function(B){this.writeVarint(Boolean(B))},writeString:function(B){B=String(B),this.realloc(4*B.length),this.pos++;var k=this.pos;this.pos=function dt(B,k,L){for(var M,R,p=0;p<k.length;p++){if((M=k.charCodeAt(p))>55295&&M<57344){if(!R){M>56319||p+1===k.length?(B[L++]=239,B[L++]=191,B[L++]=189):R=M;continue}if(M<56320){B[L++]=239,B[L++]=191,B[L++]=189,R=M;continue}M=R-55296<<10|M-56320|65536,R=null}else R&&(B[L++]=239,B[L++]=191,B[L++]=189,R=null);M<128?B[L++]=M:(M<2048?B[L++]=M>>6|192:(M<65536?B[L++]=M>>12|224:(B[L++]=M>>18|240,B[L++]=M>>12&63|128),B[L++]=M>>6&63|128),B[L++]=63&M|128)}return L}(this.buf,B,this.pos);var L=this.pos-k;L>=128&&s(k,L,this),this.pos=k-1,this.writeVarint(L),this.pos+=L},writeFloat:function(B){this.realloc(4),_.write(this.buf,B,this.pos,!0,23,4),this.pos+=4},writeDouble:function(B){this.realloc(8),_.write(this.buf,B,this.pos,!0,52,8),this.pos+=8},writeBytes:function(B){var k=B.length;this.writeVarint(k),this.realloc(k);for(var L=0;L<k;L++)this.buf[this.pos++]=B[L]},writeRawMessage:function(B,k){this.pos++;var L=this.pos;B(k,this);var p=this.pos-L;p>=128&&s(L,p,this),this.pos=L-1,this.writeVarint(p),this.pos+=p},writeMessage:function(B,k,L){this.writeTag(B,g.Bytes),this.writeRawMessage(k,L)},writePackedVarint:function(B,k){k.length&&this.writeMessage(B,f,k)},writePackedSVarint:function(B,k){k.length&&this.writeMessage(B,i,k)},writePackedBoolean:function(B,k){k.length&&this.writeMessage(B,e,k)},writePackedFloat:function(B,k){k.length&&this.writeMessage(B,l,k)},writePackedDouble:function(B,k){k.length&&this.writeMessage(B,m,k)},writePackedFixed32:function(B,k){k.length&&this.writeMessage(B,P,k)},writePackedSFixed32:function(B,k){k.length&&this.writeMessage(B,x,k)},writePackedFixed64:function(B,k){k.length&&this.writeMessage(B,T,k)},writePackedSFixed64:function(B,k){k.length&&this.writeMessage(B,U,k)},writeBytesField:function(B,k){this.writeTag(B,g.Bytes),this.writeBytes(k)},writeFixed32Field:function(B,k){this.writeTag(B,g.Fixed32),this.writeFixed32(k)},writeSFixed32Field:function(B,k){this.writeTag(B,g.Fixed32),this.writeSFixed32(k)},writeFixed64Field:function(B,k){this.writeTag(B,g.Fixed64),this.writeFixed64(k)},writeSFixed64Field:function(B,k){this.writeTag(B,g.Fixed64),this.writeSFixed64(k)},writeVarintField:function(B,k){this.writeTag(B,g.Varint),this.writeVarint(k)},writeSVarintField:function(B,k){this.writeTag(B,g.Varint),this.writeSVarint(k)},writeStringField:function(B,k){this.writeTag(B,g.Bytes),this.writeString(k)},writeFloatField:function(B,k){this.writeTag(B,g.Fixed32),this.writeFloat(k)},writeDoubleField:function(B,k){this.writeTag(B,g.Fixed64),this.writeDouble(k)},writeBooleanField:function(B,k){this.writeVarintField(B,Boolean(k))}}},3431:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>Ke});var w=6378137,v=.0066943799901413165,h=484813681109536e-20,c=Math.PI/2,i=1e-10,l=.017453292519943295,m=57.29577951308232,e=Math.PI/4,P=2*Math.PI,x=3.14159265359,T={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const U={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var D=/[\s_\-\/\(\)]/g;function C(t,d){if(t[d])return t[d];for(var et,E=Object.keys(t),Y=d.toLowerCase().replace(D,""),V=-1;++V<E.length;)if((et=E[V]).toLowerCase().replace(D,"")===Y)return t[et]}function O(t){var Y,V,et,d={},E=t.split("+").map(function(at){return at.trim()}).filter(function(at){return at}).reduce(function(at,yt){var It=yt.split("=");return It.push(!0),at[It[0].toLowerCase()]=It[1],at},{}),lt={proj:"projName",datum:"datumCode",rf:function(at){d.rf=parseFloat(at)},lat_0:function(at){d.lat0=at*l},lat_1:function(at){d.lat1=at*l},lat_2:function(at){d.lat2=at*l},lat_ts:function(at){d.lat_ts=at*l},lon_0:function(at){d.long0=at*l},lon_1:function(at){d.long1=at*l},lon_2:function(at){d.long2=at*l},alpha:function(at){d.alpha=parseFloat(at)*l},gamma:function(at){d.rectified_grid_angle=parseFloat(at)},lonc:function(at){d.longc=at*l},x_0:function(at){d.x0=parseFloat(at)},y_0:function(at){d.y0=parseFloat(at)},k_0:function(at){d.k0=parseFloat(at)},k:function(at){d.k0=parseFloat(at)},a:function(at){d.a=parseFloat(at)},b:function(at){d.b=parseFloat(at)},r_a:function(){d.R_A=!0},zone:function(at){d.zone=parseInt(at,10)},south:function(){d.utmSouth=!0},towgs84:function(at){d.datum_params=at.split(",").map(function(yt){return parseFloat(yt)})},to_meter:function(at){d.to_meter=parseFloat(at)},units:function(at){d.units=at;var yt=C(U,at);yt&&(d.to_meter=yt.to_meter)},from_greenwich:function(at){d.from_greenwich=at*l},pm:function(at){var yt=C(T,at);d.from_greenwich=(yt||parseFloat(at))*l},nadgrids:function(at){"@null"===at?d.datumCode="none":d.nadgrids=at},axis:function(at){var yt="ewnsud";3===at.length&&-1!==yt.indexOf(at.substr(0,1))&&-1!==yt.indexOf(at.substr(1,1))&&-1!==yt.indexOf(at.substr(2,1))&&(d.axis=at)},approx:function(){d.approx=!0}};for(Y in E)V=E[Y],Y in lt?"function"==typeof(et=lt[Y])?et(V):d[et]=V:d[Y]=V;return"string"==typeof d.datumCode&&"WGS84"!==d.datumCode&&(d.datumCode=d.datumCode.toLowerCase()),d}var M=/\s/,R=/[A-Za-z]/,K=/[A-Za-z84_]/,G=/[,\]]/,J=/[\d\.E\-\+]/;function q(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function ht(t,d,E){Array.isArray(d)&&(E.unshift(d),d=null);var V=E.reduce(function(et,lt){return _t(lt,et),et},d?{}:t);d&&(t[d]=V)}function _t(t,d){if(Array.isArray(t)){var E=t.shift();if("PARAMETER"===E&&(E=t.shift()),1===t.length)return Array.isArray(t[0])?(d[E]={},void _t(t[0],d[E])):void(d[E]=t[0]);if(t.length)if("TOWGS84"!==E){if("AXIS"===E)return E in d||(d[E]=[]),void d[E].push(t);var Y;switch(Array.isArray(E)||(d[E]={}),E){case"UNIT":case"PRIMEM":case"VERT_DATUM":return d[E]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&_t(t[2],d[E]));case"SPHEROID":case"ELLIPSOID":return d[E]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&_t(t[3],d[E]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void ht(d,E,t);default:for(Y=-1;++Y<t.length;)if(!Array.isArray(t[Y]))return _t(t,d[E]);return ht(d,E,t)}}else d[E]=t;else d[E]=!0}else d[t]=!0}function Ht(t){return.017453292519943295*t}function ae(t){var d=function ut(t){return new q(t).output()}(t),E=d.shift(),Y=d.shift();d.unshift(["name",Y]),d.unshift(["type",E]);var V={};return _t(d,V),function $t(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):t.projName="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION,t.AXIS){for(var d="",E=0,Y=t.AXIS.length;E<Y;++E){var V=[t.AXIS[E][0].toLowerCase(),t.AXIS[E][1].toLowerCase()];-1!==V[0].indexOf("north")||("y"===V[0]||"lat"===V[0])&&"north"===V[1]?d+="n":-1!==V[0].indexOf("south")||("y"===V[0]||"lat"===V[0])&&"south"===V[1]?d+="s":-1!==V[0].indexOf("east")||("x"===V[0]||"lon"===V[0])&&"east"===V[1]?d+="e":(-1!==V[0].indexOf("west")||("x"===V[0]||"lon"===V[0])&&"west"===V[1])&&(d+="w")}2===d.length&&(d+="u"),3===d.length&&(t.axis=d)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var et=t.GEOGCS;function lt(It){return It*(t.to_meter||1)}"GEOGCS"===t.type&&(et=t),et&&(t.datumCode=et.DATUM?et.DATUM.name.toLowerCase():et.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),("wgs_1984"===t.datumCode||"world_geodetic_system_1984"===t.datumCode)&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),et.DATUM&&et.DATUM.SPHEROID&&(t.ellps=et.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=et.DATUM.SPHEROID.a,t.rf=parseFloat(et.DATUM.SPHEROID.rf,10)),et.DATUM&&et.DATUM.TOWGS84&&(t.datum_params=et.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Ht],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Ht],["x0","false_easting",lt],["y0","false_northing",lt],["long0","central_meridian",Ht],["lat0","latitude_of_origin",Ht],["lat0","standard_parallel_1",Ht],["lat1","standard_parallel_1",Ht],["lat2","standard_parallel_2",Ht],["azimuth","Azimuth"],["alpha","azimuth",Ht],["srsCode","name"]].forEach(function(It){return function Lt(t,d){var E=d[0],Y=d[1];!(E in t)&&Y in t&&(t[E]=t[Y],3===d.length&&(t[E]=d[2](t[E])))}(t,It)}),!t.long0&&t.longc&&("Albers_Conic_Equal_Area"===t.projName||"Lambert_Azimuthal_Equal_Area"===t.projName)&&(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=Ht(t.lat0>0?90:-90)):(t.lat0=Ht(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(V),V}function Qt(t){var d=this;if(2===arguments.length){var E=arguments[1];Qt[t]="string"==typeof E?"+"===E.charAt(0)?O(arguments[1]):ae(arguments[1]):E}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(Y){Array.isArray(Y)?Qt.apply(d,Y):Qt(Y)});if("string"==typeof t){if(t in Qt)return Qt[t]}else"EPSG"in t?Qt["EPSG:"+t.EPSG]=t:"ESRI"in t?Qt["ESRI:"+t.ESRI]=t:"IAU2000"in t?Qt["IAU2000:"+t.IAU2000]=t:console.log(t);return}}q.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;M.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},q.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(G.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},q.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},q.prototype.number=function(t){if(!J.test(t)){if(G.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},q.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},q.prototype.keyword=function(t){if(K.test(t))this.word+=t;else{if("["===t){var d=[];return d.push(this.word),this.level++,null===this.root?this.root=d:this.currentObject.push(d),this.stack.push(this.currentObject),this.currentObject=d,void(this.state=1)}if(!G.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},q.prototype.neutral=function(t){if(R.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(J.test(t))return this.word=t,void(this.state=3);if(!G.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},q.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)},function _(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(Qt);const _e=Qt;var Ze=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Nt=["3857","900913","3785","102113"];function Dt(t,d){var E,Y;if(t=t||{},!d)return t;for(Y in d)void 0!==(E=d[Y])&&(t[Y]=E);return t}function Kt(t,d,E){var Y=t*d;return E/Math.sqrt(1-Y*Y)}function Yt(t){return t<0?-1:1}function Jt(t){return Math.abs(t)<=x?t:t-Yt(t)*P}function ye(t,d,E){var Y=t*E;return Y=Math.pow((1-Y)/(1+Y),.5*t),Math.tan(.5*(c-d))/Y}function Pe(t,d){for(var Y,V,E=.5*t,et=c-2*Math.atan(d),lt=0;lt<=15;lt++)if(Y=t*Math.sin(et),et+=V=c-2*Math.atan(d*Math.pow((1-Y)/(1+Y),E))-et,Math.abs(V)<=1e-10)return et;return-9999}function st(t){return t}var Pt=[{init:function ze(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):Kt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function He(t){var Y,V,d=t.x,E=t.y;if(E*m>90&&E*m<-90&&d*m>180&&d*m<-180)return null;if(Math.abs(Math.abs(E)-c)<=i)return null;if(this.sphere)Y=this.x0+this.a*this.k0*Jt(d-this.long0),V=this.y0+this.a*this.k0*Math.log(Math.tan(e+.5*E));else{var et=Math.sin(E),lt=ye(this.e,E,et);Y=this.x0+this.a*this.k0*Jt(d-this.long0),V=this.y0-this.a*this.k0*Math.log(lt)}return t.x=Y,t.y=V,t},inverse:function Zt(t){var Y,V,d=t.x-this.x0,E=t.y-this.y0;if(this.sphere)V=c-2*Math.atan(Math.exp(-E/(this.a*this.k0)));else{var et=Math.exp(-E/(this.a*this.k0));if(-9999===(V=Pe(this.e,et)))return null}return Y=Jt(this.long0+d/(this.a*this.k0)),t.x=Y,t.y=V,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function z(){},forward:st,inverse:st,names:["longlat","identity"]}],kt={},zt=[];function ee(t,d){var E=zt.length;return t.names?(zt[E]=t,t.names.forEach(function(Y){kt[Y.toLowerCase()]=E}),this):(console.log(d),!0)}const ge={start:function we(){Pt.forEach(ee)},add:ee,get:function re(t){if(!t)return!1;var d=t.toLowerCase();return typeof kt[d]<"u"&&zt[kt[d]]?zt[kt[d]]:void 0}};var oe={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Xe=oe.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};oe.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var $e={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var _i={};function ot(t){if(0===t.length)return null;var d="@"===t[0];return d&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!d,grid:null,isNull:!0}:{name:t,mandatory:!d,grid:_i[t]||null,isNull:!1}}function rt(t){return t/3600*Math.PI/180}function Ft(t,d,E){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(d,E)))}function fe(t){return t.map(function(d){return[rt(d.longitudeShift),rt(d.latitudeShift)]})}function Se(t,d,E){return{name:Ft(t,d+8,d+16).trim(),parent:Ft(t,d+24,d+24+8).trim(),lowerLatitude:t.getFloat64(d+72,E),upperLatitude:t.getFloat64(d+88,E),lowerLongitude:t.getFloat64(d+104,E),upperLongitude:t.getFloat64(d+120,E),latitudeInterval:t.getFloat64(d+136,E),longitudeInterval:t.getFloat64(d+152,E),gridNodeCount:t.getInt32(d+168,E)}}function Le(t,d,E,Y){for(var V=d+176,lt=[],at=0;at<E.gridNodeCount;at++){var yt={latitudeShift:t.getFloat32(V+16*at,Y),longitudeShift:t.getFloat32(V+16*at+4,Y),latitudeAccuracy:t.getFloat32(V+16*at+8,Y),longitudeAccuracy:t.getFloat32(V+16*at+12,Y)};lt.push(yt)}return lt}function ke(t,d){if(!(this instanceof ke))return new ke(t);d=d||function(It){if(It)throw It};var E=function he(t){if(!function Ce(t){return"string"==typeof t}(t))return t;if(function xe(t){return t in _e}(t))return _e[t];if(function xt(t){return Ze.some(function(d){return t.indexOf(d)>-1})}(t)){var d=ae(t);if(function Bt(t){var d=C(t,"authority");if(d){var E=C(d,"epsg");return E&&Nt.indexOf(E)>-1}}(d))return _e["EPSG:3857"];var E=function ie(t){var d=C(t,"extension");if(d)return C(d,"proj4")}(d);return E?O(E):d}return function Te(t){return"+"===t[0]}(t)?O(t):void 0}(t);if("object"==typeof E){var Y=ke.projections.get(E.projName);if(Y){if(E.datumCode&&"none"!==E.datumCode){var V=C($e,E.datumCode);V&&(E.datum_params=E.datum_params||(V.towgs84?V.towgs84.split(","):null),E.ellps=V.ellipse,E.datumName=V.datumName?V.datumName:E.datumCode)}E.k0=E.k0||1,E.axis=E.axis||"enu",E.ellps=E.ellps||"wgs84",E.lat1=E.lat1||E.lat0;var et=function Qe(t,d,E,Y,V){if(!t){var et=C(oe,Y);et||(et=Xe),t=et.a,d=et.b,E=et.rf}return E&&!d&&(d=(1-1/E)*t),(0===E||Math.abs(t-d)<i)&&(V=!0,d=t),{a:t,b:d,rf:E,sphere:V}}(E.a,E.b,E.rf,E.ellps,E.sphere),lt=function oi(t,d,E,Y){var V=t*t,et=d*d,lt=(V-et)/V,at=0;return Y?(V=(t*=1-lt*(.16666666666666666+lt*(.04722222222222222+.022156084656084655*lt)))*t,lt=0):at=Math.sqrt(lt),{es:lt,e:at,ep2:(V-et)/et}}(et.a,et.b,0,E.R_A),at=function di(t){return void 0===t?null:t.split(",").map(ot)}(E.nadgrids),yt=E.datum||function Je(t,d,E,Y,V,et,lt){var at={};return at.datum_type=void 0===t||"none"===t?5:4,d&&(at.datum_params=d.map(parseFloat),(0!==at.datum_params[0]||0!==at.datum_params[1]||0!==at.datum_params[2])&&(at.datum_type=1),at.datum_params.length>3&&(0!==at.datum_params[3]||0!==at.datum_params[4]||0!==at.datum_params[5]||0!==at.datum_params[6])&&(at.datum_type=2,at.datum_params[3]*=h,at.datum_params[4]*=h,at.datum_params[5]*=h,at.datum_params[6]=at.datum_params[6]/1e6+1)),lt&&(at.datum_type=3,at.grids=lt),at.a=E,at.b=Y,at.es=V,at.ep2=et,at}(E.datumCode,E.datum_params,et.a,et.b,lt.es,lt.ep2,at);Dt(this,E),Dt(this,Y),this.a=et.a,this.b=et.b,this.rf=et.rf,this.sphere=et.sphere,this.es=lt.es,this.e=lt.e,this.ep2=lt.ep2,this.datum=yt,this.init(),d(null,this)}else d(t)}else d(t)}(ke.projections=ge).start();const Ve=ke;function si(t,d,E){var lt,at,It,Y=t.x,V=t.y,et=t.z?t.z:0;if(V<-c&&V>-1.001*c)V=-c;else if(V>c&&V<1.001*c)V=c;else{if(V<-c)return{x:-1/0,y:-1/0,z:t.z};if(V>c)return{x:1/0,y:1/0,z:t.z}}return Y>Math.PI&&(Y-=2*Math.PI),at=Math.sin(V),It=Math.cos(V),{x:((lt=E/Math.sqrt(1-d*(at*at)))+et)*It*Math.cos(Y),y:(lt+et)*It*Math.sin(Y),z:(lt*(1-d)+et)*at}}function pi(t,d,E,Y){var at,yt,It,Xt,At,ne,me,pe,ve,Ie,Ae,Ye,ti,Ne,ci,ii=t.x,be=t.y,ni=t.z?t.z:0;if(at=Math.sqrt(ii*ii+be*be),yt=Math.sqrt(ii*ii+be*be+ni*ni),at/E<1e-12){if(Ne=0,yt/E<1e-12)return ci=-Y,{x:t.x,y:t.y,z:t.z}}else Ne=Math.atan2(be,ii);It=ni/yt,pe=(Xt=at/yt)*(1-d)*(At=1/Math.sqrt(1-d*(2-d)*Xt*Xt)),ve=It*At,ti=0;do{ti++,ne=d*(me=E/Math.sqrt(1-d*ve*ve))/(me+(ci=at*pe+ni*ve-me*(1-d*ve*ve))),Ye=(Ae=It*(At=1/Math.sqrt(1-ne*(2-ne)*Xt*Xt)))*pe-(Ie=Xt*(1-ne)*At)*ve,pe=Ie,ve=Ae}while(Ye*Ye>1e-24&&ti<30);return{x:Ne,y:Math.atan(Ae/Math.abs(Ie)),z:ci}}function Li(t){return 1===t||2===t}function Wi(t,d,E){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var Y={x:-E.x,y:E.y},V={x:Number.NaN,y:Number.NaN},lt=[],at=0;at<t.grids.length;at++){var yt=t.grids[at];if(lt.push(yt.name),yt.isNull){V=Y;break}if(null!==yt.grid){var It=yt.grid.subgrids[0],Xt=(Math.abs(It.del[1])+Math.abs(It.del[0]))/1e4;if(!(It.ll[1]-Xt>Y.y||It.ll[0]-Xt>Y.x||It.ll[1]+(It.lim[1]-1)*It.del[1]+Xt<Y.y||It.ll[0]+(It.lim[0]-1)*It.del[0]+Xt<Y.x||(V=Oi(Y,d,It),isNaN(V.x))))break}else if(yt.mandatory)return console.log("Unable to find mandatory grid '"+yt.name+"'"),-1}return isNaN(V.x)?(console.log("Failed to find a grid shift table for location '"+-Y.x*m+" "+Y.y*m+" tried: '"+lt+"'"),-1):(E.x=-V.x,E.y=V.y,0)}function Oi(t,d,E){var Y={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return Y;var V={x:t.x,y:t.y};V.x-=E.ll[0],V.y-=E.ll[1],V.x=Jt(V.x-Math.PI)+Math.PI;var et=Mi(V,E);if(d){if(isNaN(et.x))return Y;et.x=V.x-et.x,et.y=V.y-et.y;var yt,It,lt=9;do{if(It=Mi(et,E),isNaN(It.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}et.x+=(yt={x:V.x-(It.x+et.x),y:V.y-(It.y+et.y)}).x,et.y+=yt.y}while(lt--&&Math.abs(yt.x)>1e-12&&Math.abs(yt.y)>1e-12);if(lt<0)return console.log("Inverse grid shift iterator failed to converge."),Y;Y.x=Jt(et.x+E.ll[0]),Y.y=et.y+E.ll[1]}else isNaN(et.x)||(Y.x=t.x+et.x,Y.y=t.y+et.y);return Y}function Mi(t,d){var lt,E={x:t.x/d.del[0],y:t.y/d.del[1]},Y_x=Math.floor(E.x),Y_y=Math.floor(E.y),V_x=E.x-1*Y_x,V_y=E.y-1*Y_y,et={x:Number.NaN,y:Number.NaN};if(Y_x<0||Y_x>=d.lim[0]||Y_y<0||Y_y>=d.lim[1])return et;var at_x=d.cvs[lt=Y_y*d.lim[0]+Y_x][0],at_y=d.cvs[lt][1];lt++;var yt_x=d.cvs[lt][0],yt_y=d.cvs[lt][1],It_x=d.cvs[lt+=d.lim[0]][0],It_y=d.cvs[lt][1];lt--;var Xt_y=d.cvs[lt][1],At=V_x*V_y,ne=V_x*(1-V_y),me=(1-V_x)*(1-V_y),pe=(1-V_x)*V_y;return et.x=me*at_x+ne*yt_x+pe*d.cvs[lt][0]+At*It_x,et.y=me*at_y+ne*yt_y+pe*Xt_y+At*It_y,et}function Ai(t,d,E){var lt,at,yt,Y=E.x,V=E.y,et=E.z||0,It={};for(yt=0;yt<3;yt++)if(!d||2!==yt||void 0!==E.z)switch(0===yt?(lt=Y,at=-1!=="ew".indexOf(t.axis[yt])?"x":"y"):1===yt?(lt=V,at=-1!=="ns".indexOf(t.axis[yt])?"y":"x"):(lt=et,at="z"),t.axis[yt]){case"e":case"n":It[at]=lt;break;case"w":case"s":It[at]=-lt;break;case"u":void 0!==E[at]&&(It.z=lt);break;case"d":void 0!==E[at]&&(It.z=-lt);break;default:return null}return It}function Ii(t){var d={x:t[0],y:t[1]};return t.length>2&&(d.z=t[2]),t.length>3&&(d.m=t[3]),d}function hn(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Ei(t,d,E,Y){var V,et=void 0!==(E=Array.isArray(E)?Ii(E):{x:E.x,y:E.y,z:E.z,m:E.m}).z;if(function yi(t){hn(t.x),hn(t.y)}(E),t.datum&&d.datum&&function Ui(t,d){return(1===t.datum.datum_type||2===t.datum.datum_type||3===t.datum.datum_type)&&"WGS84"!==d.datumCode||(1===d.datum.datum_type||2===d.datum.datum_type||3===d.datum.datum_type)&&"WGS84"!==t.datumCode}(t,d)&&(E=Ei(t,V=new Ve("WGS84"),E,Y),t=V),Y&&"enu"!==t.axis&&(E=Ai(t,!1,E)),"longlat"===t.projName)E={x:E.x*l,y:E.y*l,z:E.z||0};else if(t.to_meter&&(E={x:E.x*t.to_meter,y:E.y*t.to_meter,z:E.z||0}),!(E=t.inverse(E)))return;if(t.from_greenwich&&(E.x+=t.from_greenwich),E=function Yn(t,d,E){if(function qe(t,d){return!(t.datum_type!==d.datum_type||t.a!==d.a||Math.abs(t.es-d.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===d.datum_params[0]&&t.datum_params[1]===d.datum_params[1]&&t.datum_params[2]===d.datum_params[2]:2!==t.datum_type||t.datum_params[0]===d.datum_params[0]&&t.datum_params[1]===d.datum_params[1]&&t.datum_params[2]===d.datum_params[2]&&t.datum_params[3]===d.datum_params[3]&&t.datum_params[4]===d.datum_params[4]&&t.datum_params[5]===d.datum_params[5]&&t.datum_params[6]===d.datum_params[6])}(t,d)||5===t.datum_type||5===d.datum_type)return E;var Y=t.a,V=t.es;if(3===t.datum_type){if(0!==Wi(t,!1,E))return;Y=w,V=v}var lt=d.a,at=d.b,yt=d.es;return 3===d.datum_type&&(lt=w,at=6356752.314,yt=v),V!==yt||Y!==lt||Li(t.datum_type)||Li(d.datum_type)?(E=si(E,V,Y),Li(t.datum_type)&&(E=function Di(t,d,E){if(1===d)return{x:t.x+E[0],y:t.y+E[1],z:t.z+E[2]};if(2===d){var lt=E[3],at=E[4],yt=E[5],It=E[6];return{x:It*(t.x-yt*t.y+at*t.z)+E[0],y:It*(yt*t.x+t.y-lt*t.z)+E[1],z:It*(-at*t.x+lt*t.y+t.z)+E[2]}}}(E,t.datum_type,t.datum_params)),Li(d.datum_type)&&(E=function Ri(t,d,E){if(1===d)return{x:t.x-E[0],y:t.y-E[1],z:t.z-E[2]};if(2===d){var lt=E[3],at=E[4],yt=E[5],It=E[6],Xt=(t.x-E[0])/It,At=(t.y-E[1])/It,ne=(t.z-E[2])/It;return{x:Xt+yt*At-at*ne,y:-yt*Xt+At+lt*ne,z:at*Xt-lt*At+ne}}}(E,d.datum_type,d.datum_params)),E=pi(E,yt,lt,at),3!==d.datum_type||0===Wi(d,!0,E)?E:void 0):E}(t.datum,d.datum,E))return d.from_greenwich&&(E={x:E.x-d.from_greenwich,y:E.y,z:E.z||0}),"longlat"===d.projName?E={x:E.x*m,y:E.y*m,z:E.z||0}:(E=d.forward(E),d.to_meter&&(E={x:E.x/d.to_meter,y:E.y/d.to_meter,z:E.z||0})),Y&&"enu"!==d.axis?Ai(d,!0,E):(et||delete E.z,E)}var Fi=Ve("WGS84");function ji(t,d,E,Y){var V,et,lt;return Array.isArray(E)?(V=Ei(t,d,E,Y)||{x:NaN,y:NaN},E.length>2?typeof t.name<"u"&&"geocent"===t.name||typeof d.name<"u"&&"geocent"===d.name?"number"==typeof V.z?[V.x,V.y,V.z].concat(E.splice(3)):[V.x,V.y,E[2]].concat(E.splice(3)):[V.x,V.y].concat(E.splice(2)):[V.x,V.y]):(et=Ei(t,d,E,Y),2===(lt=Object.keys(E)).length||lt.forEach(function(at){if(typeof t.name<"u"&&"geocent"===t.name||typeof d.name<"u"&&"geocent"===d.name){if("x"===at||"y"===at||"z"===at)return}else if("x"===at||"y"===at)return;et[at]=E[at]}),et)}function fn(t){return t instanceof Ve?t:t.oProj?t.oProj:Ve(t)}const Gi=function Mr(t,d,E){t=fn(t);var V,Y=!1;return typeof d>"u"?(d=t,t=Fi,Y=!0):(typeof d.x<"u"||Array.isArray(d))&&(E=d,d=t,t=Fi,Y=!0),d=fn(d),E?ji(t,d,E):(V={forward:function(et,lt){return ji(t,d,et,lt)},inverse:function(et,lt){return ji(d,t,et,lt)}},Y&&(V.oProj=d),V)};const Tr={forward:Jn,inverse:function Ys(t){var d=vs(ts(t.toUpperCase()));return d.lat&&d.lon?[d.lon,d.lat,d.lon,d.lat]:[d.left,d.bottom,d.right,d.top]},toPoint:Qn};function Jn(t,d){return d=d||5,function sn(t,d){var E="00000"+t.easting,Y="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function ys(t,d,E){var Y=Nn(E);return function qn(t,d,E){var Y=E-1,V="AJSAJS".charCodeAt(Y),et="AFAFAF".charCodeAt(Y),lt=V+t-1,at=et+d,yt=!1;return lt>90&&(lt=lt-90+65-1,yt=!0),(73===lt||V<73&&lt>73||(lt>73||V<73)&&yt)&&lt++,(79===lt||V<79&&lt>79||(lt>79||V<79)&&yt)&&73==++lt&&lt++,lt>90&&(lt=lt-90+65-1),at>86?(at=at-86+65-1,yt=!0):yt=!1,(73===at||et<73&&at>73||(at>73||et<73)&&yt)&&at++,(79===at||et<79&&at>79||(at>79||et<79)&&yt)&&73==++at&&at++,at>86&&(at=at-86+65-1),String.fromCharCode(lt)+String.fromCharCode(at)}(Math.floor(t/1e5),Math.floor(d/1e5)%20,Y)}(t.easting,t.northing,t.zoneNumber)+E.substr(E.length-5,d)+Y.substr(Y.length-5,d)}(function Hs(t){var at,yt,It,Xt,At,ve,Ie,d=t.lat,E=t.lon,Y=6378137,V=.00669438,me=$n(d),pe=$n(E);Ie=Math.floor((E+180)/6)+1,180===E&&(Ie=60),d>=56&&d<64&&E>=3&&E<12&&(Ie=32),d>=72&&d<84&&(E>=0&&E<9?Ie=31:E>=9&&E<21?Ie=33:E>=21&&E<33?Ie=35:E>=33&&E<42&&(Ie=37)),ve=$n(6*(Ie-1)-180+3),at=V/(1-V),yt=Y/Math.sqrt(1-V*Math.sin(me)*Math.sin(me)),It=Math.tan(me)*Math.tan(me),Xt=at*Math.cos(me)*Math.cos(me);var Ae=.9996*yt*((At=Math.cos(me)*(pe-ve))+(1-It+Xt)*At*At*At/6+(5-18*It+It*It+72*Xt-58*at)*At*At*At*At*At/120)+5e5,Ye=.9996*(Y*(.9983242984503243*me-.002514607064228144*Math.sin(2*me)+2639046602129982e-21*Math.sin(4*me)-35*V*V*V/3072*Math.sin(6*me))+yt*Math.tan(me)*(At*At/2+(5-It+9*Xt+4*Xt*Xt)*At*At*At*At/24+(61-58*It+It*It+600*Xt-330*at)*At*At*At*At*At*At/720));return d<0&&(Ye+=1e7),{northing:Math.round(Ye),easting:Math.round(Ae),zoneNumber:Ie,zoneLetter:Pr(d)}}({lat:t[1],lon:t[0]}),d)}function Qn(t){var d=vs(ts(t.toUpperCase()));return d.lat&&d.lon?[d.lon,d.lat]:[(d.left+d.right)/2,(d.top+d.bottom)/2]}function $n(t){return t*(Math.PI/180)}function ms(t){return t/Math.PI*180}function vs(t){var d=t.northing,E=t.easting,Y=t.zoneLetter,V=t.zoneNumber;if(V<0||V>60)return null;var yt,Xt,At,ne,me,pe,Ie,Ae,Ye,at=.00669438,It=(1-Math.sqrt(1-at))/(1+Math.sqrt(1-at)),ti=E-5e5,ii=d;Y<"N"&&(ii-=1e7),Ie=6*(V-1)-180+3,yt=at/(1-at),Ye=(Ae=ii/.9996/6367449.145945056)+(3*It/2-27*It*It*It/32)*Math.sin(2*Ae)+(21*It*It/16-55*It*It*It*It/32)*Math.sin(4*Ae)+151*It*It*It/96*Math.sin(6*Ae),Xt=6378137/Math.sqrt(1-at*Math.sin(Ye)*Math.sin(Ye)),At=Math.tan(Ye)*Math.tan(Ye),ne=yt*Math.cos(Ye)*Math.cos(Ye),me=6378137*(1-at)/Math.pow(1-at*Math.sin(Ye)*Math.sin(Ye),1.5),pe=ti/(.9996*Xt);var be=Ye-Xt*Math.tan(Ye)/me*(pe*pe/2-(5+3*At+10*ne-4*ne*ne-9*yt)*pe*pe*pe*pe/24+(61+90*At+298*ne+45*At*At-252*yt-3*ne*ne)*pe*pe*pe*pe*pe*pe/720);be=ms(be);var Ne,ni=(pe-(1+2*At+ne)*pe*pe*pe/6+(5-2*ne+28*At-3*ne*ne+8*yt+24*At*At)*pe*pe*pe*pe*pe/120)/Math.cos(Ye);if(ni=Ie+ms(ni),t.accuracy){var Fe=vs({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});Ne={top:Fe.lat,right:Fe.lon,bottom:be,left:ni}}else Ne={lat:be,lon:ni};return Ne}function Pr(t){var d="Z";return 84>=t&&t>=72?d="X":72>t&&t>=64?d="W":64>t&&t>=56?d="V":56>t&&t>=48?d="U":48>t&&t>=40?d="T":40>t&&t>=32?d="S":32>t&&t>=24?d="R":24>t&&t>=16?d="Q":16>t&&t>=8?d="P":8>t&&t>=0?d="N":0>t&&t>=-8?d="M":-8>t&&t>=-16?d="L":-16>t&&t>=-24?d="K":-24>t&&t>=-32?d="J":-32>t&&t>=-40?d="H":-40>t&&t>=-48?d="G":-48>t&&t>=-56?d="F":-56>t&&t>=-64?d="E":-64>t&&t>=-72?d="D":-72>t&&t>=-80&&(d="C"),d}function Nn(t){var d=t%6;return 0===d&&(d=6),d}function ts(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var V,d=t.length,E=null,Y="",et=0;!/[A-Z]/.test(V=t.charAt(et));){if(et>=2)throw"MGRSPoint bad conversion from: "+t;Y+=V,et++}var lt=parseInt(Y,10);if(0===et||et+3>d)throw"MGRSPoint bad conversion from: "+t;var at=t.charAt(et++);if(at<="A"||"B"===at||"Y"===at||at>="Z"||"I"===at||"O"===at)throw"MGRSPoint zone letter "+at+" not handled: "+t;E=t.substring(et,et+=2);for(var yt=Nn(lt),It=function gn(t,d){for(var E="AJSAJS".charCodeAt(d-1),Y=1e5,V=!1;E!==t.charCodeAt(0);){if(73==++E&&E++,79===E&&E++,E>90){if(V)throw"Bad character: "+t;E=65,V=!0}Y+=1e5}return Y}(E.charAt(0),yt),Xt=function Js(t,d){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var E="AFAFAF".charCodeAt(d-1),Y=0,V=!1;E!==t.charCodeAt(0);){if(73==++E&&E++,79===E&&E++,E>86){if(V)throw"Bad character: "+t;E=65,V=!0}Y+=1e5}return Y}(E.charAt(1),yt);Xt<_n(at);)Xt+=2e6;var At=d-et;if(At%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var ve,Ie,Ae,ne=At/2,me=0,pe=0;return ne>0&&(ve=1e5/Math.pow(10,ne),Ie=t.substring(et,et+ne),me=parseFloat(Ie)*ve,Ae=t.substring(et+ne),pe=parseFloat(Ae)*ve),{easting:me+It,northing:pe+Xt,zoneLetter:at,zoneNumber:lt,accuracy:ve}}function _n(t){var d;switch(t){case"C":d=11e5;break;case"D":d=2e6;break;case"E":d=28e5;break;case"F":d=37e5;break;case"G":d=46e5;break;case"H":d=55e5;break;case"J":d=64e5;break;case"K":d=73e5;break;case"L":d=82e5;break;case"M":d=91e5;break;case"N":d=0;break;case"P":d=8e5;break;case"Q":d=17e5;break;case"R":d=26e5;break;case"S":d=35e5;break;case"T":d=44e5;break;case"U":d=53e5;break;case"V":d=62e5;break;case"W":d=7e6;break;case"X":d=79e5;break;default:d=-1}if(d>=0)return d;throw"Invalid zone letter: "+t}function cn(t,d,E){if(!(this instanceof cn))return new cn(t,d,E);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&typeof d>"u"){var Y=t.split(",");this.x=parseFloat(Y[0],10),this.y=parseFloat(Y[1],10),this.z=parseFloat(Y[2],10)||0}else this.x=t,this.y=d,this.z=E||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}cn.fromMGRS=function(t){return new cn(Qn(t))},cn.prototype.toMGRS=function(t){return Jn([this.x,this.y],t)};const Es=cn;var $s=.01953125,un=.01068115234375;function Ts(t){var d=[];d[0]=1-t*(.25+t*(.046875+t*($s+t*un))),d[1]=t*(.75-t*(.046875+t*($s+t*un)));var E=t*t;return d[2]=E*(.46875-t*(.013020833333333334+.007120768229166667*t)),d[3]=(E*=t)*(.3645833333333333-.005696614583333333*t),d[4]=E*t*.3076171875,d}function ki(t,d,E,Y){return Y[0]*t-(E*=d)*(Y[1]+(d*=d)*(Y[2]+d*(Y[3]+d*Y[4])))}function Ps(t,d,E){for(var Y=1/(1-d),V=t,et=20;et;--et){var lt=Math.sin(V),at=1-d*lt*lt;if(V-=at=(ki(V,lt,Math.cos(V),E)-t)*(at*Math.sqrt(at))*Y,Math.abs(at)<i)return V}return V}const Tn={init:function br(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Ts(this.es),this.ml0=ki(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function Rr(t){var V,et,lt,E=t.y,Y=Jt(t.x-this.long0),at=Math.sin(E),yt=Math.cos(E);if(this.es){var Xt=yt*Y,At=Math.pow(Xt,2),ne=this.ep2*Math.pow(yt,2),me=Math.pow(ne,2),pe=Math.abs(yt)>i?Math.tan(E):0,ve=Math.pow(pe,2),Ie=Math.pow(ve,2);V=1-this.es*Math.pow(at,2),Xt/=Math.sqrt(V);var Ae=ki(E,at,yt,this.en);et=this.a*(this.k0*Xt*(1+At/6*(1-ve+ne+At/20*(5-18*ve+Ie+14*ne-58*ve*ne+At/42*(61+179*Ie-Ie*ve-479*ve)))))+this.x0,lt=this.a*(this.k0*(Ae-this.ml0+at*Y*Xt/2*(1+At/12*(5-ve+9*ne+4*me+At/30*(61+Ie-58*ve+270*ne-330*ve*ne+At/56*(1385+543*Ie-Ie*ve-3111*ve))))))+this.y0}else{var It=yt*Math.sin(Y);if(Math.abs(Math.abs(It)-1)<i)return 93;if(et=.5*this.a*this.k0*Math.log((1+It)/(1-It))+this.x0,lt=yt*Math.cos(Y)/Math.sqrt(1-Math.pow(It,2)),(It=Math.abs(lt))>=1){if(It-1>i)return 93;lt=0}else lt=Math.acos(lt);E<0&&(lt=-lt),lt=this.a*this.k0*(lt-this.lat0)+this.y0}return t.x=et,t.y=lt,t},inverse:function es(t){var d,E,Y,V,et=1/this.a*(t.x-this.x0),lt=1/this.a*(t.y-this.y0);if(this.es)if(E=Ps(d=this.ml0+lt/this.k0,this.es,this.en),Math.abs(E)<c){var At=Math.sin(E),ne=Math.cos(E),me=Math.abs(ne)>i?Math.tan(E):0,pe=this.ep2*Math.pow(ne,2),ve=Math.pow(pe,2),Ie=Math.pow(me,2),Ae=Math.pow(Ie,2);d=1-this.es*Math.pow(At,2);var Ye=et*Math.sqrt(d)/this.k0,ti=Math.pow(Ye,2);Y=E-(d*=me)*ti/(1-this.es)*.5*(1-ti/12*(5+3*Ie-9*pe*Ie+pe-4*ve-ti/30*(61+90*Ie-252*pe*Ie+45*Ae+46*pe-ti/56*(1385+3633*Ie+4095*Ae+1574*Ae*Ie)))),V=Jt(this.long0+Ye*(1-ti/6*(1+2*Ie+pe-ti/20*(5+28*Ie+24*Ae+8*pe*Ie+6*pe-ti/42*(61+662*Ie+1320*Ae+720*Ae*Ie))))/ne)}else Y=c*Yt(lt),V=0;else{var at=Math.exp(et/this.k0),yt=.5*(at-1/at),Xt=Math.cos(this.lat0+lt/this.k0);d=Math.sqrt((1-Math.pow(Xt,2))/(1+Math.pow(yt,2))),Y=Math.asin(d),lt<0&&(Y=-Y),V=0===yt&&0===Xt?0:Jt(Math.atan2(yt,Xt)+this.long0)}return t.x=V,t.y=Y,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function kn(t){var d=Math.exp(t);return(d-1/d)/2}function Vi(t,d){t=Math.abs(t),d=Math.abs(d);var E=Math.max(t,d),Y=Math.min(t,d)/(E||1);return E*Math.sqrt(1+Math.pow(Y,2))}function bs(t,d){for(var lt,E=2*Math.cos(2*d),Y=t.length-1,V=t[Y],et=0;--Y>=0;)lt=E*V-et+t[Y],et=V,V=lt;return d+lt*Math.sin(2*d)}function mt(t,d,E){for(var pe,ve,Y=Math.sin(d),V=Math.cos(d),et=kn(E),lt=function qt(t){var d=Math.exp(t);return(d+1/d)/2}(E),at=2*V*lt,yt=-2*Y*et,It=t.length-1,Xt=t[It],At=0,ne=0,me=0;--It>=0;)pe=ne,ve=At,Xt=at*(ne=Xt)-pe-yt*(At=me)+t[It],me=yt*ne-ve+at*At;return[(at=Y*lt)*Xt-(yt=V*et)*me,at*me+yt*Xt]}const de={init:function Ct(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Tn.init.apply(this),this.forward=Tn.forward,this.inverse=Tn.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),d=t/(2-t),E=d;this.cgb[0]=d*(2+d*(-2/3+d*(d*(116/45+d*(26/45+d*(-2854/675)))-2))),this.cbg[0]=d*(d*(2/3+d*(4/3+d*(-82/45+d*(32/45+d*(4642/4725)))))-2),this.cgb[1]=(E*=d)*(7/3+d*(d*(-227/45+d*(2704/315+d*(2323/945)))-1.6)),this.cbg[1]=E*(5/3+d*(-16/15+d*(-13/9+d*(904/315+d*(-1522/945))))),this.cgb[2]=(E*=d)*(56/15+d*(-136/35+d*(-1262/105+d*(73814/2835)))),this.cbg[2]=E*(-26/15+d*(34/21+d*(1.6+d*(-12686/2835)))),this.cgb[3]=(E*=d)*(4279/630+d*(-332/35+d*(-399572/14175))),this.cbg[3]=E*(1237/630+d*(d*(-24832/14175)-2.4)),this.cgb[4]=(E*=d)*(4174/315+d*(-144838/6237)),this.cbg[4]=E*(-734/315+d*(109598/31185)),this.cgb[5]=(E*=d)*(601676/22275),this.cbg[5]=E*(444337/155925),E=Math.pow(d,2),this.Qn=this.k0/(1+d)*(1+E*(1/4+E*(1/64+E/256))),this.utg[0]=d*(d*(2/3+d*(-37/96+d*(1/360+d*(81/512+d*(-96199/604800)))))-.5),this.gtu[0]=d*(.5+d*(-2/3+d*(5/16+d*(41/180+d*(-127/288+d*(7891/37800)))))),this.utg[1]=E*(-1/48+d*(-1/15+d*(437/1440+d*(-46/105+d*(1118711/3870720))))),this.gtu[1]=E*(13/48+d*(d*(557/1440+d*(281/630+d*(-1983433/1935360)))-.6)),this.utg[2]=(E*=d)*(-17/480+d*(37/840+d*(209/4480+d*(-5569/90720)))),this.gtu[2]=E*(61/240+d*(-103/140+d*(15061/26880+d*(167603/181440)))),this.utg[3]=(E*=d)*(-4397/161280+d*(11/504+d*(830251/7257600))),this.gtu[3]=E*(49561/161280+d*(-179/168+d*(6601661/7257600))),this.utg[4]=(E*=d)*(-4583/161280+d*(108847/3991680)),this.gtu[4]=E*(34729/80640+d*(-3418889/1995840)),this.utg[5]=(E*=d)*(-20648693/638668800),this.gtu[5]=.6650675310896665*E;var Y=bs(this.cbg,this.lat0);this.Zb=-this.Qn*(Y+function Or(t,d){for(var lt,E=2*Math.cos(d),Y=t.length-1,V=t[Y],et=0;--Y>=0;)lt=E*V-et+t[Y],et=V,V=lt;return Math.sin(d)*lt}(this.gtu,2*Y))},forward:function Rt(t){var d=Jt(t.x-this.long0),E=t.y;E=bs(this.cbg,E);var Y=Math.sin(E),V=Math.cos(E),et=Math.sin(d),lt=Math.cos(d);E=Math.atan2(Y,lt*V),d=Math.atan2(et*V,Vi(Y,V*lt)),d=function Ir(t){var d=Math.abs(t);return d=function nr(t){var d=1+t,E=d-1;return 0===E?t:t*Math.log(d)/E}(d*(1+d/(Vi(1,d)+1))),t<0?-d:d}(Math.tan(d));var yt,It,at=mt(this.gtu,2*E,2*d);return E+=at[0],d+=at[1],Math.abs(d)<=2.623395162778?(yt=this.a*(this.Qn*d)+this.x0,It=this.a*(this.Qn*E+this.Zb)+this.y0):(yt=1/0,It=1/0),t.x=yt,t.y=It,t},inverse:function jt(t){var Y,V,d=1/this.a*(t.x-this.x0),E=1/this.a*(t.y-this.y0);if(E=(E-this.Zb)/this.Qn,d/=this.Qn,Math.abs(d)<=2.623395162778){var et=mt(this.utg,2*E,2*d);E+=et[0],d+=et[1],d=Math.atan(kn(d));var lt=Math.sin(E),at=Math.cos(E),yt=Math.sin(d),It=Math.cos(d);E=Math.atan2(lt*It,Vi(yt,It*at)),Y=Jt((d=Math.atan2(yt,It*at))+this.long0),V=bs(this.cgb,E)}else Y=1/0,V=1/0;return t.x=Y,t.y=V,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},li={init:function Be(){var t=function Re(t,d){if(void 0===t){if((t=Math.floor(30*(Jt(d)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*l,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,de.init.apply(this),this.forward=de.forward,this.inverse=de.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function fi(t,d){return Math.pow((1-t)/(1+t),d)}const Zi={init:function Ci(){var t=Math.sin(this.lat0),d=Math.cos(this.lat0);d*=d,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*d*d/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+e)/(Math.pow(Math.tan(.5*this.lat0+e),this.C)*fi(this.e*t,this.ratexp))},forward:function wi(t){var d=t.x,E=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*E+e),this.C)*fi(this.e*Math.sin(E),this.ratexp))-c,t.x=this.C*d,t},inverse:function Ti(t){for(var E=t.x/this.C,Y=t.y,V=Math.pow(Math.tan(.5*Y+e)/this.K,1/this.C),et=20;et>0&&(Y=2*Math.atan(V*fi(this.e*Math.sin(t.y),-.5*this.e))-c,!(Math.abs(Y-t.y)<1e-14));--et)t.y=Y;return et?(t.x=E,t.y=Y,t):null},names:["gauss"]},Yi={init:function bi(){Zi.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function Bi(t){var d,E,Y,V;return t.x=Jt(t.x-this.long0),Zi.forward.apply(this,[t]),d=Math.sin(t.y),E=Math.cos(t.y),Y=Math.cos(t.x),t.x=(V=this.k0*this.R2/(1+this.sinc0*d+this.cosc0*E*Y))*E*Math.sin(t.x),t.y=V*(this.cosc0*d-this.sinc0*E*Y),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function Xi(t){var d,E,Y,V,et;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,et=Math.sqrt(t.x*t.x+t.y*t.y)){var lt=2*Math.atan2(et,this.R2);d=Math.sin(lt),E=Math.cos(lt),V=Math.asin(E*this.sinc0+t.y*d*this.cosc0/et),Y=Math.atan2(t.x*d,et*this.cosc0*E-t.y*this.sinc0*d)}else V=this.phic0,Y=0;return t.x=Y,t.y=V,Zi.inverse.apply(this,[t]),t.x=Jt(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},is={init:function Zn(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=i&&(this.k0=.5*(1+Yt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=i&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=i&&(this.k0=.5*this.cons*Kt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ye(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Kt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-c,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function Bn(t){var et,lt,at,yt,It,Xt,d=t.x,E=t.y,Y=Math.sin(E),V=Math.cos(E),At=Jt(d-this.long0);return Math.abs(Math.abs(d-this.long0)-Math.PI)<=i&&Math.abs(E+this.lat0)<=i?(t.x=NaN,t.y=NaN,t):this.sphere?(et=2*this.k0/(1+this.sinlat0*Y+this.coslat0*V*Math.cos(At)),t.x=this.a*et*V*Math.sin(At)+this.x0,t.y=this.a*et*(this.coslat0*Y-this.sinlat0*V*Math.cos(At))+this.y0,t):(lt=2*Math.atan(this.ssfn_(E,Y,this.e))-c,yt=Math.cos(lt),at=Math.sin(lt),Math.abs(this.coslat0)<=i?(It=ye(this.e,E*this.con,this.con*Y),t.x=this.x0+(Xt=2*this.a*this.k0*It/this.cons)*Math.sin(d-this.long0),t.y=this.y0-this.con*Xt*Math.cos(d-this.long0),t):(Math.abs(this.sinlat0)<i?(et=2*this.a*this.k0/(1+yt*Math.cos(At)),t.y=et*at):(et=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*at+this.cosX0*yt*Math.cos(At))),t.y=et*(this.cosX0*at-this.sinX0*yt*Math.cos(At))+this.y0),t.x=et*yt*Math.sin(At)+this.x0,t))},inverse:function Rs(t){t.x-=this.x0,t.y-=this.y0;var d,E,V,et,lt=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var at=2*Math.atan(lt/(2*this.a*this.k0));return d=this.long0,E=this.lat0,lt<=i?(t.x=d,t.y=E,t):(E=Math.asin(Math.cos(at)*this.sinlat0+t.y*Math.sin(at)*this.coslat0/lt),d=Math.abs(this.coslat0)<i?Jt(this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y)):Jt(this.long0+Math.atan2(t.x*Math.sin(at),lt*this.coslat0*Math.cos(at)-t.y*this.sinlat0*Math.sin(at))),t.x=d,t.y=E,t)}if(Math.abs(this.coslat0)<=i){if(lt<=i)return E=this.lat0,t.x=d=this.long0,t.y=E,t;t.x*=this.con,t.y*=this.con,E=this.con*Pe(this.e,lt*this.cons/(2*this.a*this.k0)),d=this.con*Jt(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else V=2*Math.atan(lt*this.cosX0/(2*this.a*this.k0*this.ms1)),d=this.long0,lt<=i?et=this.X0:(et=Math.asin(Math.cos(V)*this.sinX0+t.y*Math.sin(V)*this.cosX0/lt),d=Jt(this.long0+Math.atan2(t.x*Math.sin(V),lt*this.cosX0*Math.cos(V)-t.y*this.sinX0*Math.sin(V)))),E=-1*Pe(this.e,Math.tan(.5*(c+et)));return t.x=d,t.y=E,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function sr(t,d,E){return d*=E,Math.tan(.5*(c+t))*Math.pow((1-d)/(1+d),.5*E)}},zo={init:function or(){var t=this.lat0;this.lambda0=this.long0;var d=Math.sin(t),E=this.a,V=1/this.rf,et=2*V-Math.pow(V,2),lt=this.e=Math.sqrt(et);this.R=this.k0*E*Math.sqrt(1-et)/(1-et*Math.pow(d,2)),this.alpha=Math.sqrt(1+et/(1-et)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(d/this.alpha);var at=Math.log(Math.tan(Math.PI/4+this.b0/2)),yt=Math.log(Math.tan(Math.PI/4+t/2)),It=Math.log((1+lt*d)/(1-lt*d));this.K=at-this.alpha*yt+this.alpha*lt/2*It},forward:function Uo(t){var d=Math.log(Math.tan(Math.PI/4-t.y/2)),E=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),V=2*(Math.atan(Math.exp(-this.alpha*(d+E)+this.K))-Math.PI/4),et=this.alpha*(t.x-this.lambda0),lt=Math.atan(Math.sin(et)/(Math.sin(this.b0)*Math.tan(V)+Math.cos(this.b0)*Math.cos(et))),at=Math.asin(Math.cos(this.b0)*Math.sin(V)-Math.sin(this.b0)*Math.cos(V)*Math.cos(et));return t.y=this.R/2*Math.log((1+Math.sin(at))/(1-Math.sin(at)))+this.y0,t.x=this.R*lt+this.x0,t},inverse:function jo(t){for(var Y=(t.x-this.x0)/this.R,V=2*(Math.atan(Math.exp((t.y-this.y0)/this.R))-Math.PI/4),et=Math.asin(Math.cos(this.b0)*Math.sin(V)+Math.sin(this.b0)*Math.cos(V)*Math.cos(Y)),lt=Math.atan(Math.sin(Y)/(Math.cos(this.b0)*Math.cos(Y)-Math.sin(this.b0)*Math.tan(V))),at=this.lambda0+lt/this.alpha,yt=0,It=et,Xt=-1e3,At=0;Math.abs(It-Xt)>1e-7;){if(++At>20)return;yt=1/this.alpha*(Math.log(Math.tan(Math.PI/4+et/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(It))/2)),Xt=It,It=2*Math.atan(Math.exp(yt))-Math.PI/2}return t.x=at,t.y=It,t},names:["somerc"]};var ns=1e-7;const so={init:function Wo(){var t,d,E,Y,V,et,lt,at,yt,It,At,Xt=0,ne=0,me=0,pe=0,ve=0,Ie=0,Ae=0;this.no_off=function ss(t){var E="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(E)}(this),this.no_rot="no_rot"in this;var ti=!1;"alpha"in this&&(ti=!0);var ii=!1;if("rectified_grid_angle"in this&&(ii=!0),ti&&(Ae=this.alpha),ii&&(Xt=this.rectified_grid_angle*l),ti||ii)ne=this.longc;else if(me=this.long1,ve=this.lat1,pe=this.long2,Ie=this.lat2,Math.abs(ve-Ie)<=ns||(t=Math.abs(ve))<=ns||Math.abs(t-c)<=ns||Math.abs(Math.abs(this.lat0)-c)<=ns||Math.abs(Math.abs(Ie)-c)<=ns)throw new Error;var be=1-this.es;d=Math.sqrt(be),Math.abs(this.lat0)>i?(at=Math.sin(this.lat0),E=Math.cos(this.lat0),t=1-this.es*at*at,this.B=E*E,this.B=Math.sqrt(1+this.es*this.B*this.B/be),this.A=this.B*this.k0*d/t,(V=(Y=this.B*d/(E*Math.sqrt(t)))*Y-1)<=0?V=0:(V=Math.sqrt(V),this.lat0<0&&(V=-V)),this.E=V+=Y,this.E*=Math.pow(ye(this.e,this.lat0,at),this.B)):(this.B=1/d,this.A=this.k0,this.E=Y=V=1),ti||ii?(ti?(At=Math.asin(Math.sin(Ae)/Y),ii||(Xt=Ae)):(At=Xt,Ae=Math.asin(Y*Math.sin(At))),this.lam0=ne-Math.asin(.5*(V-1/V)*Math.tan(At))/this.B):(et=Math.pow(ye(this.e,ve,Math.sin(ve)),this.B),lt=Math.pow(ye(this.e,Ie,Math.sin(Ie)),this.B),V=this.E/et,yt=(lt-et)/(lt+et),It=((It=this.E*this.E)-lt*et)/(It+lt*et),(t=me-pe)<-Math.pi?pe-=P:t>Math.pi&&(pe+=P),this.lam0=Jt(.5*(me+pe)-Math.atan(It*Math.tan(.5*this.B*(me-pe))/yt)/this.B),At=Math.atan(2*Math.sin(this.B*Jt(me-this.lam0))/(V-1/V)),Xt=Ae=Math.asin(Y*Math.sin(At))),this.singam=Math.sin(At),this.cosgam=Math.cos(At),this.sinrot=Math.sin(Xt),this.cosrot=Math.cos(Xt),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(Y*Y-1)/Math.cos(Ae))),this.lat0<0&&(this.u_0=-this.u_0)),V=.5*At,this.v_pole_n=this.ArB*Math.log(Math.tan(e-V)),this.v_pole_s=this.ArB*Math.log(Math.tan(e+V))},forward:function Ko(t){var E,Y,V,et,lt,at,yt,It,d={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-c)>i){if(E=.5*((lt=this.E/Math.pow(ye(this.e,t.y,Math.sin(t.y)),this.B))-(at=1/lt)),Y=.5*(lt+at),et=Math.sin(this.B*t.x),V=(E*this.singam-et*this.cosgam)/Y,Math.abs(Math.abs(V)-1)<i)throw new Error;It=.5*this.ArB*Math.log((1-V)/(1+V)),at=Math.cos(this.B*t.x),yt=Math.abs(at)<ns?this.A*t.x:this.ArB*Math.atan2(E*this.cosgam+et*this.singam,at)}else It=t.y>0?this.v_pole_n:this.v_pole_s,yt=this.ArB*t.y;return this.no_rot?(d.x=yt,d.y=It):(d.x=It*this.cosrot+(yt-=this.u_0)*this.sinrot,d.y=yt*this.cosrot-It*this.sinrot),d.x=this.a*d.x+this.x0,d.y=this.a*d.y+this.y0,d},inverse:function Vo(t){var d,E,Y,V,et,lt,at,yt={};if(t.x=1/this.a*(t.x-this.x0),t.y=1/this.a*(t.y-this.y0),this.no_rot?(E=t.y,d=t.x):(E=t.x*this.cosrot-t.y*this.sinrot,d=t.y*this.cosrot+t.x*this.sinrot+this.u_0),V=.5*((Y=Math.exp(-this.BrA*E))-1/Y),et=.5*(Y+1/Y),at=((lt=Math.sin(this.BrA*d))*this.cosgam+V*this.singam)/et,Math.abs(Math.abs(at)-1)<i)yt.x=0,yt.y=at<0?-c:c;else{if(yt.y=this.E/Math.sqrt((1+at)/(1-at)),yt.y=Pe(this.e,Math.pow(yt.y,1/this.B)),yt.y===1/0)throw new Error;yt.x=-this.rB*Math.atan2(V*this.cosgam-lt*this.singam,Math.cos(this.BrA*d))}return yt.x+=this.lam0,yt},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},Xo={init:function ro(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<i)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var d=Math.sin(this.lat1),E=Math.cos(this.lat1),Y=Kt(this.e,d,E),V=ye(this.e,this.lat1,d),et=Math.sin(this.lat2),lt=Math.cos(this.lat2),at=Kt(this.e,et,lt),yt=ye(this.e,this.lat2,et),It=ye(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>i?Math.log(Y/at)/Math.log(V/yt):d,isNaN(this.ns)&&(this.ns=d),this.f0=Y/(this.ns*Math.pow(V,this.ns)),this.rh=this.a*this.f0*Math.pow(It,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function Pn(t){var d=t.x,E=t.y;Math.abs(2*Math.abs(E)-Math.PI)<=i&&(E=Yt(E)*(c-2*i));var V,et,Y=Math.abs(Math.abs(E)-c);if(Y>i)V=ye(this.e,E,Math.sin(E)),et=this.a*this.f0*Math.pow(V,this.ns);else{if((Y=E*this.ns)<=0)return null;et=0}var lt=this.ns*Jt(d-this.long0);return t.x=this.k0*(et*Math.sin(lt))+this.x0,t.y=this.k0*(this.rh-et*Math.cos(lt))+this.y0,t},inverse:function oo(t){var d,E,Y,V,et,lt=(t.x-this.x0)/this.k0,at=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(d=Math.sqrt(lt*lt+at*at),E=1):(d=-Math.sqrt(lt*lt+at*at),E=-1);var yt=0;if(0!==d&&(yt=Math.atan2(E*lt,E*at)),0!==d||this.ns>0){if(E=1/this.ns,Y=Math.pow(d/(this.a*this.f0),E),-9999===(V=Pe(this.e,Y)))return null}else V=-c;return et=Jt(yt/this.ns+this.long0),t.x=et,t.y=V,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},Yo={init:function ao(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function lo(t){var d,E,Y,V,et,lt,at,It=t.y,Xt=Jt(t.x-this.long0);return d=Math.pow((1+this.e*Math.sin(It))/(1-this.e*Math.sin(It)),this.alfa*this.e/2),E=2*(Math.atan(this.k*Math.pow(Math.tan(It/2+this.s45),this.alfa)/d)-this.s45),Y=-Xt*this.alfa,V=Math.asin(Math.cos(this.ad)*Math.sin(E)+Math.sin(this.ad)*Math.cos(E)*Math.cos(Y)),et=Math.asin(Math.cos(E)*Math.sin(Y)/Math.cos(V)),lt=this.n*et,at=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(V/2+this.s45),this.n),t.y=at*Math.cos(lt)/1,t.x=at*Math.sin(lt)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function ho(t){var d,E,Y,V,lt,at,yt,It=t.x;t.x=t.y,t.y=It,this.czech||(t.y*=-1,t.x*=-1),lt=Math.sqrt(t.x*t.x+t.y*t.y),V=Math.atan2(t.y,t.x)/Math.sin(this.s0),Y=2*(Math.atan(Math.pow(this.ro0/lt,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),d=Math.asin(Math.cos(this.ad)*Math.sin(Y)-Math.sin(this.ad)*Math.cos(Y)*Math.cos(V)),E=Math.asin(Math.cos(Y)*Math.sin(V)/Math.cos(d)),t.x=this.long0-E/this.alfa,at=d,yt=0;var Xt=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(d/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(at))/(1-this.e*Math.sin(at)),this.e/2))-this.s45),Math.abs(at-t.y)<1e-10&&(yt=1),at=t.y,Xt+=1}while(0===yt&&Xt<15);return Xt>=15?null:t},names:["Krovak","krovak"]};function Pi(t,d,E,Y,V){return t*V-d*Math.sin(2*V)+E*Math.sin(4*V)-Y*Math.sin(6*V)}function rs(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Un(t){return.375*t*(1+.25*t*(1+.46875*t))}function dn(t){return.05859375*t*t*(1+.75*t)}function Is(t){return t*t*t*(35/3072)}function os(t,d,E){var Y=d*E;return t/Math.sqrt(1-Y*Y)}function jn(t){return Math.abs(t)<c?t:t-Yt(t)*Math.PI}function as(t,d,E,Y,V){var et,lt;et=t/d;for(var at=0;at<15;at++)if(et+=lt=(t-(d*et-E*Math.sin(2*et)+Y*Math.sin(4*et)-V*Math.sin(6*et)))/(d-2*E*Math.cos(2*et)+4*Y*Math.cos(4*et)-6*V*Math.cos(6*et)),Math.abs(lt)<=1e-10)return et;return NaN}const Os={init:function Dr(){this.sphere||(this.e0=rs(this.es),this.e1=Un(this.es),this.e2=dn(this.es),this.e3=Is(this.es),this.ml0=this.a*Pi(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function Ho(t){var d,E,Y=t.x,V=t.y;if(Y=Jt(Y-this.long0),this.sphere)d=this.a*Math.asin(Math.cos(V)*Math.sin(Y)),E=this.a*(Math.atan2(Math.tan(V),Math.cos(Y))-this.lat0);else{var et=Math.sin(V),lt=Math.cos(V),at=os(this.a,this.e,et),yt=Math.tan(V)*Math.tan(V),It=Y*Math.cos(V),Xt=It*It,At=this.es*lt*lt/(1-this.es);d=at*It*(1-Xt*yt*(1/6-(8-yt+8*At)*Xt/120)),E=this.a*Pi(this.e0,this.e1,this.e2,this.e3,V)-this.ml0+at*et/lt*Xt*(.5+(5-yt+6*At)*Xt/24)}return t.x=d+this.x0,t.y=E+this.y0,t},inverse:function Lr(t){t.x-=this.x0,t.y-=this.y0;var Y,V,d=t.x/this.a,E=t.y/this.a;if(this.sphere){var et=E+this.lat0;Y=Math.asin(Math.sin(et)*Math.cos(d)),V=Math.atan2(Math.tan(d),Math.cos(et))}else{var at=as(this.ml0/this.a+E,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(at)-c)<=i)return t.x=this.long0,t.y=c,E<0&&(t.y*=-1),t;var yt=os(this.a,this.e,Math.sin(at)),It=yt*yt*yt/this.a/this.a*(1-this.es),Xt=Math.pow(Math.tan(at),2),At=d*this.a/yt,ne=At*At;Y=at-yt*Math.tan(at)/It*At*At*(.5-(1+3*Xt)*At*At/24),V=At*(1-ne*(Xt/3+(1+3*Xt)*Xt*ne/15))/Math.cos(at)}return t.x=Jt(V+this.long0),t.y=jn(Y),t},names:["Cassini","Cassini_Soldner","cass"]};function Sn(t,d){var E;return t>1e-7?(1-t*t)*(d/(1-(E=t*d)*E)-.5/t*Math.log((1-E)/(1+E))):2*d}const Fr={init:function Ar(){var d,t=Math.abs(this.lat0);if(this.mode=Math.abs(t-c)<i?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<i?this.EQUIT:this.OBLIQ,this.es>0)switch(this.qp=Sn(this.e,1),this.mmf=.5/(1-this.es),this.apa=function hs(t){var d,E=[];return E[0]=.3333333333333333*t,E[0]+=.17222222222222222*(d=t*t),E[1]=.06388888888888888*d,E[0]+=.10257936507936508*(d*=t),E[1]+=.0664021164021164*d,E[2]=.016415012942191543*d,E}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),d=Math.sin(this.lat0),this.sinb1=Sn(this.e,d)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*d*d)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function co(t){var d,E,Y,V,et,lt,at,yt,It,Xt,At=t.x,ne=t.y;if(At=Jt(At-this.long0),this.sphere){if(et=Math.sin(ne),Xt=Math.cos(ne),Y=Math.cos(At),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((E=this.mode===this.EQUIT?1+Xt*Y:1+this.sinph0*et+this.cosph0*Xt*Y)<=i)return null;d=(E=Math.sqrt(2/E))*Xt*Math.sin(At),E*=this.mode===this.EQUIT?et:this.cosph0*et-this.sinph0*Xt*Y}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(Y=-Y),Math.abs(ne+this.lat0)<i)return null;E=e-.5*ne,d=(E=2*(this.mode===this.S_POLE?Math.cos(E):Math.sin(E)))*Math.sin(At),E*=Y}}else{switch(at=0,yt=0,It=0,Y=Math.cos(At),V=Math.sin(At),et=Math.sin(ne),lt=Sn(this.e,et),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(at=lt/this.qp,yt=Math.sqrt(1-at*at)),this.mode){case this.OBLIQ:It=1+this.sinb1*at+this.cosb1*yt*Y;break;case this.EQUIT:It=1+yt*Y;break;case this.N_POLE:It=c+ne,lt=this.qp-lt;break;case this.S_POLE:It=ne-c,lt=this.qp+lt}if(Math.abs(It)<i)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:It=Math.sqrt(2/It),E=this.mode===this.OBLIQ?this.ymf*It*(this.cosb1*at-this.sinb1*yt*Y):(It=Math.sqrt(2/(1+yt*Y)))*at*this.ymf,d=this.xmf*It*yt*V;break;case this.N_POLE:case this.S_POLE:lt>=0?(d=(It=Math.sqrt(lt))*V,E=Y*(this.mode===this.S_POLE?It:-It)):d=E=0}}return t.x=this.a*d+this.x0,t.y=this.a*E+this.y0,t},inverse:function uo(t){t.x-=this.x0,t.y-=this.y0;var Y,V,et,lt,at,yt,It,d=t.x/this.a,E=t.y/this.a;if(this.sphere){var At,Xt=0,ne=0;if((V=.5*(At=Math.sqrt(d*d+E*E)))>1)return null;switch(V=2*Math.asin(V),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(ne=Math.sin(V),Xt=Math.cos(V)),this.mode){case this.EQUIT:V=Math.abs(At)<=i?0:Math.asin(E*ne/At),d*=ne,E=Xt*At;break;case this.OBLIQ:V=Math.abs(At)<=i?this.lat0:Math.asin(Xt*this.sinph0+E*ne*this.cosph0/At),d*=ne*this.cosph0,E=(Xt-Math.sin(V)*this.sinph0)*At;break;case this.N_POLE:E=-E,V=c-V;break;case this.S_POLE:V-=c}Y=0!==E||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(d,E):0}else{if(It=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(d/=this.dd,E*=this.dd,(yt=Math.sqrt(d*d+E*E))<i)return t.x=this.long0,t.y=this.lat0,t;lt=2*Math.asin(.5*yt/this.rq),et=Math.cos(lt),d*=lt=Math.sin(lt),this.mode===this.OBLIQ?(at=this.qp*(It=et*this.sinb1+E*lt*this.cosb1/yt),E=yt*this.cosb1*et-E*this.sinb1*lt):(at=this.qp*(It=E*lt/yt),E=yt*et)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(E=-E),!(at=d*d+E*E))return t.x=this.long0,t.y=this.lat0,t;It=1-at/this.qp,this.mode===this.S_POLE&&(It=-It)}Y=Math.atan2(d,E),V=function _o(t,d){var E=t+t;return t+d[0]*Math.sin(E)+d[1]*Math.sin(E+E)+d[2]*Math.sin(E+E+E)}(Math.asin(It),this.apa)}return t.x=Jt(this.long0+Y),t.y=V,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Ji(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const mo={init:function Gn(){Math.abs(this.lat1+this.lat2)<i||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Kt(this.e3,this.sin_po,this.cos_po),this.qs1=Sn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Kt(this.e3,this.sin_po,this.cos_po),this.qs2=Sn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Sn(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>i?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function lr(t){var d=t.x,E=t.y;this.sin_phi=Math.sin(E),this.cos_phi=Math.cos(E);var Y=Sn(this.e3,this.sin_phi),V=this.a*Math.sqrt(this.c-this.ns0*Y)/this.ns0,et=this.ns0*Jt(d-this.long0),lt=V*Math.sin(et)+this.x0,at=this.rh-V*Math.cos(et)+this.y0;return t.x=lt,t.y=at,t},inverse:function Nr(t){var d,Y,V,et,lt;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(d=Math.sqrt(t.x*t.x+t.y*t.y),Y=1):(d=-Math.sqrt(t.x*t.x+t.y*t.y),Y=-1),V=0,0!==d&&(V=Math.atan2(Y*t.x,Y*t.y)),Y=d*this.ns0/this.a,lt=this.sphere?Math.asin((this.c-Y*Y)/(2*this.ns0)):this.phi1z(this.e3,(this.c-Y*Y)/this.ns0),et=Jt(V/this.ns0+this.long0),t.x=et,t.y=lt,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function hr(t,d){var E,V,et,lt,at=Ji(.5*d);if(t<i)return at;for(var yt=t*t,It=1;It<=25;It++)if(at+=lt=.5*(et=1-(V=t*(E=Math.sin(at)))*V)*et/Math.cos(at)*(d/(1-yt)-E/et+.5/t*Math.log((1-V)/(1+V))),Math.abs(lt)<=1e-7)return at;return null}},cr={init:function vo(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function yo(t){var d,E,Y,V,lt,at,yt,Xt=t.y;return Y=Jt(t.x-this.long0),d=Math.sin(Xt),E=Math.cos(Xt),V=Math.cos(Y),(lt=this.sin_p14*d+this.cos_p14*E*V)>0||Math.abs(lt)<=i?(at=this.x0+1*this.a*E*Math.sin(Y)/lt,yt=this.y0+1*this.a*(this.cos_p14*d-this.sin_p14*E*V)/lt):(at=this.x0+this.infinity_dist*E*Math.sin(Y),yt=this.y0+this.infinity_dist*(this.cos_p14*d-this.sin_p14*E*V)),t.x=at,t.y=yt,t},inverse:function kr(t){var d,E,Y,V,et,lt;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(d=Math.sqrt(t.x*t.x+t.y*t.y))?(V=Math.atan2(d,this.rc),E=Math.sin(V),lt=Ji((Y=Math.cos(V))*this.sin_p14+t.y*E*this.cos_p14/d),et=Math.atan2(t.x*E,d*this.cos_p14*Y-t.y*this.sin_p14*E),et=Jt(this.long0+et)):(lt=this.phic0,et=0),t.x=et,t.y=lt,t},names:["gnom"]},bn={init:function Zr(){this.sphere||(this.k0=Kt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function Ls(t){var Y,V,E=t.y,et=Jt(t.x-this.long0);if(this.sphere)Y=this.x0+this.a*et*Math.cos(this.lat_ts),V=this.y0+this.a*Math.sin(E)/Math.cos(this.lat_ts);else{var lt=Sn(this.e,Math.sin(E));Y=this.x0+this.a*this.k0*et,V=this.y0+this.a*lt*.5/this.k0}return t.x=Y,t.y=V,t},inverse:function vn(t){var d,E;return t.x-=this.x0,t.y-=this.y0,this.sphere?(d=Jt(this.long0+t.x/this.a/Math.cos(this.lat_ts)),E=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(E=function Eo(t,d){var E=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(d)-E)<1e-6)return d<0?-1*c:c;for(var V,et,lt,at,Y=Math.asin(.5*d),yt=0;yt<30;yt++)if(et=Math.sin(Y),lt=Math.cos(Y),at=t*et,Y+=V=Math.pow(1-at*at,2)/(2*lt)*(d/(1-t*t)-et/(1-at*at)+.5/t*Math.log((1-at)/(1+at))),Math.abs(V)<=1e-10)return Y;return NaN}(this.e,2*t.y*this.k0/this.a),d=Jt(this.long0+t.x/(this.a*this.k0))),t.x=d,t.y=E,t},names:["cea"]},ds={init:function us(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function Ur(t){var E=t.y,Y=Jt(t.x-this.long0),V=jn(E-this.lat0);return t.x=this.x0+this.a*Y*this.rc,t.y=this.y0+this.a*V,t},inverse:function ur(t){var E=t.y;return t.x=Jt(this.long0+(t.x-this.x0)/(this.a*this.rc)),t.y=jn(this.lat0+(E-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},zn={init:function As(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=rs(this.es),this.e1=Un(this.es),this.e2=dn(this.es),this.e3=Is(this.es),this.ml0=this.a*Pi(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function tn(t){var Y,V,et,E=t.y,lt=Jt(t.x-this.long0);if(et=lt*Math.sin(E),this.sphere)Math.abs(E)<=i?(Y=this.a*lt,V=-1*this.a*this.lat0):(Y=this.a*Math.sin(et)/Math.tan(E),V=this.a*(jn(E-this.lat0)+(1-Math.cos(et))/Math.tan(E)));else if(Math.abs(E)<=i)Y=this.a*lt,V=-1*this.ml0;else{var at=os(this.a,this.e,Math.sin(E))/Math.tan(E);Y=at*Math.sin(et),V=this.a*Pi(this.e0,this.e1,this.e2,this.e3,E)-this.ml0+at*(1-Math.cos(et))}return t.x=Y+this.x0,t.y=V+this.y0,t},inverse:function fr(t){var d,E,Y,V,et,lt,at,yt,It;if(Y=t.x-this.x0,V=t.y-this.y0,this.sphere)if(Math.abs(V+this.a*this.lat0)<=i)d=Jt(Y/this.a+this.long0),E=0;else{var Xt;for(at=Y*Y/this.a/this.a+(lt=this.lat0+V/this.a)*lt,yt=lt,et=20;et;--et)if(yt+=It=-1*(lt*(yt*(Xt=Math.tan(yt))+1)-yt-.5*(yt*yt+at)*Xt)/((yt-lt)/Xt-1),Math.abs(It)<=i){E=yt;break}d=Jt(this.long0+Math.asin(Y*Math.tan(yt)/this.a)/Math.sin(E))}else if(Math.abs(V+this.ml0)<=i)E=0,d=Jt(this.long0+Y/this.a);else{var At,ne,me,pe,ve;for(at=Y*Y/this.a/this.a+(lt=(this.ml0+V)/this.a)*lt,yt=lt,et=20;et;--et)if(ve=this.e*Math.sin(yt),At=Math.sqrt(1-ve*ve)*Math.tan(yt),ne=this.a*Pi(this.e0,this.e1,this.e2,this.e3,yt),me=this.e0-2*this.e1*Math.cos(2*yt)+4*this.e2*Math.cos(4*yt)-6*this.e3*Math.cos(6*yt),yt-=It=(lt*(At*(pe=ne/this.a)+1)-pe-.5*At*(pe*pe+at))/(this.es*Math.sin(2*yt)*(pe*pe+at-2*lt*pe)/(4*At)+(lt-pe)*(At*me-2/Math.sin(2*yt))-me),Math.abs(It)<=i){E=yt;break}At=Math.sqrt(1-this.es*Math.pow(Math.sin(E),2))*Math.tan(E),d=Jt(this.long0+Math.asin(Y*At/this.a)/Math.sin(E))}return t.x=d,t.y=E,t},names:["Polyconic","poly"]},_r={init:function ks(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function gr(t){var d,lt=(t.y-this.lat0)/h*1e-5,at=t.x-this.long0,yt=1,It=0;for(d=1;d<=10;d++)It+=this.A[d]*(yt*=lt);var ve,Xt=It,At=at,ne=1,me=0,Ie=0,Ae=0;for(d=1;d<=6;d++)ve=me*Xt+ne*At,Ie=Ie+this.B_re[d]*(ne=ne*Xt-me*At)-this.B_im[d]*(me=ve),Ae=Ae+this.B_im[d]*ne+this.B_re[d]*me;return t.x=Ae*this.a+this.x0,t.y=Ie*this.a+this.y0,t},inverse:function fs(t){var d,At,lt=(t.y-this.y0)/this.a,at=(t.x-this.x0)/this.a,yt=1,It=0,ne=0,me=0;for(d=1;d<=6;d++)At=It*lt+yt*at,ne=ne+this.C_re[d]*(yt=yt*lt-It*at)-this.C_im[d]*(It=At),me=me+this.C_im[d]*yt+this.C_re[d]*It;for(var pe=0;pe<this.iterations;pe++){var Ye,ve=ne,Ie=me,ti=lt,ii=at;for(d=2;d<=6;d++)Ye=Ie*ne+ve*me,ti+=(d-1)*(this.B_re[d]*(ve=ve*ne-Ie*me)-this.B_im[d]*(Ie=Ye)),ii+=(d-1)*(this.B_im[d]*ve+this.B_re[d]*Ie);ve=1,Ie=0;var be=this.B_re[1],ni=this.B_im[1];for(d=2;d<=6;d++)Ye=Ie*ne+ve*me,be+=d*(this.B_re[d]*(ve=ve*ne-Ie*me)-this.B_im[d]*(Ie=Ye)),ni+=d*(this.B_im[d]*ve+this.B_re[d]*Ie);var Ne=be*be+ni*ni;ne=(ti*be+ii*ni)/Ne,me=(ii*be-ti*ni)/Ne}var Fe=ne,ci=me,an=1,qi=0;for(d=1;d<=9;d++)qi+=this.D[d]*(an*=Fe);var Vn=this.lat0+qi*h*1e5;return t.x=this.long0+ci,t.y=Vn,t},names:["New_Zealand_Map_Grid","nzmg"]},yn={init:function xo(){},forward:function Wn(t){var E=t.y,Y=Jt(t.x-this.long0),V=this.x0+this.a*Y,et=this.y0+this.a*Math.log(Math.tan(Math.PI/4+E/2.5))*1.25;return t.x=V,t.y=et,t},inverse:function Zs(t){t.x-=this.x0,t.y-=this.y0;var d=Jt(this.long0+t.x/this.a),E=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=d,t.y=E,t},names:["Miller_Cylindrical","mill"]},Co={init:function Bs(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Ts(this.es)},forward:function ia(t){var d,E,Y=t.x,V=t.y;if(Y=Jt(Y-this.long0),this.sphere){if(this.m)for(var et=this.n*Math.sin(V),lt=20;lt;--lt){var at=(this.m*V+Math.sin(V)-et)/(this.m+Math.cos(V));if(V-=at,Math.abs(at)<i)break}else V=1!==this.n?Math.asin(this.n*Math.sin(V)):V;d=this.a*this.C_x*Y*(this.m+Math.cos(V)),E=this.a*this.C_y*V}else{var yt=Math.sin(V),It=Math.cos(V);E=this.a*ki(V,yt,It,this.en),d=this.a*Y*It/Math.sqrt(1-this.es*yt*yt)}return t.x=d,t.y=E,t},inverse:function na(t){var d,Y,V;return t.x-=this.x0,Y=t.x/this.a,t.y-=this.y0,d=t.y/this.a,this.sphere?(d/=this.C_y,Y/=this.C_x*(this.m+Math.cos(d)),this.m?d=Ji((this.m*d+Math.sin(d))/this.n):1!==this.n&&(d=Ji(Math.sin(d)/this.n)),Y=Jt(Y+this.long0),d=jn(d)):(d=Ps(t.y/this.a,this.es,this.en),(V=Math.abs(d))<c?(V=Math.sin(d),Y=Jt(this.long0+t.x*Math.sqrt(1-this.es*V*V)/(this.a*Math.cos(d)))):V-i<c&&(Y=this.long0)),t.x=Y,t.y=d,t},names:["Sinusoidal","sinu"]},Wr={init:function Us(){},forward:function Gr(t){for(var E=t.y,Y=Jt(t.x-this.long0),V=E,et=Math.PI*Math.sin(E);;){var lt=-(V+Math.sin(V)-et)/(1+Math.cos(V));if(V+=lt,Math.abs(lt)<i)break}V/=2,Math.PI/2-Math.abs(E)<i&&(Y=0);var at=.900316316158*this.a*Y*Math.cos(V)+this.x0,yt=1.4142135623731*this.a*Math.sin(V)+this.y0;return t.x=at,t.y=yt,t},inverse:function Mo(t){var d,E;t.x-=this.x0,t.y-=this.y0,E=t.y/(1.4142135623731*this.a),Math.abs(E)>.999999999999&&(E=.999999999999),d=Math.asin(E);var Y=Jt(this.long0+t.x/(.900316316158*this.a*Math.cos(d)));Y<-Math.PI&&(Y=-Math.PI),Y>Math.PI&&(Y=Math.PI),E=(2*d+Math.sin(2*d))/Math.PI,Math.abs(E)>1&&(E=1);var V=Math.asin(E);return t.x=Y,t.y=V,t},names:["Mollweide","moll"]},Ge={init:function mr(){Math.abs(this.lat1+this.lat2)<i||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=rs(this.es),this.e1=Un(this.es),this.e2=dn(this.es),this.e3=Is(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Kt(this.e,this.sinphi,this.cosphi),this.ml1=Pi(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<i?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Kt(this.e,this.sinphi,this.cosphi),this.ml2=Pi(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Pi(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function In(t){var Y,d=t.x,E=t.y;if(this.sphere)Y=this.a*(this.g-E);else{var V=Pi(this.e0,this.e1,this.e2,this.e3,E);Y=this.a*(this.g-V)}var et=this.ns*Jt(d-this.long0),lt=this.x0+Y*Math.sin(et),at=this.y0+this.rh-Y*Math.cos(et);return t.x=lt,t.y=at,t},inverse:function js(t){var d,E,Y,V;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(E=Math.sqrt(t.x*t.x+t.y*t.y),d=1):(E=-Math.sqrt(t.x*t.x+t.y*t.y),d=-1);var et=0;return 0!==E&&(et=Math.atan2(d*t.x,d*t.y)),this.sphere?(V=Jt(this.long0+et/this.ns),Y=jn(this.g-E/this.a),t.x=V,t.y=Y,t):(Y=as(this.g-E/this.a,this.e0,this.e1,this.e2,this.e3),V=Jt(this.long0+et/this.ns),t.x=V,t.y=Y,t)},names:["Equidistant_Conic","eqdc"]},On={init:function yr(){this.R=this.a},forward:function Kr(t){var V,et,E=t.y,Y=Jt(t.x-this.long0);Math.abs(E)<=i&&(V=this.x0+this.R*Y,et=this.y0);var lt=Ji(2*Math.abs(E/Math.PI));(Math.abs(Y)<=i||Math.abs(Math.abs(E)-c)<=i)&&(V=this.x0,et=E>=0?this.y0+Math.PI*this.R*Math.tan(.5*lt):this.y0+Math.PI*this.R*-Math.tan(.5*lt));var at=.5*Math.abs(Math.PI/Y-Y/Math.PI),yt=at*at,It=Math.sin(lt),Xt=Math.cos(lt),At=Xt/(It+Xt-1),me=At*(2/It-1),pe=me*me,ve=Math.PI*this.R*(at*(At-pe)+Math.sqrt(yt*(At-pe)*(At-pe)-(pe+yt)*(At*At-pe)))/(pe+yt);Y<0&&(ve=-ve),V=this.x0+ve;var Ie=yt+At;return ve=Math.PI*this.R*(me*Ie-at*Math.sqrt((pe+yt)*(yt+1)-Ie*Ie))/(pe+yt),et=E>=0?this.y0+ve:this.y0-ve,t.x=V,t.y=et,t},inverse:function To(t){var d,E,Y,V,et,lt,at,yt,It,Xt,At,ne;return t.x-=this.x0,t.y-=this.y0,At=Math.PI*this.R,et=(Y=t.x/At)*Y+(V=t.y/At)*V,At=3*(V*V/(yt=-2*(lt=-Math.abs(V)*(1+et))+1+2*V*V+et*et)+(2*(at=lt-2*V*V+Y*Y)*at*at/yt/yt/yt-9*lt*at/yt/yt)/27)/(It=(lt-at*at/3/yt)/yt)/(Xt=2*Math.sqrt(-It/3)),Math.abs(At)>1&&(At=At>=0?1:-1),ne=Math.acos(At)/3,E=t.y>=0?(-Xt*Math.cos(ne+Math.PI/3)-at/3/yt)*Math.PI:-(-Xt*Math.cos(ne+Math.PI/3)-at/3/yt)*Math.PI,d=Math.abs(Y)<i?this.long0:Jt(this.long0+Math.PI*(et-1+Math.sqrt(1+2*(Y*Y-V*V)+et*et))/2/Y),t.x=d,t.y=E,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},bo={init:function So(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function Gs(t){var lt,at,yt,It,Xt,At,ne,me,pe,ve,Ie,Ae,Ye,ti,ii,be,ni,Ne,Fe,ci,an,qi,d=t.x,E=t.y,Y=Math.sin(t.y),V=Math.cos(t.y),et=Jt(d-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=i?(t.x=this.x0+this.a*(c-E)*Math.sin(et),t.y=this.y0-this.a*(c-E)*Math.cos(et),t):Math.abs(this.sin_p12+1)<=i?(t.x=this.x0+this.a*(c+E)*Math.sin(et),t.y=this.y0+this.a*(c+E)*Math.cos(et),t):(Ne=this.sin_p12*Y+this.cos_p12*V*Math.cos(et),ni=(be=Math.acos(Ne))?be/Math.sin(be):1,t.x=this.x0+this.a*ni*V*Math.sin(et),t.y=this.y0+this.a*ni*(this.cos_p12*Y-this.sin_p12*V*Math.cos(et)),t):(lt=rs(this.es),at=Un(this.es),yt=dn(this.es),It=Is(this.es),Math.abs(this.sin_p12-1)<=i?(Xt=this.a*Pi(lt,at,yt,It,c),At=this.a*Pi(lt,at,yt,It,E),t.x=this.x0+(Xt-At)*Math.sin(et),t.y=this.y0-(Xt-At)*Math.cos(et),t):Math.abs(this.sin_p12+1)<=i?(Xt=this.a*Pi(lt,at,yt,It,c),At=this.a*Pi(lt,at,yt,It,E),t.x=this.x0+(Xt+At)*Math.sin(et),t.y=this.y0+(Xt+At)*Math.cos(et),t):(ne=Y/V,me=os(this.a,this.e,this.sin_p12),pe=os(this.a,this.e,Y),ve=Math.atan((1-this.es)*ne+this.es*me*this.sin_p12/(pe*V)),Fe=0===(Ie=Math.atan2(Math.sin(et),this.cos_p12*Math.tan(ve)-this.sin_p12*Math.cos(et)))?Math.asin(this.cos_p12*Math.sin(ve)-this.sin_p12*Math.cos(ve)):Math.abs(Math.abs(Ie)-Math.PI)<=i?-Math.asin(this.cos_p12*Math.sin(ve)-this.sin_p12*Math.cos(ve)):Math.asin(Math.sin(et)*Math.cos(ve)/Math.sin(Ie)),Ae=this.e*this.sin_p12/Math.sqrt(1-this.es),Ye=this.e*this.cos_p12*Math.cos(Ie)/Math.sqrt(1-this.es),t.x=this.x0+(be=me*Fe*(1-(ci=Fe*Fe)*(ii=Ye*Ye)*(1-ii)/6+(an=ci*Fe)/8*(ti=Ae*Ye)*(1-2*ii)+(qi=an*Fe)/120*(ii*(4-7*ii)-3*Ae*Ae*(1-7*ii))-qi*Fe/48*ti))*Math.sin(Ie),t.y=this.y0+be*Math.cos(Ie),t))},inverse:function Vr(t){var d,E,Y,V,et,lt,at,yt,It,Xt,At,ne,pe,ve,Ie,Ae,Ye,ti,ii,be,ni,Ne,Fe;return t.x-=this.x0,t.y-=this.y0,this.sphere?(d=Math.sqrt(t.x*t.x+t.y*t.y))>2*c*this.a?void 0:(E=d/this.a,Y=Math.sin(E),V=Math.cos(E),et=this.long0,Math.abs(d)<=i?lt=this.lat0:(lt=Ji(V*this.sin_p12+t.y*Y*this.cos_p12/d),at=Math.abs(this.lat0)-c,et=Math.abs(at)<=i?Jt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)):Jt(this.long0+Math.atan2(t.x*Y,d*this.cos_p12*V-t.y*this.sin_p12*Y))),t.x=et,t.y=lt,t):(yt=rs(this.es),It=Un(this.es),Xt=dn(this.es),At=Is(this.es),Math.abs(this.sin_p12-1)<=i?(lt=as(((ne=this.a*Pi(yt,It,Xt,At,c))-(d=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,yt,It,Xt,At),et=Jt(this.long0+Math.atan2(t.x,-1*t.y)),t.x=et,t.y=lt,t):Math.abs(this.sin_p12+1)<=i?(ne=this.a*Pi(yt,It,Xt,At,c),lt=as(((d=Math.sqrt(t.x*t.x+t.y*t.y))-ne)/this.a,yt,It,Xt,At),et=Jt(this.long0+Math.atan2(t.x,t.y)),t.x=et,t.y=lt,t):(d=Math.sqrt(t.x*t.x+t.y*t.y),Ie=Math.atan2(t.x,t.y),pe=os(this.a,this.e,this.sin_p12),Ae=Math.cos(Ie),ii=3*this.es*(1-(ti=-(Ye=this.e*this.cos_p12*Ae)*Ye/(1-this.es)))*this.sin_p12*this.cos_p12*Ae/(1-this.es),Ne=1-ti*(ni=(be=d/pe)-ti*(1+ti)*Math.pow(be,3)/6-ii*(1+3*ti)*Math.pow(be,4)/24)*ni/2-be*ni*ni*ni/6,ve=Math.asin(this.sin_p12*Math.cos(ni)+this.cos_p12*Math.sin(ni)*Ae),et=Jt(this.long0+Math.asin(Math.sin(Ie)*Math.sin(ni)/Math.cos(ve))),Fe=Math.sin(ve),lt=Math.atan2((Fe-this.es*Ne*this.sin_p12)*Math.tan(ve),Fe*(1-this.es)),t.x=et,t.y=lt,t))},names:["Azimuthal_Equidistant","aeqd"]},xn={init:function Ro(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function sa(t){var d,E,Y,V,lt,at,yt,Xt=t.y;return Y=Jt(t.x-this.long0),d=Math.sin(Xt),E=Math.cos(Xt),V=Math.cos(Y),((lt=this.sin_p14*d+this.cos_p14*E*V)>0||Math.abs(lt)<=i)&&(at=1*this.a*E*Math.sin(Y),yt=this.y0+1*this.a*(this.cos_p14*d-this.sin_p14*E*V)),t.x=at,t.y=yt,t},inverse:function Yr(t){var d,E,Y,V,et,lt,at;return t.x-=this.x0,t.y-=this.y0,E=Ji((d=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),Y=Math.sin(E),V=Math.cos(E),lt=this.long0,Math.abs(d)<=i?(at=this.lat0,t.x=lt,t.y=at,t):(at=Ji(V*this.sin_p14+t.y*Y*this.cos_p14/d),et=Math.abs(this.lat0)-c,Math.abs(et)<=i?(lt=Jt(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=lt,t.y=at,t):(lt=Jt(this.long0+Math.atan2(t.x*Y,d*this.cos_p14*V-t.y*this.sin_p14*Y)),t.x=lt,t.y=at,t))},names:["ortho"]};function tt(t,d,E,Y){var V;return t<i?(Y.value=1,V=0):(V=Math.atan2(d,E),Math.abs(V)<=e?Y.value=1:V>e&&V<=c+e?(Y.value=2,V-=c):V>c+e||V<=-(c+e)?(Y.value=3,V=V>=0?V-x:V+x):(Y.value=4,V+=c)),V}function ft(t,d){var E=t+d;return E<-x?E+=P:E>+x&&(E-=P),E}const te={init:function ct(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=c-e/2?5:this.lat0<=-(c-e/2)?6:Math.abs(this.long0)<=e?1:Math.abs(this.long0)<=c+e?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function F(t){var E,Y,V,et,lt,at,d={x:0,y:0},yt={value:0};if(t.x-=this.long0,E=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,Y=t.x,5===this.face)et=c-E,Y>=e&&Y<=c+e?(yt.value=1,V=Y-c):Y>c+e||Y<=-(c+e)?(yt.value=2,V=Y>0?Y-x:Y+x):Y>-(c+e)&&Y<=-e?(yt.value=3,V=Y+c):(yt.value=4,V=Y);else if(6===this.face)et=c+E,Y>=e&&Y<=c+e?(yt.value=1,V=-Y+c):Y<e&&Y>=-e?(yt.value=2,V=-Y):Y<-e&&Y>=-(c+e)?(yt.value=3,V=-Y-c):(yt.value=4,V=Y>0?-Y+x:-Y-x);else{var It,Xt,At,ne,me,pe;2===this.face?Y=ft(Y,+c):3===this.face?Y=ft(Y,+x):4===this.face&&(Y=ft(Y,-c)),ne=Math.sin(E),me=Math.cos(E),pe=Math.sin(Y),It=me*Math.cos(Y),Xt=me*pe,At=ne,1===this.face?V=tt(et=Math.acos(It),At,Xt,yt):2===this.face?V=tt(et=Math.acos(Xt),At,-It,yt):3===this.face?V=tt(et=Math.acos(-It),At,-Xt,yt):4===this.face?V=tt(et=Math.acos(-Xt),At,It,yt):(et=V=0,yt.value=1)}return at=Math.atan(12/x*(V+Math.acos(Math.sin(V)*Math.cos(e))-c)),lt=Math.sqrt((1-Math.cos(et))/(Math.cos(at)*Math.cos(at))/(1-Math.cos(Math.atan(1/Math.cos(V))))),2===yt.value?at+=c:3===yt.value?at+=x:4===yt.value&&(at+=1.5*x),d.x=lt*Math.cos(at),d.y=lt*Math.sin(at),d.x=d.x*this.a+this.x0,d.y=d.y*this.a+this.y0,t.x=d.x,t.y=d.y,t},inverse:function I(t){var E,Y,V,et,lt,at,yt,It,Xt,ve,Ie,Ae,d={lam:0,phi:0},At={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,Y=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),E=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?At.value=1:t.y>=0&&t.y>=Math.abs(t.x)?(At.value=2,E-=c):t.x<0&&-t.x>=Math.abs(t.y)?(At.value=3,E=E<0?E+x:E-x):(At.value=4,E+=c),Xt=x/12*Math.tan(E),lt=Math.sin(Xt)/(Math.cos(Xt)-1/Math.sqrt(2)),at=Math.atan(lt),(yt=1-(V=Math.cos(E))*V*(et=Math.tan(Y))*et*(1-Math.cos(Math.atan(1/Math.cos(at)))))<-1?yt=-1:yt>1&&(yt=1),5===this.face)It=Math.acos(yt),d.phi=c-It,d.lam=1===At.value?at+c:2===At.value?at<0?at+x:at-x:3===At.value?at-c:at;else if(6===this.face)It=Math.acos(yt),d.phi=It-c,d.lam=1===At.value?-at+c:2===At.value?-at:3===At.value?-at-c:at<0?-at-x:-at+x;else{var ne,me,pe;Xt=(ne=yt)*ne,me=(Xt+=(pe=Xt>=1?0:Math.sqrt(1-Xt)*Math.sin(at))*pe)>=1?0:Math.sqrt(1-Xt),2===At.value?(Xt=me,me=-pe,pe=Xt):3===At.value?(me=-me,pe=-pe):4===At.value&&(Xt=me,me=pe,pe=-Xt),2===this.face?(Xt=ne,ne=-me,me=Xt):3===this.face?(ne=-ne,me=-me):4===this.face&&(Xt=ne,ne=me,me=-Xt),d.phi=Math.acos(-pe)-c,d.lam=Math.atan2(me,ne),2===this.face?d.lam=ft(d.lam,-c):3===this.face?d.lam=ft(d.lam,-x):4===this.face&&(d.lam=ft(d.lam,+c))}return 0!==this.es&&(ve=d.phi<0?1:0,Ie=Math.tan(d.phi),Ae=this.b/Math.sqrt(Ie*Ie+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-Ae*Ae)/(this.one_minus_f*Ae)),ve&&(d.phi=-d.phi)),d.lam+=this.long0,t.x=d.lam,t.y=d.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var ue=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Oe=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],on=function(t,d){return t[0]+d*(t[1]+d*(t[2]+d*t[3]))};const Ga={init:function Hr(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function Jr(t){var d=Jt(t.x-this.long0),E=Math.abs(t.y),Y=Math.floor(11.459155902616464*E);Y<0?Y=0:Y>=18&&(Y=17);var V={x:on(ue[Y],E=m*(E-.08726646259971647*Y))*d,y:on(Oe[Y],E)};return t.y<0&&(V.y=-V.y),V.x=V.x*this.a*.8487+this.x0,V.y=V.y*this.a*1.3523+this.y0,V},inverse:function zs(t){var d={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(d.y>=1)d.x/=ue[18][0],d.y=t.y<0?-c:c;else{var E=Math.floor(18*d.y);for(E<0?E=0:E>=18&&(E=17);;)if(Oe[E][0]>d.y)--E;else{if(!(Oe[E+1][0]<=d.y))break;++E}var Y=Oe[E],V=5*(d.y-Y[0])/(Oe[E+1][0]-Y[0]);V=function en(t,d,E,Y){for(var V=d;Y;--Y){var et=t(V);if(V-=et,Math.abs(et)<E)break}return V}(function(et){return(on(Y,et)-d.y)/function(t,d){return t[1]+d*(2*t[2]+3*d*t[3])}(Y,et)},V,i,100),d.x/=on(ue[E],V),d.y=(5*E+V)*l,t.y<0&&(d.y=-d.y)}return d.x=Jt(d.x+this.long0),d},names:["Robinson","robin"]},o={init:function za(){this.name="geocent"},forward:function ma(t){return si(t,this.es,this.a)},inverse:function Wa(t){return pi(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var a={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const Ot={init:function b(){if(Object.keys(a).forEach(function(E){if(typeof this[E]>"u")this[E]=a[E].def;else{if(a[E].num&&isNaN(this[E]))throw new Error("Invalid parameter value, must be numeric "+E+" = "+this[E]);a[E].num&&(this[E]=parseFloat(this[E]))}a[E].degrees&&(this[E]=this[E]*l)}.bind(this)),Math.abs(Math.abs(this.lat0)-c)<i?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<i?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,d=this.azi;this.cg=Math.cos(d),this.sg=Math.sin(d),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function W(t){t.x-=this.long0;var V,et,lt,at,d=Math.sin(t.y),E=Math.cos(t.y),Y=Math.cos(t.x);switch(this.mode){case 3:et=this.sinph0*d+this.cosph0*E*Y;break;case 2:et=E*Y;break;case 1:et=-d;break;case 0:et=d}switch(V=(et=this.pn1/(this.p-et))*E*Math.sin(t.x),this.mode){case 3:et*=this.cosph0*d-this.sinph0*E*Y;break;case 2:et*=d;break;case 0:et*=-E*Y;break;case 1:et*=E*Y}return V=(V*this.cg-et*this.sg)*this.cw*(at=1/((lt=et*this.cg+V*this.sg)*this.sw*this.h1+this.cw)),et=lt*at,t.x=V*this.a,t.y=et*this.a,t},inverse:function nt(t){t.x/=this.a,t.y/=this.a;var E,Y,V,d={x:t.x,y:t.y};t.x=(E=this.pn1*t.x*(V=1/(this.pn1-t.y*this.sw)))*this.cg+(Y=this.pn1*t.y*this.cw*V)*this.sg,t.y=Y*this.cg-E*this.sg;var et=Vi(t.x,t.y);if(Math.abs(et)<i)d.x=0,d.y=t.y;else{var lt,at;switch(at=1-et*et*this.pfact,at=(this.p-Math.sqrt(at))/(this.pn1/et+et/this.pn1),lt=Math.sqrt(1-at*at),this.mode){case 3:d.y=Math.asin(lt*this.sinph0+t.y*at*this.cosph0/et),t.y=(lt-this.sinph0*Math.sin(d.y))*et,t.x*=at*this.cosph0;break;case 2:d.y=Math.asin(t.y*at/et),t.y=lt*et,t.x*=at;break;case 0:d.y=Math.asin(lt),t.y=-t.y;break;case 1:d.y=-Math.asin(lt)}d.x=Math.atan2(t.x,t.y)}return t.x=d.x+this.long0,t.y=d.y,t},names:["Tilted_Perspective","tpers"]},Ee={init:function Ut(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,d=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=d,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function Gt(t){var Y,V,et,lt,d=t.x,E=t.y;if(d-=this.long0,"ellipse"===this.shape){E=Math.atan(this.radius_p2*Math.tan(E));var at=this.radius_p/Vi(this.radius_p*Math.cos(E),Math.sin(E));if(V=at*Math.cos(d)*Math.cos(E),et=at*Math.sin(d)*Math.cos(E),lt=at*Math.sin(E),(this.radius_g-V)*V-et*et-lt*lt*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;Y=this.radius_g-V,this.flip_axis?(t.x=this.radius_g_1*Math.atan(et/Vi(lt,Y)),t.y=this.radius_g_1*Math.atan(lt/Y)):(t.x=this.radius_g_1*Math.atan(et/Y),t.y=this.radius_g_1*Math.atan(lt/Vi(et,Y)))}else"sphere"===this.shape&&(Y=Math.cos(E),V=Math.cos(d)*Y,et=Math.sin(d)*Y,lt=Math.sin(E),Y=this.radius_g-V,this.flip_axis?(t.x=this.radius_g_1*Math.atan(et/Vi(lt,Y)),t.y=this.radius_g_1*Math.atan(lt/Y)):(t.x=this.radius_g_1*Math.atan(et/Y),t.y=this.radius_g_1*Math.atan(lt/Vi(et,Y))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function Wt(t){var V,et,lt,at,d=-1,E=0,Y=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(Y=Math.tan(t.y/this.radius_g_1),E=Math.tan(t.x/this.radius_g_1)*Vi(1,Y)):(E=Math.tan(t.x/this.radius_g_1),Y=Math.tan(t.y/this.radius_g_1)*Vi(1,E));var yt=Y/this.radius_p;if((lt=(et=2*this.radius_g*d)*et-4*(V=E*E+yt*yt+d*d)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;at=(-et-Math.sqrt(lt))/(2*V),d=this.radius_g+at*d,E*=at,Y*=at,t.x=Math.atan2(E,d),t.y=Math.atan(Y*Math.cos(t.x)/d),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(Y=Math.tan(t.y/this.radius_g_1),E=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+Y*Y)):(E=Math.tan(t.x/this.radius_g_1),Y=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+E*E)),(lt=(et=2*this.radius_g*d)*et-4*(V=E*E+Y*Y+d*d)*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;at=(-et-Math.sqrt(lt))/(2*V),d=this.radius_g+at*d,E*=at,Y*=at,t.x=Math.atan2(E,d),t.y=Math.atan(Y*Math.cos(t.x)/d)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};Gi.defaultDatum="WGS84",Gi.Proj=Ve,Gi.WGS84=new Gi.Proj("WGS84"),Gi.Point=Es,Gi.toPoint=Ii,Gi.defs=_e,Gi.nadgrid=function ui(t,d){var E=new DataView(d),Y=function St(t){var d=t.getInt32(8,!1);return 11!==d&&(11!==(d=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(E),V=function bt(t,d){return{nFields:t.getInt32(8,d),nSubgridFields:t.getInt32(24,d),nSubgrids:t.getInt32(40,d),shiftType:Ft(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,d),fromSemiMinorAxis:t.getFloat64(136,d),toSemiMajorAxis:t.getFloat64(152,d),toSemiMinorAxis:t.getFloat64(168,d)}}(E,Y);V.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var et=function se(t,d,E){for(var V=[],et=0;et<d.nSubgrids;et++){var lt=Se(t,176,E),at=Le(t,176,lt,E),yt=Math.round(1+(lt.upperLongitude-lt.lowerLongitude)/lt.longitudeInterval),It=Math.round(1+(lt.upperLatitude-lt.lowerLatitude)/lt.latitudeInterval);V.push({ll:[rt(lt.lowerLongitude),rt(lt.lowerLatitude)],del:[rt(lt.longitudeInterval),rt(lt.latitudeInterval)],lim:[yt,It],count:lt.gridNodeCount,cvs:fe(at)})}return V}(E,V,Y),lt={header:V,subgrids:et};return _i[t]=lt,lt},Gi.transform=Ei,Gi.mgrs=Tr,Gi.version="__VERSION__",function Me(t){t.Proj.projections.add(Tn),t.Proj.projections.add(de),t.Proj.projections.add(li),t.Proj.projections.add(Yi),t.Proj.projections.add(is),t.Proj.projections.add(zo),t.Proj.projections.add(so),t.Proj.projections.add(Xo),t.Proj.projections.add(Yo),t.Proj.projections.add(Os),t.Proj.projections.add(Fr),t.Proj.projections.add(mo),t.Proj.projections.add(cr),t.Proj.projections.add(bn),t.Proj.projections.add(ds),t.Proj.projections.add(zn),t.Proj.projections.add(_r),t.Proj.projections.add(yn),t.Proj.projections.add(Co),t.Proj.projections.add(Wr),t.Proj.projections.add(Ge),t.Proj.projections.add(On),t.Proj.projections.add(bo),t.Proj.projections.add(xn),t.Proj.projections.add(te),t.Proj.projections.add(Ga),t.Proj.projections.add(o),t.Proj.projections.add(Ot),t.Proj.projections.add(Ee)}(Gi);const Ke=Gi},3036:function(Vt){Vt.exports=function(){"use strict";function gt(i,l,m,e,P){!function x(T,U,D,C,O){for(;C>D;){if(C-D>600){var X=C-D+1,$=U-D+1,dt=Math.log(X),B=.5*Math.exp(2*dt/3),k=.5*Math.sqrt(dt*B*(X-B)/X)*($-X/2<0?-1:1);x(T,U,Math.max(D,Math.floor(U-$*B/X+k)),Math.min(C,Math.floor(U+(X-$)*B/X+k)),O)}var M=T[U],R=D,K=C;for(r(T,D,U),O(T[C],M)>0&&r(T,D,C);R<K;){for(r(T,R,K),R++,K--;O(T[R],M)<0;)R++;for(;O(T[K],M)>0;)K--}0===O(T[D],M)?r(T,D,K):r(T,++K,C),K<=U&&(D=K+1),U<=K&&(C=K-1)}}(i,l,m||0,e||i.length-1,P||_)}function r(i,l,m){var e=i[l];i[l]=i[m],i[m]=e}function _(i,l){return i<l?-1:i>l?1:0}var g=function(i){void 0===i&&(i=9),this._maxEntries=Math.max(4,i),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function Q(i,l,m){if(!m)return l.indexOf(i);for(var e=0;e<l.length;e++)if(m(i,l[e]))return e;return-1}function H(i,l){j(i,0,i.children.length,l,i)}function j(i,l,m,e,P){P||(P=s(null)),P.minX=1/0,P.minY=1/0,P.maxX=-1/0,P.maxY=-1/0;for(var x=l;x<m;x++){var T=i.children[x];N(P,i.leaf?e(T):T)}return P}function N(i,l){return i.minX=Math.min(i.minX,l.minX),i.minY=Math.min(i.minY,l.minY),i.maxX=Math.max(i.maxX,l.maxX),i.maxY=Math.max(i.maxY,l.maxY),i}function w(i,l){return i.minX-l.minX}function S(i,l){return i.minY-l.minY}function v(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function h(i){return i.maxX-i.minX+(i.maxY-i.minY)}function c(i,l){return i.minX<=l.minX&&i.minY<=l.minY&&l.maxX<=i.maxX&&l.maxY<=i.maxY}function u(i,l){return l.minX<=i.maxX&&l.minY<=i.maxY&&l.maxX>=i.minX&&l.maxY>=i.minY}function s(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function f(i,l,m,e,P){for(var x=[l,m];x.length;)if(!((m=x.pop())-(l=x.pop())<=e)){var T=l+Math.ceil((m-l)/e/2)*e;gt(i,T,l,m,P),x.push(l,T,T,m)}}return g.prototype.all=function(){return this._all(this.data,[])},g.prototype.search=function(i){var l=this.data,m=[];if(!u(i,l))return m;for(var e=this.toBBox,P=[];l;){for(var x=0;x<l.children.length;x++){var T=l.children[x],U=l.leaf?e(T):T;u(i,U)&&(l.leaf?m.push(T):c(i,U)?this._all(T,m):P.push(T))}l=P.pop()}return m},g.prototype.collides=function(i){var l=this.data;if(!u(i,l))return!1;for(var m=[];l;){for(var e=0;e<l.children.length;e++){var P=l.children[e],x=l.leaf?this.toBBox(P):P;if(u(i,x)){if(l.leaf||c(i,x))return!0;m.push(P)}}l=m.pop()}return!1},g.prototype.load=function(i){if(!i||!i.length)return this;if(i.length<this._minEntries){for(var l=0;l<i.length;l++)this.insert(i[l]);return this}var m=this._build(i.slice(),0,i.length-1,0);if(this.data.children.length)if(this.data.height===m.height)this._splitRoot(this.data,m);else{if(this.data.height<m.height){var e=this.data;this.data=m,m=e}this._insert(m,this.data.height-m.height-1,!0)}else this.data=m;return this},g.prototype.insert=function(i){return i&&this._insert(i,this.data.height-1),this},g.prototype.clear=function(){return this.data=s([]),this},g.prototype.remove=function(i,l){if(!i)return this;for(var m,e,P,x=this.data,T=this.toBBox(i),U=[],D=[];x||U.length;){if(x||(x=U.pop(),e=U[U.length-1],m=D.pop(),P=!0),x.leaf){var C=Q(i,x.children,l);if(-1!==C)return x.children.splice(C,1),U.push(x),this._condense(U),this}P||x.leaf||!c(x,T)?e?(m++,x=e.children[m],P=!1):x=null:(U.push(x),D.push(m),m=0,e=x,x=x.children[0])}return this},g.prototype.toBBox=function(i){return i},g.prototype.compareMinX=function(i,l){return i.minX-l.minX},g.prototype.compareMinY=function(i,l){return i.minY-l.minY},g.prototype.toJSON=function(){return this.data},g.prototype.fromJSON=function(i){return this.data=i,this},g.prototype._all=function(i,l){for(var m=[];i;)i.leaf?l.push.apply(l,i.children):m.push.apply(m,i.children),i=m.pop();return l},g.prototype._build=function(i,l,m,e){var P,x=m-l+1,T=this._maxEntries;if(x<=T)return H(P=s(i.slice(l,m+1)),this.toBBox),P;e||(e=Math.ceil(Math.log(x)/Math.log(T)),T=Math.ceil(x/Math.pow(T,e-1))),(P=s([])).leaf=!1,P.height=e;var U=Math.ceil(x/T),D=U*Math.ceil(Math.sqrt(T));f(i,l,m,D,this.compareMinX);for(var C=l;C<=m;C+=D){var O=Math.min(C+D-1,m);f(i,C,O,U,this.compareMinY);for(var X=C;X<=O;X+=U){var $=Math.min(X+U-1,O);P.children.push(this._build(i,X,$,e-1))}}return H(P,this.toBBox),P},g.prototype._chooseSubtree=function(i,l,m,e){for(;e.push(l),!l.leaf&&e.length-1!==m;){for(var P=1/0,x=1/0,T=void 0,U=0;U<l.children.length;U++){var D=l.children[U],C=v(D),O=(X=i,$=D,(Math.max($.maxX,X.maxX)-Math.min($.minX,X.minX))*(Math.max($.maxY,X.maxY)-Math.min($.minY,X.minY))-C);O<x?(x=O,P=C<P?C:P,T=D):O===x&&C<P&&(P=C,T=D)}l=T||l.children[0]}var X,$;return l},g.prototype._insert=function(i,l,m){var e=m?i:this.toBBox(i),P=[],x=this._chooseSubtree(e,this.data,l,P);for(x.children.push(i),N(x,e);l>=0&&P[l].children.length>this._maxEntries;)this._split(P,l),l--;this._adjustParentBBoxes(e,P,l)},g.prototype._split=function(i,l){var m=i[l],e=m.children.length,P=this._minEntries;this._chooseSplitAxis(m,P,e);var x=this._chooseSplitIndex(m,P,e),T=s(m.children.splice(x,m.children.length-x));T.height=m.height,T.leaf=m.leaf,H(m,this.toBBox),H(T,this.toBBox),l?i[l-1].children.push(T):this._splitRoot(m,T)},g.prototype._splitRoot=function(i,l){this.data=s([i,l]),this.data.height=i.height+1,this.data.leaf=!1,H(this.data,this.toBBox)},g.prototype._chooseSplitIndex=function(i,l,m){for(var e,P,x,T,U,D,C,O=1/0,X=1/0,$=l;$<=m-l;$++){var dt=j(i,0,$,this.toBBox),B=j(i,$,m,this.toBBox),k=(P=dt,x=B,void 0,void 0,void 0,void 0,T=Math.max(P.minX,x.minX),U=Math.max(P.minY,x.minY),D=Math.min(P.maxX,x.maxX),C=Math.min(P.maxY,x.maxY),Math.max(0,D-T)*Math.max(0,C-U)),L=v(dt)+v(B);k<O?(O=k,e=$,X=L<X?L:X):k===O&&L<X&&(X=L,e=$)}return e||m-l},g.prototype._chooseSplitAxis=function(i,l,m){var e=i.leaf?this.compareMinX:w,P=i.leaf?this.compareMinY:S;this._allDistMargin(i,l,m,e)<this._allDistMargin(i,l,m,P)&&i.children.sort(e)},g.prototype._allDistMargin=function(i,l,m,e){i.children.sort(e);for(var P=this.toBBox,x=j(i,0,l,P),T=j(i,m-l,m,P),U=h(x)+h(T),D=l;D<m-l;D++){var C=i.children[D];N(x,i.leaf?P(C):C),U+=h(x)}for(var O=m-l-1;O>=l;O--){var X=i.children[O];N(T,i.leaf?P(X):X),U+=h(T)}return U},g.prototype._adjustParentBBoxes=function(i,l,m){for(var e=m;e>=0;e--)N(l[e],i)},g.prototype._condense=function(i){for(var l=i.length-1,m=void 0;l>=0;l--)0===i[l].children.length?l>0?(m=i[l-1].children).splice(m.indexOf(i[l]),1):this.clear():H(i[l],this.toBBox)},g}()},6797:(Vt,gt,r)=>{"use strict";r.d(gt,{H:()=>j});var _=r(882),g=r(3637),Q=r(6561),H=r(4869);function j(w=0,S,v){let h=-1;return(0,Q.k)(S)?h=Number(S)<1?1:Number(S):(0,H.K)(S)&&(v=S),(0,H.K)(v)||(v=g.P),new _.y(c=>{const u=(0,Q.k)(w)?w:+w-v.now();return v.schedule(N,u,{index:0,period:h,subscriber:c})})}function N(w){const{index:S,period:v,subscriber:h}=w;if(h.next(S),!h.closed){if(-1===v)return h.complete();w.index=S+1,this.schedule(w,v)}}},6561:(Vt,gt,r)=>{"use strict";r.d(gt,{k:()=>g});var _=r(9796);function g(Q){return!(0,_.k)(Q)&&Q-parseFloat(Q)+1>=0}},9880:(Vt,gt,r)=>{"use strict";r.d(gt,{_:()=>H});var _=r(4537);function g(j,N){}let Q=(()=>{class j{constructor(w){this.viewContainerRef=w}}return j.\u0275fac=function(w){return new(w||j)(_.Y36(_.s_b))},j.\u0275dir=_.lG2({type:j,selectors:[["","ukisAddHost",""]]}),j})(),H=(()=>{class j{constructor(){this.dynamicComponentChange=new _.vpe,this.subs=[]}loadComponent(){this.dynamicComponent&&(this.viewContainerRef=this.ukisAddHost.viewContainerRef,this.viewContainerRef.clear(),this.componentRef=this.viewContainerRef.createComponent(this.dynamicComponent.component),this.setInputOutputs())}setInputOutputs(){this.componentRef&&this.dynamicComponent.inputs&&Object.keys(this.dynamicComponent.inputs).map(S=>{const v=S;if(this.dynamicComponent.inputs){this.componentRef.instance[v]=this.dynamicComponent.inputs[v];const h=`${v}Change`;if(this.componentRef.instance[h]&&this.componentRef.instance[h]instanceof _.vpe){const c=this.componentRef.instance[h].subscribe(u=>{this.dynamicComponent.inputs&&(this.dynamicComponent.inputs[v]=u),this.dynamicComponent.outputs&&this.dynamicComponent.outputs[h]&&this.dynamicComponent.outputs[h](u),this.dynamicComponentChange.emit(this.dynamicComponent)});this.subs.push(c)}}})}ngOnChanges(w){w.dynamicComponent&&(Array.isArray(this.subs)&&this.subs.map(S=>S.unsubscribe()),this.subs.map(S=>S.unsubscribe()),this.subs=[],this.setInputOutputs())}ngOnInit(){this.loadComponent()}ngOnDestroy(){this.componentRef&&(this.subs.map(w=>w.unsubscribe()),this.componentRef.destroy(),this.componentRef=null),this.viewContainerRef&&(this.viewContainerRef.clear(),this.viewContainerRef=null)}}return j.\u0275fac=function(w){return new(w||j)},j.\u0275cmp=_.Xpm({type:j,selectors:[["ukis-dynamic-component"]],viewQuery:function(w,S){if(1&w&&_.Gf(Q,7),2&w){let v;_.iGM(v=_.CRH())&&(S.ukisAddHost=v.first)}},inputs:{dynamicComponent:"dynamicComponent"},outputs:{dynamicComponentChange:"dynamicComponentChange"},features:[_.TTD],decls:1,vars:0,consts:[["ukisAddHost",""]],template:function(w,S){1&w&&_.YNc(0,g,0,0,"ng-template",0)},dependencies:[Q],encapsulation:2}),j})()},580:(Vt,gt,r)=>{"use strict";r.d(gt,{l:()=>h});var _=r(5548),g=r(4537),Q=r(8692),H=r(7927),j=r(8106),N=r(8518);function w(c,u){if(1&c&&g._UZ(0,"ukis-layerentry-group",4),2&c){const s=g.oxw().$implicit,f=g.oxw();g.Q6J("layersSvc",f.layersSvc)("mapState",f.mapStateSvc)("group",s)("layerGroups",f.layergroups)}}function S(c,u){if(1&c&&g._UZ(0,"ukis-layerentry",5),2&c){const s=g.oxw().$implicit,f=g.oxw();g.Q6J("layerGroups",f.layergroups)("expanded",!1)("layersSvc",f.layersSvc)("mapState",f.mapStateSvc)("layer",s)("group",null)}}function v(c,u){if(1&c&&(g.TgZ(0,"div",1),g.YNc(1,w,1,4,"ukis-layerentry-group",2),g.YNc(2,S,1,6,"ukis-layerentry",3),g.qZA()),2&c){const s=u.$implicit,f=g.oxw();g.xp6(1),g.Q6J("ngIf",f.isLayerGroup(s)),g.xp6(1),g.Q6J("ngIf",!f.isLayerGroup(s))}}let h=(()=>{class c{constructor(){this.layergroups=[]}ngOnInit(){this.layerGroupsSubscription=this.layersSvc.getLayerGroups().subscribe(s=>{this.layergroups=s.filter(f=>"Baselayers"===f.filtertype)})}isLayerGroup(s){return s instanceof _.ex}ngOnDestroy(){this.layerGroupsSubscription.unsubscribe()}}return c.\u0275fac=function(s){return new(s||c)},c.\u0275cmp=g.Xpm({type:c,selectors:[["ukis-base-layer-control"]],inputs:{layersSvc:"layersSvc",mapStateSvc:"mapStateSvc"},decls:2,vars:3,consts:[["class","list-item",4,"ngFor","ngForOf"],[1,"list-item"],[3,"layersSvc","mapState","group","layerGroups",4,"ngIf"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group",4,"ngIf"],[3,"layersSvc","mapState","group","layerGroups"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group"]],template:function(s,f){1&s&&(g.YNc(0,v,3,2,"div",0),g.ALo(1,"reverse")),2&s&&g.Q6J("ngForOf",g.lcZ(1,1,f.layergroups))},dependencies:[Q.sg,Q.O5,H.S,j.m,N.B]}),c})()},408:(Vt,gt,r)=>{"use strict";r.d(gt,{E:()=>s});var _=r(5548),g=r(4537),Q=r(8692),H=r(3066),j=r(7927),N=r(8106),w=r(8092),S=r(8518);function v(f,i){if(1&f&&(g.TgZ(0,"ukis-layerentry-group",5)(1,"span",6),g._uU(2),g.qZA()()),2&f){const l=g.oxw().$implicit,m=g.oxw();g.Q6J("layersSvc",m.layersSvc)("mapState",m.mapStateSvc)("group",l)("layerGroups",m.layergroups)("groupSort",m.layersSort)("groupLayersSort",m.groupLayersSort),g.xp6(2),g.hij(" ",l.displayName||l.name," ")}}function h(f,i){if(1&f&&(g.TgZ(0,"ukis-layerentry",7)(1,"span",6),g._uU(2),g.qZA()()),2&f){const l=g.oxw().$implicit,m=g.oxw();g.Q6J("layerGroups",m.layergroups)("expanded",!1)("layersSvc",m.layersSvc)("mapState",m.mapStateSvc)("layer",l)("group",null)("sorting",m.layersSort),g.xp6(2),g.hij(" ",l.displayName||l.name," ")}}const c=function(f){return{id:f}};function u(f,i){if(1&f&&(g.ynx(0),g.TgZ(1,"div",2),g.YNc(2,v,3,7,"ukis-layerentry-group",3),g.YNc(3,h,3,8,"ukis-layerentry",4),g.qZA(),g.BQk()),2&f){const l=i.$implicit,m=g.oxw();g.xp6(1),g.Q6J("cdkDragData",g.VKq(3,c,l.id)),g.xp6(1),g.Q6J("ngIf",m.isLayerGroup(l)&&l.filtertype===m.layerfilter),g.xp6(1),g.Q6J("ngIf",!m.isLayerGroup(l)&&l.filtertype===m.layerfilter)}}let s=(()=>{class f{constructor(){this.layerfilter="Layers",this.layersSort=!0,this.groupLayersSort=!0,this.layergroups=[]}ngOnInit(){this.layerGroupsSubscription=this.layersSvc.getLayerGroups().subscribe(l=>{this.layergroups=l})}isLayerGroup(l){return l instanceof _.ex}ngOnDestroy(){this.layerGroupsSubscription.unsubscribe()}drop(l){const m=this.layergroups,e=m.length,P=l.container.data;let T,U;if(e===P.length)T=e-l.previousIndex-1,U=e-l.currentIndex-1;else{const D=P[l.currentIndex],C=m.findIndex(X=>X.id===l.item.data.id);let O=m.findIndex(X=>X.id===D.id);l.previousIndex===l.currentIndex&&(O=C),T=C,U=O}this.layersSvc.arrayMove(this.layergroups,T,U),this.layersSvc.setLayerGroups(this.layergroups)}checkBaselayer(l,m){return!!("Baselayers"===l.filtertype||m&&"Baselayers"===m.filtertype)}checkClassHide(l){return!l?.cssClass?.includes("hide")}}return f.\u0275fac=function(l){return new(l||f)},f.\u0275cmp=g.Xpm({type:f,selectors:[["ukis-layer-control"]],inputs:{layersSvc:"layersSvc",mapStateSvc:"mapStateSvc",layerfilter:"layerfilter",layersSort:"layersSort",groupLayersSort:"groupLayersSort"},decls:6,vars:13,consts:[["cdkDropList","",3,"cdkDropListDisabled","cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["cdkDragLockAxis","y","cdkDrag","",1,"list-item",3,"cdkDragData"],[3,"layersSvc","mapState","group","layerGroups","groupSort","groupLayersSort",4,"ngIf"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group","sorting",4,"ngIf"],[3,"layersSvc","mapState","group","layerGroups","groupSort","groupLayersSort"],["cdkDragHandle","",1,"move-item"],[3,"layerGroups","expanded","layersSvc","mapState","layer","group","sorting"]],template:function(l,m){1&l&&(g.TgZ(0,"div",0),g.NdJ("cdkDropListDropped",function(P){return m.drop(P)}),g.ALo(1,"reverse"),g.ALo(2,"itemsfilter"),g.YNc(3,u,4,5,"ng-container",1),g.ALo(4,"reverse"),g.ALo(5,"itemsfilter"),g.qZA()),2&l&&(g.Q6J("cdkDropListDisabled",!m.layersSort)("cdkDropListData",g.lcZ(1,3,g.xi3(2,5,m.layergroups,m.checkClassHide))),g.xp6(3),g.Q6J("ngForOf",g.lcZ(4,8,g.xi3(5,10,m.layergroups,m.checkClassHide))))},dependencies:[Q.sg,Q.O5,H.Wj,H.Zt,H.Bh,j.S,N.m,w.J,S.B],styles:[".list-item[_ngcontent-%COMP%]{cursor:pointer}.move-item[_ngcontent-%COMP%]{cursor:move}.cdk-drop-list-disabled[_ngcontent-%COMP%]   .move-item[_ngcontent-%COMP%]{cursor:pointer}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;align-items:center;padding:15px 10px;box-sizing:border-box;border-radius:2px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;overflow:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),f})()},8106:(Vt,gt,r)=>{"use strict";r.d(gt,{m:()=>M});var _=r(3066),g=r(4537),Q=r(8692),H=r(6799),j=r(9880),N=r(7927),w=r(8092),S=r(8518);function v(R,K){if(1&R){const G=g.EpF();g.TgZ(0,"span",8),g.NdJ("click",function(){g.CHM(G);const q=g.oxw();return g.KtG(q.showProperties())}),g._uU(1),g.qZA()}if(2&R){const G=g.oxw();g.Q6J("title",G.getLayerName(G.group)),g.xp6(1),g.hij(" ",G.getLayerName(G.group)," ")}}const h=function(R){return{disabled:R}};function c(R,K){if(1&R){const G=g.EpF();g.TgZ(0,"span")(1,"clr-icon",9),g.NdJ("click",function(){g.CHM(G);const q=g.oxw();return g.KtG(q.setLayerGroupIndex(q.group,"down"))}),g.qZA(),g.TgZ(2,"clr-icon",10),g.NdJ("click",function(){g.CHM(G);const q=g.oxw();return g.KtG(q.setLayerGroupIndex(q.group,"up"))}),g.qZA()()}if(2&R){const G=g.oxw();g.xp6(1),g.Q6J("ngClass",g.VKq(2,h,G.isLast(G.group))),g.xp6(1),g.Q6J("ngClass",g.VKq(4,h,G.isFirst(G.group)))}}const u=function(R){return{"is-solid":R}};function s(R,K){if(1&R){const G=g.EpF();g.TgZ(0,"span")(1,"label"),g._UZ(2,"clr-icon",11),g.TgZ(3,"input",12),g.NdJ("change",function(){g.CHM(G);const q=g.oxw();return g.KtG(q.setGroupLayersVisibility())}),g.qZA()()()}if(2&R){const G=g.oxw();g.xp6(2),g.s9C("title",G.group.visible?"Hide Group":"Show Group"),g.Q6J("ngClass",g.VKq(6,u,G.group.visible)),g.uIk("shape",G.group.visible?"eye":"eye-hide"),g.xp6(1),g.Q6J("type","checkbox")("checked",G.group.visible)("name","group")}}function f(R,K){if(1&R){const G=g.EpF();g.TgZ(0,"clr-icon",27),g.NdJ("click",function(){g.CHM(G);const q=g.oxw(2);return g.KtG(q.switchTab("settings"))}),g.qZA()}if(2&R){const G=g.oxw(2);g.s9C("title",G.activeTabs.settings?"Hide settings":"Show settings"),g.Q6J("ngClass",g.VKq(2,u,G.activeTabs.settings))}}function i(R,K){if(1&R){const G=g.EpF();g.TgZ(0,"clr-icon",28),g.NdJ("click",function(){g.CHM(G);const q=g.oxw(2);return g.KtG(q.switchTab("legend"))}),g.qZA()}if(2&R){const G=g.oxw(2);g.s9C("title",G.activeTabs.legend?"Hide Legend":"Show Legend"),g.Q6J("ngClass",g.VKq(2,u,G.activeTabs.legend))}}function l(R,K){if(1&R){const G=g.EpF();g.TgZ(0,"clr-icon",29),g.NdJ("click",function(){g.CHM(G);const q=g.oxw(2);return g.KtG(q.switchTab("description"))}),g.qZA()}if(2&R){const G=g.oxw(2);g.s9C("title",G.activeTabs.description?"Hide Info":"Show Info"),g.Q6J("ngClass",g.VKq(2,u,G.activeTabs.description))}}function m(R,K){if(1&R){const G=g.EpF();g.TgZ(0,"clr-icon",2),g.NdJ("click",function(){const ut=g.CHM(G).$implicit,ht=g.oxw(2);return g.KtG(ut.action(ht.group))}),g.qZA()}if(2&R){const G=K.$implicit;g.Q6J("title",G.title),g.uIk("shape",G.icon)}}function e(R,K){if(1&R){const G=g.EpF();g.TgZ(0,"clr-icon",30),g.NdJ("click",function(){g.CHM(G);const q=g.oxw(2);return g.KtG(q.zoomTo(q.group))}),g.qZA()}}function P(R,K){if(1&R){const G=g.EpF();g.TgZ(0,"clr-icon",31),g.NdJ("click",function(){g.CHM(G);const q=g.oxw(2);return g.KtG(q.removeLayerGroup(q.group))}),g.qZA()}}function x(R,K){if(1&R){const G=g.EpF();g.ynx(0),g.TgZ(1,"ukis-dynamic-component",35),g.NdJ("dynamicComponentChange",function(q){g.CHM(G);const ut=g.oxw(3);return g.KtG(ut.dynamicComponents.description=q)}),g.qZA(),g.BQk()}if(2&R){const G=g.oxw(3);g.xp6(1),g.Q6J("dynamicComponent",G.dynamicComponents.description)}}function T(R,K){if(1&R&&g._UZ(0,"span",36),2&R){const G=g.oxw(3);g.Q6J("innerHTML",G.group.description,g.oJD)}}function U(R,K){if(1&R&&(g.TgZ(0,"div",32),g.YNc(1,x,2,1,"ng-container",33),g.YNc(2,T,1,1,"ng-template",null,34,g.W1O),g.qZA()),2&R){const G=g.MAs(3),J=g.oxw(2);g.xp6(1),g.Q6J("ngIf",J.checkIsComponentItem(J.group,"description"))("ngIfElse",G)}}function D(R,K){if(1&R){const G=g.EpF();g.ynx(0),g.TgZ(1,"ukis-dynamic-component",35),g.NdJ("dynamicComponentChange",function(q){g.CHM(G);const ut=g.oxw(3);return g.KtG(ut.group.action=q)}),g.qZA(),g.BQk()}if(2&R){const G=g.oxw(3);g.xp6(1),g.Q6J("dynamicComponent",G.group.action)}}function C(R,K){if(1&R&&(g.TgZ(0,"div",37),g.YNc(1,D,2,1,"ng-container",6),g.qZA()),2&R){const G=g.oxw(2);g.xp6(1),g.Q6J("ngIf",G.checkIsComponentItem(G.group,"action"))}}function O(R,K){if(1&R){const G=g.EpF();g.ynx(0),g.TgZ(1,"ukis-dynamic-component",35),g.NdJ("dynamicComponentChange",function(q){g.CHM(G);const ut=g.oxw(3);return g.KtG(ut.dynamicComponents.legendImg=q)}),g.qZA(),g.BQk()}if(2&R){const G=g.oxw(3);g.xp6(1),g.Q6J("dynamicComponent",G.dynamicComponents.legendImg)}}function X(R,K){if(1&R&&(g.TgZ(0,"a",40),g._UZ(1,"img",41),g.qZA()),2&R){const G=g.oxw(3);g.Q6J("href",G.group.legendImg,g.LSH),g.xp6(1),g.Q6J("src",G.group.legendImg,g.LSH)}}function $(R,K){if(1&R&&(g.TgZ(0,"div",38),g.YNc(1,O,2,1,"ng-container",33),g.YNc(2,X,2,2,"ng-template",null,39,g.W1O),g.qZA()),2&R){const G=g.MAs(3),J=g.oxw(2);g.xp6(1),g.Q6J("ngIf",J.checkIsComponentItem(J.group,"legendImg"))("ngIfElse",G)}}const dt=function(R){return{id:R}};function B(R,K){if(1&R){const G=g.EpF();g.ynx(0),g.TgZ(1,"div",42)(2,"ukis-layerentry",43),g.NdJ("update",function(q){g.CHM(G);const ut=g.oxw(2);return g.KtG(ut.layerUpdate(q,ut.group))}),g.TgZ(3,"span",44),g._uU(4),g.qZA()()(),g.BQk()}if(2&R){const G=K.$implicit,J=g.oxw(2);g.xp6(1),g.Q6J("cdkDragData",g.VKq(8,dt,G.id)),g.xp6(1),g.Q6J("expanded",J.openAllLayersProperties)("layersSvc",J.layersSvc)("mapState",J.mapState)("layer",G)("group",J.group)("sorting",J.groupLayersSort),g.xp6(2),g.hij(" ",G.displayName||G.name," ")}}function k(R,K){if(1&R){const G=g.EpF();g.TgZ(0,"div",13)(1,"div",14),g.YNc(2,f,1,4,"clr-icon",15),g.YNc(3,i,1,4,"clr-icon",16),g.YNc(4,l,1,4,"clr-icon",17),g.TgZ(5,"clr-icon",18),g.NdJ("click",function(){g.CHM(G);const q=g.oxw();return g.KtG(q.showHideAllDetails())}),g.qZA(),g.YNc(6,m,1,2,"clr-icon",19),g._UZ(7,"span"),g.YNc(8,e,1,0,"clr-icon",20),g.YNc(9,P,1,0,"clr-icon",21),g.qZA(),g.YNc(10,U,4,2,"div",22),g.YNc(11,C,2,1,"div",23),g.YNc(12,$,4,2,"div",24),g.TgZ(13,"div",25),g.NdJ("cdkDropListDropped",function(q){g.CHM(G);const ut=g.oxw();return g.KtG(ut.drop(q))}),g.ALo(14,"reverse"),g.ALo(15,"itemsfilter"),g.YNc(16,B,5,10,"ng-container",26),g.ALo(17,"reverse"),g.ALo(18,"itemsfilter"),g.qZA()()}if(2&R){const G=g.oxw();g.xp6(2),g.Q6J("ngIf",G.group.action),g.xp6(1),g.Q6J("ngIf",G.group.legendImg),g.xp6(1),g.Q6J("ngIf",G.group.description),g.xp6(1),g.s9C("title",G.openAllLayersProperties?"Hide all layers details":"Show all layers details"),g.Q6J("ngClass",g.VKq(24,u,G.openAllLayersProperties)),g.xp6(1),g.Q6J("ngForOf",G.group.actions),g.xp6(2),g.Q6J("ngIf",G.canZoomToGroup),g.xp6(1),g.Q6J("ngIf",G.group.removable),g.xp6(1),g.Q6J("ngIf",G.group.description&&G.activeTabs.description),g.xp6(1),g.Q6J("ngIf",G.group.action&&G.activeTabs.settings),g.xp6(1),g.Q6J("ngIf",G.group.legendImg&&G.activeTabs.legend),g.xp6(1),g.Q6J("cdkDropListDisabled",!G.groupLayersSort)("cdkDropListData",g.lcZ(14,14,g.xi3(15,16,G.group.layers,G.checkClassHide))),g.xp6(3),g.Q6J("ngForOf",g.lcZ(17,19,g.xi3(18,21,G.group.layers,G.checkClassHide)))}}const L=["*"];var p=(()=>{return(R=p||(p={})).settings="settings",R.legend="legend",R.description="description",p;var R})();let M=(()=>{class R{constructor(){this.groupSort=!0,this.groupLayersSort=!0,this.canZoomToGroup=!1,this.activeTabs={settings:!1,legend:!0,description:!1},this.dynamicComponents={legendImg:null,action:null,description:null}}get visible(){return this.group.visible}get cssClass(){return this.group.cssClass}set openAllLayersProperties(G){this.group&&this.group.layers.length&&this.group.layers.forEach(J=>J.expanded=G)}get openAllLayersProperties(){return!(!this.group||!this.group.layers.length)&&this.group.layers.filter(G=>!0===G.expanded).length===this.group.layers.length}ngOnInit(){this.group.bbox&&this.group.bbox.length>=4&&(this.canZoomToGroup=!0),"object"==typeof this.group?.expanded&&Object.keys(p).includes(this.group.expanded.tab)?(this.switchTab(this.group.expanded.tab),!1===this.group.expanded.expanded&&(this.activeTabs[this.group.expanded.tab]=!1)):this.setDefaultActiveTabs()}setDefaultActiveTabs(){this.group?.action||(this.activeTabs.settings=!1)}checkIsComponentItem(G,J){const q=G[J];let ut=!1;if(q&&"object"==typeof q&&"component"in q){const ht=q.component;q.inputs?q.inputs&&!q.inputs.group?this.dynamicComponents[J]={component:q.component,inputs:Object.assign({},q.inputs,{group:G})}:q.inputs&&q.inputs.group&&(this.dynamicComponents[J]={component:q.component,inputs:Object.assign({},q.inputs)}):this.dynamicComponents[J]={component:ht,inputs:{group:G}},q.outputs&&(this.dynamicComponents[J].outputs=Object.assign({},q.outputs)),ut=!0}return ut}checkBaselayer(G){return!(!G||"Baselayers"!==G.filtertype)}checkClassHide(G){return!G?.cssClass?.includes("hide")}getLayerName(G){return G.displayName?G.displayName:G.name}setLayerGroupIndex(G,J){this.layersSvc.setGroupLayerIndex(G,J)}setGroupLayersVisibility(){this.group.visible=!this.group.visible,this.layersSvc.updateLayerGroup(this.group)}removeLayerGroup(G){this.layersSvc.removeLayerGroup(G)}zoomTo(G){this.mapState&&G.bbox&&G.bbox.length>=4&&this.mapState.setExtent(G.bbox)}layerUpdate(G,J){this.layersSvc.updateLayerGroup(J)}showProperties(){this.group.expanded=!this.group.expanded}switchTab(G,J=!0){for(const q of Object.keys(this.activeTabs)){const ut=G===q;this.activeTabs[q]=(!this.activeTabs[q]||!J)&&ut}}showHideAllDetails(){if(this.openAllLayersProperties){this.openAllLayersProperties=!1;for(const G of Object.keys(this.activeTabs))this.activeTabs[G]=!1}else this.openAllLayersProperties=!0,this.group.legendImg?this.switchTab("legend",!1):this.group.description?this.switchTab("description",!1):this.group.action&&this.switchTab("settings",!1)}isFirst(G){return this.layersSvc.isGroupFirst(G,this.layerGroups,G.filtertype)}isLast(G){return this.layersSvc.isGroupLast(G,this.layerGroups,G.filtertype)}drop(G){const J=this.group.layers,q=J.length,ut=G.container.data;let _t,Tt;if(q===ut.length)_t=q-G.previousIndex-1,Tt=q-G.currentIndex-1;else{const Lt=ut[G.currentIndex],Ht=J.findIndex(ae=>ae.id===G.item.data.id);let $t=J.findIndex(ae=>ae.id===Lt.id);G.previousIndex===G.currentIndex&&($t=Ht),_t=Ht,Tt=$t}(0,_.bA)(this.group.layers,_t,Tt),this.layersSvc.updateLayerGroup(this.group)}}return R.\u0275fac=function(G){return new(G||R)},R.\u0275cmp=g.Xpm({type:R,selectors:[["ukis-layerentry-group"]],hostVars:4,hostBindings:function(G,J){2&G&&(g.Tol(J.cssClass),g.ekj("group-visible",J.visible))},inputs:{layersSvc:"layersSvc",mapState:"mapState",group:"group",layerGroups:"layerGroups",groupSort:"groupSort",groupLayersSort:"groupLayersSort"},ngContentSelectors:L,decls:10,vars:7,consts:[[1,"layergroup"],[1,"head"],[1,"iconButton",3,"title","click"],[1,"item-title-replacement","title",3,"title","click"],["ref",""],["class","title",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","body",4,"ngIf"],[1,"title",3,"title","click"],["shape","arrow","title","up",1,"iconButton","move-item",3,"ngClass","click"],["shape","arrow","title","down","dir","down",1,"iconButton","move-item",3,"ngClass","click"],[1,"iconButton",3,"ngClass","title"],[1,"hide",3,"type","checked","name","change"],[1,"body"],[1,"tools"],["shape","cog","class","iconButton",3,"ngClass","title","click",4,"ngIf"],["shape","image","class","iconButton",3,"title","ngClass","click",4,"ngIf"],["shape","info-standard","class","iconButton",3,"ngClass","title","click",4,"ngIf"],["shape","details",1,"iconButton",3,"ngClass","title","click"],["class","iconButton",3,"title","click",4,"ngFor","ngForOf"],["shape","zoom-in","class","iconButton","title","Zoom to group",3,"click",4,"ngIf"],["shape","trash","class","iconButton","title","Remove group",3,"click",4,"ngIf"],["class","tabsbody description",4,"ngIf"],["class","tabsbody layersettings",4,"ngIf"],["class","tabsbody legend",4,"ngIf"],["cdkDropList","",3,"cdkDropListDisabled","cdkDropListData","cdkDropListDropped"],[4,"ngFor","ngForOf"],["shape","cog",1,"iconButton",3,"ngClass","title","click"],["shape","image",1,"iconButton",3,"title","ngClass","click"],["shape","info-standard",1,"iconButton",3,"ngClass","title","click"],["shape","zoom-in","title","Zoom to group",1,"iconButton",3,"click"],["shape","trash","title","Remove group",1,"iconButton",3,"click"],[1,"tabsbody","description"],[4,"ngIf","ngIfElse"],["descriptionText",""],[3,"dynamicComponent","dynamicComponentChange"],[3,"innerHTML"],[1,"tabsbody","layersettings"],[1,"tabsbody","legend"],["imageUrl",""],["target","_blank","title","Show full Image",3,"href"],[3,"src"],["cdkDragLockAxis","y","cdkDrag","",1,"sublayers",3,"cdkDragData"],[3,"expanded","layersSvc","mapState","layer","group","sorting","update"],["cdkDragHandle","",1,"move-item"]],template:function(G,J){if(1&G&&(g.F$t(),g.TgZ(0,"div",0)(1,"div",1)(2,"clr-icon",2),g.NdJ("click",function(){return J.showProperties()}),g.qZA(),g.TgZ(3,"div",3,4),g.NdJ("click",function(){return J.showProperties()}),g.Hsn(5),g.qZA(),g.YNc(6,v,2,2,"span",5),g.YNc(7,c,3,6,"span",6),g.YNc(8,s,4,8,"span",6),g.qZA(),g.YNc(9,k,19,26,"div",7),g.qZA()),2&G){const q=g.MAs(4);g.xp6(2),g.s9C("title",J.group.expanded?"Close":"Open"),g.uIk("shape",J.group.expanded?"folder-open":"folder"),g.xp6(1),g.Q6J("title",J.getLayerName(J.group)),g.xp6(3),g.Q6J("ngIf",0==q.children.length),g.xp6(1),g.Q6J("ngIf",J.layerGroups.length>1&&J.groupSort),g.xp6(1),g.Q6J("ngIf",!J.checkBaselayer(J.group)),g.xp6(1),g.Q6J("ngIf",J.group.expanded)}},dependencies:[Q.mk,Q.sg,Q.O5,H.qvL,H.MgK,_.Wj,_.Zt,_.Bh,j._,N.S,w.J,S.B],styles:[".title[_ngcontent-%COMP%]{cursor:pointer}.item-title-replacement[_ngcontent-%COMP%]:empty{display:none}.move-item[_ngcontent-%COMP%]{cursor:move}.cdk-drop-list-disabled[_ngcontent-%COMP%]   .move-item[_ngcontent-%COMP%]{cursor:pointer}.cdk-drag-preview[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 10px;box-sizing:border-box;border-radius:2px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f;overflow:hidden}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.2}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .sublayers[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.info[_ngcontent-%COMP%]{padding-left:.2rem}.tabsbody[_ngcontent-%COMP%]{overflow:hidden}.tabsbody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;max-width:100%}"]}),R})()},7927:(Vt,gt,r)=>{"use strict";r.d(gt,{S:()=>J});var _=r(4537),g=r(5548),Q=r(8692),H=r(6799),j=r(92),N=r(9880);const w=function(q){return{disabled:q}};function S(q,ut){if(1&q){const ht=_.EpF();_.TgZ(0,"clr-icon",11),_.NdJ("click",function(){_.CHM(ht);const Tt=_.oxw();return _.KtG(Tt.showProperties())}),_.qZA()}if(2&q){const ht=_.oxw();_.Q6J("ngStyle",ht.getExpandShape())("ngClass",_.VKq(2,w,ht.is_expandable()))}}function v(q,ut){if(1&q){const ht=_.EpF();_.TgZ(0,"span",12),_.NdJ("click",function(){_.CHM(ht);const Tt=_.oxw();return _.KtG(Tt.showProperties())}),_._uU(1),_.qZA()}if(2&q){const ht=_.oxw();_.Q6J("title",ht.getLayerName(ht.layer)),_.xp6(1),_.hij(" ",ht.getLayerName(ht.layer)," ")}}function h(q,ut){if(1&q){const ht=_.EpF();_.TgZ(0,"span")(1,"clr-icon",13),_.NdJ("click",function(){_.CHM(ht);const Tt=_.oxw();return _.KtG(Tt.setLayerIndex(Tt.layer,"down",Tt.group))}),_.qZA(),_.TgZ(2,"clr-icon",14),_.NdJ("click",function(){_.CHM(ht);const Tt=_.oxw();return _.KtG(Tt.setLayerIndex(Tt.layer,"up",Tt.group))}),_.qZA()()}if(2&q){const ht=_.oxw();_.xp6(1),_.Q6J("hidden",ht.layerGroups&&1==ht.layerGroups.length)("ngClass",_.VKq(4,w,ht.isLast(ht.layer))),_.xp6(1),_.Q6J("hidden",ht.layerGroups&&1==ht.layerGroups.length)("ngClass",_.VKq(6,w,ht.isFirst(ht.layer)))}}const c=function(q){return{"is-solid":q}};function u(q,ut){if(1&q&&_._UZ(0,"clr-icon",15),2&q){const ht=_.oxw();_.s9C("title",ht.layer.visible?"Choose another layer":"Show layer"),_.Q6J("ngClass",_.VKq(3,c,ht.layer.visible)),_.uIk("shape",ht.layer.visible?"dot-circle":"circle")}}function s(q,ut){if(1&q&&_._UZ(0,"clr-icon",15),2&q){const ht=_.oxw();_.s9C("title",ht.layer.visible?"Hide layer":"Show layer"),_.Q6J("ngClass",_.VKq(3,c,ht.layer.visible)),_.uIk("shape",ht.layer.visible?"eye":"eye-hide")}}const f=function(q){return{active:q}};function i(q,ut){if(1&q){const ht=_.EpF();_.TgZ(0,"clr-icon",25),_.NdJ("click",function(){_.CHM(ht);const Tt=_.oxw(2);return _.KtG(Tt.switchTab("settings"))}),_.qZA()}if(2&q){const ht=_.oxw(2);_.Q6J("ngClass",_.VKq(1,f,ht.activeTabs.settings))}}function l(q,ut){if(1&q){const ht=_.EpF();_.TgZ(0,"clr-icon",26),_.NdJ("click",function(){_.CHM(ht);const Tt=_.oxw(2);return _.KtG(Tt.switchTab("legend"))}),_.qZA()}if(2&q){const ht=_.oxw(2);_.Q6J("ngClass",_.VKq(1,f,ht.activeTabs.legend))}}function m(q,ut){if(1&q){const ht=_.EpF();_.TgZ(0,"clr-icon",27),_.NdJ("click",function(){_.CHM(ht);const Tt=_.oxw(2);return _.KtG(Tt.switchTab("description"))}),_.qZA()}if(2&q){const ht=_.oxw(2);_.Q6J("ngClass",_.VKq(1,f,ht.activeTabs.description))}}function e(q,ut){if(1&q){const ht=_.EpF();_.TgZ(0,"clr-icon",28),_.NdJ("click",function(){const Lt=_.CHM(ht).$implicit,Ht=_.oxw(2);return _.KtG(Lt.action(Ht.layer))}),_.qZA()}if(2&q){const ht=ut.$implicit;_.Q6J("title",ht.title),_.uIk("shape",ht.icon)}}function P(q,ut){if(1&q){const ht=_.EpF();_.TgZ(0,"clr-icon",29),_.NdJ("click",function(){_.CHM(ht);const Tt=_.oxw(2);return _.KtG(Tt.zoomTo(Tt.layer))}),_.qZA()}}function x(q,ut){if(1&q){const ht=_.EpF();_.TgZ(0,"clr-icon",30),_.NdJ("click",function(){_.CHM(ht);const Tt=_.oxw(2);return _.KtG(Tt.removeLayer(Tt.group,Tt.layer))}),_.qZA()}}function T(q,ut){if(1&q){const ht=_.EpF();_.TgZ(0,"div",37)(1,"label"),_._uU(2,"Opacity: "),_.TgZ(3,"input",38),_.NdJ("change",function(){_.CHM(ht);const Tt=_.oxw(4);return _.KtG(Tt.setLayerOpacity(Tt.layer))})("ngModelChange",function(Tt){_.CHM(ht);const Lt=_.oxw(4);return _.KtG(Lt.layer.opacity=Tt)}),_.qZA()(),_.TgZ(4,"span"),_._uU(5),_.qZA()()}if(2&q){const ht=_.oxw(4);_.xp6(3),_.Q6J("value",ht.layer.opacity)("min",0)("max",1)("step",.1)("ngModel",ht.layer.opacity),_.xp6(2),_.Oqu(" "+ht.layer.opacity)}}function U(q,ut){if(1&q&&(_.TgZ(0,"option",41),_._uU(1),_.qZA()),2&q){const ht=ut.$implicit,_t=_.oxw(5);_.Q6J("value",ht.name),_.uIk("selected",!!_t.isSelectedStyle(ht.name)||null),_.xp6(1),_.Oqu(ht.title)}}function D(q,ut){if(1&q){const ht=_.EpF();_.ynx(0),_.TgZ(1,"select",39),_.NdJ("change",function(Tt){_.CHM(ht);const Lt=_.oxw(4);return _.KtG(Lt.executeChangeStyle(Tt))}),_.YNc(2,U,2,3,"option",40),_.qZA(),_.BQk()}if(2&q){const ht=_.oxw(4);_.xp6(2),_.Q6J("ngForOf",ht.layer.styles)}}function C(q,ut){if(1&q){const ht=_.EpF();_.ynx(0),_.TgZ(1,"ukis-dynamic-component",42),_.NdJ("dynamicComponentChange",function(Tt){_.CHM(ht);const Lt=_.oxw(4);return _.KtG(Lt.dynamicComponents.action=Tt)}),_.qZA(),_.BQk()}if(2&q){const ht=_.oxw(4);_.xp6(1),_.Q6J("dynamicComponent",ht.dynamicComponents.action)}}function O(q,ut){if(1&q&&(_.TgZ(0,"div",35),_.YNc(1,T,6,6,"div",36),_.YNc(2,D,3,1,"ng-container",6),_.YNc(3,C,2,1,"ng-container",6),_.qZA()),2&q){const ht=_.oxw(3);_.xp6(1),_.Q6J("ngIf",!ht.checkBaselayer(ht.layer,ht.group)),_.xp6(1),_.Q6J("ngIf",ht.layer.styles&&(null==ht.layer.styles?null:ht.layer.styles.length)>1),_.xp6(1),_.Q6J("ngIf",ht.checkIsComponentItem(ht.layer,"action"))}}function X(q,ut){if(1&q){const ht=_.EpF();_.ynx(0),_.TgZ(1,"ukis-dynamic-component",42),_.NdJ("dynamicComponentChange",function(Tt){_.CHM(ht);const Lt=_.oxw(4);return _.KtG(Lt.dynamicComponents.legendImg=Tt)}),_.qZA(),_.BQk()}if(2&q){const ht=_.oxw(4);_.xp6(1),_.Q6J("dynamicComponent",ht.dynamicComponents.legendImg)}}function $(q,ut){if(1&q&&(_.TgZ(0,"a",46),_._UZ(1,"img",47),_.qZA()),2&q){const ht=_.oxw(4);_.Q6J("href",ht.layer.legendImg,_.LSH),_.xp6(1),_.Q6J("src",ht.layer.legendImg,_.LSH)}}function dt(q,ut){if(1&q&&(_.TgZ(0,"div",43),_.YNc(1,X,2,1,"ng-container",44),_.YNc(2,$,2,2,"ng-template",null,45,_.W1O),_.qZA()),2&q){const ht=_.MAs(3),_t=_.oxw(3);_.xp6(1),_.Q6J("ngIf",_t.checkIsComponentItem(_t.layer,"legendImg"))("ngIfElse",ht)}}function B(q,ut){if(1&q){const ht=_.EpF();_.ynx(0),_.TgZ(1,"ukis-dynamic-component",42),_.NdJ("dynamicComponentChange",function(Tt){_.CHM(ht);const Lt=_.oxw(4);return _.KtG(Lt.dynamicComponents.description=Tt)}),_.qZA(),_.BQk()}if(2&q){const ht=_.oxw(4);_.xp6(1),_.Q6J("dynamicComponent",ht.dynamicComponents.description)}}function k(q,ut){if(1&q&&_._UZ(0,"span",50),2&q){const ht=_.oxw(4);_.Q6J("innerHTML",ht.layer.description,_.oJD)}}function L(q,ut){if(1&q&&(_.TgZ(0,"div",48),_.YNc(1,B,2,1,"ng-container",44),_.YNc(2,k,1,1,"ng-template",null,49,_.W1O),_.qZA()),2&q){const ht=_.MAs(3),_t=_.oxw(3);_.xp6(1),_.Q6J("ngIf",_t.checkIsComponentItem(_t.layer,"description"))("ngIfElse",ht)}}function p(q,ut){if(1&q&&(_.TgZ(0,"div",31),_.YNc(1,O,4,3,"div",32),_.YNc(2,dt,4,2,"div",33),_.YNc(3,L,4,2,"div",34),_.qZA()),2&q){const ht=_.oxw(2);_.xp6(1),_.Q6J("ngIf",ht.activeTabs.settings),_.xp6(1),_.Q6J("ngIf",ht.activeTabs.legend&&ht.layer.legendImg),_.xp6(1),_.Q6J("ngIf",ht.activeTabs.description&&ht.layer.description)}}function M(q,ut){if(1&q&&(_.TgZ(0,"div",16)(1,"div",17),_.YNc(2,i,1,3,"clr-icon",18),_.YNc(3,l,1,3,"clr-icon",19),_.YNc(4,m,1,3,"clr-icon",20),_.YNc(5,e,1,2,"clr-icon",21),_._UZ(6,"span"),_.YNc(7,P,1,0,"clr-icon",22),_.YNc(8,x,1,0,"clr-icon",23),_.qZA(),_.YNc(9,p,4,3,"div",24),_.qZA()),2&q){const ht=_.oxw();_.xp6(2),_.Q6J("ngIf",!ht.checkBaselayer(ht.layer,ht.group)||ht.layer.action),_.xp6(1),_.Q6J("ngIf",ht.layer.legendImg),_.xp6(1),_.Q6J("ngIf",ht.layer.description),_.xp6(1),_.Q6J("ngForOf",ht.layer.actions),_.xp6(2),_.Q6J("ngIf",ht.canZoomToLayer),_.xp6(1),_.Q6J("ngIf",ht.layer.removable),_.xp6(1),_.Q6J("ngIf",ht.hasTabsbody&&ht.hasActiveTabs())}}const R=function(q){return{expanded:q}},K=["*"];var G=(()=>{return(q=G||(G={})).settings="settings",q.legend="legend",q.description="description",G;var q})();let J=(()=>{class q{constructor(){this.expandable=!0,this.sorting=!0,this.update=new _.vpe,this.canZoomToLayer=!1,this.activeTabs={settings:!1,legend:!0,description:!1},this.hasTabsbody=!0,this.dynamicComponents={legendImg:null,action:null,description:null}}get visible(){return this.layer.visible}get cssClass(){return this.layer.cssClass}set expanded(ht){this.layer&&(this.layer.expanded=ht)}get expanded(){return!!this.layer&&!!this.layer.expanded}checkIsComponentItem(ht,_t){const Tt=ht[_t];let Lt=!1;if(Tt&&"object"==typeof Tt&&"component"in Tt){const Ht=Tt.component;Tt.inputs?Tt.inputs&&!Tt.inputs.layer?this.dynamicComponents[_t]={component:Tt.component,inputs:Object.assign({},Tt.inputs,{layer:ht})}:Tt.inputs&&Tt.inputs.layer&&(this.dynamicComponents[_t]={component:Tt.component,inputs:Object.assign({},Tt.inputs)}):this.dynamicComponents[_t]={component:Ht,inputs:{layer:ht}},Tt.outputs&&(this.dynamicComponents[_t].outputs=Object.assign({},Tt.outputs)),Lt=!0}return Lt}getLayerName(ht){return ht.displayName?ht.displayName:ht.name}ngOnInit(){this.layersSvc||console.error("you need to provide a layersService!"),"object"==typeof this.layer?.expanded&&Object.keys(G).includes(this.layer.expanded.tab)?(this.switchTab(this.layer.expanded.tab),!1===this.layer.expanded.expanded&&(this.activeTabs[this.layer.expanded.tab]=!1)):this.setDefaultActiveTabs(),this.layer.bbox&&this.layer.bbox.length>=4&&(this.canZoomToLayer=!0),"Baselayers"!==this.layer.filtertype||this.layer.legendImg||this.layer.description||this.layer.action||this.layer.actions||this.layer.styles||this.layer.styles?.length>1||(this.hasTabsbody=!1)}setDefaultActiveTabs(){this.layer.legendImg||this.switchTab("description"),!this.layer.legendImg&&!this.layer.description&&this.switchTab("settings")}setLayerVisibility(ht,_t){if(_t){if(_t.layers.length>0)if("Baselayers"===_t.filtertype){for(const Tt of _t.layers)Tt.visible=Tt===ht;this.update.emit({layer:this.layer})}else{const Tt=_t.visible;ht.visible=!ht.visible,Tt!==_t.visible?this.update.emit({layer:this.layer}):this.layersSvc.updateLayer(ht,ht.filtertype||"Layers")}}else if("Baselayers"===ht.filtertype){ht.visible=!ht.visible;const Tt=this.layerGroups.filter(Lt=>"Baselayers"===Lt.filtertype);for(const Lt of Tt)Lt instanceof g.mh&&Lt.id!==ht.id&&(Lt.visible=!ht.visible,this.layersSvc.updateLayer(Lt,Lt.filtertype||"Baselayers"))}else ht.visible=!ht.visible,this.layersSvc.updateLayer(ht,ht.filtertype||"Layers")}setLayerIndex(ht,_t,Tt){Tt?this.layersSvc.setLayerIndexInGroup(ht,_t,Tt):this.layersSvc.setGroupLayerIndex(ht,_t)}removeLayer(ht,_t){ht?this.layersSvc.removeLayerFromGroup(_t,ht):this.layersSvc.removeLayer(_t,_t.filtertype)}zoomTo(ht){this.mapState&&ht.bbox&&ht.bbox.length>=4&&this.mapState.setExtent(ht.bbox)}setLayerOpacity(ht){this.group?this.update.emit({layer:ht}):this.layersSvc.updateLayer(ht,ht.filtertype||"Layers")}checkBaselayer(ht,_t){return!!("Baselayers"===ht.filtertype||_t&&"Baselayers"===_t.filtertype)}is_expandable(){return this.group?!this.layer.legendImg&&"Baselayers"===this.group.filtertype:!this.hasTabsbody}showProperties(){this.is_expandable()||(this.expanded=!this.expanded)}switchTab(ht,_t=!0){for(const Tt of Object.keys(this.activeTabs)){const Lt=ht===Tt;this.activeTabs[Tt]=(!this.activeTabs[Tt]||!_t)&&Lt}}hasActiveTabs(){return Object.values(this.activeTabs).filter(ht=>ht).length>0}isSelectedStyle(ht){return this.layer instanceof g.TI?this.layer.params.STYLES===ht:this.layer instanceof g.RC&&this.layer.params.style===ht}executeChangeStyle(ht){const _t=ht.target.value;if(this.layer.styles){const Tt=this.layer.styles.find(Lt=>Lt.name===_t);Tt&&(this.layer.legendImg=Tt.legendURL,this.layer instanceof g.TI?this.layer.params.STYLES=Tt.name:this.layer instanceof g.RC&&(this.layer.params.style=Tt.name),this.layersSvc.updateLayer(this.layer,this.layer.filtertype))}}isFirst(ht){return this.group?this.layersSvc.isGroupFirst(ht,this.group.layers):this.layersSvc.isGroupFirst(ht,null,ht.filtertype)}isLast(ht){return this.group?this.layersSvc.isGroupLast(ht,this.group.layers):this.layersSvc.isGroupLast(ht,null,ht.filtertype)}getExpandShape(){return this.expanded?{transform:"rotate(180deg)"}:{transform:"rotate(90deg)"}}}return q.\u0275fac=function(ht){return new(ht||q)},q.\u0275cmp=_.Xpm({type:q,selectors:[["ukis-layerentry"]],hostVars:4,hostBindings:function(ht,_t){2&ht&&(_.Tol(_t.cssClass),_.ekj("layer-visible",_t.visible))},inputs:{layersSvc:"layersSvc",mapState:"mapState",layer:"layer",group:"group",layerGroups:"layerGroups",expanded:"expanded",expandable:"expandable",sorting:"sorting"},outputs:{update:"update"},ngContentSelectors:K,decls:14,vars:13,consts:[[1,"layer",3,"ngClass"],[1,"head"],["shape","angle","class","iconButton","title","Details",3,"ngStyle","ngClass","click",4,"ngIf"],[1,"item-title-replacement","title",3,"title","click"],["ref",""],["class","title",3,"title","click",4,"ngIf"],[4,"ngIf"],["class","iconButton",3,"ngClass","title",4,"ngIf","ngIfElse"],["notBaselayer",""],[1,"hide",3,"type","name","checked","change"],["class","body",4,"ngIf"],["shape","angle","title","Details",1,"iconButton",3,"ngStyle","ngClass","click"],[1,"title",3,"title","click"],["shape","arrow","title","up",1,"iconButton",3,"hidden","ngClass","click"],["shape","arrow","title","down","dir","down",1,"iconButton",3,"hidden","ngClass","click"],[1,"iconButton",3,"ngClass","title"],[1,"body"],[1,"tools"],["title","Layer settings","shape","cog","class","iconButton",3,"ngClass","click",4,"ngIf"],["title","Layer Legend","shape","image","class","iconButton",3,"ngClass","click",4,"ngIf"],["title","Layer info","shape","info-standard","class","iconButton",3,"ngClass","click",4,"ngIf"],["class","iconButton",3,"title","click",4,"ngFor","ngForOf"],["shape","zoom-in","class","iconButton","title","Zoom to layer",3,"click",4,"ngIf"],["shape","trash","class","iconButton","title","Remove layer",3,"click",4,"ngIf"],["class","tabsbody",4,"ngIf"],["title","Layer settings","shape","cog",1,"iconButton",3,"ngClass","click"],["title","Layer Legend","shape","image",1,"iconButton",3,"ngClass","click"],["title","Layer info","shape","info-standard",1,"iconButton",3,"ngClass","click"],[1,"iconButton",3,"title","click"],["shape","zoom-in","title","Zoom to layer",1,"iconButton",3,"click"],["shape","trash","title","Remove layer",1,"iconButton",3,"click"],[1,"tabsbody"],["class","layersettings",4,"ngIf"],["class","legend",4,"ngIf"],["class","description",4,"ngIf"],[1,"layersettings"],["class","form-group",4,"ngIf"],[1,"form-group"],["type","range","name","points",1,"ukis-range-input","opacity-input",3,"value","min","max","step","ngModel","change","ngModelChange"],["clrSelect","",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"dynamicComponent","dynamicComponentChange"],[1,"legend"],[4,"ngIf","ngIfElse"],["imageUrl",""],["target","_blank","title","Show full Image",3,"href"],[3,"src"],[1,"description"],["descriptionText",""],[3,"innerHTML"]],template:function(ht,_t){if(1&ht&&(_.F$t(),_.TgZ(0,"div",0)(1,"div",1),_.YNc(2,S,1,4,"clr-icon",2),_.TgZ(3,"div",3,4),_.NdJ("click",function(){return _t.showProperties()}),_.Hsn(5),_.qZA(),_.YNc(6,v,2,2,"span",5),_.YNc(7,h,3,8,"span",6),_.TgZ(8,"label"),_.YNc(9,u,1,5,"clr-icon",7),_.YNc(10,s,1,5,"ng-template",null,8,_.W1O),_.TgZ(12,"input",9),_.NdJ("change",function(){return _t.setLayerVisibility(_t.layer,_t.group)}),_.qZA()()(),_.YNc(13,M,10,7,"div",10),_.qZA()),2&ht){const Tt=_.MAs(4),Lt=_.MAs(11);_.Q6J("ngClass",_.VKq(11,R,_t.expanded)),_.xp6(2),_.Q6J("ngIf",_t.hasTabsbody),_.xp6(1),_.Q6J("title",_t.getLayerName(_t.layer)),_.xp6(3),_.Q6J("ngIf",0==Tt.children.length),_.xp6(1),_.Q6J("ngIf",!_t.checkBaselayer(_t.layer,_t.group)&&_t.sorting),_.xp6(2),_.Q6J("ngIf",_t.checkBaselayer(_t.layer,_t.group))("ngIfElse",Lt),_.xp6(3),_.Q6J("type",_t.checkBaselayer(_t.layer,_t.group)?"radio":"checkbox")("name","layer")("checked",_t.layer.visible),_.xp6(1),_.Q6J("ngIf",_t.expandable&&_t.expanded)}},dependencies:[Q.mk,Q.sg,Q.O5,Q.PC,H.qvL,H.MgK,H.otW,j.YN,j.Kr,j.Fj,j.eT,j.JJ,j.On,N._],styles:[".title[_ngcontent-%COMP%]{cursor:pointer}.item-title-replacement[_ngcontent-%COMP%]:empty{display:none}.body[_ngcontent-%COMP%]{cursor:default}.tabsbody[_ngcontent-%COMP%]{overflow:hidden}.tabsbody[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;max-width:100%}"]}),q})()},8518:(Vt,gt,r)=>{"use strict";r.d(gt,{B:()=>g});var _=r(4537);let g=(()=>{class Q{transform(j){return"string"==typeof j?j.split("").reverse().join(""):Array.isArray(j)?j.slice().reverse():j}}return Q.\u0275fac=function(j){return new(j||Q)},Q.\u0275pipe=_.Yjl({name:"reverse",type:Q,pure:!1}),Q})()},8092:(Vt,gt,r)=>{"use strict";r.d(gt,{J:()=>Q});var _=r(4537);let Q=(()=>{class H{transform(N,w){return N.filter(w)}}return H.\u0275fac=function(N){return new(N||H)},H.\u0275pipe=_.Yjl({name:"itemsfilter",type:H,pure:!1}),H})()},5508:(Vt,gt,r)=>{"use strict";r.d(gt,{cE:()=>u}),r(408),r(580);var Q=r(8692),H=r(6799),j=r(92),N=r(3066),w=r(9765),S=r(4537);let v=(()=>{class i{constructor(){this.alertSource=new w.xQ,this.alert$=this.alertSource.asObservable()}alert(m){this.alertSource.next(m)}}return i.\u0275fac=function(m){return new(m||i)},i.\u0275prov=S.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),h=(()=>{class i{constructor(){this.progressSource=new w.xQ,this.progress$=this.progressSource.asObservable()}progress(m){this.progressSource.next(m)}}return i.\u0275fac=function(m){return new(m||i)},i.\u0275prov=S.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),c=(()=>{class i{}return i.\u0275fac=function(m){return new(m||i)},i.\u0275mod=S.oAB({type:i}),i.\u0275inj=S.cJS({providers:[v,h],imports:[Q.ez,H.K6A]}),i})(),u=(()=>{class i{}return i.\u0275fac=function(m){return new(m||i)},i.\u0275mod=S.oAB({type:i}),i.\u0275inj=S.cJS({imports:[Q.ez,H.K6A,j.u5,N._t,c]}),i})();r(7927),r(8106)},3307:(Vt,gt,r)=>{"use strict";r.d(gt,{j:()=>Zt});var _=r(790),g=r(7393);class H{constructor(y){this.total=y}call(y,z){return z.subscribe(new j(y,this.total))}}class j extends g.L{constructor(y,z){super(y),this.total=z,this.count=0}_next(y){++this.count>this.total&&this.destination.next(y)}}var N=r(5548),w=r(513),S=r(7521),v=r(1591),h=r(9633),c=r(6581),u=r(1119),s=r(9015),f=r(992);const i="units",l=[1,2,5],m=25.4/.28,P=class e extends c.Z{constructor(y){y=y||{};const z=document.createElement("div");z.style.pointerEvents="none",super({element:z,render:y.render,target:y.target});const st=void 0!==y.className?y.className:y.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=st+"-inner",this.element.className=st+" "+u.XV,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==y.minWidth?y.minWidth:64,this.maxWidth_=y.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(i,this.handleUnitsChanged_),this.setUnits(y.units||"metric"),this.scaleBar_=y.bar||!1,this.scaleBarSteps_=y.steps||4,this.scaleBarText_=y.text||!1,this.dpi_=y.dpi||void 0}getUnits(){return this.get(i)}handleUnitsChanged_(){this.updateElement_()}setUnits(y){this.set(i,y)}setDpi(y){this.dpi_=y}updateElement_(){const y=this.viewState_;if(!y)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const z=y.center,st=y.projection,it=this.getUnits();let Pt=(0,s._Q)(st,y.resolution,z,"degrees"==it?"degrees":"m");const kt=this.minWidth_*(this.dpi_||m)/m,zt=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||m)/m:void 0;let ee=kt*Pt,re="";if("degrees"==it){const ri=s.Wm.degrees;ee*=ri,ee<ri/60?(re="\u2033",Pt*=3600):ee<ri?(re="\u2032",Pt*=60):re="\xb0"}else"imperial"==it?ee<.9144?(re="in",Pt/=.0254):ee<1609.344?(re="ft",Pt/=.3048):(re="mi",Pt/=1609.344):"nautical"==it?(Pt/=1852,re="NM"):"metric"==it?ee<.001?(re="\u03bcm",Pt*=1e6):ee<1?(re="mm",Pt*=1e3):ee<1e3?re="m":(re="km",Pt/=1e3):"us"==it?ee<.9144?(re="in",Pt*=39.37):ee<1609.344?(re="ft",Pt/=.30480061):(re="mi",Pt/=1609.3472):(0,f.h)(!1,33);let ge,oe,Xe,oi,Qe,$e,we=3*Math.floor(Math.log(kt*Pt)/Math.log(10));for(;;){Xe=Math.floor(we/3);const ri=Math.pow(10,Xe);if(ge=l[(we%3+3)%3]*ri,oe=Math.round(ge/Pt),isNaN(oe))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==zt&&oe>=zt){ge=oi,oe=Qe,Xe=$e;break}if(oe>=kt)break;oi=ge,Qe=oe,$e=Xe,++we}const Je=this.scaleBar_?this.createScaleBar(oe,ge,re):ge.toFixed(Xe<0?-Xe:0)+" "+re;this.renderedHTML_!=Je&&(this.innerElement_.innerHTML=Je,this.renderedHTML_=Je),this.renderedWidth_!=oe&&(this.innerElement_.style.width=oe+"px",this.renderedWidth_=oe),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(y,z,st){const it=this.getScaleForResolution(),vt=it<1?Math.round(1/it).toLocaleString()+" : 1":"1 : "+Math.round(it).toLocaleString(),Pt=this.scaleBarSteps_,kt=y/Pt,zt=[this.createMarker("absolute")];for(let re=0;re<Pt;++re)zt.push(`<div><div class="ol-scale-singlebar ${re%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even"}" style="width: ${kt}px;"></div>`+this.createMarker("relative")+(re%2==0||2===Pt?this.createStepText(re,y,!1,z,st):"")+"</div>");return zt.push(this.createStepText(Pt,y,!0,z,st)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${y}px;">`+vt+"</div>":"")+zt.join("")}createMarker(y){return`<div class="ol-scale-step-marker" style="position: ${y}; top: ${"absolute"===y?3:-10}px;"></div>`}createStepText(y,z,st,it,vt){const kt=(0===y?0:Math.round(it/this.scaleBarSteps_*y*100)/100)+(0===y?"":" "+vt);return`<div class="ol-scale-step-text" style="margin-left: ${0===y?-3:z/this.scaleBarSteps_*-1}px;text-align: ${0===y?"left":"center"};min-width: ${0===y?0:z/this.scaleBarSteps_*2}px;left: ${st?z+"px":"unset"};">`+kt+"</div>"}getScaleForResolution(){return(0,s._Q)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||m)}render(y){const z=y.frameState;this.viewState_=z?z.viewState:null,this.updateElement_()}};var x=r(1014),T=r(5622),U=r(2716),D=r(5415);const C="projection",O="coordinateFormat",$=class X extends c.Z{constructor(y){y=y||{};const z=document.createElement("div");z.className=void 0!==y.className?y.className:"ol-mouse-position",super({element:z,render:y.render,target:y.target}),this.addChangeListener(C,this.handleProjectionChanged_),y.coordinateFormat&&this.setCoordinateFormat(y.coordinateFormat),y.projection&&this.setProjection(y.projection),this.renderOnMouseOut_=void 0!==y.placeholder,this.placeholder_=this.renderOnMouseOut_?y.placeholder:"&#160;",this.renderedHTML_=z.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==y.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(O)}getProjection(){return this.get(C)}handleMouseMove(y){const z=this.getMap();this.updateHTML_(z.getEventPixel(y))}handleMouseOut(y){this.updateHTML_(null)}setMap(y){if(super.setMap(y),y){const z=y.getViewport();this.listenerKeys.push((0,U.oL)(z,T.Z.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,U.oL)(z,T.Z.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(y){this.set(O,y)}setProjection(y){this.set(C,(0,s.U2)(y))}updateHTML_(y){let z=this.placeholder_;if(y&&this.mapProjection_){if(!this.transform_){const vt=this.getProjection();this.transform_=vt?(0,s.WO)(this.mapProjection_,vt):s.gD}const it=this.getMap().getCoordinateFromPixelInternal(y);if(it){const vt=(0,s.Cs)();if(vt&&(this.transform_=(0,s.WO)(this.mapProjection_,vt)),this.transform_(it,it),this.wrapX_){const kt=vt||this.getProjection()||this.mapProjection_;(0,D.Cf)(it,kt)}const Pt=this.getCoordinateFormat();z=Pt?Pt(it):it.toString()}}(!this.renderedHTML_||z!==this.renderedHTML_)&&(this.element.innerHTML=z,this.renderedHTML_=z)}render(y){const z=y.frameState;z?this.mapProjection_!=z.viewState.projection&&(this.mapProjection_=z.viewState.projection,this.transform_=null):this.mapProjection_=null}};var dt=r(3044),B=r(3161),k=r(3842);const L=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function R(Et){const y=Et.body;return!!(y.webkitRequestFullscreen||y.requestFullscreen&&Et.fullscreenEnabled)}function K(Et){return!(!Et.webkitIsFullScreen&&!Et.fullscreenElement)}function G(Et){Et.requestFullscreen?Et.requestFullscreen():Et.webkitRequestFullscreen&&Et.webkitRequestFullscreen()}const ut=class M extends c.Z{constructor(y){y=y||{},super({element:document.createElement("div"),target:y.target}),this.keys_=void 0!==y.keys&&y.keys,this.source_=y.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==y.className?y.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==y.activeClassName?y.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==y.inactiveClassName?y.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const z=void 0!==y.label?y.label:"\u2922";this.labelNode_="string"==typeof z?document.createTextNode(z):z;const st=void 0!==y.labelActive?y.labelActive:"\xd7";this.labelActiveNode_="string"==typeof st?document.createTextNode(st):st;const it=y.tipLabel?y.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=it,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(dt.Z.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${u.XV} ${u.hg}`,this.element.appendChild(this.button_)}handleClick_(y){y.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const y=this.getMap();if(!y)return;const z=y.getOwnerDocument();if(R(z))if(K(z))!function q(Et){Et.exitFullscreen?Et.exitFullscreen():Et.webkitExitFullscreen&&Et.webkitExitFullscreen()}(z);else{let st;st=this.source_?"string"==typeof this.source_?z.getElementById(this.source_):this.source_:y.getTargetElement(),this.keys_?function J(Et){Et.webkitRequestFullscreen?Et.webkitRequestFullscreen():G(Et)}(st):G(st)}}handleFullScreenChange_(){const y=this.getMap();if(!y)return;const z=this.isInFullscreen_;this.isInFullscreen_=K(y.getOwnerDocument()),z!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,k.$H)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):((0,k.$H)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),y.updateSize())}setClassName_(y,z){z?(y.classList.remove(...this.inactiveClassName_),y.classList.add(...this.activeClassName_)):(y.classList.remove(...this.activeClassName_),y.classList.add(...this.inactiveClassName_))}setMap(y){const z=this.getMap();z&&z.removeChangeListener(B.Z.TARGET,this.boundHandleMapTargetChange_),super.setMap(y),this.handleMapTargetChange_(),y&&y.addChangeListener(B.Z.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const y=this.documentListeners_;for(let st=0,it=y.length;st<it;++st)(0,U.bN)(y[st]);y.length=0;const z=this.getMap();if(z){const st=z.getOwnerDocument();R(st)?this.element.classList.remove(u.Qi):this.element.classList.add(u.Qi);for(let it=0,vt=L.length;it<vt;++it)y.push((0,U.oL)(st,L[it],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}};var ht=r(9573),_t=r(6942),Tt=r(9806),Lt=r(8296),Ht=r(2417),$t=r(5109),ae=r(1266),Qt=r(9543),_e=r(7464);const xt=class Ze extends c.Z{constructor(y){y=y||{},super({element:document.createElement("div"),render:y.render,target:y.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===y.collapsed||y.collapsed,this.collapsible_=void 0===y.collapsible||y.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==y.rotateWithView&&y.rotateWithView,this.viewExtent_=void 0;const z=void 0!==y.className?y.className:"ol-overviewmap",st=void 0!==y.tipLabel?y.tipLabel:"Overview map",it=void 0!==y.collapseLabel?y.collapseLabel:"\u2039";"string"==typeof it?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=it):this.collapseLabel_=it;const vt=void 0!==y.label?y.label:"\u203a";"string"==typeof vt?(this.label_=document.createElement("span"),this.label_.textContent=vt):this.label_=vt;const Pt=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,kt=document.createElement("button");kt.setAttribute("type","button"),kt.title=st,kt.appendChild(Pt),kt.addEventListener(dt.Z.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=y.view;const zt=new _t.Z({view:y.view,controls:new ht.Z,interactions:new ht.Z});this.ovmap_=zt,y.layers&&y.layers.forEach(function(Je){zt.addLayer(Je)});const ee=document.createElement("div");ee.className="ol-overviewmap-box",ee.style.boxSizing="border-box",this.boxOverlay_=new Ht.Z({position:[0,0],positioning:"center-center",element:ee}),this.ovmap_.addOverlay(this.boxOverlay_);const we=this.element;we.className=z+" "+u.XV+" "+u.hg+(this.collapsed_&&this.collapsible_?" "+u.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),we.appendChild(this.ovmapDiv_),we.appendChild(kt);const ge=this,oe=this.boxOverlay_,Xe=this.boxOverlay_.getElement(),Qe=function(Je){const ri=function(Je){return{clientX:Je.clientX,clientY:Je.clientY}}(Je),_i=zt.getEventCoordinateInternal(ri);oe.setPosition(_i)},$e=function(Je){const ri=zt.getEventCoordinateInternal(Je);ge.getMap().getView().setCenterInternal(ri),window.removeEventListener("mousemove",Qe),window.removeEventListener("mouseup",$e)};Xe.addEventListener("mousedown",function(){window.addEventListener("mousemove",Qe),window.addEventListener("mouseup",$e)})}setMap(y){const z=this.getMap();if(y!==z){if(z){const st=z.getView();st&&this.unbindView_(st),this.ovmap_.setTarget(null)}if(super.setMap(y),y){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,U.oL)(y,Lt.Z.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const st=y.getView();st&&(this.bindView_(st),st.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(y){if(y.key===B.Z.VIEW){const z=y.oldValue;z&&this.unbindView_(z);const st=this.getMap().getView();this.bindView_(st)}else!this.ovmap_.isRendered()&&(y.key===B.Z.TARGET||y.key===B.Z.SIZE)&&this.ovmap_.updateSize()}bindView_(y){if(!this.view_){const z=new $t.ZP({projection:y.getProjection()});this.ovmap_.setView(z)}y.addChangeListener(ae.Z.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(y){y.removeChangeListener(ae.Z.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const y=this.getMap(),z=this.ovmap_;if(!y.isRendered()||!z.isRendered())return;const st=y.getSize(),vt=y.getView().calculateExtentInternal(st);if(this.viewExtent_&&(0,Qt.fS)(vt,this.viewExtent_))return;this.viewExtent_=vt;const Pt=z.getSize(),zt=z.getView().calculateExtentInternal(Pt),ee=z.getPixelFromCoordinateInternal((0,Qt.rL)(vt)),re=z.getPixelFromCoordinateInternal((0,Qt.w$)(vt)),we=Math.abs(ee[0]-re[0]),ge=Math.abs(ee[1]-re[1]),oe=Pt[0],Xe=Pt[1];we<.1*oe||ge<.1*Xe||we>.75*oe||ge>.75*Xe?this.resetExtent_():(0,Qt.r4)(zt,vt)||this.recenter_()}resetExtent_(){const y=this.getMap(),z=this.ovmap_,st=y.getSize(),vt=y.getView().calculateExtentInternal(st),Pt=z.getView(),kt=Math.log(7.5)/Math.LN2,zt=1/(.1*Math.pow(2,kt/2));(0,Qt.H9)(vt,zt),Pt.fitInternal((0,_e.oJ)(vt))}recenter_(){const y=this.getMap(),z=this.ovmap_,st=y.getView();z.getView().setCenterInternal(st.getCenterInternal())}updateBox_(){const y=this.getMap(),z=this.ovmap_;if(!y.isRendered()||!z.isRendered())return;const st=y.getSize(),it=y.getView(),vt=z.getView(),Pt=this.rotateWithView_?0:-it.getRotation(),kt=this.boxOverlay_,zt=this.boxOverlay_.getElement(),ee=it.getCenterInternal(),re=it.getResolution(),we=vt.getResolution(),ge=st[0]*re/we,oe=st[1]*re/we;kt.setPosition(ee),zt&&(zt.style.width=ge+"px",zt.style.height=oe+"px",zt.style.transform="rotate("+Pt+"rad)")}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,U.Vx)(this.ovmap_,Tt.Z.POSTRENDER,function(y){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(y){y.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(u.hN),this.collapsed_?(0,k.$H)(this.collapseLabel_,this.label_):(0,k.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const y=this.ovmap_;if(!this.collapsed_){if(y.isRendered())return this.viewExtent_=void 0,void y.render();y.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(y){this.collapsible_!==y&&(this.collapsible_=y,this.element.classList.toggle("ol-uncollapsible"),!y&&this.collapsed_&&this.handleToggle_())}setCollapsed(y){!this.collapsible_||this.collapsed_===y||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(y){this.rotateWithView_!==y&&(this.rotateWithView_=y,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(y){this.validateExtent_(),this.updateBox_()}};var Nt=r(993),Bt=r(7274),ie=r(5267),Te=r(524),he=r(2663),Mt=r(5338),Dt=r(4879),Kt=r(1179),Yt=r(4537),Jt=r(7560),ye=r(8692);const Pe=["mapDiv"];function ze(Et,y){1&Et&&(Yt.TgZ(0,"div",3),Yt._uU(1,"+"),Yt.qZA())}let Zt=(()=>{class Et{constructor(z,st){this.mapSvc=z,this.ngZone=st,this.subs=[],this.mapSize=[0,0],this.initialMapStateSet=!1,this.removePopupsOnMouseLeave=it=>{this.mapSvc.removeAllPopups(vt=>"pointermove"===vt.get("addEvent"))}}ngOnInit(){this.subscribeToMapState(),this.initMap(),this.subscribeToLayers()}ngAfterViewInit(){this.map.setTarget(this.mapDivView.nativeElement),this.subscribeToMapEvents(),this.map.getTargetElement().addEventListener("mouseleave",this.removePopupsOnMouseLeave)}ngAfterViewChecked(){this.updateMapSize()}ngOnDestroy(){this.subs.forEach(st=>st.unsubscribe());const z=this.mapStateSvc.getMapState().value;z.options.notifier="user",this.mapStateSvc.setMapState(z),this.map&&(this.map.un("moveend",this.mapOnMoveend),this.map.un("click",this.mapOnClickMove),this.map.un("dblclick",this.mapOnDclick),this.map.getTargetElement().removeEventListener("mouseleave",this.removePopupsOnMouseLeave),this.map.getInteractions().forEach(st=>{this.map.removeInteraction(st)}))}getMapDiv(){return this.mapDivView&&this.mapDivView.nativeElement?{width:this.mapDivView.nativeElement.offsetWidth,height:this.mapDivView.nativeElement.offsetHeight}:null}updateMapSize(){const z=this.getMapDiv();if(z)if(z.width===this.mapSize[0]&&z.height===this.mapSize[1]){if(!this.initialMapStateSet){const st=this.mapStateSvc.getMapState().getValue();this.setMapState(st),this.initialMapStateSet=!0}}else this.ngZone.runOutsideAngular(()=>{this.map.updateSize(),this.mapSize=this.map.getSize()})}addUpdateLayers(z,st,it){const vt=this.mapSvc.getLayerGroups(st)[0].getLayers(),Pt=it.reduce((kt,zt)=>kt+this.mapSvc.getLayers(zt).length,0);z.length!==this.mapSvc.getLayers(st).length?this.mapSvc.setUkisLayers(z,st,Pt):this.updateLayers(z,st,Pt,vt)}updateLayers(z,st,it,vt){for(const Pt of z){const kt=this.mapSvc.getLayerByKey({key:"id",value:Pt.id},st);if(kt){kt.getVisible()!==Pt.visible&&((0,Dt.f$)(kt,Pt.visible,Pt instanceof N.AO),this.mapSvc.hideAllPopups(!Pt.visible,re=>{const ge=re.getId().toString().split(":")[0];return!ge||(ge===Pt.id?ge===Pt.id:void 0)})),kt.getOpacity()!==Pt.opacity&&(0,Dt.yv)(kt,Pt.opacity,Pt instanceof N.AO),this.updateLayerSource(Pt,kt);const zt=z.indexOf(Pt),ee=it>0?zt+it:zt;kt.getZIndex()!==ee&&((0,Dt.n8)(kt,zt,vt),(0,Dt.AH)(kt,zt,it)),this.updateLayerParamsWith(kt,Pt)}}}updateLayerSource(z,st){if(z instanceof N.AO&&st instanceof S.Z){const it=z.custom_layer.getSource(),vt=st.getSource();it&&(0,w.sq)(vt)!==(0,w.sq)(it)&&(st.setSource(it),vt instanceof Te.ZP&&vt.dispose())}else if(z instanceof N.AO&&z.custom_layer instanceof v.Z&&st instanceof v.Z){const it=z.custom_layer.getLayers().getArray();st.getLayers().getArray().forEach((Pt,kt)=>{const zt=it[kt];if(Pt instanceof S.Z&&zt instanceof S.Z){const ee=Pt.getSource(),re=zt.getSource();re&&(0,w.sq)(ee)!==(0,w.sq)(re)&&Pt.setSource(re)}})}}updateLayerParamsWith(z,st){switch(st.type){case N.MR:this.updateWmsLayerParamsWith(z,st);break;case N.$6:this.updateWmtsLayerParamsWith(z,st);break;case N.Sw:this.updateGeojsonLayerParamsWith(z,st);break;case N.KF:this.updateWfsLayerParamsWith(z,st);break;case N.CY:this.updateTmsLayerParamsWith(z,st)}}updateTmsLayerParamsWith(z,st){st instanceof N.DJ&&(0,Mt.bg)(z,st.options.style,st.options.styleSource)}updateWfsLayerParamsWith(z,st){st.options&&st.options.style!==z.getStyle()&&z.setStyle(st.options.style),z.getSource().getUrl()!==st.url&&z.getSource().setUrl(st.url)}updateGeojsonLayerParamsWith(z,st){const it=z.getSource();if(it){if(st.data){const vt=this.mapSvc.geoJsonToFeatures(st.data);if(it instanceof he.Z){const Pt=it.getSource();Pt.clear(),Pt.addFeatures(vt)}else it.clear(),it.addFeatures(vt)}else st.url&&(it instanceof he.Z?it.getSource().setUrl(st.url):it.setUrl(st.url));"object"==typeof st?.cluster&&"distance"in st.cluster&&it instanceof he.Z&&it.setDistance(st.cluster.distance)}st?.options?.style&&z.setStyle(st.options.style)}updateWmsLayerParamsWith(z,st){if(z instanceof S.Z){const vt=z.getSource().getParams(),Pt=st.params;this.shallowEqual(vt,Pt)||z.getSource().updateParams(Pt)}}updateWmtsLayerParamsWith(z,st){if(z instanceof S.Z){const it=z.getSource(),vt=it.getStyle(),Pt=it.getFormat(),kt=it.getVersion(),zt=it.getMatrixSet(),ee=st.params.style,re=st.params.format,we=st.params.version,ge=st.params.matrixSetOptions.matrixSet;if(void 0!==ee&&vt!==ee||void 0!==re&&Pt!==re||void 0!==we&&kt!==we||void 0!==ge&&zt!==ge){const oe=st.filtertype.toLowerCase();this.mapSvc.updateUkisLayer(st,oe)}}}shallowEqual(z,st){const it=Object.getOwnPropertyNames(z),vt=Object.getOwnPropertyNames(st);if(it.length!==vt.length)return!1;for(const Pt of it)if(z[Pt]!==st[Pt])return!1;return!0}addUpdateBaseLayers(z){const st=this.mapSvc.getLayerGroups("baselayers")[0].getLayers();if(z.length!==this.mapSvc.getLayers("baselayers").length){const it=z.filter(vt=>!0===vt.visible);0===it.length?z[0].visible=!0:it.length>1&&(z.forEach(vt=>vt.visible=!1),z[0].visible=!0),this.mapSvc.setUkisLayers(z,"baselayers")}else for(const it of z){const vt=this.mapSvc.getLayerByKey({key:"id",value:it.id},"baselayers");if(vt){const Pt=z.indexOf(it);vt.getVisible()!==it.visible&&(0,Dt.f$)(vt,it.visible,it instanceof N.AO),vt.getZIndex()!==Pt&&(st.remove(vt),st.insertAt(Pt,vt),(0,Dt.AH)(vt,Pt)),vt.getOpacity()!==it.opacity&&(0,Dt.yv)(vt,it.opacity,it instanceof N.AO),this.updateLayerSource(it,vt),this.updateLayerParamsWith(vt,it)}}}subscribeToLayers(){if(this.layersSvc){const z=this.layersSvc.getBaseLayers().subscribe(vt=>this.addUpdateBaseLayers(vt));this.subs.push(z);const st=this.layersSvc.getLayers().subscribe(vt=>this.addUpdateLayers(vt,"layers",["baselayers"]));this.subs.push(st);const it=this.layersSvc.getOverlays().subscribe(vt=>this.addUpdateLayers(vt,"overlays",["baselayers","layers"]));this.subs.push(it)}}setMapState(z){const st=this.mapStateSvc.getLastAction().getValue();"user"===z.options.notifier&&("setExtent"===st?this.mapSvc.setExtent(z.extent,!0):"setState"===st&&(this.mapSvc.setZoom(z.zoom),this.mapSvc.setCenter([z.center.lon,z.center.lat],!0)))}subscribeToMapState(){if(this.mapStateSvc){const z=this.mapStateSvc.getMapState().pipe(function Q(Et){return y=>y.lift(new H(Et))}(1)).subscribe(st=>this.setMapState(st));this.subs.push(z)}}subscribeToMapEvents(){this.mapOnMoveend=z=>{const st=this.mapStateSvc.getMapState().getValue(),it=this.mapSvc.getZoom(),vt=this.mapSvc.getCenter(!0),Pt=this.mapSvc.getCurrentExtent(!0),kt={lat:parseFloat(vt[1]),lon:parseFloat(vt[0])},zt=new _.U5(it,kt,{notifier:"map"},Pt,st.time);this.mapStateSvc.setMapState(zt)},this.map.on("moveend",this.mapOnMoveend),this.mapOnClickMove=z=>{this.mapSvc.layersOnMapEvent(z)},this.map.on(["click","pointermove"],this.mapOnClickMove),this.mapOnDclick=z=>{this.mapSvc.removeAllPopups()},this.map.on("dblclick",this.mapOnDclick)}initMap(){const z=this.mapSvc.createMap();this.map=z.map;const st=this.map.getInteractions();(0,Kt.c)().forEach(vt=>{st.getArray().find(kt=>kt.constructor.name===vt.constructor.name)||this.map.addInteraction(vt)}),this.setControls(),this.layersSvc||console.log("there is no layersSvc as defined!"),this.mapStateSvc||console.log("there is no mapStateSvc as defined!")}setControls(){const z=[],st=[];if(this.map&&(this.map.getControls().getArray().forEach(vt=>st.push(vt)),this.map.getControls().clear()),this.controls&&this.map){if(!1!==this.controls.attribution){let it={collapsible:!0,collapsed:!1};"object"==typeof this.controls.attribution&&(it=Object.assign(it,this.controls.attribution));const vt=new h.Z(it);z.push(vt)}if(this.controls.scaleLine){let it={};"object"==typeof this.controls.scaleLine&&(it=Object.assign(it,this.controls.scaleLine));const vt=new P(it);z.push(vt)}if(!1!==this.controls.zoom){let it={};"object"==typeof this.controls.zoom&&(it=Object.assign(it,this.controls.zoom));const vt=new x.Z(it);z.push(vt)}if(this.controls.mousePosition){let it={coordinateFormat:Pt=>(0,D.yZ)(Pt,2),projection:"EPSG:4326"};"object"==typeof this.controls.mousePosition&&(it=Object.assign(it,this.controls.mousePosition));const vt=new $(it);z.push(vt)}if(this.controls.fullScreen){let it={};"object"==typeof this.controls.fullScreen&&(it=Object.assign(it,this.controls.fullScreen));const vt=new ut(it);z.push(vt)}if(this.controls.overviewMap){const it=document.createElement("spawn");it.innerHTML='<clr-icon shape="world"></clr-icon>';let vt={layers:[new Nt.Z({source:new Bt.Z})],label:it};"object"==typeof this.controls.overviewMap&&(vt=Object.assign(vt,this.controls.overviewMap));const Pt=new xt(vt);z.push(Pt)}if(this.controls.rotate){let it={};"object"==typeof this.controls.rotate&&(it=Object.assign(it,this.controls.rotate));const vt=new ie.Z(it);z.push(vt)}z.length&&(st.filter(vt=>!z.includes(vt)).forEach(vt=>z.push(vt)),this.map.getControls().extend(z))}}}return Et.\u0275fac=function(z){return new(z||Et)(Yt.Y36(Jt.B),Yt.Y36(Yt.R0b))},Et.\u0275cmp=Yt.Xpm({type:Et,selectors:[["ukis-map-ol"]],viewQuery:function(z,st){if(1&z&&Yt.Gf(Pe,5),2&z){let it;Yt.iGM(it=Yt.CRH())&&(st.mapDivView=it.first)}},inputs:{layersSvc:"layersSvc",mapStateSvc:["mapState","mapStateSvc"],controls:"controls"},decls:3,vars:1,consts:[["ref","map",1,"map"],["mapDiv",""],["class","crosshair",4,"ngIf"],[1,"crosshair"]],template:function(z,st){1&z&&(Yt.TgZ(0,"div",0,1),Yt.YNc(2,ze,2,0,"div",2),Yt.qZA()),2&z&&(Yt.xp6(2),Yt.Q6J("ngIf",st.controls&&st.controls.crosshair))},dependencies:[ye.O5],styles:['@charset "UTF-8";:root{--ukis-crosshair-color: #ff0004;--ukis-popup-bg-color: rgb(238, 238, 238);--ukis-drop-shadow: drop-shadow(0 1px 4px rgba(0, 0, 0, .2));--ukis-ol-bbox-bg-color: rgba(255, 255, 255, .4);--ukis-ol-bbox-border-color: rgba(87, 87, 87, .4);--ukis-ol-overviewmap-left: .5em;--ukis-ol-overviewmap-bottom: 3em;--ukis-ol-control-bg-color: rgba(87, 87, 87, .6);--ukis-ol-control-border-color: rgba(87, 87, 87, .4)}.map{width:100%;height:100%;position:relative}.ol-popup{position:absolute;background-color:var(--ukis-popup-bg-color);filter:var(--ukis-drop-shadow);padding:15px;border-radius:2px;bottom:12px;left:-50px;min-width:280px;display:none;z-index:1000000}.ol-popup .ol-popup-closer{text-decoration:none;position:absolute;top:0;right:8px;cursor:pointer}.ol-popup .ol-popup-closer:after{content:"\\2716"}.ol-popup:after,.ol-popup:before{top:100%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.ol-popup:after{border-top-color:var(--ukis-popup-bg-color);border-width:10px;left:48px;margin-left:-10px}.ol-popup:before{border-width:11px;left:48px;margin-left:-11px}.ol-popup.hidden{visibility:hidden}.crosshair{top:50%;left:50%;font-size:large;color:var(--ukis-crosshair-color);z-index:1;position:absolute;cursor:default}.ol-control{padding:1px;--ol-subtle-background-color: #fff6}.ol-control button{--ol-subtle-foreground-color: #fff;--ol-foreground-color: #fff;cursor:pointer;background-color:var(--ukis-ol-control-bg-color)}.ol-control button:focus{background-color:var(--ukis-ol-control-bg-color)}.ol-control button:hover{background-color:var(--ukis-ol-control-border-color)}.ol-scale-line{background:rgba(255,255,255,.4);line-height:1.375em;padding:1px}.ol-scale-line .ol-scale-line-inner{background:var(--ukis-ol-control-bg-color);border-color:var(--ukis-ol-control-bg-color);--ol-foreground-color: #fff}.ol-attribution:not(.ol-collapsed){padding:0 2px}.ol-attribution ul{font-size:.5rem}.ol-box{background-color:var(--ukis-ol-bbox-bg-color);border-color:var(--ukis-ol-bbox-border-color)!important}.ol-box.ol-drag-select{border-color:var(--clr-color-action-600, var(--fallback-color-no-clr))!important}.ol-overviewmap{left:var(--ukis-ol-overviewmap-left)!important;bottom:var(--ukis-ol-overviewmap-bottom)!important}\n'],encapsulation:2}),Et})()},7560:(Vt,gt,r)=>{"use strict";r.d(gt,{B:()=>He});var _=r(4537),g=r(5548),Q=r(6942),H=r(5109),j=r(2462),N=r(7521),w=r(1591),S=r(2417),v=r(7319),h=r(4420),c=r(3998),u=r(6906),s=r(993),f=r(7356),i=r(585),l=r(978),m=r(5338),e=r(2705),P=r(6114),x=r(6290),T=r(6027),U=r(3298),D=r(6819),C=r(3242),O=r(9375),X=r(6941),$=r(5809),dt=r(9015);const k=class B extends C.Z{constructor(Et){const y=void 0!==Et.requestEncoding?Et.requestEncoding:"KVP",z=Et.tileGrid;let st=Et.urls;void 0===st&&void 0!==Et.url&&(st=(0,$.Gk)(Et.url)),super({attributions:Et.attributions,attributionsCollapsible:Et.attributionsCollapsible,cacheSize:Et.cacheSize,crossOrigin:Et.crossOrigin,interpolate:Et.interpolate,projection:Et.projection,reprojectionErrorThreshold:Et.reprojectionErrorThreshold,tileClass:Et.tileClass,tileGrid:z,tileLoadFunction:Et.tileLoadFunction,tilePixelRatio:Et.tilePixelRatio,urls:st,wrapX:void 0!==Et.wrapX&&Et.wrapX,transition:Et.transition,zDirection:Et.zDirection}),this.version_=void 0!==Et.version?Et.version:"1.0.0",this.format_=void 0!==Et.format?Et.format:"image/jpeg",this.dimensions_=void 0!==Et.dimensions?Et.dimensions:{},this.layer_=Et.layer,this.matrixSet_=Et.matrixSet,this.style_=Et.style,this.requestEncoding_=y,this.setKey(this.getKeyForDimensions_()),st&&st.length>0&&(this.tileUrlFunction=(0,$.Un)(st.map(this.createFromWMTSTemplate.bind(this))))}setUrls(Et){this.urls=Et;const y=Et.join("\n");this.setTileUrlFunction((0,$.Un)(Et.map(this.createFromWMTSTemplate.bind(this))),y)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const Et=this.urls?this.urls.slice(0):[];for(const y in this.dimensions_)Et.push(y+"-"+this.dimensions_[y]);return Et.join("/")}updateDimensions(Et){Object.assign(this.dimensions_,Et),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(Et){const y=this.requestEncoding_,z={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==y&&Object.assign(z,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),Et="KVP"==y?(0,X.B)(Et,z):Et.replace(/\{(\w+?)\}/g,function(vt,Pt){return Pt.toLowerCase()in z?z[Pt.toLowerCase()]:vt});const st=this.tileGrid,it=this.dimensions_;return function(vt,Pt,kt){if(!vt)return;const zt={TileMatrix:st.getMatrixId(vt[0]),TileCol:vt[1],TileRow:vt[2]};Object.assign(zt,it);let ee=Et;return ee="KVP"==y?(0,X.B)(ee,zt):ee.replace(/\{(\w+?)\}/g,function(re,we){return zt[we]}),ee}}};var p=r(1053);const R=class M extends p.Z{constructor(Et){super({extent:Et.extent,origin:Et.origin,origins:Et.origins,resolutions:Et.resolutions,tileSize:Et.tileSize,tileSizes:Et.tileSizes,sizes:Et.sizes}),this.matrixIds_=Et.matrixIds}getMatrixId(Et){return this.matrixIds_[Et]}getMatrixIds(){return this.matrixIds_}};var G=r(3149),J=r(524),q=r(2663),ut=r(9573),ht=r(8898),_t=r(4007),Tt=r(2632),Lt=r(3669),Ht=r(3431),$t=r(9543),ae=r(2258),Qt=r(4720),_e=r(1786),Ce=r(8185),xe=r(694),Ze=r(795),xt=r(5253),Nt=r(2659),Bt=r(513),ie=r(9765),Te=r(4879);const he="type",Mt="filtertype",Dt="id",Kt="groupID",Yt="groupName",Jt="title",Pe="EPSG:4326",ze="popup";let He=(()=>{class Zt{constructor(y,z){this.app=y,this.envInjector=z,this.hitTolerance=0,this.hitLayerCurr=null,this.hitLayerPrev=null,this.projectionChange=new ie.xQ,this.dynamicPopupComponents=new Map,this.popupEvents=new ie.xQ,this.filterLayerNoPopup=st=>{const it=st.get(ze);let vt=!0;return it||(vt=!1),it&&this.isPopupObj(it)&&!0===it.filterLayer&&(vt=!1),vt},this.map=new Q.Z({controls:[]}),this.view=new H.ZP,this.EPSG="EPSG:3857"}createMap(y){const it=new w.Z({layers:[]});it.set(Mt,"baselayers"),it.set(Jt,"Base maps"),it.set(Dt,"ID_filtertype_baselayers");const vt=new w.Z({layers:[]});vt.set(Mt,"layers"),vt.set(Jt,"Layers"),vt.set(Dt,"ID_filtertype_layers");const Pt=new w.Z({layers:[]});Pt.set(Mt,"overlays"),Pt.set(Jt,"Overlays"),Pt.set(Dt,"ID_filtertype_overlays"),this.viewOptions={center:(0,dt.vs)([0,0],Pe,this.EPSG),zoom:0,projection:(0,dt.U2)(this.EPSG)},this.view.constrainRotation&&(this.viewOptions.constrainRotation=this.view.constrainRotation),this.view.enableRotation&&(this.viewOptions.enableRotation=this.view.enableRotation),this.view.extent&&(this.viewOptions.extent=this.view.extent),this.view.constrainOnlyCenter&&(this.viewOptions.constrainOnlyCenter=this.view.constrainOnlyCenter),this.view.smoothExtentConstraint&&(this.viewOptions.smoothExtentConstraint=this.view.smoothExtentConstraint),this.view.getMaxResolution()&&(this.viewOptions.maxResolution=this.view.getMaxResolution()),this.view.getMinResolution()&&(this.viewOptions.minResolution=this.view.getMinResolution()),this.view.getMaxZoom()&&(this.viewOptions.maxZoom=this.view.getMaxZoom()),this.view.getMinZoom()&&(this.viewOptions.minZoom=this.view.getMinZoom()),this.view.multiWorld&&(this.viewOptions.multiWorld=this.view.multiWorld),this.view.constrainResolution&&(this.viewOptions.constrainResolution=this.view.constrainResolution),this.view.smoothResolutionConstraint&&(this.viewOptions.smoothResolutionConstraint=this.view.smoothResolutionConstraint),this.view.getResolution()&&(this.viewOptions.resolution=this.view.getResolution()),this.view.getResolutions()&&(this.viewOptions.resolutions=this.view.getResolutions()),this.view.rotation&&(this.viewOptions.rotation=this.view.rotation),this.view.zoomFactor&&(this.viewOptions.zoomFactor=this.view.zoomFactor);const kt=new H.ZP(this.viewOptions);return this.map.getLayerGroup().getLayers().clear(),[it,vt,Pt].map(zt=>this.map.addLayer(zt)),this.map.setView(kt),this.view=this.map.getView(),this.setProjection(this.EPSG),y&&this.map.setTarget(y),{map:this.map,view:this.view}}setHitTolerance(y){this.hitTolerance=y}getHitTolerance(){return this.hitTolerance}addBboxSelection(y,z,st,it){Object.assign({className:"ol-drag-select",condition:y},it);const Pt=new Nt.Z(it);return z&&Pt.on("boxstart",kt=>{z(kt)}),st&&Pt.on("boxend",kt=>{const zt=Pt.getGeometry().getExtent();st(zt,kt)}),this.map.addInteraction(Pt),Pt}getLayers(y){const z=y.toLowerCase();let st;return this.map.getLayers().getArray().forEach(it=>{it.get(Mt)===z&&(st=it.getLayers().getArray())}),st}getLayersFromGroup(y,z,st=!1){const it=y.getLayers().getArray();let vt=it;if(st){let Pt=[].concat(it);it.forEach(kt=>{kt instanceof w.Z&&(Pt=Pt.concat(this.getLayersFromGroup(kt,z,!0)))}),vt=Pt}return z?vt.filter(Pt=>Pt.get(Mt)&&Pt.get(Mt).toLowerCase()===z.toLowerCase()):vt}getLayerByKey(y,z){const st=this.getLayersFromGroup(this.map.getLayerGroup(),z),it=(0,Te.fA)(st),vt=[];if(it.forEach(Pt=>{Pt.get(y.key)&&Pt.get(y.key)===y.value&&-1===vt.indexOf(Pt)&&vt.push(Pt)}),!vt.length){const Pt=this.getLayersFromGroup(this.map.getLayerGroup(),z,!0);Pt.length&&Pt.forEach(kt=>{kt.get(y.key)&&kt.get(y.key)===y.value&&-1===vt.indexOf(kt)&&vt.push(kt)})}return 1===vt.length?vt[0]:null}setRecursiveKey(y,z,st=Mt){y.set(st,z),y instanceof w.Z&&y.getLayers().forEach(it=>{this.setRecursiveKey(it,z,st)})}addLayer(y,z){const st=z.toLowerCase();let it;return this.map.getLayers().getArray().forEach(vt=>{vt.get(Mt)===st&&(this.isLayerInGroup(y,vt)||(it=vt.getLayers().getArray(),this.setRecursiveKey(y,st,Mt),it.push(y),vt.setLayers(new ut.Z(it))))}),it}isLayerInGroup(y,z){return!!z.getLayers().getArray().filter(vt=>vt.get(Dt)===y.get(Dt)).length}getLayerGroups(y){const z=[];return this.map.getLayers().forEach(st=>{st instanceof w.Z&&(y?st.get(Mt)&&st.get(Mt).toLowerCase()===y.toLowerCase()&&z.push(st):z.push(st))}),z}addLayers(y,z){const st=z.toLocaleLowerCase();let it;return this.getLayerGroups(st).forEach(Pt=>{Pt.getLayers().getLength()>0?(it=Pt.getLayers().getArray(),y.map(zt=>{this.isLayerInGroup(zt,Pt)||it.push(zt)})):it=y,it.forEach(zt=>{zt instanceof w.Z&&this.setRecursiveKey(zt,st,Mt)}),Pt.setLayers(new ut.Z(it))}),it}setLayers(y,z){const st=z.toLocaleLowerCase(),it=this.getLayerGroups(st);return y.forEach(vt=>{vt instanceof w.Z&&this.setRecursiveKey(vt,z.toLocaleLowerCase(),Mt)}),it.forEach(vt=>{this.cleanUpEventListeners(vt,y),vt.setLayers(new ut.Z(y))}),y}cleanUpEventListeners(y,z){const st=y.getLayers().getArray().filter(it=>!z.map(vt=>vt.get(Dt)).includes(it.get(Dt)));this.removeListenersFromOldLayers(st),st.forEach(it=>y.getLayers().remove(it))}addEventsToLayer(y,z,st){y.events&&(y.events.layer&&y.events.layer.forEach(it=>{z.getListeners(it.event)||z.on(it.event,it.listener)}),y.events.source&&y.events.source.forEach(it=>{st.getListeners(it.event)||st.on(it.event,it.listener)}))}removeListenersFromOldLayers(y){const z=st=>{if("function"==typeof st.getSource){const it=st.getSource();it&&(it instanceof J.ZP&&it.dispose(),it.hasListener()&&it.disposeInternal())}st.hasListener()&&st.disposeInternal()};y.forEach(st=>{st instanceof w.Z?st.getLayers().forEach(it=>{z(it)}):st instanceof j.Z&&z(st)})}getLayerGroupForLayer(y){const z=this.getLayersFromGroup(this.map.getLayerGroup(),null,!0);z.push(this.map.getLayerGroup());let st=null;return z.forEach(it=>{if(it instanceof w.Z){const Pt=this.getLayersFromGroup(it).find(kt=>kt===y);Pt&&(st={group:it,layer:Pt})}}),st}removeLayerByKey(y,z){const st=z.toLocaleLowerCase(),it=this.getLayerByKey(y,st);if(it){const vt=this.getLayerGroupForLayer(it);if(vt.group){const Pt=this.getLayersFromGroup(vt.group).filter(kt=>kt!==it);vt.group.setLayers(new ut.Z(Pt))}}}updateLayerByKey(y,z,st){const it=st.toLocaleLowerCase();this.map.getLayers().forEach(vt=>{if(vt.get(Mt)===it){const Pt=vt.getLayers();Pt.forEach((kt,zt)=>{if(kt.get(y.key)&&kt.get(y.key)===y.value){const ee=z.getProperties(),re=z.getExtent(),we=z.getMaxZoom(),ge=z.getMinZoom(),oe=z.getOpacity(),Xe=z.getVisible(),oi=z.getZIndex();if(kt instanceof N.Z&&z instanceof N.Z){const Qe=z.getSource();kt.setSource(Qe)}ee&&kt.setProperties(ee),re&&kt.setExtent(re),we&&kt.setMaxZoom(we),ge&&kt.setMinZoom(ge),oe&&kt.setOpacity(oe),Xe&&kt.setVisible(Xe),oi&&(0,Te.AH)(kt,oi),kt.changed(),Pt.setAt(zt,kt)}}),vt.setLayers(Pt)}})}removeAllLayers(y){const z=y.toLowerCase();let st;this.map.getLayers().getArray().forEach(it=>{it.get(Mt)===z&&(st=it.getLayers(),st.clear())})}setUkisLayers(y,z,st){const it=z.toLowerCase(),vt=[];if(y.length<1&&"baselayers"!==it?this.removeAllLayers(it):y.forEach((Pt,kt)=>{const zt=this.create_layers(Pt);zt&&((0,Te.AH)(zt,kt,st),vt.push(zt))}),vt.length>0)return this.setLayers(vt,it),{type:it,layers:vt}}setUkisLayer(y,z){z||(z=y.filtertype);const st=z.toLowerCase(),vt=this.getLayers(st).find(kt=>kt.get(Dt)===y.id),Pt=this.create_layers(y);vt?(this.removeLayerByKey({key:Dt,value:vt.get(Dt)},z),this.addLayer(Pt,z)):this.addLayer(Pt,z)}updateUkisLayer(y,z){z||(z=y.filtertype);const st=z.toLowerCase(),vt=this.getLayers(st).find(kt=>kt.get(Dt)===y.id),Pt=this.create_layers(y);Pt&&this.updateLayerByKey({key:Dt,value:vt.get(Dt)},Pt,z)}create_layers(y){let z;switch(y.type){case g.Aq:z=this.create_xyz_layer(y);break;case g.MR:z=this.create_wms_layer(y);break;case g.$6:z=this.create_wmts_layer(y);break;case g.CY:z=this.create_tms_layer(y);break;case g.Sw:z=this.create_geojson_layer(y);break;case g.R6:z=this.create_kml_layer(y);break;case g.KF:z=this.create_wfs_layer(y);break;case g.ED:z=this.create_custom_layer(y);break;case g.jn:z=this.create_stacked_layer(y)}return z}createOlLayerOptions(y,z,st){st&&(y.attribution&&st.setAttributions([y.attribution]),y.continuousWorld&&(st.wrapX_=y.continuousWorld),y.popup&&!y.crossOrigin&&null!==y.crossOrigin&&this.sourceSetCross(st),(y.crossOrigin||null===y.crossOrigin)&&this.sourceSetCross(st));const it={opacity:y.opacity||1,visible:y.visible,zIndex:1,id:y.id,name:y.name,filtertype:y.filtertype,type:z,legendImg:y.legendImg};return st&&(it.source=st),y.popup&&(it.popup=y.popup,it.className=y.id),y.maxResolution&&(it.maxResolution=y.maxResolution),y.minResolution&&(it.minResolution=y.minResolution),y.maxZoom&&(it.maxZoom=y.maxZoom),y.minZoom&&(it.minZoom=y.minZoom),y.bbox&&(it.extent=(0,dt.$A)(y.bbox.slice(0,4),Pe,this.getProjection().getCode())),it}create_xyz_layer(y){const z={wrapX:!1};y.crossOrigin&&(z.crossOrigin=y.crossOrigin);const st=new x.Z(z),it=this.createOlLayerOptions(y,"xyz",st),Pt=new s.Z(Object.assign(it,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(y,Pt),this.setCrossOrigin(y,Pt),this.addEventsToLayer(y,Pt,st),Pt}create_tms_layer(y){let z=null;if(y instanceof g.YY)return z=this.create_xyz_layer(y),z.set("type","tms"),z;if(y instanceof g.DJ){const st=new l.Z({format:new P.Z,tileGrid:(0,e.dl)({minZoom:y.minZoom||void 0,maxZoom:y.maxZoom||void 0}),url:y.url,wrapX:!1}),it=this.createOlLayerOptions(y,"tms",st);z=new i.Z(Object.assign(it,{declutter:!0,renderMode:"hybrid"})),this.setCrossOrigin(y,z),this.addEventsToLayer(y,z,st);const Pt=y?.options?.style,kt=y?.options?.styleSource;return Pt&&kt&&((0,m.h0)(z,Pt),(0,m.bg)(z,Pt,kt).then(zt=>{this.setSubdomains(y,z)})),z}}create_wms_layer(y){let z;return"true"===y.params?.TILED||null==y.params?.TILED?z=this.create_tiled_wms_layer(y):"false"===y.params?.TILED&&(z=this.create_image_wms_layer(y)),z}create_tiled_wms_layer(y){const z={params:Object.assign({},this.keysToUppercase(y.params)),wrapX:!1};y.tileSize&&(z.tileGrid=this.getTileGrid("default",null,y.tileSize),delete z.params.tileSize),y.crossOrigin&&(z.crossOrigin=y.crossOrigin);const st=new U.Z(z),vt=this.createOlLayerOptions(y,"wms",st),Pt=new s.Z(Object.assign(vt,{preload:0,useInterimTilesOnError:!0}));return this.setSubdomains(y,Pt),this.addEventsToLayer(y,Pt,st),Pt}create_image_wms_layer(y){const z={params:Object.assign({},this.keysToUppercase(y.params)),url:y.url},st=new D.Z(z),it=this.createOlLayerOptions(y,"wms",st),Pt=new u.Z(Object.assign(it,{}));return this.addEventsToLayer(y,Pt,st),Pt}create_wmts_layer(y){if(y instanceof g.RC){let z=this.getTileGrid("wmts"),st=this.EPSG;y.params.matrixSetOptions&&(st=y.params.matrixSetOptions.matrixSet,"resolutions"in y.params.matrixSetOptions?z=this.getTileGrid("wmts",null,y.tileSize,null,y.params.matrixSetOptions.resolutions):("resolutionLevels"in y.params.matrixSetOptions||"tileMatrixPrefix"in y.params.matrixSetOptions)&&(z=this.getTileGrid("wmts",y.params.matrixSetOptions.resolutionLevels,y.tileSize,y.params.matrixSetOptions.tileMatrixPrefix,null)),"matrixIds"in y.params.matrixSetOptions&&(z=this.getTileGrid("wmts",null,y.tileSize,null,null,y.params.matrixSetOptions.matrixIds)));let it={url:y.url,tileGrid:z,matrixSet:st,wrapX:!1,layer:y.params.layer,style:y.params.style};it=Object.assign({},it,y.params),y.crossOrigin&&(it.crossOrigin=y.crossOrigin);const vt=new k(it),Pt=this.createOlLayerOptions(y,"wmts",vt),zt=new s.Z(Object.assign(Pt,{}));return this.setSubdomains(y,zt),this.setCrossOrigin(y,zt),this.addEventsToLayer(y,zt,vt),zt}console.error(`layer with id: ${y.id} and type ${y.type} is no instanceof WmtsLayer!`)}create_wfs_layer(y){let z=null;z=0===y.url.indexOf("http://")||0===y.url.indexOf("https://")?new URL(y.url):new URL(y.url,window.location.origin),z.searchParams.set("srsname",this.EPSG);const st=new G.Z({format:new ht.Z,url:z.toString()}),it=this.createOlLayerOptions(y,"wfs",st),vt={};y.options&&Object.assign(vt,y.options);const Pt=new f.Z(Object.assign(it,vt));return y.cluster&&this.setCluster(y,Pt,st,{}),this.setSubdomains(y,Pt),this.setCrossOrigin(y,Pt),this.addEventsToLayer(y,Pt,st),Pt}create_geojson_layer(y){let z;y.data?z=new G.Z({features:this.geoJsonToFeatures(y.data),format:new ht.Z,wrapX:!1}):y.url&&(z=new G.Z({url:y.url,format:new ht.Z({dataProjection:Pe,featureProjection:this.EPSG}),wrapX:!1}));const st=this.createOlLayerOptions(y,"geojson",z),it={};y.options&&Object.assign(it,y.options);const vt=new f.Z(Object.assign(st,it));return y.cluster&&this.setCluster(y,vt,z,{}),this.setCrossOrigin(y,vt),this.addEventsToLayer(y,vt,z),vt}create_kml_layer(y){let z;y.data?z=new G.Z({features:new _t.ZP({extractStyles:!0}).readFeatures(y.data,{dataProjection:Pe,featureProjection:this.EPSG}),format:new _t.ZP,wrapX:!1}):y.url&&(z=new G.Z({url:y.url,format:new _t.ZP({extractStyles:!0,crossOrigin:y.crossOrigin&&null===y.crossOrigin?y.crossOrigin:"anonymous"}),wrapX:!1}));const st=this.createOlLayerOptions(y,"kml",z),it={};y.options&&Object.assign(it,y.options);const vt=new f.Z(Object.assign(st,it));return y.cluster&&this.setCluster(y,vt,z,{}),this.setCrossOrigin(y,vt),this.addEventsToLayer(y,vt,st.source),vt}setCrossOrigin(y,z){if(z instanceof N.Z){const st=z.getSource();y.popup&&!y.crossOrigin&&null!==y.crossOrigin&&this.sourceSetCross(st),(y.crossOrigin||null===y.crossOrigin)&&this.sourceSetCross(st)}}setCluster(y,z,st,it){if(y.cluster){const vt={};"object"==typeof y.cluster&&Object.assign(vt,y.cluster),vt.source=st;const Pt=new q.Z(vt);z.setSource(Pt),z.setStyle(kt=>{const zt=kt.get("features").length;let ee=it[zt];return ee||(ee=new _e.ZP({image:new Ze.Z({radius:10,stroke:new xt.Z({color:"#fff"}),fill:new xe.Z({color:"#3399CC"})}),text:new Ce.Z({text:zt.toString(),fill:new xe.Z({color:"#fff"})})}),it[zt]=ee),ee})}}setSubdomains(y,z){if(y instanceof g.DJ||y instanceof g.YY){const st=z.getSource();if(y.subdomains){if("wfs"===y.type&&st instanceof G.Z)y.url=y.url.replace("{s}",`${y.subdomains[0]}-${y.subdomains[y.subdomains.length-1]}`),st.setUrl(y.url);else if(!(st instanceof G.Z)){const it=y.subdomains.map(vt=>y.url.replace("{s}",`${vt}`));st.setUrls(it)}}else st.setUrl(y.url)}}sourceSetCross(y){(y instanceof O.ZP||y instanceof C.Z||y instanceof T.Z)&&(y.crossOrigin="anonymous",y.crossOrigin_="anonymous")}create_custom_layer(y){if(y.custom_layer){const z=y.custom_layer;if(z instanceof N.Z){const it=z.getSource();y.attribution&&it.setAttributions([y.attribution]),it.wrapX_=!!y.continuousWorld&&y.continuousWorld,this.setCrossOrigin(y,z),this.addEventsToLayer(y,z,it),it instanceof J.ZP&&z.on("change:source",vt=>{vt.oldValue.dispose()})}else z instanceof w.Z?z.getLayers().forEach(it=>{it.set(Kt,y.id),it.set(Yt,y.name);const vt=`${y.id}_${(0,Bt.sq)(it)}`;if(it.get(Dt)||it.set(Dt,vt),it instanceof N.Z&&(this.setCrossOrigin(y,it),this.addEventsToLayer(y,it,it.getSource())),y.popup&&!it.get(ze)&&(it.set(ze,y.popup),"ol-layer"===it.getClassName()&&(it.className_=vt)),y.bbox){const Pt=(0,dt.$A)(y.bbox.slice(0,4),Pe,this.getProjection().getCode());it.setExtent(Pt)}}):console.error(`The custom_layer of ${y.id} in not a openlayers Layer`);y.maxResolution&&z.setMaxResolution(y.maxResolution),y.minResolution&&z.setMinResolution(y.minResolution),y.maxZoom&&z.setMaxZoom(y.maxZoom),y.minZoom&&z.setMinZoom(y.minZoom);const st={type:"custom",name:y.name,id:y.id,visible:y.visible,legendImg:y.legendImg,opacity:y.opacity||1,zIndex:1};if(y.popup&&!(z instanceof w.Z)&&(st.popup=y.popup,z.className_=y.id),y.bbox){const it=(0,dt.$A)(y.bbox.slice(0,4),Pe,this.getProjection().getCode());z.setExtent(it)}return z.setProperties(st),z}console.log("attribute custom_layer not set on layer type custom!",y)}create_stacked_layer(y){if(y instanceof g.WQ){const z=y.layers.map(Pt=>(Pt.visible=y.visible,Pt.opacity=y.opacity,y.popup&&(Pt.popup=y.popup),y.events&&(Pt.events=y.events),this.create_layers(Pt))),st=this.createOlLayerOptions(y,"custom");return z.forEach(Pt=>{Pt.set(Kt,y.id),Pt.set(Yt,y.name)}),new w.Z(Object.assign(st,{layers:z}))}console.log("layer is not of type StackedLayer!",y)}resolutionsFromExtent(y,z,st){const it=z,vt=(0,$t.Cr)(y),Pt=(0,$t.dz)(y),kt=Math.max(Pt/st,vt/st),zt=it+1,ee=new Array(zt);for(let re=0;re<zt;++re)ee[re]=kt/Math.pow(2,re);return ee}matrixIdsFromResolutions(y,z){return Array.from(Array(y).keys()).map(st=>z?`${z}:${st}`:st)}getTileGrid(y="default",z,st,it,vt,Pt){const kt=z||ae.e,zt=st||ae.S,ee=it||"",re=this.getProjection().getExtent(),we=this.resolutionsFromExtent(re,kt,zt),ge=this.matrixIdsFromResolutions(we.length,ee),oe={extent:re,origin:(0,$t.rL)(re),resolutions:vt||we,tileSize:[zt,zt]};return"wmts"===y?(oe.matrixIds=Pt||ge,new R(oe)):"default"===y?new p.Z(oe):void 0}isPopupObj(y){return y&&"object"==typeof y&&!Array.isArray(y)}isPopupObjMove(y){return this.isPopupObj(y)&&"move"===y.event}isPopupObjClick(y){return this.isPopupObj(y)&&"click"===y.event}isPopupObjArray(y){return Array.isArray(y)&&y.length&&this.isPopupObj(y[0])}isPopupStringArray(y){return Array.isArray(y)&&y.length&&"string"==typeof y[0]}eventIsBrowserEvent(y,z){return"move"===y&&"pointermove"===z.type||"click"===y&&"click"===z.type||void 0}layersOnMapEvent(y){let z=!1;const st=this.map.getAllLayers();let it=st.length;const vt=new Map;let Pt=null;for(;it--;){const kt=st[it];let zt=kt.getVisible(),ee=kt.getOpacity();const re=kt.get(Kt);if(re){const ge=this.getLayerByKey({key:Dt,value:re});zt=ge.getVisible(),ee=ge.getOpacity()}const we=kt.get(ze);if(this.checkForPopupAsObservable(kt,zt,ee,we,vt),zt&&0!==ee&&this.filterLayerExtent(kt,y.pixel)&&!we)break;if(this.filterLayerNoPopup(kt)&&kt.getData&&kt.getData(y.pixel)&&this.checkIsRaster(kt)){const ge=kt.getData(y.pixel);let oe;if((ge instanceof Uint8ClampedArray||ge instanceof Uint8Array||ge instanceof Float32Array)&&(oe=ge[3]),oe||ge instanceof DataView){Pt={layer:kt,color:ge};break}}else if(this.filterLayerNoPopup(kt)&&this.filterLayerExtent(kt,y.pixel)&&this.checkIsVector(kt)){const ge=this.map.getFeaturesAtPixel(y.pixel,{layerFilter:oe=>kt.get(Dt)===oe.get(Dt)});if(ge.length){Pt={layer:kt,feature:ge[0]};break}}}if(Pt){const kt=Pt.layer.get(ze);this.hitLayerCurr=Pt.layer.get(Dt),this.hitLayerPrev||(this.hitLayerPrev=this.hitLayerCurr),(Pt.color||Pt.feature)&&(z=!0),this.hitLayerPrev&&this.hitLayerPrev!==this.hitLayerCurr&&(z=!1,this.hitLayerPrev=this.hitLayerCurr),this.checkTopLayerEvent(y,kt)&&this.layerOnEvent(y,Pt.layer,Pt.color,Pt.feature)}z?this.map.getTargetElement().style.cursor="pointer":(this.publishNullPropertiesAsObservable(vt,y),this.removeAllPopups(kt=>"pointermove"===kt.get("addEvent")),this.map.getTargetElement().style.cursor="")}checkForPopupAsObservable(y,z,st,it,vt){z&&0!==st&&it&&(this.isPopupObj(it)&&it.asObservable?vt.set(y.get(Dt),y):this.isPopupObjArray(it)&&it.forEach(Pt=>{Pt.asObservable&&vt.set(y.get(Dt),y)}))}publishNullPropertiesAsObservable(y,z){y.size&&y.forEach(st=>{const it=st.get(ze),vt=[];this.isPopupObj(it)&&it.asObservable?vt.push(it):this.isPopupObjArray(it)&&it.forEach(Pt=>{Pt.asObservable&&vt.push(Pt)}),vt.forEach(Pt=>{this.eventIsBrowserEvent(Pt.event||"click",z)&&this.popupEvents.next({popupObj:Pt,popupParams:{layerId:st.get(Dt),layerName:st.get("name"),mapEvent:z,layer:st,properties:null}})})})}checkTopLayerEvent(y,z){let st=null;const it=(vt,Pt)=>{Pt.event?this.eventIsBrowserEvent(Pt.event,vt)&&this.isPopupObjClick(Pt)?st="click":this.eventIsBrowserEvent(Pt.event,vt)&&this.isPopupObjMove(Pt)&&(st="move"):"click"===vt.type&&(st="click")};return"boolean"==typeof z?!0===z&&"click"===y.type&&(st="click"):this.isPopupStringArray(z)?"click"===y.type&&(st="click"):this.isPopupObjArray(z)?z.map(vt=>{it(y,vt)}):it(y,z),st}checkIsRaster(y){return y instanceof c.Z||y instanceof v.Z}checkIsVector(y){return y instanceof h.Z&&!this.checkIsRaster(y)}layerOnEvent(y,z,st,it){this.checkIsRaster(z)?this.rasterOnEvent(y,z,st):this.checkIsVector(z)&&this.vectorOnEvent(y,z,it)}filterLayerExtent(y,z){let st=!0;const it=y.getExtent();if(it){const vt=this.map.getCoordinateFromPixel(z);(0,$t.b8)(it,vt)||(st=!1)}return st}vectorOnEvent(y,z,st){if(z&&st){const it=z.get(ze);let vt={};const kt=st.getProperties().features;if(kt&&1===kt.length)vt=kt[0].getProperties();else{if(kt&&kt.length>1){if("click"===y.type){const zt=this.getFeaturesExtent(kt);return this.setExtent(zt),!1}return!0}vt=st.getProperties()}this.prepareAddPopup(z,y,it,st,vt)}}rasterOnEvent(y,z,st){const it=z.get(ze);it&&this.prepareAddPopup(z,y,it,null,null,st)}prepareAddPopup(y,z,st,it,vt,Pt){const kt=y.getProperties(),zt={layerId:kt.id,layerName:kt.name||kt[Yt]||null,mapEvent:z,layer:y,properties:vt?Object.assign({},vt):{}};zt.properties?.geometry&&delete zt.properties.geometry,it&&(zt.feature=it),Pt&&(zt.color=Pt);const ee=ge=>{ge&&ge.filterkeys&&(zt.properties=Object.keys(zt.properties).filter(oe=>ge.filterkeys.includes(oe)).reduce((oe,Xe)=>(oe[Xe]=zt.properties[Xe],oe),{}))};this.isPopupStringArray(st)?zt.properties=Object.keys(zt.properties).filter(ge=>st.includes(ge)).reduce((ge,oe)=>(ge[oe]=zt.properties[oe],ge),{}):this.isPopupObjArray(st)?ee(st.find(oe=>this.eventIsBrowserEvent(oe.event,z))):this.isPopupObj(st)&&ee(st);const re=ge=>{if(ge.properties){const oe=Object.keys(ge.properties);Array.isArray(oe)&&(zt.properties=Object.keys(zt.properties).reduce((Xe,oi)=>{const Qe=ge.properties[oi];return Qe?Xe[Qe]=zt.properties[oi]:Xe[oi]=zt.properties[oi],Xe},{}))}};this.isPopupObjArray(st)?st.forEach(ge=>{this.eventIsBrowserEvent(ge.event,z)&&re(ge)}):this.isPopupObj(st)&&re(st);const we=ge=>{"asyncPopup"in ge?ge.asyncPopup(zt,oe=>{ge.asObservable?this.publishPopupEvent(ge,zt,oe):this.addPopup(zt,ge,oe,ge.event,ge.single)}):ge.asObservable?this.publishPopupEvent(ge,zt):this.addPopup(zt,ge,null,ge.event,ge.single)};"boolean"==typeof st||this.isPopupStringArray(st)?this.addPopup(zt):this.isPopupObjArray(st)?st.forEach(ge=>{this.eventIsBrowserEvent(ge.event,z)&&we(ge)}):st&&we(st)}publishPopupEvent(y,z,st){st&&(z.properties=Object.assign(z.properties,st)),this.popupEvents.next({popupObj:y,popupParams:z})}addPopup(y,z,st,it,vt){const Pt=y.layer.get(ze),kt=y.layer.get(Dt),zt="popup_move_ID",ee="move_ID_L_F",re=this.getPopups().find(oe=>oe.getId()===zt),we=y.mapEvent;let ge=null;if("move"===it&&(y.color?ge=`${kt}:${y.color.toString()}`:y.feature?ge=`${kt}:${(0,Bt.sq)(y.feature)}`:y.layer&&(ge=`${kt}:${(0,Bt.sq)(y.layer)}`)),"move"===it&&"pointermove"===we.type&&re){let oe;const Xe=y.feature;if(oe=Xe&&"Point"===Xe.getGeometry()?.getType()?Xe.getGeometry().getCoordinates():we.coordinate,ge!==re.get(ee)){const oi=this.createPopupContainer(re,y,z,st,it);re.setElement(oi)}re.setPosition(oe),re.getElement().parentElement.style.zIndex="1"}else if("pointermove"!==we.type||it)if("pointermove"===we.type&&"click"===it)re&&this.removeAllPopups(oe=>"pointermove"===oe.get("addEvent"));else{let oe=null;oe="move"===it?zt:y.feature?`${kt}:${(0,Bt.sq)(y.feature)}`:y.layer?`${kt}:${(0,Bt.sq)(y.layer)}`:`${kt}:popup_${(new Date).getTime()}`;const Xe={id:oe,autoPan:{animation:{duration:250}},positioning:"bottom-center",stopEvent:!0,insertFirst:!1};let oi=Xe;if(this.isPopupObjArray(Pt)){const ui=Pt.find(di=>this.eventIsBrowserEvent(di.event,we));ui.options&&(oi=Object.assign(Xe,ui.options))}else this.isPopupObj(Pt)&&Pt.options&&(oi=Object.assign(Xe,Pt.options));const Qe=new S.Z(oi);ge&&Qe.set(ee,ge),vt&&this.removeAllPopups(ui=>{const ot=ui.getId().toString().split(":")[0];return!ot||(kt===ot?kt===ot:void 0)});const $e=this.getPopups().find(ui=>ui.getId()===Qe.getId()&&Qe.getId()!==zt);$e&&(this.map.removeOverlay($e),this.destroyDynamicPopupComponent($e.getId().toString()));const Je=this.createPopupContainer(Qe,y,z,st,it);let ri;Qe.getId()===zt?Qe.set("addEvent","pointermove"):Qe.set("addEvent",we.type),Qe.set(he,ze),Qe.setElement(Je);const _i=y.feature;ri=_i&&"Point"===_i.getGeometry()?.getType()?_i.getGeometry().getCoordinates():we.coordinate,Qe.setPosition(ri),re&&"move"===it||this.map.addOverlay(Qe)}else re&&this.removeAllPopups(oe=>"pointermove"===oe.get("addEvent"))}createPopupContainer(y,z,st,it,vt){const Pt=document.createElement("div");Pt.className="ol-popup-content";let kt="";if(st?.popupFunction){const ee=st.popupFunction(z);kt="string"==typeof ee?ee:this.createPopupHtml(ee)}else it?kt="string"==typeof it?it:this.createPopupHtml(it):Object.keys(z.properties).length&&(kt=this.createPopupHtml(z.properties));if(Pt.innerHTML=kt,st?.dynamicPopup){const ee=y.getId().toString();this.destroyDynamicPopupComponent(ee),this.createDynamicPopupComponent(ee,Pt,z,st)}const zt=document.createElement("div");if(zt.className="ol-popup",zt.id=y.getId().toString(),zt.style.display="block",!vt||"move"!==vt){const ee=document.createElement("a");ee.className="ol-popup-closer",zt.appendChild(ee);const re=()=>{ee.removeEventListener("click",re,!1),this.map.removeOverlay(y),this.destroyDynamicPopupComponent(y.getId().toString())};ee.addEventListener("click",re,!1)}return zt.appendChild(Pt),zt}removeAllPopups(y){let z=this.getPopups();y&&(z=this.getPopups().filter(y)),z.forEach(st=>{st.get(he)===ze&&(this.map.removeOverlay(st),this.destroyDynamicPopupComponent(st.getId().toString()))})}hideAllPopups(y,z){let st=this.getPopups();z&&(st=this.getPopups().filter(z)),st.forEach(it=>{if(it.get(he)===ze){const vt=it.getElement();y?vt.classList.add("hidden"):vt.classList.remove("hidden")}})}createPopupHtml(y){let z="<table>";for(const st in y)y.hasOwnProperty(st)&&(z+='<tr><td style="vertical-align: top; padding-right: 7px;"><b>'+st+": </b></td><td>"+y[st]+"</td></tr>");return z+="</table>",z}getPopups(){const y=[];return this.map.getOverlays().getArray().slice(0).forEach(z=>{z.get(he)===ze&&y.push(z)}),y}destroyDynamicPopupComponent(y){this.dynamicPopupComponents.has(y)&&(this.dynamicPopupComponents.get(y).destroy(),this.dynamicPopupComponents.delete(y))}createDynamicPopupComponent(y,z,st,it){const vt=(0,_.LMc)(it.dynamicPopup.component,{environmentInjector:this.envInjector,hostElement:z});if(it.dynamicPopup.getAttributes){const Pt=it.dynamicPopup.getAttributes(st);for(const kt in Pt)"undefined"!==Pt[kt]&&(vt.instance[kt]=Pt[kt])}this.app.attachView(vt.hostView),this.dynamicPopupComponents.set(y,vt)}setExtent(y,z,st){const it=(0,dt.U2)(z?Pe:this.EPSG),vt=(0,dt.$A)(y.slice(0,4),it,this.getProjection().getCode()),Pt={size:this.map.getSize()};return st&&Object.assign(Pt,st),this.map.getView().fit(vt,st),vt}setCenter(y,z){const st=(0,dt.U2)(z?Pe:this.EPSG),it=(0,dt.vs)(y,st,this.getProjection().getCode());return this.map.getView().setCenter(it),it}getCenter(y){const z=(0,dt.U2)(y?Pe:this.EPSG),st=(0,dt.U2)(this.getProjection().getCode());return(0,dt.vs)(this.map.getView().getCenter(),st,z)}getFeaturesExtent(y,z){const st=y[0].getGeometry().getExtent().slice(0);if(y.forEach(it=>{(0,$t.l7)(st,it.getGeometry().getExtent())}),z){const it=(0,dt.U2)(Pe);return(0,dt.$A)(st,this.getProjection().getCode(),it)}return st}getCurrentExtent(y){const z=(0,dt.U2)(y?Pe:this.EPSG),st=this.map.getView().calculateExtent();return(0,dt.$A)(st,this.getProjection().getCode(),z)}setZoom(y){this.map.getView().setZoom(y)}getZoom(){return this.map.getView().getZoom()}zoomInOut(y,z){const st=this.map.getView();if(!st)return;const it=z?.zoomStep||1,vt="+"===y?it:-1*it,Pt=st.getZoom();if(void 0!==Pt){const kt=st.getConstrainedZoom(Pt+vt);st.getAnimating()&&st.cancelAnimations(),st.animate({zoom:kt,duration:z?.duration||250,easing:z?.easing||Qt.Vv},zt=>{z.callback&&z.callback(zt)})}}geoJsonToFeature(y){return new ht.Z({dataProjection:Pe,featureProjection:this.EPSG}).readFeature(y)}geoJsonToFeatures(y){return new ht.Z({dataProjection:Pe,featureProjection:this.EPSG}).readFeatures(y)}getProjection(){return this.map.getView().getProjection()}reprojectFeatures(y,z,st){y.getFeatures().forEach(it=>{it.getGeometry().transform(z,st)})}setProjection(y){if(y){let z={};if(this.viewOptions&&(z=this.viewOptions,z.minResolution=void 0,z.maxResolution=void 0,z.resolution=void 0,z.resolutions=void 0),y instanceof Tt.Z){z.projection=y;const vt=(0,dt.vs)(this.map.getView().getCenter(),this.map.getView().getProjection(),y);z.center=vt,z.zoom=this.map.getView().getZoom()}else"string"==typeof y&&(z.projection=y,z.center=this.map.getView().getCenter(),z.zoom=this.map.getView().getZoom());const st=new H.ZP(z),it=this.EPSG;this.EPSG=st.getProjection().getCode(),this.map.setView(st),this.view=this.map.getView(),this.map.getLayers().getArray().forEach(vt=>{vt.getLayers().getArray().forEach(Pt=>{if(Pt instanceof N.Z){let kt=Pt.getSource();for(;kt.source;)kt=kt.source;kt instanceof G.Z&&this.reprojectFeatures(kt,it,this.EPSG)}})}),this.projectionChange.next(this.getProjection())}}registerProjection(y){Ht.Z.defs(y.code,y.proj4js),(0,Lt.z2)(Ht.Z)}getOlProjection(y){return new Tt.Z({code:y.code,extent:y.extent?y.extent:void 0,worldExtent:y.worldExtent?y.worldExtent:void 0,global:!!y.global&&y.global,units:y.units?y.units:void 0})}keysToUppercase(y){return Object.keys(y).forEach(z=>{const st=z.toUpperCase();st!==z&&(y[st]=y[z],delete y[z])}),y}}return Zt.\u0275fac=function(y){return new(y||Zt)(_.LFG(_.z2F),_.LFG(_.lqb))},Zt.\u0275prov=_.Yz7({token:Zt,factory:Zt.\u0275fac,providedIn:"root"}),Zt})()},1899:(Vt,gt,r)=>{"use strict";r.d(gt,{oC:()=>j,BR:()=>_.B});var _=r(7560),Q=(r(3307),r(8692)),H=r(4537);let j=(()=>{class N{}return N.\u0275fac=function(S){return new(S||N)},N.\u0275mod=H.oAB({type:N}),N.\u0275inj=H.cJS({providers:[_.B],imports:[Q.ez]}),N})()},5548:(Vt,gt,r)=>{"use strict";r.d(gt,{AO:()=>P,ED:()=>S,sM:()=>h,Sw:()=>j,R6:()=>N,mh:()=>f,ex:()=>T,KD:()=>dt,YY:()=>i,WQ:()=>x,jn:()=>v,CY:()=>_,DJ:()=>m,KF:()=>w,TI:()=>C,MR:()=>g,RC:()=>U,$6:()=>Q,Aq:()=>H});const _="tms",g="wms",Q="wmts",H="xyz",j="geojson",N="kml",w="wfs",S="custom",v="stacked",h={Baselayers:"Baselayers",Overlays:"Overlays",Layers:"Layers"};class f{constructor(L){this.name="",this.id="",this.opacity=1,this.visible=!0,this.removable=!1,this.filtertype="Layers",this.continuousWorld=!1,this.expanded=!1,Object.assign(this,L)}get time(){return this.protTime}set time(L){this.protTime=L}}class i extends f{constructor(L){if(super(L),this.styles&&this.styles.length>0){let p=this.styles.find(M=>M.default);p||(p=this.styles[0]),this.legendImg=p.legendURL,this.params?(this.type===g?this.params.STYLES=p.name:this.type===Q&&(this.params.style=p.name),this.params.STYLES=p.name):this.type===Q&&(this.params||(this.params={}),this.params.style=p.name)}}set time(L){this.params&&(this.params.TIME=L),this.protTime=L}get time(){return this.protTime}}class m extends f{constructor(L){super(L)}}class P extends f{constructor(L){super(L),this.type=S,this.custom_layer={},Object.assign(this,L)}}class x extends f{constructor(L){super(L),this.type=v,this.layers=[],Object.assign(this,L)}}class T{constructor(L){this.filtertype="Layers",this.removable=!0,this.layerRemovable=!0,this.expanded=!1,L&&void 0!==L.visible&&L.layers&&L.layers.length&&(L.layers=L.layers.map(p=>(p.visible=L.visible,p))),Object.assign(this,L)}get visible(){return this.layers&&this.layers.length&&(this.protVisible=this.layers.filter(L=>L.visible).length>0),this.protVisible}set visible(L){this.protVisible=L,this.layers&&this.layers.length&&(this.layers=this.layers.map(p=>(p.visible=L,p)))}}class U extends i{constructor(L){super(L)}}class C extends i{constructor(L){super(L)}}var X=r(6215),$=r(4537);let dt=(()=>{class k{constructor(){this.store=new X.X(Array()),this.baseLayers=new X.X(Array()),this.overlays=new X.X(Array()),this.layers=new X.X(Array())}addLayer(p,M,R){if(this.isInLayergroups(p))console.error(`layer or Group with id: ${p.id} already exists!`);else{M?p.filtertype=M:M=p.filtertype;const K=this.store.getValue();R||(K.push(p),this.store.next(K)),this.filterFiltertype(M)}}removeLayer(p,M,R){this.isInLayergroups(p)?R?(console.log(`layer: ${p.id} is removed with force!`),this._removeLayer(p,M)):p.removable?this._removeLayer(p,M):p.removable||console.log(`layer: ${p.id} is not removable!`):console.error(`layer with id: ${p.id} not in storeItems!`)}_removeLayer(p,M){M?M!==p.filtertype&&console.error(`the layer with id: ${p.id} you want to remove from ${M} is from filtertype: ${p.filtertype}`):M=p.filtertype;const R=this.store.getValue().filter(K=>K instanceof f?K.id!==p.id:K);this.store.next(R),this.filterFiltertype(M)}updateLayer(p,M){this.isInLayergroups(p)?(M?M!==p.filtertype&&console.error(`the layer with id: ${p.id} you want to update is from filtertype: ${p.filtertype} and not from ${M} `):M=p.filtertype,"Overlays"===p.filtertype&&(this.updateLayerOrGroupInStore(p),this.filterFiltertype(p.filtertype)),"Layers"===p.filtertype&&(this.updateLayerOrGroupInStore(p),this.filterFiltertype(p.filtertype)),"Baselayers"===p.filtertype&&(this.updateLayerOrGroupInStore(p),this.filterFiltertype(p.filtertype))):console.error(`layer with id: ${p.id} you want to update not in storeItems!`)}updateLayerOrGroupInStore(p){this.store.getValue().filter((M,R,K)=>{M instanceof f&&p instanceof f?M.id===p.id&&(K[R]=p,this.store.next(K)):M instanceof T&&p instanceof T&&M.id===p.id&&(K[R]=p,this.store.next(K))})}removeLayerOrGroupById(p,M,R){this.store.getValue().filter(K=>{K instanceof f?K.id===p&&this.removeLayer(K,K.filtertype||"Layers",R):K instanceof T&&(K.id===p?this.removeLayerGroup(K,R):K.layers.forEach(G=>{G.id===p&&this.removeLayerFromGroup(G,K,M,R)}))})}addLayerToGroup(p,M){this.isInLayergroups(p)?console.error(`layer with id: ${p.id} already exists!`):(p.filtertype!==M.filtertype&&(p.filtertype=M.filtertype),this.isInLayergroups(p,[M])?console.error(`layer with id: ${p.id} already exists in ${M.id}!`,M):(M.layers.push(p),this.updateLayerGroup(M)))}addLayerToGroupById(p,M){this.store.getValue().forEach(R=>{R instanceof T&&R.id===M&&this.addLayerToGroup(p,R)})}removeLayerFromGroup(p,M,R=!0,K){M.layers=M.layers.filter(G=>G.id!==p.id),this.updateLayerGroup(M),this.filterFiltertype(p.filtertype),0===M.layers.length&&R&&this.removeLayerGroup(M,K)}setLayerIndexInGroup(p,M,R){const K=R.layers.indexOf(p);switch(M){case"up":if(0===K)break;this.arrayMove(R.layers,K,K-1);break;case"down":if(K===R.layers.length-1)break;this.arrayMove(R.layers,K,K+1)}this.updateLayer(p,R.filtertype||"Layers")}addLayerGroup(p,M){if(!this.isInLayergroups(p)){M?p.filtertype=M:M=p.filtertype;const R=this.store.getValue();this.isInLayergroups(p,p.layers)&&(p.layers=p.layers.filter(K=>K.id!==p.id)),p.layers=p.layers.map(K=>(K.filtertype=p.filtertype,K)),R.push(p),this.store.next(R),this.updateLayerGroup(p)}}removeLayerGroup(p,M){this.isInLayergroups(p)?M?(console.log(`layerGroup: ${p.id} is removed with force!`),this._removeLayerGroup(p)):p.removable?this._removeLayerGroup(p):p.removable||console.log(`layerGroup: ${p.id} is not removable!`):console.error(`layer or Group with id: ${p.id} not in storeItems!`)}_removeLayerGroup(p){for(const K of p.layers)this.removeLayerFromGroup(K,p);const R=this.store.getValue().filter(function(K,G){return K.id!==p.id});this.store.next(R)}updateLayerGroup(p,M=!1){M&&(p=this.sortLayerGroup(p)),this.updateLayerOrGroupInStore(p);for(const R of p.layers)this.updateLayer(R,p.filtertype||"Layers")}arrayMove(p,M,R){p.splice(R<0?p.length+R:R,0,p.splice(M,1)[0])}setGroupLayerIndex(p,M){let R;if((p instanceof f&&p.filtertype||p instanceof T)&&(R=this.getNumOfGroups(p.filtertype)),R>1){const K=this.store.getValue(),G=K.indexOf(p);(!this.isGroupFirst(p)||!this.isGroupLast(p))&&("number"==typeof M?this.arrayMove(K,G,M):"up"===M?this.arrayMove(K,G,G-1):"down"===M&&this.arrayMove(K,G,G+1)),this.store.next(K),this.baseLayers.next(this.filterBaseLayers()),this.layers.next(this.filterLayers()),this.overlays.next(this.filterOverlays())}}getNumOfGroups(p){let M=0;const R=this.store.getValue();for(const K of R)K.filtertype===p&&M++;return M}isGroupFirst(p,M,R){let K=!1,G=this.store.getValue();return M&&(G=M),R&&(G=G.filter(J=>J.filtertype===R)),0===G.indexOf(p)&&(K=!0),K}isGroupLast(p,M,R){let K=!1,G=this.store.getValue();return M&&(G=M),R&&(G=G.filter(J=>J.filtertype===R)),G.indexOf(p)===G.length-1&&(K=!0),K}isInLayergroups(p,M){let K,R=!1;K=p instanceof f||p instanceof T?p.id:p;const G=this.getLayerOrGroupById(K,M);return(G&&G instanceof f||G instanceof T)&&(R=!0),R}getLayerOrGroupById(p,M){const R=[];let K=this.store.getValue();return M&&(K=M),K.map(G=>{G instanceof T?G.id===p?R.push(G):G.layers.map(J=>{J.id===p&&R.push(J)}):G instanceof f&&G.id===p&&R.push(G)}),R.length?1===R.length?R[0]:void(R.length>1&&console.log("there is a duplicate ID in the Layer Groups!")):null}getLayerById(p,M){let R,K=this.flattenDeepArray(this.store.getValue());return M&&(K=M),K.map(G=>{G.id===p&&(R=G)}),R}getBaseLayers(){return this.baseLayers.asObservable()}removeBaseLayers(p){let M=this.filterBaseLayers();return p&&(M=M.filter(p)),M.forEach(R=>{this.removeLayerOrGroupById(R.id)}),this.baseLayers.asObservable()}getBaseLayersCount(){return this.baseLayers.getValue().length}getOverlays(){return this.overlays.asObservable()}removeOverlays(p){let M=this.filterOverlays();return p&&(M=M.filter(p)),M.forEach(R=>{this.removeLayerOrGroupById(R.id)}),this.overlays.asObservable()}getOverlaysCount(){return this.overlays.getValue().length}getLayers(){return this.layers.asObservable()}removeLayers(p){let M=this.filterLayers();return p&&(M=M.filter(p)),M.forEach(R=>{this.removeLayerOrGroupById(R.id)}),this.layers.asObservable()}getLayersCount(){return this.layers.getValue().length}getLayerGroups(){return this.store.asObservable()}setLayerGroups(p,M){return p.length>0&&p.map(R=>{R instanceof T&&R.layers.length>0&&(R.layers=R.layers.map(K=>(K.filtertype=R.filtertype,K)))}),M?("Baselayers"===M?this.removeBaseLayers():"Layers"===M?this.removeLayers():"Overlays"===M&&this.removeOverlays(),p.map(R=>{R instanceof f?this.addLayer(R,M):R instanceof T&&this.addLayerGroup(R,M)})):(this.store.next(p),this.baseLayers.next(this.filterBaseLayers()),this.layers.next(this.filterLayers()),this.overlays.next(this.filterOverlays())),this.store.asObservable()}getLayerGroupsCount(){return this.store.getValue().length}flattenDeepArray(p){return p.reduce((M,R)=>R instanceof T&&Array.isArray(R.layers)?M.concat(this.flattenDeepArray(R.layers)):M.concat(R),[])}filterOverlays(){const p=this.store.getValue();return this.flattenDeepArray(p.filter(R=>"Overlays"===R.filtertype))}filterBaseLayers(){const p=this.store.getValue();return this.flattenDeepArray(p.filter(R=>"Baselayers"===R.filtertype))}filterLayers(){const p=this.store.getValue();return this.flattenDeepArray(p.filter(R=>"Layers"===R.filtertype))}filterFiltertype(p){"Baselayers"===p?this.baseLayers.next(this.filterBaseLayers()):"Overlays"===p?this.overlays.next(this.filterOverlays()):"Layers"===p&&this.layers.next(this.filterLayers())}sortLayerGroup(p){return p.layers.sort((M,R)=>{let K=0;return M instanceof i?K=1:R instanceof i&&(K=-1),K}),p}}return k.\u0275fac=function(p){return new(p||k)},k.\u0275prov=$.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})()},790:(Vt,gt,r)=>{"use strict";r.d(gt,{U5:()=>_,I3:()=>N});class _{constructor(v,h,c,u=[-180,-90,180,90],s=(new Date).toISOString()){this.zoom=v,this.center=h,this.extent=u,this.time=s,this.options=Object.assign({maxzoom:0,minzoom:0,notifier:"map"},c)}sameCenter(v){return this.center.lat===v.lat&&this.center.lon===v.lon}sameZoom(v){return this.zoom===v}sameExtent(v){let c=!1;return this.extent.length===v.length&&(c=this.extent.every((u,s)=>v[s]===u)),c}sameNotifier(v){return this.options.notifier===v}}var g=r(6215),Q=r(8002),H=r(4537);const j=new _(0,{lat:0,lon:0});let N=(()=>{class S{constructor(){this.mapState=new g.X(j),this.lastAction=new g.X(null)}getMapState(){return this.mapState}setMapState(h){if(h)if(this.lastAction.next("setState"),h instanceof _){const c=new _(h.zoom,h.center,h.options,h.extent,h.time);this.mapState.next(c)}else{const c={notifier:"user",...h.options},u=new _(h.zoom,h.center,c,h.extent,h.time);this.mapState.next(u)}}getExtent(){return this.mapState.pipe((0,Q.U)(h=>h.extent))}setExtent(h,c="user"){if(!h)return;this.lastAction.next("setExtent");const u=this.getMapState().getValue();u.options.notifier=c;const s=new _(u.zoom,u.center,u.options,h,u.time);this.mapState.next(s)}setTime(h){const c=this.getMapState().getValue();c.time=h instanceof Date?h.toISOString():h,this.setMapState(c)}getLastAction(){return this.lastAction}}return S.\u0275fac=function(h){return new(h||S)},S.\u0275prov=H.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})()},4879:(Vt,gt,r)=>{"use strict";r.d(gt,{UT:()=>st,qS:()=>ee,n8:()=>c,fA:()=>Q,yv:()=>v,f$:()=>S,AH:()=>h,vK:()=>H,f_:()=>Kt});var _=r(1591),g=r(8975);function Q(ot){let rt=[];for(const St of ot)if(St instanceof _.Z){const Ft=Q(St.getLayers().getArray());rt=Array.prototype.concat(rt,Ft)}else rt.push(St);return rt}function H(ot,rt,St,bt=!1){const Ft=rt.getContext("2d");if(!Ft)throw new Error("The target-canvas needs to use a 2d-context.");if(!rt.width||!rt.height)throw new Error("TargetCanvas: width or height have not been set.");Ft instanceof CanvasRenderingContext2D&&Ft.clearRect(0,0,rt.width,rt.height);const se=ot.getSize();rt.width=se[0],rt.height=se[1];const fe=Q(ot.getLayers().getArray()),Se=[];for(const Le of fe)if(Le.getVisible()&&Le.getOpacity()>0){const ke=Le.on("postrender",Ve=>{const si=Ve.context.canvas;Ft instanceof CanvasRenderingContext2D&&(Ft.beginPath(),Ft.drawImage(si,0,0,si.clientWidth,si.clientHeight,0,0,rt.width,rt.height),Ft.closePath())});Array.isArray(ke)?ke.map(Ve=>Se.push(Ve)):Se.push(ke)}bt?ot.on("rendercomplete",Le=>{St(rt)}):ot.once("rendercomplete",Le=>{for(const ke of Se)(0,g.B)(ke);St(rt)}),ot.renderSync()}function S(ot,rt,St=!1){ot.setVisible(rt),!St&&ot instanceof _.Z&&ot.getLayers().forEach(Ft=>{S(Ft,rt)})}function v(ot,rt,St=!1){ot.setOpacity(rt),!St&&ot instanceof _.Z&&ot.getLayers().forEach(Ft=>{v(Ft,rt)})}function h(ot,rt,St){ot.setZIndex(St>0?rt+St:rt),ot instanceof _.Z&&ot.getLayers().forEach(se=>{h(se,rt,St)})}function c(ot,rt,St){St.remove(ot),St.insertAt(rt,ot)}var u=r(6555),s=r(6906),f=r(9015);const i=ot=>{let rt=[];for(const St of ot){let bt;bt=Array.isArray(St[0])?i(St):St,rt=Array.prototype.concat(rt,bt)}return rt},m=(ot,rt)=>Math.log(ot)/Math.log(rt),e=(ot,rt)=>m(ot,rt)%1==0,U=(ot,rt,St)=>{const bt=ot.createShader(rt);if(!bt)throw new Error("No shader was created");if(ot.shaderSource(bt,St),ot.compileShader(bt),!ot.getShaderParameter(bt,ot.COMPILE_STATUS))throw ot.deleteShader(bt),new Error(`An error occurred compiling the shader: ${ot.getShaderInfoLog(bt)}.    \n\n Shader code: ${St}`);return bt},X=(ot,rt)=>{ot.useProgram(rt)},p=(ot,rt,St)=>{ot.bindBuffer(ot.ARRAY_BUFFER,St.buffer),ot.enableVertexAttribArray(rt),ot.vertexAttribPointer(rt,St.vectorSize,St.type,St.normalize,St.stride,St.offset)},ut=(ot,rt,St,bt)=>{if(St>ot.getParameter(ot.MAX_COMBINED_TEXTURE_IMAGE_UNITS))throw new Error(`There are only ${ot.getParameter(ot.MAX_COMBINED_TEXTURE_IMAGE_UNITS)} texture bind points, but you tried to bind to point nr. ${St}.`);7===St&&console.error(`You are about to bind to the dedicated texture-construction bind point (nr. ${St}).\n        If after this call another texture is built, your shader will now use that new texture instead of this one!\n        Consider using another bind point.`),ot.activeTexture(ot.TEXTURE0+St),ot.bindTexture(ot.TEXTURE_2D,rt),ot.uniform1i(bt,St)},$t=(ot,rt,St)=>{const bt=ot.getUniformLocation(rt,St);if(null===bt)throw new Error(`Couldn't find uniform ${St} in program.`);return bt},ae=(ot,rt,St,bt)=>{switch(St){case"bool":case"int":ot.uniform1i(rt,bt[0]);break;case"bvec2":case"ivec2":ot.uniform2i(rt,bt[0],bt[1]);break;case"bvec3":case"ivec3":ot.uniform3i(rt,bt[0],bt[1],bt[2]);break;case"bvec4":case"ivec4":ot.uniform4i(rt,bt[0],bt[1],bt[2],bt[3]);break;case"bool[]":case"int[]":ot.uniform1iv(rt,bt);break;case"bvec2[]":case"ivec2[]":ot.uniform2iv(rt,bt);break;case"bvec3[]":case"ivec3[]":ot.uniform3iv(rt,bt);break;case"bvec4[]":case"ivec4[]":ot.uniform4iv(rt,bt);break;case"float":ot.uniform1f(rt,bt[0]);break;case"vec2":ot.uniform2f(rt,bt[0],bt[1]);break;case"vec3":ot.uniform3f(rt,bt[0],bt[1],bt[2]);break;case"vec4":ot.uniform4f(rt,bt[0],bt[1],bt[2],bt[3]);break;case"float[]":ot.uniform1fv(rt,bt);break;case"vec2[]":ot.uniform2fv(rt,bt);break;case"vec3[]":ot.uniform3fv(rt,bt);break;case"vec4[]":ot.uniform4fv(rt,bt);break;case"mat2":ot.uniformMatrix2fv(rt,!1,bt);break;case"mat3":ot.uniformMatrix3fv(rt,!1,bt);break;case"mat4":ot.uniformMatrix4fv(rt,!1,bt);break;default:throw Error(`Type ${St} not implemented.`)}};class xe{constructor(rt,St,bt){this.vertexShaderSource=St,this.fragmentShaderSource=bt,this.program=((ot,rt,St)=>{const bt=ot.createProgram();if(!bt)throw new Error("No program was created");const Ft=U(ot,ot.VERTEX_SHADER,rt),se=U(ot,ot.FRAGMENT_SHADER,St);if(ot.attachShader(bt,Ft),ot.attachShader(bt,se),ot.linkProgram(bt),ot.detachShader(bt,Ft),ot.detachShader(bt,se),ot.deleteShader(Ft),ot.deleteShader(se),!ot.getProgramParameter(bt,ot.LINK_STATUS))throw ot.deleteProgram(bt),new Error("Unable to initialize the shader program: "+ot.getProgramInfoLog(bt));return bt})(rt,St,bt),this.id=function(ot){let rt=0;for(const St of ot)rt+=St.charCodeAt(0);return`${rt}`}(St+bt)}}class Ze{constructor(rt,St,bt,Ft,se){this.location=$t(rt,St.program,bt),this.type=Ft,this.value=se,this.variableName=bt}}class xt{constructor(rt,St,bt,Ft,se){this.location=$t(rt,St.program,bt),this.texture=Ft instanceof HTMLImageElement||Ft instanceof HTMLCanvasElement?((ot,rt)=>{const St=ot.createTexture();if(!St)throw new Error("No texture was created");ot.activeTexture(ot.TEXTURE0+7),ot.bindTexture(ot.TEXTURE_2D,St);const Ft=ot.RGBA,se=ot.RGBA,fe=ot.UNSIGNED_BYTE;let Se,Le;return ot.texImage2D(ot.TEXTURE_2D,0,Ft,se,fe,rt),ot.generateMipmap(ot.TEXTURE_2D),ot.bindTexture(ot.TEXTURE_2D,null),rt instanceof HTMLImageElement?(Se=rt.naturalWidth,Le=rt.naturalHeight):(Se=rt.width,Le=rt.height),{texture:St,level:0,internalformat:Ft,format:se,type:fe,width:Se,height:Le,border:0}})(rt,Ft):Ft,this.bindPoint=se,this.variableName=bt}}class Nt{constructor(rt,St,bt,Ft,se){this.location=$t(rt,St.program,bt),this.texture=((ot,rt)=>{const St=rt.length,bt=rt[0].length,Ft=rt[0][0].length;if(!e(bt,2)||!e(St,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${bt} x ${St}`);if(4!==Ft)throw new Error(`Expecting 4 channels, but ${Ft} provided`);const se=ot.createTexture();if(!se)throw new Error("No texture was created");ot.activeTexture(ot.TEXTURE0+7),ot.bindTexture(ot.TEXTURE_2D,se);const Le=ot.RGBA,ke=ot.RGBA,Ve=ot.UNSIGNED_BYTE,qe=new Uint8Array(i(rt));return 4!==Ft&&ot.pixelStorei(ot.UNPACK_ALIGNMENT,1),ot.texImage2D(ot.TEXTURE_2D,0,Le,bt,St,0,ke,Ve,qe),ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_WRAP_S,ot.CLAMP_TO_EDGE),ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_WRAP_T,ot.CLAMP_TO_EDGE),ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_MIN_FILTER,ot.NEAREST),ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_MAG_FILTER,ot.NEAREST),ot.bindTexture(ot.TEXTURE_2D,null),{texture:se,level:0,internalformat:Le,format:ke,type:Ve,width:bt,height:St,border:0}})(rt,Ft),this.bindPoint=se,this.variableName=bt}}class Bt{constructor(rt,St,bt,Ft,se="triangles"){let fe;switch(se){case"triangles":fe=rt.TRIANGLES;break;case"lines":fe=rt.LINES;break;case"points":fe=rt.POINTS;break;default:throw new Error(`Invalid drawing mode ${se}`)}this.location=((ot,rt,St)=>{const bt=ot.getAttribLocation(rt,St);if(-1===bt)throw new Error(`Couldn't find attribute ${St} in program.`);return bt})(rt,St.program,bt),this.value=((ot,rt,St=ot.TRIANGLES)=>{const bt=new Float32Array(i(rt)),Ft=ot.createBuffer();if(!Ft)throw new Error("No buffer was created");return ot.bindBuffer(ot.ARRAY_BUFFER,Ft),ot.bufferData(ot.ARRAY_BUFFER,bt,ot.STATIC_DRAW),ot.bindBuffer(ot.ARRAY_BUFFER,null),{buffer:Ft,vectorSize:rt[0].length,vectorCount:rt.length,type:ot.FLOAT,normalize:!1,stride:0,offset:0,drawingMode:St}})(rt,Ft,fe),this.variableName=bt,this.drawingMode=fe}}class ie{constructor(rt,St,bt="triangles"){let Ft;switch(bt){case"triangles":Ft=rt.TRIANGLES;break;case"lines":Ft=rt.LINES;break;case"points":Ft=rt.POINTS;break;default:throw new Error(`Invalid drawing mode ${bt}`)}this.index=((ot,rt,St=ot.TRIANGLES)=>{const bt=new Uint16Array(i(rt)),Ft=ot.createBuffer();if(!Ft)throw new Error("No buffer was created");return ot.bindBuffer(ot.ELEMENT_ARRAY_BUFFER,Ft),ot.bufferData(ot.ELEMENT_ARRAY_BUFFER,bt,ot.STATIC_DRAW),ot.bindBuffer(ot.ELEMENT_ARRAY_BUFFER,null),{buffer:Ft,count:bt.length,type:ot.UNSIGNED_SHORT,offset:0,drawingMode:St}})(rt,St,Ft)}}function Te(ot,rt){for(const St of ot)if(rt(St))return St;return null}class Mt{constructor(rt,St,bt,Ft,se){this.program=rt,this.attributes=St,this.uniforms=bt,this.textures=Ft,this.index=se;const[fe,Se,Le,ke]=function he(ot){const rt=/^\s*attribute (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*);/gm,St=/^\s*uniform (int|float|vec2|vec3|vec4|mat2|mat3|mat4) (\w*)(\[\d\])*;/gm,bt=/^\s*uniform sampler2D (\w*);/gm,Ft=/^\s*precision (\w*) float;/gm,se=ot.fragmentShaderSource+"\n\n\n"+ot.vertexShaderSource,fe=[];let Se;for(;null!==(Se=rt.exec(se));)fe.push(Se[2]);const Le=[];let ke;for(;null!==(ke=St.exec(se));)Le.push(ke[2]);const Ve=[];let qe;for(;null!==(qe=bt.exec(se));)Ve.push(qe[1]);const si=[];let pi;for(;null!==(pi=Ft.exec(se));)si.push(pi[1]);return[fe,Le,Ve,si]}(rt);for(const qe of fe){const si=St.filter(pi=>pi.variableName===qe);if(1!==si.length)throw new Error(`Provided ${si.length} values for shader's attribute ${qe}.`)}for(const qe of Se){const si=bt.filter(pi=>pi.variableName===qe);if(1!==si.length)throw new Error(`Provided ${si.length} values for shader's uniform ${qe}.`)}for(const qe of Le){const si=Ft.filter(pi=>pi.variableName===qe);if(1!==si.length)throw new Error(`Provided ${si.length} values for shader's texture ${qe}.`)}1===ke.length&&console.warn("You have only provided one precision qualifier.\n            This can cause issues when you want to use a uniform in both the vertex- and the fragment-shader.");const Ve=this.attributes.map(qe=>qe.value.vectorCount);if(Math.min(...Ve)!==Math.max(...Ve))throw new Error("Your attributes are not of the same length!")}bind(rt){X(rt,this.program.program);for(const St of this.attributes)p(rt,St.location,St.value);for(const St of this.uniforms)ae(rt,St.location,St.type,St.value);for(const St of this.textures)ut(rt,St.texture.texture,St.bindPoint,St.location);this.index&&((ot,rt)=>{ot.bindBuffer(ot.ELEMENT_ARRAY_BUFFER,this.index.index.buffer)})(rt)}render(rt,St,bt,Ft){bt?((ot,rt,St)=>{ot.bindFramebuffer(ot.FRAMEBUFFER,rt.framebuffer),St?(rt.width/rt.height!=St[2]/St[3]&&console.warn("Your viewport-aspect is different from the framebuffer-aspect."),ot.viewport(...St)):ot.viewport(0,0,rt.width,rt.height)})(rt,bt,Ft):((ot,rt)=>{ot.bindFramebuffer(ot.FRAMEBUFFER,null),rt?(ot.canvas.width/ot.canvas.height!=rt[2]/rt[3]&&console.warn("Your viewport-aspect is different from the canvas-aspect."),ot.viewport(...rt)):ot.viewport(0,0,ot.canvas.width,ot.canvas.height)})(rt,Ft),St&&((ot,rt)=>{ot.clearColor(rt[0],rt[1],rt[2],rt[3]),ot.clearDepth(1),ot.clear(ot.COLOR_BUFFER_BIT|ot.DEPTH_BUFFER_BIT)})(rt,St),this.index?((ot,rt)=>{ot.drawElements(rt.drawingMode,rt.count,rt.type,rt.offset)})(rt,this.index.index):((ot,rt)=>{ot.drawArrays(rt.drawingMode,rt.offset,rt.vectorCount)})(rt,this.attributes[0].value)}updateAttributeData(rt,St,bt){const Ft=Te(this.attributes,se=>se.variableName===St);if(!Ft)throw new Error(`No such attribute ${St} to be updated.`);((ot,rt,St)=>{const bt=new Float32Array(i(St));ot.bindBuffer(ot.ARRAY_BUFFER,rt.buffer),ot.bufferData(ot.ARRAY_BUFFER,bt,ot.STATIC_DRAW),ot.bindBuffer(ot.ARRAY_BUFFER,null)})(rt,Ft.value,bt)}updateUniformData(rt,St,bt){const Ft=Te(this.uniforms,se=>se.variableName===St);if(!Ft)throw new Error(`No such uniform ${St} to be updated.`);Ft.value=bt}updateTextureData(rt,St,bt){const Ft=Te(this.textures,fe=>fe.variableName===St);if(!Ft)throw new Error(`No such texture ${St} to be updated.`);const se=((ot,rt,St)=>{if(ot.activeTexture(ot.TEXTURE0+7),ot.bindTexture(ot.TEXTURE_2D,rt.texture),St instanceof HTMLImageElement||St instanceof HTMLCanvasElement)ot.texImage2D(ot.TEXTURE_2D,0,ot.RGBA,ot.RGBA,ot.UNSIGNED_BYTE,St);else{const bt=St[0].length,Ft=St.length;if(!e(bt,2)||!e(Ft,2))throw new Error(`Texture-data-dimensions must be a power of two, but are ${Ft} x ${bt}`);const se=new Uint8Array(i(St));ot.texImage2D(ot.TEXTURE_2D,rt.level,rt.internalformat,rt.width,rt.height,rt.border,rt.format,rt.type,se)}return ot.generateMipmap(ot.TEXTURE_2D),ot.bindTexture(ot.TEXTURE_2D,null),St instanceof HTMLImageElement?(rt.width=St.naturalWidth,rt.height=St.naturalHeight):St instanceof HTMLCanvasElement?(rt.width=St.width,rt.height=St.height):(rt.width=St[0].length,rt.height=St.length),rt})(rt,Ft.texture,bt);Ft.texture=se}}class Dt{constructor(rt,St,bt){const Ft=(ot=>{const rt=ot.createFramebuffer();if(!rt)throw new Error("Error creating framebuffer");return rt})(rt),se=((ot,rt,St)=>{if(rt<=0||St<=0)throw new Error("Width and height must be positive.");const bt=ot.createTexture();if(!bt)throw new Error("No texture was created");return ot.activeTexture(ot.TEXTURE0+7),ot.bindTexture(ot.TEXTURE_2D,bt),ot.texImage2D(ot.TEXTURE_2D,0,ot.RGBA,rt,St,0,ot.RGBA,ot.UNSIGNED_BYTE,null),ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_WRAP_S,ot.CLAMP_TO_EDGE),ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_WRAP_T,ot.CLAMP_TO_EDGE),ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_MIN_FILTER,ot.NEAREST),ot.texParameteri(ot.TEXTURE_2D,ot.TEXTURE_MAG_FILTER,ot.NEAREST),ot.bindTexture(ot.TEXTURE_2D,null),{texture:bt,level:0,internalformat:ot.RGBA,format:ot.RGBA,type:ot.UNSIGNED_BYTE,width:rt,height:St,border:0}})(rt,St,bt),fe=((ot,rt,St)=>{if(ot.bindFramebuffer(ot.FRAMEBUFFER,St),ot.framebufferTexture2D(ot.FRAMEBUFFER,ot.COLOR_ATTACHMENT0,ot.TEXTURE_2D,rt.texture,0),ot.checkFramebufferStatus(ot.FRAMEBUFFER)!==ot.FRAMEBUFFER_COMPLETE)throw new Error(`Error creating framebuffer: framebuffer-status: ${ot.checkFramebufferStatus(ot.FRAMEBUFFER)} ; error-code: ${ot.getError()}`);return ot.bindFramebuffer(ot.FRAMEBUFFER,null),{framebuffer:St,texture:rt,width:rt.width,height:rt.height}})(rt,se,Ft);this.fbo=fe}}function Kt(ot,rt){const St=1e3/ot;let Ft,se,fe,bt=St;const Se=()=>{Ft=window.performance.now(),rt(bt),se=window.performance.now(),bt=se-Ft,fe=Math.max(St-bt,0),setTimeout(()=>{requestAnimationFrame(Se)},fe)};Se()}const y=(ot,rt)=>({vertices:[[-ot/2,rt/2,0],[-ot/2,-rt/2,0],[ot/2,-rt/2,0],[-ot/2,rt/2,0],[ot/2,-rt/2,0],[ot/2,rt/2,0]],texturePositions:[[0,1],[0,0],[1,0],[0,1],[1,0],[1,1]]});class st extends s.Z{constructor(rt){super(rt)}createRenderer(){return this.renderer=new it(this),this.renderer}updateSunAngle(rt){this.renderer.updateSunAngle(rt)}}class it extends u.Z{constructor(rt){super(rt),this.state="loading";const St=document.createElement("canvas");St.width=1200,St.height=800,St.style.position="absolute";const bt=St.getContext("webgl"),Ft=rt.getSource(),se=Ft.getProjection(),fe=Ft.getImageExtent(),Se=this.bboxOntoRectangle(2,2,fe),Le=((ot,rt=256,St=256,bt="red")=>{const Ft=document.createElement("canvas").getContext("2d");if(!Ft)throw new Error("no context");return Ft.canvas.width=rt,Ft.canvas.height=St,Ft.font=`bold ${5*St/6|0}px sans-serif`,Ft.textAlign="center",Ft.textBaseline="middle",Ft.fillStyle=bt,Ft.fillText(ot,rt/2,St/2),Ft.canvas})("test",2048,2048,"red"),ke=new xe(bt,"\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2canv;\n            varying vec2 v_texturePosition;\n            void main() {\n                vec3 pixelPosition = u_world2pix * vec3(a_position.x, a_position.y, 1.);\n                vec3 canvasPosition = u_pix2canv * pixelPosition;\n                gl_Position = vec4(canvasPosition.x, canvasPosition.y, 0., 1.);\n                v_texturePosition = a_texturePosition;\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_srtm;\n            uniform float u_imageSize;\n            uniform vec3 u_sun;\n            varying vec2 v_texturePosition;\n            void main() {\n                float delta = 4. / u_imageSize;\n                float top = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y + delta)).r;\n                float bot = texture2D(u_srtm, vec2(v_texturePosition.x,         1. - v_texturePosition.y - delta)).r;\n                float lft = texture2D(u_srtm, vec2(v_texturePosition.x + delta, 1. - v_texturePosition.y        )).r;\n                float rgt = texture2D(u_srtm, vec2(v_texturePosition.x - delta, 1. - v_texturePosition.y        )).r;\n\n                vec3 surfaceNormal = vec3(\n                    lft - rgt,\n                    bot - top,\n                    2. * delta\n                );\n                surfaceNormal = normalize(surfaceNormal);\n                vec3 sunNormal = normalize(u_sun);\n                float alignment = abs(dot(sunNormal, surfaceNormal));\n\n                gl_FragColor = vec4(0., 0., 0., 0.5 * alignment);\n            }\n        ");X(bt,ke.program);const Ve=new Mt(ke,[new Bt(bt,ke,"a_position",Se.vertices),new Bt(bt,ke,"a_texturePosition",Se.texturePositions)],[new Ze(bt,ke,"u_imageSize","float",[2048]),new Ze(bt,ke,"u_sun","vec3",[0,0,1]),new Ze(bt,ke,"u_world2pix","mat3",i([[1,0,0],[0,1,0],[0,0,1]])),new Ze(bt,ke,"u_pix2canv","mat3",i([[1/(St.width/2),0,0],[0,-1/(St.height/2),0],[-1,1,1]]))],[new xt(bt,ke,"u_srtm",Le,0)]);Ve.bind(bt),this.shader=Ve,this.canvas=St,this.gl=bt,this.projection=se;const qe=Ft.getImage(fe,.02197265625,2.440000295639038,se);qe.addEventListener("change",si=>{const pi=qe.getImage();this.shader.updateTextureData(this.gl,"u_srtm",pi),this.shader.bind(this.gl),this.state="ready",super.getLayer().changed()}),qe.load()}prepareFrame(rt){if("ready"===this.state){const St=rt.coordinateToPixelTransform;this.shader.updateUniformData(this.gl,"u_world2pix",i([[St[0],St[1],0],[St[2],St[3],0],[St[4],St[5],1]])),this.shader.bind(this.gl),rt.viewState.projection!==this.projection&&this.reprojectImage(rt.viewState.projection)}return!0}renderFrame(rt,St){return"ready"===this.state&&(this.shader.render(this.gl),this.transformCanvas(rt)),this.canvas}renderDeclutter(rt){}updateSunAngle(rt){this.shader.updateUniformData(this.gl,"u_sun",[rt[0],rt[1],1]),this.shader.bind(this.gl),this.shader.render(this.gl)}bboxOntoRectangle(rt,St,bt){const Ft=y(rt,St);for(const se of Ft.vertices){const Se=se[1];se[0]=se[0]===rt/2?bt[2]:bt[0],se[1]=Se===St/2?bt[3]:bt[1]}return Ft}reprojectImage(rt){const St=super.getLayer().getSource(),bt=St.getProjection(),Ft=St.getImageExtent(),se=(0,f.$A)(Ft,bt,rt),fe=this.bboxOntoRectangle(2,2,se);this.shader.updateAttributeData(this.gl,"a_position",fe.vertices),this.shader.bind(this.gl)}transformCanvas(rt){const St=rt.layerStatesArray[rt.layerIndex],bt=rt.pixelRatio,Ft=rt.size,se=Math.round(Ft[0]*bt),fe=Math.round(Ft[1]*bt),Se=St.opacity;this.canvas.width=se,this.canvas.height=fe,this.canvas.style.opacity=`${Se}`,this.shader.updateUniformData(this.gl,"u_pix2canv",i([[1/(this.canvas.width/2),0,0],[0,-1/(this.canvas.height/2),0],[-1,1,1]]))}}var vt=r(2308),Pt=r(7356),kt=r(2663),zt=r(3842);class ee extends Pt.Z{constructor(rt){super(rt),this.options=rt}createRenderer(){return new re(this,this.options.renderSettings)}updateParas(rt,St,bt){const Ft={colorRamp:this.options.renderSettings.colorRamp,maxEdgeLength:this.options.renderSettings.maxEdgeLength,storeInterpolatedPixelData:this.options.renderSettings.storeInterpolatedPixelData,valueProperty:this.options.renderSettings.valueProperty,power:rt,showLabels:bt,smooth:St};super.getRenderer().updateSettings(Ft),this.options.renderSettings=Ft}}class re extends vt.Z{constructor(rt,St){super(rt),this.settings=St,this.container=document.createElement("div"),this.container.classList.add("ol-layer"),this.container.style.setProperty("position","absolute"),this.container.style.setProperty("width","100%"),this.container.style.setProperty("height","100%"),this.webGlCanvas=document.createElement("canvas"),this.webGlCanvas.style.setProperty("position","absolute"),this.webGlCanvas.style.setProperty("left","0px"),this.webGlCanvas.style.setProperty("top","0px"),this.webGlCanvas.style.setProperty("width","100%"),this.webGlCanvas.style.setProperty("height","100%"),this.webGlCanvas.width=1e3,this.webGlCanvas.height=1e3,this.gl=this.webGlCanvas.getContext("webgl"),this.container.appendChild(this.webGlCanvas),this.pointRenderer=new vt.Z(rt);const bt=rt.getSource();this.projection=bt.getProjection();const{coords:Ft,values:se,bboxDelta:fe,maxVal:Se}=this.parseData(bt,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:Le,maxEdgeLengthBbox:ke}=this.parseDataBbox(fe,Ft,se,Se,this.settings.maxEdgeLength);this.bbox=fe;const Ve=[[1,0,0],[0,1,0],[0,0,1]];this.interpolationShader=ge(this.gl,Le,Se,this.settings.power,ke),this.valueFb=new Dt(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.colorizationShader=oe(this.gl,this.settings.colorRamp,Se,this.settings.smooth,this.valueFb),this.colorFb=new Dt(this.gl,this.webGlCanvas.width,this.webGlCanvas.height),this.arrangementShader=Xe(this.gl,Ve,Ve,fe,this.colorFb),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo)}prepareFrame(rt){if(this.webGlCanvas.style.opacity=`${rt.layerStatesArray[rt.layerIndex].opacity}`,rt.viewState.projection!==this.projection){this.projection=rt.viewState.projection;const Ft=super.getLayer().getSource(),{coords:se,values:fe,bboxDelta:Se,maxVal:Le}=this.parseData(Ft,this.settings.valueProperty,this.settings.maxEdgeLength),{observationsBbox:ke,maxEdgeLengthBbox:Ve}=this.parseDataBbox(Se,se,fe,Le,this.settings.maxEdgeLength);this.updateInterpolationShader(this.settings.power,ke,Ve),this.runInterpolationShader(this.valueFb.fbo),this.runColorizationShader(this.colorFb.fbo),this.bbox=Se}return this.updateArrangementShader(rt.coordinateToPixelTransform,rt.size[0],rt.size[1],this.bbox),this.pointRenderer.prepareFrame(rt),!0}renderFrame(rt,St){if(this.runArrangementShader(),this.settings.showLabels){const bt=this.pointRenderer.renderFrame(rt,this.container);(0,zt.hF)(this.container,[this.webGlCanvas,bt])}else(0,zt.hF)(this.container,[this.webGlCanvas]);return this.container}renderDeclutter(rt){}updateSettings(rt){const St=this.settings;this.settings=rt,rt.power!==St.power?(this.updateInterpolationShader(rt.power),this.runInterpolationShader(this.valueFb.fbo),this.updateColorizationShader(rt.smooth),this.runColorizationShader(this.colorFb.fbo)):rt.smooth!==St.smooth&&(this.updateColorizationShader(rt.smooth),this.runColorizationShader(this.colorFb.fbo)),super.getLayer().changed()}updateArrangementShader(rt,St,bt,Ft){const fe=[[1/(St/2),0,0],[0,-1/(bt/2),0],[-1,1,1]];this.arrangementShader.updateUniformData(this.gl,"u_world2pix",i([[rt[0],rt[1],0],[rt[2],rt[3],0],[rt[4],rt[5],1]])),this.arrangementShader.updateUniformData(this.gl,"u_pix2clip",i(fe)),this.arrangementShader.updateUniformData(this.gl,"u_bbox",Ft)}runArrangementShader(rt){this.arrangementShader.bind(this.gl),this.arrangementShader.render(this.gl,[0,0,0,0],rt)}updateInterpolationShader(rt,St,bt){this.interpolationShader.updateUniformData(this.gl,"u_power",[rt]),St&&this.interpolationShader.updateTextureData(this.gl,"u_dataTexture",[St]),bt&&this.interpolationShader.updateUniformData(this.gl,"u_maxDistance",[bt])}runInterpolationShader(rt){this.interpolationShader.bind(this.gl),this.interpolationShader.render(this.gl,[0,0,0,0],rt),this.settings.storeInterpolatedPixelData&&(this.interpolatedValues=(ot=>{const rt=ot.getContext("webgl");if(!rt)throw new Error("no context");const St=rt.getParameter(rt.IMPLEMENTATION_COLOR_READ_FORMAT),bt=rt.getParameter(rt.IMPLEMENTATION_COLOR_READ_TYPE);let Ft;if(bt===rt.UNSIGNED_BYTE)Ft=new Uint8Array(rt.drawingBufferWidth*rt.drawingBufferHeight*4);else if(bt===rt.UNSIGNED_SHORT_5_6_5||bt===rt.UNSIGNED_SHORT_4_4_4_4||bt===rt.UNSIGNED_SHORT_5_5_5_1)Ft=new Uint16Array(rt.drawingBufferWidth*rt.drawingBufferHeight*4);else{if(bt!==rt.FLOAT)throw new Error(`Did not understand pixel data type ${bt} for format ${St}`);Ft=new Float32Array(rt.drawingBufferWidth*rt.drawingBufferHeight*4)}return rt.readPixels(0,0,ot.width,ot.height,St,bt,Ft),Ft})(this.webGlCanvas))}updateColorizationShader(rt){this.colorizationShader.updateUniformData(this.gl,"u_smooth",[rt?1:0])}runColorizationShader(rt){this.colorizationShader.bind(this.gl),this.colorizationShader.render(this.gl,[0,0,0,0],rt)}parseData(rt,St,bt){let Ft=rt.getFeatures();Ft=rt instanceof kt.Z?rt.getSource().getFeatures():rt.getFeatures();const se=Ft.map(Di=>Di.getGeometry().getCoordinates()),fe=Ft.map(Di=>parseFloat(Di.getProperties()[St])),Se=oi(se),Le=Se[2]-Se[0],ke=Se[3]-Se[1];let Ve,qe;Le>ke?(qe=Le-ke,Ve=0):(qe=0,Ve=ke-Le);const si=[Se[0]-bt,Se[1]-bt,Se[2]+Ve+bt,Se[3]+qe+bt],pi=fe.reduce((Di,Ri)=>Ri>Di?Ri:Di,0);return{coords:se,values:fe,bboxDelta:si,maxVal:pi}}parseDataBbox(rt,St,bt,Ft,se){const fe=Qe(St,bt).map(si=>{const pi=we([si[0],si[1]],rt);return[255*(pi[0]+1)/2,255*(pi[1]+1)/2,255*si[2]/Ft,255]}),Se=fe.length,Le=((ot,rt)=>{const St=Math.ceil(m(ot,2));return Math.pow(2,St)})(Se);for(let si=0;si<Le-Se;si++)fe.push([0,0,0,0]);return{observationsBbox:fe,maxEdgeLengthBbox:se/Math.max(rt[2]-rt[0],rt[3]-rt[1])}}}const we=(ot,rt)=>[(ot[0]-rt[0])/(rt[2]-rt[0])*2-1,(ot[1]-rt[1])/(rt[3]-rt[1])*2-1],ge=(ot,rt,St,bt,Ft)=>{const fe=new xe(ot,"\n            precision mediump float;\n            attribute vec3 a_position;\n            attribute vec2 a_texturePosition;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n                v_position = a_position.xy;\n                v_texturePosition = a_texturePosition;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_power;\n            uniform sampler2D u_dataTexture;\n            uniform int u_nrDataPoints;\n            uniform float u_maxValue;\n            uniform float u_maxDistance;\n            varying vec2 v_position;\n            varying vec2 v_texturePosition;\n\n            void main() {\n\n                float valSum = 0.0;\n                float wSum = 0.0;\n                float minD = 10000.0;\n                for (int i = 0; i < 10000; i++) {\n                    if (i > u_nrDataPoints) {\n                        break;\n                    }\n                    vec4 dataPoint = texture2D(u_dataTexture, vec2(float(i) / float(u_nrDataPoints), 0.5));\n                    if (dataPoint.w > 0.0) {  // texture is padded to next power of two with transparent 0-values.\n                        vec2 coords = dataPoint.xy * 2.0 - 1.0;  // transforming coords from [0, 1] to [-1, 1]\n                        float value = dataPoint.z * u_maxValue;  // transforming value from [0, 1] to [0, maxValue]\n\n                        float d = distance(v_position, coords);\n                        float w = 1.0 / pow(d, u_power);\n                        valSum += value * w;\n                        wSum += w;\n                        if (d < minD) {\n                            minD = d;\n                        }\n                    }\n                }\n                float interpolatedValue = valSum / wSum;\n                float alpha = 1.0;\n                if (minD > u_maxDistance) {\n                    alpha = 0.0;\n                }\n                vec4 color = vec4(interpolatedValue / u_maxValue, 0.0, 0.0, alpha);\n\n                gl_FragColor = color;\n            }\n        "),Se={vertices:[[-1,1,0],[-1,-1,0],[1,-1,0],[1,1,0]],texturePositions:[[0,1],[0,0],[1,0],[1,1]],vertexIndices:[[0,1,2],[0,2,3]]};return new Mt(fe,[new Bt(ot,fe,"a_position",Se.vertices),new Bt(ot,fe,"a_texturePosition",Se.texturePositions)],[new Ze(ot,fe,"u_power","float",[bt]),new Ze(ot,fe,"u_nrDataPoints","int",[rt.length]),new Ze(ot,fe,"u_maxValue","float",[St]),new Ze(ot,fe,"u_maxDistance","float",[Ft])],[new Nt(ot,fe,"u_dataTexture",[rt],0)],new ie(ot,Se.vertexIndices))},oe=(ot,rt,St,bt,Ft)=>{const fe=new xe(ot,"\n            precision mediump float;\n            attribute vec2 a_position;\n            attribute vec2 a_textureCoord;\n            varying vec2 v_textureCoord;\n\n            void main() {\n                v_textureCoord = a_textureCoord;\n                gl_Position = vec4(a_position.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform float u_colorRampValues[15];\n            uniform vec3 u_colorRampColors[15];\n            uniform int u_nrColorRampValues;\n            uniform float u_maxValue;\n            uniform bool u_smooth;\n            uniform sampler2D u_valueTexture;\n            varying vec2 v_textureCoord;\n\n            vec3 valueToSmoothColor(in float value) {\n                if (value < u_colorRampValues[0]) {\n                    return u_colorRampColors[0];\n                }\n                for (int i = 1; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        float alpha = (value - u_colorRampValues[i-1]) / (u_colorRampValues[i] - u_colorRampValues[i-1]);\n                        vec3 color = alpha * (u_colorRampColors[i] - u_colorRampColors[i-1]) + u_colorRampColors[i-1];\n                        return color;\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            vec3 valueToStepColor(in float value) {\n                for (int i = 0; i < 15; i++) {\n                    if (i > u_nrColorRampValues) {\n                        break;\n                    }\n                    if (value < u_colorRampValues[i]) {\n                        return u_colorRampColors[i];\n                    }\n                    if (i == u_nrColorRampValues) {\n                        return u_colorRampColors[i];\n                    }\n                }\n            }\n\n            void main() {\n                vec4 pixelData = texture2D(u_valueTexture, v_textureCoord);\n                float val = pixelData.r * u_maxValue;\n                float alpha = pixelData.w;\n                vec3 rgb = vec3(0.0, 0.0, 0.0);\n                if (alpha > 0.01) {\n                    if (u_smooth) {\n                        rgb = valueToSmoothColor(val);\n                    } else {\n                        rgb = valueToStepColor(val);\n                    }\n                }\n                gl_FragColor = vec4(rgb.x / 255.0, rgb.y / 255.0, rgb.z / 255.0, alpha);\n            }\n        ");return new Mt(fe,[new Bt(ot,fe,"a_position",y(2,2).vertices),new Bt(ot,fe,"a_textureCoord",y(2,2).texturePositions)],[new Ze(ot,fe,"u_colorRampValues","float[]",rt.map(Le=>Le.val)),new Ze(ot,fe,"u_colorRampColors","vec3[]",i(rt.map(Le=>Le.rgb))),new Ze(ot,fe,"u_nrColorRampValues","int",[rt.length]),new Ze(ot,fe,"u_maxValue","float",[St]),new Ze(ot,fe,"u_smooth","bool",[bt?1:0])],[new xt(ot,fe,"u_valueTexture",Ft.fbo.texture,0)])},Xe=(ot,rt,St,bt,Ft)=>{const se=new xe(ot,"\n            precision mediump float;\n            attribute vec3 a_pos;\n            attribute vec2 a_posTexture;\n            uniform mat3 u_world2pix;\n            uniform mat3 u_pix2clip;\n            uniform vec4 u_bbox;\n            varying vec2 v_posTexture;\n\n            vec2 clipBbx2worldCoords(vec2 clipCoords, vec4 bbox) {\n                float xPerct = ( clipCoords.x + 1.0 ) / 2.0;\n                float yPerct = ( clipCoords.y + 1.0 ) / 2.0;\n                float xWorld = xPerct * (bbox.z - bbox.x) + bbox.x;\n                float yWorld = yPerct * (bbox.w - bbox.y) + bbox.y;\n                return vec2(xWorld, yWorld);\n            }\n\n            void main() {\n                v_posTexture = a_posTexture;\n                vec2 worldPos = clipBbx2worldCoords(a_pos.xy, u_bbox);\n                vec3 clipPos = u_pix2clip * u_world2pix * vec3(worldPos.xy, 1.0);\n                gl_Position = vec4(clipPos.xy, 0.0, 1.0);\n            }\n        ","\n            precision mediump float;\n            uniform sampler2D u_texture;\n            varying vec2 v_posTexture;\n\n            void main() {\n                gl_FragColor = texture2D(u_texture, v_posTexture);\n            }\n        ");return new Mt(se,[new Bt(ot,se,"a_pos",y(2,2).vertices),new Bt(ot,se,"a_posTexture",y(2,2).texturePositions)],[new Ze(ot,se,"u_world2pix","mat3",i(rt)),new Ze(ot,se,"u_pix2clip","mat3",i(St)),new Ze(ot,se,"u_bbox","vec4",bt)],[new xt(ot,se,"u_texture",Ft.fbo.texture,0)])},oi=ot=>{const rt=ot.map(Se=>Se[0]),St=ot.map(Se=>Se[1]),bt=Math.min(...rt),Ft=Math.max(...rt);return[bt,Math.min(...St),Ft,Math.max(...St)]},Qe=(ot,rt)=>{const St=[];for(let bt=0;bt<ot.length;bt++)St.push(ot[bt].concat(rt[bt]));return St}},3066:(Vt,gt,r)=>{"use strict";r.d(gt,{Zt:()=>vi,Bh:()=>bo,Wj:()=>Vr,_t:()=>hi,bA:()=>Bs});var _=r(4537),g=r(8692);function Q(ct){return null!=ct&&"false"!=`${ct}`}function H(ct,F=0){return function j(ct){return!isNaN(parseFloat(ct))&&!isNaN(Number(ct))}(ct)?Number(ct):F}function S(ct){return ct instanceof _.SBq?ct.nativeElement:ct}var h=r(9765),c=r(5917),u=r(882),s=r(2759),f=r(3989),l=r(6493);const e=new class m extends l.v{flush(F){this.active=!0,this.scheduled=void 0;const{actions:I}=this;let tt,ft=-1,wt=I.length;F=F||I.shift();do{if(tt=F.execute(F.state,F.delay))break}while(++ft<wt&&(F=I.shift()));if(this.active=!1,tt){for(;++ft<wt&&(F=I.shift());)F.unsubscribe();throw tt}}}(class i extends f.o{constructor(F,I){super(F,I),this.scheduler=F,this.work=I}requestAsyncId(F,I,tt=0){return null!==tt&&tt>0?super.requestAsyncId(F,I,tt):(F.actions.push(this),F.scheduled||(F.scheduled=requestAnimationFrame(()=>F.flush(null))))}recycleAsyncId(F,I,tt=0){if(null!==tt&&tt>0||null===tt&&this.delay>0)return super.recycleAsyncId(F,I,tt);0===F.actions.length&&(cancelAnimationFrame(I),F.scheduled=void 0)}});let x=1;const T=Promise.resolve(),U={};function D(ct){return ct in U&&(delete U[ct],!0)}const C={setImmediate(ct){const F=x++;return U[F]=!0,T.then(()=>D(F)&&ct()),F},clearImmediate(ct){D(ct)}};new class $ extends l.v{flush(F){this.active=!0,this.scheduled=void 0;const{actions:I}=this;let tt,ft=-1,wt=I.length;F=F||I.shift();do{if(tt=F.execute(F.state,F.delay))break}while(++ft<wt&&(F=I.shift()));if(this.active=!1,tt){for(;++ft<wt&&(F=I.shift());)F.unsubscribe();throw tt}}}(class X extends f.o{constructor(F,I){super(F,I),this.scheduler=F,this.work=I}requestAsyncId(F,I,tt=0){return null!==tt&&tt>0?super.requestAsyncId(F,I,tt):(F.actions.push(this),F.scheduled||(F.scheduled=C.setImmediate(F.flush.bind(F,null))))}recycleAsyncId(F,I,tt=0){if(null!==tt&&tt>0||null===tt&&this.delay>0)return super.recycleAsyncId(F,I,tt);0===F.actions.length&&(C.clearImmediate(I),F.scheduled=void 0)}});var k=r(3637),L=r(5345);class M{constructor(F){this.durationSelector=F}call(F,I){return I.subscribe(new R(F,this.durationSelector))}}class R extends L.Ds{constructor(F,I){super(F),this.durationSelector=I,this.hasValue=!1}_next(F){if(this.value=F,this.hasValue=!0,!this.throttled){let I;try{const{durationSelector:ft}=this;I=ft(F)}catch(ft){return this.destination.error(ft)}const tt=(0,L.ft)(I,new L.IY(this));!tt||tt.closed?this.clearThrottle():this.add(this.throttled=tt)}}clearThrottle(){const{value:F,hasValue:I,throttled:tt}=this;tt&&(this.remove(tt),this.throttled=void 0,tt.unsubscribe()),I&&(this.value=void 0,this.hasValue=!1,this.destination.next(F))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var K=r(6797);function G(ct,F=k.P){return function p(ct){return function(I){return I.lift(new M(ct))}}(()=>(0,K.H)(ct,F))}var J=r(5435);let q;try{q=typeof Intl<"u"&&Intl.v8BreakIterator}catch{q=!1}let Ht,Ze,ut=(()=>{class ct{constructor(I){this._platformId=I,this.isBrowser=this._platformId?(0,g.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!q)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return ct.\u0275fac=function(I){return new(I||ct)(_.LFG(_.Lbi))},ct.\u0275prov=_.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})();function ae(ct){return function $t(){if(null==Ht&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ht=!0}))}finally{Ht=Ht||!1}return Ht}()?ct:!!ct.capture}function Nt(ct){if(function xt(){if(null==Ze){const ct=typeof document<"u"?document.head:null;Ze=!(!ct||!ct.createShadowRoot&&!ct.attachShadow)}return Ze}()){const F=ct.getRootNode?ct.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&F instanceof ShadowRoot)return F}return null}function ie(ct){return ct.composedPath?ct.composedPath()[0]:ct.target}let Pe=(()=>{class ct{constructor(I,tt,ft){this._ngZone=I,this._platform=tt,this._scrolled=new h.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=ft}register(I){this.scrollContainers.has(I)||this.scrollContainers.set(I,I.elementScrolled().subscribe(()=>this._scrolled.next(I)))}deregister(I){const tt=this.scrollContainers.get(I);tt&&(tt.unsubscribe(),this.scrollContainers.delete(I))}scrolled(I=20){return this._platform.isBrowser?new u.y(tt=>{this._globalSubscription||this._addGlobalListener();const ft=I>0?this._scrolled.pipe(G(I)).subscribe(tt):this._scrolled.subscribe(tt);return this._scrolledCount++,()=>{ft.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,c.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((I,tt)=>this.deregister(tt)),this._scrolled.complete()}ancestorScrolled(I,tt){const ft=this.getAncestorScrollContainers(I);return this.scrolled(tt).pipe((0,J.h)(wt=>!wt||ft.indexOf(wt)>-1))}getAncestorScrollContainers(I){const tt=[];return this.scrollContainers.forEach((ft,wt)=>{this._scrollableContainsElement(wt,I)&&tt.push(wt)}),tt}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(I,tt){let ft=S(tt),wt=I.getElementRef().nativeElement;do{if(ft==wt)return!0}while(ft=ft.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const I=this._getWindow();return(0,s.R)(I.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return ct.\u0275fac=function(I){return new(I||ct)(_.LFG(_.R0b),_.LFG(ut),_.LFG(g.K0,8))},ct.\u0275prov=_.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})(),Zt=(()=>{class ct{constructor(I,tt,ft){this._platform=I,this._change=new h.xQ,this._changeListener=wt=>{this._change.next(wt)},this._document=ft,tt.runOutsideAngular(()=>{if(I.isBrowser){const wt=this._getWindow();wt.addEventListener("resize",this._changeListener),wt.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const I=this._getWindow();I.removeEventListener("resize",this._changeListener),I.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const I={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),I}getViewportRect(){const I=this.getViewportScrollPosition(),{width:tt,height:ft}=this.getViewportSize();return{top:I.top,left:I.left,bottom:I.top+ft,right:I.left+tt,height:ft,width:tt}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const I=this._document,tt=this._getWindow(),ft=I.documentElement,wt=ft.getBoundingClientRect();return{top:-wt.top||I.body.scrollTop||tt.scrollY||ft.scrollTop||0,left:-wt.left||I.body.scrollLeft||tt.scrollX||ft.scrollLeft||0}}change(I=20){return I>0?this._change.pipe(G(I)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const I=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:I.innerWidth,height:I.innerHeight}:{width:0,height:0}}}return ct.\u0275fac=function(I){return new(I||ct)(_.LFG(ut),_.LFG(_.R0b),_.LFG(g.K0,8))},ct.\u0275prov=_.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})(),ee=(()=>{class ct{}return ct.\u0275fac=function(I){return new(I||ct)},ct.\u0275mod=_.oAB({type:ct}),ct.\u0275inj=_.cJS({}),ct})();var hs=r(3464),_o=r(6561);function Fr(ct){const{subscriber:F,counter:I,period:tt}=ct;F.next(I),this.schedule({subscriber:F,counter:I+1,period:tt},tt)}var Ji=r(6682),Gn=r(6782),lr=r(9761),Nr=r(8002),hr=r(5257),Ds=r(6239),mo=r(3190);const vo=new _.OlP("cdk-dir-doc",{providedIn:"root",factory:function yo(){return(0,_.f3M)(g.K0)}}),kr=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let cr=(()=>{class ct{constructor(I){if(this.value="ltr",this.change=new _.vpe,I){const ft=I.documentElement?I.documentElement.dir:null;this.value=function cs(ct){const F=ct?.toLowerCase()||"";return"auto"===F&&typeof navigator<"u"&&navigator?.language?kr.test(navigator.language)?"rtl":"ltr":"rtl"===F?"rtl":"ltr"}((I.body?I.body.dir:null)||ft||"ltr")}}ngOnDestroy(){this.change.complete()}}return ct.\u0275fac=function(I){return new(I||ct)(_.LFG(vo,8))},ct.\u0275prov=_.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})();function Ls(ct,F,I){for(let tt in F)if(F.hasOwnProperty(tt)){const ft=F[tt];ft?ct.setProperty(tt,ft,I?.has(tt)?"important":""):ct.removeProperty(tt)}return ct}function vn(ct,F){const I=F?"":"none";Ls(ct.style,{"touch-action":F?"":"none","-webkit-user-drag":F?"":"none","-webkit-tap-highlight-color":F?"":"transparent","user-select":I,"-ms-user-select":I,"-webkit-user-select":I,"-moz-user-select":I})}function Br(ct,F,I){Ls(ct.style,{position:F?"":"fixed",top:F?"":"0",opacity:F?"":"0",left:F?"":"-999em"},I)}function bn(ct,F){return F&&"none"!=F?ct+" "+F:ct}function us(ct){const F=ct.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(ct)*F}function ur(ct,F){return ct.getPropertyValue(F).split(",").map(tt=>tt.trim())}function dr(ct){const F=ct.getBoundingClientRect();return{top:F.top,right:F.right,bottom:F.bottom,left:F.left,width:F.width,height:F.height,x:F.x,y:F.y}}function ds(ct,F,I){const{top:tt,bottom:ft,left:wt,right:te}=ct;return I>=tt&&I<=ft&&F>=wt&&F<=te}function Rn(ct,F,I){ct.top+=F,ct.bottom=ct.top+ct.height,ct.left+=I,ct.right=ct.left+ct.width}function As(ct,F,I,tt){const{top:ft,right:wt,bottom:te,left:ue,width:Oe,height:We}=ct,ai=Oe*F,mi=We*F;return tt>ft-mi&&tt<te+mi&&I>ue-ai&&I<wt+ai}class tn{constructor(F){this._document=F,this.positions=new Map}clear(){this.positions.clear()}cache(F){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),F.forEach(I=>{this.positions.set(I,{scrollPosition:{top:I.scrollTop,left:I.scrollLeft},clientRect:dr(I)})})}handleScroll(F){const I=ie(F),tt=this.positions.get(I);if(!tt)return null;const ft=tt.scrollPosition;let wt,te;if(I===this._document){const We=this.getViewportScrollPosition();wt=We.top,te=We.left}else wt=I.scrollTop,te=I.scrollLeft;const ue=ft.top-wt,Oe=ft.left-te;return this.positions.forEach((We,ai)=>{We.clientRect&&I!==ai&&I.contains(ai)&&Rn(We.clientRect,ue,Oe)}),ft.top=wt,ft.left=te,{top:ue,left:Oe}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function fr(ct){const F=ct.cloneNode(!0),I=F.querySelectorAll("[id]"),tt=ct.nodeName.toLowerCase();F.removeAttribute("id");for(let ft=0;ft<I.length;ft++)I[ft].removeAttribute("id");return"canvas"===tt?ks(ct,F):("input"===tt||"select"===tt||"textarea"===tt)&&Ns(ct,F),Fs("canvas",ct,F,ks),Fs("input, textarea, select",ct,F,Ns),F}function Fs(ct,F,I,tt){const ft=F.querySelectorAll(ct);if(ft.length){const wt=I.querySelectorAll(ct);for(let te=0;te<ft.length;te++)tt(ft[te],wt[te])}}let zn=0;function Ns(ct,F){"file"!==F.type&&(F.value=ct.value),"radio"===F.type&&F.name&&(F.name=`mat-clone-${F.name}-${zn++}`)}function ks(ct,F){const I=F.getContext("2d");if(I)try{I.drawImage(ct,0,0)}catch{}}const gr=ae({passive:!0}),fs=ae({passive:!1}),_r=new Set(["position"]);class xo{constructor(F,I,tt,ft,wt,te){this._config=I,this._document=tt,this._ngZone=ft,this._viewportRuler=wt,this._dragDropRegistry=te,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new h.xQ,this._pointerMoveSubscription=hs.w.EMPTY,this._pointerUpSubscription=hs.w.EMPTY,this._scrollSubscription=hs.w.EMPTY,this._resizeSubscription=hs.w.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new h.xQ,this.started=new h.xQ,this.released=new h.xQ,this.ended=new h.xQ,this.entered=new h.xQ,this.exited=new h.xQ,this.dropped=new h.xQ,this.moved=this._moveEvents,this._pointerDown=ue=>{if(this.beforeStarted.next(),this._handles.length){const Oe=this._getTargetHandle(ue);Oe&&!this._disabledHandles.has(Oe)&&!this.disabled&&this._initializeDragSequence(Oe,ue)}else this.disabled||this._initializeDragSequence(this._rootElement,ue)},this._pointerMove=ue=>{const Oe=this._getPointerPositionOnPage(ue);if(!this._hasStartedDragging){if(Math.abs(Oe.x-this._pickupPositionOnPage.x)+Math.abs(Oe.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const $i=Date.now()>=this._dragStartTime+this._getDragStartDelay(ue),on=this._dropContainer;if(!$i)return void this._endDragSequence(ue);(!on||!on.isDragging()&&!on.isReceiving())&&(ue.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(ue)))}return}ue.preventDefault();const We=this._getConstrainedPointerPosition(Oe);if(this._hasMoved=!0,this._lastKnownPointerPosition=Oe,this._updatePointerDirectionDelta(We),this._dropContainer)this._updateActiveDropContainer(We,Oe);else{const ai=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,mi=this._activeTransform;mi.x=We.x-ai.x+this._passiveTransform.x,mi.y=We.y-ai.y+this._passiveTransform.y,this._applyRootElementTransform(mi.x,mi.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:We,event:ue,distance:this._getDragDistance(We),delta:this._pointerDirectionDelta})})},this._pointerUp=ue=>{this._endDragSequence(ue)},this._nativeDragStart=ue=>{if(this._handles.length){const Oe=this._getTargetHandle(ue);Oe&&!this._disabledHandles.has(Oe)&&!this.disabled&&ue.preventDefault()}else this.disabled||ue.preventDefault()},this.withRootElement(F).withParent(I.parentDragRef||null),this._parentPositions=new tn(tt),te.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(F){const I=Q(F);I!==this._disabled&&(this._disabled=I,this._toggleNativeDragInteractions(),this._handles.forEach(tt=>vn(tt,I)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(F){this._handles=F.map(tt=>S(tt)),this._handles.forEach(tt=>vn(tt,this.disabled)),this._toggleNativeDragInteractions();const I=new Set;return this._disabledHandles.forEach(tt=>{this._handles.indexOf(tt)>-1&&I.add(tt)}),this._disabledHandles=I,this}withPreviewTemplate(F){return this._previewTemplate=F,this}withPlaceholderTemplate(F){return this._placeholderTemplate=F,this}withRootElement(F){const I=S(F);return I!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{I.addEventListener("mousedown",this._pointerDown,fs),I.addEventListener("touchstart",this._pointerDown,gr),I.addEventListener("dragstart",this._nativeDragStart,fs)}),this._initialTransform=void 0,this._rootElement=I),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(F){return this._boundaryElement=F?S(F):null,this._resizeSubscription.unsubscribe(),F&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(F){return this._parentDragRef=F,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(F){!this._disabledHandles.has(F)&&this._handles.indexOf(F)>-1&&(this._disabledHandles.add(F),vn(F,!0))}enableHandle(F){this._disabledHandles.has(F)&&(this._disabledHandles.delete(F),vn(F,this.disabled))}withDirection(F){return this._direction=F,this}_withDropContainer(F){this._dropContainer=F}getFreeDragPosition(){const F=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:F.x,y:F.y}}setFreeDragPosition(F){return this._activeTransform={x:0,y:0},this._passiveTransform.x=F.x,this._passiveTransform.y=F.y,this._dropContainer||this._applyRootElementTransform(F.x,F.y),this}withPreviewContainer(F){return this._previewContainer=F,this}_sortFromLastPointerPosition(){const F=this._lastKnownPointerPosition;F&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(F),F)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(F){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:F}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(F),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const I=this._getPointerPositionOnPage(F);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(I),dropPoint:I,event:F})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(F){Kn(F)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const I=this._dropContainer;if(I){const tt=this._rootElement,ft=tt.parentNode,wt=this._placeholder=this._createPlaceholderElement(),te=this._anchor=this._anchor||this._document.createComment(""),ue=this._getShadowRoot();ft.insertBefore(te,tt),this._initialTransform=tt.style.transform||"",this._preview=this._createPreviewElement(),Br(tt,!1,_r),this._document.body.appendChild(ft.replaceChild(wt,tt)),this._getPreviewInsertionPoint(ft,ue).appendChild(this._preview),this.started.next({source:this,event:F}),I.start(),this._initialContainer=I,this._initialIndex=I.getItemIndex(this)}else this.started.next({source:this,event:F}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(I?I.getScrollableParents():[])}_initializeDragSequence(F,I){this._parentDragRef&&I.stopPropagation();const tt=this.isDragging(),ft=Kn(I),wt=!ft&&0!==I.button,te=this._rootElement,ue=ie(I),Oe=!ft&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),We=ft?function as(ct){const F=ct.touches&&ct.touches[0]||ct.changedTouches&&ct.changedTouches[0];return!(!F||-1!==F.identifier||null!=F.radiusX&&1!==F.radiusX||null!=F.radiusY&&1!==F.radiusY)}(I):function jn(ct){return 0===ct.buttons||0===ct.offsetX&&0===ct.offsetY}(I);if(ue&&ue.draggable&&"mousedown"===I.type&&I.preventDefault(),tt||wt||Oe||We)return;if(this._handles.length){const Qi=te.style;this._rootElementTapHighlight=Qi.webkitTapHighlightColor||"",Qi.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(Qi=>this._updateOnScroll(Qi)),this._boundaryElement&&(this._boundaryRect=dr(this._boundaryElement));const ai=this._previewTemplate;this._pickupPositionInElement=ai&&ai.template&&!ai.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,F,I);const mi=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(I);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:mi.x,y:mi.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,I)}_cleanupDragArtifacts(F){Br(this._rootElement,!0,_r),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const I=this._dropContainer,tt=I.getItemIndex(this),ft=this._getPointerPositionOnPage(F),wt=this._getDragDistance(ft),te=I._isOverContainer(ft.x,ft.y);this.ended.next({source:this,distance:wt,dropPoint:ft,event:F}),this.dropped.next({item:this,currentIndex:tt,previousIndex:this._initialIndex,container:I,previousContainer:this._initialContainer,isPointerOverContainer:te,distance:wt,dropPoint:ft,event:F}),I.drop(this,tt,this._initialIndex,this._initialContainer,te,wt,ft,F),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:F,y:I},{x:tt,y:ft}){let wt=this._initialContainer._getSiblingContainerFromPosition(this,F,I);!wt&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(F,I)&&(wt=this._initialContainer),wt&&wt!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=wt,this._dropContainer.enter(this,F,I,wt===this._initialContainer&&wt.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:wt,currentIndex:wt.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(tt,ft),this._dropContainer._sortItem(this,F,I,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(F,I):this._applyPreviewTransform(F-this._pickupPositionInElement.x,I-this._pickupPositionInElement.y))}_createPreviewElement(){const F=this._previewTemplate,I=this.previewClass,tt=F?F.template:null;let ft;if(tt&&F){const wt=F.matchSize?this._initialClientRect:null,te=F.viewContainer.createEmbeddedView(tt,F.context);te.detectChanges(),ft=yn(te,this._document),this._previewRef=te,F.matchSize?pr(ft,wt):ft.style.transform=Wn(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else ft=fr(this._rootElement),pr(ft,this._initialClientRect),this._initialTransform&&(ft.style.transform=this._initialTransform);return Ls(ft.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},_r),vn(ft,!1),ft.classList.add("cdk-drag-preview"),ft.setAttribute("dir",this._direction),I&&(Array.isArray(I)?I.forEach(wt=>ft.classList.add(wt)):ft.classList.add(I)),ft}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const F=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(F.left,F.top);const I=function Ur(ct){const F=getComputedStyle(ct),I=ur(F,"transition-property"),tt=I.find(ue=>"transform"===ue||"all"===ue);if(!tt)return 0;const ft=I.indexOf(tt),wt=ur(F,"transition-duration"),te=ur(F,"transition-delay");return us(wt[ft])+us(te[ft])}(this._preview);return 0===I?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(tt=>{const ft=te=>{(!te||ie(te)===this._preview&&"transform"===te.propertyName)&&(this._preview?.removeEventListener("transitionend",ft),tt(),clearTimeout(wt))},wt=setTimeout(ft,1.5*I);this._preview.addEventListener("transitionend",ft)}))}_createPlaceholderElement(){const F=this._placeholderTemplate,I=F?F.template:null;let tt;return I?(this._placeholderRef=F.viewContainer.createEmbeddedView(I,F.context),this._placeholderRef.detectChanges(),tt=yn(this._placeholderRef,this._document)):tt=fr(this._rootElement),tt.style.pointerEvents="none",tt.classList.add("cdk-drag-placeholder"),tt}_getPointerPositionInElement(F,I,tt){const ft=I===this._rootElement?null:I,wt=ft?ft.getBoundingClientRect():F,te=Kn(tt)?tt.targetTouches[0]:tt,ue=this._getViewportScrollPosition();return{x:wt.left-F.left+(te.pageX-wt.left-ue.left),y:wt.top-F.top+(te.pageY-wt.top-ue.top)}}_getPointerPositionOnPage(F){const I=this._getViewportScrollPosition(),tt=Kn(F)?F.touches[0]||F.changedTouches[0]||{pageX:0,pageY:0}:F,ft=tt.pageX-I.left,wt=tt.pageY-I.top;if(this._ownerSVGElement){const te=this._ownerSVGElement.getScreenCTM();if(te){const ue=this._ownerSVGElement.createSVGPoint();return ue.x=ft,ue.y=wt,ue.matrixTransform(te.inverse())}}return{x:ft,y:wt}}_getConstrainedPointerPosition(F){const I=this._dropContainer?this._dropContainer.lockAxis:null;let{x:tt,y:ft}=this.constrainPosition?this.constrainPosition(F,this,this._initialClientRect,this._pickupPositionInElement):F;if("x"===this.lockAxis||"x"===I?ft=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===I)&&(tt=this._pickupPositionOnPage.x),this._boundaryRect){const{x:wt,y:te}=this._pickupPositionInElement,ue=this._boundaryRect,{width:Oe,height:We}=this._getPreviewRect(),ai=ue.top+te,mi=ue.bottom-(We-te);tt=Zs(tt,ue.left+wt,ue.right-(Oe-wt)),ft=Zs(ft,ai,mi)}return{x:tt,y:ft}}_updatePointerDirectionDelta(F){const{x:I,y:tt}=F,ft=this._pointerDirectionDelta,wt=this._pointerPositionAtLastDirectionChange,te=Math.abs(I-wt.x),ue=Math.abs(tt-wt.y);return te>this._config.pointerDirectionChangeThreshold&&(ft.x=I>wt.x?1:-1,wt.x=I),ue>this._config.pointerDirectionChangeThreshold&&(ft.y=tt>wt.y?1:-1,wt.y=tt),ft}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const F=this._handles.length>0||!this.isDragging();F!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=F,vn(this._rootElement,F))}_removeRootElementListeners(F){F.removeEventListener("mousedown",this._pointerDown,fs),F.removeEventListener("touchstart",this._pointerDown,gr),F.removeEventListener("dragstart",this._nativeDragStart,fs)}_applyRootElementTransform(F,I){const tt=Wn(F,I),ft=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=ft.transform&&"none"!=ft.transform?ft.transform:""),ft.transform=bn(tt,this._initialTransform)}_applyPreviewTransform(F,I){const tt=this._previewTemplate?.template?void 0:this._initialTransform,ft=Wn(F,I);this._preview.style.transform=bn(ft,tt)}_getDragDistance(F){const I=this._pickupPositionOnPage;return I?{x:F.x-I.x,y:F.y-I.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:F,y:I}=this._passiveTransform;if(0===F&&0===I||this.isDragging()||!this._boundaryElement)return;const tt=this._rootElement.getBoundingClientRect(),ft=this._boundaryElement.getBoundingClientRect();if(0===ft.width&&0===ft.height||0===tt.width&&0===tt.height)return;const wt=ft.left-tt.left,te=tt.right-ft.right,ue=ft.top-tt.top,Oe=tt.bottom-ft.bottom;ft.width>tt.width?(wt>0&&(F+=wt),te>0&&(F-=te)):F=0,ft.height>tt.height?(ue>0&&(I+=ue),Oe>0&&(I-=Oe)):I=0,(F!==this._passiveTransform.x||I!==this._passiveTransform.y)&&this.setFreeDragPosition({y:I,x:F})}_getDragStartDelay(F){const I=this.dragStartDelay;return"number"==typeof I?I:Kn(F)?I.touch:I?I.mouse:0}_updateOnScroll(F){const I=this._parentPositions.handleScroll(F);if(I){const tt=ie(F);this._boundaryRect&&tt!==this._boundaryElement&&tt.contains(this._boundaryElement)&&Rn(this._boundaryRect,I.top,I.left),this._pickupPositionOnPage.x+=I.left,this._pickupPositionOnPage.y+=I.top,this._dropContainer||(this._activeTransform.x-=I.left,this._activeTransform.y-=I.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Nt(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(F,I){const tt=this._previewContainer||"global";if("parent"===tt)return F;if("global"===tt){const ft=this._document;return I||ft.fullscreenElement||ft.webkitFullscreenElement||ft.mozFullScreenElement||ft.msFullscreenElement||ft.body}return S(tt)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(F){return this._handles.find(I=>F.target&&(F.target===I||I.contains(F.target)))}}function Wn(ct,F){return`translate3d(${Math.round(ct)}px, ${Math.round(F)}px, 0)`}function Zs(ct,F,I){return Math.max(F,Math.min(I,ct))}function Kn(ct){return"t"===ct.type[0]}function yn(ct,F){const I=ct.rootNodes;if(1===I.length&&I[0].nodeType===F.ELEMENT_NODE)return I[0];const tt=F.createElement("div");return I.forEach(ft=>tt.appendChild(ft)),tt}function pr(ct,F){ct.style.width=`${F.width}px`,ct.style.height=`${F.height}px`,ct.style.transform=Wn(F.left,F.top)}function Bs(ct,F,I){const tt=En(F,ct.length-1),ft=En(I,ct.length-1);if(tt===ft)return;const wt=ct[tt],te=ft<tt?-1:1;for(let ue=tt;ue!==ft;ue+=te)ct[ue]=ct[ue+te];ct[ft]=wt}function En(ct,F){return Math.max(0,Math.min(F,ct))}class Co{constructor(F,I){this._element=F,this._dragDropRegistry=I,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(F){this.withItems(F)}sort(F,I,tt,ft){const wt=this._itemPositions,te=this._getItemIndexFromPointerPosition(F,I,tt,ft);if(-1===te&&wt.length>0)return null;const ue="horizontal"===this.orientation,Oe=wt.findIndex(en=>en.drag===F),We=wt[te],mi=We.clientRect,Qi=Oe>te?1:-1,$i=this._getItemOffsetPx(wt[Oe].clientRect,mi,Qi),on=this._getSiblingOffsetPx(Oe,wt,Qi),wn=wt.slice();return Bs(wt,Oe,te),wt.forEach((en,Hr)=>{if(wn[Hr]===en)return;const Jr=en.drag===F,zs=Jr?$i:on,Oo=Jr?F.getPlaceholderElement():en.drag.getRootElement();en.offset+=zs,ue?(Oo.style.transform=bn(`translate3d(${Math.round(en.offset)}px, 0, 0)`,en.initialTransform),Rn(en.clientRect,0,zs)):(Oo.style.transform=bn(`translate3d(0, ${Math.round(en.offset)}px, 0)`,en.initialTransform),Rn(en.clientRect,zs,0))}),this._previousSwap.overlaps=ds(mi,I,tt),this._previousSwap.drag=We.drag,this._previousSwap.delta=ue?ft.x:ft.y,{previousIndex:Oe,currentIndex:te}}enter(F,I,tt,ft){const wt=null==ft||ft<0?this._getItemIndexFromPointerPosition(F,I,tt):ft,te=this._activeDraggables,ue=te.indexOf(F),Oe=F.getPlaceholderElement();let We=te[wt];if(We===F&&(We=te[wt+1]),!We&&(null==wt||-1===wt||wt<te.length-1)&&this._shouldEnterAsFirstChild(I,tt)&&(We=te[0]),ue>-1&&te.splice(ue,1),We&&!this._dragDropRegistry.isDragging(We)){const ai=We.getRootElement();ai.parentElement.insertBefore(Oe,ai),te.splice(wt,0,F)}else S(this._element).appendChild(Oe),te.push(F);Oe.style.transform="",this._cacheItemPositions()}withItems(F){this._activeDraggables=F.slice(),this._cacheItemPositions()}withSortPredicate(F){this._sortPredicate=F}reset(){this._activeDraggables.forEach(F=>{const I=F.getRootElement();if(I){const tt=this._itemPositions.find(ft=>ft.drag===F)?.initialTransform;I.style.transform=tt||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(F){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(tt=>tt.drag===F)}updateOnScroll(F,I){this._itemPositions.forEach(({clientRect:tt})=>{Rn(tt,F,I)}),this._itemPositions.forEach(({drag:tt})=>{this._dragDropRegistry.isDragging(tt)&&tt._sortFromLastPointerPosition()})}_cacheItemPositions(){const F="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(I=>{const tt=I.getVisibleElement();return{drag:I,offset:0,initialTransform:tt.style.transform||"",clientRect:dr(tt)}}).sort((I,tt)=>F?I.clientRect.left-tt.clientRect.left:I.clientRect.top-tt.clientRect.top)}_getItemOffsetPx(F,I,tt){const ft="horizontal"===this.orientation;let wt=ft?I.left-F.left:I.top-F.top;return-1===tt&&(wt+=ft?I.width-F.width:I.height-F.height),wt}_getSiblingOffsetPx(F,I,tt){const ft="horizontal"===this.orientation,wt=I[F].clientRect,te=I[F+-1*tt];let ue=wt[ft?"width":"height"]*tt;if(te){const Oe=ft?"left":"top",We=ft?"right":"bottom";-1===tt?ue-=te.clientRect[Oe]-wt[We]:ue+=wt[Oe]-te.clientRect[We]}return ue}_shouldEnterAsFirstChild(F,I){if(!this._activeDraggables.length)return!1;const tt=this._itemPositions,ft="horizontal"===this.orientation;if(tt[0].drag!==this._activeDraggables[0]){const te=tt[tt.length-1].clientRect;return ft?F>=te.right:I>=te.bottom}{const te=tt[0].clientRect;return ft?F<=te.left:I<=te.top}}_getItemIndexFromPointerPosition(F,I,tt,ft){const wt="horizontal"===this.orientation,te=this._itemPositions.findIndex(({drag:ue,clientRect:Oe})=>{if(ue===F)return!1;if(ft){const We=wt?ft.x:ft.y;if(ue===this._previousSwap.drag&&this._previousSwap.overlaps&&We===this._previousSwap.delta)return!1}return wt?I>=Math.floor(Oe.left)&&I<Math.floor(Oe.right):tt>=Math.floor(Oe.top)&&tt<Math.floor(Oe.bottom)});return-1!==te&&this._sortPredicate(te,F)?te:-1}}class Mo{constructor(F,I,tt,ft,wt){this._dragDropRegistry=I,this._ngZone=ft,this._viewportRuler=wt,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new h.xQ,this.entered=new h.xQ,this.exited=new h.xQ,this.dropped=new h.xQ,this.sorted=new h.xQ,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=hs.w.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new h.xQ,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function po(ct=0,F=k.P){return(!(0,_o.k)(ct)||ct<0)&&(ct=0),(!F||"function"!=typeof F.schedule)&&(F=k.P),new u.y(I=>(I.add(F.schedule(Fr,ct,{subscriber:I,counter:0,period:ct})),I))}(0,e).pipe((0,Gn.R)(this._stopScrollTimers)).subscribe(()=>{const te=this._scrollNode,ue=this.autoScrollStep;1===this._verticalScrollDirection?te.scrollBy(0,-ue):2===this._verticalScrollDirection&&te.scrollBy(0,ue),1===this._horizontalScrollDirection?te.scrollBy(-ue,0):2===this._horizontalScrollDirection&&te.scrollBy(ue,0)})},this.element=S(F),this._document=tt,this.withScrollableParents([this.element]),I.registerDropContainer(this),this._parentPositions=new tn(tt),this._sortStrategy=new Co(this.element,I),this._sortStrategy.withSortPredicate((te,ue)=>this.sortPredicate(te,ue,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(F,I,tt,ft){this._draggingStarted(),null==ft&&this.sortingDisabled&&(ft=this._draggables.indexOf(F)),this._sortStrategy.enter(F,I,tt,ft),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:F,container:this,currentIndex:this.getItemIndex(F)})}exit(F){this._reset(),this.exited.next({item:F,container:this})}drop(F,I,tt,ft,wt,te,ue,Oe={}){this._reset(),this.dropped.next({item:F,currentIndex:I,previousIndex:tt,container:this,previousContainer:ft,isPointerOverContainer:wt,distance:te,dropPoint:ue,event:Oe})}withItems(F){const I=this._draggables;return this._draggables=F,F.forEach(tt=>tt._withDropContainer(this)),this.isDragging()&&(I.filter(ft=>ft.isDragging()).every(ft=>-1===F.indexOf(ft))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(F){return this._sortStrategy.direction=F,this}connectedTo(F){return this._siblings=F.slice(),this}withOrientation(F){return this._sortStrategy.orientation=F,this}withScrollableParents(F){const I=S(this.element);return this._scrollableElements=-1===F.indexOf(I)?[I,...F]:F.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(F){return this._isDragging?this._sortStrategy.getItemIndex(F):this._draggables.indexOf(F)}isReceiving(){return this._activeSiblings.size>0}_sortItem(F,I,tt,ft){if(this.sortingDisabled||!this._clientRect||!As(this._clientRect,.05,I,tt))return;const wt=this._sortStrategy.sort(F,I,tt,ft);wt&&this.sorted.next({previousIndex:wt.previousIndex,currentIndex:wt.currentIndex,container:this,item:F})}_startScrollingIfNecessary(F,I){if(this.autoScrollDisabled)return;let tt,ft=0,wt=0;if(this._parentPositions.positions.forEach((te,ue)=>{ue===this._document||!te.clientRect||tt||As(te.clientRect,.05,F,I)&&([ft,wt]=function mr(ct,F,I,tt){const ft=zr(F,tt),wt=Wr(F,I);let te=0,ue=0;if(ft){const Oe=ct.scrollTop;1===ft?Oe>0&&(te=1):ct.scrollHeight-Oe>ct.clientHeight&&(te=2)}if(wt){const Oe=ct.scrollLeft;1===wt?Oe>0&&(ue=1):ct.scrollWidth-Oe>ct.clientWidth&&(ue=2)}return[te,ue]}(ue,te.clientRect,F,I),(ft||wt)&&(tt=ue))}),!ft&&!wt){const{width:te,height:ue}=this._viewportRuler.getViewportSize(),Oe={width:te,height:ue,top:0,right:te,bottom:ue,left:0};ft=zr(Oe,I),wt=Wr(Oe,F),tt=window}tt&&(ft!==this._verticalScrollDirection||wt!==this._horizontalScrollDirection||tt!==this._scrollNode)&&(this._verticalScrollDirection=ft,this._horizontalScrollDirection=wt,this._scrollNode=tt,(ft||wt)&&tt?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const F=S(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=F.msScrollSnapType||F.scrollSnapType||"",F.scrollSnapType=F.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const F=S(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(F).clientRect}_reset(){this._isDragging=!1;const F=S(this.element).style;F.scrollSnapType=F.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(I=>I._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(F,I){return null!=this._clientRect&&ds(this._clientRect,F,I)}_getSiblingContainerFromPosition(F,I,tt){return this._siblings.find(ft=>ft._canReceive(F,I,tt))}_canReceive(F,I,tt){if(!this._clientRect||!ds(this._clientRect,I,tt)||!this.enterPredicate(F,this))return!1;const ft=this._getShadowRoot().elementFromPoint(I,tt);if(!ft)return!1;const wt=S(this.element);return ft===wt||wt.contains(ft)}_startReceiving(F,I){const tt=this._activeSiblings;!tt.has(F)&&I.every(ft=>this.enterPredicate(ft,this)||this._draggables.indexOf(ft)>-1)&&(tt.add(F),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(F){this._activeSiblings.delete(F),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(F=>{if(this.isDragging()){const I=this._parentPositions.handleScroll(F);I&&this._sortStrategy.updateOnScroll(I.top,I.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const F=Nt(S(this.element));this._cachedShadowRoot=F||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const F=this._sortStrategy.getActiveItemsSnapshot().filter(I=>I.isDragging());this._siblings.forEach(I=>I._startReceiving(this,F))}}function zr(ct,F){const{top:I,bottom:tt,height:ft}=ct,wt=.05*ft;return F>=I-wt&&F<=I+wt?1:F>=tt-wt&&F<=tt+wt?2:0}function Wr(ct,F){const{left:I,right:tt,width:ft}=ct,wt=.05*ft;return F>=I-wt&&F<=I+wt?1:F>=tt-wt&&F<=tt+wt?2:0}const In=ae({passive:!1,capture:!0});let js=(()=>{class ct{constructor(I,tt){this._ngZone=I,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=ft=>ft.isDragging(),this.pointerMove=new h.xQ,this.pointerUp=new h.xQ,this.scroll=new h.xQ,this._preventDefaultWhileDragging=ft=>{this._activeDragInstances.length>0&&ft.preventDefault()},this._persistentTouchmoveListener=ft=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&ft.preventDefault(),this.pointerMove.next(ft))},this._document=tt}registerDropContainer(I){this._dropInstances.has(I)||this._dropInstances.add(I)}registerDragItem(I){this._dragInstances.add(I),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,In)})}removeDropContainer(I){this._dropInstances.delete(I)}removeDragItem(I){this._dragInstances.delete(I),this.stopDragging(I),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,In)}startDragging(I,tt){if(!(this._activeDragInstances.indexOf(I)>-1)&&(this._activeDragInstances.push(I),1===this._activeDragInstances.length)){const ft=tt.type.startsWith("touch");this._globalListeners.set(ft?"touchend":"mouseup",{handler:wt=>this.pointerUp.next(wt),options:!0}).set("scroll",{handler:wt=>this.scroll.next(wt),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:In}),ft||this._globalListeners.set("mousemove",{handler:wt=>this.pointerMove.next(wt),options:In}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((wt,te)=>{this._document.addEventListener(te,wt.handler,wt.options)})})}}stopDragging(I){const tt=this._activeDragInstances.indexOf(I);tt>-1&&(this._activeDragInstances.splice(tt,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(I){return this._activeDragInstances.indexOf(I)>-1}scrolled(I){const tt=[this.scroll];return I&&I!==this._document&&tt.push(new u.y(ft=>this._ngZone.runOutsideAngular(()=>{const te=ue=>{this._activeDragInstances.length&&ft.next(ue)};return I.addEventListener("scroll",te,!0),()=>{I.removeEventListener("scroll",te,!0)}}))),(0,Ji.T)(...tt)}ngOnDestroy(){this._dragInstances.forEach(I=>this.removeDragItem(I)),this._dropInstances.forEach(I=>this.removeDropContainer(I)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((I,tt)=>{this._document.removeEventListener(tt,I.handler,I.options)}),this._globalListeners.clear()}}return ct.\u0275fac=function(I){return new(I||ct)(_.LFG(_.R0b),_.LFG(g.K0))},ct.\u0275prov=_.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})();const vr={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let Ge=(()=>{class ct{constructor(I,tt,ft,wt){this._document=I,this._ngZone=tt,this._viewportRuler=ft,this._dragDropRegistry=wt}createDrag(I,tt=vr){return new xo(I,tt,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(I){return new Mo(I,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return ct.\u0275fac=function(I){return new(I||ct)(_.LFG(g.K0),_.LFG(_.R0b),_.LFG(Zt),_.LFG(js))},ct.\u0275prov=_.Yz7({token:ct,factory:ct.\u0275fac,providedIn:"root"}),ct})();const yr=new _.OlP("CDK_DRAG_PARENT"),Kr=new _.OlP("CdkDropListGroup"),Po=new _.OlP("CDK_DRAG_CONFIG");let So=0;const Gs=new _.OlP("CdkDropList");let Vr=(()=>{class ct{constructor(I,tt,ft,wt,te,ue,Oe){this.element=I,this._changeDetectorRef=ft,this._scrollDispatcher=wt,this._dir=te,this._group=ue,this._destroyed=new h.xQ,this.connectedTo=[],this.id="cdk-drop-list-"+So++,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.dropped=new _.vpe,this.entered=new _.vpe,this.exited=new _.vpe,this.sorted=new _.vpe,this._unsortedItems=new Set,this._dropListRef=tt.createDropList(I),this._dropListRef.data=this,Oe&&this._assignDefaults(Oe),this._dropListRef.enterPredicate=(We,ai)=>this.enterPredicate(We.data,ai.data),this._dropListRef.sortPredicate=(We,ai,mi)=>this.sortPredicate(We,ai.data,mi.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),ct._dropLists.push(this),ue&&ue._items.add(this)}get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(I){this._dropListRef.disabled=this._disabled=Q(I)}addItem(I){this._unsortedItems.add(I),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(I){this._unsortedItems.delete(I),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((I,tt)=>I._dragRef.getVisibleElement().compareDocumentPosition(tt._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){const I=ct._dropLists.indexOf(this);I>-1&&ct._dropLists.splice(I,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(I){this._dir&&this._dir.change.pipe((0,lr.O)(this._dir.value),(0,Gn.R)(this._destroyed)).subscribe(tt=>I.withDirection(tt)),I.beforeStarted.subscribe(()=>{const tt=function N(ct){return Array.isArray(ct)?ct:[ct]}(this.connectedTo).map(ft=>"string"==typeof ft?ct._dropLists.find(te=>te.id===ft):ft);if(this._group&&this._group._items.forEach(ft=>{-1===tt.indexOf(ft)&&tt.push(ft)}),!this._scrollableParentsResolved){const ft=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(wt=>wt.getElementRef().nativeElement);this._dropListRef.withScrollableParents(ft),this._scrollableParentsResolved=!0}I.disabled=this.disabled,I.lockAxis=this.lockAxis,I.sortingDisabled=Q(this.sortingDisabled),I.autoScrollDisabled=Q(this.autoScrollDisabled),I.autoScrollStep=H(this.autoScrollStep,2),I.connectedTo(tt.filter(ft=>ft&&ft!==this).map(ft=>ft._dropListRef)).withOrientation(this.orientation)})}_handleEvents(I){I.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),I.entered.subscribe(tt=>{this.entered.emit({container:this,item:tt.item.data,currentIndex:tt.currentIndex})}),I.exited.subscribe(tt=>{this.exited.emit({container:this,item:tt.item.data}),this._changeDetectorRef.markForCheck()}),I.sorted.subscribe(tt=>{this.sorted.emit({previousIndex:tt.previousIndex,currentIndex:tt.currentIndex,container:this,item:tt.item.data})}),I.dropped.subscribe(tt=>{this.dropped.emit({previousIndex:tt.previousIndex,currentIndex:tt.currentIndex,previousContainer:tt.previousContainer.data,container:tt.container.data,item:tt.item.data,isPointerOverContainer:tt.isPointerOverContainer,distance:tt.distance,dropPoint:tt.dropPoint,event:tt.event}),this._changeDetectorRef.markForCheck()})}_assignDefaults(I){const{lockAxis:tt,draggingDisabled:ft,sortingDisabled:wt,listAutoScrollDisabled:te,listOrientation:ue}=I;this.disabled=ft??!1,this.sortingDisabled=wt??!1,this.autoScrollDisabled=te??!1,this.orientation=ue||"vertical",tt&&(this.lockAxis=tt)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(I=>I._dragRef))}}return ct._dropLists=[],ct.\u0275fac=function(I){return new(I||ct)(_.Y36(_.SBq),_.Y36(Ge),_.Y36(_.sBO),_.Y36(Pe),_.Y36(cr,8),_.Y36(Kr,12),_.Y36(Po,8))},ct.\u0275dir=_.lG2({type:ct,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(I,tt){2&I&&(_.uIk("id",tt.id),_.ekj("cdk-drop-list-disabled",tt.disabled)("cdk-drop-list-dragging",tt._dropListRef.isDragging())("cdk-drop-list-receiving",tt._dropListRef.isReceiving()))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],data:["cdkDropListData","data"],orientation:["cdkDropListOrientation","orientation"],id:"id",lockAxis:["cdkDropListLockAxis","lockAxis"],disabled:["cdkDropListDisabled","disabled"],sortingDisabled:["cdkDropListSortingDisabled","sortingDisabled"],enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],sortPredicate:["cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:["cdkDropListAutoScrollDisabled","autoScrollDisabled"],autoScrollStep:["cdkDropListAutoScrollStep","autoScrollStep"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[_._Bn([{provide:Kr,useValue:void 0},{provide:Gs,useExisting:ct}])]}),ct})();const Xr=new _.OlP("CdkDragHandle");let bo=(()=>{class ct{constructor(I,tt){this.element=I,this._stateChanges=new h.xQ,this._disabled=!1,this._parentDrag=tt}get disabled(){return this._disabled}set disabled(I){this._disabled=Q(I),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return ct.\u0275fac=function(I){return new(I||ct)(_.Y36(_.SBq),_.Y36(yr,12))},ct.\u0275dir=_.lG2({type:ct,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[_._Bn([{provide:Xr,useExisting:ct}])]}),ct})();const Ro=new _.OlP("CdkDragPlaceholder"),Yr=new _.OlP("CdkDragPreview");let vi=(()=>{class ct{constructor(I,tt,ft,wt,te,ue,Oe,We,ai,mi,Qi){this.element=I,this.dropContainer=tt,this._ngZone=wt,this._viewContainerRef=te,this._dir=Oe,this._changeDetectorRef=ai,this._selfHandle=mi,this._parentDrag=Qi,this._destroyed=new h.xQ,this.started=new _.vpe,this.released=new _.vpe,this.ended=new _.vpe,this.entered=new _.vpe,this.exited=new _.vpe,this.dropped=new _.vpe,this.moved=new u.y($i=>{const on=this._dragRef.moved.pipe((0,Nr.U)(wn=>({source:this,pointerPosition:wn.pointerPosition,event:wn.event,delta:wn.delta,distance:wn.distance}))).subscribe($i);return()=>{on.unsubscribe()}}),this._dragRef=We.createDrag(I,{dragStartThreshold:ue&&null!=ue.dragStartThreshold?ue.dragStartThreshold:5,pointerDirectionChangeThreshold:ue&&null!=ue.pointerDirectionChangeThreshold?ue.pointerDirectionChangeThreshold:5,zIndex:ue?.zIndex}),this._dragRef.data=this,ct._dragInstances.push(this),ue&&this._assignDefaults(ue),tt&&(this._dragRef._withDropContainer(tt._dropListRef),tt.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(I){this._disabled=Q(I),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(I){this._dragRef.setFreeDragPosition(I)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,hr.q)(1),(0,Gn.R)(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(I){const tt=I.rootElementSelector,ft=I.freeDragPosition;tt&&!tt.firstChange&&this._updateRootElement(),ft&&!ft.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const I=ct._dragInstances.indexOf(this);I>-1&&ct._dragInstances.splice(I,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const I=this.element.nativeElement;let tt=I;this.rootElementSelector&&(tt=void 0!==I.closest?I.closest(this.rootElementSelector):I.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(tt||I)}_getBoundaryElement(){const I=this.boundaryElement;return I?"string"==typeof I?this.element.nativeElement.closest(I):S(I):null}_syncInputs(I){I.beforeStarted.subscribe(()=>{if(!I.isDragging()){const tt=this._dir,ft=this.dragStartDelay,wt=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,te=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;I.disabled=this.disabled,I.lockAxis=this.lockAxis,I.dragStartDelay="object"==typeof ft&&ft?ft:H(ft),I.constrainPosition=this.constrainPosition,I.previewClass=this.previewClass,I.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(wt).withPreviewTemplate(te).withPreviewContainer(this.previewContainer||"global"),tt&&I.withDirection(tt.value)}}),I.beforeStarted.pipe((0,hr.q)(1)).subscribe(()=>{if(this._parentDrag)return void I.withParent(this._parentDrag._dragRef);let tt=this.element.nativeElement.parentElement;for(;tt;){if(tt.classList.contains("cdk-drag")){I.withParent(ct._dragInstances.find(ft=>ft.element.nativeElement===tt)?._dragRef||null);break}tt=tt.parentElement}})}_handleEvents(I){I.started.subscribe(tt=>{this.started.emit({source:this,event:tt.event}),this._changeDetectorRef.markForCheck()}),I.released.subscribe(tt=>{this.released.emit({source:this,event:tt.event})}),I.ended.subscribe(tt=>{this.ended.emit({source:this,distance:tt.distance,dropPoint:tt.dropPoint,event:tt.event}),this._changeDetectorRef.markForCheck()}),I.entered.subscribe(tt=>{this.entered.emit({container:tt.container.data,item:this,currentIndex:tt.currentIndex})}),I.exited.subscribe(tt=>{this.exited.emit({container:tt.container.data,item:this})}),I.dropped.subscribe(tt=>{this.dropped.emit({previousIndex:tt.previousIndex,currentIndex:tt.currentIndex,previousContainer:tt.previousContainer.data,container:tt.container.data,isPointerOverContainer:tt.isPointerOverContainer,item:this,distance:tt.distance,dropPoint:tt.dropPoint,event:tt.event})})}_assignDefaults(I){const{lockAxis:tt,dragStartDelay:ft,constrainPosition:wt,previewClass:te,boundaryElement:ue,draggingDisabled:Oe,rootElementSelector:We,previewContainer:ai}=I;this.disabled=Oe??!1,this.dragStartDelay=ft||0,tt&&(this.lockAxis=tt),wt&&(this.constrainPosition=wt),te&&(this.previewClass=te),ue&&(this.boundaryElement=ue),We&&(this.rootElementSelector=We),ai&&(this.previewContainer=ai)}_setupHandlesListener(){this._handles.changes.pipe((0,lr.O)(this._handles),(0,Ds.b)(I=>{const tt=I.filter(ft=>ft._parentDrag===this).map(ft=>ft.element);this._selfHandle&&this.rootElementSelector&&tt.push(this.element),this._dragRef.withHandles(tt)}),(0,mo.w)(I=>(0,Ji.T)(...I.map(tt=>tt._stateChanges.pipe((0,lr.O)(tt))))),(0,Gn.R)(this._destroyed)).subscribe(I=>{const tt=this._dragRef,ft=I.element.nativeElement;I.disabled?tt.disableHandle(ft):tt.enableHandle(ft)})}}return ct._dragInstances=[],ct.\u0275fac=function(I){return new(I||ct)(_.Y36(_.SBq),_.Y36(Gs,12),_.Y36(g.K0),_.Y36(_.R0b),_.Y36(_.s_b),_.Y36(Po,8),_.Y36(cr,8),_.Y36(Ge),_.Y36(_.sBO),_.Y36(Xr,10),_.Y36(yr,12))},ct.\u0275dir=_.lG2({type:ct,selectors:[["","cdkDrag",""]],contentQueries:function(I,tt,ft){if(1&I&&(_.Suo(ft,Yr,5),_.Suo(ft,Ro,5),_.Suo(ft,Xr,5)),2&I){let wt;_.iGM(wt=_.CRH())&&(tt._previewTemplate=wt.first),_.iGM(wt=_.CRH())&&(tt._placeholderTemplate=wt.first),_.iGM(wt=_.CRH())&&(tt._handles=wt)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(I,tt){2&I&&_.ekj("cdk-drag-disabled",tt.disabled)("cdk-drag-dragging",tt._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[_._Bn([{provide:yr,useExisting:ct}]),_.TTD]}),ct})(),hi=(()=>{class ct{}return ct.\u0275fac=function(I){return new(I||ct)},ct.\u0275mod=_.oAB({type:ct}),ct.\u0275inj=_.cJS({providers:[Ge],imports:[ee]}),ct})()},5338:(Vt,gt,r)=>{"use strict";r.d(gt,{h0:()=>hi,bg:()=>Io});var _=r(795),g=r(694),Q=r(5999),H=r(2929),j=r(5253),N=r(1786),w=r(8185),S=r(2768),v=r(5809),h=r(8898),c=r(7521),u=r(1591),s=r(6114),f=r(6942),i=r(2673),l=r(1053),m=r(3242),e=r(9543),P=r(992),x=r(2705),T=r(9015),U=r(513);Error,Error;const p=class L extends m.Z{constructor(n){if(super({attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,interpolate:n.interpolate,projection:(0,T.U2)("EPSG:3857"),reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:"loading",tileLoadFunction:n.tileLoadFunction,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,zDirection:n.zDirection}),this.tileJSON_=null,this.tileSize_=n.tileSize,n.url)if(n.jsonp)!function D(o,n,a,b){const W=document.createElement("script"),nt="olc_"+(0,U.sq)(n);function pt(){delete window[nt],W.parentNode.removeChild(W)}W.async=!0,W.src=o+(o.includes("?")?"&":"?")+(b||"callback")+"="+nt;const Ot=setTimeout(function(){pt(),a&&a()},1e4);window[nt]=function(Ut){clearTimeout(Ot),pt(),n(Ut)},document.head.appendChild(W)}(n.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const a=new XMLHttpRequest;a.addEventListener("load",this.onXHRLoad_.bind(this)),a.addEventListener("error",this.onXHRError_.bind(this)),a.open("GET",n.url),a.send()}else n.tileJSON?this.handleTileJSONResponse(n.tileJSON):(0,P.h)(!1,51)}onXHRLoad_(n){const a=n.target;if(!a.status||a.status>=200&&a.status<300){let b;try{b=JSON.parse(a.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(b)}else this.handleTileJSONError()}onXHRError_(n){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(n){const a=(0,T.U2)("EPSG:4326"),b=this.getProjection();let W;if(void 0!==n.bounds){const Gt=(0,T.WO)(a,b);W=(0,e.Ne)(n.bounds,Gt)}const nt=(0,x.Tl)(b),Ut=(0,x.dl)({extent:nt,maxZoom:n.maxzoom||22,minZoom:n.minzoom||0,tileSize:this.tileSize_});if(this.tileGrid=Ut,this.tileUrlFunction=(0,v.uR)(n.tiles,Ut),n.attribution&&!this.getAttributions()){const Gt=void 0!==W?W:nt;this.setAttributions(function(Wt){return(0,e.kK)(Gt,Wt.extent)?[n.attribution]:null})}this.tileJSON_=n,this.setState("ready")}handleTileJSONError(){this.setState("error")}};var ut,M=r(7356),R=r(3149),K=r(585),G=r(978),J=r(8742),ht={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function _t(o){return(o=Math.round(o))<0?0:o>255?255:o}function Lt(o){return _t("%"===o[o.length-1]?parseFloat(o)/100*255:parseInt(o))}function Ht(o){return function Tt(o){return o<0?0:o>1?1:o}("%"===o[o.length-1]?parseFloat(o)/100:parseFloat(o))}function $t(o,n,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?o+(n-o)*a*6:2*a<1?n:3*a<2?o+(n-o)*(2/3-a)*6:o}try{ut={}.parseCSSColor=function ae(o){var a,n=o.replace(/ /g,"").toLowerCase();if(n in ht)return ht[n].slice();if("#"===n[0])return 4===n.length?(a=parseInt(n.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:7===n.length&&(a=parseInt(n.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var b=n.indexOf("("),W=n.indexOf(")");if(-1!==b&&W+1===n.length){var nt=n.substr(0,b),pt=n.substr(b+1,W-(b+1)).split(","),Ot=1;switch(nt){case"rgba":if(4!==pt.length)return null;Ot=Ht(pt.pop());case"rgb":return 3!==pt.length?null:[Lt(pt[0]),Lt(pt[1]),Lt(pt[2]),Ot];case"hsla":if(4!==pt.length)return null;Ot=Ht(pt.pop());case"hsl":if(3!==pt.length)return null;var Ut=(parseFloat(pt[0])%360+360)%360/360,Gt=Ht(pt[1]),Wt=Ht(pt[2]),le=Wt<=.5?Wt*(Gt+1):Wt+Gt-Wt*Gt,Ee=2*Wt-le;return[_t(255*$t(Ee,le,Ut+1/3)),_t(255*$t(Ee,le,Ut)),_t(255*$t(Ee,le,Ut-1/3)),Ot];default:return null}}return null}}catch{}var Qt=function(n,a,b,W){void 0===W&&(W=1),this.r=n,this.g=a,this.b=b,this.a=W};Qt.parse=function(n){if(n){if(n instanceof Qt)return n;if("string"==typeof n){var a=ut(n);if(a)return new Qt(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3])}}},Qt.prototype.toString=function(){var n=this.toArray(),b=n[1],W=n[2],nt=n[3];return"rgba("+Math.round(n[0])+","+Math.round(b)+","+Math.round(W)+","+nt+")"},Qt.prototype.toArray=function(){var n=this,nt=n.a;return 0===nt?[0,0,0,0]:[255*n.r/nt,255*n.g/nt,255*n.b/nt,nt]},Qt.prototype.toArray01=function(){var n=this,nt=n.a;return 0===nt?[0,0,0,0]:[n.r/nt,n.g/nt,n.b/nt,nt]},Qt.prototype.toArray01PremultipliedAlpha=function(){var n=this;return[n.r,n.g,n.b,n.a]},Qt.black=new Qt(0,0,0,1),Qt.white=new Qt(1,1,1,1),Qt.transparent=new Qt(0,0,0,0),Qt.red=new Qt(1,0,0,1),Qt.blue=new Qt(0,0,1,1);var _e=Qt;function Ce(o){return"object"==typeof o?["literal",o]:o}function xt(o){switch(o.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function ie(o,n){var a=Ce(function Bt(o,n){return void 0!==o?o:void 0!==n?n:void 0}(o.default,n.default));return void 0===a&&"resolvedImage"===n.type?"":a}function Te(o,n,a){var b=Kt(o,n),W=["get",o.property];if("categorical"===b&&"boolean"==typeof a[0][0]){for(var nt=["case"],pt=0,Ot=a;pt<Ot.length;pt+=1){var Ut=Ot[pt];nt.push(["==",W,Ut[0]],Ut[1])}return nt.push(ie(o,n)),nt}if("categorical"===b){for(var Gt=["match",W],Wt=0,le=a;Wt<le.length;Wt+=1){var Ee=le[Wt];Dt(Gt,Ee[0],Ee[1],!1)}return Gt.push(ie(o,n)),Gt}if("interval"===b){for(var Me=["step",["number",W]],Ke=0,t=a;Ke<t.length;Ke+=1){var d=t[Ke];Dt(Me,d[0],d[1],!0)}return Mt(Me),void 0===o.default?Me:["case",["==",["typeof",W],"number"],Me,Ce(o.default)]}if("exponential"===b){for(var E=void 0!==o.base?o.base:1,Y=[xt(o),1===E?["linear"]:["exponential",E],["number",W]],V=0,et=a;V<et.length;V+=1){var lt=et[V];Dt(Y,lt[0],lt[1],!1)}return void 0===o.default?Y:["case",["==",["typeof",W],"number"],Y,Ce(o.default)]}throw new Error("Unknown property function type "+b)}function Mt(o){"step"===o[0]&&3===o.length&&(o.push(0),o.push(o[3]))}function Dt(o,n,a,b){o.length>3&&n===o[o.length-2]||(b&&2===o.length||o.push(n),o.push(a))}function Kt(o,n){return o.type?o.type:n.expression.interpolated?"exponential":"interval"}function Yt(o){for(var n=["concat"],a=/{([^{}]+)}/g,b=0,W=a.exec(o);null!==W;W=a.exec(o)){var nt=o.slice(b,a.lastIndex-W[0].length);b=a.lastIndex,nt.length>0&&n.push(nt),n.push(["get",W[1]])}if(1===n.length)return o;if(b<o.length)n.push(o.slice(b));else if(2===n.length)return["to-string",n[1]];return n}var ye=function(o){function n(a,b){o.call(this,b),this.message=b,this.key=a}return o&&(n.__proto__=o),(n.prototype=Object.create(o&&o.prototype)).constructor=n,n}(Error),Pe=function(n,a){void 0===a&&(a=[]),this.parent=n,this.bindings={};for(var b=0,W=a;b<W.length;b+=1){var nt=W[b];this.bindings[nt[0]]=nt[1]}};Pe.prototype.concat=function(n){return new Pe(this,n)},Pe.prototype.get=function(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(n+" not found in scope.")},Pe.prototype.has=function(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)};var ze=Pe,He={kind:"null"},Zt={kind:"number"},Et={kind:"string"},y={kind:"boolean"},z={kind:"color"},st={kind:"object"},it={kind:"value"},Pt={kind:"collator"},kt={kind:"formatted"},zt={kind:"resolvedImage"};function ee(o,n){return{kind:"array",itemType:o,N:n}}function re(o){if("array"===o.kind){var n=re(o.itemType);return"number"==typeof o.N?"array<"+n+", "+o.N+">":"value"===o.itemType.kind?"array":"array<"+n+">"}return o.kind}var we=[He,Zt,Et,y,z,kt,st,ee(it),zt];function ge(o,n){if("error"===n.kind)return null;if("array"===o.kind){if("array"===n.kind&&(0===n.N&&"value"===n.itemType.kind||!ge(o.itemType,n.itemType))&&("number"!=typeof o.N||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if("value"===o.kind)for(var a=0,b=we;a<b.length;a+=1)if(!ge(b[a],n))return null}return"Expected "+re(o)+" but found "+re(n)+" instead."}function oe(o,n){return n.some(function(a){return a.kind===o.kind})}function Xe(o,n){return n.some(function(a){return"null"===a?null===o:"array"===a?Array.isArray(o):"object"===a?o&&!Array.isArray(o)&&"object"==typeof o:a===typeof o})}var oi=function(n,a,b){this.sensitivity=n?a?"variant":"case":a?"accent":"base",this.locale=b,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};oi.prototype.compare=function(n,a){return this.collator.compare(n,a)},oi.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Qe=oi,$e=function(n,a,b,W,nt){this.text=n.normalize?n.normalize():n,this.image=a,this.scale=b,this.fontStack=W,this.textColor=nt},Je=function(n){this.sections=n};Je.fromString=function(n){return new Je([new $e(n,null,null,null,null)])},Je.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(n){return 0!==n.text.length||n.image&&0!==n.image.name.length})},Je.factory=function(n){return n instanceof Je?n:Je.fromString(n)},Je.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(n){return n.text}).join("")},Je.prototype.serialize=function(){for(var n=["format"],a=0,b=this.sections;a<b.length;a+=1){var W=b[a];if(W.image)n.push(["image",W.image.name]);else{n.push(W.text);var nt={};W.fontStack&&(nt["text-font"]=["literal",W.fontStack.split(",")]),W.scale&&(nt["font-scale"]=W.scale),W.textColor&&(nt["text-color"]=["rgba"].concat(W.textColor.toArray())),n.push(nt)}}return n};var ri=Je,_i=function(n){this.name=n.name,this.available=n.available};_i.prototype.toString=function(){return this.name},_i.fromString=function(n){return n?new _i({name:n,available:!1}):null},_i.prototype.serialize=function(){return["image",this.name]};var ui=_i;function di(o,n,a,b){return"number"==typeof o&&o>=0&&o<=255&&"number"==typeof n&&n>=0&&n<=255&&"number"==typeof a&&a>=0&&a<=255?typeof b>"u"||"number"==typeof b&&b>=0&&b<=1?null:"Invalid rgba value ["+[o,n,a,b].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof b?[o,n,a,b]:[o,n,a]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ot(o){if(null===o)return!0;if("string"==typeof o)return!0;if("boolean"==typeof o)return!0;if("number"==typeof o)return!0;if(o instanceof _e)return!0;if(o instanceof Qe)return!0;if(o instanceof ri)return!0;if(o instanceof ui)return!0;if(Array.isArray(o)){for(var n=0,a=o;n<a.length;n+=1)if(!ot(a[n]))return!1;return!0}if("object"==typeof o){for(var W in o)if(!ot(o[W]))return!1;return!0}return!1}function rt(o){if(null===o)return He;if("string"==typeof o)return Et;if("boolean"==typeof o)return y;if("number"==typeof o)return Zt;if(o instanceof _e)return z;if(o instanceof Qe)return Pt;if(o instanceof ri)return kt;if(o instanceof ui)return zt;if(Array.isArray(o)){for(var a,n=o.length,b=0,W=o;b<W.length;b+=1){var pt=rt(W[b]);if(a){if(a===pt)continue;a=it;break}a=pt}return ee(a||it,n)}return st}function St(o){var n=typeof o;return null===o?"":"string"===n||"number"===n||"boolean"===n?String(o):o instanceof _e||o instanceof ri||o instanceof ui?o.toString():JSON.stringify(o)}var bt=function(n,a){this.type=n,this.value=a};bt.parse=function(n,a){if(2!==n.length)return a.error("'literal' expression requires exactly one argument, but found "+(n.length-1)+" instead.");if(!ot(n[1]))return a.error("invalid value");var b=n[1],W=rt(b),nt=a.expectedType;return"array"===W.kind&&0===W.N&&nt&&"array"===nt.kind&&("number"!=typeof nt.N||0===nt.N)&&(W=nt),new bt(W,b)},bt.prototype.evaluate=function(){return this.value},bt.prototype.eachChild=function(){},bt.prototype.outputDefined=function(){return!0},bt.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof _e?["rgba"].concat(this.value.toArray()):this.value instanceof ri?this.value.serialize():this.value};var Ft=bt,se=function(n){this.name="ExpressionEvaluationError",this.message=n};se.prototype.toJSON=function(){return this.message};var fe=se,Se={string:Et,number:Zt,boolean:y,object:st},Le=function(n,a){this.type=n,this.args=a};Le.parse=function(n,a){if(n.length<2)return a.error("Expected at least one argument.");var W,b=1,nt=n[0];if("array"===nt){var pt,Ut;if(n.length>2){var Ot=n[1];if("string"!=typeof Ot||!(Ot in Se)||"object"===Ot)return a.error('The item type argument of "array" must be one of string, number, boolean',1);pt=Se[Ot],b++}else pt=it;if(n.length>3){if(null!==n[2]&&("number"!=typeof n[2]||n[2]<0||n[2]!==Math.floor(n[2])))return a.error('The length argument to "array" must be a positive integer literal',2);Ut=n[2],b++}W=ee(pt,Ut)}else W=Se[nt];for(var Gt=[];b<n.length;b++){var Wt=a.parse(n[b],b,it);if(!Wt)return null;Gt.push(Wt)}return new Le(W,Gt)},Le.prototype.evaluate=function(n){for(var a=0;a<this.args.length;a++){var b=this.args[a].evaluate(n);if(!ge(this.type,rt(b)))return b;if(a===this.args.length-1)throw new fe("Expected value to be of type "+re(this.type)+", but found "+re(rt(b))+" instead.")}return null},Le.prototype.eachChild=function(n){this.args.forEach(n)},Le.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined()})},Le.prototype.serialize=function(){var n=this.type,a=[n.kind];if("array"===n.kind){var b=n.itemType;if("string"===b.kind||"number"===b.kind||"boolean"===b.kind){a.push(b.kind);var W=n.N;("number"==typeof W||this.args.length>1)&&a.push(W)}}return a.concat(this.args.map(function(nt){return nt.serialize()}))};var ke=Le,Ve=function(n){this.type=kt,this.sections=n};Ve.parse=function(n,a){if(n.length<2)return a.error("Expected at least one argument.");var b=n[1];if(!Array.isArray(b)&&"object"==typeof b)return a.error("First argument must be an image or text section.");for(var W=[],nt=!1,pt=1;pt<=n.length-1;++pt){var Ot=n[pt];if(nt&&"object"==typeof Ot&&!Array.isArray(Ot)){nt=!1;var Ut=null;if(Ot["font-scale"]&&!(Ut=a.parse(Ot["font-scale"],1,Zt)))return null;var Gt=null;if(Ot["text-font"]&&!(Gt=a.parse(Ot["text-font"],1,ee(Et))))return null;var Wt=null;if(Ot["text-color"]&&!(Wt=a.parse(Ot["text-color"],1,z)))return null;var le=W[W.length-1];le.scale=Ut,le.font=Gt,le.textColor=Wt}else{var Ee=a.parse(n[pt],1,it);if(!Ee)return null;var Me=Ee.type.kind;if("string"!==Me&&"value"!==Me&&"null"!==Me&&"resolvedImage"!==Me)return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");nt=!0,W.push({content:Ee,scale:null,font:null,textColor:null})}}return new Ve(W)},Ve.prototype.evaluate=function(n){return new ri(this.sections.map(function(b){var W=b.content.evaluate(n);return rt(W)===zt?new $e("",W,null,null,null):new $e(St(W),null,b.scale?b.scale.evaluate(n):null,b.font?b.font.evaluate(n).join(","):null,b.textColor?b.textColor.evaluate(n):null)}))},Ve.prototype.eachChild=function(n){for(var a=0,b=this.sections;a<b.length;a+=1){var W=b[a];n(W.content),W.scale&&n(W.scale),W.font&&n(W.font),W.textColor&&n(W.textColor)}},Ve.prototype.outputDefined=function(){return!1},Ve.prototype.serialize=function(){for(var n=["format"],a=0,b=this.sections;a<b.length;a+=1){var W=b[a];n.push(W.content.serialize());var nt={};W.scale&&(nt["font-scale"]=W.scale.serialize()),W.font&&(nt["text-font"]=W.font.serialize()),W.textColor&&(nt["text-color"]=W.textColor.serialize()),n.push(nt)}return n};var qe=Ve,si=function(n){this.type=zt,this.input=n};si.parse=function(n,a){if(2!==n.length)return a.error("Expected two arguments.");var b=a.parse(n[1],1,Et);return b?new si(b):a.error("No image name provided.")},si.prototype.evaluate=function(n){var a=this.input.evaluate(n),b=ui.fromString(a);return b&&n.availableImages&&(b.available=n.availableImages.indexOf(a)>-1),b},si.prototype.eachChild=function(n){n(this.input)},si.prototype.outputDefined=function(){return!1},si.prototype.serialize=function(){return["image",this.input.serialize()]};var pi=si,Di={"to-boolean":y,"to-color":z,"to-number":Zt,"to-string":Et},Ri=function(n,a){this.type=n,this.args=a};Ri.parse=function(n,a){if(n.length<2)return a.error("Expected at least one argument.");var b=n[0];if(("to-boolean"===b||"to-string"===b)&&2!==n.length)return a.error("Expected one argument.");for(var W=Di[b],nt=[],pt=1;pt<n.length;pt++){var Ot=a.parse(n[pt],pt,it);if(!Ot)return null;nt.push(Ot)}return new Ri(W,nt)},Ri.prototype.evaluate=function(n){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(n));if("color"===this.type.kind){for(var a,b,W=0,nt=this.args;W<nt.length;W+=1){if(b=null,(a=nt[W].evaluate(n))instanceof _e)return a;if("string"==typeof a){var Ot=n.parseColor(a);if(Ot)return Ot}else if(Array.isArray(a)&&!(b=a.length<3||a.length>4?"Invalid rbga value "+JSON.stringify(a)+": expected an array containing either three or four numeric values.":di(a[0],a[1],a[2],a[3])))return new _e(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new fe(b||"Could not parse color from value '"+("string"==typeof a?a:String(JSON.stringify(a)))+"'")}if("number"===this.type.kind){for(var Ut=null,Gt=0,Wt=this.args;Gt<Wt.length;Gt+=1){if(null===(Ut=Wt[Gt].evaluate(n)))return 0;var Ee=Number(Ut);if(!isNaN(Ee))return Ee}throw new fe("Could not convert "+JSON.stringify(Ut)+" to number.")}return"formatted"===this.type.kind?ri.fromString(St(this.args[0].evaluate(n))):"resolvedImage"===this.type.kind?ui.fromString(St(this.args[0].evaluate(n))):St(this.args[0].evaluate(n))},Ri.prototype.eachChild=function(n){this.args.forEach(n)},Ri.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined()})},Ri.prototype.serialize=function(){if("formatted"===this.type.kind)return new qe([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new pi(this.args[0]).serialize();var n=["to-"+this.type.kind];return this.eachChild(function(a){n.push(a.serialize())}),n};var Li=Ri,Yn=["Unknown","Point","LineString","Polygon"],Wi=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};Wi.prototype.id=function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null},Wi.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Yn[this.feature.type]:this.feature.type:null},Wi.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Wi.prototype.canonicalID=function(){return this.canonical},Wi.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Wi.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var n=this.featureDistanceData.center,a=this.featureDistanceData.scale,b=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(b.x*a-n[0])+this.featureDistanceData.bearing[1]*(b.y*a-n[1])}return 0},Wi.prototype.parseColor=function(n){var a=this._parseColorCache[n];return a||(a=this._parseColorCache[n]=_e.parse(n)),a};var Oi=Wi,Mi=function(n,a,b,W){this.name=n,this.type=a,this._evaluate=b,this.args=W};Mi.prototype.evaluate=function(n){return this._evaluate(n,this.args)},Mi.prototype.eachChild=function(n){this.args.forEach(n)},Mi.prototype.outputDefined=function(){return!1},Mi.prototype.serialize=function(){return[this.name].concat(this.args.map(function(n){return n.serialize()}))},Mi.parse=function(n,a){var b,W=n[0],nt=Mi.definitions[W];if(!nt)return a.error('Unknown expression "'+W+'". If you wanted a literal array, use ["literal", [...]].',0);for(var pt=Array.isArray(nt)?nt[0]:nt.type,Ot=Array.isArray(nt)?[[nt[1],nt[2]]]:nt.overloads,Ut=Ot.filter(function(pe){var ve=pe[0];return!Array.isArray(ve)||ve.length===n.length-1}),Gt=null,Wt=0,le=Ut;Wt<le.length;Wt+=1){var Ee=le[Wt],Me=Ee[0],Ke=Ee[1];Gt=new cn(a.registry,a.path,null,a.scope);for(var t=[],d=!1,E=1;E<n.length;E++){var Y=n[E],V=Array.isArray(Me)?Me[E-1]:Me.type,et=Gt.parse(Y,1+t.length,V);if(!et){d=!0;break}t.push(et)}if(!d){if(Array.isArray(Me)&&Me.length!==t.length){Gt.error("Expected "+Me.length+" arguments, but found "+t.length+" instead.");continue}for(var lt=0;lt<t.length;lt++){var at=Array.isArray(Me)?Me[lt]:Me.type,yt=t[lt];Gt.concat(lt+1).checkSubtype(at,yt.type)}if(0===Gt.errors.length)return new Mi(W,pt,Ke,t)}}if(1===Ut.length)(b=a.errors).push.apply(b,Gt.errors);else{for(var Xt=(Ut.length?Ut:Ot).map(function(pe){return function Ai(o){return Array.isArray(o)?"("+o.map(re).join(", ")+")":"("+re(o.type)+"...)"}(pe[0])}).join(" | "),At=[],ne=1;ne<n.length;ne++){var me=a.parse(n[ne],1+At.length);if(!me)return null;At.push(re(me.type))}a.error("Expected arguments of type "+Xt+", but found ("+At.join(", ")+") instead.")}return null},Mi.register=function(n,a){for(var b in Mi.definitions=a,a)n[b]=Mi};var Ii=Mi,yi=function(n,a,b){this.type=Pt,this.locale=b,this.caseSensitive=n,this.diacriticSensitive=a};yi.parse=function(n,a){if(2!==n.length)return a.error("Expected one argument.");var b=n[1];if("object"!=typeof b||Array.isArray(b))return a.error("Collator options argument must be an object.");var W=a.parse(void 0!==b["case-sensitive"]&&b["case-sensitive"],1,y);if(!W)return null;var nt=a.parse(void 0!==b["diacritic-sensitive"]&&b["diacritic-sensitive"],1,y);if(!nt)return null;var pt=null;return b.locale&&!(pt=a.parse(b.locale,1,Et))?null:new yi(W,nt,pt)},yi.prototype.evaluate=function(n){return new Qe(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)},yi.prototype.eachChild=function(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)},yi.prototype.outputDefined=function(){return!1},yi.prototype.serialize=function(){var n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]};var hn=yi,Ui=8192;function Ei(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function fn(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function Mr(o,n){var a=function Fi(o){return(180+o)/360}(o[0]),b=function ji(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}(o[1]),W=Math.pow(2,n.z);return[Math.round(a*W*Ui),Math.round(b*W*Ui)]}function Gi(o,n,a){var b=o[0]-n[0],W=o[1]-n[1],nt=o[0]-a[0],pt=o[1]-a[1];return b*pt-nt*W==0&&b*nt<=0&&W*pt<=0}function Ln(o,n,a){return n[1]>o[1]!=a[1]>o[1]&&o[0]<(a[0]-n[0])*(o[1]-n[1])/(a[1]-n[1])+n[0]}function Hn(o,n){for(var a=!1,b=0,W=n.length;b<W;b++)for(var nt=n[b],pt=0,Ot=nt.length;pt<Ot-1;pt++){if(Gi(o,nt[pt],nt[pt+1]))return!1;Ln(o,nt[pt],nt[pt+1])&&(a=!a)}return a}function An(o,n){for(var a=0;a<n.length;a++)if(Hn(o,n[a]))return!0;return!1}function Ni(o,n,a,b){var Ut=b[0]-a[0],Gt=b[1]-a[1],Wt=(o[0]-a[0])*Gt-Ut*(o[1]-a[1]),le=(n[0]-a[0])*Gt-Ut*(n[1]-a[1]);return Wt>0&&le<0||Wt<0&&le>0}function Ki(o,n,a,b){return 0!==function Cn(o,n){return o[0]*n[1]-o[1]*n[0]}([b[0]-a[0],b[1]-a[1]],[n[0]-o[0],n[1]-o[1]])&&!(!Ni(o,n,a,b)||!Ni(a,b,o,n))}function Fn(o,n,a){for(var b=0,W=a;b<W.length;b+=1)for(var nt=W[b],pt=0;pt<nt.length-1;++pt)if(Ki(o,n,nt[pt],nt[pt+1]))return!0;return!1}function Mn(o,n){for(var a=0;a<o.length;++a)if(!Hn(o[a],n))return!1;for(var b=0;b<o.length-1;++b)if(Fn(o[b],o[b+1],n))return!1;return!0}function Tr(o,n){for(var a=0;a<n.length;a++)if(Mn(o,n[a]))return!0;return!1}function Jn(o,n,a){for(var b=[],W=0;W<o.length;W++){for(var nt=[],pt=0;pt<o[W].length;pt++){var Ot=Mr(o[W][pt],a);Ei(n,Ot),nt.push(Ot)}b.push(nt)}return b}function Ys(o,n,a){for(var b=[],W=0;W<o.length;W++){var nt=Jn(o[W],n,a);b.push(nt)}return b}function Qn(o,n,a,b){if(o[0]<a[0]||o[0]>a[2]){var W=.5*b,nt=o[0]-a[0]>W?-b:a[0]-o[0]>W?b:0;0===nt&&(nt=o[0]-a[2]>W?-b:a[2]-o[0]>W?b:0),o[0]+=nt}Ei(n,o)}function ms(o,n,a,b){var W=Math.pow(2,b.z)*Ui,nt=[b.x*Ui,b.y*Ui],pt=[];if(!o)return pt;for(var Ot=0,Ut=o;Ot<Ut.length;Ot+=1)for(var Wt=0,le=Ut[Ot];Wt<le.length;Wt+=1){var Ee=le[Wt],Me=[Ee.x+nt[0],Ee.y+nt[1]];Qn(Me,n,a,W),pt.push(Me)}return pt}function Hs(o,n,a,b){var W=Math.pow(2,b.z)*Ui,nt=[b.x*Ui,b.y*Ui],pt=[];if(!o)return pt;for(var Ot=0,Ut=o;Ot<Ut.length;Ot+=1){for(var Wt=[],le=0,Ee=Ut[Ot];le<Ee.length;le+=1){var Me=Ee[le],Ke=[Me.x+nt[0],Me.y+nt[1]];Ei(n,Ke),Wt.push(Ke)}pt.push(Wt)}if(n[2]-n[0]<=W/2){!function $n(o){o[0]=o[1]=1/0,o[2]=o[3]=-1/0}(n);for(var t=0,d=pt;t<d.length;t+=1)for(var Y=0,V=d[t];Y<V.length;Y+=1)Qn(V[Y],n,a,W)}return pt}var sn=function(n,a){this.type=y,this.geojson=n,this.geometries=a};sn.parse=function(n,a){if(2!==n.length)return a.error("'within' expression requires exactly one argument, but found "+(n.length-1)+" instead.");if(ot(n[1])){var b=n[1];if("FeatureCollection"===b.type)for(var W=0;W<b.features.length;++W){var nt=b.features[W].geometry.type;if("Polygon"===nt||"MultiPolygon"===nt)return new sn(b,b.features[W].geometry)}else if("Feature"===b.type){var pt=b.geometry.type;if("Polygon"===pt||"MultiPolygon"===pt)return new sn(b,b.geometry)}else if("Polygon"===b.type||"MultiPolygon"===b.type)return new sn(b,b)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")},sn.prototype.evaluate=function(n){if(null!=n.geometry()&&null!=n.canonicalID()){if("Point"===n.geometryType())return function vs(o,n){var a=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],W=o.canonicalID();if(!W)return!1;if("Polygon"===n.type){var nt=Jn(n.coordinates,b,W),pt=ms(o.geometry(),a,b,W);if(!fn(a,b))return!1;for(var Ot=0,Ut=pt;Ot<Ut.length;Ot+=1)if(!Hn(Ut[Ot],nt))return!1}if("MultiPolygon"===n.type){var Wt=Ys(n.coordinates,b,W),le=ms(o.geometry(),a,b,W);if(!fn(a,b))return!1;for(var Ee=0,Me=le;Ee<Me.length;Ee+=1)if(!An(Me[Ee],Wt))return!1}return!0}(n,this.geometries);if("LineString"===n.geometryType())return function Pr(o,n){var a=[1/0,1/0,-1/0,-1/0],b=[1/0,1/0,-1/0,-1/0],W=o.canonicalID();if(!W)return!1;if("Polygon"===n.type){var nt=Jn(n.coordinates,b,W),pt=Hs(o.geometry(),a,b,W);if(!fn(a,b))return!1;for(var Ot=0,Ut=pt;Ot<Ut.length;Ot+=1)if(!Mn(Ut[Ot],nt))return!1}if("MultiPolygon"===n.type){var Wt=Ys(n.coordinates,b,W),le=Hs(o.geometry(),a,b,W);if(!fn(a,b))return!1;for(var Ee=0,Me=le;Ee<Me.length;Ee+=1)if(!Tr(Me[Ee],Wt))return!1}return!0}(n,this.geometries)}return!1},sn.prototype.eachChild=function(){},sn.prototype.outputDefined=function(){return!0},sn.prototype.serialize=function(){return["within",this.geojson]};var ys=sn;function Nn(o){if(o instanceof Ii){if("get"===o.name&&1===o.args.length)return!1;if("feature-state"===o.name)return!1;if("has"===o.name&&1===o.args.length)return!1;if("properties"===o.name||"geometry-type"===o.name||"id"===o.name)return!1;if(/^filter-/.test(o.name))return!1}if(o instanceof ys)return!1;var n=!0;return o.eachChild(function(a){n&&!Nn(a)&&(n=!1)}),n}function qn(o){if(o instanceof Ii&&"feature-state"===o.name)return!1;var n=!0;return o.eachChild(function(a){n&&!qn(a)&&(n=!1)}),n}function ts(o,n){if(o instanceof Ii&&n.indexOf(o.name)>=0)return!1;var a=!0;return o.eachChild(function(b){a&&!ts(b,n)&&(a=!1)}),a}var gn=function(n,a){this.type=a.type,this.name=n,this.boundExpression=a};gn.parse=function(n,a){if(2!==n.length||"string"!=typeof n[1])return a.error("'var' expression requires exactly one string literal argument.");var b=n[1];return a.scope.has(b)?new gn(b,a.scope.get(b)):a.error('Unknown variable "'+b+'". Make sure "'+b+'" has been bound in an enclosing "let" expression before using it.',1)},gn.prototype.evaluate=function(n){return this.boundExpression.evaluate(n)},gn.prototype.eachChild=function(){},gn.prototype.outputDefined=function(){return!1},gn.prototype.serialize=function(){return["var",this.name]};var Js=gn,_n=function(n,a,b,W,nt){void 0===a&&(a=[]),void 0===W&&(W=new ze),void 0===nt&&(nt=[]),this.registry=n,this.path=a,this.key=a.map(function(pt){return"["+pt+"]"}).join(""),this.scope=W,this.errors=nt,this.expectedType=b};_n.prototype.parse=function(n,a,b,W,nt){return void 0===nt&&(nt={}),a?this.concat(a,b,W)._parse(n,nt):this._parse(n,nt)},_n.prototype._parse=function(n,a){function b(Wt,le,Ee){return"assert"===Ee?new ke(le,[Wt]):"coerce"===Ee?new Li(le,[Wt]):Wt}if((null===n||"string"==typeof n||"boolean"==typeof n||"number"==typeof n)&&(n=["literal",n]),Array.isArray(n)){if(0===n.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var W=n[0];if("string"!=typeof W)return this.error("Expression name must be a string, but found "+typeof W+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var nt=this.registry[W];if(nt){var pt=nt.parse(n,this);if(!pt)return null;if(this.expectedType){var Ot=this.expectedType,Ut=pt.type;if("string"!==Ot.kind&&"number"!==Ot.kind&&"boolean"!==Ot.kind&&"object"!==Ot.kind&&"array"!==Ot.kind||"value"!==Ut.kind)if("color"!==Ot.kind&&"formatted"!==Ot.kind&&"resolvedImage"!==Ot.kind||"value"!==Ut.kind&&"string"!==Ut.kind){if(this.checkSubtype(Ot,Ut))return null}else pt=b(pt,Ot,a.typeAnnotation||"coerce");else pt=b(pt,Ot,a.typeAnnotation||"assert")}if(!(pt instanceof Ft)&&"resolvedImage"!==pt.type.kind&&Es(pt)){var Gt=new Oi;try{pt=new Ft(pt.type,pt.evaluate(Gt))}catch(Wt){return this.error(Wt.message),null}}return pt}return this.error('Unknown expression "'+W+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(typeof n>"u"?"'undefined' value invalid. Use null instead.":"object"==typeof n?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof n+" instead.")},_n.prototype.concat=function(n,a,b){var W="number"==typeof n?this.path.concat(n):this.path,nt=b?this.scope.concat(b):this.scope;return new _n(this.registry,W,a||null,nt,this.errors)},_n.prototype.error=function(n){for(var a=[],b=arguments.length-1;b-- >0;)a[b]=arguments[b+1];var W=""+this.key+a.map(function(nt){return"["+nt+"]"}).join("");this.errors.push(new ye(W,n))},_n.prototype.checkSubtype=function(n,a){var b=ge(n,a);return b&&this.error(b),b};var cn=_n;function Es(o){if(o instanceof Js)return Es(o.boundExpression);if(o instanceof Ii&&"error"===o.name)return!1;if(o instanceof hn)return!1;if(o instanceof ys)return!1;var n=o instanceof Li||o instanceof ke,a=!0;return o.eachChild(function(b){a=n?a&&Es(b):a&&b instanceof Ft}),!!a&&Nn(o)&&ts(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Qs(o,n){for(var pt,a=o.length-1,b=0,W=a,nt=0;b<=W;)if((pt=o[nt=Math.floor((b+W)/2)])<=n){if(nt===a||n<o[nt+1])return nt;b=nt+1}else{if(!(pt>n))throw new fe("Input is not a number.");W=nt-1}return 0}var pn=function(n,a,b){this.type=n,this.input=a,this.labels=[],this.outputs=[];for(var W=0,nt=b;W<nt.length;W+=1){var pt=nt[W],Ut=pt[1];this.labels.push(pt[0]),this.outputs.push(Ut)}};pn.parse=function(n,a){if(n.length-1<4)return a.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");var b=a.parse(n[1],1,Zt);if(!b)return null;var W=[],nt=null;a.expectedType&&"value"!==a.expectedType.kind&&(nt=a.expectedType);for(var pt=1;pt<n.length;pt+=2){var Ot=1===pt?-1/0:n[pt],Ut=n[pt+1],Gt=pt,Wt=pt+1;if("number"!=typeof Ot)return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Gt);if(W.length&&W[W.length-1][0]>=Ot)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Gt);var le=a.parse(Ut,Wt,nt);if(!le)return null;nt=nt||le.type,W.push([Ot,le])}return new pn(nt,b,W)},pn.prototype.evaluate=function(n){var a=this.labels,b=this.outputs;if(1===a.length)return b[0].evaluate(n);var W=this.input.evaluate(n);if(W<=a[0])return b[0].evaluate(n);var nt=a.length;return W>=a[nt-1]?b[nt-1].evaluate(n):b[Qs(a,W)].evaluate(n)},pn.prototype.eachChild=function(n){n(this.input);for(var a=0,b=this.outputs;a<b.length;a+=1)n(b[a])},pn.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined()})},pn.prototype.serialize=function(){for(var n=["step",this.input.serialize()],a=0;a<this.labels.length;a++)a>0&&n.push(this.labels[a]),n.push(this.outputs[a].serialize());return n};var xs=pn,$s=un;function un(o,n,a,b){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(b-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=b,this.p2x=a,this.p2y=b}function zi(o,n,a){return o*(1-a)+n*a}un.prototype.sampleCurveX=function(o){return((this.ax*o+this.bx)*o+this.cx)*o},un.prototype.sampleCurveY=function(o){return((this.ay*o+this.by)*o+this.cy)*o},un.prototype.sampleCurveDerivativeX=function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},un.prototype.solveCurveX=function(o,n){var a,b,W,nt,pt;for(typeof n>"u"&&(n=1e-6),W=o,pt=0;pt<8;pt++){if(nt=this.sampleCurveX(W)-o,Math.abs(nt)<n)return W;var Ot=this.sampleCurveDerivativeX(W);if(Math.abs(Ot)<1e-6)break;W-=nt/Ot}if((W=o)<(a=0))return a;if(W>(b=1))return b;for(;a<b;){if(nt=this.sampleCurveX(W),Math.abs(nt-o)<n)return W;o>nt?a=W:b=W,W=.5*(b-a)+a}return W},un.prototype.solve=function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))};var Sr=Object.freeze({__proto__:null,number:zi,color:function qs(o,n,a){return new _e(zi(o.r,n.r,a),zi(o.g,n.g,a),zi(o.b,n.b,a),zi(o.a,n.a,a))},array:function Cs(o,n,a){return o.map(function(b,W){return zi(b,n[W],a)})}}),Ts=4/29,ki=6/29,ir=3*ki*ki,br=Math.PI/180,Rr=180/Math.PI;function es(o){return o>.008856451679035631?Math.pow(o,1/3):o/ir+Ts}function Ss(o){return o>ki?o*o*o:ir*(o-Ts)}function Tn(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function kn(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Vi(o){var n=kn(o.r),a=kn(o.g),b=kn(o.b),W=es((.4124564*n+.3575761*a+.1804375*b)/.95047),nt=es((.2126729*n+.7151522*a+.072175*b)/1);return{l:116*nt-16,a:500*(W-nt),b:200*(nt-es((.0193339*n+.119192*a+.9503041*b)/1.08883)),alpha:o.a}}function nr(o){var n=(o.l+16)/116,a=isNaN(o.a)?n:n+o.a/500,b=isNaN(o.b)?n:n-o.b/200;return n=1*Ss(n),a=.95047*Ss(a),b=1.08883*Ss(b),new _e(Tn(3.2404542*a-1.5371385*n-.4985314*b),Tn(-.969266*a+1.8760108*n+.041556*b),Tn(.0556434*a-.2040259*n+1.0572252*b),o.alpha)}function qt(o,n,a){var b=n-o;return o+a*(b>180||b<-180?b-360*Math.round(b/360):b)}var Ct={forward:Vi,reverse:nr,interpolate:function Ir(o,n,a){return{l:zi(o.l,n.l,a),a:zi(o.a,n.a,a),b:zi(o.b,n.b,a),alpha:zi(o.alpha,n.alpha,a)}}},Rt_forward=function bs(o){var n=Vi(o),a=n.l,b=n.a,W=n.b,nt=Math.atan2(W,b)*Rr;return{h:nt<0?nt+360:nt,c:Math.sqrt(b*b+W*W),l:a,alpha:o.a}},Rt_reverse=function Or(o){var n=o.h*br,a=o.c;return nr({l:o.l,a:Math.cos(n)*a,b:Math.sin(n)*a,alpha:o.alpha})},Rt_interpolate=function mt(o,n,a){return{h:qt(o.h,n.h,a),c:zi(o.c,n.c,a),l:zi(o.l,n.l,a),alpha:zi(o.alpha,n.alpha,a)}},jt=function(n,a,b,W,nt){this.type=n,this.operator=a,this.interpolation=b,this.input=W,this.labels=[],this.outputs=[];for(var pt=0,Ot=nt;pt<Ot.length;pt+=1){var Ut=Ot[pt],Wt=Ut[1];this.labels.push(Ut[0]),this.outputs.push(Wt)}};function ce(o,n,a,b){var W=b-a,nt=o-a;return 0===W?0:1===n?nt/W:(Math.pow(n,nt)-1)/(Math.pow(n,W)-1)}jt.interpolationFactor=function(n,a,b,W){var nt=0;if("exponential"===n.name)nt=ce(a,n.base,b,W);else if("linear"===n.name)nt=ce(a,1,b,W);else if("cubic-bezier"===n.name){var pt=n.controlPoints;nt=new $s(pt[0],pt[1],pt[2],pt[3]).solve(ce(a,1,b,W))}return nt},jt.parse=function(n,a){var b=n[0],W=n[1],nt=n[2],pt=n.slice(3);if(!Array.isArray(W)||0===W.length)return a.error("Expected an interpolation type expression.",1);if("linear"===W[0])W={name:"linear"};else if("exponential"===W[0]){var Ot=W[1];if("number"!=typeof Ot)return a.error("Exponential interpolation requires a numeric base.",1,1);W={name:"exponential",base:Ot}}else{if("cubic-bezier"!==W[0])return a.error("Unknown interpolation type "+String(W[0]),1,0);var Ut=W.slice(1);if(4!==Ut.length||Ut.some(function(E){return"number"!=typeof E||E<0||E>1}))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);W={name:"cubic-bezier",controlPoints:Ut}}if(n.length-1<4)return a.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if((n.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(!(nt=a.parse(nt,2,Zt)))return null;var Gt=[],Wt=null;"interpolate-hcl"===b||"interpolate-lab"===b?Wt=z:a.expectedType&&"value"!==a.expectedType.kind&&(Wt=a.expectedType);for(var le=0;le<pt.length;le+=2){var Ee=pt[le],Me=pt[le+1],Ke=le+3,t=le+4;if("number"!=typeof Ee)return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ke);if(Gt.length&&Gt[Gt.length-1][0]>=Ee)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ke);var d=a.parse(Me,t,Wt);if(!d)return null;Wt=Wt||d.type,Gt.push([Ee,d])}return"number"===Wt.kind||"color"===Wt.kind||"array"===Wt.kind&&"number"===Wt.itemType.kind&&"number"==typeof Wt.N?new jt(Wt,b,W,nt,Gt):a.error("Type "+re(Wt)+" is not interpolatable.")},jt.prototype.evaluate=function(n){var a=this.labels,b=this.outputs;if(1===a.length)return b[0].evaluate(n);var W=this.input.evaluate(n);if(W<=a[0])return b[0].evaluate(n);var nt=a.length;if(W>=a[nt-1])return b[nt-1].evaluate(n);var pt=Qs(a,W),Gt=jt.interpolationFactor(this.interpolation,W,a[pt],a[pt+1]),Wt=b[pt].evaluate(n),le=b[pt+1].evaluate(n);return"interpolate"===this.operator?Sr[this.type.kind.toLowerCase()](Wt,le,Gt):"interpolate-hcl"===this.operator?Rt_reverse(Rt_interpolate(Rt_forward(Wt),Rt_forward(le),Gt)):Ct.reverse(Ct.interpolate(Ct.forward(Wt),Ct.forward(le),Gt))},jt.prototype.eachChild=function(n){n(this.input);for(var a=0,b=this.outputs;a<b.length;a+=1)n(b[a])},jt.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined()})},jt.prototype.serialize=function(){var n;n="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var a=[this.operator,n,this.input.serialize()],b=0;b<this.labels.length;b++)a.push(this.labels[b],this.outputs[b].serialize());return a};var de=jt,Re=function(n,a){this.type=n,this.args=a};Re.parse=function(n,a){if(n.length<2)return a.error("Expectected at least one argument.");var b=null,W=a.expectedType;W&&"value"!==W.kind&&(b=W);for(var nt=[],pt=0,Ot=n.slice(1);pt<Ot.length;pt+=1){var Gt=a.parse(Ot[pt],1+nt.length,b,void 0,{typeAnnotation:"omit"});if(!Gt)return null;b=b||Gt.type,nt.push(Gt)}var Wt=W&&nt.some(function(le){return ge(W,le.type)});return new Re(Wt?it:b,nt)},Re.prototype.evaluate=function(n){for(var W,a=null,b=0,nt=0,pt=this.args;nt<pt.length;nt+=1){if(b++,(a=pt[nt].evaluate(n))&&a instanceof ui&&!a.available&&(W||(W=a),a=null,b===this.args.length))return W;if(null!==a)break}return a},Re.prototype.eachChild=function(n){this.args.forEach(n)},Re.prototype.outputDefined=function(){return this.args.every(function(n){return n.outputDefined()})},Re.prototype.serialize=function(){var n=["coalesce"];return this.eachChild(function(a){n.push(a.serialize())}),n};var De=Re,Be=function(n,a){this.type=a.type,this.bindings=[].concat(n),this.result=a};Be.prototype.evaluate=function(n){return this.result.evaluate(n)},Be.prototype.eachChild=function(n){for(var a=0,b=this.bindings;a<b.length;a+=1)n(b[a][1]);n(this.result)},Be.parse=function(n,a){if(n.length<4)return a.error("Expected at least 3 arguments, but found "+(n.length-1)+" instead.");for(var b=[],W=1;W<n.length-1;W+=2){var nt=n[W];if("string"!=typeof nt)return a.error("Expected string, but found "+typeof nt+" instead.",W);if(/[^a-zA-Z0-9_]/.test(nt))return a.error("Variable names must contain only alphanumeric characters or '_'.",W);var pt=a.parse(n[W+1],W+1);if(!pt)return null;b.push([nt,pt])}var Ot=a.parse(n[n.length-1],n.length-1,a.expectedType,b);return Ot?new Be(b,Ot):null},Be.prototype.outputDefined=function(){return this.result.outputDefined()},Be.prototype.serialize=function(){for(var n=["let"],a=0,b=this.bindings;a<b.length;a+=1){var W=b[a];n.push(W[0],W[1].serialize())}return n.push(this.result.serialize()),n};var ei=Be,li=function(n,a,b){this.type=n,this.index=a,this.input=b};li.parse=function(n,a){if(3!==n.length)return a.error("Expected 2 arguments, but found "+(n.length-1)+" instead.");var b=a.parse(n[1],1,Zt),W=a.parse(n[2],2,ee(a.expectedType||it));return b&&W?new li(W.type.itemType,b,W):null},li.prototype.evaluate=function(n){var a=this.index.evaluate(n),b=this.input.evaluate(n);if(a<0)throw new fe("Array index out of bounds: "+a+" < 0.");if(a>=b.length)throw new fe("Array index out of bounds: "+a+" > "+(b.length-1)+".");if(a!==Math.floor(a))throw new fe("Array index must be an integer, but found "+a+" instead.");return b[a]},li.prototype.eachChild=function(n){n(this.index),n(this.input)},li.prototype.outputDefined=function(){return!1},li.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var fi=li,gi=function(n,a){this.type=y,this.needle=n,this.haystack=a};gi.parse=function(n,a){if(3!==n.length)return a.error("Expected 2 arguments, but found "+(n.length-1)+" instead.");var b=a.parse(n[1],1,it),W=a.parse(n[2],2,it);return b&&W?oe(b.type,[y,Et,Zt,He,it])?new gi(b,W):a.error("Expected first argument to be of type boolean, string, number or null, but found "+re(b.type)+" instead"):null},gi.prototype.evaluate=function(n){var a=this.needle.evaluate(n),b=this.haystack.evaluate(n);if(null==b)return!1;if(!Xe(a,["boolean","string","number","null"]))throw new fe("Expected first argument to be of type boolean, string, number or null, but found "+re(rt(a))+" instead.");if(!Xe(b,["string","array"]))throw new fe("Expected second argument to be of type array or string, but found "+re(rt(b))+" instead.");return b.indexOf(a)>=0},gi.prototype.eachChild=function(n){n(this.needle),n(this.haystack)},gi.prototype.outputDefined=function(){return!0},gi.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ci=gi,wi=function(n,a,b){this.type=Zt,this.needle=n,this.haystack=a,this.fromIndex=b};wi.parse=function(n,a){if(n.length<=2||n.length>=5)return a.error("Expected 3 or 4 arguments, but found "+(n.length-1)+" instead.");var b=a.parse(n[1],1,it),W=a.parse(n[2],2,it);if(!b||!W)return null;if(!oe(b.type,[y,Et,Zt,He,it]))return a.error("Expected first argument to be of type boolean, string, number or null, but found "+re(b.type)+" instead");if(4===n.length){var nt=a.parse(n[3],3,Zt);return nt?new wi(b,W,nt):null}return new wi(b,W)},wi.prototype.evaluate=function(n){var a=this.needle.evaluate(n),b=this.haystack.evaluate(n);if(!Xe(a,["boolean","string","number","null"]))throw new fe("Expected first argument to be of type boolean, string, number or null, but found "+re(rt(a))+" instead.");if(!Xe(b,["string","array"]))throw new fe("Expected second argument to be of type array or string, but found "+re(rt(b))+" instead.");if(this.fromIndex){var W=this.fromIndex.evaluate(n);return b.indexOf(a,W)}return b.indexOf(a)},wi.prototype.eachChild=function(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)},wi.prototype.outputDefined=function(){return!1},wi.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Ti=wi,xi=function(n,a,b,W,nt,pt){this.inputType=n,this.type=a,this.input=b,this.cases=W,this.outputs=nt,this.otherwise=pt};xi.parse=function(n,a){if(n.length<5)return a.error("Expected at least 4 arguments, but found only "+(n.length-1)+".");if(n.length%2!=1)return a.error("Expected an even number of arguments.");var b,W;a.expectedType&&"value"!==a.expectedType.kind&&(W=a.expectedType);for(var nt={},pt=[],Ot=2;Ot<n.length-1;Ot+=2){var Ut=n[Ot],Gt=n[Ot+1];Array.isArray(Ut)||(Ut=[Ut]);var Wt=a.concat(Ot);if(0===Ut.length)return Wt.error("Expected at least one branch label.");for(var le=0,Ee=Ut;le<Ee.length;le+=1){var Me=Ee[le];if("number"!=typeof Me&&"string"!=typeof Me)return Wt.error("Branch labels must be numbers or strings.");if("number"==typeof Me&&Math.abs(Me)>Number.MAX_SAFE_INTEGER)return Wt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof Me&&Math.floor(Me)!==Me)return Wt.error("Numeric branch labels must be integer values.");if(b){if(Wt.checkSubtype(b,rt(Me)))return null}else b=rt(Me);if(typeof nt[String(Me)]<"u")return Wt.error("Branch labels must be unique.");nt[String(Me)]=pt.length}var Ke=a.parse(Gt,Ot,W);if(!Ke)return null;W=W||Ke.type,pt.push(Ke)}var t=a.parse(n[1],1,it);if(!t)return null;var d=a.parse(n[n.length-1],n.length-1,W);return!d||"value"!==t.type.kind&&a.concat(1).checkSubtype(b,t.type)?null:new xi(b,W,t,nt,pt,d)},xi.prototype.evaluate=function(n){var a=this.input.evaluate(n);return(rt(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(n)},xi.prototype.eachChild=function(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)},xi.prototype.outputDefined=function(){return this.outputs.every(function(n){return n.outputDefined()})&&this.otherwise.outputDefined()},xi.prototype.serialize=function(){for(var n=this,a=["match",this.input.serialize()],W=[],nt={},pt=0,Ot=Object.keys(this.cases).sort();pt<Ot.length;pt+=1){var Ut=Ot[pt];void 0===(Gt=nt[this.cases[Ut]])?(nt[this.cases[Ut]]=W.length,W.push([this.cases[Ut],[Ut]])):W[Gt][1].push(Ut)}for(var Wt=function(t){return"number"===n.inputType.kind?Number(t):t},le=0,Ee=W;le<Ee.length;le+=1){var Me=Ee[le],Gt=Me[0],Ke=Me[1];a.push(1===Ke.length?Wt(Ke[0]):Ke.map(Wt)),a.push(this.outputs[outputIndex$1].serialize())}return a.push(this.otherwise.serialize()),a};var Zi=xi,bi=function(n,a,b){this.type=n,this.branches=a,this.otherwise=b};bi.parse=function(n,a){if(n.length<4)return a.error("Expected at least 3 arguments, but found only "+(n.length-1)+".");if(n.length%2!=0)return a.error("Expected an odd number of arguments.");var b;a.expectedType&&"value"!==a.expectedType.kind&&(b=a.expectedType);for(var W=[],nt=1;nt<n.length-1;nt+=2){var pt=a.parse(n[nt],nt,y);if(!pt)return null;var Ot=a.parse(n[nt+1],nt+1,b);if(!Ot)return null;W.push([pt,Ot]),b=b||Ot.type}var Ut=a.parse(n[n.length-1],n.length-1,b);return Ut?new bi(b,W,Ut):null},bi.prototype.evaluate=function(n){for(var a=0,b=this.branches;a<b.length;a+=1){var W=b[a],pt=W[1];if(W[0].evaluate(n))return pt.evaluate(n)}return this.otherwise.evaluate(n)},bi.prototype.eachChild=function(n){for(var a=0,b=this.branches;a<b.length;a+=1){var W=b[a],pt=W[1];n(W[0]),n(pt)}n(this.otherwise)},bi.prototype.outputDefined=function(){return this.branches.every(function(n){return n[1].outputDefined()})&&this.otherwise.outputDefined()},bi.prototype.serialize=function(){var n=["case"];return this.eachChild(function(a){n.push(a.serialize())}),n};var Bi=bi,Xi=function(n,a,b,W){this.type=n,this.input=a,this.beginIndex=b,this.endIndex=W};Xi.parse=function(n,a){if(n.length<=2||n.length>=5)return a.error("Expected 3 or 4 arguments, but found "+(n.length-1)+" instead.");var b=a.parse(n[1],1,it),W=a.parse(n[2],2,Zt);if(!b||!W)return null;if(!oe(b.type,[ee(it),Et,it]))return a.error("Expected first argument to be of type array or string, but found "+re(b.type)+" instead");if(4===n.length){var nt=a.parse(n[3],3,Zt);return nt?new Xi(b.type,b,W,nt):null}return new Xi(b.type,b,W)},Xi.prototype.evaluate=function(n){var a=this.input.evaluate(n),b=this.beginIndex.evaluate(n);if(!Xe(a,["string","array"]))throw new fe("Expected first argument to be of type array or string, but found "+re(rt(a))+" instead.");if(this.endIndex){var W=this.endIndex.evaluate(n);return a.slice(b,W)}return a.slice(b)},Xi.prototype.eachChild=function(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)},Xi.prototype.outputDefined=function(){return!1},Xi.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var rn=Xi;function Yi(o,n){return"=="===o||"!="===o?"boolean"===n.kind||"string"===n.kind||"number"===n.kind||"null"===n.kind||"value"===n.kind:"string"===n.kind||"number"===n.kind||"value"===n.kind}function or(o,n,a,b){return 0===b.compare(n,a)}function ss(o,n,a){var b="=="!==o&&"!="!==o;return function(){function W(nt,pt,Ot){this.type=y,this.lhs=nt,this.rhs=pt,this.collator=Ot,this.hasUntypedArgument="value"===nt.type.kind||"value"===pt.type.kind}return W.parse=function(pt,Ot){if(3!==pt.length&&4!==pt.length)return Ot.error("Expected two or three arguments.");var Ut=pt[0],Gt=Ot.parse(pt[1],1,it);if(!Gt)return null;if(!Yi(Ut,Gt.type))return Ot.concat(1).error('"'+Ut+"\" comparisons are not supported for type '"+re(Gt.type)+"'.");var Wt=Ot.parse(pt[2],2,it);if(!Wt)return null;if(!Yi(Ut,Wt.type))return Ot.concat(2).error('"'+Ut+"\" comparisons are not supported for type '"+re(Wt.type)+"'.");if(Gt.type.kind!==Wt.type.kind&&"value"!==Gt.type.kind&&"value"!==Wt.type.kind)return Ot.error("Cannot compare types '"+re(Gt.type)+"' and '"+re(Wt.type)+"'.");b&&("value"===Gt.type.kind&&"value"!==Wt.type.kind?Gt=new ke(Wt.type,[Gt]):"value"!==Gt.type.kind&&"value"===Wt.type.kind&&(Wt=new ke(Gt.type,[Wt])));var le=null;if(4===pt.length){if("string"!==Gt.type.kind&&"string"!==Wt.type.kind&&"value"!==Gt.type.kind&&"value"!==Wt.type.kind)return Ot.error("Cannot use collator to compare non-string types.");if(!(le=Ot.parse(pt[3],3,Pt)))return null}return new W(Gt,Wt,le)},W.prototype.evaluate=function(pt){var Ot=this.lhs.evaluate(pt),Ut=this.rhs.evaluate(pt);if(b&&this.hasUntypedArgument){var Gt=rt(Ot),Wt=rt(Ut);if(Gt.kind!==Wt.kind||"string"!==Gt.kind&&"number"!==Gt.kind)throw new fe('Expected arguments for "'+o+'" to be (string, string) or (number, number), but found ('+Gt.kind+", "+Wt.kind+") instead.")}if(this.collator&&!b&&this.hasUntypedArgument){var le=rt(Ot),Ee=rt(Ut);if("string"!==le.kind||"string"!==Ee.kind)return n(pt,Ot,Ut)}return this.collator?a(pt,Ot,Ut,this.collator.evaluate(pt)):n(pt,Ot,Ut)},W.prototype.eachChild=function(pt){pt(this.lhs),pt(this.rhs),this.collator&&pt(this.collator)},W.prototype.outputDefined=function(){return!0},W.prototype.serialize=function(){var pt=[o];return this.eachChild(function(Ot){pt.push(Ot.serialize())}),pt},W}()}var Wo=ss("==",function sr(o,n,a){return n===a},or),Ko=ss("!=",function Zn(o,n,a){return n!==a},function Uo(o,n,a,b){return!or(0,n,a,b)}),Vo=ss("<",function Bn(o,n,a){return n<a},function jo(o,n,a,b){return b.compare(n,a)<0}),no=ss(">",function Rs(o,n,a){return n>a},function Go(o,n,a,b){return b.compare(n,a)>0}),so=ss("<=",function rr(o,n,a){return n<=a},function zo(o,n,a,b){return b.compare(n,a)<=0}),ro=ss(">=",function is(o,n,a){return n>=a},function ns(o,n,a,b){return b.compare(n,a)>=0}),Pn=function(n,a,b,W,nt,pt){this.type=Et,this.number=n,this.locale=a,this.currency=b,this.unit=W,this.minFractionDigits=nt,this.maxFractionDigits=pt};Pn.parse=function(n,a){if(3!==n.length)return a.error("Expected two arguments.");var b=a.parse(n[1],1,Zt);if(!b)return null;var W=n[2];if("object"!=typeof W||Array.isArray(W))return a.error("NumberFormat options argument must be an object.");var nt=null;if(W.locale&&!(nt=a.parse(W.locale,1,Et)))return null;var pt=null;if(W.currency&&!(pt=a.parse(W.currency,1,Et)))return null;var Ot=null;if(W.unit&&!(Ot=a.parse(W.unit,1,Et)))return null;var Ut=null;if(W["min-fraction-digits"]&&!(Ut=a.parse(W["min-fraction-digits"],1,Zt)))return null;var Gt=null;return W["max-fraction-digits"]&&!(Gt=a.parse(W["max-fraction-digits"],1,Zt))?null:new Pn(b,nt,pt,Ot,Ut,Gt)},Pn.prototype.evaluate=function(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))},Pn.prototype.eachChild=function(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)},Pn.prototype.outputDefined=function(){return!1},Pn.prototype.serialize=function(){var n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]};var oo=Pn,mn=function(n){this.type=Zt,this.input=n};mn.parse=function(n,a){if(2!==n.length)return a.error("Expected 1 argument, but found "+(n.length-1)+" instead.");var b=a.parse(n[1],1);return b?"array"!==b.type.kind&&"string"!==b.type.kind&&"value"!==b.type.kind?a.error("Expected argument of type string or array, but found "+re(b.type)+" instead."):new mn(b):null},mn.prototype.evaluate=function(n){var a=this.input.evaluate(n);if("string"==typeof a)return a.length;if(Array.isArray(a))return a.length;throw new fe("Expected value to be of type string or array, but found "+re(rt(a))+" instead.")},mn.prototype.eachChild=function(n){n(this.input)},mn.prototype.outputDefined=function(){return!1},mn.prototype.serialize=function(){var n=["length"];return this.eachChild(function(a){n.push(a.serialize())}),n};var ao={"==":Wo,"!=":Ko,">":no,"<":Vo,">=":ro,"<=":so,array:ke,at:fi,boolean:ke,case:Bi,coalesce:De,collator:hn,format:qe,image:pi,in:Ci,"index-of":Ti,interpolate:de,"interpolate-hcl":de,"interpolate-lab":de,length:mn,let:ei,literal:Ft,match:Zi,number:ke,"number-format":oo,object:ke,slice:rn,step:xs,string:ke,"to-boolean":Li,"to-color":Li,"to-number":Li,"to-string":Li,var:Js,within:ys};function lo(o,n){var a=n[0],b=n[1],W=n[2],nt=n[3];a=a.evaluate(o),b=b.evaluate(o),W=W.evaluate(o);var pt=nt?nt.evaluate(o):1,Ot=di(a,b,W,pt);if(Ot)throw new fe(Ot);return new _e(a/255*pt,b/255*pt,W/255*pt,pt)}function ho(o,n){return o in n}function wr(o,n){var a=n[o];return typeof a>"u"?null:a}function Pi(o){return{type:o}}Ii.register(ao,{error:[{kind:"error"},[Et],function(o,n){throw new fe(n[0].evaluate(o))}],typeof:[Et,[it],function(o,n){return re(rt(n[0].evaluate(o)))}],"to-rgba":[ee(Zt,4),[z],function(o,n){return n[0].evaluate(o).toArray()}],rgb:[z,[Zt,Zt,Zt],lo],rgba:[z,[Zt,Zt,Zt,Zt],lo],has:{type:y,overloads:[[[Et],function(o,n){return ho(n[0].evaluate(o),o.properties())}],[[Et,st],function(o,n){var b=n[1];return ho(n[0].evaluate(o),b.evaluate(o))}]]},get:{type:it,overloads:[[[Et],function(o,n){return wr(n[0].evaluate(o),o.properties())}],[[Et,st],function(o,n){var b=n[1];return wr(n[0].evaluate(o),b.evaluate(o))}]]},"feature-state":[it,[Et],function(o,n){return wr(n[0].evaluate(o),o.featureState||{})}],properties:[st,[],function(o){return o.properties()}],"geometry-type":[Et,[],function(o){return o.geometryType()}],id:[it,[],function(o){return o.id()}],zoom:[Zt,[],function(o){return o.globals.zoom}],pitch:[Zt,[],function(o){return o.globals.pitch||0}],"distance-from-center":[Zt,[],function(o){return o.distanceFromCenter()}],"heatmap-density":[Zt,[],function(o){return o.globals.heatmapDensity||0}],"line-progress":[Zt,[],function(o){return o.globals.lineProgress||0}],"sky-radial-progress":[Zt,[],function(o){return o.globals.skyRadialProgress||0}],accumulated:[it,[],function(o){return void 0===o.globals.accumulated?null:o.globals.accumulated}],"+":[Zt,Pi(Zt),function(o,n){for(var a=0,b=0,W=n;b<W.length;b+=1)a+=W[b].evaluate(o);return a}],"*":[Zt,Pi(Zt),function(o,n){for(var a=1,b=0,W=n;b<W.length;b+=1)a*=W[b].evaluate(o);return a}],"-":{type:Zt,overloads:[[[Zt,Zt],function(o,n){var b=n[1];return n[0].evaluate(o)-b.evaluate(o)}],[[Zt],function(o,n){return-n[0].evaluate(o)}]]},"/":[Zt,[Zt,Zt],function(o,n){var b=n[1];return n[0].evaluate(o)/b.evaluate(o)}],"%":[Zt,[Zt,Zt],function(o,n){var b=n[1];return n[0].evaluate(o)%b.evaluate(o)}],ln2:[Zt,[],function(){return Math.LN2}],pi:[Zt,[],function(){return Math.PI}],e:[Zt,[],function(){return Math.E}],"^":[Zt,[Zt,Zt],function(o,n){var b=n[1];return Math.pow(n[0].evaluate(o),b.evaluate(o))}],sqrt:[Zt,[Zt],function(o,n){return Math.sqrt(n[0].evaluate(o))}],log10:[Zt,[Zt],function(o,n){return Math.log(n[0].evaluate(o))/Math.LN10}],ln:[Zt,[Zt],function(o,n){return Math.log(n[0].evaluate(o))}],log2:[Zt,[Zt],function(o,n){return Math.log(n[0].evaluate(o))/Math.LN2}],sin:[Zt,[Zt],function(o,n){return Math.sin(n[0].evaluate(o))}],cos:[Zt,[Zt],function(o,n){return Math.cos(n[0].evaluate(o))}],tan:[Zt,[Zt],function(o,n){return Math.tan(n[0].evaluate(o))}],asin:[Zt,[Zt],function(o,n){return Math.asin(n[0].evaluate(o))}],acos:[Zt,[Zt],function(o,n){return Math.acos(n[0].evaluate(o))}],atan:[Zt,[Zt],function(o,n){return Math.atan(n[0].evaluate(o))}],min:[Zt,Pi(Zt),function(o,n){return Math.min.apply(Math,n.map(function(a){return a.evaluate(o)}))}],max:[Zt,Pi(Zt),function(o,n){return Math.max.apply(Math,n.map(function(a){return a.evaluate(o)}))}],abs:[Zt,[Zt],function(o,n){return Math.abs(n[0].evaluate(o))}],round:[Zt,[Zt],function(o,n){var b=n[0].evaluate(o);return b<0?-Math.round(-b):Math.round(b)}],floor:[Zt,[Zt],function(o,n){return Math.floor(n[0].evaluate(o))}],ceil:[Zt,[Zt],function(o,n){return Math.ceil(n[0].evaluate(o))}],"filter-==":[y,[Et,it],function(o,n){var a=n[0],b=n[1];return o.properties()[a.value]===b.value}],"filter-id-==":[y,[it],function(o,n){var a=n[0];return o.id()===a.value}],"filter-type-==":[y,[Et],function(o,n){var a=n[0];return o.geometryType()===a.value}],"filter-<":[y,[Et,it],function(o,n){var a=n[0],b=n[1],W=o.properties()[a.value],nt=b.value;return typeof W==typeof nt&&W<nt}],"filter-id-<":[y,[it],function(o,n){var a=n[0],b=o.id(),W=a.value;return typeof b==typeof W&&b<W}],"filter->":[y,[Et,it],function(o,n){var a=n[0],b=n[1],W=o.properties()[a.value],nt=b.value;return typeof W==typeof nt&&W>nt}],"filter-id->":[y,[it],function(o,n){var a=n[0],b=o.id(),W=a.value;return typeof b==typeof W&&b>W}],"filter-<=":[y,[Et,it],function(o,n){var a=n[0],b=n[1],W=o.properties()[a.value],nt=b.value;return typeof W==typeof nt&&W<=nt}],"filter-id-<=":[y,[it],function(o,n){var a=n[0],b=o.id(),W=a.value;return typeof b==typeof W&&b<=W}],"filter->=":[y,[Et,it],function(o,n){var a=n[0],b=n[1],W=o.properties()[a.value],nt=b.value;return typeof W==typeof nt&&W>=nt}],"filter-id->=":[y,[it],function(o,n){var a=n[0],b=o.id(),W=a.value;return typeof b==typeof W&&b>=W}],"filter-has":[y,[it],function(o,n){return n[0].value in o.properties()}],"filter-has-id":[y,[],function(o){return null!==o.id()&&void 0!==o.id()}],"filter-type-in":[y,[ee(Et)],function(o,n){return n[0].value.indexOf(o.geometryType())>=0}],"filter-id-in":[y,[ee(it)],function(o,n){return n[0].value.indexOf(o.id())>=0}],"filter-in-small":[y,[Et,ee(it)],function(o,n){var a=n[0];return n[1].value.indexOf(o.properties()[a.value])>=0}],"filter-in-large":[y,[Et,ee(it)],function(o,n){var a=n[0],b=n[1];return function Yo(o,n,a,b){for(;a<=b;){var W=a+b>>1;if(n[W]===o)return!0;n[W]>o?b=W-1:a=W+1}return!1}(o.properties()[a.value],b.value,0,b.value.length-1)}],all:{type:y,overloads:[[[y,y],function(o,n){var b=n[1];return n[0].evaluate(o)&&b.evaluate(o)}],[Pi(y),function(o,n){for(var a=0,b=n;a<b.length;a+=1)if(!b[a].evaluate(o))return!1;return!0}]]},any:{type:y,overloads:[[[y,y],function(o,n){var b=n[1];return n[0].evaluate(o)||b.evaluate(o)}],[Pi(y),function(o,n){for(var a=0,b=n;a<b.length;a+=1)if(b[a].evaluate(o))return!0;return!1}]]},"!":[y,[y],function(o,n){return!n[0].evaluate(o)}],"is-supported-script":[y,[Et],function(o,n){var b=o.globals&&o.globals.isSupportedScript;return!b||b(n[0].evaluate(o))}],upcase:[Et,[Et],function(o,n){return n[0].evaluate(o).toUpperCase()}],downcase:[Et,[Et],function(o,n){return n[0].evaluate(o).toLowerCase()}],concat:[Et,Pi(it),function(o,n){return n.map(function(a){return St(a.evaluate(o))}).join("")}],"resolved-locale":[Et,[Pt],function(o,n){return n[0].evaluate(o).resolvedLocale()}]});var rs=ao;function Un(o){return{result:"success",value:o}}function dn(o){return{result:"error",value:o}}function as(o){return"object"==typeof o&&null!==o&&!Array.isArray(o)}var Dr=function(n,a){this.expression=n,this._warningHistory={},this._evaluator=new Oi,this._defaultValue=a?function Qo(o){return"color"===o.type&&(as(o.default)||Array.isArray(o.default))?new _e(0,0,0,0):"color"===o.type?_e.parse(o.default)||null:void 0===o.default?null:o.default}(a):null,this._enumValues=a&&"enum"===a.type?a.values:null};function Lr(o,n){var a=new cn(rs,[],n?function Jo(o){var n={color:z,string:Et,number:Zt,enum:Et,boolean:y,formatted:kt,resolvedImage:zt};return"array"===o.type?ee(n[o.value]||it,o.length):n[o.type]}(n):void 0),b=a.parse(o,void 0,void 0,void 0,n&&"string"===n.type?{typeAnnotation:"coerce"}:void 0);return b?Un(new Dr(b,n)):dn(a.errors)}Dr.prototype.evaluateWithoutErrorHandling=function(n,a,b,W,nt,pt,Ot,Ut){return this._evaluator.globals=n,this._evaluator.feature=a,this._evaluator.featureState=b,this._evaluator.canonical=W||null,this._evaluator.availableImages=nt||null,this._evaluator.formattedSection=pt,this._evaluator.featureTileCoord=Ot||null,this._evaluator.featureDistanceData=Ut||null,this.expression.evaluate(this._evaluator)},Dr.prototype.evaluate=function(n,a,b,W,nt,pt,Ot,Ut){this._evaluator.globals=n,this._evaluator.feature=a||null,this._evaluator.featureState=b||null,this._evaluator.canonical=W||null,this._evaluator.availableImages=nt||null,this._evaluator.formattedSection=pt||null,this._evaluator.featureTileCoord=Ot||null,this._evaluator.featureDistanceData=Ut||null;try{var Gt=this.expression.evaluate(this._evaluator);if(null==Gt||"number"==typeof Gt&&Gt!=Gt)return this._defaultValue;if(this._enumValues&&!(Gt in this._enumValues))throw new fe("Expected value to be one of "+Object.keys(this._enumValues).map(function(Wt){return JSON.stringify(Wt)}).join(", ")+", but found "+JSON.stringify(Gt)+" instead.");return Gt}catch(Wt){return this._warningHistory[Wt.message]||(this._warningHistory[Wt.message]=!0,typeof console<"u"&&console.warn(Wt.message)),this._defaultValue}};var ar=function(n,a){this.kind=n,this._styleExpression=a,this.isStateDependent="constant"!==n&&!qn(a.expression)};ar.prototype.evaluateWithoutErrorHandling=function(n,a,b,W,nt,pt){return this._styleExpression.evaluateWithoutErrorHandling(n,a,b,W,nt,pt)},ar.prototype.evaluate=function(n,a,b,W,nt,pt){return this._styleExpression.evaluate(n,a,b,W,nt,pt)};var Os=function(n,a,b,W){this.kind=n,this.zoomStops=b,this._styleExpression=a,this.isStateDependent="camera"!==n&&!qn(a.expression),this.interpolationType=W};function Sn(o,n){if("error"===(o=Lr(o,n)).result)return o;var a=o.value.expression,b=Nn(a);if(!b&&!function Is(o){return"data-driven"===o["property-type"]}(n))return dn([new ye("","data expressions not supported")]);var W=ts(a,["zoom","pitch","distance-from-center"]);if(!W&&!function os(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}(n))return dn([new ye("","zoom expressions not supported")]);var nt=ws(a);return nt||W?nt instanceof ye?dn([nt]):nt instanceof de&&!function jn(o){return!!o.expression&&o.expression.interpolated}(n)?dn([new ye("",'"interpolate" expressions cannot be used with this property')]):Un(nt?new Os(b?"camera":"composite",o.value,nt.labels,nt instanceof de?nt.interpolation:void 0):new ar(b?"constant":"source",o.value)):dn([new ye("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function ws(o){var n=null;if(o instanceof ei)n=ws(o.result);else if(o instanceof De)for(var a=0,b=o.args;a<b.length&&!(n=ws(b[a]));a+=1);else(o instanceof xs||o instanceof de)&&o.input instanceof Ii&&"zoom"===o.input.name&&(n=o);return n instanceof ye||o.eachChild(function(nt){var pt=ws(nt);pt instanceof ye?n=pt:!n&&pt?n=new ye("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&pt&&n!==pt&&(n=new ye("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Ar(o){if(Array.isArray(o))return o.map(Ar);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){var n={};for(var a in o)n[a]=Ar(o[a]);return n}return function $o(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}(o)}Os.prototype.evaluateWithoutErrorHandling=function(n,a,b,W,nt,pt){return this._styleExpression.evaluateWithoutErrorHandling(n,a,b,W,nt,pt)},Os.prototype.evaluate=function(n,a,b,W,nt,pt){return this._styleExpression.evaluate(n,a,b,W,nt,pt)},Os.prototype.interpolationFactor=function(n,a,b){return this.interpolationType?de.interpolationFactor(this.interpolationType,n,a,b):0};var co={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function uo(o){if(!0===o||!1===o)return!0;if(!Array.isArray(o)||0===o.length)return!1;switch(o[0]){case"has":return o.length>=2&&"$id"!==o[1]&&"$type"!==o[1];case"in":return o.length>=3&&("string"!=typeof o[1]||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==o.length||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(var n=0,a=o.slice(1);n<a.length;n+=1){var b=a[n];if(!uo(b)&&"boolean"!=typeof b)return!1}return!0;default:return!0}}function qo(o,n){if(void 0===n&&(n="fill"),null==o)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};uo(o)||(o=Ji(o));var a=o,b=!0;try{b=function ta(o){if(!ls(o))return o;var n=Ar(o);return go(n),fo(n)}(a)}catch{console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(a,null,2)+"\n        ")}var pt,W=co["filter_"+n],nt=Lr(b,W);if("error"===nt.result)throw new Error(nt.value.map(function(le){return le.key+": "+le.message}).join(", "));pt=function(le,Ee,Me){return nt.value.evaluate(le,Ee,{},Me)};var Ot=null,Ut=null;if(b!==a){var Gt=Lr(a,W);if("error"===Gt.result)throw new Error(Gt.value.map(function(le){return le.key+": "+le.message}).join(", "));Ot=function(le,Ee,Me,Ke,t){return Gt.value.evaluate(le,Ee,{},Me,void 0,void 0,Ke,t)},Ut=!Nn(Gt.value.expression)}return{filter:pt,dynamicFilter:Ot||void 0,needGeometry:Fr(b),needFeature:!!Ut}}function fo(o){if(!Array.isArray(o))return o;var n=function _o(o){if(hs.has(o[0]))for(var n=1;n<o.length;n++)if(ls(o[n]))return!0;return o}(o);return!0===n?n:n.map(function(a){return fo(a)})}function go(o){var n=!1,a=[];if("case"===o[0]){for(var b=1;b<o.length-1;b+=2)n=n||ls(o[b]),a.push(o[b+1]);a.push(o[o.length-1])}else if("match"===o[0]){n=n||ls(o[1]);for(var W=2;W<o.length-1;W+=2)a.push(o[W+1]);a.push(o[o.length-1])}else if("step"===o[0]){n=n||ls(o[1]);for(var nt=1;nt<o.length-1;nt+=2)a.push(o[nt+1])}n&&(o.length=0,o.push.apply(o,["any"].concat(a)));for(var pt=1;pt<o.length;pt++)go(o[pt])}function ls(o){if(!Array.isArray(o))return!1;if(function ea(o){return"pitch"===o||"distance-from-center"===o}(o[0]))return!0;for(var n=1;n<o.length;n++)if(ls(o[n]))return!0;return!1}var hs=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function po(o,n){return o<n?-1:o>n?1:0}function Fr(o){if(!Array.isArray(o))return!1;if("within"===o[0])return!0;for(var n=1;n<o.length;n++)if(Fr(o[n]))return!0;return!1}function Ji(o){if(!o)return!0;var n=o[0];return o.length<=1?"any"!==n:"=="===n?Gn(o[1],o[2],"=="):"!="===n?Ds(Gn(o[1],o[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Gn(o[1],o[2],n):"any"===n?function lr(o){return["any"].concat(o.map(Ji))}(o.slice(1)):"all"===n?["all"].concat(o.slice(1).map(Ji)):"none"===n?["all"].concat(o.slice(1).map(Ji).map(Ds)):"in"===n?Nr(o[1],o.slice(2)):"!in"===n?Ds(Nr(o[1],o.slice(2))):"has"===n?hr(o[1]):"!has"===n?Ds(hr(o[1])):"within"!==n||o}function Gn(o,n,a){switch(o){case"$type":return["filter-type-"+a,n];case"$id":return["filter-id-"+a,n];default:return["filter-"+a,o,n]}}function Nr(o,n){if(0===n.length)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(function(a){return typeof a!=typeof n[0]})?["filter-in-large",o,["literal",n.sort(po)]]:["filter-in-small",o,["literal",n]]}}function hr(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Ds(o){return["!",o]}var mo=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function vo(o,n){var a={};for(var b in o)"ref"!==b&&(a[b]=o[b]);return mo.forEach(function(W){W in n&&(a[W]=n[W])}),a}var kr={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},cr=/(italic|oblique)$/i,Eo={},Zr=function(o,n,a){var b=Eo[o];if(!b){Array.isArray(o)||(o=[o]);for(var W=400,nt="normal",pt=[],Gt=0,Wt=o.length;Gt<Wt;++Gt){var Ee=o[Gt].split(" "),Me=Ee[Ee.length-1].toLowerCase();for(var Ke in"normal"==Me||"italic"==Me||"oblique"==Me?(nt=Me,Ee.pop(),Me=Ee[Ee.length-1].toLowerCase()):cr.test(Me)&&(Me=Me.replace(cr,""),nt=Ee[Ee.length-1].replace(Me,"")),kr){var t=Ee.length>1?Ee[Ee.length-2].toLowerCase():"";if(Me==Ke||Me==Ke.replace("-","")||t+"-"+Me==Ke){W=kr[Ke],Ee.pop(),t&&Ke.startsWith(t)&&Ee.pop();break}}"number"==typeof Me&&(W=Me);var d=Ee.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==d.indexOf(" ")&&(d='"'+d+'"'),pt.push(d)}b=Eo[o]=[nt,W,pt]}return b[0]+" "+b[1]+" "+n+"px"+(a?"/"+a:"")+" "+b[2]},Ls="https://api.mapbox.com";function vn(o){var n="mapbox://";return 0!==o.indexOf(n)?"":o.slice(n.length)}function bn(o,n){var a=vn(o);if(!a)return decodeURI(new URL(o,location.href).href);var b="styles/";if(0!==a.indexOf(b))throw new Error("unexpected style url: "+o);var W=a.slice(b.length);return Ls+"/styles/v1/"+W+"?&access_token="+n}function us(o,n,a,b){var W=new URL(o,b),nt=vn(o);return nt?"mapbox.satellite"===nt?"https://api.mapbox.com/v4/"+nt+"/{z}/{x}/{y}"+(window.devicePixelRatio>=1.5?"@2x":"")+".webp?access_token="+n:"https://{a-d}.tiles.mapbox.com/v4/"+nt+"/{z}/{x}/{y}.vector.pbf?access_token="+n:(n&&W.searchParams.set(a,n),decodeURI(W.href))}var Ur=0,ur={},dr={};function As(o){return o*Math.PI/180}var tn=function(){for(var o=[],n=78271.51696402048;o.length<=24;n/=2)o.push(n);return o}();function fr(o,n){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(o,n);var a=document.createElement("canvas");return a.width=o,a.height=n,a}function Fs(o,n){for(var a=0,b=n.length;a<b;++a)if(n[a]<o&&a+1<b){var nt=n[a]/n[a+1];return a+Math.log(n[a]/o)/Math.log(nt)}return b-1}var zn={};function Ns(o,n,a,b){if(void 0===a&&(a={}),n in zn)return b&&(b.request=zn[n][0]),zn[n][1];var W=a.transformRequest&&a.transformRequest(n,o)||new Request(n);W.headers.get("Accept")||W.headers.set("Accept","application/json"),b&&(b.request=W);var nt=fetch(W).then(function(pt){return delete zn[n],pt.ok?pt.json():Promise.reject(new Error("Error fetching source "+n))}).catch(function(pt){return delete zn[n],Promise.reject(new Error("Error fetching source "+n))});return zn[n]=[W,nt],nt}function ks(o,n){if("string"!=typeof o)return Promise.resolve(o);if(!o.trim().startsWith("{"))return Ns("Style",o=bn(o,n.accessToken),n);try{var a=JSON.parse(o);return Promise.resolve(a)}catch(b){return Promise.reject(b)}}function gr(o,n){if(n.transformRequest){var a=n.transformRequest(o,"Tiles");if(a instanceof Request)return decodeURI(a.url)}return o}var fs={};function _r(o,n,a,b){var W=document.createElement("canvas"),nt=[2*a*n.pixelRatio+n.width,2*a*n.pixelRatio+n.height];W.width=nt[0],W.height=nt[1];var pt=W.getContext("2d");pt.drawImage(o,n.x,n.y,n.width,n.height,a*n.pixelRatio,a*n.pixelRatio,n.width,n.height);var Ot=pt.getImageData(0,0,nt[0],nt[1]);pt.globalCompositeOperation="destination-over",pt.fillStyle="rgba("+255*b.r+","+255*b.g+","+255*b.b+","+b.a+")";for(var Ut=Ot.data,Gt=0,Wt=Ot.width;Gt<Wt;++Gt)for(var le=0,Ee=Ot.height;le<Ee;++le)Ut[4*(le*Wt+Gt)+3]>0&&pt.arc(Gt,le,a*n.pixelRatio,0,2*Math.PI);return pt.fill(),W}var Zs,xo=Array(256).join("\u200a");function Wn(o,n){if(n>=.05){for(var a="",b=o.split("\n"),W=xo.slice(0,Math.round(n/.1)),nt=0,pt=b.length;nt<pt;++nt)nt>0&&(a+="\n"),a+=b[nt].split("").join(W);return a}return o}function Kn(){return Zs||(Zs=fr(1,1).getContext("2d")),Zs}function yn(o,n){return Kn().measureText(o).width+(o.length-1)*n}var pr={};function Bs(o,n,a,b){if(-1!==o.indexOf("\n")){for(var W=o.split("\n"),nt=[],pt=0,Ot=W.length;pt<Ot;++pt)nt.push(Bs(W[pt],n,a,b));return nt.join("\n")}var Ut=a+","+n+","+o+","+b,Gt=pr[Ut];if(!Gt){var Wt=o.split(" ");if(Wt.length>1){var le=Kn();le.font=n;for(var Me=le.measureText("M").width*a,Ke="",t=[],d=0,E=Wt.length;d<E;++d){var Y=Wt[d],V=Ke+(Ke?" ":"")+Y;yn(V,b)<=Me?Ke=V:(Ke&&t.push(Ke),Ke=Y)}Ke&&t.push(Ke);for(var et=0,lt=t.length;et<lt&&lt>1;++et){var at=t[et];if(yn(at,b)<.35*Me){var yt=et>0?yn(t[et-1],b):1/0,It=et<lt-1?yn(t[et+1],b):1/0;t.splice(et,1),lt-=1,yt<It?(t[et-1]+=" "+at,et-=1):t[et]=at+" "+t[et]}}for(var Xt=0,At=t.length-1;Xt<At;++Xt){var ne=t[Xt],me=t[Xt+1];if(yn(ne,b)>.7*Me&&yn(me,b)<.6*Me){var pe=ne.split(" "),ve=pe.pop();yn(ve,b)<.2*Me&&(t[Xt]=pe.join(" "),t[Xt+1]=ve+" "+me),At-=1}}Gt=t.join("\n")}else Gt=o;Gt=Wn(Gt,b),pr[Ut]=Gt}return Gt}var En,ia=/font-family: ?([^;]*);/,na=/("|')/g;function Co(o){if(!En){En={};for(var n=document.styleSheets,a=0,b=n.length;a<b;++a){var W=n[a];try{var nt=W.rules||W.cssRules;if(nt)for(var pt=0,Ot=nt.length;pt<Ot;++pt){var Ut=nt[pt];if(5==Ut.type){var Gt=Ut.cssText.match(ia);En[Gt[1].replace(na,"")]=!0}}}catch{}}}return o in En}var Us={};function Gr(o){var n=o.toString();if(n in Us)return Us[n];for(var a=[],b=0,W=o.length;b<W;++b){o[b]=o[b].replace("Arial Unicode MS","Arial");var pt=Zr(o[b],1);(0,S.Qx)(pt);var Ot=pt.split(" ");a.push([Ot.slice(3).join(" ").replace(/"/g,""),Ot[1],Ot[0]])}for(var Ut=0,Gt=a.length;Ut<Gt;++Ut){var Wt=a[Ut],le=Wt[0];if(!Co(le)&&100!==S.sG.get(Wt[2]+"\n"+Wt[1]+" \n"+le)){var Ee="https://fonts.googleapis.com/css?family="+le.replace(/ /g,"+")+":"+Wt[1]+Wt[2];if(!document.querySelector('link[href="'+Ee+'"]')){var Me=document.createElement("link");Me.href=Ee,Me.rel="stylesheet",document.head.appendChild(Me)}}}return Us[n]=o,o}var js,vr,Mo={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},zr={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},mr={},In={zoom:0};function Ge(o,n,a,b,W,nt,pt){var Ot=o.id;nt||(nt={},console.warn("No functionCache provided to getValue()")),nt[Ot]||(nt[Ot]={});var Ut=nt[Ot];if(!Ut[a]){var Gt=(o[n]||mr)[a],Wt=co[n+"_"+o.type][a];void 0===Gt&&(Gt=Wt.default);var le=function Ho(o){return Array.isArray(o)&&o.length>0&&"string"==typeof o[0]&&o[0]in rs}(Gt);if(!le&&as(Gt)&&(Gt=function xe(o,n){var a=o.stops;if(!a)return function Ze(o,n){var a=["get",o.property];if(void 0===o.default)return"string"===n.type?["string",a]:a;if("enum"===n.type)return["match",a,Object.keys(n.values),a,o.default];var b=["color"===n.type?"to-color":n.type,a,Ce(o.default)];return"array"===n.type&&b.splice(1,0,n.value,n.length||null),b}(o,n);var b=a&&"object"==typeof a[0][0],W=b||void 0!==o.property,nt=b||!W;return a=a.map(function(pt){return!W&&n.tokens&&"string"==typeof pt[1]?[pt[0],Yt(pt[1])]:[pt[0],Ce(pt[1])]}),b?function Nt(o,n,a){for(var b={},W={},nt=[],pt=0;pt<a.length;pt++){var Ot=a[pt],Ut=Ot[0].zoom;void 0===b[Ut]&&(b[Ut]={zoom:Ut,type:o.type,property:o.property,default:o.default},W[Ut]=[],nt.push(Ut)),W[Ut].push([Ot[0].value,Ot[1]])}if("exponential"===Kt({},n)){for(var Wt=[xt(o),["linear"],["zoom"]],le=0,Ee=nt;le<Ee.length;le+=1){var Me=Ee[le];Dt(Wt,Me,Te(b[Me],n,W[Me]),!1)}return Wt}for(var t=["step",["zoom"]],d=0,E=nt;d<E.length;d+=1){var Y=E[d];Dt(t,Y,Te(b[Y],n,W[Y]),!0)}return Mt(t),t}(o,n,a):nt?function he(o,n,a,b){void 0===b&&(b=["zoom"]);var nt,W=Kt(o,n),pt=!1;if("interval"===W)nt=["step",b],pt=!0;else{if("exponential"!==W)throw new Error('Unknown zoom function type "'+W+'"');var Ot=void 0!==o.base?o.base:1;nt=[xt(o),1===Ot?["linear"]:["exponential",Ot],b]}for(var Ut=0,Gt=a;Ut<Gt.length;Ut+=1){var Wt=Gt[Ut];Dt(nt,Wt[0],Wt[1],pt)}return Mt(nt),nt}(o,n,a):Te(o,n,a)}(Gt,Wt),le=!0),le){var Ee=function(o,n){var a=Sn(o,n);if("error"===a.result)throw new Error(a.value.map(function(b){return b.key+": "+b.message}).join(", "));return a.value}(Gt,Wt);Ut[a]=Ee.evaluate.bind(Ee)}else"color"==Wt.type&&(Gt=_e.parse(Gt)),Ut[a]=function(){return Gt}}return In.zoom=b,Ut[a](In,W,pt)}function yr(o,n,a,b){return Ge(o,"layout","icon-allow-overlap",n,a,b)?Ge(o,"layout","icon-ignore-placement",n,a,b)?"none":"obstacle":"declutter"}function Kr(o,n,a,b,W){return W||console.warn("No filterCache provided to evaluateFilter()"),o in W||(W[o]=qo(n).filter),In.zoom=b,W[o](In,a)}function On(o,n){if(o){if(0===o.a||0===n)return;var a=o.a;return n=void 0===n?1:n,0===a?"transparent":"rgba("+Math.round(255*o.r/a)+","+Math.round(255*o.g/a)+","+Math.round(255*o.b/a)+","+a*n+")"}return o}var So=/\{[^{}}]*\}/g;function Gs(o,n){return o.replace(So,function(a){return n[a.slice(1,-1)]||""})}function bo(o,n,a,b,W,nt,pt,Ot){if(void 0===b&&(b=tn),void 0===W&&(W=void 0),void 0===nt&&(nt=void 0),void 0===pt&&(pt=void 0),void 0===Ot&&(Ot=void 0),"string"==typeof n&&(n=JSON.parse(n)),8!=n.version)throw new Error("glStyle version 8 required.");var Ut,Gt;if(nt)if(typeof Image<"u"){var Wt=new Image;Wt.crossOrigin="anonymous",Wt.onload=function(){Ut=Wt,Gt=[Wt.width,Wt.height],o.changed(),Wt.onload=null},Wt.src=nt}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){var le=self;le.postMessage({action:"loadImage",src:nt}),le.addEventListener("message",function(Ye){"imageLoaded"===Ye.data.action&&Ye.data.src===nt&&(Gt=[(Ut=Ye.data.image).width,Ut.height])})}for(var V,Ee=function yo(o){o=o.slice();for(var n=Object.create(null),a=0;a<o.length;a++)n[o[a].id]=o[a];for(var b=0;b<o.length;b++)"ref"in o[b]&&(o[b]=vo(o[b],n[o[b].ref]));return o}(n.layers),Me={},Ke=[],t={},d={},E=function ds(o){o.id||(o.id=Ur++);var n={};return ur[o.id]=n,n}(n),Y=function Rn(o){o.id||(o.id=Ur++);var n={};return dr[o.id]=n,n}(n),et=0,lt=Ee.length;et<lt;++et){var at=Ee[et],yt=at.id;if("string"==typeof a&&at.source==a||-1!==a.indexOf(yt)){var It=at["source-layer"];if(V){if(at.source!==V)throw new Error('Layer "'+yt+'" does not use source "'+V)}else{var Xt=n.sources[V=at.source];if(!Xt)throw new Error('Source "'+V+'" is not defined');var At=Xt.type;if("vector"!==At&&"geojson"!==At)throw new Error('Source "'+V+'" is not of type "vector" or "geojson", but "'+At+'"')}var ne=Me[It];ne||(Me[It]=ne=[]),ne.push({layer:at,index:et}),Ke.push(yt)}}var me=new j.Z,pe=new g.Z,ve=[],Ie=function(Ae,Ye){var ti=Ae.getProperties(),ii=Me[ti.layer];if(ii){var be=b.indexOf(Ye);-1==be&&(be=Fs(Ye,b));for(var ni=Mo[Ae.getGeometry().getType()],Ne={properties:ti,type:ni},Fe=o.get("mapbox-featurestate")[Ae.getId()],ci=-1,qi=0,Vn=ii.length;qi<Vn;++qi){var ra=ii[qi],Ue=ra.layer,wo=Ue.layout||mr,Er=Ue.paint||mr;if(!("none"===wo.visibility||"minzoom"in Ue&&be<Ue.minzoom||"maxzoom"in Ue&&be>=Ue.maxzoom)){var Va=Ue.filter;if(!Va||Kr(Ue.id,Va,Ne,be,Y)){Ue;var Dn=void 0,gs=void 0,oa=void 0,Xn=void 0,_s=void 0,je=void 0,Qr=ra.index;if(3==ni&&("fill"==Ue.type||"fill-extrusion"==Ue.type))if(gs=Ge(Ue,"paint",Ue.type+"-opacity",be,Ne,E,Fe),Ue.type+"-pattern"in Er){var aa=Ge(Ue,"paint",Ue.type+"-pattern",be,Ne,E,Fe);if(aa){var va="string"==typeof aa?Gs(aa,ti):aa.toString();if(Ut&&W&&W[va]){++ci,(!(je=ve[ci])||!je.getFill()||je.getStroke()||je.getText())&&(je=new N.ZP({fill:new g.Z}),ve[ci]=je),oa=je.getFill(),je.setZIndex(Qr);var Xa=va+"."+gs,la=d[Xa];if(!la){var Ws=W[va],Ya=fr(Ws.width,Ws.height),ya=Ya.getContext("2d");ya.globalAlpha=gs,ya.drawImage(Ut,Ws.x,Ws.y,Ws.width,Ws.height,0,0,Ws.width,Ws.height),la=ya.createPattern(Ya,"repeat"),d[Xa]=la}oa.setColor(la)}}}else Dn=On(Ge(Ue,"paint",Ue.type+"-color",be,Ne,E,Fe),gs),Ue.type+"-outline-color"in Er&&(_s=On(Ge(Ue,"paint",Ue.type+"-outline-color",be,Ne,E,Fe),gs)),_s||(_s=Dn),(Dn||_s)&&(++ci,(!(je=ve[ci])||Dn&&!je.getFill()||!Dn&&je.getFill()||_s&&!je.getStroke()||!_s&&je.getStroke()||je.getText())&&(je=new N.ZP({fill:Dn?new g.Z:void 0,stroke:_s?new j.Z:void 0}),ve[ci]=je),Dn&&(oa=je.getFill()).setColor(Dn),_s&&((Xn=je.getStroke()).setColor(_s),Xn.setWidth(.5)),je.setZIndex(Qr));if(1!=ni&&"line"==Ue.type){Dn=!("line-pattern"in Er)&&"line-color"in Er?On(Ge(Ue,"paint","line-color",be,Ne,E,Fe),Ge(Ue,"paint","line-opacity",be,Ne,E,Fe)):void 0;var Ea=Ge(Ue,"paint","line-width",be,Ne,E,Fe);Dn&&Ea>0&&(++ci,(!(je=ve[ci])||!je.getStroke()||je.getFill()||je.getText())&&(je=new N.ZP({stroke:new j.Z}),ve[ci]=je),(Xn=je.getStroke()).setLineCap(Ge(Ue,"layout","line-cap",be,Ne,E,Fe)),Xn.setLineJoin(Ge(Ue,"layout","line-join",be,Ne,E,Fe)),Xn.setMiterLimit(Ge(Ue,"layout","line-miter-limit",be,Ne,E,Fe)),Xn.setColor(Dn),Xn.setWidth(Ea),Xn.setLineDash(Er["line-dasharray"]?Ge(Ue,"paint","line-dasharray",be,Ne,E,Fe).map(function(ln){return ln*Ea}):null),je.setZIndex(Qr))}var ha=!1,Si=null,Ha=0,Do=void 0,nn=void 0,xa=void 0;if((1==ni||2==ni)&&"icon-image"in wo){var ca=Ge(Ue,"layout","icon-image",be,Ne,E,Fe);if(ca){Do="string"==typeof ca?Gs(ca,ti):ca.toString();var Ca=void 0,xr=Ot?Ot(o,Do):void 0;if(Ut&&W&&W[Do]||xr){var Ma=Ge(Ue,"layout","icon-rotation-alignment",be,Ne,E,Fe);if(2==ni){var Ks=Ae.getGeometry();if(Ks.getFlatMidpoint||Ks.getFlatMidpoints){var ua=Ks.getExtent();if(Math.sqrt(Math.max(Math.pow((ua[2]-ua[0])/Ye,2),Math.pow((ua[3]-ua[1])/Ye,2)))>150){var $r="MultiLineString"===Ks.getType()?Ks.getFlatMidpoints():Ks.getFlatMidpoint();if(vr||(vr=new H.ZP("Point",js=[NaN,NaN],[],{},null)),Ca=vr,js[0]=$r[0],js[1]=$r[1],"line"===Ge(Ue,"layout","symbol-placement",be,Ne,E,Fe)&&"map"===Ma)for(var da=Ks.getStride(),Lo=Ks.getFlatCoordinates(),qr=0,_l=Lo.length-da;qr<_l;qr+=da){var Ta=Lo[qr],Pa=Lo[qr+1],Sa=Lo[qr+da],ba=Lo[qr+da+1],pl=Math.min(Ta,Sa),ml=Math.min(Pa,ba),vl=Math.max(Ta,Sa),yl=Math.max(Pa,ba);if($r[0]>=pl&&$r[0]<=vl&&$r[1]>=ml&&$r[1]<=yl){Ha=Math.atan2(Pa-ba,Sa-Ta);break}}}}}if(2!==ni||Ca){var Ja=Ge(Ue,"layout","icon-size",be,Ne,E,Fe),ps=void 0!==Er["icon-color"]?Ge(Ue,"paint","icon-color",be,Ne,E,Fe):null;if(!ps||0!==ps.a){var Qa=Ge(Ue,"paint","icon-halo-color",be,Ne,E,Fe),Ra=Ge(Ue,"paint","icon-halo-width",be,Ne,E,Fe),Ia=Do+"."+Ja+"."+Ra+"."+Qa;if(null!==ps&&(Ia+="."+ps),!(nn=t[Ia])){var $a=yr(Ue,be,Ne,E),fa=void 0;"icon-offset"in wo&&((fa=Ge(Ue,"layout","icon-offset",be,Ne,E,Fe))[1]*=-1);var qa=ps?[255*ps.r,255*ps.g,255*ps.b,ps.a]:void 0;if(xr){var ga={color:qa,rotateWithView:"map"===Ma,displacement:fa,declutterMode:$a};"string"==typeof xr?ga.src=xr:(ga.img=xr,ga.imgSize=[xr.width,xr.height]),nn=new Q.Z(ga)}else{var to=W[Do],Ao=void 0,Oa=void 0,tl=void 0,el=void 0;Ra?Oa=[(Ao=_r(Ut,to,Ra,Qa)).width,Ao.height]:(Ao=Ut,Oa=Gt,tl=[to.width,to.height],el=[to.x,to.y]),nn=new Q.Z({color:qa,img:Ao,imgSize:Oa,size:tl,offset:el,rotateWithView:"map"===Ma,scale:Ja/to.pixelRatio,displacement:fa,declutterMode:$a})}t[Ia]=nn}}nn&&(++ci,(!(je=ve[ci])||!je.getImage()||je.getFill()||je.getStroke())&&(je=new N.ZP,ve[ci]=je),je.setGeometry(Ca),nn.setRotation(Ha+As(Ge(Ue,"layout","icon-rotate",be,Ne,E,Fe))),nn.setOpacity(Ge(Ue,"paint","icon-opacity",be,Ne,E,Fe)),nn.setAnchor(zr[Ge(Ue,"layout","icon-anchor",be,Ne,E,Fe)]),je.setImage(nn),Si=je.getText(),je.setText(void 0),je.setZIndex(Qr),ha=!0,xa=!1)}else xa=!0}}}if(1==ni&&"circle"===Ue.type){++ci,(!(je=ve[ci])||!je.getImage()||je.getFill()||je.getStroke())&&(je=new N.ZP,ve[ci]=je);var il="circle-radius"in Er?Ge(Ue,"paint","circle-radius",be,Ne,E,Fe):5,wa=On(Ge(Ue,"paint","circle-stroke-color",be,Ne,E,Fe),Ge(Ue,"paint","circle-stroke-opacity",be,Ne,E,Fe)),Da=On(Ge(Ue,"paint","circle-color",be,Ne,E,Fe),Ge(Ue,"paint","circle-opacity",be,Ne,E,Fe)),La=Ge(Ue,"paint","circle-stroke-width",be,Ne,E,Fe),nl=il+"."+wa+"."+Da+"."+La;(nn=t[nl])||(nn=new _.Z({radius:il,stroke:wa&&La>0?new j.Z({width:La,color:wa}):void 0,fill:Da?new g.Z({color:Da}):void 0,declutterMode:"none"}),t[nl]=nn),je.setImage(nn),Si=je.getText(),je.setText(void 0),je.setGeometry(void 0),je.setZIndex(Qr),ha=!0}var Hi=void 0,Fo=void 0,No=void 0,Vs=void 0,ko=void 0,Aa=void 0;if("text-field"in wo){Vs=Math.round(Ge(Ue,"layout","text-size",be,Ne,E,Fe));var Fa=Ge(Ue,"layout","text-font",be,Ne,E,Fe);No=Ge(Ue,"layout","text-line-height",be,Ne,E,Fe),(Fo=Zr(pt?pt(Fa):Fa,Vs,No)).includes("sans-serif")||(Fo+=",sans-serif"),ko=Ge(Ue,"layout","text-letter-spacing",be,Ne,E,Fe),Aa=Ge(Ue,"layout","text-max-width",be,Ne,E,Fe);var eo=Ge(Ue,"layout","text-field",be,Ne,E,Fe);Hi="object"==typeof eo&&eo.sections?1===eo.sections.length?eo.toString():eo.sections.reduce(function(ln,Xs,Ml){var ul=Xs.fontStack?Xs.fontStack.split(","):Fa,ja=Zr(pt?pt(ul):ul,Vs*(Xs.scale||1),No),io=Xs.text;if("\n"===io)return ln.push("\n",""),ln;if(2!=ni){for(var pa=0,Cl=(io=Bs(io,ja,Aa,ko).split("\n")).length;pa<Cl;++pa)pa>0&&ln.push("\n",""),ln.push(io[pa],ja);return ln}ln.push(Wn(io,ko),ja)},[]):Gs(eo,ti).trim(),gs=Ge(Ue,"paint","text-opacity",be,Ne,E,Fe)}if(Hi&&gs&&!xa){ha||(++ci,(!(je=ve[ci])||!je.getText()||je.getFill()||je.getStroke())&&(je=new N.ZP,ve[ci]=je),je.setImage(void 0),je.setGeometry(void 0)),je.getText()||je.setText(Si||new w.Z({padding:[2,2,2,2]})),Si=je.getText();var sl=wo["text-transform"];"uppercase"==sl?Hi=Array.isArray(Hi)?Hi.map(function(ln,Xs){return Xs%2?ln:ln.toUpperCase()}):Hi.toUpperCase():"lowercase"==sl&&(Hi=Array.isArray(Hi)?Hi.map(function(ln,Xs){return Xs%2?ln:ln.toLowerCase()}):Hi.toLowerCase());var rl=Array.isArray(Hi)?Hi:2==ni?Wn(Hi,ko):Bs(Hi,Fo,Aa,ko);Si.setText(rl),Si.setFont(Fo),Si.setRotation(As(Ge(Ue,"layout","text-rotate",be,Ne,E,Fe)));var _a=Ge(Ue,"layout","text-anchor",be,Ne,E,Fe),Na=ha||1==ni?"point":Ge(Ue,"layout","symbol-placement",be,Ne,E,Fe);if(Si.setPlacement(Na),"function"==typeof Si.setRepeat){var El=Ge(Ue,"layout","symbol-spacing",be,Ne,E,Fe);Si.setRepeat(2*El)}Si.setOverflow("point"===Na);var Cr=Ge(Ue,"paint","text-halo-width",be,Ne,E,Fe),ol=Ge(Ue,"layout","text-offset",be,Ne,E,Fe),al=Ge(Ue,"paint","text-translate",be,Ne,E,Fe),ka=0,Za=0;if("point"==Na){var Ba="center";-1!==_a.indexOf("left")?(Ba="left",Za=Cr):-1!==_a.indexOf("right")&&(Ba="right",Za=-Cr),Si.setTextAlign(Ba);var xl=Ge(Ue,"layout","text-rotation-alignment",be,Ne,E,Fe);Si.setRotateWithView("map"==xl)}else Si.setMaxAngle(As(Ge(Ue,"layout","text-max-angle",be,Ne,E,Fe))*Hi.length/rl.length),Si.setTextAlign(),Si.setRotateWithView(!1);var Ua="middle";0==_a.indexOf("bottom")?(Ua="bottom",ka=-Cr-.5*(No-1)*Vs):0==_a.indexOf("top")&&(Ua="top",ka=Cr+.5*(No-1)*Vs),Si.setTextBaseline(Ua);var ll=Ge(Ue,"layout","text-justify",be,Ne,E,Fe);Si.setJustify("auto"===ll?void 0:ll),Si.setOffsetX(ol[0]*Vs+Za+al[0]),Si.setOffsetY(ol[1]*Vs+ka+al[1]),pe.setColor(On(Ge(Ue,"paint","text-color",be,Ne,E,Fe),gs)),Si.setFill(pe);var hl=On(Ge(Ue,"paint","text-halo-color",be,Ne,E,Fe),gs);if(hl){me.setColor(hl);var cl=.5*Vs;me.setWidth((Cr*=2)<=cl?Cr:cl),Si.setStroke(me)}else Si.setStroke(void 0);var Zo=Ge(Ue,"layout","text-padding",be,Ne,E,Fe),Bo=Si.getPadding();Zo!==Bo[0]&&(Bo[0]=Zo,Bo[1]=Zo,Bo[2]=Zo,Bo[3]=Zo),je.setZIndex(Qr)}}}}if(ci>-1)return ve.length=ci+1,ve}};return o.setStyle(Ie),o.set("mapbox-source",V),o.set("mapbox-layers",Ke),o.set("mapbox-featurestate",{}),Ie}function sa(o,n){return void 0===n&&(n=512),o.getExtent()?(0,x.dl)({extent:o.getExtent(),tileSize:n,maxZoom:22}).getResolutions():tn}function Io(o,n,a,b,W){void 0===a&&(a=""),void 0===b&&(b={}),void 0===W&&(W=void 0);var nt,pt,Ot,Ut,Gt=!0;return"string"==typeof a||Array.isArray(a)?Ut=a:(Ut=(Ot=a).source||Ot.layers,b=Ot),"string"==typeof b?(nt=b,Ot={}):(nt=b.styleUrl,Ot=b),!1===Ot.updateSource&&(Gt=!1),W||(W=Ot.resolutions),!nt&&"string"==typeof n&&!n.trim().startsWith("{")&&(nt=n),nt&&(nt=nt.startsWith("data:")?location.href:bn(nt,Ot.accessToken),Ot=function Yr(o,n){return n.accessToken||(n=Object.assign({},n),new URL(o).searchParams.forEach(function(b,W){n.accessToken=b,n.accessTokenParam=W})),n}(nt,Ot)),new Promise(function(Wt,le){ks(n,Ot).then(function(Ee){if(8!=Ee.version)return le(new Error("glStyle version 8 required."));if(!(o instanceof M.Z||o instanceof K.Z))return le(new Error("Can only apply to VectorLayer or VectorTileLayer"));var d,E,Y,Me=o instanceof K.Z?"vector":"geojson";if(Ut?pt=Array.isArray(Ut)?Ee.layers.find(function(yt){return yt.id===Ut[0]}).source:Ut:(pt=Object.keys(Ee.sources).find(function(yt){return Ee.sources[yt].type===Me}),Ut=pt),!pt)return le(new Error("No "+Me+" source found in the glStyle."));function Ke(){if(!Gt)return Promise.resolve();if(o instanceof K.Z)return function wt(o,n,a){return new Promise(function(b,W){(function jr(o,n,a){void 0===a&&(a={});var b=[n,JSON.stringify(o)].toString(),W=fs[b];if(!W||a.transformRequest){var nt=o.url;if(nt&&!o.tiles){var pt=us(nt,a.accessToken,a.accessTokenParam||"access_token",n||location.href);if(nt.startsWith("mapbox://"))W=Promise.resolve(Object.assign({},o,{url:void 0,tiles:(0,v.Gk)(pt)}));else{var Ot={};W=Ns("Source",pt,a,Ot).then(function(Ut){return Ut.tiles=Ut.tiles.map(function(Gt){return gr(us(Gt,a.accessToken,a.accessTokenParam||"access_token",Ot.request.url),a)}),Promise.resolve(Ut)})}}else o=Object.assign({},o,{tiles:o.tiles.map(function(Ut){return gr(us(Ut,a.accessToken,a.accessTokenParam||"access_token",n||location.href),a)})}),W=Promise.resolve(Object.assign({},o));fs[b]=W}return W})(o,n,a).then(function(nt){var pt=function I(o,n,a){var b=new p({tileJSON:n,tileSize:o.tileSize||n.tileSize||512}),W=b.getTileJSON(),nt=b.getTileGrid(),pt=(0,T.U2)(a.projection||"EPSG:3857"),Ot=function F(o,n){var a=o.bounds;if(a){var b=(0,T.mi)([a[0],a[1]],n),W=(0,T.mi)([a[2],a[3]],n);return[b[0],b[1],W[0],W[1]]}return(0,T.U2)(n).getExtent()}(W,pt),Ut=pt.getExtent(),Gt=W.minzoom||0,Wt=W.maxzoom||22,le={attributions:b.getAttributions(),projection:pt,tileGrid:new l.Z({origin:Ut?(0,e.rL)(Ut):nt.getOrigin(0),extent:Ot||nt.getExtent(),minZoom:Gt,resolutions:sa(pt,n.tileSize).slice(0,Wt+1),tileSize:nt.getTileSize(0)})};return Array.isArray(W.tiles)?le.urls=W.tiles:le.url=W.tiles,le}(o,nt,a);pt.format=new s.Z,Array.isArray(nt.tiles)?pt.urls=nt.tiles:pt.url=nt.tiles,b(new G.Z(pt))}).catch(W)})}(Ee.sources[pt],nt,Ot).then(function(At){var ne=o.getSource();if(ne?At!==ne&&(ne.setTileUrlFunction(At.getTileUrlFunction()),ne.format_||(ne.format_=At.format_),ne.getAttributions()||ne.setAttributions(At.getAttributions()),ne.getTileLoadFunction()===G.I&&ne.setTileLoadFunction(At.getTileLoadFunction()),(0,T.OP)(ne.getProjection(),At.getProjection())&&(ne.tileGrid=At.getTileGrid())):o.setSource(At),!isFinite(o.getMaxResolution())&&!isFinite(o.getMinZoom())){var me=o.getSource().getTileGrid();o.setMaxResolution(me.getResolution(me.getMinZoom()))}});var yt=Ee.sources[pt],It=o.getSource();(!It||It.get("mapbox-source")!==yt)&&(It=function mi(o,n,a){var b=o.data,W={};if("string"==typeof b){var nt=us(b,a.accessToken,a.accessTokenParam||"access_token",n||location.href);if(a.transformRequest){var pt=a.transformRequest(nt,"GeoJSON");pt instanceof Request&&(nt=decodeURI(pt.url))}if(/\{bbox-[0-9a-z-]+\}/.test(nt)){var Ut=new R.Z({attributions:o.attribution,format:ai,url:function(Wt,le,Ee){var Me=function ue(o){return"{bbox-"+(o?o.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")+"}"}(Ee);return nt.replace(Me,Wt.join(",")+","+Ee.getCode())},strategy:J.VW});return Ut.set("mapbox-source",o),Ut}return new R.Z({attributions:o.attribution,format:ai,url:nt})}W.features=ai.readFeatures(b,{featureProjection:(0,T.Cs)()||"EPSG:3857"});var Gt=new R.Z(Object.assign({attributions:o.attribution,format:ai},W));return Gt.set("mapbox-source",o),Gt}(yt,nt,Ot));var Xt=o.getSource();return Xt?It!==Xt&&(Xt.getAttributions()||Xt.setAttributions(It.getAttributions()),Xt.format_||(Xt.format_=It.getFormat()),Xt.url_=It.getUrl()):o.setSource(It),Promise.resolve()}function V(){if(Y||Ee.sprite&&!d)Y?(o.setStyle(Y),Ke().then(Wt).catch(le)):le(new Error("Something went wrong trying to apply style."));else{if(Ot.projection&&!W){var It=(0,T.U2)(Ot.projection).getUnits();"m"!==It&&(W=tn.map(function(Xt){return Xt/T.Wm[It]}))}Y=bo(o,Ee,Ut,W,d,E,Gr,Ot.getImage),o.getStyle()?Ke().then(Wt).catch(le):le(new Error("Nothing to show for source ["+pt+"]"))}}if(Ee.sprite){var et=new URL(function Br(o,n,a){var b=vn(o);if(!b)return decodeURI(new URL(o,a).href);var W="sprites/";if(0!==b.indexOf(W))throw new Error("unexpected sprites url: "+o);var nt=b.slice(W.length);return Ls+"/styles/v1/"+nt+"/sprite?access_token="+n}(Ee.sprite,Ot.accessToken,nt||location.href)),lt=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",at=et.origin+et.pathname+lt+".json"+et.search;new Promise(function(yt,It){Ns("Sprite",at,Ot).then(yt).catch(function(Xt){Ns("Sprite",at=et.origin+et.pathname+".json"+et.search,Ot).then(yt).catch(It)})}).then(function(yt){if(void 0===yt&&le(new Error("No sprites found.")),d=yt,E=et.origin+et.pathname+lt+".png"+et.search,Ot.transformRequest){var It=Ot.transformRequest(E,"SpriteImage");It instanceof Request&&(E=encodeURI(It.url))}V()}).catch(function(yt){le(new Error("Sprites cannot be loaded: "+at+": "+yt.message))})}else V()}).catch(le)})}var xn={};function hi(o,n,a){return void 0===a&&(a={}),ks(n,a).then(function(b){!function vi(o,n,a){n.layers.some(function(b){if("background"===b.type){if(o instanceof c.Z)return o.setBackground(function(W){return tt(b,W,a,{})}),!0;if(o instanceof f.Z||o instanceof u.Z)return o.getLayers().push(function ft(o,n,a){var b=document.createElement("div");return b.className="ol-mapbox-style-background",b.style.position="absolute",b.style.width="100%",b.style.height="100%",new c.Z({source:new i.Z({}),render:function(nt){var pt=tt(o,nt.viewState.resolution,n,a);return b.style.backgroundColor=pt,b}})}(b,a,{})),!0}})}(o,b,a)})}function tt(o,n,a,b){var W={id:o.id,type:o.type},nt=o.layout||{},pt=o.paint||{};W.paint=pt;var Ut,Gt,Ot=Fs(n,a.resolutions||tn);return void 0!==pt["background-color"]&&(Ut=Ge(W,"paint","background-color",Ot,xn,b)),void 0!==pt["background-opacity"]&&(Gt=Ge(W,"paint","background-opacity",Ot,xn,b)),"none"==nt.visibility?void 0:On(Ut,Gt)}var ai=new h.Z},1955:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>Q});const _={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class g extends Error{constructor(j){const N=_[j];super(N),this.code=j,this.name="AssertionError",this.message=N}}const Q=g},9573:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>S});var _=r(1955),g=r(4115),Q=r(448),H=r(3615);class N extends H.ZP{constructor(h,c,u){super(h),this.element=c,this.index=u}}const S=class w extends g.Z{constructor(h,c){if(super(),this.unique_=!!(c=c||{}).unique,this.array_=h||[],this.unique_)for(let u=0,s=this.array_.length;u<s;++u)this.assertUnique_(this.array_[u],u);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(h){for(let c=0,u=h.length;c<u;++c)this.push(h[c]);return this}forEach(h){const c=this.array_;for(let u=0,s=c.length;u<s;++u)h(c[u],u,c)}getArray(){return this.array_}item(h){return this.array_[h]}getLength(){return this.get("length")}insertAt(h,c){if(h<0||h>this.getLength())throw new Error("Index out of bounds: "+h);this.unique_&&this.assertUnique_(c),this.array_.splice(h,0,c),this.updateLength_(),this.dispatchEvent(new N(Q.Z.ADD,c,h))}pop(){return this.removeAt(this.getLength()-1)}push(h){this.unique_&&this.assertUnique_(h);const c=this.getLength();return this.insertAt(c,h),this.getLength()}remove(h){const c=this.array_;for(let u=0,s=c.length;u<s;++u)if(c[u]===h)return this.removeAt(u)}removeAt(h){if(h<0||h>=this.getLength())return;const c=this.array_[h];return this.array_.splice(h,1),this.updateLength_(),this.dispatchEvent(new N(Q.Z.REMOVE,c,h)),c}setAt(h,c){if(h>=this.getLength())return void this.insertAt(h,c);if(h<0)throw new Error("Index out of bounds: "+h);this.unique_&&this.assertUnique_(c,h);const s=this.array_[h];this.array_[h]=c,this.dispatchEvent(new N(Q.Z.REMOVE,s,h)),this.dispatchEvent(new N(Q.Z.ADD,c,h))}updateLength_(){this.set("length",this.array_.length)}assertUnique_(h,c){for(let u=0,s=this.array_.length;u<s;++u)if(this.array_[u]===h&&u!==c)throw new _.Z(58)}}},448:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={ADD:"add",REMOVE:"remove"}},6450:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>g});const g=class _{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},3413:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>w});var _=r(4115),g=r(3044),Q=r(992),H=r(2716);class j extends _.Z{constructor(v){super(),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),v&&("function"==typeof v.getSimplifiedGeometry?this.setGeometry(v):this.setProperties(v))}clone(){const v=new j(this.hasProperties()?this.getProperties():null);v.setGeometryName(this.getGeometryName());const h=this.getGeometry();h&&v.setGeometry(h.clone());const c=this.getStyle();return c&&v.setStyle(c),v}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,H.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const v=this.getGeometry();v&&(this.geometryChangeKey_=(0,H.oL)(v,g.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(v){this.set(this.geometryName_,v)}setStyle(v){this.style_=v,this.styleFunction_=v?function N(S){if("function"==typeof S)return S;let v;return Array.isArray(S)?v=S:((0,Q.h)("function"==typeof S.getZIndex,41),v=[S]),function(){return v}}(v):void 0,this.changed()}setId(v){this.id_=v,this.changed()}setGeometryName(v){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=v,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}const w=j},1309:(Vt,gt,r)=>{"use strict";r.d(gt,{K:()=>S,Z:()=>v});var _=r(3044),g=r(1649),Q=r(1501),H=r(5063),j=r(9543),N=r(2716);function S(h,c,u){const s=h;let f=!0,i=!1,l=!1;const m=[(0,N.Vx)(s,_.Z.LOAD,function(){l=!0,i||c()})];return s.src&&H.Tp?(i=!0,s.decode().then(function(){f&&c()}).catch(function(e){f&&(l?c():u())})):m.push((0,N.Vx)(s,_.Z.ERROR,u)),function(){f=!1,m.forEach(N.bN)}}const v=class w extends g.Z{constructor(c,u,s,f,i,l,m){super(c,u,s,Q.Z.IDLE),this.src_=f,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.context_=m,this.unlisten_=null,this.state=Q.Z.IDLE,this.imageLoadFunction_=l}getImage(){if(this.state==Q.Z.LOADED&&this.context_&&!(this.image_ instanceof HTMLCanvasElement)){const c=this.context_.canvas;c.width=this.image_.width,c.height=this.image_.height,this.context_.drawImage(this.image_,0,0),this.image_=this.context_.canvas}return this.image_}handleImageError_(){this.state=Q.Z.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=(0,j.Cr)(this.extent)/this.image_.height),this.state=Q.Z.LOADED,this.unlistenImage_(),this.changed()}load(){(this.state==Q.Z.IDLE||this.state==Q.Z.ERROR)&&(this.state=Q.Z.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=S(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(c){this.image_=c,this.resolution=(0,j.Cr)(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},1649:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>j});var _=r(1398),g=r(3044),Q=r(513);const j=class H extends _.Z{constructor(w,S,v,h){super(),this.extent=w,this.pixelRatio_=v,this.resolution=S,this.state=h}changed(){this.dispatchEvent(g.Z.CHANGE)}getExtent(){return this.extent}getImage(){return(0,Q.O3)()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){(0,Q.O3)()}}},443:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>H});var _=r(1649),g=r(1501);const H=class Q extends _.Z{constructor(N,w,S,v,h){super(N,w,S,void 0!==h?g.Z.IDLE:g.Z.LOADED),this.loader_=void 0!==h?h:null,this.canvas_=v,this.error_=null}getError(){return this.error_}handleLoad_(N){N?(this.error_=N,this.state=g.Z.ERROR):this.state=g.Z.LOADED,this.changed()}load(){this.state==g.Z.IDLE&&(this.state=g.Z.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}},1501:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},8879:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>w});var _=r(8786),g=r(4700),Q=r(3842),H=r(1309);const w=class j extends _.Z{constructor(v,h,c,u,s,f){super(v,h,f),this.crossOrigin_=u,this.src_=c,this.key=c,this.image_=new Image,null!==u&&(this.image_.crossOrigin=u),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(v){this.image_=v,this.state=g.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=g.Z.ERROR,this.unlistenImage_(),this.image_=function N(){const S=(0,Q.E4)(1,1);return S.fillStyle="rgba(0,0,0,0)",S.fillRect(0,0,1,1),S.canvas}(),this.changed()}handleImageLoad_(){const v=this.image_;this.state=v.naturalWidth&&v.naturalHeight?g.Z.LOADED:g.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==g.Z.ERROR&&(this.state=g.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==g.Z.IDLE&&(this.state=g.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,H.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}},6942:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>Te});var _=r(4115),g=r(9573),Q=r(448),H=r(6450),j=r(1334),N=r(513),w=r(7139),S=r(9543),v=r(9118),h=r(7521),c=r(5415);function s(he,Mt){v.c.expire()}const f=class u extends H.Z{constructor(Mt){super(),this.map_=Mt}dispatchRenderEvent(Mt,Dt){(0,N.O3)()}calculateMatrices2D(Mt){const Dt=Mt.viewState,Kt=Mt.coordinateToPixelTransform,Yt=Mt.pixelToCoordinateTransform;(0,w.qC)(Kt,Mt.size[0]/2,Mt.size[1]/2,1/Dt.resolution,-1/Dt.resolution,-Dt.rotation,-Dt.center[0],-Dt.center[1]),(0,w.nb)(Yt,Kt)}forEachFeatureAtCoordinate(Mt,Dt,Kt,Yt,Jt,ye,Pe,ze){let He;const Zt=Dt.viewState;function Et(ee,re,we,ge){return Jt.call(ye,re,ee?we:null,ge)}const y=Zt.projection,z=(0,c.Cf)(Mt.slice(),y),st=[[0,0]];if(y.canWrapX()&&Yt){const ee=y.getExtent(),re=(0,S.dz)(ee);st.push([-re,0],[re,0])}const it=Dt.layerStatesArray,vt=it.length,Pt=[],kt=[];for(let ee=0;ee<st.length;ee++)for(let re=vt-1;re>=0;--re){const we=it[re],ge=we.layer;if(ge.hasRenderer()&&(0,h.j)(we,Zt)&&Pe.call(ze,ge)){const oe=ge.getRenderer(),Xe=ge.getSource();if(oe&&Xe){const oi=Xe.getWrapX()?z:Mt,Qe=Et.bind(null,we.managed);kt[0]=oi[0]+st[ee][0],kt[1]=oi[1]+st[ee][1],He=oe.forEachFeatureAtCoordinate(kt,Dt,Kt,Qe,Pt)}if(He)return He}}if(0===Pt.length)return;const zt=1/Pt.length;return Pt.forEach((ee,re)=>ee.distanceSq+=re*zt),Pt.sort((ee,re)=>ee.distanceSq-re.distanceSq),Pt.some(ee=>He=ee.callback(ee.feature,ee.layer,ee.geometry)),He}hasFeatureAtCoordinate(Mt,Dt,Kt,Yt,Jt,ye){return void 0!==this.forEachFeatureAtCoordinate(Mt,Dt,Kt,Yt,j.uX,this,Jt,ye)}getMap(){return this.map_}renderFrame(Mt){(0,N.O3)()}scheduleExpireIconCache(Mt){v.c.canExpireCache()&&Mt.postRenderFunctions.push(s)}};var i=r(8296),l=r(9683),m=r(8779),e=r(1119),P=r(2768),x=r(2716),T=r(3842);const D=class U extends f{constructor(Mt){super(Mt),this.fontChangeListenerKey_=(0,x.oL)(P.sG,i.Z.PROPERTYCHANGE,Mt.redrawText.bind(Mt)),this.element_=document.createElement("div");const Dt=this.element_.style;Dt.position="absolute",Dt.width="100%",Dt.height="100%",Dt.zIndex="0",this.element_.className=e.XV+" ol-layers";const Kt=Mt.getViewport();Kt.insertBefore(this.element_,Kt.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(Mt,Dt){const Kt=this.getMap();if(Kt.hasListener(Mt)){const Yt=new l.Z(Mt,void 0,Dt);Kt.dispatchEvent(Yt)}}disposeInternal(){(0,x.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(Mt){if(!Mt)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(Mt),this.dispatchRenderEvent(m.Z.PRECOMPOSE,Mt);const Dt=Mt.layerStatesArray.sort(function(ye,Pe){return ye.zIndex-Pe.zIndex}),Kt=Mt.viewState;this.children_.length=0;const Yt=[];let Jt=null;for(let ye=0,Pe=Dt.length;ye<Pe;++ye){const ze=Dt[ye];Mt.layerIndex=ye;const He=ze.layer,Zt=He.getSourceState();if(!(0,h.j)(ze,Kt)||"ready"!=Zt&&"undefined"!=Zt){He.unrender();continue}const Et=He.render(Mt,Jt);!Et||(Et!==Jt&&(this.children_.push(Et),Jt=Et),"getDeclutter"in He&&Yt.push(He))}for(let ye=Yt.length-1;ye>=0;--ye)Yt[ye].renderDeclutter(Mt);(0,T.hF)(this.element_,this.children_),this.dispatchRenderEvent(m.Z.POSTCOMPOSE,Mt),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(Mt)}};var C=r(3044),O=r(1591),X=r(3615);const dt=class $ extends X.ZP{constructor(Mt,Dt,Kt){super(Mt),this.map=Dt,this.frameState=void 0!==Kt?Kt:null}},k=class B extends dt{constructor(Mt,Dt,Kt,Yt,Jt,ye){super(Mt,Dt,Jt),this.originalEvent=Kt,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==Yt&&Yt,this.activePointers=ye}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(Mt){this.pixel_=Mt}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(Mt){this.coordinate_=Mt}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}};var L=r(1590),p=r(5622),M=r(1398),R=r(5063);const G=class K extends M.Z{constructor(Mt,Dt){super(Mt),this.map_=Mt,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===Dt?1:Dt,this.down_=null;const Kt=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=Kt,this.pointerdownListenerKey_=(0,x.oL)(Kt,p.Z.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=(0,x.oL)(Kt,p.Z.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(C.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!R.bM&&{passive:!1})}emulateClick_(Mt){let Dt=new k(L.Z.CLICK,this.map_,Mt);this.dispatchEvent(Dt),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,Dt=new k(L.Z.DBLCLICK,this.map_,Mt),this.dispatchEvent(Dt)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const Kt=new k(L.Z.SINGLECLICK,this.map_,Mt);this.dispatchEvent(Kt)},250)}updateActivePointers_(Mt){const Dt=Mt,Kt=Dt.pointerId;if(Dt.type==L.Z.POINTERUP||Dt.type==L.Z.POINTERCANCEL){delete this.trackedTouches_[Kt];for(const Yt in this.trackedTouches_)if(this.trackedTouches_[Yt].target!==Dt.target){delete this.trackedTouches_[Yt];break}}else(Dt.type==L.Z.POINTERDOWN||Dt.type==L.Z.POINTERMOVE)&&(this.trackedTouches_[Kt]=Dt);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(Mt){this.updateActivePointers_(Mt);const Dt=new k(L.Z.POINTERUP,this.map_,Mt,void 0,void 0,this.activePointers_);this.dispatchEvent(Dt),this.emulateClicks_&&!Dt.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(Mt)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(x.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(Mt){return 0===Mt.button}handlePointerDown_(Mt){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(Mt);const Dt=new k(L.Z.POINTERDOWN,this.map_,Mt,void 0,void 0,this.activePointers_);if(this.dispatchEvent(Dt),this.down_=new PointerEvent(Mt.type,Mt),Object.defineProperty(this.down_,"target",{writable:!1,value:Mt.target}),0===this.dragListenerKeys_.length){const Kt=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,x.oL)(Kt,L.Z.POINTERMOVE,this.handlePointerMove_,this),(0,x.oL)(Kt,L.Z.POINTERUP,this.handlePointerUp_,this),(0,x.oL)(this.element_,L.Z.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==Kt&&this.dragListenerKeys_.push((0,x.oL)(this.element_.getRootNode(),L.Z.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(Mt){if(this.isMoving_(Mt)){this.updateActivePointers_(Mt),this.dragging_=!0;const Dt=new k(L.Z.POINTERDRAG,this.map_,Mt,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(Dt)}}relayMoveEvent_(Mt){this.originalPointerMoveEvent_=Mt;const Dt=!(!this.down_||!this.isMoving_(Mt));this.dispatchEvent(new k(L.Z.POINTERMOVE,this.map_,Mt,Dt))}handleTouchMove_(Mt){const Dt=this.originalPointerMoveEvent_;(!Dt||Dt.defaultPrevented)&&("boolean"!=typeof Mt.cancelable||!0===Mt.cancelable)&&Mt.preventDefault()}isMoving_(Mt){return this.dragging_||Math.abs(Mt.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(Mt.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,x.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(C.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,x.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(x.bN),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}};var J=r(9806),q=r(3161),ut=r(2988),ht=r(5109),_t=r(9500),Tt=r(992),Lt=r(9633),Ht=r(5267),$t=r(1014),Qt=r(1179),_e=r(142),Ce=r(9015),xe=r(931),Ze=r(246);function xt(he){he instanceof h.Z?he.setMapInternal(null):he instanceof O.Z&&he.getLayers().forEach(xt)}function Nt(he,Mt){if(he instanceof h.Z)he.setMapInternal(Mt);else if(he instanceof O.Z){const Dt=he.getLayers().getArray();for(let Kt=0,Yt=Dt.length;Kt<Yt;++Kt)Nt(Dt[Kt],Mt)}}const Te=class Bt extends _.Z{constructor(Mt){super();const Dt=function ie(he){let Mt=null;void 0!==he.keyboardEventTarget&&(Mt="string"==typeof he.keyboardEventTarget?document.getElementById(he.keyboardEventTarget):he.keyboardEventTarget);const Dt={},Kt=he.layers&&"function"==typeof he.layers.getLayers?he.layers:new O.Z({layers:he.layers});let Yt,Jt,ye;return Dt[q.Z.LAYERGROUP]=Kt,Dt[q.Z.TARGET]=he.target,Dt[q.Z.VIEW]=he.view instanceof ht.ZP?he.view:new ht.ZP,void 0!==he.controls&&(Array.isArray(he.controls)?Yt=new g.Z(he.controls.slice()):((0,Tt.h)("function"==typeof he.controls.getArray,47),Yt=he.controls)),void 0!==he.interactions&&(Array.isArray(he.interactions)?Jt=new g.Z(he.interactions.slice()):((0,Tt.h)("function"==typeof he.interactions.getArray,48),Jt=he.interactions)),void 0!==he.overlays?Array.isArray(he.overlays)?ye=new g.Z(he.overlays.slice()):((0,Tt.h)("function"==typeof he.overlays.getArray,49),ye=he.overlays):ye=new g.Z,{controls:Yt,interactions:Jt,keyboardEventTarget:Mt,overlays:ye,values:Dt}}(Mt=Mt||{});this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==Mt.maxTilesLoading?Mt.maxTilesLoading:16,this.pixelRatio_=void 0!==Mt.pixelRatio?Mt.pixelRatio:R.MP,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,w.Ue)(),this.pixelToCoordinateTransform_=(0,w.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=Mt.moveTolerance,this.keyboardEventTarget_=Dt.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=Dt.controls||function ae(he){he=he||{};const Mt=new g.Z;return(void 0===he.zoom||he.zoom)&&Mt.push(new $t.Z(he.zoomOptions)),(void 0===he.rotate||he.rotate)&&Mt.push(new Ht.Z(he.rotateOptions)),(void 0===he.attribution||he.attribution)&&Mt.push(new Lt.Z(he.attributionOptions)),Mt}(),this.interactions=Dt.interactions||(0,Qt.c)({onFocusOnly:!0}),this.overlays_=Dt.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new ut.Z(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(q.Z.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(q.Z.VIEW,this.handleViewChanged_),this.addChangeListener(q.Z.SIZE,this.handleSizeChanged_),this.addChangeListener(q.Z.TARGET,this.handleTargetChanged_),this.setProperties(Dt.values);const Kt=this;Mt.view&&!(Mt.view instanceof ht.ZP)&&Mt.view.then(function(Yt){Kt.setView(new ht.ZP(Yt))}),this.controls.addEventListener(Q.Z.ADD,Yt=>{Yt.element.setMap(this)}),this.controls.addEventListener(Q.Z.REMOVE,Yt=>{Yt.element.setMap(null)}),this.interactions.addEventListener(Q.Z.ADD,Yt=>{Yt.element.setMap(this)}),this.interactions.addEventListener(Q.Z.REMOVE,Yt=>{Yt.element.setMap(null)}),this.overlays_.addEventListener(Q.Z.ADD,Yt=>{this.addOverlayInternal_(Yt.element)}),this.overlays_.addEventListener(Q.Z.REMOVE,Yt=>{const Jt=Yt.element.getId();void 0!==Jt&&delete this.overlayIdIndex_[Jt.toString()],Yt.element.setMap(null)}),this.controls.forEach(Yt=>{Yt.setMap(this)}),this.interactions.forEach(Yt=>{Yt.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(Mt){this.getControls().push(Mt)}addInteraction(Mt){this.getInteractions().push(Mt)}addLayer(Mt){this.getLayerGroup().getLayers().push(Mt)}handleLayerAdd_(Mt){Nt(Mt.layer,this)}addOverlay(Mt){this.getOverlays().push(Mt)}addOverlayInternal_(Mt){const Dt=Mt.getId();void 0!==Dt&&(this.overlayIdIndex_[Dt.toString()]=Mt),Mt.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(Mt,Dt,Kt){if(!this.frameState_||!this.renderer_)return;const Yt=this.getCoordinateFromPixelInternal(Mt);return this.renderer_.forEachFeatureAtCoordinate(Yt,this.frameState_,void 0!==(Kt=void 0!==Kt?Kt:{}).hitTolerance?Kt.hitTolerance:0,!1!==Kt.checkWrapped,Dt,null,void 0!==Kt.layerFilter?Kt.layerFilter:j.uX,null)}getFeaturesAtPixel(Mt,Dt){const Kt=[];return this.forEachFeatureAtPixel(Mt,function(Yt){Kt.push(Yt)},Dt),Kt}getAllLayers(){const Mt=[];return function Dt(Kt){Kt.forEach(function(Yt){Yt instanceof O.Z?Dt(Yt.getLayers()):Mt.push(Yt)})}(this.getLayers()),Mt}hasFeatureAtPixel(Mt,Dt){if(!this.frameState_||!this.renderer_)return!1;const Kt=this.getCoordinateFromPixelInternal(Mt);return this.renderer_.hasFeatureAtCoordinate(Kt,this.frameState_,void 0!==(Dt=void 0!==Dt?Dt:{}).hitTolerance?Dt.hitTolerance:0,!1!==Dt.checkWrapped,void 0!==Dt.layerFilter?Dt.layerFilter:j.uX,null)}getEventCoordinate(Mt){return this.getCoordinateFromPixel(this.getEventPixel(Mt))}getEventCoordinateInternal(Mt){return this.getCoordinateFromPixelInternal(this.getEventPixel(Mt))}getEventPixel(Mt){const Kt=this.viewport_.getBoundingClientRect(),Yt=this.getSize(),Pe="changedTouches"in Mt?Mt.changedTouches[0]:Mt;return[(Pe.clientX-Kt.left)/(Kt.width/Yt[0]),(Pe.clientY-Kt.top)/(Kt.height/Yt[1])]}getTarget(){return this.get(q.Z.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(Mt){return(0,Ce.lO)(this.getCoordinateFromPixelInternal(Mt),this.getView().getProjection())}getCoordinateFromPixelInternal(Mt){const Dt=this.frameState_;return Dt?(0,w.nn)(Dt.pixelToCoordinateTransform,Mt.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(Mt){const Dt=this.overlayIdIndex_[Mt.toString()];return void 0!==Dt?Dt:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(q.Z.LAYERGROUP)}setLayers(Mt){const Dt=this.getLayerGroup();if(Mt instanceof g.Z)return void Dt.setLayers(Mt);const Kt=Dt.getLayers();Kt.clear(),Kt.extend(Mt)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const Mt=this.getLayerGroup().getLayerStatesArray();for(let Dt=0,Kt=Mt.length;Dt<Kt;++Dt){const Yt=Mt[Dt];if(!Yt.visible)continue;const Jt=Yt.layer.getRenderer();if(Jt&&!Jt.ready)return!0;const ye=Yt.layer.getSource();if(ye&&ye.loading)return!0}return!1}getPixelFromCoordinate(Mt){const Dt=(0,Ce.Vs)(Mt,this.getView().getProjection());return this.getPixelFromCoordinateInternal(Dt)}getPixelFromCoordinateInternal(Mt){const Dt=this.frameState_;return Dt?(0,w.nn)(Dt.coordinateToPixelTransform,Mt.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(q.Z.SIZE)}getView(){return this.get(q.Z.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const Mt=this.getTargetElement();return Mt?Mt.ownerDocument:document}getTilePriority(Mt,Dt,Kt,Yt){return(0,ut.R)(this.frameState_,Mt,Dt,Kt,Yt)}handleBrowserEvent(Mt,Dt){const Kt=new k(Dt=Dt||Mt.type,this,Mt);this.handleMapBrowserEvent(Kt)}handleMapBrowserEvent(Mt){if(!this.frameState_)return;const Dt=Mt.originalEvent,Kt=Dt.type;if(Kt===p.Z.POINTERDOWN||Kt===C.Z.WHEEL||Kt===C.Z.KEYDOWN){const Yt=this.getOwnerDocument(),Jt=this.viewport_.getRootNode?this.viewport_.getRootNode():Yt,ye=Dt.target;if(this.overlayContainerStopEvent_.contains(ye)||!(Jt===Yt?Yt.documentElement:Jt).contains(ye))return}if(Mt.frameState=this.frameState_,!1!==this.dispatchEvent(Mt)){const Yt=this.getInteractions().getArray().slice();for(let Jt=Yt.length-1;Jt>=0;Jt--){const ye=Yt[Jt];if(ye.getMap()===this&&ye.getActive()&&this.getTargetElement()&&(!ye.handleEvent(Mt)||Mt.propagationStopped))break}}}handlePostRender(){const Mt=this.frameState_,Dt=this.tileQueue_;if(!Dt.isEmpty()){let Yt=this.maxTilesLoading_,Jt=Yt;if(Mt){const ye=Mt.viewHints;if(ye[_t.Z.ANIMATING]||ye[_t.Z.INTERACTING]){const Pe=Date.now()-Mt.time>8;Yt=Pe?0:8,Jt=Pe?0:2}}Dt.getTilesLoading()<Yt&&(Dt.reprioritize(),Dt.loadMoreTiles(Yt,Jt))}Mt&&this.renderer_&&!Mt.animate&&(!0===this.renderComplete_?(this.hasListener(m.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(m.Z.RENDERCOMPLETE,Mt),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new dt(J.Z.LOADEND,this,Mt)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new dt(J.Z.LOADSTART,this,Mt))));const Kt=this.postRenderFunctions_;for(let Yt=0,Jt=Kt.length;Yt<Jt;++Yt)Kt[Yt](this,Mt);Kt.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let Kt=0,Yt=this.targetChangeHandlerKeys_.length;Kt<Yt;++Kt)(0,x.bN)(this.targetChangeHandlerKeys_[Kt]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(C.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(C.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,T.ZF)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const Kt=this.targetElement_.getRootNode();Kt instanceof ShadowRoot&&this.resizeObserver_.unobserve(Kt.host)}const Mt=this.getTarget(),Dt="string"==typeof Mt?document.getElementById(Mt):Mt;if(this.targetElement_=Dt,Dt){Dt.appendChild(this.viewport_),this.renderer_||(this.renderer_=new D(this)),this.mapBrowserEventHandler_=new G(this,this.moveTolerance_);for(const Jt in L.Z)this.mapBrowserEventHandler_.addEventListener(L.Z[Jt],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(C.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(C.Z.WHEEL,this.boundHandleBrowserEvent_,!!R.bM&&{passive:!1});const Kt=this.keyboardEventTarget_?this.keyboardEventTarget_:Dt;this.targetChangeHandlerKeys_=[(0,x.oL)(Kt,C.Z.KEYDOWN,this.handleBrowserEvent,this),(0,x.oL)(Kt,C.Z.KEYPRESS,this.handleBrowserEvent,this)];const Yt=Dt.getRootNode();Yt instanceof ShadowRoot&&this.resizeObserver_.observe(Yt.host),this.resizeObserver_.observe(Dt)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,x.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,x.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const Mt=this.getView();Mt&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,x.oL)(Mt,i.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,x.oL)(Mt,C.Z.CHANGE,this.handleViewPropertyChanged_,this),Mt.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(x.bN),this.layerGroupPropertyListenerKeys_=null);const Mt=this.getLayerGroup();Mt&&(this.handleLayerAdd_(new O.V("addlayer",Mt)),this.layerGroupPropertyListenerKeys_=[(0,x.oL)(Mt,i.Z.PROPERTYCHANGE,this.render,this),(0,x.oL)(Mt,C.Z.CHANGE,this.render,this),(0,x.oL)(Mt,"addlayer",this.handleLayerAdd_,this),(0,x.oL)(Mt,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const Mt=this.getLayerGroup().getLayerStatesArray();for(let Dt=0,Kt=Mt.length;Dt<Kt;++Dt){const Yt=Mt[Dt].layer;Yt.hasRenderer()&&Yt.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(Mt){return this.getControls().remove(Mt)}removeInteraction(Mt){return this.getInteractions().remove(Mt)}removeLayer(Mt){return this.getLayerGroup().getLayers().remove(Mt)}handleLayerRemove_(Mt){xt(Mt.layer)}removeOverlay(Mt){return this.getOverlays().remove(Mt)}renderFrame_(Mt){const Dt=this.getSize(),Kt=this.getView(),Yt=this.frameState_;let Jt=null;if(void 0!==Dt&&(0,xe.py)(Dt)&&Kt&&Kt.isDef()){const ye=Kt.getHints(this.frameState_?this.frameState_.viewHints:void 0),Pe=Kt.getState();if(Jt={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,S.p8)(Pe.center,Pe.resolution,Pe.rotation,Dt),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:Dt,tileQueue:this.tileQueue_,time:Mt,usedTiles:{},viewState:Pe,viewHints:ye,wantedTiles:{},mapId:(0,N.sq)(this),renderTargets:{}},Pe.nextCenter&&Pe.nextResolution){const ze=isNaN(Pe.nextRotation)?Pe.rotation:Pe.nextRotation;Jt.nextExtent=(0,S.p8)(Pe.nextCenter,Pe.nextResolution,ze,Dt)}}this.frameState_=Jt,this.renderer_.renderFrame(Jt),Jt&&(Jt.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Jt.postRenderFunctions),Yt&&(!this.previousExtent_||!(0,S.xb)(this.previousExtent_)&&!(0,S.fS)(Jt.extent,this.previousExtent_))&&(this.dispatchEvent(new dt(J.Z.MOVESTART,this,Yt)),this.previousExtent_=(0,S.YN)(this.previousExtent_)),this.previousExtent_&&!Jt.viewHints[_t.Z.ANIMATING]&&!Jt.viewHints[_t.Z.INTERACTING]&&!(0,S.fS)(Jt.extent,this.previousExtent_)&&(this.dispatchEvent(new dt(J.Z.MOVEEND,this,Jt)),(0,S.d9)(Jt.extent,this.previousExtent_))),this.dispatchEvent(new dt(J.Z.POSTRENDER,this,Jt)),this.renderComplete_=this.hasListener(J.Z.LOADSTART)||this.hasListener(J.Z.LOADEND)||this.hasListener(m.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(Mt){const Dt=this.getLayerGroup();Dt&&this.handleLayerRemove_(new O.V("removelayer",Dt)),this.set(q.Z.LAYERGROUP,Mt)}setSize(Mt){this.set(q.Z.SIZE,Mt)}setTarget(Mt){this.set(q.Z.TARGET,Mt)}setView(Mt){if(!Mt||Mt instanceof ht.ZP)return void this.set(q.Z.VIEW,Mt);this.set(q.Z.VIEW,new ht.ZP);const Dt=this;Mt.then(function(Kt){Dt.setView(new ht.ZP(Kt))})}updateSize(){const Mt=this.getTargetElement();let Dt;if(Mt){const Yt=getComputedStyle(Mt),Jt=Mt.offsetWidth-parseFloat(Yt.borderLeftWidth)-parseFloat(Yt.paddingLeft)-parseFloat(Yt.paddingRight)-parseFloat(Yt.borderRightWidth),ye=Mt.offsetHeight-parseFloat(Yt.borderTopWidth)-parseFloat(Yt.paddingTop)-parseFloat(Yt.paddingBottom)-parseFloat(Yt.borderBottomWidth);!isNaN(Jt)&&!isNaN(ye)&&(Dt=[Jt,ye],!(0,xe.py)(Dt)&&(Mt.offsetWidth||Mt.offsetHeight||Mt.getClientRects().length)&&(0,Ze.ZK)("No map visible because the map container's width or height are 0."))}const Kt=this.getSize();Dt&&(!Kt||!(0,_e.fS)(Dt,Kt))&&(this.setSize(Dt),this.updateViewportSize_())}updateViewportSize_(){const Mt=this.getView();if(Mt){let Dt;const Kt=getComputedStyle(this.viewport_);Kt.width&&Kt.height&&(Dt=[parseInt(Kt.width,10),parseInt(Kt.height,10)]),Mt.setViewportSize(Dt)}}}},1590:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>g});var _=r(3044);const g={SINGLECLICK:"singleclick",CLICK:_.Z.CLICK,DBLCLICK:_.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},9806:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},3161:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},4115:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>S});var _=r(3615),g=r(8296),Q=r(8975),H=r(513),j=r(9306);class N extends _.ZP{constructor(h,c,u){super(h),this.key=c,this.oldValue=u}}const S=class w extends Q.Z{constructor(h){super(),(0,H.sq)(this),this.values_=null,void 0!==h&&this.setProperties(h)}get(h){let c;return this.values_&&this.values_.hasOwnProperty(h)&&(c=this.values_[h]),c}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(h,c){let u;u=`change:${h}`,this.hasListener(u)&&this.dispatchEvent(new N(u,h,c)),u=g.Z.PROPERTYCHANGE,this.hasListener(u)&&this.dispatchEvent(new N(u,h,c))}addChangeListener(h,c){this.addEventListener(`change:${h}`,c)}removeChangeListener(h,c){this.removeEventListener(`change:${h}`,c)}set(h,c,u){const s=this.values_||(this.values_={});if(u)s[h]=c;else{const f=s[h];s[h]=c,f!==c&&this.notify(h,f)}}setProperties(h,c){for(const u in h)this.set(u,h[u],c)}applyProperties(h){!h.values_||Object.assign(this.values_||(this.values_={}),h.values_)}unset(h,c){if(this.values_&&h in this.values_){const u=this.values_[h];delete this.values_[h],(0,j.x)(this.values_)&&(this.values_=null),c||this.notify(h,u)}}}},8296:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={PROPERTYCHANGE:"propertychange"}},8975:(Vt,gt,r)=>{"use strict";r.d(gt,{B:()=>j,Z:()=>N});var _=r(1398),g=r(3044),Q=r(2716);function j(w){if(Array.isArray(w))for(let S=0,v=w.length;S<v;++S)(0,Q.bN)(w[S]);else(0,Q.bN)(w)}const N=class H extends _.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(g.Z.CHANGE)}getRevision(){return this.revision_}onInternal(S,v){if(Array.isArray(S)){const h=S.length,c=new Array(h);for(let u=0;u<h;++u)c[u]=(0,Q.oL)(this,S[u],v);return c}return(0,Q.oL)(this,S,v)}onceInternal(S,v){let h;if(Array.isArray(S)){const c=S.length;h=new Array(c);for(let u=0;u<c;++u)h[u]=(0,Q.Vx)(this,S[u],v)}else h=(0,Q.Vx)(this,S,v);return v.ol_key=h,h}unInternal(S,v){const h=v.ol_key;if(h)j(h);else if(Array.isArray(S))for(let c=0,u=S.length;c<u;++c)this.removeEventListener(S[c],v);else this.removeEventListener(S,v)}}},2417:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>v});var _=r(4115),g=r(9806),Q=r(1119),H=r(9543),j=r(2716),N=r(3842);const v=class S extends _.Z{constructor(c){super(),this.options=c,this.id=c.id,this.insertFirst=void 0===c.insertFirst||c.insertFirst,this.stopEvent=void 0===c.stopEvent||c.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==c.className?c.className:"ol-overlay-container "+Q.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===c.autoPan?{}:c.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener("element",this.handleElementChanged),this.addChangeListener("map",this.handleMapChanged),this.addChangeListener("offset",this.handleOffsetChanged),this.addChangeListener("position",this.handlePositionChanged),this.addChangeListener("positioning",this.handlePositioningChanged),void 0!==c.element&&this.setElement(c.element),this.setOffset(void 0!==c.offset?c.offset:[0,0]),this.setPositioning(c.positioning||"top-left"),void 0!==c.position&&this.setPosition(c.position)}getElement(){return this.get("element")}getId(){return this.id}getMap(){return this.get("map")||null}getOffset(){return this.get("offset")}getPosition(){return this.get("position")}getPositioning(){return this.get("positioning")}handleElementChanged(){(0,N.ep)(this.element);const c=this.getElement();c&&this.element.appendChild(c)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,N.ZF)(this.element),(0,j.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const c=this.getMap();if(c){this.mapPostrenderListenerKey=(0,j.oL)(c,g.Z.POSTRENDER,this.render,this),this.updatePixelPosition();const u=this.stopEvent?c.getOverlayContainerStopEvent():c.getOverlayContainer();this.insertFirst?u.insertBefore(this.element,u.childNodes[0]||null):u.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(c){this.set("element",c)}setMap(c){this.set("map",c)}setOffset(c){this.set("offset",c)}setPosition(c){this.set("position",c)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(c){const u=this.getMap();if(!u||!u.getTargetElement()||!this.get("position"))return;const s=this.getRect(u.getTargetElement(),u.getSize()),f=this.getElement(),i=this.getRect(f,[(0,N.iO)(f),(0,N.Pb)(f)]),l=void 0===(c=c||{}).margin?20:c.margin;if(!(0,H.r4)(s,i)){const m=i[0]-s[0],e=s[2]-i[2],P=i[1]-s[1],x=s[3]-i[3],T=[0,0];if(m<0?T[0]=m-l:e<0&&(T[0]=Math.abs(e)+l),P<0?T[1]=P-l:x<0&&(T[1]=Math.abs(x)+l),0!==T[0]||0!==T[1]){const U=u.getView().getCenterInternal(),D=u.getPixelFromCoordinateInternal(U);if(!D)return;const C=[D[0]+T[0],D[1]+T[1]],O=c.animation||{};u.getView().animateInternal({center:u.getCoordinateFromPixelInternal(C),duration:O.duration,easing:O.easing})}}}getRect(c,u){const s=c.getBoundingClientRect(),f=s.left+window.pageXOffset,i=s.top+window.pageYOffset;return[f,i,f+u[0],i+u[1]]}setPositioning(c){this.set("positioning",c)}setVisible(c){this.rendered.visible!==c&&(this.element.style.display=c?"":"none",this.rendered.visible=c)}updatePixelPosition(){const c=this.getMap(),u=this.getPosition();if(!c||!c.isRendered()||!u)return void this.setVisible(!1);const s=c.getPixelFromCoordinate(u),f=c.getSize();this.updateRenderedPosition(s,f)}updateRenderedPosition(c,u){const s=this.element.style,f=this.getOffset(),i=this.getPositioning();this.setVisible(!0);let e="0%",P="0%";"bottom-right"==i||"center-right"==i||"top-right"==i?e="-100%":("bottom-center"==i||"center-center"==i||"top-center"==i)&&(e="-50%"),"bottom-left"==i||"bottom-center"==i||"bottom-right"==i?P="-100%":("center-left"==i||"center-center"==i||"center-right"==i)&&(P="-50%");const x=`translate(${e}, ${P}) translate(${Math.round(c[0]+f[0])+"px"}, ${Math.round(c[1]+f[1])+"px"})`;this.rendered.transform_!=x&&(this.rendered.transform_=x,s.transform=x)}getOptions(){return this.options}}},8786:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>w});var _=r(1398),g=r(3044),Q=r(4700),H=r(513),j=r(4720);const w=class N extends _.Z{constructor(v,h,c){super(),c=c||{},this.tileCoord=v,this.state=h,this.interimTile=null,this.key="",this.transition_=void 0===c.transition?250:c.transition,this.transitionStarts_={},this.interpolate=!!c.interpolate}changed(){this.dispatchEvent(g.Z.CHANGE)}release(){this.state===Q.Z.ERROR&&this.setState(Q.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let v=this.interimTile;do{if(v.getState()==Q.Z.LOADED)return this.transition_=0,v;v=v.interimTile}while(v);return this}refreshInterimChain(){if(!this.interimTile)return;let v=this.interimTile,h=this;do{if(v.getState()==Q.Z.LOADED){v.interimTile=null;break}v.getState()==Q.Z.LOADING?h=v:v.getState()==Q.Z.IDLE?h.interimTile=v.interimTile:h=v,v=h.interimTile}while(v)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(v){if(this.state!==Q.Z.ERROR&&this.state>v)throw new Error("Tile load sequence violation");this.state=v,this.changed()}load(){(0,H.O3)()}getAlpha(v,h){if(!this.transition_)return 1;let c=this.transitionStarts_[v];if(c){if(-1===c)return 1}else c=h,this.transitionStarts_[v]=c;const u=h-c+1e3/60;return u>=this.transition_?1:(0,j.YQ)(u/this.transition_)}inTransition(v){return!!this.transition_&&-1!==this.transitionStarts_[v]}endTransition(v){this.transition_&&(this.transitionStarts_[v]=-1)}}},7450:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>N});var _=r(992);var H=r(5474);const N=class j extends class g{constructor(S){this.highWaterMark=void 0!==S?S:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(S){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(S){return this.entries_.hasOwnProperty(S)}forEach(S){let v=this.oldest_;for(;v;)S(v.value_,v.key_,this),v=v.newer}get(S,v){const h=this.entries_[S];return(0,_.h)(void 0!==h,15),h===this.newest_||(h===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(h.newer.older=h.older,h.older.newer=h.newer),h.newer=null,h.older=this.newest_,this.newest_.newer=h,this.newest_=h),h.value_}remove(S){const v=this.entries_[S];return(0,_.h)(void 0!==v,15),v===this.newest_?(this.newest_=v.older,this.newest_&&(this.newest_.newer=null)):v===this.oldest_?(this.oldest_=v.newer,this.oldest_&&(this.oldest_.older=null)):(v.newer.older=v.older,v.older.newer=v.newer),delete this.entries_[S],--this.count_,v.value_}getCount(){return this.count_}getKeys(){const S=new Array(this.count_);let h,v=0;for(h=this.newest_;h;h=h.older)S[v++]=h.key_;return S}getValues(){const S=new Array(this.count_);let h,v=0;for(h=this.newest_;h;h=h.older)S[v++]=h.value_;return S}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(S){if(this.containsKey(S))return this.entries_[S].value_}pop(){const S=this.oldest_;return delete this.entries_[S.key_],S.newer&&(S.newer.older=null),this.oldest_=S.newer,this.oldest_||(this.newest_=null),--this.count_,S.value_}replace(S,v){this.get(S),this.entries_[S].value_=v}set(S,v){(0,_.h)(!(S in this.entries_),16);const h={key_:S,newer:null,older:this.newest_,value_:v};this.newest_?this.newest_.newer=h:this.oldest_=h,this.newest_=h,this.entries_[S]=h,++this.count_}setSize(S){this.highWaterMark=S}}{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(S){for(;this.canExpireCache()&&!(this.peekLast().getKey()in S);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;const S=this.peekFirstKey(),h=(0,H.Ul)(S)[0];this.forEach(c=>{c.tileCoord[0]!==h&&(this.remove((0,H.km)(c.tileCoord)),c.release())})}}},2988:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>v,R:()=>h});var _=r(3044),g=r(992),Q=r(9306);const H=1/0;var w=r(4700);const v=class S extends class j{constructor(u,s){this.priorityFunction_=u,this.keyFunction_=s,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,Q.Z)(this.queuedElements_)}dequeue(){const u=this.elements_,s=this.priorities_,f=u[0];1==u.length?(u.length=0,s.length=0):(u[0]=u.pop(),s[0]=s.pop(),this.siftUp_(0));const i=this.keyFunction_(f);return delete this.queuedElements_[i],f}enqueue(u){(0,g.h)(!(this.keyFunction_(u)in this.queuedElements_),31);const s=this.priorityFunction_(u);return s!=H&&(this.elements_.push(u),this.priorities_.push(s),this.queuedElements_[this.keyFunction_(u)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(u){return 2*u+1}getRightChildIndex_(u){return 2*u+2}getParentIndex_(u){return u-1>>1}heapify_(){let u;for(u=(this.elements_.length>>1)-1;u>=0;u--)this.siftUp_(u)}isEmpty(){return 0===this.elements_.length}isKeyQueued(u){return u in this.queuedElements_}isQueued(u){return this.isKeyQueued(this.keyFunction_(u))}siftUp_(u){const s=this.elements_,f=this.priorities_,i=s.length,l=s[u],m=f[u],e=u;for(;u<i>>1;){const P=this.getLeftChildIndex_(u),x=this.getRightChildIndex_(u),T=x<i&&f[x]<f[P]?x:P;s[u]=s[T],f[u]=f[T],u=T}s[u]=l,f[u]=m,this.siftDown_(e,u)}siftDown_(u,s){const f=this.elements_,i=this.priorities_,l=f[s],m=i[s];for(;s>u;){const e=this.getParentIndex_(s);if(!(i[e]>m))break;f[s]=f[e],i[s]=i[e],s=e}f[s]=l,i[s]=m}reprioritize(){const u=this.priorityFunction_,s=this.elements_,f=this.priorities_;let i=0;const l=s.length;let m,e,P;for(e=0;e<l;++e)m=s[e],P=u(m),P==H?delete this.queuedElements_[this.keyFunction_(m)]:(f[i]=P,s[i++]=m);s.length=i,f.length=i,this.heapify_()}}{constructor(u,s){super(function(f){return u.apply(null,f)},function(f){return f[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=s,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(u){const s=super.enqueue(u);return s&&u[0].addEventListener(_.Z.CHANGE,this.boundHandleTileChange_),s}getTilesLoading(){return this.tilesLoading_}handleTileChange(u){const s=u.target,f=s.getState();if(f===w.Z.LOADED||f===w.Z.ERROR||f===w.Z.EMPTY){f!==w.Z.ERROR&&s.removeEventListener(_.Z.CHANGE,this.boundHandleTileChange_);const i=s.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(u,s){let i,l,m,f=0;for(;this.tilesLoading_<u&&f<s&&this.getCount()>0;)l=this.dequeue()[0],m=l.getKey(),i=l.getState(),i===w.Z.IDLE&&!(m in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[m]=!0,++this.tilesLoading_,++f,l.load())}};function h(c,u,s,f,i){if(!c||!(s in c.wantedTiles)||!c.wantedTiles[s][u.getKey()])return H;const l=c.viewState.center,m=f[0]-l[0],e=f[1]-l[1];return 65536*Math.log(i)+Math.sqrt(m*m+e*e)/i}},828:(Vt,gt,r)=>{"use strict";r.d(gt,{T:()=>g,Z:()=>Q});class _{constructor(j,N,w,S){this.minX=j,this.maxX=N,this.minY=w,this.maxY=S}contains(j){return this.containsXY(j[1],j[2])}containsTileRange(j){return this.minX<=j.minX&&j.maxX<=this.maxX&&this.minY<=j.minY&&j.maxY<=this.maxY}containsXY(j,N){return this.minX<=j&&j<=this.maxX&&this.minY<=N&&N<=this.maxY}equals(j){return this.minX==j.minX&&this.minY==j.minY&&this.maxX==j.maxX&&this.maxY==j.maxY}extend(j){j.minX<this.minX&&(this.minX=j.minX),j.maxX>this.maxX&&(this.maxX=j.maxX),j.minY<this.minY&&(this.minY=j.minY),j.maxY>this.maxY&&(this.maxY=j.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(j){return this.minX<=j.maxX&&this.maxX>=j.minX&&this.minY<=j.maxY&&this.maxY>=j.minY}}function g(H,j,N,w,S){return void 0!==S?(S.minX=H,S.maxX=j,S.minY=N,S.maxY=w,S):new _(H,j,N,w)}const Q=_},4700:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},5109:(Vt,gt,r)=>{"use strict";r.d(gt,{ZP:()=>k});var _=r(4115),g=r(9500),Q=r(1266),H=r(2258),j=r(9015),N=r(1334),w=r(5415),S=r(992),v=r(4331);function h(L,p,M){return function(R,K,G,J,q){if(!R)return;if(!K&&!p)return R;const ut=p?0:G[0]*K,ht=p?0:G[1]*K,_t=q?q[0]:0,Tt=q?q[1]:0;let Lt=L[0]+ut/2+_t,Ht=L[2]-ut/2+_t,$t=L[1]+ht/2+Tt,ae=L[3]-ht/2+Tt;Lt>Ht&&(Lt=(Ht+Lt)/2,Ht=Lt),$t>ae&&($t=(ae+$t)/2,ae=$t);let Qt=(0,v.uZ)(R[0],Lt,Ht),_e=(0,v.uZ)(R[1],$t,ae);if(J&&M&&K){const Ce=30*K;Qt+=-Ce*Math.log(1+Math.max(0,Lt-R[0])/Ce)+Ce*Math.log(1+Math.max(0,R[0]-Ht)/Ce),_e+=-Ce*Math.log(1+Math.max(0,$t-R[1])/Ce)+Ce*Math.log(1+Math.max(0,R[1]-ae)/Ce)}return[Qt,_e]}}function c(L){return L}var u=r(9543),s=r(142);function f(L,p,M,R){const K=(0,u.dz)(p)/M[0],G=(0,u.Cr)(p)/M[1];return R?Math.min(L,Math.max(K,G)):Math.min(L,Math.min(K,G))}function i(L,p,M){let R=Math.min(L,p);return R*=Math.log(1+50*Math.max(0,L/p-1))/50+1,M&&(R=Math.max(R,M),R/=Math.log(1+50*Math.max(0,M/L-1))/50+1),(0,v.uZ)(R,M/2,2*p)}function e(L,p,M,R,K){return M=void 0===M||M,function(G,J,q,ut){if(void 0!==G){const ht=R?f(L,R,q,K):L;return M&&ut?i(G,ht,p):(0,v.uZ)(G,p,ht)}}}var P=r(7011),x=r(4720),T=r(7464);function C(L,p){setTimeout(function(){L(p)},0)}function B(L,p,M,R,K){const G=Math.cos(-K);let J=Math.sin(-K),q=L[0]*G-L[1]*J,ut=L[1]*G+L[0]*J;return q+=(p[0]/2-M[0])*R,ut+=(M[1]-p[1]/2)*R,J=-J,[q*G-ut*J,ut*G+q*J]}const k=class D extends _.Z{constructor(p){super(),p=Object.assign({},p),this.hints_=[0,0],this.animations_=[],this.projection_=(0,j.UQ)(p.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.nextCenter_=null,this.cancelAnchor_=void 0,p.projection&&(0,j.h_)(),p.center&&(p.center=(0,j.Vs)(p.center,this.projection_)),p.extent&&(p.extent=(0,j.dY)(p.extent,this.projection_)),this.applyOptions_(p)}applyOptions_(p){const M=Object.assign({},p);for(const q in Q.Z)delete M[q];this.setProperties(M,!0);const R=function X(L){let p,M,R,J=void 0!==L.minZoom?L.minZoom:0,q=void 0!==L.maxZoom?L.maxZoom:28;const ut=void 0!==L.zoomFactor?L.zoomFactor:2,ht=void 0!==L.multiWorld&&L.multiWorld,_t=void 0===L.smoothResolutionConstraint||L.smoothResolutionConstraint,Tt=void 0!==L.showFullExtent&&L.showFullExtent,Lt=(0,j.UQ)(L.projection,"EPSG:3857"),Ht=Lt.getExtent();let $t=L.constrainOnlyCenter,ae=L.extent;if(!ht&&!ae&&Lt.isGlobal()&&($t=!1,ae=Ht),void 0!==L.resolutions){const Qt=L.resolutions;M=Qt[J],R=void 0!==Qt[q]?Qt[q]:Qt[Qt.length-1],p=L.constrainResolution?function l(L,p,M,R){return p=void 0===p||p,function(K,G,J,q){if(void 0!==K){const ut=L[0],ht=L[L.length-1],_t=M?f(ut,M,J,R):ut;if(q)return p?i(K,_t,ht):(0,v.uZ)(K,ht,_t);const Tt=Math.min(_t,K),Lt=Math.floor((0,s.h7)(L,Tt,G));return L[Lt]>_t&&Lt<L.length-1?L[Lt+1]:L[Lt]}}}(Qt,_t,!$t&&ae,Tt):e(M,R,_t,!$t&&ae,Tt)}else{const _e=(Ht?Math.max((0,u.dz)(Ht),(0,u.Cr)(Ht)):360*j.Wm.degrees/Lt.getMetersPerUnit())/H.S/Math.pow(2,0),Ce=_e/Math.pow(2,28);M=L.maxResolution,void 0!==M?J=0:M=_e/Math.pow(ut,J),R=L.minResolution,void 0===R&&(R=void 0!==L.maxZoom?void 0!==L.maxResolution?M/Math.pow(ut,q):_e/Math.pow(ut,q):Ce),q=J+Math.floor(Math.log(M/R)/Math.log(ut)),R=M/Math.pow(ut,q-J),p=L.constrainResolution?function m(L,p,M,R,K,G){return R=void 0===R||R,M=void 0!==M?M:0,function(J,q,ut,ht){if(void 0!==J){const _t=K?f(p,K,ut,G):p;if(ht)return R?i(J,_t,M):(0,v.uZ)(J,M,_t);const Tt=1e-9,Lt=Math.ceil(Math.log(p/_t)/Math.log(L)-Tt),Ht=-q*(.5-Tt)+.5,$t=Math.min(_t,J),ae=Math.floor(Math.log(p/$t)/Math.log(L)+Ht),Qt=Math.max(Lt,ae),_e=p/Math.pow(L,Qt);return(0,v.uZ)(_e,M,_t)}}}(ut,M,R,_t,!$t&&ae,Tt):e(M,R,_t,!$t&&ae,Tt)}return{constraint:p,maxResolution:M,minResolution:R,minZoom:J,zoomFactor:ut}}(p);this.maxResolution_=R.maxResolution,this.minResolution_=R.minResolution,this.zoomFactor_=R.zoomFactor,this.resolutions_=p.resolutions,this.padding_=p.padding,this.minZoom_=R.minZoom;const K=function O(L){if(void 0!==L.extent)return h(L.extent,L.constrainOnlyCenter,void 0===L.smoothExtentConstraint||L.smoothExtentConstraint);const p=(0,j.UQ)(L.projection,"EPSG:3857");if(!0!==L.multiWorld&&p.isGlobal()){const M=p.getExtent().slice();return M[0]=-1/0,M[2]=1/0,h(M,!1,!1)}return c}(p),G=R.constraint,J=function $(L){if(void 0===L.enableRotation||L.enableRotation){const M=L.constrainRotation;return void 0===M||!0===M?(0,P.Gw)():!1===M?P.YP:"number"==typeof M?(0,P.gE)(M):P.YP}return P.h$}(p);this.constraints_={center:K,resolution:G,rotation:J},this.setRotation(void 0!==p.rotation?p.rotation:0),this.setCenterInternal(void 0!==p.center?p.center:null),void 0!==p.resolution?this.setResolution(p.resolution):void 0!==p.zoom&&this.setZoom(p.zoom)}get padding(){return this.padding_}set padding(p){let M=this.padding_;this.padding_=p;const R=this.getCenterInternal();if(R){const K=p||[0,0,0,0];M=M||[0,0,0,0];const G=this.getResolution();this.setCenterInternal([R[0]+G/2*(K[3]-M[3]+M[1]-K[1]),R[1]-G/2*(K[0]-M[0]+M[2]-K[2])])}}getUpdatedOptions_(p){const M=this.getProperties();return void 0!==M.resolution?M.resolution=this.getResolution():M.zoom=this.getZoom(),M.center=this.getCenterInternal(),M.rotation=this.getRotation(),Object.assign({},M,p)}animate(p){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const M=new Array(arguments.length);for(let R=0;R<M.length;++R){let K=arguments[R];K.center&&(K=Object.assign({},K),K.center=(0,j.Vs)(K.center,this.getProjection())),K.anchor&&(K=Object.assign({},K),K.anchor=(0,j.Vs)(K.anchor,this.getProjection())),M[R]=K}this.animateInternal.apply(this,M)}animateInternal(p){let R,M=arguments.length;M>1&&"function"==typeof arguments[M-1]&&(R=arguments[M-1],--M);let K=0;for(;K<M&&!this.isDef();++K){const _t=arguments[K];_t.center&&this.setCenterInternal(_t.center),void 0!==_t.zoom?this.setZoom(_t.zoom):_t.resolution&&this.setResolution(_t.resolution),void 0!==_t.rotation&&this.setRotation(_t.rotation)}if(K===M)return void(R&&C(R,!0));let G=Date.now(),J=this.targetCenter_.slice(),q=this.targetResolution_,ut=this.targetRotation_;const ht=[];for(;K<M;++K){const _t=arguments[K],Tt={start:G,complete:!1,anchor:_t.anchor,duration:void 0!==_t.duration?_t.duration:1e3,easing:_t.easing||x.rd,callback:R};if(_t.center&&(Tt.sourceCenter=J,Tt.targetCenter=_t.center.slice(),J=Tt.targetCenter),void 0!==_t.zoom?(Tt.sourceResolution=q,Tt.targetResolution=this.getResolutionForZoom(_t.zoom),q=Tt.targetResolution):_t.resolution&&(Tt.sourceResolution=q,Tt.targetResolution=_t.resolution,q=Tt.targetResolution),void 0!==_t.rotation){Tt.sourceRotation=ut;const Lt=(0,v.$W)(_t.rotation-ut+Math.PI,2*Math.PI)-Math.PI;Tt.targetRotation=ut+Lt,ut=Tt.targetRotation}(L=Tt).sourceCenter&&L.targetCenter&&!(0,w.fS)(L.sourceCenter,L.targetCenter)||L.sourceResolution!==L.targetResolution||L.sourceRotation!==L.targetRotation?G+=Tt.duration:Tt.complete=!0,ht.push(Tt)}var L;this.animations_.push(ht),this.setHint(g.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[g.Z.ANIMATING]>0}getInteracting(){return this.hints_[g.Z.INTERACTING]>0}cancelAnimations(){let p;this.setHint(g.Z.ANIMATING,-this.hints_[g.Z.ANIMATING]);for(let M=0,R=this.animations_.length;M<R;++M){const K=this.animations_[M];if(K[0].callback&&C(K[0].callback,!1),!p)for(let G=0,J=K.length;G<J;++G){const q=K[G];if(!q.complete){p=q.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=p,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const p=Date.now();let M=!1;for(let R=this.animations_.length-1;R>=0;--R){const K=this.animations_[R];let G=!0;for(let J=0,q=K.length;J<q;++J){const ut=K[J];if(ut.complete)continue;const ht=p-ut.start;let _t=ut.duration>0?ht/ut.duration:1;_t>=1?(ut.complete=!0,_t=1):G=!1;const Tt=ut.easing(_t);if(ut.sourceCenter){const Lt=ut.sourceCenter[0],Ht=ut.sourceCenter[1],$t=ut.targetCenter[0],ae=ut.targetCenter[1];this.nextCenter_=ut.targetCenter,this.targetCenter_=[Lt+Tt*($t-Lt),Ht+Tt*(ae-Ht)]}if(ut.sourceResolution&&ut.targetResolution){const Lt=1===Tt?ut.targetResolution:ut.sourceResolution+Tt*(ut.targetResolution-ut.sourceResolution);if(ut.anchor){const Ht=this.getViewportSize_(this.getRotation()),$t=this.constraints_.resolution(Lt,0,Ht,!0);this.targetCenter_=this.calculateCenterZoom($t,ut.anchor)}this.nextResolution_=ut.targetResolution,this.targetResolution_=Lt,this.applyTargetState_(!0)}if(void 0!==ut.sourceRotation&&void 0!==ut.targetRotation){const Lt=1===Tt?(0,v.$W)(ut.targetRotation+Math.PI,2*Math.PI)-Math.PI:ut.sourceRotation+Tt*(ut.targetRotation-ut.sourceRotation);if(ut.anchor){const Ht=this.constraints_.rotation(Lt,!0);this.targetCenter_=this.calculateCenterRotate(Ht,ut.anchor)}this.nextRotation_=ut.targetRotation,this.targetRotation_=Lt}if(this.applyTargetState_(!0),M=!0,!ut.complete)break}if(G){this.animations_[R]=null,this.setHint(g.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const J=K[0].callback;J&&C(J,!0)}}this.animations_=this.animations_.filter(Boolean),M&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(p,M){let R;const K=this.getCenterInternal();return void 0!==K&&(R=[K[0]-M[0],K[1]-M[1]],(0,w.U1)(R,p-this.getRotation()),(0,w.IH)(R,M)),R}calculateCenterZoom(p,M){let R;const K=this.getCenterInternal(),G=this.getResolution();return void 0!==K&&void 0!==G&&(R=[M[0]-p*(M[0]-K[0])/G,M[1]-p*(M[1]-K[1])/G]),R}getViewportSize_(p){const M=this.viewportSize_;if(p){const R=M[0],K=M[1];return[Math.abs(R*Math.cos(p))+Math.abs(K*Math.sin(p)),Math.abs(R*Math.sin(p))+Math.abs(K*Math.cos(p))]}return M}setViewportSize(p){this.viewportSize_=Array.isArray(p)?p.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const p=this.getCenterInternal();return p&&(0,j.lO)(p,this.getProjection())}getCenterInternal(){return this.get(Q.Z.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(p){return void 0!==p?(p[0]=this.hints_[0],p[1]=this.hints_[1],p):this.hints_.slice()}calculateExtent(p){const M=this.calculateExtentInternal(p);return(0,j.Fj)(M,this.getProjection())}calculateExtentInternal(p){p=p||this.getViewportSizeMinusPadding_();const M=this.getCenterInternal();(0,S.h)(M,1);const R=this.getResolution();(0,S.h)(void 0!==R,2);const K=this.getRotation();return(0,S.h)(void 0!==K,3),(0,u.p8)(M,R,K,p)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(p){this.applyOptions_(this.getUpdatedOptions_({maxZoom:p}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(p){this.applyOptions_(this.getUpdatedOptions_({minZoom:p}))}setConstrainResolution(p){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:p}))}getProjection(){return this.projection_}getResolution(){return this.get(Q.Z.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(p,M){return this.getResolutionForExtentInternal((0,j.dY)(p,this.getProjection()),M)}getResolutionForExtentInternal(p,M){M=M||this.getViewportSizeMinusPadding_();const R=(0,u.dz)(p)/M[0],K=(0,u.Cr)(p)/M[1];return Math.max(R,K)}getResolutionForValueFunction(p){p=p||2;const M=this.getConstrainedResolution(this.maxResolution_),K=Math.log(M/this.minResolution_)/Math.log(p);return function(G){return M/Math.pow(p,G*K)}}getRotation(){return this.get(Q.Z.ROTATION)}getValueForResolutionFunction(p){const M=Math.log(p||2),R=this.getConstrainedResolution(this.maxResolution_),G=Math.log(R/this.minResolution_)/M;return function(J){return Math.log(R/J)/M/G}}getViewportSizeMinusPadding_(p){let M=this.getViewportSize_(p);const R=this.padding_;return R&&(M=[M[0]-R[1]-R[3],M[1]-R[0]-R[2]]),M}getState(){const p=this.getProjection(),M=this.getResolution(),R=this.getRotation();let K=this.getCenterInternal();const G=this.padding_;if(G){const J=this.getViewportSizeMinusPadding_();K=B(K,this.getViewportSize_(),[J[0]/2+G[3],J[1]/2+G[0]],M,R)}return{center:K.slice(0),projection:void 0!==p?p:null,resolution:M,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:R,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let p;const M=this.getResolution();return void 0!==M&&(p=this.getZoomForResolution(M)),p}getZoomForResolution(p){let R,K,M=this.minZoom_||0;if(this.resolutions_){const G=(0,s.h7)(this.resolutions_,p,1);M=G,R=this.resolutions_[G],K=G==this.resolutions_.length-1?2:R/this.resolutions_[G+1]}else R=this.maxResolution_,K=this.zoomFactor_;return M+Math.log(R/p)/Math.log(K)}getResolutionForZoom(p){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const M=(0,v.uZ)(Math.floor(p),0,this.resolutions_.length-2);return this.resolutions_[M]/Math.pow(this.resolutions_[M]/this.resolutions_[M+1],(0,v.uZ)(p-M,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,p-this.minZoom_)}fit(p,M){let R;if((0,S.h)(Array.isArray(p)||"function"==typeof p.getSimplifiedGeometry,24),Array.isArray(p)){(0,S.h)(!(0,u.xb)(p),25);const K=(0,j.dY)(p,this.getProjection());R=(0,T.oJ)(K)}else if("Circle"===p.getType()){const K=(0,j.dY)(p.getExtent(),this.getProjection());R=(0,T.oJ)(K),R.rotate(this.getRotation(),(0,u.qg)(K))}else{const K=(0,j.Cs)();R=K?p.clone().transform(K,this.getProjection()):p}this.fitInternal(R,M)}rotatedExtentForGeometry(p){const M=this.getRotation(),R=Math.cos(M),K=Math.sin(-M),G=p.getFlatCoordinates(),J=p.getStride();let q=1/0,ut=1/0,ht=-1/0,_t=-1/0;for(let Tt=0,Lt=G.length;Tt<Lt;Tt+=J){const Ht=G[Tt]*R-G[Tt+1]*K,$t=G[Tt]*K+G[Tt+1]*R;q=Math.min(q,Ht),ut=Math.min(ut,$t),ht=Math.max(ht,Ht),_t=Math.max(_t,$t)}return[q,ut,ht,_t]}fitInternal(p,M){let R=(M=M||{}).size;R||(R=this.getViewportSizeMinusPadding_());const K=void 0!==M.padding?M.padding:[0,0,0,0],G=void 0!==M.nearest&&M.nearest;let J;J=void 0!==M.minResolution?M.minResolution:void 0!==M.maxZoom?this.getResolutionForZoom(M.maxZoom):0;const q=this.rotatedExtentForGeometry(p);let ut=this.getResolutionForExtentInternal(q,[R[0]-K[1]-K[3],R[1]-K[0]-K[2]]);ut=isNaN(ut)?J:Math.max(ut,J),ut=this.getConstrainedResolution(ut,G?0:1);const ht=this.getRotation(),_t=Math.sin(ht),Tt=Math.cos(ht),Lt=(0,u.qg)(q);Lt[0]+=(K[1]-K[3])/2*ut,Lt[1]+=(K[0]-K[2])/2*ut;const ae=this.getConstrainedCenter([Lt[0]*Tt-Lt[1]*_t,Lt[1]*Tt+Lt[0]*_t],ut),Qt=M.callback?M.callback:N.Zn;void 0!==M.duration?this.animateInternal({resolution:ut,center:ae,duration:M.duration,easing:M.easing},Qt):(this.targetResolution_=ut,this.targetCenter_=ae,this.applyTargetState_(!1,!0),C(Qt,!0))}centerOn(p,M,R){this.centerOnInternal((0,j.Vs)(p,this.getProjection()),M,R)}centerOnInternal(p,M,R){this.setCenterInternal(B(p,M,R,this.getResolution(),this.getRotation()))}calculateCenterShift(p,M,R,K){let G;const J=this.padding_;if(J&&p){const q=this.getViewportSizeMinusPadding_(-R),ut=B(p,K,[q[0]/2+J[3],q[1]/2+J[0]],M,R);G=[p[0]-ut[0],p[1]-ut[1]]}return G}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(p){const M=(0,j.lO)(this.targetCenter_,this.getProjection());this.setCenter([M[0]+p[0],M[1]+p[1]])}adjustCenterInternal(p){const M=this.targetCenter_;this.setCenterInternal([M[0]+p[0],M[1]+p[1]])}adjustResolution(p,M){M=M&&(0,j.Vs)(M,this.getProjection()),this.adjustResolutionInternal(p,M)}adjustResolutionInternal(p,M){const R=this.getAnimating()||this.getInteracting(),K=this.getViewportSize_(this.getRotation()),G=this.constraints_.resolution(this.targetResolution_*p,0,K,R);M&&(this.targetCenter_=this.calculateCenterZoom(G,M)),this.targetResolution_*=p,this.applyTargetState_()}adjustZoom(p,M){this.adjustResolution(Math.pow(this.zoomFactor_,-p),M)}adjustRotation(p,M){M&&(M=(0,j.Vs)(M,this.getProjection())),this.adjustRotationInternal(p,M)}adjustRotationInternal(p,M){const R=this.getAnimating()||this.getInteracting(),K=this.constraints_.rotation(this.targetRotation_+p,R);M&&(this.targetCenter_=this.calculateCenterRotate(K,M)),this.targetRotation_+=p,this.applyTargetState_()}setCenter(p){this.setCenterInternal(p&&(0,j.Vs)(p,this.getProjection()))}setCenterInternal(p){this.targetCenter_=p,this.applyTargetState_()}setHint(p,M){return this.hints_[p]+=M,this.changed(),this.hints_[p]}setResolution(p){this.targetResolution_=p,this.applyTargetState_()}setRotation(p){this.targetRotation_=p,this.applyTargetState_()}setZoom(p){this.setResolution(this.getResolutionForZoom(p))}applyTargetState_(p,M){const R=this.getAnimating()||this.getInteracting()||M,K=this.constraints_.rotation(this.targetRotation_,R),G=this.getViewportSize_(K),J=this.constraints_.resolution(this.targetResolution_,0,G,R),q=this.constraints_.center(this.targetCenter_,J,G,R,this.calculateCenterShift(this.targetCenter_,J,K,G));this.get(Q.Z.ROTATION)!==K&&this.set(Q.Z.ROTATION,K),this.get(Q.Z.RESOLUTION)!==J&&(this.set(Q.Z.RESOLUTION,J),this.set("zoom",this.getZoom(),!0)),(!q||!this.get(Q.Z.CENTER)||!(0,w.fS)(this.get(Q.Z.CENTER),q))&&this.set(Q.Z.CENTER,q),this.getAnimating()&&!p&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(p,M,R){p=void 0!==p?p:200;const K=M||0,G=this.constraints_.rotation(this.targetRotation_),J=this.getViewportSize_(G),q=this.constraints_.resolution(this.targetResolution_,K,J),ut=this.constraints_.center(this.targetCenter_,q,J,!1,this.calculateCenterShift(this.targetCenter_,q,G,J));if(0===p&&!this.cancelAnchor_)return this.targetResolution_=q,this.targetRotation_=G,this.targetCenter_=ut,void this.applyTargetState_();R=R||(0===p?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==q||this.getRotation()!==G||!this.getCenterInternal()||!(0,w.fS)(this.getCenterInternal(),ut))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:G,center:ut,resolution:q,duration:p,easing:x.Vv,anchor:R}))}beginInteraction(){this.resolveConstraints(0),this.setHint(g.Z.INTERACTING,1)}endInteraction(p,M,R){R=R&&(0,j.Vs)(R,this.getProjection()),this.endInteractionInternal(p,M,R)}endInteractionInternal(p,M,R){!this.getInteracting()||(this.setHint(g.Z.INTERACTING,-1),this.resolveConstraints(p,M,R))}getConstrainedCenter(p,M){const R=this.getViewportSize_(this.getRotation());return this.constraints_.center(p,M||this.getResolution(),R)}getConstrainedZoom(p,M){const R=this.getResolutionForZoom(p);return this.getZoomForResolution(this.getConstrainedResolution(R,M))}getConstrainedResolution(p,M){M=M||0;const R=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(p,M,R)}}},9500:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={ANIMATING:0,INTERACTING:1}},1266:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},142:(Vt,gt,r)=>{"use strict";function _(h,c,u){let s,f;u=u||g;let i=0,l=h.length,m=!1;for(;i<l;)s=i+(l-i>>1),f=+u(h[s],c),f<0?i=s+1:(l=s,m=!f);return m?i:~i}function g(h,c){return h>c?1:h<c?-1:0}function Q(h,c,u){const s=h.length;if(h[0]<=c)return 0;if(c<=h[s-1])return s-1;let f;if(u>0){for(f=1;f<s;++f)if(h[f]<c)return f-1}else if(u<0){for(f=1;f<s;++f)if(h[f]<=c)return f}else for(f=1;f<s;++f){if(h[f]==c)return f;if(h[f]<c)return"function"==typeof u?u(c,h[f-1],h[f])>0?f-1:f:h[f-1]-c<c-h[f]?f-1:f}return s-1}function H(h,c,u){for(;c<u;){const s=h[c];h[c]=h[u],h[u]=s,++c,--u}}function j(h,c){const u=Array.isArray(c)?c:[c],s=u.length;for(let f=0;f<s;f++)h[h.length]=u[f]}function w(h,c){const u=h.length;if(u!==c.length)return!1;for(let s=0;s<u;s++)if(h[s]!==c[s])return!1;return!0}function v(h,c,u){const s=c||g;return h.every(function(f,i){if(0===i)return!0;const l=s(h[i-1],f);return!(l>0||u&&0===l)})}r.d(gt,{FZ:()=>H,fS:()=>w,h7:()=>Q,j2:()=>g,l7:()=>j,pT:()=>v,ry:()=>_})},992:(Vt,gt,r)=>{"use strict";r.d(gt,{h:()=>g});var _=r(1955);function g(Q,H){if(!Q)throw new _.Z(H)}},866:(Vt,gt,r)=>{"use strict";r.d(gt,{BB:()=>c,XC:()=>j,_2:()=>S});var _=r(992),g=r(4331);const Q=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,H=/^([a-z]*)$|^hsla?\(.*\)$/i;function j(s){return"string"==typeof s?s:c(s)}const w=function(){const f={};let i=0;return function(l){let m;if(f.hasOwnProperty(l))m=f[l];else{if(i>=1024){let e=0;for(const P in f)0==(3&e++)&&(delete f[P],--i)}m=function v(s){let f,i,l,m,e;if(H.exec(s)&&(s=function N(s){const f=document.createElement("div");if(f.style.color=s,""!==f.style.color){document.body.appendChild(f);const i=getComputedStyle(f).color;return document.body.removeChild(f),i}return""}(s)),Q.exec(s)){const P=s.length-1;let x;x=P<=4?1:2;const T=4===P||8===P;f=parseInt(s.substr(1+0*x,x),16),i=parseInt(s.substr(1+1*x,x),16),l=parseInt(s.substr(1+2*x,x),16),m=T?parseInt(s.substr(1+3*x,x),16):255,1==x&&(f=(f<<4)+f,i=(i<<4)+i,l=(l<<4)+l,T&&(m=(m<<4)+m)),e=[f,i,l,m/255]}else s.startsWith("rgba(")?(e=s.slice(5,-1).split(",").map(Number),h(e)):s.startsWith("rgb(")?(e=s.slice(4,-1).split(",").map(Number),e.push(1),h(e)):(0,_.h)(!1,14);return e}(l),f[l]=m,++i}return m}}();function S(s){return Array.isArray(s)?s:w(s)}function h(s){return s[0]=(0,g.uZ)(s[0]+.5|0,0,255),s[1]=(0,g.uZ)(s[1]+.5|0,0,255),s[2]=(0,g.uZ)(s[2]+.5|0,0,255),s[3]=(0,g.uZ)(s[3],0,1),s}function c(s){let f=s[0];f!=(0|f)&&(f=f+.5|0);let i=s[1];i!=(0|i)&&(i=i+.5|0);let l=s[2];return l!=(0|l)&&(l=l+.5|0),"rgba("+f+","+i+","+l+","+(void 0===s[3]?1:Math.round(100*s[3])/100)+")"}},4890:(Vt,gt,r)=>{"use strict";r.d(gt,{y:()=>g});var _=r(866);function g(Q){return Array.isArray(Q)?(0,_.BB)(Q):Q}},246:(Vt,gt,r)=>{"use strict";r.d(gt,{ZK:()=>j});const __warn=2;let g=1;function j(...w){g>__warn||console.warn(...w)}},9633:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>w});var _=r(6581),g=r(3044),Q=r(1119),H=r(142),j=r(3842);const w=class N extends _.Z{constructor(v){v=v||{},super({element:document.createElement("div"),render:v.render,target:v.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===v.collapsed||v.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==v.collapsible,this.collapsible_=void 0===v.collapsible||v.collapsible,this.collapsible_||(this.collapsed_=!1);const h=void 0!==v.className?v.className:"ol-attribution",c=void 0!==v.tipLabel?v.tipLabel:"Attributions",u=void 0!==v.expandClassName?v.expandClassName:h+"-expand",s=void 0!==v.collapseLabel?v.collapseLabel:"\u203a",f=void 0!==v.collapseClassName?v.collapseClassName:h+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=f):this.collapseLabel_=s;const i=void 0!==v.label?v.label:"i";"string"==typeof i?(this.label_=document.createElement("span"),this.label_.textContent=i,this.label_.className=u):this.label_=i;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=c,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(g.Z.CLICK,this.handleClick_.bind(this),!1);const e=this.element;e.className=h+" "+Q.XV+" "+Q.hg+(this.collapsed_&&this.collapsible_?" "+Q.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),e.appendChild(this.toggleButton_),e.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(v){const h=Array.from(new Set(this.getMap().getAllLayers().flatMap(u=>u.getAttributions(v)))),c=!this.getMap().getAllLayers().some(u=>u.getSource()&&!1===u.getSource().getAttributionsCollapsible());return this.overrideCollapsible_||this.setCollapsible(c),h}updateElement_(v){if(!v)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const h=this.collectSourceAttributions_(v),c=h.length>0;if(this.renderedVisible_!=c&&(this.element.style.display=c?"":"none",this.renderedVisible_=c),!(0,H.fS)(h,this.renderedAttributions_)){(0,j.ep)(this.ulElement_);for(let u=0,s=h.length;u<s;++u){const f=document.createElement("li");f.innerHTML=h[u],this.ulElement_.appendChild(f)}this.renderedAttributions_=h}}handleClick_(v){v.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Q.hN),this.collapsed_?(0,j.$H)(this.collapseLabel_,this.label_):(0,j.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(v){this.collapsible_!==v&&(this.collapsible_=v,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(v){this.userCollapsed_=v,this.collapsible_&&this.collapsed_!==v&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(v){this.updateElement_(v.frameState)}}},6581:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>w});var _=r(4115),g=r(9806),Q=r(1334),H=r(2716),j=r(3842);const w=class N extends _.Z{constructor(v){super();const h=v.element;h&&!v.target&&!h.style.pointerEvents&&(h.style.pointerEvents="auto"),this.element=h||null,this.target_=null,this.map_=null,this.listenerKeys=[],v.render&&(this.render=v.render),v.target&&this.setTarget(v.target)}disposeInternal(){(0,j.ZF)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(v){this.map_&&(0,j.ZF)(this.element);for(let h=0,c=this.listenerKeys.length;h<c;++h)(0,H.bN)(this.listenerKeys[h]);this.listenerKeys.length=0,this.map_=v,v&&((this.target_?this.target_:v.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Q.Zn&&this.listenerKeys.push((0,H.oL)(v,g.Z.POSTRENDER,this.render,this)),v.render())}render(v){}setTarget(v){this.target_="string"==typeof v?document.getElementById(v):v}}},5267:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>N});var _=r(6581),g=r(3044),Q=r(1119),H=r(4720);const N=class j extends _.Z{constructor(S){S=S||{},super({element:document.createElement("div"),render:S.render,target:S.target});const v=void 0!==S.className?S.className:"ol-rotate",h=void 0!==S.label?S.label:"\u21e7",c=void 0!==S.compassClassName?S.compassClassName:"ol-compass";this.label_=null,"string"==typeof h?(this.label_=document.createElement("span"),this.label_.className=c,this.label_.textContent=h):(this.label_=h,this.label_.classList.add(c));const u=S.tipLabel?S.tipLabel:"Reset rotation",s=document.createElement("button");s.className=v+"-reset",s.setAttribute("type","button"),s.title=u,s.appendChild(this.label_),s.addEventListener(g.Z.CLICK,this.handleClick_.bind(this),!1);const i=this.element;i.className=v+" "+Q.XV+" "+Q.hg,i.appendChild(s),this.callResetNorth_=S.resetNorth?S.resetNorth:void 0,this.duration_=void 0!==S.duration?S.duration:250,this.autoHide_=void 0===S.autoHide||S.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Q.oj)}handleClick_(S){S.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const v=this.getMap().getView();if(!v)return;const h=v.getRotation();void 0!==h&&(this.duration_>0&&h%(2*Math.PI)!=0?v.animate({rotation:0,duration:this.duration_,easing:H.Vv}):v.setRotation(0))}render(S){const v=S.frameState;if(!v)return;const h=v.viewState.rotation;if(h!=this.rotation_){const c="rotate("+h+"rad)";if(this.autoHide_){const u=this.element.classList.contains(Q.oj);u||0!==h?u&&0!==h&&this.element.classList.remove(Q.oj):this.element.classList.add(Q.oj)}this.label_.style.transform=c}this.rotation_=h}}},1014:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>N});var _=r(6581),g=r(3044),Q=r(1119),H=r(4720);const N=class j extends _.Z{constructor(S){S=S||{},super({element:document.createElement("div"),target:S.target});const v=void 0!==S.className?S.className:"ol-zoom",h=void 0!==S.delta?S.delta:1,c=void 0!==S.zoomInClassName?S.zoomInClassName:v+"-in",u=void 0!==S.zoomOutClassName?S.zoomOutClassName:v+"-out",s=void 0!==S.zoomInLabel?S.zoomInLabel:"+",f=void 0!==S.zoomOutLabel?S.zoomOutLabel:"\u2013",i=void 0!==S.zoomInTipLabel?S.zoomInTipLabel:"Zoom in",l=void 0!==S.zoomOutTipLabel?S.zoomOutTipLabel:"Zoom out",m=document.createElement("button");m.className=c,m.setAttribute("type","button"),m.title=i,m.appendChild("string"==typeof s?document.createTextNode(s):s),m.addEventListener(g.Z.CLICK,this.handleClick_.bind(this,h),!1);const e=document.createElement("button");e.className=u,e.setAttribute("type","button"),e.title=l,e.appendChild("string"==typeof f?document.createTextNode(f):f),e.addEventListener(g.Z.CLICK,this.handleClick_.bind(this,-h),!1);const x=this.element;x.className=v+" "+Q.XV+" "+Q.hg,x.appendChild(m),x.appendChild(e),this.duration_=void 0!==S.duration?S.duration:250}handleClick_(S,v){v.preventDefault(),this.zoomByDelta_(S)}zoomByDelta_(S){const h=this.getMap().getView();if(!h)return;const c=h.getZoom();if(void 0!==c){const u=h.getConstrainedZoom(c+S);this.duration_>0?(h.getAnimating()&&h.cancelAnimations(),h.animate({zoom:u,duration:this.duration_,easing:H.Vv})):h.setZoom(u)}}}},5415:(Vt,gt,r)=>{"use strict";r.d(gt,{Cf:()=>e,I8:()=>S,IH:()=>H,U1:()=>c,bA:()=>u,fS:()=>h,jk:()=>P,yZ:()=>m});var _=r(9543),g=r(4331),Q=r(7531);function H(x,T){return x[0]+=+T[0],x[1]+=+T[1],x}function S(x,T,U){const D=(0,g.$W)(T+180,360)-180,C=Math.abs(3600*D),O=U||0;let X=Math.floor(C/3600),$=Math.floor((C-3600*X)/60),dt=(0,g.FH)(C-3600*X-60*$,O);dt>=60&&(dt=0,$+=1),$>=60&&($=0,X+=1);let B=X+"\xb0";return(0!==$||0!==dt)&&(B+=" "+(0,Q.v)($,2)+"\u2032"),0!==dt&&(B+=" "+(0,Q.v)(dt,2,O)+"\u2033"),0!==D&&(B+=" "+x.charAt(D<0?1:0)),B}function h(x,T){let U=!0;for(let D=x.length-1;D>=0;--D)if(x[D]!=T[D]){U=!1;break}return U}function c(x,T){const U=Math.cos(T),D=Math.sin(T),O=x[1]*U+x[0]*D;return x[0]=x[0]*U-x[1]*D,x[1]=O,x}function u(x,T){return x[0]*=T,x[1]*=T,x}function m(x,T){return function v(x,T,U){return x?T.replace("{x}",x[0].toFixed(U)).replace("{y}",x[1].toFixed(U)):""}(x,"{x}, {y}",T)}function e(x,T){if(T.canWrapX()){const U=(0,_.dz)(T.getExtent()),D=P(x,T,U);D&&(x[0]-=D*U)}return x}function P(x,T,U){const D=T.getExtent();let C=0;return T.canWrapX()&&(x[0]<D[0]||x[0]>D[2])&&(U=U||(0,_.dz)(D),C=Math.floor((x[0]-D[0])/U)),C}},1119:(Vt,gt,r)=>{"use strict";r.d(gt,{$A:()=>g,Qi:()=>H,XV:()=>Q,hN:()=>N,hg:()=>j,oj:()=>_,p:()=>v});const _="ol-hidden",g="ol-selectable",Q="ol-unselectable",H="ol-unsupported",j="ol-control",N="ol-collapsed",w=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),S=["style","variant","weight","size","lineHeight","family"],v=function(h){const c=h.match(w);if(!c)return null;const u={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let s=0,f=S.length;s<f;++s){const i=c[s+1];void 0!==i&&(u[S[s]]=i)}return u.families=u.family.split(/,\s?/),u}},3842:(Vt,gt,r)=>{"use strict";r.d(gt,{$H:()=>N,E4:()=>g,Pb:()=>j,ZF:()=>w,ep:()=>S,hF:()=>v,iO:()=>H,jy:()=>Q});var _=r(5063);function g(h,c,u,s){let f;return f=u&&u.length?u.shift():_.Id?new OffscreenCanvas(h||300,c||300):document.createElement("canvas"),h&&(f.width=h),c&&(f.height=c),f.getContext("2d",s)}function Q(h){const c=h.canvas;c.width=1,c.height=1,h.clearRect(0,0,1,1)}function H(h){let c=h.offsetWidth;const u=getComputedStyle(h);return c+=parseInt(u.marginLeft,10)+parseInt(u.marginRight,10),c}function j(h){let c=h.offsetHeight;const u=getComputedStyle(h);return c+=parseInt(u.marginTop,10)+parseInt(u.marginBottom,10),c}function N(h,c){const u=c.parentNode;u&&u.replaceChild(h,c)}function w(h){return h&&h.parentNode?h.parentNode.removeChild(h):null}function S(h){for(;h.lastChild;)h.removeChild(h.lastChild)}function v(h,c){const u=h.childNodes;for(let s=0;;++s){const f=u[s],i=c[s];if(!f&&!i)break;if(f!==i){if(!f){h.appendChild(i);continue}if(!i){h.removeChild(f),--s;continue}h.insertBefore(i,f)}}}},4720:(Vt,gt,r)=>{"use strict";function _(N){return Math.pow(N,3)}function g(N){return 1-_(1-N)}function Q(N){return 3*N*N-2*N*N*N}function H(N){return N}r.d(gt,{GE:()=>H,Vv:()=>g,YQ:()=>_,rd:()=>Q})},2716:(Vt,gt,r)=>{"use strict";r.d(gt,{Vx:()=>Q,bN:()=>H,oL:()=>g});var _=r(9306);function g(j,N,w,S,v){if(S&&S!==j&&(w=w.bind(S)),v){const c=w;w=function(){j.removeEventListener(N,w),c.apply(this,arguments)}}const h={target:j,type:N,listener:w};return j.addEventListener(N,w),h}function Q(j,N,w,S){return g(j,N,w,S,!0)}function H(j){j&&j.target&&(j.target.removeEventListener(j.type,j.listener),(0,_.Z)(j))}},3615:(Vt,gt,r)=>{"use strict";r.d(gt,{ZP:()=>H});const H=class _{constructor(N){this.type=N,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},3044:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},1398:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>N});var _=r(6450),g=r(3615),Q=r(1334),H=r(9306);const N=class j extends _.Z{constructor(S){super(),this.eventTarget_=S,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(S,v){if(!S||!v)return;const h=this.listeners_||(this.listeners_={}),c=h[S]||(h[S]=[]);c.includes(v)||c.push(v)}dispatchEvent(S){const v="string"==typeof S,h=v?S:S.type,c=this.listeners_&&this.listeners_[h];if(!c)return;const u=v?new g.ZP(S):S;u.target||(u.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),f=this.pendingRemovals_||(this.pendingRemovals_={});let i;h in s||(s[h]=0,f[h]=0),++s[h];for(let l=0,m=c.length;l<m;++l)if(i="handleEvent"in c[l]?c[l].handleEvent(u):c[l].call(this,u),!1===i||u.propagationStopped){i=!1;break}if(0==--s[h]){let l=f[h];for(delete f[h];l--;)this.removeEventListener(h,Q.Zn);delete s[h]}return i}disposeInternal(){this.listeners_&&(0,H.Z)(this.listeners_)}getListeners(S){return this.listeners_&&this.listeners_[S]||void 0}hasListener(S){return!!this.listeners_&&(S?S in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(S,v){const h=this.listeners_&&this.listeners_[S];if(h){const c=h.indexOf(v);-1!==c&&(this.pendingRemovals_&&S in this.pendingRemovals_?(h[c]=Q.Zn,++this.pendingRemovals_[S]):(h.splice(c,1),0===h.length&&delete this.listeners_[S]))}}}},7963:(Vt,gt,r)=>{"use strict";r.d(gt,{$6:()=>H,Bx:()=>v,QL:()=>x,TN:()=>P,Xp:()=>D,aj:()=>N,rM:()=>l,v8:()=>c,vY:()=>e,yZ:()=>S});var _=r(1334),g=r(5063),Q=r(992);function H(C){const O=arguments;return function(X){let $=!0;for(let dt=0,B=O.length;dt<B&&($=$&&O[dt](X),$);++dt);return $}}const N=function(C){const O=C.originalEvent;return O.altKey&&!(O.metaKey||O.ctrlKey)&&O.shiftKey},S=function(C){return!C.map.getTargetElement().hasAttribute("tabindex")||function(C){const O=C.map.getTargetElement(),X=C.map.getOwnerDocument().activeElement;return O.contains(X)}(C)},v=_.uX,c=function(C){const O=C.originalEvent;return 0==O.button&&!(g.G$&&g.tK&&O.ctrlKey)},l=function(C){const O=C.originalEvent;return!O.altKey&&!(O.metaKey||O.ctrlKey)&&!O.shiftKey},e=function(C){const O=C.originalEvent;return!O.altKey&&!(O.metaKey||O.ctrlKey)&&O.shiftKey},P=function(C){const O=C.originalEvent,X=O.target.tagName;return"INPUT"!==X&&"SELECT"!==X&&"TEXTAREA"!==X&&!O.target.isContentEditable},x=function(C){const O=C.originalEvent;return(0,Q.h)(void 0!==O,56),"mouse"==O.pointerType},D=function(C){const O=C.originalEvent;return(0,Q.h)(void 0!==O,56),O.isPrimary&&0===O.button}},9543:(Vt,gt,r)=>{"use strict";r.d(gt,{Cf:()=>xe,Cr:()=>G,EO:()=>ae,Ed:()=>q,GN:()=>m,H6:()=>$,H9:()=>Qt,HK:()=>i,I7:()=>_e,MV:()=>Ze,Ne:()=>Ce,T9:()=>s,Wj:()=>U,Xv:()=>Tt,YN:()=>f,b8:()=>S,bg:()=>dt,d9:()=>N,dY:()=>K,dz:()=>Lt,f3:()=>j,fS:()=>P,g0:()=>p,hC:()=>B,hI:()=>Q,iW:()=>x,jE:()=>h,kK:()=>Ht,l7:()=>T,lJ:()=>u,p8:()=>R,pX:()=>c,qP:()=>C,qf:()=>w,qg:()=>L,r4:()=>v,rL:()=>_t,w$:()=>k,xb:()=>$t});var _=r(8326),g=r(992);function Q(xt){const Nt=[1/0,1/0,-1/0,-1/0];for(let Bt=0,ie=xt.length;Bt<ie;++Bt)U(Nt,xt[Bt]);return Nt}function j(xt,Nt,Bt){return Bt?(Bt[0]=xt[0]-Nt,Bt[1]=xt[1]-Nt,Bt[2]=xt[2]+Nt,Bt[3]=xt[3]+Nt,Bt):[xt[0]-Nt,xt[1]-Nt,xt[2]+Nt,xt[3]+Nt]}function N(xt,Nt){return Nt?(Nt[0]=xt[0],Nt[1]=xt[1],Nt[2]=xt[2],Nt[3]=xt[3],Nt):xt.slice()}function w(xt,Nt,Bt){let ie,Te;return ie=Nt<xt[0]?xt[0]-Nt:xt[2]<Nt?Nt-xt[2]:0,Te=Bt<xt[1]?xt[1]-Bt:xt[3]<Bt?Bt-xt[3]:0,ie*ie+Te*Te}function S(xt,Nt){return h(xt,Nt[0],Nt[1])}function v(xt,Nt){return xt[0]<=Nt[0]&&Nt[2]<=xt[2]&&xt[1]<=Nt[1]&&Nt[3]<=xt[3]}function h(xt,Nt,Bt){return xt[0]<=Nt&&Nt<=xt[2]&&xt[1]<=Bt&&Bt<=xt[3]}function c(xt,Nt){const Mt=Nt[0],Dt=Nt[1];let Kt=_.Z.UNKNOWN;return Mt<xt[0]?Kt|=_.Z.LEFT:Mt>xt[2]&&(Kt|=_.Z.RIGHT),Dt<xt[1]?Kt|=_.Z.BELOW:Dt>xt[3]&&(Kt|=_.Z.ABOVE),Kt===_.Z.UNKNOWN&&(Kt=_.Z.INTERSECTING),Kt}function u(){return[1/0,1/0,-1/0,-1/0]}function s(xt,Nt,Bt,ie,Te){return Te?(Te[0]=xt,Te[1]=Nt,Te[2]=Bt,Te[3]=ie,Te):[xt,Nt,Bt,ie]}function f(xt){return s(1/0,1/0,-1/0,-1/0,xt)}function i(xt,Nt){const Bt=xt[0],ie=xt[1];return s(Bt,ie,Bt,ie,Nt)}function m(xt,Nt,Bt,ie,Te){return C(f(Te),xt,Nt,Bt,ie)}function P(xt,Nt){return xt[0]==Nt[0]&&xt[2]==Nt[2]&&xt[1]==Nt[1]&&xt[3]==Nt[3]}function x(xt,Nt,Bt){return Math.abs(xt[0]-Nt[0])<Bt&&Math.abs(xt[2]-Nt[2])<Bt&&Math.abs(xt[1]-Nt[1])<Bt&&Math.abs(xt[3]-Nt[3])<Bt}function T(xt,Nt){return Nt[0]<xt[0]&&(xt[0]=Nt[0]),Nt[2]>xt[2]&&(xt[2]=Nt[2]),Nt[1]<xt[1]&&(xt[1]=Nt[1]),Nt[3]>xt[3]&&(xt[3]=Nt[3]),xt}function U(xt,Nt){Nt[0]<xt[0]&&(xt[0]=Nt[0]),Nt[0]>xt[2]&&(xt[2]=Nt[0]),Nt[1]<xt[1]&&(xt[1]=Nt[1]),Nt[1]>xt[3]&&(xt[3]=Nt[1])}function C(xt,Nt,Bt,ie,Te){for(;Bt<ie;Bt+=Te)X(xt,Nt[Bt],Nt[Bt+1]);return xt}function X(xt,Nt,Bt){xt[0]=Math.min(xt[0],Nt),xt[1]=Math.min(xt[1],Bt),xt[2]=Math.max(xt[2],Nt),xt[3]=Math.max(xt[3],Bt)}function $(xt,Nt){let Bt;return Bt=Nt(B(xt)),!!(Bt||(Bt=Nt(k(xt)),Bt)||(Bt=Nt(Tt(xt)),Bt)||(Bt=Nt(_t(xt)),Bt))&&Bt}function dt(xt){let Nt=0;return $t(xt)||(Nt=Lt(xt)*G(xt)),Nt}function B(xt){return[xt[0],xt[1]]}function k(xt){return[xt[2],xt[1]]}function L(xt){return[(xt[0]+xt[2])/2,(xt[1]+xt[3])/2]}function p(xt,Nt){let Bt;return"bottom-left"===Nt?Bt=B(xt):"bottom-right"===Nt?Bt=k(xt):"top-left"===Nt?Bt=_t(xt):"top-right"===Nt?Bt=Tt(xt):(0,g.h)(!1,13),Bt}function R(xt,Nt,Bt,ie,Te){const[he,Mt,Dt,Kt,Yt,Jt,ye,Pe]=K(xt,Nt,Bt,ie);return s(Math.min(he,Dt,Yt,ye),Math.min(Mt,Kt,Jt,Pe),Math.max(he,Dt,Yt,ye),Math.max(Mt,Kt,Jt,Pe),Te)}function K(xt,Nt,Bt,ie){const Te=Nt*ie[0]/2,he=Nt*ie[1]/2,Mt=Math.cos(Bt),Dt=Math.sin(Bt),Kt=Te*Mt,Yt=Te*Dt,Jt=he*Mt,ye=he*Dt,Pe=xt[0],ze=xt[1];return[Pe-Kt+ye,ze-Yt-Jt,Pe-Kt-ye,ze-Yt+Jt,Pe+Kt-ye,ze+Yt+Jt,Pe+Kt+ye,ze+Yt-Jt,Pe-Kt+ye,ze-Yt-Jt]}function G(xt){return xt[3]-xt[1]}function q(xt,Nt,Bt){const ie=Bt||[1/0,1/0,-1/0,-1/0];return Ht(xt,Nt)?(ie[0]=xt[0]>Nt[0]?xt[0]:Nt[0],ie[1]=xt[1]>Nt[1]?xt[1]:Nt[1],ie[2]=xt[2]<Nt[2]?xt[2]:Nt[2],ie[3]=xt[3]<Nt[3]?xt[3]:Nt[3]):f(ie),ie}function _t(xt){return[xt[0],xt[3]]}function Tt(xt){return[xt[2],xt[3]]}function Lt(xt){return xt[2]-xt[0]}function Ht(xt,Nt){return xt[0]<=Nt[2]&&xt[2]>=Nt[0]&&xt[1]<=Nt[3]&&xt[3]>=Nt[1]}function $t(xt){return xt[2]<xt[0]||xt[3]<xt[1]}function ae(xt,Nt){return Nt?(Nt[0]=xt[0],Nt[1]=xt[1],Nt[2]=xt[2],Nt[3]=xt[3],Nt):xt}function Qt(xt,Nt){const Bt=(xt[2]-xt[0])/2*(Nt-1),ie=(xt[3]-xt[1])/2*(Nt-1);xt[0]-=Bt,xt[2]+=Bt,xt[1]-=ie,xt[3]+=ie}function _e(xt,Nt,Bt){let ie=!1;const Te=c(xt,Nt),he=c(xt,Bt);if(Te===_.Z.INTERSECTING||he===_.Z.INTERSECTING)ie=!0;else{const Mt=xt[0],Dt=xt[1],Kt=xt[2],Yt=xt[3],Pe=Bt[0],ze=Bt[1],He=(ze-Nt[1])/(Pe-Nt[0]);let Zt,Et;!!(he&_.Z.ABOVE)&&!(Te&_.Z.ABOVE)&&(Zt=Pe-(ze-Yt)/He,ie=Zt>=Mt&&Zt<=Kt),!ie&&!!(he&_.Z.RIGHT)&&!(Te&_.Z.RIGHT)&&(Et=ze-(Pe-Kt)*He,ie=Et>=Dt&&Et<=Yt),!ie&&!!(he&_.Z.BELOW)&&!(Te&_.Z.BELOW)&&(Zt=Pe-(ze-Dt)/He,ie=Zt>=Mt&&Zt<=Kt),!ie&&he&_.Z.LEFT&&!(Te&_.Z.LEFT)&&(Et=ze-(Pe-Mt)*He,ie=Et>=Dt&&Et<=Yt)}return ie}function Ce(xt,Nt,Bt,ie){let Te=[];if(ie>1){const Dt=xt[2]-xt[0],Kt=xt[3]-xt[1];for(let Yt=0;Yt<ie;++Yt)Te.push(xt[0]+Dt*Yt/ie,xt[1],xt[2],xt[1]+Kt*Yt/ie,xt[2]-Dt*Yt/ie,xt[3],xt[0],xt[3]-Kt*Yt/ie)}else Te=[xt[0],xt[1],xt[2],xt[1],xt[2],xt[3],xt[0],xt[3]];Nt(Te,Te,2);const he=[],Mt=[];for(let Dt=0,Kt=Te.length;Dt<Kt;Dt+=2)he.push(Te[Dt]),Mt.push(Te[Dt+1]);return function H(xt,Nt,Bt){return s(Math.min.apply(null,xt),Math.min.apply(null,Nt),Math.max.apply(null,xt),Math.max.apply(null,Nt),Bt)}(he,Mt,Bt)}function xe(xt,Nt){const Bt=Nt.getExtent(),ie=L(xt);if(Nt.canWrapX()&&(ie[0]<Bt[0]||ie[0]>=Bt[2])){const Te=Lt(Bt),Mt=Math.floor((ie[0]-Bt[0])/Te)*Te;xt[0]-=Mt,xt[2]-=Mt}return xt}function Ze(xt,Nt){if(Nt.canWrapX()){const Bt=Nt.getExtent();if(!isFinite(xt[0])||!isFinite(xt[2]))return[[Bt[0],xt[1],Bt[2],xt[3]]];xe(xt,Nt);const ie=Lt(Bt);if(Lt(xt)>ie)return[[Bt[0],xt[1],Bt[2],xt[3]]];if(xt[0]<Bt[0])return[[xt[0]+ie,xt[1],Bt[2],xt[3]],[Bt[0],xt[1],xt[2],xt[3]]];if(xt[2]>Bt[2])return[[xt[0],xt[1],Bt[2],xt[3]],[Bt[0],xt[1],xt[2]-ie,xt[3]]]}return[xt]}},8326:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},75:(Vt,gt,r)=>{"use strict";r.d(gt,{Be:()=>H,ov:()=>Q});var _=r(1334);function Q(N,w,S,v,h,c,u){const s=new XMLHttpRequest;s.open("GET","function"==typeof N?N(S,v,h):N,!0),"arraybuffer"==w.getType()&&(s.responseType="arraybuffer"),s.withCredentials=false,s.onload=function(f){if(!s.status||s.status>=200&&s.status<300){const i=w.getType();let l;"json"==i||"text"==i?l=s.responseText:"xml"==i?(l=s.responseXML,l||(l=(new DOMParser).parseFromString(s.responseText,"application/xml"))):"arraybuffer"==i&&(l=s.response),l?c(w.readFeatures(l,{extent:S,featureProjection:h}),w.readProjection(l)):u()}else u()},s.onerror=u,s.send()}function H(N,w){return function(S,v,h,c,u){const s=this;Q(N,w,S,v,h,function(f,i){s.addFeatures(f),void 0!==c&&c(f)},u||_.Zn)}}},1122:(Vt,gt,r)=>{"use strict";r.d(gt,{ZP:()=>H,fI:()=>j});var _=r(513),g=r(9015);const H=class Q{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(S,v){if(v){let h=v.dataProjection?(0,g.U2)(v.dataProjection):this.readProjection(S);v.extent&&h&&"tile-pixels"===h.getUnits()&&(h=(0,g.U2)(h),h.setWorldExtent(v.extent)),v={dataProjection:h,featureProjection:v.featureProjection}}return this.adaptOptions(v)}adaptOptions(S){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},S)}getType(){return(0,_.O3)()}readFeature(S,v){return(0,_.O3)()}readFeatures(S,v){return(0,_.O3)()}readGeometry(S,v){return(0,_.O3)()}readProjection(S){return(0,_.O3)()}writeFeature(S,v){return(0,_.O3)()}writeFeatures(S,v){return(0,_.O3)()}writeGeometry(S,v){return(0,_.O3)()}};function j(w,S,v){const h=v?(0,g.U2)(v.featureProjection):null,c=v?(0,g.U2)(v.dataProjection):null;let u;if(u=h&&c&&!(0,g.OP)(h,c)?(S?w.clone():w).transform(S?h:c,S?c:h):w,S&&v&&void 0!==v.decimals){const s=Math.pow(10,v.decimals),f=function(i){for(let l=0,m=i.length;l<m;++l)i[l]=Math.round(i[l]*s)/s;return i};u===w&&(u=w.clone()),u.applyTransform(f)}return u}},8898:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>L});var _=r(3413),g=r(4505),Q=r(7680),H=r(23),j=r(7090),N=r(1537),w=r(4034),S=r(7026),v=r(7464),h=r(992),c=r(9015),u=r(9306),s=r(1122);function i(p,M){if(!p)return null;let R;switch(p.type){case"Point":R=function m(p){return new S.Z(p.coordinates)}(p);break;case"LineString":R=function e(p){return new H.Z(p.coordinates)}(p);break;case"Polygon":R=function U(p){return new v.ZP(p.coordinates)}(p);break;case"MultiPoint":R=function x(p){return new N.Z(p.coordinates)}(p);break;case"MultiLineString":R=function P(p){return new j.Z(p.coordinates)}(p);break;case"MultiPolygon":R=function T(p){return new w.Z(p.coordinates)}(p);break;case"GeometryCollection":R=function l(p,M){const R=p.geometries.map(function(K){return i(K,M)});return new g.Z(R)}(p);break;default:throw new Error("Unsupported GeoJSON type: "+p.type)}return(0,s.fI)(R,!1,M)}function D(p,M){const R=(p=(0,s.fI)(p,!0,M)).getType();let K;switch(R){case"Point":K=function B(p,M){return{type:"Point",coordinates:p.getCoordinates()}}(p);break;case"LineString":K=function O(p,M){return{type:"LineString",coordinates:p.getCoordinates()}}(p);break;case"Polygon":K=function k(p,M){let R;return M&&(R=M.rightHanded),{type:"Polygon",coordinates:p.getCoordinates(R)}}(p,M);break;case"MultiPoint":K=function $(p,M){return{type:"MultiPoint",coordinates:p.getCoordinates()}}(p);break;case"MultiLineString":K=function X(p,M){return{type:"MultiLineString",coordinates:p.getCoordinates()}}(p);break;case"MultiPolygon":K=function dt(p,M){let R;return M&&(R=M.rightHanded),{type:"MultiPolygon",coordinates:p.getCoordinates(R)}}(p,M);break;case"GeometryCollection":K=function C(p,M){delete(M=Object.assign({},M)).featureProjection;const R=p.getGeometriesArray().map(function(K){return D(K,M)});return{type:"GeometryCollection",geometries:R}}(p,M);break;case"Circle":K={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+R)}return K}const L=class f extends Q.Z{constructor(M){M=M||{},super(),this.dataProjection=(0,c.U2)(M.dataProjection?M.dataProjection:"EPSG:4326"),M.featureProjection&&(this.defaultFeatureProjection=(0,c.U2)(M.featureProjection)),this.geometryName_=M.geometryName,this.extractGeometryName_=M.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(M,R){let K=null;K="Feature"===M.type?M:{type:"Feature",geometry:M,properties:null};const G=i(K.geometry,R),J=new _.Z;return this.geometryName_?J.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in K!==void 0&&J.setGeometryName(K.geometry_name),J.setGeometry(G),"id"in K&&J.setId(K.id),K.properties&&J.setProperties(K.properties,!0),J}readFeaturesFromObject(M,R){let G=null;if("FeatureCollection"===M.type){G=[];const q=M.features;for(let ut=0,ht=q.length;ut<ht;++ut)G.push(this.readFeatureFromObject(q[ut],R))}else G=[this.readFeatureFromObject(M,R)];return G}readGeometryFromObject(M,R){return i(M,R)}readProjectionFromObject(M){const R=M.crs;let K;return R?"name"==R.type?K=(0,c.U2)(R.properties.name):"EPSG"===R.type?K=(0,c.U2)("EPSG:"+R.properties.code):(0,h.h)(!1,36):K=this.dataProjection,K}writeFeatureObject(M,R){R=this.adaptOptions(R);const K={type:"Feature",geometry:null,properties:null},G=M.getId();if(void 0!==G&&(K.id=G),!M.hasProperties())return K;const J=M.getProperties(),q=M.getGeometry();return q&&(K.geometry=D(q,R),delete J[M.getGeometryName()]),(0,u.x)(J)||(K.properties=J),K}writeFeaturesObject(M,R){R=this.adaptOptions(R);const K=[];for(let G=0,J=M.length;G<J;++G)K.push(this.writeFeatureObject(M[G],R));return{type:"FeatureCollection",features:K}}writeGeometryObject(M,R){return D(M,this.adaptOptions(R))}}},7680:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>j});var _=r(1122),g=r(513);function H(N){return"string"==typeof N?JSON.parse(N)||null:null!==N?N:null}const j=class Q extends _.ZP{constructor(){super()}getType(){return"json"}readFeature(w,S){return this.readFeatureFromObject(H(w),this.getReadOptions(w,S))}readFeatures(w,S){return this.readFeaturesFromObject(H(w),this.getReadOptions(w,S))}readFeatureFromObject(w,S){return(0,g.O3)()}readFeaturesFromObject(w,S){return(0,g.O3)()}readGeometry(w,S){return this.readGeometryFromObject(H(w),this.getReadOptions(w,S))}readGeometryFromObject(w,S){return(0,g.O3)()}readProjection(w){return this.readProjectionFromObject(H(w))}readProjectionFromObject(w){return(0,g.O3)()}writeFeature(w,S){return JSON.stringify(this.writeFeatureObject(w,S))}writeFeatureObject(w,S){return(0,g.O3)()}writeFeatures(w,S){return JSON.stringify(this.writeFeaturesObject(w,S))}writeFeaturesObject(w,S){return(0,g.O3)()}writeGeometry(w,S){return JSON.stringify(this.writeGeometryObject(w,S))}writeGeometryObject(w,S){return(0,g.O3)()}}},4007:(Vt,gt,r)=>{"use strict";r.d(gt,{ZP:()=>Or});var _=r(3413),g=r(694),Q=r(4505),H=r(5999),j=r(1501),N=r(23),w=r(7090),S=r(1537),v=r(4034),h=r(7026),c=r(7464),u=r(5253),s=r(1786),f=r(8185),i=r(1122),l=r(513),m=r(142),e=r(8809);const x=class P extends i.ZP{constructor(){super(),this.xmlSerializer_=(0,e.xc)()}getType(){return"xml"}readFeature(mt,Ct){if(!mt)return null;if("string"==typeof mt){const Rt=(0,e.Qc)(mt);return this.readFeatureFromDocument(Rt,Ct)}return(0,e.qk)(mt)?this.readFeatureFromDocument(mt,Ct):this.readFeatureFromNode(mt,Ct)}readFeatureFromDocument(mt,Ct){const Rt=this.readFeaturesFromDocument(mt,Ct);return Rt.length>0?Rt[0]:null}readFeatureFromNode(mt,Ct){return null}readFeatures(mt,Ct){if(!mt)return[];if("string"==typeof mt){const Rt=(0,e.Qc)(mt);return this.readFeaturesFromDocument(Rt,Ct)}return(0,e.qk)(mt)?this.readFeaturesFromDocument(mt,Ct):this.readFeaturesFromNode(mt,Ct)}readFeaturesFromDocument(mt,Ct){const Rt=[];for(let jt=mt.firstChild;jt;jt=jt.nextSibling)jt.nodeType==Node.ELEMENT_NODE&&(0,m.l7)(Rt,this.readFeaturesFromNode(jt,Ct));return Rt}readFeaturesFromNode(mt,Ct){return(0,l.O3)()}readGeometry(mt,Ct){if(!mt)return null;if("string"==typeof mt){const Rt=(0,e.Qc)(mt);return this.readGeometryFromDocument(Rt,Ct)}return(0,e.qk)(mt)?this.readGeometryFromDocument(mt,Ct):this.readGeometryFromNode(mt,Ct)}readGeometryFromDocument(mt,Ct){return null}readGeometryFromNode(mt,Ct){return null}readProjection(mt){if(!mt)return null;if("string"==typeof mt){const Ct=(0,e.Qc)(mt);return this.readProjectionFromDocument(Ct)}return(0,e.qk)(mt)?this.readProjectionFromDocument(mt):this.readProjectionFromNode(mt)}readProjectionFromDocument(mt){return this.dataProjection}readProjectionFromNode(mt){return this.dataProjection}writeFeature(mt,Ct){const Rt=this.writeFeatureNode(mt,Ct);return this.xmlSerializer_.serializeToString(Rt)}writeFeatureNode(mt,Ct){return null}writeFeatures(mt,Ct){const Rt=this.writeFeaturesNode(mt,Ct);return this.xmlSerializer_.serializeToString(Rt)}writeFeaturesNode(mt,Ct){return null}writeGeometry(mt,Ct){const Rt=this.writeGeometryNode(mt,Ct);return this.xmlSerializer_.serializeToString(Rt)}writeGeometryNode(mt,Ct){return null}};var T=r(866),U=r(992),D=r(9015),C=r(52),O=r(4331);const X=["http://www.google.com/kml/ext/2.2"],$=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],B={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},k=(0,e.C5)($,{ExtendedData:Di,Region:Ri,MultiGeometry:(0,e.Pr)(Ft,"geometry"),LineString:(0,e.Pr)(rt,"geometry"),LinearRing:(0,e.Pr)(St,"geometry"),Point:(0,e.Pr)(se,"geometry"),Polygon:(0,e.Pr)(Se,"geometry"),Style:(0,e.Pr)(ke),StyleMap:function Wi(qt,mt){const Ct=st.call(this,qt,mt);if(!Ct)return;const Rt=mt[mt.length-1];Array.isArray(Ct)?Rt.Style=Ct:"string"==typeof Ct?Rt.styleUrl=Ct:(0,U.h)(!1,38)},address:(0,e.Pr)(C.s2),description:(0,e.Pr)(C.s2),name:(0,e.Pr)(C.s2),open:(0,e.Pr)(C.ud),phoneNumber:(0,e.Pr)(C.s2),styleUrl:(0,e.Pr)(Zt),visibility:(0,e.Pr)(C.ud)},(0,e.C5)(X,{MultiTrack:(0,e.Pr)(function Qe(qt,mt){const Ct=(0,e.O)([],oi,qt,mt);if(Ct)return new w.Z(Ct)},"geometry"),Track:(0,e.Pr)(Je,"geometry")})),L=(0,e.C5)($,{ExtendedData:Di,Region:Ri,Link:function Mr(qt,mt){(0,e.T3)(p,qt,mt)},address:(0,e.Pr)(C.s2),description:(0,e.Pr)(C.s2),name:(0,e.Pr)(C.s2),open:(0,e.Pr)(C.ud),phoneNumber:(0,e.Pr)(C.s2),visibility:(0,e.Pr)(C.ud)}),p=(0,e.C5)($,{href:(0,e.Pr)(He)}),M=(0,e.C5)($,{LatLonAltBox:function yi(qt,mt){const Ct=(0,e.O)({},Ii,qt,mt);if(!Ct)return;const Rt=mt[mt.length-1],jt=[parseFloat(Ct.west),parseFloat(Ct.south),parseFloat(Ct.east),parseFloat(Ct.north)];Rt.extent=jt,Rt.altitudeMode=Ct.altitudeMode,Rt.minAltitude=parseFloat(Ct.minAltitude),Rt.maxAltitude=parseFloat(Ct.maxAltitude)},Lod:function Ui(qt,mt){const Ct=(0,e.O)({},hn,qt,mt);if(!Ct)return;const Rt=mt[mt.length-1];Rt.minLodPixels=parseFloat(Ct.minLodPixels),Rt.maxLodPixels=parseFloat(Ct.maxLodPixels),Rt.minFadeExtent=parseFloat(Ct.minFadeExtent),Rt.maxFadeExtent=parseFloat(Ct.maxFadeExtent)}}),R=(0,e.C5)($,["Document","Placemark"]),K=(0,e.C5)($,{Document:(0,e.A4)(function Tr(qt,mt,Ct){(0,e.ZL)({node:qt},Fn,Mn,mt,Ct,void 0,this)}),Placemark:(0,e.A4)(Ms)});let G,ut,ht,_t,Tt,Lt,ae,Ce,Mt,J=null,Ht=null,Qt=null,xe=null,xt=null,Bt=null;function Te(qt){return 32/Math.min(qt[0],qt[1])}function Dt(qt){return qt}function ye(qt,mt,Ct){return Array.isArray(qt)?qt:"string"==typeof qt?ye(Ct[qt],mt,Ct):mt}function Pe(qt){const mt=(0,e.Ve)(qt,!1),Ct=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(mt);if(Ct){const Rt=Ct[1];return[parseInt(Rt.substr(6,2),16),parseInt(Rt.substr(4,2),16),parseInt(Rt.substr(2,2),16),parseInt(Rt.substr(0,2),16)/255]}}function ze(qt){let mt=(0,e.Ve)(qt,!1);const Ct=[];mt=mt.replace(/\s*,\s*/g,",");const Rt=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let jt;for(;jt=Rt.exec(mt);){const ce=parseFloat(jt[1]),de=parseFloat(jt[2]),Re=jt[3]?parseFloat(jt[3]):0;Ct.push(ce,de,Re),mt=mt.substr(jt[0].length)}if(""===mt)return Ct}function He(qt){const mt=(0,e.Ve)(qt,!1).trim();let Ct=qt.baseURI;return(!Ct||"about:blank"==Ct)&&(Ct=window.location.href),Ct?new URL(mt,Ct).href:mt}function Zt(qt){const mt=(0,e.Ve)(qt,!1).trim().replace(/^(?!.*#)/,"#");let Ct=qt.baseURI;return(!Ct||"about:blank"==Ct)&&(Ct=window.location.href),Ct?new URL(mt,Ct).href:mt}function y(qt){return(0,C.fy)(qt)}const z=(0,e.C5)($,{Pair:function Yn(qt,mt){const Ct=(0,e.O)({},Li,qt,mt,this);if(!Ct)return;const Rt=Ct.key;if(Rt&&"normal"==Rt){const jt=Ct.styleUrl;jt&&(mt[mt.length-1]=jt);const ce=Ct.Style;ce&&(mt[mt.length-1]=ce)}}});function st(qt,mt){return(0,e.O)(void 0,z,qt,mt,this)}const it=(0,e.C5)($,{Icon:(0,e.Pr)(function _i(qt,mt){return(0,e.O)({},ri,qt,mt)||null}),color:(0,e.Pr)(Pe),heading:(0,e.Pr)(C.fy),hotSpot:(0,e.Pr)(function Et(qt){const mt=qt.getAttribute("xunits"),Ct=qt.getAttribute("yunits");let Rt;return Rt="insetPixels"!==mt?"insetPixels"!==Ct?"bottom-left":"top-left":"insetPixels"!==Ct?"bottom-right":"top-right",{x:parseFloat(qt.getAttribute("x")),xunits:B[mt],y:parseFloat(qt.getAttribute("y")),yunits:B[Ct],origin:Rt}}),scale:(0,e.Pr)(y)}),Pt=(0,e.C5)($,{color:(0,e.Pr)(Pe),scale:(0,e.Pr)(y)}),zt=(0,e.C5)($,{color:(0,e.Pr)(Pe),width:(0,e.Pr)(C.fy)}),re=(0,e.C5)($,{color:(0,e.Pr)(Pe),fill:(0,e.Pr)(C.ud),outline:(0,e.Pr)(C.ud)}),ge=(0,e.C5)($,{coordinates:(0,e.z)(ze)});function oe(qt,mt){return(0,e.O)(null,ge,qt,mt)}const oi=(0,e.C5)(X,{Track:(0,e.Ei)(Je)}),$e=(0,e.C5)($,{when:function Gi(qt,mt){const Rt=mt[mt.length-1].whens,jt=(0,e.Ve)(qt,!1),ce=Date.parse(jt);Rt.push(isNaN(ce)?0:ce)}},(0,e.C5)(X,{coord:function Xe(qt,mt){const Rt=mt[mt.length-1].coordinates,jt=(0,e.Ve)(qt,!1),de=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(jt);if(de){const Re=parseFloat(de[1]),De=parseFloat(de[2]),Be=parseFloat(de[3]);Rt.push([Re,De,Be])}else Rt.push([])}}));function Je(qt,mt){const Ct=(0,e.O)({coordinates:[],whens:[]},$e,qt,mt);if(!Ct)return;const Rt=[],jt=Ct.coordinates,ce=Ct.whens;for(let de=0,Re=Math.min(jt.length,ce.length);de<Re;++de)3==jt[de].length&&Rt.push(jt[de][0],jt[de][1],jt[de][2],ce[de]);return new N.Z(Rt,"XYZM")}const ri=(0,e.C5)($,{href:(0,e.Pr)(He)},(0,e.C5)(X,{x:(0,e.Pr)(C.fy),y:(0,e.Pr)(C.fy),w:(0,e.Pr)(C.fy),h:(0,e.Pr)(C.fy)})),ui=(0,e.C5)($,{coordinates:(0,e.z)(ze)});function di(qt,mt){return(0,e.O)(null,ui,qt,mt)}const ot=(0,e.C5)($,{extrude:(0,e.Pr)(C.ud),tessellate:(0,e.Pr)(C.ud),altitudeMode:(0,e.Pr)(C.s2)});function rt(qt,mt){const Ct=(0,e.O)({},ot,qt,mt),Rt=di(qt,mt);if(Rt){const jt=new N.Z(Rt,"XYZ");return jt.setProperties(Ct,!0),jt}}function St(qt,mt){const Ct=(0,e.O)({},ot,qt,mt),Rt=di(qt,mt);if(Rt){const jt=new c.ZP(Rt,"XYZ",[Rt.length]);return jt.setProperties(Ct,!0),jt}}const bt=(0,e.C5)($,{LineString:(0,e.Ei)(rt),LinearRing:(0,e.Ei)(St),MultiGeometry:(0,e.Ei)(Ft),Point:(0,e.Ei)(se),Polygon:(0,e.Ei)(Se)});function Ft(qt,mt){const Ct=(0,e.O)([],bt,qt,mt);if(!Ct)return null;if(0===Ct.length)return new Q.Z(Ct);let Rt,jt=!0;const ce=Ct[0].getType();let de;for(let Re=1,De=Ct.length;Re<De;++Re)if(de=Ct[Re],de.getType()!=ce){jt=!1;break}if(jt){let Re,De;if("Point"==ce){const Be=Ct[0];Re=Be.getLayout(),De=Be.getFlatCoordinates();for(let ei=1,li=Ct.length;ei<li;++ei)de=Ct[ei],(0,m.l7)(De,de.getFlatCoordinates());Rt=new S.Z(De,Re),Ve(Rt,Ct)}else"LineString"==ce?(Rt=new w.Z(Ct),Ve(Rt,Ct)):"Polygon"==ce?(Rt=new v.Z(Ct),Ve(Rt,Ct)):"GeometryCollection"==ce?Rt=new Q.Z(Ct):(0,U.h)(!1,37)}else Rt=new Q.Z(Ct);return Rt}function se(qt,mt){const Ct=(0,e.O)({},ot,qt,mt),Rt=di(qt,mt);if(Rt){const jt=new h.Z(Rt,"XYZ");return jt.setProperties(Ct,!0),jt}}const fe=(0,e.C5)($,{innerBoundaryIs:function Fi(qt,mt){const Ct=(0,e.O)([],Ei,qt,mt);Ct.length>0&&mt[mt.length-1].push(...Ct)},outerBoundaryIs:function fn(qt,mt){const Ct=(0,e.O)(void 0,ji,qt,mt);Ct&&(mt[mt.length-1][0]=Ct)}});function Se(qt,mt){const Ct=(0,e.O)({},ot,qt,mt),Rt=(0,e.O)([null],fe,qt,mt);if(Rt&&Rt[0]){const jt=Rt[0],ce=[jt.length];for(let Re=1,De=Rt.length;Re<De;++Re)(0,m.l7)(jt,Rt[Re]),ce.push(jt.length);const de=new c.ZP(jt,"XYZ",ce);return de.setProperties(Ct,!0),de}}const Le=(0,e.C5)($,{IconStyle:function vt(qt,mt){const Ct=(0,e.O)({},it,qt,mt);if(!Ct)return;const Rt=mt[mt.length-1],jt="Icon"in Ct?Ct.Icon:{},ce=!("Icon"in Ct)||Object.keys(jt).length>0;let de;const Re=jt.href;Re?de=Re:ce&&(de=Lt);let De,Be,ei,li="bottom-left";const fi=Ct.hotSpot;let gi;fi?(De=[fi.x,fi.y],Be=fi.xunits,ei=fi.yunits,li=fi.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(de)&&(de.includes("pushpin")?(De=ut,Be=ht,ei=_t):de.includes("arrow-reverse")?(De=[54,42],Be=ht,ei=_t):de.includes("paddle")&&(De=[32,1],Be=ht,ei=_t));const Ci=jt.x,wi=jt.y;let Ti;void 0!==Ci&&void 0!==wi&&(gi=[Ci,wi]);const xi=jt.w,Zi=jt.h;let bi;void 0!==xi&&void 0!==Zi&&(Ti=[xi,Zi]);const Bi=Ct.heading;void 0!==Bi&&(bi=(0,O.Yr)(Bi));const rn=Ct.color;if(ce){de==Lt&&(Ti=Tt);const Yi=new H.Z({anchor:De,anchorOrigin:li,anchorXUnits:Be,anchorYUnits:ei,crossOrigin:this.crossOrigin_,offset:gi,offsetOrigin:"bottom-left",rotation:bi,scale:Ct.scale,size:Ti,src:this.iconUrlFunction_(de),color:rn}),sr=Yi.getScaleArray()[0],Zn=Yi.getSize();if(null===Zn){const Bn=Yi.getImageState();if(Bn===j.Z.IDLE||Bn===j.Z.LOADING){const Rs=function(){const rr=Yi.getImageState();if(rr!==j.Z.IDLE&&rr!==j.Z.LOADING){const is=Yi.getSize();if(is&&2==is.length){const or=Te(is);Yi.setScale(sr*or)}Yi.unlistenImageChange(Rs)}};Yi.listenImageChange(Rs),Bn===j.Z.IDLE&&Yi.load()}}else if(2==Zn.length){const Bn=Te(Zn);Yi.setScale(sr*Bn)}Rt.imageStyle=Yi}else Rt.imageStyle=ae},LabelStyle:function kt(qt,mt){const Ct=(0,e.O)({},Pt,qt,mt);if(!Ct)return;const Rt=mt[mt.length-1],jt=new f.Z({fill:new g.Z({color:"color"in Ct?Ct.color:G}),scale:Ct.scale});Rt.textStyle=jt},LineStyle:function ee(qt,mt){const Ct=(0,e.O)({},zt,qt,mt);if(!Ct)return;const Rt=mt[mt.length-1],jt=new u.Z({color:"color"in Ct?Ct.color:G,width:"width"in Ct?Ct.width:1});Rt.strokeStyle=jt},PolyStyle:function we(qt,mt){const Ct=(0,e.O)({},re,qt,mt);if(!Ct)return;const Rt=mt[mt.length-1],jt=new g.Z({color:"color"in Ct?Ct.color:G});Rt.fillStyle=jt;const ce=Ct.fill;void 0!==ce&&(Rt.fill=ce);const de=Ct.outline;void 0!==de&&(Rt.outline=de)}});function ke(qt,mt){const Ct=(0,e.O)({},Le,qt,mt,this);if(!Ct)return null;let Rt="fillStyle"in Ct?Ct.fillStyle:J;const jt=Ct.fill;let ce;void 0!==jt&&!jt&&(Rt=null),"imageStyle"in Ct?Ct.imageStyle!=ae&&(ce=Ct.imageStyle):ce=Ht;const de="textStyle"in Ct?Ct.textStyle:xe,Re="strokeStyle"in Ct?Ct.strokeStyle:Qt,De=Ct.outline;return void 0===De||De?[new s.ZP({fill:Rt,image:ce,stroke:Re,text:de,zIndex:void 0})]:[new s.ZP({geometry:function(Be){const ei=Be.getGeometry(),li=ei.getType();return"GeometryCollection"===li?new Q.Z(ei.getGeometriesArrayRecursive().filter(function(gi){const Ci=gi.getType();return"Polygon"!==Ci&&"MultiPolygon"!==Ci})):"Polygon"!==li&&"MultiPolygon"!==li?ei:void 0},fill:Rt,image:ce,stroke:Re,text:de,zIndex:void 0}),new s.ZP({geometry:function(Be){const ei=Be.getGeometry(),li=ei.getType();return"GeometryCollection"===li?new Q.Z(ei.getGeometriesArrayRecursive().filter(function(gi){const Ci=gi.getType();return"Polygon"===Ci||"MultiPolygon"===Ci})):"Polygon"===li||"MultiPolygon"===li?ei:void 0},fill:Rt,stroke:null,zIndex:void 0})]}function Ve(qt,mt){const Ct=mt.length,Rt=new Array(mt.length),jt=new Array(mt.length),ce=new Array(mt.length);let de,Re,De;de=!1,Re=!1,De=!1;for(let Be=0;Be<Ct;++Be){const ei=mt[Be];Rt[Be]=ei.get("extrude"),jt[Be]=ei.get("tessellate"),ce[Be]=ei.get("altitudeMode"),de=de||void 0!==Rt[Be],Re=Re||void 0!==jt[Be],De=De||ce[Be]}de&&qt.set("extrude",Rt),Re&&qt.set("tessellate",jt),De&&qt.set("altitudeMode",ce)}const qe=(0,e.C5)($,{displayName:(0,e.Pr)(C.s2),value:(0,e.Pr)(C.s2)}),pi=(0,e.C5)($,{Data:function si(qt,mt){const Ct=qt.getAttribute("name");(0,e.T3)(qe,qt,mt);const Rt=mt[mt.length-1];Ct&&Rt.displayName?Rt[Ct]={value:Rt.value,displayName:Rt.displayName,toString:function(){return Rt.value}}:null!==Ct?Rt[Ct]=Rt.value:null!==Rt.displayName&&(Rt[Rt.displayName]=Rt.value),delete Rt.value},SchemaData:function Mi(qt,mt){(0,e.T3)(Oi,qt,mt)}});function Di(qt,mt){(0,e.T3)(pi,qt,mt)}function Ri(qt,mt){(0,e.T3)(M,qt,mt)}const Li=(0,e.C5)($,{Style:(0,e.Pr)(ke),key:(0,e.Pr)(C.s2),styleUrl:(0,e.Pr)(Zt)}),Oi=(0,e.C5)($,{SimpleData:function Ai(qt,mt){const Ct=qt.getAttribute("name");if(null!==Ct){const Rt=(0,C.s2)(qt);mt[mt.length-1][Ct]=Rt}}}),Ii=(0,e.C5)($,{altitudeMode:(0,e.Pr)(C.s2),minAltitude:(0,e.Pr)(C.fy),maxAltitude:(0,e.Pr)(C.fy),north:(0,e.Pr)(C.fy),south:(0,e.Pr)(C.fy),east:(0,e.Pr)(C.fy),west:(0,e.Pr)(C.fy)}),hn=(0,e.C5)($,{minLodPixels:(0,e.Pr)(C.fy),maxLodPixels:(0,e.Pr)(C.fy),minFadeExtent:(0,e.Pr)(C.fy),maxFadeExtent:(0,e.Pr)(C.fy)}),Ei=(0,e.C5)($,{LinearRing:(0,e.Ei)(oe)}),ji=(0,e.C5)($,{LinearRing:(0,e.z)(oe)});function Ln(qt,mt){const Ct=(0,T._2)(mt),jt=[255*(4==Ct.length?Ct[3]:1),Ct[2],Ct[1],Ct[0]];for(let ce=0;ce<4;++ce){const de=Math.floor(jt[ce]).toString(16);jt[ce]=1==de.length?"0"+de:de}(0,C.bZ)(qt,jt.join(""))}const An=(0,e.C5)($,{Data:(0,e.A4)(function Cn(qt,mt,Ct){qt.setAttribute("name",mt.name);const Rt={node:qt},jt=mt.value;"object"==typeof jt?(null!==jt&&jt.displayName&&(0,e.ZL)(Rt,An,e.hg,[jt.displayName],Ct,["displayName"]),null!==jt&&jt.value&&(0,e.ZL)(Rt,An,e.hg,[jt.value],Ct,["value"])):(0,e.ZL)(Rt,An,e.hg,[jt],Ct,["value"])}),value:(0,e.A4)(function Ki(qt,mt){(0,C.bZ)(qt,mt)}),displayName:(0,e.A4)(function Ni(qt,mt){(0,C.xO)(qt,mt)})}),Fn=(0,e.C5)($,{Placemark:(0,e.A4)(Ms)}),Mn=function(qt,mt,Ct){return(0,e.c)(mt[mt.length-1].node.namespaceURI,"Placemark")},Jn=(0,e.G3)("Data"),Qn=(0,e.C5)($,["href"],(0,e.C5)(X,["x","y","w","h"])),$n=(0,e.C5)($,{href:(0,e.A4)(C.bZ)},(0,e.C5)(X,{x:(0,e.A4)(C.f3),y:(0,e.A4)(C.f3),w:(0,e.A4)(C.f3),h:(0,e.A4)(C.f3)})),ms=function(qt,mt,Ct){return(0,e.c)(X[0],"gx:"+Ct)},vs=(0,e.C5)($,["scale","heading","Icon","color","hotSpot"]),Pr=(0,e.C5)($,{Icon:(0,e.A4)(function Hs(qt,mt,Ct){const Rt={node:qt};let ce=Qn[Ct[Ct.length-1].node.namespaceURI],de=(0,e.RA)(mt,ce);(0,e.ZL)(Rt,$n,e.hg,de,Ct,ce),ce=Qn[X[0]],de=(0,e.RA)(mt,ce),(0,e.ZL)(Rt,$n,ms,de,Ct,ce)}),color:(0,e.A4)(Ln),heading:(0,e.A4)(C.f3),hotSpot:(0,e.A4)(function bs(qt,mt){qt.setAttribute("x",String(mt.x)),qt.setAttribute("y",String(mt.y)),qt.setAttribute("xunits",mt.xunits),qt.setAttribute("yunits",mt.yunits)}),scale:(0,e.A4)(kn)}),ys=(0,e.C5)($,["color","scale"]),Nn=(0,e.C5)($,{color:(0,e.A4)(Ln),scale:(0,e.A4)(kn)}),ts=(0,e.C5)($,["color","width"]),gn=(0,e.C5)($,{color:(0,e.A4)(Ln),width:(0,e.A4)(C.f3)}),_n={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},cn=function(qt,mt,Ct){if(qt)return(0,e.c)(mt[mt.length-1].node.namespaceURI,_n[qt.getType()])},Es=(0,e.G3)("Point"),Qs=(0,e.G3)("LineString"),pn=(0,e.G3)("LinearRing"),xs=(0,e.G3)("Polygon"),$s=(0,e.C5)($,{LineString:(0,e.A4)(ki),Point:(0,e.A4)(ki),Polygon:(0,e.A4)(es),GeometryCollection:(0,e.A4)(un)});function un(qt,mt,Ct){const Rt={node:qt},jt=mt.getType();let de,ce=[];"GeometryCollection"===jt?(mt.getGeometriesArrayRecursive().forEach(function(Re){const De=Re.getType();"MultiPoint"===De?ce=ce.concat(Re.getPoints()):"MultiLineString"===De?ce=ce.concat(Re.getLineStrings()):"MultiPolygon"===De?ce=ce.concat(Re.getPolygons()):"Point"===De||"LineString"===De||"Polygon"===De?ce.push(Re):(0,U.h)(!1,39)}),de=cn):"MultiPoint"===jt?(ce=mt.getPoints(),de=Es):"MultiLineString"===jt?(ce=mt.getLineStrings(),de=Qs):"MultiPolygon"===jt?(ce=mt.getPolygons(),de=xs):(0,U.h)(!1,39),(0,e.ZL)(Rt,$s,de,ce,Ct)}const zi=(0,e.C5)($,{LinearRing:(0,e.A4)(ki)});function qs(qt,mt,Ct){(0,e.ZL)({node:qt},zi,pn,[mt],Ct)}const Cs=(0,e.C5)($,{ExtendedData:(0,e.A4)(function Ys(qt,mt,Ct){const Rt={node:qt},jt=mt.names,ce=mt.values,de=jt.length;for(let Re=0;Re<de;Re++)(0,e.ZL)(Rt,An,Jn,[{name:jt[Re],value:ce[Re]}],Ct)}),MultiGeometry:(0,e.A4)(un),LineString:(0,e.A4)(ki),LinearRing:(0,e.A4)(ki),Point:(0,e.A4)(ki),Polygon:(0,e.A4)(es),Style:(0,e.A4)(function Ir(qt,mt,Ct){const Rt={node:qt},jt={};if(mt.pointStyles.length){const De=mt.pointStyles[0].getText();De&&(jt.LabelStyle=De);const Be=mt.pointStyles[0].getImage();Be&&"function"==typeof Be.getSrc&&(jt.IconStyle=Be)}if(mt.lineStyles.length){const De=mt.lineStyles[0].getStroke();De&&(jt.LineStyle=De)}if(mt.polyStyles.length){const De=mt.polyStyles[0].getStroke();De&&!jt.LineStyle&&(jt.LineStyle=De),jt.PolyStyle=mt.polyStyles[0]}const de=Vi[Ct[Ct.length-1].node.namespaceURI],Re=(0,e.RA)(jt,de);(0,e.ZL)(Rt,nr,e.hg,Re,Ct,de)}),address:(0,e.A4)(C.bZ),description:(0,e.A4)(C.bZ),name:(0,e.A4)(C.bZ),open:(0,e.A4)(C.Vi),phoneNumber:(0,e.A4)(C.bZ),styleUrl:(0,e.A4)(C.bZ),visibility:(0,e.A4)(C.Vi)}),Sr=(0,e.C5)($,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),tr=(0,e.G3)("ExtendedData");function Ms(qt,mt,Ct){const Rt={node:qt};mt.getId()&&qt.setAttribute("id",mt.getId());const jt=mt.getProperties(),ce={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};ce[mt.getGeometryName()]=1;const de=Object.keys(jt||{}).sort().filter(function(gi){return!ce[gi]}),Re=mt.getStyleFunction();if(Re){const gi=Re(mt,0);if(gi){const Ci=Array.isArray(gi)?gi:[gi];let wi=Ci;if(mt.getGeometry()&&(wi=Ci.filter(function(Ti){const xi=Ti.getGeometryFunction()(mt);if(xi){const Zi=xi.getType();return"GeometryCollection"===Zi?xi.getGeometriesArrayRecursive().filter(function(bi){const Bi=bi.getType();return"Point"===Bi||"MultiPoint"===Bi}).length:"Point"===Zi||"MultiPoint"===Zi}})),this.writeStyles_){let Ti=Ci,xi=Ci;mt.getGeometry()&&(Ti=Ci.filter(function(Zi){const bi=Zi.getGeometryFunction()(mt);if(bi){const Bi=bi.getType();return"GeometryCollection"===Bi?bi.getGeometriesArrayRecursive().filter(function(Xi){const rn=Xi.getType();return"LineString"===rn||"MultiLineString"===rn}).length:"LineString"===Bi||"MultiLineString"===Bi}}),xi=Ci.filter(function(Zi){const bi=Zi.getGeometryFunction()(mt);if(bi){const Bi=bi.getType();return"GeometryCollection"===Bi?bi.getGeometriesArrayRecursive().filter(function(Xi){const rn=Xi.getType();return"Polygon"===rn||"MultiPolygon"===rn}).length:"Polygon"===Bi||"MultiPolygon"===Bi}})),jt.Style={pointStyles:wi,lineStyles:Ti,polyStyles:xi}}if(wi.length&&void 0===jt.name){const Ti=wi[0].getText();Ti&&(jt.name=Ti.getText())}}}const Be=Sr[Ct[Ct.length-1].node.namespaceURI],ei=(0,e.RA)(jt,Be);if((0,e.ZL)(Rt,Cs,e.hg,ei,Ct,Be),de.length>0){const gi=(0,e.RA)(jt,de);(0,e.ZL)(Rt,Cs,tr,[{names:de,values:gi}],Ct)}const li=Ct[0];let fi=mt.getGeometry();fi&&(fi=(0,i.fI)(fi,!0,li)),(0,e.ZL)(Rt,Cs,cn,[fi],Ct)}const er=(0,e.C5)($,["extrude","tessellate","altitudeMode","coordinates"]),Ts=(0,e.C5)($,{extrude:(0,e.A4)(C.Vi),tessellate:(0,e.A4)(C.Vi),altitudeMode:(0,e.A4)(C.bZ),coordinates:(0,e.A4)(function Hn(qt,mt,Ct){const Rt=Ct[Ct.length-1],jt=Rt.layout,ce=Rt.stride;let de;"XY"==jt||"XYM"==jt?de=2:"XYZ"==jt||"XYZM"==jt?de=3:(0,U.h)(!1,34);const Re=mt.length;let De="";if(Re>0){De+=mt[0];for(let Be=1;Be<de;++Be)De+=","+mt[Be];for(let Be=ce;Be<Re;Be+=ce){De+=" "+mt[Be];for(let ei=1;ei<de;++ei)De+=","+mt[Be+ei]}}(0,C.bZ)(qt,De)})});function ki(qt,mt,Ct){const Rt=mt.getFlatCoordinates(),jt={node:qt};jt.layout=mt.getLayout(),jt.stride=mt.getStride();const ce=mt.getProperties();ce.coordinates=Rt;const Re=er[Ct[Ct.length-1].node.namespaceURI],De=(0,e.RA)(ce,Re);(0,e.ZL)(jt,Ts,e.hg,De,Ct,Re)}const ir=(0,e.C5)($,["color","fill","outline"]),Ps=(0,e.C5)($,{outerBoundaryIs:(0,e.A4)(qs),innerBoundaryIs:(0,e.A4)(qs)}),br=(0,e.G3)("innerBoundaryIs"),Rr=(0,e.G3)("outerBoundaryIs");function es(qt,mt,Ct){const Rt=mt.getLinearRings(),jt=Rt.shift(),ce={node:qt};(0,e.ZL)(ce,Ps,br,Rt,Ct),(0,e.ZL)(ce,Ps,Rr,[jt],Ct)}const Ss=(0,e.C5)($,{color:(0,e.A4)(Ln),fill:(0,e.A4)(C.Vi),outline:(0,e.A4)(C.Vi)});function kn(qt,mt){(0,C.f3)(qt,Math.round(1e6*mt)/1e6)}const Vi=(0,e.C5)($,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),nr=(0,e.C5)($,{IconStyle:(0,e.A4)(function sn(qt,mt,Ct){const Rt={node:qt},jt={},ce=mt.getSrc(),de=mt.getSize(),Re=mt.getImageSize(),De={href:ce};if(de){De.w=de[0],De.h=de[1];const Ti=mt.getAnchor(),xi=mt.getOrigin();xi&&Re&&0!==xi[0]&&xi[1]!==de[1]&&(De.x=xi[0],De.y=Re[1]-(xi[1]+de[1])),!Ti||Ti[0]===de[0]/2&&Ti[1]===de[1]/2||(jt.hotSpot={x:Ti[0],xunits:"pixels",y:de[1]-Ti[1],yunits:"pixels"})}jt.Icon=De;let Be=mt.getScaleArray()[0],ei=de;null===ei&&(ei=Tt),2==ei.length&&(Be/=Te(ei)),1!==Be&&(jt.scale=Be);const li=mt.getRotation();0!==li&&(jt.heading=li);const fi=mt.getColor();fi&&(jt.color=fi);const Ci=vs[Ct[Ct.length-1].node.namespaceURI],wi=(0,e.RA)(jt,Ci);(0,e.ZL)(Rt,Pr,e.hg,wi,Ct,Ci)}),LabelStyle:(0,e.A4)(function qn(qt,mt,Ct){const Rt={node:qt},jt={},ce=mt.getFill();ce&&(jt.color=ce.getColor());const de=mt.getScale();de&&1!==de&&(jt.scale=de);const De=ys[Ct[Ct.length-1].node.namespaceURI],Be=(0,e.RA)(jt,De);(0,e.ZL)(Rt,Nn,e.hg,Be,Ct,De)}),LineStyle:(0,e.A4)(function Js(qt,mt,Ct){const Rt={node:qt},jt={color:mt.getColor(),width:Number(mt.getWidth())||1},de=ts[Ct[Ct.length-1].node.namespaceURI],Re=(0,e.RA)(jt,de);(0,e.ZL)(Rt,gn,e.hg,Re,Ct,de)}),PolyStyle:(0,e.A4)(function Tn(qt,mt,Ct){const Rt={node:qt},jt=mt.getFill(),ce=mt.getStroke(),de={color:jt?jt.getColor():void 0,fill:!!jt&&void 0,outline:!!ce&&void 0},De=ir[Ct[Ct.length-1].node.namespaceURI],Be=(0,e.RA)(de,De);(0,e.ZL)(Rt,Ss,e.hg,Be,Ct,De)})}),Or=class Kt extends x{constructor(mt){super(),mt=mt||{},Bt||function he(){G=[255,255,255,1],J=new g.Z({color:G}),ut=[20,2],ht="pixels",_t="pixels",Tt=[64,64],Lt="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Ht=new H.Z({anchor:ut,anchorOrigin:"bottom-left",anchorXUnits:ht,anchorYUnits:_t,crossOrigin:"anonymous",rotation:0,scale:Te(Tt),size:Tt,src:Lt}),ae="NO_IMAGE",Qt=new u.Z({color:G,width:1}),Ce=new u.Z({color:[51,51,51,1],width:2}),xe=new f.Z({font:"bold 16px Helvetica",fill:J,stroke:Ce,scale:.8}),xt=new s.ZP({fill:J,image:Ht,text:xe,stroke:Qt,zIndex:0}),Bt=[xt]}(),this.dataProjection=(0,D.U2)("EPSG:4326"),this.defaultStyle_=mt.defaultStyle?mt.defaultStyle:Bt,this.extractStyles_=void 0===mt.extractStyles||mt.extractStyles,this.writeStyles_=void 0===mt.writeStyles||mt.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===mt.showPointNames||mt.showPointNames,this.crossOrigin_=void 0!==mt.crossOrigin?mt.crossOrigin:"anonymous",this.iconUrlFunction_=mt.iconUrlFunction?mt.iconUrlFunction:Dt,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(mt,Ct){const Rt=(0,e.C5)($,{Document:(0,e.pc)(this.readDocumentOrFolder_,this),Folder:(0,e.pc)(this.readDocumentOrFolder_,this),Placemark:(0,e.Ei)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),jt=(0,e.O)([],Rt,mt,Ct,this);if(jt)return jt}readPlacemark_(mt,Ct){const Rt=(0,e.O)({geometry:null},k,mt,Ct,this);if(!Rt)return;const jt=new _.Z,ce=mt.getAttribute("id");null!==ce&&jt.setId(ce);const Re=Rt.geometry;if(Re&&(0,i.fI)(Re,!1,Ct[0]),jt.setGeometry(Re),delete Rt.geometry,this.extractStyles_){const ei=function Jt(qt,mt,Ct,Rt,jt){return function(ce,de){let Re=jt,De="",Be=[];if(Re){const li=ce.getGeometry();if(li)if(li instanceof Q.Z)Be=li.getGeometriesArrayRecursive().filter(function(fi){const gi=fi.getType();return"Point"===gi||"MultiPoint"===gi}),Re=Be.length>0;else{const fi=li.getType();Re="Point"===fi||"MultiPoint"===fi}}Re&&(De=ce.get("name"),Re=Re&&!!De,Re&&/&[^&]+;/.test(De)&&(Mt||(Mt=document.createElement("textarea")),Mt.innerHTML=De,De=Mt.value));let ei=Ct;if(qt?ei=qt:mt&&(ei=ye(mt,Ct,Rt)),Re){const li=function Yt(qt,mt){const Ct=[0,0];let Rt="start";const jt=qt.getImage();if(jt){const Re=jt.getSize();if(Re&&2==Re.length){const De=jt.getScaleArray(),Be=jt.getAnchor();Ct[0]=De[0]*(Re[0]-Be[0]),Ct[1]=De[1]*(Re[1]/2-Be[1]),Rt="left"}}let ce=qt.getText();return ce?(ce=ce.clone(),ce.setFont(ce.getFont()||xe.getFont()),ce.setScale(ce.getScale()||xe.getScale()),ce.setFill(ce.getFill()||xe.getFill()),ce.setStroke(ce.getStroke()||Ce)):ce=xe.clone(),ce.setText(mt),ce.setOffsetX(Ct[0]),ce.setOffsetY(Ct[1]),ce.setTextAlign(Rt),new s.ZP({image:jt,text:ce})}(ei[0],De);return Be.length>0?(li.setGeometry(new Q.Z(Be)),[li,new s.ZP({geometry:ei[0].getGeometry(),image:null,fill:ei[0].getFill(),stroke:ei[0].getStroke(),text:null})].concat(ei.slice(1))):li}return ei}}(Rt.Style,Rt.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);jt.setStyle(ei)}return delete Rt.Style,jt.setProperties(Rt,!0),jt}readSharedStyle_(mt,Ct){const Rt=mt.getAttribute("id");if(null!==Rt){const jt=ke.call(this,mt,Ct);if(jt){let ce,de=mt.baseURI;(!de||"about:blank"==de)&&(de=window.location.href),ce=de?new URL("#"+Rt,de).href:"#"+Rt,this.sharedStyles_[ce]=jt}}}readSharedStyleMap_(mt,Ct){const Rt=mt.getAttribute("id");if(null===Rt)return;const jt=st.call(this,mt,Ct);if(!jt)return;let ce,de=mt.baseURI;(!de||"about:blank"==de)&&(de=window.location.href),ce=de?new URL("#"+Rt,de).href:"#"+Rt,this.sharedStyles_[ce]=jt}readFeatureFromNode(mt,Ct){return $.includes(mt.namespaceURI)&&this.readPlacemark_(mt,[this.getReadOptions(mt,Ct)])||null}readFeaturesFromNode(mt,Ct){if(!$.includes(mt.namespaceURI))return[];let Rt;const jt=mt.localName;if("Document"==jt||"Folder"==jt)return Rt=this.readDocumentOrFolder_(mt,[this.getReadOptions(mt,Ct)]),Rt||[];if("Placemark"==jt){const ce=this.readPlacemark_(mt,[this.getReadOptions(mt,Ct)]);return ce?[ce]:[]}if("kml"==jt){Rt=[];for(let ce=mt.firstElementChild;ce;ce=ce.nextElementSibling){const de=this.readFeaturesFromNode(ce,Ct);de&&(0,m.l7)(Rt,de)}return Rt}return[]}readName(mt){if(mt){if("string"==typeof mt){const Ct=(0,e.Qc)(mt);return this.readNameFromDocument(Ct)}return(0,e.qk)(mt)?this.readNameFromDocument(mt):this.readNameFromNode(mt)}}readNameFromDocument(mt){for(let Ct=mt.firstChild;Ct;Ct=Ct.nextSibling)if(Ct.nodeType==Node.ELEMENT_NODE){const Rt=this.readNameFromNode(Ct);if(Rt)return Rt}}readNameFromNode(mt){for(let Ct=mt.firstElementChild;Ct;Ct=Ct.nextElementSibling)if($.includes(Ct.namespaceURI)&&"name"==Ct.localName)return(0,C.s2)(Ct);for(let Ct=mt.firstElementChild;Ct;Ct=Ct.nextElementSibling){const Rt=Ct.localName;if($.includes(Ct.namespaceURI)&&("Document"==Rt||"Folder"==Rt||"Placemark"==Rt||"kml"==Rt)){const jt=this.readNameFromNode(Ct);if(jt)return jt}}}readNetworkLinks(mt){const Ct=[];if("string"==typeof mt){const Rt=(0,e.Qc)(mt);(0,m.l7)(Ct,this.readNetworkLinksFromDocument(Rt))}else(0,e.qk)(mt)?(0,m.l7)(Ct,this.readNetworkLinksFromDocument(mt)):(0,m.l7)(Ct,this.readNetworkLinksFromNode(mt));return Ct}readNetworkLinksFromDocument(mt){const Ct=[];for(let Rt=mt.firstChild;Rt;Rt=Rt.nextSibling)Rt.nodeType==Node.ELEMENT_NODE&&(0,m.l7)(Ct,this.readNetworkLinksFromNode(Rt));return Ct}readNetworkLinksFromNode(mt){const Ct=[];for(let Rt=mt.firstElementChild;Rt;Rt=Rt.nextElementSibling)if($.includes(Rt.namespaceURI)&&"NetworkLink"==Rt.localName){const jt=(0,e.O)({},L,Rt,[]);Ct.push(jt)}for(let Rt=mt.firstElementChild;Rt;Rt=Rt.nextElementSibling){const jt=Rt.localName;$.includes(Rt.namespaceURI)&&("Document"==jt||"Folder"==jt||"kml"==jt)&&(0,m.l7)(Ct,this.readNetworkLinksFromNode(Rt))}return Ct}readRegion(mt){const Ct=[];if("string"==typeof mt){const Rt=(0,e.Qc)(mt);(0,m.l7)(Ct,this.readRegionFromDocument(Rt))}else(0,e.qk)(mt)?(0,m.l7)(Ct,this.readRegionFromDocument(mt)):(0,m.l7)(Ct,this.readRegionFromNode(mt));return Ct}readRegionFromDocument(mt){const Ct=[];for(let Rt=mt.firstChild;Rt;Rt=Rt.nextSibling)Rt.nodeType==Node.ELEMENT_NODE&&(0,m.l7)(Ct,this.readRegionFromNode(Rt));return Ct}readRegionFromNode(mt){const Ct=[];for(let Rt=mt.firstElementChild;Rt;Rt=Rt.nextElementSibling)if($.includes(Rt.namespaceURI)&&"Region"==Rt.localName){const jt=(0,e.O)({},M,Rt,[]);Ct.push(jt)}for(let Rt=mt.firstElementChild;Rt;Rt=Rt.nextElementSibling){const jt=Rt.localName;$.includes(Rt.namespaceURI)&&("Document"==jt||"Folder"==jt||"kml"==jt)&&(0,m.l7)(Ct,this.readRegionFromNode(Rt))}return Ct}writeFeaturesNode(mt,Ct){Ct=this.adaptOptions(Ct);const Rt=(0,e.c)($[4],"kml"),jt="http://www.w3.org/2000/xmlns/";Rt.setAttributeNS(jt,"xmlns:gx",X[0]),Rt.setAttributeNS(jt,"xmlns:xsi",e.fJ),Rt.setAttributeNS(e.fJ,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");const ce={node:Rt},de={};mt.length>1?de.Document=mt:1==mt.length&&(de.Placemark=mt[0]);const Re=R[Rt.namespaceURI],De=(0,e.RA)(de,Re);return(0,e.ZL)(ce,K,e.hg,De,[Ct],Re,this),Rt}}},6114:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>x});var _=r(1122),g=r(23),Q=r(7090),H=r(1537),j=r(4034),N=r(6697),w=r(7026),S=r(7464),v=r(2632),h=r(2929),c=r(992),u=r(9015),s=r(5784);function i(T,U,D){if(3===T){const C={keys:[],values:[],features:[]},O=D.readVarint()+D.pos;D.readFields(l,C,O),C.length=C.features.length,C.length&&(U[C.name]=C)}}function l(T,U,D){if(15===T)U.version=D.readVarint();else if(1===T)U.name=D.readString();else if(5===T)U.extent=D.readVarint();else if(2===T)U.features.push(D.pos);else if(3===T)U.keys.push(D.readString());else if(4===T){let C=null;const O=D.readVarint()+D.pos;for(;D.pos<O;)C=1==(T=D.readVarint()>>3)?D.readString():2===T?D.readFloat():3===T?D.readDouble():4===T?D.readVarint64():5===T?D.readVarint():6===T?D.readSVarint():7===T?D.readBoolean():null;U.values.push(C)}}function m(T,U,D){if(1==T)U.id=D.readVarint();else if(2==T){const C=D.readVarint()+D.pos;for(;D.pos<C;){const O=U.layer.keys[D.readVarint()],X=U.layer.values[D.readVarint()];U.properties[O]=X}}else 3==T?U.type=D.readVarint():4==T&&(U.geometry=D.pos)}function e(T,U,D){T.pos=U.features[D];const C=T.readVarint()+T.pos,O={layer:U,type:0,properties:{}};return T.readFields(m,O,C),O}const x=class f extends _.ZP{constructor(U){super(),U=U||{},this.dataProjection=new v.Z({code:"",units:"tile-pixels"}),this.featureClass_=U.featureClass?U.featureClass:h.ZP,this.geometryName_=U.geometryName,this.layerName_=U.layerName?U.layerName:"layer",this.layers_=U.layers?U.layers:null,this.idProperty_=U.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(U,D,C,O){U.pos=D.geometry;const X=U.readVarint()+U.pos;let $=1,dt=0,B=0,k=0,L=0,p=0;for(;U.pos<X;){if(!dt){const M=U.readVarint();$=7&M,dt=M>>3}dt--,1===$||2===$?(B+=U.readSVarint(),k+=U.readSVarint(),1===$&&L>p&&(O.push(L),p=L),C.push(B,k),L+=2):7===$?L>p&&(C.push(C[p],C[p+1]),L+=2):(0,c.h)(!1,59)}L>p&&(O.push(L),p=L)}createFeature_(U,D,C){const O=D.type;if(0===O)return null;let X;const $=D.properties;let dt;this.idProperty_?(dt=$[this.idProperty_],delete $[this.idProperty_]):dt=D.id,$[this.layerName_]=D.layer.name;const B=[],k=[];this.readRawGeometry_(U,D,B,k);const L=function P(T,U){let D;return 1===T?D=1===U?"Point":"MultiPoint":2===T?D=1===U?"LineString":"MultiLineString":3===T&&(D="Polygon"),D}(O,k.length);if(this.featureClass_===h.ZP)X=new this.featureClass_(L,B,k,$,dt),X.transform(C.dataProjection);else{let p;if("Polygon"==L){const K=(0,s.Q3)(B,k);p=K.length>1?new j.Z(B,"XY",K):new S.ZP(B,"XY",k)}else p="Point"===L?new w.Z(B,"XY"):"LineString"===L?new g.Z(B,"XY"):"MultiPoint"===L?new H.Z(B,"XY"):"MultiLineString"===L?new Q.Z(B,"XY",k):null;X=new(0,this.featureClass_),this.geometryName_&&X.setGeometryName(this.geometryName_);const R=(0,_.fI)(p,!1,C);X.setGeometry(R),void 0!==dt&&X.setId(dt),X.setProperties($,!0)}return X}getType(){return"arraybuffer"}readFeatures(U,D){const C=this.layers_;D=this.adaptOptions(D);const O=(0,u.U2)(D.dataProjection);O.setWorldExtent(D.extent),D.dataProjection=O;const X=new N(U),$=X.readFields(i,{}),dt=[];for(const B in $){if(C&&!C.includes(B))continue;const k=$[B];O.setExtent(k?[0,0,k.extent,k.extent]:null);for(let p=0,M=k.length;p<M;++p){const R=e(X,k,p),K=this.createFeature_(X,R,D);null!==K&&dt.push(K)}}return dt}readProjection(U){return this.dataProjection}setLayers(U){this.layers_=U}}},52:(Vt,gt,r)=>{"use strict";r.d(gt,{$L:()=>w,Vi:()=>h,_E:()=>S,bZ:()=>i,ej:()=>N,f3:()=>s,fy:()=>j,s2:()=>v,ud:()=>g,v$:()=>Q,xO:()=>c});var _=r(8809);function g(l){return Q((0,_.Ve)(l,!1))}function Q(l){const m=/^\s*(true|1)|(false|0)\s*$/.exec(l);if(m)return void 0!==m[1]||!1}function j(l){return N((0,_.Ve)(l,!1))}function N(l){const m=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(l);if(m)return parseFloat(m[1])}function w(l){return S((0,_.Ve)(l,!1))}function S(l){const m=/^\s*(\d+)\s*$/.exec(l);if(m)return parseInt(m[1],10)}function v(l){return(0,_.Ve)(l,!1).trim()}function h(l,m){i(l,m?"1":"0")}function c(l,m){l.appendChild((0,_.Me)().createCDATASection(m))}function s(l,m){const e=m.toPrecision();l.appendChild((0,_.Me)().createTextNode(e))}function i(l,m){l.appendChild((0,_.Me)().createTextNode(m))}},1334:(Vt,gt,r)=>{"use strict";r.d(gt,{Dv:()=>Q,Zn:()=>H,qe:()=>j,uX:()=>g});var _=r(142);function g(){return!0}function Q(){return!1}function H(){}function j(w){let v,h,c,S=!1;return function(){const u=Array.prototype.slice.call(arguments);return(!S||this!==c||!(0,_.fS)(u,h))&&(S=!0,c=this,h=u,v=w.apply(this,arguments)),v}}},4023:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>h});var _=r(4115),g=r(513),Q=r(7139),H=r(9543),j=r(9015),N=r(1334),w=r(3904);const S=(0,Q.Ue)(),h=class v extends _.Z{constructor(){super(),this.extent_=(0,H.lJ)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,N.qe)(function(u,s,f){if(!f)return this.getSimplifiedGeometry(s);const i=this.clone();return i.applyTransform(f),i.getSimplifiedGeometry(s)})}simplifyTransformed(u,s){return this.simplifyTransformedInternal(this.getRevision(),u,s)}clone(){return(0,g.O3)()}closestPointXY(u,s,f,i){return(0,g.O3)()}containsXY(u,s){const f=this.getClosestPoint([u,s]);return f[0]===u&&f[1]===s}getClosestPoint(u,s){return this.closestPointXY(u[0],u[1],s=s||[NaN,NaN],1/0),s}intersectsCoordinate(u){return this.containsXY(u[0],u[1])}computeExtent(u){return(0,g.O3)()}getExtent(u){if(this.extentRevision_!=this.getRevision()){const s=this.computeExtent(this.extent_);(isNaN(s[0])||isNaN(s[1]))&&(0,H.YN)(s),this.extentRevision_=this.getRevision()}return(0,H.EO)(this.extent_,u)}rotate(u,s){(0,g.O3)()}scale(u,s,f){(0,g.O3)()}simplify(u){return this.getSimplifiedGeometry(u*u)}getSimplifiedGeometry(u){return(0,g.O3)()}getType(){return(0,g.O3)()}applyTransform(u){(0,g.O3)()}intersectsExtent(u){return(0,g.O3)()}translate(u,s){(0,g.O3)()}transform(u,s){const f=(0,j.U2)(u),i="tile-pixels"==f.getUnits()?function(l,m,e){const P=f.getExtent(),x=f.getWorldExtent(),T=(0,H.Cr)(x)/(0,H.Cr)(P);return(0,Q.qC)(S,x[0],x[3],T,-T,0,0,0),(0,w.vT)(l,0,l.length,e,S,m),(0,j.Ck)(f,s)(l,m,e)}:(0,j.Ck)(f,s);return this.applyTransform(i),this}}},4505:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>w});var _=r(3044),g=r(4023),Q=r(9543),H=r(2716);class j extends g.Z{constructor(v){super(),this.geometries_=v||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(H.bN),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let v=0,h=this.geometries_.length;v<h;++v)this.changeEventsKeys_.push((0,H.oL)(this.geometries_[v],_.Z.CHANGE,this.changed,this))}clone(){const v=new j(null);return v.setGeometries(this.geometries_),v.applyProperties(this),v}closestPointXY(v,h,c,u){if(u<(0,Q.qf)(this.getExtent(),v,h))return u;const s=this.geometries_;for(let f=0,i=s.length;f<i;++f)u=s[f].closestPointXY(v,h,c,u);return u}containsXY(v,h){const c=this.geometries_;for(let u=0,s=c.length;u<s;++u)if(c[u].containsXY(v,h))return!0;return!1}computeExtent(v){(0,Q.YN)(v);const h=this.geometries_;for(let c=0,u=h.length;c<u;++c)(0,Q.l7)(v,h[c].getExtent());return v}getGeometries(){return N(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let v=[];const h=this.geometries_;for(let c=0,u=h.length;c<u;++c)h[c].getType()===this.getType()?v=v.concat(h[c].getGeometriesArrayRecursive()):v.push(h[c]);return v}getSimplifiedGeometry(v){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),v<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&v<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const h=[],c=this.geometries_;let u=!1;for(let s=0,f=c.length;s<f;++s){const i=c[s],l=i.getSimplifiedGeometry(v);h.push(l),l!==i&&(u=!0)}if(u){const s=new j(null);return s.setGeometriesArray(h),s}return this.simplifiedGeometryMaxMinSquaredTolerance=v,this}getType(){return"GeometryCollection"}intersectsExtent(v){const h=this.geometries_;for(let c=0,u=h.length;c<u;++c)if(h[c].intersectsExtent(v))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(v,h){const c=this.geometries_;for(let u=0,s=c.length;u<s;++u)c[u].rotate(v,h);this.changed()}scale(v,h,c){c||(c=(0,Q.qg)(this.getExtent()));const u=this.geometries_;for(let s=0,f=u.length;s<f;++s)u[s].scale(v,h,c);this.changed()}setGeometries(v){this.setGeometriesArray(N(v))}setGeometriesArray(v){this.unlistenGeometriesChange_(),this.geometries_=v,this.listenGeometriesChange_(),this.changed()}applyTransform(v){const h=this.geometries_;for(let c=0,u=h.length;c<u;++c)h[c].applyTransform(v);this.changed()}translate(v,h){const c=this.geometries_;for(let u=0,s=c.length;u<s;++u)c[u].translate(v,h);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function N(S){const v=[];for(let h=0,c=S.length;h<c;++h)v.push(S[h].clone());return v}const w=j},23:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>s});var _=r(1790),g=r(4558),Q=r(9543),H=r(9216),j=r(1757),N=r(142),w=r(8665),S=r(4850),v=r(7170),h=r(4429),c=r(8575);class u extends _.ZP{constructor(i,l){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===l||Array.isArray(i[0])?this.setCoordinates(i,l):this.setFlatCoordinates(l,i)}appendCoordinate(i){this.flatCoordinates?(0,N.l7)(this.flatCoordinates,i):this.flatCoordinates=i.slice(),this.changed()}clone(){const i=new u(this.flatCoordinates.slice(),this.layout);return i.applyProperties(this),i}closestPointXY(i,l,m,e){return e<(0,Q.qf)(this.getExtent(),i,l)?e:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,g.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,g.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,i,l,m,e))}forEachSegment(i){return(0,w.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i)}getCoordinateAtM(i,l){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(0,v.iJ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,l=void 0!==l&&l)}getCoordinates(){return(0,S.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(i,l){return(0,v.WW)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,l,this.stride)}getLength(){return(0,c.W)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(i){const l=[];return l.length=(0,j.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i,l,0),new u(l,"XY")}getType(){return"LineString"}intersectsExtent(i){return(0,h.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,i)}setCoordinates(i,l){this.setLayout(l,i,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,H.Sg)(this.flatCoordinates,0,i,this.stride),this.changed()}}const s=u},7090:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>u});var _=r(23),g=r(1790),Q=r(4558),H=r(9543),j=r(9216),N=r(1757),w=r(142),S=r(4850),v=r(7170),h=r(4429);class c extends g.ZP{constructor(f,i,l){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(f[0]))this.setCoordinates(f,i);else if(void 0!==i&&l)this.setFlatCoordinates(i,f),this.ends_=l;else{let m=this.getLayout();const e=f,P=[],x=[];for(let T=0,U=e.length;T<U;++T){const D=e[T];0===T&&(m=D.getLayout()),(0,w.l7)(P,D.getFlatCoordinates()),x.push(P.length)}this.setFlatCoordinates(m,P),this.ends_=x}}appendLineString(f){this.flatCoordinates?(0,w.l7)(this.flatCoordinates,f.getFlatCoordinates().slice()):this.flatCoordinates=f.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const f=new c(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return f.applyProperties(this),f}closestPointXY(f,i,l,m){return m<(0,H.qf)(this.getExtent(),f,i)?m:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,Q.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,Q.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,f,i,l,m))}getCoordinateAtM(f,i,l){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(0,v.dG)(this.flatCoordinates,0,this.ends_,this.stride,f,i=void 0!==i&&i,l=void 0!==l&&l)}getCoordinates(){return(0,S.o1)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(f){return f<0||this.ends_.length<=f?null:new _.Z(this.flatCoordinates.slice(0===f?0:this.ends_[f-1],this.ends_[f]),this.layout)}getLineStrings(){const f=this.flatCoordinates,i=this.ends_,l=this.layout,m=[];let e=0;for(let P=0,x=i.length;P<x;++P){const T=i[P],U=new _.Z(f.slice(e,T),l);m.push(U),e=T}return m}getFlatMidpoints(){const f=[],i=this.flatCoordinates;let l=0;const m=this.ends_,e=this.stride;for(let P=0,x=m.length;P<x;++P){const T=m[P],U=(0,v.WW)(i,l,T,e,.5);(0,w.l7)(f,U),l=T}return f}getSimplifiedGeometryInternal(f){const i=[],l=[];return i.length=(0,N.UJ)(this.flatCoordinates,0,this.ends_,this.stride,f,i,0,l),new c(i,"XY",l)}getType(){return"MultiLineString"}intersectsExtent(f){return(0,h.AW)(this.flatCoordinates,0,this.ends_,this.stride,f)}setCoordinates(f,i){this.setLayout(i,f,2),this.flatCoordinates||(this.flatCoordinates=[]);const l=(0,j._5)(this.flatCoordinates,0,f,this.stride,this.ends_);this.flatCoordinates.length=0===l.length?0:l[l.length-1],this.changed()}}const u=c},1537:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>v});var _=r(7026),g=r(1790),Q=r(9543),H=r(9216),j=r(142),N=r(4850),w=r(4331);class S extends g.ZP{constructor(c,u){super(),u&&!Array.isArray(c[0])?this.setFlatCoordinates(u,c):this.setCoordinates(c,u)}appendPoint(c){this.flatCoordinates?(0,j.l7)(this.flatCoordinates,c.getFlatCoordinates()):this.flatCoordinates=c.getFlatCoordinates().slice(),this.changed()}clone(){const c=new S(this.flatCoordinates.slice(),this.layout);return c.applyProperties(this),c}closestPointXY(c,u,s,f){if(f<(0,Q.qf)(this.getExtent(),c,u))return f;const i=this.flatCoordinates,l=this.stride;for(let m=0,e=i.length;m<e;m+=l){const P=(0,w.bI)(c,u,i[m],i[m+1]);if(P<f){f=P;for(let x=0;x<l;++x)s[x]=i[m+x];s.length=l}}return f}getCoordinates(){return(0,N.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(c){return c<0||(this.flatCoordinates?this.flatCoordinates.length/this.stride:0)<=c?null:new _.Z(this.flatCoordinates.slice(c*this.stride,(c+1)*this.stride),this.layout)}getPoints(){const c=this.flatCoordinates,u=this.layout,s=this.stride,f=[];for(let i=0,l=c.length;i<l;i+=s){const m=new _.Z(c.slice(i,i+s),u);f.push(m)}return f}getType(){return"MultiPoint"}intersectsExtent(c){const u=this.flatCoordinates,s=this.stride;for(let f=0,i=u.length;f<i;f+=s)if((0,Q.jE)(c,u[f],u[f+1]))return!0;return!1}setCoordinates(c,u){this.setLayout(u,c,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,H.Sg)(this.flatCoordinates,0,c,this.stride),this.changed()}}const v=S},4034:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>m});var _=r(1537),g=r(7464),Q=r(1790),H=r(4558),j=r(9543),N=r(9216),w=r(142),S=r(5577),v=r(4850),h=r(4429),c=r(5784),u=r(4793),s=r(2783),f=r(5101),i=r(1757);class l extends Q.ZP{constructor(P,x,T){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!T&&!Array.isArray(P[0])){let U=this.getLayout();const D=P,C=[],O=[];for(let X=0,$=D.length;X<$;++X){const dt=D[X];0===X&&(U=dt.getLayout());const B=C.length,k=dt.getEnds();for(let L=0,p=k.length;L<p;++L)k[L]+=B;(0,w.l7)(C,dt.getFlatCoordinates()),O.push(k)}x=U,P=C,T=O}void 0!==x&&T?(this.setFlatCoordinates(x,P),this.endss_=T):this.setCoordinates(P,x)}appendPolygon(P){let x;if(this.flatCoordinates){const T=this.flatCoordinates.length;(0,w.l7)(this.flatCoordinates,P.getFlatCoordinates()),x=P.getEnds().slice();for(let U=0,D=x.length;U<D;++U)x[U]+=T}else this.flatCoordinates=P.getFlatCoordinates().slice(),x=P.getEnds().slice(),this.endss_.push();this.endss_.push(x),this.changed()}clone(){const P=this.endss_.length,x=new Array(P);for(let U=0;U<P;++U)x[U]=this.endss_[U].slice();const T=new l(this.flatCoordinates.slice(),this.layout,x);return T.applyProperties(this),T}closestPointXY(P,x,T,U){return U<(0,j.qf)(this.getExtent(),P,x)?U:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,H.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,H.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,P,x,T,U))}containsXY(P,x){return(0,f.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,P,x)}getArea(){return(0,u.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(P){let x;return void 0!==P?(x=this.getOrientedFlatCoordinates().slice(),(0,c.dL)(x,0,this.endss_,this.stride,P)):x=this.flatCoordinates,(0,v.ug)(x,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const P=(0,s.E)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,S.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,P),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new _.Z(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const P=this.flatCoordinates;(0,c.Oj)(P,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=P:(this.orientedFlatCoordinates_=P.slice(),this.orientedFlatCoordinates_.length=(0,c.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(P){const x=[],T=[];return x.length=(0,i.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(P),x,0,T),new l(x,"XY",T)}getPolygon(P){if(P<0||this.endss_.length<=P)return null;let x;if(0===P)x=0;else{const D=this.endss_[P-1];x=D[D.length-1]}const T=this.endss_[P].slice(),U=T[T.length-1];if(0!==x)for(let D=0,C=T.length;D<C;++D)T[D]-=x;return new g.ZP(this.flatCoordinates.slice(x,U),this.layout,T)}getPolygons(){const P=this.layout,x=this.flatCoordinates,T=this.endss_,U=[];let D=0;for(let C=0,O=T.length;C<O;++C){const X=T[C].slice(),$=X[X.length-1];if(0!==D)for(let B=0,k=X.length;B<k;++B)X[B]-=D;const dt=new g.ZP(x.slice(D,$),P,X);U.push(dt),D=$}return U}getType(){return"MultiPolygon"}intersectsExtent(P){return(0,h.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,P)}setCoordinates(P,x){this.setLayout(x,P,3),this.flatCoordinates||(this.flatCoordinates=[]);const T=(0,N.QT)(this.flatCoordinates,0,P,this.stride,this.endss_);if(0===T.length)this.flatCoordinates.length=0;else{const U=T[T.length-1];this.flatCoordinates.length=0===U.length?0:U[U.length-1]}this.changed()}}const m=l},7026:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>N});var _=r(1790),g=r(9543),Q=r(9216),H=r(4331);class j extends _.ZP{constructor(S,v){super(),this.setCoordinates(S,v)}clone(){const S=new j(this.flatCoordinates.slice(),this.layout);return S.applyProperties(this),S}closestPointXY(S,v,h,c){const u=this.flatCoordinates,s=(0,H.bI)(S,v,u[0],u[1]);if(s<c){const f=this.stride;for(let i=0;i<f;++i)h[i]=u[i];return h.length=f,s}return c}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(S){return(0,g.HK)(this.flatCoordinates,S)}getType(){return"Point"}intersectsExtent(S){return(0,g.jE)(S,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(S,v){this.setLayout(v,S,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,Q.IG)(this.flatCoordinates,0,S,this.stride),this.changed()}}const N=j},7464:(Vt,gt,r)=>{"use strict";r.d(gt,{ZP:()=>m,oJ:()=>P});var _=r(1790),g=r(4558),Q=r(9543),H=r(9216),j=r(1757),N=r(4850),w=r(4793);class S extends _.ZP{constructor(D,C){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===C||Array.isArray(D[0])?this.setCoordinates(D,C):this.setFlatCoordinates(C,D)}clone(){return new S(this.flatCoordinates.slice(),this.layout)}closestPointXY(D,C,O,X){return X<(0,Q.qf)(this.getExtent(),D,C)?X:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,g.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,g.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,D,C,O,X))}getArea(){return(0,w.QQ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,N.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(D){const C=[];return C.length=(0,j.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,D,C,0),new S(C,"XY")}getType(){return"LinearRing"}intersectsExtent(D){return!1}setCoordinates(D,C){this.setLayout(C,D,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,H.Sg)(this.flatCoordinates,0,D,this.stride),this.changed()}}const v=S;var h=r(7026),c=r(142),u=r(5577),s=r(4429),f=r(5784),i=r(5101);class l extends _.ZP{constructor(D,C,O){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==C&&O?(this.setFlatCoordinates(C,D),this.ends_=O):this.setCoordinates(D,C)}appendLinearRing(D){this.flatCoordinates?(0,c.l7)(this.flatCoordinates,D.getFlatCoordinates()):this.flatCoordinates=D.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const D=new l(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return D.applyProperties(this),D}closestPointXY(D,C,O,X){return X<(0,Q.qf)(this.getExtent(),D,C)?X:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,g.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,g.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,D,C,O,X))}containsXY(D,C){return(0,i.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,D,C)}getArea(){return(0,w.KP)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(D){let C;return void 0!==D?(C=this.getOrientedFlatCoordinates().slice(),(0,f.zX)(C,0,this.ends_,this.stride,D)):C=this.flatCoordinates,(0,N.o1)(C,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const D=(0,Q.qg)(this.getExtent());this.flatInteriorPoint_=(0,u.X)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,D,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new h.Z(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(D){return D<0||this.ends_.length<=D?null:new v(this.flatCoordinates.slice(0===D?0:this.ends_[D-1],this.ends_[D]),this.layout)}getLinearRings(){const D=this.layout,C=this.flatCoordinates,O=this.ends_,X=[];let $=0;for(let dt=0,B=O.length;dt<B;++dt){const k=O[dt],L=new v(C.slice($,k),D);X.push(L),$=k}return X}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const D=this.flatCoordinates;(0,f.$v)(D,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=D:(this.orientedFlatCoordinates_=D.slice(),this.orientedFlatCoordinates_.length=(0,f.zX)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(D){const C=[],O=[];return C.length=(0,j.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(D),C,0,O),new l(C,"XY",O)}getType(){return"Polygon"}intersectsExtent(D){return(0,s.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,D)}setCoordinates(D,C){this.setLayout(C,D,2),this.flatCoordinates||(this.flatCoordinates=[]);const O=(0,H._5)(this.flatCoordinates,0,D,this.stride,this.ends_);this.flatCoordinates.length=0===O.length?0:O[O.length-1],this.changed()}}const m=l;function P(U){const D=U[0],C=U[1],O=U[2],X=U[3],$=[D,C,D,X,O,X,O,C,D,C];return new l($,"XY",[$.length])}},1790:(Vt,gt,r)=>{"use strict";r.d(gt,{Kr:()=>S,ZP:()=>v});var _=r(4023),g=r(513),Q=r(9543),H=r(3904);function w(h){let c;return"XY"==h?c=2:"XYZ"==h||"XYM"==h?c=3:"XYZM"==h&&(c=4),c}function S(h,c,u){const s=h.getFlatCoordinates();if(!s)return null;const f=h.getStride();return(0,H.vT)(s,0,s.length,f,c,u)}const v=class j extends _.Z{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(c){return(0,Q.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,c)}getCoordinates(){return(0,g.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(c){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),c<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&c<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const u=this.getSimplifiedGeometryInternal(c);return u.getFlatCoordinates().length<this.flatCoordinates.length?u:(this.simplifiedGeometryMaxMinSquaredTolerance=c,this)}getSimplifiedGeometryInternal(c){return this}getStride(){return this.stride}setFlatCoordinates(c,u){this.stride=w(c),this.layout=c,this.flatCoordinates=u}setCoordinates(c,u){(0,g.O3)()}setLayout(c,u,s){let f;if(c)f=w(c);else{for(let i=0;i<s;++i){if(0===u.length)return this.layout="XY",void(this.stride=2);u=u[0]}f=u.length,c=function N(h){let c;return 2==h?c="XY":3==h?c="XYZ":4==h&&(c="XYZM"),c}(f)}this.layout=c,this.stride=f}applyTransform(c){this.flatCoordinates&&(c(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(c,u){const s=this.getFlatCoordinates();if(s){const f=this.getStride();(0,H.U1)(s,0,s.length,f,c,u,s),this.changed()}}scale(c,u,s){void 0===u&&(u=c),s||(s=(0,Q.qg)(this.getExtent()));const f=this.getFlatCoordinates();if(f){const i=this.getStride();(0,H.bA)(f,0,f.length,i,c,u,s,f),this.changed()}}translate(c,u){const s=this.getFlatCoordinates();if(s){const f=this.getStride();(0,H.Iu)(s,0,s.length,f,c,u,s),this.changed()}}}},4793:(Vt,gt,r)=>{"use strict";function _(H,j,N,w){let S=0,v=H[N-w],h=H[N-w+1];for(;j<N;j+=w){const c=H[j],u=H[j+1];S+=h*c-v*u,v=c,h=u}return S/2}function g(H,j,N,w){let S=0;for(let v=0,h=N.length;v<h;++v){const c=N[v];S+=_(H,j,c,w),j=c}return S}function Q(H,j,N,w){let S=0;for(let v=0,h=N.length;v<h;++v){const c=N[v];S+=g(H,j,c,w),j=c[c.length-1]}return S}r.d(gt,{Eu:()=>Q,KP:()=>g,QQ:()=>_})},2783:(Vt,gt,r)=>{"use strict";r.d(gt,{E:()=>g});var _=r(9543);function g(Q,H,j,N){const w=[];let S=(0,_.lJ)();for(let v=0,h=j.length;v<h;++v){const c=j[v];S=(0,_.GN)(Q,H,c[0],N),w.push((S[0]+S[2])/2,(S[1]+S[3])/2),H=c[c.length-1]}return w}},4558:(Vt,gt,r)=>{"use strict";r.d(gt,{Af:()=>H,Bv:()=>Q,H$:()=>N,Xl:()=>w,gI:()=>S,sD:()=>j});var _=r(4331);function g(v,h,c,u,s,f,i){const l=v[h],m=v[h+1],e=v[c]-l,P=v[c+1]-m;let x;if(0===e&&0===P)x=h;else{const T=((s-l)*e+(f-m)*P)/(e*e+P*P);if(T>1)x=c;else{if(T>0){for(let U=0;U<u;++U)i[U]=(0,_.t7)(v[h+U],v[c+U],T);return void(i.length=u)}x=h}}for(let T=0;T<u;++T)i[T]=v[x+T];i.length=u}function Q(v,h,c,u,s){let f=v[h],i=v[h+1];for(h+=u;h<c;h+=u){const l=v[h],m=v[h+1],e=(0,_.bI)(f,i,l,m);e>s&&(s=e),f=l,i=m}return s}function H(v,h,c,u,s){for(let f=0,i=c.length;f<i;++f){const l=c[f];s=Q(v,h,l,u,s),h=l}return s}function j(v,h,c,u,s){for(let f=0,i=c.length;f<i;++f){const l=c[f];s=H(v,h,l,u,s),h=l[l.length-1]}return s}function N(v,h,c,u,s,f,i,l,m,e,P){if(h==c)return e;let x,T;if(0===s){if(T=(0,_.bI)(i,l,v[h],v[h+1]),T<e){for(x=0;x<u;++x)m[x]=v[h+x];return m.length=u,T}return e}P=P||[NaN,NaN];let U=h+u;for(;U<c;)if(g(v,U-u,U,u,i,l,P),T=(0,_.bI)(i,l,P[0],P[1]),T<e){for(e=T,x=0;x<u;++x)m[x]=P[x];m.length=u,U+=u}else U+=u*Math.max((Math.sqrt(T)-Math.sqrt(e))/s|0,1);if(f&&(g(v,c-u,h,u,i,l,P),T=(0,_.bI)(i,l,P[0],P[1]),T<e)){for(e=T,x=0;x<u;++x)m[x]=P[x];m.length=u}return e}function w(v,h,c,u,s,f,i,l,m,e,P){P=P||[NaN,NaN];for(let x=0,T=c.length;x<T;++x){const U=c[x];e=N(v,h,U,u,s,f,i,l,m,e,P),h=U}return e}function S(v,h,c,u,s,f,i,l,m,e,P){P=P||[NaN,NaN];for(let x=0,T=c.length;x<T;++x){const U=c[x];e=w(v,h,U,u,s,f,i,l,m,e,P),h=U[U.length-1]}return e}},5101:(Vt,gt,r)=>{"use strict";r.d(gt,{TG:()=>Q,Zl:()=>j,uG:()=>g,wY:()=>H});var _=r(9543);function g(N,w,S,v,h){return!(0,_.H6)(h,function(u){return!Q(N,w,S,v,u[0],u[1])})}function Q(N,w,S,v,h,c){let u=0,s=N[S-v],f=N[S-v+1];for(;w<S;w+=v){const i=N[w],l=N[w+1];f<=c?l>c&&(i-s)*(c-f)-(h-s)*(l-f)>0&&u++:l<=c&&(i-s)*(c-f)-(h-s)*(l-f)<0&&u--,s=i,f=l}return 0!==u}function H(N,w,S,v,h,c){if(0===S.length||!Q(N,w,S[0],v,h,c))return!1;for(let u=1,s=S.length;u<s;++u)if(Q(N,S[u-1],S[u],v,h,c))return!1;return!0}function j(N,w,S,v,h,c){if(0===S.length)return!1;for(let u=0,s=S.length;u<s;++u){const f=S[u];if(H(N,w,f,v,h,c))return!0;w=f[f.length-1]}return!1}},9216:(Vt,gt,r)=>{"use strict";function _(j,N,w,S){for(let v=0,h=w.length;v<h;++v)j[N++]=w[v];return N}function g(j,N,w,S){for(let v=0,h=w.length;v<h;++v){const c=w[v];for(let u=0;u<S;++u)j[N++]=c[u]}return N}function Q(j,N,w,S,v){v=v||[];let h=0;for(let c=0,u=w.length;c<u;++c){const s=g(j,N,w[c],S);v[h++]=s,N=s}return v.length=h,v}function H(j,N,w,S,v){v=v||[];let h=0;for(let c=0,u=w.length;c<u;++c){const s=Q(j,N,w[c],S,v[h]);0===s.length&&(s[0]=N),v[h++]=s,N=s[s.length-1]}return v.length=h,v}r.d(gt,{IG:()=>_,QT:()=>H,Sg:()=>g,_5:()=>Q})},4850:(Vt,gt,r)=>{"use strict";function _(H,j,N,w,S){S=void 0!==S?S:[];let v=0;for(let h=j;h<N;h+=w)S[v++]=H.slice(h,h+w);return S.length=v,S}function g(H,j,N,w,S){S=void 0!==S?S:[];let v=0;for(let h=0,c=N.length;h<c;++h){const u=N[h];S[v++]=_(H,j,u,w,S[v]),j=u}return S.length=v,S}function Q(H,j,N,w,S){S=void 0!==S?S:[];let v=0;for(let h=0,c=N.length;h<c;++h){const u=N[h];S[v++]=1===u.length&&u[0]===j?[]:g(H,j,u,w,S[v]),j=u[u.length-1]}return S.length=v,S}r.d(gt,{Ml:()=>_,o1:()=>g,ug:()=>Q})},5577:(Vt,gt,r)=>{"use strict";r.d(gt,{U:()=>H,X:()=>Q});var _=r(142),g=r(5101);function Q(j,N,w,S,v,h,c){let u,s,f,i,l,m,e;const P=v[h+1],x=[];for(let D=0,C=w.length;D<C;++D){const O=w[D];for(i=j[O-S],m=j[O-S+1],u=N;u<O;u+=S)l=j[u],e=j[u+1],(P<=m&&e<=P||m<=P&&P<=e)&&(f=(P-m)/(e-m)*(l-i)+i,x.push(f)),i=l,m=e}let T=NaN,U=-1/0;for(x.sort(_.j2),i=x[0],u=1,s=x.length;u<s;++u){l=x[u];const D=Math.abs(l-i);D>U&&(f=(i+l)/2,(0,g.wY)(j,N,w,S,f,P)&&(T=f,U=D)),i=l}return isNaN(T)&&(T=v[h]),c?(c.push(T,P,U),c):[T,P,U]}function H(j,N,w,S,v){let h=[];for(let c=0,u=w.length;c<u;++c){const s=w[c];h=Q(j,N,s,S,v,2*c,h),N=s[s.length-1]}return h}},7170:(Vt,gt,r)=>{"use strict";r.d(gt,{WW:()=>Q,dG:()=>j,iJ:()=>H});var _=r(142),g=r(4331);function Q(N,w,S,v,h,c,u){let s,f;const i=(S-w)/v;if(1===i)s=w;else if(2===i)s=w,f=h;else if(0!==i){let l=N[w],m=N[w+1],e=0;const P=[0];for(let U=w+v;U<S;U+=v){const D=N[U],C=N[U+1];e+=Math.sqrt((D-l)*(D-l)+(C-m)*(C-m)),P.push(e),l=D,m=C}const x=h*e,T=(0,_.ry)(P,x);T<0?(f=(x-P[-T-2])/(P[-T-1]-P[-T-2]),s=w+(-T-2)*v):s=w+T*v}u=u>1?u:2,c=c||new Array(u);for(let l=0;l<u;++l)c[l]=void 0===s?NaN:void 0===f?N[s+l]:(0,g.t7)(N[s+l],N[s+v+l],f);return c}function H(N,w,S,v,h,c){if(S==w)return null;let u;if(h<N[w+v-1])return c?(u=N.slice(w,w+v),u[v-1]=h,u):null;if(N[S-1]<h)return c?(u=N.slice(S-v,S),u[v-1]=h,u):null;if(h==N[w+v-1])return N.slice(w,w+v);let s=w/v,f=S/v;for(;s<f;){const e=s+f>>1;h<N[(e+1)*v-1]?f=e:s=e+1}const i=N[s*v-1];if(h==i)return N.slice((s-1)*v,(s-1)*v+v);const m=(h-i)/(N[(s+1)*v-1]-i);u=[];for(let e=0;e<v-1;++e)u.push((0,g.t7)(N[(s-1)*v+e],N[s*v+e],m));return u.push(h),u}function j(N,w,S,v,h,c,u){if(u)return H(N,w,S[S.length-1],v,h,c);let s;if(h<N[v-1])return c?(s=N.slice(0,v),s[v-1]=h,s):null;if(N[N.length-1]<h)return c?(s=N.slice(N.length-v),s[v-1]=h,s):null;for(let f=0,i=S.length;f<i;++f){const l=S[f];if(w!=l){if(h<N[w+v-1])return null;if(h<=N[l-1])return H(N,w,l,v,h,!1);w=l}}return null}},4429:(Vt,gt,r)=>{"use strict";r.d(gt,{AW:()=>j,Kz:()=>H,ac:()=>w,mV:()=>N,oW:()=>S});var _=r(9543),g=r(8665),Q=r(5101);function H(v,h,c,u,s){const f=(0,_.qP)((0,_.lJ)(),v,h,c,u);return!!(0,_.kK)(s,f)&&(!!((0,_.r4)(s,f)||f[0]>=s[0]&&f[2]<=s[2]||f[1]>=s[1]&&f[3]<=s[3])||(0,g.E)(v,h,c,u,function(i,l){return(0,_.I7)(s,i,l)}))}function j(v,h,c,u,s){for(let f=0,i=c.length;f<i;++f){if(H(v,h,c[f],u,s))return!0;h=c[f]}return!1}function N(v,h,c,u,s){return!!(H(v,h,c,u,s)||(0,Q.TG)(v,h,c,u,s[0],s[1])||(0,Q.TG)(v,h,c,u,s[0],s[3])||(0,Q.TG)(v,h,c,u,s[2],s[1])||(0,Q.TG)(v,h,c,u,s[2],s[3]))}function w(v,h,c,u,s){if(!N(v,h,c[0],u,s))return!1;if(1===c.length)return!0;for(let f=1,i=c.length;f<i;++f)if((0,Q.uG)(v,c[f-1],c[f],u,s)&&!H(v,c[f-1],c[f],u,s))return!1;return!0}function S(v,h,c,u,s){for(let f=0,i=c.length;f<i;++f){const l=c[f];if(w(v,h,l,u,s))return!0;h=l[l.length-1]}return!1}},8575:(Vt,gt,r)=>{"use strict";function _(Q,H,j,N){let w=Q[H],S=Q[H+1],v=0;for(let h=H+N;h<j;h+=N){const c=Q[h],u=Q[h+1];v+=Math.sqrt((c-w)*(c-w)+(u-S)*(u-S)),w=c,S=u}return v}r.d(gt,{W:()=>_})},5784:(Vt,gt,r)=>{"use strict";function _(S,v,h,c){for(;v<h-c;){for(let u=0;u<c;++u){const s=S[v+u];S[v+u]=S[h-c+u],S[h-c+u]=s}v+=c,h-=c}}function g(S,v,h,c){let u=0,s=S[h-c],f=S[h-c+1];for(;v<h;v+=c){const i=S[v],l=S[v+1];u+=(i-s)*(l+f),s=i,f=l}return 0===u?void 0:u>0}function Q(S,v,h,c,u){u=void 0!==u&&u;for(let s=0,f=h.length;s<f;++s){const i=h[s],l=g(S,v,i,c);if(0===s){if(u&&l||!u&&!l)return!1}else if(u&&!l||!u&&l)return!1;v=i}return!0}function H(S,v,h,c,u){for(let s=0,f=h.length;s<f;++s){const i=h[s];if(!Q(S,v,i,c,u))return!1;i.length&&(v=i[i.length-1])}return!0}function j(S,v,h,c,u){u=void 0!==u&&u;for(let s=0,f=h.length;s<f;++s){const i=h[s],l=g(S,v,i,c);(0===s?u&&l||!u&&!l:u&&!l||!u&&l)&&_(S,v,i,c),v=i}return v}function N(S,v,h,c,u){for(let s=0,f=h.length;s<f;++s)v=j(S,v,h[s],c,u);return v}function w(S,v){const h=[];let c=0,u=0;for(let s=0,f=v.length;s<f;++s){const i=v[s];if(g(S,c,i,2)){if(0===h.length)continue;h[h.length-1].push(v[u])}else h.push(v.slice(u,s+1));u=s+1,c=i}return h}r.d(gt,{Q3:()=>w,$v:()=>Q,Oj:()=>H,zX:()=>j,dL:()=>N})},8665:(Vt,gt,r)=>{"use strict";function _(g,Q,H,j,N){let w;for(Q+=j;Q<H;Q+=j)if(w=N(g.slice(Q-j,Q),g.slice(Q,Q+j)),w)return w;return!1}r.d(gt,{E:()=>_})},1757:(Vt,gt,r)=>{"use strict";r.d(gt,{Pp:()=>h,UJ:()=>H,Zh:()=>v,dt:()=>Q,uZ:()=>w});var _=r(4331);function Q(c,u,s,f,i,l,m){const e=(s-u)/f;if(e<3){for(;u<s;u+=f)l[m++]=c[u],l[m++]=c[u+1];return m}const P=new Array(e);P[0]=1,P[e-1]=1;const x=[u,s-f];let T=0;for(;x.length>0;){const U=x.pop(),D=x.pop();let C=0;const O=c[D],X=c[D+1],$=c[U],dt=c[U+1];for(let B=D+f;B<U;B+=f){const p=(0,_.rU)(c[B],c[B+1],O,X,$,dt);p>C&&(T=B,C=p)}C>i&&(P[(T-u)/f]=1,D+f<T&&x.push(D,T),T+f<U&&x.push(T,U))}for(let U=0;U<e;++U)P[U]&&(l[m++]=c[u+U*f],l[m++]=c[u+U*f+1]);return m}function H(c,u,s,f,i,l,m,e){for(let P=0,x=s.length;P<x;++P){const T=s[P];m=Q(c,u,T,f,i,l,m),e.push(m),u=T}return m}function w(c,u){return u*Math.round(c/u)}function S(c,u,s,f,i,l,m){if(u==s)return m;let x,T,e=w(c[u],i),P=w(c[u+1],i);u+=f,l[m++]=e,l[m++]=P;do{if(x=w(c[u],i),T=w(c[u+1],i),(u+=f)==s)return l[m++]=x,l[m++]=T,m}while(x==e&&T==P);for(;u<s;){const U=w(c[u],i),D=w(c[u+1],i);if(u+=f,U==x&&D==T)continue;const C=x-e,O=T-P,X=U-e,$=D-P;C*$==O*X&&(C<0&&X<C||C==X||C>0&&X>C)&&(O<0&&$<O||O==$||O>0&&$>O)?(x=U,T=D):(l[m++]=x,l[m++]=T,e=x,P=T,x=U,T=D)}return l[m++]=x,l[m++]=T,m}function v(c,u,s,f,i,l,m,e){for(let P=0,x=s.length;P<x;++P){const T=s[P];m=S(c,u,T,f,i,l,m),e.push(m),u=T}return m}function h(c,u,s,f,i,l,m,e){for(let P=0,x=s.length;P<x;++P){const T=s[P],U=[];m=v(c,u,T,f,i,l,m,U),e.push(U),u=T[T.length-1]}return m}},3904:(Vt,gt,r)=>{"use strict";function _(j,N,w,S,v,h){h=h||[];let c=0;for(let u=N;u<w;u+=S){const s=j[u],f=j[u+1];h[c++]=v[0]*s+v[2]*f+v[4],h[c++]=v[1]*s+v[3]*f+v[5]}return h&&h.length!=c&&(h.length=c),h}function g(j,N,w,S,v,h,c){c=c||[];const u=Math.cos(v),s=Math.sin(v),f=h[0],i=h[1];let l=0;for(let m=N;m<w;m+=S){const e=j[m]-f,P=j[m+1]-i;c[l++]=f+e*u-P*s,c[l++]=i+e*s+P*u;for(let x=m+2;x<m+S;++x)c[l++]=j[x]}return c&&c.length!=l&&(c.length=l),c}function Q(j,N,w,S,v,h,c,u){u=u||[];const s=c[0],f=c[1];let i=0;for(let l=N;l<w;l+=S){const e=j[l+1]-f;u[i++]=s+v*(j[l]-s),u[i++]=f+h*e;for(let P=l+2;P<l+S;++P)u[i++]=j[P]}return u&&u.length!=i&&(u.length=i),u}function H(j,N,w,S,v,h,c){c=c||[];let u=0;for(let s=N;s<w;s+=S){c[u++]=j[s]+v,c[u++]=j[s+1]+h;for(let f=s+2;f<s+S;++f)c[u++]=j[f]}return c&&c.length!=u&&(c.length=u),c}r.d(gt,{Iu:()=>H,U1:()=>g,bA:()=>Q,vT:()=>_})},5063:(Vt,gt,r)=>{"use strict";r.d(gt,{G$:()=>j,Id:()=>S,ME:()=>H,MP:()=>w,Tp:()=>v,V:()=>g,bM:()=>h,tK:()=>N});const _=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",g=_.includes("firefox"),H=_.includes("safari")&&!_.includes("chrom")&&(_.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(_)),j=_.includes("webkit")&&!_.includes("edge"),N=_.includes("macintosh"),w=typeof devicePixelRatio<"u"?devicePixelRatio:1,S=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,v=typeof Image<"u"&&Image.prototype.decode,h=function(){let c=!1;try{const u=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("_",null,u),window.removeEventListener("_",null,u)}catch{}return c}()},2659:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>c});var _=r(3615),g=r(8437),Q=r(6450),H=r(7464);const N=class j extends Q.Z{constructor(s){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+s,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const s=this.startPixel_,f=this.endPixel_,i="px",l=this.element_.style;l.left=Math.min(s[0],f[0])+i,l.top=Math.min(s[1],f[1])+i,l.width=Math.abs(f[0]-s[0])+i,l.height=Math.abs(f[1]-s[1])+i}setMap(s){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const f=this.element_.style;f.left="inherit",f.top="inherit",f.width="inherit",f.height="inherit"}this.map_=s,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(s,f){this.startPixel_=s,this.endPixel_=f,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const s=this.startPixel_,f=this.endPixel_,l=[s,[s[0],f[1]],f,[f[0],s[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);l[4]=l[0].slice(),this.geometry_?this.geometry_.setCoordinates([l]):this.geometry_=new H.ZP([l])}getGeometry(){return this.geometry_}};var w=r(7963);class v extends _.ZP{constructor(s,f,i){super(s),this.coordinate=f,this.mapBrowserEvent=i}}const c=class h extends g.Z{constructor(s){super(),this.box_=new N((s=s||{}).className||"ol-dragbox"),this.minArea_=void 0!==s.minArea?s.minArea:64,s.onBoxEnd&&(this.onBoxEnd=s.onBoxEnd),this.startPixel_=null,this.condition_=s.condition?s.condition:w.v8,this.boxEndCondition_=s.boxEndCondition?s.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(s,f,i){const l=i[0]-f[0],m=i[1]-f[1];return l*l+m*m>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(s){this.box_.setPixels(this.startPixel_,s.pixel),this.dispatchEvent(new v("boxdrag",s.coordinate,s))}handleUpEvent(s){this.box_.setMap(null);const f=this.boxEndCondition_(s,this.startPixel_,s.pixel);return f&&this.onBoxEnd(s),this.dispatchEvent(new v(f?"boxend":"boxcancel",s.coordinate,s)),!1}handleDownEvent(s){return!!this.condition_(s)&&(this.startPixel_=s.pixel,this.box_.setMap(s.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new v("boxstart",s.coordinate,s)),!0)}onBoxEnd(s){}}},3181:(Vt,gt,r)=>{"use strict";r.d(gt,{ZP:()=>w,Cv:()=>j,FW:()=>N});var _=r(4115);var Q=r(4720);function j(S,v,h){const c=S.getCenterInternal();c&&S.animateInternal({duration:void 0!==h?h:250,easing:Q.GE,center:S.getConstrainedCenter([c[0]+v[0],c[1]+v[1]])})}function N(S,v,h,c){const u=S.getZoom();if(void 0===u)return;const s=S.getConstrainedZoom(u+v),f=S.getResolutionForZoom(s);S.getAnimating()&&S.cancelAnimations(),S.animate({resolution:f,anchor:h,duration:void 0!==c?c:250,easing:Q.Vv})}const w=class H extends _.Z{constructor(v){super(),v&&v.handleEvent&&(this.handleEvent=v.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get("active")}getMap(){return this.map_}handleEvent(v){return!0}setActive(v){this.set("active",v)}setMap(v){this.map_=v}}},8437:(Vt,gt,r)=>{"use strict";r.d(gt,{S:()=>H,Z:()=>j});var _=r(3181),g=r(1590);function H(N){const w=N.length;let S=0,v=0;for(let h=0;h<w;h++)S+=N[h].clientX,v+=N[h].clientY;return{clientX:S/w,clientY:v/w}}const j=class Q extends _.ZP{constructor(w){super(w=w||{}),w.handleDownEvent&&(this.handleDownEvent=w.handleDownEvent),w.handleDragEvent&&(this.handleDragEvent=w.handleDragEvent),w.handleMoveEvent&&(this.handleMoveEvent=w.handleMoveEvent),w.handleUpEvent&&(this.handleUpEvent=w.handleUpEvent),w.stopDown&&(this.stopDown=w.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(w){return!1}handleDragEvent(w){}handleEvent(w){if(!w.originalEvent)return!0;let S=!1;if(this.updateTrackedPointers_(w),this.handlingDownUpSequence){if(w.type==g.Z.POINTERDRAG)this.handleDragEvent(w),w.originalEvent.preventDefault();else if(w.type==g.Z.POINTERUP){const v=this.handleUpEvent(w);this.handlingDownUpSequence=v&&this.targetPointers.length>0}}else if(w.type==g.Z.POINTERDOWN){const v=this.handleDownEvent(w);this.handlingDownUpSequence=v,S=this.stopDown(v)}else w.type==g.Z.POINTERMOVE&&this.handleMoveEvent(w);return!S}handleMoveEvent(w){}handleUpEvent(w){return!1}stopDown(w){return w}updateTrackedPointers_(w){w.activePointers&&(this.targetPointers=w.activePointers)}}},1179:(Vt,gt,r)=>{"use strict";r.d(gt,{c:()=>K});var _=r(9573),g=r(3181),Q=r(1590);const j=class H extends g.ZP{constructor(J){super(),this.delta_=(J=J||{}).delta?J.delta:1,this.duration_=void 0!==J.duration?J.duration:250}handleEvent(J){let q=!1;if(J.type==Q.Z.DBLCLICK){const ut=J.originalEvent,_t=J.coordinate,Tt=ut.shiftKey?-this.delta_:this.delta_,Lt=J.map.getView();(0,g.FW)(Lt,Tt,_t,this.duration_),ut.preventDefault(),q=!0}return!q}};var N=r(8437),w=r(1334),S=r(7963),v=r(4720),h=r(5415);const u=class c extends N.Z{constructor(J){super({stopDown:w.Dv}),this.kinetic_=(J=J||{}).kinetic,this.lastCentroid=null,this.panning_=!1;const q=J.condition?J.condition:(0,S.$6)(S.rM,S.Xp);this.condition_=J.onFocusOnly?(0,S.$6)(S.yZ,q):q,this.noKinetic_=!1}handleDragEvent(J){const q=J.map;this.panning_||(this.panning_=!0,q.getView().beginInteraction());const ut=this.targetPointers,ht=q.getEventPixel((0,N.S)(ut));if(ut.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(ht[0],ht[1]),this.lastCentroid){const _t=[this.lastCentroid[0]-ht[0],ht[1]-this.lastCentroid[1]],Lt=J.map.getView();(0,h.bA)(_t,Lt.getResolution()),(0,h.U1)(_t,Lt.getRotation()),Lt.adjustCenterInternal(_t)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=ht,this.lastPointersCount_=ut.length,J.originalEvent.preventDefault()}handleUpEvent(J){const q=J.map,ut=q.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const ht=this.kinetic_.getDistance(),_t=this.kinetic_.getAngle(),Tt=ut.getCenterInternal(),Lt=q.getPixelFromCoordinateInternal(Tt),Ht=q.getCoordinateFromPixelInternal([Lt[0]-ht*Math.cos(_t),Lt[1]-ht*Math.sin(_t)]);ut.animateInternal({center:ut.getConstrainedCenter(Ht),duration:500,easing:v.Vv})}return this.panning_&&(this.panning_=!1,ut.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(J){if(this.targetPointers.length>0&&this.condition_(J)){const ut=J.map.getView();return this.lastCentroid=null,ut.getAnimating()&&ut.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}};var s=r(7011);const i=class f extends N.Z{constructor(J){J=J||{},super({stopDown:w.Dv}),this.condition_=J.condition?J.condition:S.aj,this.lastAngle_=void 0,this.duration_=void 0!==J.duration?J.duration:250}handleDragEvent(J){if(!(0,S.QL)(J))return;const q=J.map,ut=q.getView();if(ut.getConstraints().rotation===s.h$)return;const ht=q.getSize(),_t=J.pixel,Tt=Math.atan2(ht[1]/2-_t[1],_t[0]-ht[0]/2);void 0!==this.lastAngle_&&ut.adjustRotationInternal(-(Tt-this.lastAngle_)),this.lastAngle_=Tt}handleUpEvent(J){return!(0,S.QL)(J)||(J.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(J){return!!((0,S.QL)(J)&&(0,S.v8)(J)&&this.condition_(J))&&(J.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)}};var l=r(2659);const e=class m extends l.Z{constructor(J){super({condition:(J=J||{}).condition?J.condition:S.vY,className:J.className||"ol-dragzoom",minArea:J.minArea}),this.duration_=void 0!==J.duration?J.duration:200,this.out_=void 0!==J.out&&J.out}onBoxEnd(J){const ut=this.getMap().getView();let ht=this.getGeometry();if(this.out_){const _t=ut.rotatedExtentForGeometry(ht),Tt=ut.getResolutionForExtentInternal(_t),Lt=ut.getResolution()/Tt;ht=ht.clone(),ht.scale(Lt*Lt)}ut.fitInternal(ht,{duration:this.duration_,easing:v.Vv})}};var P=r(3044);const U=class T extends g.ZP{constructor(J){super(),J=J||{},this.defaultCondition_=function(q){return(0,S.rM)(q)&&(0,S.TN)(q)},this.condition_=void 0!==J.condition?J.condition:this.defaultCondition_,this.duration_=void 0!==J.duration?J.duration:100,this.pixelDelta_=void 0!==J.pixelDelta?J.pixelDelta:128}handleEvent(J){let q=!1;if(J.type==P.Z.KEYDOWN){const ut=J.originalEvent,ht=ut.keyCode;if(this.condition_(J)&&(40==ht||37==ht||39==ht||38==ht)){const Tt=J.map.getView(),Lt=Tt.getResolution()*this.pixelDelta_;let Ht=0,$t=0;40==ht?$t=-Lt:37==ht?Ht=-Lt:39==ht?Ht=Lt:$t=Lt;const ae=[Ht,$t];(0,h.U1)(ae,Tt.getRotation()),(0,g.Cv)(Tt,ae,this.duration_),ut.preventDefault(),q=!0}}return!q}},C=class D extends g.ZP{constructor(J){super(),this.condition_=(J=J||{}).condition?J.condition:S.TN,this.delta_=J.delta?J.delta:1,this.duration_=void 0!==J.duration?J.duration:100}handleEvent(J){let q=!1;if(J.type==P.Z.KEYDOWN||J.type==P.Z.KEYPRESS){const ut=J.originalEvent,ht=ut.key;if(this.condition_(J)&&("+"===ht||"-"===ht)){const Tt="+"===ht?this.delta_:-this.delta_,Lt=J.map.getView();(0,g.FW)(Lt,Tt,void 0,this.duration_),ut.preventDefault(),q=!0}}return!q}};var $=r(5063),dt=r(4331);const k=class B extends g.ZP{constructor(J){super(J=J||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==J.maxDelta?J.maxDelta:1,this.duration_=void 0!==J.duration?J.duration:250,this.timeout_=void 0!==J.timeout?J.timeout:80,this.useAnchor_=void 0===J.useAnchor||J.useAnchor,this.constrainResolution_=void 0!==J.constrainResolution&&J.constrainResolution;const q=J.condition?J.condition:S.Bx;this.condition_=J.onFocusOnly?(0,S.$6)(S.yZ,q):q,this.lastAnchor_=null,this.startTime_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const J=this.getMap();J&&J.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(J){if(!this.condition_(J)||J.type!==P.Z.WHEEL)return!0;const ut=J.map,ht=J.originalEvent;let _t;if(ht.preventDefault(),this.useAnchor_&&(this.lastAnchor_=J.coordinate),J.type==P.Z.WHEEL&&(_t=ht.deltaY,$.V&&ht.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(_t/=$.MP),ht.deltaMode===WheelEvent.DOM_DELTA_LINE&&(_t*=40)),0===_t)return!1;this.lastDelta_=_t;const Tt=Date.now();void 0===this.startTime_&&(this.startTime_=Tt),(!this.mode_||Tt-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(_t)<4?"trackpad":"wheel");const Lt=ut.getView();if("trackpad"===this.mode_&&!Lt.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(Lt.getAnimating()&&Lt.cancelAnimations(),Lt.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),Lt.adjustZoom(-_t/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=Tt,!1;this.totalDelta_+=_t;const Ht=Math.max(this.timeout_-(Tt-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,ut),Ht),!1}handleWheelZoom_(J){const q=J.getView();q.getAnimating()&&q.cancelAnimations();let ut=-(0,dt.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(q.getConstrainResolution()||this.constrainResolution_)&&(ut=ut?ut>0?1:-1:0),(0,g.FW)(q,ut,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(J){this.useAnchor_=J,J||(this.lastAnchor_=null)}},p=class L extends N.Z{constructor(J){const q=J=J||{};q.stopDown||(q.stopDown=w.Dv),super(q),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==J.threshold?J.threshold:.3,this.duration_=void 0!==J.duration?J.duration:250}handleDragEvent(J){let q=0;const ut=this.targetPointers[0],ht=this.targetPointers[1],_t=Math.atan2(ht.clientY-ut.clientY,ht.clientX-ut.clientX);if(void 0!==this.lastAngle_){const Ht=_t-this.lastAngle_;this.rotationDelta_+=Ht,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),q=Ht}this.lastAngle_=_t;const Tt=J.map,Lt=Tt.getView();Lt.getConstraints().rotation!==s.h$&&(this.anchor_=Tt.getCoordinateFromPixelInternal(Tt.getEventPixel((0,N.S)(this.targetPointers))),this.rotating_&&(Tt.render(),Lt.adjustRotationInternal(q,this.anchor_)))}handleUpEvent(J){return!(this.targetPointers.length<2&&(J.map.getView().endInteraction(this.duration_),1))}handleDownEvent(J){if(this.targetPointers.length>=2){const q=J.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||q.getView().beginInteraction(),!0}return!1}},R=class M extends N.Z{constructor(J){const q=J=J||{};q.stopDown||(q.stopDown=w.Dv),super(q),this.anchor_=null,this.duration_=void 0!==J.duration?J.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(J){let q=1;const ut=this.targetPointers[0],ht=this.targetPointers[1],_t=ut.clientX-ht.clientX,Tt=ut.clientY-ht.clientY,Lt=Math.sqrt(_t*_t+Tt*Tt);void 0!==this.lastDistance_&&(q=this.lastDistance_/Lt),this.lastDistance_=Lt;const Ht=J.map,$t=Ht.getView();1!=q&&(this.lastScaleDelta_=q),this.anchor_=Ht.getCoordinateFromPixelInternal(Ht.getEventPixel((0,N.S)(this.targetPointers))),Ht.render(),$t.adjustResolutionInternal(q,this.anchor_)}handleUpEvent(J){return!(this.targetPointers.length<2)||(J.map.getView().endInteraction(this.duration_,this.lastScaleDelta_>1?1:-1),!1)}handleDownEvent(J){if(this.targetPointers.length>=2){const q=J.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||q.getView().beginInteraction(),!0}return!1}};function K(G){G=G||{};const J=new _.Z,q=new class O{constructor(J,q,ut){this.decay_=J,this.minVelocity_=q,this.delay_=ut,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(J,q){this.points_.push(J,q,Date.now())}end(){if(this.points_.length<6)return!1;const J=Date.now()-this.delay_,q=this.points_.length-3;if(this.points_[q+2]<J)return!1;let ut=q-3;for(;ut>0&&this.points_[ut+2]>J;)ut-=3;const ht=this.points_[q+2]-this.points_[ut+2];if(ht<1e3/60)return!1;const _t=this.points_[q]-this.points_[ut],Tt=this.points_[q+1]-this.points_[ut+1];return this.angle_=Math.atan2(Tt,_t),this.initialVelocity_=Math.sqrt(_t*_t+Tt*Tt)/ht,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}(-.005,.05,100);return(void 0===G.altShiftDragRotate||G.altShiftDragRotate)&&J.push(new i),(void 0===G.doubleClickZoom||G.doubleClickZoom)&&J.push(new j({delta:G.zoomDelta,duration:G.zoomDuration})),(void 0===G.dragPan||G.dragPan)&&J.push(new u({onFocusOnly:G.onFocusOnly,kinetic:q})),(void 0===G.pinchRotate||G.pinchRotate)&&J.push(new p),(void 0===G.pinchZoom||G.pinchZoom)&&J.push(new R({duration:G.zoomDuration})),(void 0===G.keyboard||G.keyboard)&&(J.push(new U),J.push(new C({delta:G.zoomDelta,duration:G.zoomDuration}))),(void 0===G.mouseWheelZoom||G.mouseWheelZoom)&&J.push(new k({onFocusOnly:G.onFocusOnly,duration:G.zoomDuration})),(void 0===G.shiftDragZoom||G.shiftDragZoom)&&J.push(new e({duration:G.zoomDuration})),J}},2462:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>w});var _=r(4115),g=r(3570),Q=r(513),H=r(992),j=r(4331);const w=class N extends _.Z{constructor(v){super(),this.background_=v.background;const h=Object.assign({},v);"object"==typeof v.properties&&(delete h.properties,Object.assign(h,v.properties)),h[g.Z.OPACITY]=void 0!==v.opacity?v.opacity:1,(0,H.h)("number"==typeof h[g.Z.OPACITY],64),h[g.Z.VISIBLE]=void 0===v.visible||v.visible,h[g.Z.Z_INDEX]=v.zIndex,h[g.Z.MAX_RESOLUTION]=void 0!==v.maxResolution?v.maxResolution:1/0,h[g.Z.MIN_RESOLUTION]=void 0!==v.minResolution?v.minResolution:0,h[g.Z.MIN_ZOOM]=void 0!==v.minZoom?v.minZoom:-1/0,h[g.Z.MAX_ZOOM]=void 0!==v.maxZoom?v.maxZoom:1/0,this.className_=void 0!==h.className?h.className:"ol-layer",delete h.className,this.setProperties(h),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(v){const h=this.state_||{layer:this,managed:void 0===v||v},c=this.getZIndex();return h.opacity=(0,j.uZ)(Math.round(100*this.getOpacity())/100,0,1),h.visible=this.getVisible(),h.extent=this.getExtent(),h.zIndex=void 0!==c||h.managed?c:1/0,h.maxResolution=this.getMaxResolution(),h.minResolution=Math.max(this.getMinResolution(),0),h.minZoom=this.getMinZoom(),h.maxZoom=this.getMaxZoom(),this.state_=h,h}getLayersArray(v){return(0,Q.O3)()}getLayerStatesArray(v){return(0,Q.O3)()}getExtent(){return this.get(g.Z.EXTENT)}getMaxResolution(){return this.get(g.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(g.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(g.Z.MIN_ZOOM)}getMaxZoom(){return this.get(g.Z.MAX_ZOOM)}getOpacity(){return this.get(g.Z.OPACITY)}getSourceState(){return(0,Q.O3)()}getVisible(){return this.get(g.Z.VISIBLE)}getZIndex(){return this.get(g.Z.Z_INDEX)}setBackground(v){this.background_=v,this.changed()}setExtent(v){this.set(g.Z.EXTENT,v)}setMaxResolution(v){this.set(g.Z.MAX_RESOLUTION,v)}setMinResolution(v){this.set(g.Z.MIN_RESOLUTION,v)}setMaxZoom(v){this.set(g.Z.MAX_ZOOM,v)}setMinZoom(v){this.set(g.Z.MIN_ZOOM,v)}setOpacity(v){(0,H.h)("number"==typeof v,64),this.set(g.Z.OPACITY,v)}setVisible(v){this.set(g.Z.VISIBLE,v)}setZIndex(v){this.set(g.Z.Z_INDEX,v)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}},3998:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>Q});var _=r(7521);const Q=class g extends _.Z{constructor(j){super(j=j||{})}}},7319:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>H});var _=r(7521),g=r(3332);const H=class Q extends _.Z{constructor(N){N=N||{};const w=Object.assign({},N);delete w.preload,delete w.useInterimTilesOnError,super(w),this.setPreload(void 0!==N.preload?N.preload:0),this.setUseInterimTilesOnError(void 0===N.useInterimTilesOnError||N.useInterimTilesOnError)}getPreload(){return this.get(g.Z.PRELOAD)}setPreload(N){this.set(g.Z.PRELOAD,N)}getUseInterimTilesOnError(){return this.get(g.Z.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(N){this.set(g.Z.USE_INTERIM_TILES_ON_ERROR,N)}getData(N){return super.getData(N)}}},4420:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>m});var _=r(7521),g=r(3036),Q=r(1786),H=r(795),j=r(694),N=r(5999),w=r(2682),S=r(5253),v=r(8185);function h(e){return new Q.ZP({fill:c(e,""),stroke:u(e,""),text:s(e),image:f(e)})}function c(e,P){const x=e[P+"fill-color"];if(x)return new j.Z({color:x})}function u(e,P){const x=e[P+"stroke-width"],T=e[P+"stroke-color"];if(x||T)return new S.Z({width:x,color:T,lineCap:e[P+"stroke-line-cap"],lineJoin:e[P+"stroke-line-join"],lineDash:e[P+"stroke-line-dash"],lineDashOffset:e[P+"stroke-line-dash-offset"],miterLimit:e[P+"stroke-miter-limit"]})}function s(e){const P=e["text-value"];return P?new v.Z({text:P,font:e["text-font"],maxAngle:e["text-max-angle"],offsetX:e["text-offset-x"],offsetY:e["text-offset-y"],overflow:e["text-overflow"],placement:e["text-placement"],repeat:e["text-repeat"],scale:e["text-scale"],rotateWithView:e["text-rotate-with-view"],rotation:e["text-rotation"],textAlign:e["text-align"],justify:e["text-justify"],textBaseline:e["text-baseline"],padding:e["text-padding"],fill:c(e,"text-"),backgroundFill:c(e,"text-background-"),stroke:u(e,"text-"),backgroundStroke:u(e,"text-background-")}):void 0}function f(e){const P=e["icon-src"],x=e["icon-img"];if(P||x)return new N.Z({src:P,img:x,imgSize:e["icon-img-size"],anchor:e["icon-anchor"],anchorOrigin:e["icon-anchor-origin"],anchorXUnits:e["icon-anchor-x-units"],anchorYUnits:e["icon-anchor-y-units"],color:e["icon-color"],crossOrigin:e["icon-cross-origin"],offset:e["icon-offset"],displacement:e["icon-displacement"],opacity:e["icon-opacity"],scale:e["icon-scale"],rotation:e["icon-rotation"],rotateWithView:e["icon-rotate-with-view"],size:e["icon-size"],declutterMode:e["icon-declutter-mode"]});const T=e["shape-points"];if(T){const D="shape-";return new w.Z({points:T,fill:c(e,D),stroke:u(e,D),radius:e["shape-radius"],radius1:e["shape-radius1"],radius2:e["shape-radius2"],angle:e["shape-angle"],displacement:e["shape-displacement"],rotation:e["shape-rotation"],rotateWithView:e["shape-rotate-with-view"],scale:e["shape-scale"],declutterMode:e["shape-declutter-mode"]})}const U=e["circle-radius"];if(U){const D="circle-";return new H.Z({radius:U,fill:c(e,D),stroke:u(e,D),displacement:e["circle-displacement"],scale:e["circle-scale"],rotation:e["circle-rotation"],rotateWithView:e["circle-rotate-with-view"],declutterMode:e["circle-declutter-mode"]})}}const m=class l extends _.Z{constructor(P){P=P||{};const x=Object.assign({},P);delete x.style,delete x.renderBuffer,delete x.updateWhileAnimating,delete x.updateWhileInteracting,super(x),this.declutter_=void 0!==P.declutter&&P.declutter,this.renderBuffer_=void 0!==P.renderBuffer?P.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(P.style),this.updateWhileAnimating_=void 0!==P.updateWhileAnimating&&P.updateWhileAnimating,this.updateWhileInteracting_=void 0!==P.updateWhileInteracting&&P.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(P){return super.getFeatures(P)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get("renderOrder")}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(P){P.declutterTree||(P.declutterTree=new g(9)),this.getRenderer().renderDeclutter(P)}setRenderOrder(P){this.set("renderOrder",P)}setStyle(P){let x;if(void 0===P)x=Q.yF;else if(null===P)x=null;else if("function"==typeof P)x=P;else if(P instanceof Q.ZP)x=P;else if(Array.isArray(P)){const T=P.length,U=new Array(T);for(let D=0;D<T;++D){const C=P[D];U[D]=C instanceof Q.ZP?C:h(C)}x=U}else x=h(P);this.style_=x,this.styleFunction_=null===P?void 0:(0,Q.J$)(this.style_),this.changed()}}},1591:(Vt,gt,r)=>{"use strict";r.d(gt,{V:()=>u,Z:()=>i});var _=r(2462),g=r(9573),Q=r(448),H=r(3615),j=r(3044),N=r(8296),w=r(992),S=r(9306),v=r(9543),h=r(513),c=r(2716);class u extends H.ZP{constructor(m,e){super(m),this.layer=e}}class f extends _.Z{constructor(m){m=m||{};const e=Object.assign({},m);delete e.layers;let P=m.layers;super(e),this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener("layers",this.handleLayersChanged_),P?Array.isArray(P)?P=new g.Z(P.slice(),{unique:!0}):(0,w.h)("function"==typeof P.getArray,43):P=new g.Z(void 0,{unique:!0}),this.setLayers(P)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(c.bN),this.layersListenerKeys_.length=0;const m=this.getLayers();this.layersListenerKeys_.push((0,c.oL)(m,Q.Z.ADD,this.handleLayersAdd_,this),(0,c.oL)(m,Q.Z.REMOVE,this.handleLayersRemove_,this));for(const P in this.listenerKeys_)this.listenerKeys_[P].forEach(c.bN);(0,S.Z)(this.listenerKeys_);const e=m.getArray();for(let P=0,x=e.length;P<x;P++){const T=e[P];this.registerLayerListeners_(T),this.dispatchEvent(new u("addlayer",T))}this.changed()}registerLayerListeners_(m){const e=[(0,c.oL)(m,N.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,c.oL)(m,j.Z.CHANGE,this.handleLayerChange_,this)];m instanceof f&&e.push((0,c.oL)(m,"addlayer",this.handleLayerGroupAdd_,this),(0,c.oL)(m,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,h.sq)(m)]=e}handleLayerGroupAdd_(m){this.dispatchEvent(new u("addlayer",m.layer))}handleLayerGroupRemove_(m){this.dispatchEvent(new u("removelayer",m.layer))}handleLayersAdd_(m){const e=m.element;this.registerLayerListeners_(e),this.dispatchEvent(new u("addlayer",e)),this.changed()}handleLayersRemove_(m){const e=m.element,P=(0,h.sq)(e);this.listenerKeys_[P].forEach(c.bN),delete this.listenerKeys_[P],this.dispatchEvent(new u("removelayer",e)),this.changed()}getLayers(){return this.get("layers")}setLayers(m){const e=this.getLayers();if(e){const P=e.getArray();for(let x=0,T=P.length;x<T;++x)this.dispatchEvent(new u("removelayer",P[x]))}this.set("layers",m)}getLayersArray(m){return m=void 0!==m?m:[],this.getLayers().forEach(function(e){e.getLayersArray(m)}),m}getLayerStatesArray(m){const e=void 0!==m?m:[],P=e.length;this.getLayers().forEach(function(U){U.getLayerStatesArray(e)});const x=this.getLayerState();let T=x.zIndex;!m&&void 0===x.zIndex&&(T=0);for(let U=P,D=e.length;U<D;U++){const C=e[U];C.opacity*=x.opacity,C.visible=C.visible&&x.visible,C.maxResolution=Math.min(C.maxResolution,x.maxResolution),C.minResolution=Math.max(C.minResolution,x.minResolution),C.minZoom=Math.max(C.minZoom,x.minZoom),C.maxZoom=Math.min(C.maxZoom,x.maxZoom),void 0!==x.extent&&(C.extent=void 0!==C.extent?(0,v.Ed)(C.extent,x.extent):x.extent),void 0===C.zIndex&&(C.zIndex=T)}return e}getSourceState(){return"ready"}}const i=f},6906:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>H});var _=r(3998),g=r(8915);const H=class Q extends _.Z{constructor(N){super(N)}createRenderer(){return new g.Z(this)}getData(N){return super.getData(N)}}},7521:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>c,j:()=>h});var _=r(2462),g=r(3044),Q=r(3570),H=r(8779),j=r(5109),N=r(992),w=r(9543),S=r(2716);function h(u,s){if(!u.visible)return!1;const f=s.resolution;if(f<u.minResolution||f>=u.maxResolution)return!1;const i=s.zoom;return i>u.minZoom&&i<=u.maxZoom}const c=class v extends _.Z{constructor(s){const f=Object.assign({},s);delete f.source,super(f),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,s.render&&(this.render=s.render),s.map&&this.setMap(s.map),this.addChangeListener(Q.Z.SOURCE,this.handleSourcePropertyChange_),this.setSource(s.source?s.source:null)}getLayersArray(s){return(s=s||[]).push(this),s}getLayerStatesArray(s){return(s=s||[]).push(this.getLayerState()),s}getSource(){return this.get(Q.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const s=this.getSource();return s?s.getState():"undefined"}handleSourceChange_(){this.changed(),!this.sourceReady_&&"ready"===this.getSource().getState()&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,S.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const s=this.getSource();s&&(this.sourceChangeKey_=(0,S.oL)(s,g.Z.CHANGE,this.handleSourceChange_,this),"ready"===s.getState()&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(s){return this.renderer_?this.renderer_.getFeatures(s):Promise.resolve([])}getData(s){return this.renderer_&&this.rendered?this.renderer_.getData(s):null}isVisible(s){let f;f=s instanceof j.ZP?{viewState:s.getState(),extent:s.calculateExtent()}:s;const i=this.getExtent();return this.getVisible()&&h(this.getLayerState(),f.viewState)&&(!i||(0,w.kK)(i,f.extent))}getAttributions(s){if(!this.isVisible(s))return[];let f;const i=this.getSource();if(i&&(f=i.getAttributions()),!f)return[];let m=f(s instanceof j.ZP?s.getViewStateAndExtent():s);return Array.isArray(m)||(m=[m]),m}render(s,f){const i=this.getRenderer();if(i.prepareFrame(s))return this.rendered=!0,i.renderFrame(s,f)}unrender(){this.rendered=!1}setMapInternal(s){s||this.unrender(),this.set(Q.Z.MAP,s)}getMapInternal(){return this.get(Q.Z.MAP)}setMap(s){this.mapPrecomposeKey_&&((0,S.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),s||this.changed(),this.mapRenderKey_&&((0,S.bN)(this.mapRenderKey_),this.mapRenderKey_=null),s&&(this.mapPrecomposeKey_=(0,S.oL)(s,H.Z.PRECOMPOSE,function(f){const l=f.frameState.layerStatesArray,m=this.getLayerState(!1);(0,N.h)(!l.some(function(e){return e.layer===m.layer}),67),l.push(m)},this),this.mapRenderKey_=(0,S.oL)(this,g.Z.CHANGE,s.render,s),this.changed())}setSource(s){this.set(Q.Z.SOURCE,s)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}},3570:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},993:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>H});var _=r(7319),g=r(6257);const H=class Q extends _.Z{constructor(N){super(N)}createRenderer(){return new g.Z(this)}}},3332:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},7356:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>H});var _=r(4420),g=r(2308);const H=class Q extends _.Z{constructor(N){super(N)}createRenderer(){return new g.Z(this)}}},585:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>T});var _=r(4420),g=r(7599),Q=r(1015),H=r(6257),j=r(4700),N=r(9500),w=r(7713),S=r(7139),v=r(9543),h=r(7707),c=r(513),u=r(931),s=r(5415);const f={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},i={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]},m=class l extends H.Z{constructor(D){super(D),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedPixelToCoordinateTransform_=null,this.tmpTransform_=(0,S.Ue)()}prepareTile(D,C,O){let X;const $=D.getState();return($===j.Z.LOADED||$===j.Z.ERROR)&&(this.updateExecutorGroup_(D,C,O),this.tileImageNeedsRender_(D)&&(X=!0)),X}getTile(D,C,O,X){const $=X.pixelRatio,dt=X.viewState,B=dt.resolution,k=dt.projection,L=this.getLayer(),p=L.getSource().getTile(D,C,O,$,k),M=X.viewHints,R=!(M[N.Z.ANIMATING]||M[N.Z.INTERACTING]);return(R||!p.wantedResolution)&&(p.wantedResolution=B),this.prepareTile(p,$,k)&&(R||Date.now()-X.time<8)&&"vector"!==L.getRenderMode()&&this.renderTileImage_(p,X),super.getTile(D,C,O,X)}isDrawableTile(D){const C=this.getLayer();return super.isDrawableTile(D)&&("vector"===C.getRenderMode()?(0,c.sq)(C)in D.executorGroups:D.hasContext(C))}getTileImage(D){return D.getImage(this.getLayer())}prepareFrame(D){const C=this.getLayer().getRevision();return this.renderedLayerRevision_!==C&&(this.renderedLayerRevision_=C,this.renderedTiles.length=0),super.prepareFrame(D)}updateExecutorGroup_(D,C,O){const X=this.getLayer(),$=X.getRevision(),dt=X.getRenderOrder()||null,B=D.wantedResolution,k=D.getReplayState(X);if(!k.dirty&&k.renderedResolution===B&&k.renderedRevision==$&&k.renderedRenderOrder==dt)return;const L=X.getSource(),p=X.getDeclutter(),M=L.getTileGrid(),K=L.getTileGridForProjection(O).getTileCoordExtent(D.wrappedTileCoord),G=L.getSourceTiles(C,O,D),J=(0,c.sq)(X);delete D.hitDetectionImageData[J],D.executorGroups[J]=[],p&&(D.declutterExecutorGroups[J]=[]),k.dirty=!1;for(let q=0,ut=G.length;q<ut;++q){const ht=G[q];if(ht.getState()!=j.Z.LOADED)continue;const Tt=M.getTileCoordExtent(ht.tileCoord),Lt=(0,v.Ed)(K,Tt),Ht=(0,v.f3)(Lt,X.getRenderBuffer()*B,this.tmpExtent),$t=(0,v.fS)(Tt,Lt)?null:Ht,ae=new g.Z(0,Ht,B,C),Qt=p?new g.Z(0,Lt,B,C):void 0,_e=(0,h.se)(B,C),Ce=function(Bt){let ie;const Te=Bt.getStyleFunction()||X.getStyleFunction();if(Te&&(ie=Te(Bt,B)),ie){const he=this.renderFeature(Bt,_e,ie,ae,Qt);k.dirty=k.dirty||he}},xe=ht.getFeatures();dt&&dt!==k.renderedRenderOrder&&xe.sort(dt);for(let Bt=0,ie=xe.length;Bt<ie;++Bt){const Te=xe[Bt];(!$t||(0,v.kK)($t,Te.getGeometry().getExtent()))&&Ce.call(this,Te)}const Ze=ae.finish(),xt="vector"!==X.getRenderMode()&&p&&1===G.length?null:Lt,Nt=new Q.Z(xt,B,C,L.getOverlaps(),Ze,X.getRenderBuffer());if(D.executorGroups[J].push(Nt),Qt){const Bt=new Q.Z(null,B,C,L.getOverlaps(),Qt.finish(),X.getRenderBuffer());D.declutterExecutorGroups[J].push(Bt)}}k.renderedRevision=$,k.renderedRenderOrder=dt,k.renderedResolution=B}forEachFeatureAtCoordinate(D,C,O,X,$){const dt=C.viewState.resolution,B=C.viewState.rotation;O=O??0;const k=this.getLayer(),p=k.getSource().getTileGridForProjection(C.viewState.projection),M=(0,v.hI)([D]);(0,v.f3)(M,dt*O,M);const R={},K=function(q,ut,ht){let _t=q.getId();void 0===_t&&(_t=(0,c.sq)(q));const Tt=R[_t];if(Tt){if(!0!==Tt&&ht<Tt.distanceSq){if(0===ht)return R[_t]=!0,$.splice($.lastIndexOf(Tt),1),X(q,k,ut);Tt.geometry=ut,Tt.distanceSq=ht}}else{if(0===ht)return R[_t]=!0,X(q,k,ut);$.push(R[_t]={feature:q,layer:k,geometry:ut,distanceSq:ht,callback:X})}},G=this.renderedTiles;let J;for(let q=0,ut=G.length;!J&&q<ut;++q){const ht=G[q],_t=p.getTileCoordExtent(ht.wrappedTileCoord);if(!(0,v.kK)(_t,M))continue;const Tt=(0,c.sq)(k),Lt=[ht.executorGroups[Tt]],Ht=ht.declutterExecutorGroups[Tt];Ht&&Lt.push(Ht),Lt.some($t=>{const ae=$t===Ht?C.declutterTree.all().map(Qt=>Qt.value):null;for(let Qt=0,_e=$t.length;Qt<_e;++Qt)if(J=$t[Qt].forEachFeatureAtCoordinate(D,dt,B,O,K,ae),J)return!0})}return J}getFeatures(D){return new Promise((C,O)=>{const X=this.getLayer(),$=(0,c.sq)(X),dt=X.getSource(),B=this.renderedProjection,k=B.getExtent(),L=this.renderedResolution,p=dt.getTileGridForProjection(B),M=(0,S.nn)(this.renderedPixelToCoordinateTransform_,D.slice()),R=p.getTileCoordForCoordAndResolution(M,L);let K;for(let _t=0,Tt=this.renderedTiles.length;_t<Tt;++_t)if(R.toString()===this.renderedTiles[_t].tileCoord.toString()){if(K=this.renderedTiles[_t],K.getState()===j.Z.LOADED){const Lt=p.getTileCoordExtent(K.tileCoord);dt.getWrapX()&&B.canWrapX()&&!(0,v.r4)(k,Lt)&&(0,s.Cf)(M,B);break}K=void 0}if(!K||K.loadingSourceTiles>0)return void C([]);const G=p.getTileCoordExtent(K.wrappedTileCoord),J=(0,v.rL)(G),q=[(M[0]-J[0])/L,(J[1]-M[1])/L],ut=K.getSourceTiles().reduce(function(_t,Tt){return _t.concat(Tt.getFeatures())},[]);let ht=K.hitDetectionImageData[$];if(!ht){const _t=(0,u.Pq)(p.getTileSize(p.getZForResolution(L,dt.zDirection))),Tt=this.renderedRotation_,Lt=[this.getRenderTransform(p.getTileCoordCenter(K.wrappedTileCoord),L,0,w.UN,_t[0]*w.UN,_t[1]*w.UN,0)];ht=(0,w.TU)(_t,Lt,ut,X.getStyleFunction(),p.getTileCoordExtent(K.wrappedTileCoord),K.getReplayState(X).renderedResolution,Tt),K.hitDetectionImageData[$]=ht}C((0,w.ix)(q,ut,ht))})}handleFontsChanged(){const D=this.getLayer();D.getVisible()&&void 0!==this.renderedLayerRevision_&&D.changed()}handleStyleImageChange_(D){this.renderIfReadyAndVisible()}renderDeclutter(D){const C=this.context,O=C.globalAlpha;C.globalAlpha=this.getLayer().getOpacity();const X=D.viewHints,$=!(X[N.Z.ANIMATING]||X[N.Z.INTERACTING]),dt=this.renderedTiles;for(let B=0,k=dt.length;B<k;++B){const L=dt[B],p=L.declutterExecutorGroups[(0,c.sq)(this.getLayer())];if(p)for(let M=p.length-1;M>=0;--M)p[M].execute(this.context,1,this.getTileRenderTransform(L,D),D.viewState.rotation,$,void 0,D.declutterTree)}C.globalAlpha=O}getTileRenderTransform(D,C){const O=C.pixelRatio,X=C.viewState,$=X.center,dt=X.resolution,B=X.rotation,k=C.size,L=Math.round(k[0]*O),p=Math.round(k[1]*O),R=this.getLayer().getSource().getTileGridForProjection(C.viewState.projection),K=D.tileCoord,G=R.getTileCoordExtent(D.wrappedTileCoord),J=R.getTileCoordExtent(K,this.tmpExtent)[0]-G[0];return(0,S.Jp)((0,S.bA)(this.inversePixelTransform.slice(),1/O,1/O),this.getRenderTransform($,dt,B,O,L,p,J))}postRender(D,C){const O=C.viewHints,X=!(O[N.Z.ANIMATING]||O[N.Z.INTERACTING]);this.renderedPixelToCoordinateTransform_=C.pixelToCoordinateTransform.slice(),this.renderedRotation_=C.viewState.rotation;const $=this.getLayer(),dt=$.getRenderMode(),B=D.globalAlpha;D.globalAlpha=$.getOpacity();const k=i[dt],L=C.viewState,p=L.rotation,M=$.getSource(),K=M.getTileGridForProjection(L.projection).getZForResolution(L.resolution,M.zDirection),G=this.renderedTiles,J=[],q=[];let ut=!0;for(let ht=G.length-1;ht>=0;--ht){const _t=G[ht];ut=ut&&!_t.getReplayState($).dirty;const Tt=_t.executorGroups[(0,c.sq)($)].filter(Qt=>Qt.hasExecutors(k));if(0===Tt.length)continue;const Lt=this.getTileRenderTransform(_t,C),Ht=_t.tileCoord[0];let $t=!1;const ae=Tt[0].getClipCoords(Lt);if(ae){for(let Qt=0,_e=J.length;Qt<_e;++Qt)if(K!==Ht&&Ht<q[Qt]){const Ce=J[Qt];(0,v.kK)([ae[0],ae[3],ae[4],ae[7]],[Ce[0],Ce[3],Ce[4],Ce[7]])&&($t||(D.save(),$t=!0),D.beginPath(),D.moveTo(ae[0],ae[1]),D.lineTo(ae[2],ae[3]),D.lineTo(ae[4],ae[5]),D.lineTo(ae[6],ae[7]),D.moveTo(Ce[6],Ce[7]),D.lineTo(Ce[4],Ce[5]),D.lineTo(Ce[2],Ce[3]),D.lineTo(Ce[0],Ce[1]),D.clip())}J.push(ae),q.push(Ht)}for(let Qt=0,_e=Tt.length;Qt<_e;++Qt)Tt[Qt].execute(D,1,Lt,p,X,k);$t&&D.restore()}D.globalAlpha=B,this.ready=ut,super.postRender(D,C)}renderFeature(D,C,O,X,$){if(!O)return!1;let dt=!1;if(Array.isArray(O))for(let B=0,k=O.length;B<k;++B)dt=(0,h.Pn)(X,D,O[B],C,this.boundHandleStyleImageChange_,void 0,$)||dt;else dt=(0,h.Pn)(X,D,O,C,this.boundHandleStyleImageChange_,void 0,$);return dt}tileImageNeedsRender_(D){const C=this.getLayer();if("vector"===C.getRenderMode())return!1;const O=D.getReplayState(C),X=C.getRevision();return O.renderedTileResolution!==D.wantedResolution||O.renderedTileRevision!==X}renderTileImage_(D,C){const O=this.getLayer(),X=D.getReplayState(O),$=O.getRevision(),dt=D.executorGroups[(0,c.sq)(O)];X.renderedTileRevision=$;const B=D.wrappedTileCoord,k=B[0],L=O.getSource();let p=C.pixelRatio;const R=C.viewState.projection,K=L.getTileGridForProjection(R),G=K.getResolution(D.tileCoord[0]),J=C.pixelRatio/D.wantedResolution*G,q=K.getResolution(k),ut=D.getContext(O);p=Math.round(Math.max(p,J/p));const ht=L.getTilePixelSize(k,p,R);ut.canvas.width=ht[0],ut.canvas.height=ht[1];const _t=p/J;if(1!==_t){const $t=(0,S.mc)(this.tmpTransform_);(0,S.bA)($t,_t,_t),ut.setTransform.apply(ut,$t)}const Tt=K.getTileCoordExtent(B,this.tmpExtent),Lt=J/q,Ht=(0,S.mc)(this.tmpTransform_);(0,S.bA)(Ht,Lt,-Lt),(0,S.Iu)(Ht,-Tt[0],-Tt[3]);for(let $t=0,ae=dt.length;$t<ae;++$t)dt[$t].execute(ut,_t,Ht,0,!0,f[O.getRenderMode()]);X.renderedTileResolution=D.wantedResolution}};var e=r(3332),P=r(992);const T=class x extends _.Z{constructor(D){D=D||{};const C=Object.assign({},D);delete C.preload,delete C.useInterimTilesOnError,super(C);const O=D.renderMode||"hybrid";(0,P.h)("hybrid"==O||"vector"==O,28),this.renderMode_=O,this.setPreload(D.preload?D.preload:0),this.setUseInterimTilesOnError(void 0===D.useInterimTilesOnError||D.useInterimTilesOnError)}createRenderer(){return new m(this)}getFeatures(D){return super.getFeatures(D)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(e.Z.PRELOAD)}getUseInterimTilesOnError(){return this.get(e.Z.USE_INTERIM_TILES_ON_ERROR)}setPreload(D){this.set(e.Z.PRELOAD,D)}setUseInterimTilesOnError(D){this.set(e.Z.USE_INTERIM_TILES_ON_ERROR,D)}}},8742:(Vt,gt,r)=>{"use strict";function g(j,N){return[[-1/0,-1/0,1/0,1/0]]}function Q(j,N){return[j]}r.d(gt,{$6:()=>g,VW:()=>Q}),r(9015)},4331:(Vt,gt,r)=>{"use strict";function _(s,f,i){return Math.min(Math.max(s,f),i)}function g(s,f,i,l,m,e){const P=m-i,x=e-l;if(0!==P||0!==x){const T=((s-i)*P+(f-l)*x)/(P*P+x*x);T>1?(i=m,l=e):T>0&&(i+=P*T,l+=x*T)}return Q(s,f,i,l)}function Q(s,f,i,l){const m=i-s,e=l-f;return m*m+e*e}function H(s){const f=s.length;for(let l=0;l<f;l++){let m=l,e=Math.abs(s[l][l]);for(let x=l+1;x<f;x++){const T=Math.abs(s[x][l]);T>e&&(e=T,m=x)}if(0===e)return null;const P=s[m];s[m]=s[l],s[l]=P;for(let x=l+1;x<f;x++){const T=-s[x][l]/s[l][l];for(let U=l;U<f+1;U++)l==U?s[x][U]=0:s[x][U]+=T*s[l][U]}}const i=new Array(f);for(let l=f-1;l>=0;l--){i[l]=s[l][f]/s[l][l];for(let m=l-1;m>=0;m--)s[m][f]-=s[m][l]*i[l]}return i}function N(s){return s*Math.PI/180}function w(s,f){const i=s%f;return i*f<0?i+f:i}function S(s,f,i){return s+i*(f-s)}function v(s,f){const i=Math.pow(10,f);return Math.round(s*i)/i}function h(s,f){return Math.round(v(s,f))}function c(s,f){return Math.floor(v(s,f))}function u(s,f){return Math.ceil(v(s,f))}r.d(gt,{$W:()=>w,FH:()=>v,GW:()=>c,NM:()=>h,SV:()=>H,Yr:()=>N,bI:()=>Q,mD:()=>u,rU:()=>g,t7:()=>S,uZ:()=>_})},9306:(Vt,gt,r)=>{"use strict";function _(Q){for(const H in Q)delete Q[H]}function g(Q){let H;for(H in Q)return!1;return!H}r.d(gt,{Z:()=>_,x:()=>g})},5622:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},9015:(Vt,gt,r)=>{"use strict";r.d(gt,{Wm:()=>l.W,kv:()=>_.Z,zY:()=>ae,rM:()=>_t,Sx:()=>J,UQ:()=>Ht,uA:()=>He,h_:()=>R,OP:()=>Ce,mi:()=>Qt,Vs:()=>Yt,dY:()=>ye,U2:()=>ut,_Q:()=>ht,Ck:()=>Ze,WO:()=>xe,Cs:()=>Mt,gD:()=>G,lO:()=>Kt,Fj:()=>Jt,on:()=>Pe,vs:()=>xt,$A:()=>Nt});var _=r(2632);const g=6378137,Q=Math.PI*g,H=[-Q,-Q,Q,Q],j=[-180,-85,180,85],N=g*Math.log(Math.tan(Math.PI/2));class w extends _.Z{constructor(y){super({code:y,units:"m",extent:H,global:!0,worldExtent:j,getPointResolution:function(z,st){return z/Math.cosh(st[1]/g)}})}}const S=[new w("EPSG:3857"),new w("EPSG:102100"),new w("EPSG:102113"),new w("EPSG:900913"),new w("http://www.opengis.net/def/crs/EPSG/0/3857"),new w("http://www.opengis.net/gml/srs/epsg.xml#3857")];function v(Et,y,z){const st=Et.length;z=z>1?z:2,void 0===y&&(y=z>2?Et.slice():new Array(st));for(let it=0;it<st;it+=z){y[it]=Q*Et[it]/180;let vt=g*Math.log(Math.tan(Math.PI*(+Et[it+1]+90)/360));vt>N?vt=N:vt<-N&&(vt=-N),y[it+1]=vt}return y}function h(Et,y,z){const st=Et.length;z=z>1?z:2,void 0===y&&(y=z>2?Et.slice():new Array(st));for(let it=0;it<st;it+=z)y[it]=180*Et[it]/Q,y[it+1]=360*Math.atan(Math.exp(Et[it+1]/g))/Math.PI-90;return y}const u=[-180,-90,180,90],s=6378137*Math.PI/180;class f extends _.Z{constructor(y,z){super({code:y,units:"degrees",extent:u,axisOrientation:z,global:!0,metersPerUnit:s,worldExtent:u})}}const i=[new f("CRS:84"),new f("EPSG:4326","neu"),new f("urn:ogc:def:crs:OGC:1.3:CRS84"),new f("urn:ogc:def:crs:OGC:2:84"),new f("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new f("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new f("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var l=r(1285);let m={};var T=r(6794),U=r(9543),D=r(4331),C=r(5415);function X(Et,y,z){z=z||6371008.8;const st=(0,D.Yr)(Et[1]),it=(0,D.Yr)(y[1]),vt=(it-st)/2,Pt=(0,D.Yr)(y[0]-Et[0])/2,kt=Math.sin(vt)*Math.sin(vt)+Math.sin(Pt)*Math.sin(Pt)*Math.cos(st)*Math.cos(it);return 2*z*Math.atan2(Math.sqrt(kt),Math.sqrt(1-kt))}var p=r(246);let M=!0;function R(Et){M=!(void 0===Et||Et)}function K(Et,y){if(void 0!==y)for(let z=0,st=Et.length;z<st;++z)y[z]=Et[z];else y=Et.slice();return y}function G(Et,y){if(void 0!==y&&Et!==y){for(let z=0,st=Et.length;z<st;++z)y[z]=Et[z];Et=y}return Et}function J(Et){(function x(Et,y){m[Et]=y})(Et.getCode(),Et),(0,T.IH)(Et,Et,K)}function ut(Et){return"string"==typeof Et?function P(Et){return m[Et]||m[Et.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}(Et):Et||null}function ht(Et,y,z,st){let it;const vt=(Et=ut(Et)).getPointResolutionFunc();if(vt){if(it=vt(y,z),st&&st!==Et.getUnits()){const Pt=Et.getMetersPerUnit();Pt&&(it=it*Pt/l.W[st])}}else{const Pt=Et.getUnits();if("degrees"==Pt&&!st||"degrees"==st)it=y;else{const kt=xe(Et,ut("EPSG:4326"));if(kt===G&&"degrees"!==Pt)it=y*Et.getMetersPerUnit();else{let ee=[z[0]-y/2,z[1],z[0]+y/2,z[1],z[0],z[1]-y/2,z[0],z[1]+y/2];ee=kt(ee,ee,2),it=(X(ee.slice(0,2),ee.slice(2,4))+X(ee.slice(4,6),ee.slice(6,8)))/2}const zt=st?l.W[st]:Et.getMetersPerUnit();void 0!==zt&&(it/=zt)}}return it}function _t(Et){(function q(Et){Et.forEach(J)})(Et),Et.forEach(function(y){Et.forEach(function(z){y!==z&&(0,T.IH)(y,z,K)})})}function Ht(Et,y){return Et?"string"==typeof Et?ut(Et):Et:ut(y)}function $t(Et){return function(y,z,st){const it=y.length;st=void 0!==st?st:2,z=void 0!==z?z:new Array(it);for(let vt=0;vt<it;vt+=st){const Pt=Et(y.slice(vt,vt+st)),kt=Pt.length;for(let zt=0,ee=st;zt<ee;++zt)z[vt+zt]=zt>=kt?y[vt+zt]:Pt[zt]}return z}}function ae(Et,y,z,st){const it=ut(Et),vt=ut(y);(0,T.IH)(it,vt,$t(z)),(0,T.IH)(vt,it,$t(st))}function Qt(Et,y){return R(),xt(Et,"EPSG:4326",void 0!==y?y:"EPSG:3857")}function Ce(Et,y){if(Et===y)return!0;const z=Et.getUnits()===y.getUnits();return(Et.getCode()===y.getCode()||xe(Et,y)===K)&&z}function xe(Et,y){const z=Et.getCode(),st=y.getCode();let it=(0,T.U2)(z,st);return it||(it=G),it}function Ze(Et,y){return xe(ut(Et),ut(y))}function xt(Et,y,z){return Ze(y,z)(Et,void 0,Et.length)}function Nt(Et,y,z,st){const it=Ze(y,z);return(0,U.Ne)(Et,it,void 0,st)}let ie=null;function Mt(){return ie}function Kt(Et,y){return Et}function Yt(Et,y){return M&&!(0,C.fS)(Et,[0,0])&&Et[0]>=-180&&Et[0]<=180&&Et[1]>=-90&&Et[1]<=90&&(M=!1,(0,p.ZK)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),Et}function Jt(Et,y){return Et}function ye(Et,y){return Et}function Pe(Et,y){return Et}function He(Et,y,z){return function(st){let it,vt;if(Et.canWrapX()){const Pt=Et.getExtent(),kt=(0,U.dz)(Pt);st=st.slice(0),vt=(0,C.jk)(st,Et,kt),vt&&(st[0]=st[0]-vt*kt),st[0]=(0,D.uZ)(st[0],Pt[0],Pt[2]),st[1]=(0,D.uZ)(st[1],Pt[1],Pt[3]),it=z(st)}else it=z(st);return vt&&y.canWrapX()&&(it[0]+=vt*(0,U.dz)(y.getExtent())),it}}!function Zt(){_t(S),_t(i),function Tt(Et,y,z,st){Et.forEach(function(it){y.forEach(function(vt){(0,T.IH)(it,vt,z),(0,T.IH)(vt,it,st)})})}(i,S,v,h)}()},2632:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>Q});var _=r(1285);const Q=class g{constructor(j){this.code_=j.code,this.units_=j.units,this.extent_=void 0!==j.extent?j.extent:null,this.worldExtent_=void 0!==j.worldExtent?j.worldExtent:null,this.axisOrientation_=void 0!==j.axisOrientation?j.axisOrientation:"enu",this.global_=void 0!==j.global&&j.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=j.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=j.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||_.W[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(j){this.global_=j,this.canWrapX_=!(!j||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(j){this.defaultTileGrid_=j}setExtent(j){this.extent_=j,this.canWrapX_=!(!this.global_||!j)}setWorldExtent(j){this.worldExtent_=j}setGetPointResolution(j){this.getPointResolutionFunc_=j}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},1285:(Vt,gt,r)=>{"use strict";r.d(gt,{W:()=>Q});const Q={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},3669:(Vt,gt,r)=>{"use strict";r.d(gt,{z2:()=>w});var _=r(2632),g=r(9015),Q=r(6794);let H=null;function w(s){H=s;const f=Object.keys(s.defs),i=f.length;let l,m;for(l=0;l<i;++l){const e=f[l];if(!(0,g.U2)(e)){const P=s.defs(e);let x=P.units;!x&&"longlat"===P.projName&&(x="degrees"),(0,g.Sx)(new _.Z({code:e,axisOrientation:P.axis,metersPerUnit:P.to_meter,units:x}))}}for(l=0;l<i;++l){const e=f[l],P=(0,g.U2)(e);for(m=0;m<i;++m){const x=f[m],T=(0,g.U2)(x);if(!(0,Q.U2)(e,x))if(s.defs[e]===s.defs[x])(0,g.rM)([P,T]);else{const U=s(e,x);(0,g.zY)(P,T,(0,g.uA)(P,T,U.forward),(0,g.uA)(T,P,U.inverse))}}}}},6794:(Vt,gt,r)=>{"use strict";r.d(gt,{IH:()=>Q,U2:()=>j});let _={};function Q(N,w,S){const v=N.getCode(),h=w.getCode();v in _||(_[v]={}),_[v][h]=S}function j(N,w){let S;return N in _&&w in _[N]&&(S=_[N][w]),S}},9683:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>Q});var _=r(3615);const Q=class g extends _.ZP{constructor(j,N,w,S){super(j),this.inversePixelTransform=N,this.frameState=w,this.context=S}}},8779:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},2929:(Vt,gt,r)=>{"use strict";r.d(gt,{ZP:()=>s});var _=r(7139),g=r(9543),Q=r(142),H=r(5577),j=r(9015),N=r(7170),w=r(2783),S=r(3904);const v=(0,_.Ue)();class h{constructor(i,l,m,e,P){this.id_=P,this.type_=i,this.flatCoordinates_=l,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=m,this.properties_=e}get(i){return this.properties_[i]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,g.HK)(this.flatCoordinates_):(0,g.GN)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const i=(0,g.qg)(this.getExtent());this.flatInteriorPoints_=(0,H.X)(this.flatCoordinates_,0,this.ends_,2,i,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const i=(0,w.E)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,H.U)(this.flatCoordinates_,0,this.ends_,2,i)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,N.WW)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const i=this.flatCoordinates_;let l=0;const m=this.ends_;for(let e=0,P=m.length;e<P;++e){const x=m[e],T=(0,N.WW)(i,l,x,2,.5);(0,Q.l7)(this.flatMidpoints_,T),l=x}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(i){return this}simplifyTransformed(i,l){return this}getProperties(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(i){const l=(i=(0,j.U2)(i)).getExtent(),m=i.getWorldExtent();if(l&&m){const e=(0,g.Cr)(m)/(0,g.Cr)(l);(0,_.qC)(v,m[0],m[3],e,-e,0,0,0),(0,S.vT)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,v,this.flatCoordinates_)}}getEnds(){return this.ends_}}h.prototype.getEndss=h.prototype.getEnds,h.prototype.getFlatCoordinates=h.prototype.getOrientedFlatCoordinates;const s=h},8110:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>g});const g=class _{drawCustom(H,j,N,w){}drawGeometry(H){}setStyle(H){}drawCircle(H,j){}drawFeature(H,j){}drawGeometryCollection(H,j){}drawLineString(H,j){}drawMultiLineString(H,j){}drawMultiPoint(H,j){}drawMultiPolygon(H,j){}drawPoint(H,j){}drawPolygon(H,j){}drawText(H,j){}setFillStrokeStyle(H,j){}setImageStyle(H,j){}setTextStyle(H,j){}}},2768:(Vt,gt,r)=>{"use strict";r.d(gt,{Df:()=>N,He:()=>h,Kd:()=>X,PH:()=>f,Qx:()=>U,Tx:()=>s,V4:()=>u,X9:()=>v,Zw:()=>$,_f:()=>B,bL:()=>w,mb:()=>S,oB:()=>l,rc:()=>c,ru:()=>i,sG:()=>e,yC:()=>m});var _=r(4115),g=r(5063),Q=r(9306),H=r(3842),j=r(1119);const N="10px sans-serif",w="#000",S="round",v=[],h=0,c="round",u=10,s="#000",f="center",i="middle",l=[0,0,0,0],m=1,e=new _.Z;let x,P=null;const T={},U=function(){const p="32px ",M=["monospace","serif"],R=M.length,K="wmytzilWMYTZIL@#/&?$%10\uf013";let G,J;function q(ht,_t,Tt){let Lt=!0;for(let Ht=0;Ht<R;++Ht){const $t=M[Ht];if(J=O(ht+" "+_t+" "+p+$t,K),Tt!=$t){const ae=O(ht+" "+_t+" "+p+Tt+","+$t,K);Lt=Lt&&ae!=J}}return!!Lt}function ut(){let ht=!0;const _t=e.getKeys();for(let Tt=0,Lt=_t.length;Tt<Lt;++Tt){const Ht=_t[Tt];e.get(Ht)<100&&(q.apply(this,Ht.split("\n"))?((0,Q.Z)(T),P=null,x=void 0,e.set(Ht,100)):(e.set(Ht,e.get(Ht)+1,!0),ht=!1))}ht&&(clearInterval(G),G=void 0)}return function(ht){const _t=(0,j.p)(ht);if(!_t)return;const Tt=_t.families;for(let Lt=0,Ht=Tt.length;Lt<Ht;++Lt){const $t=Tt[Lt],ae=_t.style+"\n"+_t.weight+"\n"+$t;void 0===e.get(ae)&&(e.set(ae,100,!0),q(_t.style,_t.weight,$t)||(e.set(ae,0,!0),void 0===G&&(G=setInterval(ut,32))))}}}(),D=function(){let L;return function(p){let M=T[p];if(null==M){if(g.Id){const R=(0,j.p)(p),K=C(p,"\u017dg");M=(isNaN(Number(R.lineHeight))?1.2:Number(R.lineHeight))*(K.actualBoundingBoxAscent+K.actualBoundingBoxDescent)}else L||(L=document.createElement("div"),L.innerHTML="M",L.style.minHeight="0",L.style.maxHeight="none",L.style.height="auto",L.style.padding="0",L.style.border="none",L.style.position="absolute",L.style.display="block",L.style.left="-99999px"),L.style.font=p,document.body.appendChild(L),M=L.offsetHeight,document.body.removeChild(L);T[p]=M}return M}}();function C(L,p){return P||(P=(0,H.E4)(1,1)),L!=x&&(P.font=L,x=P.font),P.measureText(p)}function O(L,p){return C(L,p).width}function X(L,p,M){if(p in M)return M[p];const R=p.split("\n").reduce((K,G)=>Math.max(K,O(L,G)),0);return M[p]=R,R}function $(L,p){const M=[],R=[],K=[];let G=0,J=0,q=0,ut=0;for(let ht=0,_t=p.length;ht<=_t;ht+=2){const Tt=p[ht];if("\n"===Tt||ht===_t){G=Math.max(G,J),K.push(J),J=0,q+=ut;continue}const Lt=p[ht+1]||L.font,Ht=O(Lt,Tt);M.push(Ht),J+=Ht;const $t=D(Lt);R.push($t),ut=Math.max(ut,$t)}return{width:G,height:q,widths:M,heights:R,lineWidths:K}}function B(L,p,M,R,K,G,J,q,ut,ht,_t){L.save(),1!==M&&(L.globalAlpha*=M),p&&L.setTransform.apply(L,p),R.contextInstructions?(L.translate(ut,ht),L.scale(_t[0],_t[1]),function k(L,p){const M=L.contextInstructions;for(let R=0,K=M.length;R<K;R+=2)Array.isArray(M[R+1])?p[M[R]].apply(p,M[R+1]):p[M[R]]=M[R+1]}(R,L)):_t[0]<0||_t[1]<0?(L.translate(ut,ht),L.scale(_t[0],_t[1]),L.drawImage(R,K,G,J,q,0,0,J,q)):L.drawImage(R,K,G,J,q,ut,ht,J*_t[0],q*_t[1]),L.restore()}},1211:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>h});var _=r(3430),g=r(8326),Q=r(8110),H=r(4890),j=r(9543),N=r(2768),w=r(142),S=r(4850);const h=class v extends Q.Z{constructor(u,s,f,i){super(),this.tolerance=u,this.maxExtent=s,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=f,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(u){const s=this.pixelRatio;return 1==s?u:u.map(function(f){return f*s})}appendFlatPointCoordinates(u,s){const f=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,l=this.coordinates;let m=l.length;for(let e=0,P=u.length;e<P;e+=s)i[0]=u[e],i[1]=u[e+1],(0,j.b8)(f,i)&&(l[m++]=i[0],l[m++]=i[1]);return m}appendFlatLineCoordinates(u,s,f,i,l,m){const e=this.coordinates;let P=e.length;const x=this.getBufferedMaxExtent();m&&(s+=i);let T=u[s],U=u[s+1];const D=this.tmpCoordinate_;let O,X,$,C=!0;for(O=s+i;O<f;O+=i)D[0]=u[O],D[1]=u[O+1],$=(0,j.pX)(x,D),$!==X?(C&&(e[P++]=T,e[P++]=U,C=!1),e[P++]=D[0],e[P++]=D[1]):$===g.Z.INTERSECTING?(e[P++]=D[0],e[P++]=D[1],C=!1):C=!0,T=D[0],U=D[1],X=$;return(l&&C||O===s+i)&&(e[P++]=T,e[P++]=U),P}drawCustomCoordinates_(u,s,f,i,l){for(let m=0,e=f.length;m<e;++m){const P=f[m],x=this.appendFlatLineCoordinates(u,s,P,i,!1,!1);l.push(x),s=P}return s}drawCustom(u,s,f,i){this.beginGeometry(u,s);const l=u.getType(),m=u.getStride(),e=this.coordinates.length;let P,x,T,U,D;switch(l){case"MultiPolygon":P=u.getOrientedFlatCoordinates(),U=[];const C=u.getEndss();D=0;for(let O=0,X=C.length;O<X;++O){const $=[];D=this.drawCustomCoordinates_(P,D,C[O],m,$),U.push($)}this.instructions.push([_.ZP.CUSTOM,e,U,u,f,S.ug]),this.hitDetectionInstructions.push([_.ZP.CUSTOM,e,U,u,i||f,S.ug]);break;case"Polygon":case"MultiLineString":T=[],P="Polygon"==l?u.getOrientedFlatCoordinates():u.getFlatCoordinates(),D=this.drawCustomCoordinates_(P,0,u.getEnds(),m,T),this.instructions.push([_.ZP.CUSTOM,e,T,u,f,S.o1]),this.hitDetectionInstructions.push([_.ZP.CUSTOM,e,T,u,i||f,S.o1]);break;case"LineString":case"Circle":P=u.getFlatCoordinates(),x=this.appendFlatLineCoordinates(P,0,P.length,m,!1,!1),this.instructions.push([_.ZP.CUSTOM,e,x,u,f,S.Ml]),this.hitDetectionInstructions.push([_.ZP.CUSTOM,e,x,u,i||f,S.Ml]);break;case"MultiPoint":P=u.getFlatCoordinates(),x=this.appendFlatPointCoordinates(P,m),x>e&&(this.instructions.push([_.ZP.CUSTOM,e,x,u,f,S.Ml]),this.hitDetectionInstructions.push([_.ZP.CUSTOM,e,x,u,i||f,S.Ml]));break;case"Point":P=u.getFlatCoordinates(),this.coordinates.push(P[0],P[1]),x=this.coordinates.length,this.instructions.push([_.ZP.CUSTOM,e,x,u,f]),this.hitDetectionInstructions.push([_.ZP.CUSTOM,e,x,u,i||f])}this.endGeometry(s)}beginGeometry(u,s){this.beginGeometryInstruction1_=[_.ZP.BEGIN_GEOMETRY,s,0,u],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[_.ZP.BEGIN_GEOMETRY,s,0,u],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const u=this.hitDetectionInstructions;let s;u.reverse();const f=u.length;let i,l,m=-1;for(s=0;s<f;++s)i=u[s],l=i[0],l==_.ZP.END_GEOMETRY?m=s:l==_.ZP.BEGIN_GEOMETRY&&(i[2]=s,(0,w.FZ)(this.hitDetectionInstructions,m,s),m=-1)}setFillStrokeStyle(u,s){const f=this.state;if(u){const i=u.getColor();f.fillStyle=(0,H.y)(i||N.bL)}else f.fillStyle=void 0;if(s){const i=s.getColor();f.strokeStyle=(0,H.y)(i||N.Tx);const l=s.getLineCap();f.lineCap=void 0!==l?l:N.mb;const m=s.getLineDash();f.lineDash=m?m.slice():N.X9;const e=s.getLineDashOffset();f.lineDashOffset=e||N.He;const P=s.getLineJoin();f.lineJoin=void 0!==P?P:N.rc;const x=s.getWidth();f.lineWidth=void 0!==x?x:N.yC;const T=s.getMiterLimit();f.miterLimit=void 0!==T?T:N.V4,f.lineWidth>this.maxLineWidth&&(this.maxLineWidth=f.lineWidth,this.bufferedMaxExtent_=null)}else f.strokeStyle=void 0,f.lineCap=void 0,f.lineDash=null,f.lineDashOffset=void 0,f.lineJoin=void 0,f.lineWidth=void 0,f.miterLimit=void 0}createFill(u){const s=u.fillStyle,f=[_.ZP.SET_FILL_STYLE,s];return"string"!=typeof s&&f.push(!0),f}applyStroke(u){this.instructions.push(this.createStroke(u))}createStroke(u){return[_.ZP.SET_STROKE_STYLE,u.strokeStyle,u.lineWidth*this.pixelRatio,u.lineCap,u.lineJoin,u.miterLimit,this.applyPixelRatio(u.lineDash),u.lineDashOffset*this.pixelRatio]}updateFillStyle(u,s){const f=u.fillStyle;("string"!=typeof f||u.currentFillStyle!=f)&&(void 0!==f&&this.instructions.push(s.call(this,u)),u.currentFillStyle=f)}updateStrokeStyle(u,s){const f=u.strokeStyle,i=u.lineCap,l=u.lineDash,m=u.lineDashOffset,e=u.lineJoin,P=u.lineWidth,x=u.miterLimit;(u.currentStrokeStyle!=f||u.currentLineCap!=i||l!=u.currentLineDash&&!(0,w.fS)(u.currentLineDash,l)||u.currentLineDashOffset!=m||u.currentLineJoin!=e||u.currentLineWidth!=P||u.currentMiterLimit!=x)&&(void 0!==f&&s.call(this,u),u.currentStrokeStyle=f,u.currentLineCap=i,u.currentLineDash=l,u.currentLineDashOffset=m,u.currentLineJoin=e,u.currentLineWidth=P,u.currentMiterLimit=x)}endGeometry(u){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const s=[_.ZP.END_GEOMETRY,u];this.instructions.push(s),this.hitDetectionInstructions.push(s)}getBufferedMaxExtent(){return!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,j.d9)(this.maxExtent),this.maxLineWidth>0)&&(0,j.f3)(this.bufferedMaxExtent_,this.resolution*(this.maxLineWidth+1)/2,this.bufferedMaxExtent_),this.bufferedMaxExtent_}}},7599:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>f});var _=r(1211),g=r(3430);var j=r(2768);var S=r(1757);const h=class v extends _.Z{constructor(l,m,e,P){super(l,m,e,P)}drawFlatCoordinatess_(l,m,e,P){const x=this.state,T=void 0!==x.fillStyle,U=void 0!==x.strokeStyle,D=e.length;this.instructions.push(g.$O),this.hitDetectionInstructions.push(g.$O);for(let C=0;C<D;++C){const O=e[C],X=this.coordinates.length,$=this.appendFlatLineCoordinates(l,m,O,P,!0,!U),dt=[g.ZP.MOVE_TO_LINE_TO,X,$];this.instructions.push(dt),this.hitDetectionInstructions.push(dt),U&&(this.instructions.push(g.s3),this.hitDetectionInstructions.push(g.s3)),m=O}return T&&(this.instructions.push(g.gO),this.hitDetectionInstructions.push(g.gO)),U&&(this.instructions.push(g.Yc),this.hitDetectionInstructions.push(g.Yc)),m}drawCircle(l,m){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(l,m),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([g.ZP.SET_FILL_STYLE,j.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([g.ZP.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const T=l.getFlatCoordinates(),U=l.getStride(),D=this.coordinates.length;this.appendFlatLineCoordinates(T,0,T.length,U,!1,!1);const C=[g.ZP.CIRCLE,D];this.instructions.push(g.$O,C),this.hitDetectionInstructions.push(g.$O,C),void 0!==e.fillStyle&&(this.instructions.push(g.gO),this.hitDetectionInstructions.push(g.gO)),void 0!==e.strokeStyle&&(this.instructions.push(g.Yc),this.hitDetectionInstructions.push(g.Yc)),this.endGeometry(m)}drawPolygon(l,m){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(l,m),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([g.ZP.SET_FILL_STYLE,j.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([g.ZP.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const T=l.getEnds(),U=l.getOrientedFlatCoordinates(),D=l.getStride();this.drawFlatCoordinatess_(U,0,T,D),this.endGeometry(m)}drawMultiPolygon(l,m){const e=this.state;if(void 0===e.fillStyle&&void 0===e.strokeStyle)return;this.setFillStrokeStyles_(),this.beginGeometry(l,m),void 0!==e.fillStyle&&this.hitDetectionInstructions.push([g.ZP.SET_FILL_STYLE,j.bL]),void 0!==e.strokeStyle&&this.hitDetectionInstructions.push([g.ZP.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset]);const T=l.getEndss(),U=l.getOrientedFlatCoordinates(),D=l.getStride();let C=0;for(let O=0,X=T.length;O<X;++O)C=this.drawFlatCoordinatess_(U,C,T[O],D);this.endGeometry(m)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const l=this.tolerance;if(0!==l){const m=this.coordinates;for(let e=0,P=m.length;e<P;++e)m[e]=(0,S.uZ)(m[e],l)}return super.finish()}setFillStrokeStyles_(){const l=this.state;void 0!==l.fillStyle&&this.updateFillStyle(l,this.createFill),void 0!==l.strokeStyle&&this.updateStrokeStyle(l,this.applyStroke)}};var c=r(8840);const u={Circle:h,Default:_.Z,Image:class Q extends _.Z{constructor(l,m,e,P){super(l,m,e,P),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(l,m){if(!this.image_)return;this.beginGeometry(l,m);const e=l.getFlatCoordinates(),P=l.getStride(),x=this.coordinates.length,T=this.appendFlatPointCoordinates(e,P);this.instructions.push([g.ZP.DRAW_IMAGE,x,T,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([g.ZP.DRAW_IMAGE,x,T,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(m)}drawMultiPoint(l,m){if(!this.image_)return;this.beginGeometry(l,m);const e=l.getFlatCoordinates(),P=l.getStride(),x=this.coordinates.length,T=this.appendFlatPointCoordinates(e,P);this.instructions.push([g.ZP.DRAW_IMAGE,x,T,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([g.ZP.DRAW_IMAGE,x,T,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(m)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(l,m){const e=l.getAnchor(),P=l.getSize(),x=l.getOrigin();this.imagePixelRatio_=l.getPixelRatio(this.pixelRatio),this.anchorX_=e[0],this.anchorY_=e[1],this.hitDetectionImage_=l.getHitDetectionImage(),this.image_=l.getImage(this.pixelRatio),this.height_=P[1],this.opacity_=l.getOpacity(),this.originX_=x[0],this.originY_=x[1],this.rotateWithView_=l.getRotateWithView(),this.rotation_=l.getRotation(),this.scale_=l.getScaleArray(),this.width_=P[0],this.declutterMode_=l.getDeclutterMode(),this.declutterImageWithText_=m}},LineString:class N extends _.Z{constructor(l,m,e,P){super(l,m,e,P)}drawFlatCoordinates_(l,m,e,P){const x=this.coordinates.length,T=this.appendFlatLineCoordinates(l,m,e,P,!1,!1),U=[g.ZP.MOVE_TO_LINE_TO,x,T];return this.instructions.push(U),this.hitDetectionInstructions.push(U),e}drawLineString(l,m){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(l,m),this.hitDetectionInstructions.push([g.ZP.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,j.X9,j.He],g.$O);const T=l.getFlatCoordinates(),U=l.getStride();this.drawFlatCoordinates_(T,0,T.length,U),this.hitDetectionInstructions.push(g.Yc),this.endGeometry(m)}drawMultiLineString(l,m){const e=this.state;if(void 0===e.strokeStyle||void 0===e.lineWidth)return;this.updateStrokeStyle(e,this.applyStroke),this.beginGeometry(l,m),this.hitDetectionInstructions.push([g.ZP.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset],g.$O);const T=l.getEnds(),U=l.getFlatCoordinates(),D=l.getStride();let C=0;for(let O=0,X=T.length;O<X;++O)C=this.drawFlatCoordinates_(U,C,T[O],D);this.hitDetectionInstructions.push(g.Yc),this.endGeometry(m)}finish(){const l=this.state;return null!=l.lastStroke&&l.lastStroke!=this.coordinates.length&&this.instructions.push(g.Yc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(l){null!=l.lastStroke&&l.lastStroke!=this.coordinates.length&&(this.instructions.push(g.Yc),l.lastStroke=this.coordinates.length),l.lastStroke=0,super.applyStroke(l),this.instructions.push(g.$O)}},Polygon:h,Text:c.Z},f=class s{constructor(l,m,e,P){this.tolerance_=l,this.maxExtent_=m,this.pixelRatio_=P,this.resolution_=e,this.buildersByZIndex_={}}finish(){const l={};for(const m in this.buildersByZIndex_){l[m]=l[m]||{};const e=this.buildersByZIndex_[m];for(const P in e){const x=e[P].finish();l[m][P]=x}}return l}getBuilder(l,m){const e=void 0!==l?l.toString():"0";let P=this.buildersByZIndex_[e];void 0===P&&(P={},this.buildersByZIndex_[e]=P);let x=P[m];return void 0===x&&(x=new(0,u[m])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),P[m]=x),x}}},1015:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>dt});var _=r(3430),g=r(8840),Q=r(7139),H=r(9543),j=r(2768),N=r(4331),w=r(3904);function S(B,k,L,p,M,R,K,G,J,q,ut,ht){let _t=B[k],Tt=B[k+1],Lt=0,Ht=0,$t=0,ae=0;function Qt(){Lt=_t,Ht=Tt,_t=B[k+=p],Tt=B[k+1],ae+=$t,$t=Math.sqrt((_t-Lt)*(_t-Lt)+(Tt-Ht)*(Tt-Ht))}do{Qt()}while(k<L-p&&ae+$t<R);let _e=0===$t?0:(R-ae)/$t;const Ce=(0,N.t7)(Lt,_t,_e),xe=(0,N.t7)(Ht,Tt,_e),Ze=k-p,xt=ae,Nt=R+G*J(q,M,ut);for(;k<L-p&&ae+$t<Nt;)Qt();_e=0===$t?0:(Nt-ae)/$t;const Bt=(0,N.t7)(Lt,_t,_e),ie=(0,N.t7)(Ht,Tt,_e);let Te;if(ht){const Yt=[Ce,xe,Bt,ie];(0,w.U1)(Yt,0,4,2,ht,Yt,Yt),Te=Yt[0]>Yt[2]}else Te=Ce>Bt;const he=Math.PI,Mt=[],Dt=Ze+p===k;let Kt;if($t=0,ae=xt,_t=B[k=Ze],Tt=B[k+1],Dt)return Qt(),Kt=Math.atan2(Tt-Ht,_t-Lt),Te&&(Kt+=Kt>0?-he:he),Mt[0]=[(Bt+Ce)/2,(ie+xe)/2,(Nt-R)/2,Kt,M],Mt;for(let Yt=0,Jt=(M=M.replace(/\n/g," ")).length;Yt<Jt;){Qt();let ye=Math.atan2(Tt-Ht,_t-Lt);if(Te&&(ye+=ye>0?-he:he),void 0!==Kt){let y=ye-Kt;if(y+=y>he?-2*he:y<-he?2*he:0,Math.abs(y)>K)return null}Kt=ye;const Pe=Yt;let ze=0;for(;Yt<Jt;++Yt){const z=G*J(q,M[Te?Jt-Yt-1:Yt],ut);if(k+p<L&&ae+$t<R+ze+z/2)break;ze+=z}if(Yt===Pe)continue;const He=Te?M.substring(Jt-Pe,Jt-Yt):M.substring(Pe,Yt);_e=0===$t?0:(R+ze/2-ae)/$t;const Zt=(0,N.t7)(Lt,_t,_e),Et=(0,N.t7)(Ht,Tt,_e);Mt.push([Zt,Et,ze/2,ye,He]),R+=ze}return Mt}var v=r(142),h=r(8575);const c=(0,H.lJ)(),u=[],s=[],f=[],i=[];function l(B){return B[3].declutterBox}const m=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function e(B,k){return("start"===k||"end"===k)&&!m.test(B)&&(k="start"===k?"left":"right"),g.I[k]}function P(B,k,L){return L>0&&B.push("\n",""),B.push(k,""),B}const T=class x{constructor(k,L,p,M){this.overlaps=p,this.pixelRatio=L,this.resolution=k,this.instructions=M.instructions,this.coordinates=M.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,Q.Ue)(),this.hitDetectionInstructions=M.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=M.fillStates||{},this.strokeStates=M.strokeStates||{},this.textStates=M.textStates||{},this.widths_={},this.labels_={}}createLabel(k,L,p,M){const R=k+L+p+M;if(this.labels_[R])return this.labels_[R];const K=M?this.strokeStates[M]:null,G=p?this.fillStates[p]:null,J=this.textStates[L],q=this.pixelRatio,ut=[J.scale[0]*q,J.scale[1]*q],ht=Array.isArray(k),_t=J.justify?g.I[J.justify]:e(Array.isArray(k)?k[0]:k,J.textAlign||j.PH),Tt=M&&K.lineWidth?K.lineWidth:0,Lt=ht?k:k.split("\n").reduce(P,[]),{width:Ht,height:$t,widths:ae,heights:Qt,lineWidths:_e}=(0,j.Zw)(J,Lt),Ce=Ht+Tt,xe=[],Ze=(Ce+2)*ut[0],xt=($t+Tt)*ut[1],Nt={width:Ze<0?Math.floor(Ze):Math.ceil(Ze),height:xt<0?Math.floor(xt):Math.ceil(xt),contextInstructions:xe};(1!=ut[0]||1!=ut[1])&&xe.push("scale",ut),M&&(xe.push("strokeStyle",K.strokeStyle),xe.push("lineWidth",Tt),xe.push("lineCap",K.lineCap),xe.push("lineJoin",K.lineJoin),xe.push("miterLimit",K.miterLimit),xe.push("setLineDash",[K.lineDash]),xe.push("lineDashOffset",K.lineDashOffset)),p&&xe.push("fillStyle",G.fillStyle),xe.push("textBaseline","middle"),xe.push("textAlign","center");const Bt=.5-_t;let ie=_t*Ce+Bt*Tt;const Te=[],he=[];let Jt,Mt=0,Dt=0,Kt=0,Yt=0;for(let ye=0,Pe=Lt.length;ye<Pe;ye+=2){const ze=Lt[ye];if("\n"===ze){Dt+=Mt,Mt=0,ie=_t*Ce+Bt*Tt,++Yt;continue}const He=Lt[ye+1]||J.font;He!==Jt&&(M&&Te.push("font",He),p&&he.push("font",He),Jt=He),Mt=Math.max(Mt,Qt[Kt]);const Zt=[ze,ie+Bt*ae[Kt]+_t*(ae[Kt]-_e[Yt]),.5*(Tt+Mt)+Dt];ie+=ae[Kt],M&&Te.push("strokeText",Zt),p&&he.push("fillText",Zt),++Kt}return Array.prototype.push.apply(xe,Te),Array.prototype.push.apply(xe,he),this.labels_[R]=Nt,Nt}replayTextBackground_(k,L,p,M,R,K,G){k.beginPath(),k.moveTo.apply(k,L),k.lineTo.apply(k,p),k.lineTo.apply(k,M),k.lineTo.apply(k,R),k.lineTo.apply(k,L),K&&(this.alignFill_=K[2],this.fill_(k)),G&&(this.setStrokeStyle_(k,G),k.stroke())}calculateImageOrLabelDimensions_(k,L,p,M,R,K,G,J,q,ut,ht,_t,Tt,Lt,Ht,$t){let ae=p-(G*=_t[0]),Qt=M-(J*=_t[1]);const _e=R+q>k?k-q:R,Ce=K+ut>L?L-ut:K,xe=Lt[3]+_e*_t[0]+Lt[1],Ze=Lt[0]+Ce*_t[1]+Lt[2],xt=ae-Lt[3],Nt=Qt-Lt[0];let Bt;return(Ht||0!==ht)&&(u[0]=xt,i[0]=xt,u[1]=Nt,s[1]=Nt,s[0]=xt+xe,f[0]=s[0],f[1]=Nt+Ze,i[1]=f[1]),0!==ht?(Bt=(0,Q.qC)((0,Q.Ue)(),p,M,1,1,ht,-p,-M),(0,Q.nn)(Bt,u),(0,Q.nn)(Bt,s),(0,Q.nn)(Bt,f),(0,Q.nn)(Bt,i),(0,H.T9)(Math.min(u[0],s[0],f[0],i[0]),Math.min(u[1],s[1],f[1],i[1]),Math.max(u[0],s[0],f[0],i[0]),Math.max(u[1],s[1],f[1],i[1]),c)):(0,H.T9)(Math.min(xt,xt+xe),Math.min(Nt,Nt+Ze),Math.max(xt,xt+xe),Math.max(Nt,Nt+Ze),c),Tt&&(ae=Math.round(ae),Qt=Math.round(Qt)),{drawImageX:ae,drawImageY:Qt,drawImageW:_e,drawImageH:Ce,originX:q,originY:ut,declutterBox:{minX:c[0],minY:c[1],maxX:c[2],maxY:c[3],value:$t},canvasTransform:Bt,scale:_t}}replayImageOrLabel_(k,L,p,M,R,K,G){const q=M.declutterBox,ut=k.canvas,ht=G?G[2]*M.scale[0]/2:0;return q.minX-ht<=ut.width/L&&q.maxX+ht>=0&&q.minY-ht<=ut.height/L&&q.maxY+ht>=0&&(!(!K&&!G)&&this.replayTextBackground_(k,u,s,f,i,K,G),(0,j._f)(k,M.canvasTransform,R,p,M.originX,M.originY,M.drawImageW,M.drawImageH,M.drawImageX,M.drawImageY,M.scale)),!0}fill_(k){if(this.alignFill_){const L=(0,Q.nn)(this.renderedTransform_,[0,0]),p=512*this.pixelRatio;k.save(),k.translate(L[0]%p,L[1]%p),k.rotate(this.viewRotation_)}k.fill(),this.alignFill_&&k.restore()}setStrokeStyle_(k,L){k.strokeStyle=L[1],k.lineWidth=L[2],k.lineCap=L[3],k.lineJoin=L[4],k.miterLimit=L[5],k.lineDashOffset=L[7],k.setLineDash(L[6])}drawLabelWithPointPlacement_(k,L,p,M){const R=this.textStates[L],K=this.createLabel(k,L,M,p),G=this.strokeStates[p],J=this.pixelRatio,q=e(Array.isArray(k)?k[0]:k,R.textAlign||j.PH),ut=g.I[R.textBaseline||j.ru],ht=G&&G.lineWidth?G.lineWidth:0;return{label:K,anchorX:q*(K.width/J-2*R.scale[0])+2*(.5-q)*ht,anchorY:ut*K.height/J+2*(.5-ut)*ht}}execute_(k,L,p,M,R,K,G,J){let q;this.pixelCoordinates_&&(0,v.fS)(p,this.renderedTransform_)?q=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),q=(0,w.vT)(this.coordinates,0,this.coordinates.length,2,p,this.pixelCoordinates_),(0,Q.lk)(this.renderedTransform_,p));let ut=0;const ht=M.length;let Tt,Lt,Ht,$t,ae,Qt,_e,Ce,xe,Ze,xt,Nt,_t=0,Bt=0,ie=0,Te=null,he=null;const Mt=this.coordinateCache_,Dt=this.viewRotation_,Kt=Math.round(1e12*Math.atan2(-p[1],p[0]))/1e12,Yt={context:k,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Dt},Jt=this.instructions!=M||this.overlaps?0:200;let ye,Pe,ze,He;for(;ut<ht;){const Zt=M[ut];switch(Zt[0]){case _.ZP.BEGIN_GEOMETRY:ye=Zt[1],He=Zt[3],ye.getGeometry()?void 0===G||(0,H.kK)(G,He.getExtent())?++ut:ut=Zt[2]+1:ut=Zt[2];break;case _.ZP.BEGIN_PATH:Bt>Jt&&(this.fill_(k),Bt=0),ie>Jt&&(k.stroke(),ie=0),!Bt&&!ie&&(k.beginPath(),$t=NaN,ae=NaN),++ut;break;case _.ZP.CIRCLE:_t=Zt[1];const y=q[_t],z=q[_t+1],vt=q[_t+2]-y,Pt=q[_t+3]-z,kt=Math.sqrt(vt*vt+Pt*Pt);k.moveTo(y+kt,z),k.arc(y,z,kt,0,2*Math.PI,!0),++ut;break;case _.ZP.CLOSE_PATH:k.closePath(),++ut;break;case _.ZP.CUSTOM:_t=Zt[1],Tt=Zt[2];const ee=Zt[4],re=6==Zt.length?Zt[5]:void 0;Yt.geometry=Zt[3],Yt.feature=ye,ut in Mt||(Mt[ut]=[]);const we=Mt[ut];re?re(q,_t,Tt,2,we):(we[0]=q[_t],we[1]=q[_t+1],we.length=2),ee(we,Yt),++ut;break;case _.ZP.DRAW_IMAGE:_t=Zt[1],Tt=Zt[2],Ce=Zt[3],Lt=Zt[4],Ht=Zt[5];let ge=Zt[6];const oe=Zt[7],Xe=Zt[8],oi=Zt[9],Qe=Zt[10];let $e=Zt[11];const Je=Zt[12];let ri=Zt[13];const _i=Zt[14],ui=Zt[15];if(!Ce&&Zt.length>=20){xe=Zt[19],Ze=Zt[20],xt=Zt[21],Nt=Zt[22];const Oi=this.drawLabelWithPointPlacement_(xe,Ze,xt,Nt);Ce=Oi.label,Zt[3]=Ce,Lt=(Oi.anchorX-Zt[23])*this.pixelRatio,Zt[4]=Lt,Ht=(Oi.anchorY-Zt[24])*this.pixelRatio,Zt[5]=Ht,ge=Ce.height,Zt[6]=ge,ri=Ce.width,Zt[13]=ri}let di,ot,rt,St;Zt.length>25&&(di=Zt[25]),Zt.length>17?(ot=Zt[16],rt=Zt[17],St=Zt[18]):(ot=j.oB,rt=!1,St=!1),Qe&&Kt?$e+=Dt:!Qe&&!Kt&&($e-=Dt);let bt=0;for(;_t<Tt;_t+=2){if(di&&di[bt++]<ri/this.pixelRatio)continue;const Oi=this.calculateImageOrLabelDimensions_(Ce.width,Ce.height,q[_t],q[_t+1],ri,ge,Lt,Ht,Xe,oi,$e,Je,R,ot,rt||St,ye),Mi=[k,L,Ce,Oi,oe,rt?Te:null,St?he:null];if(J){if("none"===_i)continue;if("obstacle"===_i){J.insert(Oi.declutterBox);continue}{let Ai,Ii;if(ui){const yi=Tt-_t;if(!ui[yi]){ui[yi]=Mi;continue}if(Ai=ui[yi],delete ui[yi],Ii=l(Ai),J.collides(Ii))continue}if(J.collides(Oi.declutterBox))continue;Ai&&(J.insert(Ii),this.replayImageOrLabel_.apply(this,Ai)),J.insert(Oi.declutterBox)}}this.replayImageOrLabel_.apply(this,Mi)}++ut;break;case _.ZP.DRAW_CHARS:const Ft=Zt[1],se=Zt[2],fe=Zt[3],Se=Zt[4];Nt=Zt[5];const Le=Zt[6],ke=Zt[7],Ve=Zt[8];xt=Zt[9];const qe=Zt[10];xe=Zt[11],Ze=Zt[12];const si=[Zt[13],Zt[13]],pi=this.textStates[Ze],Di=pi.font,Ri=[pi.scale[0]*ke,pi.scale[1]*ke];let Li;Di in this.widths_?Li=this.widths_[Di]:(Li={},this.widths_[Di]=Li);const Yn=(0,h.W)(q,Ft,se,2),Wi=Math.abs(Ri[0])*(0,j.Kd)(Di,xe,Li);if(Se||Wi<=Yn){const Ai=S(q,Ft,se,2,xe,(Yn-Wi)*g.I[this.textStates[Ze].textAlign],Le,Math.abs(Ri[0]),j.Kd,Di,Li,Kt?0:this.viewRotation_);t:if(Ai){const Ii=[];let yi,hn,Ui,Ei,Fi;if(xt)for(yi=0,hn=Ai.length;yi<hn;++yi){Fi=Ai[yi],Ui=Fi[4],Ei=this.createLabel(Ui,Ze,"",xt),Lt=Fi[2]+(Ri[0]<0?-qe:qe),Ht=fe*Ei.height+2*(.5-fe)*qe*Ri[1]/Ri[0]-Ve;const ji=this.calculateImageOrLabelDimensions_(Ei.width,Ei.height,Fi[0],Fi[1],Ei.width,Ei.height,Lt,Ht,0,0,Fi[3],si,!1,j.oB,!1,ye);if(J&&J.collides(ji.declutterBox))break t;Ii.push([k,L,Ei,ji,1,null,null])}if(Nt)for(yi=0,hn=Ai.length;yi<hn;++yi){Fi=Ai[yi],Ui=Fi[4],Ei=this.createLabel(Ui,Ze,Nt,""),Lt=Fi[2],Ht=fe*Ei.height-Ve;const ji=this.calculateImageOrLabelDimensions_(Ei.width,Ei.height,Fi[0],Fi[1],Ei.width,Ei.height,Lt,Ht,0,0,Fi[3],si,!1,j.oB,!1,ye);if(J&&J.collides(ji.declutterBox))break t;Ii.push([k,L,Ei,ji,1,null,null])}J&&J.load(Ii.map(l));for(let ji=0,fn=Ii.length;ji<fn;++ji)this.replayImageOrLabel_.apply(this,Ii[ji])}}++ut;break;case _.ZP.END_GEOMETRY:if(void 0!==K){ye=Zt[1];const Oi=K(ye,He);if(Oi)return Oi}++ut;break;case _.ZP.FILL:Jt?Bt++:this.fill_(k),++ut;break;case _.ZP.MOVE_TO_LINE_TO:for(_t=Zt[1],Tt=Zt[2],Pe=q[_t],ze=q[_t+1],Qt=Pe+.5|0,_e=ze+.5|0,(Qt!==$t||_e!==ae)&&(k.moveTo(Pe,ze),$t=Qt,ae=_e),_t+=2;_t<Tt;_t+=2)Pe=q[_t],ze=q[_t+1],Qt=Pe+.5|0,_e=ze+.5|0,(_t==Tt-2||Qt!==$t||_e!==ae)&&(k.lineTo(Pe,ze),$t=Qt,ae=_e);++ut;break;case _.ZP.SET_FILL_STYLE:Te=Zt,this.alignFill_=Zt[2],Bt&&(this.fill_(k),Bt=0,ie&&(k.stroke(),ie=0)),k.fillStyle=Zt[1],++ut;break;case _.ZP.SET_STROKE_STYLE:he=Zt,ie&&(k.stroke(),ie=0),this.setStrokeStyle_(k,Zt),++ut;break;case _.ZP.STROKE:Jt?ie++:k.stroke(),++ut;break;default:++ut}}Bt&&this.fill_(k),ie&&k.stroke()}execute(k,L,p,M,R,K){this.viewRotation_=M,this.execute_(k,L,p,this.instructions,R,void 0,void 0,K)}executeHitDetection(k,L,p,M,R){return this.viewRotation_=p,this.execute_(k,1,L,this.hitDetectionInstructions,!0,M,R)}};var U=r(3842),D=r(9306);const C=["Polygon","Circle","LineString","Image","Text","Default"],X={},dt=class O{constructor(k,L,p,M,R,K){this.maxExtent_=k,this.overlaps_=M,this.pixelRatio_=p,this.resolution_=L,this.renderBuffer_=K,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,Q.Ue)(),this.createExecutors_(R)}clip(k,L){const p=this.getClipCoords(L);k.beginPath(),k.moveTo(p[0],p[1]),k.lineTo(p[2],p[3]),k.lineTo(p[4],p[5]),k.lineTo(p[6],p[7]),k.clip()}createExecutors_(k){for(const L in k){let p=this.executorsByZIndex_[L];void 0===p&&(p={},this.executorsByZIndex_[L]=p);const M=k[L];for(const R in M)p[R]=new T(this.resolution_,this.pixelRatio_,this.overlaps_,M[R])}}hasExecutors(k){for(const L in this.executorsByZIndex_){const p=this.executorsByZIndex_[L];for(let M=0,R=k.length;M<R;++M)if(k[M]in p)return!0}return!1}forEachFeatureAtCoordinate(k,L,p,M,R,K){const G=2*(M=Math.round(M))+1,J=(0,Q.qC)(this.hitDetectionTransform_,M+.5,M+.5,1/L,-1/L,-p,-k[0],-k[1]),q=!this.hitDetectionContext_;q&&(this.hitDetectionContext_=(0,U.E4)(G,G,void 0,{willReadFrequently:!0}));const ut=this.hitDetectionContext_;let ht;ut.canvas.width!==G||ut.canvas.height!==G?(ut.canvas.width=G,ut.canvas.height=G):q||ut.clearRect(0,0,G,G),void 0!==this.renderBuffer_&&(ht=(0,H.lJ)(),(0,H.Wj)(ht,k),(0,H.f3)(ht,L*(this.renderBuffer_+M),ht));const _t=function $(B){if(void 0!==X[B])return X[B];const k=2*B+1,L=B*B,p=new Array(L+1);for(let R=0;R<=B;++R)for(let K=0;K<=B;++K){const G=R*R+K*K;if(G>L)break;let J=p[G];J||(J=[],p[G]=J),J.push(4*((B+R)*k+(B+K))+3),R>0&&J.push(4*((B-R)*k+(B+K))+3),K>0&&(J.push(4*((B+R)*k+(B-K))+3),R>0&&J.push(4*((B-R)*k+(B-K))+3))}const M=[];for(let R=0,K=p.length;R<K;++R)p[R]&&M.push(...p[R]);return X[B]=M,M}(M);let Tt;function Lt(xe,Ze){const xt=ut.getImageData(0,0,G,G).data;for(let Nt=0,Bt=_t.length;Nt<Bt;Nt++)if(xt[_t[Nt]]>0){if(!K||"Image"!==Tt&&"Text"!==Tt||K.includes(xe)){const ie=(_t[Nt]-3)/4,Te=M-ie%G,he=M-(ie/G|0),Mt=R(xe,Ze,Te*Te+he*he);if(Mt)return Mt}ut.clearRect(0,0,G,G);break}}const Ht=Object.keys(this.executorsByZIndex_).map(Number);let $t,ae,Qt,_e,Ce;for(Ht.sort(v.j2),$t=Ht.length-1;$t>=0;--$t){const xe=Ht[$t].toString();for(Qt=this.executorsByZIndex_[xe],ae=C.length-1;ae>=0;--ae)if(Tt=C[ae],_e=Qt[Tt],void 0!==_e&&(Ce=_e.executeHitDetection(ut,J,p,Lt,ht),Ce))return Ce}}getClipCoords(k){const L=this.maxExtent_;if(!L)return null;const p=L[0],M=L[1],R=L[2],K=L[3],G=[p,M,p,K,R,K,R,M];return(0,w.vT)(G,0,8,2,k,G),G}isEmpty(){return(0,D.x)(this.executorsByZIndex_)}execute(k,L,p,M,R,K,G){const J=Object.keys(this.executorsByZIndex_).map(Number);let q,ut,ht,_t,Tt,Lt;for(J.sort(v.j2),this.maxExtent_&&(k.save(),this.clip(k,p)),K=K||C,G&&J.reverse(),q=0,ut=J.length;q<ut;++q){const Ht=J[q].toString();for(Tt=this.executorsByZIndex_[Ht],ht=0,_t=K.length;ht<_t;++ht)Lt=Tt[K[ht]],void 0!==Lt&&Lt.execute(k,L,p,M,R,G)}this.maxExtent_&&k.restore()}}},3455:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>c});var _=r(8110),g=r(4890),Q=r(7139),H=r(2768),j=r(142),N=r(9543),w=r(4331),S=r(3904),v=r(1790);const c=class h extends _.Z{constructor(s,f,i,l,m,e,P){super(),this.context_=s,this.pixelRatio_=f,this.extent_=i,this.transform_=l,this.transformRotation_=l?(0,w.FH)(Math.atan2(l[1],l[0]),10):0,this.viewRotation_=m,this.squaredTolerance_=e,this.userTransform_=P,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,Q.Ue)()}drawImages_(s,f,i,l){if(!this.image_)return;const m=(0,S.vT)(s,f,i,l,this.transform_,this.pixelCoordinates_),e=this.context_,P=this.tmpLocalTransform_,x=e.globalAlpha;1!=this.imageOpacity_&&(e.globalAlpha=x*this.imageOpacity_);let T=this.imageRotation_;0===this.transformRotation_&&(T-=this.viewRotation_),this.imageRotateWithView_&&(T+=this.viewRotation_);for(let U=0,D=m.length;U<D;U+=2){const C=m[U]-this.imageAnchorX_,O=m[U+1]-this.imageAnchorY_;if(0!==T||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const X=C+this.imageAnchorX_,$=O+this.imageAnchorY_;(0,Q.qC)(P,X,$,1,1,T,-X,-$),e.setTransform.apply(e,P),e.translate(X,$),e.scale(this.imageScale_[0],this.imageScale_[1]),e.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),e.setTransform(1,0,0,1,0,0)}else e.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,C,O,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(e.globalAlpha=x)}drawText_(s,f,i,l){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const m=(0,S.vT)(s,f,i,l,this.transform_,this.pixelCoordinates_),e=this.context_;let P=this.textRotation_;for(0===this.transformRotation_&&(P-=this.viewRotation_),this.textRotateWithView_&&(P+=this.viewRotation_);f<i;f+=l){const x=m[f]+this.textOffsetX_,T=m[f+1]+this.textOffsetY_;0!==P||1!=this.textScale_[0]||1!=this.textScale_[1]?(e.translate(x-this.textOffsetX_,T-this.textOffsetY_),e.rotate(P),e.translate(this.textOffsetX_,this.textOffsetY_),e.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&e.strokeText(this.text_,0,0),this.textFillState_&&e.fillText(this.text_,0,0),e.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&e.strokeText(this.text_,x,T),this.textFillState_&&e.fillText(this.text_,x,T))}}moveToLineTo_(s,f,i,l,m){const e=this.context_,P=(0,S.vT)(s,f,i,l,this.transform_,this.pixelCoordinates_);e.moveTo(P[0],P[1]);let x=P.length;m&&(x-=2);for(let T=2;T<x;T+=2)e.lineTo(P[T],P[T+1]);return m&&e.closePath(),i}drawRings_(s,f,i,l){for(let m=0,e=i.length;m<e;++m)f=this.moveToLineTo_(s,f,i[m],l,!0);return f}drawCircle(s){if((0,N.kK)(this.extent_,s.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const f=(0,v.Kr)(s,this.transform_,this.pixelCoordinates_),i=f[2]-f[0],l=f[3]-f[1],m=Math.sqrt(i*i+l*l),e=this.context_;e.beginPath(),e.arc(f[0],f[1],m,0,2*Math.PI),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}""!==this.text_&&this.drawText_(s.getCenter(),0,2,2)}}setStyle(s){this.setFillStrokeStyle(s.getFill(),s.getStroke()),this.setImageStyle(s.getImage()),this.setTextStyle(s.getText())}setTransform(s){this.transform_=s}drawGeometry(s){switch(s.getType()){case"Point":this.drawPoint(s);break;case"LineString":this.drawLineString(s);break;case"Polygon":this.drawPolygon(s);break;case"MultiPoint":this.drawMultiPoint(s);break;case"MultiLineString":this.drawMultiLineString(s);break;case"MultiPolygon":this.drawMultiPolygon(s);break;case"GeometryCollection":this.drawGeometryCollection(s);break;case"Circle":this.drawCircle(s)}}drawFeature(s,f){const i=f.getGeometryFunction()(s);!i||!(0,N.kK)(this.extent_,i.getExtent())||(this.setStyle(f),this.drawGeometry(i))}drawGeometryCollection(s){const f=s.getGeometriesArray();for(let i=0,l=f.length;i<l;++i)this.drawGeometry(f[i])}drawPoint(s){this.squaredTolerance_&&(s=s.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const f=s.getFlatCoordinates(),i=s.getStride();this.image_&&this.drawImages_(f,0,f.length,i),""!==this.text_&&this.drawText_(f,0,f.length,i)}drawMultiPoint(s){this.squaredTolerance_&&(s=s.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const f=s.getFlatCoordinates(),i=s.getStride();this.image_&&this.drawImages_(f,0,f.length,i),""!==this.text_&&this.drawText_(f,0,f.length,i)}drawLineString(s){if(this.squaredTolerance_&&(s=s.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,N.kK)(this.extent_,s.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const f=this.context_,i=s.getFlatCoordinates();f.beginPath(),this.moveToLineTo_(i,0,i.length,s.getStride(),!1),f.stroke()}if(""!==this.text_){const f=s.getFlatMidpoint();this.drawText_(f,0,2,2)}}}drawMultiLineString(s){this.squaredTolerance_&&(s=s.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const f=s.getExtent();if((0,N.kK)(this.extent_,f)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,l=s.getFlatCoordinates();let m=0;const e=s.getEnds(),P=s.getStride();i.beginPath();for(let x=0,T=e.length;x<T;++x)m=this.moveToLineTo_(l,m,e[x],P,!1);i.stroke()}if(""!==this.text_){const i=s.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(s){if(this.squaredTolerance_&&(s=s.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,N.kK)(this.extent_,s.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const f=this.context_;f.beginPath(),this.drawRings_(s.getOrientedFlatCoordinates(),0,s.getEnds(),s.getStride()),this.fillState_&&f.fill(),this.strokeState_&&f.stroke()}if(""!==this.text_){const f=s.getFlatInteriorPoint();this.drawText_(f,0,2,2)}}}drawMultiPolygon(s){if(this.squaredTolerance_&&(s=s.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,N.kK)(this.extent_,s.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const f=this.context_,i=s.getOrientedFlatCoordinates();let l=0;const m=s.getEndss(),e=s.getStride();f.beginPath();for(let P=0,x=m.length;P<x;++P)l=this.drawRings_(i,l,m[P],e);this.fillState_&&f.fill(),this.strokeState_&&f.stroke()}if(""!==this.text_){const f=s.getFlatInteriorPoints();this.drawText_(f,0,f.length,2)}}}setContextFillState_(s){const f=this.context_,i=this.contextFillState_;i?i.fillStyle!=s.fillStyle&&(i.fillStyle=s.fillStyle,f.fillStyle=s.fillStyle):(f.fillStyle=s.fillStyle,this.contextFillState_={fillStyle:s.fillStyle})}setContextStrokeState_(s){const f=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=s.lineCap&&(i.lineCap=s.lineCap,f.lineCap=s.lineCap),(0,j.fS)(i.lineDash,s.lineDash)||f.setLineDash(i.lineDash=s.lineDash),i.lineDashOffset!=s.lineDashOffset&&(i.lineDashOffset=s.lineDashOffset,f.lineDashOffset=s.lineDashOffset),i.lineJoin!=s.lineJoin&&(i.lineJoin=s.lineJoin,f.lineJoin=s.lineJoin),i.lineWidth!=s.lineWidth&&(i.lineWidth=s.lineWidth,f.lineWidth=s.lineWidth),i.miterLimit!=s.miterLimit&&(i.miterLimit=s.miterLimit,f.miterLimit=s.miterLimit),i.strokeStyle!=s.strokeStyle&&(i.strokeStyle=s.strokeStyle,f.strokeStyle=s.strokeStyle)):(f.lineCap=s.lineCap,f.setLineDash(s.lineDash),f.lineDashOffset=s.lineDashOffset,f.lineJoin=s.lineJoin,f.lineWidth=s.lineWidth,f.miterLimit=s.miterLimit,f.strokeStyle=s.strokeStyle,this.contextStrokeState_={lineCap:s.lineCap,lineDash:s.lineDash,lineDashOffset:s.lineDashOffset,lineJoin:s.lineJoin,lineWidth:s.lineWidth,miterLimit:s.miterLimit,strokeStyle:s.strokeStyle})}setContextTextState_(s){const f=this.context_,i=this.contextTextState_,l=s.textAlign?s.textAlign:H.PH;i?(i.font!=s.font&&(i.font=s.font,f.font=s.font),i.textAlign!=l&&(i.textAlign=l,f.textAlign=l),i.textBaseline!=s.textBaseline&&(i.textBaseline=s.textBaseline,f.textBaseline=s.textBaseline)):(f.font=s.font,f.textAlign=l,f.textBaseline=s.textBaseline,this.contextTextState_={font:s.font,textAlign:l,textBaseline:s.textBaseline})}setFillStrokeStyle(s,f){if(s){const i=s.getColor();this.fillState_={fillStyle:(0,g.y)(i||H.bL)}}else this.fillState_=null;if(f){const i=f.getColor(),l=f.getLineCap(),m=f.getLineDash(),e=f.getLineDashOffset(),P=f.getLineJoin(),x=f.getWidth(),T=f.getMiterLimit(),U=m||H.X9;this.strokeState_={lineCap:void 0!==l?l:H.mb,lineDash:1===this.pixelRatio_?U:U.map(D=>D*this.pixelRatio_),lineDashOffset:(e||H.He)*this.pixelRatio_,lineJoin:void 0!==P?P:H.rc,lineWidth:(void 0!==x?x:H.yC)*this.pixelRatio_,miterLimit:void 0!==T?T:H.V4,strokeStyle:(0,g.y)(i||H.Tx)}}else this.strokeState_=null}setImageStyle(s){let f;if(!s||!(f=s.getSize()))return void(this.image_=null);const i=s.getPixelRatio(this.pixelRatio_),l=s.getAnchor(),m=s.getOrigin();this.image_=s.getImage(this.pixelRatio_),this.imageAnchorX_=l[0]*i,this.imageAnchorY_=l[1]*i,this.imageHeight_=f[1]*i,this.imageOpacity_=s.getOpacity(),this.imageOriginX_=m[0],this.imageOriginY_=m[1],this.imageRotateWithView_=s.getRotateWithView(),this.imageRotation_=s.getRotation();const e=s.getScaleArray();this.imageScale_=[e[0]*this.pixelRatio_/i,e[1]*this.pixelRatio_/i],this.imageWidth_=f[0]*i}setTextStyle(s){if(s){const f=s.getFill();if(f){const O=f.getColor();this.textFillState_={fillStyle:(0,g.y)(O||H.bL)}}else this.textFillState_=null;const i=s.getStroke();if(i){const O=i.getColor(),X=i.getLineCap(),$=i.getLineDash(),dt=i.getLineDashOffset(),B=i.getLineJoin(),k=i.getWidth(),L=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==X?X:H.mb,lineDash:$||H.X9,lineDashOffset:dt||H.He,lineJoin:void 0!==B?B:H.rc,lineWidth:void 0!==k?k:H.yC,miterLimit:void 0!==L?L:H.V4,strokeStyle:(0,g.y)(O||H.Tx)}}else this.textStrokeState_=null;const l=s.getFont(),m=s.getOffsetX(),e=s.getOffsetY(),P=s.getRotateWithView(),x=s.getRotation(),T=s.getScaleArray(),U=s.getText(),D=s.getTextAlign(),C=s.getTextBaseline();this.textState_={font:void 0!==l?l:H.Df,textAlign:void 0!==D?D:H.PH,textBaseline:void 0!==C?C:H.ru},this.text_=void 0!==U?Array.isArray(U)?U.reduce((O,X,$)=>O+($%2?" ":X),""):U:"",this.textOffsetX_=void 0!==m?this.pixelRatio_*m:0,this.textOffsetY_=void 0!==e?this.pixelRatio_*e:0,this.textRotateWithView_=void 0!==P&&P,this.textRotation_=void 0!==x?x:0,this.textScale_=[this.pixelRatio_*T[0],this.pixelRatio_*T[1]]}else this.text_=""}}},3430:(Vt,gt,r)=>{"use strict";r.d(gt,{$O:()=>H,Yc:()=>Q,ZP:()=>N,gO:()=>g,s3:()=>j});const _={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},g=[_.FILL],Q=[_.STROKE],H=[_.BEGIN_PATH],j=[_.CLOSE_PATH],N=_},8840:(Vt,gt,r)=>{"use strict";r.d(gt,{I:()=>h,Z:()=>u});var _=r(1211),g=r(3430),Q=r(4890),H=r(2768),j=r(513),N=r(9543),w=r(4331);function S(s,f,i,l,m){const e=[];let P=i,x=0,T=f.slice(i,2);for(;x<s&&P+m<l;){const[U,D]=T.slice(-2),C=f[P+m],O=f[P+m+1],X=Math.sqrt((C-U)*(C-U)+(O-D)*(O-D));if(x+=X,x>=s){const $=(s-x+X)/X,dt=(0,w.t7)(U,C,$),B=(0,w.t7)(D,O,$);T.push(dt,B),e.push(T),T=[dt,B],x==s&&(P+=m),x=0}else if(x<s)T.push(f[P+m],f[P+m+1]),P+=m;else{const $=X-x,dt=(0,w.t7)(U,C,$/X),B=(0,w.t7)(D,O,$/X);T.push(dt,B),e.push(T),T=[dt,B],x=0,P+=m}}return x>0&&e.push(T),e}function v(s,f,i,l,m){let D,C,O,X,$,dt,B,k,L,p,e=i,P=i,x=0,T=0,U=i;for(C=i;C<l;C+=m){const M=f[C],R=f[C+1];void 0!==$&&(L=M-$,p=R-dt,X=Math.sqrt(L*L+p*p),void 0!==B&&(T+=O,D=Math.acos((B*L+k*p)/(O*X)),D>s&&(T>x&&(x=T,e=U,P=C),T=0,U=C-m)),O=X,B=L,k=p),$=M,dt=R}return T+=X,T>x?[U,C]:[e,P]}const h={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},u=class c extends _.Z{constructor(f,i,l,m){super(f,i,l,m),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const f=super.finish();return f.textStates=this.textStates,f.fillStates=this.fillStates,f.strokeStates=this.strokeStates,f}drawText(f,i){const e=this.textState_;if(""===this.text_||!e||!this.textFillState_&&!this.textStrokeState_)return;const P=this.coordinates;let x=P.length;const T=f.getType();let U=null,D=f.getStride();if("line"!==e.placement||"LineString"!=T&&"MultiLineString"!=T&&"Polygon"!=T&&"MultiPolygon"!=T){let C=e.overflow?null:[];switch(T){case"Point":case"MultiPoint":U=f.getFlatCoordinates();break;case"LineString":U=f.getFlatMidpoint();break;case"Circle":U=f.getCenter();break;case"MultiLineString":U=f.getFlatMidpoints(),D=2;break;case"Polygon":U=f.getFlatInteriorPoint(),e.overflow||C.push(U[2]/this.resolution),D=3;break;case"MultiPolygon":const B=f.getFlatInteriorPoints();U=[];for(let k=0,L=B.length;k<L;k+=3)e.overflow||C.push(B[k+2]/this.resolution),U.push(B[k],B[k+1]);if(0===U.length)return;D=2}const O=this.appendFlatPointCoordinates(U,D);if(O===x)return;if(C&&(O-x)/2!=U.length/D){let B=x/2;C=C.filter((k,L)=>{const p=P[2*(B+L)]===U[L*D]&&P[2*(B+L)+1]===U[L*D+1];return p||--B,p})}this.saveTextStates_(),(e.backgroundFill||e.backgroundStroke)&&(this.setFillStrokeStyle(e.backgroundFill,e.backgroundStroke),e.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),e.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(f,i);let X=e.padding;if(X!=H.oB&&(e.scale[0]<0||e.scale[1]<0)){let B=e.padding[0],k=e.padding[1],L=e.padding[2],p=e.padding[3];e.scale[0]<0&&(k=-k,p=-p),e.scale[1]<0&&(B=-B,L=-L),X=[B,k,L,p]}const $=this.pixelRatio;this.instructions.push([g.ZP.DRAW_IMAGE,x,O,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,X==H.oB?H.oB:X.map(function(B){return B*$}),!!e.backgroundFill,!!e.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,C]);const dt=1/$;this.hitDetectionInstructions.push([g.ZP.DRAW_IMAGE,x,O,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[dt,dt],NaN,void 0,this.declutterImageWithText_,X,!!e.backgroundFill,!!e.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,C]),this.endGeometry(i)}else{if(!(0,N.kK)(this.getBufferedMaxExtent(),f.getExtent()))return;let C;if(U=f.getFlatCoordinates(),"LineString"==T)C=[U.length];else if("MultiLineString"==T)C=f.getEnds();else if("Polygon"==T)C=f.getEnds().slice(0,1);else if("MultiPolygon"==T){const dt=f.getEndss();C=[];for(let B=0,k=dt.length;B<k;++B)C.push(dt[B][0])}this.beginGeometry(f,i);const O=e.repeat,X=O?void 0:e.textAlign;let $=0;for(let dt=0,B=C.length;dt<B;++dt){let k;k=O?S(O*this.resolution,U,$,C[dt],D):[U.slice($,C[dt])];for(let L=0,p=k.length;L<p;++L){const M=k[L];let R=0,K=M.length;if(null==X){const J=v(e.maxAngle,M,0,M.length,2);R=J[0],K=J[1]}for(let J=R;J<K;J+=D)P.push(M[J],M[J+1]);const G=P.length;$=C[dt],this.drawChars_(x,G),x=G}}this.endGeometry(i)}}saveTextStates_(){const f=this.textStrokeState_,i=this.textState_,l=this.textFillState_,m=this.strokeKey_;f&&(m in this.strokeStates||(this.strokeStates[m]={strokeStyle:f.strokeStyle,lineCap:f.lineCap,lineDashOffset:f.lineDashOffset,lineWidth:f.lineWidth,lineJoin:f.lineJoin,miterLimit:f.miterLimit,lineDash:f.lineDash}));const e=this.textKey_;e in this.textStates||(this.textStates[e]={font:i.font,textAlign:i.textAlign||H.PH,justify:i.justify,textBaseline:i.textBaseline||H.ru,scale:i.scale});const P=this.fillKey_;l&&(P in this.fillStates||(this.fillStates[P]={fillStyle:l.fillStyle}))}drawChars_(f,i){const l=this.textStrokeState_,m=this.textState_,e=this.strokeKey_,P=this.textKey_,x=this.fillKey_;this.saveTextStates_();const T=this.pixelRatio,U=h[m.textBaseline],D=this.textOffsetY_*T,C=this.text_,O=l?l.lineWidth*Math.abs(m.scale[0])/2:0;this.instructions.push([g.ZP.DRAW_CHARS,f,i,U,m.overflow,x,m.maxAngle,T,D,e,O*T,C,P,1]),this.hitDetectionInstructions.push([g.ZP.DRAW_CHARS,f,i,U,m.overflow,x,m.maxAngle,1,D,e,O,C,P,1/T])}setTextStyle(f,i){let l,m,e;if(f){const P=f.getFill();P?(m=this.textFillState_,m||(m={},this.textFillState_=m),m.fillStyle=(0,Q.y)(P.getColor()||H.bL)):(m=null,this.textFillState_=m);const x=f.getStroke();if(x){e=this.textStrokeState_,e||(e={},this.textStrokeState_=e);const $=x.getLineDash(),dt=x.getLineDashOffset(),B=x.getWidth(),k=x.getMiterLimit();e.lineCap=x.getLineCap()||H.mb,e.lineDash=$?$.slice():H.X9,e.lineDashOffset=void 0===dt?H.He:dt,e.lineJoin=x.getLineJoin()||H.rc,e.lineWidth=void 0===B?H.yC:B,e.miterLimit=void 0===k?H.V4:k,e.strokeStyle=(0,Q.y)(x.getColor()||H.Tx)}else e=null,this.textStrokeState_=e;l=this.textState_;const T=f.getFont()||H.Df;(0,H.Qx)(T);const U=f.getScaleArray();l.overflow=f.getOverflow(),l.font=T,l.maxAngle=f.getMaxAngle(),l.placement=f.getPlacement(),l.textAlign=f.getTextAlign(),l.repeat=f.getRepeat(),l.justify=f.getJustify(),l.textBaseline=f.getTextBaseline()||H.ru,l.backgroundFill=f.getBackgroundFill(),l.backgroundStroke=f.getBackgroundStroke(),l.padding=f.getPadding()||H.oB,l.scale=void 0===U?[1,1]:U;const D=f.getOffsetX(),C=f.getOffsetY(),O=f.getRotateWithView(),X=f.getRotation();this.text_=f.getText()||"",this.textOffsetX_=void 0===D?0:D,this.textOffsetY_=void 0===C?0:C,this.textRotateWithView_=void 0!==O&&O,this.textRotation_=void 0===X?0:X,this.strokeKey_=e?("string"==typeof e.strokeStyle?e.strokeStyle:(0,j.sq)(e.strokeStyle))+e.lineCap+e.lineDashOffset+"|"+e.lineWidth+e.lineJoin+e.miterLimit+"["+e.lineDash.join()+"]":"",this.textKey_=l.font+l.scale+(l.textAlign||"?")+(l.repeat||"?")+(l.justify||"?")+(l.textBaseline||"?"),this.fillKey_=m?"string"==typeof m.fillStyle?m.fillStyle:"|"+(0,j.sq)(m.fillStyle):""}else this.text_="";this.declutterImageWithText_=i}}},7713:(Vt,gt,r)=>{"use strict";r.d(gt,{TU:()=>S,UN:()=>w,ix:()=>v});var _=r(3455),g=r(5999),Q=r(142),H=r(4331),j=r(3842),N=r(9543);const w=.5;function S(h,c,u,s,f,i,l){const P=(0,j.E4)(h[0]*w,h[1]*w);P.imageSmoothingEnabled=!1;const x=P.canvas,T=new _.Z(P,w,f,null,l),U=u.length,D=Math.floor(16777215/U),C={};for(let X=1;X<=U;++X){const $=u[X-1],dt=$.getStyleFunction()||s;if(!s)continue;let B=dt($,i);if(!B)continue;Array.isArray(B)||(B=[B]);const L=(X*D).toString(16).padStart(7,"#00000");for(let p=0,M=B.length;p<M;++p){const R=B[p],K=R.getGeometryFunction()($);if(!K||!(0,N.kK)(f,K.getExtent()))continue;const G=R.clone(),J=G.getFill();J&&J.setColor(L);const q=G.getStroke();q&&(q.setColor(L),q.setLineDash(null)),G.setText(void 0);const ut=R.getImage();if(ut&&0!==ut.getOpacity()){const Lt=ut.getImageSize();if(!Lt)continue;const Ht=(0,j.E4)(Lt[0],Lt[1],void 0,{alpha:!1}),$t=Ht.canvas;Ht.fillStyle=L,Ht.fillRect(0,0,$t.width,$t.height),G.setImage(new g.Z({img:$t,imgSize:Lt,anchor:ut.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ut.getOrigin(),opacity:1,size:ut.getSize(),scale:ut.getScale(),rotation:ut.getRotation(),rotateWithView:ut.getRotateWithView()}))}const ht=G.getZIndex()||0;let _t=C[ht];_t||(_t={},C[ht]=_t,_t.Polygon=[],_t.Circle=[],_t.LineString=[],_t.Point=[]);const Tt=K.getType();if("GeometryCollection"===Tt){const Lt=K.getGeometriesArrayRecursive();for(let Ht=0,$t=Lt.length;Ht<$t;++Ht){const ae=Lt[Ht];_t[ae.getType().replace("Multi","")].push(ae,G)}}else _t[Tt.replace("Multi","")].push(K,G)}}const O=Object.keys(C).map(Number).sort(Q.j2);for(let X=0,$=O.length;X<$;++X){const dt=C[O[X]];for(const B in dt){const k=dt[B];for(let L=0,p=k.length;L<p;L+=2){T.setStyle(k[L+1]);for(let M=0,R=c.length;M<R;++M)T.setTransform(c[M]),T.drawGeometry(k[L])}}}return P.getImageData(0,0,x.width,x.height)}function v(h,c,u){const s=[];if(u){const f=Math.floor(Math.round(h[0])*w),i=Math.floor(Math.round(h[1])*w),l=4*((0,H.uZ)(f,0,u.width-1)+(0,H.uZ)(i,0,u.height-1)*u.width),x=u.data[l+2]+256*(u.data[l+1]+256*u.data[l]),T=Math.floor(16777215/c.length);x&&x%T==0&&s.push(c[x/T-1])}return s}},6555:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>N});var _=r(3044),g=r(1501),Q=r(8975),H=r(513);const N=class j extends Q.Z{constructor(S){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=S,this.declutterExecutorGroup=null}getFeatures(S){return(0,H.O3)()}getData(S){return null}prepareFrame(S){return(0,H.O3)()}renderFrame(S,v){return(0,H.O3)()}loadedTileCallback(S,v,h){S[v]||(S[v]={}),S[v][h.tileCoord.toString()]=h}createLoadedTileFinder(S,v,h){return(c,u)=>{const s=this.loadedTileCallback.bind(this,h,c);return S.forEachLoadedTile(v,c,u,s)}}forEachFeatureAtCoordinate(S,v,h,c,u){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(S){S.target.getState()===g.Z.LOADED&&this.renderIfReadyAndVisible()}loadImage(S){let v=S.getState();return v!=g.Z.LOADED&&v!=g.Z.ERROR&&S.addEventListener(_.Z.CHANGE,this.boundHandleImageChange_),v==g.Z.IDLE&&(S.load(),v=S.getState()),v==g.Z.LOADED}renderIfReadyAndVisible(){const S=this.getLayer();S&&S.getVisible()&&"ready"===S.getSourceState()&&S.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}},8915:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>S});var _=r(6691),g=r(1501),Q=r(9500),H=r(7139),j=r(9543),N=r(9015);const S=class w extends _.Z{constructor(h){super(h),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(h){const c=h.layerStatesArray[h.layerIndex],u=h.pixelRatio,s=h.viewState,f=s.resolution,i=this.getLayer().getSource(),l=h.viewHints;let m=h.extent;if(void 0!==c.extent&&(m=(0,j.Ed)(m,(0,N.dY)(c.extent,s.projection))),!l[Q.Z.ANIMATING]&&!l[Q.Z.INTERACTING]&&!(0,j.xb)(m))if(i){const P=i.getImage(m,f,u,s.projection);P&&(this.loadImage(P)?this.image_=P:P.getState()===g.Z.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(h){const c=this.frameState;if(!c)return null;const u=this.getLayer(),s=(0,H.nn)(c.pixelToCoordinateTransform,h.slice()),f=u.getExtent();if(f&&!(0,j.b8)(f,s))return null;const i=this.image_.getExtent(),l=this.getImage(),m=(0,j.dz)(i),e=Math.floor(l.width*((s[0]-i[0])/m));if(e<0||e>=l.width)return null;const P=(0,j.Cr)(i),x=Math.floor(l.height*((i[3]-s[1])/P));return x<0||x>=l.height?null:this.getImageData(l,e,x)}renderFrame(h,c){const u=this.image_,s=u.getExtent(),f=u.getResolution(),i=u.getPixelRatio(),l=h.layerStatesArray[h.layerIndex],m=h.pixelRatio,e=h.viewState,P=e.center,T=m*f/(e.resolution*i),U=h.extent,D=e.resolution,C=e.rotation,O=Math.round((0,j.dz)(U)/D*m),X=Math.round((0,j.Cr)(U)/D*m);(0,H.qC)(this.pixelTransform,h.size[0]/2,h.size[1]/2,1/m,1/m,C,-O/2,-X/2),(0,H.nb)(this.inversePixelTransform,this.pixelTransform);const $=(0,H.BB)(this.pixelTransform);this.useContainer(c,$,this.getBackground(h));const dt=this.context,B=dt.canvas;B.width!=O||B.height!=X?(B.width=O,B.height=X):this.containerReused||dt.clearRect(0,0,O,X);let k=!1,L=!0;if(l.extent){const G=(0,N.dY)(l.extent,e.projection);L=(0,j.kK)(G,h.extent),k=L&&!(0,j.r4)(G,h.extent),k&&this.clipUnrotated(dt,h,G)}const p=this.getImage(),M=(0,H.qC)(this.tempTransform,O/2,X/2,T,T,0,i*(s[0]-P[0])/f,i*(P[1]-s[3])/f);this.renderedResolution=f*m/i;const R=p.width*M[0],K=p.height*M[3];if(this.getLayer().getSource().getInterpolate()||(dt.imageSmoothingEnabled=!1),this.preRender(dt,h),L&&R>=.5&&K>=.5){const G=M[4],J=M[5],q=l.opacity;let ut;1!==q&&(ut=dt.globalAlpha,dt.globalAlpha=q),dt.drawImage(p,0,0,+p.width,+p.height,G,J,R,K),1!==q&&(dt.globalAlpha=ut)}return this.postRender(dt,h),k&&dt.restore(),dt.imageSmoothingEnabled=!0,$!==B.style.transform&&(B.style.transform=$),this.container}}},6691:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>s,r:()=>v});var _=r(6555),g=r(9683),Q=r(8779),H=r(7139),j=r(866),N=r(3842),w=r(142),S=r(9543);const v=[];let h=null;const s=class u extends _.Z{constructor(i){super(i),this.container=null,this.tempTransform=(0,H.Ue)(),this.pixelTransform=(0,H.Ue)(),this.inversePixelTransform=(0,H.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(i,l,m){let e;h||function c(){h=(0,N.E4)(1,1,void 0,{willReadFrequently:!0})}(),h.clearRect(0,0,1,1);try{h.drawImage(i,l,m,1,1,0,0,1,1),e=h.getImageData(0,0,1,1).data}catch{return h=null,null}return e}getBackground(i){let m=this.getLayer().getBackground();return"function"==typeof m&&(m=m(i.viewState.resolution)),m||void 0}useContainer(i,l,m){const e=this.getLayer().getClassName();let P,x;if(i&&i.className===e&&(!m||i&&i.style.backgroundColor&&(0,w.fS)((0,j._2)(i.style.backgroundColor),(0,j._2)(m)))){const T=i.firstElementChild;T instanceof HTMLCanvasElement&&(x=T.getContext("2d"))}if(x&&x.canvas.style.transform===l?(this.container=i,this.context=x,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){P=document.createElement("div"),P.className=e;let T=P.style;T.position="absolute",T.width="100%",T.height="100%",x=(0,N.E4)();const U=x.canvas;P.appendChild(U),T=U.style,T.position="absolute",T.left="0",T.transformOrigin="top left",this.container=P,this.context=x}!this.containerReused&&m&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=m)}clipUnrotated(i,l,m){const e=(0,S.rL)(m),P=(0,S.Xv)(m),x=(0,S.w$)(m),T=(0,S.hC)(m);(0,H.nn)(l.coordinateToPixelTransform,e),(0,H.nn)(l.coordinateToPixelTransform,P),(0,H.nn)(l.coordinateToPixelTransform,x),(0,H.nn)(l.coordinateToPixelTransform,T);const U=this.inversePixelTransform;(0,H.nn)(U,e),(0,H.nn)(U,P),(0,H.nn)(U,x),(0,H.nn)(U,T),i.save(),i.beginPath(),i.moveTo(Math.round(e[0]),Math.round(e[1])),i.lineTo(Math.round(P[0]),Math.round(P[1])),i.lineTo(Math.round(x[0]),Math.round(x[1])),i.lineTo(Math.round(T[0]),Math.round(T[1])),i.clip()}dispatchRenderEvent_(i,l,m){const e=this.getLayer();if(e.hasListener(i)){const P=new g.Z(i,this.inversePixelTransform,m,l);e.dispatchEvent(P)}}preRender(i,l){this.frameState=l,this.dispatchRenderEvent_(Q.Z.PRERENDER,i,l)}postRender(i,l){this.dispatchRenderEvent_(Q.Z.POSTRENDER,i,l)}getRenderTransform(i,l,m,e,P,x,T){const C=e/l;return(0,H.qC)(this.tempTransform,P/2,x/2,C,-C,-m,-i[0]+T,-i[1])}disposeInternal(){delete this.frameState,super.disposeInternal()}}},6257:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>s});var _=r(6691),g=r(8879),Q=r(4353),H=r(828),j=r(4700),N=r(7139),w=r(142),S=r(9543),v=r(9015),h=r(513),c=r(931);const s=class u extends _.Z{constructor(i){super(i),this.extentChanged=!0,this.renderedExtent_=null,this.renderedProjection=null,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,S.lJ)(),this.tmpTileRange_=new H.Z(0,0,0,0)}isDrawableTile(i){const l=this.getLayer(),m=i.getState(),e=l.getUseInterimTilesOnError();return m==j.Z.LOADED||m==j.Z.EMPTY||m==j.Z.ERROR&&!e}getTile(i,l,m,e){const P=e.pixelRatio,x=e.viewState.projection,T=this.getLayer();let D=T.getSource().getTile(i,l,m,P,x);return D.getState()==j.Z.ERROR&&T.getUseInterimTilesOnError()&&T.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(D)||(D=D.getInterimTile()),D}getData(i){const l=this.frameState;if(!l)return null;const m=this.getLayer(),e=(0,N.nn)(l.pixelToCoordinateTransform,i.slice()),P=m.getExtent();if(P&&!(0,S.b8)(P,e))return null;const x=l.pixelRatio,T=l.viewState.projection,U=l.viewState,D=m.getRenderSource(),C=D.getTileGridForProjection(U.projection),O=D.getTilePixelRatio(l.pixelRatio);for(let X=C.getZForResolution(U.resolution);X>=C.getMinZoom();--X){const $=C.getTileCoordForCoordAndZ(e,X),dt=D.getTile(X,$[1],$[2],x,T);if(!(dt instanceof g.Z||dt instanceof Q.Z)||dt instanceof Q.Z&&dt.getState()===j.Z.EMPTY)return null;if(dt.getState()!==j.Z.LOADED)continue;const B=C.getOrigin(X),k=(0,c.Pq)(C.getTileSize(X)),L=C.getResolution(X),p=Math.floor(O*((e[0]-B[0])/L-$[1]*k[0])),M=Math.floor(O*((B[1]-e[1])/L-$[2]*k[1])),R=Math.round(O*D.getGutterForProjection(U.projection));return this.getImageData(dt.getImage(),p+R,M+R)}return null}loadedTileCallback(i,l,m){return!!this.isDrawableTile(m)&&super.loadedTileCallback(i,l,m)}prepareFrame(i){return!!this.getLayer().getSource()}renderFrame(i,l){const m=i.layerStatesArray[i.layerIndex],e=i.viewState,P=e.projection,x=e.resolution,T=e.center,U=e.rotation,D=i.pixelRatio,C=this.getLayer(),O=C.getSource(),X=O.getRevision(),$=O.getTileGridForProjection(P),dt=$.getZForResolution(x,O.zDirection),B=$.getResolution(dt);let k=i.extent;const L=i.viewState.resolution,p=O.getTilePixelRatio(D),M=Math.round((0,S.dz)(k)/L*D),R=Math.round((0,S.Cr)(k)/L*D),K=m.extent&&(0,v.dY)(m.extent,P);K&&(k=(0,S.Ed)(k,(0,v.dY)(m.extent,P)));const G=B*M/2/p,J=B*R/2/p,q=[T[0]-G,T[1]-J,T[0]+G,T[1]+J],ut=$.getTileRangeForExtentAndZ(k,dt),ht={};ht[dt]={};const _t=this.createLoadedTileFinder(O,P,ht),Tt=this.tmpExtent,Lt=this.tmpTileRange_;this.newTiles_=!1;const Ht=U?(0,S.dY)(e.center,L,U,i.size):void 0;for(let Nt=ut.minX;Nt<=ut.maxX;++Nt)for(let Bt=ut.minY;Bt<=ut.maxY;++Bt){if(U&&!$.tileCoordIntersectsViewport([dt,Nt,Bt],Ht))continue;const ie=this.getTile(dt,Nt,Bt,i);if(this.isDrawableTile(ie)){const Mt=(0,h.sq)(this);if(ie.getState()==j.Z.LOADED){ht[dt][ie.tileCoord.toString()]=ie;let Dt=ie.inTransition(Mt);Dt&&1!==m.opacity&&(ie.endTransition(Mt),Dt=!1),!this.newTiles_&&(Dt||!this.renderedTiles.includes(ie))&&(this.newTiles_=!0)}if(1===ie.getAlpha(Mt,i.time))continue}const Te=$.getTileCoordChildTileRange(ie.tileCoord,Lt,Tt);let he=!1;Te&&(he=_t(dt+1,Te)),he||$.forEachTileCoordParentTileRange(ie.tileCoord,_t,Lt,Tt)}const $t=B/x*D/p;(0,N.qC)(this.pixelTransform,i.size[0]/2,i.size[1]/2,1/D,1/D,U,-M/2,-R/2);const ae=(0,N.BB)(this.pixelTransform);this.useContainer(l,ae,this.getBackground(i));const Qt=this.context,_e=Qt.canvas;(0,N.nb)(this.inversePixelTransform,this.pixelTransform),(0,N.qC)(this.tempTransform,M/2,R/2,$t,$t,0,-M/2,-R/2),_e.width!=M||_e.height!=R?(_e.width=M,_e.height=R):this.containerReused||Qt.clearRect(0,0,M,R),K&&this.clipUnrotated(Qt,i,K),O.getInterpolate()||(Qt.imageSmoothingEnabled=!1),this.preRender(Qt,i),this.renderedTiles.length=0;let xe,Ze,xt,Ce=Object.keys(ht).map(Number);Ce.sort(w.j2),1!==m.opacity||this.containerReused&&!O.getOpaque(i.viewState.projection)?(xe=[],Ze=[]):Ce=Ce.reverse();for(let Nt=Ce.length-1;Nt>=0;--Nt){const Bt=Ce[Nt],ie=O.getTilePixelSize(Bt,D,P),he=$.getResolution(Bt)/B,Mt=ie[0]*he*$t,Dt=ie[1]*he*$t,Kt=$.getTileCoordForCoordAndZ((0,S.rL)(q),Bt),Yt=$.getTileCoordExtent(Kt),Jt=(0,N.nn)(this.tempTransform,[p*(Yt[0]-q[0])/B,p*(q[3]-Yt[3])/B]),ye=p*O.getGutterForProjection(P),Pe=ht[Bt];for(const ze in Pe){const He=Pe[ze],Zt=He.tileCoord,Et=Kt[1]-Zt[1],y=Math.round(Jt[0]-(Et-1)*Mt),z=Kt[2]-Zt[2],st=Math.round(Jt[1]-(z-1)*Dt),it=Math.round(Jt[0]-Et*Mt),vt=Math.round(Jt[1]-z*Dt),Pt=y-it,kt=st-vt,zt=dt===Bt,ee=zt&&1!==He.getAlpha((0,h.sq)(this),i.time);let re=!1;if(!ee)if(xe){xt=[it,vt,it+Pt,vt,it+Pt,vt+kt,it,vt+kt];for(let we=0,ge=xe.length;we<ge;++we)if(dt!==Bt&&Bt<Ze[we]){const oe=xe[we];(0,S.kK)([it,vt,it+Pt,vt+kt],[oe[0],oe[3],oe[4],oe[7]])&&(re||(Qt.save(),re=!0),Qt.beginPath(),Qt.moveTo(xt[0],xt[1]),Qt.lineTo(xt[2],xt[3]),Qt.lineTo(xt[4],xt[5]),Qt.lineTo(xt[6],xt[7]),Qt.moveTo(oe[6],oe[7]),Qt.lineTo(oe[4],oe[5]),Qt.lineTo(oe[2],oe[3]),Qt.lineTo(oe[0],oe[1]),Qt.clip())}xe.push(xt),Ze.push(Bt)}else Qt.clearRect(it,vt,Pt,kt);this.drawTileImage(He,i,it,vt,Pt,kt,ye,zt),xe&&!ee?(re&&Qt.restore(),this.renderedTiles.unshift(He)):this.renderedTiles.push(He),this.updateUsedTiles(i.usedTiles,O,He)}}return this.renderedRevision=X,this.renderedResolution=B,this.extentChanged=!this.renderedExtent_||!(0,S.fS)(this.renderedExtent_,q),this.renderedExtent_=q,this.renderedPixelRatio=D,this.renderedProjection=P,this.manageTilePyramid(i,O,$,D,P,k,dt,C.getPreload()),this.scheduleExpireCache(i,O),this.postRender(Qt,i),m.extent&&Qt.restore(),Qt.imageSmoothingEnabled=!0,ae!==_e.style.transform&&(_e.style.transform=ae),this.container}drawTileImage(i,l,m,e,P,x,T,U){const D=this.getTileImage(i);if(!D)return;const C=(0,h.sq)(this),O=l.layerStatesArray[l.layerIndex],X=O.opacity*(U?i.getAlpha(C,l.time):1),$=X!==this.context.globalAlpha;$&&(this.context.save(),this.context.globalAlpha=X),this.context.drawImage(D,T,T,D.width-2*T,D.height-2*T,m,e,P,x),$&&this.context.restore(),X!==O.opacity?l.animate=!0:U&&i.endTransition(C)}getImage(){const i=this.context;return i?i.canvas:null}getTileImage(i){return i.getImage()}scheduleExpireCache(i,l){if(l.canExpireCache()){const m=function(e,P,x){const T=(0,h.sq)(e);T in x.usedTiles&&e.expireCache(x.viewState.projection,x.usedTiles[T])}.bind(null,l);i.postRenderFunctions.push(m)}}updateUsedTiles(i,l,m){const e=(0,h.sq)(l);e in i||(i[e]={}),i[e][m.getKey()]=!0}manageTilePyramid(i,l,m,e,P,x,T,U,D){const C=(0,h.sq)(l);C in i.wantedTiles||(i.wantedTiles[C]={});const O=i.wantedTiles[C],X=i.tileQueue,$=m.getMinZoom(),dt=i.viewState.rotation,B=dt?(0,S.dY)(i.viewState.center,i.viewState.resolution,dt,i.size):void 0;let L,p,M,R,K,G,k=0;for(G=$;G<=T;++G)for(p=m.getTileRangeForExtentAndZ(x,G,p),M=m.getResolution(G),R=p.minX;R<=p.maxX;++R)for(K=p.minY;K<=p.maxY;++K)dt&&!m.tileCoordIntersectsViewport([G,R,K],B)||(T-G<=U?(++k,L=l.getTile(G,R,K,e,P),L.getState()==j.Z.IDLE&&(O[L.getKey()]=!0,X.isKeyQueued(L.getKey())||X.enqueue([L,C,m.getTileCoordCenter(L.tileCoord),M])),void 0!==D&&D(L)):l.useTile(G,R,K,P));l.updateCacheSize(k,P)}}},2308:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>i});var _=r(7599),g=r(6691),Q=r(1015),H=r(9500),j=r(7713),N=r(7139),w=r(9543),S=r(3842),v=r(7707),h=r(142),c=r(9015),u=r(513),s=r(5415);const i=class f extends g.Z{constructor(m){super(m),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,w.lJ)(),this.wrappedRenderedExtent_=(0,w.lJ)(),this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(m,e,P){const x=e.extent,T=e.viewState,U=T.center,D=T.resolution,C=T.projection,O=T.rotation,X=C.getExtent(),$=this.getLayer().getSource(),dt=e.pixelRatio,B=e.viewHints,k=!(B[H.Z.ANIMATING]||B[H.Z.INTERACTING]),L=this.compositionContext_,p=Math.round(e.size[0]*dt),M=Math.round(e.size[1]*dt),R=$.getWrapX()&&C.canWrapX(),K=R?(0,w.dz)(X):null,G=R?Math.ceil((x[2]-X[2])/K)+1:1;let J=R?Math.floor((x[0]-X[0])/K):0;do{const q=this.getRenderTransform(U,D,O,dt,p,M,J*K);m.execute(L,1,q,O,k,void 0,P)}while(++J<G)}setupCompositionContext_(){if(1!==this.opacity_){const m=(0,S.E4)(this.context.canvas.width,this.context.canvas.height,g.r);this.compositionContext_=m}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const m=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=m,(0,S.jy)(this.compositionContext_),g.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(m){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,m,m.declutterTree),this.releaseCompositionContext_())}renderFrame(m,e){const P=m.pixelRatio,x=m.layerStatesArray[m.layerIndex];(0,N.n3)(this.pixelTransform,1/P,1/P),(0,N.nb)(this.inversePixelTransform,this.pixelTransform);const T=(0,N.BB)(this.pixelTransform);this.useContainer(e,T,this.getBackground(m));const U=this.context,D=U.canvas,C=this.replayGroup_,O=this.declutterExecutorGroup;if((!C||C.isEmpty())&&(!O||O.isEmpty()))return null;const X=Math.round(m.size[0]*P),$=Math.round(m.size[1]*P);D.width!=X||D.height!=$?(D.width=X,D.height=$,D.style.transform!==T&&(D.style.transform=T)):this.containerReused||U.clearRect(0,0,X,$),this.preRender(U,m);const dt=m.viewState,B=dt.projection;this.opacity_=x.opacity,this.setupCompositionContext_();let k=!1,L=!0;if(x.extent&&this.clipping){const p=(0,c.dY)(x.extent,B);L=(0,w.kK)(p,m.extent),k=L&&!(0,w.r4)(p,m.extent),k&&this.clipUnrotated(this.compositionContext_,m,p)}return L&&this.renderWorlds(C,m),k&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(U,m),this.renderedRotation_!==dt.rotation&&(this.renderedRotation_=dt.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(m){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const P=[this.context.canvas.width,this.context.canvas.height];(0,N.nn)(this.pixelTransform,P);const x=this.renderedCenter_,T=this.renderedResolution_,U=this.renderedRotation_,D=this.renderedProjection_,C=this.wrappedRenderedExtent_,O=this.getLayer(),X=[],$=P[0]*j.UN,dt=P[1]*j.UN;X.push(this.getRenderTransform(x,T,U,j.UN,$,dt,0).slice());const B=O.getSource(),k=D.getExtent();if(B.getWrapX()&&D.canWrapX()&&!(0,w.r4)(k,C)){let L=C[0];const p=(0,w.dz)(k);let R,M=0;for(;L<k[0];)--M,R=p*M,X.push(this.getRenderTransform(x,T,U,j.UN,$,dt,R).slice()),L+=p;for(M=0,L=C[2];L>k[2];)++M,R=p*M,X.push(this.getRenderTransform(x,T,U,j.UN,$,dt,R).slice()),L-=p}this.hitDetectionImageData_=(0,j.TU)(P,X,this.renderedFeatures_,O.getStyleFunction(),C,T,U)}e((0,j.ix)(m,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(m,e,P,x,T){if(!this.replayGroup_)return;const U=e.viewState.resolution,D=e.viewState.rotation,C=this.getLayer(),O={},X=function(B,k,L){const p=(0,u.sq)(B),M=O[p];if(M){if(!0!==M&&L<M.distanceSq){if(0===L)return O[p]=!0,T.splice(T.lastIndexOf(M),1),x(B,C,k);M.geometry=k,M.distanceSq=L}}else{if(0===L)return O[p]=!0,x(B,C,k);T.push(O[p]={feature:B,layer:C,geometry:k,distanceSq:L,callback:x})}};let $;const dt=[this.replayGroup_];return this.declutterExecutorGroup&&dt.push(this.declutterExecutorGroup),dt.some(B=>$=B.forEachFeatureAtCoordinate(m,U,D,P,X,B===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(k=>k.value):null)),$}handleFontsChanged(){const m=this.getLayer();m.getVisible()&&this.replayGroup_&&m.changed()}handleStyleImageChange_(m){this.renderIfReadyAndVisible()}prepareFrame(m){const e=this.getLayer(),P=e.getSource();if(!P)return!1;const x=m.viewHints[H.Z.ANIMATING],T=m.viewHints[H.Z.INTERACTING],U=e.getUpdateWhileAnimating(),D=e.getUpdateWhileInteracting();if(this.ready&&!U&&x||!D&&T)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const C=m.extent,O=m.viewState,X=O.projection,$=O.resolution,dt=m.pixelRatio,B=e.getRevision(),k=e.getRenderBuffer();let L=e.getRenderOrder();void 0===L&&(L=v.eR);const p=O.center.slice(),M=(0,w.f3)(C,k*$),R=M.slice(),K=[M.slice()],G=X.getExtent();if(P.getWrapX()&&X.canWrapX()&&!(0,w.r4)(G,m.extent)){const _e=(0,w.dz)(G),Ce=Math.max((0,w.dz)(M)/2,_e);M[0]=G[0]-Ce,M[2]=G[2]+Ce,(0,s.Cf)(p,X);const xe=(0,w.Cf)(K[0],X);xe[0]<G[0]&&xe[2]<G[2]?K.push([xe[0]+_e,xe[1],xe[2]+_e,xe[3]]):xe[0]>G[0]&&xe[2]>G[2]&&K.push([xe[0]-_e,xe[1],xe[2]-_e,xe[3]])}if(this.ready&&this.renderedResolution_==$&&this.renderedRevision_==B&&this.renderedRenderOrder_==L&&(0,w.r4)(this.wrappedRenderedExtent_,M))return(0,h.fS)(this.renderedExtent_,R)||(this.hitDetectionImageData_=null,this.renderedExtent_=R),this.renderedCenter_=p,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const J=new _.Z((0,v.Qz)($,dt),M,$,dt);let q;this.getLayer().getDeclutter()&&(q=new _.Z((0,v.Qz)($,dt),M,$,dt));const ut=(0,c.Cs)();let ht;if(ut){for(let _e=0,Ce=K.length;_e<Ce;++_e){const Ze=(0,c.Fj)(K[_e],X);P.loadFeatures(Ze,(0,c.on)($,X),ut)}ht=(0,c.WO)(ut,X)}else for(let _e=0,Ce=K.length;_e<Ce;++_e)P.loadFeatures(K[_e],$,X);const _t=(0,v.se)($,dt);let Tt=!0;const Lt=_e=>{let Ce;const xe=_e.getStyleFunction()||e.getStyleFunction();if(xe&&(Ce=xe(_e,$)),Ce){const Ze=this.renderFeature(_e,_t,Ce,J,ht,q);Tt=Tt&&!Ze}},Ht=(0,c.Fj)(M,X),$t=P.getFeaturesInExtent(Ht);L&&$t.sort(L);for(let _e=0,Ce=$t.length;_e<Ce;++_e)Lt($t[_e]);this.renderedFeatures_=$t,this.ready=Tt;const ae=J.finish(),Qt=new Q.Z(M,$,dt,P.getOverlaps(),ae,e.getRenderBuffer());return q&&(this.declutterExecutorGroup=new Q.Z(M,$,dt,P.getOverlaps(),q.finish(),e.getRenderBuffer())),this.renderedResolution_=$,this.renderedRevision_=B,this.renderedRenderOrder_=L,this.renderedExtent_=R,this.wrappedRenderedExtent_=M,this.renderedCenter_=p,this.renderedProjection_=X,this.replayGroup_=Qt,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(m,e,P,x,T,U){if(!P)return!1;let D=!1;if(Array.isArray(P))for(let C=0,O=P.length;C<O;++C)D=(0,v.Pn)(x,m,P[C],e,this.boundHandleStyleImageChange_,T,U)||D;else D=(0,v.Pn)(x,m,P,e,this.boundHandleStyleImageChange_,T,U);return D}}},7707:(Vt,gt,r)=>{"use strict";r.d(gt,{Pn:()=>v,Qz:()=>w,eR:()=>j,se:()=>N});var _=r(1501),g=r(513);const H={Point:function l(P,x,T,U,D){const C=T.getImage(),O=T.getText();let X;if(C){if(C.getImageState()!=_.Z.LOADED)return;let $=P;if(D){const B=C.getDeclutterMode();if("none"!==B)if($=D,"obstacle"===B){const k=P.getBuilder(T.getZIndex(),"Image");k.setImageStyle(C,X),k.drawPoint(x,U)}else O&&O.getText()&&(X={})}const dt=$.getBuilder(T.getZIndex(),"Image");dt.setImageStyle(C,X),dt.drawPoint(x,U)}if(O&&O.getText()){let $=P;D&&($=D);const dt=$.getBuilder(T.getZIndex(),"Text");dt.setTextStyle(O,X),dt.drawText(x,U)}},LineString:function s(P,x,T,U,D){const C=T.getStroke();if(C){const X=P.getBuilder(T.getZIndex(),"LineString");X.setFillStrokeStyle(null,C),X.drawLineString(x,U)}const O=T.getText();if(O&&O.getText()){const X=(D||P).getBuilder(T.getZIndex(),"Text");X.setTextStyle(O),X.drawText(x,U)}},Polygon:function e(P,x,T,U,D){const C=T.getFill(),O=T.getStroke();if(C||O){const $=P.getBuilder(T.getZIndex(),"Polygon");$.setFillStrokeStyle(C,O),$.drawPolygon(x,U)}const X=T.getText();if(X&&X.getText()){const $=(D||P).getBuilder(T.getZIndex(),"Text");$.setTextStyle(X),$.drawText(x,U)}},MultiPoint:function m(P,x,T,U,D){const C=T.getImage(),O=T.getText();let X;if(C){if(C.getImageState()!=_.Z.LOADED)return;let $=P;if(D){const B=C.getDeclutterMode();if("none"!==B)if($=D,"obstacle"===B){const k=P.getBuilder(T.getZIndex(),"Image");k.setImageStyle(C,X),k.drawMultiPoint(x,U)}else O&&O.getText()&&(X={})}const dt=$.getBuilder(T.getZIndex(),"Image");dt.setImageStyle(C,X),dt.drawMultiPoint(x,U)}if(O&&O.getText()){let $=P;D&&($=D);const dt=$.getBuilder(T.getZIndex(),"Text");dt.setTextStyle(O,X),dt.drawText(x,U)}},MultiLineString:function f(P,x,T,U,D){const C=T.getStroke();if(C){const X=P.getBuilder(T.getZIndex(),"LineString");X.setFillStrokeStyle(null,C),X.drawMultiLineString(x,U)}const O=T.getText();if(O&&O.getText()){const X=(D||P).getBuilder(T.getZIndex(),"Text");X.setTextStyle(O),X.drawText(x,U)}},MultiPolygon:function i(P,x,T,U,D){const C=T.getFill(),O=T.getStroke();if(O||C){const $=P.getBuilder(T.getZIndex(),"Polygon");$.setFillStrokeStyle(C,O),$.drawMultiPolygon(x,U)}const X=T.getText();if(X&&X.getText()){const $=(D||P).getBuilder(T.getZIndex(),"Text");$.setTextStyle(X),$.drawText(x,U)}},GeometryCollection:function u(P,x,T,U,D){const C=x.getGeometriesArray();let O,X;for(O=0,X=C.length;O<X;++O)(0,H[C[O].getType()])(P,C[O],T,U,D)},Circle:function S(P,x,T,U,D){const C=T.getFill(),O=T.getStroke();if(C||O){const $=P.getBuilder(T.getZIndex(),"Circle");$.setFillStrokeStyle(C,O),$.drawCircle(x,U)}const X=T.getText();if(X&&X.getText()){const $=(D||P).getBuilder(T.getZIndex(),"Text");$.setTextStyle(X),$.drawText(x,U)}}};function j(P,x){return parseInt((0,g.sq)(P),10)-parseInt((0,g.sq)(x),10)}function N(P,x){const T=w(P,x);return T*T}function w(P,x){return.5*P/x}function v(P,x,T,U,D,C,O){let X=!1;const $=T.getImage();if($){const dt=$.getImageState();dt==_.Z.LOADED||dt==_.Z.ERROR?$.unlistenImageChange(D):(dt==_.Z.IDLE&&$.load(),$.listenImageChange(D),X=!0)}return function h(P,x,T,U,D,C){const O=T.getGeometryFunction()(x);if(!O)return;const X=O.simplifyTransformed(U,D);T.getRenderer()?c(P,X,T,x):(0,H[X.getType()])(P,X,T,x,C)}(P,x,T,U,C,O),X}function c(P,x,T,U){if("GeometryCollection"!=x.getType())P.getBuilder(T.getZIndex(),"Default").drawCustom(x,U,T.getRenderer(),T.getHitDetectionRenderer());else{const C=x.getGeometries();for(let O=0,X=C.length;O<X;++O)c(P,C[O],T,U)}}},5114:(Vt,gt,r)=>{"use strict";r.d(gt,{Co:()=>c,aA:()=>h,rX:()=>N,sY:()=>u});var _=r(9543),g=r(3842),Q=r(9015),H=r(4331);let j;const N=[];function w(s,f,i,l,m){s.beginPath(),s.moveTo(0,0),s.lineTo(f,i),s.lineTo(l,m),s.closePath(),s.save(),s.clip(),s.fillRect(0,0,Math.max(f,l)+1,Math.max(i,m)),s.restore()}function S(s,f){return Math.abs(s[4*f]-210)>2||Math.abs(s[4*f+3]-191.25)>2}function h(s,f,i,l){const m=(0,Q.vs)(i,f,s);let e=(0,Q._Q)(f,l,i);const P=f.getMetersPerUnit();void 0!==P&&(e*=P);const x=s.getMetersPerUnit();void 0!==x&&(e/=x);const T=s.getExtent();if(!T||(0,_.b8)(T,m)){const U=(0,Q._Q)(s,e,m)/e;isFinite(U)&&U>0&&(e/=U)}return e}function c(s,f,i,l){const m=(0,_.qg)(i);let e=h(s,f,m,l);return(!isFinite(e)||e<=0)&&(0,_.H6)(i,function(P){return e=h(s,f,P,l),isFinite(e)&&e>0}),e}function u(s,f,i,l,m,e,P,x,T,U,D,C){const O=(0,g.E4)(Math.round(i*s),Math.round(i*f),N);if(C||(O.imageSmoothingEnabled=!1),0===T.length)return O.canvas;function X(M){return Math.round(M*i)/i}O.scale(i,i),O.globalCompositeOperation="lighter";const $=(0,_.lJ)();T.forEach(function(M,R,K){(0,_.l7)($,M.extent)});const dt=(0,_.dz)($),B=(0,_.Cr)($),k=(0,g.E4)(Math.round(i*dt/l),Math.round(i*B/l),N);C||(k.imageSmoothingEnabled=!1);const L=i/l;T.forEach(function(M,R,K){const G=M.extent[0]-$[0],J=-(M.extent[3]-$[3]),q=(0,_.dz)(M.extent),ut=(0,_.Cr)(M.extent);M.image.width>0&&M.image.height>0&&k.drawImage(M.image,U,U,M.image.width-2*U,M.image.height-2*U,G*L,J*L,q*L,ut*L)});const p=(0,_.rL)(P);return x.getTriangles().forEach(function(M,R,K){const G=M.source,J=M.target;let q=G[0][0],ut=G[0][1],ht=G[1][0],_t=G[1][1],Tt=G[2][0],Lt=G[2][1];const Ht=X((J[0][0]-p[0])/e),$t=X(-(J[0][1]-p[1])/e),ae=X((J[1][0]-p[0])/e),Qt=X(-(J[1][1]-p[1])/e),_e=X((J[2][0]-p[0])/e),Ce=X(-(J[2][1]-p[1])/e),xe=q,Ze=ut;q=0,ut=0,ht-=xe,_t-=Ze,Tt-=xe,Lt-=Ze;const Nt=(0,H.SV)([[ht,_t,0,0,ae-Ht],[Tt,Lt,0,0,_e-Ht],[0,0,ht,_t,Qt-$t],[0,0,Tt,Lt,Ce-$t]]);if(Nt){if(O.save(),O.beginPath(),function v(){if(void 0===j){const s=(0,g.E4)(6,6,N);s.globalCompositeOperation="lighter",s.fillStyle="rgba(210, 0, 0, 0.75)",w(s,4,5,4,0),w(s,4,5,0,5);const f=s.getImageData(0,0,3,3).data;j=S(f,0)||S(f,4)||S(f,8),(0,g.jy)(s),N.push(s.canvas)}return j}()||!C){O.moveTo(ae,Qt);const Bt=4,ie=Ht-ae,Te=$t-Qt;for(let he=0;he<Bt;he++)O.lineTo(ae+X((he+1)*ie/Bt),Qt+X(he*Te/(Bt-1))),he!=Bt-1&&O.lineTo(ae+X((he+1)*ie/Bt),Qt+X((he+1)*Te/(Bt-1)));O.lineTo(_e,Ce)}else O.moveTo(ae,Qt),O.lineTo(Ht,$t),O.lineTo(_e,Ce);O.clip(),O.transform(Nt[0],Nt[2],Nt[1],Nt[3],Ht,$t),O.translate($[0]-xe,$[3]-Ze),O.scale(l/i,-l/i),O.drawImage(k.canvas,0,0),O.restore()}}),(0,g.jy)(k),N.push(k.canvas),D&&(O.save(),O.globalCompositeOperation="source-over",O.strokeStyle="black",O.lineWidth=1,x.getTriangles().forEach(function(M,R,K){const G=M.target,J=(G[0][0]-p[0])/e,q=-(G[0][1]-p[1])/e,ut=(G[1][0]-p[0])/e,ht=-(G[1][1]-p[1])/e,_t=(G[2][0]-p[0])/e,Tt=-(G[2][1]-p[1])/e;O.beginPath(),O.moveTo(ut,ht),O.lineTo(J,q),O.lineTo(_t,Tt),O.closePath(),O.stroke()}),O.restore()),O.canvas}},4353:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>u});var _=r(3094),g=r(3044),Q=r(8786),H=r(4700),j=r(6887),N=r(5114),w=r(4331),S=r(9543),v=r(2716),h=r(3842);const u=class c extends Q.Z{constructor(f,i,l,m,e,P,x,T,U,D,C,O){super(e,H.Z.IDLE,{interpolate:!!O}),this.renderEdges_=void 0!==C&&C,this.pixelRatio_=x,this.gutter_=T,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=m,this.wrappedTileCoord_=P||e,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const X=m.getTileCoordExtent(this.wrappedTileCoord_),$=this.targetTileGrid_.getExtent();let dt=this.sourceTileGrid_.getExtent();const B=$?(0,S.Ed)(X,$):X;if(0===(0,S.bg)(B))return void(this.state=H.Z.EMPTY);const k=f.getExtent();k&&(dt=dt?(0,S.Ed)(dt,k):k);const L=m.getResolution(this.wrappedTileCoord_[0]),p=(0,N.Co)(f,l,B,L);if(!isFinite(p)||p<=0)return void(this.state=H.Z.EMPTY);if(this.triangulation_=new j.Z(f,l,B,dt,p*(void 0!==D?D:_.m),L),0===this.triangulation_.getTriangles().length)return void(this.state=H.Z.EMPTY);this.sourceZ_=i.getZForResolution(p);let R=this.triangulation_.calculateSourceExtent();if(dt&&(f.canWrapX()?(R[1]=(0,w.uZ)(R[1],dt[1],dt[3]),R[3]=(0,w.uZ)(R[3],dt[1],dt[3])):R=(0,S.Ed)(R,dt)),(0,S.bg)(R)){const K=i.getTileRangeForExtentAndZ(R,this.sourceZ_);for(let G=K.minX;G<=K.maxX;G++)for(let J=K.minY;J<=K.maxY;J++){const q=U(this.sourceZ_,G,J,x);q&&this.sourceTiles_.push(q)}0===this.sourceTiles_.length&&(this.state=H.Z.EMPTY)}else this.state=H.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const f=[];if(this.sourceTiles_.forEach(i=>{i&&i.getState()==H.Z.LOADED&&f.push({extent:this.sourceTileGrid_.getTileCoordExtent(i.tileCoord),image:i.getImage()})}),this.sourceTiles_.length=0,0===f.length)this.state=H.Z.ERROR;else{const i=this.wrappedTileCoord_[0],l=this.targetTileGrid_.getTileSize(i),m="number"==typeof l?l:l[0],e="number"==typeof l?l:l[1],P=this.targetTileGrid_.getResolution(i),x=this.sourceTileGrid_.getResolution(this.sourceZ_),T=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,N.sY)(m,e,this.pixelRatio_,x,this.sourceTileGrid_.getExtent(),P,T,this.triangulation_,f,this.gutter_,this.renderEdges_,this.interpolate),this.state=H.Z.LOADED}this.changed()}load(){if(this.state==H.Z.IDLE){this.state=H.Z.LOADING,this.changed();let f=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(i=>{const l=i.getState();if(l==H.Z.IDLE||l==H.Z.LOADING){f++;const m=(0,v.oL)(i,g.Z.CHANGE,function(e){const P=i.getState();(P==H.Z.LOADED||P==H.Z.ERROR||P==H.Z.EMPTY)&&((0,v.bN)(m),f--,0===f&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(m)}}),0===f?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(i,l,m){i.getState()==H.Z.IDLE&&i.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(v.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,h.jy)(this.canvas_.getContext("2d")),N.rX.push(this.canvas_),this.canvas_=null),super.release()}}},6887:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>w});var _=r(9543),g=r(9015),Q=r(4331);const w=class N{constructor(v,h,c,u,s,f){this.sourceProj_=v,this.targetProj_=h;let i={};const l=(0,g.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(X){const $=X[0]+"/"+X[1];return i[$]||(i[$]=l(X)),i[$]},this.maxSourceExtent_=u,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!u&&!!this.sourceProj_.getExtent()&&(0,_.dz)(u)==(0,_.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,_.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,_.dz)(this.targetProj_.getExtent()):null;const m=(0,_.rL)(c),e=(0,_.Xv)(c),P=(0,_.w$)(c),x=(0,_.hC)(c),T=this.transformInv_(m),U=this.transformInv_(e),D=this.transformInv_(P),C=this.transformInv_(x),O=10+(f?Math.max(0,Math.ceil(Math.log2((0,_.bg)(c)/(f*f*256*256)))):0);if(this.addQuad_(m,e,P,x,T,U,D,C,O),this.wrapsXInSource_){let X=1/0;this.triangles_.forEach(function($,dt,B){X=Math.min(X,$.source[0][0],$.source[1][0],$.source[2][0])}),this.triangles_.forEach($=>{if(Math.max($.source[0][0],$.source[1][0],$.source[2][0])-X>this.sourceWorldWidth_/2){const dt=[[$.source[0][0],$.source[0][1]],[$.source[1][0],$.source[1][1]],[$.source[2][0],$.source[2][1]]];dt[0][0]-X>this.sourceWorldWidth_/2&&(dt[0][0]-=this.sourceWorldWidth_),dt[1][0]-X>this.sourceWorldWidth_/2&&(dt[1][0]-=this.sourceWorldWidth_),dt[2][0]-X>this.sourceWorldWidth_/2&&(dt[2][0]-=this.sourceWorldWidth_);const B=Math.min(dt[0][0],dt[1][0],dt[2][0]);Math.max(dt[0][0],dt[1][0],dt[2][0])-B<this.sourceWorldWidth_/2&&($.source=dt)}})}i={}}addTriangle_(v,h,c,u,s,f){this.triangles_.push({source:[u,s,f],target:[v,h,c]})}addQuad_(v,h,c,u,s,f,i,l,m){const e=(0,_.hI)([s,f,i,l]),P=this.sourceWorldWidth_?(0,_.dz)(e)/this.sourceWorldWidth_:null,x=this.sourceWorldWidth_,T=this.sourceProj_.canWrapX()&&P>.5&&P<1;let U=!1;if(m>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const C=(0,_.hI)([v,h,c,u]);U=(0,_.dz)(C)/this.targetWorldWidth_>.25||U}!T&&this.sourceProj_.isGlobal()&&P&&(U=P>.25||U)}if(!U&&this.maxSourceExtent_&&isFinite(e[0])&&isFinite(e[1])&&isFinite(e[2])&&isFinite(e[3])&&!(0,_.kK)(e,this.maxSourceExtent_))return;let D=0;if(!(U||isFinite(s[0])&&isFinite(s[1])&&isFinite(f[0])&&isFinite(f[1])&&isFinite(i[0])&&isFinite(i[1])&&isFinite(l[0])&&isFinite(l[1])))if(m>0)U=!0;else if(D=(isFinite(s[0])&&isFinite(s[1])?0:8)+(isFinite(f[0])&&isFinite(f[1])?0:4)+(isFinite(i[0])&&isFinite(i[1])?0:2)+(isFinite(l[0])&&isFinite(l[1])?0:1),1!=D&&2!=D&&4!=D&&8!=D)return;if(m>0){if(!U){const O=this.transformInv_([(v[0]+c[0])/2,(v[1]+c[1])/2]);let X;X=T?((0,Q.$W)(s[0],x)+(0,Q.$W)(i[0],x))/2-(0,Q.$W)(O[0],x):(s[0]+i[0])/2-O[0];const $=(s[1]+i[1])/2-O[1];U=X*X+$*$>this.errorThresholdSquared_}if(U){if(Math.abs(v[0]-c[0])<=Math.abs(v[1]-c[1])){const C=[(h[0]+c[0])/2,(h[1]+c[1])/2],O=this.transformInv_(C),X=[(u[0]+v[0])/2,(u[1]+v[1])/2],$=this.transformInv_(X);this.addQuad_(v,h,C,X,s,f,O,$,m-1),this.addQuad_(X,C,c,u,$,O,i,l,m-1)}else{const C=[(v[0]+h[0])/2,(v[1]+h[1])/2],O=this.transformInv_(C),X=[(c[0]+u[0])/2,(c[1]+u[1])/2],$=this.transformInv_(X);this.addQuad_(v,C,X,u,s,O,$,l,m-1),this.addQuad_(C,h,c,X,O,f,i,$,m-1)}return}}if(T){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&D)&&this.addTriangle_(v,c,u,s,i,l),0==(14&D)&&this.addTriangle_(v,c,h,s,i,f),D&&(0==(13&D)&&this.addTriangle_(h,u,v,f,l,s),0==(7&D)&&this.addTriangle_(h,u,c,f,l,i))}calculateSourceExtent(){const v=(0,_.lJ)();return this.triangles_.forEach(function(h,c,u){const s=h.source;(0,_.Wj)(v,s[0]),(0,_.Wj)(v,s[1]),(0,_.Wj)(v,s[2])}),v}getTriangles(){return this.triangles_}}},3094:(Vt,gt,r)=>{"use strict";r.d(gt,{m:()=>_});const _=.5},7011:(Vt,gt,r)=>{"use strict";r.d(gt,{Gw:()=>j,YP:()=>Q,gE:()=>H,h$:()=>g});var _=r(4331);function g(N){if(void 0!==N)return 0}function Q(N){if(void 0!==N)return N}function H(N){const w=2*Math.PI/N;return function(S,v){return v?S:void 0!==S?S=Math.floor(S/w+.5)*w:void 0}}function j(N){return N=N||(0,_.Yr)(5),function(w,S){return S?w:void 0!==w?Math.abs(w)<=N?0:w:void 0}}},931:(Vt,gt,r)=>{"use strict";function _(j,N,w){return void 0===w&&(w=[0,0]),w[0]=j[0]+2*N,w[1]=j[1]+2*N,w}function g(j){return j[0]>0&&j[1]>0}function Q(j,N,w){return void 0===w&&(w=[0,0]),w[0]=j[0]*N+.5|0,w[1]=j[1]*N+.5|0,w}function H(j,N){return Array.isArray(j)?j:(void 0===N?N=[j,j]:(N[0]=j,N[1]=j),N)}r.d(gt,{Pq:()=>H,bA:()=>Q,f3:()=>_,py:()=>g})},2663:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>h});var _=r(3044),g=r(3413),Q=r(7026),H=r(3149),j=r(5415),N=r(992),w=r(9543),S=r(513);const h=class v extends H.Z{constructor(u){super({attributions:u.attributions,wrapX:u.wrapX}),this.resolution=void 0,this.distance=void 0!==u.distance?u.distance:20,this.minDistance=u.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=u.geometryFunction||function(s){const f=s.getGeometry();return(0,N.h)("Point"==f.getType(),10),f},this.createCustomCluster_=u.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(u.source||null)}clear(u){this.features.length=0,super.clear(u)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(u,s,f){this.source.loadFeatures(u,s,f),s!==this.resolution&&(this.resolution=s,this.refresh())}setDistance(u){this.updateDistance(u,this.minDistance)}setMinDistance(u){this.updateDistance(this.distance,u)}getMinDistance(){return this.minDistance}setSource(u){this.source&&this.source.removeEventListener(_.Z.CHANGE,this.boundRefresh_),this.source=u,u&&u.addEventListener(_.Z.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(u,s){const f=0===u?0:Math.min(s,u)/u,i=u!==this.distance||this.interpolationRatio!==f;this.distance=u,this.minDistance=s,this.interpolationRatio=f,i&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return;const u=(0,w.lJ)(),s=this.distance*this.resolution,f=this.source.getFeatures(),i={};for(let l=0,m=f.length;l<m;l++){const e=f[l];if(!((0,S.sq)(e)in i)){const P=this.geometryFunction(e);if(P){const x=P.getCoordinates();(0,w.HK)(x,u),(0,w.f3)(u,s,u);const T=this.source.getFeaturesInExtent(u).filter(function(U){const D=(0,S.sq)(U);return!(D in i)&&(i[D]=!0,!0)});this.features.push(this.createCluster(T,u))}}}}createCluster(u,s){const f=[0,0];for(let e=u.length-1;e>=0;--e){const P=this.geometryFunction(u[e]);P?(0,j.IH)(f,P.getCoordinates()):u.splice(e,1)}(0,j.bA)(f,1/u.length);const i=(0,w.qg)(s),l=this.interpolationRatio,m=new Q.Z([f[0]*(1-l)+i[0]*l,f[1]*(1-l)+i[1]*l]);return this.createCustomCluster_?this.createCustomCluster_(m,u):new g.Z({geometry:m,features:u})}}},9375:(Vt,gt,r)=>{"use strict";r.d(gt,{ZP:()=>x,r6:()=>P});var _=r(3615),g=r(1501),Q=r(3094),H=r(3044),j=r(1649),N=r(6887),w=r(5114),S=r(9543),v=r(2716);const c=class h extends j.Z{constructor(U,D,C,O,X,$,dt){const B=U.getExtent(),k=D.getExtent(),L=k?(0,S.Ed)(C,k):C,p=(0,S.qg)(L),M=(0,w.aA)(U,D,p,O),K=new N.Z(U,D,L,B,M*Q.m,O),J=$(K.calculateSourceExtent(),M,X),q=J?g.Z.IDLE:g.Z.EMPTY,ut=J?J.getPixelRatio():1;super(C,O,ut,q),this.targetProj_=D,this.maxSourceExtent_=B,this.triangulation_=K,this.targetResolution_=O,this.targetExtent_=C,this.sourceImage_=J,this.sourcePixelRatio_=ut,this.interpolate_=dt,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==g.Z.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const U=this.sourceImage_.getState();if(U==g.Z.LOADED){const D=(0,S.dz)(this.targetExtent_)/this.targetResolution_,C=(0,S.Cr)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,w.sY)(D,C,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=U,this.changed()}load(){if(this.state==g.Z.IDLE){this.state=g.Z.LOADING,this.changed();const U=this.sourceImage_.getState();U==g.Z.LOADED||U==g.Z.ERROR?this.reproject_():(this.sourceListenerKey_=(0,v.oL)(this.sourceImage_,H.Z.CHANGE,function(D){const C=this.sourceImage_.getState();(C==g.Z.LOADED||C==g.Z.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){(0,v.bN)(this.sourceListenerKey_),this.sourceListenerKey_=null}};var u=r(2673),s=r(513),f=r(9015),i=r(142);class m extends _.ZP{constructor(U,D){super(U),this.image=D}}function P(T,U){T.getImage().src=U}const x=class e extends u.Z{constructor(U){super({attributions:U.attributions,projection:U.projection,state:U.state,interpolate:void 0===U.interpolate||U.interpolate}),this.resolutions_=void 0!==U.resolutions?U.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(U){this.resolutions_=U}findNearestResolution(U){const D=this.getResolutions();return D&&(U=D[(0,i.h7)(D,U,0)]),U}getImage(U,D,C,O){const X=this.getProjection();if(!X||!O||(0,f.OP)(X,O))return X&&(O=X),this.getImageInternal(U,D,C,O);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,f.OP)(this.reprojectedImage_.getProjection(),O)&&this.reprojectedImage_.getResolution()==D&&(0,S.fS)(this.reprojectedImage_.getExtent(),U))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new c(X,O,U,D,C,($,dt,B)=>this.getImageInternal($,dt,B,X),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(U,D,C,O){return(0,s.O3)()}handleImageChange(U){const D=U.target;let C;switch(D.getState()){case g.Z.LOADING:this.loading=!0,C="imageloadstart";break;case g.Z.LOADED:this.loading=!1,C="imageloadend";break;case g.Z.ERROR:this.loading=!1,C="imageloaderror";break;default:return}this.hasListener(C)&&this.dispatchEvent(new m(C,D))}}},6819:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>l});var _=r(3044),g=r(9375),Q=r(1309),H=r(4910),j=r(6941),N=r(992),w=r(5114),S=r(4331),v=r(7531),h=r(9543),c=r(3842),u=r(9015);const f=[101,101],l=class i extends g.ZP{constructor(e){super({attributions:(e=e||{}).attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.context_=(0,c.E4)(1,1),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:g.r6,this.params_=Object.assign({},e.params),this.v13_=!0,this.updateV13_(),this.serverType_=e.serverType,this.hidpi_=void 0===e.hidpi||e.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5}getFeatureInfoUrl(e,P,x,T){if(void 0===this.url_)return;const U=(0,u.U2)(x),D=this.getProjection();D&&D!==U&&(P=(0,w.aA)(D,U,e,P),e=(0,u.vs)(e,U,D));const C=(0,h.p8)(e,P,0,f),O={SERVICE:"WMS",VERSION:H.e,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(O,this.params_,T);const X=(0,S.GW)((e[0]-C[0])/P,4),$=(0,S.GW)((C[3]-e[1])/P,4);return O[this.v13_?"I":"X"]=X,O[this.v13_?"J":"Y"]=$,this.getRequestUrl_(C,f,1,D||U,O)}getLegendUrl(e,P){if(void 0===this.url_)return;const x={SERVICE:"WMS",VERSION:H.e,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===P||void 0===P.LAYER){const T=this.params_.LAYERS;if(Array.isArray(T)&&1!==T.length)return;x.LAYER=T}if(void 0!==e){const T=this.getProjection()?this.getProjection().getMetersPerUnit():1;x.SCALE=e*T/28e-5}return Object.assign(x,P),(0,j.B)(this.url_,x)}getParams(){return this.params_}getImageInternal(e,P,x,T){if(void 0===this.url_)return null;P=this.findNearestResolution(P),1!=x&&(!this.hidpi_||void 0===this.serverType_)&&(x=1);const U=P/x,D=(0,h.qg)(e),C=(0,S.mD)((0,h.dz)(e)/U,4),O=(0,S.mD)((0,h.Cr)(e)/U,4),X=(0,h.p8)(D,U,0,[C,O]),$=(0,S.mD)(this.ratio_*(0,h.dz)(e)/U,4),dt=(0,S.mD)(this.ratio_*(0,h.Cr)(e)/U,4),B=(0,h.p8)(D,U,0,[$,dt]),k=this.image_;if(k&&this.renderedRevision_==this.getRevision()&&k.getResolution()==P&&k.getPixelRatio()==x&&(0,h.r4)(k.getExtent(),X))return k;const L={SERVICE:"WMS",VERSION:H.e,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(L,this.params_),this.imageSize_[0]=(0,S.NM)((0,h.dz)(B)/U,4),this.imageSize_[1]=(0,S.NM)((0,h.Cr)(B)/U,4);const p=this.getRequestUrl_(B,this.imageSize_,x,T,L);return this.image_=new Q.Z(B,P,x,p,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(_.Z.CHANGE,this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(e,P,x,T,U){if((0,N.h)(void 0!==this.url_,9),U[this.v13_?"CRS":"SRS"]=T.getCode(),"STYLES"in this.params_||(U.STYLES=""),1!=x)switch(this.serverType_){case"geoserver":const O=90*x+.5|0;"FORMAT_OPTIONS"in U?U.FORMAT_OPTIONS+=";dpi:"+O:U.FORMAT_OPTIONS="dpi:"+O;break;case"mapserver":U.MAP_RESOLUTION=90*x;break;case"carmentaserver":case"qgis":U.DPI=90*x;break;default:(0,N.h)(!1,8)}U.WIDTH=P[0],U.HEIGHT=P[1];const D=T.getAxisOrientation();let C;return C=this.v13_&&"ne"==D.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,U.BBOX=C.join(","),(0,j.B)(this.url_,U)}getUrl(){return this.url_}setImageLoadFunction(e){this.image_=null,this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.image_=null,this.changed()}updateV13_(){this.v13_=(0,v.n)(this.params_.VERSION||H.e,"1.3")>=0}}},7274:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>H});var _=r(6290);const H=class Q extends _.Z{constructor(N){let w;w=void 0!==(N=N||{}).attributions?N.attributions:['&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.'],super({attributions:w,attributionsCollapsible:!1,cacheSize:N.cacheSize,crossOrigin:void 0!==N.crossOrigin?N.crossOrigin:"anonymous",interpolate:N.interpolate,maxZoom:void 0!==N.maxZoom?N.maxZoom:19,opaque:void 0===N.opaque||N.opaque,reprojectionErrorThreshold:N.reprojectionErrorThreshold,tileLoadFunction:N.tileLoadFunction,transition:N.transition,url:void 0!==N.url?N.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:N.wrapX,zDirection:N.zDirection})}}},524:(Vt,gt,r)=>{"use strict";r.d(gt,{ZP:()=>k});var _=r(6450),g=r(3615),Q=r(3044),H=r(443),j=r(6906),N=r(9375),w=r(2673),S=r(993),v=r(2988),h=r(6027),c=r(3842),u=r(7139),s=r(9543),f=r(513);let l,i=!0;try{new ImageData(10,10)}catch{i=!1}function e(L){let p=!0;try{new ImageData(10,10)}catch{p=!1}function M(R,K,G){return p?new ImageData(R,K,G):{data:R,width:K,height:G}}return function(R){const K=R.buffers,G=R.meta,q=R.width,ut=R.height,ht=K.length,_t=K[0].byteLength;if(R.imageOps){const $t=new Array(ht);for(let Qt=0;Qt<ht;++Qt)$t[Qt]=M(new Uint8ClampedArray(K[Qt]),q,ut);return L($t,G).data.buffer}const Tt=new Uint8ClampedArray(_t),Lt=new Array(ht),Ht=new Array(ht);for(let $t=0;$t<ht;++$t)Lt[$t]=new Uint8ClampedArray(K[$t]),Ht[$t]=[0,0,0,0];for(let $t=0;$t<_t;$t+=4){for(let Qt=0;Qt<ht;++Qt){const _e=Lt[Qt];Ht[Qt][0]=_e[$t],Ht[Qt][1]=_e[$t+1],Ht[Qt][2]=_e[$t+2],Ht[Qt][3]=_e[$t+3]}const ae=L(Ht,G);Tt[$t]=ae[0],Tt[$t+1]=ae[1],Tt[$t+2]=ae[2],Tt[$t+3]=ae[3]}return Tt.buffer}}function P(L,p){const R=Object.keys(L.lib||{}).map(function(G){return"const "+G+" = "+L.lib[G].toString()+";"}).concat(["const __minion__ = ("+e.toString()+")(",L.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),K=new Worker(typeof Blob>"u"?"data:text/javascript;base64,"+Buffer.from(R.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(R,{type:"text/javascript"})));return K.addEventListener("message",p),K}class T extends _.Z{constructor(p){let M;super(),this._imageOps=!!p.imageOps,M=0===p.threads?0:this._imageOps?1:p.threads||1;const R=new Array(M);if(M)for(let K=0;K<M;++K)R[K]=P(p,this._onWorkerMessage.bind(this,K));else R[0]=function x(L,p){const M=e(L.operation);let R=!1;return{postMessage:function(K){setTimeout(function(){R||p({data:{buffer:M(K),meta:K.meta}})},0)},terminate:function(){R=!0}}}(p,this._onWorkerMessage.bind(this,0));this._workers=R,this._queue=[],this._maxQueueLength=p.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(p,M,R){this._enqueue({inputs:p,meta:M,callback:R}),this._dispatch()}_enqueue(p){for(this._queue.push(p);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return;const p=this._queue.shift();this._job=p;const M=p.inputs[0].width,R=p.inputs[0].height,K=p.inputs.map(function(ut){return ut.data.buffer}),G=this._workers.length;if(this._running=G,1===G)return void this._workers[0].postMessage({buffers:K,meta:p.meta,imageOps:this._imageOps,width:M,height:R},K);const q=4*Math.ceil(p.inputs[0].data.length/4/G);for(let ut=0;ut<G;++ut){const ht=ut*q,_t=[];for(let Tt=0,Lt=K.length;Tt<Lt;++Tt)_t.push(K[Tt].slice(ht,ht+q));this._workers[ut].postMessage({buffers:_t,meta:p.meta,imageOps:this._imageOps,width:M,height:R},_t)}}_onWorkerMessage(p,M){this.disposed||(this._dataLookup[p]=M.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const p=this._job,M=this._workers.length;let R,K;if(1===M)R=new Uint8ClampedArray(this._dataLookup[0].buffer),K=this._dataLookup[0].meta;else{const G=p.inputs[0].data.length;R=new Uint8ClampedArray(G),K=new Array(M);const J=4*Math.ceil(G/4/M);for(let q=0;q<M;++q){const ht=q*J;R.set(new Uint8ClampedArray(this._dataLookup[q].buffer),ht),K[q]=this._dataLookup[q].meta}}this._job=null,this._dataLookup={},p.callback(null,function m(L,p,M){if(i)return new ImageData(L,p,M);l||(l=document.createElement("canvas").getContext("2d"));const R=l.createImageData(p,M);return R.data.set(L),R}(R,p.inputs[0].width,p.inputs[0].height),K),this._dispatch()}disposeInternal(){for(let p=0;p<this._workers.length;++p)this._workers[p].terminate();this._workers.length=0}}class D extends g.ZP{constructor(p,M,R){super(p),this.extent=M.extent,this.resolution=M.viewState.resolution/M.pixelRatio,this.data=R}}let O=null;function X(L,p){const M=L.getRenderer();if(!M)throw new Error("Unsupported layer type: "+L);if(!M.prepareFrame(p))return null;const R=p.size[0],K=p.size[1];if(0===R||0===K)return null;const G=M.renderFrame(p,null);let J;if(G instanceof HTMLCanvasElement)J=G;else{if(G&&(J=G.firstElementChild),!(J instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+J);if(J.width===R&&J.height===K)return J.getContext("2d").getImageData(0,0,R,K)}if(O){const q=O.canvas;q.width!==R||q.height!==K?O=(0,c.E4)(R,K,void 0,{willReadFrequently:!0}):O.clearRect(0,0,R,K)}else O=(0,c.E4)(R,K,void 0,{willReadFrequently:!0});return O.drawImage(J,0,0,R,K),O.getImageData(0,0,R,K)}function B(L){let p;return L instanceof w.Z?L instanceof h.Z?p=new S.Z({source:L}):L instanceof N.ZP&&(p=new j.Z({source:L})):p=L,p}const k=class C extends N.ZP{constructor(p){super({projection:null}),this.processor_=null,this.operationType_=void 0!==p.operationType?p.operationType:"pixel",this.threads_=void 0!==p.threads?p.threads:1,this.layers_=function dt(L){const p=L.length,M=new Array(p);for(let R=0;R<p;++R)M[R]=B(L[R]);return M}(p.sources);const M=this.changed.bind(this);for(let R=0,K=this.layers_.length;R<K;++R)this.layers_[R].addEventListener(Q.Z.CHANGE,M);var L;this.useResolutions_=null!==p.resolutions,this.tileQueue_=new v.Z(function(){return 1},this.changed.bind(this)),this.renderedImageCanvas_=null,this.frameState_={animate:!1,coordinateToPixelTransform:(0,u.Ue)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(L=this.layers_,L.map(function(p){return p.getLayerState()})),pixelRatio:1,pixelToCoordinateTransform:(0,u.Ue)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,f.sq)(this),renderTargets:{}},this.setAttributions(function(R){const K=[];for(let G=0,J=p.sources.length;G<J;++G){const q=p.sources[G],ut=q instanceof w.Z?q:q.getSource();if(!ut)continue;const ht=ut.getAttributions();if("function"==typeof ht){const _t=ht(R);K.push.apply(K,_t)}}return 0!==K.length?K:null}),void 0!==p.operation&&this.setOperation(p.operation,p.lib)}setOperation(p,M){this.processor_&&this.processor_.dispose(),this.processor_=new T({operation:p,imageOps:"image"===this.operationType_,queue:1,lib:M,threads:this.threads_}),this.changed()}updateFrameState_(p,M,R){const K=Object.assign({},this.frameState_);K.viewState=Object.assign({},K.viewState);const G=(0,s.qg)(p);K.size[0]=Math.ceil((0,s.dz)(p)/M),K.size[1]=Math.ceil((0,s.Cr)(p)/M),K.extent=[G[0]-K.size[0]*M/2,G[1]-K.size[1]*M/2,G[0]+K.size[0]*M/2,G[1]+K.size[1]*M/2],K.time=Date.now();const J=K.viewState;return J.center=G,J.projection=R,J.resolution=M,K}allSourcesReady_(){let M,p=!0;for(let R=0,K=this.layers_.length;R<K;++R)if(M=this.layers_[R].getSource(),!M||"ready"!==M.getState()){p=!1;break}return p}getImage(p,M,R,K){if(!this.allSourcesReady_())return null;M=this.findNearestResolution(M);const G=this.updateFrameState_(p,M,K);if(this.requestedFrameState_=G,this.renderedImageCanvas_){const J=this.renderedImageCanvas_.getResolution(),q=this.renderedImageCanvas_.getExtent();(M!==J||!(0,s.fS)(G.extent,q))&&(this.renderedImageCanvas_=null)}return(!this.renderedImageCanvas_||this.getRevision()!==this.renderedRevision_)&&this.processSources_(),G.tileQueue.loadMoreTiles(16,16),G.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const p=this.requestedFrameState_,M=this.layers_.length,R=new Array(M);for(let G=0;G<M;++G){p.layerIndex=G,p.renderTargets={};const J=X(this.layers_[G],p);if(!J)return;R[G]=J}const K={};this.dispatchEvent(new D("beforeoperations",p,K)),this.processor_.process(R,K,this.onWorkerComplete_.bind(this,p))}onWorkerComplete_(p,M,R,K){if(M||!R)return;const G=p.extent,J=p.viewState.resolution;if(J!==this.requestedFrameState_.viewState.resolution||!(0,s.fS)(G,this.requestedFrameState_.extent))return;let q;if(this.renderedImageCanvas_)q=this.renderedImageCanvas_.getImage().getContext("2d");else{const ut=Math.round((0,s.dz)(G)/J),ht=Math.round((0,s.Cr)(G)/J);q=(0,c.E4)(ut,ht),this.renderedImageCanvas_=new H.Z(G,J,1,q.canvas)}q.putImageData(R,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new D("afteroperations",p,K)),p.animate&&requestAnimationFrame(this.changed.bind(this))}getResolutions(p){if(!this.useResolutions_)return null;let M=super.getResolutions();if(!M)for(let R=0,K=this.layers_.length;R<K&&(M=this.layers_[R].getSource().getResolutions(p),!M);++R);return M}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}},2673:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>j});var _=r(4115),g=r(9015);function H(N){return N?Array.isArray(N)?function(w){return N}:"function"==typeof N?N:function(w){return[N]}:null}const j=class Q extends _.Z{constructor(w){super(),this.projection=(0,g.U2)(w.projection),this.attributions_=H(w.attributions),this.attributionsCollapsible_=void 0===w.attributionsCollapsible||w.attributionsCollapsible,this.loading=!1,this.state_=void 0!==w.state?w.state:"ready",this.wrapX_=void 0!==w.wrapX&&w.wrapX,this.interpolate_=!!w.interpolate,this.viewResolver=null,this.viewRejector=null;const S=this;this.viewPromise_=new Promise(function(v,h){S.viewResolver=v,S.viewRejector=h})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(w){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(w){this.attributions_=H(w),this.changed()}setState(w){this.state_=w,this.changed()}}},6027:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>s,s:()=>u});var _=r(3615),g=r(2673),Q=r(7450),H=r(4700),j=r(513),N=r(992),w=r(9015),S=r(5474),v=r(2705),h=r(931);class u extends _.ZP{constructor(i,l){super(i),this.tile=l}}const s=class c extends g.Z{constructor(i){super({attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,projection:i.projection,state:i.state,wrapX:i.wrapX,interpolate:i.interpolate}),this.opaque_=void 0!==i.opaque&&i.opaque,this.tilePixelRatio_=void 0!==i.tilePixelRatio?i.tilePixelRatio:1,this.tileGrid=void 0!==i.tileGrid?i.tileGrid:null,this.tileGrid&&(0,h.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new Q.Z(i.cacheSize||0),this.tmpSize=[0,0],this.key_=i.key||"",this.tileOptions={transition:i.transition,interpolate:i.interpolate},this.zDirection=i.zDirection?i.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(i,l){const m=this.getTileCacheForProjection(i);m&&m.expireCache(l)}forEachLoadedTile(i,l,m,e){const P=this.getTileCacheForProjection(i);if(!P)return!1;let T,U,D,x=!0;for(let C=m.minX;C<=m.maxX;++C)for(let O=m.minY;O<=m.maxY;++O)U=(0,S.lg)(l,C,O),D=!1,P.containsKey(U)&&(T=P.get(U),D=T.getState()===H.Z.LOADED,D&&(D=!1!==e(T))),D||(x=!1);return x}getGutterForProjection(i){return 0}getKey(){return this.key_}setKey(i){this.key_!==i&&(this.key_=i,this.changed())}getOpaque(i){return this.opaque_}getResolutions(i){const l=i?this.getTileGridForProjection(i):this.tileGrid;return l?l.getResolutions():null}getTile(i,l,m,e,P){return(0,j.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(i){return this.tileGrid?this.tileGrid:(0,v.X$)(i)}getTileCacheForProjection(i){const l=this.getProjection();return(0,N.h)(null===l||(0,w.OP)(l,i),68),this.tileCache}getTilePixelRatio(i){return this.tilePixelRatio_}getTilePixelSize(i,l,m){const e=this.getTileGridForProjection(m),P=this.getTilePixelRatio(l),x=(0,h.Pq)(e.getTileSize(i),this.tmpSize);return 1==P?x:(0,h.bA)(x,P,this.tmpSize)}getTileCoordForTileUrlFunction(i,l){l=void 0!==l?l:this.getProjection();const m=this.getTileGridForProjection(l);return this.getWrapX()&&l.isGlobal()&&(i=(0,v.Cf)(m,i,l)),(0,S.tE)(i,m)?i:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(i,l){const m=this.getTileCacheForProjection(l);i>m.highWaterMark&&(m.highWaterMark=i)}useTile(i,l,m,e){}}},3242:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>s});var _=r(3044),g=r(8879),Q=r(4353),H=r(7450),j=r(4700),N=r(886),w=r(9015),S=r(5474),v=r(2705),h=r(513);function u(f,i){f.getImage().src=i}const s=class c extends N.Z{constructor(i){super({attributions:i.attributions,cacheSize:i.cacheSize,opaque:i.opaque,projection:i.projection,state:i.state,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction?i.tileLoadFunction:u,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:i.wrapX,transition:i.transition,interpolate:void 0===i.interpolate||i.interpolate,key:i.key,attributionsCollapsible:i.attributionsCollapsible,zDirection:i.zDirection}),this.crossOrigin=void 0!==i.crossOrigin?i.crossOrigin:null,this.tileClass=void 0!==i.tileClass?i.tileClass:g.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=i.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const i in this.tileCacheForProjection)if(this.tileCacheForProjection[i].canExpireCache())return!0;return!1}expireCache(i,l){const m=this.getTileCacheForProjection(i);this.tileCache.expireCache(this.tileCache==m?l:{});for(const e in this.tileCacheForProjection){const P=this.tileCacheForProjection[e];P.expireCache(P==m?l:{})}}getGutterForProjection(i){return this.getProjection()&&i&&!(0,w.OP)(this.getProjection(),i)?0:this.getGutter()}getGutter(){return 0}getKey(){let i=super.getKey();return this.getInterpolate()||(i+=":disable-interpolation"),i}getOpaque(i){return!(this.getProjection()&&i&&!(0,w.OP)(this.getProjection(),i))&&super.getOpaque(i)}getTileGridForProjection(i){const l=this.getProjection();if(this.tileGrid&&(!l||(0,w.OP)(l,i)))return this.tileGrid;const m=(0,h.sq)(i);return m in this.tileGridForProjection||(this.tileGridForProjection[m]=(0,v.X$)(i)),this.tileGridForProjection[m]}getTileCacheForProjection(i){const l=this.getProjection();if(!l||(0,w.OP)(l,i))return this.tileCache;const m=(0,h.sq)(i);return m in this.tileCacheForProjection||(this.tileCacheForProjection[m]=new H.Z(this.tileCache.highWaterMark)),this.tileCacheForProjection[m]}createTile_(i,l,m,e,P,x){const T=[i,l,m],U=this.getTileCoordForTileUrlFunction(T,P),D=U?this.tileUrlFunction(U,e,P):void 0,C=new this.tileClass(T,void 0!==D?j.Z.IDLE:j.Z.EMPTY,void 0!==D?D:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return C.key=x,C.addEventListener(_.Z.CHANGE,this.handleTileChange.bind(this)),C}getTile(i,l,m,e,P){const x=this.getProjection();if(!x||!P||(0,w.OP)(x,P))return this.getTileInternal(i,l,m,e,x||P);const T=this.getTileCacheForProjection(P),U=[i,l,m];let D;const C=(0,S.km)(U);T.containsKey(C)&&(D=T.get(C));const O=this.getKey();if(D&&D.key==O)return D;const X=this.getTileGridForProjection(x),$=this.getTileGridForProjection(P),dt=this.getTileCoordForTileUrlFunction(U,P),B=new Q.Z(x,X,P,$,U,dt,this.getTilePixelRatio(e),this.getGutter(),(k,L,p,M)=>this.getTileInternal(k,L,p,M,x),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return B.key=O,D?(B.interimTile=D,B.refreshInterimChain(),T.replace(C,B)):T.set(C,B),B}getTileInternal(i,l,m,e,P){let x=null;const T=(0,S.lg)(i,l,m),U=this.getKey();if(this.tileCache.containsKey(T)){if(x=this.tileCache.get(T),x.key!=U){const D=x;x=this.createTile_(i,l,m,e,P,U),x.interimTile=D.getState()==j.Z.IDLE?D.interimTile:D,x.refreshInterimChain(),this.tileCache.replace(T,x)}}else x=this.createTile_(i,l,m,e,P,U),this.tileCache.set(T,x);return x}setRenderReprojectionEdges(i){if(this.renderReprojectionEdges_!=i){this.renderReprojectionEdges_=i;for(const l in this.tileCacheForProjection)this.tileCacheForProjection[l].clear();this.changed()}}setTileGridForProjection(i,l){const m=(0,w.U2)(i);if(m){const e=(0,h.sq)(m);e in this.tileGridForProjection||(this.tileGridForProjection[e]=l)}}clear(){super.clear();for(const i in this.tileCacheForProjection)this.tileCacheForProjection[i].clear()}}},3298:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>s});var _=r(3242),g=r(4910),Q=r(6941),H=r(992),j=r(9543),N=r(931),w=r(5114),S=r(7531),v=r(9015),h=r(4331),c=r(5474);const s=class u extends _.Z{constructor(i){i=i||{};const l=Object.assign({},i.params);super({attributions:i.attributions,attributionsCollapsible:i.attributionsCollapsible,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:i.interpolate,opaque:!(!("TRANSPARENT"in l)||l.TRANSPARENT),projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,zDirection:i.zDirection}),this.gutter_=void 0!==i.gutter?i.gutter:0,this.params_=l,this.v13_=!0,this.serverType_=i.serverType,this.hidpi_=void 0===i.hidpi||i.hidpi,this.tmpExtent_=(0,j.lJ)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(i,l,m,e){const P=(0,v.U2)(m),x=this.getProjection();let T=this.getTileGrid();T||(T=this.getTileGridForProjection(P));const U=T.getZForResolution(l,this.zDirection),D=T.getTileCoordForCoordAndZ(i,U);if(T.getResolutions().length<=D[0])return;let C=T.getResolution(D[0]),O=T.getTileCoordExtent(D,this.tmpExtent_),X=(0,N.Pq)(T.getTileSize(D[0]),this.tmpSize);const $=this.gutter_;0!==$&&(X=(0,N.f3)(X,$,this.tmpSize),O=(0,j.f3)(O,C*$,O)),x&&x!==P&&(C=(0,w.aA)(x,P,i,C),O=(0,v.$A)(O,P,x),i=(0,v.vs)(i,P,x));const dt={SERVICE:"WMS",VERSION:g.e,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(dt,this.params_,e);const B=Math.floor((i[0]-O[0])/C),k=Math.floor((O[3]-i[1])/C);return dt[this.v13_?"I":"X"]=B,dt[this.v13_?"J":"Y"]=k,this.getRequestUrl_(D,X,O,1,x||P,dt)}getLegendUrl(i,l){if(void 0===this.urls[0])return;const m={SERVICE:"WMS",VERSION:g.e,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===l||void 0===l.LAYER){const e=this.params_.LAYERS;if(Array.isArray(e)&&1!==e.length)return;m.LAYER=e}if(void 0!==i){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1;m.SCALE=i*e/28e-5}return Object.assign(m,l),(0,Q.B)(this.urls[0],m)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(i,l,m,e,P,x){const T=this.urls;if(!T)return;if(x.WIDTH=l[0],x.HEIGHT=l[1],x[this.v13_?"CRS":"SRS"]=P.getCode(),"STYLES"in this.params_||(x.STYLES=""),1!=e)switch(this.serverType_){case"geoserver":const O=90*e+.5|0;"FORMAT_OPTIONS"in x?x.FORMAT_OPTIONS+=";dpi:"+O:x.FORMAT_OPTIONS="dpi:"+O;break;case"mapserver":x.MAP_RESOLUTION=90*e;break;case"carmentaserver":case"qgis":x.DPI=90*e;break;default:(0,H.h)(!1,52)}const U=P.getAxisOrientation(),D=m;if(this.v13_&&"ne"==U.substr(0,2)){let O;O=m[0],D[0]=m[1],D[1]=O,O=m[2],D[2]=m[3],D[3]=O}let C;return x.BBOX=D.join(","),C=1==T.length?T[0]:T[(0,h.$W)((0,c.vp)(i),T.length)],(0,Q.B)(C,x)}getTilePixelRatio(i){return this.hidpi_&&void 0!==this.serverType_?i:1}getKeyForParams_(){let i=0;const l=[];for(const m in this.params_)l[i++]=m+"-"+this.params_[m];return l.join("/")}updateParams(i){Object.assign(this.params_,i),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){this.v13_=(0,S.n)(this.params_.VERSION||g.e,"1.3")>=0}tileUrlFunction(i,l,m){let e=this.getTileGrid();if(e||(e=this.getTileGridForProjection(m)),e.getResolutions().length<=i[0])return;1!=l&&(!this.hidpi_||void 0===this.serverType_)&&(l=1);const P=e.getResolution(i[0]);let x=e.getTileCoordExtent(i,this.tmpExtent_),T=(0,N.Pq)(e.getTileSize(i[0]),this.tmpSize);const U=this.gutter_;0!==U&&(T=(0,N.f3)(T,U,this.tmpSize),x=(0,j.f3)(x,P*U,x)),1!=l&&(T=(0,N.bA)(T,l,this.tmpSize));const D={SERVICE:"WMS",VERSION:g.e,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(D,this.params_),this.getRequestUrl_(i,T,x,l,m,D)}}},886:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>S});var g=r(6027),Q=r(4700),H=r(5809),j=r(5474),N=r(513);class w extends g.Z{constructor(h){super({attributions:h.attributions,cacheSize:h.cacheSize,opaque:h.opaque,projection:h.projection,state:h.state,tileGrid:h.tileGrid,tilePixelRatio:h.tilePixelRatio,wrapX:h.wrapX,transition:h.transition,interpolate:h.interpolate,key:h.key,attributionsCollapsible:h.attributionsCollapsible,zDirection:h.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===w.prototype.tileUrlFunction,this.tileLoadFunction=h.tileLoadFunction,h.tileUrlFunction&&(this.tileUrlFunction=h.tileUrlFunction),this.urls=null,h.urls?this.setUrls(h.urls):h.url&&this.setUrl(h.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(h){const c=h.target,u=(0,N.sq)(c),s=c.getState();let f;s==Q.Z.LOADING?(this.tileLoadingKeys_[u]=!0,f="tileloadstart"):u in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[u],f=s==Q.Z.ERROR?"tileloaderror":s==Q.Z.LOADED?"tileloadend":void 0),null!=f&&this.dispatchEvent(new g.s(f,c))}setTileLoadFunction(h){this.tileCache.clear(),this.tileLoadFunction=h,this.changed()}setTileUrlFunction(h,c){this.tileUrlFunction=h,this.tileCache.pruneExceptNewestZ(),typeof c<"u"?this.setKey(c):this.changed()}setUrl(h){const c=(0,H.Gk)(h);this.urls=c,this.setUrls(c)}setUrls(h){this.urls=h;const c=h.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,H.uR)(h,this.tileGrid),c):this.setKey(c)}tileUrlFunction(h,c,u){}useTile(h,c,u){const s=(0,j.lg)(h,c,u);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}const S=w},3149:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>U});var _=r(9573),g=r(448),Q=r(3615),H=r(3044),j=r(8296),N=r(3036),w=r(9543),S=r(513),v=r(9306);const c=class h{constructor(C){this.rbush_=new N(C),this.items_={}}insert(C,O){const X={minX:C[0],minY:C[1],maxX:C[2],maxY:C[3],value:O};this.rbush_.insert(X),this.items_[(0,S.sq)(O)]=X}load(C,O){const X=new Array(O.length);for(let $=0,dt=O.length;$<dt;$++){const B=C[$],k=O[$],L={minX:B[0],minY:B[1],maxX:B[2],maxY:B[3],value:k};X[$]=L,this.items_[(0,S.sq)(k)]=L}this.rbush_.load(X)}remove(C){const O=(0,S.sq)(C),X=this.items_[O];return delete this.items_[O],null!==this.rbush_.remove(X)}update(C,O){const X=this.items_[(0,S.sq)(O)];(0,w.fS)([X.minX,X.minY,X.maxX,X.maxY],C)||(this.remove(O),this.insert(C,O))}getAll(){return this.rbush_.all().map(function(O){return O.value})}getInExtent(C){return this.rbush_.search({minX:C[0],minY:C[1],maxX:C[2],maxY:C[3]}).map(function($){return $.value})}forEach(C){return this.forEach_(this.getAll(),C)}forEachInExtent(C,O){return this.forEach_(this.getInExtent(C),O)}forEach_(C,O){let X;for(let $=0,dt=C.length;$<dt;$++)if(X=O(C[$]),X)return X;return X}isEmpty(){return(0,v.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(C){const O=this.rbush_.toJSON();return(0,w.T9)(O.minX,O.minY,O.maxX,O.maxY,C)}concat(C){this.rbush_.load(C.rbush_.all());for(const O in C.items_)this.items_[O]=C.items_[O]}};var u=r(2673),s=r(8051),f=r(1334),i=r(8742),l=r(992),m=r(142),e=r(2716),P=r(75);class x extends Q.ZP{constructor(C,O,X){super(C),this.feature=O,this.features=X}}const U=class T extends u.Z{constructor(C){super({attributions:(C=C||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===C.wrapX||C.wrapX}),this.loader_=f.Zn,this.format_=C.format,this.overlaps_=void 0===C.overlaps||C.overlaps,this.url_=C.url,void 0!==C.loader?this.loader_=C.loader:void 0!==this.url_&&((0,l.h)(this.format_,7),this.loader_=(0,P.Be)(this.url_,this.format_)),this.strategy_=void 0!==C.strategy?C.strategy:i.$6;const O=void 0===C.useSpatialIndex||C.useSpatialIndex;let X,$;this.featuresRtree_=O?new c:null,this.loadedExtentsRtree_=new c,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(C.features)?$=C.features:C.features&&(X=C.features,$=X.getArray()),!O&&void 0===X&&(X=new _.Z($)),void 0!==$&&this.addFeaturesInternal($),void 0!==X&&this.bindFeaturesCollection_(X)}addFeature(C){this.addFeatureInternal(C),this.changed()}addFeatureInternal(C){const O=(0,S.sq)(C);if(!this.addToIndex_(O,C))return void(this.featuresCollection_&&this.featuresCollection_.remove(C));this.setupChangeEvents_(O,C);const X=C.getGeometry();if(X){const $=X.getExtent();this.featuresRtree_&&this.featuresRtree_.insert($,C)}else this.nullGeometryFeatures_[O]=C;this.dispatchEvent(new x(s.Z.ADDFEATURE,C))}setupChangeEvents_(C,O){this.featureChangeKeys_[C]=[(0,e.oL)(O,H.Z.CHANGE,this.handleFeatureChange_,this),(0,e.oL)(O,j.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(C,O){let X=!0;const $=O.getId();return void 0!==$&&($.toString()in this.idIndex_?X=!1:this.idIndex_[$.toString()]=O),X&&((0,l.h)(!(C in this.uidIndex_),30),this.uidIndex_[C]=O),X}addFeatures(C){this.addFeaturesInternal(C),this.changed()}addFeaturesInternal(C){const O=[],X=[],$=[];for(let dt=0,B=C.length;dt<B;dt++){const k=C[dt],L=(0,S.sq)(k);this.addToIndex_(L,k)&&X.push(k)}for(let dt=0,B=X.length;dt<B;dt++){const k=X[dt],L=(0,S.sq)(k);this.setupChangeEvents_(L,k);const p=k.getGeometry();if(p){const M=p.getExtent();O.push(M),$.push(k)}else this.nullGeometryFeatures_[L]=k}if(this.featuresRtree_&&this.featuresRtree_.load(O,$),this.hasListener(s.Z.ADDFEATURE))for(let dt=0,B=X.length;dt<B;dt++)this.dispatchEvent(new x(s.Z.ADDFEATURE,X[dt]))}bindFeaturesCollection_(C){let O=!1;this.addEventListener(s.Z.ADDFEATURE,function(X){O||(O=!0,C.push(X.feature),O=!1)}),this.addEventListener(s.Z.REMOVEFEATURE,function(X){O||(O=!0,C.remove(X.feature),O=!1)}),C.addEventListener(g.Z.ADD,X=>{O||(O=!0,this.addFeature(X.element),O=!1)}),C.addEventListener(g.Z.REMOVE,X=>{O||(O=!0,this.removeFeature(X.element),O=!1)}),this.featuresCollection_=C}clear(C){if(C){for(const X in this.featureChangeKeys_)this.featureChangeKeys_[X].forEach(e.bN);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach($=>{this.removeFeatureInternal($)});for(const $ in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[$])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const O=new x(s.Z.CLEAR);this.dispatchEvent(O),this.changed()}forEachFeature(C){if(this.featuresRtree_)return this.featuresRtree_.forEach(C);this.featuresCollection_&&this.featuresCollection_.forEach(C)}forEachFeatureAtCoordinateDirect(C,O){return this.forEachFeatureInExtent([C[0],C[1],C[0],C[1]],function($){if($.getGeometry().intersectsCoordinate(C))return O($)})}forEachFeatureInExtent(C,O){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(C,O);this.featuresCollection_&&this.featuresCollection_.forEach(O)}forEachFeatureIntersectingExtent(C,O){return this.forEachFeatureInExtent(C,function(X){if(X.getGeometry().intersectsExtent(C)){const dt=O(X);if(dt)return dt}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let C;return this.featuresCollection_?C=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(C=this.featuresRtree_.getAll(),(0,v.x)(this.nullGeometryFeatures_)||(0,m.l7)(C,Object.values(this.nullGeometryFeatures_))),C}getFeaturesAtCoordinate(C){const O=[];return this.forEachFeatureAtCoordinateDirect(C,function(X){O.push(X)}),O}getFeaturesInExtent(C,O){if(this.featuresRtree_){if(!(O&&O.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(C);const $=(0,w.MV)(C,O);return[].concat(...$.map(dt=>this.featuresRtree_.getInExtent(dt)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(C,O){const X=C[0],$=C[1];let dt=null;const B=[NaN,NaN];let k=1/0;const L=[-1/0,-1/0,1/0,1/0];return O=O||f.uX,this.featuresRtree_.forEachInExtent(L,function(p){if(O(p)){const M=p.getGeometry(),R=k;if(k=M.closestPointXY(X,$,B,k),k<R){dt=p;const K=Math.sqrt(k);L[0]=X-K,L[1]=$-K,L[2]=X+K,L[3]=$+K}}}),dt}getExtent(C){return this.featuresRtree_.getExtent(C)}getFeatureById(C){const O=this.idIndex_[C.toString()];return void 0!==O?O:null}getFeatureByUid(C){const O=this.uidIndex_[C];return void 0!==O?O:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(C){const O=C.target,X=(0,S.sq)(O),$=O.getGeometry();if($){const B=$.getExtent();X in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[X],this.featuresRtree_&&this.featuresRtree_.insert(B,O)):this.featuresRtree_&&this.featuresRtree_.update(B,O)}else X in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(O),this.nullGeometryFeatures_[X]=O);const dt=O.getId();if(void 0!==dt){const B=dt.toString();this.idIndex_[B]!==O&&(this.removeFromIdIndex_(O),this.idIndex_[B]=O)}else this.removeFromIdIndex_(O),this.uidIndex_[X]=O;this.changed(),this.dispatchEvent(new x(s.Z.CHANGEFEATURE,O))}hasFeature(C){const O=C.getId();return void 0!==O?O in this.idIndex_:(0,S.sq)(C)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,v.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(C,O,X){const $=this.loadedExtentsRtree_,dt=this.strategy_(C,O,X);for(let B=0,k=dt.length;B<k;++B){const L=dt[B];$.forEachInExtent(L,function(M){return(0,w.r4)(M.extent,L)})||(++this.loadingExtentsCount_,this.dispatchEvent(new x(s.Z.FEATURESLOADSTART)),this.loader_.call(this,L,O,X,M=>{--this.loadingExtentsCount_,this.dispatchEvent(new x(s.Z.FEATURESLOADEND,void 0,M))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new x(s.Z.FEATURESLOADERROR))}),$.insert(L,{extent:L.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(C){const O=this.loadedExtentsRtree_;let X;O.forEachInExtent(C,function($){if((0,w.fS)($.extent,C))return X=$,!0}),X&&O.remove(X)}removeFeature(C){if(!C)return;const O=(0,S.sq)(C);O in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[O]:this.featuresRtree_&&this.featuresRtree_.remove(C),this.removeFeatureInternal(C)&&this.changed()}removeFeatureInternal(C){const O=(0,S.sq)(C),X=this.featureChangeKeys_[O];if(!X)return;X.forEach(e.bN),delete this.featureChangeKeys_[O];const $=C.getId();return void 0!==$&&delete this.idIndex_[$.toString()],delete this.uidIndex_[O],this.dispatchEvent(new x(s.Z.REMOVEFEATURE,C)),C}removeFromIdIndex_(C){let O=!1;for(const X in this.idIndex_)if(this.idIndex_[X]===C){delete this.idIndex_[X],O=!0;break}return O}setLoader(C){this.loader_=C}setUrl(C){(0,l.h)(this.format_,7),this.url_=C,this.setLoader((0,P.Be)(C,this.format_))}}},8051:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>_});const _={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},978:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>U,I:()=>D});var _=r(3044),g=r(8786),Q=r(4700);const j=class H extends g.Z{constructor(O,X,$,dt,B,k){super(O,X,k),this.extent=null,this.format_=dt,this.features_=null,this.projection=null,this.tileLoadFunction_=B,this.url_=$,this.key=$}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==Q.Z.IDLE&&(this.setState(Q.Z.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(O,X){this.setFeatures(O)}onError(){this.setState(Q.Z.ERROR)}setFeatures(O){this.features_=O,this.setState(Q.Z.LOADED)}setLoader(O){this.loader_=O}};var N=r(7450),w=r(1053),S=r(886),v=r(3842),h=r(513);const c=[],s=class u extends g.Z{constructor(O,X,$,dt){super(O,X,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.getSourceTiles=dt.bind(void 0,this),this.wrappedTileCoord=$}getContext(O){const X=(0,h.sq)(O);return X in this.context_||(this.context_[X]=(0,v.E4)(1,1,c)),this.context_[X]}hasContext(O){return(0,h.sq)(O)in this.context_}getImage(O){return this.hasContext(O)?this.getContext(O).canvas:null}getReplayState(O){const X=(0,h.sq)(O);return X in this.replayState_||(this.replayState_[X]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[X]}load(){this.getSourceTiles()}release(){for(const O in this.context_){const X=this.context_[O];(0,v.jy)(X),c.push(X.canvas),delete this.context_[O]}super.release()}};var f=r(2258),i=r(9543),l=r(2705),m=r(5474),e=r(9306),P=r(75),x=r(931);const U=class T extends S.Z{constructor(O){const X=O.projection||"EPSG:3857",$=O.extent||(0,l.Tl)(X),dt=O.tileGrid||(0,l.dl)({extent:$,maxResolution:O.maxResolution,maxZoom:void 0!==O.maxZoom?O.maxZoom:22,minZoom:O.minZoom,tileSize:O.tileSize||512});super({attributions:O.attributions,attributionsCollapsible:O.attributionsCollapsible,cacheSize:O.cacheSize,interpolate:!0,opaque:!1,projection:X,state:O.state,tileGrid:dt,tileLoadFunction:O.tileLoadFunction?O.tileLoadFunction:D,tileUrlFunction:O.tileUrlFunction,url:O.url,urls:O.urls,wrapX:void 0===O.wrapX||O.wrapX,transition:O.transition,zDirection:void 0===O.zDirection?1:O.zDirection}),this.format_=O.format?O.format:null,this.sourceTileCache=new N.Z(this.tileCache.highWaterMark),this.overlaps_=O.overlaps??!0,this.tileClass=O.tileClass?O.tileClass:j,this.tileGrids_={}}getFeaturesInExtent(O){const X=[],$=this.tileCache;if(0===$.getCount())return X;const dt=(0,m.Ul)($.peekFirstKey())[0],B=this.tileGrid;return $.forEach(function(k){if(k.tileCoord[0]!==dt||k.getState()!==Q.Z.LOADED)return;const L=k.getSourceTiles();for(let p=0,M=L.length;p<M;++p){const R=L[p];if((0,i.kK)(O,B.getTileCoordExtent(R.tileCoord))){const G=R.getFeatures();if(G)for(let J=0,q=G.length;J<q;++J){const ut=G[J],ht=ut.getGeometry();(0,i.kK)(O,ht.getExtent())&&X.push(ut)}}}}),X}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(O,X){const $=this.getTileCacheForProjection(O),dt=Object.keys(X).reduce((B,k)=>{const L=(0,m.MY)(k),p=$.peek(L);if(p){const M=p.sourceTiles;for(let R=0,K=M.length;R<K;++R)B[M[R].getKey()]=!0}return B},{});super.expireCache(O,X),this.sourceTileCache.expireCache(dt)}getSourceTiles(O,X,$){if($.getState()===Q.Z.IDLE){$.setState(Q.Z.LOADING);const dt=$.wrappedTileCoord,B=this.getTileGridForProjection(X),k=B.getTileCoordExtent(dt),p=B.getResolution(dt[0]);(0,i.f3)(k,-p,k);const M=this.tileGrid,R=M.getExtent();R&&(0,i.Ed)(k,R,k);const K=M.getZForResolution(p,this.zDirection);M.forEachTileCoord(k,K,G=>{const J=this.tileUrlFunction(G,O,X),q=this.sourceTileCache.containsKey(J)?this.sourceTileCache.get(J):new this.tileClass(G,J?Q.Z.IDLE:Q.Z.EMPTY,J,this.format_,this.tileLoadFunction);$.sourceTiles.push(q);const ut=q.getState();if(ut<Q.Z.LOADED){const ht=_t=>{this.handleTileChange(_t);const Tt=q.getState();if(Tt===Q.Z.LOADED||Tt===Q.Z.ERROR){const Lt=q.getKey();Lt in $.errorTileKeys?q.getState()===Q.Z.LOADED&&delete $.errorTileKeys[Lt]:$.loadingSourceTiles--,Tt===Q.Z.ERROR?$.errorTileKeys[Lt]=!0:q.removeEventListener(_.Z.CHANGE,ht),0===$.loadingSourceTiles&&$.setState((0,e.x)($.errorTileKeys)?Q.Z.LOADED:Q.Z.ERROR)}};q.addEventListener(_.Z.CHANGE,ht),$.loadingSourceTiles++}ut===Q.Z.IDLE&&(q.extent=M.getTileCoordExtent(G),q.projection=X,q.resolution=M.getResolution(G[0]),this.sourceTileCache.set(J,q),q.load())}),$.loadingSourceTiles||$.setState($.sourceTiles.some(G=>G.getState()===Q.Z.ERROR)?Q.Z.ERROR:Q.Z.LOADED)}return $.sourceTiles}getTile(O,X,$,dt,B){const k=(0,m.lg)(O,X,$),L=this.getKey();let p;if(this.tileCache.containsKey(k)&&(p=this.tileCache.get(k),p.key===L))return p;const M=[O,X,$];let R=this.getTileCoordForTileUrlFunction(M,B);const K=this.getTileGrid().getExtent(),G=this.getTileGridForProjection(B);if(R&&K){const ut=G.getTileCoordExtent(R);(0,i.f3)(ut,-G.getResolution(O),ut),(0,i.kK)(K,ut)||(R=null)}let J=!0;if(null!==R){const ut=this.tileGrid,ht=G.getResolution(O),_t=ut.getZForResolution(ht,1),Tt=G.getTileCoordExtent(R);(0,i.f3)(Tt,-ht,Tt),ut.forEachTileCoord(Tt,_t,Lt=>{J=J&&!this.tileUrlFunction(Lt,dt,B)})}const q=new s(M,J?Q.Z.EMPTY:Q.Z.IDLE,R,this.getSourceTiles.bind(this,dt,B));return q.key=L,p?(q.interimTile=p,q.refreshInterimChain(),this.tileCache.replace(k,q)):this.tileCache.set(k,q),q}getTileGridForProjection(O){const X=O.getCode();let $=this.tileGrids_[X];if(!$){const dt=this.tileGrid,B=dt.getResolutions().slice(),k=B.map(function(M,R){return dt.getOrigin(R)}),L=B.map(function(M,R){return dt.getTileSize(R)}),p=f.e+1;for(let M=B.length;M<p;++M)B.push(B[M-1]/2),k.push(k[M-1]),L.push(L[M-1]);$=new w.Z({extent:dt.getExtent(),origins:k,resolutions:B,tileSizes:L}),this.tileGrids_[X]=$}return $}getTilePixelRatio(O){return O}getTilePixelSize(O,X,$){const dt=this.getTileGridForProjection($),B=(0,x.Pq)(dt.getTileSize(O),this.tmpSize);return[Math.round(B[0]*X),Math.round(B[1]*X)]}updateCacheSize(O,X){super.updateCacheSize(2*O,X),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(X).highWaterMark}};function D(C,O){C.setLoader(function(X,$,dt){(0,P.ov)(O,C.getFormat(),X,$,dt,C.onLoad.bind(C),C.onError.bind(C))})}},6290:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>H});var _=r(3242),g=r(2705);const H=class Q extends _.Z{constructor(N){const w=void 0!==(N=N||{}).projection?N.projection:"EPSG:3857",S=void 0!==N.tileGrid?N.tileGrid:(0,g.dl)({extent:(0,g.Tl)(w),maxResolution:N.maxResolution,maxZoom:N.maxZoom,minZoom:N.minZoom,tileSize:N.tileSize});super({attributions:N.attributions,cacheSize:N.cacheSize,crossOrigin:N.crossOrigin,interpolate:N.interpolate,opaque:N.opaque,projection:w,reprojectionErrorThreshold:N.reprojectionErrorThreshold,tileGrid:S,tileLoadFunction:N.tileLoadFunction,tilePixelRatio:N.tilePixelRatio,tileUrlFunction:N.tileUrlFunction,url:N.url,urls:N.urls,wrapX:void 0===N.wrapX||N.wrapX,transition:N.transition,attributionsCollapsible:N.attributionsCollapsible,zDirection:N.zDirection}),this.gutter_=void 0!==N.gutter?N.gutter:0}getGutter(){return this.gutter_}}},4910:(Vt,gt,r)=>{"use strict";r.d(gt,{e:()=>_});const _="1.3.0"},7531:(Vt,gt,r)=>{"use strict";function _(Q,H,j){const N=void 0!==j?Q.toFixed(j):""+Q;let w=N.indexOf(".");return w=-1===w?N.length:w,w>H?N:new Array(1+H-w).join("0")+N}function g(Q,H){const j=(""+Q).split("."),N=(""+H).split(".");for(let w=0;w<Math.max(j.length,N.length);w++){const S=parseInt(j[w]||"0",10),v=parseInt(N[w]||"0",10);if(S>v)return 1;if(v>S)return-1}return 0}r.d(gt,{n:()=>g,v:()=>_})},795:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>Q});var _=r(2682);class g extends _.Z{constructor(j){super({points:1/0,fill:(j=j||{radius:5}).fill,radius:j.radius,stroke:j.stroke,scale:void 0!==j.scale?j.scale:1,rotation:void 0!==j.rotation?j.rotation:0,rotateWithView:void 0!==j.rotateWithView&&j.rotateWithView,displacement:void 0!==j.displacement?j.displacement:[0,0],declutterMode:j.declutterMode})}clone(){const j=this.getScale(),N=new g({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(j)?j.slice():j,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return N.setOpacity(this.getOpacity()),N}setRadius(j){this.radius_=j,this.render()}}const Q=g},694:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>g});class _{constructor(H){this.color_=void 0!==(H=H||{}).color?H.color:null}clone(){const H=this.getColor();return new _({color:Array.isArray(H)?H.slice():H||void 0})}getColor(){return this.color_}setColor(H){this.color_=H}}const g=_},5999:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>l});var _=r(3044),g=r(1501),Q=r(7182),H=r(866),j=r(992),N=r(1398),w=r(3842),S=r(9118),v=r(1309);let h=null;class c extends N.Z{constructor(e,P,x,T,U,D){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=T,this.canvas_={},this.color_=D,this.unlisten_=null,this.imageState_=U,this.size_=x,this.src_=P}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===g.Z.LOADED){h||(h=(0,w.E4)(1,1,void 0,{willReadFrequently:!0})),h.drawImage(this.image_,0,0);try{h.getImageData(0,0,1,1),this.tainted_=!1}catch{h=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(_.Z.CHANGE)}handleImageError_(){this.imageState_=g.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=g.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],P=this.size_[1],x=(0,w.E4)(e,P);x.fillRect(0,0,e,P),this.hitDetectionImage_=x.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===g.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=g.Z.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=(0,v.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==g.Z.LOADED)return;const P=this.image_,x=document.createElement("canvas");x.width=Math.ceil(P.width*e),x.height=Math.ceil(P.height*e);const T=x.getContext("2d");T.scale(e,e),T.drawImage(P,0,0),T.globalCompositeOperation="multiply",T.fillStyle=(0,H.XC)(this.color_),T.fillRect(0,0,x.width/e,x.height/e),T.globalCompositeOperation="destination-in",T.drawImage(P,0,0),this.canvas_[e]=x}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var f=r(513);class i extends Q.Z{constructor(e){super({opacity:void 0!==(e=e||{}).opacity?e.opacity:1,rotation:void 0!==e.rotation?e.rotation:0,scale:void 0!==e.scale?e.scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0],rotateWithView:void 0!==e.rotateWithView&&e.rotateWithView,declutterMode:e.declutterMode}),this.anchor_=void 0!==e.anchor?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==e.anchorOrigin?e.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==e.anchorXUnits?e.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==e.anchorYUnits?e.anchorYUnits:"fraction",this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null;const D=void 0!==e.img?e.img:null;this.imgSize_=e.imgSize;let C=e.src;(0,j.h)(!(void 0!==C&&D),4),(0,j.h)(!D||D&&this.imgSize_,5),(void 0===C||0===C.length)&&D&&(C=D.src||(0,f.sq)(D)),(0,j.h)(void 0!==C&&C.length>0,6),(0,j.h)(!((void 0!==e.width||void 0!==e.height)&&void 0!==e.scale),69);const O=void 0!==e.src?g.Z.IDLE:g.Z.LOADED;if(this.color_=void 0!==e.color?(0,H._2)(e.color):null,this.iconImage_=function u(m,e,P,x,T,U){let D=S.c.get(e,x,U);return D||(D=new c(m,e,P,x,T,U),S.c.set(e,x,U,D)),D}(D,C,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,O,this.color_),this.offset_=void 0!==e.offset?e.offset:[0,0],this.offsetOrigin_=void 0!==e.offsetOrigin?e.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==e.size?e.size:null,this.width_=e.width,this.height_=e.height,void 0!==this.width_||void 0!==this.height_){const X=this.getImage(1),$=()=>{this.updateScaleFromWidthAndHeight(this.width_,this.height_)};X.width>0?this.updateScaleFromWidthAndHeight(this.width_,this.height_):X.addEventListener("load",$)}}clone(){let e=this.getScale();return e=Array.isArray(e)?e.slice():e,(void 0!==this.width_||void 0!==this.height_)&&(e=void 0),new i({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode(),width:this.width_,height:this.height_})}updateScaleFromWidthAndHeight(e,P){const x=this.getImage(1);super.setScale(void 0!==e&&void 0!==P?[e/x.width,P/x.height]:void 0!==e?[e/x.width,e/x.width]:void 0!==P?[P/x.height,P/x.height]:[1,1])}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const T=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!T)return null;e=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(e[0]*=T[0]),"fraction"==this.anchorYUnits_&&(e[1]*=T[1])}if("top-left"!=this.anchorOrigin_){if(!T)return null;e===this.anchor_&&(e=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[0]=-e[0]+T[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(e[1]=-e[1]+T[1])}this.normalizedAnchor_=e}const P=this.getDisplacement(),x=this.getScaleArray();return[e[0]-P[0]/x[0],e[1]+P[1]/x[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if("top-left"!=this.offsetOrigin_){const P=this.getSize(),x=this.iconImage_.getSize();if(!P||!x)return null;e=e.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[0]=x[0]-P[0]-e[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(e[1]=x[1]-P[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){return this.width_}getHeight(){return this.height_}setWidth(e){this.width_=e,this.updateScaleFromWidthAndHeight(e,this.height_)}setHeight(e){this.height_=e,this.updateScaleFromWidthAndHeight(this.width_,e)}setScale(e){super.setScale(e);const P=this.getImage(1);if(P){const x=Array.isArray(e)?e[0]:e;void 0!==x&&(this.width_=x*P.width);const T=Array.isArray(e)?e[1]:e;void 0!==T&&(this.height_=T*P.height)}}listenImageChange(e){this.iconImage_.addEventListener(_.Z.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(_.Z.CHANGE,e)}}const l=i},9118:(Vt,gt,r)=>{"use strict";r.d(gt,{c:()=>j});var _=r(866);function Q(N,w,S){return w+":"+N+":"+(S?(0,_.XC)(S):"null")}const j=new class g{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let w=0;for(const S in this.cache_){const v=this.cache_[S];0==(3&w++)&&!v.hasListener()&&(delete this.cache_[S],--this.cacheSize_)}}}get(w,S,v){const h=Q(w,S,v);return h in this.cache_?this.cache_[h]:null}set(w,S,v,h){const c=Q(w,S,v);this.cache_[c]=h,++this.cacheSize_}setSize(w){this.maxCacheSize_=w,this.expire()}}},7182:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>H});var _=r(513),g=r(931);class Q{constructor(N){this.opacity_=N.opacity,this.rotateWithView_=N.rotateWithView,this.rotation_=N.rotation,this.scale_=N.scale,this.scaleArray_=(0,g.Pq)(N.scale),this.displacement_=N.displacement,this.declutterMode_=N.declutterMode}clone(){const N=this.getScale();return new Q({opacity:this.getOpacity(),scale:Array.isArray(N)?N.slice():N,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,_.O3)()}getImage(N){return(0,_.O3)()}getHitDetectionImage(){return(0,_.O3)()}getPixelRatio(N){return 1}getImageState(){return(0,_.O3)()}getImageSize(){return(0,_.O3)()}getOrigin(){return(0,_.O3)()}getSize(){return(0,_.O3)()}setDisplacement(N){this.displacement_=N}setOpacity(N){this.opacity_=N}setRotateWithView(N){this.rotateWithView_=N}setRotation(N){this.rotation_=N}setScale(N){this.scale_=N,this.scaleArray_=(0,g.Pq)(N)}listenImageChange(N){(0,_.O3)()}load(){(0,_.O3)()}unlistenImageChange(N){(0,_.O3)()}}const H=Q},2682:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>S});var _=r(1501),g=r(7182),Q=r(866),H=r(4890),j=r(3842),N=r(2768);class w extends g.Z{constructor(h){super({opacity:1,rotateWithView:void 0!==h.rotateWithView&&h.rotateWithView,rotation:void 0!==h.rotation?h.rotation:0,scale:void 0!==h.scale?h.scale:1,displacement:void 0!==h.displacement?h.displacement:[0,0],declutterMode:h.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==h.fill?h.fill:null,this.origin_=[0,0],this.points_=h.points,this.radius_=void 0!==h.radius?h.radius:h.radius1,this.radius2_=h.radius2,this.angle_=void 0!==h.angle?h.angle:0,this.stroke_=void 0!==h.stroke?h.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const h=this.getScale(),c=new w({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(h)?h.slice():h,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return c.setOpacity(this.getOpacity()),c}getAnchor(){const h=this.size_;if(!h)return null;const c=this.getDisplacement(),u=this.getScaleArray();return[h[0]/2-c[0]/u[0],h[1]/2+c[1]/u[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(h){this.fill_=h,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(h){let c=this.canvas_[h];if(!c){const u=this.renderOptions_,s=(0,j.E4)(u.size*h,u.size*h);this.draw_(u,s,h),c=s.canvas,this.canvas_[h]=c}return c}getPixelRatio(h){return h}getImageSize(){return this.size_}getImageState(){return _.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(h){this.stroke_=h,this.render()}listenImageChange(h){}load(){}unlistenImageChange(h){}calculateLineJoinSize_(h,c,u){if(0===c||this.points_===1/0||"bevel"!==h&&"miter"!==h)return c;let s=this.radius_,f=void 0===this.radius2_?s:this.radius2_;if(s<f){const L=s;s=f,f=L}const l=2*Math.PI/(void 0===this.radius2_?this.points_:2*this.points_),m=f*Math.sin(l),P=s-Math.sqrt(f*f-m*m),x=Math.sqrt(m*m+P*P),T=x/m;if("miter"===h&&T<=u)return T*c;const U=c/2/T,D=c/2*(P/x),O=Math.sqrt((s+U)*(s+U)+D*D)-s;if(void 0===this.radius2_||"bevel"===h)return 2*O;const X=s*Math.sin(l),dt=f-Math.sqrt(s*s-X*X),k=Math.sqrt(X*X+dt*dt)/X;return k<=u?2*Math.max(O,k*c/2-f-s):2*O}createRenderOptions(){let f,h=N.rc,c=0,u=null,s=0,i=0;this.stroke_&&(f=this.stroke_.getColor(),null===f&&(f=N.Tx),f=(0,H.y)(f),i=this.stroke_.getWidth(),void 0===i&&(i=N.yC),u=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset(),h=this.stroke_.getLineJoin(),void 0===h&&(h=N.rc),c=this.stroke_.getMiterLimit(),void 0===c&&(c=N.V4));const l=this.calculateLineJoinSize_(h,i,c),m=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:f,strokeWidth:i,size:Math.ceil(2*m+l),lineDash:u,lineDashOffset:s,lineJoin:h,miterLimit:c}}render(){this.renderOptions_=this.createRenderOptions();const h=this.renderOptions_.size;this.canvas_={},this.size_=[h,h]}draw_(h,c,u){if(c.scale(u,u),c.translate(h.size/2,h.size/2),this.createPath_(c),this.fill_){let s=this.fill_.getColor();null===s&&(s=N.bL),c.fillStyle=(0,H.y)(s),c.fill()}this.stroke_&&(c.strokeStyle=h.strokeStyle,c.lineWidth=h.strokeWidth,h.lineDash&&(c.setLineDash(h.lineDash),c.lineDashOffset=h.lineDashOffset),c.lineJoin=h.lineJoin,c.miterLimit=h.miterLimit,c.stroke())}createHitDetectionCanvas_(h){if(this.fill_){let c=this.fill_.getColor(),u=0;if("string"==typeof c&&(c=(0,Q._2)(c)),null===c?u=1:Array.isArray(c)&&(u=4===c.length?c[3]:1),0===u){const s=(0,j.E4)(h.size,h.size);this.hitDetectionCanvas_=s.canvas,this.drawHitDetectionCanvas_(h,s)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(h){let c=this.points_;const u=this.radius_;if(c===1/0)h.arc(0,0,u,0,2*Math.PI);else{const s=void 0===this.radius2_?u:this.radius2_;void 0!==this.radius2_&&(c*=2);const f=this.angle_-Math.PI/2,i=2*Math.PI/c;for(let l=0;l<c;l++){const m=f+l*i,e=l%2==0?u:s;h.lineTo(e*Math.cos(m),e*Math.sin(m))}h.closePath()}}drawHitDetectionCanvas_(h,c){c.translate(h.size/2,h.size/2),this.createPath_(c),c.fillStyle=N.bL,c.fill(),this.stroke_&&(c.strokeStyle=h.strokeStyle,c.lineWidth=h.strokeWidth,h.lineDash&&(c.setLineDash(h.lineDash),c.lineDashOffset=h.lineDashOffset),c.lineJoin=h.lineJoin,c.miterLimit=h.miterLimit,c.stroke())}}const S=w},5253:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>g});class _{constructor(H){this.color_=void 0!==(H=H||{}).color?H.color:null,this.lineCap_=H.lineCap,this.lineDash_=void 0!==H.lineDash?H.lineDash:null,this.lineDashOffset_=H.lineDashOffset,this.lineJoin_=H.lineJoin,this.miterLimit_=H.miterLimit,this.width_=H.width}clone(){const H=this.getColor();return new _({color:Array.isArray(H)?H.slice():H||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(H){this.color_=H}setLineCap(H){this.lineCap_=H}setLineDash(H){this.lineDash_=H}setLineDashOffset(H){this.lineDashOffset_=H}setLineJoin(H){this.lineJoin_=H}setMiterLimit(H){this.miterLimit_=H}setWidth(H){this.width_=H}}const g=_},1786:(Vt,gt,r)=>{"use strict";r.d(gt,{J$:()=>N,ZP:()=>c,yF:()=>S});var _=r(795),g=r(694),Q=r(5253),H=r(992);class j{constructor(s){s=s||{},this.geometry_=null,this.geometryFunction_=h,void 0!==s.geometry&&this.setGeometry(s.geometry),this.fill_=void 0!==s.fill?s.fill:null,this.image_=void 0!==s.image?s.image:null,this.renderer_=void 0!==s.renderer?s.renderer:null,this.hitDetectionRenderer_=void 0!==s.hitDetectionRenderer?s.hitDetectionRenderer:null,this.stroke_=void 0!==s.stroke?s.stroke:null,this.text_=void 0!==s.text?s.text:null,this.zIndex_=s.zIndex}clone(){let s=this.getGeometry();return s&&"object"==typeof s&&(s=s.clone()),new j({geometry:s,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(s){this.renderer_=s}setHitDetectionRenderer(s){this.hitDetectionRenderer_=s}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(s){this.fill_=s}getImage(){return this.image_}setImage(s){this.image_=s}getStroke(){return this.stroke_}setStroke(s){this.stroke_=s}getText(){return this.text_}setText(s){this.text_=s}getZIndex(){return this.zIndex_}setGeometry(s){"function"==typeof s?this.geometryFunction_=s:"string"==typeof s?this.geometryFunction_=function(f){return f.get(s)}:s?void 0!==s&&(this.geometryFunction_=function(){return s}):this.geometryFunction_=h,this.geometry_=s}setZIndex(s){this.zIndex_=s}}function N(u){let s;if("function"==typeof u)s=u;else{let f;Array.isArray(u)?f=u:((0,H.h)("function"==typeof u.getZIndex,41),f=[u]),s=function(){return f}}return s}let w=null;function S(u,s){if(!w){const f=new g.Z({color:"rgba(255,255,255,0.4)"}),i=new Q.Z({color:"#3399CC",width:1.25});w=[new j({image:new _.Z({fill:f,stroke:i,radius:5}),fill:f,stroke:i})]}return w}function h(u){return u.getGeometry()}const c=j},8185:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>j});var _=r(694),g=r(931);class H{constructor(w){this.font_=(w=w||{}).font,this.rotation_=w.rotation,this.rotateWithView_=w.rotateWithView,this.scale_=w.scale,this.scaleArray_=(0,g.Pq)(void 0!==w.scale?w.scale:1),this.text_=w.text,this.textAlign_=w.textAlign,this.justify_=w.justify,this.repeat_=w.repeat,this.textBaseline_=w.textBaseline,this.fill_=void 0!==w.fill?w.fill:new _.Z({color:"#333"}),this.maxAngle_=void 0!==w.maxAngle?w.maxAngle:Math.PI/4,this.placement_=void 0!==w.placement?w.placement:"point",this.overflow_=!!w.overflow,this.stroke_=void 0!==w.stroke?w.stroke:null,this.offsetX_=void 0!==w.offsetX?w.offsetX:0,this.offsetY_=void 0!==w.offsetY?w.offsetY:0,this.backgroundFill_=w.backgroundFill?w.backgroundFill:null,this.backgroundStroke_=w.backgroundStroke?w.backgroundStroke:null,this.padding_=void 0===w.padding?null:w.padding}clone(){const w=this.getScale();return new H({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(w)?w.slice():w,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(w){this.overflow_=w}setFont(w){this.font_=w}setMaxAngle(w){this.maxAngle_=w}setOffsetX(w){this.offsetX_=w}setOffsetY(w){this.offsetY_=w}setPlacement(w){this.placement_=w}setRepeat(w){this.repeat_=w}setRotateWithView(w){this.rotateWithView_=w}setFill(w){this.fill_=w}setRotation(w){this.rotation_=w}setScale(w){this.scale_=w,this.scaleArray_=(0,g.Pq)(void 0!==w?w:1)}setStroke(w){this.stroke_=w}setText(w){this.text_=w}setTextAlign(w){this.textAlign_=w}setJustify(w){this.justify_=w}setTextBaseline(w){this.textBaseline_=w}setBackgroundFill(w){this.backgroundFill_=w}setBackgroundStroke(w){this.backgroundStroke_=w}setPadding(w){this.padding_=w}}const j=H},5474:(Vt,gt,r)=>{"use strict";function _(S,v,h,c){return void 0!==c?(c[0]=S,c[1]=v,c[2]=h,c):[S,v,h]}function g(S,v,h){return S+"/"+v+"/"+h}function Q(S){return g(S[0],S[1],S[2])}function H(S){const[v,h,c]=S.substring(S.lastIndexOf("/")+1,S.length).split(",").map(Number);return g(v,h,c)}function j(S){return S.split("/").map(Number)}function N(S){return(S[1]<<S[0])+S[2]}function w(S,v){const h=S[0],c=S[1],u=S[2];if(v.getMinZoom()>h||h>v.getMaxZoom())return!1;const s=v.getFullTileRange(h);return!s||s.containsXY(c,u)}r.d(gt,{MY:()=>H,T9:()=>_,Ul:()=>j,km:()=>Q,lg:()=>g,tE:()=>w,vp:()=>N})},2705:(Vt,gt,r)=>{"use strict";r.d(gt,{Cf:()=>w,Tl:()=>u,X$:()=>N,dl:()=>v});var _=r(1053),g=r(2258),Q=r(9015),H=r(9543),j=r(931);function N(s){let f=s.getDefaultTileGrid();return f||(f=function c(s,f,i,l){return function S(s,f,i,l){l=void 0!==l?l:"top-left";const m=h(s,f,i);return new _.Z({extent:s,origin:(0,H.g0)(s,l),resolutions:m,tileSize:i})}(u(s),f,i,l)}(s),s.setDefaultTileGrid(f)),f}function w(s,f,i){const l=f[0],m=s.getTileCoordCenter(f),e=u(i);if(!(0,H.b8)(e,m)){const P=(0,H.dz)(e),x=Math.ceil((e[0]-m[0])/P);return m[0]+=P*x,s.getTileCoordForCoordAndZ(m,l)}return f}function v(s){const f=s||{},i=f.extent||(0,Q.U2)("EPSG:3857").getExtent(),l={extent:i,minZoom:f.minZoom,tileSize:f.tileSize,resolutions:h(i,f.maxZoom,f.tileSize,f.maxResolution)};return new _.Z(l)}function h(s,f,i,l){f=void 0!==f?f:g.e,i=(0,j.Pq)(void 0!==i?i:g.S);const m=(0,H.Cr)(s),e=(0,H.dz)(s);l=l>0?l:Math.max(e/i[0],m/i[1]);const P=f+1,x=new Array(P);for(let T=0;T<P;++T)x[T]=l/Math.pow(2,T);return x}function u(s){let f=(s=(0,Q.U2)(s)).getExtent();if(!f){const i=180*Q.Wm.degrees/s.getMetersPerUnit();f=(0,H.T9)(-i,-i,i,i)}return f}},1053:(Vt,gt,r)=>{"use strict";r.d(gt,{Z:()=>s});var _=r(828),g=r(2258),Q=r(992),H=r(4331),j=r(9543),N=r(5474),w=r(4429),S=r(142),v=r(931);const h=[0,0,0],s=class u{constructor(i){let l;if(this.minZoom=void 0!==i.minZoom?i.minZoom:0,this.resolutions_=i.resolutions,(0,Q.h)((0,S.pT)(this.resolutions_,function(e,P){return P-e},!0),17),!i.origins)for(let e=0,P=this.resolutions_.length-1;e<P;++e)if(l){if(this.resolutions_[e]/this.resolutions_[e+1]!==l){l=void 0;break}}else l=this.resolutions_[e]/this.resolutions_[e+1];this.zoomFactor_=l,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==i.origin?i.origin:null,this.origins_=null,void 0!==i.origins&&(this.origins_=i.origins,(0,Q.h)(this.origins_.length==this.resolutions_.length,20));const m=i.extent;void 0!==m&&!this.origin_&&!this.origins_&&(this.origin_=(0,j.rL)(m)),(0,Q.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==i.tileSizes&&(this.tileSizes_=i.tileSizes,(0,Q.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==i.tileSize?i.tileSize:this.tileSizes_?null:g.S,(0,Q.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==m?m:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==i.sizes?this.fullTileRanges_=i.sizes.map(function(e,P){const x=new _.Z(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1));if(m){const T=this.getTileRangeForExtentAndZ(m,P);x.minX=Math.max(T.minX,x.minX),x.maxX=Math.min(T.maxX,x.maxX),x.minY=Math.max(T.minY,x.minY),x.maxY=Math.min(T.maxY,x.maxY)}return x},this):m&&this.calculateTileRanges_(m)}forEachTileCoord(i,l,m){const e=this.getTileRangeForExtentAndZ(i,l);for(let P=e.minX,x=e.maxX;P<=x;++P)for(let T=e.minY,U=e.maxY;T<=U;++T)m([l,P,T])}forEachTileCoordParentTileRange(i,l,m,e){let P,x,T,U=null,D=i[0]-1;for(2===this.zoomFactor_?(x=i[1],T=i[2]):U=this.getTileCoordExtent(i,e);D>=this.minZoom;){if(2===this.zoomFactor_?(x=Math.floor(x/2),T=Math.floor(T/2),P=(0,_.T)(x,x,T,T,m)):P=this.getTileRangeForExtentAndZ(U,D,m),l(D,P))return!0;--D}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(i){return this.origin_?this.origin_:this.origins_[i]}getResolution(i){return this.resolutions_[i]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(i,l,m){if(i[0]<this.maxZoom){if(2===this.zoomFactor_){const P=2*i[1],x=2*i[2];return(0,_.T)(P,P+1,x,x+1,l)}const e=this.getTileCoordExtent(i,m||this.tmpExtent_);return this.getTileRangeForExtentAndZ(e,i[0]+1,l)}return null}getTileRangeForTileCoordAndZ(i,l,m){if(l>this.maxZoom||l<this.minZoom)return null;const e=i[0],P=i[1],x=i[2];if(l===e)return(0,_.T)(P,x,P,x,m);if(this.zoomFactor_){const U=Math.pow(this.zoomFactor_,l-e),D=Math.floor(P*U),C=Math.floor(x*U);if(l<e)return(0,_.T)(D,D,C,C,m);const O=Math.floor(U*(P+1))-1,X=Math.floor(U*(x+1))-1;return(0,_.T)(D,O,C,X,m)}const T=this.getTileCoordExtent(i,this.tmpExtent_);return this.getTileRangeForExtentAndZ(T,l,m)}getTileRangeExtent(i,l,m){const e=this.getOrigin(i),P=this.getResolution(i),x=(0,v.Pq)(this.getTileSize(i),this.tmpSize_);return(0,j.T9)(e[0]+l.minX*x[0]*P,e[1]+l.minY*x[1]*P,e[0]+(l.maxX+1)*x[0]*P,e[1]+(l.maxY+1)*x[1]*P,m)}getTileRangeForExtentAndZ(i,l,m){this.getTileCoordForXYAndZ_(i[0],i[3],l,!1,h);const e=h[1],P=h[2];return this.getTileCoordForXYAndZ_(i[2],i[1],l,!0,h),(0,_.T)(e,h[1],P,h[2],m)}getTileCoordCenter(i){const l=this.getOrigin(i[0]),m=this.getResolution(i[0]),e=(0,v.Pq)(this.getTileSize(i[0]),this.tmpSize_);return[l[0]+(i[1]+.5)*e[0]*m,l[1]-(i[2]+.5)*e[1]*m]}getTileCoordExtent(i,l){const m=this.getOrigin(i[0]),e=this.getResolution(i[0]),P=(0,v.Pq)(this.getTileSize(i[0]),this.tmpSize_),x=m[0]+i[1]*P[0]*e,T=m[1]-(i[2]+1)*P[1]*e;return(0,j.T9)(x,T,x+P[0]*e,T+P[1]*e,l)}getTileCoordForCoordAndResolution(i,l,m){return this.getTileCoordForXYAndResolution_(i[0],i[1],l,!1,m)}getTileCoordForXYAndResolution_(i,l,m,e,P){const x=this.getZForResolution(m),T=m/this.getResolution(x),U=this.getOrigin(x),D=(0,v.Pq)(this.getTileSize(x),this.tmpSize_);let C=T*(i-U[0])/m/D[0],O=T*(U[1]-l)/m/D[1];return e?(C=(0,H.mD)(C,5)-1,O=(0,H.mD)(O,5)-1):(C=(0,H.GW)(C,5),O=(0,H.GW)(O,5)),(0,N.T9)(x,C,O,P)}getTileCoordForXYAndZ_(i,l,m,e,P){const x=this.getOrigin(m),T=this.getResolution(m),U=(0,v.Pq)(this.getTileSize(m),this.tmpSize_);let D=(i-x[0])/T/U[0],C=(x[1]-l)/T/U[1];return e?(D=(0,H.mD)(D,5)-1,C=(0,H.mD)(C,5)-1):(D=(0,H.GW)(D,5),C=(0,H.GW)(C,5)),(0,N.T9)(m,D,C,P)}getTileCoordForCoordAndZ(i,l,m){return this.getTileCoordForXYAndZ_(i[0],i[1],l,!1,m)}getTileCoordResolution(i){return this.resolutions_[i[0]]}getTileSize(i){return this.tileSize_?this.tileSize_:this.tileSizes_[i]}getFullTileRange(i){return this.fullTileRanges_?this.fullTileRanges_[i]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,i):null}getZForResolution(i,l){const m=(0,S.h7)(this.resolutions_,i,l||0);return(0,H.uZ)(m,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(i,l){return(0,w.mV)(l,0,l.length,2,this.getTileCoordExtent(i))}calculateTileRanges_(i){const l=this.resolutions_.length,m=new Array(l);for(let e=this.minZoom;e<l;++e)m[e]=this.getTileRangeForExtentAndZ(i,e);this.fullTileRanges_=m}}},2258:(Vt,gt,r)=>{"use strict";r.d(gt,{S:()=>g,e:()=>_});const _=42,g=256},5809:(Vt,gt,r)=>{"use strict";r.d(gt,{Gk:()=>S,Un:()=>N,uR:()=>j});var _=r(992),g=r(4331),Q=r(5474);function H(v,h){const c=/\{z\}/g,u=/\{x\}/g,s=/\{y\}/g,f=/\{-y\}/g;return function(i,l,m){if(i)return v.replace(c,i[0].toString()).replace(u,i[1].toString()).replace(s,i[2].toString()).replace(f,function(){const P=h.getFullTileRange(i[0]);return(0,_.h)(P,55),(P.getHeight()-i[2]-1).toString()})}}function j(v,h){const c=v.length,u=new Array(c);for(let s=0;s<c;++s)u[s]=H(v[s],h);return N(u)}function N(v){return 1===v.length?v[0]:function(h,c,u){if(!h)return;const s=(0,Q.vp)(h),f=(0,g.$W)(s,v.length);return v[f](h,c,u)}}function S(v){const h=[];let c=/\{([a-z])-([a-z])\}/.exec(v);if(c){const u=c[1].charCodeAt(0),s=c[2].charCodeAt(0);let f;for(f=u;f<=s;++f)h.push(v.replace(c[0],String.fromCharCode(f)));return h}if(c=/\{(\d+)-(\d+)\}/.exec(v),c){const u=parseInt(c[2],10);for(let s=parseInt(c[1],10);s<=u;s++)h.push(v.replace(c[0],s.toString()));return h}return h.push(v),h}},7139:(Vt,gt,r)=>{"use strict";r.d(gt,{BB:()=>x,Iu:()=>s,Jp:()=>N,U1:()=>h,Ue:()=>H,bA:()=>c,lk:()=>S,mc:()=>j,n3:()=>u,nb:()=>m,nn:()=>v,qC:()=>f});var _=r(5063),g=r(992);const Q=new Array(6);function H(){return[1,0,0,1,0,0]}function j(T){return w(T,1,0,0,1,0,0)}function N(T,U){const D=T[0],C=T[1],O=T[2],X=T[3],$=T[4],dt=T[5],B=U[0],k=U[1],L=U[2],p=U[3],M=U[4],R=U[5];return T[0]=D*B+O*k,T[1]=C*B+X*k,T[2]=D*L+O*p,T[3]=C*L+X*p,T[4]=D*M+O*R+$,T[5]=C*M+X*R+dt,T}function w(T,U,D,C,O,X,$){return T[0]=U,T[1]=D,T[2]=C,T[3]=O,T[4]=X,T[5]=$,T}function S(T,U){return T[0]=U[0],T[1]=U[1],T[2]=U[2],T[3]=U[3],T[4]=U[4],T[5]=U[5],T}function v(T,U){const D=U[0],C=U[1];return U[0]=T[0]*D+T[2]*C+T[4],U[1]=T[1]*D+T[3]*C+T[5],U}function h(T,U){const D=Math.cos(U),C=Math.sin(U);return N(T,w(Q,D,C,-C,D,0,0))}function c(T,U,D){return N(T,w(Q,U,0,0,D,0,0))}function u(T,U,D){return w(T,U,0,0,D,0,0)}function s(T,U,D){return N(T,w(Q,1,0,0,1,U,D))}function f(T,U,D,C,O,X,$,dt){const B=Math.sin(X),k=Math.cos(X);return T[0]=C*k,T[1]=O*B,T[2]=-C*B,T[3]=O*k,T[4]=$*C*k-dt*C*B+U,T[5]=$*O*B+dt*O*k+D,T}function m(T,U){const D=function e(T){return T[0]*T[3]-T[1]*T[2]}(U);(0,g.h)(0!==D,32);const C=U[0],O=U[1],X=U[2],$=U[3],dt=U[4],B=U[5];return T[0]=$/D,T[1]=-O/D,T[2]=-X/D,T[3]=C/D,T[4]=(X*B-$*dt)/D,T[5]=-(C*B-O*dt)/D,T}let P;function x(T){const U="matrix("+T.join(", ")+")";if(_.Id)return U;const D=P||(P=document.createElement("div"));return D.style.transform=U,D.style.transform}},6941:(Vt,gt,r)=>{"use strict";function _(g,Q){const H=[];Object.keys(Q).forEach(function(N){null!=Q[N]&&H.push(N+"="+encodeURIComponent(Q[N]))});const j=H.join("&");return g=g.replace(/[?&]$/,""),(g+=g.includes("?")?"&":"?")+j}r.d(gt,{B:()=>_})},513:(Vt,gt,r)=>{"use strict";function _(){throw new Error("Unimplemented abstract method.")}r.d(gt,{O3:()=>_,sq:()=>Q});let g=0;function Q(j){return j.ol_uid||(j.ol_uid=String(++g))}},8809:(Vt,gt,r)=>{"use strict";r.d(gt,{A4:()=>f,C5:()=>P,Ei:()=>h,G3:()=>l,Me:()=>B,O:()=>T,Pr:()=>s,Qc:()=>S,RA:()=>e,T3:()=>x,Ve:()=>H,ZL:()=>D,c:()=>Q,fJ:()=>g,hg:()=>m,ke:()=>u,pc:()=>v,qk:()=>N,xc:()=>X,z:()=>c});var _=r(142);const g="http://www.w3.org/2001/XMLSchema-instance";function Q(k,L){return B().createElementNS(k,L)}function H(k,L){return j(k,L,[]).join("")}function j(k,L,p){if(k.nodeType==Node.CDATA_SECTION_NODE||k.nodeType==Node.TEXT_NODE)p.push(L?String(k.nodeValue).replace(/(\r\n|\r|\n)/g,""):k.nodeValue);else{let M;for(M=k.firstChild;M;M=M.nextSibling)j(M,L,p)}return p}function N(k){return"documentElement"in k}function S(k){return(new DOMParser).parseFromString(k,"application/xml")}function v(k,L){return function(p,M){const R=k.call(void 0!==L?L:this,p,M);void 0!==R&&(0,_.l7)(M[M.length-1],R)}}function h(k,L){return function(p,M){const R=k.call(void 0!==L?L:this,p,M);void 0!==R&&M[M.length-1].push(R)}}function c(k,L){return function(p,M){const R=k.call(void 0!==L?L:this,p,M);void 0!==R&&(M[M.length-1]=R)}}function u(k,L,p){return function(M,R){const K=k.call(void 0!==p?p:this,M,R);if(void 0!==K){const G=R[R.length-1],J=void 0!==L?L:M.localName;let q;J in G?q=G[J]:(q=[],G[J]=q),q.push(K)}}}function s(k,L,p){return function(M,R){const K=k.call(void 0!==p?p:this,M,R);void 0!==K&&(R[R.length-1][void 0!==L?L:M.localName]=K)}}function f(k,L){return function(p,M,R){k.call(void 0!==L?L:this,p,M,R),R[R.length-1].node.appendChild(p)}}function l(k,L){return function(p,M,R){let J=k;return void 0===J&&(J=R),Q(void 0!==L?L:M[M.length-1].node.namespaceURI,J)}}const m=l();function e(k,L){const p=L.length,M=new Array(p);for(let R=0;R<p;++R)M[R]=k[L[R]];return M}function P(k,L,p){let M,R;for(p=void 0!==p?p:{},M=0,R=k.length;M<R;++M)p[k[M]]=L;return p}function x(k,L,p,M){let R;for(R=L.firstElementChild;R;R=R.nextElementSibling){const K=k[R.namespaceURI];if(void 0!==K){const G=K[R.localName];void 0!==G&&G.call(M,R,p)}}}function T(k,L,p,M,R){return M.push(k),x(L,p,M,R),M.pop()}function D(k,L,p,M,R,K,G){return R.push(k),function U(k,L,p,M,R,K){const G=(void 0!==R?R:p).length;let J,q;for(let ut=0;ut<G;++ut)J=p[ut],void 0!==J&&(q=L.call(void 0!==K?K:this,J,M,void 0!==R?R[ut]:void 0),void 0!==q&&k[q.namespaceURI][q.localName].call(K,q,J,M))}(L,p,M,R,K,G),R.pop()}let C,$;function X(){return void 0===C&&typeof XMLSerializer<"u"&&(C=new XMLSerializer),C}function B(){return void 0===$&&typeof document<"u"&&($=document.implementation.createDocument("","",null)),$}}}]);